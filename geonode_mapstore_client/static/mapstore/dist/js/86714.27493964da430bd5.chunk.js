/*! For license information please see 86714.27493964da430bd5.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86714],{821417:(e,t,n)=>{"use strict";n.d(t,{GS:()=>o,K:()=>u});var i,o={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Bounce.In(2*e):.5*o.Bounce.Out(2*e-1)+.5}}},r="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},s=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=r()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]],s=!t;o&&!1===o.update(e,s)&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),a={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=a.Utils.Linear;return t<0?r(e[0],e[1],i):t>1?r(e[n],e[n-1],n-i):r(e[o],e[o+1>n?n:o+1],i-o)},Bezier:function(e,t){for(var n=0,i=e.length-1,o=Math.pow,r=a.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-t,i-s)*o(t,s)*e[s]*r(i,s);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=a.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(o=Math.floor(i=n*(1+t))),r(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],i-o)):t<0?e[0]-(r(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(r(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):r(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],i-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=a.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(i=[1],function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}),CatmullRom:function(e,t,n,i,o){var r=.5*(n-e),s=.5*(i-t),a=o*o;return(2*t-2*n+r+s)*(o*a)+(-3*t+3*n-2*r-s)*a+r*o+t}}},c=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),l=new s,u=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=o.Linear.None,this._interpolationFunction=a.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=c.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?r()+parseFloat(e):e:r(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,i){for(var o in n){var r=e[o],s=Array.isArray(r),a=s?"array":typeof r,c=!s&&Array.isArray(n[o]);if("undefined"!==a&&"function"!==a){if(c){var l=n[o];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,r)),n[o]=[r].concat(l)}if("object"!==a&&!s||!r||c)void 0===t[o]&&(t[o]=r),s||(t[o]*=1),i[o]=c?n[o].slice().reverse():t[o]||0;else{for(var u in t[o]=s?[]:{},r)t[o][u]=r[u];i[o]=s?[]:{},this._setupProperties(r,t[o],n[o],i[o])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=r()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=r()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=r()),void 0===t&&(t=!0),this._isPaused)return!0;var n,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var s=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,c=this._chainedTweens.length;a<c;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,i){for(var o in n)if(void 0!==t[o]){var r=t[o]||0,s=n[o],a=Array.isArray(e[o]),c=Array.isArray(s);!a&&c?e[o]=this._interpolationFunction(s,i):"object"==typeof s&&s?this._updateProperties(e[o],r,s,i):"number"==typeof(s=this._handleRelativeValue(r,s))&&(e[o]=r+(s-r)*i)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),d=(c.nextId,l);d.getAll.bind(d),d.removeAll.bind(d),d.add.bind(d),d.remove.bind(d),d.update.bind(d)},466570:e=>{"use strict";function t(e,t,i){i=i||2;var r,s,a,c,d,h,f,p=t&&t.length,m=p?t[0]*i:e.length,_=n(e,0,m,i,!0),g=[];if(!_||_.next===_.prev)return g;if(p&&(_=function(e,t,i,o){var r,s,a,c=[];for(r=0,s=t.length;r<s;r++)(a=n(e,t[r]*o,r<s-1?t[r+1]*o:e.length,o,!1))===a.next&&(a.steiner=!0),c.push(A(a));for(c.sort(l),r=0;r<c.length;r++)i=u(c[r],i);return i}(e,t,_,i)),e.length>80*i){r=a=e[0],s=c=e[1];for(var y=i;y<m;y+=i)(d=e[y])<r&&(r=d),(h=e[y+1])<s&&(s=h),d>a&&(a=d),h>c&&(c=h);f=0!==(f=Math.max(a-r,c-s))?32767/f:0}return o(_,g,i,r,s,f,0),g}function n(e,t,n,i,o){var r,s;if(o===C(e,t,n,i)>0)for(r=t;r<n;r+=i)s=w(r,e[r],e[r+1],s);else for(r=n-i;r>=t;r-=i)s=w(r,e[r],e[r+1],s);return s&&_(s,s.next)&&(E(s),s=s.next),s}function i(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(E(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function o(e,t,n,l,u,d,A){if(e){!A&&d&&function(e,t,n,i){var o=e;do{0===o.z&&(o.z=h(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,i,o,r,s,a,c,l=1;do{for(n=e,e=null,r=null,s=0;n;){for(s++,i=n,a=0,t=0;t<l&&(a++,i=i.nextZ);t++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||n.z<=i.z)?(o=n,n=n.nextZ,a--):(o=i,i=i.nextZ,c--),r?r.nextZ=o:e=o,o.prevZ=r,r=o;n=i}r.nextZ=null,l*=2}while(s>1)}(o)}(e,l,u,d);for(var f,p,m=e;e.prev!==e.next;)if(f=e.prev,p=e.next,d?s(e,l,u,d):r(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(p.i/n|0),E(e),e=p.next,m=p.next;else if((e=p)===m){A?1===A?o(e=a(i(e),t,n),t,n,l,u,d,2):2===A&&c(e,t,n,l,u,d):o(i(e),t,n,l,u,d,1);break}}}function r(e){var t=e.prev,n=e,i=e.next;if(m(t,n,i)>=0)return!1;for(var o=t.x,r=n.x,s=i.x,a=t.y,c=n.y,l=i.y,u=o<r?o<s?o:s:r<s?r:s,d=a<c?a<l?a:l:c<l?c:l,h=o>r?o>s?o:s:r>s?r:s,A=a>c?a>l?a:l:c>l?c:l,p=i.next;p!==t;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=A&&f(o,a,r,c,s,l,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function s(e,t,n,i){var o=e.prev,r=e,s=e.next;if(m(o,r,s)>=0)return!1;for(var a=o.x,c=r.x,l=s.x,u=o.y,d=r.y,A=s.y,p=a<c?a<l?a:l:c<l?c:l,_=u<d?u<A?u:A:d<A?d:A,g=a>c?a>l?a:l:c>l?c:l,y=u>d?u>A?u:A:d>A?d:A,b=h(p,_,t,n,i),v=h(g,y,t,n,i),T=e.prevZ,w=e.nextZ;T&&T.z>=b&&w&&w.z<=v;){if(T.x>=p&&T.x<=g&&T.y>=_&&T.y<=y&&T!==o&&T!==s&&f(a,u,c,d,l,A,T.x,T.y)&&m(T.prev,T,T.next)>=0)return!1;if(T=T.prevZ,w.x>=p&&w.x<=g&&w.y>=_&&w.y<=y&&w!==o&&w!==s&&f(a,u,c,d,l,A,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;T&&T.z>=b;){if(T.x>=p&&T.x<=g&&T.y>=_&&T.y<=y&&T!==o&&T!==s&&f(a,u,c,d,l,A,T.x,T.y)&&m(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;w&&w.z<=v;){if(w.x>=p&&w.x<=g&&w.y>=_&&w.y<=y&&w!==o&&w!==s&&f(a,u,c,d,l,A,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function a(e,t,n){var o=e;do{var r=o.prev,s=o.next.next;!_(r,s)&&g(r,o,o.next,s)&&v(r,s)&&v(s,r)&&(t.push(r.i/n|0),t.push(o.i/n|0),t.push(s.i/n|0),E(o),E(o.next),o=e=s),o=o.next}while(o!==e);return i(o)}function c(e,t,n,r,s,a){var c=e;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&p(c,l)){var u=T(c,l);return c=i(c,c.next),u=i(u,u.next),o(c,t,n,r,s,a,0),void o(u,t,n,r,s,a,0)}l=l.next}c=c.next}while(c!==e)}function l(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,i=t,o=e.x,r=e.y,s=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var a=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=o&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===o))return n}i=i.next}while(i!==t);if(!n)return null;var c,l=n,u=n.x,h=n.y,A=1/0;i=n;do{o>=i.x&&i.x>=u&&o!==i.x&&f(r<h?o:s,r,u,h,r<h?s:o,r,i.x,i.y)&&(c=Math.abs(r-i.y)/(o-i.x),v(i,e)&&(c<A||c===A&&(i.x>n.x||i.x===n.x&&d(n,i)))&&(n=i,A=c)),i=i.next}while(i!==l);return n}(e,t);if(!n)return t;var o=T(n,e);return i(o,o.next),i(n,n.next)}function d(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function h(e,t,n,i,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function A(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function f(e,t,n,i,o,r,s,a){return(o-s)*(t-a)>=(e-s)*(r-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(r-a)>=(o-s)*(i-a)}function p(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&g(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(v(e,t)&&v(t,e)&&function(e,t){var n=e,i=!1,o=(e.x+t.x)/2,r=(e.y+t.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||_(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function g(e,t,n,i){var o=b(m(e,t,n)),r=b(m(e,t,i)),s=b(m(n,i,e)),a=b(m(n,i,t));return o!==r&&s!==a||!(0!==o||!y(e,n,t))||!(0!==r||!y(e,i,t))||!(0!==s||!y(n,e,i))||!(0!==a||!y(n,t,i))}function y(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function b(e){return e>0?1:e<0?-1:0}function v(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function T(e,t){var n=new S(e.i,e.x,e.y),i=new S(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function w(e,t,n,i){var o=new S(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,t,n,i){for(var o=0,r=t,s=n-i;r<n;r+=i)o+=(e[s]-e[r])*(e[r+1]+e[s+1]),s=r;return o}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,i){var o=t&&t.length,r=o?t[0]*n:e.length,s=Math.abs(C(e,0,r,n));if(o)for(var a=0,c=t.length;a<c;a++){var l=t[a]*n,u=a<c-1?t[a+1]*n:e.length;s-=Math.abs(C(e,l,u,n))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,A=i[a+1]*n,f=i[a+2]*n;d+=Math.abs((e[h]-e[f])*(e[A+1]-e[h+1])-(e[h]-e[A])*(e[f+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,o=0;o<e.length;o++){for(var r=0;r<e[o].length;r++)for(var s=0;s<t;s++)n.vertices.push(e[o][r][s]);o>0&&(i+=e[o-1].length,n.holes.push(i))}return n}},391651:(e,t,n)=>{const{webm:i,mp4:o}=n(490427),r=()=>"undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,s=()=>"wakeLock"in navigator;e.exports=class{constructor(){if(this.enabled=!1,s()){this._wakeLock=null;const e=()=>{null!==this._wakeLock&&"visible"===document.visibilityState&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else r()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",i),this._addSourceToVideo(this.noSleepVideo,"mp4",o),this.noSleepVideo.addEventListener("loadedmetadata",(()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",(()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}))})))}_addSourceToVideo(e,t,n){var i=document.createElement("source");i.src=n,i.type=`video/${t}`,e.appendChild(i)}get isEnabled(){return this.enabled}enable(){return s()?navigator.wakeLock.request("screen").then((e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",(()=>{console.log("Wake Lock released.")}))})).catch((e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e})):r()?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval((()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))}),15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then((e=>(this.enabled=!0,e))).catch((e=>{throw this.enabled=!1,e}))}disable(){s()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):r()?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}},490427:e=>{e.exports={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}},794282:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({XTRANSLATE:"xTranslate",YTRANSLATE:"yTranslate",ZTRANSLATE:"zTranslate",XROTATE:"xRotate",YROTATE:"yRotate",ZROTATE:"zRotate",XSCALE:"xScale",YSCALE:"yScale",ZSCALE:"zScale",UNIFORMSCALE:"uniformScale"})},554630:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(660662),o=n(267980),r=n(369031),s=n(571804),a=n(419061),c=n(491446),l=n(605971),u=n(944479),d=n(305439),h=n(46362),A=n(794554),f=n(402330),p=n(769534);const m=new o.A;function _(e){const t=(e=(0,a.A)(e,a.A.EMPTY_OBJECT)).minimum,n=e.maximum;if(r.A.typeOf.object("min",t),r.A.typeOf.object("max",n),(0,c.A)(e.offsetAttribute)&&e.offsetAttribute===A.A.TOP)throw new l.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");const i=(0,a.A)(e.vertexFormat,p.A.DEFAULT);this._minimum=o.A.clone(t),this._maximum=o.A.clone(n),this._vertexFormat=i,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}_.fromDimensions=function(e){const t=(e=(0,a.A)(e,a.A.EMPTY_OBJECT)).dimensions;r.A.typeOf.object("dimensions",t),r.A.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),r.A.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),r.A.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=o.A.multiplyByScalar(t,.5,new o.A);return new _({minimum:o.A.negate(n,new o.A),maximum:n,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})},_.fromAxisAlignedBoundingBox=function(e){return r.A.typeOf.object("boundingBox",e),new _({minimum:e.minimum,maximum:e.maximum})},_.packedLength=2*o.A.packedLength+p.A.packedLength+1,_.pack=function(e,t,n){return r.A.typeOf.object("value",e),r.A.defined("array",t),n=(0,a.A)(n,0),o.A.pack(e._minimum,t,n),o.A.pack(e._maximum,t,n+o.A.packedLength),p.A.pack(e._vertexFormat,t,n+2*o.A.packedLength),t[n+2*o.A.packedLength+p.A.packedLength]=(0,a.A)(e._offsetAttribute,-1),t};const g=new o.A,y=new o.A,b=new p.A,v={minimum:g,maximum:y,vertexFormat:b,offsetAttribute:void 0};let T;_.unpack=function(e,t,n){r.A.defined("array",e),t=(0,a.A)(t,0);const i=o.A.unpack(e,t,g),s=o.A.unpack(e,t+o.A.packedLength,y),l=p.A.unpack(e,t+2*o.A.packedLength,b),u=e[t+2*o.A.packedLength+p.A.packedLength];return(0,c.A)(n)?(n._minimum=o.A.clone(i,n._minimum),n._maximum=o.A.clone(s,n._maximum),n._vertexFormat=p.A.clone(l,n._vertexFormat),n._offsetAttribute=-1===u?void 0:u,n):(v.offsetAttribute=-1===u?void 0:u,new _(v))},_.createGeometry=function(e){const t=e._minimum,n=e._maximum,r=e._vertexFormat;if(o.A.equals(t,n))return;const a=new h.A;let l,p;if(r.position&&(r.st||r.normal||r.tangent||r.bitangent)){if(r.position&&(p=new Float64Array(72),p[0]=t.x,p[1]=t.y,p[2]=n.z,p[3]=n.x,p[4]=t.y,p[5]=n.z,p[6]=n.x,p[7]=n.y,p[8]=n.z,p[9]=t.x,p[10]=n.y,p[11]=n.z,p[12]=t.x,p[13]=t.y,p[14]=t.z,p[15]=n.x,p[16]=t.y,p[17]=t.z,p[18]=n.x,p[19]=n.y,p[20]=t.z,p[21]=t.x,p[22]=n.y,p[23]=t.z,p[24]=n.x,p[25]=t.y,p[26]=t.z,p[27]=n.x,p[28]=n.y,p[29]=t.z,p[30]=n.x,p[31]=n.y,p[32]=n.z,p[33]=n.x,p[34]=t.y,p[35]=n.z,p[36]=t.x,p[37]=t.y,p[38]=t.z,p[39]=t.x,p[40]=n.y,p[41]=t.z,p[42]=t.x,p[43]=n.y,p[44]=n.z,p[45]=t.x,p[46]=t.y,p[47]=n.z,p[48]=t.x,p[49]=n.y,p[50]=t.z,p[51]=n.x,p[52]=n.y,p[53]=t.z,p[54]=n.x,p[55]=n.y,p[56]=n.z,p[57]=t.x,p[58]=n.y,p[59]=n.z,p[60]=t.x,p[61]=t.y,p[62]=t.z,p[63]=n.x,p[64]=t.y,p[65]=t.z,p[66]=n.x,p[67]=t.y,p[68]=n.z,p[69]=t.x,p[70]=t.y,p[71]=n.z,a.position=new d.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:p})),r.normal){const e=new Float32Array(72);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,e[12]=0,e[13]=0,e[14]=-1,e[15]=0,e[16]=0,e[17]=-1,e[18]=0,e[19]=0,e[20]=-1,e[21]=0,e[22]=0,e[23]=-1,e[24]=1,e[25]=0,e[26]=0,e[27]=1,e[28]=0,e[29]=0,e[30]=1,e[31]=0,e[32]=0,e[33]=1,e[34]=0,e[35]=0,e[36]=-1,e[37]=0,e[38]=0,e[39]=-1,e[40]=0,e[41]=0,e[42]=-1,e[43]=0,e[44]=0,e[45]=-1,e[46]=0,e[47]=0,e[48]=0,e[49]=1,e[50]=0,e[51]=0,e[52]=1,e[53]=0,e[54]=0,e[55]=1,e[56]=0,e[57]=0,e[58]=1,e[59]=0,e[60]=0,e[61]=-1,e[62]=0,e[63]=0,e[64]=-1,e[65]=0,e[66]=0,e[67]=-1,e[68]=0,e[69]=0,e[70]=-1,e[71]=0,a.normal=new d.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})}if(r.st){const e=new Float32Array(48);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,e[8]=1,e[9]=0,e[10]=0,e[11]=0,e[12]=0,e[13]=1,e[14]=1,e[15]=1,e[16]=0,e[17]=0,e[18]=1,e[19]=0,e[20]=1,e[21]=1,e[22]=0,e[23]=1,e[24]=1,e[25]=0,e[26]=0,e[27]=0,e[28]=0,e[29]=1,e[30]=1,e[31]=1,e[32]=1,e[33]=0,e[34]=0,e[35]=0,e[36]=0,e[37]=1,e[38]=1,e[39]=1,e[40]=0,e[41]=0,e[42]=1,e[43]=0,e[44]=1,e[45]=1,e[46]=0,e[47]=1,a.st=new d.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:2,values:e})}if(r.tangent){const e=new Float32Array(72);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=-1,e[13]=0,e[14]=0,e[15]=-1,e[16]=0,e[17]=0,e[18]=-1,e[19]=0,e[20]=0,e[21]=-1,e[22]=0,e[23]=0,e[24]=0,e[25]=1,e[26]=0,e[27]=0,e[28]=1,e[29]=0,e[30]=0,e[31]=1,e[32]=0,e[33]=0,e[34]=1,e[35]=0,e[36]=0,e[37]=-1,e[38]=0,e[39]=0,e[40]=-1,e[41]=0,e[42]=0,e[43]=-1,e[44]=0,e[45]=0,e[46]=-1,e[47]=0,e[48]=-1,e[49]=0,e[50]=0,e[51]=-1,e[52]=0,e[53]=0,e[54]=-1,e[55]=0,e[56]=0,e[57]=-1,e[58]=0,e[59]=0,e[60]=1,e[61]=0,e[62]=0,e[63]=1,e[64]=0,e[65]=0,e[66]=1,e[67]=0,e[68]=0,e[69]=1,e[70]=0,e[71]=0,a.tangent=new d.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})}if(r.bitangent){const e=new Float32Array(72);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=1,e[14]=0,e[15]=0,e[16]=1,e[17]=0,e[18]=0,e[19]=1,e[20]=0,e[21]=0,e[22]=1,e[23]=0,e[24]=0,e[25]=0,e[26]=1,e[27]=0,e[28]=0,e[29]=1,e[30]=0,e[31]=0,e[32]=1,e[33]=0,e[34]=0,e[35]=1,e[36]=0,e[37]=0,e[38]=1,e[39]=0,e[40]=0,e[41]=1,e[42]=0,e[43]=0,e[44]=1,e[45]=0,e[46]=0,e[47]=1,e[48]=0,e[49]=0,e[50]=1,e[51]=0,e[52]=0,e[53]=1,e[54]=0,e[55]=0,e[56]=1,e[57]=0,e[58]=0,e[59]=1,e[60]=0,e[61]=0,e[62]=1,e[63]=0,e[64]=0,e[65]=1,e[66]=0,e[67]=0,e[68]=1,e[69]=0,e[70]=0,e[71]=1,a.bitangent=new d.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})}l=new Uint16Array(36),l[0]=0,l[1]=1,l[2]=2,l[3]=0,l[4]=2,l[5]=3,l[6]=6,l[7]=5,l[8]=4,l[9]=7,l[10]=6,l[11]=4,l[12]=8,l[13]=9,l[14]=10,l[15]=8,l[16]=10,l[17]=11,l[18]=14,l[19]=13,l[20]=12,l[21]=15,l[22]=14,l[23]=12,l[24]=18,l[25]=17,l[26]=16,l[27]=19,l[28]=18,l[29]=16,l[30]=20,l[31]=21,l[32]=22,l[33]=20,l[34]=22,l[35]=23}else p=new Float64Array(24),p[0]=t.x,p[1]=t.y,p[2]=t.z,p[3]=n.x,p[4]=t.y,p[5]=t.z,p[6]=n.x,p[7]=n.y,p[8]=t.z,p[9]=t.x,p[10]=n.y,p[11]=t.z,p[12]=t.x,p[13]=t.y,p[14]=n.z,p[15]=n.x,p[16]=t.y,p[17]=n.z,p[18]=n.x,p[19]=n.y,p[20]=n.z,p[21]=t.x,p[22]=n.y,p[23]=n.z,a.position=new d.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:p}),l=new Uint16Array(36),l[0]=4,l[1]=5,l[2]=6,l[3]=4,l[4]=6,l[5]=7,l[6]=1,l[7]=0,l[8]=3,l[9]=1,l[10]=3,l[11]=2,l[12]=1,l[13]=6,l[14]=5,l[15]=1,l[16]=2,l[17]=6,l[18]=2,l[19]=3,l[20]=7,l[21]=2,l[22]=7,l[23]=6,l[24]=3,l[25]=0,l[26]=4,l[27]=3,l[28]=4,l[29]=7,l[30]=0,l[31]=1,l[32]=5,l[33]=0,l[34]=5,l[35]=4;const _=o.A.subtract(n,t,m),g=.5*o.A.magnitude(_);if((0,c.A)(e._offsetAttribute)){const t=p.length,n=e._offsetAttribute===A.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);a.applyOffset=new d.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.A({attributes:a,indices:l,primitiveType:f.A.TRIANGLES,boundingSphere:new i.A(o.A.ZERO,g),offsetAttribute:e._offsetAttribute})},_.getUnitBox=function(){return(0,c.A)(T)||(T=_.createGeometry(_.fromDimensions({dimensions:new o.A(1,1,1),vertexFormat:p.A.POSITION_ONLY}))),T};const w=_},854894:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(660662),o=n(267980),r=n(369031),s=n(571804),a=n(419061),c=n(491446),l=n(605971),u=n(944479),d=n(305439),h=n(46362),A=n(794554),f=n(402330);const p=new o.A;function m(e){const t=(e=(0,a.A)(e,a.A.EMPTY_OBJECT)).minimum,n=e.maximum;if(r.A.typeOf.object("min",t),r.A.typeOf.object("max",n),(0,c.A)(e.offsetAttribute)&&e.offsetAttribute===A.A.TOP)throw new l.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._min=o.A.clone(t),this._max=o.A.clone(n),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}m.fromDimensions=function(e){const t=(e=(0,a.A)(e,a.A.EMPTY_OBJECT)).dimensions;r.A.typeOf.object("dimensions",t),r.A.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),r.A.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),r.A.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=o.A.multiplyByScalar(t,.5,new o.A);return new m({minimum:o.A.negate(n,new o.A),maximum:n,offsetAttribute:e.offsetAttribute})},m.fromAxisAlignedBoundingBox=function(e){return r.A.typeOf.object("boundindBox",e),new m({minimum:e.minimum,maximum:e.maximum})},m.packedLength=2*o.A.packedLength+1,m.pack=function(e,t,n){return r.A.typeOf.object("value",e),r.A.defined("array",t),n=(0,a.A)(n,0),o.A.pack(e._min,t,n),o.A.pack(e._max,t,n+o.A.packedLength),t[n+2*o.A.packedLength]=(0,a.A)(e._offsetAttribute,-1),t};const _=new o.A,g=new o.A,y={minimum:_,maximum:g,offsetAttribute:void 0};m.unpack=function(e,t,n){r.A.defined("array",e),t=(0,a.A)(t,0);const i=o.A.unpack(e,t,_),s=o.A.unpack(e,t+o.A.packedLength,g),l=e[t+2*o.A.packedLength];return(0,c.A)(n)?(n._min=o.A.clone(i,n._min),n._max=o.A.clone(s,n._max),n._offsetAttribute=-1===l?void 0:l,n):(y.offsetAttribute=-1===l?void 0:l,new m(y))},m.createGeometry=function(e){const t=e._min,n=e._max;if(o.A.equals(t,n))return;const r=new h.A,a=new Uint16Array(24),l=new Float64Array(24);l[0]=t.x,l[1]=t.y,l[2]=t.z,l[3]=n.x,l[4]=t.y,l[5]=t.z,l[6]=n.x,l[7]=n.y,l[8]=t.z,l[9]=t.x,l[10]=n.y,l[11]=t.z,l[12]=t.x,l[13]=t.y,l[14]=n.z,l[15]=n.x,l[16]=t.y,l[17]=n.z,l[18]=n.x,l[19]=n.y,l[20]=n.z,l[21]=t.x,l[22]=n.y,l[23]=n.z,r.position=new d.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:l}),a[0]=4,a[1]=5,a[2]=5,a[3]=6,a[4]=6,a[5]=7,a[6]=7,a[7]=4,a[8]=0,a[9]=1,a[10]=1,a[11]=2,a[12]=2,a[13]=3,a[14]=3,a[15]=0,a[16]=0,a[17]=4,a[18]=1,a[19]=5,a[20]=2,a[21]=6,a[22]=3,a[23]=7;const m=o.A.subtract(n,t,p),_=.5*o.A.magnitude(m);if((0,c.A)(e._offsetAttribute)){const t=l.length,n=e._offsetAttribute===A.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);r.applyOffset=new d.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.A({attributes:r,indices:a,primitiveType:f.A.LINES,boundingSphere:new i.A(o.A.ZERO,_),offsetAttribute:e._offsetAttribute})};const b=m},297241:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(267980),o=n(369031);function r(){}Object.defineProperties(r.prototype,{credit:{get:function(){}}}),r.prototype.geocode=function(e){o.A.typeOf.string("query",e);const t=e.match(/[^\s,\n]+/g);if(2===t.length||3===t.length){let n=+t[0],o=+t[1];const r=3===t.length?+t[2]:300;if(isNaN(n)&&isNaN(o)){const e=/^(\d+.?\d*)([nsew])/i;for(let i=0;i<t.length;++i){const r=t[i].match(e);e.test(t[i])&&3===r.length&&(/^[ns]/i.test(r[2])?o=/^[n]/i.test(r[2])?+r[1]:-r[1]:/^[ew]/i.test(r[2])&&(n=/^[e]/i.test(r[2])?+r[1]:-r[1]))}}if(!isNaN(n)&&!isNaN(o)&&!isNaN(r)){const t={displayName:e,destination:i.A.fromDegrees(n,o,r)};return Promise.resolve([t])}}return Promise.resolve([])};const s=r},564453:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var i=n(961645),o=n(660662),r=n(267980),s=n(369031),a=n(672743),c=n(419061),l=n(491446),u=n(786101),d=n(955943),h=n(182348),A=n(41076),f=n(604752),p=n(165755),m=n(874915),_=n(954865),g=n(832698),y=n(589670),b=n(209202),v=n(307898),T=n(744603),w=n(123245),E=n(98055),S=n(862892),C=n(705302);function x(e){this.resource=e.resource,this.version=e.version,this.isHeightmap=e.isHeightmap,this.tileUrlTemplates=e.tileUrlTemplates,this.availability=e.availability,this.hasVertexNormals=e.hasVertexNormals,this.hasWaterMask=e.hasWaterMask,this.hasMetadata=e.hasMetadata,this.availabilityLevels=e.availabilityLevels,this.availabilityTilesLoaded=e.availabilityTilesLoaded,this.littleEndianExtensionSize=e.littleEndianExtensionSize,this.availabilityPromiseCache={}}function I(e){this.requestVertexNormals=(0,c.A)(e.requestVertexNormals,!1),this.requestWaterMask=(0,c.A)(e.requestWaterMask,!1),this.requestMetadata=(0,c.A)(e.requestMetadata,!0),this.ellipsoid=e.ellipsoid,this.heightmapWidth=65,this.heightmapStructure=void 0,this.hasWaterMask=!1,this.hasMetadata=!1,this.hasVertexNormals=!1,this.scheme=void 0,this.lastResource=void 0,this.layerJsonResource=void 0,this.previousError=void 0,this.availability=void 0,this.tilingScheme=void 0,this.levelZeroMaximumGeometricError=void 0,this.heightmapStructure=void 0,this.layers=[],this.attribution="",this.overallAvailability=[],this.overallMaxZoom=0,this.tileCredits=[]}async function P(e,t,n){if(!t.format){const t="The tile format is not specified in the layer.json file.";throw e.previousError=C.A.reportError(e.previousError,n,(0,l.A)(n)?n._errorEvent:void 0,t),new w.A(t)}if(!t.tiles||0===t.tiles.length){const t="The layer.json file does not specify any tile URL templates.";throw e.previousError=C.A.reportError(e.previousError,n,(0,l.A)(n)?n._errorEvent:void 0,t),new w.A(t)}let i=!1,o=!1,r=!1,s=!0,a=!1;if("heightmap-1.0"===t.format)a=!0,(0,l.A)(e.heightmapStructure)||(e.heightmapStructure={heightScale:.2,heightOffset:-1e3,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:65535}),o=!0,e.requestWaterMask=!0;else if(0!==t.format.indexOf("quantized-mesh-1.")){const i=`The tile format "${t.format}" is invalid or not supported.`;throw e.previousError=C.A.reportError(e.previousError,n,(0,l.A)(n)?n._errorEvent:void 0,i),new w.A(i)}const c=t.tiles,u=t.maxzoom;if(e.overallMaxZoom=Math.max(e.overallMaxZoom,u),t.projection&&"EPSG:4326"!==t.projection){if("EPSG:3857"!==t.projection){const i=`The projection "${t.projection}" is invalid or not supported.`;throw e.previousError=C.A.reportError(e.previousError,n,(0,l.A)(n)?n._errorEvent:void 0,i),new w.A(i)}e.tilingScheme=new A.A({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid})}else e.tilingScheme=new h.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});if(e.levelZeroMaximumGeometricError=E.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.heightmapWidth,e.tilingScheme.getNumberOfXTilesAtLevel(0)),t.scheme&&"tms"!==t.scheme&&"slippyMap"!==t.scheme){const i=`The scheme "${t.scheme}" is invalid or not supported.`;throw e.previousError=C.A.reportError(e.previousError,n,(0,l.A)(n)?n._errorEvent:void 0,i),new w.A(i)}let d;e.scheme=t.scheme,(0,l.A)(t.extensions)&&-1!==t.extensions.indexOf("octvertexnormals")?i=!0:(0,l.A)(t.extensions)&&-1!==t.extensions.indexOf("vertexnormals")&&(i=!0,s=!1),(0,l.A)(t.extensions)&&-1!==t.extensions.indexOf("watermask")&&(o=!0),(0,l.A)(t.extensions)&&-1!==t.extensions.indexOf("metadata")&&(r=!0);const f=t.metadataAvailability,p=t.available;let m;if((0,l.A)(p)&&!(0,l.A)(f)){m=new S.A(e.tilingScheme,p.length);for(let t=0;t<p.length;++t){const n=p[t],i=e.tilingScheme.getNumberOfYTilesAtLevel(t);(0,l.A)(e.overallAvailability[t])||(e.overallAvailability[t]=[]);for(let o=0;o<n.length;++o){const r=n[o],s=i-r.endY-1,a=i-r.startY-1;e.overallAvailability[t].push([r.startX,s,r.endX,a]),m.addAvailableTileRange(t,r.startX,s,r.endX,a)}}}else(0,l.A)(f)&&(d=new S.A(e.tilingScheme,u),m=new S.A(e.tilingScheme,u),e.overallAvailability[0]=[[0,0,1,0]],m.addAvailableTileRange(0,0,0,1,0));e.hasWaterMask=e.hasWaterMask||o,e.hasVertexNormals=e.hasVertexNormals||i,e.hasMetadata=e.hasMetadata||r,(0,l.A)(t.attribution)&&(e.attribution.length>0&&(e.attribution+=" "),e.attribution+=t.attribution),e.layers.push(new x({resource:e.lastResource,version:t.version,isHeightmap:a,tileUrlTemplates:c,availability:m,hasVertexNormals:i,hasWaterMask:o,hasMetadata:r,availabilityLevels:f,availabilityTilesLoaded:d,littleEndianExtensionSize:s}));const _=t.parentUrl;return!(0,l.A)(_)||((0,l.A)(m)?(e.lastResource=e.lastResource.getDerivedResource({url:_}),e.lastResource.appendForwardSlash(),e.layerJsonResource=e.lastResource.getDerivedResource({url:"layer.json"}),await D(e),!0):(console.log("A layer.json can't have a parentUrl if it does't have an available array."),!0))}async function D(e,t){try{const n=await e.layerJsonResource.fetchJson();return async function(e,t,n){await P(e,t,n);const i=e.overallAvailability.length;if(i>0){const t=e.availability=new S.A(e.tilingScheme,e.overallMaxZoom);for(let n=0;n<i;++n){const i=e.overallAvailability[n];for(let e=0;e<i.length;++e){const o=i[e];t.addAvailableTileRange(n,o[0],o[1],o[2],o[3])}}}if(e.attribution.length>0){const t=new a.A(e.attribution);e.tileCredits.push(t)}return!0}(e,n,t)}catch(n){return(0,l.A)(n)&&404===n.statusCode?(await P(e,{tilejson:"2.1.0",format:"heightmap-1.0",version:"1.0.0",scheme:"tms",tiles:["{z}/{x}/{y}.terrain?v={version}"]},t),!0):function(e,t,n){let i=`An error occurred while accessing ${e.layerJsonResource.url}.`;if((0,l.A)(t)&&(i+=`\n${t.message}`),e.previousError=C.A.reportError(e.previousError,n,(0,l.A)(n)?n._errorEvent:void 0,i),e.previousError.retry)return D(e,n);throw new w.A(i)}(e,n,t)}}function O(e){e=(0,c.A)(e,c.A.EMPTY_OBJECT),this._heightmapWidth=void 0,this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._hasMetadata=!1,this._scheme=void 0,this._ellipsoid=e.ellipsoid,this._requestVertexNormals=(0,c.A)(e.requestVertexNormals,!1),this._requestWaterMask=(0,c.A)(e.requestWaterMask,!1),this._requestMetadata=(0,c.A)(e.requestMetadata,!0),this._errorEvent=new d.A;let t=e.credit;"string"==typeof t&&(t=new a.A(t)),this._credit=t,this._availability=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._layers=void 0,this._ready=!1,this._tileCredits=void 0,this._readyPromise=Promise.resolve(!0),(0,l.A)(e.url)&&((0,u.A)("CesiumTerrainProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use CesiumTerrainProvider.fromIonAssetId or CesiumTerrainProvider.fromUrl instead."),this._readyPromise=O._initializeReadyPromise(e,this))}I.prototype.build=function(e){e._heightmapWidth=this.heightmapWidth,e._scheme=this.scheme;const t=(0,l.A)(this.lastResource.credits)?this.lastResource.credits:[];e._tileCredits=t.concat(this.tileCredits),e._availability=this.availability,e._tilingScheme=this.tilingScheme,e._requestWaterMask=this.requestWaterMask,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._heightmapStructure=this.heightmapStructure,e._layers=this.layers,e._hasWaterMask=this.hasWaterMask,e._hasVertexNormals=this.hasVertexNormals,e._hasMetadata=this.hasMetadata,e._ready=!0},O._initializeReadyPromise=async function(e,t){const n=await Promise.resolve(e.url),i=new I(e),o=T.A.createIfNeeded(n);return o.appendForwardSlash(),i.lastResource=o,i.layerJsonResource=i.lastResource.getDerivedResource({url:"layer.json"}),await D(i,t),i.build(t),!0};function L(e){return(0,l.A)(e)&&0!==e.length?{Accept:`application/vnd.quantized-mesh;extensions=${e.join("-")},application/octet-stream;q=0.9,*/*;q=0.01`}:{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9,*/*;q=0.01"}}function N(e,t,n,s,a,c){if(!(0,l.A)(a))return Promise.reject(new w.A("Terrain tile doesn't exist"));const u=a.tileUrlTemplates;if(0===u.length)return;let d;d=e._scheme&&"tms"!==e._scheme?n:e._tilingScheme.getNumberOfYTilesAtLevel(s)-n-1;const h=[];let A,_;e._requestVertexNormals&&a.hasVertexNormals&&h.push(a.littleEndianExtensionSize?"octvertexnormals":"vertexnormals"),e._requestWaterMask&&a.hasWaterMask&&h.push("watermask"),e._requestMetadata&&a.hasMetadata&&h.push("metadata");const b=u[(t+d+s)%u.length],v=a.resource;(0,l.A)(v._ionEndpoint)&&!(0,l.A)(v._ionEndpoint.externalType)?(0!==h.length&&(_={extensions:h.join("-")}),A=L(void 0)):A=L(h);const T=v.getDerivedResource({url:b,templateValues:{version:a.version,z:s,x:t,y:d},queryParameters:_,headers:A,request:c}).fetchArrayBuffer();return(0,l.A)(T)?T.then((function(c){return(0,l.A)(c)?(0,l.A)(e._heightmapStructure)?function(e,t){const n=new Uint16Array(t,0,e._heightmapWidth*e._heightmapWidth);return new p.A({buffer:n,childTileMask:new Uint8Array(t,n.byteLength,1)[0],waterMask:new Uint8Array(t,n.byteLength+1,t.byteLength-n.byteLength-1),width:e._heightmapWidth,height:e._heightmapWidth,structure:e._heightmapStructure,credits:e._tileCredits})}(e,c):function(e,t,n,s,a,c){const u=c.littleEndianExtensionSize;let d=0;const h=3*Float64Array.BYTES_PER_ELEMENT,A=4*Float64Array.BYTES_PER_ELEMENT,p=3*Uint16Array.BYTES_PER_ELEMENT;let _=Uint16Array.BYTES_PER_ELEMENT,b=3*_;const v=new DataView(t),T=new r.A(v.getFloat64(d,!0),v.getFloat64(d+8,!0),v.getFloat64(d+16,!0));d+=h;const w=v.getFloat32(d,!0);d+=Float32Array.BYTES_PER_ELEMENT;const E=v.getFloat32(d,!0);d+=Float32Array.BYTES_PER_ELEMENT;const S=new o.A(new r.A(v.getFloat64(d,!0),v.getFloat64(d+8,!0),v.getFloat64(d+16,!0)),v.getFloat64(d+h,!0));d+=A;const C=new r.A(v.getFloat64(d,!0),v.getFloat64(d+8,!0),v.getFloat64(d+16,!0));d+=h;const x=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const I=new Uint16Array(t,d,3*x);d+=x*p,x>65536&&(_=Uint32Array.BYTES_PER_ELEMENT,b=3*_);const P=I.subarray(0,x),D=I.subarray(x,2*x),O=I.subarray(2*x,3*x);i.A.zigZagDeltaDecode(P,D,O),d%_!=0&&(d+=_-d%_);const L=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const N=m.A.createTypedArrayFromArrayBuffer(x,t,d,3*L);d+=L*b;let M=0;const R=N.length;for(let e=0;e<R;++e){const t=N[e];N[e]=M-t,0===t&&++M}const F=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const B=m.A.createTypedArrayFromArrayBuffer(x,t,d,F);d+=F*_;const U=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const k=m.A.createTypedArrayFromArrayBuffer(x,t,d,U);d+=U*_;const V=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const H=m.A.createTypedArrayFromArrayBuffer(x,t,d,V);d+=V*_;const z=v.getUint32(d,!0);d+=Uint32Array.BYTES_PER_ELEMENT;const G=m.A.createTypedArrayFromArrayBuffer(x,t,d,z);let j,W;for(d+=z*_;d<v.byteLength;){const i=v.getUint8(d,!0);d+=Uint8Array.BYTES_PER_ELEMENT;const o=v.getUint32(d,u);if(d+=Uint32Array.BYTES_PER_ELEMENT,1===i&&e._requestVertexNormals)j=new Uint8Array(t,d,2*x);else if(2===i&&e._requestWaterMask)W=new Uint8Array(t,d,o);else if(4===i&&e._requestMetadata){const i=v.getUint32(d,!0);if(i>0){const o=(0,f.A)(new Uint8Array(t),d+Uint32Array.BYTES_PER_ELEMENT,i).available;if((0,l.A)(o))for(let t=0;t<o.length;++t){const i=n+t+1,r=o[t],s=e._tilingScheme.getNumberOfYTilesAtLevel(i);for(let t=0;t<r.length;++t){const n=r[t],o=s-n.endY-1,a=s-n.startY-1;e.availability.addAvailableTileRange(i,n.startX,o,n.endX,a),c.availability.addAvailableTileRange(i,n.startX,o,n.endX,a)}}}c.availabilityTilesLoaded.addAvailableTileRange(n,s,a,s,a)}d+=o}const q=5*e.getLevelMaximumGeometricError(n),Y=e._tilingScheme.tileXYToRectangle(s,a,n),X=g.A.fromRectangle(Y,w,E,e._tilingScheme.ellipsoid);return new y.A({center:T,minimumHeight:w,maximumHeight:E,boundingSphere:S,orientedBoundingBox:X,horizonOcclusionPoint:C,quantizedVertices:I,encodedNormals:j,indices:N,westIndices:B,southIndices:k,eastIndices:H,northIndices:G,westSkirtHeight:q,southSkirtHeight:q,eastSkirtHeight:q,northSkirtHeight:q,childTileMask:e.availability.computeChildMaskForTile(n,s,a),waterMask:W,credits:e._tileCredits})}(e,c,s,t,n,a):Promise.reject(new w.A("Mesh buffer doesn't exist."))})):void 0}function M(e,t,n,i){if(0===i)return;const o=e.availabilityLevels,r=i%o==0?i-o:(i/o|0)*o,s=1<<i-r;return{level:r,x:t/s|0,y:n/s|0}}function R(e,t,n,i,o,r){if(!(0,l.A)(o.availabilityLevels))return{result:!1};let s;const a=function(){delete o.availabilityPromiseCache[s]},c=o.availabilityTilesLoaded,u=o.availability;let d=M(o,t,n,i);for(;(0,l.A)(d);){if(u.isTileAvailable(d.level,d.x,d.y)&&!c.isTileAvailable(d.level,d.x,d.y)){let t;if(!r&&(s=`${d.level}-${d.x}-${d.y}`,t=o.availabilityPromiseCache[s],!(0,l.A)(t))){const n=new b.A({throttle:!1,throttleByServer:!0,type:v.A.TERRAIN});t=N(e,d.x,d.y,d.level,o,n),(0,l.A)(t)&&(o.availabilityPromiseCache[s]=t,t.then(a))}return{result:!0,promise:t}}d=M(o,d.x,d.y,d.level)}return{result:!1}}O.prototype.requestTileGeometry=function(e,t,n,i){const o=this._layers;let r;const s=o.length;let a=!1,c=Promise.resolve();if(1===s)r=o[0];else for(let i=0;i<s;++i){const s=o[i];if(!(0,l.A)(s.availability)||s.availability.isTileAvailable(n,e,t)){r=s;break}const u=R(this,e,t,n,s,0===i);u.result&&(a=!0,c=c.then((()=>u.promise)))}return!(0,l.A)(r)&&a?c.then((()=>this.requestTileGeometry(e,t,n,i))):N(this,e,t,n,r,i)},Object.defineProperties(O.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,u.A)("CesiumTerrainProvider.ready","CesiumTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use CesiumTerrainProvider.fromIonAssetId or CesiumTerrainProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,u.A)("CesiumTerrainProvider.readyPromise","CesiumTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use CesiumTerrainProvider.fromIonAssetId or CesiumTerrainProvider.fromUrl instead."),this._readyPromise}},hasWaterMask:{get:function(){return this._hasWaterMask&&this._requestWaterMask}},hasVertexNormals:{get:function(){return this._hasVertexNormals&&this._requestVertexNormals}},hasMetadata:{get:function(){return this._hasMetadata&&this._requestMetadata}},requestVertexNormals:{get:function(){return this._requestVertexNormals}},requestWaterMask:{get:function(){return this._requestWaterMask}},requestMetadata:{get:function(){return this._requestMetadata}},availability:{get:function(){return this._availability}}}),O.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},O.fromIonAssetId=async function(e,t){s.A.defined("assetId",e);const n=await _.A.fromAssetId(e);return O.fromUrl(n,t)},O.fromUrl=async function(e,t){s.A.defined("url",e),t=(0,c.A)(t,c.A.EMPTY_OBJECT),e=await Promise.resolve(e);const n=T.A.createIfNeeded(e);n.appendForwardSlash();const i=new I(t);i.lastResource=n,i.layerJsonResource=i.lastResource.getDerivedResource({url:"layer.json"}),await D(i);const o=new O(t);return i.build(o),o},O.prototype.getTileDataAvailable=function(e,t,n){if(!(0,l.A)(this._availability))return;if(n>this._availability._maximumLevel)return!1;if(this._availability.isTileAvailable(n,e,t))return!0;if(!this._hasMetadata)return!1;const i=this._layers,o=i.length;for(let r=0;r<o;++r)if(R(this,e,t,n,i[r],0===r).result)return;return!1},O.prototype.loadTileDataAvailability=function(e,t,n){if(!(0,l.A)(this._availability)||n>this._availability._maximumLevel||this._availability.isTileAvailable(n,e,t)||!this._hasMetadata)return;const i=this._layers,o=i.length;for(let r=0;r<o;++r){const o=R(this,e,t,n,i[r],0===r);if((0,l.A)(o.promise))return o.promise}},O._getAvailabilityTile=M;const F=O},565801:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(687536),o=n(945395),r=n(419061),s=n(491446),a=n(605971),c=n(955943),l=n(230259),u=n(591978);function d(e){let t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).currentTime,n=e.startTime,d=e.stopTime;if(t=(0,s.A)(t)?u.A.clone(t):(0,s.A)(n)?u.A.clone(n):(0,s.A)(d)?u.A.addDays(d,-1,new u.A):u.A.now(),n=(0,s.A)(n)?u.A.clone(n):u.A.clone(t),d=(0,s.A)(d)?u.A.clone(d):u.A.addDays(n,1,new u.A),u.A.greaterThan(n,d))throw new a.A("startTime must come before stopTime.");this.startTime=n,this.stopTime=d,this.clockRange=(0,r.A)(e.clockRange,i.A.UNBOUNDED),this.canAnimate=(0,r.A)(e.canAnimate,!0),this.onTick=new c.A,this.onStop=new c.A,this._currentTime=void 0,this._multiplier=void 0,this._clockStep=void 0,this._shouldAnimate=void 0,this._lastSystemTime=(0,l.A)(),this.currentTime=t,this.multiplier=(0,r.A)(e.multiplier,1),this.shouldAnimate=(0,r.A)(e.shouldAnimate,!1),this.clockStep=(0,r.A)(e.clockStep,o.A.SYSTEM_CLOCK_MULTIPLIER)}Object.defineProperties(d.prototype,{currentTime:{get:function(){return this._currentTime},set:function(e){u.A.equals(this._currentTime,e)||(this._clockStep===o.A.SYSTEM_CLOCK&&(this._clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER),this._currentTime=e)}},multiplier:{get:function(){return this._multiplier},set:function(e){this._multiplier!==e&&(this._clockStep===o.A.SYSTEM_CLOCK&&(this._clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER),this._multiplier=e)}},clockStep:{get:function(){return this._clockStep},set:function(e){e===o.A.SYSTEM_CLOCK&&(this._multiplier=1,this._shouldAnimate=!0,this._currentTime=u.A.now()),this._clockStep=e}},shouldAnimate:{get:function(){return this._shouldAnimate},set:function(e){this._shouldAnimate!==e&&(this._clockStep===o.A.SYSTEM_CLOCK&&(this._clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER),this._shouldAnimate=e)}}}),d.prototype.tick=function(){const e=(0,l.A)();let t=u.A.clone(this._currentTime);if(this.canAnimate&&this._shouldAnimate){const n=this._clockStep;if(n===o.A.SYSTEM_CLOCK)t=u.A.now(t);else{const r=this._multiplier;if(n===o.A.TICK_DEPENDENT)t=u.A.addSeconds(t,r,t);else{const n=e-this._lastSystemTime;t=u.A.addSeconds(t,r*(n/1e3),t)}const s=this.clockRange,a=this.startTime,c=this.stopTime;if(s===i.A.CLAMPED)u.A.lessThan(t,a)?t=u.A.clone(a,t):u.A.greaterThan(t,c)&&(t=u.A.clone(c,t),this.onStop.raiseEvent(this));else if(s===i.A.LOOP_STOP)for(u.A.lessThan(t,a)&&(t=u.A.clone(a,t));u.A.greaterThan(t,c);)t=u.A.addSeconds(a,u.A.secondsDifference(t,c),t),this.onStop.raiseEvent(this)}}return this._currentTime=t,this._lastSystemTime=e,this.onTick.raiseEvent(this),t};const h=d},687536:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2})},945395:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2})},931806:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(605971),r=n(437266);function s(e){this._value=e,this._valueType=r.A.getPointType(e)}Object.defineProperties(s.prototype,{value:{get:function(){return this._value}}}),s.prototype.findTimeInterval=function(e){throw new o.A("findTimeInterval cannot be called on a ConstantSpline.")},s.prototype.wrapTime=function(e){return i.A.typeOf.number("time",e),0},s.prototype.clampTime=function(e){return i.A.typeOf.number("time",e),0},s.prototype.evaluate=function(e,t){i.A.typeOf.number("time",e);const n=this._value,o=this._valueType;return o===Number?n:o.clone(n,t)};const a=s},594647:(e,t,n)=>{"use strict";n.d(t,{A:()=>q});var i=n(263604),o=n(647934),r=n(660662),s=n(434067),a=n(267980),c=n(369031),l=n(571804),u=n(246520),d=n(419061),h=n(491446),A=n(610750),f=n(944479),p=n(305439),m=n(46362),_=n(75200),g=n(34233),y=n(874915),b=n(367817),v=n(331185),T=n(71694),w=n(406719),E=n(402330),S=n(99479),C=n(769534);const x=new a.A,I=new o.A,P=new s.A,D=new s.A,O=new a.A,L=new a.A,N=new a.A,M=new a.A,R=new a.A,F=new a.A,B=new S.A,U=new v.A,k=new v.A,V=new a.A;function H(e,t,n,i,o,r,c,u,d){const A=e.positions;let _=w.A.triangulate(e.positions2D,e.holes);_.length<3&&(_=[0,1,2]);const g=y.A.createTypedArray(A.length,_.length);g.set(_);let T=U;if(0!==i){let e=S.A.fromAxisAngle(c,i,B);if(T=v.A.fromQuaternion(e,T),t.tangent||t.bitangent){e=S.A.fromAxisAngle(c,-i,B);const n=v.A.fromQuaternion(e,k);u=a.A.normalize(v.A.multiplyByVector(n,u,u),u),t.bitangent&&(d=a.A.normalize(a.A.cross(c,u,d),d))}}else T=v.A.clone(v.A.IDENTITY,T);const C=D;t.st&&(C.x=n.x,C.y=n.y);const I=A.length,O=3*I,L=new Float64Array(O),N=t.normal?new Float32Array(O):void 0,M=t.tangent?new Float32Array(O):void 0,R=t.bitangent?new Float32Array(O):void 0,F=t.st?new Float32Array(2*I):void 0;let V=0,H=0,z=0,G=0,j=0;for(let e=0;e<I;e++){const i=A[e];if(L[V++]=i.x,L[V++]=i.y,L[V++]=i.z,t.st)if((0,h.A)(o)&&o.positions.length===I)F[j++]=o.positions[e].x,F[j++]=o.positions[e].y;else{const e=r(v.A.multiplyByVector(T,i,x),P);s.A.subtract(e,C,e);const t=b.A.clamp(e.x/n.width,0,1),o=b.A.clamp(e.y/n.height,0,1);F[j++]=t,F[j++]=o}t.normal&&(N[H++]=c.x,N[H++]=c.y,N[H++]=c.z),t.tangent&&(M[G++]=u.x,M[G++]=u.y,M[G++]=u.z),t.bitangent&&(R[z++]=d.x,R[z++]=d.y,R[z++]=d.z)}const W=new m.A;return t.position&&(W.position=new p.A({componentDatatype:l.A.DOUBLE,componentsPerAttribute:3,values:L})),t.normal&&(W.normal=new p.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:N})),t.tangent&&(W.tangent=new p.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:M})),t.bitangent&&(W.bitangent=new p.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:R})),t.st&&(W.st=new p.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:2,values:F})),new f.A({attributes:W,indices:g,primitiveType:E.A.TRIANGLES})}function z(e){const t=(e=(0,d.A)(e,d.A.EMPTY_OBJECT)).polygonHierarchy,n=e.textureCoordinates;c.A.defined("options.polygonHierarchy",t);const i=(0,d.A)(e.vertexFormat,C.A.DEFAULT);this._vertexFormat=C.A.clone(i),this._polygonHierarchy=t,this._stRotation=(0,d.A)(e.stRotation,0),this._ellipsoid=A.A.clone((0,d.A)(e.ellipsoid,A.A.WGS84)),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=T.A.computeHierarchyPackedLength(t,a.A)+C.A.packedLength+A.A.packedLength+((0,h.A)(n)?T.A.computeHierarchyPackedLength(n,s.A):1)+2}z.fromPositions=function(e){return e=(0,d.A)(e,d.A.EMPTY_OBJECT),c.A.defined("options.positions",e.positions),new z({polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates})},z.pack=function(e,t,n){return c.A.typeOf.object("value",e),c.A.defined("array",t),n=(0,d.A)(n,0),n=T.A.packPolygonHierarchy(e._polygonHierarchy,t,n,a.A),A.A.pack(e._ellipsoid,t,n),n+=A.A.packedLength,C.A.pack(e._vertexFormat,t,n),n+=C.A.packedLength,t[n++]=e._stRotation,(0,h.A)(e._textureCoordinates)?n=T.A.packPolygonHierarchy(e._textureCoordinates,t,n,s.A):t[n++]=-1,t[n++]=e.packedLength,t};const G=A.A.clone(A.A.UNIT_SPHERE),j=new C.A,W={polygonHierarchy:{}};z.unpack=function(e,t,n){c.A.defined("array",e),t=(0,d.A)(t,0);const i=T.A.unpackPolygonHierarchy(e,t,a.A);t=i.startingIndex,delete i.startingIndex;const o=A.A.unpack(e,t,G);t+=A.A.packedLength;const r=C.A.unpack(e,t,j);t+=C.A.packedLength;const l=e[t++],u=-1===e[t]?void 0:T.A.unpackPolygonHierarchy(e,t,s.A);(0,h.A)(u)?(t=u.startingIndex,delete u.startingIndex):t++;const f=e[t++];return(0,h.A)(n)||(n=new z(W)),n._polygonHierarchy=i,n._ellipsoid=A.A.clone(o,n._ellipsoid),n._vertexFormat=C.A.clone(r,n._vertexFormat),n._stRotation=l,n._textureCoordinates=u,n.packedLength=f,n},z.createGeometry=function(e){const t=e._vertexFormat,n=e._polygonHierarchy,o=e._stRotation,s=e._textureCoordinates,c=(0,h.A)(s);let l=n.positions;if(l=(0,i.A)(l,a.A.equalsEpsilon,!0),l.length<3)return;let d=O,A=L,p=N,m=R;const v=F;if(!u.A.computeProjectTo2DArguments(l,M,m,v))return;if(d=a.A.cross(m,v,d),d=a.A.normalize(d,d),!a.A.equalsEpsilon(M,a.A.ZERO,b.A.EPSILON6)){const t=e._ellipsoid.geodeticSurfaceNormal(M,V);a.A.dot(d,t)<0&&(d=a.A.negate(d,d),m=a.A.negate(m,m))}const w=u.A.createProjectPointsTo2DFunction(M,m,v),E=u.A.createProjectPointTo2DFunction(M,m,v);t.tangent&&(A=a.A.clone(m,A)),t.bitangent&&(p=a.A.clone(v,p));const S=T.A.polygonsFromHierarchy(n,c,w,!1),C=S.hierarchy,x=S.polygons,P=c?T.A.polygonsFromHierarchy(s,!0,(function(e){return e}),!1).polygons:void 0;if(0===C.length)return;l=C[0].outerRing;const D=r.A.fromPoints(l),B=T.A.computeBoundingRectangle(d,E,l,o,I),U=[];for(let e=0;e<x.length;e++){const n=new _.A({geometry:H(x[e],t,B,o,c?P[e]:void 0,E,d,A,p)});U.push(n)}const k=g.A.combineInstances(U)[0];k.attributes.position.values=new Float64Array(k.attributes.position.values),k.indices=y.A.createTypedArray(k.attributes.position.values.length/3,k.indices);const z=k.attributes;return t.position||delete z.position,new f.A({attributes:z,indices:k.indices,primitiveType:k.primitiveType,boundingSphere:D})};const q=z},246520:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(434067),o=n(267980),r=n(369031),s=n(331185),a=n(832698);const c={},l=new o.A,u=new o.A,d=new o.A,h=new o.A,A=new a.A;function f(e,t,n,r,s){const a=o.A.subtract(e,t,l),c=o.A.dot(n,a),u=o.A.dot(r,a);return i.A.fromElements(c,u,s)}c.validOutline=function(e){r.A.defined("positions",e);const t=a.A.fromPoints(e,A).halfAxes,n=s.A.getColumn(t,0,u),i=s.A.getColumn(t,1,d),c=s.A.getColumn(t,2,h),l=o.A.magnitude(n),f=o.A.magnitude(i),p=o.A.magnitude(c);return!(0===l&&(0===f||0===p)||0===f&&0===p)},c.computeProjectTo2DArguments=function(e,t,n,i){r.A.defined("positions",e),r.A.defined("centerResult",t),r.A.defined("planeAxis1Result",n),r.A.defined("planeAxis2Result",i);const c=a.A.fromPoints(e,A),l=c.halfAxes,f=s.A.getColumn(l,0,u),p=s.A.getColumn(l,1,d),m=s.A.getColumn(l,2,h),_=o.A.magnitude(f),g=o.A.magnitude(p),y=o.A.magnitude(m),b=Math.min(_,g,y);if(0===_&&(0===g||0===y)||0===g&&0===y)return!1;let v,T;return b!==g&&b!==y||(v=f),b===_?v=p:b===y&&(T=p),b!==_&&b!==g||(T=m),o.A.normalize(v,n),o.A.normalize(T,i),o.A.clone(c.center,t),!0},c.createProjectPointsTo2DFunction=function(e,t,n){return function(i){const o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=f(i[r],e,t,n);return o}},c.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return f(i,e,t,n,o)}};const p=c},173885:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(263604),o=n(660662),r=n(267980),s=n(369031),a=n(571804),c=n(246520),l=n(419061),u=n(491446),d=n(944479),h=n(305439),A=n(46362),f=n(75200),p=n(34233),m=n(874915),_=n(71694),g=n(402330);function y(e){const t=e.length,n=new Float64Array(3*t),i=m.A.createTypedArray(t,2*t);let o=0,r=0;for(let s=0;s<t;s++){const a=e[s];n[o++]=a.x,n[o++]=a.y,n[o++]=a.z,i[r++]=s,i[r++]=(s+1)%t}const s=new A.A({position:new h.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:n})});return new d.A({attributes:s,indices:i,primitiveType:g.A.LINES})}function b(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).polygonHierarchy;s.A.defined("options.polygonHierarchy",t),this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=_.A.computeHierarchyPackedLength(t,r.A)+1}b.fromPositions=function(e){return e=(0,l.A)(e,l.A.EMPTY_OBJECT),s.A.defined("options.positions",e.positions),new b({polygonHierarchy:{positions:e.positions}})},b.pack=function(e,t,n){return s.A.typeOf.object("value",e),s.A.defined("array",t),n=(0,l.A)(n,0),t[n=_.A.packPolygonHierarchy(e._polygonHierarchy,t,n,r.A)]=e.packedLength,t};const v={polygonHierarchy:{}};b.unpack=function(e,t,n){s.A.defined("array",e),t=(0,l.A)(t,0);const i=_.A.unpackPolygonHierarchy(e,t,r.A);t=i.startingIndex,delete i.startingIndex;const o=e[t];return(0,u.A)(n)||(n=new b(v)),n._polygonHierarchy=i,n.packedLength=o,n},b.createGeometry=function(e){const t=e._polygonHierarchy;let n=t.positions;if(n=(0,i.A)(n,r.A.equalsEpsilon,!0),n.length<3)return;if(!c.A.validOutline(n))return;const s=_.A.polygonOutlinesFromHierarchy(t,!1);if(0===s.length)return;const a=[];for(let e=0;e<s.length;e++){const t=new f.A({geometry:y(s[e])});a.push(t)}const l=p.A.combineInstances(a)[0],u=o.A.fromPoints(t.positions);return new d.A({attributes:l.attributes,indices:l.indices,primitiveType:l.primitiveType,boundingSphere:u})};const T=b},297038:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ROUNDED:0,MITERED:1,BEVELED:2})},374273:(e,t,n)=>{"use strict";n.d(t,{A:()=>J});var i=n(263604),o=n(660662),r=n(267980),s=n(336946),a=n(369031),c=n(571804),l=n(297038),u=n(766242),d=n(419061),h=n(491446),A=n(610750),f=n(944479),p=n(305439),m=n(46362),_=n(794554),g=n(874915),y=n(367817),b=n(406719),v=n(402330),T=n(697422),w=n(769534);const E=new r.A,S=new r.A,C=new r.A,x=new r.A,I=new r.A,P=new r.A,D=new r.A,O=new r.A;function L(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function N(e,t,n,i,o,s){const a=e.normals,c=e.tangents,l=e.bitangents,d=r.A.normalize(r.A.cross(n,t,D),D);s.normal&&u.A.addAttribute(a,t,i,o),s.tangent&&u.A.addAttribute(c,d,i,o),s.bitangent&&u.A.addAttribute(l,n,i,o)}function M(e,t,n){const i=e.positions,o=e.corners,s=e.endPositions,a=e.lefts,l=e.normals,d=new m.A;let A,f,_,b=0,v=0,T=0;for(f=0;f<i.length;f+=2)_=i[f].length-3,b+=_,T+=2*_,v+=i[f+1].length-3;for(b+=3,v+=3,f=0;f<o.length;f++){A=o[f];const e=o[f].leftPositions;(0,h.A)(e)?(_=e.length,b+=_,T+=_):(_=o[f].rightPositions.length,v+=_,T+=_)}const w=(0,h.A)(s);let I;w&&(I=s[0].length-3,b+=I,v+=I,I/=3,T+=6*I);const L=b+v,M=new Float64Array(L),R={normals:t.normal?new Float32Array(L):void 0,tangents:t.tangent?new Float32Array(L):void 0,bitangents:t.bitangent?new Float32Array(L):void 0};let F,B,U,k,V,H,z=0,G=L-1,j=E,W=S;const q=I/2,Y=g.A.createTypedArray(L/3,T);let X=0;if(w){H=C,V=x;const e=s[0];for(j=r.A.fromArray(l,0,j),W=r.A.fromArray(a,0,W),f=0;f<q;f++)H=r.A.fromArray(e,3*(q-1-f),H),V=r.A.fromArray(e,3*(q+f),V),u.A.addAttribute(M,V,z),u.A.addAttribute(M,H,void 0,G),N(R,j,W,z,G,t),B=z/3,k=B+1,F=(G-2)/3,U=F-1,Y[X++]=F,Y[X++]=B,Y[X++]=U,Y[X++]=U,Y[X++]=B,Y[X++]=k,z+=3,G-=3}let J,Q,$=0,K=0,Z=i[$++],ee=i[$++];for(M.set(Z,z),M.set(ee,G-ee.length+1),W=r.A.fromArray(a,K,W),_=ee.length-3,f=0;f<_;f+=3)J=n.geodeticSurfaceNormal(r.A.fromArray(Z,f,D),D),Q=n.geodeticSurfaceNormal(r.A.fromArray(ee,_-f,O),O),j=r.A.normalize(r.A.add(J,Q,j),j),N(R,j,W,z,G,t),B=z/3,k=B+1,F=(G-2)/3,U=F-1,Y[X++]=F,Y[X++]=B,Y[X++]=U,Y[X++]=U,Y[X++]=B,Y[X++]=k,z+=3,G-=3;for(J=n.geodeticSurfaceNormal(r.A.fromArray(Z,_,D),D),Q=n.geodeticSurfaceNormal(r.A.fromArray(ee,_,O),O),j=r.A.normalize(r.A.add(J,Q,j),j),K+=3,f=0;f<o.length;f++){let e;A=o[f];const s=A.leftPositions,c=A.rightPositions;let d,p,m=P,g=C,y=x;if(j=r.A.fromArray(l,K,j),(0,h.A)(s)){for(N(R,j,W,void 0,G,t),G-=3,d=k,p=U,e=0;e<s.length/3;e++)m=r.A.fromArray(s,3*e,m),Y[X++]=d,Y[X++]=p-e-1,Y[X++]=p-e,u.A.addAttribute(M,m,void 0,G),g=r.A.fromArray(M,3*(p-e-1),g),y=r.A.fromArray(M,3*d,y),W=r.A.normalize(r.A.subtract(g,y,W),W),N(R,j,W,void 0,G,t),G-=3;m=r.A.fromArray(M,3*d,m),g=r.A.subtract(r.A.fromArray(M,3*p,g),m,g),y=r.A.subtract(r.A.fromArray(M,3*(p-e),y),m,y),W=r.A.normalize(r.A.add(g,y,W),W),N(R,j,W,z,void 0,t),z+=3}else{for(N(R,j,W,z,void 0,t),z+=3,d=U,p=k,e=0;e<c.length/3;e++)m=r.A.fromArray(c,3*e,m),Y[X++]=d,Y[X++]=p+e,Y[X++]=p+e+1,u.A.addAttribute(M,m,z),g=r.A.fromArray(M,3*d,g),y=r.A.fromArray(M,3*(p+e),y),W=r.A.normalize(r.A.subtract(g,y,W),W),N(R,j,W,z,void 0,t),z+=3;m=r.A.fromArray(M,3*d,m),g=r.A.subtract(r.A.fromArray(M,3*(p+e),g),m,g),y=r.A.subtract(r.A.fromArray(M,3*p,y),m,y),W=r.A.normalize(r.A.negate(r.A.add(y,g,W),W),W),N(R,j,W,void 0,G,t),G-=3}for(Z=i[$++],ee=i[$++],Z.splice(0,3),ee.splice(ee.length-3,3),M.set(Z,z),M.set(ee,G-ee.length+1),_=ee.length-3,K+=3,W=r.A.fromArray(a,K,W),e=0;e<ee.length;e+=3)J=n.geodeticSurfaceNormal(r.A.fromArray(Z,e,D),D),Q=n.geodeticSurfaceNormal(r.A.fromArray(ee,_-e,O),O),j=r.A.normalize(r.A.add(J,Q,j),j),N(R,j,W,z,G,t),k=z/3,B=k-1,U=(G-2)/3,F=U+1,Y[X++]=F,Y[X++]=B,Y[X++]=U,Y[X++]=U,Y[X++]=B,Y[X++]=k,z+=3,G-=3;z-=3,G+=3}if(j=r.A.fromArray(l,l.length-3,j),N(R,j,W,z,G,t),w){z+=3,G-=3,H=C,V=x;const e=s[1];for(f=0;f<q;f++)H=r.A.fromArray(e,3*(I-f-1),H),V=r.A.fromArray(e,3*f,V),u.A.addAttribute(M,H,void 0,G),u.A.addAttribute(M,V,z),N(R,j,W,z,G,t),k=z/3,B=k-1,U=(G-2)/3,F=U+1,Y[X++]=F,Y[X++]=B,Y[X++]=U,Y[X++]=U,Y[X++]=B,Y[X++]=k,z+=3,G-=3}if(d.position=new p.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:M}),t.st){const e=new Float32Array(L/3*2);let t,n,i=0;if(w){b/=3,v/=3;const o=Math.PI/(I+1);let r;n=1/(b-I+1),t=1/(v-I+1);const s=I/2;for(f=s+1;f<I+1;f++)r=y.A.PI_OVER_TWO+o*f,e[i++]=t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(f=1;f<v-I+1;f++)e[i++]=f*t,e[i++]=0;for(f=I;f>s;f--)r=y.A.PI_OVER_TWO-f*o,e[i++]=1-t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(f=s;f>0;f--)r=y.A.PI_OVER_TWO-o*f,e[i++]=1-n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(f=b-I;f>0;f--)e[i++]=f*n,e[i++]=1;for(f=1;f<s+1;f++)r=y.A.PI_OVER_TWO+o*f,e[i++]=n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r))}else{for(b/=3,v/=3,n=1/(b-1),t=1/(v-1),f=0;f<v;f++)e[i++]=f*t,e[i++]=0;for(f=b;f>0;f--)e[i++]=(f-1)*n,e[i++]=1}d.st=new p.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:e})}return t.normal&&(d.normal=new p.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:R.normals})),t.tangent&&(d.tangent=new p.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:R.tangents})),t.bitangent&&(d.bitangent=new p.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:R.bitangents})),{attributes:d,indices:Y}}function R(e,t,n){n[t++]=e[0],n[t++]=e[1],n[t++]=e[2];for(let i=3;i<e.length;i+=3){const o=e[i],r=e[i+1],s=e[i+2];n[t++]=o,n[t++]=r,n[t++]=s,n[t++]=o,n[t++]=r,n[t++]=s}return n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n}const F=new r.A,B=new r.A,U=new s.A;function k(e,t,n,i,o,s){const a=r.A.subtract(t,e,F);r.A.normalize(a,a);const c=n.geodeticSurfaceNormal(e,B),l=r.A.cross(a,c,F);r.A.multiplyByScalar(l,i,l);let u=o.latitude,d=o.longitude,h=s.latitude,A=s.longitude;r.A.add(e,l,B),n.cartesianToCartographic(B,U);let f=U.latitude,p=U.longitude;u=Math.min(u,f),d=Math.min(d,p),h=Math.max(h,f),A=Math.max(A,p),r.A.subtract(e,l,B),n.cartesianToCartographic(B,U),f=U.latitude,p=U.longitude,u=Math.min(u,f),d=Math.min(d,p),h=Math.max(h,f),A=Math.max(A,p),o.latitude=u,o.longitude=d,s.latitude=h,s.longitude=A}const V=new r.A,H=new r.A,z=new s.A,G=new s.A;function j(e,t,n,o,s){e=L(e,t);const a=(0,i.A)(e,r.A.equalsEpsilon),c=a.length;if(c<2||n<=0)return new T.A;const u=.5*n;let d,A;if(z.latitude=Number.POSITIVE_INFINITY,z.longitude=Number.POSITIVE_INFINITY,G.latitude=Number.NEGATIVE_INFINITY,G.longitude=Number.NEGATIVE_INFINITY,o===l.A.ROUNDED){const e=a[0];r.A.subtract(e,a[1],V),r.A.normalize(V,V),r.A.multiplyByScalar(V,u,V),r.A.add(e,V,H),t.cartesianToCartographic(H,U),d=U.latitude,A=U.longitude,z.latitude=Math.min(z.latitude,d),z.longitude=Math.min(z.longitude,A),G.latitude=Math.max(G.latitude,d),G.longitude=Math.max(G.longitude,A)}for(let e=0;e<c-1;++e)k(a[e],a[e+1],t,u,z,G);const f=a[c-1];r.A.subtract(f,a[c-2],V),r.A.normalize(V,V),r.A.multiplyByScalar(V,u,V),r.A.add(f,V,H),k(f,H,t,u,z,G),o===l.A.ROUNDED&&(t.cartesianToCartographic(H,U),d=U.latitude,A=U.longitude,z.latitude=Math.min(z.latitude,d),z.longitude=Math.min(z.longitude,A),G.latitude=Math.max(G.latitude,d),G.longitude=Math.max(G.longitude,A));const p=(0,h.A)(s)?s:new T.A;return p.north=G.latitude,p.south=z.latitude,p.east=G.longitude,p.west=z.longitude,p}function W(e){const t=(e=(0,d.A)(e,d.A.EMPTY_OBJECT)).positions,n=e.width;a.A.defined("options.positions",t),a.A.defined("options.width",n);const i=(0,d.A)(e.height,0),o=(0,d.A)(e.extrudedHeight,i);this._positions=t,this._ellipsoid=A.A.clone((0,d.A)(e.ellipsoid,A.A.WGS84)),this._vertexFormat=w.A.clone((0,d.A)(e.vertexFormat,w.A.DEFAULT)),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=(0,d.A)(e.cornerType,l.A.ROUNDED),this._granularity=(0,d.A)(e.granularity,y.A.RADIANS_PER_DEGREE),this._shadowVolume=(0,d.A)(e.shadowVolume,!1),this._workerName="createCorridorGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this.packedLength=1+t.length*r.A.packedLength+A.A.packedLength+w.A.packedLength+7}W.pack=function(e,t,n){a.A.defined("value",e),a.A.defined("array",t),n=(0,d.A)(n,0);const i=e._positions,o=i.length;t[n++]=o;for(let e=0;e<o;++e,n+=r.A.packedLength)r.A.pack(i[e],t,n);return A.A.pack(e._ellipsoid,t,n),n+=A.A.packedLength,w.A.pack(e._vertexFormat,t,n),n+=w.A.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n++]=e._shadowVolume?1:0,t[n]=(0,d.A)(e._offsetAttribute,-1),t};const q=A.A.clone(A.A.UNIT_SPHERE),Y=new w.A,X={positions:void 0,ellipsoid:q,vertexFormat:Y,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};W.unpack=function(e,t,n){a.A.defined("array",e),t=(0,d.A)(t,0);const i=e[t++],o=new Array(i);for(let n=0;n<i;++n,t+=r.A.packedLength)o[n]=r.A.unpack(e,t);const s=A.A.unpack(e,t,q);t+=A.A.packedLength;const c=w.A.unpack(e,t,Y);t+=w.A.packedLength;const l=e[t++],u=e[t++],f=e[t++],p=e[t++],m=e[t++],_=1===e[t++],g=e[t];return(0,h.A)(n)?(n._positions=o,n._ellipsoid=A.A.clone(s,n._ellipsoid),n._vertexFormat=w.A.clone(c,n._vertexFormat),n._width=l,n._height=u,n._extrudedHeight=f,n._cornerType=p,n._granularity=m,n._shadowVolume=_,n._offsetAttribute=-1===g?void 0:g,n):(X.positions=o,X.width=l,X.height=u,X.extrudedHeight=f,X.cornerType=p,X.granularity=m,X.shadowVolume=_,X.offsetAttribute=-1===g?void 0:g,new W(X))},W.computeRectangle=function(e,t){const n=(e=(0,d.A)(e,d.A.EMPTY_OBJECT)).positions,i=e.width;return a.A.defined("options.positions",n),a.A.defined("options.width",i),j(n,(0,d.A)(e.ellipsoid,A.A.WGS84),i,(0,d.A)(e.cornerType,l.A.ROUNDED),t)},W.createGeometry=function(e){let t=e._positions;const n=e._width,s=e._ellipsoid;t=L(t,s);const a=(0,i.A)(t,r.A.equalsEpsilon);if(a.length<2||n<=0)return;const l=e._height,d=e._extrudedHeight,A=!y.A.equalsEpsilon(l,d,0,y.A.EPSILON2),m=e._vertexFormat,T={ellipsoid:s,positions:a,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!0};let D;if(A)T.height=l,T.extrudedHeight=d,T.shadowVolume=e._shadowVolume,T.offsetAttribute=e._offsetAttribute,D=function(e,t){const n=new w.A({position:t.position,normal:t.normal||t.bitangent||e.shadowVolume,tangent:t.tangent,bitangent:t.normal||t.bitangent,st:t.st}),i=e.ellipsoid,o=M(u.A.computePositions(e),n,i),s=e.height,a=e.extrudedHeight;let l=o.attributes;const d=o.indices;let A=l.position.values,f=A.length;const m=new Float64Array(6*f);let y=new Float64Array(f);y.set(A);let v,T=new Float64Array(4*f);A=b.A.scaleToGeodeticHeight(A,s,i),T=R(A,0,T),y=b.A.scaleToGeodeticHeight(y,a,i),T=R(y,2*f,T),m.set(A),m.set(y,f),m.set(T,2*f),l.position.values=m,l=function(e,t){if(!(t.normal||t.tangent||t.bitangent||t.st))return e;const n=e.position.values;let i,o;(t.normal||t.bitangent)&&(i=e.normal.values,o=e.bitangent.values);const s=e.position.values.length/18,a=3*s,c=2*s,l=2*a;let d;if(t.normal||t.bitangent||t.tangent){const s=t.normal?new Float32Array(6*a):void 0,c=t.tangent?new Float32Array(6*a):void 0,h=t.bitangent?new Float32Array(6*a):void 0;let A=E,f=S,p=C,m=x,_=I,g=P,y=l;for(d=0;d<a;d+=3){const e=y+l;A=r.A.fromArray(n,d,A),f=r.A.fromArray(n,d+a,f),p=r.A.fromArray(n,(d+3)%a,p),f=r.A.subtract(f,A,f),p=r.A.subtract(p,A,p),m=r.A.normalize(r.A.cross(f,p,m),m),t.normal&&(u.A.addAttribute(s,m,e),u.A.addAttribute(s,m,e+3),u.A.addAttribute(s,m,y),u.A.addAttribute(s,m,y+3)),(t.tangent||t.bitangent)&&(g=r.A.fromArray(i,d,g),t.bitangent&&(u.A.addAttribute(h,g,e),u.A.addAttribute(h,g,e+3),u.A.addAttribute(h,g,y),u.A.addAttribute(h,g,y+3)),t.tangent&&(_=r.A.normalize(r.A.cross(g,m,_),_),u.A.addAttribute(c,_,e),u.A.addAttribute(c,_,e+3),u.A.addAttribute(c,_,y),u.A.addAttribute(c,_,y+3))),y+=6}if(t.normal){for(s.set(i),d=0;d<a;d+=3)s[d+a]=-i[d],s[d+a+1]=-i[d+1],s[d+a+2]=-i[d+2];e.normal.values=s}else e.normal=void 0;if(t.bitangent?(h.set(o),h.set(o,a),e.bitangent.values=h):e.bitangent=void 0,t.tangent){const t=e.tangent.values;c.set(t),c.set(t,a),e.tangent.values=c}}if(t.st){const t=e.st.values,n=new Float32Array(6*c);n.set(t),n.set(t,c);let i=2*c;for(let e=0;e<2;e++){for(n[i++]=t[0],n[i++]=t[1],d=2;d<c;d+=2){const e=t[d],o=t[d+1];n[i++]=e,n[i++]=o,n[i++]=e,n[i++]=o}n[i++]=t[0],n[i++]=t[1]}e.st.values=n}return e}(l,t);const D=f/3;if(e.shadowVolume){const e=l.normal.values;f=e.length;let n=new Float32Array(6*f);for(v=0;v<f;v++)e[v]=-e[v];n.set(e,f),n=R(e,4*f,n),l.extrudeDirection=new p.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:n}),t.normal||(l.normal=void 0)}if((0,h.A)(e.offsetAttribute)){let t=new Uint8Array(6*D);if(e.offsetAttribute===_.A.TOP)t=t.fill(1,0,D).fill(1,2*D,4*D);else{const n=e.offsetAttribute===_.A.NONE?0:1;t=t.fill(n)}l.applyOffset=new p.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}const O=d.length,L=D+D,N=g.A.createTypedArray(m.length/3,2*O+3*L);N.set(d);let F,B,U,k,V=O;for(v=0;v<O;v+=3){const e=d[v],t=d[v+1],n=d[v+2];N[V++]=n+D,N[V++]=t+D,N[V++]=e+D}for(v=0;v<L;v+=2)F=v+L,B=F+L,U=F+1,k=B+1,N[V++]=F,N[V++]=B,N[V++]=U,N[V++]=U,N[V++]=B,N[V++]=k;return{attributes:l,indices:N}}(T,m);else if(D=M(u.A.computePositions(T),m,s),D.attributes.position.values=b.A.scaleToGeodeticHeight(D.attributes.position.values,l,s),(0,h.A)(e._offsetAttribute)){const t=e._offsetAttribute===_.A.NONE?0:1,n=D.attributes.position.values.length,i=new Uint8Array(n/3).fill(t);D.attributes.applyOffset=new p.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}const O=D.attributes,N=o.A.fromVertices(O.position.values,void 0,3);return m.position||(D.attributes.position.values=void 0),new f.A({attributes:O,indices:D.indices,primitiveType:v.A.TRIANGLES,boundingSphere:N,offsetAttribute:e._offsetAttribute})},W.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new W({positions:e._positions,width:e._width,cornerType:e._cornerType,ellipsoid:o,granularity:i,extrudedHeight:r,height:s,vertexFormat:w.A.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(W.prototype,{rectangle:{get:function(){return(0,h.A)(this._rectangle)||(this._rectangle=j(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}});const J=W},766242:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(267980),o=n(297038),r=n(491446),s=n(367817),a=n(331185),c=n(870349),l=n(748918),u=n(99479);const d={},h=new i.A,A=new i.A,f=new i.A,p=new i.A,m=[new i.A,new i.A],_=new i.A,g=new i.A,y=new i.A,b=new i.A,v=new i.A,T=new i.A,w=new i.A,E=new i.A,S=new i.A,C=new i.A,x=new u.A,I=new a.A;function P(e,t,n,r,c){const l=i.A.angleBetween(i.A.subtract(t,e,h),i.A.subtract(n,e,A)),d=r===o.A.BEVELED?1:Math.ceil(l/s.A.toRadians(5))+1,f=3*d,p=new Array(f);let m;p[f-3]=n.x,p[f-2]=n.y,p[f-1]=n.z,m=c?a.A.fromQuaternion(u.A.fromAxisAngle(i.A.negate(e,h),l/d,x),I):a.A.fromQuaternion(u.A.fromAxisAngle(e,l/d,x),I);let _=0;t=i.A.clone(t,h);for(let e=0;e<d;e++)t=a.A.multiplyByVector(m,t,t),p[_++]=t.x,p[_++]=t.y,p[_++]=t.z;return p}function D(e,t,n,o){let r=h;return o||(t=i.A.negate(t,t)),r=i.A.add(e,t,r),[r.x,r.y,r.z,n.x,n.y,n.z]}function O(e,t,n,o){const r=new Array(e.length),s=new Array(e.length),a=i.A.multiplyByScalar(t,n,h),c=i.A.negate(a,A);let l=0,u=e.length-1;for(let t=0;t<e.length;t+=3){const n=i.A.fromArray(e,t,f),o=i.A.add(n,c,p);r[l++]=o.x,r[l++]=o.y,r[l++]=o.z;const d=i.A.add(n,a,p);s[u--]=d.z,s[u--]=d.y,s[u--]=d.x}return o.push(r,s),o}d.addAttribute=function(e,t,n,i){const o=t.x,s=t.y,a=t.z;(0,r.A)(n)&&(e[n]=o,e[n+1]=s,e[n+2]=a),(0,r.A)(i)&&(e[i]=a,e[i-1]=s,e[i-2]=o)};const L=new i.A,N=new i.A;d.computePositions=function(e){const t=e.granularity,n=e.positions,r=e.ellipsoid,a=e.width/2,u=e.cornerType,d=e.saveAttributes;let A=_,f=g,p=y,x=b,I=v,M=T,R=w,F=E,B=S,U=C,k=[];const V=d?[]:void 0,H=d?[]:void 0;let z,G=n[0],j=n[1];f=i.A.normalize(i.A.subtract(j,G,f),f),A=r.geodeticSurfaceNormal(G,A),x=i.A.normalize(i.A.cross(A,f,x),x),d&&(V.push(x.x,x.y,x.z),H.push(A.x,A.y,A.z)),R=i.A.clone(G,R),G=j,p=i.A.negate(f,p);const W=[];let q;const Y=n.length;for(q=1;q<Y-1;q++){A=r.geodeticSurfaceNormal(G,A),j=n[q+1],f=i.A.normalize(i.A.subtract(j,G,f),f),I=i.A.normalize(i.A.add(f,p,I),I);const e=i.A.multiplyByScalar(A,i.A.dot(f,A),L);i.A.subtract(f,e,e),i.A.normalize(e,e);const _=i.A.multiplyByScalar(A,i.A.dot(p,A),N);if(i.A.subtract(p,_,_),i.A.normalize(_,_),!s.A.equalsEpsilon(Math.abs(i.A.dot(e,_)),1,s.A.EPSILON7)){I=i.A.cross(I,A,I),I=i.A.cross(A,I,I),I=i.A.normalize(I,I);const e=a/Math.max(.25,i.A.magnitude(i.A.cross(I,p,h))),n=l.A.angleIsGreaterThanPi(f,p,G,r);I=i.A.multiplyByScalar(I,e,I),n?(F=i.A.add(G,I,F),U=i.A.add(F,i.A.multiplyByScalar(x,a,U),U),B=i.A.add(F,i.A.multiplyByScalar(x,2*a,B),B),m[0]=i.A.clone(R,m[0]),m[1]=i.A.clone(U,m[1]),z=c.A.generateArc({positions:m,granularity:t,ellipsoid:r}),k=O(z,x,a,k),d&&(V.push(x.x,x.y,x.z),H.push(A.x,A.y,A.z)),M=i.A.clone(B,M),x=i.A.normalize(i.A.cross(A,f,x),x),B=i.A.add(F,i.A.multiplyByScalar(x,2*a,B),B),R=i.A.add(F,i.A.multiplyByScalar(x,a,R),R),u===o.A.ROUNDED||u===o.A.BEVELED?W.push({leftPositions:P(F,M,B,u,n)}):W.push({leftPositions:D(G,i.A.negate(I,I),B,n)})):(B=i.A.add(G,I,B),U=i.A.add(B,i.A.negate(i.A.multiplyByScalar(x,a,U),U),U),F=i.A.add(B,i.A.negate(i.A.multiplyByScalar(x,2*a,F),F),F),m[0]=i.A.clone(R,m[0]),m[1]=i.A.clone(U,m[1]),z=c.A.generateArc({positions:m,granularity:t,ellipsoid:r}),k=O(z,x,a,k),d&&(V.push(x.x,x.y,x.z),H.push(A.x,A.y,A.z)),M=i.A.clone(F,M),x=i.A.normalize(i.A.cross(A,f,x),x),F=i.A.add(B,i.A.negate(i.A.multiplyByScalar(x,2*a,F),F),F),R=i.A.add(B,i.A.negate(i.A.multiplyByScalar(x,a,R),R),R),u===o.A.ROUNDED||u===o.A.BEVELED?W.push({rightPositions:P(B,M,F,u,n)}):W.push({rightPositions:D(G,I,F,n)})),p=i.A.negate(f,p)}G=j}let X;return A=r.geodeticSurfaceNormal(G,A),m[0]=i.A.clone(R,m[0]),m[1]=i.A.clone(G,m[1]),z=c.A.generateArc({positions:m,granularity:t,ellipsoid:r}),k=O(z,x,a,k),d&&(V.push(x.x,x.y,x.z),H.push(A.x,A.y,A.z)),u===o.A.ROUNDED&&(X=function(e){let t=_,n=g,r=y,s=e[1];n=i.A.fromArray(e[1],s.length-3,n),r=i.A.fromArray(e[0],0,r),t=i.A.midpoint(n,r,t);const a=P(t,n,r,o.A.ROUNDED,!1),c=e.length-1,l=e[c-1];return s=e[c],n=i.A.fromArray(l,l.length-3,n),r=i.A.fromArray(s,0,r),t=i.A.midpoint(n,r,t),[a,P(t,n,r,o.A.ROUNDED,!1)]}(k)),{positions:k,corners:W,lefts:V,normals:H,endPositions:X}};const M=d},686043:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(263604),o=n(660662),r=n(267980),s=n(369031),a=n(571804),c=n(297038),l=n(766242),u=n(419061),d=n(491446),h=n(610750),A=n(944479),f=n(305439),p=n(46362),m=n(794554),_=n(874915),g=n(367817),y=n(406719),b=n(402330);const v=new r.A,T=new r.A,w=new r.A;function E(e,t){const n=[],i=e.positions,o=e.corners,s=e.endPositions,u=new p.A;let h,A,m,g=0,y=0,b=0;for(A=0;A<i.length;A+=2)m=i[A].length-3,g+=m,b+=m/3*4,y+=i[A+1].length-3;for(g+=3,y+=3,A=0;A<o.length;A++){h=o[A];const e=o[A].leftPositions;(0,d.A)(e)?(m=e.length,g+=m,b+=m/3*2):(m=o[A].rightPositions.length,y+=m,b+=m/3*2)}const E=(0,d.A)(s);let S;E&&(S=s[0].length-3,g+=S,y+=S,S/=3,b+=4*S);const C=g+y,x=new Float64Array(C);let I,P,D,O,L,N,M=0,R=C-1;const F=S/2,B=_.A.createTypedArray(C/3,b+4);let U=0;if(B[U++]=M/3,B[U++]=(R-2)/3,E){n.push(M/3),N=v,L=T;const e=s[0];for(A=0;A<F;A++)N=r.A.fromArray(e,3*(F-1-A),N),L=r.A.fromArray(e,3*(F+A),L),l.A.addAttribute(x,L,M),l.A.addAttribute(x,N,void 0,R),P=M/3,O=P+1,I=(R-2)/3,D=I-1,B[U++]=I,B[U++]=D,B[U++]=P,B[U++]=O,M+=3,R-=3}let k=0,V=i[k++],H=i[k++];for(x.set(V,M),x.set(H,R-H.length+1),m=H.length-3,n.push(M/3,(R-2)/3),A=0;A<m;A+=3)P=M/3,O=P+1,I=(R-2)/3,D=I-1,B[U++]=I,B[U++]=D,B[U++]=P,B[U++]=O,M+=3,R-=3;for(A=0;A<o.length;A++){let e;h=o[A];const s=h.leftPositions,a=h.rightPositions;let u,f=w;if((0,d.A)(s)){for(R-=3,u=D,n.push(O),e=0;e<s.length/3;e++)f=r.A.fromArray(s,3*e,f),B[U++]=u-e-1,B[U++]=u-e,l.A.addAttribute(x,f,void 0,R),R-=3;n.push(u-Math.floor(s.length/6)),t===c.A.BEVELED&&n.push((R-2)/3+1),M+=3}else{for(M+=3,u=O,n.push(D),e=0;e<a.length/3;e++)f=r.A.fromArray(a,3*e,f),B[U++]=u+e,B[U++]=u+e+1,l.A.addAttribute(x,f,M),M+=3;n.push(u+Math.floor(a.length/6)),t===c.A.BEVELED&&n.push(M/3-1),R-=3}for(V=i[k++],H=i[k++],V.splice(0,3),H.splice(H.length-3,3),x.set(V,M),x.set(H,R-H.length+1),m=H.length-3,e=0;e<H.length;e+=3)O=M/3,P=O-1,D=(R-2)/3,I=D+1,B[U++]=I,B[U++]=D,B[U++]=P,B[U++]=O,M+=3,R-=3;M-=3,R+=3,n.push(M/3,(R-2)/3)}if(E){M+=3,R-=3,N=v,L=T;const e=s[1];for(A=0;A<F;A++)N=r.A.fromArray(e,3*(S-A-1),N),L=r.A.fromArray(e,3*A,L),l.A.addAttribute(x,N,void 0,R),l.A.addAttribute(x,L,M),O=M/3,P=O-1,D=(R-2)/3,I=D+1,B[U++]=I,B[U++]=D,B[U++]=P,B[U++]=O,M+=3,R-=3;n.push(M/3)}else n.push(M/3,(R-2)/3);return B[U++]=M/3,B[U++]=(R-2)/3,u.position=new f.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:x}),{attributes:u,indices:B,wallIndices:n}}function S(e){const t=(e=(0,u.A)(e,u.A.EMPTY_OBJECT)).positions,n=e.width;s.A.typeOf.object("options.positions",t),s.A.typeOf.number("options.width",n);const i=(0,u.A)(e.height,0),o=(0,u.A)(e.extrudedHeight,i);this._positions=t,this._ellipsoid=h.A.clone((0,u.A)(e.ellipsoid,h.A.WGS84)),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=(0,u.A)(e.cornerType,c.A.ROUNDED),this._granularity=(0,u.A)(e.granularity,g.A.RADIANS_PER_DEGREE),this._offsetAttribute=e.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+t.length*r.A.packedLength+h.A.packedLength+6}S.pack=function(e,t,n){s.A.typeOf.object("value",e),s.A.typeOf.object("array",t),n=(0,u.A)(n,0);const i=e._positions,o=i.length;t[n++]=o;for(let e=0;e<o;++e,n+=r.A.packedLength)r.A.pack(i[e],t,n);return h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n]=(0,u.A)(e._offsetAttribute,-1),t};const C=h.A.clone(h.A.UNIT_SPHERE),x={positions:void 0,ellipsoid:C,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};S.unpack=function(e,t,n){s.A.typeOf.object("array",e),t=(0,u.A)(t,0);const i=e[t++],o=new Array(i);for(let n=0;n<i;++n,t+=r.A.packedLength)o[n]=r.A.unpack(e,t);const a=h.A.unpack(e,t,C);t+=h.A.packedLength;const c=e[t++],l=e[t++],A=e[t++],f=e[t++],p=e[t++],m=e[t];return(0,d.A)(n)?(n._positions=o,n._ellipsoid=h.A.clone(a,n._ellipsoid),n._width=c,n._height=l,n._extrudedHeight=A,n._cornerType=f,n._granularity=p,n._offsetAttribute=-1===m?void 0:m,n):(x.positions=o,x.width=c,x.height=l,x.extrudedHeight=A,x.cornerType=f,x.granularity=p,x.offsetAttribute=-1===m?void 0:m,new S(x))},S.createGeometry=function(e){let t=e._positions;const n=e._width,s=e._ellipsoid;t=function(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}(t,s);const c=(0,i.A)(t,r.A.equalsEpsilon);if(c.length<2||n<=0)return;const u=e._height,h=e._extrudedHeight,p=!g.A.equalsEpsilon(u,h,0,g.A.EPSILON2),v={ellipsoid:s,positions:c,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!1};let T;if(p)v.height=u,v.extrudedHeight=h,v.offsetAttribute=e._offsetAttribute,T=function(e){const t=e.ellipsoid,n=E(l.A.computePositions(e),e.cornerType),i=n.wallIndices,o=e.height,r=e.extrudedHeight,s=n.attributes,c=n.indices;let u=s.position.values,h=u.length,A=new Float64Array(h);A.set(u);const p=new Float64Array(2*h);if(u=y.A.scaleToGeodeticHeight(u,o,t),A=y.A.scaleToGeodeticHeight(A,r,t),p.set(u),p.set(A,h),s.position.values=p,h/=3,(0,d.A)(e.offsetAttribute)){let t=new Uint8Array(2*h);if(e.offsetAttribute===m.A.TOP)t=t.fill(1,0,h);else{const n=e.offsetAttribute===m.A.NONE?0:1;t=t.fill(n)}s.applyOffset=new f.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let g;const b=c.length,v=_.A.createTypedArray(p.length/3,2*(b+i.length));v.set(c);let T,w,S=b;for(g=0;g<b;g+=2){const e=c[g],t=c[g+1];v[S++]=e+h,v[S++]=t+h}for(g=0;g<i.length;g++)T=i[g],w=T+h,v[S++]=T,v[S++]=w;return{attributes:s,indices:v}}(v);else if(T=E(l.A.computePositions(v),v.cornerType),T.attributes.position.values=y.A.scaleToGeodeticHeight(T.attributes.position.values,u,s),(0,d.A)(e._offsetAttribute)){const t=T.attributes.position.values.length,n=e._offsetAttribute===m.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);T.attributes.applyOffset=new f.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}const w=T.attributes,S=o.A.fromVertices(w.position.values,void 0,3);return new A.A({attributes:w,indices:T.indices,primitiveType:b.A.LINES,boundingSphere:S,offsetAttribute:e._offsetAttribute})};const I=S},672743:(e,t,n)=>{"use strict";n.d(t,{A:()=>le});const{entries:i,setPrototypeOf:o,isFrozen:r,getPrototypeOf:s,getOwnPropertyDescriptor:a}=Object;let{freeze:c,seal:l,create:u}=Object,{apply:d,construct:h}="undefined"!=typeof Reflect&&Reflect;c||(c=function(e){return e}),l||(l=function(e){return e}),d||(d=function(e,t,n){return e.apply(t,n)}),h||(h=function(e,t){return new e(...t)});const A=I(Array.prototype.forEach),f=I(Array.prototype.lastIndexOf),p=I(Array.prototype.pop),m=I(Array.prototype.push),_=I(Array.prototype.splice),g=I(String.prototype.toLowerCase),y=I(String.prototype.toString),b=I(String.prototype.match),v=I(String.prototype.replace),T=I(String.prototype.indexOf),w=I(String.prototype.trim),E=I(Object.prototype.hasOwnProperty),S=I(RegExp.prototype.test),C=(x=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h(x,t)});var x;function I(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return d(e,t,i)}}function P(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;o&&o(e,null);let i=t.length;for(;i--;){let o=t[i];if("string"==typeof o){const e=n(o);e!==o&&(r(t)||(t[i]=e),o=e)}e[o]=!0}return e}function D(e){for(let t=0;t<e.length;t++)E(e,t)||(e[t]=null);return e}function O(e){const t=u(null);for(const[n,o]of i(e))E(e,n)&&(Array.isArray(o)?t[n]=D(o):o&&"object"==typeof o&&o.constructor===Object?t[n]=O(o):t[n]=o);return t}function L(e,t){for(;null!==e;){const n=a(e,t);if(n){if(n.get)return I(n.get);if("function"==typeof n.value)return I(n.value)}e=s(e)}return function(){return null}}const N=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F=c(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),U=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),k=c(["#text"]),V=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),H=c(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=l(/<%[\w\W]*|[\w\W]*%>/gm),q=l(/\$\{[\w\W]*/gm),Y=l(/^data-[\-\w.\u00B7-\uFFFF]+$/),X=l(/^aria-[\-\w]+$/),J=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q=l(/^(?:\w+script|data):/i),$=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K=l(/^html$/i),Z=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var ee=Object.freeze({__proto__:null,ARIA_ATTR:X,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:Z,DATA_ATTR:Y,DOCTYPE_NAME:K,ERB_EXPR:W,IS_ALLOWED_URI:J,IS_SCRIPT_OR_DATA:Q,MUSTACHE_EXPR:j,TMPLIT_EXPR:q});const te=function(){return"undefined"==typeof window?null:window};var ne=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();const n=t=>e(t);if(n.version="3.2.4",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:l,Node:d,Element:h,NodeFilter:x,NamedNodeMap:I=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:D,DOMParser:j,trustedTypes:W}=t,q=h.prototype,Y=L(q,"cloneNode"),X=L(q,"remove"),Q=L(q,"nextSibling"),$=L(q,"childNodes"),Z=L(q,"parentNode");if("function"==typeof l){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let ne,ie="";const{implementation:oe,createNodeIterator:re,createDocumentFragment:se,getElementsByTagName:ae}=o,{importNode:ce}=r;let le={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof i&&"function"==typeof Z&&oe&&void 0!==oe.createHTMLDocument;const{MUSTACHE_EXPR:ue,ERB_EXPR:de,TMPLIT_EXPR:he,DATA_ATTR:Ae,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:pe,ATTR_WHITESPACE:me,CUSTOM_ELEMENT:_e}=ee;let{IS_ALLOWED_URI:ge}=ee,ye=null;const be=P({},[...N,...M,...R,...B,...k]);let ve=null;const Te=P({},[...V,...H,...z,...G]);let we=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,Se=null,Ce=!0,xe=!0,Ie=!1,Pe=!0,De=!1,Oe=!0,Le=!1,Ne=!1,Me=!1,Re=!1,Fe=!1,Be=!1,Ue=!0,ke=!1,Ve=!0,He=!1,ze={},Ge=null;const je=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let We=null;const qe=P({},["audio","video","img","source","image","track"]);let Ye=null;const Xe=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let Ke=$e,Ze=!1,et=null;const tt=P({},[Je,Qe,$e],y);let nt=P({},["mi","mo","mn","ms","mtext"]),it=P({},["annotation-xml"]);const ot=P({},["title","style","font","a","script"]);let rt=null;const st=["application/xhtml+xml","text/html"];let at=null,ct=null;const lt=o.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ct||ct!==e){if(e&&"object"==typeof e||(e={}),e=O(e),rt=-1===st.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,at="application/xhtml+xml"===rt?y:g,ye=E(e,"ALLOWED_TAGS")?P({},e.ALLOWED_TAGS,at):be,ve=E(e,"ALLOWED_ATTR")?P({},e.ALLOWED_ATTR,at):Te,et=E(e,"ALLOWED_NAMESPACES")?P({},e.ALLOWED_NAMESPACES,y):tt,Ye=E(e,"ADD_URI_SAFE_ATTR")?P(O(Xe),e.ADD_URI_SAFE_ATTR,at):Xe,We=E(e,"ADD_DATA_URI_TAGS")?P(O(qe),e.ADD_DATA_URI_TAGS,at):qe,Ge=E(e,"FORBID_CONTENTS")?P({},e.FORBID_CONTENTS,at):je,Ee=E(e,"FORBID_TAGS")?P({},e.FORBID_TAGS,at):{},Se=E(e,"FORBID_ATTR")?P({},e.FORBID_ATTR,at):{},ze=!!E(e,"USE_PROFILES")&&e.USE_PROFILES,Ce=!1!==e.ALLOW_ARIA_ATTR,xe=!1!==e.ALLOW_DATA_ATTR,Ie=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,De=e.SAFE_FOR_TEMPLATES||!1,Oe=!1!==e.SAFE_FOR_XML,Le=e.WHOLE_DOCUMENT||!1,Re=e.RETURN_DOM||!1,Fe=e.RETURN_DOM_FRAGMENT||!1,Be=e.RETURN_TRUSTED_TYPE||!1,Me=e.FORCE_BODY||!1,Ue=!1!==e.SANITIZE_DOM,ke=e.SANITIZE_NAMED_PROPS||!1,Ve=!1!==e.KEEP_CONTENT,He=e.IN_PLACE||!1,ge=e.ALLOWED_URI_REGEXP||J,Ke=e.NAMESPACE||$e,nt=e.MATHML_TEXT_INTEGRATION_POINTS||nt,it=e.HTML_INTEGRATION_POINTS||it,we=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(we.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(we.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(we.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(xe=!1),Fe&&(Re=!0),ze&&(ye=P({},k),ve=[],!0===ze.html&&(P(ye,N),P(ve,V)),!0===ze.svg&&(P(ye,M),P(ve,H),P(ve,G)),!0===ze.svgFilters&&(P(ye,R),P(ve,H),P(ve,G)),!0===ze.mathMl&&(P(ye,B),P(ve,z),P(ve,G))),e.ADD_TAGS&&(ye===be&&(ye=O(ye)),P(ye,e.ADD_TAGS,at)),e.ADD_ATTR&&(ve===Te&&(ve=O(ve)),P(ve,e.ADD_ATTR,at)),e.ADD_URI_SAFE_ATTR&&P(Ye,e.ADD_URI_SAFE_ATTR,at),e.FORBID_CONTENTS&&(Ge===je&&(Ge=O(Ge)),P(Ge,e.FORBID_CONTENTS,at)),Ve&&(ye["#text"]=!0),Le&&P(ye,["html","head","body"]),ye.table&&(P(ye,["tbody"]),delete Ee.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw C('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,ie=ne.createHTML("")}else void 0===ne&&(ne=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(W,s)),null!==ne&&"string"==typeof ie&&(ie=ne.createHTML(""));c&&c(e),ct=e}},ht=P({},[...M,...R,...F]),At=P({},[...B,...U]),ft=function(e){m(n.removed,{element:e});try{Z(e).removeChild(e)}catch(t){X(e)}},pt=function(e,t){try{m(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Re||Fe)try{ft(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},mt=function(e){let t=null,n=null;if(Me)e="<remove></remove>"+e;else{const t=b(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===rt&&Ke===$e&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=ne?ne.createHTML(e):e;if(Ke===$e)try{t=(new j).parseFromString(i,rt)}catch(e){}if(!t||!t.documentElement){t=oe.createDocument(Ke,"template",null);try{t.documentElement.innerHTML=Ze?ie:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),Ke===$e?ae.call(t,Le?"html":"body")[0]:Le?t.documentElement:r},_t=function(e){return re.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},gt=function(e){return e instanceof D&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof I)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},yt=function(e){return"function"==typeof d&&e instanceof d};function bt(e,t,i){A(e,(e=>{e.call(n,t,i,ct)}))}const vt=function(e){let t=null;if(bt(le.beforeSanitizeElements,e,null),gt(e))return ft(e),!0;const i=at(e.nodeName);if(bt(le.uponSanitizeElement,e,{tagName:i,allowedTags:ye}),e.hasChildNodes()&&!yt(e.firstElementChild)&&S(/<[/\w]/g,e.innerHTML)&&S(/<[/\w]/g,e.textContent))return ft(e),!0;if(7===e.nodeType)return ft(e),!0;if(Oe&&8===e.nodeType&&S(/<[/\w]/g,e.data))return ft(e),!0;if(!ye[i]||Ee[i]){if(!Ee[i]&&wt(i)){if(we.tagNameCheck instanceof RegExp&&S(we.tagNameCheck,i))return!1;if(we.tagNameCheck instanceof Function&&we.tagNameCheck(i))return!1}if(Ve&&!Ge[i]){const t=Z(e)||e.parentNode,n=$(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i){const o=Y(n[i],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,Q(e))}}return ft(e),!0}return e instanceof h&&!function(e){let t=Z(e);t&&t.tagName||(t={namespaceURI:Ke,tagName:"template"});const n=g(e.tagName),i=g(t.tagName);return!!et[e.namespaceURI]&&(e.namespaceURI===Qe?t.namespaceURI===$e?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===i||nt[i]):Boolean(ht[n]):e.namespaceURI===Je?t.namespaceURI===$e?"math"===n:t.namespaceURI===Qe?"math"===n&&it[i]:Boolean(At[n]):e.namespaceURI===$e?!(t.namespaceURI===Qe&&!it[i])&&!(t.namespaceURI===Je&&!nt[i])&&!At[n]&&(ot[n]||!ht[n]):!("application/xhtml+xml"!==rt||!et[e.namespaceURI]))}(e)?(ft(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!S(/<\/no(script|embed|frames)/i,e.innerHTML)?(De&&3===e.nodeType&&(t=e.textContent,A([ue,de,he],(e=>{t=v(t,e," ")})),e.textContent!==t&&(m(n.removed,{element:e.cloneNode()}),e.textContent=t)),bt(le.afterSanitizeElements,e,null),!1):(ft(e),!0)},Tt=function(e,t,n){if(Ue&&("id"===t||"name"===t)&&(n in o||n in lt))return!1;if(xe&&!Se[t]&&S(Ae,t));else if(Ce&&S(fe,t));else if(!ve[t]||Se[t]){if(!(wt(e)&&(we.tagNameCheck instanceof RegExp&&S(we.tagNameCheck,e)||we.tagNameCheck instanceof Function&&we.tagNameCheck(e))&&(we.attributeNameCheck instanceof RegExp&&S(we.attributeNameCheck,t)||we.attributeNameCheck instanceof Function&&we.attributeNameCheck(t))||"is"===t&&we.allowCustomizedBuiltInElements&&(we.tagNameCheck instanceof RegExp&&S(we.tagNameCheck,n)||we.tagNameCheck instanceof Function&&we.tagNameCheck(n))))return!1}else if(Ye[t]);else if(S(ge,v(n,me,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==T(n,"data:")||!We[e])if(Ie&&!S(pe,v(n,me,"")));else if(n)return!1;return!0},wt=function(e){return"annotation-xml"!==e&&b(e,_e)},Et=function(e){bt(le.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||gt(e))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ve,forceKeepAttr:void 0};let o=t.length;for(;o--;){const r=t[o],{name:s,namespaceURI:a,value:c}=r,l=at(s);let u="value"===s?c:w(c);if(i.attrName=l,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,bt(le.uponSanitizeAttribute,e,i),u=i.attrValue,!ke||"id"!==l&&"name"!==l||(pt(s,e),u="user-content-"+u),Oe&&S(/((--!?|])>)|<\/(style|title)/i,u)){pt(s,e);continue}if(i.forceKeepAttr)continue;if(pt(s,e),!i.keepAttr)continue;if(!Pe&&S(/\/>/i,u)){pt(s,e);continue}De&&A([ue,de,he],(e=>{u=v(u,e," ")}));const d=at(e.nodeName);if(Tt(d,l,u)){if(ne&&"object"==typeof W&&"function"==typeof W.getAttributeType)if(a);else switch(W.getAttributeType(d,l)){case"TrustedHTML":u=ne.createHTML(u);break;case"TrustedScriptURL":u=ne.createScriptURL(u)}try{a?e.setAttributeNS(a,s,u):e.setAttribute(s,u),gt(e)?ft(e):p(n.removed)}catch(e){}}}bt(le.afterSanitizeAttributes,e,null)},St=function e(t){let n=null;const i=_t(t);for(bt(le.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)bt(le.uponSanitizeShadowNode,n,null),vt(n),Et(n),n.content instanceof a&&e(n.content);bt(le.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,s=null,c=null;if(Ze=!e,Ze&&(e="\x3c!--\x3e"),"string"!=typeof e&&!yt(e)){if("function"!=typeof e.toString)throw C("toString is not a function");if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Ne||dt(t),n.removed=[],"string"==typeof e&&(He=!1),He){if(e.nodeName){const t=at(e.nodeName);if(!ye[t]||Ee[t])throw C("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)i=mt("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!Re&&!De&&!Le&&-1===e.indexOf("<"))return ne&&Be?ne.createHTML(e):e;if(i=mt(e),!i)return Re?null:Be?ie:""}i&&Me&&ft(i.firstChild);const l=_t(He?e:i);for(;s=l.nextNode();)vt(s),Et(s),s.content instanceof a&&St(s.content);if(He)return e;if(Re){if(Fe)for(c=se.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(ve.shadowroot||ve.shadowrootmode)&&(c=ce.call(r,c,!0)),c}let u=Le?i.outerHTML:i.innerHTML;return Le&&ye["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&S(K,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+u),De&&A([ue,de,he],(e=>{u=v(u,e," ")})),ne&&Be?ne.createHTML(u):u},n.setConfig=function(){dt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ne=!0},n.clearConfig=function(){ct=null,Ne=!1},n.isValidAttribute=function(e,t,n){ct||dt({});const i=at(e),o=at(t);return Tt(i,o,n)},n.addHook=function(e,t){"function"==typeof t&&m(le[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=f(le[e],t);return-1===n?void 0:_(le[e],n,1)[0]}return p(le[e])},n.removeHooks=function(e){le[e]=[]},n.removeAllHooks=function(){le={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}(),ie=n(369031),oe=n(419061),re=n(491446);let se=0;const ae={};function ce(e,t){let n;ie.A.typeOf.string("html",e);const i=e;(0,re.A)(ae[i])?n=ae[i]:(n=se++,ae[i]=n),t=(0,oe.A)(t,!1),this._id=n,this._html=e,this._showOnScreen=t,this._element=void 0}Object.defineProperties(ce.prototype,{html:{get:function(){return this._html}},id:{get:function(){return this._id}},showOnScreen:{get:function(){return this._showOnScreen},set:function(e){this._showOnScreen=e}},element:{get:function(){if(!(0,re.A)(this._element)){const e=ne.sanitize(this._html),t=document.createElement("div");t._creditId=this._id,t.style.display="inline",t.innerHTML=e;const n=t.querySelectorAll("a");for(let e=0;e<n.length;e++)n[e].setAttribute("target","_blank");this._element=t}return this._element}}}),ce.equals=function(e,t){return e===t||(0,re.A)(e)&&(0,re.A)(t)&&e._id===t._id&&e._showOnScreen===t._showOnScreen},ce.prototype.equals=function(e){return ce.equals(this,e)},ce.getIonCredit=function(e){const t=(0,re.A)(e.collapsible)&&!e.collapsible,n=new ce(e.html,t);return n._isIon=-1!==n.html.indexOf("ion-credit.png"),n},ce.clone=function(e){if((0,re.A)(e))return new ce(e.html,e.showOnScreen)};const le=ce},317061:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(660662),o=n(434067),r=n(267980),s=n(571804),a=n(302982),c=n(419061),l=n(491446),u=n(605971),d=n(944479),h=n(305439),A=n(46362),f=n(794554),p=n(874915),m=n(367817),_=n(402330),g=n(769534);const y=new o.A,b=new r.A,v=new r.A,T=new r.A,w=new r.A;function E(e){const t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).length,n=e.topRadius,i=e.bottomRadius,o=(0,c.A)(e.vertexFormat,g.A.DEFAULT),r=(0,c.A)(e.slices,128);if(!(0,l.A)(t))throw new u.A("options.length must be defined.");if(!(0,l.A)(n))throw new u.A("options.topRadius must be defined.");if(!(0,l.A)(i))throw new u.A("options.bottomRadius must be defined.");if(r<3)throw new u.A("options.slices must be greater than or equal to 3.");if((0,l.A)(e.offsetAttribute)&&e.offsetAttribute===f.A.TOP)throw new u.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=g.A.clone(o),this._slices=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}E.packedLength=g.A.packedLength+5,E.pack=function(e,t,n){if(!(0,l.A)(e))throw new u.A("value is required");if(!(0,l.A)(t))throw new u.A("array is required");return n=(0,c.A)(n,0),g.A.pack(e._vertexFormat,t,n),n+=g.A.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=(0,c.A)(e._offsetAttribute,-1),t};const S=new g.A,C={vertexFormat:S,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};let x;E.unpack=function(e,t,n){if(!(0,l.A)(e))throw new u.A("array is required");t=(0,c.A)(t,0);const i=g.A.unpack(e,t,S);t+=g.A.packedLength;const o=e[t++],r=e[t++],s=e[t++],a=e[t++],d=e[t];return(0,l.A)(n)?(n._vertexFormat=g.A.clone(i,n._vertexFormat),n._length=o,n._topRadius=r,n._bottomRadius=s,n._slices=a,n._offsetAttribute=-1===d?void 0:d,n):(C.length=o,C.topRadius=r,C.bottomRadius=s,C.slices=a,C.offsetAttribute=-1===d?void 0:d,new E(C))},E.createGeometry=function(e){let t=e._length;const n=e._topRadius,c=e._bottomRadius,u=e._vertexFormat,g=e._slices;if(t<=0||n<0||c<0||0===n&&0===c)return;const E=g+g,S=g+E,C=E+E,x=a.A.computePositions(t,n,c,g,!0),I=u.st?new Float32Array(2*C):void 0,P=u.normal?new Float32Array(3*C):void 0,D=u.tangent?new Float32Array(3*C):void 0,O=u.bitangent?new Float32Array(3*C):void 0;let L;const N=u.normal||u.tangent||u.bitangent;if(N){const e=u.tangent||u.bitangent;let i=0,o=0,s=0;const a=Math.atan2(c-n,t),l=b;l.z=Math.sin(a);const d=Math.cos(a);let h=T,A=v;for(L=0;L<g;L++){const t=L/g*m.A.TWO_PI,n=d*Math.cos(t),a=d*Math.sin(t);N&&(l.x=n,l.y=a,e&&(h=r.A.normalize(r.A.cross(r.A.UNIT_Z,l,h),h)),u.normal&&(P[i++]=l.x,P[i++]=l.y,P[i++]=l.z,P[i++]=l.x,P[i++]=l.y,P[i++]=l.z),u.tangent&&(D[o++]=h.x,D[o++]=h.y,D[o++]=h.z,D[o++]=h.x,D[o++]=h.y,D[o++]=h.z),u.bitangent&&(A=r.A.normalize(r.A.cross(l,h,A),A),O[s++]=A.x,O[s++]=A.y,O[s++]=A.z,O[s++]=A.x,O[s++]=A.y,O[s++]=A.z))}for(L=0;L<g;L++)u.normal&&(P[i++]=0,P[i++]=0,P[i++]=-1),u.tangent&&(D[o++]=1,D[o++]=0,D[o++]=0),u.bitangent&&(O[s++]=0,O[s++]=-1,O[s++]=0);for(L=0;L<g;L++)u.normal&&(P[i++]=0,P[i++]=0,P[i++]=1),u.tangent&&(D[o++]=1,D[o++]=0,D[o++]=0),u.bitangent&&(O[s++]=0,O[s++]=1,O[s++]=0)}const M=12*g-12,R=p.A.createTypedArray(C,M);let F=0,B=0;for(L=0;L<g-1;L++)R[F++]=B,R[F++]=B+2,R[F++]=B+3,R[F++]=B,R[F++]=B+3,R[F++]=B+1,B+=2;for(R[F++]=E-2,R[F++]=0,R[F++]=1,R[F++]=E-2,R[F++]=1,R[F++]=E-1,L=1;L<g-1;L++)R[F++]=E+L+1,R[F++]=E+L,R[F++]=E;for(L=1;L<g-1;L++)R[F++]=S,R[F++]=S+L,R[F++]=S+L+1;let U=0;if(u.st){const e=Math.max(n,c);for(L=0;L<C;L++){const t=r.A.fromArray(x,3*L,w);I[U++]=(t.x+e)/(2*e),I[U++]=(t.y+e)/(2*e)}}const k=new A.A;u.position&&(k.position=new h.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:x})),u.normal&&(k.normal=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:P})),u.tangent&&(k.tangent=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:D})),u.bitangent&&(k.bitangent=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:O})),u.st&&(k.st=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:2,values:I})),y.x=.5*t,y.y=Math.max(c,n);const V=new i.A(r.A.ZERO,o.A.magnitude(y));if((0,l.A)(e._offsetAttribute)){t=x.length;const n=e._offsetAttribute===f.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);k.applyOffset=new h.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.A({attributes:k,indices:R,primitiveType:_.A.TRIANGLES,boundingSphere:V,offsetAttribute:e._offsetAttribute})},E.getUnitCylinder=function(){return(0,l.A)(x)||(x=E.createGeometry(new E({topRadius:1,bottomRadius:1,length:1,vertexFormat:g.A.POSITION_ONLY}))),x};const I=E},302982:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(367817);const o={computePositions:function(e,t,n,o,r){const s=.5*e,a=-s,c=o+o,l=new Float64Array(3*(r?2*c:c));let u,d=0,h=0;const A=r?3*c:0,f=r?3*(c+o):3*o;for(u=0;u<o;u++){const e=u/o*i.A.TWO_PI,c=Math.cos(e),p=Math.sin(e),m=c*n,_=p*n,g=c*t,y=p*t;l[h+A]=m,l[h+A+1]=_,l[h+A+2]=a,l[h+f]=g,l[h+f+1]=y,l[h+f+2]=s,h+=3,r&&(l[d++]=m,l[d++]=_,l[d++]=a,l[d++]=g,l[d++]=y,l[d++]=s)}return l}}},902503:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(660662),o=n(434067),r=n(267980),s=n(369031),a=n(571804),c=n(302982),l=n(419061),u=n(491446),d=n(605971),h=n(944479),A=n(305439),f=n(46362),p=n(794554),m=n(874915),_=n(402330);const g=new o.A;function y(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).length,n=e.topRadius,i=e.bottomRadius,o=(0,l.A)(e.slices,128),r=Math.max((0,l.A)(e.numberOfVerticalLines,16),0);if(s.A.typeOf.number("options.positions",t),s.A.typeOf.number("options.topRadius",n),s.A.typeOf.number("options.bottomRadius",i),s.A.typeOf.number.greaterThanOrEquals("options.slices",o,3),(0,u.A)(e.offsetAttribute)&&e.offsetAttribute===p.A.TOP)throw new d.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._slices=o,this._numberOfVerticalLines=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderOutlineGeometry"}y.packedLength=6,y.pack=function(e,t,n){return s.A.typeOf.object("value",e),s.A.defined("array",t),n=(0,l.A)(n,0),t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n++]=e._numberOfVerticalLines,t[n]=(0,l.A)(e._offsetAttribute,-1),t};const b={length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};y.unpack=function(e,t,n){s.A.defined("array",e),t=(0,l.A)(t,0);const i=e[t++],o=e[t++],r=e[t++],a=e[t++],c=e[t++],d=e[t];return(0,u.A)(n)?(n._length=i,n._topRadius=o,n._bottomRadius=r,n._slices=a,n._numberOfVerticalLines=c,n._offsetAttribute=-1===d?void 0:d,n):(b.length=i,b.topRadius=o,b.bottomRadius=r,b.slices=a,b.numberOfVerticalLines=c,b.offsetAttribute=-1===d?void 0:d,new y(b))},y.createGeometry=function(e){let t=e._length;const n=e._topRadius,s=e._bottomRadius,l=e._slices,d=e._numberOfVerticalLines;if(t<=0||n<0||s<0||0===n&&0===s)return;const y=2*l,b=c.A.computePositions(t,n,s,l,!1);let v,T=2*l;if(d>0){const e=Math.min(d,l);v=Math.round(l/e),T+=e}const w=m.A.createTypedArray(y,2*T);let E,S=0;for(E=0;E<l-1;E++)w[S++]=E,w[S++]=E+1,w[S++]=E+l,w[S++]=E+1+l;if(w[S++]=l-1,w[S++]=0,w[S++]=l+l-1,w[S++]=l,d>0)for(E=0;E<l;E+=v)w[S++]=E,w[S++]=E+l;const C=new f.A;C.position=new A.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:b}),g.x=.5*t,g.y=Math.max(s,n);const x=new i.A(r.A.ZERO,o.A.magnitude(g));if((0,u.A)(e._offsetAttribute)){t=b.length;const n=e._offsetAttribute===p.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);C.applyOffset=new A.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new h.A({attributes:C,indices:w,primitiveType:_.A.LINES,boundingSphere:x,offsetAttribute:e._offsetAttribute})};const v=y},330926:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(571804),o=n(419061),r=n(491446),s=n(605971);function a(e,t){if(e=(0,o.A)(e,0),(t=(0,o.A)(t,Number.MAX_VALUE))<=e)throw new s.A("far distance must be greater than near distance.");this.value=new Float32Array([e,t])}Object.defineProperties(a.prototype,{componentDatatype:{get:function(){return i.A.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}}),a.fromDistanceDisplayCondition=function(e){if(!(0,r.A)(e))throw new s.A("distanceDisplayCondition is required.");if(e.far<=e.near)throw new s.A("distanceDisplayCondition.far distance must be greater than distanceDisplayCondition.near distance.");return new a(e.near,e.far)},a.toValue=function(e,t){if(!(0,r.A)(e))throw new s.A("distanceDisplayCondition is required.");return(0,r.A)(t)?(t[0]=e.near,t[1]=e.far,t):new Float32Array([e.near,e.far])};const c=a},634061:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(367817),o=n(369031),r=n(491446);function s(e){o.A.typeOf.object("options",e),o.A.defined("options.comparator",e.comparator),(0,r.A)(e.maximumLength)&&o.A.typeOf.number.greaterThanOrEquals("options.maximumLength",e.maximumLength,0),this._comparator=e.comparator,this._maximumLength=e.maximumLength,this._array=(0,r.A)(e.maximumLength)?new Array(e.maximumLength):[],this._length=0}function a(e,t,n){const i=e._array,o=i[t];i[t]=i[n],i[n]=o}function c(e,t,n){return e._comparator(e._array[t],e._array[n])<0}function l(e,t,n){return e._comparator(e._array[t],e._array[n])>0}function u(e,t){if(0===t)return;const n=Math.floor(i.A.log2(t+1))%2==0,o=Math.floor((t-1)/2),r=c(e,t,o);for(r!==n&&(a(e,t,o),t=o);t>=3;){const n=Math.floor((t-3)/4);if(c(e,t,n)!==r)break;a(e,t,n),t=n}}function d(e,t){const n=e._length,o=Math.floor(i.A.log2(t+1))%2==0;let r;for(;(r=2*t+1)<n;){let i=r;const s=r+1;if(s<n){c(e,s,i)===o&&(i=s);const t=2*r+1,a=Math.max(Math.min(n-t,4),0);for(let n=0;n<a;n++){const r=t+n;c(e,r,i)===o&&(i=r)}}if(c(e,i,t)===o&&(a(e,i,t),i!==r&&i!==s)){const t=Math.floor((i-1)/2);l(e,i,t)===o&&a(e,i,t)}t=i}}Object.defineProperties(s.prototype,{length:{get:function(){return this._length}},maximumLength:{get:function(){return this._maximumLength},set:function(e){if((0,r.A)(e)){for(o.A.typeOf.number.greaterThanOrEquals("maximumLength",e,0);this._length>e;)this.removeMinimum();this._array.length=e}this._maximumLength=e}},internalArray:{get:function(){return this._array}},comparator:{get:function(){return this._comparator}}}),s.prototype.clone=function(){const e=this._maximumLength,t=this._comparator,n=this._array,i=this._length,o=new s({comparator:t,maximumLength:e});o._length=i;for(let e=0;e<i;e++)o._array[e]=n[e];return o},s.prototype.reset=function(){this._length=0;const e=this._maximumLength;if((0,r.A)(e))for(let t=0;t<e;t++)this._array[t]=void 0;else this._array.length=0},s.prototype.resort=function(){const e=this._length;for(let t=0;t<e;t++)u(this,t)},s.prototype.insert=function(e){let t;const n=this._maximumLength;if((0,r.A)(n)){if(0===n)return;if(this._length===n){const n=this._array[0];if(this._comparator(e,n)<=0)return e;t=this.removeMinimum()}}const i=this._length;return this._array[i]=e,this._length++,u(this,i),t},s.prototype.removeMinimum=function(){const e=this._length;if(0===e)return;this._length--;const t=this._array[0];return e>=2&&(this._array[0]=this._array[e-1],d(this,0)),this._array[e-1]=void 0,t},s.prototype.removeMaximum=function(){const e=this._length;if(0===e)return;let t;if(this._length--,e<=2)t=this._array[e-1];else{const n=l(this,1,2)?1:2;t=this._array[n],this._array[n]=this._array[e-1],e>=4&&d(this,n)}return this._array[e-1]=void 0,t},s.prototype.getMinimum=function(){if(0!==this._length)return this._array[0]},s.prototype.getMaximum=function(){const e=this._length;if(0!==e)return e<=2?this._array[e-1]:this._array[l(this,1,2)?1:2]};const h=s},606707:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446);function o(){this.head=void 0,this.tail=void 0,this._length=0}function r(e,t,n){this.item=e,this.previous=t,this.next=n}function s(e,t){(0,i.A)(t.previous)&&(0,i.A)(t.next)?(t.previous.next=t.next,t.next.previous=t.previous):(0,i.A)(t.previous)?(t.previous.next=void 0,e.tail=t.previous):(0,i.A)(t.next)?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}Object.defineProperties(o.prototype,{length:{get:function(){return this._length}}}),o.prototype.add=function(e){const t=new r(e,this.tail,void 0);return(0,i.A)(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t},o.prototype.remove=function(e){(0,i.A)(e)&&(s(this,e),--this._length)},o.prototype.splice=function(e,t){if(e===t)return;s(this,t);const n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e};const a=o},924290:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(821417);const o={LINEAR_NONE:i.GS.Linear.None,QUADRATIC_IN:i.GS.Quadratic.In,QUADRATIC_OUT:i.GS.Quadratic.Out,QUADRATIC_IN_OUT:i.GS.Quadratic.InOut,CUBIC_IN:i.GS.Cubic.In,CUBIC_OUT:i.GS.Cubic.Out,CUBIC_IN_OUT:i.GS.Cubic.InOut,QUARTIC_IN:i.GS.Quartic.In,QUARTIC_OUT:i.GS.Quartic.Out,QUARTIC_IN_OUT:i.GS.Quartic.InOut,QUINTIC_IN:i.GS.Quintic.In,QUINTIC_OUT:i.GS.Quintic.Out,QUINTIC_IN_OUT:i.GS.Quintic.InOut,SINUSOIDAL_IN:i.GS.Sinusoidal.In,SINUSOIDAL_OUT:i.GS.Sinusoidal.Out,SINUSOIDAL_IN_OUT:i.GS.Sinusoidal.InOut,EXPONENTIAL_IN:i.GS.Exponential.In,EXPONENTIAL_OUT:i.GS.Exponential.Out,EXPONENTIAL_IN_OUT:i.GS.Exponential.InOut,CIRCULAR_IN:i.GS.Circular.In,CIRCULAR_OUT:i.GS.Circular.Out,CIRCULAR_IN_OUT:i.GS.Circular.InOut,ELASTIC_IN:i.GS.Elastic.In,ELASTIC_OUT:i.GS.Elastic.Out,ELASTIC_IN_OUT:i.GS.Elastic.InOut,BACK_IN:i.GS.Back.In,BACK_OUT:i.GS.Back.Out,BACK_IN_OUT:i.GS.Back.InOut,BOUNCE_IN:i.GS.Bounce.In,BOUNCE_OUT:i.GS.Bounce.Out,BOUNCE_IN_OUT:i.GS.Bounce.InOut},r=Object.freeze(o)},602317:(e,t,n)=>{"use strict";n.d(t,{A:()=>ee});var i=n(660662),o=n(434067),r=n(267980),s=n(336946),a=n(369031),c=n(571804),l=n(419061),u=n(491446),d=n(605971),h=n(715726),A=n(610750),f=n(653577),p=n(944479),m=n(305439),_=n(46362),g=n(75200),y=n(794554),b=n(34233),v=n(874915),T=n(367817),w=n(331185),E=n(402330),S=n(99479),C=n(697422),x=n(769534);const I=new r.A,P=new r.A,D=new r.A,O=new r.A,L=new o.A,N=new w.A,M=new w.A,R=new S.A,F=new r.A,B=new r.A,U=new r.A,k=new s.A,V=new r.A,H=new o.A,z=new o.A;function G(e,t,n){const i=t.vertexFormat,s=t.center,a=t.semiMajorAxis,l=t.semiMinorAxis,d=t.ellipsoid,A=t.stRotation,p=n?e.length/3*2:e.length/3,g=t.shadowVolume,b=i.st?new Float32Array(2*p):void 0,v=i.normal?new Float32Array(3*p):void 0,T=i.tangent?new Float32Array(3*p):void 0,E=i.bitangent?new Float32Array(3*p):void 0,C=g?new Float32Array(3*p):void 0;let x=0,O=F,G=B,j=U;const W=new f.A(d),q=W.project(d.cartesianToCartographic(s,k),V),Y=d.scaleToGeodeticSurface(s,I);d.geodeticSurfaceNormal(Y,Y);let X=N,J=M;if(0!==A){let e=S.A.fromAxisAngle(Y,A,R);X=w.A.fromQuaternion(e,X),e=S.A.fromAxisAngle(Y,-A,R),J=w.A.fromQuaternion(e,J)}else X=w.A.clone(w.A.IDENTITY,X),J=w.A.clone(w.A.IDENTITY,J);const Q=o.A.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,H),$=o.A.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,z);let K=e.length;const Z=n?K:0,ee=Z/3*2;for(let t=0;t<K;t+=3){const o=t+1,s=t+2,c=r.A.fromArray(e,t,I);if(i.st){const e=w.A.multiplyByVector(X,c,P),t=W.project(d.cartesianToCartographic(e,k),D);r.A.subtract(t,q,t),L.x=(t.x+a)/(2*a),L.y=(t.y+l)/(2*l),Q.x=Math.min(L.x,Q.x),Q.y=Math.min(L.y,Q.y),$.x=Math.max(L.x,$.x),$.y=Math.max(L.y,$.y),n&&(b[x+ee]=L.x,b[x+1+ee]=L.y),b[x++]=L.x,b[x++]=L.y}(i.normal||i.tangent||i.bitangent||g)&&(O=d.geodeticSurfaceNormal(c,O),g&&(C[t+Z]=-O.x,C[o+Z]=-O.y,C[s+Z]=-O.z),(i.normal||i.tangent||i.bitangent)&&((i.tangent||i.bitangent)&&(G=r.A.normalize(r.A.cross(r.A.UNIT_Z,O,G),G),w.A.multiplyByVector(J,G,G)),i.normal&&(v[t]=O.x,v[o]=O.y,v[s]=O.z,n&&(v[t+Z]=-O.x,v[o+Z]=-O.y,v[s+Z]=-O.z)),i.tangent&&(T[t]=G.x,T[o]=G.y,T[s]=G.z,n&&(T[t+Z]=-G.x,T[o+Z]=-G.y,T[s+Z]=-G.z)),i.bitangent&&(j=r.A.normalize(r.A.cross(O,G,j),j),E[t]=j.x,E[o]=j.y,E[s]=j.z,n&&(E[t+Z]=j.x,E[o+Z]=j.y,E[s+Z]=j.z))))}if(i.st){K=b.length;for(let e=0;e<K;e+=2)b[e]=(b[e]-Q.x)/($.x-Q.x),b[e+1]=(b[e+1]-Q.y)/($.y-Q.y)}const te=new _.A;if(i.position){const i=h.A.raisePositionsToHeight(e,t,n);te.position=new m.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:i})}if(i.st&&(te.st=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:b})),i.normal&&(te.normal=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:v})),i.tangent&&(te.tangent=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:T})),i.bitangent&&(te.bitangent=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:E})),g&&(te.extrudeDirection=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:C})),n&&(0,u.A)(t.offsetAttribute)){let e=new Uint8Array(p);if(t.offsetAttribute===y.A.TOP)e=e.fill(1,0,p/2);else{const n=t.offsetAttribute===y.A.NONE?0:1;e=e.fill(n)}te.applyOffset=new m.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return te}function j(e){const t=new Array(e*(e+1)*12-6);let n,i,o,r,s,a=0;for(n=0,o=1,r=0;r<3;r++)t[a++]=o++,t[a++]=n,t[a++]=o;for(r=2;r<e+1;++r){for(o=r*(r+1)-1,n=(r-1)*r-1,t[a++]=o++,t[a++]=n,t[a++]=o,i=2*r,s=0;s<i-1;++s)t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n,t[a++]=o;t[a++]=o++,t[a++]=n,t[a++]=o}for(i=2*e,++o,++n,r=0;r<i-1;++r)t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n,t[a++]=o;for(t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n++,t[a++]=n,++n,r=e-1;r>1;--r){for(t[a++]=n++,t[a++]=n,t[a++]=o,i=2*r,s=0;s<i-1;++s)t[a++]=o,t[a++]=n++,t[a++]=n,t[a++]=o++,t[a++]=n,t[a++]=o;t[a++]=n++,t[a++]=n++,t[a++]=o++}for(r=0;r<3;r++)t[a++]=n++,t[a++]=n,t[a++]=o;return t}let W=new r.A;const q=new i.A,Y=new i.A;function X(e,t,n,i,o,s,a){const c=h.A.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:o},!1,!0).outerPositions,l=c.length/3,u=new Array(l);for(let e=0;e<l;++e)u[e]=r.A.fromArray(c,3*e);const d=C.A.fromCartesianArray(u,s,a);return d.width>T.A.PI&&(d.north=d.north>0?T.A.PI_OVER_TWO-T.A.EPSILON7:d.north,d.south=d.south<0?T.A.EPSILON7-T.A.PI_OVER_TWO:d.south,d.east=T.A.PI,d.west=-T.A.PI),d}function J(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).center,n=(0,l.A)(e.ellipsoid,A.A.WGS84),i=e.semiMajorAxis,o=e.semiMinorAxis,s=(0,l.A)(e.granularity,T.A.RADIANS_PER_DEGREE),c=(0,l.A)(e.vertexFormat,x.A.DEFAULT);if(a.A.defined("options.center",t),a.A.typeOf.number("options.semiMajorAxis",i),a.A.typeOf.number("options.semiMinorAxis",o),i<o)throw new d.A("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(s<=0)throw new d.A("granularity must be greater than zero.");const u=(0,l.A)(e.height,0),h=(0,l.A)(e.extrudedHeight,u);this._center=r.A.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=A.A.clone(n),this._rotation=(0,l.A)(e.rotation,0),this._stRotation=(0,l.A)(e.stRotation,0),this._height=Math.max(h,u),this._granularity=s,this._vertexFormat=x.A.clone(c),this._extrudedHeight=Math.min(h,u),this._shadowVolume=(0,l.A)(e.shadowVolume,!1),this._workerName="createEllipseGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}J.packedLength=r.A.packedLength+A.A.packedLength+x.A.packedLength+9,J.pack=function(e,t,n){return a.A.defined("value",e),a.A.defined("array",t),n=(0,l.A)(n,0),r.A.pack(e._center,t,n),n+=r.A.packedLength,A.A.pack(e._ellipsoid,t,n),n+=A.A.packedLength,x.A.pack(e._vertexFormat,t,n),n+=x.A.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=(0,l.A)(e._offsetAttribute,-1),t};const Q=new r.A,$=new A.A,K=new x.A,Z={center:Q,ellipsoid:$,vertexFormat:K,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};J.unpack=function(e,t,n){a.A.defined("array",e),t=(0,l.A)(t,0);const i=r.A.unpack(e,t,Q);t+=r.A.packedLength;const o=A.A.unpack(e,t,$);t+=A.A.packedLength;const s=x.A.unpack(e,t,K);t+=x.A.packedLength;const c=e[t++],d=e[t++],h=e[t++],f=e[t++],p=e[t++],m=e[t++],_=e[t++],g=1===e[t++],y=e[t];return(0,u.A)(n)?(n._center=r.A.clone(i,n._center),n._ellipsoid=A.A.clone(o,n._ellipsoid),n._vertexFormat=x.A.clone(s,n._vertexFormat),n._semiMajorAxis=c,n._semiMinorAxis=d,n._rotation=h,n._stRotation=f,n._height=p,n._granularity=m,n._extrudedHeight=_,n._shadowVolume=g,n._offsetAttribute=-1===y?void 0:y,n):(Z.height=p,Z.extrudedHeight=_,Z.granularity=m,Z.stRotation=f,Z.rotation=h,Z.semiMajorAxis=c,Z.semiMinorAxis=d,Z.shadowVolume=g,Z.offsetAttribute=-1===y?void 0:y,new J(Z))},J.computeRectangle=function(e,t){const n=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).center,i=(0,l.A)(e.ellipsoid,A.A.WGS84),o=e.semiMajorAxis,r=e.semiMinorAxis,s=(0,l.A)(e.granularity,T.A.RADIANS_PER_DEGREE),c=(0,l.A)(e.rotation,0);if(a.A.defined("options.center",n),a.A.typeOf.number("options.semiMajorAxis",o),a.A.typeOf.number("options.semiMinorAxis",r),o<r)throw new d.A("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(s<=0)throw new d.A("granularity must be greater than zero.");return X(n,o,r,c,s,i,t)},J.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,s=!T.A.equalsEpsilon(t,n,0,T.A.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const a={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,vertexFormat:e._vertexFormat,stRotation:e._stRotation};let l;if(s)a.extrudedHeight=n,a.shadowVolume=e._shadowVolume,a.offsetAttribute=e._offsetAttribute,l=function(e){const t=e.center,n=e.ellipsoid,s=e.semiMajorAxis;let a=r.A.multiplyByScalar(n.geodeticSurfaceNormal(t,I),e.height,I);q.center=r.A.add(t,a,q.center),q.radius=s,a=r.A.multiplyByScalar(n.geodeticSurfaceNormal(t,a),e.extrudedHeight,a),Y.center=r.A.add(t,a,Y.center),Y.radius=s;const l=h.A.computeEllipsePositions(e,!0,!0),d=l.positions,A=l.numPts,T=l.outerPositions,C=i.A.union(q,Y),x=G(d,e,!0);let M=j(A);const W=M.length;M.length=2*W;const X=d.length/3;for(let e=0;e<W;e+=3)M[e+W]=M[e+2]+X,M[e+1+W]=M[e+1]+X,M[e+2+W]=M[e]+X;const J=v.A.createTypedArray(2*X/3,M),Q=new p.A({attributes:x,indices:J,primitiveType:E.A.TRIANGLES}),$=function(e,t){const n=t.vertexFormat,i=t.center,s=t.semiMajorAxis,a=t.semiMinorAxis,l=t.ellipsoid,d=t.height,h=t.extrudedHeight,A=t.stRotation,p=e.length/3*2,g=new Float64Array(3*p),b=n.st?new Float32Array(2*p):void 0,v=n.normal?new Float32Array(3*p):void 0,T=n.tangent?new Float32Array(3*p):void 0,E=n.bitangent?new Float32Array(3*p):void 0,C=t.shadowVolume,x=C?new Float32Array(3*p):void 0;let M=0,G=F,j=B,W=U;const q=new f.A(l),Y=q.project(l.cartesianToCartographic(i,k),V),X=l.scaleToGeodeticSurface(i,I);l.geodeticSurfaceNormal(X,X);const J=S.A.fromAxisAngle(X,A,R),Q=w.A.fromQuaternion(J,N),$=o.A.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,H),K=o.A.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,z);let Z=e.length;const ee=Z/3*2;for(let t=0;t<Z;t+=3){const i=t+1,o=t+2;let c,u=r.A.fromArray(e,t,I);if(n.st){const e=w.A.multiplyByVector(Q,u,P),t=q.project(l.cartesianToCartographic(e,k),D);r.A.subtract(t,Y,t),L.x=(t.x+s)/(2*s),L.y=(t.y+a)/(2*a),$.x=Math.min(L.x,$.x),$.y=Math.min(L.y,$.y),K.x=Math.max(L.x,K.x),K.y=Math.max(L.y,K.y),b[M+ee]=L.x,b[M+1+ee]=L.y,b[M++]=L.x,b[M++]=L.y}u=l.scaleToGeodeticSurface(u,u),c=r.A.clone(u,P),G=l.geodeticSurfaceNormal(u,G),C&&(x[t+Z]=-G.x,x[i+Z]=-G.y,x[o+Z]=-G.z);let A=r.A.multiplyByScalar(G,d,O);if(u=r.A.add(u,A,u),A=r.A.multiplyByScalar(G,h,A),c=r.A.add(c,A,c),n.position&&(g[t+Z]=c.x,g[i+Z]=c.y,g[o+Z]=c.z,g[t]=u.x,g[i]=u.y,g[o]=u.z),n.normal||n.tangent||n.bitangent){W=r.A.clone(G,W);const s=r.A.fromArray(e,(t+3)%Z,O);r.A.subtract(s,u,s);const a=r.A.subtract(c,u,D);G=r.A.normalize(r.A.cross(a,s,G),G),n.normal&&(v[t]=G.x,v[i]=G.y,v[o]=G.z,v[t+Z]=G.x,v[i+Z]=G.y,v[o+Z]=G.z),n.tangent&&(j=r.A.normalize(r.A.cross(W,G,j),j),T[t]=j.x,T[i]=j.y,T[o]=j.z,T[t+Z]=j.x,T[t+1+Z]=j.y,T[t+2+Z]=j.z),n.bitangent&&(E[t]=W.x,E[i]=W.y,E[o]=W.z,E[t+Z]=W.x,E[i+Z]=W.y,E[o+Z]=W.z)}}if(n.st){Z=b.length;for(let e=0;e<Z;e+=2)b[e]=(b[e]-$.x)/(K.x-$.x),b[e+1]=(b[e+1]-$.y)/(K.y-$.y)}const te=new _.A;if(n.position&&(te.position=new m.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:g})),n.st&&(te.st=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:b})),n.normal&&(te.normal=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:v})),n.tangent&&(te.tangent=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:T})),n.bitangent&&(te.bitangent=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:E})),C&&(te.extrudeDirection=new m.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:x})),(0,u.A)(t.offsetAttribute)){let e=new Uint8Array(p);if(t.offsetAttribute===y.A.TOP)e=e.fill(1,0,p/2);else{const n=t.offsetAttribute===y.A.NONE?0:1;e=e.fill(n)}te.applyOffset=new m.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return te}(T,e);M=function(e){const t=e.length/3,n=v.A.createTypedArray(t,6*t);let i=0;for(let e=0;e<t;e++){const o=e,r=e+t,s=(o+1)%t,a=s+t;n[i++]=o,n[i++]=r,n[i++]=s,n[i++]=s,n[i++]=r,n[i++]=a}return n}(T);const K=v.A.createTypedArray(2*T.length/3,M),Z=new p.A({attributes:$,indices:K,primitiveType:E.A.TRIANGLES}),ee=b.A.combineInstances([new g.A({geometry:Q}),new g.A({geometry:Z})]);return{boundingSphere:C,attributes:ee[0].attributes,indices:ee[0].indices}}(a);else if(l=function(e){const t=e.center;W=r.A.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,W),e.height,W),W=r.A.add(t,W,W);const n=new i.A(W,e.semiMajorAxis),o=h.A.computeEllipsePositions(e,!0,!1),s=o.positions,a=o.numPts,c=G(s,e,!1);let l=j(a);return l=v.A.createTypedArray(s.length/3,l),{boundingSphere:n,attributes:c,indices:l}}(a),(0,u.A)(e._offsetAttribute)){const t=l.attributes.position.values.length,n=e._offsetAttribute===y.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);l.attributes.applyOffset=new m.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new p.A({attributes:l.attributes,indices:l.indices,primitiveType:E.A.TRIANGLES,boundingSphere:l.boundingSphere,offsetAttribute:e._offsetAttribute})},J.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new J({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:o,rotation:e._rotation,stRotation:e._stRotation,granularity:i,extrudedHeight:r,height:s,vertexFormat:x.A.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(J.prototype,{rectangle:{get:function(){return(0,u.A)(this._rectangle)||(this._rectangle=X(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return(0,u.A)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=h.A.computeEllipsePositions({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,rotation:e._rotation,granularity:e._granularity},!1,!0).outerPositions,i=n.length/3,o=new Array(i);for(let e=0;e<i;++e)o[e]=r.A.fromArray(n,3*e);const s=e._ellipsoid,a=e.rectangle;return p.A._textureCoordinateRotationPoints(o,t,s,a)}(this)),this._textureCoordinateRotationPoints}}});const ee=J},715726:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(267980),o=n(367817),r=n(331185),s=n(99479);const a={},c=new i.A,l=new i.A,u=new s.A,d=new r.A;function h(e,t,n,o,a,h,A,f,p,m){const _=e+t;i.A.multiplyByScalar(o,Math.cos(_),c),i.A.multiplyByScalar(n,Math.sin(_),l),i.A.add(c,l,c);let g=Math.cos(e);g*=g;let y=Math.sin(e);y*=y;const b=h/Math.sqrt(A*g+a*y)/f;return s.A.fromAxisAngle(c,b,u),r.A.fromQuaternion(u,d),r.A.multiplyByVector(d,p,m),i.A.normalize(m,m),i.A.multiplyByScalar(m,f,m),m}const A=new i.A,f=new i.A,p=new i.A,m=new i.A;a.raisePositionsToHeight=function(e,t,n){const o=t.ellipsoid,r=t.height,s=t.extrudedHeight,a=n?e.length/3*2:e.length/3,c=new Float64Array(3*a),l=e.length,u=n?l:0;for(let t=0;t<l;t+=3){const a=t+1,l=t+2,d=i.A.fromArray(e,t,A);o.scaleToGeodeticSurface(d,d);const h=i.A.clone(d,f),_=o.geodeticSurfaceNormal(d,m),g=i.A.multiplyByScalar(_,r,p);i.A.add(d,g,d),n&&(i.A.multiplyByScalar(_,s,g),i.A.add(h,g,h),c[t+u]=h.x,c[a+u]=h.y,c[l+u]=h.z),c[t]=d.x,c[a]=d.y,c[l]=d.z}return c};const _=new i.A,g=new i.A,y=new i.A;a.computeEllipsePositions=function(e,t,n){const r=e.semiMinorAxis,s=e.semiMajorAxis,a=e.rotation,c=e.center,l=8*e.granularity,u=r*r,d=s*s,m=s*r,b=i.A.magnitude(c),v=i.A.normalize(c,_);let T=i.A.cross(i.A.UNIT_Z,c,g);T=i.A.normalize(T,T);const w=i.A.cross(v,T,y);let E=1+Math.ceil(o.A.PI_OVER_TWO/l);const S=o.A.PI_OVER_TWO/(E-1);let C=o.A.PI_OVER_TWO-E*S;C<0&&(E-=Math.ceil(Math.abs(C)/S));const x=t?new Array(E*(E+2)*2*3):void 0;let I=0,P=A,D=f;const O=4*E*3;let L=O-1,N=0;const M=n?new Array(O):void 0;let R,F,B,U,k;for(C=o.A.PI_OVER_TWO,P=h(C,a,w,T,u,m,d,b,v,P),t&&(x[I++]=P.x,x[I++]=P.y,x[I++]=P.z),n&&(M[L--]=P.z,M[L--]=P.y,M[L--]=P.x),C=o.A.PI_OVER_TWO-S,R=1;R<E+1;++R){if(P=h(C,a,w,T,u,m,d,b,v,P),D=h(Math.PI-C,a,w,T,u,m,d,b,v,D),t){for(x[I++]=P.x,x[I++]=P.y,x[I++]=P.z,B=2*R+2,F=1;F<B-1;++F)U=F/(B-1),k=i.A.lerp(P,D,U,p),x[I++]=k.x,x[I++]=k.y,x[I++]=k.z;x[I++]=D.x,x[I++]=D.y,x[I++]=D.z}n&&(M[L--]=P.z,M[L--]=P.y,M[L--]=P.x,M[N++]=D.x,M[N++]=D.y,M[N++]=D.z),C=o.A.PI_OVER_TWO-(R+1)*S}for(R=E;R>1;--R){if(C=o.A.PI_OVER_TWO-(R-1)*S,P=h(-C,a,w,T,u,m,d,b,v,P),D=h(C+Math.PI,a,w,T,u,m,d,b,v,D),t){for(x[I++]=P.x,x[I++]=P.y,x[I++]=P.z,B=2*(R-1)+2,F=1;F<B-1;++F)U=F/(B-1),k=i.A.lerp(P,D,U,p),x[I++]=k.x,x[I++]=k.y,x[I++]=k.z;x[I++]=D.x,x[I++]=D.y,x[I++]=D.z}n&&(M[L--]=P.z,M[L--]=P.y,M[L--]=P.x,M[N++]=D.x,M[N++]=D.y,M[N++]=D.z)}C=o.A.PI_OVER_TWO,P=h(-C,a,w,T,u,m,d,b,v,P);const V={};return t&&(x[I++]=P.x,x[I++]=P.y,x[I++]=P.z,V.positions=x,V.numPts=E),n&&(M[L--]=P.z,M[L--]=P.y,M[L--]=P.x,V.outerPositions=M),V};const b=a},692095:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(660662),o=n(267980),r=n(571804),s=n(419061),a=n(491446),c=n(605971),l=n(715726),u=n(610750),d=n(944479),h=n(305439),A=n(46362),f=n(794554),p=n(874915),m=n(367817),_=n(402330);const g=new o.A;let y=new o.A;const b=new i.A,v=new i.A;function T(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).center,n=(0,s.A)(e.ellipsoid,u.A.WGS84),i=e.semiMajorAxis,r=e.semiMinorAxis,l=(0,s.A)(e.granularity,m.A.RADIANS_PER_DEGREE);if(!(0,a.A)(t))throw new c.A("center is required.");if(!(0,a.A)(i))throw new c.A("semiMajorAxis is required.");if(!(0,a.A)(r))throw new c.A("semiMinorAxis is required.");if(i<r)throw new c.A("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(l<=0)throw new c.A("granularity must be greater than zero.");const d=(0,s.A)(e.height,0),h=(0,s.A)(e.extrudedHeight,d);this._center=o.A.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=r,this._ellipsoid=u.A.clone(n),this._rotation=(0,s.A)(e.rotation,0),this._height=Math.max(h,d),this._granularity=l,this._extrudedHeight=Math.min(h,d),this._numberOfVerticalLines=Math.max((0,s.A)(e.numberOfVerticalLines,16),0),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipseOutlineGeometry"}T.packedLength=o.A.packedLength+u.A.packedLength+8,T.pack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("value is required");if(!(0,a.A)(t))throw new c.A("array is required");return n=(0,s.A)(n,0),o.A.pack(e._center,t,n),n+=o.A.packedLength,u.A.pack(e._ellipsoid,t,n),n+=u.A.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._numberOfVerticalLines,t[n]=(0,s.A)(e._offsetAttribute,-1),t};const w=new o.A,E=new u.A,S={center:w,ellipsoid:E,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};T.unpack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("array is required");t=(0,s.A)(t,0);const i=o.A.unpack(e,t,w);t+=o.A.packedLength;const r=u.A.unpack(e,t,E);t+=u.A.packedLength;const l=e[t++],d=e[t++],h=e[t++],A=e[t++],f=e[t++],p=e[t++],m=e[t++],_=e[t];return(0,a.A)(n)?(n._center=o.A.clone(i,n._center),n._ellipsoid=u.A.clone(r,n._ellipsoid),n._semiMajorAxis=l,n._semiMinorAxis=d,n._rotation=h,n._height=A,n._granularity=f,n._extrudedHeight=p,n._numberOfVerticalLines=m,n._offsetAttribute=-1===_?void 0:_,n):(S.height=A,S.extrudedHeight=p,S.granularity=f,S.rotation=h,S.semiMajorAxis=l,S.semiMinorAxis=d,S.numberOfVerticalLines=m,S.offsetAttribute=-1===_?void 0:_,new T(S))},T.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,c=!m.A.equalsEpsilon(t,n,0,m.A.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const u={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,numberOfVerticalLines:e._numberOfVerticalLines};let T;if(c)u.extrudedHeight=n,u.offsetAttribute=e._offsetAttribute,T=function(e){const t=e.center,n=e.ellipsoid,c=e.semiMajorAxis;let u=o.A.multiplyByScalar(n.geodeticSurfaceNormal(t,g),e.height,g);b.center=o.A.add(t,u,b.center),b.radius=c,u=o.A.multiplyByScalar(n.geodeticSurfaceNormal(t,u),e.extrudedHeight,u),v.center=o.A.add(t,u,v.center),v.radius=c;let d=l.A.computeEllipsePositions(e,!1,!0).outerPositions;const _=new A.A({position:new h.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:l.A.raisePositionsToHeight(d,e,!0)})});d=_.position.values;const y=i.A.union(b,v);let T=d.length/3;if((0,a.A)(e.offsetAttribute)){let t=new Uint8Array(T);if(e.offsetAttribute===f.A.TOP)t=t.fill(1,0,T/2);else{const n=e.offsetAttribute===f.A.NONE?0:1;t=t.fill(n)}_.applyOffset=new h.A({componentDatatype:r.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let w=(0,s.A)(e.numberOfVerticalLines,16);w=m.A.clamp(w,0,T/2);const E=p.A.createTypedArray(T,2*T+2*w);T/=2;let S,C,x=0;for(S=0;S<T;++S)E[x++]=S,E[x++]=(S+1)%T,E[x++]=S+T,E[x++]=(S+1)%T+T;if(w>0){const e=Math.min(w,T);C=Math.round(T/e);const t=Math.min(C*w,T);for(S=0;S<t;S+=C)E[x++]=S,E[x++]=S+T}return{boundingSphere:y,attributes:_,indices:E}}(u);else if(T=function(e){const t=e.center;y=o.A.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,y),e.height,y),y=o.A.add(t,y,y);const n=new i.A(y,e.semiMajorAxis),s=l.A.computeEllipsePositions(e,!1,!0).outerPositions,a=new A.A({position:new h.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:l.A.raisePositionsToHeight(s,e,!1)})}),c=s.length/3,u=p.A.createTypedArray(c,2*c);let d=0;for(let e=0;e<c;++e)u[d++]=e,u[d++]=(e+1)%c;return{boundingSphere:n,attributes:a,indices:u}}(u),(0,a.A)(e._offsetAttribute)){const t=T.attributes.position.values.length,n=e._offsetAttribute===f.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);T.attributes.applyOffset=new h.A({componentDatatype:r.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.A({attributes:T.attributes,indices:T.indices,primitiveType:_.A.LINES,boundingSphere:T.boundingSphere,offsetAttribute:e._offsetAttribute})};const C=T},87762:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(660662),o=n(434067),r=n(267980),s=n(571804),a=n(419061),c=n(491446),l=n(605971),u=n(610750),d=n(944479),h=n(305439),A=n(46362),f=n(794554),p=n(874915),m=n(367817),_=n(402330),g=n(769534);const y=new r.A,b=new r.A,v=new r.A,T=new r.A,w=new r.A,E=new r.A(1,1,1),S=Math.cos,C=Math.sin;function x(e){e=(0,a.A)(e,a.A.EMPTY_OBJECT);const t=(0,a.A)(e.radii,E),n=(0,a.A)(e.innerRadii,t),i=(0,a.A)(e.minimumClock,0),o=(0,a.A)(e.maximumClock,m.A.TWO_PI),s=(0,a.A)(e.minimumCone,0),c=(0,a.A)(e.maximumCone,m.A.PI),u=Math.round((0,a.A)(e.stackPartitions,64)),d=Math.round((0,a.A)(e.slicePartitions,64)),h=(0,a.A)(e.vertexFormat,g.A.DEFAULT);if(d<3)throw new l.A("options.slicePartitions cannot be less than three.");if(u<3)throw new l.A("options.stackPartitions cannot be less than three.");this._radii=r.A.clone(t),this._innerRadii=r.A.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=s,this._maximumCone=c,this._stackPartitions=u,this._slicePartitions=d,this._vertexFormat=g.A.clone(h),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidGeometry"}x.packedLength=2*r.A.packedLength+g.A.packedLength+7,x.pack=function(e,t,n){if(!(0,c.A)(e))throw new l.A("value is required");if(!(0,c.A)(t))throw new l.A("array is required");return n=(0,a.A)(n,0),r.A.pack(e._radii,t,n),n+=r.A.packedLength,r.A.pack(e._innerRadii,t,n),n+=r.A.packedLength,g.A.pack(e._vertexFormat,t,n),n+=g.A.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=(0,a.A)(e._offsetAttribute,-1),t};const I=new r.A,P=new r.A,D=new g.A,O={radii:I,innerRadii:P,vertexFormat:D,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};let L;x.unpack=function(e,t,n){if(!(0,c.A)(e))throw new l.A("array is required");t=(0,a.A)(t,0);const i=r.A.unpack(e,t,I);t+=r.A.packedLength;const o=r.A.unpack(e,t,P);t+=r.A.packedLength;const s=g.A.unpack(e,t,D);t+=g.A.packedLength;const u=e[t++],d=e[t++],h=e[t++],A=e[t++],f=e[t++],p=e[t++],m=e[t];return(0,c.A)(n)?(n._radii=r.A.clone(i,n._radii),n._innerRadii=r.A.clone(o,n._innerRadii),n._vertexFormat=g.A.clone(s,n._vertexFormat),n._minimumClock=u,n._maximumClock=d,n._minimumCone=h,n._maximumCone=A,n._stackPartitions=f,n._slicePartitions=p,n._offsetAttribute=-1===m?void 0:m,n):(O.minimumClock=u,O.maximumClock=d,O.minimumCone=h,O.maximumCone=A,O.stackPartitions=f,O.slicePartitions=p,O.offsetAttribute=-1===m?void 0:m,new x(O))},x.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const a=e._minimumClock,l=e._maximumClock,g=e._minimumCone,E=e._maximumCone,x=e._vertexFormat;let I,P,D=e._slicePartitions+1,O=e._stackPartitions+1;D=Math.round(D*Math.abs(l-a)/m.A.TWO_PI),O=Math.round(O*Math.abs(E-g)/m.A.PI),D<2&&(D=2),O<2&&(O=2);let L=0;const N=[g],M=[a];for(I=0;I<O;I++)N.push(g+I*(E-g)/(O-1));for(N.push(E),P=0;P<D;P++)M.push(a+P*(l-a)/(D-1));M.push(l);const R=N.length,F=M.length;let B=0,U=1;const k=n.x!==t.x||n.y!==t.y||n.z!==t.z;let V=!1,H=!1,z=!1;k&&(U=2,g>0&&(V=!0,B+=D-1),E<Math.PI&&(H=!0,B+=D-1),(l-a)%m.A.TWO_PI?(z=!0,B+=2*(O-1)+1):B+=1);const G=F*R*U,j=new Float64Array(3*G),W=new Array(G).fill(!1),q=new Array(G).fill(!1),Y=D*O*U,X=6*(Y+B+1-(D+O)*U),J=p.A.createTypedArray(Y,X),Q=x.normal?new Float32Array(3*G):void 0,$=x.tangent?new Float32Array(3*G):void 0,K=x.bitangent?new Float32Array(3*G):void 0,Z=x.st?new Float32Array(2*G):void 0,ee=new Array(R),te=new Array(R);for(I=0;I<R;I++)ee[I]=C(N[I]),te[I]=S(N[I]);const ne=new Array(F),ie=new Array(F);for(P=0;P<F;P++)ie[P]=S(M[P]),ne[P]=C(M[P]);for(I=0;I<R;I++)for(P=0;P<F;P++)j[L++]=t.x*ee[I]*ie[P],j[L++]=t.y*ee[I]*ne[P],j[L++]=t.z*te[I];let oe,re,se,ae,ce=G/2;if(k)for(I=0;I<R;I++)for(P=0;P<F;P++)j[L++]=n.x*ee[I]*ie[P],j[L++]=n.y*ee[I]*ne[P],j[L++]=n.z*te[I],W[ce]=!0,I>0&&I!==R-1&&0!==P&&P!==F-1&&(q[ce]=!0),ce++;for(L=0,I=1;I<R-2;I++)for(oe=I*F,re=(I+1)*F,P=1;P<F-2;P++)J[L++]=re+P,J[L++]=re+P+1,J[L++]=oe+P+1,J[L++]=re+P,J[L++]=oe+P+1,J[L++]=oe+P;if(k){const e=R*F;for(I=1;I<R-2;I++)for(oe=e+I*F,re=e+(I+1)*F,P=1;P<F-2;P++)J[L++]=re+P,J[L++]=oe+P,J[L++]=oe+P+1,J[L++]=re+P,J[L++]=oe+P+1,J[L++]=re+P+1}if(k){if(V)for(ae=R*F,I=1;I<F-2;I++)J[L++]=I,J[L++]=I+1,J[L++]=ae+I+1,J[L++]=I,J[L++]=ae+I+1,J[L++]=ae+I;if(H)for(se=R*F-F,ae=R*F*U-F,I=1;I<F-2;I++)J[L++]=se+I+1,J[L++]=se+I,J[L++]=ae+I,J[L++]=se+I+1,J[L++]=ae+I,J[L++]=ae+I+1}if(z){for(I=1;I<R-2;I++)ae=F*R+F*I,se=F*I,J[L++]=ae,J[L++]=se+F,J[L++]=se,J[L++]=ae,J[L++]=ae+F,J[L++]=se+F;for(I=1;I<R-2;I++)ae=F*R+F*(I+1)-1,se=F*(I+1)-1,J[L++]=se+F,J[L++]=ae,J[L++]=se,J[L++]=se+F,J[L++]=ae+F,J[L++]=ae}const le=new A.A;x.position&&(le.position=new h.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:j}));let ue=0,de=0,he=0,Ae=0;const fe=G/2;let pe;const me=u.A.fromCartesian3(t),_e=u.A.fromCartesian3(n);if(x.st||x.normal||x.tangent||x.bitangent){for(I=0;I<G;I++){pe=W[I]?_e:me;const e=r.A.fromArray(j,3*I,y),t=pe.geodeticSurfaceNormal(e,b);if(q[I]&&r.A.negate(t,t),x.st){const e=o.A.negate(t,w);Z[ue++]=Math.atan2(e.y,e.x)/m.A.TWO_PI+.5,Z[ue++]=Math.asin(t.z)/Math.PI+.5}if(x.normal&&(Q[de++]=t.x,Q[de++]=t.y,Q[de++]=t.z),x.tangent||x.bitangent){const e=v;let n,i=0;if(W[I]&&(i=fe),n=!V&&I>=i&&I<i+2*F?r.A.UNIT_X:r.A.UNIT_Z,r.A.cross(n,t,e),r.A.normalize(e,e),x.tangent&&($[he++]=e.x,$[he++]=e.y,$[he++]=e.z),x.bitangent){const n=r.A.cross(t,e,T);r.A.normalize(n,n),K[Ae++]=n.x,K[Ae++]=n.y,K[Ae++]=n.z}}}x.st&&(le.st=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:2,values:Z})),x.normal&&(le.normal=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:Q})),x.tangent&&(le.tangent=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:$})),x.bitangent&&(le.bitangent=new h.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:K}))}if((0,c.A)(e._offsetAttribute)){const t=j.length,n=e._offsetAttribute===f.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);le.applyOffset=new h.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.A({attributes:le,indices:J,primitiveType:_.A.TRIANGLES,boundingSphere:i.A.fromEllipsoid(me),offsetAttribute:e._offsetAttribute})},x.getUnitEllipsoid=function(){return(0,c.A)(L)||(L=x.createGeometry(new x({radii:new r.A(1,1,1),vertexFormat:g.A.POSITION_ONLY}))),L};const N=x},594706:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(660662),o=n(267980),r=n(571804),s=n(419061),a=n(491446),c=n(605971),l=n(610750),u=n(944479),d=n(305439),h=n(46362),A=n(794554),f=n(874915),p=n(367817),m=n(402330);const _=new o.A(1,1,1),g=Math.cos,y=Math.sin;function b(e){e=(0,s.A)(e,s.A.EMPTY_OBJECT);const t=(0,s.A)(e.radii,_),n=(0,s.A)(e.innerRadii,t),i=(0,s.A)(e.minimumClock,0),r=(0,s.A)(e.maximumClock,p.A.TWO_PI),l=(0,s.A)(e.minimumCone,0),u=(0,s.A)(e.maximumCone,p.A.PI),d=Math.round((0,s.A)(e.stackPartitions,10)),h=Math.round((0,s.A)(e.slicePartitions,8)),f=Math.round((0,s.A)(e.subdivisions,128));if(d<1)throw new c.A("options.stackPartitions cannot be less than 1");if(h<0)throw new c.A("options.slicePartitions cannot be less than 0");if(f<0)throw new c.A("options.subdivisions must be greater than or equal to zero.");if((0,a.A)(e.offsetAttribute)&&e.offsetAttribute===A.A.TOP)throw new c.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._radii=o.A.clone(t),this._innerRadii=o.A.clone(n),this._minimumClock=i,this._maximumClock=r,this._minimumCone=l,this._maximumCone=u,this._stackPartitions=d,this._slicePartitions=h,this._subdivisions=f,this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}b.packedLength=2*o.A.packedLength+8,b.pack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("value is required");if(!(0,a.A)(t))throw new c.A("array is required");return n=(0,s.A)(n,0),o.A.pack(e._radii,t,n),n+=o.A.packedLength,o.A.pack(e._innerRadii,t,n),n+=o.A.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n++]=e._subdivisions,t[n]=(0,s.A)(e._offsetAttribute,-1),t};const v=new o.A,T=new o.A,w={radii:v,innerRadii:T,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};b.unpack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("array is required");t=(0,s.A)(t,0);const i=o.A.unpack(e,t,v);t+=o.A.packedLength;const r=o.A.unpack(e,t,T);t+=o.A.packedLength;const l=e[t++],u=e[t++],d=e[t++],h=e[t++],A=e[t++],f=e[t++],p=e[t++],m=e[t];return(0,a.A)(n)?(n._radii=o.A.clone(i,n._radii),n._innerRadii=o.A.clone(r,n._innerRadii),n._minimumClock=l,n._maximumClock=u,n._minimumCone=d,n._maximumCone=h,n._stackPartitions=A,n._slicePartitions=f,n._subdivisions=p,n._offsetAttribute=-1===m?void 0:m,n):(w.minimumClock=l,w.maximumClock=u,w.minimumCone=d,w.maximumCone=h,w.stackPartitions=A,w.slicePartitions=f,w.subdivisions=p,w.offsetAttribute=-1===m?void 0:m,new b(w))},b.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const o=e._minimumClock,s=e._maximumClock,c=e._minimumCone,_=e._maximumCone,b=e._subdivisions,v=l.A.fromCartesian3(t);let T=e._slicePartitions+1,w=e._stackPartitions+1;T=Math.round(T*Math.abs(s-o)/p.A.TWO_PI),w=Math.round(w*Math.abs(_-c)/p.A.PI),T<2&&(T=2),w<2&&(w=2);let E=0,S=1;const C=n.x!==t.x||n.y!==t.y||n.z!==t.z;let x=!1,I=!1;C&&(S=2,c>0&&(x=!0,E+=T),_<Math.PI&&(I=!0,E+=T));const P=b*S*(w+T),D=new Float64Array(3*P),O=2*(P+E-(T+w)*S),L=f.A.createTypedArray(P,O);let N,M,R,F,B=0;const U=new Array(w),k=new Array(w);for(N=0;N<w;N++)F=c+N*(_-c)/(w-1),U[N]=y(F),k[N]=g(F);const V=new Array(b),H=new Array(b);for(N=0;N<b;N++)R=o+N*(s-o)/(b-1),V[N]=y(R),H[N]=g(R);for(N=0;N<w;N++)for(M=0;M<b;M++)D[B++]=t.x*U[N]*H[M],D[B++]=t.y*U[N]*V[M],D[B++]=t.z*k[N];if(C)for(N=0;N<w;N++)for(M=0;M<b;M++)D[B++]=n.x*U[N]*H[M],D[B++]=n.y*U[N]*V[M],D[B++]=n.z*k[N];for(U.length=b,k.length=b,N=0;N<b;N++)F=c+N*(_-c)/(b-1),U[N]=y(F),k[N]=g(F);for(V.length=T,H.length=T,N=0;N<T;N++)R=o+N*(s-o)/(T-1),V[N]=y(R),H[N]=g(R);for(N=0;N<b;N++)for(M=0;M<T;M++)D[B++]=t.x*U[N]*H[M],D[B++]=t.y*U[N]*V[M],D[B++]=t.z*k[N];if(C)for(N=0;N<b;N++)for(M=0;M<T;M++)D[B++]=n.x*U[N]*H[M],D[B++]=n.y*U[N]*V[M],D[B++]=n.z*k[N];for(B=0,N=0;N<w*S;N++){const e=N*b;for(M=0;M<b-1;M++)L[B++]=e+M,L[B++]=e+M+1}let z=w*b*S;for(N=0;N<T;N++)for(M=0;M<b-1;M++)L[B++]=z+N+M*T,L[B++]=z+N+(M+1)*T;if(C)for(z=w*b*S+T*b,N=0;N<T;N++)for(M=0;M<b-1;M++)L[B++]=z+N+M*T,L[B++]=z+N+(M+1)*T;if(C){let e=w*b*S,t=e+b*T;if(x)for(N=0;N<T;N++)L[B++]=e+N,L[B++]=t+N;if(I)for(e+=b*T-T,t+=b*T-T,N=0;N<T;N++)L[B++]=e+N,L[B++]=t+N}const G=new h.A({position:new d.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:D})});if((0,a.A)(e._offsetAttribute)){const t=D.length,n=e._offsetAttribute===A.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);G.applyOffset=new d.A({componentDatatype:r.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.A({attributes:G,indices:L,primitiveType:m.A.LINES,boundingSphere:i.A.fromEllipsoid(v),offsetAttribute:e._offsetAttribute})};const E=b},149192:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(419061),o=n(491446),r=n(786101),s=n(610750),a=n(955943),c=n(182348),l=n(165755),u=n(98055);function d(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT),this._tilingScheme=e.tilingScheme,(0,o.A)(this._tilingScheme)||(this._tilingScheme=new c.A({ellipsoid:(0,i.A)(e.ellipsoid,s.A.WGS84)})),this._levelZeroMaximumGeometricError=u.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,64,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new a.A,this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(d.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,r.A)("EllipsoidTerrainProvider.ready","EllipsoidTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,r.A)("EllipsoidTerrainProvider.readyPromise","EllipsoidTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),d.prototype.requestTileGeometry=function(e,t,n,i){return Promise.resolve(new l.A({buffer:new Uint8Array(256),width:16,height:16}))},d.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},d.prototype.getTileDataAvailable=function(e,t,n){},d.prototype.loadTileDataAvailability=function(e,t,n){};const h=d},354975:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(605971);function r(){this._removalFunctions=[]}r.prototype.add=function(e,t,n){if(!(0,i.A)(e))throw new o.A("event is required");const r=e.addEventListener(t,n);this._removalFunctions.push(r);const s=this;return function(){r();const e=s._removalFunctions;e.splice(e.indexOf(r),1)}},r.prototype.removeAll=function(){const e=this._removalFunctions;for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0};const s=r},908077:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,HOLD:1,EXTRAPOLATE:2})},17117:(e,t,n)=>{"use strict";n.d(t,{A:()=>k});var i=n(660662),o=n(267980),r=n(626809),s=n(369031),a=n(571804),c=n(419061),l=n(491446),u=n(944479),d=n(305439),h=n(46362),A=n(331185),f=n(584164),p=n(811203),m=n(666775),_=n(402330),g=n(99479),y=n(769534);function b(e){s.A.typeOf.object("options",e),s.A.typeOf.object("options.frustum",e.frustum),s.A.typeOf.object("options.origin",e.origin),s.A.typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,i=e.origin,r=(0,c.A)(e.vertexFormat,y.A.DEFAULT),a=(0,c.A)(e._drawNearPlane,!0);let l,u;t instanceof m.A?(l=0,u=m.A.packedLength):t instanceof p.A&&(l=1,u=p.A.packedLength),this._frustumType=l,this._frustum=t.clone(),this._origin=o.A.clone(i),this._orientation=g.A.clone(n),this._drawNearPlane=a,this._vertexFormat=r,this._workerName="createFrustumGeometry",this.packedLength=2+u+o.A.packedLength+g.A.packedLength+y.A.packedLength}b.pack=function(e,t,n){s.A.typeOf.object("value",e),s.A.defined("array",t),n=(0,c.A)(n,0);const i=e._frustumType,r=e._frustum;return t[n++]=i,0===i?(m.A.pack(r,t,n),n+=m.A.packedLength):(p.A.pack(r,t,n),n+=p.A.packedLength),o.A.pack(e._origin,t,n),n+=o.A.packedLength,g.A.pack(e._orientation,t,n),n+=g.A.packedLength,y.A.pack(e._vertexFormat,t,n),t[n+=y.A.packedLength]=e._drawNearPlane?1:0,t};const v=new m.A,T=new p.A,w=new g.A,E=new o.A,S=new y.A;function C(e,t,n,i,o,r,s,a){const c=e/3*2;for(let o=0;o<4;++o)(0,l.A)(t)&&(t[e]=r.x,t[e+1]=r.y,t[e+2]=r.z),(0,l.A)(n)&&(n[e]=s.x,n[e+1]=s.y,n[e+2]=s.z),(0,l.A)(i)&&(i[e]=a.x,i[e+1]=a.y,i[e+2]=a.z),e+=3;o[c]=0,o[c+1]=0,o[c+2]=1,o[c+3]=0,o[c+4]=1,o[c+5]=1,o[c+6]=0,o[c+7]=1}b.unpack=function(e,t,n){s.A.defined("array",e),t=(0,c.A)(t,0);const i=e[t++];let r;0===i?(r=m.A.unpack(e,t,v),t+=m.A.packedLength):(r=p.A.unpack(e,t,T),t+=p.A.packedLength);const a=o.A.unpack(e,t,E);t+=o.A.packedLength;const u=g.A.unpack(e,t,w);t+=g.A.packedLength;const d=y.A.unpack(e,t,S),h=1===e[t+=y.A.packedLength];if(!(0,l.A)(n))return new b({frustum:r,origin:a,orientation:u,vertexFormat:d,_drawNearPlane:h});const A=i===n._frustumType?n._frustum:void 0;return n._frustum=r.clone(A),n._frustumType=i,n._origin=o.A.clone(a,n._origin),n._orientation=g.A.clone(u,n._orientation),n._vertexFormat=y.A.clone(d,n._vertexFormat),n._drawNearPlane=h,n};const x=new A.A,I=new f.A,P=new f.A,D=new o.A,O=new o.A,L=new o.A,N=new o.A,M=new o.A,R=new o.A,F=new Array(3),B=new Array(4);B[0]=new r.A(-1,-1,1,1),B[1]=new r.A(1,-1,1,1),B[2]=new r.A(1,1,1,1),B[3]=new r.A(-1,1,1,1);const U=new Array(4);for(let e=0;e<4;++e)U[e]=new r.A;b._computeNearFarPlanes=function(e,t,n,i,s,a,u,d){const h=A.A.fromQuaternion(t,x);let p=(0,c.A)(a,D),m=(0,c.A)(u,O),_=(0,c.A)(d,L);p=A.A.getColumn(h,0,p),m=A.A.getColumn(h,1,m),_=A.A.getColumn(h,2,_),o.A.normalize(p,p),o.A.normalize(m,m),o.A.normalize(_,_),o.A.negate(p,p);const g=f.A.computeView(e,_,m,p,I);let y,b;const v=i.projectionMatrix;if(0===n){const e=f.A.multiply(v,g,P);b=f.A.inverse(e,P)}else y=f.A.inverseTransformation(g,P);(0,l.A)(b)?(F[0]=i.near,F[1]=i.far):(F[0]=0,F[1]=i.near,F[2]=i.far);for(let t=0;t<2;++t)for(let n=0;n<4;++n){let a=r.A.clone(B[n],U[n]);if((0,l.A)(b)){a=f.A.multiplyByVector(b,a,a);const n=1/a.w;o.A.multiplyByScalar(a,n,a),o.A.subtract(a,e,a),o.A.normalize(a,a);const i=o.A.dot(_,a);o.A.multiplyByScalar(a,F[t]/i,a),o.A.add(a,e,a)}else{const e=i.offCenterFrustum;(0,l.A)(e)&&(i=e);const n=F[t],o=F[t+1];a.x=.5*(a.x*(i.right-i.left)+i.left+i.right),a.y=.5*(a.y*(i.top-i.bottom)+i.bottom+i.top),a.z=.5*(a.z*(n-o)-n-o),a.w=1,f.A.multiplyByVector(y,a,a)}s[12*t+3*n]=a.x,s[12*t+3*n+1]=a.y,s[12*t+3*n+2]=a.z}},b.createGeometry=function(e){const t=e._frustumType,n=e._frustum,r=e._origin,s=e._orientation,c=e._drawNearPlane,A=e._vertexFormat,f=c?6:5;let p=new Float64Array(72);b._computeNearFarPlanes(r,s,t,n,p);let m=24;p[m]=p[12],p[m+1]=p[13],p[m+2]=p[14],p[m+3]=p[0],p[m+4]=p[1],p[m+5]=p[2],p[m+6]=p[9],p[m+7]=p[10],p[m+8]=p[11],p[m+9]=p[21],p[m+10]=p[22],p[m+11]=p[23],m+=12,p[m]=p[15],p[m+1]=p[16],p[m+2]=p[17],p[m+3]=p[3],p[m+4]=p[4],p[m+5]=p[5],p[m+6]=p[0],p[m+7]=p[1],p[m+8]=p[2],p[m+9]=p[12],p[m+10]=p[13],p[m+11]=p[14],m+=12,p[m]=p[3],p[m+1]=p[4],p[m+2]=p[5],p[m+3]=p[15],p[m+4]=p[16],p[m+5]=p[17],p[m+6]=p[18],p[m+7]=p[19],p[m+8]=p[20],p[m+9]=p[6],p[m+10]=p[7],p[m+11]=p[8],m+=12,p[m]=p[6],p[m+1]=p[7],p[m+2]=p[8],p[m+3]=p[18],p[m+4]=p[19],p[m+5]=p[20],p[m+6]=p[21],p[m+7]=p[22],p[m+8]=p[23],p[m+9]=p[9],p[m+10]=p[10],p[m+11]=p[11],c||(p=p.subarray(12));const g=new h.A({position:new d.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:p})});if((0,l.A)(A.normal)||(0,l.A)(A.tangent)||(0,l.A)(A.bitangent)||(0,l.A)(A.st)){const e=(0,l.A)(A.normal)?new Float32Array(12*f):void 0,t=(0,l.A)(A.tangent)?new Float32Array(12*f):void 0,n=(0,l.A)(A.bitangent)?new Float32Array(12*f):void 0,i=(0,l.A)(A.st)?new Float32Array(8*f):void 0,r=D,s=O,u=L,h=o.A.negate(r,N),p=o.A.negate(s,M),_=o.A.negate(u,R);m=0,c&&(C(m,e,t,n,i,_,r,s),m+=12),C(m,e,t,n,i,u,h,s),m+=12,C(m,e,t,n,i,h,_,s),m+=12,C(m,e,t,n,i,p,_,h),m+=12,C(m,e,t,n,i,r,u,s),m+=12,C(m,e,t,n,i,s,u,h),(0,l.A)(e)&&(g.normal=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:e})),(0,l.A)(t)&&(g.tangent=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:t})),(0,l.A)(n)&&(g.bitangent=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:n})),(0,l.A)(i)&&(g.st=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:2,values:i}))}const y=new Uint16Array(6*f);for(let e=0;e<f;++e){const t=6*e,n=4*e;y[t]=n,y[t+1]=n+1,y[t+2]=n+2,y[t+3]=n,y[t+4]=n+2,y[t+5]=n+3}return new u.A({attributes:g,indices:y,primitiveType:_.A.TRIANGLES,boundingSphere:i.A.fromVertices(p)})};const k=b},788335:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(660662),o=n(267980),r=n(369031),s=n(571804),a=n(419061),c=n(491446),l=n(17117),u=n(944479),d=n(305439),h=n(46362),A=n(811203),f=n(666775),p=n(402330),m=n(99479);function _(e){r.A.typeOf.object("options",e),r.A.typeOf.object("options.frustum",e.frustum),r.A.typeOf.object("options.origin",e.origin),r.A.typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,i=e.origin,s=(0,a.A)(e._drawNearPlane,!0);let c,l;t instanceof f.A?(c=0,l=f.A.packedLength):t instanceof A.A&&(c=1,l=A.A.packedLength),this._frustumType=c,this._frustum=t.clone(),this._origin=o.A.clone(i),this._orientation=m.A.clone(n),this._drawNearPlane=s,this._workerName="createFrustumOutlineGeometry",this.packedLength=2+l+o.A.packedLength+m.A.packedLength}_.pack=function(e,t,n){r.A.typeOf.object("value",e),r.A.defined("array",t),n=(0,a.A)(n,0);const i=e._frustumType,s=e._frustum;return t[n++]=i,0===i?(f.A.pack(s,t,n),n+=f.A.packedLength):(A.A.pack(s,t,n),n+=A.A.packedLength),o.A.pack(e._origin,t,n),n+=o.A.packedLength,m.A.pack(e._orientation,t,n),t[n+=m.A.packedLength]=e._drawNearPlane?1:0,t};const g=new f.A,y=new A.A,b=new m.A,v=new o.A;_.unpack=function(e,t,n){r.A.defined("array",e),t=(0,a.A)(t,0);const i=e[t++];let s;0===i?(s=f.A.unpack(e,t,g),t+=f.A.packedLength):(s=A.A.unpack(e,t,y),t+=A.A.packedLength);const l=o.A.unpack(e,t,v);t+=o.A.packedLength;const u=m.A.unpack(e,t,b),d=1===e[t+=m.A.packedLength];if(!(0,c.A)(n))return new _({frustum:s,origin:l,orientation:u,_drawNearPlane:d});const h=i===n._frustumType?n._frustum:void 0;return n._frustum=s.clone(h),n._frustumType=i,n._origin=o.A.clone(l,n._origin),n._orientation=m.A.clone(u,n._orientation),n._drawNearPlane=d,n},_.createGeometry=function(e){const t=e._frustumType,n=e._frustum,o=e._origin,r=e._orientation,a=e._drawNearPlane,c=new Float64Array(24);l.A._computeNearFarPlanes(o,r,t,n,c);const A=new h.A({position:new d.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:c})});let f,m;const _=a?2:1,g=new Uint16Array(8*(_+1));let y=a?0:1;for(;y<2;++y)f=a?8*y:0,m=4*y,g[f]=m,g[f+1]=m+1,g[f+2]=m+1,g[f+3]=m+2,g[f+4]=m+2,g[f+5]=m+3,g[f+6]=m+3,g[f+7]=m;for(y=0;y<2;++y)f=8*(_+y),m=4*y,g[f]=m,g[f+1]=m+4,g[f+2]=m+1,g[f+3]=m+5,g[f+4]=m+2,g[f+5]=m+6,g[f+6]=m+3,g[f+7]=m+7;return new u.A({attributes:A,indices:g,primitiveType:p.A.LINES,boundingSphere:i.A.fromVertices(c)})};const T=_},123475:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({SEARCH:0,AUTOCOMPLETE:1})},675178:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(672743),o=n(491446),r=n(605971);function s(){r.A.throwInstantiationError()}Object.defineProperties(s.prototype,{credit:{get:r.A.throwInstantiationError}}),s.getCreditsFromResult=function(e){if((0,o.A)(e.attributions))return e.attributions.map(i.A.getIonCredit)},s.prototype.geocode=r.A.throwInstantiationError;const a=s},805746:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(419061),o=n(491446);function r(e,t,n){this.heading=(0,i.A)(e,0),this.pitch=(0,i.A)(t,0),this.range=(0,i.A)(n,0)}r.clone=function(e,t){if((0,o.A)(e))return(0,o.A)(t)||(t=new r),t.heading=e.heading,t.pitch=e.pitch,t.range=e.range,t};const s=r},655365:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,LERC:1})},165755:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(660662),o=n(267980),r=n(369031),s=n(419061),a=n(491446),c=n(605971),l=n(653577),u=n(655365),d=n(103882),h=n(367817),A=n(832698),f=n(697422),p=n(971724),m=n(42794),_=n(371267),g=n(255335),y=n(98055);function b(e){if(!(0,a.A)(e)||!(0,a.A)(e.buffer))throw new c.A("options.buffer is required.");if(!(0,a.A)(e.width))throw new c.A("options.width is required.");if(!(0,a.A)(e.height))throw new c.A("options.height is required.");this._buffer=e.buffer,this._width=e.width,this._height=e.height,this._childTileMask=(0,s.A)(e.childTileMask,15),this._encoding=(0,s.A)(e.encoding,u.A.NONE);const t=d.A.DEFAULT_STRUCTURE;let n=e.structure;(0,a.A)(n)?n!==t&&(n.heightScale=(0,s.A)(n.heightScale,t.heightScale),n.heightOffset=(0,s.A)(n.heightOffset,t.heightOffset),n.elementsPerHeight=(0,s.A)(n.elementsPerHeight,t.elementsPerHeight),n.stride=(0,s.A)(n.stride,t.stride),n.elementMultiplier=(0,s.A)(n.elementMultiplier,t.elementMultiplier),n.isBigEndian=(0,s.A)(n.isBigEndian,t.isBigEndian)):n=t,this._structure=n,this._createdByUpsampling=(0,s.A)(e.createdByUpsampling,!1),this._waterMask=e.waterMask,this._skirtHeight=void 0,this._bufferType=this._encoding===u.A.LERC?Float32Array:this._buffer.constructor,this._mesh=void 0}Object.defineProperties(b.prototype,{credits:{get:function(){}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}}});const v="createVerticesFromHeightmap",T=new p.A(v),w=new p.A(v,m.A.maximumAsynchronousTasks);function E(e,t,n,i,o,r,s,a,c){const l=(a-o.west)*(r-1)/(o.east-o.west),u=(c-o.south)*(s-1)/(o.north-o.south);let d=0|l,h=d+1;h>=r&&(h=r-1,d=r-2);let A=0|u,f=A+1;f>=s&&(f=s-1,A=s-2);const p=u-A;return A=s-1-A,f=s-1-f,S(l-d,p,(t.decodeHeight(e,A*r+d)-n)/i,(t.decodeHeight(e,A*r+h)-n)/i,(t.decodeHeight(e,f*r+d)-n)/i,(t.decodeHeight(e,f*r+h)-n)/i)}function S(e,t,n,i,o,r){return t<e?n+e*(i-n)+t*(r-i):n+e*(r-o)+t*(o-n)}function C(e,t,n,i,o,r){r*=i;let s,a=0;if(o)for(s=0;s<t;++s)a=a*n+e[r+s];else for(s=t-1;s>=0;--s)a=a*n+e[r+s];return a}function x(e,t,n,i,o,r,s,a){let c;if(s*=o,r)for(c=0;c<t-1;++c)e[s+c]=a/i|0,a-=e[s+c]*i,i/=n;else for(c=t-1;c>0;--c)e[s+c]=a/i|0,a-=e[s+c]*i,i/=n;e[s+c]=a}b.prototype.createMesh=function(e){e=(0,s.A)(e,s.A.EMPTY_OBJECT),r.A.typeOf.object("options.tilingScheme",e.tilingScheme),r.A.typeOf.number("options.x",e.x),r.A.typeOf.number("options.y",e.y),r.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,c=e.y,u=e.level,d=(0,s.A)(e.exaggeration,1),h=(0,s.A)(e.exaggerationRelativeHeight,0),p=(0,s.A)(e.throttle,!0),m=t.ellipsoid,b=t.tileXYToNativeRectangle(n,c,u),v=t.tileXYToRectangle(n,c,u),E=m.cartographicToCartesian(f.A.center(v)),S=this._structure,C=y.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(m,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<u);this._skirtHeight=Math.min(4*C,1e3);const x=(p?w:T).scheduleTask({heightmap:this._buffer,structure:S,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:b,rectangle:v,relativeToCenter:E,ellipsoid:m,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof l.A,exaggeration:d,exaggerationRelativeHeight:h,encoding:this._encoding});if(!(0,a.A)(x))return;const I=this;return Promise.resolve(x).then((function(e){let t;t=I._skirtHeight>0?y.A.getRegularGridAndSkirtIndicesAndEdgeIndices(e.gridWidth,e.gridHeight):y.A.getRegularGridIndicesAndEdgeIndices(e.gridWidth,e.gridHeight);const n=e.gridWidth*e.gridHeight;return I._mesh=new g.A(E,new Float32Array(e.vertices),t.indices,t.indexCountWithoutSkirts,n,e.minimumHeight,e.maximumHeight,i.A.clone(e.boundingSphere3D),o.A.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,A.A.clone(e.orientedBoundingBox),_.A.clone(e.encoding),t.westIndicesSouthToNorth,t.southIndicesEastToWest,t.eastIndicesNorthToSouth,t.northIndicesWestToEast),I._buffer=void 0,I._mesh}))},b.prototype._createMeshSync=function(e){r.A.typeOf.object("options.tilingScheme",e.tilingScheme),r.A.typeOf.number("options.x",e.x),r.A.typeOf.number("options.y",e.y),r.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,i=e.y,o=e.level,a=(0,s.A)(e.exaggeration,1),c=(0,s.A)(e.exaggerationRelativeHeight,0),u=t.ellipsoid,h=t.tileXYToNativeRectangle(n,i,o),A=t.tileXYToRectangle(n,i,o),p=u.cartographicToCartesian(f.A.center(A)),m=this._structure,_=y.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(u,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<o);this._skirtHeight=Math.min(4*_,1e3);const b=d.A.computeVertices({heightmap:this._buffer,structure:m,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:h,rectangle:A,relativeToCenter:p,ellipsoid:u,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof l.A,exaggeration:a,exaggerationRelativeHeight:c});let v;this._buffer=void 0,v=this._skirtHeight>0?y.A.getRegularGridAndSkirtIndicesAndEdgeIndices(this._width,this._height):y.A.getRegularGridIndicesAndEdgeIndices(this._width,this._height);const T=b.gridWidth*b.gridHeight;return this._mesh=new g.A(p,b.vertices,v.indices,v.indexCountWithoutSkirts,T,b.minimumHeight,b.maximumHeight,b.boundingSphere3D,b.occludeePointInScaledSpace,b.encoding.stride,b.orientedBoundingBox,b.encoding,v.westIndicesSouthToNorth,v.southIndicesEastToWest,v.eastIndicesNorthToSouth,v.northIndicesWestToEast),this._mesh},b.prototype.interpolateHeight=function(e,t,n){const i=this._width,o=this._height,r=this._structure,s=r.stride,c=r.elementsPerHeight,l=r.elementMultiplier,d=r.isBigEndian,h=r.heightOffset,A=r.heightScale,f=(0,a.A)(this._mesh),p=this._encoding===u.A.LERC;if(!f&&p)return;let m;return f?m=E(this._mesh.vertices,this._mesh.encoding,h,A,e,i,o,t,n):(m=function(e,t,n,i,o,r,s,a,c,l){const u=(c-r.west)*(s-1)/(r.east-r.west),d=(l-r.south)*(a-1)/(r.north-r.south);let h=0|u,A=h+1;A>=s&&(A=s-1,h=s-2);let f=0|d,p=f+1;p>=a&&(p=a-1,f=a-2);const m=d-f;f=a-1-f,p=a-1-p;return S(u-h,m,C(e,t,n,i,o,f*s+h),C(e,t,n,i,o,f*s+A),C(e,t,n,i,o,p*s+h),C(e,t,n,i,o,p*s+A))}(this._buffer,c,l,s,d,e,i,o,t,n),m=m*A+h),m},b.prototype.upsample=function(e,t,n,i,o,r,s){if(!(0,a.A)(e))throw new c.A("tilingScheme is required.");if(!(0,a.A)(t))throw new c.A("thisX is required.");if(!(0,a.A)(n))throw new c.A("thisY is required.");if(!(0,a.A)(i))throw new c.A("thisLevel is required.");if(!(0,a.A)(o))throw new c.A("descendantX is required.");if(!(0,a.A)(r))throw new c.A("descendantY is required.");if(!(0,a.A)(s))throw new c.A("descendantLevel is required.");if(s-i>1)throw new c.A("Upsampling through more than one level at a time is not currently supported.");const l=this._mesh;if(!(0,a.A)(l))return;const u=this._width,d=this._height,A=this._structure,f=A.stride,p=new this._bufferType(u*d*f),m=l.vertices,_=l.encoding,g=e.tileXYToRectangle(t,n,i),y=e.tileXYToRectangle(o,r,s),v=A.heightOffset,T=A.heightScale,w=A.elementsPerHeight,S=A.elementMultiplier,C=A.isBigEndian,I=Math.pow(S,w-1);for(let e=0;e<d;++e){const t=h.A.lerp(y.north,y.south,e/(d-1));for(let n=0;n<u;++n){let i=E(m,_,v,T,g,u,d,h.A.lerp(y.west,y.east,n/(u-1)),t);i=i<A.lowestEncodedHeight?A.lowestEncodedHeight:i,i=i>A.highestEncodedHeight?A.highestEncodedHeight:i,x(p,w,S,I,f,C,e*u+n,i)}}return Promise.resolve(new b({buffer:p,width:u,height:d,childTileMask:0,structure:this._structure,createdByUpsampling:!0}))},b.prototype.isChildAvailable=function(e,t,n,i){if(!(0,a.A)(e))throw new c.A("thisX is required.");if(!(0,a.A)(t))throw new c.A("thisY is required.");if(!(0,a.A)(n))throw new c.A("childX is required.");if(!(0,a.A)(i))throw new c.A("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),!!(this._childTileMask&1<<o)},b.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const I=b},103882:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(807135),o=n(660662),r=n(434067),s=n(267980),a=n(419061),c=n(491446),l=n(605971),u=n(610750),d=n(199528),h=n(367817),A=n(584164),f=n(832698),p=n(697422),m=n(371267),_=n(543622),g=n(414305);const y={};y.DEFAULT_STRUCTURE=Object.freeze({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});const b=new s.A,v=new A.A,T=new s.A,w=new s.A;y.computeVertices=function(e){if(!(0,c.A)(e)||!(0,c.A)(e.heightmap))throw new l.A("options.heightmap is required.");if(!(0,c.A)(e.width)||!(0,c.A)(e.height))throw new l.A("options.width and options.height are required.");if(!(0,c.A)(e.nativeRectangle))throw new l.A("options.nativeRectangle is required.");if(!(0,c.A)(e.skirtHeight))throw new l.A("options.skirtHeight is required.");const t=Math.cos,n=Math.sin,E=Math.sqrt,S=Math.atan,C=Math.exp,x=h.A.PI_OVER_TWO,I=h.A.toRadians,P=e.heightmap,D=e.width,O=e.height,L=e.skirtHeight,N=L>0,M=(0,a.A)(e.isGeographic,!0),R=(0,a.A)(e.ellipsoid,u.A.WGS84),F=1/R.maximumRadius,B=p.A.clone(e.nativeRectangle),U=p.A.clone(e.rectangle);let k,V,H,z;(0,c.A)(U)?(k=U.west,V=U.south,H=U.east,z=U.north):M?(k=I(B.west),V=I(B.south),H=I(B.east),z=I(B.north)):(k=B.west*F,V=x-2*S(C(-B.south*F)),H=B.east*F,z=x-2*S(C(-B.north*F)));let G=e.relativeToCenter;const j=(0,c.A)(G);G=j?G:s.A.ZERO;const W=(0,a.A)(e.includeWebMercatorT,!1),q=(0,a.A)(e.exaggeration,1),Y=(0,a.A)(e.exaggerationRelativeHeight,0),X=1!==q,J=(0,a.A)(e.structure,y.DEFAULT_STRUCTURE),Q=(0,a.A)(J.heightScale,y.DEFAULT_STRUCTURE.heightScale),$=(0,a.A)(J.heightOffset,y.DEFAULT_STRUCTURE.heightOffset),K=(0,a.A)(J.elementsPerHeight,y.DEFAULT_STRUCTURE.elementsPerHeight),Z=(0,a.A)(J.stride,y.DEFAULT_STRUCTURE.stride),ee=(0,a.A)(J.elementMultiplier,y.DEFAULT_STRUCTURE.elementMultiplier),te=(0,a.A)(J.isBigEndian,y.DEFAULT_STRUCTURE.isBigEndian);let ne=p.A.computeWidth(B),ie=p.A.computeHeight(B);const oe=ne/(D-1),re=ie/(O-1);M||(ne*=F,ie*=F);const se=R.radiiSquared,ae=se.x,ce=se.y,le=se.z;let ue=65536,de=-65536;const he=_.A.eastNorthUpToFixedFrame(G,R),Ae=A.A.inverseTransformation(he,v);let fe,pe;W&&(fe=g.A.geodeticLatitudeToMercatorAngle(V),pe=1/(g.A.geodeticLatitudeToMercatorAngle(z)-fe));const me=T;me.x=Number.POSITIVE_INFINITY,me.y=Number.POSITIVE_INFINITY,me.z=Number.POSITIVE_INFINITY;const _e=w;_e.x=Number.NEGATIVE_INFINITY,_e.y=Number.NEGATIVE_INFINITY,_e.z=Number.NEGATIVE_INFINITY;let ge=Number.POSITIVE_INFINITY;const ye=D*O,be=ye+(L>0?2*D+2*O:0),ve=new Array(be),Te=new Array(be),we=new Array(be),Ee=W?new Array(be):[],Se=X?new Array(be):[];let Ce=0,xe=O,Ie=0,Pe=D;N&&(--Ce,++xe,--Ie,++Pe);const De=1e-5;for(let e=Ce;e<xe;++e){let i=e;i<0&&(i=0),i>=O&&(i=O-1);let o=B.north-re*i;o=M?I(o):x-2*S(C(-o*F));let a=(o-V)/(z-V);a=h.A.clamp(a,0,1);const c=e===Ce,l=e===xe-1;L>0&&(c?o+=De*ie:l&&(o-=De*ie));const u=t(o),d=n(o),f=le*d;let p;W&&(p=(g.A.geodeticLatitudeToMercatorAngle(o)-fe)*pe);for(let e=Ie;e<Pe;++e){let o=e;o<0&&(o=0),o>=D&&(o=D-1);const m=i*(D*Z)+o*Z;let _;if(1===K)_=P[m];else{let e;if(_=0,te)for(e=0;e<K;++e)_=_*ee+P[m+e];else for(e=K-1;e>=0;--e)_=_*ee+P[m+e]}_=_*Q+$,de=Math.max(de,_),ue=Math.min(ue,_);let g=B.west+oe*o;M?g=I(g):g*=F;let y=(g-k)/(H-k);y=h.A.clamp(y,0,1);let v=i*D+o;if(L>0){const t=e===Ie,n=e===Pe-1,r=c||l||t||n;if((c||l)&&(t||n))continue;r&&(_-=L,t?(v=ye+(O-i-1),g-=De*ne):l?v=ye+O+(D-o-1):n?(v=ye+O+D+i,g+=De*ne):c&&(v=ye+O+D+O+o))}const T=u*t(g),w=u*n(g),S=ae*T,C=ce*w,x=1/E(S*T+C*w+f*d),N=S*x,U=C*x,V=f*x,z=new s.A;z.x=N+T*_,z.y=U+w*_,z.z=V+d*_,A.A.multiplyByPoint(Ae,z,b),s.A.minimumByComponent(b,me,me),s.A.maximumByComponent(b,_e,_e),ge=Math.min(ge,_),ve[v]=z,we[v]=new r.A(y,a),Te[v]=_,W&&(Ee[v]=p),X&&(Se[v]=R.geodeticSurfaceNormal(z))}}const Oe=o.A.fromPoints(ve);let Le,Ne;(0,c.A)(U)&&(Le=f.A.fromRectangle(U,ue,de,R)),j&&(Ne=new d.A(R).computeHorizonCullingPointPossiblyUnderEllipsoid(G,ve,ue));const Me=new i.A(me,_e,G),Re=new m.A(G,Me,ge,de,he,!1,W,X,q,Y),Fe=new Float32Array(be*Re.stride);let Be=0;for(let e=0;e<be;++e)Be=Re.encode(Fe,Be,ve[e],we[e],Te[e],void 0,Ee[e],Se[e]);return{vertices:Fe,maximumHeight:de,minimumHeight:ue,encoding:Re,boundingSphere3D:Oe,orientedBoundingBox:Le,occludeePointInScaledSpace:Ne}};const E=y},961136:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(267980),o=n(626809),r=n(419061),s=n(491446),a=n(605971),c=n(153127),l=n(584164),u=n(437266),d=n(710551);const h=[],A=[],f=[],p=[];function m(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).points,n=e.times,i=e.inTangents,o=e.outTangents;if(!((0,s.A)(t)&&(0,s.A)(n)&&(0,s.A)(i)&&(0,s.A)(o)))throw new a.A("times, points, inTangents, and outTangents are required.");if(t.length<2)throw new a.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a.A("times.length must be equal to points.length.");if(i.length!==o.length||i.length!==t.length-1)throw new a.A("inTangents and outTangents must have a length equal to points.length - 1.");if(this._times=n,this._points=t,this._pointType=u.A.getPointType(t[0]),this._pointType!==u.A.getPointType(i[0])||this._pointType!==u.A.getPointType(o[0]))throw new a.A("inTangents and outTangents must be of the same type as points.");this._inTangents=i,this._outTangents=o,this._lastTimeIndex=0}Object.defineProperties(m.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}}),m.createC1=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).times,n=e.points,i=e.tangents;if(!(0,s.A)(n)||!(0,s.A)(t)||!(0,s.A)(i))throw new a.A("points, times and tangents are required.");if(n.length<2)throw new a.A("points.length must be greater than or equal to 2.");if(t.length!==n.length||t.length!==i.length)throw new a.A("times, points and tangents must have the same length.");const o=i.slice(0,i.length-1);return new m({times:t,points:n,inTangents:i.slice(1,i.length),outTangents:o})},m.createNaturalCubic=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).times,n=e.points;if(!(0,s.A)(n)||!(0,s.A)(t))throw new a.A("points and times are required.");if(n.length<2)throw new a.A("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new a.A("times.length must be equal to points.length.");if(n.length<3)return new c.A({points:n,times:t});const o=function(e){const t=h,n=f,o=A,r=p;let a;t.length=n.length=e.length-1,o.length=r.length=e.length,t[0]=n[0]=1,o[0]=2;let c=r[0];for((0,s.A)(c)||(c=r[0]=new i.A),i.A.subtract(e[1],e[0],c),i.A.multiplyByScalar(c,3,c),a=1;a<t.length;++a)t[a]=n[a]=1,o[a]=4,c=r[a],(0,s.A)(c)||(c=r[a]=new i.A),i.A.subtract(e[a+1],e[a-1],c),i.A.multiplyByScalar(c,3,c);return o[a]=2,c=r[a],(0,s.A)(c)||(c=r[a]=new i.A),i.A.subtract(e[a],e[a-1],c),i.A.multiplyByScalar(c,3,c),d.A.solve(t,o,n,r)}(n),l=o.slice(0,o.length-1);return new m({times:t,points:n,inTangents:o.slice(1,o.length),outTangents:l})},m.createClampedCubic=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).times,n=e.points,o=e.firstTangent,l=e.lastTangent;if(!((0,s.A)(n)&&(0,s.A)(t)&&(0,s.A)(o)&&(0,s.A)(l)))throw new a.A("points, times, firstTangent and lastTangent are required.");if(n.length<2)throw new a.A("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new a.A("times.length must be equal to points.length.");const _=u.A.getPointType(n[0]);if(_!==u.A.getPointType(o)||_!==u.A.getPointType(l))throw new a.A("firstTangent and lastTangent must be of the same type as points.");if(n.length<3)return new c.A({points:n,times:t});const g=function(e,t,n){const o=h,r=f,a=A,c=p;let l;o.length=r.length=e.length-1,a.length=c.length=e.length,o[0]=a[0]=1,r[0]=0;let u=c[0];for((0,s.A)(u)||(u=c[0]=new i.A),i.A.clone(t,u),l=1;l<o.length-1;++l)o[l]=r[l]=1,a[l]=4,u=c[l],(0,s.A)(u)||(u=c[l]=new i.A),i.A.subtract(e[l+1],e[l-1],u),i.A.multiplyByScalar(u,3,u);return o[l]=0,r[l]=1,a[l]=4,u=c[l],(0,s.A)(u)||(u=c[l]=new i.A),i.A.subtract(e[l+1],e[l-1],u),i.A.multiplyByScalar(u,3,u),a[l+1]=1,u=c[l+1],(0,s.A)(u)||(u=c[l+1]=new i.A),i.A.clone(n,u),d.A.solve(o,a,r,c)}(n,o,l),y=g.slice(0,g.length-1);return new m({times:t,points:n,inTangents:g.slice(1,g.length),outTangents:y})},m.hermiteCoefficientMatrix=new l.A(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0),m.prototype.findTimeInterval=u.A.prototype.findTimeInterval;const _=new o.A,g=new i.A;m.prototype.wrapTime=u.A.prototype.wrapTime,m.prototype.clampTime=u.A.prototype.clampTime,m.prototype.evaluate=function(e,t){const n=this.points,i=this.times,o=this.inTangents,r=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const a=this._lastTimeIndex,c=i[a+1]-i[a],u=(e-i[a])/c,d=_;d.z=u,d.y=u*u,d.x=d.y*u,d.w=1;const h=l.A.multiplyByVector(m.hermiteCoefficientMatrix,d,d);h.z*=c,h.w*=c;const A=this._pointType;return A===Number?n[a]*h.x+n[a+1]*h.y+r[a]*h.z+o[a]*h.w:((0,s.A)(t)||(t=new A),t=A.multiplyByScalar(n[a],h.x,t),A.multiplyByScalar(n[a+1],h.y,g),A.add(t,g,t),A.multiplyByScalar(r[a],h.z,g),A.add(t,g,t),A.multiplyByScalar(o[a],h.w,g),A.add(t,g,t))};const y=m},416721:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(605971);const r={};function s(e,t,n,i){if(0!==i)return;1===n&&(t.x=e-1-t.x,t.y=e-1-t.y);const o=t.x;t.x=t.y,t.y=o}r.encode2D=function(e,t,n){const r=Math.pow(2,e);if(i.A.typeOf.number("level",e),i.A.typeOf.number("x",t),i.A.typeOf.number("y",n),e<1)throw new o.A("Hilbert level cannot be less than 1.");if(t<0||t>=r||n<0||n>=r)throw new o.A("Invalid coordinates for given level.");const a={x:t,y:n};let c,l,u,d=BigInt(0);for(u=r/2;u>0;u/=2)c=(a.x&u)>0?1:0,l=(a.y&u)>0?1:0,d+=BigInt((3*c^l)*u*u),s(r,a,c,l);return d},r.decode2D=function(e,t){if(i.A.typeOf.number("level",e),i.A.typeOf.bigint("index",t),e<1)throw new o.A("Hilbert level cannot be less than 1.");if(t<BigInt(0)||t>=BigInt(Math.pow(4,e)))throw new o.A("Hilbert index exceeds valid maximum for given level.");const n=Math.pow(2,e),r={x:0,y:0};let a,c,l,u;for(l=1,u=t;l<n;l*=2)a=1&Number(u/BigInt(2)),c=1&Number(u^BigInt(a)),s(l,r,a,c),r.x+=l*a,r.y+=l*c,u/=BigInt(4);return[r.x,r.y]};const a=r},941060:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(491446),o=n(300138),r=n(591978),s=n(367817),a=n(711337);const c={},l=-.0529921,u=-.1059842,d=13.0120009,h=13.3407154,A=.9856003,f=26.4057084,p=13.064993,m=.3287146,_=1.7484877,g=-.1589763,y=.0036096,b=.1643573,v=12.9590088;let T=new r.A;c.ComputeMoon=function(e,t){(0,i.A)(e)||(e=r.A.now()),T=r.A.addSeconds(e,32.184,T);const n=r.A.totalDays(T)-2451545,c=n/a.A.DAYS_PER_JULIAN_CENTURY,w=(125.045+l*n)*s.A.RADIANS_PER_DEGREE,E=(250.089+u*n)*s.A.RADIANS_PER_DEGREE,S=(260.008+d*n)*s.A.RADIANS_PER_DEGREE,C=(176.625+h*n)*s.A.RADIANS_PER_DEGREE,x=(357.529+A*n)*s.A.RADIANS_PER_DEGREE,I=(311.589+f*n)*s.A.RADIANS_PER_DEGREE,P=(134.963+p*n)*s.A.RADIANS_PER_DEGREE,D=(276.617+m*n)*s.A.RADIANS_PER_DEGREE,O=(34.226+_*n)*s.A.RADIANS_PER_DEGREE,L=(15.134+g*n)*s.A.RADIANS_PER_DEGREE,N=(119.743+y*n)*s.A.RADIANS_PER_DEGREE,M=(239.961+b*n)*s.A.RADIANS_PER_DEGREE,R=(25.053+v*n)*s.A.RADIANS_PER_DEGREE,F=Math.sin(w),B=Math.sin(E),U=Math.sin(S),k=Math.sin(C),V=Math.sin(x),H=Math.sin(I),z=Math.sin(P),G=Math.sin(D),j=Math.sin(O),W=Math.sin(L),q=Math.sin(N),Y=Math.sin(M),X=Math.sin(R),J=Math.cos(w),Q=Math.cos(E),$=Math.cos(S),K=Math.cos(C),Z=Math.cos(x),ee=Math.cos(I),te=Math.cos(P),ne=Math.cos(D),ie=Math.cos(O),oe=Math.cos(L),re=Math.cos(N),se=Math.cos(M),ae=Math.cos(R),ce=(269.9949+.0031*c-3.8787*F-.1204*B+.07*U-.0172*k+.0072*H-.0052*W+.0043*X)*s.A.RADIANS_PER_DEGREE,le=(66.5392+.013*c+1.5419*J+.0239*Q-.0278*$+.0068*K-.0029*ee+9e-4*te+8e-4*oe-9e-4*ae)*s.A.RADIANS_PER_DEGREE,ue=(38.3213+13.17635815*n-14e-13*n*n+3.561*F+.1208*B-.0642*U+.0158*k+.0252*V-.0066*H-.0047*z-.0046*G+.0028*j+.0052*W+.004*q+.0019*Y-.0044*X)*s.A.RADIANS_PER_DEGREE,de=(13.17635815-2*n*14e-13+3.561*J*l+.1208*Q*u-.0642*$*d+.0158*K*h+.0252*Z*A-.0066*ee*f-.0047*te*p-.0046*ne*m+.0028*ie*_+.0052*oe*g+.004*re*y+.0019*se*b-.0044*ae*v)/86400*s.A.RADIANS_PER_DEGREE;return(0,i.A)(t)||(t=new o.A),t.rightAscension=ce,t.declination=le,t.rotation=ue,t.rotationRate=de,t};const w=c},220871:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(267980),o=n(491446),r=n(941060),s=n(591978),a=n(367817),c=n(331185),l=n(99479);function u(e){(0,o.A)(e)&&"function"==typeof e||(e=r.A.ComputeMoon),this._computeFunction=e}const d=new i.A,h=new i.A,A=new i.A,f=new c.A,p=new l.A;u.prototype.evaluate=function(e,t){(0,o.A)(e)||(e=s.A.now());const n=this._computeFunction(e),r=function(e,t,n){const r=d;r.x=Math.cos(e+a.A.PI_OVER_TWO),r.y=Math.sin(e+a.A.PI_OVER_TWO),r.z=0;const s=Math.cos(t),l=A;l.x=s*Math.cos(e),l.y=s*Math.sin(e),l.z=Math.sin(t);const u=i.A.cross(l,r,h);return(0,o.A)(n)||(n=new c.A),n[0]=r.x,n[1]=u.x,n[2]=l.x,n[3]=r.y,n[4]=u.y,n[5]=l.y,n[6]=r.z,n[7]=u.z,n[8]=l.z,n}(n.rightAscension,n.declination,t),u=a.A.zeroToTwoPi(n.rotation),m=l.A.fromAxisAngle(i.A.UNIT_Z,u,p),_=c.A.fromQuaternion(l.A.conjugate(m,m),f);return c.A.multiply(_,r,r)};const m=u},300138:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n,i){this.rightAscension=e,this.declination=t,this.rotation=n,this.rotationRate=i}},92457:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({STEP:0,LINEAR:1,CUBICSPLINE:2})},587451:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(434067),o=n(267980),r=n(369031),s=n(491446),a=n(605971);const c={clipTriangleAtAxisAlignedThreshold:function(e,t,n,i,o,r){if(!(0,s.A)(e))throw new a.A("threshold is required.");if(!(0,s.A)(t))throw new a.A("keepAbove is required.");if(!(0,s.A)(n))throw new a.A("u0 is required.");if(!(0,s.A)(i))throw new a.A("u1 is required.");if(!(0,s.A)(o))throw new a.A("u2 is required.");let c,l,u;(0,s.A)(r)?r.length=0:r=[],t?(c=n<e,l=i<e,u=o<e):(c=n>e,l=i>e,u=o>e);const d=c+l+u;let h,A,f,p,m,_;return 1===d?c?(h=(e-n)/(i-n),A=(e-n)/(o-n),r.push(1),r.push(2),1!==A&&(r.push(-1),r.push(0),r.push(2),r.push(A)),1!==h&&(r.push(-1),r.push(0),r.push(1),r.push(h))):l?(f=(e-i)/(o-i),p=(e-i)/(n-i),r.push(2),r.push(0),1!==p&&(r.push(-1),r.push(1),r.push(0),r.push(p)),1!==f&&(r.push(-1),r.push(1),r.push(2),r.push(f))):u&&(m=(e-o)/(n-o),_=(e-o)/(i-o),r.push(0),r.push(1),1!==_&&(r.push(-1),r.push(2),r.push(1),r.push(_)),1!==m&&(r.push(-1),r.push(2),r.push(0),r.push(m))):2===d?c||n===e?l||i===e?u||o===e||(A=(e-n)/(o-n),f=(e-i)/(o-i),r.push(2),r.push(-1),r.push(0),r.push(2),r.push(A),r.push(-1),r.push(1),r.push(2),r.push(f)):(_=(e-o)/(i-o),h=(e-n)/(i-n),r.push(1),r.push(-1),r.push(2),r.push(1),r.push(_),r.push(-1),r.push(0),r.push(1),r.push(h)):(p=(e-i)/(n-i),m=(e-o)/(n-o),r.push(0),r.push(-1),r.push(1),r.push(0),r.push(p),r.push(-1),r.push(2),r.push(0),r.push(m)):3!==d&&(r.push(0),r.push(1),r.push(2)),r},computeBarycentricCoordinates:function(e,t,n,i,r,c,l,u,d){if(!(0,s.A)(e))throw new a.A("x is required.");if(!(0,s.A)(t))throw new a.A("y is required.");if(!(0,s.A)(n))throw new a.A("x1 is required.");if(!(0,s.A)(i))throw new a.A("y1 is required.");if(!(0,s.A)(r))throw new a.A("x2 is required.");if(!(0,s.A)(c))throw new a.A("y2 is required.");if(!(0,s.A)(l))throw new a.A("x3 is required.");if(!(0,s.A)(u))throw new a.A("y3 is required.");const h=n-l,A=l-r,f=c-u,p=i-u,m=1/(f*h+A*p),_=t-u,g=e-l,y=(f*g+A*_)*m,b=(-p*g+h*_)*m,v=1-y-b;return(0,s.A)(d)?(d.x=y,d.y=b,d.z=v,d):new o.A(y,b,v)},computeLineSegmentLineSegmentIntersection:function(e,t,n,o,a,c,l,u,d){r.A.typeOf.number("x00",e),r.A.typeOf.number("y00",t),r.A.typeOf.number("x01",n),r.A.typeOf.number("y01",o),r.A.typeOf.number("x10",a),r.A.typeOf.number("y10",c),r.A.typeOf.number("x11",l),r.A.typeOf.number("y11",u);const h=(u-c)*(n-e)-(l-a)*(o-t);if(0===h)return;const A=((l-a)*(t-c)-(u-c)*(e-a))/h,f=((n-e)*(t-c)-(o-t)*(e-a))/h;return A>=0&&A<=1&&f>=0&&f<=1?((0,s.A)(d)||(d=new i.A),d.x=e+A*(n-e),d.y=t+A*(o-t),d):void 0}}},386009:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(672743),o=n(491446),r=n(744603);let s;const a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmYmE2YWEzOS1lZDUyLTQ0YWMtOTlkNS0wN2VhZWI3NTc4MmEiLCJpZCI6MjU5LCJpYXQiOjE2ODU2MzQ0Njl9.AswCMxsN03WYwuZL-r183OZicN64Ks9aPExWhA3fuLY",c={};c.defaultAccessToken=a,c.defaultServer=new r.A({url:"https://api.cesium.com/"}),c.getDefaultTokenCredit=function(e){if(e===a){if(!(0,o.A)(s)){const e='<b>             This application is using Cesium\'s default ion access token. Please assign <i>Cesium.Ion.defaultAccessToken</i>             with an access token from your ion account before making any Cesium API calls.             You can sign up for a free ion account at <a href="https://cesium.com">https://cesium.com</a>.</b>';s=new i.A(e,!0),s._isDefaultToken=!0}return s}};const l=c},5188:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(672743),r=n(419061),s=n(491446),a=n(386009),c=n(927578),l=n(744603);function u(e){e=(0,r.A)(e,r.A.EMPTY_OBJECT),i.A.typeOf.object("options.scene",e.scene);const t=(0,r.A)(e.accessToken,a.A.defaultAccessToken),n=l.A.createIfNeeded((0,r.A)(e.server,a.A.defaultServer));n.appendForwardSlash();const u=a.A.getDefaultTokenCredit(t);(0,s.A)(u)&&e.scene.frameState.creditDisplay.addStaticCredit(o.A.clone(u));const d=n.getDerivedResource({url:"v1/geocode"});(0,s.A)(t)&&d.appendQueryParameters({access_token:t}),this._accessToken=t,this._server=n,this._pelias=new c.A(d)}Object.defineProperties(u.prototype,{credit:{get:function(){}}}),u.prototype.geocode=async function(e,t){return this._pelias.geocode(e,t)};const d=u},954865:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(484193),o=n(369031),r=n(672743),s=n(419061),a=n(491446),c=n(386009),l=n(744603),u=n(123245);function d(e,t){let n;o.A.defined("endpoint",e),o.A.defined("endpointResource",t);const r=e.externalType,s=(0,a.A)(r);if(s){if("3DTILES"!==r&&"STK_TERRAIN_SERVER"!==r)throw new u.A("Ion.createResource does not support external imagery assets; use IonImageryProvider instead.");n={url:e.options.url}}else n={url:e.url,retryAttempts:1,retryCallback:h};l.A.call(this,n),this._ionEndpoint=e,this._ionEndpointDomain=s?void 0:new i(e.url).authority(),this._ionEndpointResource=t,this._ionRoot=void 0,this._pendingPromise=void 0,this._credits=void 0,this._isExternal=s}function h(e,t){const n=(0,s.A)(e._ionRoot,e),i=n._ionEndpointResource,o="undefined"!=typeof Image;return(0,a.A)(t)&&(401===t.statusCode||o&&t.target instanceof Image)?((0,a.A)(n._pendingPromise)||(n._pendingPromise=i.fetchJson().then((function(e){return n._ionEndpoint=e,e})).finally((function(e){return n._pendingPromise=void 0,e}))),n._pendingPromise.then((function(t){return e._ionEndpoint=t,!0}))):Promise.resolve(!1)}(0,a.A)(Object.create)&&(d.prototype=Object.create(l.A.prototype),d.prototype.constructor=d),d.fromAssetId=function(e,t){const n=d._createEndpointResource(e,t);return n.fetchJson().then((function(e){return new d(e,n)}))},Object.defineProperties(d.prototype,{credits:{get:function(){return(0,a.A)(this._ionRoot)?this._ionRoot.credits:((0,a.A)(this._credits)||(this._credits=d.getCreditsFromEndpoint(this._ionEndpoint,this._ionEndpointResource)),this._credits)}}}),d.getCreditsFromEndpoint=function(e,t){const n=e.attributions.map(r.A.getIonCredit),i=c.A.getDefaultTokenCredit(t.queryParameters.access_token);return(0,a.A)(i)&&n.push(r.A.clone(i)),n},d.prototype.clone=function(e){const t=(0,s.A)(this._ionRoot,this);return(0,a.A)(e)||(e=new d(t._ionEndpoint,t._ionEndpointResource)),(e=l.A.prototype.clone.call(this,e))._ionRoot=t,e._isExternal=this._isExternal,e},d.prototype.fetchImage=function(e){if(!this._isExternal){const t=e;e={preferBlob:!0},(0,a.A)(t)&&(e.flipY=t.flipY,e.preferImageBitmap=t.preferImageBitmap)}return l.A.prototype.fetchImage.call(this,e)},d.prototype._makeRequest=function(e){return this._isExternal||new i(this.url).authority()!==this._ionEndpointDomain||((0,a.A)(e.headers)||(e.headers={}),e.headers.Authorization=`Bearer ${this._ionEndpoint.accessToken}`,e.headers["X-Cesium-Client"]="CesiumJS","undefined"!=typeof CESIUM_VERSION&&(e.headers["X-Cesium-Client-Version"]=CESIUM_VERSION)),l.A.prototype._makeRequest.call(this,e)},d._createEndpointResource=function(e,t){o.A.defined("assetId",e),t=(0,s.A)(t,s.A.EMPTY_OBJECT);let n=(0,s.A)(t.server,c.A.defaultServer);const i=(0,s.A)(t.accessToken,c.A.defaultAccessToken);n=l.A.createIfNeeded(n);const r={url:`v1/assets/${e}/endpoint`};return(0,a.A)(i)&&(r.queryParameters={access_token:i}),n.getDerivedResource(r)};const A=d},862675:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446),o=n(605971);const r={type:"Linear",getRequiredDataPoints:function(e){return 2},interpolateOrderZero:function(e,t,n,r,s){if(2!==t.length)throw new o.A("The xTable provided to the linear interpolator must have exactly two elements.");if(r<=0)throw new o.A("There must be at least 1 dependent variable for each independent variable.");let a,c,l;(0,i.A)(s)||(s=new Array(r));const u=t[0],d=t[1];if(u===d)throw new o.A("Divide by zero error: xTable[0] and xTable[1] are equal");for(a=0;a<r;a++)c=n[a],l=n[a+r],s[a]=((l-c)*e+d*c-u*l)/(d-u);return s}}},153127:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(267980),o=n(419061),r=n(491446),s=n(605971),a=n(437266);function c(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).points,n=e.times;if(!(0,r.A)(t)||!(0,r.A)(n))throw new s.A("points and times are required.");if(t.length<2)throw new s.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new s.A("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=a.A.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(c.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),c.prototype.findTimeInterval=a.A.prototype.findTimeInterval,c.prototype.wrapTime=a.A.prototype.wrapTime,c.prototype.clampTime=a.A.prototype.clampTime,c.prototype.evaluate=function(e,t){const n=this.points,o=this.times,s=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),a=(e-o[s])/(o[s+1]-o[s]);return this._pointType===Number?(1-a)*n[s]+a*n[s+1]:((0,r.A)(t)||(t=new i.A),i.A.lerp(n[s],n[s+1],a,t))};const l=c},981757:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(419061);function r(e){e=(0,o.A)(e,0),this._array=new Array(e),this._length=e}Object.defineProperties(r.prototype,{length:{get:function(){return this._length},set:function(e){i.A.typeOf.number.greaterThanOrEquals("length",e,0);const t=this._array,n=this._length;if(e<n)for(let i=e;i<n;++i)t[i]=void 0;else e>t.length&&(t.length=e);this._length=e}},values:{get:function(){return this._array}}}),r.prototype.get=function(e){return i.A.typeOf.number.lessThan("index",e,this._array.length),this._array[e]},r.prototype.set=function(e,t){i.A.typeOf.number("index",e),e>=this._length&&(this.length=e+1),this._array[e]=t},r.prototype.peek=function(){return this._array[this._length-1]},r.prototype.push=function(e){const t=this.length++;this._array[t]=e},r.prototype.pop=function(){if(0===this._length)return;const e=this._array[this._length-1];return--this.length,e},r.prototype.reserve=function(e){i.A.typeOf.number.greaterThanOrEquals("length",e,0),e>this._array.length&&(this._array.length=e)},r.prototype.resize=function(e){i.A.typeOf.number.greaterThanOrEquals("length",e,0),this.length=e},r.prototype.trim=function(e){e=(0,o.A)(e,this._length),this._array.length=e};const s=r},245226:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(491446),r=n(605971);const s={};function a(e){return 1431655765&((e=858993459&((e=252645135&((e=16711935&(e^e<<8))^e<<4))^e<<2))^e<<1)}function c(e){return 153391689&((e=51130563&((e=50393103&((e=50331903&(e^e<<16))^e<<8))^e<<4))^e<<2)}function l(e){return 65535&((e=16711935&((e=252645135&((e=858993459&((e&=1431655765)^e>>1))^e>>2))^e>>4))^e>>8)}function u(e){return 1023&((e=4278190335&((e=50393103&((e=51130563&((e&=153391689)^e>>2))^e>>4))^e>>8))^e>>16)}s.encode2D=function(e,t){if(i.A.typeOf.number("x",e),i.A.typeOf.number("y",t),e<0||e>65535||t<0||t>65535)throw new r.A("inputs must be 16-bit unsigned integers");return(a(e)|a(t)<<1)>>>0},s.decode2D=function(e,t){if(i.A.typeOf.number("mortonIndex",e),e<0||e>4294967295)throw new r.A("input must be a 32-bit unsigned integer");return(0,o.A)(t)||(t=new Array(2)),t[0]=l(e),t[1]=l(e>>1),t},s.encode3D=function(e,t,n){if(i.A.typeOf.number("x",e),i.A.typeOf.number("y",t),i.A.typeOf.number("z",n),e<0||e>1023||t<0||t>1023||n<0||n>1023)throw new r.A("inputs must be 10-bit unsigned integers");return c(e)|c(t)<<1|c(n)<<2},s.decode3D=function(e,t){if(i.A.typeOf.number("mortonIndex",e),e<0||e>1073741823)throw new r.A("input must be a 30-bit unsigned integer");return(0,o.A)(t)||(t=new Array(3)),t[0]=u(e),t[1]=u(e>>1),t[2]=u(e>>2),t};const d=s},19128:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(660662),o=n(267980),r=n(419061),s=n(491446),a=n(605971),c=n(610750),l=n(367817),u=n(697422),d=n(566123);function h(e,t){if(!(0,s.A)(e))throw new a.A("occluderBoundingSphere is required.");if(!(0,s.A)(t))throw new a.A("camera position is required.");this._occluderPosition=o.A.clone(e.center),this._occluderRadius=e.radius,this._horizonDistance=0,this._horizonPlaneNormal=void 0,this._horizonPlanePosition=void 0,this._cameraPosition=void 0,this.cameraPosition=t}const A=new o.A;Object.defineProperties(h.prototype,{position:{get:function(){return this._occluderPosition}},radius:{get:function(){return this._occluderRadius}},cameraPosition:{set:function(e){if(!(0,s.A)(e))throw new a.A("cameraPosition is required.");e=o.A.clone(e,this._cameraPosition);const t=o.A.subtract(this._occluderPosition,e,A);let n=o.A.magnitudeSquared(t);const i=this._occluderRadius*this._occluderRadius;let r,c,l;if(n>i){r=Math.sqrt(n-i),n=1/Math.sqrt(n),c=o.A.multiplyByScalar(t,n,A);const s=r*r*n;l=o.A.add(e,o.A.multiplyByScalar(c,s,A),A)}else r=Number.MAX_VALUE;this._horizonDistance=r,this._horizonPlaneNormal=c,this._horizonPlanePosition=l,this._cameraPosition=e}}}),h.fromBoundingSphere=function(e,t,n){if(!(0,s.A)(e))throw new a.A("occluderBoundingSphere is required.");if(!(0,s.A)(t))throw new a.A("camera position is required.");return(0,s.A)(n)?(o.A.clone(e.center,n._occluderPosition),n._occluderRadius=e.radius,n.cameraPosition=t,n):new h(e,t)};const f=new o.A;h.prototype.isPointVisible=function(e){if(this._horizonDistance!==Number.MAX_VALUE){let t=o.A.subtract(e,this._occluderPosition,f),n=this._occluderRadius;if(n=o.A.magnitudeSquared(t)-n*n,n>0)return n=Math.sqrt(n)+this._horizonDistance,t=o.A.subtract(e,this._cameraPosition,t),n*n>o.A.magnitudeSquared(t)}return!1};const p=new o.A;h.prototype.isBoundingSphereVisible=function(e){const t=o.A.clone(e.center,p),n=e.radius;if(this._horizonDistance!==Number.MAX_VALUE){let e=o.A.subtract(t,this._occluderPosition,f),i=this._occluderRadius-n;if(i=o.A.magnitudeSquared(e)-i*i,n<this._occluderRadius)return i>0&&(i=Math.sqrt(i)+this._horizonDistance,e=o.A.subtract(t,this._cameraPosition,e),i*i+n*n>o.A.magnitudeSquared(e));if(i>0){e=o.A.subtract(t,this._cameraPosition,e);const r=o.A.magnitudeSquared(e),s=this._occluderRadius*this._occluderRadius,a=n*n;return(this._horizonDistance*this._horizonDistance+s)*a>r*s||(i=Math.sqrt(i)+this._horizonDistance,i*i+a>r)}return!0}return!1};const m=new o.A;h.prototype.computeVisibility=function(e){if(!(0,s.A)(e))throw new a.A("occludeeBS is required.");const t=o.A.clone(e.center),n=e.radius;if(n>this._occluderRadius)return d.A.FULL;if(this._horizonDistance!==Number.MAX_VALUE){let e=o.A.subtract(t,this._occluderPosition,m),i=this._occluderRadius-n;const r=o.A.magnitudeSquared(e);if(i=r-i*i,i>0){i=Math.sqrt(i)+this._horizonDistance,e=o.A.subtract(t,this._cameraPosition,e);const s=o.A.magnitudeSquared(e);return i*i+n*n<s?d.A.NONE:(i=this._occluderRadius+n,i=r-i*i,i>0?(i=Math.sqrt(i)+this._horizonDistance,s<i*i+n*n?d.A.FULL:d.A.PARTIAL):(e=o.A.subtract(t,this._horizonPlanePosition,e),o.A.dot(e,this._horizonPlaneNormal)>-n?d.A.PARTIAL:d.A.FULL))}}return d.A.NONE};const _=new o.A;h.computeOccludeePoint=function(e,t,n){if(!(0,s.A)(e))throw new a.A("occluderBoundingSphere is required.");if(!(0,s.A)(n))throw new a.A("positions is required.");if(0===n.length)throw new a.A("positions must contain at least one element");const i=o.A.clone(t),r=o.A.clone(e.center),c=e.radius,l=n.length;if(o.A.equals(r,t))throw new a.A("occludeePosition must be different than occluderBoundingSphere.center");const u=o.A.normalize(o.A.subtract(i,r,_),_),d=-o.A.dot(u,r),A=h._anyRotationVector(r,u,d);let f,p=h._horizonToPlaneNormalDotProduct(e,u,d,A,n[0]);if(!p)return;for(let t=1;t<l;++t){if(f=h._horizonToPlaneNormalDotProduct(e,u,d,A,n[t]),!f)return;f<p&&(p=f)}if(p<.0017453283658983088)return;const m=c/p;return o.A.add(r,o.A.multiplyByScalar(u,m,_),_)};const g=[];h.computeOccludeePointFromRectangle=function(e,t){if(!(0,s.A)(e))throw new a.A("rectangle is required.");t=(0,r.A)(t,c.A.WGS84);const n=u.A.subsample(e,t,0,g),l=i.A.fromPoints(n),d=o.A.ZERO;if(!o.A.equals(d,l.center))return h.computeOccludeePoint(new i.A(d,t.minimumRadius),l.center,n)};const y=new o.A;h._anyRotationVector=function(e,t,n){const i=o.A.abs(t,y);let r=i.x>i.y?0:1;(0===r&&i.z>i.x||1===r&&i.z>i.y)&&(r=2);const s=new o.A;let a;0===r?(i.x=e.x,i.y=e.y+1,i.z=e.z+1,a=o.A.UNIT_X):1===r?(i.x=e.x+1,i.y=e.y,i.z=e.z+1,a=o.A.UNIT_Y):(i.x=e.x+1,i.y=e.y+1,i.z=e.z,a=o.A.UNIT_Z);const c=(o.A.dot(t,i)+n)/-o.A.dot(t,a);return o.A.normalize(o.A.subtract(o.A.add(i,o.A.multiplyByScalar(a,c,s),i),e,i),i)};const b=new o.A;h._rotationVector=function(e,t,n,i,r){let s=o.A.subtract(i,e,b);if(s=o.A.normalize(s,s),o.A.dot(t,s)<.9999999847691291){const e=o.A.cross(t,s,s);if(o.A.magnitude(e)>l.A.EPSILON13)return o.A.normalize(e,new o.A)}return r};const v=new o.A,T=new o.A,w=new o.A,E=new o.A;h._horizonToPlaneNormalDotProduct=function(e,t,n,i,r){const s=o.A.clone(r,v),a=o.A.clone(e.center,T),c=e.radius;let l=o.A.subtract(a,s,w);const u=o.A.magnitudeSquared(l),d=c*c;if(u<d)return!1;const h=u-d,A=Math.sqrt(h),f=A*(1/Math.sqrt(u))*A;l=o.A.normalize(l,l);const p=o.A.add(s,o.A.multiplyByScalar(l,f,E),E),m=Math.sqrt(h-f*f);let _=this._rotationVector(a,t,n,s,i),g=o.A.fromElements(_.x*_.x*l.x+(_.x*_.y-_.z)*l.y+(_.x*_.z+_.y)*l.z,(_.x*_.y+_.z)*l.x+_.y*_.y*l.y+(_.y*_.z-_.x)*l.z,(_.x*_.z-_.y)*l.x+(_.y*_.z+_.x)*l.y+_.z*_.z*l.z,v);g=o.A.normalize(g,g);const y=o.A.multiplyByScalar(g,m,v);_=o.A.normalize(o.A.subtract(o.A.add(p,y,w),a,w),w);const b=o.A.dot(t,_);_=o.A.normalize(o.A.subtract(o.A.subtract(p,y,_),a,_),_);const S=o.A.dot(t,_);return b<S?b:S};const S=h},927578:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(267980),o=n(369031),r=n(491446),s=n(123475),a=n(697422),c=n(744603);function l(e){o.A.defined("url",e),this._url=c.A.createIfNeeded(e),this._url.appendForwardSlash()}Object.defineProperties(l.prototype,{url:{get:function(){return this._url}},credit:{get:function(){}}}),l.prototype.geocode=async function(e,t){return o.A.typeOf.string("query",e),this._url.getDerivedResource({url:t===s.A.AUTOCOMPLETE?"autocomplete":"search",queryParameters:{text:e}}).fetchJson().then((function(e){return e.features.map((function(t){let n;const o=t.bbox;if((0,r.A)(o))n=a.A.fromDegrees(o[0],o[1],o[2],o[3]);else{const e=t.geometry.coordinates[0],o=t.geometry.coordinates[1];n=i.A.fromDegrees(e,o)}return{displayName:t.properties.label,destination:n,attributions:e.attributions}}))}))};const u=l},666775:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(367817),c=n(65783);function l(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),this._offCenterFrustum=new c.A,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=(0,o.A)(e.near,1),this._near=this.near,this.far=(0,o.A)(e.far,5e8),this._far=this.far,this.xOffset=(0,o.A)(e.xOffset,0),this._xOffset=this.xOffset,this.yOffset=(0,o.A)(e.yOffset,0),this._yOffset=this.yOffset}function u(e){if(!((0,r.A)(e.fov)&&(0,r.A)(e.aspectRatio)&&(0,r.A)(e.near)&&(0,r.A)(e.far)))throw new s.A("fov, aspectRatio, near, or far parameters are not set.");const t=e._offCenterFrustum;if(e.fov!==e._fov||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far||e.xOffset!==e._xOffset||e.yOffset!==e._yOffset){if(e.fov<0||e.fov>=Math.PI)throw new s.A("fov must be in the range [0, PI).");if(e.aspectRatio<0)throw new s.A("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new s.A("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset}}l.packedLength=6,l.pack=function(e,t,n){return i.A.typeOf.object("value",e),i.A.defined("array",t),n=(0,o.A)(n,0),t[n++]=e.fov,t[n++]=e.aspectRatio,t[n++]=e.near,t[n++]=e.far,t[n++]=e.xOffset,t[n]=e.yOffset,t},l.unpack=function(e,t,n){return i.A.defined("array",e),t=(0,o.A)(t,0),(0,r.A)(n)||(n=new l),n.fov=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t++],n.xOffset=e[t++],n.yOffset=e[t],n},Object.defineProperties(l.prototype,{projectionMatrix:{get:function(){return u(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return u(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return u(this),this._fovy}},sseDenominator:{get:function(){return u(this),this._sseDenominator}},offCenterFrustum:{get:function(){return u(this),this._offCenterFrustum}}}),l.prototype.computeCullingVolume=function(e,t,n){return u(this),this._offCenterFrustum.computeCullingVolume(e,t,n)},l.prototype.getPixelDimensions=function(e,t,n,i,o){return u(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)},l.prototype.clone=function(e){return(0,r.A)(e)||(e=new l),e.aspectRatio=this.aspectRatio,e.fov=this.fov,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._fov=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},l.prototype.equals=function(e){return!!((0,r.A)(e)&&e instanceof l)&&(u(this),u(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},l.prototype.equalsEpsilon=function(e,t,n){return!!((0,r.A)(e)&&e instanceof l)&&(u(this),u(e),a.A.equalsEpsilon(this.fov,e.fov,t,n)&&a.A.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};const d=l},65783:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(626809),r=n(400793),s=n(419061),a=n(491446),c=n(605971),l=n(367817),u=n(584164);function d(e){e=(0,s.A)(e,s.A.EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=(0,s.A)(e.near,1),this._near=this.near,this.far=(0,s.A)(e.far,5e8),this._far=this.far,this._cullingVolume=new r.A,this._perspectiveMatrix=new u.A,this._infinitePerspective=new u.A}function h(e){if(!((0,a.A)(e.right)&&(0,a.A)(e.left)&&(0,a.A)(e.top)&&(0,a.A)(e.bottom)&&(0,a.A)(e.near)&&(0,a.A)(e.far)))throw new c.A("right, left, top, bottom, near, or far parameters are not set.");const t=e.top,n=e.bottom,i=e.right,o=e.left,r=e.near,s=e.far;if(t!==e._top||n!==e._bottom||o!==e._left||i!==e._right||r!==e._near||s!==e._far){if(e.near<=0||e.near>e.far)throw new c.A("near must be greater than zero and less than far.");e._left=o,e._right=i,e._top=t,e._bottom=n,e._near=r,e._far=s,e._perspectiveMatrix=u.A.computePerspectiveOffCenter(o,i,n,t,r,s,e._perspectiveMatrix),e._infinitePerspective=u.A.computeInfinitePerspectiveOffCenter(o,i,n,t,r,e._infinitePerspective)}}Object.defineProperties(d.prototype,{projectionMatrix:{get:function(){return h(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return h(this),this._infinitePerspective}}});const A=new i.A,f=new i.A,p=new i.A,m=new i.A;d.prototype.computeCullingVolume=function(e,t,n){if(!(0,a.A)(e))throw new c.A("position is required.");if(!(0,a.A)(t))throw new c.A("direction is required.");if(!(0,a.A)(n))throw new c.A("up is required.");const r=this._cullingVolume.planes,s=this.top,l=this.bottom,u=this.right,d=this.left,h=this.near,_=this.far,g=i.A.cross(t,n,A),y=f;i.A.multiplyByScalar(t,h,y),i.A.add(e,y,y);const b=p;i.A.multiplyByScalar(t,_,b),i.A.add(e,b,b);const v=m;i.A.multiplyByScalar(g,d,v),i.A.add(y,v,v),i.A.subtract(v,e,v),i.A.normalize(v,v),i.A.cross(v,n,v),i.A.normalize(v,v);let T=r[0];return(0,a.A)(T)||(T=r[0]=new o.A),T.x=v.x,T.y=v.y,T.z=v.z,T.w=-i.A.dot(v,e),i.A.multiplyByScalar(g,u,v),i.A.add(y,v,v),i.A.subtract(v,e,v),i.A.cross(n,v,v),i.A.normalize(v,v),T=r[1],(0,a.A)(T)||(T=r[1]=new o.A),T.x=v.x,T.y=v.y,T.z=v.z,T.w=-i.A.dot(v,e),i.A.multiplyByScalar(n,l,v),i.A.add(y,v,v),i.A.subtract(v,e,v),i.A.cross(g,v,v),i.A.normalize(v,v),T=r[2],(0,a.A)(T)||(T=r[2]=new o.A),T.x=v.x,T.y=v.y,T.z=v.z,T.w=-i.A.dot(v,e),i.A.multiplyByScalar(n,s,v),i.A.add(y,v,v),i.A.subtract(v,e,v),i.A.cross(v,g,v),i.A.normalize(v,v),T=r[3],(0,a.A)(T)||(T=r[3]=new o.A),T.x=v.x,T.y=v.y,T.z=v.z,T.w=-i.A.dot(v,e),T=r[4],(0,a.A)(T)||(T=r[4]=new o.A),T.x=t.x,T.y=t.y,T.z=t.z,T.w=-i.A.dot(t,y),i.A.negate(t,v),T=r[5],(0,a.A)(T)||(T=r[5]=new o.A),T.x=v.x,T.y=v.y,T.z=v.z,T.w=-i.A.dot(v,b),this._cullingVolume},d.prototype.getPixelDimensions=function(e,t,n,i,o){if(h(this),!(0,a.A)(e)||!(0,a.A)(t))throw new c.A("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new c.A("drawingBufferWidth must be greater than zero.");if(t<=0)throw new c.A("drawingBufferHeight must be greater than zero.");if(!(0,a.A)(n))throw new c.A("distance is required.");if(!(0,a.A)(i))throw new c.A("pixelRatio is required");if(i<=0)throw new c.A("pixelRatio must be greater than zero.");if(!(0,a.A)(o))throw new c.A("A result object is required.");const r=1/this.near;let s=this.top*r;const l=2*i*n*s/t;s=this.right*r;const u=2*i*n*s/e;return o.x=u,o.y=l,o},d.prototype.clone=function(e){return(0,a.A)(e)||(e=new d),e.right=this.right,e.left=this.left,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},d.prototype.equals=function(e){return(0,a.A)(e)&&e instanceof d&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},d.prototype.equalsEpsilon=function(e,t,n){return e===this||(0,a.A)(e)&&e instanceof d&&l.A.equalsEpsilon(this.right,e.right,t,n)&&l.A.equalsEpsilon(this.left,e.left,t,n)&&l.A.equalsEpsilon(this.top,e.top,t,n)&&l.A.equalsEpsilon(this.bottom,e.bottom,t,n)&&l.A.equalsEpsilon(this.near,e.near,t,n)&&l.A.equalsEpsilon(this.far,e.far,t,n)};const _=d},84609:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(660662),o=n(267980),r=n(369031),s=n(571804),a=n(419061),c=n(491446),l=n(944479),u=n(305439),d=n(46362),h=n(402330),A=n(769534);function f(e){e=(0,a.A)(e,a.A.EMPTY_OBJECT);const t=(0,a.A)(e.vertexFormat,A.A.DEFAULT);this._vertexFormat=t,this._workerName="createPlaneGeometry"}f.packedLength=A.A.packedLength,f.pack=function(e,t,n){return r.A.typeOf.object("value",e),r.A.defined("array",t),n=(0,a.A)(n,0),A.A.pack(e._vertexFormat,t,n),t};const p=new A.A,m={vertexFormat:p};f.unpack=function(e,t,n){r.A.defined("array",e),t=(0,a.A)(t,0);const i=A.A.unpack(e,t,p);return(0,c.A)(n)?(n._vertexFormat=A.A.clone(i,n._vertexFormat),n):new f(m)};const _=new o.A(-.5,-.5,0),g=new o.A(.5,.5,0);f.createGeometry=function(e){const t=e._vertexFormat,n=new d.A;let r,a;if(t.position){if(a=new Float64Array(12),a[0]=_.x,a[1]=_.y,a[2]=0,a[3]=g.x,a[4]=_.y,a[5]=0,a[6]=g.x,a[7]=g.y,a[8]=0,a[9]=_.x,a[10]=g.y,a[11]=0,n.position=new u.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:a}),t.normal){const e=new Float32Array(12);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,n.normal=new u.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})}if(t.st){const e=new Float32Array(8);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,n.st=new u.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:2,values:e})}if(t.tangent){const e=new Float32Array(12);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,n.tangent=new u.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})}if(t.bitangent){const e=new Float32Array(12);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,n.bitangent=new u.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})}r=new Uint16Array(6),r[0]=0,r[1]=1,r[2]=2,r[3]=0,r[4]=2,r[5]=3}return new l.A({attributes:n,indices:r,primitiveType:h.A.TRIANGLES,boundingSphere:new i.A(o.A.ZERO,Math.sqrt(2))})};const y=f},350939:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(660662),o=n(267980),r=n(369031),s=n(571804),a=n(491446),c=n(944479),l=n(305439),u=n(46362),d=n(402330);function h(){this._workerName="createPlaneOutlineGeometry"}h.packedLength=0,h.pack=function(e,t){return r.A.defined("value",e),r.A.defined("array",t),t},h.unpack=function(e,t,n){return r.A.defined("array",e),(0,a.A)(n)?n:new h};const A=new o.A(-.5,-.5,0),f=new o.A(.5,.5,0);h.createGeometry=function(){const e=new u.A,t=new Uint16Array(8),n=new Float64Array(12);return n[0]=A.x,n[1]=A.y,n[2]=A.z,n[3]=f.x,n[4]=A.y,n[5]=A.z,n[6]=f.x,n[7]=f.y,n[8]=A.z,n[9]=A.x,n[10]=f.y,n[11]=A.z,e.position=new l.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new c.A({attributes:e,indices:t,primitiveType:d.A.LINES,boundingSphere:new i.A(o.A.ZERO,Math.sqrt(2))})};const p=h},151949:(e,t,n)=>{"use strict";n.d(t,{A:()=>ue});var i=n(215327),o=n(647934),r=n(660662),s=n(434067),a=n(267980),c=n(336946),l=n(369031),u=n(571804),d=n(419061),h=n(491446),A=n(605971),f=n(610750),p=n(602289),m=n(658091),_=n(944479),g=n(305439),y=n(75200),b=n(794554),v=n(34233),T=n(874915),w=n(367817),E=n(331185),S=n(71694),C=n(406719),x=n(99479),I=n(697422),P=n(769534),D=n(666765);const O=new c.A,L=new c.A;function N(e,t,n,i){const o=i.cartesianToCartographic(e,O).height,r=i.cartesianToCartographic(t,L);r.height=o,i.cartographicToCartesian(r,t);const s=i.cartesianToCartographic(n,L);s.height=o-100,i.cartographicToCartesian(s,n)}const M=new o.A,R=new a.A,F=new a.A,B=new a.A,U=new a.A,k=new a.A,V=new a.A;let H=new a.A,z=new a.A,G=new a.A;const j=new s.A,W=new s.A,q=new a.A,Y=new x.A,X=new E.A,J=new E.A;function Q(e){const t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,r=(0,h.A)(n.attributes.st)?n.attributes.st.values:void 0;let c=o.length;const l=e.wall,d=e.top||l,A=e.bottom||l;if(t.st||t.normal||t.tangent||t.bitangent||i){const f=e.boundingRectangle,p=e.tangentPlane,m=e.ellipsoid,_=e.stRotation,y=e.perPositionHeight,b=j;b.x=f.x,b.y=f.y;const v=t.st?new Float32Array(c/3*2):void 0;let T;t.normal&&(T=y&&d&&!l?n.attributes.normal.values:new Float32Array(c));const S=t.tangent?new Float32Array(c):void 0,C=t.bitangent?new Float32Array(c):void 0,I=i?new Float32Array(c):void 0;let P=0,D=0,O=F,L=B,M=U,Q=!0,$=X,K=J;if(0!==_){let e=x.A.fromAxisAngle(p._plane.normal,_,Y);$=E.A.fromQuaternion(e,$),e=x.A.fromAxisAngle(p._plane.normal,-_,Y),K=E.A.fromQuaternion(e,K)}else $=E.A.clone(E.A.IDENTITY,$),K=E.A.clone(E.A.IDENTITY,K);let Z=0,ee=0;d&&A&&(Z=c/2,ee=c/3,c/=2);for(let n=0;n<c;n+=3){const u=a.A.fromArray(o,n,q);if(t.st&&!(0,h.A)(r)){let e=E.A.multiplyByVector($,u,R);e=m.scaleToGeodeticSurface(e,e);const t=p.projectPointOntoPlane(e,W);s.A.subtract(t,b,t);const n=w.A.clamp(t.x/f.width,0,1),i=w.A.clamp(t.y/f.height,0,1);A&&(v[P+ee]=n,v[P+1+ee]=i),d&&(v[P]=n,v[P+1]=i),P+=2}if(t.normal||t.tangent||t.bitangent||i){const r=D+1,s=D+2;if(l){if(n+3<c){const e=a.A.fromArray(o,n+3,k);if(Q){const t=a.A.fromArray(o,n+c,V);y&&N(u,e,t,m),a.A.subtract(e,u,e),a.A.subtract(t,u,t),O=a.A.normalize(a.A.cross(t,e,O),O),Q=!1}a.A.equalsEpsilon(e,u,w.A.EPSILON10)&&(Q=!0)}(t.tangent||t.bitangent)&&(M=m.geodeticSurfaceNormal(u,M),t.tangent&&(L=a.A.normalize(a.A.cross(M,O,L),L)))}else O=m.geodeticSurfaceNormal(u,O),(t.tangent||t.bitangent)&&(y&&(H=a.A.fromArray(T,D,H),z=a.A.cross(a.A.UNIT_Z,H,z),z=a.A.normalize(E.A.multiplyByVector(K,z,z),z),t.bitangent&&(G=a.A.normalize(a.A.cross(H,z,G),G))),L=a.A.cross(a.A.UNIT_Z,O,L),L=a.A.normalize(E.A.multiplyByVector(K,L,L),L),t.bitangent&&(M=a.A.normalize(a.A.cross(O,L,M),M)));t.normal&&(e.wall?(T[D+Z]=O.x,T[r+Z]=O.y,T[s+Z]=O.z):A&&(T[D+Z]=-O.x,T[r+Z]=-O.y,T[s+Z]=-O.z),(d&&!y||l)&&(T[D]=O.x,T[r]=O.y,T[s]=O.z)),i&&(l&&(O=m.geodeticSurfaceNormal(u,O)),I[D+Z]=-O.x,I[r+Z]=-O.y,I[s+Z]=-O.z),t.tangent&&(e.wall?(S[D+Z]=L.x,S[r+Z]=L.y,S[s+Z]=L.z):A&&(S[D+Z]=-L.x,S[r+Z]=-L.y,S[s+Z]=-L.z),d&&(y?(S[D]=z.x,S[r]=z.y,S[s]=z.z):(S[D]=L.x,S[r]=L.y,S[s]=L.z))),t.bitangent&&(A&&(C[D+Z]=M.x,C[r+Z]=M.y,C[s+Z]=M.z),d&&(y?(C[D]=G.x,C[r]=G.y,C[s]=G.z):(C[D]=M.x,C[r]=M.y,C[s]=M.z))),D+=3}}t.st&&!(0,h.A)(r)&&(n.attributes.st=new g.A({componentDatatype:u.A.FLOAT,componentsPerAttribute:2,values:v})),t.normal&&(n.attributes.normal=new g.A({componentDatatype:u.A.FLOAT,componentsPerAttribute:3,values:T})),t.tangent&&(n.attributes.tangent=new g.A({componentDatatype:u.A.FLOAT,componentsPerAttribute:3,values:S})),t.bitangent&&(n.attributes.bitangent=new g.A({componentDatatype:u.A.FLOAT,componentsPerAttribute:3,values:C})),i&&(n.attributes.extrudeDirection=new g.A({componentDatatype:u.A.FLOAT,componentsPerAttribute:3,values:I}))}if(e.extrude&&(0,h.A)(e.offsetAttribute)){const t=o.length/3;let i=new Uint8Array(t);if(e.offsetAttribute===b.A.TOP)d&&A||l?i=i.fill(1,0,t/2):d&&(i=i.fill(1));else{const t=e.offsetAttribute===b.A.NONE?0:1;i=i.fill(t)}n.attributes.applyOffset=new g.A({componentDatatype:u.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return n}const $=new c.A,K=new c.A,Z={westOverIDL:0,eastOverIDL:0};let ee=new p.A;function te(e,t,n,o,r){if(r=(0,d.A)(r,new I.A),!(0,h.A)(e)||e.length<3)return r.west=0,r.north=0,r.south=0,r.east=0,r;if(n===i.A.RHUMB)return I.A.fromCartesianArray(e,t,r);ee.ellipsoid.equals(t)||(ee=new p.A(void 0,void 0,t)),r.west=Number.POSITIVE_INFINITY,r.east=Number.NEGATIVE_INFINITY,r.south=Number.POSITIVE_INFINITY,r.north=Number.NEGATIVE_INFINITY,Z.westOverIDL=Number.POSITIVE_INFINITY,Z.eastOverIDL=Number.NEGATIVE_INFINITY;const s=1/w.A.chordLength(o,t.maximumRadius),a=e.length;let c,l=t.cartesianToCartographic(e[0],K),u=$;for(let n=1;n<a;n++)c=u,u=l,l=t.cartesianToCartographic(e[n],c),ee.setEndPoints(u,l),ie(ee,s,r,Z);return c=u,u=l,l=t.cartesianToCartographic(e[0],c),ee.setEndPoints(u,l),ie(ee,s,r,Z),r.east-r.west>Z.eastOverIDL-Z.westOverIDL&&(r.west=Z.westOverIDL,r.east=Z.eastOverIDL,r.east>w.A.PI&&(r.east=r.east-w.A.TWO_PI),r.west>w.A.PI&&(r.west=r.west-w.A.TWO_PI)),r}const ne=new c.A;function ie(e,t,n,i){const o=e.surfaceDistance,r=Math.ceil(o*t),s=r>0?o/(r-1):Number.POSITIVE_INFINITY;let a=0;for(let t=0;t<r;t++){const t=e.interpolateUsingSurfaceDistance(a,ne);a+=s;const o=t.longitude,r=t.latitude;n.west=Math.min(n.west,o),n.east=Math.max(n.east,o),n.south=Math.min(n.south,r),n.north=Math.max(n.north,r);const c=o>=0?o:o+w.A.TWO_PI;i.westOverIDL=Math.min(i.westOverIDL,c),i.eastOverIDL=Math.max(i.eastOverIDL,c)}}const oe=[];function re(e,t,n,i,o,r,s,a,c,l){const u={walls:[]};let d;if(s||a){const o=S.A.createGeometryFromPositions(e,t,n,i,r,c,l),A=o.attributes.position.values,f=o.indices;let p,m;if(s&&a){const e=A.concat(A);p=e.length/3,m=T.A.createTypedArray(p,2*f.length),m.set(f);const t=f.length,i=p/2;for(d=0;d<t;d+=3){const e=m[d]+i,n=m[d+1]+i,o=m[d+2]+i;m[d+t]=o,m[d+1+t]=n,m[d+2+t]=e}if(o.attributes.position.values=e,r&&c.normal){const t=o.attributes.normal.values;o.attributes.normal.values=new Float32Array(e.length),o.attributes.normal.values.set(t)}if(c.st&&(0,h.A)(n)){const e=o.attributes.st.values;o.attributes.st.values=new Float32Array(2*p),o.attributes.st.values=e.concat(e)}o.indices=m}else if(a){for(p=A.length/3,m=T.A.createTypedArray(p,f.length),d=0;d<f.length;d+=3)m[d]=f[d+2],m[d+1]=f[d+1],m[d+2]=f[d];o.indices=m}u.topAndBottom=new y.A({geometry:o})}let A=o.outerRing,f=m.A.fromPoints(A,e),p=f.projectPointsOntoPlane(A,oe),_=C.A.computeWindingOrder2D(p);_===D.A.CLOCKWISE&&(A=A.slice().reverse());let g=S.A.computeWallGeometry(A,n,e,i,r,l);u.walls.push(new y.A({geometry:g}));const b=o.holes;for(d=0;d<b.length;d++){let t=b[d];f=m.A.fromPoints(t,e),p=f.projectPointsOntoPlane(t,oe),_=C.A.computeWindingOrder2D(p),_===D.A.COUNTER_CLOCKWISE&&(t=t.slice().reverse()),g=S.A.computeWallGeometry(t,n,e,i,r,l),u.walls.push(new y.A({geometry:g}))}return u}function se(e){if(l.A.typeOf.object("options",e),l.A.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),(0,h.A)(e.perPositionHeight)&&e.perPositionHeight&&(0,h.A)(e.height))throw new A.A("Cannot use both options.perPositionHeight and options.height");if((0,h.A)(e.arcType)&&e.arcType!==i.A.GEODESIC&&e.arcType!==i.A.RHUMB)throw new A.A("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=(0,d.A)(e.vertexFormat,P.A.DEFAULT),o=(0,d.A)(e.ellipsoid,f.A.WGS84),r=(0,d.A)(e.granularity,w.A.RADIANS_PER_DEGREE),c=(0,d.A)(e.stRotation,0),u=e.textureCoordinates,p=(0,d.A)(e.perPositionHeight,!1),m=p&&(0,h.A)(e.extrudedHeight);let _=(0,d.A)(e.height,0),g=(0,d.A)(e.extrudedHeight,_);if(!m){const e=Math.max(_,g);g=Math.min(_,g),_=e}this._vertexFormat=P.A.clone(n),this._ellipsoid=f.A.clone(o),this._granularity=r,this._stRotation=c,this._height=_,this._extrudedHeight=g,this._closeTop=(0,d.A)(e.closeTop,!0),this._closeBottom=(0,d.A)(e.closeBottom,!0),this._polygonHierarchy=t,this._perPositionHeight=p,this._perPositionHeightExtrude=m,this._shadowVolume=(0,d.A)(e.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=(0,d.A)(e.arcType,i.A.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=u,this.packedLength=S.A.computeHierarchyPackedLength(t,a.A)+f.A.packedLength+P.A.packedLength+(u?S.A.computeHierarchyPackedLength(u,s.A):1)+12}se.fromPositions=function(e){return e=(0,d.A)(e,d.A.EMPTY_OBJECT),l.A.defined("options.positions",e.positions),new se({polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates})},se.pack=function(e,t,n){return l.A.typeOf.object("value",e),l.A.defined("array",t),n=(0,d.A)(n,0),n=S.A.packPolygonHierarchy(e._polygonHierarchy,t,n,a.A),f.A.pack(e._ellipsoid,t,n),n+=f.A.packedLength,P.A.pack(e._vertexFormat,t,n),n+=P.A.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=(0,d.A)(e._offsetAttribute,-1),t[n++]=e._arcType,(0,h.A)(e._textureCoordinates)?n=S.A.packPolygonHierarchy(e._textureCoordinates,t,n,s.A):t[n++]=-1,t[n++]=e.packedLength,t};const ae=f.A.clone(f.A.UNIT_SPHERE),ce=new P.A,le={polygonHierarchy:{}};se.unpack=function(e,t,n){l.A.defined("array",e),t=(0,d.A)(t,0);const i=S.A.unpackPolygonHierarchy(e,t,a.A);t=i.startingIndex,delete i.startingIndex;const o=f.A.unpack(e,t,ae);t+=f.A.packedLength;const r=P.A.unpack(e,t,ce);t+=P.A.packedLength;const c=e[t++],u=e[t++],A=e[t++],p=e[t++],m=1===e[t++],_=1===e[t++],g=1===e[t++],y=1===e[t++],b=1===e[t++],v=e[t++],T=e[t++],w=-1===e[t]?void 0:S.A.unpackPolygonHierarchy(e,t,s.A);(0,h.A)(w)?(t=w.startingIndex,delete w.startingIndex):t++;const E=e[t++];return(0,h.A)(n)||(n=new se(le)),n._polygonHierarchy=i,n._ellipsoid=f.A.clone(o,n._ellipsoid),n._vertexFormat=P.A.clone(r,n._vertexFormat),n._height=c,n._extrudedHeight=u,n._granularity=A,n._stRotation=p,n._perPositionHeightExtrude=m,n._perPositionHeight=_,n._closeTop=g,n._closeBottom=y,n._shadowVolume=b,n._offsetAttribute=-1===v?void 0:v,n._arcType=T,n._textureCoordinates=w,n.packedLength=E,n},se.computeRectangle=function(e,t){l.A.typeOf.object("options",e),l.A.typeOf.object("options.polygonHierarchy",e.polygonHierarchy);const n=(0,d.A)(e.granularity,w.A.RADIANS_PER_DEGREE),o=(0,d.A)(e.arcType,i.A.GEODESIC);if(o!==i.A.GEODESIC&&o!==i.A.RHUMB)throw new A.A("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const r=e.polygonHierarchy,s=(0,d.A)(e.ellipsoid,f.A.WGS84);return te(r.positions,s,o,n,t)},se.createGeometry=function(e){const t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,o=e._stRotation,s=e._polygonHierarchy,a=e._perPositionHeight,c=e._closeTop,l=e._closeBottom,d=e._arcType,A=e._textureCoordinates,f=(0,h.A)(A);let p=s.positions;if(p.length<3)return;const E=m.A.fromPoints(p,n),x=S.A.polygonsFromHierarchy(s,f,E.projectPointsOntoPlane.bind(E),!a,n),I=x.hierarchy,P=x.polygons,D=f?S.A.polygonsFromHierarchy(A,!0,(function(e){return e}),!1).polygons:void 0;if(0===I.length)return;p=I[0].outerRing;const O=S.A.computeBoundingRectangle(E.plane.normal,E.projectPointOntoPlane.bind(E),p,o,M),L=[],N=e._height,R=e._extrudedHeight,F={perPositionHeight:a,vertexFormat:t,geometry:void 0,tangentPlane:E,boundingRectangle:O,ellipsoid:n,stRotation:o,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:d};let B;if(e._perPositionHeightExtrude||!w.A.equalsEpsilon(N,R,0,w.A.EPSILON2))for(F.extrude=!0,F.top=c,F.bottom=l,F.shadowVolume=e._shadowVolume,F.offsetAttribute=e._offsetAttribute,B=0;B<P.length;B++){const e=re(n,P[B],f?D[B]:void 0,i,I[B],a,c,l,t,d);let o;c&&l?(o=e.topAndBottom,F.geometry=S.A.scaleToGeodeticHeightExtruded(o.geometry,N,R,n,a)):c?(o=e.topAndBottom,o.geometry.attributes.position.values=C.A.scaleToGeodeticHeight(o.geometry.attributes.position.values,N,n,!a),F.geometry=o.geometry):l&&(o=e.topAndBottom,o.geometry.attributes.position.values=C.A.scaleToGeodeticHeight(o.geometry.attributes.position.values,R,n,!0),F.geometry=o.geometry),(c||l)&&(F.wall=!1,o.geometry=Q(F),L.push(o));const r=e.walls;F.wall=!0;for(let e=0;e<r.length;e++){const t=r[e];F.geometry=S.A.scaleToGeodeticHeightExtruded(t.geometry,N,R,n,a),t.geometry=Q(F),L.push(t)}}else for(B=0;B<P.length;B++){const o=new y.A({geometry:S.A.createGeometryFromPositions(n,P[B],f?D[B]:void 0,i,a,t,d)});if(o.geometry.attributes.position.values=C.A.scaleToGeodeticHeight(o.geometry.attributes.position.values,N,n,!a),F.geometry=o.geometry,o.geometry=Q(F),(0,h.A)(e._offsetAttribute)){const t=o.geometry.attributes.position.values.length,n=e._offsetAttribute===b.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);o.geometry.attributes.applyOffset=new g.A({componentDatatype:u.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}L.push(o)}const U=v.A.combineInstances(L)[0];U.attributes.position.values=new Float64Array(U.attributes.position.values),U.indices=T.A.createTypedArray(U.attributes.position.values.length/3,U.indices);const k=U.attributes,V=r.A.fromVertices(k.position.values);return t.position||delete k.position,new _.A({attributes:k,indices:U.indices,primitiveType:U.primitiveType,boundingSphere:V,offsetAttribute:e._offsetAttribute})},se.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new se({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:s,vertexFormat:P.A.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})},Object.defineProperties(se.prototype,{rectangle:{get:function(){if(!(0,h.A)(this._rectangle)){const e=this._polygonHierarchy.positions;this._rectangle=te(e,this._ellipsoid,this._arcType,this._granularity)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return(0,h.A)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return _.A._textureCoordinateRotationPoints(i,t,n,o)}(this)),this._textureCoordinateRotationPoints}}});const ue=se},71694:(e,t,n)=>{"use strict";n.d(t,{A:()=>Y});var i=n(215327),o=n(263604),r=n(434067),s=n(267980),a=n(336946),c=n(571804),l=n(419061),u=n(491446),d=n(610750),h=n(551824),A=n(944479),f=n(305439),p=n(46362),m=n(34233),_=n(874915),g=n(367817),y=n(331185),b=n(406719),v=n(402330),T=n(99479),w=n(67988),E=n(666765);const S={computeHierarchyPackedLength:function(e,t){let n=0;const i=[e];for(;i.length>0;){const e=i.pop();if(!(0,u.A)(e))continue;n+=2;const o=e.positions,r=e.holes;if((0,u.A)(o)&&o.length>0&&(n+=o.length*t.packedLength),(0,u.A)(r)){const e=r.length;for(let t=0;t<e;++t)i.push(r[t])}}return n},packPolygonHierarchy:function(e,t,n,i){const o=[e];for(;o.length>0;){const e=o.pop();if(!(0,u.A)(e))continue;const r=e.positions,s=e.holes;if(t[n++]=(0,u.A)(r)?r.length:0,t[n++]=(0,u.A)(s)?s.length:0,(0,u.A)(r)){const e=r.length;for(let o=0;o<e;++o,n+=i.packedLength)i.pack(r[o],t,n)}if((0,u.A)(s)){const e=s.length;for(let t=0;t<e;++t)o.push(s[t])}}return n},unpackPolygonHierarchy:function(e,t,n){const i=e[t++],o=e[t++],r=new Array(i),s=o>0?new Array(o):void 0;for(let o=0;o<i;++o,t+=n.packedLength)r[o]=n.unpack(e,t);for(let i=0;i<o;++i)s[i]=S.unpackPolygonHierarchy(e,t,n),t=s[i].startingIndex,delete s[i].startingIndex;return{positions:r,holes:s,startingIndex:t}}},C=new r.A;function x(e,t,n,i){return r.A.subtract(t,e,C),r.A.multiplyByScalar(C,n/i,C),r.A.add(e,C,C),[C.x,C.y]}const I=new s.A;function P(e,t,n,i){return s.A.subtract(t,e,I),s.A.multiplyByScalar(I,n/i,I),s.A.add(e,I,I),[I.x,I.y,I.z]}S.subdivideLineCount=function(e,t,n){const i=s.A.distance(e,t)/n,o=Math.max(0,Math.ceil(g.A.log2(i)));return Math.pow(2,o)};const D=new a.A,O=new a.A,L=new a.A,N=new s.A,M=new h.A;S.subdivideRhumbLineCount=function(e,t,n,i){const o=e.cartesianToCartographic(t,D),r=e.cartesianToCartographic(n,O),s=new h.A(o,r,e).surfaceDistance/i,a=Math.max(0,Math.ceil(g.A.log2(s)));return Math.pow(2,a)},S.subdivideTexcoordLine=function(e,t,n,i,o,s){const a=S.subdivideLineCount(n,i,o),c=r.A.distance(e,t),l=c/a,u=s;u.length=2*a;let d=0;for(let n=0;n<a;n++){const i=x(e,t,n*l,c);u[d++]=i[0],u[d++]=i[1]}return u},S.subdivideLine=function(e,t,n,i){const o=S.subdivideLineCount(e,t,n),r=s.A.distance(e,t),a=r/o;(0,u.A)(i)||(i=[]);const c=i;c.length=3*o;let l=0;for(let n=0;n<o;n++){const i=P(e,t,n*a,r);c[l++]=i[0],c[l++]=i[1],c[l++]=i[2]}return c},S.subdivideTexcoordRhumbLine=function(e,t,n,i,o,s,a){const c=n.cartesianToCartographic(i,D),l=n.cartesianToCartographic(o,O);M.setEndPoints(c,l);const u=M.surfaceDistance/s,d=Math.max(0,Math.ceil(g.A.log2(u))),h=Math.pow(2,d),A=r.A.distance(e,t),f=A/h,p=a;p.length=2*h;let m=0;for(let n=0;n<h;n++){const i=x(e,t,n*f,A);p[m++]=i[0],p[m++]=i[1]}return p},S.subdivideRhumbLine=function(e,t,n,i,o){const r=e.cartesianToCartographic(t,D),s=e.cartesianToCartographic(n,O),a=new h.A(r,s,e),c=a.surfaceDistance/i,l=Math.max(0,Math.ceil(g.A.log2(c))),d=Math.pow(2,l),A=a.surfaceDistance/d;(0,u.A)(o)||(o=[]);const f=o;f.length=3*d;let p=0;for(let t=0;t<d;t++){const n=a.interpolateUsingSurfaceDistance(t*A,L),i=e.cartographicToCartesian(n,N);f[p++]=i.x,f[p++]=i.y,f[p++]=i.z}return f};const R=new s.A,F=new s.A,B=new s.A,U=new s.A;S.scaleToGeodeticHeightExtruded=function(e,t,n,i,o){i=(0,l.A)(i,d.A.WGS84);const r=R;let a=F;const c=B;let h=U;if((0,u.A)(e)&&(0,u.A)(e.attributes)&&(0,u.A)(e.attributes.position)){const l=e.attributes.position.values,u=l.length/2;for(let e=0;e<u;e+=3)s.A.fromArray(l,e,c),i.geodeticSurfaceNormal(c,r),h=i.scaleToGeodeticSurface(c,h),a=s.A.multiplyByScalar(r,n,a),a=s.A.add(h,a,a),l[e+u]=a.x,l[e+1+u]=a.y,l[e+2+u]=a.z,o&&(h=s.A.clone(c,h)),a=s.A.multiplyByScalar(r,t,a),a=s.A.add(h,a,a),l[e]=a.x,l[e+1]=a.y,l[e+2]=a.z}return e},S.polygonOutlinesFromHierarchy=function(e,t,n){const i=[],r=new w.A;let a,c,l;for(r.enqueue(e);0!==r.length;){const e=r.dequeue();let d=e.positions;if(t)for(l=d.length,a=0;a<l;a++)n.scaleToGeodeticSurface(d[a],d[a]);if(d=(0,o.A)(d,s.A.equalsEpsilon,!0),d.length<3)continue;const h=e.holes?e.holes.length:0;for(a=0;a<h;a++){const d=e.holes[a];let h=d.positions;if(t)for(l=h.length,c=0;c<l;++c)n.scaleToGeodeticSurface(h[c],h[c]);if(h=(0,o.A)(h,s.A.equalsEpsilon,!0),h.length<3)continue;i.push(h);let A=0;for((0,u.A)(d.holes)&&(A=d.holes.length),c=0;c<A;c++)r.enqueue(d.holes[c])}i.push(d)}return i},S.polygonsFromHierarchy=function(e,t,n,i,r){const a=[],c=[],l=new w.A;for(l.enqueue(e);0!==l.length;){const e=l.dequeue();let d=e.positions;const h=e.holes;let A,f;if(i)for(f=d.length,A=0;A<f;A++)r.scaleToGeodeticSurface(d[A],d[A]);if(t||(d=(0,o.A)(d,s.A.equalsEpsilon,!0)),d.length<3)continue;let p=n(d);if(!(0,u.A)(p))continue;const m=[];let _=b.A.computeWindingOrder2D(p);_===E.A.CLOCKWISE&&(p.reverse(),d=d.slice().reverse());let g=d.slice();const y=(0,u.A)(h)?h.length:0,v=[];let T;for(A=0;A<y;A++){const e=h[A];let a=e.positions;if(i)for(f=a.length,T=0;T<f;++T)r.scaleToGeodeticSurface(a[T],a[T]);if(t||(a=(0,o.A)(a,s.A.equalsEpsilon,!0)),a.length<3)continue;const c=n(a);if(!(0,u.A)(c))continue;_=b.A.computeWindingOrder2D(c),_===E.A.CLOCKWISE&&(c.reverse(),a=a.slice().reverse()),v.push(a),m.push(g.length),g=g.concat(a),p=p.concat(c);let d=0;for((0,u.A)(e.holes)&&(d=e.holes.length),T=0;T<d;T++)l.enqueue(e.holes[T])}a.push({outerRing:d,holes:v}),c.push({positions:g,positions2D:p,holes:m})}return{hierarchy:a,polygons:c}};const k=new r.A,V=new s.A,H=new T.A,z=new y.A;S.computeBoundingRectangle=function(e,t,n,i,o){const r=T.A.fromAxisAngle(e,i,H),a=y.A.fromQuaternion(r,z);let c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;const A=n.length;for(let e=0;e<A;++e){const i=s.A.clone(n[e],V);y.A.multiplyByVector(a,i,i);const o=t(i,k);(0,u.A)(o)&&(c=Math.min(c,o.x),l=Math.max(l,o.x),d=Math.min(d,o.y),h=Math.max(h,o.y))}return o.x=c,o.y=d,o.width=l-c,o.height=h-d,o},S.createGeometryFromPositions=function(e,t,n,o,s,a,l){let d=b.A.triangulate(t.positions2D,t.holes);d.length<3&&(d=[0,1,2]);const h=t.positions,p=(0,u.A)(n),_=p?n.positions:void 0;if(s){const e=h.length,t=new Array(3*e);let n=0;for(let i=0;i<e;i++){const e=h[i];t[n++]=e.x,t[n++]=e.y,t[n++]=e.z}const i={attributes:{position:new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:t})},indices:d,primitiveType:v.A.TRIANGLES};p&&(i.attributes.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:r.A.packArray(_)}));const o=new A.A(i);return a.normal?m.A.computeNormal(o):o}return l===i.A.GEODESIC?b.A.computeSubdivision(e,h,d,_,o):l===i.A.RHUMB?b.A.computeRhumbLineSubdivision(e,h,d,_,o):void 0};const G=[],j=[],W=new s.A,q=new s.A;S.computeWallGeometry=function(e,t,n,o,r,a){let l,d,h,m,y,b,T,w,E,C=e.length,x=0,I=0;const P=(0,u.A)(t),D=P?t.positions:void 0;if(r)for(d=3*C*2,l=new Array(2*d),P&&(E=2*C*2,w=new Array(2*E)),h=0;h<C;h++)m=e[h],y=e[(h+1)%C],l[x]=l[x+d]=m.x,++x,l[x]=l[x+d]=m.y,++x,l[x]=l[x+d]=m.z,++x,l[x]=l[x+d]=y.x,++x,l[x]=l[x+d]=y.y,++x,l[x]=l[x+d]=y.z,++x,P&&(b=D[h],T=D[(h+1)%C],w[I]=w[I+E]=b.x,++I,w[I]=w[I+E]=b.y,++I,w[I]=w[I+E]=T.x,++I,w[I]=w[I+E]=T.y,++I);else{const t=g.A.chordLength(o,n.maximumRadius);let r=0;if(a===i.A.GEODESIC)for(h=0;h<C;h++)r+=S.subdivideLineCount(e[h],e[(h+1)%C],t);else if(a===i.A.RHUMB)for(h=0;h<C;h++)r+=S.subdivideRhumbLineCount(n,e[h],e[(h+1)%C],t);for(d=3*(r+C),l=new Array(2*d),P&&(E=2*(r+C),w=new Array(2*E)),h=0;h<C;h++){let o,r;m=e[h],y=e[(h+1)%C],P&&(b=D[h],T=D[(h+1)%C]),a===i.A.GEODESIC?(o=S.subdivideLine(m,y,t,j),P&&(r=S.subdivideTexcoordLine(b,T,m,y,t,G))):a===i.A.RHUMB&&(o=S.subdivideRhumbLine(n,m,y,t,j),P&&(r=S.subdivideTexcoordRhumbLine(b,T,n,m,y,t,G)));const s=o.length;for(let e=0;e<s;++e,++x)l[x]=o[e],l[x+d]=o[e];if(l[x]=y.x,l[x+d]=y.x,++x,l[x]=y.y,l[x+d]=y.y,++x,l[x]=y.z,l[x+d]=y.z,++x,P){const e=r.length;for(let t=0;t<e;++t,++I)w[I]=r[t],w[I+E]=r[t];w[I]=T.x,w[I+E]=T.x,++I,w[I]=T.y,w[I+E]=T.y,++I}}}C=l.length;const O=_.A.createTypedArray(C/3,C-6*e.length);let L=0;for(C/=6,h=0;h<C;h++){const e=h,t=e+1,n=e+C,i=n+1;m=s.A.fromArray(l,3*e,W),y=s.A.fromArray(l,3*t,q),s.A.equalsEpsilon(m,y,g.A.EPSILON10,g.A.EPSILON10)||(O[L++]=e,O[L++]=n,O[L++]=t,O[L++]=t,O[L++]=n,O[L++]=i)}const N={attributes:new p.A({position:new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:l})}),indices:O,primitiveType:v.A.TRIANGLES};return P&&(N.attributes.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:w})),new A.A(N)};const Y=S},87551:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(215327),o=n(660662),r=n(267980),s=n(369031),a=n(571804),c=n(419061),l=n(491446),u=n(605971),d=n(610750),h=n(658091),A=n(944479),f=n(305439),p=n(46362),m=n(75200),_=n(794554),g=n(34233),y=n(874915),b=n(367817),v=n(71694),T=n(406719),w=n(402330),E=n(666765);const S=[],C=[];function x(e,t,n,o,r){const s=h.A.fromPoints(t,e).projectPointsOntoPlane(t,S);let c,l;T.A.computeWindingOrder2D(s)===E.A.CLOCKWISE&&(s.reverse(),t=t.slice().reverse());let u=t.length,d=0;if(o)for(c=new Float64Array(2*u*3),l=0;l<u;l++){const e=t[l],n=t[(l+1)%u];c[d++]=e.x,c[d++]=e.y,c[d++]=e.z,c[d++]=n.x,c[d++]=n.y,c[d++]=n.z}else{let o=0;if(r===i.A.GEODESIC)for(l=0;l<u;l++)o+=v.A.subdivideLineCount(t[l],t[(l+1)%u],n);else if(r===i.A.RHUMB)for(l=0;l<u;l++)o+=v.A.subdivideRhumbLineCount(e,t[l],t[(l+1)%u],n);for(c=new Float64Array(3*o),l=0;l<u;l++){let o;r===i.A.GEODESIC?o=v.A.subdivideLine(t[l],t[(l+1)%u],n,C):r===i.A.RHUMB&&(o=v.A.subdivideRhumbLine(e,t[l],t[(l+1)%u],n,C));const s=o.length;for(let e=0;e<s;++e)c[d++]=o[e]}}u=c.length/3;const _=2*u,g=y.A.createTypedArray(u,_);for(d=0,l=0;l<u-1;l++)g[d++]=l,g[d++]=l+1;return g[d++]=u-1,g[d++]=0,new m.A({geometry:new A.A({attributes:new p.A({position:new f.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:c})}),indices:g,primitiveType:w.A.LINES})})}function I(e,t,n,o,r){const s=h.A.fromPoints(t,e).projectPointsOntoPlane(t,S);let c,l;T.A.computeWindingOrder2D(s)===E.A.CLOCKWISE&&(s.reverse(),t=t.slice().reverse());let u=t.length;const d=new Array(u);let _=0;if(o)for(c=new Float64Array(2*u*3*2),l=0;l<u;++l){d[l]=_/3;const e=t[l],n=t[(l+1)%u];c[_++]=e.x,c[_++]=e.y,c[_++]=e.z,c[_++]=n.x,c[_++]=n.y,c[_++]=n.z}else{let o=0;if(r===i.A.GEODESIC)for(l=0;l<u;l++)o+=v.A.subdivideLineCount(t[l],t[(l+1)%u],n);else if(r===i.A.RHUMB)for(l=0;l<u;l++)o+=v.A.subdivideRhumbLineCount(e,t[l],t[(l+1)%u],n);for(c=new Float64Array(3*o*2),l=0;l<u;++l){let o;d[l]=_/3,r===i.A.GEODESIC?o=v.A.subdivideLine(t[l],t[(l+1)%u],n,C):r===i.A.RHUMB&&(o=v.A.subdivideRhumbLine(e,t[l],t[(l+1)%u],n,C));const s=o.length;for(let e=0;e<s;++e)c[_++]=o[e]}}u=c.length/6;const g=d.length,b=2*(2*u+g),x=y.A.createTypedArray(u+g,b);for(_=0,l=0;l<u;++l)x[_++]=l,x[_++]=(l+1)%u,x[_++]=l+u,x[_++]=(l+1)%u+u;for(l=0;l<g;l++){const e=d[l];x[_++]=e,x[_++]=e+u}return new m.A({geometry:new A.A({attributes:new p.A({position:new f.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:c})}),indices:x,primitiveType:w.A.LINES})})}function P(e){if(s.A.typeOf.object("options",e),s.A.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),e.perPositionHeight&&(0,l.A)(e.height))throw new u.A("Cannot use both options.perPositionHeight and options.height");if((0,l.A)(e.arcType)&&e.arcType!==i.A.GEODESIC&&e.arcType!==i.A.RHUMB)throw new u.A("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=(0,c.A)(e.ellipsoid,d.A.WGS84),o=(0,c.A)(e.granularity,b.A.RADIANS_PER_DEGREE),a=(0,c.A)(e.perPositionHeight,!1),h=a&&(0,l.A)(e.extrudedHeight),A=(0,c.A)(e.arcType,i.A.GEODESIC);let f=(0,c.A)(e.height,0),p=(0,c.A)(e.extrudedHeight,f);if(!h){const e=Math.max(f,p);p=Math.min(f,p),f=e}this._ellipsoid=d.A.clone(n),this._granularity=o,this._height=f,this._extrudedHeight=p,this._arcType=A,this._polygonHierarchy=t,this._perPositionHeight=a,this._perPositionHeightExtrude=h,this._offsetAttribute=e.offsetAttribute,this._workerName="createPolygonOutlineGeometry",this.packedLength=v.A.computeHierarchyPackedLength(t,r.A)+d.A.packedLength+8}P.pack=function(e,t,n){return s.A.typeOf.object("value",e),s.A.defined("array",t),n=(0,c.A)(n,0),n=v.A.packPolygonHierarchy(e._polygonHierarchy,t,n,r.A),d.A.pack(e._ellipsoid,t,n),n+=d.A.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._arcType,t[n++]=(0,c.A)(e._offsetAttribute,-1),t[n]=e.packedLength,t};const D=d.A.clone(d.A.UNIT_SPHERE),O={polygonHierarchy:{}};P.unpack=function(e,t,n){s.A.defined("array",e),t=(0,c.A)(t,0);const i=v.A.unpackPolygonHierarchy(e,t,r.A);t=i.startingIndex,delete i.startingIndex;const o=d.A.unpack(e,t,D);t+=d.A.packedLength;const a=e[t++],u=e[t++],h=e[t++],A=1===e[t++],f=1===e[t++],p=e[t++],m=e[t++],_=e[t];return(0,l.A)(n)||(n=new P(O)),n._polygonHierarchy=i,n._ellipsoid=d.A.clone(o,n._ellipsoid),n._height=a,n._extrudedHeight=u,n._granularity=h,n._perPositionHeight=f,n._perPositionHeightExtrude=A,n._arcType=p,n._offsetAttribute=-1===m?void 0:m,n.packedLength=_,n},P.fromPositions=function(e){return e=(0,c.A)(e,c.A.EMPTY_OBJECT),s.A.defined("options.positions",e.positions),new P({polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,arcType:e.arcType,offsetAttribute:e.offsetAttribute})},P.createGeometry=function(e){const t=e._ellipsoid,n=e._granularity,i=e._polygonHierarchy,r=e._perPositionHeight,s=e._arcType,c=v.A.polygonOutlinesFromHierarchy(i,!r,t);if(0===c.length)return;let u;const d=[],h=b.A.chordLength(n,t.maximumRadius),p=e._height,m=e._extrudedHeight;let y,w;if(e._perPositionHeightExtrude||!b.A.equalsEpsilon(p,m,0,b.A.EPSILON2))for(w=0;w<c.length;w++){if(u=I(t,c[w],h,r,s),u.geometry=v.A.scaleToGeodeticHeightExtruded(u.geometry,p,m,t,r),(0,l.A)(e._offsetAttribute)){const t=u.geometry.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===_.A.TOP?n=n.fill(1,0,t/2):(y=e._offsetAttribute===_.A.NONE?0:1,n=n.fill(y)),u.geometry.attributes.applyOffset=new f.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}d.push(u)}else for(w=0;w<c.length;w++){if(u=x(t,c[w],h,r,s),u.geometry.attributes.position.values=T.A.scaleToGeodeticHeight(u.geometry.attributes.position.values,p,t,!r),(0,l.A)(e._offsetAttribute)){const t=u.geometry.attributes.position.values.length;y=e._offsetAttribute===_.A.NONE?0:1;const n=new Uint8Array(t/3).fill(y);u.geometry.attributes.applyOffset=new f.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}d.push(u)}const E=g.A.combineInstances(d)[0],S=o.A.fromVertices(E.attributes.position.values);return new A.A({attributes:E.attributes,indices:E.indices,primitiveType:E.primitiveType,boundingSphere:S,offsetAttribute:e._offsetAttribute})};const L=P},406719:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var i=n(466570),o=n(434067),r=n(267980),s=n(336946),a=n(369031),c=n(571804),l=n(419061),u=n(491446),d=n(610750),h=n(551824),A=n(944479),f=n(305439),p=n(367817),m=n(402330),_=n(666765);const g=new r.A,y=new r.A,b={computeArea2D:function(e){a.A.defined("positions",e),a.A.typeOf.number.greaterThanOrEquals("positions.length",e.length,3);const t=e.length;let n=0;for(let i=t-1,o=0;o<t;i=o++){const t=e[i],r=e[o];n+=t.x*r.y-r.x*t.y}return.5*n},computeWindingOrder2D:function(e){return b.computeArea2D(e)>0?_.A.COUNTER_CLOCKWISE:_.A.CLOCKWISE},triangulate:function(e,t){a.A.defined("positions",e);const n=o.A.packArray(e);return i(n,t,2)}},v=new r.A,T=new r.A,w=new r.A,E=new r.A,S=new r.A,C=new r.A,x=new r.A,I=new o.A,P=new o.A,D=new o.A,O=new o.A;b.computeSubdivision=function(e,t,n,i,s){s=(0,l.A)(s,p.A.RADIANS_PER_DEGREE);const d=(0,u.A)(i);a.A.typeOf.object("ellipsoid",e),a.A.defined("positions",t),a.A.defined("indices",n),a.A.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),a.A.typeOf.number.equals("indices.length % 3","0",n.length%3,0),a.A.typeOf.number.greaterThan("granularity",s,0);const h=n.slice(0);let _;const g=t.length,y=new Array(3*g),b=new Array(2*g);let L=0,N=0;for(_=0;_<g;_++){const e=t[_];if(y[L++]=e.x,y[L++]=e.y,y[L++]=e.z,d){const e=i[_];b[N++]=e.x,b[N++]=e.y}}const M=[],R={},F=e.maximumRadius,B=p.A.chordLength(s,F),U=B*B;for(;h.length>0;){const e=h.pop(),t=h.pop(),n=h.pop(),i=r.A.fromArray(y,3*n,v),s=r.A.fromArray(y,3*t,T),a=r.A.fromArray(y,3*e,w);let c,l,A;d&&(c=o.A.fromArray(b,2*n,I),l=o.A.fromArray(b,2*t,P),A=o.A.fromArray(b,2*e,D));const f=r.A.multiplyByScalar(r.A.normalize(i,E),F,E),p=r.A.multiplyByScalar(r.A.normalize(s,S),F,S),m=r.A.multiplyByScalar(r.A.normalize(a,C),F,C),g=r.A.magnitudeSquared(r.A.subtract(f,p,x)),L=r.A.magnitudeSquared(r.A.subtract(p,m,x)),N=r.A.magnitudeSquared(r.A.subtract(m,f,x)),B=Math.max(g,L,N);let k,V,H;B>U?g===B?(k=`${Math.min(n,t)} ${Math.max(n,t)}`,_=R[k],(0,u.A)(_)||(V=r.A.add(i,s,x),r.A.multiplyByScalar(V,.5,V),y.push(V.x,V.y,V.z),_=y.length/3-1,R[k]=_,d&&(H=o.A.add(c,l,O),o.A.multiplyByScalar(H,.5,H),b.push(H.x,H.y))),h.push(n,_,e),h.push(_,t,e)):L===B?(k=`${Math.min(t,e)} ${Math.max(t,e)}`,_=R[k],(0,u.A)(_)||(V=r.A.add(s,a,x),r.A.multiplyByScalar(V,.5,V),y.push(V.x,V.y,V.z),_=y.length/3-1,R[k]=_,d&&(H=o.A.add(l,A,O),o.A.multiplyByScalar(H,.5,H),b.push(H.x,H.y))),h.push(t,_,n),h.push(_,e,n)):N===B&&(k=`${Math.min(e,n)} ${Math.max(e,n)}`,_=R[k],(0,u.A)(_)||(V=r.A.add(a,i,x),r.A.multiplyByScalar(V,.5,V),y.push(V.x,V.y,V.z),_=y.length/3-1,R[k]=_,d&&(H=o.A.add(A,c,O),o.A.multiplyByScalar(H,.5,H),b.push(H.x,H.y))),h.push(e,_,t),h.push(_,n,t)):(M.push(n),M.push(t),M.push(e))}const k={attributes:{position:new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:y})},indices:M,primitiveType:m.A.TRIANGLES};return d&&(k.attributes.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:b})),new A.A(k)};const L=new s.A,N=new s.A,M=new s.A,R=new s.A;b.computeRhumbLineSubdivision=function(e,t,n,i,s){s=(0,l.A)(s,p.A.RADIANS_PER_DEGREE);const d=(0,u.A)(i);a.A.typeOf.object("ellipsoid",e),a.A.defined("positions",t),a.A.defined("indices",n),a.A.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),a.A.typeOf.number.equals("indices.length % 3","0",n.length%3,0),a.A.typeOf.number.greaterThan("granularity",s,0);const _=n.slice(0);let g;const y=t.length,b=new Array(3*y),E=new Array(2*y);let S=0,C=0;for(g=0;g<y;g++){const e=t[g];if(b[S++]=e.x,b[S++]=e.y,b[S++]=e.z,d){const e=i[g];E[C++]=e.x,E[C++]=e.y}}const F=[],B={},U=e.maximumRadius,k=p.A.chordLength(s,U),V=new h.A(void 0,void 0,e),H=new h.A(void 0,void 0,e),z=new h.A(void 0,void 0,e);for(;_.length>0;){const t=_.pop(),n=_.pop(),i=_.pop(),s=r.A.fromArray(b,3*i,v),a=r.A.fromArray(b,3*n,T),c=r.A.fromArray(b,3*t,w);let l,h,A;d&&(l=o.A.fromArray(E,2*i,I),h=o.A.fromArray(E,2*n,P),A=o.A.fromArray(E,2*t,D));const f=e.cartesianToCartographic(s,L),p=e.cartesianToCartographic(a,N),m=e.cartesianToCartographic(c,M);V.setEndPoints(f,p);const y=V.surfaceDistance;H.setEndPoints(p,m);const S=H.surfaceDistance;z.setEndPoints(m,f);const C=z.surfaceDistance,U=Math.max(y,S,C);let G,j,W,q,Y;U>k?y===U?(G=`${Math.min(i,n)} ${Math.max(i,n)}`,g=B[G],(0,u.A)(g)||(j=V.interpolateUsingFraction(.5,R),W=.5*(f.height+p.height),q=r.A.fromRadians(j.longitude,j.latitude,W,e,x),b.push(q.x,q.y,q.z),g=b.length/3-1,B[G]=g,d&&(Y=o.A.add(l,h,O),o.A.multiplyByScalar(Y,.5,Y),E.push(Y.x,Y.y))),_.push(i,g,t),_.push(g,n,t)):S===U?(G=`${Math.min(n,t)} ${Math.max(n,t)}`,g=B[G],(0,u.A)(g)||(j=H.interpolateUsingFraction(.5,R),W=.5*(p.height+m.height),q=r.A.fromRadians(j.longitude,j.latitude,W,e,x),b.push(q.x,q.y,q.z),g=b.length/3-1,B[G]=g,d&&(Y=o.A.add(h,A,O),o.A.multiplyByScalar(Y,.5,Y),E.push(Y.x,Y.y))),_.push(n,g,i),_.push(g,t,i)):C===U&&(G=`${Math.min(t,i)} ${Math.max(t,i)}`,g=B[G],(0,u.A)(g)||(j=z.interpolateUsingFraction(.5,R),W=.5*(m.height+f.height),q=r.A.fromRadians(j.longitude,j.latitude,W,e,x),b.push(q.x,q.y,q.z),g=b.length/3-1,B[G]=g,d&&(Y=o.A.add(A,l,O),o.A.multiplyByScalar(Y,.5,Y),E.push(Y.x,Y.y))),_.push(t,g,n),_.push(g,i,n)):(F.push(i),F.push(n),F.push(t))}const G={attributes:{position:new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:b})},indices:F,primitiveType:m.A.TRIANGLES};return d&&(G.attributes.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:E})),new A.A(G)},b.scaleToGeodeticHeight=function(e,t,n,i){n=(0,l.A)(n,d.A.WGS84);let o=g,s=y;if(t=(0,l.A)(t,0),i=(0,l.A)(i,!0),(0,u.A)(e)){const a=e.length;for(let c=0;c<a;c+=3)r.A.fromArray(e,c,s),i&&(s=n.scaleToGeodeticSurface(s,s)),0!==t&&(o=n.geodeticSurfaceNormal(s,o),r.A.multiplyByScalar(o,t,o),r.A.add(s,o,s)),e[c]=s.x,e[c+1]=s.y,e[c+2]=s.z}return e};const F=b},977363:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(215327),o=n(263604),r=n(660662),s=n(267980),a=n(41476),c=n(571804),l=n(419061),u=n(491446),d=n(605971),h=n(610750),A=n(944479),f=n(305439),p=n(46362),m=n(597751),_=n(874915),g=n(367817),y=n(870349),b=n(402330),v=n(769534);const T=[];function w(e,t,n,i,o){const r=T;let s;r.length=o;const c=n.red,l=n.green,u=n.blue,d=n.alpha,h=i.red,A=i.green,f=i.blue,p=i.alpha;if(a.A.equals(n,i)){for(s=0;s<o;s++)r[s]=a.A.clone(n);return r}const m=(h-c)/o,_=(A-l)/o,g=(f-u)/o,y=(p-d)/o;for(s=0;s<o;s++)r[s]=new a.A(c+s*m,l+s*_,u+s*g,d+s*y);return r}function E(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).positions,n=e.colors,o=(0,l.A)(e.width,1),r=(0,l.A)(e.colorsPerVertex,!1);if(!(0,u.A)(t)||t.length<2)throw new d.A("At least two positions are required.");if("number"!=typeof o)throw new d.A("width must be a number");if((0,u.A)(n)&&(r&&n.length<t.length||!r&&n.length<t.length-1))throw new d.A("colors has an invalid length.");this._positions=t,this._colors=n,this._width=o,this._colorsPerVertex=r,this._vertexFormat=v.A.clone((0,l.A)(e.vertexFormat,v.A.DEFAULT)),this._arcType=(0,l.A)(e.arcType,i.A.GEODESIC),this._granularity=(0,l.A)(e.granularity,g.A.RADIANS_PER_DEGREE),this._ellipsoid=h.A.clone((0,l.A)(e.ellipsoid,h.A.WGS84)),this._workerName="createPolylineGeometry";let c=1+t.length*s.A.packedLength;c+=(0,u.A)(n)?1+n.length*a.A.packedLength:1,this.packedLength=c+h.A.packedLength+v.A.packedLength+4}E.pack=function(e,t,n){if(!(0,u.A)(e))throw new d.A("value is required");if(!(0,u.A)(t))throw new d.A("array is required");let i;n=(0,l.A)(n,0);const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=s.A.packedLength)s.A.pack(o[i],t,n);const c=e._colors;for(r=(0,u.A)(c)?c.length:0,t[n++]=r,i=0;i<r;++i,n+=a.A.packedLength)a.A.pack(c[i],t,n);return h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,v.A.pack(e._vertexFormat,t,n),n+=v.A.packedLength,t[n++]=e._width,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t};const S=h.A.clone(h.A.UNIT_SPHERE),C=new v.A,x={positions:void 0,colors:void 0,ellipsoid:S,vertexFormat:C,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};E.unpack=function(e,t,n){if(!(0,u.A)(e))throw new d.A("array is required");let i;t=(0,l.A)(t,0);let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=s.A.packedLength)r[i]=s.A.unpack(e,t);o=e[t++];const c=o>0?new Array(o):void 0;for(i=0;i<o;++i,t+=a.A.packedLength)c[i]=a.A.unpack(e,t);const A=h.A.unpack(e,t,S);t+=h.A.packedLength;const f=v.A.unpack(e,t,C);t+=v.A.packedLength;const p=e[t++],m=1===e[t++],_=e[t++],g=e[t];return(0,u.A)(n)?(n._positions=r,n._colors=c,n._ellipsoid=h.A.clone(A,n._ellipsoid),n._vertexFormat=v.A.clone(f,n._vertexFormat),n._width=p,n._colorsPerVertex=m,n._arcType=_,n._granularity=g,n):(x.positions=r,x.colors=c,x.width=p,x.colorsPerVertex=m,x.arcType=_,x.granularity=g,new E(x))};const I=new s.A,P=new s.A,D=new s.A,O=new s.A;E.createGeometry=function(e){const t=e._width,n=e._vertexFormat;let l=e._colors;const d=e._colorsPerVertex,h=e._arcType,v=e._granularity,E=e._ellipsoid;let S,C,x;const L=[];let N=(0,o.A)(e._positions,s.A.equalsEpsilon,!1,L);if((0,u.A)(l)&&L.length>0){let e=0,t=L[0];l=l.filter((function(n,i){let o=!1;return o=d?i===t||0===i&&1===t:i+1===t,!o||(e++,t=L[e],!1)}))}let M=N.length;if(M<2||t<=0)return;if(h===i.A.GEODESIC||h===i.A.RHUMB){let e,t;h===i.A.GEODESIC?(e=g.A.chordLength(v,E.maximumRadius),t=y.A.numberOfPoints):(e=v,t=y.A.numberOfPointsRhumbLine);const n=y.A.extractHeights(N,E);if((0,u.A)(l)){let n=1;for(S=0;S<M-1;++S)n+=t(N[S],N[S+1],e);const i=new Array(n);let o=0;for(S=0;S<M-1;++S){const r=N[S],s=N[S+1],c=l[S],u=t(r,s,e);if(d&&S<n){const e=w(0,0,c,l[S+1],u),t=e.length;for(C=0;C<t;++C)i[o++]=e[C]}else for(C=0;C<u;++C)i[o++]=a.A.clone(c)}i[o]=a.A.clone(l[l.length-1]),l=i,T.length=0}N=h===i.A.GEODESIC?y.A.generateCartesianArc({positions:N,minDistance:e,ellipsoid:E,height:n}):y.A.generateCartesianRhumbArc({positions:N,granularity:e,ellipsoid:E,height:n})}M=N.length;const R=4*M-4,F=new Float64Array(3*R),B=new Float64Array(3*R),U=new Float64Array(3*R),k=new Float32Array(2*R),V=n.st?new Float32Array(2*R):void 0,H=(0,u.A)(l)?new Uint8Array(4*R):void 0;let z,G=0,j=0,W=0,q=0;for(C=0;C<M;++C){let e,i;0===C?(z=I,s.A.subtract(N[0],N[1],z),s.A.add(N[0],z,z)):z=N[C-1],s.A.clone(z,D),s.A.clone(N[C],P),C===M-1?(z=I,s.A.subtract(N[M-1],N[M-2],z),s.A.add(N[M-1],z,z)):z=N[C+1],s.A.clone(z,O),(0,u.A)(H)&&(e=0===C||d?l[C]:l[C-1],C!==M-1&&(i=l[C]));const o=C===M-1?2:4;for(x=0===C?2:0;x<o;++x){s.A.pack(P,F,G),s.A.pack(D,B,G),s.A.pack(O,U,G),G+=3;const o=x-2<0?-1:1;if(k[j++]=x%2*2-1,k[j++]=o*t,n.st&&(V[W++]=C/(M-1),V[W++]=Math.max(k[j-2],0)),(0,u.A)(H)){const t=x<2?e:i;H[q++]=a.A.floatToByte(t.red),H[q++]=a.A.floatToByte(t.green),H[q++]=a.A.floatToByte(t.blue),H[q++]=a.A.floatToByte(t.alpha)}}}const Y=new p.A;Y.position=new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:F}),Y.prevPosition=new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:B}),Y.nextPosition=new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:U}),Y.expandAndWidth=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:k}),n.st&&(Y.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:V})),(0,u.A)(H)&&(Y.color=new f.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:4,values:H,normalize:!0}));const X=_.A.createTypedArray(R,6*M-6);let J=0,Q=0;const $=M-1;for(C=0;C<$;++C)X[Q++]=J,X[Q++]=J+2,X[Q++]=J+1,X[Q++]=J+1,X[Q++]=J+2,X[Q++]=J+3,J+=4;return new A.A({attributes:Y,indices:X,primitiveType:b.A.TRIANGLES,boundingSphere:r.A.fromPoints(N),geometryType:m.A.POLYLINES})};const L=E},870349:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(267980),o=n(336946),r=n(419061),s=n(491446),a=n(605971),c=n(610750),l=n(602289),u=n(551824),d=n(150429),h=n(367817),A=n(584164),f=n(257941);const p={numberOfPoints:function(e,t,n){const o=i.A.distance(e,t);return Math.ceil(o/n)},numberOfPointsRhumbLine:function(e,t,n){const i=Math.pow(e.longitude-t.longitude,2)+Math.pow(e.latitude-t.latitude,2);return Math.max(1,Math.ceil(Math.sqrt(i/(n*n))))}},m=new o.A;p.extractHeights=function(e,t){const n=e.length,i=new Array(n);for(let o=0;o<n;o++){const n=e[o];i[o]=t.cartesianToCartographic(n,m).height}return i};const _=new A.A,g=new i.A,y=new i.A,b=new f.A(i.A.UNIT_X,0),v=new i.A,T=new f.A(i.A.UNIT_X,0),w=new i.A,E=new i.A,S=[];function C(e,t,n){const i=S;let o;if(i.length=e,t===n){for(o=0;o<e;o++)i[o]=t;return i}const r=(n-t)/e;for(o=0;o<e;o++){const e=t+o*r;i[o]=e}return i}const x=new o.A,I=new o.A,P=new i.A,D=new i.A,O=new i.A,L=new l.A;let N=new u.A;function M(e,t,n,o,r,s,a,c){const l=o.scaleToGeodeticSurface(e,D),u=o.scaleToGeodeticSurface(t,O),d=p.numberOfPoints(e,t,n),h=o.cartesianToCartographic(l,x),A=o.cartesianToCartographic(u,I),f=C(d,r,s);L.setEndPoints(h,A);const m=L.surfaceDistance/d;let _=c;h.height=r;let g=o.cartographicToCartesian(h,P);i.A.pack(g,a,_),_+=3;for(let e=1;e<d;e++){const t=L.interpolateUsingSurfaceDistance(e*m,I);t.height=f[e],g=o.cartographicToCartesian(t,P),i.A.pack(g,a,_),_+=3}return _}function R(e,t,n,o,r,s,a,c){const l=o.cartesianToCartographic(e,x),d=o.cartesianToCartographic(t,I),h=p.numberOfPointsRhumbLine(l,d,n);l.height=0,d.height=0;const A=C(h,r,s);N.ellipsoid.equals(o)||(N=new u.A(void 0,void 0,o)),N.setEndPoints(l,d);const f=N.surfaceDistance/h;let m=c;l.height=r;let _=o.cartographicToCartesian(l,P);i.A.pack(_,a,m),m+=3;for(let e=1;e<h;e++){const t=N.interpolateUsingSurfaceDistance(e*f,I);t.height=A[e],_=o.cartographicToCartesian(t,P),i.A.pack(_,a,m),m+=3}return m}p.wrapLongitude=function(e,t){const n=[],o=[];if((0,s.A)(e)&&e.length>0){t=(0,r.A)(t,A.A.IDENTITY);const a=A.A.inverseTransformation(t,_),c=A.A.multiplyByPoint(a,i.A.ZERO,g),l=i.A.normalize(A.A.multiplyByPointAsVector(a,i.A.UNIT_Y,y),y),u=f.A.fromPointNormal(c,l,b),h=i.A.normalize(A.A.multiplyByPointAsVector(a,i.A.UNIT_X,v),v),p=f.A.fromPointNormal(c,h,T);let m=1;n.push(i.A.clone(e[0]));let S=n[0];const C=e.length;for(let t=1;t<C;++t){const r=e[t];if(f.A.getPointDistance(p,S)<0||f.A.getPointDistance(p,r)<0){const e=d.A.lineSegmentPlane(S,r,u,w);if((0,s.A)(e)){const t=i.A.multiplyByScalar(l,5e-9,E);f.A.getPointDistance(u,S)<0&&i.A.negate(t,t),n.push(i.A.add(e,t,new i.A)),o.push(m+1),i.A.negate(t,t),n.push(i.A.add(e,t,new i.A)),m=1}}n.push(i.A.clone(e[t])),m++,S=r}o.push(m)}return{positions:n,lengths:o}},p.generateArc=function(e){(0,s.A)(e)||(e={});const t=e.positions;if(!(0,s.A)(t))throw new a.A("options.positions is required.");const n=t.length,o=(0,r.A)(e.ellipsoid,c.A.WGS84);let l=(0,r.A)(e.height,0);const u=Array.isArray(l);if(n<1)return[];if(1===n){const e=o.scaleToGeodeticSurface(t[0],D);if(l=u?l[0]:l,0!==l){const t=o.geodeticSurfaceNormal(e,P);i.A.multiplyByScalar(t,l,t),i.A.add(e,t,e)}return[e.x,e.y,e.z]}let d=e.minDistance;if(!(0,s.A)(d)){const t=(0,r.A)(e.granularity,h.A.RADIANS_PER_DEGREE);d=h.A.chordLength(t,o.maximumRadius)}let A,f=0;for(A=0;A<n-1;A++)f+=p.numberOfPoints(t[A],t[A+1],d);const m=3*(f+1),_=new Array(m);let g=0;for(A=0;A<n-1;A++)g=M(t[A],t[A+1],d,o,u?l[A]:l,u?l[A+1]:l,_,g);S.length=0;const y=t[n-1],b=o.cartesianToCartographic(y,x);b.height=u?l[n-1]:l;const v=o.cartographicToCartesian(b,P);return i.A.pack(v,_,m-3),_};const F=new o.A,B=new o.A;p.generateRhumbArc=function(e){(0,s.A)(e)||(e={});const t=e.positions;if(!(0,s.A)(t))throw new a.A("options.positions is required.");const n=t.length,l=(0,r.A)(e.ellipsoid,c.A.WGS84);let u=(0,r.A)(e.height,0);const d=Array.isArray(u);if(n<1)return[];if(1===n){const e=l.scaleToGeodeticSurface(t[0],D);if(u=d?u[0]:u,0!==u){const t=l.geodeticSurfaceNormal(e,P);i.A.multiplyByScalar(t,u,t),i.A.add(e,t,e)}return[e.x,e.y,e.z]}const A=(0,r.A)(e.granularity,h.A.RADIANS_PER_DEGREE);let f,m,_=0,g=l.cartesianToCartographic(t[0],F);for(f=0;f<n-1;f++)m=l.cartesianToCartographic(t[f+1],B),_+=p.numberOfPointsRhumbLine(g,m,A),g=o.A.clone(m,F);const y=3*(_+1),b=new Array(y);let v=0;for(f=0;f<n-1;f++)v=R(t[f],t[f+1],A,l,d?u[f]:u,d?u[f+1]:u,b,v);S.length=0;const T=t[n-1],w=l.cartesianToCartographic(T,x);w.height=d?u[n-1]:u;const E=l.cartographicToCartesian(w,P);return i.A.pack(E,b,y-3),b},p.generateCartesianArc=function(e){const t=p.generateArc(e),n=t.length/3,o=new Array(n);for(let e=0;e<n;e++)o[e]=i.A.unpack(t,3*e);return o},p.generateCartesianRhumbArc=function(e){const t=p.generateRhumbArc(e),n=t.length/3,o=new Array(n);for(let e=0;e<n;e++)o[e]=i.A.unpack(t,3*e);return o};const U=p},828021:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(263604),o=n(647934),r=n(660662),s=n(434067),a=n(267980),c=n(571804),l=n(297038),u=n(419061),d=n(491446),h=n(605971),A=n(610750),f=n(944479),p=n(305439),m=n(46362),_=n(34233),g=n(874915),y=n(367817),b=n(983884),v=n(406719),T=n(748918),w=n(402330),E=n(769534),S=n(666765);function C(e){const t=(e=(0,u.A)(e,u.A.EMPTY_OBJECT)).polylinePositions,n=e.shapePositions;if(!(0,d.A)(t))throw new h.A("options.polylinePositions is required.");if(!(0,d.A)(n))throw new h.A("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=A.A.clone((0,u.A)(e.ellipsoid,A.A.WGS84)),this._cornerType=(0,u.A)(e.cornerType,l.A.ROUNDED),this._vertexFormat=E.A.clone((0,u.A)(e.vertexFormat,E.A.DEFAULT)),this._granularity=(0,u.A)(e.granularity,y.A.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry";let i=1+t.length*a.A.packedLength;i+=1+n.length*s.A.packedLength,this.packedLength=i+A.A.packedLength+E.A.packedLength+2}C.pack=function(e,t,n){if(!(0,d.A)(e))throw new h.A("value is required");if(!(0,d.A)(t))throw new h.A("array is required");let i;n=(0,u.A)(n,0);const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=a.A.packedLength)a.A.pack(o[i],t,n);const c=e._shape;for(r=c.length,t[n++]=r,i=0;i<r;++i,n+=s.A.packedLength)s.A.pack(c[i],t,n);return A.A.pack(e._ellipsoid,t,n),n+=A.A.packedLength,E.A.pack(e._vertexFormat,t,n),n+=E.A.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const x=A.A.clone(A.A.UNIT_SPHERE),I=new E.A,P={polylinePositions:void 0,shapePositions:void 0,ellipsoid:x,vertexFormat:I,cornerType:void 0,granularity:void 0};C.unpack=function(e,t,n){if(!(0,d.A)(e))throw new h.A("array is required");let i;t=(0,u.A)(t,0);let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=a.A.packedLength)r[i]=a.A.unpack(e,t);o=e[t++];const c=new Array(o);for(i=0;i<o;++i,t+=s.A.packedLength)c[i]=s.A.unpack(e,t);const l=A.A.unpack(e,t,x);t+=A.A.packedLength;const f=E.A.unpack(e,t,I);t+=E.A.packedLength;const p=e[t++],m=e[t];return(0,d.A)(n)?(n._positions=r,n._shape=c,n._ellipsoid=A.A.clone(l,n._ellipsoid),n._vertexFormat=E.A.clone(f,n._vertexFormat),n._cornerType=p,n._granularity=m,n):(P.polylinePositions=r,P.shapePositions=c,P.cornerType=p,P.granularity=m,new C(P))};const D=new o.A;C.createGeometry=function(e){const t=e._positions,n=(0,i.A)(t,a.A.equalsEpsilon);let s=e._shape;if(s=T.A.removeDuplicatesFromShape(s),n.length<2||s.length<3)return;v.A.computeWindingOrder2D(s)===S.A.CLOCKWISE&&s.reverse();const l=o.A.fromPoints(s,D);return function(e,t,n,i){const o=new m.A;i.position&&(o.position=new p.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:e}));const s=t.length,a=e.length/3,l=(a-2*s)/(2*s),u=v.A.triangulate(t),d=(l-1)*s*6+2*u.length,h=g.A.createTypedArray(a,d);let A,y,T,E,S,C;const x=2*s;let I=0;for(A=0;A<l-1;A++){for(y=0;y<s-1;y++)T=2*y+A*s*2,C=T+x,E=T+1,S=E+x,h[I++]=E,h[I++]=T,h[I++]=S,h[I++]=S,h[I++]=T,h[I++]=C;T=2*s-2+A*s*2,E=T+1,S=E+x,C=T+x,h[I++]=E,h[I++]=T,h[I++]=S,h[I++]=S,h[I++]=T,h[I++]=C}if(i.st||i.tangent||i.bitangent){const e=new Float32Array(2*a),i=1/(l-1),r=1/n.height,u=n.height/2;let d,h,f=0;for(A=0;A<l;A++){for(d=A*i,h=r*(t[0].y+u),e[f++]=d,e[f++]=h,y=1;y<s;y++)h=r*(t[y].y+u),e[f++]=d,e[f++]=h,e[f++]=d,e[f++]=h;h=r*(t[0].y+u),e[f++]=d,e[f++]=h}for(y=0;y<s;y++)d=0,h=r*(t[y].y+u),e[f++]=d,e[f++]=h;for(y=0;y<s;y++)d=(l-1)*i,h=r*(t[y].y+u),e[f++]=d,e[f++]=h;o.st=new p.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:new Float32Array(e)})}const P=a-2*s;for(A=0;A<u.length;A+=3){const e=u[A]+P,t=u[A+1]+P,n=u[A+2]+P;h[I++]=e,h[I++]=t,h[I++]=n,h[I++]=n+s,h[I++]=t+s,h[I++]=e+s}let D=new f.A({attributes:o,indices:h,boundingSphere:r.A.fromVertices(e),primitiveType:w.A.TRIANGLES});if(i.normal&&(D=_.A.computeNormal(D)),i.tangent||i.bitangent){try{D=_.A.computeTangentAndBitangent(D)}catch(e){(0,b.A)("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}i.tangent||(D.attributes.tangent=void 0),i.bitangent||(D.attributes.bitangent=void 0),i.st||(D.attributes.st=void 0)}return D}(T.A.computePositions(n,s,l,e,!0),s,l,e._vertexFormat)};const O=C},748918:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});var i=n(434067),o=n(267980),r=n(626809),s=n(336946),a=n(297038),c=n(658091),l=n(367817),u=n(331185),d=n(584164),h=n(870349),A=n(99479),f=n(543622),p=n(983884);const m=[new o.A,new o.A],_=new o.A,g=new o.A,y=new o.A,b=new o.A,v=new o.A,T=new o.A,w=new o.A,E=new o.A,S=new o.A,C=new o.A,x=new o.A,I={};let P=new s.A;function D(e,t,n,i){const r=e[0],s=e[1],a=o.A.angleBetween(r,s),c=Math.ceil(a/i),l=new Array(c);let u;if(t===n){for(u=0;u<c;u++)l[u]=t;return l.push(n),l}const d=(n-t)/c;for(u=1;u<c;u++){const e=t+u*d;l[u]=e}return l[0]=t,l.push(n),l}const O=new o.A,L=new o.A,N=new o.A(-1,0,0);let M=new d.A;const R=new d.A;let F=new u.A;const B=u.A.IDENTITY.clone(),U=new o.A,k=new r.A,V=new o.A;function H(e,t,n,r,s,a,l,h){let A=U,p=k;M=f.A.eastNorthUpToFixedFrame(e,s,M),A=d.A.multiplyByPointAsVector(M,N,A),A=o.A.normalize(A,A);const m=function(e,t,n,r){const s=new c.A(n,r),a=s.projectPointOntoPlane(o.A.add(n,e,O),O),l=s.projectPointOntoPlane(o.A.add(n,t,L),L),u=i.A.angleBetween(a,l);return l.x*a.y-l.y*a.x>=0?-u:u}(A,t,e,s);F=u.A.fromRotationZ(m,F),V.z=a,M=d.A.multiplyTransformation(M,d.A.fromRotationTranslation(F,V,R),M);const _=B;_[0]=l;for(let e=0;e<h;e++)for(let e=0;e<n.length;e+=3)p=o.A.fromArray(n,e,p),p=u.A.multiplyByVector(_,p,p),p=d.A.multiplyByPoint(M,p,p),r.push(p.x,p.y,p.z);return r}const z=new o.A;function G(e,t,n,i,r,s,a){for(let c=0;c<e.length;c+=3)i=H(o.A.fromArray(e,c,z),t,n,i,r,s[c/3],a,1);return i}function j(e,t){const n=e.length,i=new Array(3*n);let o=0;const r=t.x+t.width/2,s=t.y+t.height/2;for(let t=0;t<n;t++)i[o++]=e[t].x-r,i[o++]=0,i[o++]=e[t].y-s;return i}const W=new A.A,q=new o.A,Y=new u.A;function X(e,t,n,i,r,s,c,d,h,f){const p=o.A.angleBetween(o.A.subtract(t,e,C),o.A.subtract(n,e,x)),m=i===a.A.BEVELED?0:Math.ceil(p/l.A.toRadians(5));let _,g,y;if(_=r?u.A.fromQuaternion(A.A.fromAxisAngle(o.A.negate(e,C),p/(m+1),W),Y):u.A.fromQuaternion(A.A.fromAxisAngle(e,p/(m+1),W),Y),t=o.A.clone(t,q),m>0){const n=f?2:1;for(let i=0;i<m;i++)t=u.A.multiplyByVector(_,t,t),g=o.A.subtract(t,e,C),g=o.A.normalize(g,g),r||(g=o.A.negate(g,g)),y=s.scaleToGeodeticSurface(t,x),c=H(y,g,d,c,s,h,1,n)}else g=o.A.subtract(t,e,C),g=o.A.normalize(g,g),r||(g=o.A.negate(g,g)),y=s.scaleToGeodeticSurface(t,x),c=H(y,g,d,c,s,h,1,1),n=o.A.clone(n,q),g=o.A.subtract(n,e,C),g=o.A.normalize(g,g),r||(g=o.A.negate(g,g)),y=s.scaleToGeodeticSurface(n,x),c=H(y,g,d,c,s,h,1,1);return c}I.removeDuplicatesFromShape=function(e){const t=e.length,n=[];for(let o=t-1,r=0;r<t;o=r++){const t=e[o],s=e[r];i.A.equals(t,s)||n.push(s)}return n},I.angleIsGreaterThanPi=function(e,t,n,i){const r=new c.A(n,i),s=r.projectPointOntoPlane(o.A.add(n,e,O),O),a=r.projectPointOntoPlane(o.A.add(n,t,L),L);return a.x*s.y-a.y*s.x>=0};const J=new o.A,Q=new o.A;I.computePositions=function(e,t,n,i,r){const s=i._ellipsoid,c=function(e,t){const n=new Array(e.length);for(let i=0;i<e.length;i++){const o=e[i];P=t.cartesianToCartographic(o,P),n[i]=P.height,e[i]=t.scaleToGeodeticSurface(o,o)}return n}(e,s),u=i._granularity,d=i._cornerType,A=r?function(e,t){const n=e.length,i=new Array(6*n);let o=0;const r=t.x+t.width/2,s=t.y+t.height/2;let a=e[0];i[o++]=a.x-r,i[o++]=0,i[o++]=a.y-s;for(let t=1;t<n;t++){a=e[t];const n=a.x-r,c=a.y-s;i[o++]=n,i[o++]=0,i[o++]=c,i[o++]=n,i[o++]=0,i[o++]=c}return a=e[0],i[o++]=a.x-r,i[o++]=0,i[o++]=a.y-s,i}(t,n):j(t,n),f=r?j(t,n):void 0,x=n.height/2,O=n.width/2;let L=e.length,N=[],M=r?[]:void 0,R=_,F=g,B=y,U=b,k=v,V=T,z=w,W=E,q=S,Y=e[0],$=e[1];U=s.geodeticSurfaceNormal(Y,U),R=o.A.subtract($,Y,R),R=o.A.normalize(R,R),W=o.A.cross(U,R,W),W=o.A.normalize(W,W);let K,Z,ee=c[0],te=c[1];r&&(M=H(Y,W,f,M,s,ee+x,1,1)),q=o.A.clone(Y,q),Y=$,F=o.A.negate(R,F);for(let t=1;t<L-1;t++){const n=r?2:1;if($=e[t+1],Y.equals($)){(0,p.A)("Positions are too close and are considered equivalent with rounding error.");continue}R=o.A.subtract($,Y,R),R=o.A.normalize(R,R),B=o.A.add(R,F,B),B=o.A.normalize(B,B),U=s.geodeticSurfaceNormal(Y,U);const i=o.A.multiplyByScalar(U,o.A.dot(R,U),J);o.A.subtract(R,i,i),o.A.normalize(i,i);const f=o.A.multiplyByScalar(U,o.A.dot(F,U),Q);if(o.A.subtract(F,f,f),o.A.normalize(f,f),l.A.equalsEpsilon(Math.abs(o.A.dot(i,f)),1,l.A.EPSILON7))N=H(q,W,A,N,s,ee+x,1,1),q=Y;else{B=o.A.cross(B,U,B),B=o.A.cross(U,B,B),B=o.A.normalize(B,B);const e=1/Math.max(.25,o.A.magnitude(o.A.cross(B,F,C))),t=I.angleIsGreaterThanPi(R,F,Y,s);t?(k=o.A.add(Y,o.A.multiplyByScalar(B,e*O,B),k),V=o.A.add(k,o.A.multiplyByScalar(W,O,V),V),m[0]=o.A.clone(q,m[0]),m[1]=o.A.clone(V,m[1]),K=D(m,ee+x,te+x,u),Z=h.A.generateArc({positions:m,granularity:u,ellipsoid:s}),N=G(Z,W,A,N,s,K,1),W=o.A.cross(U,R,W),W=o.A.normalize(W,W),z=o.A.add(k,o.A.multiplyByScalar(W,O,z),z),d===a.A.ROUNDED||d===a.A.BEVELED?X(k,V,z,d,t,s,N,A,te+x,r):(B=o.A.negate(B,B),N=H(Y,B,A,N,s,te+x,e,n)),q=o.A.clone(z,q)):(k=o.A.add(Y,o.A.multiplyByScalar(B,e*O,B),k),V=o.A.add(k,o.A.multiplyByScalar(W,-O,V),V),m[0]=o.A.clone(q,m[0]),m[1]=o.A.clone(V,m[1]),K=D(m,ee+x,te+x,u),Z=h.A.generateArc({positions:m,granularity:u,ellipsoid:s}),N=G(Z,W,A,N,s,K,1),W=o.A.cross(U,R,W),W=o.A.normalize(W,W),z=o.A.add(k,o.A.multiplyByScalar(W,-O,z),z),d===a.A.ROUNDED||d===a.A.BEVELED?X(k,V,z,d,t,s,N,A,te+x,r):N=H(Y,B,A,N,s,te+x,e,n),q=o.A.clone(z,q)),F=o.A.negate(R,F)}ee=te,te=c[t+1],Y=$}m[0]=o.A.clone(q,m[0]),m[1]=o.A.clone(Y,m[1]),K=D(m,ee+x,te+x,u),Z=h.A.generateArc({positions:m,granularity:u,ellipsoid:s}),N=G(Z,W,A,N,s,K,1),r&&(M=H(Y,W,f,M,s,te+x,1,1)),L=N.length;const ne=r?L+M.length:L,ie=new Float64Array(ne);return ie.set(N),r&&ie.set(M,L),ie};const $=I},365943:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(263604),o=n(647934),r=n(660662),s=n(434067),a=n(267980),c=n(571804),l=n(297038),u=n(419061),d=n(491446),h=n(605971),A=n(610750),f=n(944479),p=n(305439),m=n(46362),_=n(874915),g=n(367817),y=n(406719),b=n(748918),v=n(402330),T=n(666765);function w(e){const t=(e=(0,u.A)(e,u.A.EMPTY_OBJECT)).polylinePositions,n=e.shapePositions;if(!(0,d.A)(t))throw new h.A("options.polylinePositions is required.");if(!(0,d.A)(n))throw new h.A("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=A.A.clone((0,u.A)(e.ellipsoid,A.A.WGS84)),this._cornerType=(0,u.A)(e.cornerType,l.A.ROUNDED),this._granularity=(0,u.A)(e.granularity,g.A.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";let i=1+t.length*a.A.packedLength;i+=1+n.length*s.A.packedLength,this.packedLength=i+A.A.packedLength+2}w.pack=function(e,t,n){if(!(0,d.A)(e))throw new h.A("value is required");if(!(0,d.A)(t))throw new h.A("array is required");let i;n=(0,u.A)(n,0);const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=a.A.packedLength)a.A.pack(o[i],t,n);const c=e._shape;for(r=c.length,t[n++]=r,i=0;i<r;++i,n+=s.A.packedLength)s.A.pack(c[i],t,n);return A.A.pack(e._ellipsoid,t,n),n+=A.A.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const E=A.A.clone(A.A.UNIT_SPHERE),S={polylinePositions:void 0,shapePositions:void 0,ellipsoid:E,height:void 0,cornerType:void 0,granularity:void 0};w.unpack=function(e,t,n){if(!(0,d.A)(e))throw new h.A("array is required");let i;t=(0,u.A)(t,0);let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=a.A.packedLength)r[i]=a.A.unpack(e,t);o=e[t++];const c=new Array(o);for(i=0;i<o;++i,t+=s.A.packedLength)c[i]=s.A.unpack(e,t);const l=A.A.unpack(e,t,E);t+=A.A.packedLength;const f=e[t++],p=e[t];return(0,d.A)(n)?(n._positions=r,n._shape=c,n._ellipsoid=A.A.clone(l,n._ellipsoid),n._cornerType=f,n._granularity=p,n):(S.polylinePositions=r,S.shapePositions=c,S.cornerType=f,S.granularity=p,new w(S))};const C=new o.A;w.createGeometry=function(e){const t=e._positions,n=(0,i.A)(t,a.A.equalsEpsilon);let s=e._shape;if(s=b.A.removeDuplicatesFromShape(s),n.length<2||s.length<3)return;y.A.computeWindingOrder2D(s)===T.A.CLOCKWISE&&s.reverse();const l=o.A.fromPoints(s,C);return function(e,t){const n=new m.A;n.position=new p.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:e});const i=t.length,o=n.position.values.length/3,s=e.length/3/i,a=_.A.createTypedArray(o,2*i*(s+1));let l,u,d=0;l=0;let h=l*i;for(u=0;u<i-1;u++)a[d++]=u+h,a[d++]=u+h+1;for(a[d++]=i-1+h,a[d++]=h,l=s-1,h=l*i,u=0;u<i-1;u++)a[d++]=u+h,a[d++]=u+h+1;for(a[d++]=i-1+h,a[d++]=h,l=0;l<s-1;l++){const e=i*l,t=e+i;for(u=0;u<i;u++)a[d++]=u+e,a[d++]=u+t}return new f.A({attributes:n,indices:_.A.createTypedArray(o,a),boundingSphere:r.A.fromVertices(e),primitiveType:v.A.LINES})}(b.A.computePositions(n,s,l,e,!1),s)};const x=w},589670:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(660662),o=n(434067),r=n(267980),s=n(369031),a=n(419061),c=n(491446),l=n(605971),u=n(874915),d=n(587451),h=n(367817),A=n(832698),f=n(971724),p=n(42794),m=n(371267),_=n(255335);function g(e){if(!(0,c.A)(e)||!(0,c.A)(e.quantizedVertices))throw new l.A("options.quantizedVertices is required.");if(!(0,c.A)(e.indices))throw new l.A("options.indices is required.");if(!(0,c.A)(e.minimumHeight))throw new l.A("options.minimumHeight is required.");if(!(0,c.A)(e.maximumHeight))throw new l.A("options.maximumHeight is required.");if(!(0,c.A)(e.maximumHeight))throw new l.A("options.maximumHeight is required.");if(!(0,c.A)(e.boundingSphere))throw new l.A("options.boundingSphere is required.");if(!(0,c.A)(e.horizonOcclusionPoint))throw new l.A("options.horizonOcclusionPoint is required.");if(!(0,c.A)(e.westIndices))throw new l.A("options.westIndices is required.");if(!(0,c.A)(e.southIndices))throw new l.A("options.southIndices is required.");if(!(0,c.A)(e.eastIndices))throw new l.A("options.eastIndices is required.");if(!(0,c.A)(e.northIndices))throw new l.A("options.northIndices is required.");if(!(0,c.A)(e.westSkirtHeight))throw new l.A("options.westSkirtHeight is required.");if(!(0,c.A)(e.southSkirtHeight))throw new l.A("options.southSkirtHeight is required.");if(!(0,c.A)(e.eastSkirtHeight))throw new l.A("options.eastSkirtHeight is required.");if(!(0,c.A)(e.northSkirtHeight))throw new l.A("options.northSkirtHeight is required.");this._quantizedVertices=e.quantizedVertices,this._encodedNormals=e.encodedNormals,this._indices=e.indices,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._boundingSphere=e.boundingSphere,this._orientedBoundingBox=e.orientedBoundingBox,this._horizonOcclusionPoint=e.horizonOcclusionPoint,this._credits=e.credits;const t=this._quantizedVertices.length/3,n=this._uValues=this._quantizedVertices.subarray(0,t),i=this._vValues=this._quantizedVertices.subarray(t,2*t);function o(e,t){return i[e]-i[t]}function r(e,t){return n[e]-n[t]}this._heightValues=this._quantizedVertices.subarray(2*t,3*t),this._westIndices=b(e.westIndices,o,t),this._southIndices=b(e.southIndices,r,t),this._eastIndices=b(e.eastIndices,o,t),this._northIndices=b(e.northIndices,r,t),this._westSkirtHeight=e.westSkirtHeight,this._southSkirtHeight=e.southSkirtHeight,this._eastSkirtHeight=e.eastSkirtHeight,this._northSkirtHeight=e.northSkirtHeight,this._childTileMask=(0,a.A)(e.childTileMask,15),this._createdByUpsampling=(0,a.A)(e.createdByUpsampling,!1),this._waterMask=e.waterMask,this._mesh=void 0}Object.defineProperties(g.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}},canUpsample:{get:function(){return(0,c.A)(this._mesh)}}});const y=[];function b(e,t,n){y.length=e.length;let i=!1;for(let n=0,o=e.length;n<o;++n)y[n]=e[n],i=i||n>0&&t(e[n-1],e[n])>0;return i?(y.sort(t),u.A.createTypedArray(n,y)):e}const v="createVerticesFromQuantizedTerrainMesh",T=new f.A(v),w=new f.A(v,p.A.maximumAsynchronousTasks);g.prototype.createMesh=function(e){e=(0,a.A)(e,a.A.EMPTY_OBJECT),s.A.typeOf.object("options.tilingScheme",e.tilingScheme),s.A.typeOf.number("options.x",e.x),s.A.typeOf.number("options.y",e.y),s.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,i=e.y,o=e.level,l=(0,a.A)(e.exaggeration,1),d=(0,a.A)(e.exaggerationRelativeHeight,0),h=(0,a.A)(e.throttle,!0),A=t.ellipsoid,f=t.tileXYToRectangle(n,i,o),p=(h?w:T).scheduleTask({minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,quantizedVertices:this._quantizedVertices,octEncodedNormals:this._encodedNormals,includeWebMercatorT:!0,indices:this._indices,westIndices:this._westIndices,southIndices:this._southIndices,eastIndices:this._eastIndices,northIndices:this._northIndices,westSkirtHeight:this._westSkirtHeight,southSkirtHeight:this._southSkirtHeight,eastSkirtHeight:this._eastSkirtHeight,northSkirtHeight:this._northSkirtHeight,rectangle:f,relativeToCenter:this._boundingSphere.center,ellipsoid:A,exaggeration:l,exaggerationRelativeHeight:d});if(!(0,c.A)(p))return;const g=this;return Promise.resolve(p).then((function(e){const t=g._quantizedVertices.length/3,n=t+g._westIndices.length+g._southIndices.length+g._eastIndices.length+g._northIndices.length,i=u.A.createTypedArray(n,e.indices),o=new Float32Array(e.vertices),s=e.center,c=e.minimumHeight,l=e.maximumHeight,d=g._boundingSphere,h=g._orientedBoundingBox,A=(0,a.A)(r.A.clone(e.occludeePointInScaledSpace),g._horizonOcclusionPoint),f=e.vertexStride,p=m.A.clone(e.encoding);return g._mesh=new _.A(s,o,i,e.indexCountWithoutSkirts,t,c,l,d,A,f,h,p,e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),g._quantizedVertices=void 0,g._encodedNormals=void 0,g._indices=void 0,g._uValues=void 0,g._vValues=void 0,g._heightValues=void 0,g._westIndices=void 0,g._southIndices=void 0,g._eastIndices=void 0,g._northIndices=void 0,g._mesh}))};const E=new f.A("upsampleQuantizedTerrainMesh",p.A.maximumAsynchronousTasks);g.prototype.upsample=function(e,t,n,o,s,a,d){if(!(0,c.A)(e))throw new l.A("tilingScheme is required.");if(!(0,c.A)(t))throw new l.A("thisX is required.");if(!(0,c.A)(n))throw new l.A("thisY is required.");if(!(0,c.A)(o))throw new l.A("thisLevel is required.");if(!(0,c.A)(s))throw new l.A("descendantX is required.");if(!(0,c.A)(a))throw new l.A("descendantY is required.");if(!(0,c.A)(d))throw new l.A("descendantLevel is required.");if(d-o>1)throw new l.A("Upsampling through more than one level at a time is not currently supported.");const h=this._mesh;if(!(0,c.A)(this._mesh))return;const f=2*t!==s,p=2*n===a,m=e.ellipsoid,_=e.tileXYToRectangle(s,a,d),y=E.scheduleTask({vertices:h.vertices,vertexCountWithoutSkirts:h.vertexCountWithoutSkirts,indices:h.indices,indexCountWithoutSkirts:h.indexCountWithoutSkirts,encoding:h.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:f,isNorthChild:p,childRectangle:_,ellipsoid:m});if(!(0,c.A)(y))return;let b=Math.min(this._westSkirtHeight,this._eastSkirtHeight);b=Math.min(b,this._southSkirtHeight),b=Math.min(b,this._northSkirtHeight);const v=f?.5*b:this._westSkirtHeight,T=p?.5*b:this._southSkirtHeight,w=f?this._eastSkirtHeight:.5*b,S=p?this._northSkirtHeight:.5*b,C=this._credits;return Promise.resolve(y).then((function(e){const t=new Uint16Array(e.vertices),n=u.A.createTypedArray(t.length/3,e.indices);let o;return(0,c.A)(e.encodedNormals)&&(o=new Uint8Array(e.encodedNormals)),new g({quantizedVertices:t,indices:n,encodedNormals:o,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:i.A.clone(e.boundingSphere),orientedBoundingBox:A.A.clone(e.orientedBoundingBox),horizonOcclusionPoint:r.A.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:v,southSkirtHeight:T,eastSkirtHeight:w,northSkirtHeight:S,childTileMask:0,credits:C,createdByUpsampling:!0})}))};const S=32767,C=new r.A;function x(e,t,n,i,o,r,s,a){const c=Math.min(n,o,s),l=Math.max(n,o,s),u=Math.min(i,r,a),d=Math.max(i,r,a);return e>=c&&e<=l&&t>=u&&t<=d}g.prototype.interpolateHeight=function(e,t,n){let i=h.A.clamp((t-e.west)/e.width,0,1);i*=S;let o=h.A.clamp((n-e.south)/e.height,0,1);return o*=S,(0,c.A)(this._mesh)?function(e,t,n){const i=e._mesh,o=i.vertices,r=i.encoding,s=i.indices;for(let e=0,i=s.length;e<i;e+=3){const i=s[e],a=s[e+1],c=s[e+2],l=r.decodeTextureCoordinates(o,i,I),u=r.decodeTextureCoordinates(o,a,P),h=r.decodeTextureCoordinates(o,c,D);if(x(t,n,l.x,l.y,u.x,u.y,h.x,h.y)){const e=d.A.computeBarycentricCoordinates(t,n,l.x,l.y,u.x,u.y,h.x,h.y,C);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const t=r.decodeHeight(o,i),n=r.decodeHeight(o,a),s=r.decodeHeight(o,c);return e.x*t+e.y*n+e.z*s}}}}(this,i,o):function(e,t,n){const i=e._uValues,o=e._vValues,r=e._heightValues,s=e._indices;for(let a=0,c=s.length;a<c;a+=3){const c=s[a],l=s[a+1],u=s[a+2],A=i[c],f=i[l],p=i[u],m=o[c],_=o[l],g=o[u];if(x(t,n,A,m,f,_,p,g)){const i=d.A.computeBarycentricCoordinates(t,n,A,m,f,_,p,g,C);if(i.x>=-1e-15&&i.y>=-1e-15&&i.z>=-1e-15){const t=i.x*r[c]+i.y*r[l]+i.z*r[u];return h.A.lerp(e._minimumHeight,e._maximumHeight,t/S)}}}}(this,i,o)};const I=new o.A,P=new o.A,D=new o.A;g.prototype.isChildAvailable=function(e,t,n,i){if(!(0,c.A)(e))throw new l.A("thisX is required.");if(!(0,c.A)(t))throw new l.A("thisY is required.");if(!(0,c.A)(n))throw new l.A("childX is required.");if(!(0,c.A)(i))throw new l.A("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),!!(this._childTileMask&1<<o)},g.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const O=g},259690:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(419061),o=n(491446),r=n(605971),s=n(99479),a=n(437266);function c(e){const t=(e=(0,i.A)(e,i.A.EMPTY_OBJECT)).points,n=e.times;if(!(0,o.A)(t)||!(0,o.A)(n))throw new r.A("points and times are required.");if(t.length<2)throw new r.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new r.A("times.length must be equal to points.length.");this._times=n,this._points=t,this._evaluateFunction=function(e){const t=e.points,n=e.times;return function(i,r){(0,o.A)(r)||(r=new s.A);const a=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),c=(i-n[a])/(n[a+1]-n[a]),l=t[a],u=t[a+1];return s.A.fastSlerp(l,u,c,r)}}(this),this._lastTimeIndex=0}Object.defineProperties(c.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),c.prototype.findTimeInterval=a.A.prototype.findTimeInterval,c.prototype.wrapTime=a.A.prototype.wrapTime,c.prototype.clampTime=a.A.prototype.clampTime,c.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};const l=c},67988:(e,t,n)=>{"use strict";function i(){this._array=[],this._offset=0,this._length=0}n.d(t,{A:()=>o}),Object.defineProperties(i.prototype,{length:{get:function(){return this._length}}}),i.prototype.enqueue=function(e){this._array.push(e),this._length++},i.prototype.dequeue=function(){if(0===this._length)return;const e=this._array;let t=this._offset;const n=e[t];return e[t]=void 0,t++,t>10&&2*t>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n},i.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},i.prototype.contains=function(e){return-1!==this._array.indexOf(e)},i.prototype.clear=function(){this._array.length=this._offset=this._length=0},i.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};const o=i},487741:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(935341),o=n(369031);function r(){this._tree=new i}function s(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.id=""}function a(e,t){return e.id===t.id}s.fromRectangleAndId=function(e,t,n){return n.minX=t.west,n.minY=t.south,n.maxX=t.east,n.maxY=t.north,n.id=e,n},r.prototype.insert=function(e,t){o.A.typeOf.string("id",e),o.A.typeOf.object("rectangle",t);const n=s.fromRectangleAndId(e,t,new s);this._tree.insert(n)};const c=new s;r.prototype.remove=function(e,t){o.A.typeOf.string("id",e),o.A.typeOf.object("rectangle",t);const n=s.fromRectangleAndId(e,t,c);this._tree.remove(n,a)};const l=new s;r.prototype.collides=function(e){o.A.typeOf.object("rectangle",e);const t=s.fromRectangleAndId("",e,l);return this._tree.collides(t)};const u=r},844610:(e,t,n)=>{"use strict";n.d(t,{A:()=>re});var i=n(660662),o=n(434067),r=n(267980),s=n(336946),a=n(369031),c=n(571804),l=n(419061),u=n(491446),d=n(605971),h=n(610750),A=n(944479),f=n(305439),p=n(46362),m=n(75200),_=n(794554),g=n(34233),y=n(874915),b=n(367817),v=n(463298),T=n(331185),w=n(406719),E=n(402330),S=n(99479),C=n(697422),x=n(512827),I=n(769534);const P=new r.A,D=new r.A,O=new r.A,L=new r.A,N=new C.A,M=new o.A,R=new i.A,F=new i.A;function B(e,t){const n=new A.A({attributes:new p.A,primitiveType:E.A.TRIANGLES});return n.attributes.position=new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:t.positions}),e.normal&&(n.attributes.normal=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:t.normals})),e.tangent&&(n.attributes.tangent=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:t.tangents})),e.bitangent&&(n.attributes.bitangent=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:t.bitangents})),n}const U=new r.A,k=new r.A;function V(e,t){const n=e._vertexFormat,i=e._ellipsoid,o=t.height,s=t.width,a=t.northCap,l=t.southCap;let u=0,d=o,h=o,A=0;a&&(u=1,h-=1,A+=1),l&&(d-=1,h-=1,A+=1),A+=s*h;const p=n.position?new Float64Array(3*A):void 0,m=n.st?new Float32Array(2*A):void 0;let _=0,g=0;const b=P,v=M;let w=Number.MAX_VALUE,E=Number.MAX_VALUE,S=-Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let e=u;e<d;++e)for(let o=0;o<s;++o)x.A.computePosition(t,i,n.st,e,o,b,v),p[_++]=b.x,p[_++]=b.y,p[_++]=b.z,n.st&&(m[g++]=v.x,m[g++]=v.y,w=Math.min(w,v.x),E=Math.min(E,v.y),S=Math.max(S,v.x),C=Math.max(C,v.y));if(a&&(x.A.computePosition(t,i,n.st,0,0,b,v),p[_++]=b.x,p[_++]=b.y,p[_++]=b.z,n.st&&(m[g++]=v.x,m[g++]=v.y,w=v.x,E=v.y,S=v.x,C=v.y)),l&&(x.A.computePosition(t,i,n.st,o-1,0,b,v),p[_++]=b.x,p[_++]=b.y,p[_]=b.z,n.st&&(m[g++]=v.x,m[g]=v.y,w=Math.min(w,v.x),E=Math.min(E,v.y),S=Math.max(S,v.x),C=Math.max(C,v.y))),n.st&&(w<0||E<0||S>1||C>1))for(let e=0;e<m.length;e+=2)m[e]=(m[e]-w)/(S-w),m[e+1]=(m[e+1]-E)/(C-E);const I=function(e,t,n,i){const o=e.length,s=t.normal?new Float32Array(o):void 0,a=t.tangent?new Float32Array(o):void 0,c=t.bitangent?new Float32Array(o):void 0;let l=0;const u=L,d=O;let h=D;if(t.normal||t.tangent||t.bitangent)for(let A=0;A<o;A+=3){const o=r.A.fromArray(e,A,P),f=l+1,p=l+2;h=n.geodeticSurfaceNormal(o,h),(t.tangent||t.bitangent)&&(r.A.cross(r.A.UNIT_Z,h,d),T.A.multiplyByVector(i,d,d),r.A.normalize(d,d),t.bitangent&&r.A.normalize(r.A.cross(h,d,u),u)),t.normal&&(s[l]=h.x,s[f]=h.y,s[p]=h.z),t.tangent&&(a[l]=d.x,a[f]=d.y,a[p]=d.z),t.bitangent&&(c[l]=u.x,c[f]=u.y,c[p]=u.z),l+=3}return B(t,{positions:e,normals:s,tangents:a,bitangents:c})}(p,n,i,t.tangentRotationMatrix);let N=6*(s-1)*(h-1);a&&(N+=3*(s-1)),l&&(N+=3*(s-1));const R=y.A.createTypedArray(A,N);let F,U=0,k=0;for(F=0;F<h-1;++F){for(let e=0;e<s-1;++e){const e=U,t=e+s,n=t+1,i=e+1;R[k++]=e,R[k++]=t,R[k++]=i,R[k++]=i,R[k++]=t,R[k++]=n,++U}++U}if(a||l){let e=A-1;const t=A-1;let n,i;if(a&&l&&(e=A-2),U=0,a)for(F=0;F<s-1;F++)n=U,i=n+1,R[k++]=e,R[k++]=n,R[k++]=i,++U;if(l)for(U=(h-1)*s,F=0;F<s-1;F++)n=U,i=n+1,R[k++]=n,R[k++]=t,R[k++]=i,++U}return I.indices=R,n.st&&(I.attributes.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:m})),I}function H(e,t,n,i,o){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n+2],e[t++]=o[n],e[t++]=o[n+1],e[t]=o[n+2],e}function z(e,t,n,i){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n],e[t]=i[n+1],e}const G=new I.A;const j=[new r.A,new r.A,new r.A,new r.A],W=new s.A,q=new s.A;function Y(e,t,n,i,o){if(0===n)return C.A.clone(e,o);const r=x.A.computeOptions(e,t,n,0,N,W),s=r.height,a=r.width,c=j;return x.A.computePosition(r,i,!1,0,0,c[0]),x.A.computePosition(r,i,!1,0,a-1,c[1]),x.A.computePosition(r,i,!1,s-1,0,c[2]),x.A.computePosition(r,i,!1,s-1,a-1,c[3]),C.A.fromCartesianArray(c,i,o)}function X(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).rectangle;if(a.A.typeOf.object("rectangle",t),C.A.validate(t),t.north<t.south)throw new d.A("options.rectangle.north must be greater than or equal to options.rectangle.south");const n=(0,l.A)(e.height,0),i=(0,l.A)(e.extrudedHeight,n);this._rectangle=C.A.clone(t),this._granularity=(0,l.A)(e.granularity,b.A.RADIANS_PER_DEGREE),this._ellipsoid=h.A.clone((0,l.A)(e.ellipsoid,h.A.WGS84)),this._surfaceHeight=Math.max(n,i),this._rotation=(0,l.A)(e.rotation,0),this._stRotation=(0,l.A)(e.stRotation,0),this._vertexFormat=I.A.clone((0,l.A)(e.vertexFormat,I.A.DEFAULT)),this._extrudedHeight=Math.min(n,i),this._shadowVolume=(0,l.A)(e.shadowVolume,!1),this._workerName="createRectangleGeometry",this._offsetAttribute=e.offsetAttribute,this._rotatedRectangle=void 0,this._textureCoordinateRotationPoints=void 0}X.packedLength=C.A.packedLength+h.A.packedLength+I.A.packedLength+7,X.pack=function(e,t,n){return a.A.typeOf.object("value",e),a.A.defined("array",t),n=(0,l.A)(n,0),C.A.pack(e._rectangle,t,n),n+=C.A.packedLength,h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,I.A.pack(e._vertexFormat,t,n),n+=I.A.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=(0,l.A)(e._offsetAttribute,-1),t};const J=new C.A,Q=h.A.clone(h.A.UNIT_SPHERE),$={rectangle:J,ellipsoid:Q,vertexFormat:G,granularity:void 0,height:void 0,rotation:void 0,stRotation:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};X.unpack=function(e,t,n){a.A.defined("array",e),t=(0,l.A)(t,0);const i=C.A.unpack(e,t,J);t+=C.A.packedLength;const o=h.A.unpack(e,t,Q);t+=h.A.packedLength;const r=I.A.unpack(e,t,G);t+=I.A.packedLength;const s=e[t++],c=e[t++],d=e[t++],A=e[t++],f=e[t++],p=1===e[t++],m=e[t];return(0,u.A)(n)?(n._rectangle=C.A.clone(i,n._rectangle),n._ellipsoid=h.A.clone(o,n._ellipsoid),n._vertexFormat=I.A.clone(r,n._vertexFormat),n._granularity=s,n._surfaceHeight=c,n._rotation=d,n._stRotation=A,n._extrudedHeight=f,n._shadowVolume=p,n._offsetAttribute=-1===m?void 0:m,n):($.granularity=s,$.height=c,$.rotation=d,$.stRotation=A,$.extrudedHeight=f,$.shadowVolume=p,$.offsetAttribute=-1===m?void 0:m,new X($))},X.computeRectangle=function(e,t){const n=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).rectangle;if(a.A.typeOf.object("rectangle",n),C.A.validate(n),n.north<n.south)throw new d.A("options.rectangle.north must be greater than or equal to options.rectangle.south");const i=(0,l.A)(e.granularity,b.A.RADIANS_PER_DEGREE),o=(0,l.A)(e.ellipsoid,h.A.WGS84);return Y(n,i,(0,l.A)(e.rotation,0),o,t)};const K=new T.A,Z=new S.A,ee=new s.A;X.createGeometry=function(e){if(b.A.equalsEpsilon(e._rectangle.north,e._rectangle.south,b.A.EPSILON10)||b.A.equalsEpsilon(e._rectangle.east,e._rectangle.west,b.A.EPSILON10))return;let t=e._rectangle;const n=e._ellipsoid,o=e._rotation,s=e._stRotation,a=e._vertexFormat,l=x.A.computeOptions(t,e._granularity,o,s,N,W,q),d=K;if(0!==s||0!==o){const e=C.A.center(t,ee),i=n.geodeticSurfaceNormalCartographic(e,U);S.A.fromAxisAngle(i,-s,Z),T.A.fromQuaternion(Z,d)}else T.A.clone(T.A.IDENTITY,d);const h=e._surfaceHeight,p=e._extrudedHeight,v=!b.A.equalsEpsilon(h,p,0,b.A.EPSILON2);let E,M;if(l.lonScalar=1/e._rectangle.width,l.latScalar=1/e._rectangle.height,l.tangentRotationMatrix=d,t=e._rectangle,v){E=function(e,t){const n=e._shadowVolume,i=e._offsetAttribute,o=e._vertexFormat,s=e._extrudedHeight,a=e._surfaceHeight,l=e._ellipsoid,d=t.height,h=t.width;let A;if(n){const t=I.A.clone(o,G);t.normal=!0,e._vertexFormat=t}const p=V(e,t);n&&(e._vertexFormat=o);let v=w.A.scaleToGeodeticHeight(p.attributes.position.values,a,l,!1);v=new Float64Array(v);let T=v.length;const E=2*T,S=new Float64Array(E);S.set(v);const C=w.A.scaleToGeodeticHeight(p.attributes.position.values,s,l);S.set(C,T),p.attributes.position.values=S;const x=o.normal?new Float32Array(E):void 0,N=o.tangent?new Float32Array(E):void 0,M=o.bitangent?new Float32Array(E):void 0,R=o.st?new Float32Array(E/3*2):void 0;let F,j,W;if(o.normal){for(j=p.attributes.normal.values,x.set(j),A=0;A<T;A++)j[A]=-j[A];x.set(j,T),p.attributes.normal.values=x}if(n){j=p.attributes.normal.values,o.normal||(p.attributes.normal=void 0);const e=new Float32Array(E);for(A=0;A<T;A++)j[A]=-j[A];e.set(j,T),p.attributes.extrudeDirection=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:e})}const q=(0,u.A)(i);if(q){const e=T/3*2;let t=new Uint8Array(e);i===_.A.TOP?t=t.fill(1,0,e/2):(W=i===_.A.NONE?0:1,t=t.fill(W)),p.attributes.applyOffset=new f.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}if(o.tangent){const e=p.attributes.tangent.values;for(N.set(e),A=0;A<T;A++)e[A]=-e[A];N.set(e,T),p.attributes.tangent.values=N}if(o.bitangent){const e=p.attributes.bitangent.values;M.set(e),M.set(e,T),p.attributes.bitangent.values=M}o.st&&(F=p.attributes.st.values,R.set(F),R.set(F,T/3*2),p.attributes.st.values=R);const Y=p.indices,X=Y.length,J=T/3,Q=y.A.createTypedArray(E/3,2*X);for(Q.set(Y),A=0;A<X;A+=3)Q[A+X]=Y[A+2]+J,Q[A+1+X]=Y[A+1]+J,Q[A+2+X]=Y[A]+J;p.indices=Q;const $=t.northCap,K=t.southCap;let Z=d,ee=2,te=0,ne=4,ie=4;$&&(ee-=1,Z-=1,te+=1,ne-=2,ie-=1),K&&(ee-=1,Z-=1,te+=1,ne-=2,ie-=1),te+=ee*h+2*Z-ne;const oe=2*(te+ie);let re=new Float64Array(3*oe);const se=n?new Float32Array(3*oe):void 0;let ae=q?new Uint8Array(oe):void 0,ce=o.st?new Float32Array(2*oe):void 0;const le=i===_.A.TOP;q&&!le&&(W=i===_.A.ALL?1:0,ae=ae.fill(W));let ue=0,de=0,he=0,Ae=0;const fe=h*Z;let pe;for(A=0;A<fe;A+=h)pe=3*A,re=H(re,ue,pe,v,C),ue+=6,o.st&&(ce=z(ce,de,2*A,F),de+=4),n&&(he+=3,se[he++]=j[pe],se[he++]=j[pe+1],se[he++]=j[pe+2]),le&&(ae[Ae++]=1,Ae+=1);if(K){const e=$?fe+1:fe;for(pe=3*e,A=0;A<2;A++)re=H(re,ue,pe,v,C),ue+=6,o.st&&(ce=z(ce,de,2*e,F),de+=4),n&&(he+=3,se[he++]=j[pe],se[he++]=j[pe+1],se[he++]=j[pe+2]),le&&(ae[Ae++]=1,Ae+=1)}else for(A=fe-h;A<fe;A++)pe=3*A,re=H(re,ue,pe,v,C),ue+=6,o.st&&(ce=z(ce,de,2*A,F),de+=4),n&&(he+=3,se[he++]=j[pe],se[he++]=j[pe+1],se[he++]=j[pe+2]),le&&(ae[Ae++]=1,Ae+=1);for(A=fe-1;A>0;A-=h)pe=3*A,re=H(re,ue,pe,v,C),ue+=6,o.st&&(ce=z(ce,de,2*A,F),de+=4),n&&(he+=3,se[he++]=j[pe],se[he++]=j[pe+1],se[he++]=j[pe+2]),le&&(ae[Ae++]=1,Ae+=1);if($){const e=fe;for(pe=3*e,A=0;A<2;A++)re=H(re,ue,pe,v,C),ue+=6,o.st&&(ce=z(ce,de,2*e,F),de+=4),n&&(he+=3,se[he++]=j[pe],se[he++]=j[pe+1],se[he++]=j[pe+2]),le&&(ae[Ae++]=1,Ae+=1)}else for(A=h-1;A>=0;A--)pe=3*A,re=H(re,ue,pe,v,C),ue+=6,o.st&&(ce=z(ce,de,2*A,F),de+=4),n&&(he+=3,se[he++]=j[pe],se[he++]=j[pe+1],se[he++]=j[pe+2]),le&&(ae[Ae++]=1,Ae+=1);let me=function(e,t,n){const i=e.length,o=t.normal?new Float32Array(i):void 0,s=t.tangent?new Float32Array(i):void 0,a=t.bitangent?new Float32Array(i):void 0;let c=0,l=0,u=0,d=!0,h=L,A=O,f=D;if(t.normal||t.tangent||t.bitangent)for(let p=0;p<i;p+=6){const m=r.A.fromArray(e,p,P),_=r.A.fromArray(e,(p+6)%i,U);if(d){const t=r.A.fromArray(e,(p+3)%i,k);r.A.subtract(_,m,_),r.A.subtract(t,m,t),f=r.A.normalize(r.A.cross(t,_,f),f),d=!1}r.A.equalsEpsilon(_,m,b.A.EPSILON10)&&(d=!0),(t.tangent||t.bitangent)&&(h=n.geodeticSurfaceNormal(m,h),t.tangent&&(A=r.A.normalize(r.A.cross(h,f,A),A))),t.normal&&(o[c++]=f.x,o[c++]=f.y,o[c++]=f.z,o[c++]=f.x,o[c++]=f.y,o[c++]=f.z),t.tangent&&(s[l++]=A.x,s[l++]=A.y,s[l++]=A.z,s[l++]=A.x,s[l++]=A.y,s[l++]=A.z),t.bitangent&&(a[u++]=h.x,a[u++]=h.y,a[u++]=h.z,a[u++]=h.x,a[u++]=h.y,a[u++]=h.z)}return B(t,{positions:e,normals:o,tangents:s,bitangents:a})}(re,o,l);o.st&&(me.attributes.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:ce})),n&&(me.attributes.extrudeDirection=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:se})),q&&(me.attributes.applyOffset=new f.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:ae}));const _e=y.A.createTypedArray(oe,6*te);let ge,ye,be,ve;T=re.length/3;let Te=0;for(A=0;A<T-1;A+=2){ge=A,ve=(ge+2)%T;const e=r.A.fromArray(re,3*ge,U),t=r.A.fromArray(re,3*ve,k);r.A.equalsEpsilon(e,t,b.A.EPSILON10)||(ye=(ge+1)%T,be=(ye+2)%T,_e[Te++]=ge,_e[Te++]=ye,_e[Te++]=ve,_e[Te++]=ve,_e[Te++]=ye,_e[Te++]=be)}return me.indices=_e,me=g.A.combineInstances([new m.A({geometry:p}),new m.A({geometry:me})]),me[0]}(e,l);const o=i.A.fromRectangle3D(t,n,h,F),s=i.A.fromRectangle3D(t,n,p,R);M=i.A.union(o,s)}else{if(E=V(e,l),E.attributes.position.values=w.A.scaleToGeodeticHeight(E.attributes.position.values,h,n,!1),(0,u.A)(e._offsetAttribute)){const t=E.attributes.position.values.length,n=e._offsetAttribute===_.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);E.attributes.applyOffset=new f.A({componentDatatype:c.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}M=i.A.fromRectangle3D(t,n,h)}return a.position||delete E.attributes.position,new A.A({attributes:E.attributes,indices:E.indices,primitiveType:E.primitiveType,boundingSphere:M,offsetAttribute:e._offsetAttribute})},X.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new X({rectangle:e._rectangle,rotation:e._rotation,ellipsoid:o,stRotation:e._stRotation,granularity:i,extrudedHeight:s,height:r,vertexFormat:I.A.POSITION_ONLY,shadowVolume:!0})};const te=new C.A,ne=[new o.A,new o.A,new o.A],ie=new v.A,oe=new s.A;Object.defineProperties(X.prototype,{rectangle:{get:function(){return(0,u.A)(this._rotatedRectangle)||(this._rotatedRectangle=Y(this._rectangle,this._granularity,this._rotation,this._ellipsoid)),this._rotatedRectangle}},textureCoordinateRotationPoints:{get:function(){return(0,u.A)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){if(0===e._stRotation)return[0,0,0,1,1,0];const t=C.A.clone(e._rectangle,te),n=e._granularity,i=e._ellipsoid,r=Y(t,n,e._rotation-e._stRotation,i,te),s=ne;s[0].x=r.west,s[0].y=r.south,s[1].x=r.west,s[1].y=r.north,s[2].x=r.east,s[2].y=r.south;const a=e.rectangle,c=v.A.fromRotation(e._stRotation,ie),l=C.A.center(a,oe);for(let e=0;e<3;++e){const t=s[e];t.x-=l.longitude,t.y-=l.latitude,v.A.multiplyByVector(c,t,t),t.x+=l.longitude,t.y+=l.latitude,t.x=(t.x-a.west)/a.width,t.y=(t.y-a.south)/a.height}const u=s[0],d=s[1],h=s[2],A=new Array(6);return o.A.pack(u,A),o.A.pack(d,A,2),o.A.pack(h,A,4),A}(this)),this._textureCoordinateRotationPoints}}});const re=X},512827:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(267980),o=n(336946),r=n(491446),s=n(605971),a=n(653577),c=n(367817),l=n(463298),u=n(697422);const d=Math.cos,h=Math.sin,A=Math.sqrt,f={computePosition:function(e,t,n,i,o,s,a){const c=t.radiiSquared,l=e.nwCorner,u=e.boundingRectangle;let f=l.latitude-e.granYCos*i+o*e.granXSin;const p=d(f),m=h(f),_=c.z*m;let g=l.longitude+i*e.granYSin+o*e.granXCos;const y=p*d(g),b=p*h(g),v=c.x*y,T=c.y*b,w=A(v*y+T*b+_*m);if(s.x=v/w,s.y=T/w,s.z=_/w,n){const t=e.stNwCorner;(0,r.A)(t)?(f=t.latitude-e.stGranYCos*i+o*e.stGranXSin,g=t.longitude+i*e.stGranYSin+o*e.stGranXCos,a.x=(g-e.stWest)*e.lonScalar,a.y=(f-e.stSouth)*e.latScalar):(a.x=(g-u.west)*e.lonScalar,a.y=(f-u.south)*e.latScalar)}}},p=new l.A;let m=new i.A;const _=new o.A;let g=new i.A;const y=new a.A;function b(e,t,n,o,r,s,a){const c=Math.cos(t),u=o*c,d=n*c,h=Math.sin(t),A=o*h,f=n*h;m=y.project(e,m),m=i.A.subtract(m,g,m);const _=l.A.fromRotation(t,p);m=l.A.multiplyByVector(_,m,m),m=i.A.add(m,g,m),s-=1,a-=1;const b=(e=y.unproject(m,e)).latitude,v=b+s*f,T=b-u*a,w=b-u*a+s*f,E=Math.max(b,v,T,w),S=Math.min(b,v,T,w),C=e.longitude,x=C+s*d,I=C+a*A,P=C+a*A+s*d;return{north:E,south:S,east:Math.max(C,x,I,P),west:Math.min(C,x,I,P),granYCos:u,granYSin:A,granXCos:d,granXSin:f,nwCorner:e}}f.computeOptions=function(e,t,n,i,o,r,a){let l,d=e.east,h=e.west,A=e.north,f=e.south,p=!1,m=!1;A===c.A.PI_OVER_TWO&&(p=!0),f===-c.A.PI_OVER_TWO&&(m=!0);const v=A-f;l=h>d?c.A.TWO_PI-h+d:d-h;const T=Math.ceil(l/t)+1,w=Math.ceil(v/t)+1,E=l/(T-1),S=v/(w-1),C=u.A.northwest(e,r),x=u.A.center(e,_);0===n&&0===i||(x.longitude<C.longitude&&(x.longitude+=c.A.TWO_PI),g=y.project(x,g));const I=S,P=E,D=u.A.clone(e,o),O={granYCos:I,granYSin:0,granXCos:P,granXSin:0,nwCorner:C,boundingRectangle:D,width:T,height:w,northCap:p,southCap:m};if(0!==n){const e=b(C,n,E,S,0,T,w);if(A=e.north,f=e.south,d=e.east,h=e.west,A<-c.A.PI_OVER_TWO||A>c.A.PI_OVER_TWO||f<-c.A.PI_OVER_TWO||f>c.A.PI_OVER_TWO)throw new s.A("Rotated rectangle is invalid.  It crosses over either the north or south pole.");O.granYCos=e.granYCos,O.granYSin=e.granYSin,O.granXCos=e.granXCos,O.granXSin=e.granXSin,D.north=A,D.south=f,D.east=d,D.west=h}if(0!==i){n-=i;const e=u.A.northwest(D,a),t=b(e,n,E,S,0,T,w);O.stGranYCos=t.granYCos,O.stGranXCos=t.granXCos,O.stGranYSin=t.granYSin,O.stGranXSin=t.granXSin,O.stNwCorner=e,O.stWest=t.west,O.stSouth=t.south}return O};const v=f},406882:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(660662),o=n(267980),r=n(336946),s=n(571804),a=n(419061),c=n(491446),l=n(605971),u=n(610750),d=n(944479),h=n(305439),A=n(46362),f=n(794554),p=n(874915),m=n(367817),_=n(406719),g=n(402330),y=n(697422),b=n(512827);const v=new i.A,T=new i.A,w=new o.A,E=new y.A;function S(e,t){const n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,a=t.southCap;let c=i,l=2,u=0,f=4;r&&(l-=1,c-=1,u+=1,f-=2),a&&(l-=1,c-=1,u+=1,f-=2),u+=l*o+2*c-f;const m=new Float64Array(3*u);let _,y=0,v=0;const T=w;if(r)b.A.computePosition(t,n,!1,v,0,T),m[y++]=T.x,m[y++]=T.y,m[y++]=T.z;else for(_=0;_<o;_++)b.A.computePosition(t,n,!1,v,_,T),m[y++]=T.x,m[y++]=T.y,m[y++]=T.z;for(_=o-1,v=1;v<i;v++)b.A.computePosition(t,n,!1,v,_,T),m[y++]=T.x,m[y++]=T.y,m[y++]=T.z;if(v=i-1,!a)for(_=o-2;_>=0;_--)b.A.computePosition(t,n,!1,v,_,T),m[y++]=T.x,m[y++]=T.y,m[y++]=T.z;for(_=0,v=i-2;v>0;v--)b.A.computePosition(t,n,!1,v,_,T),m[y++]=T.x,m[y++]=T.y,m[y++]=T.z;const E=m.length/3*2,S=p.A.createTypedArray(m.length/3,E);let C=0;for(let e=0;e<m.length/3-1;e++)S[C++]=e,S[C++]=e+1;S[C++]=m.length/3-1,S[C++]=0;const x=new d.A({attributes:new A.A,primitiveType:g.A.LINES});return x.attributes.position=new h.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:m}),x.indices=S,x}function C(e){const t=(e=(0,a.A)(e,a.A.EMPTY_OBJECT)).rectangle,n=(0,a.A)(e.granularity,m.A.RADIANS_PER_DEGREE),i=(0,a.A)(e.ellipsoid,u.A.WGS84),o=(0,a.A)(e.rotation,0);if(!(0,c.A)(t))throw new l.A("rectangle is required.");if(y.A.validate(t),t.north<t.south)throw new l.A("options.rectangle.north must be greater than options.rectangle.south");const r=(0,a.A)(e.height,0),s=(0,a.A)(e.extrudedHeight,r);this._rectangle=y.A.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(r,s),this._rotation=o,this._extrudedHeight=Math.min(r,s),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}C.packedLength=y.A.packedLength+u.A.packedLength+5,C.pack=function(e,t,n){if(!(0,c.A)(e))throw new l.A("value is required");if(!(0,c.A)(t))throw new l.A("array is required");return n=(0,a.A)(n,0),y.A.pack(e._rectangle,t,n),n+=y.A.packedLength,u.A.pack(e._ellipsoid,t,n),n+=u.A.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=(0,a.A)(e._offsetAttribute,-1),t};const x=new y.A,I=u.A.clone(u.A.UNIT_SPHERE),P={rectangle:x,ellipsoid:I,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};C.unpack=function(e,t,n){if(!(0,c.A)(e))throw new l.A("array is required");t=(0,a.A)(t,0);const i=y.A.unpack(e,t,x);t+=y.A.packedLength;const o=u.A.unpack(e,t,I);t+=u.A.packedLength;const r=e[t++],s=e[t++],d=e[t++],h=e[t++],A=e[t];return(0,c.A)(n)?(n._rectangle=y.A.clone(i,n._rectangle),n._ellipsoid=u.A.clone(o,n._ellipsoid),n._surfaceHeight=s,n._rotation=d,n._extrudedHeight=h,n._offsetAttribute=-1===A?void 0:A,n):(P.granularity=r,P.height=s,P.rotation=d,P.extrudedHeight=h,P.offsetAttribute=-1===A?void 0:A,new C(P))};const D=new r.A;C.createGeometry=function(e){const t=e._rectangle,n=e._ellipsoid,o=b.A.computeOptions(t,e._granularity,e._rotation,0,E,D);let r,a;if(m.A.equalsEpsilon(t.north,t.south,m.A.EPSILON10)||m.A.equalsEpsilon(t.east,t.west,m.A.EPSILON10))return;const l=e._surfaceHeight,u=e._extrudedHeight;let A;if(m.A.equalsEpsilon(l,u,0,m.A.EPSILON2)){if(r=S(e,o),r.attributes.position.values=_.A.scaleToGeodeticHeight(r.attributes.position.values,l,n,!1),(0,c.A)(e._offsetAttribute)){const t=r.attributes.position.values.length;A=e._offsetAttribute===f.A.NONE?0:1;const n=new Uint8Array(t/3).fill(A);r.attributes.applyOffset=new h.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}a=i.A.fromRectangle3D(t,n,l)}else{if(r=function(e,t){const n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=i,s=n,a=S(e,t),c=t.height,l=t.width,u=_.A.scaleToGeodeticHeight(a.attributes.position.values,s,o,!1);let d=u.length;const h=new Float64Array(2*d);h.set(u);const A=_.A.scaleToGeodeticHeight(a.attributes.position.values,r,o);h.set(A,d),a.attributes.position.values=h;const f=t.northCap,m=t.southCap;let g=4;f&&(g-=1),m&&(g-=1);const y=2*(h.length/3+g),b=p.A.createTypedArray(h.length/3,y);d=h.length/6;let v,T=0;for(let e=0;e<d-1;e++)b[T++]=e,b[T++]=e+1,b[T++]=e+d,b[T++]=e+d+1;if(b[T++]=d-1,b[T++]=0,b[T++]=d+d-1,b[T++]=d,b[T++]=0,b[T++]=d,f)v=c-1;else{const e=l-1;b[T++]=e,b[T++]=e+d,v=l+c-2}if(b[T++]=v,b[T++]=v+d,!m){const e=l+v-1;b[T++]=e,b[T]=e+d}return a.indices=b,a}(e,o),(0,c.A)(e._offsetAttribute)){const t=r.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===f.A.TOP?n=n.fill(1,0,t/2):(A=e._offsetAttribute===f.A.NONE?0:1,n=n.fill(A)),r.attributes.applyOffset=new h.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}const d=i.A.fromRectangle3D(t,n,l,T),m=i.A.fromRectangle3D(t,n,u,v);a=i.A.union(d,m)}return new d.A({attributes:r.attributes,indices:r.indices,primitiveType:g.A.LINES,boundingSphere:a,offsetAttribute:e._offsetAttribute})};const O=C},252538:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(267980),o=n(336946),r=n(369031),s=n(419061),a=n(491446),c=n(605971),l=n(610750),u=n(520098),d=n(123245);const h=[],A=[],f=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],p=[1,0,0,3];function m(e){if(!u.A.supportsBigInt())throw new d.A("S2 required BigInt support");if(!(0,a.A)(e))throw new c.A("cell ID is required.");if(!m.isValidId(e))throw new c.A("cell ID is invalid.");this._cellId=e,this._level=m.getLevel(e)}function _(e){0===h.length&&(T(0,0,0,0,0,0),T(0,0,0,1,0,1),T(0,0,0,2,0,2),T(0,0,0,3,0,3));const t=Number(e>>BigInt(61));let n=1&t,i=0,o=0;for(let t=7;t>=0;t--){const r=(1<<2*(7===t?2:4))-1;n+=Number(e>>BigInt(2*t*4+1)&BigInt(r))<<2,n=A[n];const s=4*t;i+=n>>6<<s,o+=(n>>2&15)<<s,n&=3}return[t,i,o]}function g(e,t,n){switch(e){case 0:return new i.A(1,t,n);case 1:return new i.A(-t,1,n);case 2:return new i.A(-t,-n,1);case 3:return new i.A(-1,-n,-t);case 4:return new i.A(n,-1,-t);default:return new i.A(n,t,-1)}}function y(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function b(e){return 1/2147483648*e}function v(e){return 1/1073741824*e}function T(e,t,n,i,o,r){if(4===e){const e=(t<<4)+n;h[(e<<2)+i]=(o<<2)+r,A[(o<<2)+i]=(e<<2)+r}else{e++,n<<=1,o<<=2;const s=f[r];T(e,(t<<=1)+(s[0]>>1),n+(1&s[0]),i,o,r^p[0]),T(e,t+(s[1]>>1),n+(1&s[1]),i,o+1,r^p[1]),T(e,t+(s[2]>>1),n+(1&s[2]),i,o+2,r^p[2]),T(e,t+(s[3]>>1),n+(1&s[3]),i,o+3,r^p[3])}}function w(e){return e&~e+BigInt(1)}m.fromToken=function(e){if(r.A.typeOf.string("token",e),!m.isValidToken(e))throw new c.A("token is invalid.");return new m(m.getIdFromToken(e))},m.isValidId=function(e){return r.A.typeOf.bigint("cellId",e),!(e<=0)&&(!(e>>BigInt(61)>5)&&!!(e&~e+BigInt(1)&BigInt("0x1555555555555555")))},m.isValidToken=function(e){return r.A.typeOf.string("token",e),!!/^[0-9a-fA-F]{1,16}$/.test(e)&&m.isValidId(m.getIdFromToken(e))},m.getIdFromToken=function(e){return r.A.typeOf.string("token",e),BigInt("0x"+e+"0".repeat(16-e.length))},m.getTokenFromId=function(e){r.A.typeOf.bigint("cellId",e);const t=Math.floor(E[(-(n=e)&n)%BigInt(67)]/4);var n;const i=e.toString(16).replace(/0*$/,"");return Array(17-t-i.length).join("0")+i},m.getLevel=function(e){if(r.A.typeOf.bigint("cellId",e),!m.isValidId(e))throw new c.A;let t=0;for(;e!==BigInt(0)&&!(e&BigInt(1));)t++,e>>=BigInt(1);return 30-(t>>1)},m.prototype.getChild=function(e){if(r.A.typeOf.number("index",e),e<0||e>3)throw new c.A("child index must be in the range [0-3].");if(30===this._level)throw new c.A("cannot get child of leaf cell.");const t=w(this._cellId)>>BigInt(2);return new m(this._cellId+BigInt(2*e+1-4)*t)},m.prototype.getParent=function(){if(0===this._level)throw new c.A("cannot get parent of root cell.");const e=w(this._cellId)<<BigInt(2);return new m(this._cellId&~e+BigInt(1)|e)},m.prototype.getParentAtLevel=function(e){if(0===this._level||e<0||this._level<e)throw new c.A("cannot get parent at invalid level.");const t=function(e){return BigInt(1)<<BigInt(2*(30-e))}(e);return new m(this._cellId&-t|t)},m.prototype.getCenter=function(e){e=(0,s.A)(e,l.A.WGS84);let t=function(e,t){const n=function(e,t){const n=_(e),i=n[0],o=n[1],r=n[2],s=30===t,a=!s&&(BigInt(o)^e>>BigInt(2))&BigInt(1),c=s?1:a?2:0;return[i,(o<<1)+c,(r<<1)+c]}(e,t);return function(e,t,n){const i=b(t),o=b(n);return g(e,y(i),y(o))}(n[0],n[1],n[2])}(this._cellId,this._level);t=i.A.normalize(t,t);const n=new o.A.fromCartesian(t,l.A.UNIT_SPHERE);return o.A.toCartesian(n,e,new i.A)},m.prototype.getVertex=function(e,t){if(r.A.typeOf.number("index",e),e<0||e>3)throw new c.A("vertex index must be in the range [0-3].");t=(0,s.A)(t,l.A.WGS84);let n=function(e,t,n){const i=_(e),o=function(e,t){const n=[[],[]],i=function(e){return 1<<30-e>>>0}(t);for(let t=0;t<2;++t){const o=e[t]&-i,r=o+i;n[t][0]=y(v(o)),n[t][1]=y(v(r))}return n}([i[1],i[2]],t),r=n>>1&1;return g(i[0],o[0][r^1&n],o[1][r])}(this._cellId,this._level,e);n=i.A.normalize(n,n);const a=new o.A.fromCartesian(n,l.A.UNIT_SPHERE);return o.A.toCartesian(a,t,new i.A)},m.fromFacePositionLevel=function(e,t,n){if(r.A.typeOf.bigint("position",t),e<0||e>5)throw new c.A("Invalid S2 Face (must be within 0-5)");if(n<0||n>30)throw new c.A("Invalid level (must be within 0-30)");if(t<0||t>=Math.pow(4,n))throw new c.A("Invalid Hilbert position for level");const i=(e<4?"0":"")+(e<2?"0":"")+e.toString(2),o=t.toString(2),s=Array(2*n-o.length+1).join("0"),a=Array(61-2*n).join("0");return new m(BigInt(`0b${i}${s}${o}1${a}`))};const E=[64,0,1,39,2,15,40,23,3,12,16,59,41,19,24,54,4,64,13,10,17,62,60,28,42,30,20,51,25,44,55,47,5,32,65,38,14,22,11,58,18,53,63,9,61,27,29,50,43,46,31,37,21,57,52,8,26,49,45,36,56,7,48,35,6,34,33,0],S=m},708857:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(571804),o=n(419061),r=n(491446),s=n(605971);function a(e){e=(0,o.A)(e,!0),this.value=a.toValue(e)}Object.defineProperties(a.prototype,{componentDatatype:{get:function(){return i.A.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!1}}}),a.toValue=function(e,t){if(!(0,r.A)(e))throw new s.A("show is required.");return(0,r.A)(t)?(t[0]=e,t):new Uint8Array([e])};const c=a},658542:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(267980),o=n(491446),r=n(605971),s=n(591978),a=n(367817),c=n(331185),l=n(711337),u=n(193387);const d={};function h(e,t){t=s.A.addSeconds(e,32.184,t);const n=s.A.totalDays(t)-2451545;return s.A.addSeconds(t,function(e){const t=6.239996+.0172019696544*e;return.001657*Math.sin(t+.01671*Math.sin(t))}(n),t)}const A=new s.A(2451545,0,u.A.TAI),f=a.A.RADIANS_PER_DEGREE,p=a.A.RADIANS_PER_ARCSECOND,m=new c.A;function _(e,t,n,s,l,u,d){if(n<0&&(n=-n,l+=a.A.PI),n<0||n>a.A.PI)throw new r.A("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");const h=e*(1-t),A=s-l,f=l,p=function(e,t){if(t<0||t>=1)throw new r.A("eccentricity out of range.");const n=function(e,t){if(t<0||t>=1)throw new r.A("eccentricity out of range.");const n=Math.floor(e/a.A.TWO_PI);let i,o=(e-=n*a.A.TWO_PI)+t*Math.sin(e)/(1-Math.sin(e+t)+Math.sin(e)),s=Number.MAX_VALUE;for(i=0;i<g&&Math.abs(s-o)>y;++i)s=o,o=s-(s-t*Math.sin(s)-e)/(1-t*Math.cos(s));if(i>=g)throw new r.A("Kepler equation did not converge");return s=o+n*a.A.TWO_PI,s}(e,t);return function(e,t){if(t<0||t>=1)throw new r.A("eccentricity out of range.");const n=Math.floor(e/a.A.TWO_PI);e-=n*a.A.TWO_PI;const i=Math.cos(e)-t,o=Math.sin(e)*Math.sqrt(1-t*t);let s=Math.atan2(o,i);return s=a.A.zeroToTwoPi(s),e<0&&(s-=a.A.TWO_PI),s+=n*a.A.TWO_PI,s}(n,t)}(u-s,t),_=function(e){if(e<0)throw new r.A("eccentricity cannot be negative.");return e<=0?"Circular":e<1?"Elliptical":e<=1?"Parabolic":"Hyperbolic"}(t);if("Hyperbolic"===_&&Math.abs(a.A.negativePiToPi(p))>=Math.acos(-1/t))throw new r.A("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");!function(e,t,n,i){if(t<0||t>a.A.PI)throw new r.A("inclination out of range");const s=Math.cos(e),l=Math.sin(e),u=Math.cos(t),d=Math.sin(t),h=Math.cos(n),A=Math.sin(n);(0,o.A)(i)?(i[0]=h*s-A*l*u,i[1]=A*s+h*l*u,i[2]=l*d,i[3]=-h*l-A*s*u,i[4]=-A*l+h*s*u,i[5]=s*d,i[6]=A*d,i[7]=-h*d,i[8]=u):i=new c.A(h*s-A*l*u,-h*l-A*s*u,A*d,A*s+h*l*u,-A*l+h*s*u,-h*d,l*d,s*d,u)}(A,n,f,m);const b=h*(1+t),v=Math.cos(p),T=Math.sin(p),w=1+t*v;if(w<=a.A.Epsilon10)throw new r.A("elements cannot be converted to cartesian");const E=b/w;return(0,o.A)(d)?(d.x=E*v,d.y=E*T,d.z=0):d=new i.A(E*v,E*T,0),c.A.multiplyByVector(m,d,d)}const g=50,y=a.A.EPSILON8,b=100.46645683*f,v=1295977422.83429*p,T=1e-7*-79,w=232*1e-7,E=1e-7*-52,S=1e-7*-116,C=new s.A(0,0,u.A.TAI);function x(e,t){h(e,C);const n=(C.dayNumber-A.dayNumber+(C.secondsOfDay-A.secondsOfDay)/l.A.SECONDS_PER_DAY)/l.A.DAYS_PER_JULIAN_CENTURY,i=n*n,o=i*n,r=o*n;let s=383397.7725+.004*n,a=.055545526-16e-9*n;const c=5.15668983*f;let u=-8e-5*n+.02966*i-42e-6*o-13e-8*r;const d=83.35324312*f;let m=14643420.2669*n-38.2702*i-.045047*o+21301e-8*r;const g=125.04455501*f;let y=-6967919.3631*n+6.3602*i+.007625*o-3586e-8*r;const b=218.31664563*f;let v=1732559343.4847*n-6.391*i+.006588*o-3169e-8*r;const T=297.85019547*f+p*(1602961601.209*n-6.3706*i+.006593*o-3169e-8*r),w=134.96340251*f+p*(1717915923.2178*n+31.8792*i+.051635*o-2447e-7*r),E=357.52910918*f+p*(129596581.0481*n-.5532*i+136e-6*o-1149e-8*r),S=310.17137918*f-p*(6967051.436*n+6.2068*i+.007618*o-3219e-8*r),x=2*T,I=4*T,P=6*T,D=2*w,O=3*w,L=4*w,N=2*(93.27209062*f+p*(1739527262.8478*n-12.7512*i-.001037*o+417e-8*r));s+=3400.4*Math.cos(x)-635.6*Math.cos(x-w)-235.6*Math.cos(w)+218.1*Math.cos(x-E)+181*Math.cos(x+w),a+=.014216*Math.cos(x-w)+.008551*Math.cos(x-D)-.001383*Math.cos(w)+.001356*Math.cos(x+w)-.001147*Math.cos(I-O)-914e-6*Math.cos(I-D)+869e-6*Math.cos(x-E-w)-627e-6*Math.cos(x)-394e-6*Math.cos(I-L)+282e-6*Math.cos(x-E-D)-279e-6*Math.cos(T-w)-236e-6*Math.cos(D)+231e-6*Math.cos(I)+229e-6*Math.cos(P-L)-201e-6*Math.cos(D-N),u+=486.26*Math.cos(x-N)-40.13*Math.cos(x)+37.51*Math.cos(N)+25.73*Math.cos(D-N)+19.97*Math.cos(x-E-N),m+=-55609*Math.sin(x-w)-34711*Math.sin(x-D)-9792*Math.sin(w)+9385*Math.sin(I-O)+7505*Math.sin(I-D)+5318*Math.sin(x+w)+3484*Math.sin(I-L)-3417*Math.sin(x-E-w)-2530*Math.sin(P-L)-2376*Math.sin(x)-2075*Math.sin(x-O)-1883*Math.sin(D)-1736*Math.sin(P-5*w)+1626*Math.sin(E)-1370*Math.sin(P-O),y+=-5392*Math.sin(x-N)-540*Math.sin(E)-441*Math.sin(x)+423*Math.sin(N)-288*Math.sin(D-N),v+=-3332.9*Math.sin(x)+1197.4*Math.sin(x-w)-662.5*Math.sin(E)+396.3*Math.sin(w)-218*Math.sin(x-E);const M=2*S,R=3*S;u+=46.997*Math.cos(S)*n-.614*Math.cos(x-N+S)*n+.614*Math.cos(x-N-S)*n-.0297*Math.cos(M)*i-.0335*Math.cos(S)*i+.0012*Math.cos(x-N+M)*i-16e-5*Math.cos(S)*o+4e-5*Math.cos(R)*o+4e-5*Math.cos(M)*o;const F=2.116*Math.sin(S)*n-.111*Math.sin(x-N-S)*n-.0015*Math.sin(S)*i;return m+=F,v+=F,y+=-520.77*Math.sin(S)*n+13.66*Math.sin(x-N+S)*n+1.12*Math.sin(x-S)*n-1.06*Math.sin(N-S)*n+.66*Math.sin(M)*i+.371*Math.sin(S)*i-.035*Math.sin(x-N+M)*i-.015*Math.sin(x-N+S)*i+.0014*Math.sin(S)*o-.0011*Math.sin(R)*o-9e-4*Math.sin(M)*o,s*=1e3,_(s,a,c+u*p,d+m*p,g+y*p,b+v*p,t)}const I=new c.A(1.0000000000000002,5619723173785822e-31,4690511510146299e-34,-5154129427414611e-31,.9174820620691819,-.39777715593191376,-223970096136568e-30,.39777715593191376,.9174820620691819);let P=new i.A;d.computeSunPositionInEarthInertialFrame=function(e,t){return(0,o.A)(e)||(e=s.A.now()),(0,o.A)(t)||(t=new i.A),P=function(e,t){h(e,C);const n=(C.dayNumber-A.dayNumber+(C.secondsOfDay-A.secondsOfDay)/l.A.SECONDS_PER_DAY)/(10*l.A.DAYS_PER_JULIAN_CENTURY),i=.3595362*n,o=149598022260.7121+957426.3679999999*Math.cos(16002*i)+-2243968.05*Math.sin(16002*i)+-2273887.624*Math.cos(21863*i)+-688150.202*Math.sin(21863*i)+927506.794*Math.cos(32004*i)+1017265.516*Math.sin(32004*i)+-119678.29599999999*Math.cos(10931*i)+807828.498*Math.sin(10931*i)+478713.18399999995*Math.cos(14529*i)+209437.01799999998*Math.sin(14529*i)+-613351.267*Math.cos(16368*i)+359034.888*Math.sin(16368*i)+284235.953*Math.cos(15318*i)+-418874.03599999996*Math.sin(15318*i)+-164557.657*Math.cos(32794*i)+329115.314*Math.sin(32794*i),r=b+v*n+-325e-7*Math.cos(10*i)+-105e-7*Math.sin(10*i)+-322e-7*Math.cos(16002*i)+-137e-7*Math.sin(16002*i)+T*Math.cos(21863*i)+258e-7*Math.sin(21863*i)+w*Math.cos(10931*i)+35e-7*Math.sin(10931*i)+E*Math.cos(1473*i)+S*Math.sin(1473*i)+97e-7*Math.cos(32004*i)+-88e-7*Math.sin(32004*i)+55e-7*Math.cos(4387*i)+-112e-7*Math.sin(4387*i)+-41e-7*Math.cos(73*i)+-8e-6*Math.sin(73*i);return _(o,.0167086342-.0004203654*n,469.97289*p*n,102.93734808*f+11612.3529*p*n,174.87317577*f-8679.27034*p*n,r,t)}(e,P),t=i.A.negate(P,t),function(e,t){t=x(e,t),i.A.multiplyByScalar(t,-.01215058143522694,t)}(e,P),i.A.subtract(t,P,t),c.A.multiplyByVector(I,t,t),t},d.computeMoonPositionInEarthInertialFrame=function(e,t){return(0,o.A)(e)||(e=s.A.now()),t=x(e,t),c.A.multiplyByVector(I,t,t),t};const D=d},6874:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(267980),o=n(369031),r=n(419061),s=n(491446),a=n(594706);function c(e){const t=(0,r.A)(e.radius,1),n={radii:new i.A(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,subdivisions:e.subdivisions};this._ellipsoidGeometry=new a.A(n),this._workerName="createSphereOutlineGeometry"}c.packedLength=a.A.packedLength,c.pack=function(e,t,n){return o.A.typeOf.object("value",e),a.A.pack(e._ellipsoidGeometry,t,n)};const l=new a.A,u={radius:void 0,radii:new i.A,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0};c.unpack=function(e,t,n){const o=a.A.unpack(e,t,l);return u.stackPartitions=o._stackPartitions,u.slicePartitions=o._slicePartitions,u.subdivisions=o._subdivisions,(0,s.A)(n)?(i.A.clone(o._radii,u.radii),n._ellipsoidGeometry=new a.A(u),n):(u.radius=o._radii.x,new c(u))},c.createGeometry=function(e){return a.A.createGeometry(e._ellipsoidGeometry)};const d=c},437266:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(267980),o=n(369031),r=n(367817),s=n(419061),a=n(605971),c=n(99479);function l(){this.times=void 0,this.points=void 0,a.A.throwInstantiationError()}l.getPointType=function(e){if("number"==typeof e)return Number;if(e instanceof i.A)return i.A;if(e instanceof c.A)return c.A;throw new a.A("point must be a Cartesian3, Quaternion, or number.")},l.prototype.evaluate=a.A.throwInstantiationError,l.prototype.findTimeInterval=function(e,t){const n=this.times,i=n.length;if(o.A.typeOf.number("time",e),e<n[0]||e>n[i-1])throw new a.A("time is out of range.");if(e>=n[t=(0,s.A)(t,0)]){if(t+1<i&&e<n[t+1])return t;if(t+2<i&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let r;if(e>n[t])for(r=t;r<i-1&&!(e>=n[r]&&e<n[r+1]);++r);else for(r=t-1;r>=0&&!(e>=n[r]&&e<n[r+1]);--r);return r===i-1&&(r=i-2),r},l.prototype.wrapTime=function(e){o.A.typeOf.number("time",e);const t=this.times,n=t[t.length-1],i=t[0],r=n-i;let s;return e<i&&(s=Math.floor((i-e)/r)+1,e+=s*r),e>n&&(s=Math.floor((e-n)/r)+1,e-=s*r),e},l.prototype.clampTime=function(e){o.A.typeOf.number("time",e);const t=this.times;return r.A.clamp(e,t[0],t[t.length-1])};const u=l},587841:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(419061),o=n(491446),r=n(605971),s=n(437266);function a(e){const t=(e=(0,i.A)(e,i.A.EMPTY_OBJECT)).points,n=e.times;if(!(0,o.A)(t)||!(0,o.A)(n))throw new r.A("points and times are required.");if(t.length<2)throw new r.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new r.A("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=s.A.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(a.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),a.prototype.findTimeInterval=s.A.prototype.findTimeInterval,a.prototype.wrapTime=s.A.prototype.wrapTime,a.prototype.clampTime=s.A.prototype.clampTime,a.prototype.evaluate=function(e,t){const n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const i=this._lastTimeIndex,r=this._pointType;return r===Number?n[i]:((0,o.A)(t)||(t=new r),r.clone(n[i],t))};const c=a},42794:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(605971);function o(){i.A.throwInstantiationError()}Object.defineProperties(o.prototype,{credits:{get:i.A.throwInstantiationError},waterMask:{get:i.A.throwInstantiationError}}),o.prototype.interpolateHeight=i.A.throwInstantiationError,o.prototype.isChildAvailable=i.A.throwInstantiationError,o.prototype.createMesh=i.A.throwInstantiationError,o.prototype.upsample=i.A.throwInstantiationError,o.prototype.wasCreatedByUpsampling=i.A.throwInstantiationError,o.maximumAsynchronousTasks=5;const r=o},371267:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(961645),o=n(434067),r=n(267980),s=n(571804),a=n(419061),c=n(491446),l=n(367817),u=n(584164),d=n(680220),h=n(66415);const A=new r.A,f=new r.A,p=new o.A,m=new u.A,_=new u.A,g=Math.pow(2,12);function y(e,t,n,i,o,s,l,d,p,y){let b,v,T=h.A.NONE;if((0,c.A)(t)&&(0,c.A)(n)&&(0,c.A)(i)&&(0,c.A)(o)){const e=t.minimum,s=t.maximum,a=r.A.subtract(s,e,f),c=i-n;T=Math.max(r.A.maximumComponent(a),c)<g-1?h.A.BITS12:h.A.NONE,b=u.A.inverseTransformation(o,new u.A);const l=r.A.negate(e,A);u.A.multiply(u.A.fromTranslation(l,m),b,b);const d=A;d.x=1/a.x,d.y=1/a.y,d.z=1/a.z,u.A.multiply(u.A.fromScale(d,m),b,b),v=u.A.clone(o),u.A.setTranslation(v,r.A.ZERO,v),o=u.A.clone(o,new u.A);const p=u.A.fromTranslation(e,m),y=u.A.fromScale(a,_),w=u.A.multiply(p,y,m);u.A.multiply(o,w,o),u.A.multiply(v,w,v)}this.quantization=T,this.minimumHeight=n,this.maximumHeight=i,this.center=r.A.clone(e),this.toScaledENU=b,this.fromScaledENU=o,this.matrix=v,this.hasVertexNormals=s,this.hasWebMercatorT=(0,a.A)(l,!1),this.hasGeodeticSurfaceNormals=(0,a.A)(d,!1),this.exaggeration=(0,a.A)(p,1),this.exaggerationRelativeHeight=(0,a.A)(y,0),this.stride=0,this._offsetGeodeticSurfaceNormal=0,this._offsetVertexNormal=0,this._calculateStrideAndOffsets()}y.prototype.encode=function(e,t,n,s,a,c,d,f){const m=s.x,_=s.y;if(this.quantization===h.A.BITS12){(n=u.A.multiplyByPoint(this.toScaledENU,n,A)).x=l.A.clamp(n.x,0,1),n.y=l.A.clamp(n.y,0,1),n.z=l.A.clamp(n.z,0,1);const r=this.maximumHeight-this.minimumHeight,s=l.A.clamp((a-this.minimumHeight)/r,0,1);o.A.fromElements(n.x,n.y,p);const c=i.A.compressTextureCoordinates(p);o.A.fromElements(n.z,s,p);const h=i.A.compressTextureCoordinates(p);o.A.fromElements(m,_,p);const f=i.A.compressTextureCoordinates(p);if(e[t++]=c,e[t++]=h,e[t++]=f,this.hasWebMercatorT){o.A.fromElements(d,0,p);const n=i.A.compressTextureCoordinates(p);e[t++]=n}}else r.A.subtract(n,this.center,A),e[t++]=A.x,e[t++]=A.y,e[t++]=A.z,e[t++]=a,e[t++]=m,e[t++]=_,this.hasWebMercatorT&&(e[t++]=d);return this.hasVertexNormals&&(e[t++]=i.A.octPackFloat(c)),this.hasGeodeticSurfaceNormals&&(e[t++]=f.x,e[t++]=f.y,e[t++]=f.z),t};const b=new r.A,v=new r.A;y.prototype.addGeodeticSurfaceNormals=function(e,t,n){if(this.hasGeodeticSurfaceNormals)return;const i=this.stride,o=e.length/i;this.hasGeodeticSurfaceNormals=!0,this._calculateStrideAndOffsets();const r=this.stride;for(let s=0;s<o;s++){for(let n=0;n<i;n++){const o=s*i+n;t[s*r+n]=e[o]}const o=this.decodePosition(t,s,b),a=n.geodeticSurfaceNormal(o,v),c=s*r+this._offsetGeodeticSurfaceNormal;t[c]=a.x,t[c+1]=a.y,t[c+2]=a.z}},y.prototype.removeGeodeticSurfaceNormals=function(e,t){if(!this.hasGeodeticSurfaceNormals)return;const n=this.stride,i=e.length/n;this.hasGeodeticSurfaceNormals=!1,this._calculateStrideAndOffsets();const o=this.stride;for(let r=0;r<i;r++)for(let i=0;i<o;i++){const s=r*n+i;t[r*o+i]=e[s]}},y.prototype.decodePosition=function(e,t,n){if((0,c.A)(n)||(n=new r.A),t*=this.stride,this.quantization===h.A.BITS12){const o=i.A.decompressTextureCoordinates(e[t],p);n.x=o.x,n.y=o.y;const r=i.A.decompressTextureCoordinates(e[t+1],p);return n.z=r.x,u.A.multiplyByPoint(this.fromScaledENU,n,n)}return n.x=e[t],n.y=e[t+1],n.z=e[t+2],r.A.add(n,this.center,n)},y.prototype.getExaggeratedPosition=function(e,t,n){n=this.decodePosition(e,t,n);const i=this.exaggeration,o=this.exaggerationRelativeHeight;if(1!==i&&this.hasGeodeticSurfaceNormals){const r=this.decodeGeodeticSurfaceNormal(e,t,v),s=this.decodeHeight(e,t),a=d.A.getHeight(s,i,o)-s;n.x+=r.x*a,n.y+=r.y*a,n.z+=r.z*a}return n},y.prototype.decodeTextureCoordinates=function(e,t,n){return(0,c.A)(n)||(n=new o.A),t*=this.stride,this.quantization===h.A.BITS12?i.A.decompressTextureCoordinates(e[t+2],n):o.A.fromElements(e[t+4],e[t+5],n)},y.prototype.decodeHeight=function(e,t){return t*=this.stride,this.quantization===h.A.BITS12?i.A.decompressTextureCoordinates(e[t+1],p).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight:e[t+3]},y.prototype.decodeWebMercatorT=function(e,t){return t*=this.stride,this.quantization===h.A.BITS12?i.A.decompressTextureCoordinates(e[t+3],p).x:e[t+6]},y.prototype.getOctEncodedNormal=function(e,t,n){const i=e[t=t*this.stride+this._offsetVertexNormal]/256,r=Math.floor(i),s=256*(i-r);return o.A.fromElements(r,s,n)},y.prototype.decodeGeodeticSurfaceNormal=function(e,t,n){return t=t*this.stride+this._offsetGeodeticSurfaceNormal,n.x=e[t],n.y=e[t+1],n.z=e[t+2],n},y.prototype._calculateStrideAndOffsets=function(){let e=0;this.quantization===h.A.BITS12?e+=3:e+=6,this.hasWebMercatorT&&(e+=1),this.hasVertexNormals&&(this._offsetVertexNormal=e,e+=1),this.hasGeodeticSurfaceNormals&&(this._offsetGeodeticSurfaceNormal=e,e+=3),this.stride=e};const T={position3DAndHeight:0,textureCoordAndEncodedNormals:1,geodeticSurfaceNormal:2},w={compressed0:0,compressed1:1,geodeticSurfaceNormal:2};y.prototype.getAttributes=function(e){const t=s.A.FLOAT,n=s.A.getSizeInBytes(t),i=this.stride*n;let o=0;const r=[];function a(s,a){r.push({index:s,vertexBuffer:e,componentDatatype:t,componentsPerAttribute:a,offsetInBytes:o,strideInBytes:i}),o+=a*n}if(this.quantization===h.A.NONE){a(T.position3DAndHeight,4);let e=2;e+=this.hasWebMercatorT?1:0,e+=this.hasVertexNormals?1:0,a(T.textureCoordAndEncodedNormals,e),this.hasGeodeticSurfaceNormals&&a(T.geodeticSurfaceNormal,3)}else{const e=this.hasWebMercatorT||this.hasVertexNormals,t=this.hasWebMercatorT&&this.hasVertexNormals;a(w.compressed0,e?4:3),t&&a(w.compressed1,1),this.hasGeodeticSurfaceNormals&&a(w.geodeticSurfaceNormal,3)}return r},y.prototype.getAttributeLocations=function(){return this.quantization===h.A.NONE?T:w},y.clone=function(e,t){if((0,c.A)(e))return(0,c.A)(t)||(t=new y),t.quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=r.A.clone(e.center),t.toScaledENU=u.A.clone(e.toScaledENU),t.fromScaledENU=u.A.clone(e.fromScaledENU),t.matrix=u.A.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t.hasGeodeticSurfaceNormals=e.hasGeodeticSurfaceNormals,t.exaggeration=e.exaggeration,t.exaggerationRelativeHeight=e.exaggerationRelativeHeight,t._calculateStrideAndOffsets(),t};const E=y},255335:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(419061);const o=function(e,t,n,o,r,s,a,c,l,u,d,h,A,f,p,m){this.center=e,this.vertices=t,this.stride=(0,i.A)(u,6),this.indices=n,this.indexCountWithoutSkirts=o,this.vertexCountWithoutSkirts=r,this.minimumHeight=s,this.maximumHeight=a,this.boundingSphere3D=c,this.occludeePointInScaledSpace=l,this.orientedBoundingBox=d,this.encoding=h,this.westIndicesSouthToNorth=A,this.southIndicesEastToWest=f,this.eastIndicesNorthToSouth=p,this.northIndicesWestToEast=m}},98055:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(491446),o=n(605971),r=n(874915),s=n(367817);function a(){o.A.throwInstantiationError()}Object.defineProperties(a.prototype,{errorEvent:{get:o.A.throwInstantiationError},credit:{get:o.A.throwInstantiationError},tilingScheme:{get:o.A.throwInstantiationError},ready:{get:o.A.throwInstantiationError},readyPromise:{get:o.A.throwInstantiationError},hasWaterMask:{get:o.A.throwInstantiationError},hasVertexNormals:{get:o.A.throwInstantiationError},availability:{get:o.A.throwInstantiationError}});const c=[];a.getRegularGridIndices=function(e,t){if(e*t>=s.A.FOUR_GIGABYTES)throw new o.A("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=c[e];(0,i.A)(n)||(c[e]=n=[]);let r=n[t];return(0,i.A)(r)||(r=e*t<s.A.SIXTY_FOUR_KILOBYTES?n[t]=new Uint16Array((e-1)*(t-1)*6):n[t]=new Uint32Array((e-1)*(t-1)*6),h(e,t,r,0)),r};const l=[];a.getRegularGridIndicesAndEdgeIndices=function(e,t){if(e*t>=s.A.FOUR_GIGABYTES)throw new o.A("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=l[e];(0,i.A)(n)||(l[e]=n=[]);let r=n[t];if(!(0,i.A)(r)){const i=a.getRegularGridIndices(e,t),o=d(e,t),s=o.westIndicesSouthToNorth,c=o.southIndicesEastToWest,l=o.eastIndicesNorthToSouth,u=o.northIndicesWestToEast;r=n[t]={indices:i,westIndicesSouthToNorth:s,southIndicesEastToWest:c,eastIndicesNorthToSouth:l,northIndicesWestToEast:u}}return r};const u=[];function d(e,t){const n=new Array(t),i=new Array(e),o=new Array(t),r=new Array(e);let s;for(s=0;s<e;++s)r[s]=s,i[s]=e*t-1-s;for(s=0;s<t;++s)o[s]=(s+1)*e-1,n[s]=(t-s-1)*e;return{westIndicesSouthToNorth:n,southIndicesEastToWest:i,eastIndicesNorthToSouth:o,northIndicesWestToEast:r}}function h(e,t,n,i){let o=0;for(let r=0;r<t-1;++r){for(let t=0;t<e-1;++t){const t=o,r=t+e,s=r+1,a=t+1;n[i++]=t,n[i++]=r,n[i++]=a,n[i++]=a,n[i++]=r,n[i++]=s,++o}++o}}function A(e,t,n,i){let o=e[0];const r=e.length;for(let s=1;s<r;++s){const r=e[s];n[i++]=o,n[i++]=r,n[i++]=t,n[i++]=t,n[i++]=r,n[i++]=t+1,o=r,++t}return i}a.getRegularGridAndSkirtIndicesAndEdgeIndices=function(e,t){if(e*t>=s.A.FOUR_GIGABYTES)throw new o.A("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=u[e];(0,i.A)(n)||(u[e]=n=[]);let c=n[t];if(!(0,i.A)(c)){const i=e*t,o=(e-1)*(t-1)*6,s=2*e+2*t,l=i+s,u=o+6*Math.max(0,s-4),A=d(e,t),f=A.westIndicesSouthToNorth,p=A.southIndicesEastToWest,m=A.eastIndicesNorthToSouth,_=A.northIndicesWestToEast,g=r.A.createTypedArray(l,u);h(e,t,g,0),a.addSkirtIndices(f,p,m,_,i,g,o),c=n[t]={indices:g,westIndicesSouthToNorth:f,southIndicesEastToWest:p,eastIndicesNorthToSouth:m,northIndicesWestToEast:_,indexCountWithoutSkirts:o}}return c},a.addSkirtIndices=function(e,t,n,i,o,r,s){let a=o;s=A(e,a,r,s),a+=e.length,s=A(t,a,r,s),a+=t.length,s=A(n,a,r,s),a+=n.length,A(i,a,r,s)},a.heightmapTerrainQuality=.25,a.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(e,t,n){return 2*e.maximumRadius*Math.PI*a.heightmapTerrainQuality/(t*n)},a.prototype.requestTileGeometry=o.A.throwInstantiationError,a.prototype.getLevelMaximumGeometricError=o.A.throwInstantiationError,a.prototype.getTileDataAvailable=o.A.throwInstantiationError,a.prototype.loadTileDataAvailability=o.A.throwInstantiationError;const f=a},66415:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,BITS12:1})},862892:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(525490),o=n(336946),r=n(491446),s=n(697422);function a(e,t){this._tilingScheme=e,this._maximumLevel=t,this._rootNodes=[]}const c=new s.A;function l(e,t,n,i){const o=i.length;for(let r=0;r<o;++r){const o=i[r];if(o.x===t&&o.y===n&&o.level===e)return!0}return!1}a.prototype.addAvailableTileRange=function(e,t,n,i,o){const r=this._tilingScheme,s=this._rootNodes;if(0===e)for(let a=n;a<=o;++a)for(let n=t;n<=i;++n)l(e,n,a,s)||s.push(new p(r,void 0,0,n,a));r.tileXYToRectangle(t,n,e,c);const a=c.west,u=c.north;r.tileXYToRectangle(i,o,e,c);const d=c.east,h=new m(e,a,c.south,d,u);for(let e=0;e<s.length;++e){const t=s[e];_(t.extent,h)&&g(this._maximumLevel,t,h)}},a.prototype.computeMaximumLevelAtPosition=function(e){let t;for(let n=0;n<this._rootNodes.length;++n){const i=this._rootNodes[n];if(v(i.extent,e)){t=i;break}}return(0,r.A)(t)?T(void 0,t,e):-1};const u=[],d=[],h=new s.A,A=new s.A;a.prototype.computeBestAvailableLevelOverRectangle=function(e){const t=u;t.length=0,e.east<e.west?(t.push(s.A.fromRadians(-Math.PI,e.south,e.east,e.north,h)),t.push(s.A.fromRadians(e.west,e.south,Math.PI,e.north,A))):t.push(e);const n=d;let i;for(n.length=0,i=0;i<this._rootNodes.length;++i)w(n,this._rootNodes[i],t);for(i=n.length-1;i>=0;--i)if((0,r.A)(n[i])&&0===n[i].length)return i;return 0};const f=new o.A;function p(e,t,n,i,o){this.tilingScheme=e,this.parent=t,this.level=n,this.x=i,this.y=o,this.extent=e.tileXYToRectangle(i,o,n),this.rectangles=[],this._sw=void 0,this._se=void 0,this._nw=void 0,this._ne=void 0}function m(e,t,n,i,o){this.level=e,this.west=t,this.south=n,this.east=i,this.north=o}function _(e,t){const n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east);return i<Math.min(e.north,t.north)&&n<o}function g(e,t,n){for(;t.level<e;)if(b(t.nw.extent,n))t=t.nw;else if(b(t.ne.extent,n))t=t.ne;else if(b(t.sw.extent,n))t=t.sw;else{if(!b(t.se.extent,n))break;t=t.se}if(0===t.rectangles.length||t.rectangles[t.rectangles.length-1].level<=n.level)t.rectangles.push(n);else{let e=(0,i.A)(t.rectangles,n.level,y);e<0&&(e=~e),t.rectangles.splice(e,0,n)}}function y(e,t){return e.level-t}function b(e,t){return t.west>=e.west&&t.east<=e.east&&t.south>=e.south&&t.north<=e.north}function v(e,t){return t.longitude>=e.west&&t.longitude<=e.east&&t.latitude>=e.south&&t.latitude<=e.north}function T(e,t,n){let i=0,o=!1;for(;!o;){const e=t._nw&&v(t._nw.extent,n),r=t._ne&&v(t._ne.extent,n),s=t._sw&&v(t._sw.extent,n),a=t._se&&v(t._se.extent,n);if(e+r+s+a>1){e&&(i=Math.max(i,T(t,t._nw,n))),r&&(i=Math.max(i,T(t,t._ne,n))),s&&(i=Math.max(i,T(t,t._sw,n))),a&&(i=Math.max(i,T(t,t._se,n)));break}e?t=t._nw:r?t=t._ne:s?t=t._sw:a?t=t._se:o=!0}for(;t!==e;){const e=t.rectangles;for(let t=e.length-1;t>=0&&e[t].level>i;--t){const o=e[t];v(o,n)&&(i=o.level)}t=t.parent}return i}function w(e,t,n){if(!t)return;let i,o=!1;for(i=0;i<n.length;++i)o=o||_(t.extent,n[i]);if(!o)return;const r=t.rectangles;for(i=0;i<r.length;++i){const t=r[i];e[t.level]||(e[t.level]=n),e[t.level]=E(e[t.level],t)}w(e,t._nw,n),w(e,t._ne,n),w(e,t._sw,n),w(e,t._se,n)}function E(e,t){const n=[];for(let i=0;i<e.length;++i){const o=e[i];_(o,t)?(o.west<t.west&&n.push(new s.A(o.west,o.south,t.west,o.north)),o.east>t.east&&n.push(new s.A(t.east,o.south,o.east,o.north)),o.south<t.south&&n.push(new s.A(Math.max(t.west,o.west),o.south,Math.min(t.east,o.east),t.south)),o.north>t.north&&n.push(new s.A(Math.max(t.west,o.west),t.north,Math.min(t.east,o.east),o.north))):n.push(o)}return n}a.prototype.isTileAvailable=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(t,n,e,c);return s.A.center(i,f),this.computeMaximumLevelAtPosition(f)>=e},a.prototype.computeChildMaskForTile=function(e,t,n){const i=e+1;if(i>=this._maximumLevel)return 0;let o=0;return o|=this.isTileAvailable(i,2*t,2*n+1)?1:0,o|=this.isTileAvailable(i,2*t+1,2*n+1)?2:0,o|=this.isTileAvailable(i,2*t,2*n)?4:0,o|=this.isTileAvailable(i,2*t+1,2*n)?8:0,o},Object.defineProperties(p.prototype,{nw:{get:function(){return this._nw||(this._nw=new p(this.tilingScheme,this,this.level+1,2*this.x,2*this.y)),this._nw}},ne:{get:function(){return this._ne||(this._ne=new p(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y)),this._ne}},sw:{get:function(){return this._sw||(this._sw=new p(this.tilingScheme,this,this.level+1,2*this.x,2*this.y+1)),this._sw}},se:{get:function(){return this._se||(this._se=new p(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y+1)),this._se}}});const S=a},36138:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={WEST:0,NORTH:1,EAST:2,SOUTH:3,NORTHWEST:4,NORTHEAST:5,SOUTHWEST:6,SOUTHEAST:7}},705302:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(419061),o=n(491446),r=n(522216);function s(e,t,n,o,r,s,a){this.provider=e,this.message=t,this.x=n,this.y=o,this.level=r,this.timesRetried=(0,i.A)(s,0),this.retry=!1,this.error=a}s.reportError=function(e,t,n,i,a,c,l,u){let d=e;return(0,o.A)(e)?(d.provider=t,d.message=i,d.x=a,d.y=c,d.level=l,d.retry=!1,d.error=u,++d.timesRetried):d=new s(t,i,a,c,l,0,u),(0,o.A)(n)&&n.numberOfListeners>0?n.raiseEvent(d):(0,o.A)(t)&&console.log(`An error occurred in "${t.constructor.name}": ${(0,r.A)(i)}`),d},s.reportSuccess=function(e){(0,o.A)(e)&&(e.timesRetried=-1)};const a=s},224847:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(525490),o=n(419061),r=n(491446),s=n(605971),a=n(955943),c=n(658919),l=n(734780),u=n(32655),d=n(591978),h=n(93467);function A(e,t){return d.A.compare(e.start,t.start)}function f(e){if(this._intervals=[],this._changedEvent=new a.A,(0,r.A)(e)){const t=e.length;for(let n=0;n<t;n++)this.addInterval(e[n])}}Object.defineProperties(f.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){const e=this._intervals;return 0===e.length?void 0:e[0].start}},isStartIncluded:{get:function(){const e=this._intervals;return 0!==e.length&&e[0].isStartIncluded}},stop:{get:function(){const e=this._intervals,t=e.length;return 0===t?void 0:e[t-1].stop}},isStopIncluded:{get:function(){const e=this._intervals,t=e.length;return 0!==t&&e[t-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return 0===this._intervals.length}}}),f.prototype.equals=function(e,t){if(this===e)return!0;if(!(e instanceof f))return!1;const n=this._intervals,i=e._intervals,o=n.length;if(o!==i.length)return!1;for(let e=0;e<o;e++)if(!h.A.equals(n[e],i[e],t))return!1;return!0},f.prototype.get=function(e){if(!(0,r.A)(e))throw new s.A("index is required.");return this._intervals[e]},f.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))},f.prototype.findIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t]:void 0},f.prototype.findDataForIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t].data:void 0},f.prototype.contains=function(e){return this.indexOf(e)>=0};const p=new h.A;f.prototype.indexOf=function(e){if(!(0,r.A)(e))throw new s.A("date is required");const t=this._intervals;p.start=e,p.stop=e;let n=(0,i.A)(t,p,A);return n>=0?t[n].isStartIncluded?n:n>0&&t[n-1].stop.equals(e)&&t[n-1].isStopIncluded?n-1:~n:(n=~n,n>0&&n-1<t.length&&h.A.contains(t[n-1],e)?n-1:~n)},f.prototype.findInterval=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).start,n=e.stop,i=e.isStartIncluded,s=e.isStopIncluded,a=this._intervals;for(let e=0,o=a.length;e<o;e++){const o=a[e];if((!(0,r.A)(t)||o.start.equals(t))&&(!(0,r.A)(n)||o.stop.equals(n))&&(!(0,r.A)(i)||o.isStartIncluded===i)&&(!(0,r.A)(s)||o.isStopIncluded===s))return a[e]}},f.prototype.addInterval=function(e,t){if(!(0,r.A)(e))throw new s.A("interval is required");if(e.isEmpty)return;const n=this._intervals;if(0===n.length||d.A.greaterThan(e.start,n[n.length-1].stop))return n.push(e),void this._changedEvent.raiseEvent(this);let o,a=(0,i.A)(n,e,A);for(a<0?a=~a:a>0&&e.isStartIncluded&&n[a-1].isStartIncluded&&n[a-1].start.equals(e.start)?--a:a<n.length&&!e.isStartIncluded&&n[a].isStartIncluded&&n[a].start.equals(e.start)&&++a,a>0&&(o=d.A.compare(n[a-1].stop,e.start),(o>0||0===o&&(n[a-1].isStopIncluded||e.isStartIncluded))&&(((0,r.A)(t)?t(n[a-1].data,e.data):n[a-1].data===e.data)?(e=d.A.greaterThan(e.stop,n[a-1].stop)?new h.A({start:n[a-1].start,stop:e.stop,isStartIncluded:n[a-1].isStartIncluded,isStopIncluded:e.isStopIncluded,data:e.data}):new h.A({start:n[a-1].start,stop:n[a-1].stop,isStartIncluded:n[a-1].isStartIncluded,isStopIncluded:n[a-1].isStopIncluded||e.stop.equals(n[a-1].stop)&&e.isStopIncluded,data:e.data}),n.splice(a-1,1),--a):(o=d.A.compare(n[a-1].stop,e.stop),(o>0||0===o&&n[a-1].isStopIncluded&&!e.isStopIncluded)&&n.splice(a,0,new h.A({start:e.stop,stop:n[a-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[a-1].isStopIncluded,data:n[a-1].data})),n[a-1]=new h.A({start:n[a-1].start,stop:e.start,isStartIncluded:n[a-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:n[a-1].data}))));a<n.length&&(o=d.A.compare(e.stop,n[a].start),o>0||0===o&&(e.isStopIncluded||n[a].isStartIncluded));)if((0,r.A)(t)?t(n[a].data,e.data):n[a].data===e.data)e=new h.A({start:e.start,stop:d.A.greaterThan(n[a].stop,e.stop)?n[a].stop:e.stop,isStartIncluded:e.isStartIncluded,isStopIncluded:d.A.greaterThan(n[a].stop,e.stop)?n[a].isStopIncluded:e.isStopIncluded,data:e.data}),n.splice(a,1);else{if(n[a]=new h.A({start:e.stop,stop:n[a].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[a].isStopIncluded,data:n[a].data}),!n[a].isEmpty)break;n.splice(a,1)}n.splice(a,0,e),this._changedEvent.raiseEvent(this)},f.prototype.removeInterval=function(e){if(!(0,r.A)(e))throw new s.A("interval is required");if(e.isEmpty)return!1;const t=this._intervals;let n=(0,i.A)(t,e,A);n<0&&(n=~n);let o=!1;for(n>0&&(d.A.greaterThan(t[n-1].stop,e.start)||t[n-1].stop.equals(e.start)&&t[n-1].isStopIncluded&&e.isStartIncluded)&&(o=!0,(d.A.greaterThan(t[n-1].stop,e.stop)||t[n-1].isStopIncluded&&!e.isStopIncluded&&t[n-1].stop.equals(e.stop))&&t.splice(n,0,new h.A({start:e.stop,stop:t[n-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n-1].isStopIncluded,data:t[n-1].data})),t[n-1]=new h.A({start:t[n-1].start,stop:e.start,isStartIncluded:t[n-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:t[n-1].data})),n<t.length&&!e.isStartIncluded&&t[n].isStartIncluded&&e.start.equals(t[n].start)&&(o=!0,t.splice(n,0,new h.A({start:t[n].start,stop:t[n].start,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data})),++n);n<t.length&&d.A.greaterThan(e.stop,t[n].stop);)o=!0,t.splice(n,1);return n<t.length&&e.stop.equals(t[n].stop)&&(o=!0,!e.isStopIncluded&&t[n].isStopIncluded?n+1<t.length&&t[n+1].start.equals(e.stop)&&t[n].data===t[n+1].data?(t.splice(n,1),t[n]=new h.A({start:t[n].start,stop:t[n].stop,isStartIncluded:!0,isStopIncluded:t[n].isStopIncluded,data:t[n].data})):t[n]=new h.A({start:e.stop,stop:e.stop,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data}):t.splice(n,1)),n<t.length&&(d.A.greaterThan(e.stop,t[n].start)||e.stop.equals(t[n].start)&&e.isStopIncluded&&t[n].isStartIncluded)&&(o=!0,t[n]=new h.A({start:e.stop,stop:t[n].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n].isStopIncluded,data:t[n].data})),o&&this._changedEvent.raiseEvent(this),o},f.prototype.intersect=function(e,t,n){if(!(0,r.A)(e))throw new s.A("other is required.");const i=new f;let o=0,a=0;const c=this._intervals,l=e._intervals;for(;o<c.length&&a<l.length;){const e=c[o],s=l[a];if(d.A.lessThan(e.stop,s.start))++o;else if(d.A.lessThan(s.stop,e.start))++a;else{if((0,r.A)(n)||(0,r.A)(t)&&t(e.data,s.data)||!(0,r.A)(t)&&s.data===e.data){const o=h.A.intersect(e,s,new h.A,n);o.isEmpty||i.addInterval(o,t)}d.A.lessThan(e.stop,s.stop)||e.stop.equals(s.stop)&&!e.isStopIncluded&&s.isStopIncluded?++o:++a}}return i},f.fromJulianDateArray=function(e,t){if(!(0,r.A)(e))throw new s.A("options is required.");if(!(0,r.A)(e.julianDates))throw new s.A("options.iso8601Array is required.");(0,r.A)(t)||(t=new f);const n=e.julianDates,i=n.length,a=e.dataCallback,c=(0,o.A)(e.isStartIncluded,!0),l=(0,o.A)(e.isStopIncluded,!0),d=(0,o.A)(e.leadingInterval,!1),A=(0,o.A)(e.trailingInterval,!1);let p,m=0;d&&(++m,p=new h.A({start:u.A.MINIMUM_VALUE,stop:n[0],isStartIncluded:!0,isStopIncluded:!c}),p.data=(0,r.A)(a)?a(p,t.length):t.length,t.addInterval(p));for(let e=0;e<i-1;++e){let o=n[e];const s=n[e+1];p=new h.A({start:o,stop:s,isStartIncluded:t.length!==m||c,isStopIncluded:e===i-2&&l}),p.data=(0,r.A)(a)?a(p,t.length):t.length,t.addInterval(p),o=s}return A&&(p=new h.A({start:n[i-1],stop:u.A.MAXIMUM_VALUE,isStartIncluded:!l,isStopIncluded:!0}),p.data=(0,r.A)(a)?a(p,t.length):t.length,t.addInterval(p)),t};const m=new c.A,_=[0,31,28,31,30,31,30,31,31,30,31,30,31];function g(e,t,n){(0,r.A)(n)||(n=new d.A),d.A.toGregorianDate(e,m);let i=m.millisecond+t.millisecond,o=m.second+t.second,s=m.minute+t.minute,a=m.hour+t.hour,c=m.day+t.day,u=m.month+t.month,h=m.year+t.year;for(i>=1e3&&(o+=Math.floor(i/1e3),i%=1e3),o>=60&&(s+=Math.floor(o/60),o%=60),s>=60&&(a+=Math.floor(s/60),s%=60),a>=24&&(c+=Math.floor(a/24),a%=24),_[2]=(0,l.A)(h)?29:28;c>_[u]||u>=13;)c>_[u]&&(c-=_[u],++u),u>=13&&(--u,h+=Math.floor(u/12),u%=12,++u),_[2]=(0,l.A)(h)?29:28;return m.millisecond=i,m.second=o,m.minute=s,m.hour=a,m.day=c,m.month=u,m.year=h,d.A.fromGregorianDate(m,n)}const y=new d.A,b=/P(?:([\d.,]+)Y)?(?:([\d.,]+)M)?(?:([\d.,]+)W)?(?:([\d.,]+)D)?(?:T(?:([\d.,]+)H)?(?:([\d.,]+)M)?(?:([\d.,]+)S)?)?/;function v(e,t){if(!(0,r.A)(e)||0===e.length)return!1;if(t.year=0,t.month=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.millisecond=0,"P"===e[0]){const n=e.match(b);if(!(0,r.A)(n))return!1;if((0,r.A)(n[1])&&(t.year=Number(n[1].replace(",","."))),(0,r.A)(n[2])&&(t.month=Number(n[2].replace(",","."))),(0,r.A)(n[3])&&(t.day=7*Number(n[3].replace(",","."))),(0,r.A)(n[4])&&(t.day+=Number(n[4].replace(",","."))),(0,r.A)(n[5])&&(t.hour=Number(n[5].replace(",","."))),(0,r.A)(n[6])&&(t.minute=Number(n[6].replace(",","."))),(0,r.A)(n[7])){const e=Number(n[7].replace(",","."));t.second=Math.floor(e),t.millisecond=e%1*1e3}}else"Z"!==e[e.length-1]&&(e+="Z"),d.A.toGregorianDate(d.A.fromIso8601(e,y),t);return t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond}const T=new c.A;f.fromIso8601=function(e,t){if(!(0,r.A)(e))throw new s.A("options is required.");if(!(0,r.A)(e.iso8601))throw new s.A("options.iso8601 is required.");const n=e.iso8601.split("/"),i=d.A.fromIso8601(n[0]),o=d.A.fromIso8601(n[1]),a=[];if(v(n[2],T)){let e=d.A.clone(i);for(a.push(e);d.A.compare(e,o)<0;)e=g(e,T),d.A.compare(o,e)<=0&&d.A.clone(o,e),a.push(e)}else a.push(i,o);return f.fromJulianDateArray({julianDates:a,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},f.fromIso8601DateArray=function(e,t){if(!(0,r.A)(e))throw new s.A("options is required.");if(!(0,r.A)(e.iso8601Dates))throw new s.A("options.iso8601Dates is required.");return f.fromJulianDateArray({julianDates:e.iso8601Dates.map((function(e){return d.A.fromIso8601(e)})),isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},f.fromIso8601DurationArray=function(e,t){if(!(0,r.A)(e))throw new s.A("options is required.");if(!(0,r.A)(e.epoch))throw new s.A("options.epoch is required.");if(!(0,r.A)(e.iso8601Durations))throw new s.A("options.iso8601Durations is required.");const n=e.epoch,i=e.iso8601Durations,a=(0,o.A)(e.relativeToPrevious,!1),c=[];let l,u;const d=i.length;for(let e=0;e<d;++e)(v(i[e],T)||0===e)&&(l=a&&(0,r.A)(u)?g(u,T):g(n,T),c.push(l),u=l);return f.fromJulianDateArray({julianDates:c,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};const w=f},710551:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(267980),o=n(491446),r=n(605971);const s={solve:function(e,t,n,s){if(!((0,o.A)(e)&&e instanceof Array))throw new r.A("The array lower is required.");if(!((0,o.A)(t)&&t instanceof Array))throw new r.A("The array diagonal is required.");if(!((0,o.A)(n)&&n instanceof Array))throw new r.A("The array upper is required.");if(!((0,o.A)(s)&&s instanceof Array))throw new r.A("The array right is required.");if(t.length!==s.length)throw new r.A("diagonal and right must have the same lengths.");if(e.length!==n.length)throw new r.A("lower and upper must have the same lengths.");if(e.length!==t.length-1)throw new r.A("lower and upper must be one less than the length of diagonal.");const a=new Array(n.length),c=new Array(s.length),l=new Array(s.length);let u,d;for(u=0;u<c.length;u++)c[u]=new i.A,l[u]=new i.A;for(a[0]=n[0]/t[0],c[0]=i.A.multiplyByScalar(s[0],1/t[0],c[0]),u=1;u<a.length;++u)d=1/(t[u]-a[u-1]*e[u-1]),a[u]=n[u]*d,c[u]=i.A.subtract(s[u],i.A.multiplyByScalar(c[u-1],e[u-1],c[u]),c[u]),c[u]=i.A.multiplyByScalar(c[u],d,c[u]);for(d=1/(t[u]-a[u-1]*e[u-1]),c[u]=i.A.subtract(s[u],i.A.multiplyByScalar(c[u-1],e[u-1],c[u]),c[u]),c[u]=i.A.multiplyByScalar(c[u],d,c[u]),l[l.length-1]=c[c.length-1],u=l.length-2;u>=0;--u)l[u]=i.A.subtract(c[u],i.A.multiplyByScalar(l[u+1],a[u],l[u]),l[u]);return l}}},566123:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:-1,PARTIAL:0,FULL:1})},660419:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(660662),o=n(267980),r=n(571804),s=n(419061),a=n(491446),c=n(605971),l=n(610750),u=n(944479),d=n(305439),h=n(46362),A=n(874915),f=n(367817),p=n(402330),m=n(769534),_=n(266180);const g=new o.A,y=new o.A,b=new o.A,v=new o.A,T=new o.A,w=new o.A,E=new o.A;function S(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).positions,n=e.maximumHeights,i=e.minimumHeights;if(!(0,a.A)(t))throw new c.A("options.positions is required.");if((0,a.A)(n)&&n.length!==t.length)throw new c.A("options.positions and options.maximumHeights must have the same length.");if((0,a.A)(i)&&i.length!==t.length)throw new c.A("options.positions and options.minimumHeights must have the same length.");const r=(0,s.A)(e.vertexFormat,m.A.DEFAULT),u=(0,s.A)(e.granularity,f.A.RADIANS_PER_DEGREE),d=(0,s.A)(e.ellipsoid,l.A.WGS84);this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._vertexFormat=m.A.clone(r),this._granularity=u,this._ellipsoid=l.A.clone(d),this._workerName="createWallGeometry";let h=1+t.length*o.A.packedLength+2;(0,a.A)(i)&&(h+=i.length),(0,a.A)(n)&&(h+=n.length),this.packedLength=h+l.A.packedLength+m.A.packedLength+1}S.pack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("value is required");if(!(0,a.A)(t))throw new c.A("array is required");let i;n=(0,s.A)(n,0);const r=e._positions;let u=r.length;for(t[n++]=u,i=0;i<u;++i,n+=o.A.packedLength)o.A.pack(r[i],t,n);const d=e._minimumHeights;if(u=(0,a.A)(d)?d.length:0,t[n++]=u,(0,a.A)(d))for(i=0;i<u;++i)t[n++]=d[i];const h=e._maximumHeights;if(u=(0,a.A)(h)?h.length:0,t[n++]=u,(0,a.A)(h))for(i=0;i<u;++i)t[n++]=h[i];return l.A.pack(e._ellipsoid,t,n),n+=l.A.packedLength,m.A.pack(e._vertexFormat,t,n),t[n+=m.A.packedLength]=e._granularity,t};const C=l.A.clone(l.A.UNIT_SPHERE),x=new m.A,I={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:C,vertexFormat:x,granularity:void 0};S.unpack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("array is required");let i;t=(0,s.A)(t,0);let r=e[t++];const u=new Array(r);for(i=0;i<r;++i,t+=o.A.packedLength)u[i]=o.A.unpack(e,t);let d,h;if(r=e[t++],r>0)for(d=new Array(r),i=0;i<r;++i)d[i]=e[t++];if(r=e[t++],r>0)for(h=new Array(r),i=0;i<r;++i)h[i]=e[t++];const A=l.A.unpack(e,t,C);t+=l.A.packedLength;const f=m.A.unpack(e,t,x),p=e[t+=m.A.packedLength];return(0,a.A)(n)?(n._positions=u,n._minimumHeights=d,n._maximumHeights=h,n._ellipsoid=l.A.clone(A,n._ellipsoid),n._vertexFormat=m.A.clone(f,n._vertexFormat),n._granularity=p,n):(I.positions=u,I.minimumHeights=d,I.maximumHeights=h,I.granularity=p,new S(I))},S.fromConstantHeights=function(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).positions;if(!(0,a.A)(t))throw new c.A("options.positions is required.");let n,i;const o=e.minimumHeight,r=e.maximumHeight,l=(0,a.A)(o),u=(0,a.A)(r);if(l||u){const e=t.length;n=l?new Array(e):void 0,i=u?new Array(e):void 0;for(let t=0;t<e;++t)l&&(n[t]=o),u&&(i[t]=r)}return new S({positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid,vertexFormat:e.vertexFormat})},S.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,s=e._maximumHeights,c=e._vertexFormat,l=e._granularity,m=e._ellipsoid,S=_.A.computePositions(m,t,s,n,l,!0);if(!(0,a.A)(S))return;const C=S.bottomPositions,x=S.topPositions,I=S.numCorners;let P=x.length,D=2*P;const O=c.position?new Float64Array(D):void 0,L=c.normal?new Float32Array(D):void 0,N=c.tangent?new Float32Array(D):void 0,M=c.bitangent?new Float32Array(D):void 0,R=c.st?new Float32Array(D/3*2):void 0;let F,B=0,U=0,k=0,V=0,H=0,z=E,G=w,j=T,W=!0;P/=3;let q=0;const Y=1/(P-I-1);for(F=0;F<P;++F){const e=3*F,t=o.A.fromArray(x,e,g),n=o.A.fromArray(C,e,y);if(c.position&&(O[B++]=n.x,O[B++]=n.y,O[B++]=n.z,O[B++]=t.x,O[B++]=t.y,O[B++]=t.z),c.st&&(R[H++]=q,R[H++]=0,R[H++]=q,R[H++]=1),c.normal||c.tangent||c.bitangent){let n=o.A.clone(o.A.ZERO,v);const i=o.A.subtract(t,m.geodeticSurfaceNormal(t,y),y);if(F+1<P&&(n=o.A.fromArray(x,e+3,v)),W){const e=o.A.subtract(n,t,b),r=o.A.subtract(i,t,g);z=o.A.normalize(o.A.cross(r,e,z),z),W=!1}o.A.equalsEpsilon(t,n,f.A.EPSILON10)?W=!0:(q+=Y,c.tangent&&(G=o.A.normalize(o.A.subtract(n,t,G),G)),c.bitangent&&(j=o.A.normalize(o.A.cross(z,G,j),j))),c.normal&&(L[U++]=z.x,L[U++]=z.y,L[U++]=z.z,L[U++]=z.x,L[U++]=z.y,L[U++]=z.z),c.tangent&&(N[V++]=G.x,N[V++]=G.y,N[V++]=G.z,N[V++]=G.x,N[V++]=G.y,N[V++]=G.z),c.bitangent&&(M[k++]=j.x,M[k++]=j.y,M[k++]=j.z,M[k++]=j.x,M[k++]=j.y,M[k++]=j.z)}}const X=new h.A;c.position&&(X.position=new d.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:O})),c.normal&&(X.normal=new d.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:L})),c.tangent&&(X.tangent=new d.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:N})),c.bitangent&&(X.bitangent=new d.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:M})),c.st&&(X.st=new d.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:2,values:R}));const J=D/3;D-=6*(I+1);const Q=A.A.createTypedArray(J,D);let $=0;for(F=0;F<J-2;F+=2){const e=F,t=F+2,n=o.A.fromArray(O,3*e,g),i=o.A.fromArray(O,3*t,y);if(o.A.equalsEpsilon(n,i,f.A.EPSILON10))continue;const r=F+1,s=F+3;Q[$++]=r,Q[$++]=e,Q[$++]=s,Q[$++]=s,Q[$++]=e,Q[$++]=t}return new u.A({attributes:X,indices:Q,primitiveType:p.A.TRIANGLES,boundingSphere:new i.A.fromVertices(O)})};const P=S},266180:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(263604),o=n(267980),r=n(336946),s=n(491446),a=n(367817),c=n(870349);const l={};function u(e,t){return a.A.equalsEpsilon(e.latitude,t.latitude,a.A.EPSILON10)&&a.A.equalsEpsilon(e.longitude,t.longitude,a.A.EPSILON10)}const d=new r.A,h=new r.A,A=new Array(2),f=new Array(2),p={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};l.computePositions=function(e,t,n,l,m,_){const g=function(e,t,n,a){const c=(t=(0,i.A)(t,o.A.equalsEpsilon)).length;if(c<2)return;const l=(0,s.A)(a),A=(0,s.A)(n),f=new Array(c),p=new Array(c),m=new Array(c),_=t[0];f[0]=_;const g=e.cartesianToCartographic(_,d);A&&(g.height=n[0]),p[0]=g.height,m[0]=l?a[0]:0;let y=p[0]===m[0],b=1;for(let i=1;i<c;++i){const o=t[i],s=e.cartesianToCartographic(o,h);A&&(s.height=n[i]),y=y&&0===s.height,u(g,s)?g.height<s.height&&(p[b-1]=s.height):(f[b]=o,p[b]=s.height,m[b]=l?a[i]:0,y=y&&p[b]===m[b],r.A.clone(s,g),++b)}return y||b<2?void 0:(f.length=b,p.length=b,m.length=b,{positions:f,topHeights:p,bottomHeights:m})}(e,t,n,l);if(!(0,s.A)(g))return;t=g.positions,n=g.topHeights,l=g.bottomHeights;const y=t.length,b=y-2;let v,T;const w=a.A.chordLength(m,e.maximumRadius),E=p;if(E.minDistance=w,E.ellipsoid=e,_){let e,i=0;for(e=0;e<y-1;e++)i+=c.A.numberOfPoints(t[e],t[e+1],w)+1;v=new Float64Array(3*i),T=new Float64Array(3*i);const o=A,r=f;E.positions=o,E.height=r;let s=0;for(e=0;e<y-1;e++){o[0]=t[e],o[1]=t[e+1],r[0]=n[e],r[1]=n[e+1];const i=c.A.generateArc(E);v.set(i,s),r[0]=l[e],r[1]=l[e+1],T.set(c.A.generateArc(E),s),s+=i.length}}else E.positions=t,E.height=n,v=new Float64Array(c.A.generateArc(E)),E.height=l,T=new Float64Array(c.A.generateArc(E));return{bottomPositions:T,topPositions:v,numCorners:b}};const m=l},903473:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(660662),o=n(267980),r=n(571804),s=n(419061),a=n(491446),c=n(605971),l=n(610750),u=n(944479),d=n(305439),h=n(46362),A=n(874915),f=n(367817),p=n(402330),m=n(266180);const _=new o.A,g=new o.A;function y(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).positions,n=e.maximumHeights,i=e.minimumHeights;if(!(0,a.A)(t))throw new c.A("options.positions is required.");if((0,a.A)(n)&&n.length!==t.length)throw new c.A("options.positions and options.maximumHeights must have the same length.");if((0,a.A)(i)&&i.length!==t.length)throw new c.A("options.positions and options.minimumHeights must have the same length.");const r=(0,s.A)(e.granularity,f.A.RADIANS_PER_DEGREE),u=(0,s.A)(e.ellipsoid,l.A.WGS84);this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._granularity=r,this._ellipsoid=l.A.clone(u),this._workerName="createWallOutlineGeometry";let d=1+t.length*o.A.packedLength+2;(0,a.A)(i)&&(d+=i.length),(0,a.A)(n)&&(d+=n.length),this.packedLength=d+l.A.packedLength+1}y.pack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("value is required");if(!(0,a.A)(t))throw new c.A("array is required");let i;n=(0,s.A)(n,0);const r=e._positions;let u=r.length;for(t[n++]=u,i=0;i<u;++i,n+=o.A.packedLength)o.A.pack(r[i],t,n);const d=e._minimumHeights;if(u=(0,a.A)(d)?d.length:0,t[n++]=u,(0,a.A)(d))for(i=0;i<u;++i)t[n++]=d[i];const h=e._maximumHeights;if(u=(0,a.A)(h)?h.length:0,t[n++]=u,(0,a.A)(h))for(i=0;i<u;++i)t[n++]=h[i];return l.A.pack(e._ellipsoid,t,n),t[n+=l.A.packedLength]=e._granularity,t};const b=l.A.clone(l.A.UNIT_SPHERE),v={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:b,granularity:void 0};y.unpack=function(e,t,n){if(!(0,a.A)(e))throw new c.A("array is required");let i;t=(0,s.A)(t,0);let r=e[t++];const u=new Array(r);for(i=0;i<r;++i,t+=o.A.packedLength)u[i]=o.A.unpack(e,t);let d,h;if(r=e[t++],r>0)for(d=new Array(r),i=0;i<r;++i)d[i]=e[t++];if(r=e[t++],r>0)for(h=new Array(r),i=0;i<r;++i)h[i]=e[t++];const A=l.A.unpack(e,t,b),f=e[t+=l.A.packedLength];return(0,a.A)(n)?(n._positions=u,n._minimumHeights=d,n._maximumHeights=h,n._ellipsoid=l.A.clone(A,n._ellipsoid),n._granularity=f,n):(v.positions=u,v.minimumHeights=d,v.maximumHeights=h,v.granularity=f,new y(v))},y.fromConstantHeights=function(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).positions;if(!(0,a.A)(t))throw new c.A("options.positions is required.");let n,i;const o=e.minimumHeight,r=e.maximumHeight,l=(0,a.A)(o),u=(0,a.A)(r);if(l||u){const e=t.length;n=l?new Array(e):void 0,i=u?new Array(e):void 0;for(let t=0;t<e;++t)l&&(n[t]=o),u&&(i[t]=r)}return new y({positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid})},y.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,s=e._maximumHeights,c=e._granularity,l=e._ellipsoid,y=m.A.computePositions(l,t,s,n,c,!1);if(!(0,a.A)(y))return;const b=y.bottomPositions,v=y.topPositions;let T=v.length,w=2*T;const E=new Float64Array(w);let S,C=0;for(T/=3,S=0;S<T;++S){const e=3*S,t=o.A.fromArray(v,e,_),n=o.A.fromArray(b,e,g);E[C++]=n.x,E[C++]=n.y,E[C++]=n.z,E[C++]=t.x,E[C++]=t.y,E[C++]=t.z}const x=new h.A({position:new d.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:E})}),I=w/3;w=2*I-4+I;const P=A.A.createTypedArray(I,w);let D=0;for(S=0;S<I-2;S+=2){const e=S,t=S+2,n=o.A.fromArray(E,3*e,_),i=o.A.fromArray(E,3*t,g);if(o.A.equalsEpsilon(n,i,f.A.EPSILON10))continue;const r=S+1,s=S+3;P[D++]=r,P[D++]=e,P[D++]=r,P[D++]=s,P[D++]=e,P[D++]=t}return P[D++]=I-2,P[D++]=I-1,new u.A({attributes:x,indices:P,primitiveType:p.A.LINES,boundingSphere:new i.A.fromVertices(E)})};const T=y},41076:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(434067),o=n(419061),r=n(491446),s=n(610750),a=n(697422),c=n(414305);function l(e){if(e=(0,o.A)(e,o.A.EMPTY_OBJECT),this._ellipsoid=(0,o.A)(e.ellipsoid,s.A.WGS84),this._numberOfLevelZeroTilesX=(0,o.A)(e.numberOfLevelZeroTilesX,1),this._numberOfLevelZeroTilesY=(0,o.A)(e.numberOfLevelZeroTilesY,1),this._projection=new c.A(this._ellipsoid),(0,r.A)(e.rectangleSouthwestInMeters)&&(0,r.A)(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{const e=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new i.A(-e,-e),this._rectangleNortheastInMeters=new i.A(e,e)}const t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new a.A(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(l.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),l.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},l.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},l.prototype.rectangleToNativeRectangle=function(e,t){const n=this._projection,i=n.project(a.A.southwest(e)),o=n.project(a.A.northeast(e));return(0,r.A)(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new a.A(i.x,i.y,o.x,o.y)},l.prototype.tileXYToNativeRectangle=function(e,t,n,i){const o=this.getNumberOfXTilesAtLevel(n),s=this.getNumberOfYTilesAtLevel(n),c=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,l=this._rectangleSouthwestInMeters.x+e*c,u=this._rectangleSouthwestInMeters.x+(e+1)*c,d=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/s,h=this._rectangleNortheastInMeters.y-t*d,A=this._rectangleNortheastInMeters.y-(t+1)*d;return(0,r.A)(i)?(i.west=l,i.south=A,i.east=u,i.north=h,i):new a.A(l,A,u,h)},l.prototype.tileXYToRectangle=function(e,t,n,o){const r=this.tileXYToNativeRectangle(e,t,n,o),s=this._projection,a=s.unproject(new i.A(r.west,r.south)),c=s.unproject(new i.A(r.east,r.north));return r.west=a.longitude,r.south=a.latitude,r.east=c.longitude,r.north=c.latitude,r},l.prototype.positionToTileXY=function(e,t,n){const o=this._rectangle;if(!a.A.contains(o,e))return;const s=this.getNumberOfXTilesAtLevel(t),c=this.getNumberOfYTilesAtLevel(t),l=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/s,u=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/c,d=this._projection.project(e);let h=(d.x-this._rectangleSouthwestInMeters.x)/l|0;h>=s&&(h=s-1);let A=(this._rectangleNortheastInMeters.y-d.y)/u|0;return A>=c&&(A=c-1),(0,r.A)(n)?(n.x=h,n.y=A,n):new i.A(h,A)};const u=l},635692:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(874915),r=n(402330);const s={createWireframeIndices:function(e,t,n){const s=(0,i.A)(n);return e===r.A.TRIANGLES?s?function(e,t){const n=t.length,i=o.A.createTypedArray(e,2*n);let r=0;for(let e=0;e<n;e+=3){const n=t[e],o=t[e+1],s=t[e+2];i[r++]=n,i[r++]=o,i[r++]=o,i[r++]=s,i[r++]=s,i[r++]=n}return i}(t,n):function(e){const t=o.A.createTypedArray(e,2*e),n=e;let i=0;for(let e=0;e<n;e+=3)t[i++]=e,t[i++]=e+1,t[i++]=e+1,t[i++]=e+2,t[i++]=e+2,t[i++]=e;return t}(t):e===r.A.TRIANGLE_STRIP?s?function(e,t){const n=t.length-2,i=2+4*n,r=o.A.createTypedArray(e,i);let s=0;r[s++]=t[0],r[s++]=t[1];for(let e=0;e<n;e++){const n=t[e],i=t[e+1],o=t[e+2];r[s++]=i,r[s++]=o,r[s++]=o,r[s++]=n}return r}(t,n):function(e){const t=e-2,n=2+4*t,i=o.A.createTypedArray(e,n);let r=0;i[r++]=0,i[r++]=1;for(let e=0;e<t;e++)i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=e;return i}(t):e===r.A.TRIANGLE_FAN?s?function(e,t){const n=t.length-2,i=2+4*n,r=o.A.createTypedArray(e,i);let s=0;const a=t[0];r[s++]=a,r[s++]=t[1];for(let e=0;e<n;e++){const n=t[e+1],i=t[e+2];r[s++]=n,r[s++]=i,r[s++]=i,r[s++]=a}return r}(t,n):function(e){const t=e-2,n=2+4*t,i=o.A.createTypedArray(e,n);let r=0;i[r++]=0,i[r++]=1;for(let e=0;e<t;e++)i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=0;return i}(t):void 0},getWireframeIndicesCount:function(e,t){return e===r.A.TRIANGLES?2*t:e===r.A.TRIANGLE_STRIP||e===r.A.TRIANGLE_FAN?2+4*(t-2):t}},a=s},75584:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(564453),o=n(419061);const r=function(e){return e=(0,o.A)(e,o.A.EMPTY_OBJECT),i.A.fromIonAssetId(1,{requestVertexNormals:(0,o.A)(e.requestVertexNormals,!1),requestWaterMask:(0,o.A)(e.requestWaterMask,!1)})}},223460:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(961645),o=n(267980),r=n(336946),s=n(367817);const a=32767,c=new r.A,l=new o.A,u=function(e,t,n,u,d){const h=e.length/3,A=e.subarray(0,h),f=e.subarray(h,2*h),p=e.subarray(2*h,3*h);i.A.zigZagDeltaDecode(A,f,p);const m=new Float64Array(e.length);for(let e=0;e<h;++e){const i=A[e],h=f[e],_=p[e],g=s.A.lerp(t.west,t.east,i/a),y=s.A.lerp(t.south,t.north,h/a),b=s.A.lerp(n,u,_/a),v=r.A.fromRadians(g,y,b,c),T=d.cartographicToCartesian(v,l);o.A.pack(T,m,3*e)}return m}},522216:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e){let t;const n=e.name,o=e.message;t=(0,i.A)(n)&&(0,i.A)(o)?`${n}: ${o}`:e.toString();const r=e.stack;return(0,i.A)(r)&&(t+=`\n${r}`),t}},869467:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n){const i=new Uint8ClampedArray(e.buffer),o=new ImageData(i,t,n),r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").putImageData(o,0,0),r}},604752:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(241839);const o=function(e,t,n){return JSON.parse((0,i.A)(e,t,n))}},452684:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(419061),o=n(241839);const r=function(e,t){return t=(0,i.A)(t,0),(0,o.A)(e,t,Math.min(4,e.length))}},241839:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(419061),o=n(491446),r=n(605971),s=n(123245);function a(e,t,n){if(!(0,o.A)(e))throw new r.A("uint8Array is required.");if(t<0)throw new r.A("byteOffset cannot be negative.");if(n<0)throw new r.A("byteLength cannot be negative.");if(t+n>e.byteLength)throw new r.A("sub-region exceeds array bounds.");return t=(0,i.A)(t,0),n=(0,i.A)(n,e.byteLength-t),e=e.subarray(t,t+n),a.decode(e)}function c(e,t,n){return t<=e&&e<=n}a.decodeWithTextDecoder=function(e){return new TextDecoder("utf-8").decode(e)},a.decodeWithFromCharCode=function(e){let t="";const n=function(e){let t=0,n=0,i=0,o=128,r=191;const a=[],l=e.length;for(let u=0;u<l;++u){const l=e[u];if(0===i){if(c(l,0,127)){a.push(l);continue}if(c(l,194,223)){i=1,t=31&l;continue}if(c(l,224,239)){224===l&&(o=160),237===l&&(r=159),i=2,t=15&l;continue}if(c(l,240,244)){240===l&&(o=144),244===l&&(r=143),i=3,t=7&l;continue}throw new s.A("String decoding failed.")}c(l,o,r)?(o=128,r=191,t=t<<6|63&l,++n,n===i&&(a.push(t),t=i=n=0)):(t=i=n=0,o=128,r=191,--u)}return a}(e),i=n.length;for(let e=0;e<i;++e){let i=n[e];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return t},"undefined"!=typeof TextDecoder?a.decode=a.decodeWithTextDecoder:a.decode=a.decodeWithFromCharCode;const l=a},404547:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(419061),r=n(491446),s=n(744603);const a=function(e){const t=e.uint8Array,n=e.format,a=e.request,c=(0,o.A)(e.flipY,!1),l=(0,o.A)(e.skipColorSpaceConversion,!1);i.A.typeOf.object("uint8Array",t),i.A.typeOf.string("format",n);const u=new Blob([t],{type:n});let d;return s.A.supportsImageBitmapOptions().then((function(e){return e?Promise.resolve(s.A.createImageBitmapFromBlob(u,{flipY:c,premultiplyAlpha:!1,skipColorSpaceConversion:l})):(d=window.URL.createObjectURL(u),new s.A({url:d,request:a}).fetchImage({flipY:c,skipColorSpaceConversion:l}))})).then((function(e){return(0,r.A)(d)&&window.URL.revokeObjectURL(d),e})).catch((function(e){return(0,r.A)(d)&&window.URL.revokeObjectURL(d),Promise.reject(e)}))}},108303:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(605971);const r=[],s=[];function a(e,t,n,i,o){if(i>=o)return;const c=Math.floor(.5*(i+o));a(e,t,n,i,c),a(e,t,n,c+1,o),function(e,t,n,i,o,a){const c=o-i+1,l=a-o,u=r,d=s;let h,A;for(h=0;h<c;++h)u[h]=e[i+h];for(A=0;A<l;++A)d[A]=e[o+A+1];h=0,A=0;for(let o=i;o<=a;++o){const i=u[h],r=d[A];h<c&&(A>=l||t(i,r,n)<=0)?(e[o]=i,++h):A<l&&(e[o]=r,++A)}}(e,t,n,i,c,o)}const c=function(e,t,n){if(!(0,i.A)(e))throw new o.A("array is required.");if(!(0,i.A)(t))throw new o.A("comparator is required.");const c=e.length,l=Math.ceil(.5*c);r.length=l,s.length=l,a(e,t,n,0,c-1),r.length=0,s.length=0}},271868:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(367817);const o=function(e){const t=document.createElement("canvas");return t.width=i.A.nextPowerOfTwo(e.width),t.height=i.A.nextPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}},252544:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(491446);function r(e,t){return e.length?function(e,t){const n=e[0],i=n.terrainProvider.requestTileGeometry(n.x,n.y,n.level);if(!i)return!1;const o=i.then(function(e){const t=e.positions,n=e.tilingScheme.tileXYToRectangle(e.x,e.y,e.level);return function(i){let o=!1;for(let e=0;e<t.length;++e)if(!s(t[e],i,n)){o=!0;break}return o?i.createMesh({tilingScheme:e.tilingScheme,x:e.x,y:e.y,level:e.level,throttle:!1}).then((function(){for(let e=0;e<t.length;++e)s(t[e],i,n)})):Promise.resolve()}}(n)).catch(function(e){const t=e.positions;return function(){for(let e=0;e<t.length;++e)t[e].height=void 0}}(n));return e.shift(),t.push(o),!0}(e,t)?r(e,t):new Promise((function(e){setTimeout(e,100)})).then((()=>r(e,t))):Promise.resolve()}function s(e,t,n){const i=t.interpolateHeight(n,e.longitude,e.latitude);return void 0!==i&&(e.height=i,!0)}const a=async function(e,t,n){return i.A.typeOf.object("terrainProvider",e),i.A.typeOf.number("level",t),i.A.defined("positions",n),(0,o.A)(e._readyPromise)?await e._readyPromise:(0,o.A)(e.readyPromise)&&await e.readyPromise,function(e,t,n){const i=e.tilingScheme;let s;const a=[],c={};for(s=0;s<n.length;++s){const r=i.positionToTileXY(n[s],t);if(!(0,o.A)(r))continue;const l=r.toString();if(!c.hasOwnProperty(l)){const n={x:r.x,y:r.y,level:t,tilingScheme:i,terrainProvider:e,positions:[]};c[l]=n,a.push(n)}c[l].positions.push(n[s])}const l=[];return r(a,l).then((function(){return Promise.all(l).then((function(){return n}))}))}(e,t,n)}},448871:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(434067),o=n(491446),r=n(605971),s=n(252544);const a=new i.A,c=async function e(t,n){if(!(0,o.A)(t))throw new r.A("terrainProvider is required.");if(!(0,o.A)(n))throw new r.A("positions is required.");const i=[],c=[];(0,o.A)(t._readyPromise)?await t._readyPromise:(0,o.A)(t.readyPromise)&&await t.readyPromise;const l=t.availability;if(!(0,o.A)(l))throw new r.A("sampleTerrainMostDetailed requires a terrain provider that has tile availability.");const u=[];for(let e=0;e<n.length;++e){const r=n[e],s=l.computeMaximumLevelAtPosition(r);if(c[e]=s,0===s){t.tilingScheme.positionToTileXY(r,1,a);const e=t.loadTileDataAvailability(a.x,a.y,1);(0,o.A)(e)&&u.push(e)}let d=i[s];(0,o.A)(d)||(i[s]=d=[]),d.push(r)}await Promise.all(u),await Promise.all(i.map((function(e,n){if((0,o.A)(e))return(0,s.A)(t,n,e)})));const d=[];for(let e=0;e<n.length;++e){const t=n[e];l.computeMaximumLevelAtPosition(t)!==c[e]&&d.push(t)}return d.length>0&&await e(t,d),n}},798777:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(288787),o=n(647934),r=n(434067),s=n(267980),a=n(41476),c=n(491446),l=n(677354),u=n(605971),d=n(853331),h=n(290176),A=n(63316),f=n(337632),p=n(742558),m=n(810600),_=n(46257);const g=a.A.WHITE,y=s.A.ZERO,b=A.A.NONE,v=r.A.ZERO,T=s.A.ZERO,w=f.A.CENTER,E=p.A.CENTER,S=new s.A,C=new a.A,x=new s.A,I=new r.A,P=new h.A,D=new h.A,O=new h.A,L=new o.A,N=new d.A;function M(e){this.entity=e,this.billboard=void 0,this.textureValue=void 0}function R(e,t){if(!(0,c.A)(e))throw new u.A("entityCluster is required.");if(!(0,c.A)(t))throw new u.A("entityCollection is required.");t.collectionChanged.addEventListener(R.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}function F(e,t,n){(0,c.A)(e)&&(e.billboard=void 0,n.removeBillboard(t))}R.prototype.update=function(e){if(!(0,c.A)(e))throw new u.A("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],r=o.entity,s=r._billboard;let a,l,u=o.billboard,d=r.isShowing&&r.isAvailable(e)&&_.A.getValueOrDefault(s._show,e,!0);if(d&&(l=_.A.getValueOrUndefined(r._position,e,S),a=_.A.getValueOrUndefined(s._image,e),d=(0,c.A)(l)&&(0,c.A)(a)),!d){F(o,r,n);continue}_.A.isConstant(r._position)||(n._clusterDirty=!0),(0,c.A)(u)||(u=n.getBillboard(r),u.id=r,u.image=void 0,o.billboard=u),u.show=d,(0,c.A)(u.image)&&o.textureValue===a||(u.image=a,o.textureValue=a),u.position=l,u.color=_.A.getValueOrDefault(s._color,e,g,C),u.eyeOffset=_.A.getValueOrDefault(s._eyeOffset,e,y,x),u.heightReference=_.A.getValueOrDefault(s._heightReference,e,b),u.pixelOffset=_.A.getValueOrDefault(s._pixelOffset,e,v,I),u.scale=_.A.getValueOrDefault(s._scale,e,1),u.rotation=_.A.getValueOrDefault(s._rotation,e,0),u.alignedAxis=_.A.getValueOrDefault(s._alignedAxis,e,T),u.horizontalOrigin=_.A.getValueOrDefault(s._horizontalOrigin,e,w),u.verticalOrigin=_.A.getValueOrDefault(s._verticalOrigin,e,E),u.width=_.A.getValueOrUndefined(s._width,e),u.height=_.A.getValueOrUndefined(s._height,e),u.scaleByDistance=_.A.getValueOrUndefined(s._scaleByDistance,e,P),u.translucencyByDistance=_.A.getValueOrUndefined(s._translucencyByDistance,e,D),u.pixelOffsetScaleByDistance=_.A.getValueOrUndefined(s._pixelOffsetScaleByDistance,e,O),u.sizeInMeters=_.A.getValueOrDefault(s._sizeInMeters,e,!1),u.distanceDisplayCondition=_.A.getValueOrUndefined(s._distanceDisplayCondition,e,N),u.disableDepthTestDistance=_.A.getValueOrUndefined(s._disableDepthTestDistance,e);const h=_.A.getValueOrUndefined(s._imageSubRegion,e,L);(0,c.A)(h)&&u.setImageSubRegion(u._imageId,h)}return!0},R.prototype.getBoundingSphere=function(e,t){if(!(0,c.A)(e))throw new u.A("entity is required.");if(!(0,c.A)(t))throw new u.A("result is required.");const n=this._items.get(e.id);if(!(0,c.A)(n)||!(0,c.A)(n.billboard))return m.A.FAILED;const i=n.billboard;if(i.heightReference===A.A.NONE)t.center=s.A.clone(i.position,t.center);else{if(!(0,c.A)(i._clampedPosition))return m.A.PENDING;t.center=s.A.clone(i._clampedPosition,t.center)}return t.radius=0,m.A.DONE},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(R.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeBillboard(e[t]);return(0,l.A)(this)},R.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._items,a=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,c.A)(r._billboard)&&(0,c.A)(r._position)&&s.set(r.id,new M(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,c.A)(r._billboard)&&(0,c.A)(r._position)?s.contains(r.id)||s.set(r.id,new M(r)):(F(s.get(r.id),r,a),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],F(s.get(r.id),r,a),s.remove(r.id)};const B=R},810600:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({DONE:0,PENDING:1,FAILED:2})},467466:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(554630),o=n(854894),r=n(267980),s=n(369031),a=n(41476),c=n(433235),l=n(491446),u=n(605971),d=n(330926),h=n(75200),A=n(794554),f=n(32655),p=n(852575),m=n(708857),_=n(63316),g=n(551549),y=n(612123),b=n(312421),v=n(799086),T=n(286299),w=n(764729),E=n(46257);const S=r.A.ZERO,C=new r.A,x=new r.A,I=new a.A;function P(e){this.id=e,this.vertexFormat=void 0,this.dimensions=void 0,this.offsetAttribute=void 0}function D(e,t){T.A.call(this,{entity:e,scene:t,geometryOptions:new P(e),geometryPropertyName:"box",observedPropertyNames:["availability","position","orientation","box"]}),this._onEntityPropertyChanged(e,"box",e.box,void 0)}function O(e,t,n){v.A.call(this,e,t,n)}(0,l.A)(Object.create)&&(D.prototype=Object.create(T.A.prototype),D.prototype.constructor=D),Object.defineProperties(D.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),D.prototype.createFillGeometryInstance=function(e){if(s.A.defined("time",e),!this._fillEnabled)throw new u.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o=new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),r=this._distanceDisplayConditionProperty.getValue(e),A={show:o,distanceDisplayCondition:d.A.fromDistanceDisplayCondition(r),color:void 0,offset:void 0};if(this._materialProperty instanceof b.A){let t;(0,l.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,I)),(0,l.A)(t)||(t=a.A.WHITE),A.color=c.A.fromColor(t)}return(0,l.A)(this._options.offsetAttribute)&&(A.offset=p.A.fromCartesian3(E.A.getValueOrDefault(this._terrainOffsetProperty,e,S,C))),new h.A({id:t,geometry:i.A.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:A})},D.prototype.createOutlineGeometryInstance=function(e){if(s.A.defined("time",e),!this._outlineEnabled)throw new u.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=E.A.getValueOrDefault(this._outlineColorProperty,e,a.A.BLACK,I),r=this._distanceDisplayConditionProperty.getValue(e),A={show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:c.A.fromColor(i),distanceDisplayCondition:d.A.fromDistanceDisplayCondition(r),offset:void 0};return(0,l.A)(this._options.offsetAttribute)&&(A.offset=p.A.fromCartesian3(E.A.getValueOrDefault(this._terrainOffsetProperty,e,S,C))),new h.A({id:t,geometry:o.A.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:A})},D.prototype._computeCenter=function(e,t){return E.A.getValueOrUndefined(this._entity.position,e,t)},D.prototype._isHidden=function(e,t){return!(0,l.A)(t.dimensions)||!(0,l.A)(e.position)||T.A.prototype._isHidden.call(this,e,t)},D.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&E.A.isConstant(e.orientation)&&t.dimensions.isConstant&&E.A.isConstant(t.outlineWidth))},D.prototype._setStaticOptions=function(e,t){const n=E.A.getValueOrDefault(t.heightReference,f.A.MINIMUM_VALUE,_.A.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof b.A?y.A.VERTEX_FORMAT:g.A.MaterialSupport.TEXTURED.vertexFormat,i.dimensions=t.dimensions.getValue(f.A.MINIMUM_VALUE,i.dimensions),i.offsetAttribute=n!==_.A.NONE?A.A.ALL:void 0},D.prototype._onEntityPropertyChanged=w.A,D.DynamicGeometryUpdater=O,(0,l.A)(Object.create)&&(O.prototype=Object.create(v.A.prototype),O.prototype.constructor=O),O.prototype._isHidden=function(e,t,n){const i=E.A.getValueOrUndefined(e.position,n,x),o=this._options.dimensions;return!(0,l.A)(i)||!(0,l.A)(o)||v.A.prototype._isHidden.call(this,e,t,n)},O.prototype._setOptions=function(e,t,n){const i=E.A.getValueOrDefault(t.heightReference,n,_.A.NONE),o=this._options;o.dimensions=E.A.getValueOrUndefined(t.dimensions,n,o.dimensions),o.offsetAttribute=i!==_.A.NONE?A.A.ALL:void 0};const L=D},10082:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(605971),r=n(955943);function s(e,t){this._callback=void 0,this._isConstant=void 0,this._definitionChanged=new r.A,this.setCallback(e,t)}Object.defineProperties(s.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}}),s.prototype.getValue=function(e,t){return this._callback(e,t)},s.prototype.setCallback=function(e,t){if(!(0,i.A)(e))throw new o.A("callback is required.");if(!(0,i.A)(t))throw new o.A("isConstant is required.");const n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)},s.prototype.equals=function(e){return this===e||e instanceof s&&this._callback===e._callback&&this._isConstant===e._isConstant};const a=s},592493:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(288787),o=n(660662),r=n(491446),s=n(677354),a=n(605971),c=n(584164),l=n(744603),u=n(855927),d=n(810600),h=n(46257);const A=new c.A;function f(e,t){if(!(0,r.A)(e))throw new a.A("scene is required.");if(!(0,r.A)(t))throw new a.A("entityCollection is required.");t.collectionChanged.addEventListener(f.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._tilesetHash={},this._entitiesToVisualize=new i.A,this._onCollectionChanged(t,t.values,[],[])}function p(e,t,n,i){const o=n[t.id];(0,r.A)(o)&&((0,r.A)(o.tilesetPrimitive)&&i.removeAndDestroy(o.tilesetPrimitive),delete n[t.id])}async function m(e,t,n,i){t[n.id]={url:e.url,loadFail:!1};try{const o=await u.A.fromUrl(e);if(o.id=n,i.add(o),!(0,r.A)(t[n.id]))return;t[n.id].tilesetPrimitive=o}catch(e){console.error(e),t[n.id].loadFail=!0}}f.prototype.update=function(e){if(!(0,r.A)(e))throw new a.A("time is required.");const t=this._entitiesToVisualize.values,n=this._tilesetHash,i=this._primitives;for(let o=0,s=t.length;o<s;o++){const s=t[o],a=s._tileset;let c;const u=n[s.id],d=s.isShowing&&s.isAvailable(e)&&h.A.getValueOrDefault(a._show,e,!0);let f;if(d&&(f=s.computeModelMatrix(e,A),c=l.A.createIfNeeded(h.A.getValueOrUndefined(a._uri,e))),!d){(0,r.A)(u)&&(u.tilesetPrimitive.show=!1);continue}const p=(0,r.A)(u)?u.tilesetPrimitive:void 0;(0,r.A)(u)&&c.url===u.url||((0,r.A)(p)&&i.removeAndDestroy(p),delete n[s.id],m(c,n,s,i)),(0,r.A)(p)&&(p.show=!0,(0,r.A)(f)&&(p.modelMatrix=f),p.maximumScreenSpaceError=h.A.getValueOrDefault(a.maximumScreenSpaceError,e,p.maximumScreenSpaceError))}return!0},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(f.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._tilesetHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)p(0,e[i],t,n);return(0,s.A)(this)},f.prototype.getBoundingSphere=function(e,t){if(!(0,r.A)(e))throw new a.A("entity is required.");if(!(0,r.A)(t))throw new a.A("result is required.");const n=this._tilesetHash[e.id];if(!(0,r.A)(n)||n.loadFail)return d.A.FAILED;const i=n.tilesetPrimitive;return(0,r.A)(i)?i.show?(o.A.clone(i.boundingSphere,t),d.A.DONE):d.A.FAILED:d.A.PENDING},f.prototype._onCollectionChanged=function(e,t,n,i){let o,s;const a=this._entitiesToVisualize,c=this._tilesetHash,l=this._primitives;for(o=t.length-1;o>-1;o--)s=t[o],(0,r.A)(s._tileset)&&a.set(s.id,s);for(o=i.length-1;o>-1;o--)s=i[o],(0,r.A)(s._tileset)?a.set(s.id,s):(p(0,s,c,l),a.remove(s.id));for(o=n.length-1;o>-1;o--)s=n[o],p(0,s,c,l),a.remove(s.id)};const _=f},403911:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(419061),o=n(491446),r=n(605971),s=n(955943),a=n(886033),c=n(98348),l=n(46257);function u(e){this._referenceFrame=(0,i.A)(e,a.A.FIXED),this._definitionChanged=new s.A,this._composite=new c.A,this._composite.definitionChanged.addEventListener(u.prototype._raiseDefinitionChanged,this)}Object.defineProperties(u.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(e){this._referenceFrame=e}}}),u.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,a.A.FIXED,t)},u.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,o.A)(e))throw new r.A("time is required.");if(!(0,o.A)(t))throw new r.A("referenceFrame is required.");const i=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,o.A)(i))return i.getValueInReferenceFrame(e,t,n)},u.prototype.equals=function(e){return this===e||e instanceof u&&this._referenceFrame===e._referenceFrame&&this._composite.equals(e._composite,l.A.equals)},u.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const d=u},98348:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(955943),s=n(354975),a=n(224847),c=n(46257);function l(){this._eventHelper=new s.A,this._definitionChanged=new r.A,this._intervals=new a.A,this._intervals.changedEvent.addEventListener(l.prototype._intervalsChanged,this)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),l.prototype.getValue=function(e,t){if(!(0,i.A)(e))throw new o.A("time is required");const n=this._intervals.findDataForIntervalContainingDate(e);if((0,i.A)(n))return n.getValue(e,t)},l.prototype.equals=function(e){return this===e||e instanceof l&&this._intervals.equals(e._intervals,c.A.equals)},l.prototype._intervalsChanged=function(){!function(e,t,n,o){function r(){n.raiseEvent(e)}const s=[];t.removeAll();const a=o.length;for(let e=0;e<a;e++){const n=o.get(e);(0,i.A)(n.data)&&-1===s.indexOf(n.data)&&t.add(n.data.definitionChanged,r)}}(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)};const u=l},490869:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(564886),o=n(267980),r=n(369031),s=n(41476),a=n(433235),c=n(374273),l=n(686043),u=n(491446),d=n(605971),h=n(330926),A=n(75200),f=n(32655),p=n(852575),m=n(697422),_=n(708857),g=n(63316),y=n(551549),b=n(612123),v=n(312421),T=n(799086),w=n(286299),E=n(817634),S=n(46257);const C=new s.A,x=o.A.ZERO,I=new o.A,P=new m.A;function D(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.cornerType=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.offsetAttribute=void 0}function O(e,t){E.A.call(this,{entity:e,scene:t,geometryOptions:new D(e),geometryPropertyName:"corridor",observedPropertyNames:["availability","corridor"]}),this._onEntityPropertyChanged(e,"corridor",e.corridor,void 0)}function L(e,t,n){T.A.call(this,e,t,n)}(0,u.A)(Object.create)&&(O.prototype=Object.create(E.A.prototype),O.prototype.constructor=O),O.prototype.createFillGeometryInstance=function(e){if(r.A.defined("time",e),!this._fillEnabled)throw new d.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new _.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:h.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof v.A){let t;(0,u.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,C)),(0,u.A)(t)||(t=s.A.WHITE),i.color=a.A.fromColor(t)}return(0,u.A)(this._options.offsetAttribute)&&(i.offset=p.A.fromCartesian3(S.A.getValueOrDefault(this._terrainOffsetProperty,e,x,I))),new A.A({id:t,geometry:new c.A(this._options),attributes:i})},O.prototype.createOutlineGeometryInstance=function(e){if(r.A.defined("time",e),!this._outlineEnabled)throw new d.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=S.A.getValueOrDefault(this._outlineColorProperty,e,s.A.BLACK,C),o={show:new _.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.A.fromColor(i),distanceDisplayCondition:h.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0};return(0,u.A)(this._options.offsetAttribute)&&(o.offset=p.A.fromCartesian3(S.A.getValueOrDefault(this._terrainOffsetProperty,e,x,I))),new A.A({id:t,geometry:new l.A(this._options),attributes:o})},O.prototype._computeCenter=function(e,t){const n=S.A.getValueOrUndefined(this._entity.corridor.positions,e);if((0,u.A)(n)&&0!==n.length)return o.A.clone(n[Math.floor(n.length/2)],t)},O.prototype._isHidden=function(e,t){return!(0,u.A)(t.positions)||!(0,u.A)(t.width)||w.A.prototype._isHidden.call(this,e,t)},O.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!S.A.isConstant(t.height)||!S.A.isConstant(t.extrudedHeight)||!S.A.isConstant(t.granularity)||!S.A.isConstant(t.width)||!S.A.isConstant(t.outlineWidth)||!S.A.isConstant(t.cornerType)||!S.A.isConstant(t.zIndex)||this._onTerrain&&!S.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof v.A)},O.prototype._setStaticOptions=function(e,t){let n=S.A.getValueOrUndefined(t.height,f.A.MINIMUM_VALUE);const o=S.A.getValueOrDefault(t.heightReference,f.A.MINIMUM_VALUE,g.A.NONE);let r=S.A.getValueOrUndefined(t.extrudedHeight,f.A.MINIMUM_VALUE);const s=S.A.getValueOrDefault(t.extrudedHeightReference,f.A.MINIMUM_VALUE,g.A.NONE);(0,u.A)(r)&&!(0,u.A)(n)&&(n=0);const a=this._options;a.vertexFormat=this._materialProperty instanceof v.A?b.A.VERTEX_FORMAT:y.A.MaterialSupport.TEXTURED.vertexFormat,a.positions=t.positions.getValue(f.A.MINIMUM_VALUE,a.positions),a.width=t.width.getValue(f.A.MINIMUM_VALUE),a.granularity=S.A.getValueOrUndefined(t.granularity,f.A.MINIMUM_VALUE),a.cornerType=S.A.getValueOrUndefined(t.cornerType,f.A.MINIMUM_VALUE),a.offsetAttribute=E.A.computeGeometryOffsetAttribute(n,o,r,s),a.height=E.A.getGeometryHeight(n,o),r=E.A.getGeometryExtrudedHeight(r,s),r===E.A.CLAMP_TO_GROUND&&(r=i.A.getMinimumMaximumHeights(c.A.computeRectangle(a,P)).minimumTerrainHeight),a.extrudedHeight=r},O.DynamicGeometryUpdater=L,(0,u.A)(Object.create)&&(L.prototype=Object.create(T.A.prototype),L.prototype.constructor=L),L.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,u.A)(i.positions)||!(0,u.A)(i.width)||T.A.prototype._isHidden.call(this,e,t,n)},L.prototype._setOptions=function(e,t,n){const o=this._options;let r=S.A.getValueOrUndefined(t.height,n);const s=S.A.getValueOrDefault(t.heightReference,n,g.A.NONE);let a=S.A.getValueOrUndefined(t.extrudedHeight,n);const l=S.A.getValueOrDefault(t.extrudedHeightReference,n,g.A.NONE);(0,u.A)(a)&&!(0,u.A)(r)&&(r=0),o.positions=S.A.getValueOrUndefined(t.positions,n),o.width=S.A.getValueOrUndefined(t.width,n),o.granularity=S.A.getValueOrUndefined(t.granularity,n),o.cornerType=S.A.getValueOrUndefined(t.cornerType,n),o.offsetAttribute=E.A.computeGeometryOffsetAttribute(r,s,a,l),o.height=E.A.getGeometryHeight(r,s),a=E.A.getGeometryExtrudedHeight(a,l),a===E.A.CLAMP_TO_GROUND&&(a=i.A.getMinimumMaximumHeights(c.A.computeRectangle(o,P)).minimumTerrainHeight),o.extrudedHeight=a};const N=O},581225:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(267980),o=n(369031),r=n(41476),s=n(433235),a=n(317061),c=n(902503),l=n(491446),u=n(605971),d=n(330926),h=n(75200),A=n(794554),f=n(32655),p=n(852575),m=n(708857),_=n(63316),g=n(551549),y=n(612123),b=n(312421),v=n(799086),T=n(286299),w=n(764729),E=n(46257);const S=i.A.ZERO,C=new i.A,x=new i.A,I=new r.A;function P(e){this.id=e,this.vertexFormat=void 0,this.length=void 0,this.topRadius=void 0,this.bottomRadius=void 0,this.slices=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function D(e,t){T.A.call(this,{entity:e,scene:t,geometryOptions:new P(e),geometryPropertyName:"cylinder",observedPropertyNames:["availability","position","orientation","cylinder"]}),this._onEntityPropertyChanged(e,"cylinder",e.cylinder,void 0)}function O(e,t,n){v.A.call(this,e,t,n)}(0,l.A)(Object.create)&&(D.prototype=Object.create(T.A.prototype),D.prototype.constructor=D),Object.defineProperties(D.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),D.prototype.createFillGeometryInstance=function(e){if(o.A.defined("time",e),!this._fillEnabled)throw new u.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),c=this._distanceDisplayConditionProperty.getValue(e),A={show:i,distanceDisplayCondition:d.A.fromDistanceDisplayCondition(c),color:void 0,offset:void 0};if(this._materialProperty instanceof b.A){let t;(0,l.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,I)),(0,l.A)(t)||(t=r.A.WHITE),A.color=s.A.fromColor(t)}return(0,l.A)(this._options.offsetAttribute)&&(A.offset=p.A.fromCartesian3(E.A.getValueOrDefault(this._terrainOffsetProperty,e,S,C))),new h.A({id:t,geometry:new a.A(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:A})},D.prototype.createOutlineGeometryInstance=function(e){if(o.A.defined("time",e),!this._outlineEnabled)throw new u.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=E.A.getValueOrDefault(this._outlineColorProperty,e,r.A.BLACK,I),a=this._distanceDisplayConditionProperty.getValue(e),A={show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.A.fromColor(i),distanceDisplayCondition:d.A.fromDistanceDisplayCondition(a),offset:void 0};return(0,l.A)(this._options.offsetAttribute)&&(A.offset=p.A.fromCartesian3(E.A.getValueOrDefault(this._terrainOffsetProperty,e,S,C))),new h.A({id:t,geometry:new c.A(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:A})},D.prototype._computeCenter=function(e,t){return E.A.getValueOrUndefined(this._entity.position,e,t)},D.prototype._isHidden=function(e,t){return!(0,l.A)(e.position)||!(0,l.A)(t.length)||!(0,l.A)(t.topRadius)||!(0,l.A)(t.bottomRadius)||T.A.prototype._isHidden.call(this,e,t)},D.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&E.A.isConstant(e.orientation)&&t.length.isConstant&&t.topRadius.isConstant&&t.bottomRadius.isConstant&&E.A.isConstant(t.slices)&&E.A.isConstant(t.outlineWidth)&&E.A.isConstant(t.numberOfVerticalLines))},D.prototype._setStaticOptions=function(e,t){const n=E.A.getValueOrDefault(t.heightReference,f.A.MINIMUM_VALUE,_.A.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof b.A?y.A.VERTEX_FORMAT:g.A.MaterialSupport.TEXTURED.vertexFormat,i.length=t.length.getValue(f.A.MINIMUM_VALUE),i.topRadius=t.topRadius.getValue(f.A.MINIMUM_VALUE),i.bottomRadius=t.bottomRadius.getValue(f.A.MINIMUM_VALUE),i.slices=E.A.getValueOrUndefined(t.slices,f.A.MINIMUM_VALUE),i.numberOfVerticalLines=E.A.getValueOrUndefined(t.numberOfVerticalLines,f.A.MINIMUM_VALUE),i.offsetAttribute=n!==_.A.NONE?A.A.ALL:void 0},D.prototype._onEntityPropertyChanged=w.A,D.DynamicGeometryUpdater=O,(0,l.A)(Object.create)&&(O.prototype=Object.create(v.A.prototype),O.prototype.constructor=O),O.prototype._isHidden=function(e,t,n){const i=this._options,o=E.A.getValueOrUndefined(e.position,n,x);return!(0,l.A)(o)||!(0,l.A)(i.length)||!(0,l.A)(i.topRadius)||!(0,l.A)(i.bottomRadius)||v.A.prototype._isHidden.call(this,e,t,n)},O.prototype._setOptions=function(e,t,n){const i=E.A.getValueOrDefault(t.heightReference,n,_.A.NONE),o=this._options;o.length=E.A.getValueOrUndefined(t.length,n),o.topRadius=E.A.getValueOrUndefined(t.topRadius,n),o.bottomRadius=E.A.getValueOrUndefined(t.bottomRadius,n),o.slices=E.A.getValueOrUndefined(t.slices,n),o.numberOfVerticalLines=E.A.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=i!==_.A.NONE?A.A.ALL:void 0};const L=D},335557:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(419061),o=n(491446),r=n(677354),s=n(605971),a=n(955943),c=n(367817);function l(){this._dataSources=[],this._dataSourceAdded=new a.A,this._dataSourceRemoved=new a.A,this._dataSourceMoved=new a.A}function u(e,t){if(!(0,o.A)(t))throw new s.A("dataSource is required.");const n=e.indexOf(t);if(-1===n)throw new s.A("dataSource is not in this collection.");return n}function d(e,t,n){const i=e._dataSources,o=i.length-1;if((t=c.A.clamp(t,0,o))===(n=c.A.clamp(n,0,o)))return;const r=i[t];i[t]=i[n],i[n]=r,e.dataSourceMoved.raiseEvent(r,n,t)}Object.defineProperties(l.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}}),l.prototype.add=function(e){if(!(0,o.A)(e))throw new s.A("dataSource is required.");const t=this,n=this._dataSources;return Promise.resolve(e).then((function(e){return n===t._dataSources&&(t._dataSources.push(e),t._dataSourceAdded.raiseEvent(t,e)),e}))},l.prototype.remove=function(e,t){t=(0,i.A)(t,!1);const n=this._dataSources.indexOf(e);return-1!==n&&(this._dataSources.splice(n,1),this._dataSourceRemoved.raiseEvent(this,e),t&&"function"==typeof e.destroy&&e.destroy(),!0)},l.prototype.removeAll=function(e){e=(0,i.A)(e,!1);const t=this._dataSources;for(let n=0,i=t.length;n<i;++n){const i=t[n];this._dataSourceRemoved.raiseEvent(this,i),e&&"function"==typeof i.destroy&&i.destroy()}this._dataSources=[]},l.prototype.contains=function(e){return-1!==this.indexOf(e)},l.prototype.indexOf=function(e){return this._dataSources.indexOf(e)},l.prototype.get=function(e){if(!(0,o.A)(e))throw new s.A("index is required.");return this._dataSources[e]},l.prototype.getByName=function(e){if(!(0,o.A)(e))throw new s.A("name is required.");return this._dataSources.filter((function(t){return t.name===e}))},l.prototype.raise=function(e){const t=u(this._dataSources,e);d(this,t,t+1)},l.prototype.lower=function(e){const t=u(this._dataSources,e);d(this,t,t-1)},l.prototype.raiseToTop=function(e){const t=u(this._dataSources,e);t!==this._dataSources.length-1&&(this._dataSources.splice(t,1),this._dataSources.push(e),this.dataSourceMoved.raiseEvent(e,this._dataSources.length-1,t))},l.prototype.lowerToBottom=function(e){const t=u(this._dataSources,e);0!==t&&(this._dataSources.splice(t,1),this._dataSources.splice(0,0,e),this.dataSourceMoved.raiseEvent(e,0,t))},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this.removeAll(!0),(0,r.A)(this)};const h=l},720567:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(564886),o=n(660662),r=n(369031),s=n(419061),a=n(491446),c=n(677354),l=n(354975),u=n(433052),d=n(623e3),h=n(736125),A=n(493721),f=n(798777),p=n(810600),m=n(755394),_=n(253560),g=n(417496),y=n(963503),b=n(592493),v=n(563051),T=n(364360),w=n(302656);function E(e){r.A.typeOf.object("options",e),r.A.typeOf.object("options.scene",e.scene),r.A.typeOf.object("options.dataSourceCollection",e.dataSourceCollection),d.A.initializeTerrainHeights(),u.A.initializeTerrainHeights();const t=e.scene,n=e.dataSourceCollection;this._eventHelper=new l.A,this._eventHelper.add(n.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(n.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(n.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(t.postRender,this._postRender,this),this._dataSourceCollection=n,this._scene=t,this._visualizersCallback=(0,s.A)(e.visualizersCallback,E.defaultVisualizersCallback);let i=!1;const o=new A.A,a=new A.A;n.length>0&&(t.primitives.add(o),t.groundPrimitives.add(a),i=!0),this._primitives=o,this._groundPrimitives=a;for(let e=0,t=n.length;e<t;e++)this._onDataSourceAdded(n,n.get(e));const c=new m.A;let h,f;if(this._onDataSourceAdded(void 0,c),this._defaultDataSource=c,!i){const e=this,i=function(){t.primitives.add(o),t.groundPrimitives.add(a),h(),f(),e._removeDefaultDataSourceListener=void 0,e._removeDataSourceCollectionListener=void 0};h=c.entities.collectionChanged.addEventListener(i),f=n.dataSourceAdded.addEventListener(i)}this._removeDefaultDataSourceListener=h,this._removeDataSourceCollectionListener=f,this._ready=!1}E.defaultVisualizersCallback=function(e,t,n){const i=n.entities;return[new f.A(t,i),new _.A(e,i,n._primitives,n._groundPrimitives),new g.A(t,i),new y.A(e,i),new b.A(e,i),new T.A(t,i),new v.A(e,i),new w.A(e,i,n._primitives,n._groundPrimitives)]},Object.defineProperties(E.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){this._eventHelper.removeAll();const e=this._dataSourceCollection;for(let t=0,n=e.length;t<n;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),(0,a.A)(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),(0,c.A)(this)},E.prototype.update=function(e){if(r.A.defined("time",e),!i.A.initialized)return this._ready=!1,!1;let t,n,o,s,c=!0;const l=this._dataSourceCollection,u=l.length;for(t=0;t<u;t++){const i=l.get(t);for((0,a.A)(i.update)&&(c=i.update(e)&&c),o=i._visualizers,s=o.length,n=0;n<s;n++)c=o[n].update(e)&&c}for(o=this._defaultDataSource._visualizers,s=o.length,n=0;n<s;n++)c=o[n].update(e)&&c;return this._ready=c,c},E.prototype._postRender=function(){const e=this._scene.frameState,t=this._dataSourceCollection,n=t.length;for(let i=0;i<n;i++){const n=t.get(i),o=n.credit;(0,a.A)(o)&&e.creditDisplay.addCreditToNextFrame(o);const r=n._resourceCredits;if((0,a.A)(r)){const t=r.length;for(let n=0;n<t;n++)e.creditDisplay.addCreditToNextFrame(r[n])}}};const S=[],C=new o.A;E.prototype.getBoundingSphere=function(e,t,n){if(r.A.defined("entity",e),r.A.typeOf.bool("allowPartial",t),r.A.defined("result",n),!this._ready)return p.A.PENDING;let i,s,c=this._defaultDataSource;if(!c.entities.contains(e)){c=void 0;const t=this._dataSourceCollection;for(s=t.length,i=0;i<s;i++){const n=t.get(i);if(n.entities.contains(e)){c=n;break}}}if(!(0,a.A)(c))return p.A.FAILED;const l=S,u=C;let d=0,h=p.A.DONE;const A=c._visualizers,f=A.length;for(i=0;i<f;i++){const n=A[i];if((0,a.A)(n.getBoundingSphere)){if(h=A[i].getBoundingSphere(e,u),!t&&h===p.A.PENDING)return p.A.PENDING;h===p.A.DONE&&(l[d]=o.A.clone(u,l[d]),d++)}}return 0===d?p.A.FAILED:(l.length=d,o.A.fromBoundingSpheres(l,n),p.A.DONE)},E.prototype._onDataSourceAdded=function(e,t){const n=this._scene,i=this._primitives,o=this._groundPrimitives,r=i.add(new A.A),s=o.add(new h.A);t._primitives=r,t._groundPrimitives=s;const a=t.clustering;a._initialize(n),r.add(a),t._visualizers=this._visualizersCallback(n,a,t)},E.prototype._onDataSourceRemoved=function(e,t){const n=this._primitives,i=this._groundPrimitives,o=t._primitives,r=t._groundPrimitives,s=t.clustering;o.remove(s);const a=t._visualizers,c=a.length;for(let e=0;e<c;e++)a[e].destroy();n.remove(o),i.remove(r),t._visualizers=void 0},E.prototype._onDataSourceMoved=function(e,t,n){const i=this._primitives,o=this._groundPrimitives,r=e._primitives,s=e._groundPrimitives;t===n+1?(i.raise(r),o.raise(s)):t===n-1?(i.lower(r),o.lower(s)):0===t?(i.lowerToBottom(r),o.lowerToBottom(s),i.raise(r),o.raise(s)):(i.raiseToTop(r),o.raiseToTop(s))};const x=E},345747:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(288787),o=n(491446),r=n(810600);function s(e,t){this._primitives=e,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new i.A}s.prototype.add=function(e,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},s.prototype.remove=function(e){const t=e.id,n=this._dynamicUpdaters.get(t);(0,o.A)(n)&&(this._dynamicUpdaters.remove(t),n.destroy())},s.prototype.update=function(e){const t=this._dynamicUpdaters.values;for(let n=0,i=t.length;n<i;n++)t[n].update(e);return!0},s.prototype.removeAllPrimitives=function(){const e=this._dynamicUpdaters.values;for(let t=0,n=e.length;t<n;t++)e[t].destroy();this._dynamicUpdaters.removeAll()},s.prototype.getBoundingSphere=function(e,t){return e=this._dynamicUpdaters.get(e.id),(0,o.A)(e)&&(0,o.A)(e.getBoundingSphere)?e.getBoundingSphere(t):r.A.FAILED};const a=s},799086:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(660662),o=n(369031),r=n(491446),s=n(677354),a=n(605971),c=n(623e3),l=n(551549),u=n(612123),d=n(842153),h=n(810600),A=n(312421),f=n(644736),p=n(46257);function m(e,t,n){o.A.defined("geometryUpdater",e),o.A.defined("primitives",t),o.A.defined("orderedGroundPrimitives",n),this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}m.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!p.A.getValueOrDefault(t.show,n,!0)},m.prototype._setOptions=a.A.throwInstantiationError,m.prototype.update=function(e){o.A.defined("time",e);const t=this._geometryUpdater,n=t._onTerrain,i=this._primitives,s=this._orderedGroundPrimitives;n?s.remove(this._primitive):(i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;const a=this._entity,h=a[this._geometryUpdater._geometryPropertyName];if(this._setOptions(a,h,e),this._isHidden(a,h,e))return;const m=this._geometryUpdater.shadowsProperty.getValue(e),_=this._options;if(!(0,r.A)(h.fill)||h.fill.getValue(e)){const o=t.fillMaterialProperty,r=o instanceof A.A;let a;const h=t._getIsClosed(_);if(r)a=new u.A({closed:h,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{const t=f.A.getValue(e,o,this._material);this._material=t,a=new l.A({material:t,translucent:t.isTranslucent(),closed:h})}if(n)_.vertexFormat=u.A.VERTEX_FORMAT,this._primitive=s.add(new c.A({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:a,asynchronous:!1,shadows:m,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),p.A.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{_.vertexFormat=a.vertexFormat;const t=this._geometryUpdater.createFillGeometryInstance(e);r&&(a.translucent=255!==t.attributes.color.value[3]),this._primitive=i.add(new d.A({geometryInstances:t,appearance:a,asynchronous:!1,shadows:m}))}}if(!n&&(0,r.A)(h.outline)&&h.outline.getValue(e)){const n=this._geometryUpdater.createOutlineGeometryInstance(e),o=p.A.getValueOrDefault(h.outlineWidth,e,1);this._outlinePrimitive=i.add(new d.A({geometryInstances:n,appearance:new u.A({flat:!0,translucent:255!==n.attributes.color.value[3],renderState:{lineWidth:t._scene.clampLineWidth(o)}}),asynchronous:!1,shadows:m}))}},m.prototype.getBoundingSphere=function(e){if(!(0,r.A)(e))throw new a.A("result is required.");const t=this._entity,n=this._primitive,o=this._outlinePrimitive;let s;return(0,r.A)(n)&&n.show&&n.ready&&(s=n.getGeometryInstanceAttributes(t),(0,r.A)(s)&&(0,r.A)(s.boundingSphere))||(0,r.A)(o)&&o.show&&o.ready&&(s=o.getGeometryInstanceAttributes(t),(0,r.A)(s)&&(0,r.A)(s.boundingSphere))?(i.A.clone(s.boundingSphere,e),h.A.DONE):(0,r.A)(n)&&!n.ready||(0,r.A)(o)&&!o.ready?h.A.PENDING:h.A.FAILED},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){const e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),(0,s.A)(this)};const _=m},584295:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(564886),o=n(267980),r=n(369031),s=n(41476),a=n(433235),c=n(491446),l=n(605971),u=n(330926),d=n(602317),h=n(692095),A=n(75200),f=n(32655),p=n(852575),m=n(697422),_=n(708857),g=n(63316),y=n(551549),b=n(612123),v=n(312421),T=n(799086),w=n(286299),E=n(817634),S=n(46257);const C=new s.A,x=o.A.ZERO,I=new o.A,P=new m.A;function D(e){this.id=e,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function O(e,t){E.A.call(this,{entity:e,scene:t,geometryOptions:new D(e),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(e,"ellipse",e.ellipse,void 0)}function L(e,t,n){T.A.call(this,e,t,n)}(0,c.A)(Object.create)&&(O.prototype=Object.create(E.A.prototype),O.prototype.constructor=O),O.prototype.createFillGeometryInstance=function(e){if(r.A.defined("time",e),!this._fillEnabled)throw new l.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new _.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof v.A){let t;(0,c.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,C)),(0,c.A)(t)||(t=s.A.WHITE),i.color=a.A.fromColor(t)}return(0,c.A)(this._options.offsetAttribute)&&(i.offset=p.A.fromCartesian3(S.A.getValueOrDefault(this._terrainOffsetProperty,e,x,I))),new A.A({id:t,geometry:new d.A(this._options),attributes:i})},O.prototype.createOutlineGeometryInstance=function(e){if(r.A.defined("time",e),!this._outlineEnabled)throw new l.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=S.A.getValueOrDefault(this._outlineColorProperty,e,s.A.BLACK,C),o=this._distanceDisplayConditionProperty.getValue(e),d={show:new _.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.A.fromColor(i),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(o),offset:void 0};return(0,c.A)(this._options.offsetAttribute)&&(d.offset=p.A.fromCartesian3(S.A.getValueOrDefault(this._terrainOffsetProperty,e,x,I))),new A.A({id:t,geometry:new h.A(this._options),attributes:d})},O.prototype._computeCenter=function(e,t){return S.A.getValueOrUndefined(this._entity.position,e,t)},O.prototype._isHidden=function(e,t){const n=e.position;return!(0,c.A)(n)||!(0,c.A)(t.semiMajorAxis)||!(0,c.A)(t.semiMinorAxis)||w.A.prototype._isHidden.call(this,e,t)},O.prototype._isDynamic=function(e,t){return!e.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!S.A.isConstant(t.rotation)||!S.A.isConstant(t.height)||!S.A.isConstant(t.extrudedHeight)||!S.A.isConstant(t.granularity)||!S.A.isConstant(t.stRotation)||!S.A.isConstant(t.outlineWidth)||!S.A.isConstant(t.numberOfVerticalLines)||!S.A.isConstant(t.zIndex)||this._onTerrain&&!S.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof v.A)},O.prototype._setStaticOptions=function(e,t){let n=S.A.getValueOrUndefined(t.height,f.A.MINIMUM_VALUE);const o=S.A.getValueOrDefault(t.heightReference,f.A.MINIMUM_VALUE,g.A.NONE);let r=S.A.getValueOrUndefined(t.extrudedHeight,f.A.MINIMUM_VALUE);const s=S.A.getValueOrDefault(t.extrudedHeightReference,f.A.MINIMUM_VALUE,g.A.NONE);(0,c.A)(r)&&!(0,c.A)(n)&&(n=0);const a=this._options;a.vertexFormat=this._materialProperty instanceof v.A?b.A.VERTEX_FORMAT:y.A.MaterialSupport.TEXTURED.vertexFormat,a.center=e.position.getValue(f.A.MINIMUM_VALUE,a.center),a.semiMajorAxis=t.semiMajorAxis.getValue(f.A.MINIMUM_VALUE,a.semiMajorAxis),a.semiMinorAxis=t.semiMinorAxis.getValue(f.A.MINIMUM_VALUE,a.semiMinorAxis),a.rotation=S.A.getValueOrUndefined(t.rotation,f.A.MINIMUM_VALUE),a.granularity=S.A.getValueOrUndefined(t.granularity,f.A.MINIMUM_VALUE),a.stRotation=S.A.getValueOrUndefined(t.stRotation,f.A.MINIMUM_VALUE),a.numberOfVerticalLines=S.A.getValueOrUndefined(t.numberOfVerticalLines,f.A.MINIMUM_VALUE),a.offsetAttribute=E.A.computeGeometryOffsetAttribute(n,o,r,s),a.height=E.A.getGeometryHeight(n,o),r=E.A.getGeometryExtrudedHeight(r,s),r===E.A.CLAMP_TO_GROUND&&(r=i.A.getMinimumMaximumHeights(d.A.computeRectangle(a,P)).minimumTerrainHeight),a.extrudedHeight=r},O.DynamicGeometryUpdater=L,(0,c.A)(Object.create)&&(L.prototype=Object.create(T.A.prototype),L.prototype.constructor=L),L.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,c.A)(i.center)||!(0,c.A)(i.semiMajorAxis)||!(0,c.A)(i.semiMinorAxis)||T.A.prototype._isHidden.call(this,e,t,n)},L.prototype._setOptions=function(e,t,n){const o=this._options;let r=S.A.getValueOrUndefined(t.height,n);const s=S.A.getValueOrDefault(t.heightReference,n,g.A.NONE);let a=S.A.getValueOrUndefined(t.extrudedHeight,n);const l=S.A.getValueOrDefault(t.extrudedHeightReference,n,g.A.NONE);(0,c.A)(a)&&!(0,c.A)(r)&&(r=0),o.center=S.A.getValueOrUndefined(e.position,n,o.center),o.semiMajorAxis=S.A.getValueOrUndefined(t.semiMajorAxis,n),o.semiMinorAxis=S.A.getValueOrUndefined(t.semiMinorAxis,n),o.rotation=S.A.getValueOrUndefined(t.rotation,n),o.granularity=S.A.getValueOrUndefined(t.granularity,n),o.stRotation=S.A.getValueOrUndefined(t.stRotation,n),o.numberOfVerticalLines=S.A.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=E.A.computeGeometryOffsetAttribute(r,s,a,l),o.height=E.A.getGeometryHeight(r,s),a=E.A.getGeometryExtrudedHeight(a,l),a===E.A.CLAMP_TO_GROUND&&(a=i.A.getMinimumMaximumHeights(d.A.computeRectangle(o,P)).minimumTerrainHeight),o.extrudedHeight=a};const N=O},754462:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(267980),o=n(369031),r=n(41476),s=n(433235),a=n(419061),c=n(491446),l=n(853331),u=n(330926),d=n(87762),h=n(594706),A=n(75200),f=n(794554),p=n(32655),m=n(584164),_=n(852575),g=n(708857),y=n(63316),b=n(551549),v=n(612123),T=n(842153),w=n(62467),E=n(312421),S=n(799086),C=n(286299),x=n(764729),I=n(644736),P=n(46257);const D=new E.A(r.A.WHITE),O=i.A.ZERO,L=new i.A,N=new i.A,M=new i.A,R=new r.A,F=new i.A(1,1,1);function B(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function U(e,t){C.A.call(this,{entity:e,scene:t,geometryOptions:new B(e),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(e,"ellipsoid",e.ellipsoid,void 0)}function k(e,t,n){S.A.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new m.A,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new i.A,this._material={}}(0,c.A)(Object.create)&&(U.prototype=Object.create(C.A.prototype),U.prototype.constructor=U),Object.defineProperties(U.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),U.prototype.createFillGeometryInstance=function(e,t,n){o.A.defined("time",e);const i=this._entity,a=i.isAvailable(e);let l;const h=new g.A(a&&i.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),f=this._distanceDisplayConditionProperty.getValue(e),p={show:h,distanceDisplayCondition:u.A.fromDistanceDisplayCondition(f),color:void 0,offset:void 0};if(this._materialProperty instanceof E.A){let t;(0,c.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||a)&&(t=this._materialProperty.color.getValue(e,R)),(0,c.A)(t)||(t=r.A.WHITE),l=s.A.fromColor(t),p.color=l}return(0,c.A)(this._options.offsetAttribute)&&(p.offset=_.A.fromCartesian3(P.A.getValueOrDefault(this._terrainOffsetProperty,e,O,L))),new A.A({id:i,geometry:new d.A(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:p})},U.prototype.createOutlineGeometryInstance=function(e,t,n){o.A.defined("time",e);const i=this._entity,a=i.isAvailable(e),l=P.A.getValueOrDefault(this._outlineColorProperty,e,r.A.BLACK,R),d=this._distanceDisplayConditionProperty.getValue(e),f={show:new g.A(a&&i.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.A.fromColor(l),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(d),offset:void 0};return(0,c.A)(this._options.offsetAttribute)&&(f.offset=_.A.fromCartesian3(P.A.getValueOrDefault(this._terrainOffsetProperty,e,O,L))),new A.A({id:i,geometry:new h.A(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:f})},U.prototype._computeCenter=function(e,t){return P.A.getValueOrUndefined(this._entity.position,e,t)},U.prototype._isHidden=function(e,t){return!(0,c.A)(e.position)||!(0,c.A)(t.radii)||C.A.prototype._isHidden.call(this,e,t)},U.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&P.A.isConstant(e.orientation)&&t.radii.isConstant&&P.A.isConstant(t.innerRadii)&&P.A.isConstant(t.stackPartitions)&&P.A.isConstant(t.slicePartitions)&&P.A.isConstant(t.outlineWidth)&&P.A.isConstant(t.minimumClock)&&P.A.isConstant(t.maximumClock)&&P.A.isConstant(t.minimumCone)&&P.A.isConstant(t.maximumCone)&&P.A.isConstant(t.subdivisions))},U.prototype._setStaticOptions=function(e,t){const n=P.A.getValueOrDefault(t.heightReference,p.A.MINIMUM_VALUE,y.A.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof E.A?v.A.VERTEX_FORMAT:b.A.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(p.A.MINIMUM_VALUE,i.radii),i.innerRadii=P.A.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=P.A.getValueOrUndefined(t.minimumClock,p.A.MINIMUM_VALUE),i.maximumClock=P.A.getValueOrUndefined(t.maximumClock,p.A.MINIMUM_VALUE),i.minimumCone=P.A.getValueOrUndefined(t.minimumCone,p.A.MINIMUM_VALUE),i.maximumCone=P.A.getValueOrUndefined(t.maximumCone,p.A.MINIMUM_VALUE),i.stackPartitions=P.A.getValueOrUndefined(t.stackPartitions,p.A.MINIMUM_VALUE),i.slicePartitions=P.A.getValueOrUndefined(t.slicePartitions,p.A.MINIMUM_VALUE),i.subdivisions=P.A.getValueOrUndefined(t.subdivisions,p.A.MINIMUM_VALUE),i.offsetAttribute=n!==y.A.NONE?f.A.ALL:void 0},U.prototype._onEntityPropertyChanged=x.A,U.DynamicGeometryUpdater=k,(0,c.A)(Object.create)&&(k.prototype=Object.create(S.A.prototype),k.prototype.constructor=k),k.prototype.update=function(e){o.A.defined("time",e);const t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!P.A.getValueOrDefault(n.show,e,!0))return(0,c.A)(this._primitive)&&(this._primitive.show=!1),void((0,c.A)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const d=P.A.getValueOrUndefined(n.radii,e,N);let h=(0,c.A)(d)?t.computeModelMatrixForHeightReference(e,n.heightReference,.5*d.z,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!(0,c.A)(h)||!(0,c.A)(d))return(0,c.A)(this._primitive)&&(this._primitive.show=!1),void((0,c.A)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const A=P.A.getValueOrDefault(n.fill,e,!0),p=P.A.getValueOrDefault(n.outline,e,!1),E=P.A.getValueOrClonedDefault(n.outlineColor,e,r.A.BLACK,R),S=I.A.getValue(e,(0,a.A)(n.material,D),this._material),C=P.A.getValueOrUndefined(n.innerRadii,e,M),x=P.A.getValueOrUndefined(n.minimumClock,e),B=P.A.getValueOrUndefined(n.maximumClock,e),U=P.A.getValueOrUndefined(n.minimumCone,e),k=P.A.getValueOrUndefined(n.maximumCone,e),V=P.A.getValueOrUndefined(n.stackPartitions,e),H=P.A.getValueOrUndefined(n.slicePartitions,e),z=P.A.getValueOrUndefined(n.subdivisions,e),G=P.A.getValueOrDefault(n.outlineWidth,e,1),j=P.A.getValueOrDefault(n.heightReference,e,y.A.NONE),W=j!==y.A.NONE?f.A.ALL:void 0,q=this._scene.mode,Y=q===w.A.SCENE3D&&j===y.A.NONE,X=this._options,J=this._geometryUpdater.shadowsProperty.getValue(e),Q=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),$=P.A.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,O,L);if(!Y||this._lastSceneMode!==q||!(0,c.A)(this._primitive)||X.stackPartitions!==V||X.slicePartitions!==H||(0,c.A)(C)&&!i.A.equals(X.innerRadii!==C)||X.minimumClock!==x||X.maximumClock!==B||X.minimumCone!==U||X.maximumCone!==k||X.subdivisions!==z||this._lastOutlineWidth!==G||X.offsetAttribute!==W){const t=this._primitives;if(t.removeAndDestroy(this._primitive),t.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=q,this._lastOutlineWidth=G,X.stackPartitions=V,X.slicePartitions=H,X.subdivisions=z,X.offsetAttribute=W,X.radii=i.A.clone(Y?F:d,X.radii),(0,c.A)(C))if(Y){const e=i.A.magnitude(d);X.innerRadii=i.A.fromElements(C.x/e,C.y/e,C.z/e,X.innerRadii)}else X.innerRadii=i.A.clone(C,X.innerRadii);else X.innerRadii=void 0;X.minimumClock=x,X.maximumClock=B,X.minimumCone=U,X.maximumCone=k;const n=new b.A({material:S,translucent:S.isTranslucent(),closed:!0});X.vertexFormat=n.vertexFormat;const o=this._geometryUpdater.createFillGeometryInstance(e,Y,this._modelMatrix);this._primitive=t.add(new T.A({geometryInstances:o,appearance:n,asynchronous:!1,shadows:J}));const s=this._geometryUpdater.createOutlineGeometryInstance(e,Y,this._modelMatrix);this._outlinePrimitive=t.add(new T.A({geometryInstances:s,appearance:new v.A({flat:!0,translucent:255!==s.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(G)}}),asynchronous:!1,shadows:J})),this._lastShow=A,this._lastOutlineShow=p,this._lastOutlineColor=r.A.clone(E,this._lastOutlineColor),this._lastDistanceDisplayCondition=Q,this._lastOffset=i.A.clone($,this._lastOffset)}else if(this._primitive.ready){const e=this._primitive,n=this._outlinePrimitive;e.show=!0,n.show=!0,e.appearance.material=S;let o=this._attributes;(0,c.A)(o)||(o=e.getGeometryInstanceAttributes(t),this._attributes=o),A!==this._lastShow&&(o.show=g.A.toValue(A,o.show),this._lastShow=A);let a=this._outlineAttributes;(0,c.A)(a)||(a=n.getGeometryInstanceAttributes(t),this._outlineAttributes=a),p!==this._lastOutlineShow&&(a.show=g.A.toValue(p,a.show),this._lastOutlineShow=p),r.A.equals(E,this._lastOutlineColor)||(a.color=s.A.toValue(E,a.color),r.A.clone(E,this._lastOutlineColor)),l.A.equals(Q,this._lastDistanceDisplayCondition)||(o.distanceDisplayCondition=u.A.toValue(Q,o.distanceDisplayCondition),a.distanceDisplayCondition=u.A.toValue(Q,a.distanceDisplayCondition),l.A.clone(Q,this._lastDistanceDisplayCondition)),i.A.equals($,this._lastOffset)||(o.offset=_.A.toValue($,o.offset),a.offset=_.A.toValue($,o.offset),i.A.clone($,this._lastOffset))}Y&&(d.x=Math.max(d.x,.001),d.y=Math.max(d.y,.001),d.z=Math.max(d.z,.001),h=m.A.multiplyByScale(h,d,h),this._primitive.modelMatrix=h,this._outlinePrimitive.modelMatrix=h)};const V=U},226698:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(267980),o=n(369031),r=n(419061),s=n(491446),a=n(610750),c=n(805746),l=n(591978),u=n(367817),d=n(331185),h=n(584164),A=n(543622),f=n(62467);const p=new d.A,m=new d.A,_=new d.A,g=new h.A,y=new i.A,b=new i.A,v=new i.A,T=new i.A,w=new i.A,E=new i.A,S=new l.A;function C(e,t,n){o.A.defined("entity",e),o.A.defined("scene",t),this.entity=e,this.scene=t,this.ellipsoid=(0,r.A)(n,a.A.WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new i.A,this._defaultOffset3D=void 0,this._offset3D=new i.A}Object.defineProperties(C,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(e){this._defaultOffset3D=i.A.clone(e,new i.A)}}}),C.defaultOffset3D=new i.A(-14e3,3500,3500);const x=new c.A,I=new i.A;C.prototype.update=function(e,t){o.A.defined("time",e);const n=this.scene,r=this.ellipsoid,a=n.mode;if(a===f.A.MORPHING)return;const c=this.entity,h=c.position;if(!(0,s.A)(h))return;const P=c!==this._lastEntity,D=a!==this._mode,O=n.camera;let L=P||D,N=!0;if(P){const n=c.viewFrom,o=(0,s.A)(n);if(!o&&(0,s.A)(t)){x.pitch=-u.A.PI_OVER_FOUR,x.range=0;const n=h.getValue(e,I);if((0,s.A)(n)){const e=2-1/Math.max(1,i.A.magnitude(n)/r.maximumRadius);x.pitch*=e}O.viewBoundingSphere(t,x),this.boundingSphere=t,L=!1,N=!1}else o&&(0,s.A)(n.getValue(e,this._offset3D))||i.A.clone(C._defaultOffset3D,this._offset3D)}else D||this._mode===f.A.SCENE2D||i.A.clone(O.position,this._offset3D);this._lastEntity=c,this._mode=a,function(e,t,n,o,r,a,c){const h=e.scene.mode;let C=r.getValue(a,e._lastCartesian);if((0,s.A)(C)){let n,x,I,P,D,O,L=!1,N=!1;if(h===f.A.SCENE3D){l.A.addSeconds(a,.001,S);let e=r.getValue(S,y);if((0,s.A)(e)||(l.A.addSeconds(a,-.001,S),e=r.getValue(S,y),N=!0),(0,s.A)(e)){let t,o=A.A.computeFixedToIcrfMatrix(a,p),r=A.A.computeFixedToIcrfMatrix(S,m);(0,s.A)(o)&&(0,s.A)(r)?t=d.A.transpose(o,_):(t=A.A.computeTemeToPseudoFixedMatrix(a,_),o=d.A.transpose(t,p),r=A.A.computeTemeToPseudoFixedMatrix(S,m),d.A.transpose(r,r));const l=d.A.multiplyByVector(o,C,w),h=d.A.multiplyByVector(r,e,E);i.A.subtract(l,h,T);const f=1e3*i.A.magnitude(T),g=u.A.GRAVITATIONALPARAMETER,P=-g/(f*f-2*g/i.A.magnitude(l));P<0||P>1.25*c.maximumRadius?(n=b,i.A.normalize(C,n),i.A.negate(n,n),I=i.A.clone(i.A.UNIT_Z,v),x=i.A.cross(I,n,y),i.A.magnitude(x)>u.A.EPSILON7&&(i.A.normalize(n,n),i.A.normalize(x,x),I=i.A.cross(n,x,v),i.A.normalize(I,I),L=!0)):i.A.equalsEpsilon(C,e,u.A.EPSILON7)||(I=b,i.A.normalize(l,I),i.A.normalize(h,h),x=i.A.cross(I,h,v),N&&(x=i.A.multiplyByScalar(x,-1,x)),i.A.equalsEpsilon(x,i.A.ZERO,u.A.EPSILON7)||(n=i.A.cross(x,I,y),d.A.multiplyByVector(t,n,n),d.A.multiplyByVector(t,x,x),d.A.multiplyByVector(t,I,I),i.A.normalize(n,n),i.A.normalize(x,x),i.A.normalize(I,I),L=!0))}}(0,s.A)(e.boundingSphere)&&(C=e.boundingSphere.center),o&&(P=i.A.clone(t.position,T),D=i.A.clone(t.direction,w),O=i.A.clone(t.up,E));const M=g;L?(M[0]=n.x,M[1]=n.y,M[2]=n.z,M[3]=0,M[4]=x.x,M[5]=x.y,M[6]=x.z,M[7]=0,M[8]=I.x,M[9]=I.y,M[10]=I.z,M[11]=0,M[12]=C.x,M[13]=C.y,M[14]=C.z,M[15]=0):A.A.eastNorthUpToFixedFrame(C,c,M),t._setTransform(M),o&&(i.A.clone(P,t.position),i.A.clone(D,t.direction),i.A.clone(O,t.up),i.A.cross(D,O,t.right))}if(n){const n=h===f.A.SCENE2D||i.A.equals(e._offset3D,i.A.ZERO)?void 0:e._offset3D;t.lookAtTransform(t.transform,n)}}(this,O,L,N,h,e,r)};const P=C},286299:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(369031),o=n(41476),r=n(419061),s=n(491446),a=n(677354),c=n(605971),l=n(853331),u=n(955943),d=n(32655),h=n(983884),A=n(71578),f=n(988609),p=n(312421),m=n(969077),_=n(426807),g=n(46257);const y=new p.A(o.A.WHITE),b=new m.A(!0),v=new m.A(!0),T=new m.A(!1),w=new m.A(o.A.BLACK),E=new m.A(f.A.DISABLED),S=new m.A(new l.A),C=new m.A(A.A.BOTH);function x(e){i.A.defined("options.entity",e.entity),i.A.defined("options.scene",e.scene),i.A.defined("options.geometryOptions",e.geometryOptions),i.A.defined("options.geometryPropertyName",e.geometryPropertyName),i.A.defined("options.observedPropertyNames",e.observedPropertyNames);const t=e.entity,n=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new u.A,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=n,this._id=`${n}-${t.id}`,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=_.A.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(x.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,s.A)(this._entity.availability)&&g.A.isConstant(this._showProperty)&&g.A.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!(0,s.A)(this._entity.availability)&&g.A.isConstant(this._showProperty)&&g.A.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),x.prototype.isOutlineVisible=function(e){const t=this._entity,n=this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e);return(0,r.A)(n,!1)},x.prototype.isFilled=function(e){const t=this._entity,n=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e);return(0,r.A)(n,!1)},x.prototype.createFillGeometryInstance=c.A.throwInstantiationError,x.prototype.createOutlineGeometryInstance=c.A.throwInstantiationError,x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){(0,a.A)(this)},x.prototype._isHidden=function(e,t){const n=t.show;return(0,s.A)(n)&&n.isConstant&&!n.getValue(d.A.MINIMUM_VALUE)},x.prototype._isOnTerrain=function(e,t){return!1},x.prototype._getIsClosed=function(e){return!0},x.prototype._isDynamic=c.A.throwInstantiationError,x.prototype._setStaticOptions=c.A.throwInstantiationError,x.prototype._onEntityPropertyChanged=function(e,t,n,i){if(-1===this._observedPropertyNames.indexOf(t))return;const o=this._entity[this._geometryPropertyName];if(!(0,s.A)(o))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const a=o.fill,c=!(0,s.A)(a)||!a.isConstant||a.getValue(d.A.MINIMUM_VALUE),l=o.outline;let u=(0,s.A)(l);if(u&&l.isConstant&&(u=l.getValue(d.A.MINIMUM_VALUE)),!c&&!u)return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const A=o.show;if(this._isHidden(e,o))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));this._materialProperty=(0,r.A)(o.material,y),this._fillProperty=(0,r.A)(a,v),this._showProperty=(0,r.A)(A,b),this._showOutlineProperty=(0,r.A)(o.outline,T),this._outlineColorProperty=u?(0,r.A)(o.outlineColor,w):void 0,this._shadowsProperty=(0,r.A)(o.shadows,E),this._distanceDisplayConditionProperty=(0,r.A)(o.distanceDisplayCondition,S),this._classificationTypeProperty=(0,r.A)(o.classificationType,C),this._fillEnabled=c;const f=this._isOnTerrain(e,o)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof p.A);if(u&&f&&((0,h.A)(h.A.geometryOutlines),u=!1),this._onTerrain=f,this._outlineEnabled=u,this._isDynamic(e,o))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,o),this._isClosed=this._getIsClosed(this._options);const t=o.outlineWidth;this._outlineWidth=(0,s.A)(t)?t.getValue(d.A.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}},x.prototype.createDynamicUpdater=function(e,t){if(i.A.defined("primitives",e),i.A.defined("groundPrimitives",t),!this._dynamic)throw new c.A("This instance does not represent dynamic geometry.");return new this.constructor.DynamicGeometryUpdater(this,e,t)};const I=x},253560:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(288787),o=n(660662),r=n(369031),s=n(419061),a=n(491446),c=n(677354),l=n(955943),u=n(354975),d=n(71578),h=n(551549),A=n(612123),f=n(988609),p=n(810600),m=n(467466),_=n(312421),g=n(490869),y=n(581225),b=n(345747),v=n(584295),T=n(754462),w=n(426807),E=n(379843),S=n(570667),C=n(412605),x=n(459022),I=n(724883),P=n(279436),D=n(692296),O=n(759059),L=n(174068),N=n(146511);const M=[],R=[m.A,y.A,g.A,v.A,T.A,E.A,S.A,C.A,x.A,N.A];function F(e,t){this.entity=e,this.scene=t;const n=new Array(R.length),i=new l.A;function o(e){i.raiseEvent(e)}const r=new u.A;for(let i=0;i<n.length;i++){const s=new R[i](e,t);r.add(s.geometryChanged,o),n[i]=s}this.updaters=n,this.geometryChanged=i,this.eventHelper=r,this._removeEntitySubscription=e.definitionChanged.addEventListener(F.prototype._onEntityPropertyChanged,this)}function B(e,t,n,o){r.A.defined("scene",e),r.A.defined("entityCollection",t),n=(0,s.A)(n,e.primitives),o=(0,s.A)(o,e.groundPrimitives),this._scene=e,this._primitives=n,this._groundPrimitives=o,this._entityCollection=void 0,this._addedObjects=new i.A,this._removedObjects=new i.A,this._changedObjects=new i.A;const a=f.A.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);const c=w.A.supportsMaterialsforEntitiesOnTerrain(e);let l;for(this._supportsMaterialsforEntitiesOnTerrain=c,l=0;l<a;++l)this._outlineBatches[l]=new L.A(n,e,l,!1),this._outlineBatches[a+l]=new L.A(n,e,l,!0),this._closedColorBatches[l]=new I.A(n,A.A,void 0,!0,l,!0),this._closedColorBatches[a+l]=new I.A(n,A.A,void 0,!0,l,!1),this._closedMaterialBatches[l]=new P.A(n,h.A,void 0,!0,l,!0),this._closedMaterialBatches[a+l]=new P.A(n,h.A,void 0,!0,l,!1),this._openColorBatches[l]=new I.A(n,A.A,void 0,!1,l,!0),this._openColorBatches[a+l]=new I.A(n,A.A,void 0,!1,l,!1),this._openMaterialBatches[l]=new P.A(n,h.A,void 0,!1,l,!0),this._openMaterialBatches[a+l]=new P.A(n,h.A,void 0,!1,l,!1);const u=d.A.NUMBER_OF_CLASSIFICATION_TYPES,p=new Array(u),m=[];if(c)for(l=0;l<u;++l)m.push(new O.A(o,l,h.A)),p[l]=new D.A(o,l);else for(l=0;l<u;++l)p[l]=new D.A(o,l);this._groundColorBatches=p,this._groundMaterialBatches=m,this._dynamicBatch=new b.A(n,o),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new i.A,this._updaterSets=new i.A,this._entityCollection=t,t.collectionChanged.addEventListener(B.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,M)}F.prototype._onEntityPropertyChanged=function(e,t,n,i){const o=this.updaters;for(let r=0;r<o.length;r++)o[r]._onEntityPropertyChanged(e,t,n,i)},F.prototype.forEach=function(e){const t=this.updaters;for(let n=0;n<t.length;n++)e(t[n])},F.prototype.destroy=function(){this.eventHelper.removeAll();const e=this.updaters;for(let t=0;t<e.length;t++)e[t].destroy();this._removeEntitySubscription(),(0,c.A)(this)},B.prototype.update=function(e){r.A.defined("time",e);const t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,s=this._changedObjects,a=s.values;let c,l,u,d;const h=this;for(c=a.length-1;c>-1;c--)l=a[c],u=l.id,d=this._updaterSets.get(u),d.entity===l?d.forEach((function(t){h._removeUpdater(t),h._insertUpdaterIntoBatch(e,t)})):(o.push(l),n.push(l));for(c=o.length-1;c>-1;c--)l=o[c],u=l.id,d=this._updaterSets.get(u),d.forEach(this._removeUpdater.bind(this)),d.destroy(),this._updaterSets.remove(u),this._subscriptions.get(u)(),this._subscriptions.remove(u);for(c=n.length-1;c>-1;c--)l=n[c],u=l.id,d=new F(l,this._scene),this._updaterSets.set(u,d),d.forEach((function(t){h._insertUpdaterIntoBatch(e,t)})),this._subscriptions.set(u,d.geometryChanged.addEventListener(B._onGeometryChanged,this));t.removeAll(),i.removeAll(),s.removeAll();let A=!0;const f=this._batches,p=f.length;for(c=0;c<p;c++)A=f[c].update(e)&&A;return A};const U=[],k=new o.A;B.prototype.getBoundingSphere=function(e,t){r.A.defined("entity",e),r.A.defined("result",t);const n=U,i=k;let s=0,a=p.A.DONE;const c=this._batches,l=c.length,u=e.id,d=this._updaterSets.get(u).updaters;for(let e=0;e<d.length;e++){const t=d[e];for(let e=0;e<l;e++){if(a=c[e].getBoundingSphere(t,i),a===p.A.PENDING)return p.A.PENDING;a===p.A.DONE&&(n[s]=o.A.clone(i,n[s]),s++)}}return 0===s?p.A.FAILED:(n.length=s,o.A.fromBoundingSpheres(n,t),p.A.DONE)},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(B.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();this._subscriptions.removeAll();const o=this._updaterSets.values;for(n=o.length,e=0;e<n;e++)o[e].destroy();return this._updaterSets.removeAll(),(0,c.A)(this)},B.prototype._removeUpdater=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;i++)t[i].remove(e)},B.prototype._insertUpdaterIntoBatch=function(e,t){if(t.isDynamic)return void this._dynamicBatch.add(e,t);let n;(t.outlineEnabled||t.fillEnabled)&&(n=t.shadowsProperty.getValue(e));const i=f.A.NUMBER_OF_SHADOW_MODES;if(t.outlineEnabled&&((0,a.A)(t.terrainOffsetProperty)?this._outlineBatches[i+n].add(e,t):this._outlineBatches[n].add(e,t)),t.fillEnabled)if(t.onTerrain){const n=t.classificationTypeProperty.getValue(e);t.fillMaterialProperty instanceof _.A?this._groundColorBatches[n].add(e,t):this._groundMaterialBatches[n].add(e,t)}else t.isClosed?t.fillMaterialProperty instanceof _.A?(0,a.A)(t.terrainOffsetProperty)?this._closedColorBatches[i+n].add(e,t):this._closedColorBatches[n].add(e,t):(0,a.A)(t.terrainOffsetProperty)?this._closedMaterialBatches[i+n].add(e,t):this._closedMaterialBatches[n].add(e,t):t.fillMaterialProperty instanceof _.A?(0,a.A)(t.terrainOffsetProperty)?this._openColorBatches[i+n].add(e,t):this._openColorBatches[n].add(e,t):(0,a.A)(t.terrainOffsetProperty)?this._openMaterialBatches[i+n].add(e,t):this._openMaterialBatches[n].add(e,t)},B._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;(0,a.A)(t.get(o))||(0,a.A)(n.get(o))||n.set(o,i)},B.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let s,a,c;for(s=n.length-1;s>-1;s--)c=n[s],a=c.id,i.remove(a)||(o.set(a,c),r.remove(a));for(s=t.length-1;s>-1;s--)c=t[s],a=c.id,o.remove(a)?r.set(a,c):i.set(a,c)};const V=B},817634:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(794554),c=n(983884),l=n(623e3),u=n(63316),d=n(10082),h=n(969077),A=n(286299),f=n(307509);const p=new h.A(0);function m(e){A.A.call(this,e),this._zIndex=0,this._terrainOffsetProperty=void 0}(0,r.A)(Object.create)&&(m.prototype=Object.create(A.A.prototype),m.prototype.constructor=m),Object.defineProperties(m.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),m.prototype._isOnTerrain=function(e,t){return this._fillEnabled&&!(0,r.A)(t.height)&&!(0,r.A)(t.extrudedHeight)&&l.A.isSupported(this._scene)},m.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight;return 0===t||(0,r.A)(n)&&n!==t},m.prototype._computeCenter=s.A.throwInstantiationError,m.prototype._onEntityPropertyChanged=function(e,t,n,i){if(A.A.prototype._onEntityPropertyChanged.call(this,e,t,n,i),-1===this._observedPropertyNames.indexOf(t))return;const s=this._entity[this._geometryPropertyName];if(!(0,r.A)(s))return;(0,r.A)(s.zIndex)&&((0,r.A)(s.height)||(0,r.A)(s.extrudedHeight))&&(0,c.A)(c.A.geometryZIndex),this._zIndex=(0,o.A)(s.zIndex,p),(0,r.A)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const a=s.heightReference,l=s.extrudedHeightReference;if((0,r.A)(a)||(0,r.A)(l)){const e=new d.A(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new f.A(this._scene,e,a,l)}},m.prototype.destroy=function(){(0,r.A)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),A.A.prototype.destroy.call(this)},m.getGeometryHeight=function(e,t){if(i.A.defined("heightReference",t),(0,r.A)(e))return t!==u.A.CLAMP_TO_GROUND?e:0;t!==u.A.NONE&&(0,c.A)(c.A.geometryHeightReference)},m.getGeometryExtrudedHeight=function(e,t){if(i.A.defined("extrudedHeightReference",t),(0,r.A)(e))return t!==u.A.CLAMP_TO_GROUND?e:m.CLAMP_TO_GROUND;t!==u.A.NONE&&(0,c.A)(c.A.geometryExtrudedHeightReference)},m.CLAMP_TO_GROUND="clamp",m.computeGeometryOffsetAttribute=function(e,t,n,i){(0,r.A)(e)&&(0,r.A)(t)||(t=u.A.NONE),(0,r.A)(n)&&(0,r.A)(i)||(i=u.A.NONE);let o=0;return t!==u.A.NONE&&o++,i===u.A.RELATIVE_TO_GROUND&&o++,2===o?a.A.ALL:1===o?a.A.TOP:void 0};const _=m},417496:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(288787),o=n(434067),r=n(267980),s=n(41476),a=n(419061),c=n(491446),l=n(677354),u=n(605971),d=n(853331),h=n(290176),A=n(63316),f=n(337632),p=n(15817),m=n(742558),_=n(810600),g=n(46257);const y=p.A.FILL,b=s.A.WHITE,v=s.A.BLACK,T=new s.A(.165,.165,.165,.8),w=new o.A(7,5),E=o.A.ZERO,S=r.A.ZERO,C=A.A.NONE,x=f.A.CENTER,I=m.A.CENTER,P=new r.A,D=new s.A,O=new s.A,L=new s.A,N=new o.A,M=new r.A,R=new o.A,F=new h.A,B=new h.A,U=new h.A,k=new d.A;function V(e){this.entity=e,this.label=void 0,this.index=void 0}function H(e,t){if(!(0,c.A)(e))throw new u.A("entityCluster is required.");if(!(0,c.A)(t))throw new u.A("entityCollection is required.");t.collectionChanged.addEventListener(H.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}function z(e,t,n){(0,c.A)(e)&&(e.label=void 0,n.removeLabel(t))}H.prototype.update=function(e){if(!(0,c.A)(e))throw new u.A("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.entity,a=s._label;let l,u,d=o.label,h=s.isShowing&&s.isAvailable(e)&&g.A.getValueOrDefault(a._show,e,!0);if(h&&(u=g.A.getValueOrUndefined(s._position,e,P),l=g.A.getValueOrUndefined(a._text,e),h=(0,c.A)(u)&&(0,c.A)(l)),!h){z(o,s,n);continue}g.A.isConstant(s._position)||(n._clusterDirty=!0);let A=!1;const f=g.A.getValueOrDefault(a._heightReference,e,C);(0,c.A)(d)||(d=n.getLabel(s),d.id=s,o.label=d,A=r.A.equals(d.position,u)&&d.heightReference===f),d.show=!0,d.position=u,d.text=l,d.scale=g.A.getValueOrDefault(a._scale,e,1),d.font=g.A.getValueOrDefault(a._font,e,"30px sans-serif"),d.style=g.A.getValueOrDefault(a._style,e,y),d.fillColor=g.A.getValueOrDefault(a._fillColor,e,b,D),d.outlineColor=g.A.getValueOrDefault(a._outlineColor,e,v,O),d.outlineWidth=g.A.getValueOrDefault(a._outlineWidth,e,1),d.showBackground=g.A.getValueOrDefault(a._showBackground,e,!1),d.backgroundColor=g.A.getValueOrDefault(a._backgroundColor,e,T,L),d.backgroundPadding=g.A.getValueOrDefault(a._backgroundPadding,e,w,N),d.pixelOffset=g.A.getValueOrDefault(a._pixelOffset,e,E,R),d.eyeOffset=g.A.getValueOrDefault(a._eyeOffset,e,S,M),d.heightReference=f,d.horizontalOrigin=g.A.getValueOrDefault(a._horizontalOrigin,e,x),d.verticalOrigin=g.A.getValueOrDefault(a._verticalOrigin,e,I),d.translucencyByDistance=g.A.getValueOrUndefined(a._translucencyByDistance,e,F),d.pixelOffsetScaleByDistance=g.A.getValueOrUndefined(a._pixelOffsetScaleByDistance,e,B),d.scaleByDistance=g.A.getValueOrUndefined(a._scaleByDistance,e,U),d.distanceDisplayCondition=g.A.getValueOrUndefined(a._distanceDisplayCondition,e,k),d.disableDepthTestDistance=g.A.getValueOrUndefined(a._disableDepthTestDistance,e),A&&d._updateClamping()}return!0},H.prototype.getBoundingSphere=function(e,t){if(!(0,c.A)(e))throw new u.A("entity is required.");if(!(0,c.A)(t))throw new u.A("result is required.");const n=this._items.get(e.id);if(!(0,c.A)(n)||!(0,c.A)(n.label))return _.A.FAILED;const i=n.label;return t.center=r.A.clone((0,a.A)(i._clampedPosition,i.position),t.center),t.radius=0,_.A.DONE},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(H.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeLabel(e[t]);return(0,l.A)(this)},H.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._items,a=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,c.A)(r._label)&&(0,c.A)(r._position)&&s.set(r.id,new V(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,c.A)(r._label)&&(0,c.A)(r._position)?s.contains(r.id)||s.set(r.id,new V(r)):(z(s.get(r.id),r,a),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],z(s.get(r.id),r,a),s.remove(r.id)};const G=H},644736:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(41476),o=n(491446),r=n(605971),s=n(608191);function a(){r.A.throwInstantiationError()}Object.defineProperties(a.prototype,{isConstant:{get:r.A.throwInstantiationError},definitionChanged:{get:r.A.throwInstantiationError}}),a.prototype.getType=r.A.throwInstantiationError,a.prototype.getValue=r.A.throwInstantiationError,a.prototype.equals=r.A.throwInstantiationError,a.getValue=function(e,t,n){let r;return(0,o.A)(t)&&(r=t.getType(e),(0,o.A)(r))?((0,o.A)(n)&&n.type===r||(n=s.A.fromType(r)),t.getValue(e,n.uniforms),n):((0,o.A)(n)&&n.type===s.A.ColorType||(n=s.A.fromType(s.A.ColorType)),i.A.clone(i.A.WHITE,n.uniforms.color),n)};const c=a},963503:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(288787),o=n(660662),r=n(434067),s=n(267980),a=n(369031),c=n(41476),l=n(491446),u=n(677354),d=n(605971),h=n(584164),A=n(744603),f=n(428027),p=n(63316),m=n(623379),_=n(598361),g=n(988609),y=n(810600),b=n(46257),v=n(448871),T=n(336946);const w=g.A.ENABLED,E=p.A.NONE,S=c.A.RED,C=c.A.WHITE,x=f.A.HIGHLIGHT,I=new r.A(1,1),P=new h.A,D=new h.A,O=new c.A,L=new Array(4),N=new s.A;function M(e,t){a.A.typeOf.object("scene",e),a.A.typeOf.object("entityCollection",t),t.collectionChanged.addEventListener(M.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._modelHash={},this._entitiesToVisualize=new i.A,this._onCollectionChanged(t,t.values,[],[])}async function R(e,t,n,i){const o=e._primitives,r=e._modelHash;try{const s=await m.A.fromGltfAsync({url:n,incrementallyLoadTextures:i,scene:e._scene});if(e.isDestroyed()||!(0,l.A)(r[t.id]))return;s.id=t,o.add(s),r[t.id].modelPrimitive=s,s.errorEvent.addEventListener((e=>{(0,l.A)(r[t.id])&&(console.log(e),"TextureError"!==e.name&&s.incrementallyLoadTextures&&(r[t.id].loadFailed=!0))}))}catch(n){if(e.isDestroyed()||!(0,l.A)(r[t.id]))return;console.log(n),r[t.id].loadFailed=!0}}M.prototype.update=function(e){if(!(0,l.A)(e))throw new d.A("time is required.");const t=this._entitiesToVisualize.values,n=this._modelHash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){const r=t[o],a=r._model;let u,d,f=n[r.id],p=r.isShowing&&r.isAvailable(e)&&b.A.getValueOrDefault(a._show,e,!0);if(p&&(d=r.computeModelMatrix(e,P),u=A.A.createIfNeeded(b.A.getValueOrUndefined(a._uri,e)),p=(0,l.A)(d)&&(0,l.A)(u)),!p){(0,l.A)(f)&&f.modelPrimitive&&(f.modelPrimitive.show=!1);continue}(0,l.A)(f)&&u.url===f.url||((0,l.A)(f?.modelPrimitive)&&(i.removeAndDestroy(f.modelPrimitive),delete n[r.id]),f={modelPrimitive:void 0,url:u.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFailed:!1,modelUpdated:!1,awaitingSampleTerrain:!1,clampedBoundingSphere:void 0,sampleTerrainFailed:!1},n[r.id]=f,R(this,r,u,b.A.getValueOrDefault(a._incrementallyLoadTextures,e,!0)));const m=f.modelPrimitive;if(!(0,l.A)(m))continue;m.show=!0,m.scale=b.A.getValueOrDefault(a._scale,e,1),m.minimumPixelSize=b.A.getValueOrDefault(a._minimumPixelSize,e,0),m.maximumScale=b.A.getValueOrUndefined(a._maximumScale,e),m.modelMatrix=h.A.clone(d,m.modelMatrix),m.shadows=b.A.getValueOrDefault(a._shadows,e,w),m.heightReference=b.A.getValueOrDefault(a._heightReference,e,E),m.distanceDisplayCondition=b.A.getValueOrUndefined(a._distanceDisplayCondition,e),m.silhouetteColor=b.A.getValueOrDefault(a._silhouetteColor,e,S,O),m.silhouetteSize=b.A.getValueOrDefault(a._silhouetteSize,e,0),m.color=b.A.getValueOrDefault(a._color,e,C,O),m.colorBlendMode=b.A.getValueOrDefault(a._colorBlendMode,e,x),m.colorBlendAmount=b.A.getValueOrDefault(a._colorBlendAmount,e,.5),m.clippingPlanes=b.A.getValueOrUndefined(a._clippingPlanes,e),m.clampAnimations=b.A.getValueOrDefault(a._clampAnimations,e,!0),m.imageBasedLighting.imageBasedLightingFactor=b.A.getValueOrDefault(a._imageBasedLightingFactor,e,I);let g=b.A.getValueOrUndefined(a._lightColor,e);if((0,l.A)(g)&&(c.A.pack(g,L,0),g=s.A.unpack(L,0,N)),m.lightColor=g,m.customShader=b.A.getValueOrUndefined(a._customShader,e),n[r.id].modelUpdated=!0,m.ready){const t=b.A.getValueOrDefault(a._runAnimations,e,!0);f.animationsRunning!==t&&(t?m.activeAnimations.addAll({loop:_.A.REPEAT}):m.activeAnimations.removeAll(),f.animationsRunning=t);const n=b.A.getValueOrUndefined(a._nodeTransformations,e,f.nodeTransformationsScratch);if((0,l.A)(n)){const e=Object.keys(n);for(let t=0,i=e.length;t<i;++t){const i=e[t],o=n[i];if(!(0,l.A)(o))continue;const r=m.getNode(i);if(!(0,l.A)(r))continue;const s=h.A.fromTranslationRotationScale(o,D);r.matrix=h.A.multiply(r.originalMatrix,s,s)}}let i=!1;const o=b.A.getValueOrUndefined(a._articulations,e,f.articulationsScratch);if((0,l.A)(o)){const e=Object.keys(o);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=o[n];(0,l.A)(r)&&(i=!0,m.setArticulationStage(n,r))}}i&&m.applyArticulations()}}return!0},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(M.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._modelHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)U(0,e[i],t,n);return(0,u.A)(this)},M._sampleTerrainMostDetailed=v.A;const F=new s.A,B=new T.A;function U(e,t,n,i){const o=n[t.id];(0,l.A)(o)&&(i.removeAndDestroy(o.modelPrimitive),delete n[t.id])}function k(e,t){const n=t[e.id];(0,l.A)(n)&&(n.nodeTransformationsScratch={},n.articulationsScratch={})}M.prototype.getBoundingSphere=function(e,t){if(!(0,l.A)(e))throw new d.A("entity is required.");if(!(0,l.A)(t))throw new d.A("result is required.");const n=this._modelHash[e.id];if(!(0,l.A)(n))return y.A.FAILED;if(n.loadFailed)return y.A.FAILED;const i=n.modelPrimitive;if(!(0,l.A)(i)||!i.show)return y.A.PENDING;if(!i.ready||!n.modelUpdated)return y.A.PENDING;const r=this._scene.globe,s=(0,l.A)(r)?r.terrainProvider:void 0,a=i.heightReference!==p.A.NONE;if((0,l.A)(r)&&a){const n=r.ellipsoid;if((0,l.A)(s)&&((0,l.A)(s._ready)?!s._ready:(0,l.A)(s.ready)&&!s.ready))return y.A.PENDING;const a=i.modelMatrix;F.x=a[12],F.y=a[13],F.z=a[14];const c=n.cartesianToCartographic(F);if(!(0,l.A)(s.availability)){i.heightReference===p.A.CLAMP_TO_GROUND&&(c.height=0);const e=n.cartographicToCartesian(c);return o.A.clone(i.boundingSphere,t),t.center=e,y.A.DONE}let u=this._modelHash[e.id].clampedBoundingSphere;return this._modelHash[e.id].sampleTerrainFailed?(this._modelHash[e.id].sampleTerrainFailed=!1,y.A.FAILED):(0,l.A)(u)?(o.A.clone(u,t),this._modelHash[e.id].clampedBoundingSphere=void 0,y.A.DONE):(u=new o.A,this._modelHash[e.id].awaitingSampleTerrain||(T.A.clone(c,B),this._modelHash[e.id].awaitingSampleTerrain=!0,M._sampleTerrainMostDetailed(s,[B]).then((t=>{if(this.isDestroyed())return;this._modelHash[e.id].awaitingSampleTerrain=!1;const r=t[0];i.heightReference===p.A.RELATIVE_TO_GROUND&&(r.height+=c.height),n.cartographicToCartesian(r,F),o.A.clone(i.boundingSphere,u),u.center=F,this._modelHash[e.id].clampedBoundingSphere=o.A.clone(u)})).catch((t=>{this.isDestroyed()||(this._modelHash[e.id].sampleTerrainFailed=!0,this._modelHash[e.id].awaitingSampleTerrain=!1)}))),y.A.PENDING)}return o.A.clone(i.boundingSphere,t),y.A.DONE},M.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._entitiesToVisualize,a=this._modelHash,c=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],(0,l.A)(r._model)&&(0,l.A)(r._position)&&s.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],(0,l.A)(r._model)&&(0,l.A)(r._position)?(k(r,a),s.set(r.id,r)):(U(0,r,a,c),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],U(0,r,a,c),s.remove(r.id)};const V=M},563051:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(288787),o=n(267980),r=n(491446),s=n(677354),a=n(605971),c=n(591978),l=n(331185),u=n(584164),d=n(886033),h=n(93467),A=n(543622),f=n(891674),p=n(62467),m=n(403911),_=n(808938),g=n(644736),y=n(46257),b=n(857870),v=n(841802),T=n(347768),w=n(13346);const E=new h.A,S=new h.A,C=new h.A;function x(e){this.entity=e,this.polyline=void 0,this.index=void 0,this.updater=void 0}function I(e,t,n,i,o,s,a,l){for(;e instanceof b.A;)e=e.resolvedProperty;return a=e instanceof v.A?function(e,t,n,i,o,s,a,l,u){let d,h=l;d=e.getValueInReferenceFrame(t,s,u[h]),(0,r.A)(d)&&(u[h++]=d);let A=!(0,r.A)(o)||c.A.lessThanOrEquals(o,t)||c.A.greaterThanOrEquals(o,n),f=0;const p=i.length;let m=i[f];const _=n;let g,y,b,v=!1;for(;f<p;){if(!A&&c.A.greaterThanOrEquals(m,o)&&(d=e.getValueInReferenceFrame(o,s,u[h]),(0,r.A)(d)&&(u[h++]=d),A=!0),c.A.greaterThan(m,t)&&c.A.lessThan(m,_)&&!m.equals(o)&&(d=e.getValueInReferenceFrame(m,s,u[h]),(0,r.A)(d)&&(u[h++]=d)),f<p-1){if(a>0&&!v){const e=i[f+1],t=c.A.secondsDifference(e,m);v=t>a,v&&(g=Math.ceil(t/a),y=0,b=t/Math.max(g,2),g=Math.max(g-1,1))}if(v&&y<g){m=c.A.addSeconds(m,b,new c.A),y++;continue}}v=!1,f++,m=i[f]}return d=e.getValueInReferenceFrame(n,s,u[h]),(0,r.A)(d)&&(u[h++]=d),h}(e,t,n,e._property._times,i,o,s,a,l):e instanceof m.A?function(e,t,n,i,o,r,s,a){S.start=t,S.stop=n;let l=s;const u=e.intervals;for(let e=0;e<u.length;e++){const s=u.get(e);if(!h.A.intersect(s,S,E).isEmpty){const e=s.start,u=s.stop;let d=t;c.A.greaterThan(e,d)&&(d=e);let h=n;c.A.lessThan(u,h)&&(h=u),l=I(s.data,d,h,i,o,r,l,a)}}return l}(e,t,n,i,o,s,a,l):e instanceof w.A?function(e,t,n,i,o,s,a,l){C.start=t,C.stop=n;let u=a;const d=e.intervals;for(let t=0;t<d.length;t++){const n=d.get(t);if(!h.A.intersect(n,C,E).isEmpty){let t=n.start;n.isStartIncluded||(t=n.isStopIncluded?n.stop:c.A.addSeconds(n.start,c.A.secondsDifference(n.stop,n.start)/2,new c.A));const i=e.getValueInReferenceFrame(t,o,l[u]);(0,r.A)(i)&&(l[u]=i,u++)}}return u}(e,t,n,0,o,0,a,l):e instanceof _.A||e instanceof T.A&&y.A.isConstant(e)?function(e,t,n,i,o,s,a,c){const l=e.getValueInReferenceFrame(t,o,c[a]);return(0,r.A)(l)&&(c[a++]=l),a}(e,t,0,0,o,0,a,l):function(e,t,n,i,o,s,a,l){let u,d=0,h=a,A=t;const f=Math.max(s,60);let p=!(0,r.A)(i)||c.A.lessThanOrEquals(i,t)||c.A.greaterThanOrEquals(i,n);for(;c.A.lessThan(A,n);)!p&&c.A.greaterThanOrEquals(A,i)&&(p=!0,u=e.getValueInReferenceFrame(i,o,l[h]),(0,r.A)(u)&&(l[h]=u,h++)),u=e.getValueInReferenceFrame(A,o,l[h]),(0,r.A)(u)&&(l[h]=u,h++),d++,A=c.A.addSeconds(t,f*d,new c.A);return u=e.getValueInReferenceFrame(n,o,l[h]),(0,r.A)(u)&&(l[h]=u,h++),h}(e,t,n,i,o,s,a,l),a}function P(e,t,n,i,o,s,a){(0,r.A)(a)||(a=[]);const c=I(e,t,n,i,o,s,0,a);return a.length=c,a}const D=new l.A;function O(e,t){this._unusedIndexes=[],this._polylineCollection=new f.A,this._scene=e,this._referenceFrame=t,e.primitives.add(this._polylineCollection)}function L(e,t){if(!(0,r.A)(e))throw new a.A("scene is required.");if(!(0,r.A)(t))throw new a.A("entityCollection is required.");t.collectionChanged.addEventListener(L.prototype._onCollectionChanged,this),this._scene=e,this._updaters={},this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}O.prototype.update=function(e){if(this._referenceFrame===d.A.INERTIAL){let t=A.A.computeIcrfToFixedMatrix(e,D);(0,r.A)(t)||(t=A.A.computeTemeToPseudoFixedMatrix(e,D)),u.A.fromRotationTranslation(t,o.A.ZERO,this._polylineCollection.modelMatrix)}},O.prototype.updateObject=function(e,t){const n=t.entity,i=n._path,o=n._position;let s,a;const l=i._show;let u=t.polyline,d=n.isShowing&&n.isAvailable(e)&&(!(0,r.A)(l)||l.getValue(e));if(d){const t=y.A.getValueOrUndefined(i._leadTime,e),o=y.A.getValueOrUndefined(i._trailTime,e),l=n._availability,u=(0,r.A)(l),h=(0,r.A)(t),A=(0,r.A)(o);if(d=u||h&&A,d){if(A&&(s=c.A.addSeconds(e,-o,new c.A)),h&&(a=c.A.addSeconds(e,t,new c.A)),u){const e=l.start,t=l.stop;A&&!c.A.greaterThan(e,s)||(s=e),h&&!c.A.lessThan(t,a)||(a=t)}d=c.A.lessThan(s,a)}}if(!d)return void((0,r.A)(u)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,u.show=!1,t.index=void 0));if(!(0,r.A)(u)){const e=this._unusedIndexes;if(e.length>0){const n=e.pop();u=this._polylineCollection.get(n),t.index=n}else t.index=this._polylineCollection.length,u=this._polylineCollection.add();u.id=n,t.polyline=u}const h=y.A.getValueOrDefault(i._resolution,e,60);u.show=!0,u.positions=P(o,s,a,e,this._referenceFrame,h,u.positions.slice()),u.material=g.A.getValue(e,i._material,u.material),u.width=y.A.getValueOrDefault(i._width,e,1),u.distanceDisplayCondition=y.A.getValueOrUndefined(i._distanceDisplayCondition,e,u.distanceDisplayCondition)},O.prototype.removeObject=function(e){const t=e.polyline;(0,r.A)(t)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,t.show=!1,t.id=void 0,e.index=void 0)},O.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),(0,s.A)(this)},L.prototype.update=function(e){if(!(0,r.A)(e))throw new a.A("time is required.");const t=this._updaters;for(const n in t)t.hasOwnProperty(n)&&t[n].update(e);const n=this._items.values;if(0===n.length&&(0,r.A)(this._updaters)&&Object.keys(this._updaters).length>0){for(const e in t)t.hasOwnProperty(e)&&t[e].destroy();this._updaters={}}for(let t=0,i=n.length;t<i;t++){const i=n[t],o=i.entity._position,s=i.updater;let a=d.A.FIXED;this._scene.mode===p.A.SCENE3D&&(a=o.referenceFrame);let c=this._updaters[a];s===c&&(0,r.A)(c)?c.updateObject(e,i):((0,r.A)(s)&&s.removeObject(i),(0,r.A)(c)||(c=new O(this._scene,a),c.update(e),this._updaters[a]=c),i.updater=c,(0,r.A)(c)&&c.updateObject(e,i))}return!0},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(L.prototype._onCollectionChanged,this);const e=this._updaters;for(const t in e)e.hasOwnProperty(t)&&e[t].destroy();return(0,s.A)(this)},L.prototype._onCollectionChanged=function(e,t,n,i){let o,s,a;const c=this._items;for(o=t.length-1;o>-1;o--)s=t[o],(0,r.A)(s._path)&&(0,r.A)(s._position)&&c.set(s.id,new x(s));for(o=i.length-1;o>-1;o--)s=i[o],(0,r.A)(s._path)&&(0,r.A)(s._position)?c.contains(s.id)||c.set(s.id,new x(s)):(a=c.get(s.id),(0,r.A)(a)&&((0,r.A)(a.updater)&&a.updater.removeObject(a),c.remove(s.id)));for(o=n.length-1;o>-1;o--)s=n[o],a=c.get(s.id),(0,r.A)(a)&&((0,r.A)(a.updater)&&a.updater.removeObject(a),c.remove(s.id))},L._subSample=P;const N=L},379843:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(267980),o=n(369031),r=n(41476),s=n(433235),a=n(491446),c=n(605971),l=n(330926),u=n(75200),d=n(32655),h=n(367817),A=n(331185),f=n(584164),p=n(84609),m=n(350939),_=n(708857),g=n(551549),y=n(612123),b=n(312421),v=n(799086),T=n(286299),w=n(46257);const E=new i.A,S=new r.A;function C(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function x(e,t){T.A.call(this,{entity:e,scene:t,geometryOptions:new C(e),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(e,"plane",e.plane,void 0)}function I(e,t,n){v.A.call(this,e,t,n)}(0,a.A)(Object.create)&&(x.prototype=Object.create(T.A.prototype),x.prototype.constructor=x),x.prototype.createFillGeometryInstance=function(e){if(o.A.defined("time",e),!this._fillEnabled)throw new c.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let i,d;const h=new _.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),A=this._distanceDisplayConditionProperty.getValue(e),f=l.A.fromDistanceDisplayCondition(A);if(this._materialProperty instanceof b.A){let t;(0,a.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,S)),(0,a.A)(t)||(t=r.A.WHITE),d=s.A.fromColor(t),i={show:h,distanceDisplayCondition:f,color:d}}else i={show:h,distanceDisplayCondition:f};const m=t.plane,g=this._options;let y=t.computeModelMatrix(e);const v=w.A.getValueOrDefault(m.plane,e,g.plane),T=w.A.getValueOrUndefined(m.dimensions,e,g.dimensions);return g.plane=v,g.dimensions=T,y=F(v,T,y,y),new u.A({id:t,geometry:new p.A(this._options),modelMatrix:y,attributes:i})},x.prototype.createOutlineGeometryInstance=function(e){if(o.A.defined("time",e),!this._outlineEnabled)throw new c.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=w.A.getValueOrDefault(this._outlineColorProperty,e,r.A.BLACK,S),a=this._distanceDisplayConditionProperty.getValue(e),d=t.plane,h=this._options;let A=t.computeModelMatrix(e);const f=w.A.getValueOrDefault(d.plane,e,h.plane),p=w.A.getValueOrUndefined(d.dimensions,e,h.dimensions);return h.plane=f,h.dimensions=p,A=F(f,p,A,A),new u.A({id:t,geometry:new m.A,modelMatrix:A,attributes:{show:new _.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.A.fromColor(i),distanceDisplayCondition:l.A.fromDistanceDisplayCondition(a)}})},x.prototype._isHidden=function(e,t){return!(0,a.A)(t.plane)||!(0,a.A)(t.dimensions)||!(0,a.A)(e.position)||T.A.prototype._isHidden.call(this,e,t)},x.prototype._getIsClosed=function(e){return!1},x.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&w.A.isConstant(e.orientation)&&t.plane.isConstant&&t.dimensions.isConstant&&w.A.isConstant(t.outlineWidth))},x.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof b.A,i=this._options;i.vertexFormat=n?y.A.VERTEX_FORMAT:g.A.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(d.A.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(d.A.MINIMUM_VALUE,i.dimensions)},x.DynamicGeometryUpdater=I,(0,a.A)(Object.create)&&(I.prototype=Object.create(v.A.prototype),I.prototype.constructor=I),I.prototype._isHidden=function(e,t,n){const i=this._options,o=w.A.getValueOrUndefined(e.position,n,E);return!(0,a.A)(o)||!(0,a.A)(i.plane)||!(0,a.A)(i.dimensions)||v.A.prototype._isHidden.call(this,e,t,n)},I.prototype._setOptions=function(e,t,n){const i=this._options;i.plane=w.A.getValueOrDefault(t.plane,n,i.plane),i.dimensions=w.A.getValueOrUndefined(t.dimensions,n,i.dimensions)};const P=new i.A,D=new i.A,O=new i.A,L=new i.A,N=new A.A,M=new A.A,R=new f.A;function F(e,t,n,o){const r=e.normal,s=e.distance,a=i.A.multiplyByScalar(r,-s,O);let c=i.A.clone(i.A.UNIT_Z,D);h.A.equalsEpsilon(Math.abs(i.A.dot(c,r)),1,h.A.EPSILON8)&&(c=i.A.clone(i.A.UNIT_Y,c));const l=i.A.cross(c,r,P);c=i.A.cross(r,l,c),i.A.normalize(l,l),i.A.normalize(c,c);const u=N;A.A.setColumn(u,0,l,u),A.A.setColumn(u,1,c,u),A.A.setColumn(u,2,r,u);const d=i.A.fromElements(t.x,t.y,1,L),p=A.A.multiplyByScale(u,d,M),m=f.A.fromRotationTranslation(p,a,R);return f.A.multiplyTransformation(n,m,o)}x.createPrimitiveMatrix=F;const B=x},364360:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(288787),o=n(267980),r=n(41476),s=n(491446),a=n(677354),c=n(605971),l=n(853331),u=n(290176),d=n(883734),h=n(63316),A=n(810600),f=n(46257);const p=r.A.WHITE,m=r.A.BLACK,_=new r.A,g=new o.A,y=new r.A,b=new u.A,v=new u.A,T=new l.A;function w(e){this.entity=e,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function E(e,t){if(!(0,s.A)(e))throw new c.A("entityCluster is required.");if(!(0,s.A)(t))throw new c.A("entityCollection is required.");t.collectionChanged.addEventListener(E.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}function S(e,t,n){if((0,s.A)(e)){const i=e.pointPrimitive;if((0,s.A)(i))return e.pointPrimitive=void 0,void n.removePoint(t);const o=e.billboard;(0,s.A)(o)&&(e.billboard=void 0,n.removeBillboard(t))}}E.prototype.update=function(e){if(!(0,s.A)(e))throw new c.A("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,a=t.length;i<a;i++){const a=t[i],c=a.entity,l=c._point;let u=a.pointPrimitive,A=a.billboard;const w=f.A.getValueOrDefault(l._heightReference,e,h.A.NONE);let E,C=c.isShowing&&c.isAvailable(e)&&f.A.getValueOrDefault(l._show,e,!0);if(C&&(E=f.A.getValueOrUndefined(c._position,e,g),C=(0,s.A)(E)),!C){S(a,c,n);continue}f.A.isConstant(c._position)||(n._clusterDirty=!0);let x=!1,I=!1;if(w===h.A.NONE||(0,s.A)(A)?w!==h.A.NONE||(0,s.A)(u)||((0,s.A)(A)&&(S(a,c,n),A=void 0),u=n.getPoint(c),u.id=c,a.pointPrimitive=u):((0,s.A)(u)&&(S(a,c,n),u=void 0),A=n.getBillboard(c),A.id=c,A.image=void 0,a.billboard=A,x=!0,I=o.A.equals(A.position,E)&&A.heightReference===w),(0,s.A)(u))u.show=!0,u.position=E,u.scaleByDistance=f.A.getValueOrUndefined(l._scaleByDistance,e,b),u.translucencyByDistance=f.A.getValueOrUndefined(l._translucencyByDistance,e,v),u.color=f.A.getValueOrDefault(l._color,e,p,_),u.outlineColor=f.A.getValueOrDefault(l._outlineColor,e,m,y),u.outlineWidth=f.A.getValueOrDefault(l._outlineWidth,e,0),u.pixelSize=f.A.getValueOrDefault(l._pixelSize,e,1),u.distanceDisplayCondition=f.A.getValueOrUndefined(l._distanceDisplayCondition,e,T),u.disableDepthTestDistance=f.A.getValueOrDefault(l._disableDepthTestDistance,e,0);else if((0,s.A)(A)){A.show=!0,A.position=E,A.scaleByDistance=f.A.getValueOrUndefined(l._scaleByDistance,e,b),A.translucencyByDistance=f.A.getValueOrUndefined(l._translucencyByDistance,e,v),A.distanceDisplayCondition=f.A.getValueOrUndefined(l._distanceDisplayCondition,e,T),A.disableDepthTestDistance=f.A.getValueOrDefault(l._disableDepthTestDistance,e,0),A.heightReference=w;const t=f.A.getValueOrDefault(l._color,e,p,_),n=f.A.getValueOrDefault(l._outlineColor,e,m,y),i=Math.round(f.A.getValueOrDefault(l._outlineWidth,e,0));let o=Math.max(1,Math.round(f.A.getValueOrDefault(l._pixelSize,e,1)));if(i>0?(A.scale=1,x=x||i!==a.outlineWidth||o!==a.pixelSize||!r.A.equals(t,a.color)||!r.A.equals(n,a.outlineColor)):(A.scale=o/50,o=50,x=x||i!==a.outlineWidth||!r.A.equals(t,a.color)||!r.A.equals(n,a.outlineColor)),x){a.color=r.A.clone(t,a.color),a.outlineColor=r.A.clone(n,a.outlineColor),a.pixelSize=o,a.outlineWidth=i;const e=t.alpha,s=t.toCssColorString(),c=n.toCssColorString(),l=JSON.stringify([s,o,c,i]);A.setImage(l,(0,d.A)(e,s,c,i,o))}I&&A._updateClamping()}}return!0},E.prototype.getBoundingSphere=function(e,t){if(!(0,s.A)(e))throw new c.A("entity is required.");if(!(0,s.A)(t))throw new c.A("result is required.");const n=this._items.get(e.id);if(!(0,s.A)(n)||!(0,s.A)(n.pointPrimitive)&&!(0,s.A)(n.billboard))return A.A.FAILED;if((0,s.A)(n.pointPrimitive))t.center=o.A.clone(n.pointPrimitive.position,t.center);else{const e=n.billboard;if(!(0,s.A)(e._clampedPosition))return A.A.PENDING;t.center=o.A.clone(e._clampedPosition,t.center)}return t.radius=0,A.A.DONE},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(E.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removePoint(e[t]);return(0,a.A)(this)},E.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const a=this._items,c=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,s.A)(r._point)&&(0,s.A)(r._position)&&a.set(r.id,new w(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,s.A)(r._point)&&(0,s.A)(r._position)?a.contains(r.id)||a.set(r.id,new w(r)):(S(a.get(r.id),r,c),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],S(a.get(r.id),r,c),a.remove(r.id)};const C=E},570667:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(564886),o=n(215327),r=n(434067),s=n(267980),a=n(369031),c=n(41476),l=n(433235),u=n(594647),d=n(173885),h=n(491446),A=n(605971),f=n(330926),p=n(658091),m=n(75200),_=n(32655),g=n(852575),y=n(983884),b=n(151949),v=n(87551),T=n(697422),w=n(708857),E=n(63316),S=n(551549),C=n(612123),x=n(312421),I=n(799086),P=n(286299),D=n(817634),O=n(46257);const L="Entity polygons cannot have both height and perPositionHeight.  height will be ignored",N="heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored",M=new c.A,R=s.A.ZERO,F=new s.A,B=new T.A,U=[],k=new r.A;function V(e){this.id=e,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function H(e,t){D.A.call(this,{entity:e,scene:t,geometryOptions:new V(e),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(e,"polygon",e.polygon,void 0)}function z(e,t,n){I.A.call(this,e,t,n)}(0,h.A)(Object.create)&&(H.prototype=Object.create(D.A.prototype),H.prototype.constructor=H),H.prototype.createFillGeometryInstance=function(e){if(a.A.defined("time",e),!this._fillEnabled)throw new A.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=this._options,o={show:new w.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:f.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof x.A){let t;(0,h.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,M)),(0,h.A)(t)||(t=c.A.WHITE),o.color=l.A.fromColor(t)}let r;return(0,h.A)(i.offsetAttribute)&&(o.offset=g.A.fromCartesian3(O.A.getValueOrDefault(this._terrainOffsetProperty,e,R,F))),r=i.perPositionHeight&&!(0,h.A)(i.extrudedHeight)?new u.A(i):new b.A(i),new m.A({id:t,geometry:r,attributes:o})},H.prototype.createOutlineGeometryInstance=function(e){if(a.A.defined("time",e),!this._outlineEnabled)throw new A.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=this._options,o=O.A.getValueOrDefault(this._outlineColorProperty,e,c.A.BLACK,M),r=this._distanceDisplayConditionProperty.getValue(e),s={show:new w.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:l.A.fromColor(o),distanceDisplayCondition:f.A.fromDistanceDisplayCondition(r),offset:void 0};let u;return(0,h.A)(i.offsetAttribute)&&(s.offset=g.A.fromCartesian3(O.A.getValueOrDefault(this._terrainOffsetProperty,e,R,F))),u=i.perPositionHeight&&!(0,h.A)(i.extrudedHeight)?new d.A(i):new v.A(i),new m.A({id:t,geometry:u,attributes:s})},H.prototype._computeCenter=function(e,t){const n=O.A.getValueOrUndefined(this._entity.polygon.hierarchy,e);if(!(0,h.A)(n))return;const i=n.positions;if(0===i.length)return;const o=this._scene.mapProjection.ellipsoid,s=p.A.fromPoints(i,o),a=s.projectPointsOntoPlane(i,U),c=a.length;let l=0,u=c-1,d=new r.A;for(let e=0;e<c;u=e++){const t=a[e],n=a[u],i=t.x*n.y-n.x*t.y;let o=r.A.add(t,n,k);o=r.A.multiplyByScalar(o,i,o),d=r.A.add(d,o,d),l+=i}const A=1/(3*l);return d=r.A.multiplyByScalar(d,A,d),s.projectPointOntoEllipsoid(d,t)},H.prototype._isHidden=function(e,t){return!(0,h.A)(t.hierarchy)||P.A.prototype._isHidden.call(this,e,t)},H.prototype._isOnTerrain=function(e,t){const n=D.A.prototype._isOnTerrain.call(this,e,t),i=t.perPositionHeight,o=(0,h.A)(i)&&(!i.isConstant||i.getValue(_.A.MINIMUM_VALUE));return n&&!o},H.prototype._isDynamic=function(e,t){return!t.hierarchy.isConstant||!O.A.isConstant(t.height)||!O.A.isConstant(t.extrudedHeight)||!O.A.isConstant(t.granularity)||!O.A.isConstant(t.stRotation)||!O.A.isConstant(t.textureCoordinates)||!O.A.isConstant(t.outlineWidth)||!O.A.isConstant(t.perPositionHeight)||!O.A.isConstant(t.closeTop)||!O.A.isConstant(t.closeBottom)||!O.A.isConstant(t.zIndex)||!O.A.isConstant(t.arcType)||this._onTerrain&&!O.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof x.A)},H.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof x.A,r=this._options;r.vertexFormat=n?C.A.VERTEX_FORMAT:S.A.MaterialSupport.TEXTURED.vertexFormat;const s=t.hierarchy.getValue(_.A.MINIMUM_VALUE);let a=O.A.getValueOrUndefined(t.height,_.A.MINIMUM_VALUE);const c=O.A.getValueOrDefault(t.heightReference,_.A.MINIMUM_VALUE,E.A.NONE);let l=O.A.getValueOrUndefined(t.extrudedHeight,_.A.MINIMUM_VALUE);const u=O.A.getValueOrDefault(t.extrudedHeightReference,_.A.MINIMUM_VALUE,E.A.NONE),d=O.A.getValueOrDefault(t.perPositionHeight,_.A.MINIMUM_VALUE,!1);let A;a=D.A.getGeometryHeight(a,c),d?((0,h.A)(a)&&(a=void 0,(0,y.A)(L)),c!==E.A.NONE&&d&&(a=void 0,(0,y.A)(N))):((0,h.A)(l)&&!(0,h.A)(a)&&(a=0),A=D.A.computeGeometryOffsetAttribute(a,c,l,u)),r.polygonHierarchy=s,r.granularity=O.A.getValueOrUndefined(t.granularity,_.A.MINIMUM_VALUE),r.stRotation=O.A.getValueOrUndefined(t.stRotation,_.A.MINIMUM_VALUE),r.perPositionHeight=d,r.closeTop=O.A.getValueOrDefault(t.closeTop,_.A.MINIMUM_VALUE,!0),r.closeBottom=O.A.getValueOrDefault(t.closeBottom,_.A.MINIMUM_VALUE,!0),r.offsetAttribute=A,r.height=a,r.arcType=O.A.getValueOrDefault(t.arcType,_.A.MINIMUM_VALUE,o.A.GEODESIC),r.textureCoordinates=O.A.getValueOrUndefined(t.textureCoordinates,_.A.MINIMUM_VALUE),l=D.A.getGeometryExtrudedHeight(l,u),l===D.A.CLAMP_TO_GROUND&&(l=i.A.getMinimumMaximumHeights(b.A.computeRectangle(r,B)).minimumTerrainHeight),r.extrudedHeight=l},H.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight,i=(0,h.A)(n)&&n!==t;return!e.perPositionHeight&&(!i&&0===t||i&&e.closeTop&&e.closeBottom)},H.DynamicGeometryUpdater=z,(0,h.A)(Object.create)&&(z.prototype=Object.create(I.A.prototype),z.prototype.constructor=z),z.prototype._isHidden=function(e,t,n){return!(0,h.A)(this._options.polygonHierarchy)||I.A.prototype._isHidden.call(this,e,t,n)},z.prototype._setOptions=function(e,t,n){const r=this._options;r.polygonHierarchy=O.A.getValueOrUndefined(t.hierarchy,n);let s=O.A.getValueOrUndefined(t.height,n);const a=O.A.getValueOrDefault(t.heightReference,n,E.A.NONE),c=O.A.getValueOrDefault(t.extrudedHeightReference,n,E.A.NONE);let l=O.A.getValueOrUndefined(t.extrudedHeight,n);const u=O.A.getValueOrUndefined(t.perPositionHeight,n);let d;s=D.A.getGeometryHeight(s,c),u?((0,h.A)(s)&&(s=void 0,(0,y.A)(L)),a!==E.A.NONE&&u&&(s=void 0,(0,y.A)(N))):((0,h.A)(l)&&!(0,h.A)(s)&&(s=0),d=D.A.computeGeometryOffsetAttribute(s,a,l,c)),r.granularity=O.A.getValueOrUndefined(t.granularity,n),r.stRotation=O.A.getValueOrUndefined(t.stRotation,n),r.textureCoordinates=O.A.getValueOrUndefined(t.textureCoordinates,n),r.perPositionHeight=O.A.getValueOrUndefined(t.perPositionHeight,n),r.closeTop=O.A.getValueOrDefault(t.closeTop,n,!0),r.closeBottom=O.A.getValueOrDefault(t.closeBottom,n,!0),r.offsetAttribute=d,r.height=s,r.arcType=O.A.getValueOrDefault(t.arcType,n,o.A.GEODESIC),l=D.A.getGeometryExtrudedHeight(l,c),l===D.A.CLAMP_TO_GROUND&&(l=i.A.getMinimumMaximumHeights(b.A.computeRectangle(r,B)).minimumTerrainHeight),r.extrudedHeight=l};const G=H},372891:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var i=n(215327),o=n(660662),r=n(369031),s=n(41476),a=n(433235),c=n(419061),l=n(491446),u=n(677354),d=n(605971),h=n(853331),A=n(330926),f=n(955943),p=n(75200),m=n(974904),_=n(32655),g=n(983884),y=n(977363),b=n(870349),v=n(708857),T=n(426807),w=n(71578),E=n(433052),S=n(891674),C=n(234957),x=n(920757),I=n(988609),P=n(810600),D=n(312421),O=n(969077),L=n(644736),N=n(46257);const M=new O.A(0),R={},F=new s.A,B=new D.A(s.A.WHITE),U=new O.A(!0),k=new O.A(I.A.DISABLED),V=new O.A(new h.A),H=new O.A(w.A.BOTH);function z(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function G(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function j(e,t){if(!(0,l.A)(e))throw new d.A("entity is required");if(!(0,l.A)(t))throw new d.A("scene is required");this._entity=e,this._scene=t,this._entitySubscription=e.definitionChanged.addEventListener(j.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new f.A,this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new z,this._groundGeometryOptions=new G,this._id=`polyline-${e.id}`,this._clampToGround=!1,this._supportsPolylinesOnTerrain=T.A.supportsPolylinesOnTerrain(t),this._zIndex=0,this._onEntityPropertyChanged(e,"polyline",e.polyline,void 0)}Object.defineProperties(j.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,l.A)(this._entity.availability)&&N.A.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}}),j.prototype.isOutlineVisible=function(e){return!1},j.prototype.isFilled=function(e){const t=this._entity,n=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e);return(0,c.A)(n,!1)},j.prototype.createFillGeometryInstance=function(e){if(!(0,l.A)(e))throw new d.A("time is required.");if(!this._fillEnabled)throw new d.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new v.A(n&&t.isShowing&&this._showProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),r={show:i,distanceDisplayCondition:A.A.fromDistanceDisplayCondition(o)};let c;return this._materialProperty instanceof D.A&&((0,l.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(c=this._materialProperty.color.getValue(e,F)),(0,l.A)(c)||(c=s.A.WHITE),r.color=a.A.fromColor(c)),this.clampToGround?new p.A({id:t,geometry:new m.A(this._groundGeometryOptions),attributes:r}):((0,l.A)(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof D.A&&((0,l.A)(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||n)&&(c=this._depthFailMaterialProperty.color.getValue(e,F)),(0,l.A)(c)||(c=s.A.WHITE),r.depthFailColor=a.A.fromColor(c)),new p.A({id:t,geometry:new y.A(this._geometryOptions),attributes:r}))},j.prototype.createOutlineGeometryInstance=function(e){throw new d.A("This instance does not represent an outlined geometry.")},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){this._entitySubscription(),(0,u.A)(this)},j.prototype._onEntityPropertyChanged=function(e,t,n,i){if("availability"!==t&&"polyline"!==t)return;const o=this._entity.polyline;if(!(0,l.A)(o))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const r=o.positions,s=o.show;if((0,l.A)(s)&&s.isConstant&&!s.getValue(_.A.MINIMUM_VALUE)||!(0,l.A)(r))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const a=o.zIndex,u=(0,c.A)(o.material,B),d=u instanceof D.A;this._materialProperty=u,this._depthFailMaterialProperty=o.depthFailMaterial,this._showProperty=(0,c.A)(s,U),this._shadowsProperty=(0,c.A)(o.shadows,k),this._distanceDisplayConditionProperty=(0,c.A)(o.distanceDisplayCondition,V),this._classificationTypeProperty=(0,c.A)(o.classificationType,H),this._fillEnabled=!0,this._zIndex=(0,c.A)(a,M);const h=o.width,A=o.arcType,f=o.clampToGround,p=o.granularity;if(r.isConstant&&N.A.isConstant(h)&&N.A.isConstant(A)&&N.A.isConstant(p)&&N.A.isConstant(f)&&N.A.isConstant(a)){const e=this._geometryOptions,t=r.getValue(_.A.MINIMUM_VALUE,e.positions);if(!(0,l.A)(t)||t.length<2)return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));let n;n=d&&(!(0,l.A)(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof D.A)?C.A.VERTEX_FORMAT:x.A.VERTEX_FORMAT,e.vertexFormat=n,e.positions=t,e.width=(0,l.A)(h)?h.getValue(_.A.MINIMUM_VALUE):void 0,e.arcType=(0,l.A)(A)?A.getValue(_.A.MINIMUM_VALUE):void 0,e.granularity=(0,l.A)(p)?p.getValue(_.A.MINIMUM_VALUE):void 0;const i=this._groundGeometryOptions;i.positions=t,i.width=e.width,i.arcType=e.arcType,i.granularity=e.granularity,this._clampToGround=!!(0,l.A)(f)&&f.getValue(_.A.MINIMUM_VALUE),!this._clampToGround&&(0,l.A)(a)&&(0,g.A)("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))},j.prototype.createDynamicUpdater=function(e,t){if(r.A.defined("primitives",e),r.A.defined("groundPrimitives",t),!this._dynamic)throw new d.A("This instance does not represent dynamic geometry.");return new q(e,t,this)};const W={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function q(e,t,n){this._line=void 0,this._primitives=e,this._groundPrimitives=t,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=n,this._positions=[]}function Y(e){if((0,l.A)(e._line))return e._line;const t=e._geometryUpdater._scene.id;let n=R[t];const i=e._primitives;!(0,l.A)(n)||n.isDestroyed()?(n=new S.A,R[t]=n,i.add(n)):i.contains(n)||i.add(n);const o=n.add();return o.id=e._geometryUpdater._entity,e._line=o,o}q.prototype.update=function(e){const t=this._geometryUpdater,n=t._entity,o=n.polyline,r=o.positions;let s=N.A.getValueOrUndefined(r,e,this._positions);t._clampToGround=N.A.getValueOrDefault(o._clampToGround,e,!1),t._groundGeometryOptions.positions=s,t._groundGeometryOptions.width=N.A.getValueOrDefault(o._width,e,1),t._groundGeometryOptions.arcType=N.A.getValueOrDefault(o._arcType,e,i.A.GEODESIC),t._groundGeometryOptions.granularity=N.A.getValueOrDefault(o._granularity,e,9999);const a=this._groundPrimitives;if((0,l.A)(this._groundPolylinePrimitive)&&(a.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),t.clampToGround){if(!n.isShowing||!n.isAvailable(e)||!N.A.getValueOrDefault(o._show,e,!0))return;if(!(0,l.A)(s)||s.length<2)return;const i=t.fillMaterialProperty;let r;if(i instanceof D.A)r=new C.A;else{const t=L.A.getValue(e,i,this._material);r=new x.A({material:t,translucent:t.isTranslucent()}),this._material=t}return this._groundPolylinePrimitive=a.add(new E.A({geometryInstances:t.createFillGeometryInstance(e),appearance:r,classificationType:t.classificationTypeProperty.getValue(e),asynchronous:!1}),N.A.getValueOrUndefined(t.zIndex,e)),void((0,l.A)(this._line)&&(this._line.show=!1))}const c=Y(this);if(!n.isShowing||!n.isAvailable(e)||!N.A.getValueOrDefault(o._show,e,!0))return void(c.show=!1);if(!(0,l.A)(s)||s.length<2)return void(c.show=!1);let u=i.A.GEODESIC;u=N.A.getValueOrDefault(o._arcType,e,u);const d=t._scene.globe;u!==i.A.NONE&&(0,l.A)(d)&&(W.ellipsoid=d.ellipsoid,W.positions=s,W.granularity=N.A.getValueOrUndefined(o._granularity,e),W.height=b.A.extractHeights(s,d.ellipsoid),s=u===i.A.GEODESIC?b.A.generateCartesianArc(W):b.A.generateCartesianRhumbArc(W)),c.show=!0,c.positions=s.slice(),c.material=L.A.getValue(e,t.fillMaterialProperty,c.material),c.width=N.A.getValueOrDefault(o._width,e,1),c.distanceDisplayCondition=N.A.getValueOrUndefined(o._distanceDisplayCondition,e,c.distanceDisplayCondition)},q.prototype.getBoundingSphere=function(e){if(r.A.defined("result",e),this._geometryUpdater.clampToGround){const t=this._groundPolylinePrimitive;if((0,l.A)(t)&&t.show&&t.ready){const n=t.getGeometryInstanceAttributes(this._geometryUpdater._entity);if((0,l.A)(n)&&(0,l.A)(n.boundingSphere))return o.A.clone(n.boundingSphere,e),P.A.DONE}return(0,l.A)(t)&&!t.ready?P.A.PENDING:P.A.DONE}{const t=Y(this);if(t.show&&t.positions.length>0)return o.A.fromPoints(t.positions,e),P.A.DONE}return P.A.FAILED},q.prototype.isDestroyed=function(){return!1},q.prototype.destroy=function(){const e=this._geometryUpdater._scene.id,t=R[e];(0,l.A)(t)&&(t.remove(this._line),0===t.length&&(this._primitives.removeAndDestroy(t),delete R[e])),(0,l.A)(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),(0,u.A)(this)};const X=j},302656:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(288787),o=n(660662),r=n(369031),s=n(419061),a=n(491446),c=n(677354),l=n(71578),u=n(234957),d=n(920757),h=n(988609),A=n(810600),f=n(312421),p=n(345747),m=n(372891),_=n(724883),g=n(279436),y=n(282323);const b=[];function v(e,t){const n=e._batches,i=n.length;for(let e=0;e<i;e++)n[e].remove(t)}function T(e,t,n){if(n.isDynamic)return void e._dynamicBatch.add(t,n);if(n.clampToGround&&n.fillEnabled){const i=n.classificationTypeProperty.getValue(t);return void e._groundBatches[i].add(t,n)}let i;n.fillEnabled&&(i=n.shadowsProperty.getValue(t));let o,r=0;(0,a.A)(n.depthFailMaterialProperty)&&(r=n.depthFailMaterialProperty instanceof f.A?1:2),(0,a.A)(i)&&(o=i+r*h.A.NUMBER_OF_SHADOW_MODES),n.fillEnabled&&(n.fillMaterialProperty instanceof f.A?e._colorBatches[o].add(t,n):e._materialBatches[o].add(t,n))}function w(e,t,n,o){let a;r.A.defined("scene",e),r.A.defined("entityCollection",t),o=(0,s.A)(o,e.groundPrimitives),n=(0,s.A)(n,e.primitives),this._scene=e,this._primitives=n,this._entityCollection=void 0,this._addedObjects=new i.A,this._removedObjects=new i.A,this._changedObjects=new i.A;const c=h.A.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(3*c),this._materialBatches=new Array(3*c),a=0;a<c;++a)this._colorBatches[a]=new _.A(n,u.A,void 0,!1,a),this._materialBatches[a]=new g.A(n,d.A,void 0,!1,a),this._colorBatches[a+c]=new _.A(n,u.A,u.A,!1,a),this._materialBatches[a+c]=new g.A(n,d.A,u.A,!1,a),this._colorBatches[a+2*c]=new _.A(n,u.A,d.A,!1,a),this._materialBatches[a+2*c]=new g.A(n,d.A,d.A,!1,a);this._dynamicBatch=new p.A(n,o);const A=l.A.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(A),a=0;a<A;++a)this._groundBatches[a]=new y.A(o,a);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new i.A,this._updaters=new i.A,this._entityCollection=t,t.collectionChanged.addEventListener(w.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,b)}w.prototype.update=function(e){r.A.defined("time",e);const t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,s=this._changedObjects,a=s.values;let c,l,u,d;for(c=a.length-1;c>-1;c--)l=a[c],u=l.id,d=this._updaters.get(u),d.entity===l?(v(this,d),T(this,e,d)):(o.push(l),n.push(l));for(c=o.length-1;c>-1;c--)l=o[c],u=l.id,d=this._updaters.get(u),v(this,d),d.destroy(),this._updaters.remove(u),this._subscriptions.get(u)(),this._subscriptions.remove(u);for(c=n.length-1;c>-1;c--)l=n[c],u=l.id,d=new m.A(l,this._scene),this._updaters.set(u,d),T(this,e,d),this._subscriptions.set(u,d.geometryChanged.addEventListener(w._onGeometryChanged,this));t.removeAll(),i.removeAll(),s.removeAll();let h=!0;const A=this._batches,f=A.length;for(c=0;c<f;c++)h=A[c].update(e)&&h;return h};const E=[],S=new o.A;w.prototype.getBoundingSphere=function(e,t){r.A.defined("entity",e),r.A.defined("result",t);const n=E,i=S;let s=0,a=A.A.DONE;const c=this._batches,l=c.length,u=this._updaters.get(e.id);for(let e=0;e<l;e++){if(a=c[e].getBoundingSphere(u,i),a===A.A.PENDING)return A.A.PENDING;a===A.A.DONE&&(n[s]=o.A.clone(i,n[s]),s++)}return 0===s?A.A.FAILED:(n.length=s,o.A.fromBoundingSpheres(n,t),A.A.DONE)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(w.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();return this._subscriptions.removeAll(),(0,c.A)(this)},w._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;(0,a.A)(t.get(o))||(0,a.A)(n.get(o))||n.set(o,i)},w.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let s,a,c;for(s=n.length-1;s>-1;s--)c=n[s],a=c.id,i.remove(a)||(o.set(a,c),r.remove(a));for(s=t.length-1;s>-1;s--)c=t[s],a=c.id,o.remove(a)?r.set(a,c):i.set(a,c)};const C=w},412605:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(369031),o=n(41476),r=n(433235),s=n(491446),a=n(605971),c=n(330926),l=n(75200),u=n(32655),d=n(828021),h=n(365943),A=n(708857),f=n(551549),p=n(612123),m=n(312421),_=n(799086),g=n(286299),y=n(46257);const b=new o.A;function v(e){this.id=e,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function T(e,t){g.A.call(this,{entity:e,scene:t,geometryOptions:new v(e),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(e,"polylineVolume",e.polylineVolume,void 0)}function w(e,t,n){_.A.call(this,e,t,n)}(0,s.A)(Object.create)&&(T.prototype=Object.create(g.A.prototype),T.prototype.constructor=T),T.prototype.createFillGeometryInstance=function(e){if(i.A.defined("time",e),!this._fillEnabled)throw new a.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let u,h;const f=new A.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),p=this._distanceDisplayConditionProperty.getValue(e),_=c.A.fromDistanceDisplayCondition(p);if(this._materialProperty instanceof m.A){let t;(0,s.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,b)),(0,s.A)(t)||(t=o.A.WHITE),h=r.A.fromColor(t),u={show:f,distanceDisplayCondition:_,color:h}}else u={show:f,distanceDisplayCondition:_};return new l.A({id:t,geometry:new d.A(this._options),attributes:u})},T.prototype.createOutlineGeometryInstance=function(e){if(i.A.defined("time",e),!this._outlineEnabled)throw new a.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),s=y.A.getValueOrDefault(this._outlineColorProperty,e,o.A.BLACK,b),u=this._distanceDisplayConditionProperty.getValue(e);return new l.A({id:t,geometry:new h.A(this._options),attributes:{show:new A.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:r.A.fromColor(s),distanceDisplayCondition:c.A.fromDistanceDisplayCondition(u)}})},T.prototype._isHidden=function(e,t){return!(0,s.A)(t.positions)||!(0,s.A)(t.shape)||g.A.prototype._isHidden.call(this,e,t)},T.prototype._isDynamic=function(e,t){return!(t.positions.isConstant&&t.shape.isConstant&&y.A.isConstant(t.granularity)&&y.A.isConstant(t.outlineWidth)&&y.A.isConstant(t.cornerType))},T.prototype._setStaticOptions=function(e,t){const n=t.granularity,i=t.cornerType,o=this._options,r=this._materialProperty instanceof m.A;o.vertexFormat=r?p.A.VERTEX_FORMAT:f.A.MaterialSupport.TEXTURED.vertexFormat,o.polylinePositions=t.positions.getValue(u.A.MINIMUM_VALUE,o.polylinePositions),o.shapePositions=t.shape.getValue(u.A.MINIMUM_VALUE,o.shape),o.granularity=(0,s.A)(n)?n.getValue(u.A.MINIMUM_VALUE):void 0,o.cornerType=(0,s.A)(i)?i.getValue(u.A.MINIMUM_VALUE):void 0},T.DynamicGeometryUpdater=w,(0,s.A)(Object.create)&&(w.prototype=Object.create(_.A.prototype),w.prototype.constructor=w),w.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,s.A)(i.polylinePositions)||!(0,s.A)(i.shapePositions)||_.A.prototype._isHidden.call(this,e,t,n)},w.prototype._setOptions=function(e,t,n){const i=this._options;i.polylinePositions=y.A.getValueOrUndefined(t.positions,n,i.polylinePositions),i.shapePositions=y.A.getValueOrUndefined(t.shape,n),i.granularity=y.A.getValueOrUndefined(t.granularity,n),i.cornerType=y.A.getValueOrUndefined(t.cornerType,n)};const E=T},459022:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(564886),o=n(267980),r=n(336946),s=n(369031),a=n(41476),c=n(433235),l=n(491446),u=n(605971),d=n(330926),h=n(610750),A=n(75200),f=n(32655),p=n(852575),m=n(697422),_=n(844610),g=n(406882),y=n(708857),b=n(63316),v=n(551549),T=n(612123),w=n(312421),E=n(799086),S=n(286299),C=n(817634),x=n(46257);const I=new a.A,P=o.A.ZERO,D=new o.A,O=new m.A,L=new m.A,N=new r.A;function M(e){this.id=e,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function R(e,t){C.A.call(this,{entity:e,scene:t,geometryOptions:new M(e),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(e,"rectangle",e.rectangle,void 0)}function F(e,t,n){E.A.call(this,e,t,n)}(0,l.A)(Object.create)&&(R.prototype=Object.create(C.A.prototype),R.prototype.constructor=R),R.prototype.createFillGeometryInstance=function(e){if(s.A.defined("time",e),!this._fillEnabled)throw new u.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new y.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:d.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof w.A){let t;(0,l.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,I)),(0,l.A)(t)||(t=a.A.WHITE),i.color=c.A.fromColor(t)}return(0,l.A)(this._options.offsetAttribute)&&(i.offset=p.A.fromCartesian3(x.A.getValueOrDefault(this._terrainOffsetProperty,e,P,D))),new A.A({id:t,geometry:new _.A(this._options),attributes:i})},R.prototype.createOutlineGeometryInstance=function(e){if(s.A.defined("time",e),!this._outlineEnabled)throw new u.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=x.A.getValueOrDefault(this._outlineColorProperty,e,a.A.BLACK,I),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new y.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:c.A.fromColor(i),distanceDisplayCondition:d.A.fromDistanceDisplayCondition(o),offset:void 0};return(0,l.A)(this._options.offsetAttribute)&&(r.offset=p.A.fromCartesian3(x.A.getValueOrDefault(this._terrainOffsetProperty,e,P,D))),new A.A({id:t,geometry:new g.A(this._options),attributes:r})},R.prototype._computeCenter=function(e,t){const n=x.A.getValueOrUndefined(this._entity.rectangle.coordinates,e,L);if(!(0,l.A)(n))return;const i=m.A.center(n,N);return r.A.toCartesian(i,h.A.WGS84,t)},R.prototype._isHidden=function(e,t){return!(0,l.A)(t.coordinates)||S.A.prototype._isHidden.call(this,e,t)},R.prototype._isDynamic=function(e,t){return!t.coordinates.isConstant||!x.A.isConstant(t.height)||!x.A.isConstant(t.extrudedHeight)||!x.A.isConstant(t.granularity)||!x.A.isConstant(t.stRotation)||!x.A.isConstant(t.rotation)||!x.A.isConstant(t.outlineWidth)||!x.A.isConstant(t.zIndex)||this._onTerrain&&!x.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof w.A)},R.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof w.A;let o=x.A.getValueOrUndefined(t.height,f.A.MINIMUM_VALUE);const r=x.A.getValueOrDefault(t.heightReference,f.A.MINIMUM_VALUE,b.A.NONE);let s=x.A.getValueOrUndefined(t.extrudedHeight,f.A.MINIMUM_VALUE);const a=x.A.getValueOrDefault(t.extrudedHeightReference,f.A.MINIMUM_VALUE,b.A.NONE);(0,l.A)(s)&&!(0,l.A)(o)&&(o=0);const c=this._options;c.vertexFormat=n?T.A.VERTEX_FORMAT:v.A.MaterialSupport.TEXTURED.vertexFormat,c.rectangle=t.coordinates.getValue(f.A.MINIMUM_VALUE,c.rectangle),c.granularity=x.A.getValueOrUndefined(t.granularity,f.A.MINIMUM_VALUE),c.stRotation=x.A.getValueOrUndefined(t.stRotation,f.A.MINIMUM_VALUE),c.rotation=x.A.getValueOrUndefined(t.rotation,f.A.MINIMUM_VALUE),c.offsetAttribute=C.A.computeGeometryOffsetAttribute(o,r,s,a),c.height=C.A.getGeometryHeight(o,r),s=C.A.getGeometryExtrudedHeight(s,a),s===C.A.CLAMP_TO_GROUND&&(s=i.A.getMinimumMaximumHeights(_.A.computeRectangle(c,O)).minimumTerrainHeight),c.extrudedHeight=s},R.DynamicGeometryUpdater=F,(0,l.A)(Object.create)&&(F.prototype=Object.create(E.A.prototype),F.prototype.constructor=F),F.prototype._isHidden=function(e,t,n){return!(0,l.A)(this._options.rectangle)||E.A.prototype._isHidden.call(this,e,t,n)},F.prototype._setOptions=function(e,t,n){const o=this._options;let r=x.A.getValueOrUndefined(t.height,n);const s=x.A.getValueOrDefault(t.heightReference,n,b.A.NONE);let a=x.A.getValueOrUndefined(t.extrudedHeight,n);const c=x.A.getValueOrDefault(t.extrudedHeightReference,n,b.A.NONE);(0,l.A)(a)&&!(0,l.A)(r)&&(r=0),o.rectangle=x.A.getValueOrUndefined(t.coordinates,n,o.rectangle),o.granularity=x.A.getValueOrUndefined(t.granularity,n),o.stRotation=x.A.getValueOrUndefined(t.stRotation,n),o.rotation=x.A.getValueOrUndefined(t.rotation,n),o.offsetAttribute=C.A.computeGeometryOffsetAttribute(r,s,a,c),o.height=C.A.getGeometryHeight(r,s),a=C.A.getGeometryExtrudedHeight(a,c),a===C.A.CLAMP_TO_GROUND&&(a=i.A.getMinimumMaximumHeights(_.A.computeRectangle(o,O)).minimumTerrainHeight),o.extrudedHeight=a};const B=R},857870:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(955943),s=n(46257);function a(e){let t=e._targetProperty;if(!(0,i.A)(t)){let n=e._targetEntity;if(!(0,i.A)(n)){if(n=e._targetCollection.getById(e._targetId),!(0,i.A)(n))return void(e._targetEntity=e._targetProperty=void 0);n.definitionChanged.addEventListener(c.prototype._onTargetEntityDefinitionChanged,e),e._targetEntity=n}const o=e._targetPropertyNames;t=e._targetEntity;for(let e=0,n=o.length;e<n&&(0,i.A)(t);++e)t=t[o[e]];e._targetProperty=t}return t}function c(e,t,n){if(!(0,i.A)(e))throw new o.A("targetCollection is required.");if(!(0,i.A)(t)||""===t)throw new o.A("targetId is required.");if(!(0,i.A)(n)||0===n.length)throw new o.A("targetPropertyNames is required.");for(let e=0;e<n.length;e++){const t=n[e];if(!(0,i.A)(t)||""===t)throw new o.A("reference contains invalid properties.")}this._targetCollection=e,this._targetId=t,this._targetPropertyNames=n,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new r.A,e.collectionChanged.addEventListener(c.prototype._onCollectionChanged,this)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return s.A.isConstant(a(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){const e=a(this);return(0,i.A)(e)?e.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return a(this)}}}),c.fromString=function(e,t){if(!(0,i.A)(e))throw new o.A("targetCollection is required.");if(!(0,i.A)(t))throw new o.A("referenceString is required.");let n;const r=[];let s=!0,a=!1,l="";for(let e=0;e<t.length;++e){const i=t.charAt(e);a?(l+=i,a=!1):"\\"===i?a=!0:s&&"#"===i?(n=l,s=!1,l=""):s||"."!==i?l+=i:(r.push(l),l="")}return r.push(l),new c(e,n,r)},c.prototype.getValue=function(e,t){const n=a(this);return(0,i.A)(n)?n.getValue(e,t):void 0},c.prototype.getValueInReferenceFrame=function(e,t,n){const o=a(this);return(0,i.A)(o)?o.getValueInReferenceFrame(e,t,n):void 0},c.prototype.getType=function(e){const t=a(this);return(0,i.A)(t)?t.getType(e):void 0},c.prototype.equals=function(e){if(this===e)return!0;const t=this._targetPropertyNames,n=e._targetPropertyNames;if(this._targetCollection!==e._targetCollection||this._targetId!==e._targetId||t.length!==n.length)return!1;const i=this._targetPropertyNames.length;for(let e=0;e<i;e++)if(t[e]!==n[e])return!1;return!0},c.prototype._onTargetEntityDefinitionChanged=function(e,t,n,o){(0,i.A)(this._targetProperty)&&this._targetPropertyNames[0]===t&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))},c.prototype._onCollectionChanged=function(e,t,n){let o=this._targetEntity;(0,i.A)(o)&&-1!==n.indexOf(o)?(o.definitionChanged.removeEventListener(c.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):(0,i.A)(o)||(o=a(this),(0,i.A)(o)&&this._definitionChanged.raiseEvent(this))};const l=c},841802:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(267980),o=n(369031),r=n(419061),s=n(491446),a=n(605971),c=n(955943),l=n(886033),u=n(759078),d=n(46257),h=n(94805);function A(e,t){let n;if((t=(0,r.A)(t,0))>0){n=new Array(t);for(let e=0;e<t;e++)n[e]=i.A}this._numberOfDerivatives=t,this._property=new h.A(i.A,n),this._definitionChanged=new c.A,this._referenceFrame=(0,r.A)(e,l.A.FIXED),this._property._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)}Object.defineProperties(A.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(e){this._property.forwardExtrapolationType=e}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(e){this._property.forwardExtrapolationDuration=e}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(e){this._property.backwardExtrapolationType=e}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(e){this._property.backwardExtrapolationDuration=e}}}),A.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,l.A.FIXED,t)},A.prototype.getValueInReferenceFrame=function(e,t,n){if(o.A.defined("time",e),o.A.defined("referenceFrame",t),n=this._property.getValue(e,n),(0,s.A)(n))return u.A.convertToReferenceFrame(e,n,this._referenceFrame,t,n)},A.prototype.setInterpolationOptions=function(e){this._property.setInterpolationOptions(e)},A.prototype.addSample=function(e,t,n){const i=this._numberOfDerivatives;if(i>0&&(!(0,s.A)(n)||n.length!==i))throw new a.A("derivatives length must be equal to the number of derivatives.");this._property.addSample(e,t,n)},A.prototype.addSamples=function(e,t,n){this._property.addSamples(e,t,n)},A.prototype.addSamplesPackedArray=function(e,t){this._property.addSamplesPackedArray(e,t)},A.prototype.removeSample=function(e){return this._property.removeSample(e)},A.prototype.removeSamples=function(e){this._property.removeSamples(e)},A.prototype.equals=function(e){return this===e||e instanceof A&&d.A.equals(this._property,e._property)&&this._referenceFrame===e._referenceFrame};const f=A},94805:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(525490),o=n(369031),r=n(419061),s=n(491446),a=n(605971),c=n(955943),l=n(908077),u=n(591978),d=n(862675);const h={packedLength:1,pack:function(e,t,n){t[n=(0,r.A)(n,0)]=e},unpack:function(e,t,n){return e[t=(0,r.A)(t,0)]}};function A(e,t,n){let i;const o=e.length,r=n.length,s=o+r;if(e.length=s,o!==t){let n=o-1;for(i=s-1;i>=t;i--)e[i]=e[n--]}for(i=0;i<r;i++)e[t++]=n[i]}function f(e,t){return e instanceof u.A?e:"string"==typeof e?u.A.fromIso8601(e):u.A.addSeconds(t,e,new u.A)}const p=[],m=[];function _(e,t,n,o,r){let a,c,l,d,h,_,g=0;for(;g<o.length;){h=f(o[g],e),l=(0,i.A)(t,h,u.A.compare);let y=0,b=0;if(l<0){for(l=~l,d=l*r,c=void 0,_=t[l];g<o.length&&(h=f(o[g],e),!((0,s.A)(c)&&u.A.compare(c,h)>=0||(0,s.A)(_)&&u.A.compare(h,_)>=0));){for(p[y++]=h,g+=1,a=0;a<r;a++)m[b++]=o[g],g+=1;c=h}y>0&&(m.length=b,A(n,d,m),p.length=y,A(t,l,p))}else{for(a=0;a<r;a++)g++,n[l*r+a]=o[g];g++}}}function g(e,t){o.A.defined("type",e);let n=e;n===Number&&(n=h);let i,a=n.packedLength,u=(0,r.A)(n.packedInterpolationLength,a),A=0;if((0,s.A)(t)){const e=t.length;i=new Array(e);for(let n=0;n<e;n++){let e=t[n];e===Number&&(e=h);const o=e.packedLength;a+=o,u+=(0,r.A)(e.packedInterpolationLength,o),i[n]=e}A=e}this._type=e,this._innerType=n,this._interpolationDegree=1,this._interpolationAlgorithm=d.A,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=a,this._packedInterpolationLength=u,this._updateTableLength=!0,this._interpolationResult=new Array(u),this._definitionChanged=new c.A,this._derivativeTypes=t,this._innerDerivativeTypes=i,this._inputOrder=A,this._forwardExtrapolationType=l.A.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=l.A.NONE,this._backwardExtrapolationDuration=0}function y(e,t,n){const i=e._packedLength;e._times.splice(t,n),e._values.splice(t*i,n*i),e._updateTableLength=!0,e._definitionChanged.raiseEvent(e)}Object.defineProperties(g.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(e){this._forwardExtrapolationType!==e&&(this._forwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(e){this._forwardExtrapolationDuration!==e&&(this._forwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(e){this._backwardExtrapolationType!==e&&(this._backwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(e){this._backwardExtrapolationDuration!==e&&(this._backwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}}}),g.prototype.getValue=function(e,t){o.A.defined("time",e);const n=this._times,r=n.length;if(0===r)return;let a;const c=this._innerType,d=this._values;let h=(0,i.A)(n,e,u.A.compare);if(h<0){if(h=~h,0===h){const i=n[h];if(a=this._backwardExtrapolationDuration,this._backwardExtrapolationType===l.A.NONE||0!==a&&u.A.secondsDifference(i,e)>a)return;if(this._backwardExtrapolationType===l.A.HOLD)return c.unpack(d,0,t)}if(h>=r){h=r-1;const i=n[h];if(a=this._forwardExtrapolationDuration,this._forwardExtrapolationType===l.A.NONE||0!==a&&u.A.secondsDifference(e,i)>a)return;if(this._forwardExtrapolationType===l.A.HOLD)return h=r-1,c.unpack(d,h*c.packedLength,t)}const i=this._xTable,o=this._yTable,A=this._interpolationAlgorithm,f=this._packedInterpolationLength,p=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;const e=Math.min(A.getRequiredDataPoints(this._interpolationDegree,p),r);e!==this._numberOfPoints&&(this._numberOfPoints=e,i.length=e,o.length=e*f)}const m=this._numberOfPoints-1;if(m<1)return;let _=0,g=r-1;if(g-_+1>=m+1){let e=h-(m/2|0)-1;e<_&&(e=_);let t=e+m;t>g&&(t=g,e=t-m,e<_&&(e=_)),_=e,g=t}const y=g-_+1;for(let e=0;e<y;++e)i[e]=u.A.secondsDifference(n[_+e],n[g]);if((0,s.A)(c.convertPackedArrayForInterpolation))c.convertPackedArrayForInterpolation(d,_,g,o);else{let e=0;const t=this._packedLength;let n=_*t;const i=(g+1)*t;for(;n<i;)o[e]=d[n],n++,e++}const b=u.A.secondsDifference(e,n[g]);let v;if(0!==p&&(0,s.A)(A.interpolate)){const e=Math.floor(f/(p+1));v=A.interpolate(b,i,o,e,p,p,this._interpolationResult)}else v=A.interpolateOrderZero(b,i,o,f,this._interpolationResult);return(0,s.A)(c.unpackInterpolationResult)?c.unpackInterpolationResult(v,d,_,g,t):c.unpack(v,0,t)}return c.unpack(d,h*this._packedLength,t)},g.prototype.setInterpolationOptions=function(e){if(!(0,s.A)(e))return;let t=!1;const n=e.interpolationAlgorithm,i=e.interpolationDegree;(0,s.A)(n)&&this._interpolationAlgorithm!==n&&(this._interpolationAlgorithm=n,t=!0),(0,s.A)(i)&&this._interpolationDegree!==i&&(this._interpolationDegree=i,t=!0),t&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))},g.prototype.addSample=function(e,t,n){const i=this._innerDerivativeTypes,r=(0,s.A)(i);o.A.defined("time",e),o.A.defined("value",t),r&&o.A.defined("derivatives",n);const a=this._innerType,c=[];if(c.push(e),a.pack(t,c,c.length),r){const e=i.length;for(let t=0;t<e;t++)i[t].pack(n[t],c,c.length)}_(void 0,this._times,this._values,c,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},g.prototype.addSamples=function(e,t,n){const i=this._innerDerivativeTypes,r=(0,s.A)(i);if(o.A.defined("times",e),o.A.defined("values",t),e.length!==t.length)throw new a.A("times and values must be the same length.");if(r&&(!(0,s.A)(n)||n.length!==e.length))throw new a.A("times and derivativeValues must be the same length.");const c=this._innerType,l=e.length,u=[];for(let o=0;o<l;o++)if(u.push(e[o]),c.pack(t[o],u,u.length),r){const e=n[o],t=i.length;for(let n=0;n<t;n++)i[n].pack(e[n],u,u.length)}_(void 0,this._times,this._values,u,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},g.prototype.addSamplesPackedArray=function(e,t){o.A.defined("packedSamples",e),_(t,this._times,this._values,e,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},g.prototype.removeSample=function(e){o.A.defined("time",e);const t=(0,i.A)(this._times,e,u.A.compare);return!(t<0||(y(this,t,1),0))},g.prototype.removeSamples=function(e){o.A.defined("timeInterval",e);const t=this._times;let n=(0,i.A)(t,e.start,u.A.compare);n<0?n=~n:e.isStartIncluded||++n;let r=(0,i.A)(t,e.stop,u.A.compare);r<0?r=~r:e.isStopIncluded&&++r,y(this,n,r-n)},g.prototype.equals=function(e){if(this===e)return!0;if(!(0,s.A)(e))return!1;if(this._type!==e._type||this._interpolationDegree!==e._interpolationDegree||this._interpolationAlgorithm!==e._interpolationAlgorithm)return!1;const t=this._derivativeTypes,n=(0,s.A)(t),i=e._derivativeTypes;if(n!==(0,s.A)(i))return!1;let o,r;if(n){if(r=t.length,r!==i.length)return!1;for(o=0;o<r;o++)if(t[o]!==i[o])return!1}const a=this._times,c=e._times;if(r=a.length,r!==c.length)return!1;for(o=0;o<r;o++)if(!u.A.equals(a[o],c[o]))return!1;const l=this._values,d=e._values;for(r=l.length,o=0;o<r;o++)if(l[o]!==d[o])return!1;return!0},g._mergeNewSamples=_;const b=g},347768:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(610750),s=n(955943),a=n(886033),c=n(46257);function l(e){this._definitionChanged=new s.A,this._value=void 0,this._removeSubscription=void 0,this.setValue(e)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return c.A.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return(0,i.A)(this._value)?this._value.referenceFrame:a.A.FIXED}}}),l.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,a.A.FIXED,t)},l.prototype.setValue=function(e){this._value!==e&&(this._value=e,(0,i.A)(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),(0,i.A)(e)&&(this._removeSubscription=e.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},l.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,i.A)(e))throw new o.A("time is required.");if(!(0,i.A)(t))throw new o.A("referenceFrame is required.");if((0,i.A)(this._value))return n=this._value.getValueInReferenceFrame(e,t,n),(0,i.A)(n)?r.A.WGS84.scaleToGeodeticSurface(n,n):void 0},l.prototype.equals=function(e){return this===e||e instanceof l&&this._value===e._value},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const u=l},724883:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(288787),o=n(267980),r=n(41476),s=n(433235),a=n(491446),c=n(853331),l=n(330926),u=n(852575),d=n(708857),h=n(842153),A=n(810600),f=n(312421),p=n(644736),m=n(46257);const _=new r.A,g=new c.A,y=new c.A,b=o.A.ZERO,v=new o.A;function T(e,t,n,o,r,s,c){let l;this.translucent=t,this.appearanceType=n,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=r,this.depthFailMaterial=void 0,this.closed=s,this.shadows=c,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.updaters=new i.A,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.subscriptions=new i.A,this.showsUpdated=new i.A,this.itemsToRemove=[],this.invalidated=!1,(0,a.A)(r)&&(l=r.definitionChanged.addEventListener(T.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=l}function w(e,t,n,i,o){this._solidItems=[],this._translucentItems=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}function E(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.remove(t))return 0===i.updaters.length&&(e.splice(n,1),i.destroy()),!0}return!1}function S(e,t,n){let i=!1;const o=t.length;for(let r=0;r<o;++r){const o=t[r],s=o.itemsToRemove,a=s.length;if(a>0)for(r=0;r<a;r++){const t=s[r];o.remove(t),e.add(n,t),i=!0}}return i}function C(e,t,n,i){let o,r=t.length;for(o=r-1;o>=0;o--){const i=t[o];if(i.invalidated){t.splice(o,1);const r=i.updaters.values,s=r.length;for(let t=0;t<s;t++)e.add(n,r[t]);i.destroy()}}for(r=t.length,o=0;o<r;++o)i=t[o].update(n)&&i;return i}function x(e,t,n){const i=e.length;for(let o=0;o<i;o++){const i=e[o];if(i.contains(t))return i.getBoundingSphere(t,n)}return A.A.FAILED}function I(e){const t=e.length;for(let n=0;n<t;n++)e[n].destroy();e.length=0}T.prototype.onMaterialChanged=function(){this.invalidated=!0},T.prototype.isMaterial=function(e){const t=this.depthFailMaterialProperty,n=e.depthFailMaterialProperty;return n===t||!!(0,a.A)(t)&&t.equals(n)},T.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&m.A.isConstant(e.distanceDisplayConditionProperty)&&m.A.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},T.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},T.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const A=this.primitives;let T;if(this.createPrimitive){const n=this.geometry.values;if(n.length>0){let o;(0,a.A)(i)&&((0,a.A)(this.oldPrimitive)?A.remove(i):this.oldPrimitive=i),(0,a.A)(this.depthFailAppearanceType)&&((0,a.A)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=p.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial)),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),i=new h.A({show:!1,asynchronous:!0,geometryInstances:n.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),A.add(i),t=!1}else{(0,a.A)(i)&&(A.remove(i),i=void 0);const e=this.oldPrimitive;(0,a.A)(e)&&(A.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.A)(i)&&i.ready){i.show=!0,(0,a.A)(this.oldPrimitive)&&(A.remove(this.oldPrimitive),this.oldPrimitive=void 0),!(0,a.A)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof f.A||(this.depthFailMaterial=p.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,h=t.length,w=this.waitingOnCreate;for(T=0;T<h;T++){const h=t[T],A=this.geometry.get(h.id);let p=this.attributes.get(A.id.id);if((0,a.A)(p)||(p=i.getGeometryInstanceAttributes(A.id),this.attributes.set(A.id.id,p)),!h.fillMaterialProperty.isConstant||w){const t=h.fillMaterialProperty.color,i=m.A.getValueOrDefault(t,e,r.A.WHITE,_);r.A.equals(p._lastColor,i)||(p._lastColor=r.A.clone(i,p._lastColor),p.color=s.A.toValue(i,p.color),(this.translucent&&255===p.color[3]||!this.translucent&&255!==p.color[3])&&(this.itemsToRemove[n++]=h))}if((0,a.A)(this.depthFailAppearanceType)&&h.depthFailMaterialProperty instanceof f.A&&(!h.depthFailMaterialProperty.isConstant||w)){const t=h.depthFailMaterialProperty.color,n=m.A.getValueOrDefault(t,e,r.A.WHITE,_);r.A.equals(p._lastDepthFailColor,n)||(p._lastDepthFailColor=r.A.clone(n,p._lastDepthFailColor),p.depthFailColor=s.A.toValue(n,p.depthFailColor))}const E=h.entity.isShowing&&(h.hasConstantFill||h.isFilled(e));E!==(1===p.show[0])&&(p.show=d.A.toValue(E,p.show));const S=h.distanceDisplayConditionProperty;if(!m.A.isConstant(S)){const t=m.A.getValueOrDefault(S,e,y,g);c.A.equals(t,p._lastDistanceDisplayCondition)||(p._lastDistanceDisplayCondition=c.A.clone(t,p._lastDistanceDisplayCondition),p.distanceDisplayCondition=l.A.toValue(t,p.distanceDisplayCondition))}const C=h.terrainOffsetProperty;if(!m.A.isConstant(C)){const t=m.A.getValueOrDefault(C,e,b,v);o.A.equals(t,p._lastOffset)||(p._lastOffset=o.A.clone(t,p._lastOffset),p.offset=u.A.toValue(t,p.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else(0,a.A)(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},T.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,a.A)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const s=n.entity.isShowing;s!==(1===r.show[0])&&(r.show=d.A.toValue(s,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},T.prototype.contains=function(e){return this.updaters.contains(e.id)},T.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return A.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.A)(i)||!(0,a.A)(i.boundingSphere)||(0,a.A)(i.show)&&0===i.show[0]?A.A.FAILED:(i.boundingSphere.clone(t),A.A.DONE)},T.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,a.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.A)(n)&&t.remove(n),(0,a.A)(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},w.prototype.add=function(e,t){let n,i;const o=t.createFillGeometryInstance(e);255===o.attributes.color.value[3]?(n=this._solidItems,i=!1):(n=this._translucentItems,i=!0);const r=n.length;for(let e=0;e<r;e++){const i=n[e];if(i.isMaterial(t))return void i.add(t,o)}const s=new T(this._primitives,i,this._appearanceType,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);s.add(t,o),n.push(s)},w.prototype.remove=function(e){E(this._solidItems,e)||E(this._translucentItems,e)},w.prototype.update=function(e){let t=C(this,this._solidItems,e,!0);t=C(this,this._translucentItems,e,t)&&t;const n=S(this,this._solidItems,e),i=S(this,this._translucentItems,e);return(n||i)&&(t=C(this,this._solidItems,e,t)&&t,t=C(this,this._translucentItems,e,t)&&t),t},w.prototype.getBoundingSphere=function(e,t){const n=x(this._solidItems,e,t);return n===A.A.FAILED?x(this._translucentItems,e,t):n},w.prototype.removeAllPrimitives=function(){I(this._solidItems),I(this._translucentItems)};const P=w},279436:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(288787),o=n(267980),r=n(41476),s=n(433235),a=n(491446),c=n(853331),l=n(330926),u=n(852575),d=n(708857),h=n(842153),A=n(810600),f=n(312421),p=n(644736),m=n(46257);const _=new c.A,g=new c.A,y=o.A.ZERO,b=new o.A;function v(e,t,n,o,r,s,a){this.primitives=e,this.appearanceType=t,this.materialProperty=n,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=r,this.closed=s,this.shadows=a,this.updaters=new i.A,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(v.prototype.onMaterialChanged,this),this.subscriptions=new i.A,this.showsUpdated=new i.A}v.prototype.onMaterialChanged=function(){this.invalidated=!0},v.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty,i=this.depthFailMaterialProperty,o=e.depthFailMaterialProperty;if(n===t&&o===i)return!0;let r=(0,a.A)(t)&&t.equals(n);return r=(!(0,a.A)(i)&&!(0,a.A)(o)||(0,a.A)(i)&&i.equals(o))&&r,r},v.prototype.add=function(e,t){const n=t.id;if(this.updaters.set(n,t),this.geometry.set(n,t.createFillGeometryInstance(e)),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&m.A.isConstant(t.distanceDisplayConditionProperty)&&m.A.isConstant(t.terrainOffsetProperty)){const e=this;this.subscriptions.set(n,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(n,t);this.createPrimitive=!0},v.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};const T=new r.A;function w(e,t,n,i,o){this._items=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}v.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,A=this.geometry.values;let v;if(this.createPrimitive){if(A.length>0){let o;(0,a.A)(n)&&((0,a.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=p.A.getValue(e,this.materialProperty,this.material),(0,a.A)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=p.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),n=new h.A({show:!1,asynchronous:!0,geometryInstances:A.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),i.add(n),t=!1}else{(0,a.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,a.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,a.A)(n)&&n.ready){n.show=!0,(0,a.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=p.A.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!(0,a.A)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof f.A||(this.depthFailMaterial=p.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,h=t.length;for(v=0;v<h;v++){const i=t[v],h=i.entity,A=this.geometry.get(i.id);let p=this.attributes.get(A.id.id);if((0,a.A)(p)||(p=n.getGeometryInstanceAttributes(A.id),this.attributes.set(A.id.id,p)),(0,a.A)(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof f.A&&!i.depthFailMaterialProperty.isConstant){const t=i.depthFailMaterialProperty.color,n=m.A.getValueOrDefault(t,e,r.A.WHITE,T);r.A.equals(p._lastDepthFailColor,n)||(p._lastDepthFailColor=r.A.clone(n,p._lastDepthFailColor),p.depthFailColor=s.A.toValue(n,p.depthFailColor))}const w=h.isShowing&&(i.hasConstantFill||i.isFilled(e));w!==(1===p.show[0])&&(p.show=d.A.toValue(w,p.show));const E=i.distanceDisplayConditionProperty;if(!m.A.isConstant(E)){const t=m.A.getValueOrDefault(E,e,g,_);c.A.equals(t,p._lastDistanceDisplayCondition)||(p._lastDistanceDisplayCondition=c.A.clone(t,p._lastDistanceDisplayCondition),p.distanceDisplayCondition=l.A.toValue(t,p.distanceDisplayCondition))}const S=i.terrainOffsetProperty;if(!m.A.isConstant(S)){const t=m.A.getValueOrDefault(S,e,y,b);o.A.equals(t,p._lastOffset)||(p._lastOffset=o.A.clone(t,p._lastOffset),p.offset=u.A.toValue(t,p.offset))}}this.updateShows(n)}else(0,a.A)(n)&&!n.ready&&(t=!1);return t},v.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,r=this.geometry.get(n.id);let s=this.attributes.get(r.id.id);(0,a.A)(s)||(s=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,s));const c=o.isShowing;c!==(1===s.show[0])&&(s.show=d.A.toValue(c,s.show),r.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(e){return this.updaters.contains(e.id)},v.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return A.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.A)(i)||!(0,a.A)(i.boundingSphere)||(0,a.A)(i.show)&&0===i.show[0]?A.A.FAILED:(i.boundingSphere.clone(t),A.A.DONE)},v.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,a.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.A)(n)&&t.remove(n),this.removeMaterialSubscription()},w.prototype.add=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.isMaterial(t))return void i.add(e,t)}const o=new v(this._primitives,this._appearanceType,t.fillMaterialProperty,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);o.add(e,t),n.push(o)},w.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},w.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},w.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return A.A.FAILED},w.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const E=w},692296:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(288787),o=n(41476),r=n(433235),s=n(491446),a=n(853331),c=n(330926),l=n(708857),u=n(623e3),d=n(810600),h=n(46257),A=n(487741);const f=new o.A,p=new a.A,m=new a.A;function _(e,t,n,o){this.primitives=e,this.zIndex=o,this.classificationType=t,this.color=n,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.updaters=new i.A,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.subscriptions=new i.A,this.showsUpdated=new i.A,this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new A.A}function g(e,t){this._batches=[],this._primitives=e,this._classificationType=t}_.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},_.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),this.rectangleCollisionCheck.insert(n,t.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&h.A.isConstant(e.distanceDisplayConditionProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},_.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,s.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},_.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives;let d;if(this.createPrimitive){const e=this.geometry.values;if(e.length>0)(0,s.A)(n)&&((0,s.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new u.A({show:!1,asynchronous:!0,geometryInstances:e.slice(),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{(0,s.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,s.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,s.A)(n)&&n.ready){n.show=!0,(0,s.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,u=t.length,A=this.waitingOnCreate;for(d=0;d<u;d++){const i=t[d],u=this.geometry.get(i.id);let _=this.attributes.get(u.id.id);if((0,s.A)(_)||(_=n.getGeometryInstanceAttributes(u.id),this.attributes.set(u.id.id,_)),!i.fillMaterialProperty.isConstant||A){const t=i.fillMaterialProperty.color,n=h.A.getValueOrDefault(t,e,o.A.WHITE,f);o.A.equals(_._lastColor,n)||(_._lastColor=o.A.clone(n,_._lastColor),_.color=r.A.toValue(n,_.color))}const g=i.entity.isShowing&&(i.hasConstantFill||i.isFilled(e));g!==(1===_.show[0])&&(_.show=l.A.toValue(g,_.show));const y=i.distanceDisplayConditionProperty;if(!h.A.isConstant(y)){const t=h.A.getValueOrDefault(y,e,m,p);a.A.equals(t,_._lastDistanceDisplayCondition)||(_._lastDistanceDisplayCondition=a.A.clone(t,_._lastDistanceDisplayCondition),_.distanceDisplayCondition=c.A.toValue(t,_.distanceDisplayCondition))}}this.updateShows(n),this.waitingOnCreate=!1}else(0,s.A)(n)&&!n.ready&&(t=!1);return this.itemsToRemove.length=0,t},_.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,s.A)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const a=n.entity.isShowing;a!==(1===r.show[0])&&(r.show=l.A.toValue(a,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},_.prototype.contains=function(e){return this.updaters.contains(e.id)},_.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return d.A.PENDING;const i=n.getBoundingSphere(e.entity);return(0,s.A)(i)?(i.clone(t),d.A.DONE):d.A.FAILED},_.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;(0,s.A)(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;(0,s.A)(n)&&(e.remove(n),this.oldPrimitive=void 0)},g.prototype.add=function(e,t){const n=t.createFillGeometryInstance(e),i=this._batches,o=h.A.getValueOrDefault(t.zIndex,0);let r;const a=i.length;for(let e=0;e<a;++e){const t=i[e];if(t.zIndex===o&&!t.overlapping(n.geometry.rectangle)){r=t;break}}return(0,s.A)(r)||(r=new _(this._primitives,this._classificationType,n.attributes.color.value,o),i.push(r)),r.add(t,n),r},g.prototype.remove=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;++i)if(t[i].remove(e))return},g.prototype.update=function(e){let t,n,i=!0;const o=this._batches,r=o.length;for(t=0;t<r;++t)i=o[t].update(e)&&i;for(t=0;t<r;++t){const i=o[t],r=i.itemsToRemove,s=r.length;for(let t=0;t<s;t++){n=r[t],i.remove(n);const o=this.add(e,n);i.isDirty=!0,o.isDirty=!0}}for(t=r-1;t>=0;--t){const n=o[t];n.isDirty&&(i=o[t].update(e)&&i,n.isDirty=!1),0===n.geometry.length&&o.splice(t,1)}return i},g.prototype.getBoundingSphere=function(e,t){const n=this._batches,i=n.length;for(let o=0;o<i;++o){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return d.A.FAILED},g.prototype.removeAllPrimitives=function(){const e=this._batches,t=e.length;for(let n=0;n<t;++n)e[n].removeAllPrimitives()};const y=g},759059:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(288787),o=n(491446),r=n(853331),s=n(330926),a=n(487741),c=n(708857),l=n(623e3),u=n(395250),d=n(810600),h=n(312421),A=n(644736),f=n(46257);const p=new r.A,m=new r.A;function _(e,t,n,o,r,s){this.primitives=e,this.classificationType=t,this.appearanceType=n,this.materialProperty=o,this.updaters=new i.A,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.material=void 0,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.invalidated=!1,this.removeMaterialSubscription=o.definitionChanged.addEventListener(_.prototype.onMaterialChanged,this),this.subscriptions=new i.A,this.showsUpdated=new i.A,this.usingSphericalTextureCoordinates=r,this.zIndex=s,this.rectangleCollisionCheck=new a.A}function g(e,t,n){this._items=[],this._primitives=e,this._classificationType=t,this._appearanceType=n}_.prototype.onMaterialChanged=function(){this.invalidated=!0},_.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},_.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof h.A&&t instanceof h.A||(0,o.A)(t)&&t.equals(n)},_.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),this.rectangleCollisionCheck.insert(i,n.geometry.rectangle),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&f.A.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},_.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,o.A)(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},_.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,a=this.geometry.values;let u;if(this.createPrimitive){if(a.length>0)(0,o.A)(n)&&((0,o.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=A.A.getValue(e,this.materialProperty,this.material),n=new l.A({show:!1,asynchronous:!0,geometryInstances:a.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{(0,o.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,o.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,o.A)(n)&&n.ready){n.show=!0,(0,o.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=A.A.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material;const t=this.updatersWithAttributes.values,a=t.length;for(u=0;u<a;u++){const i=t[u],a=i.entity,l=this.geometry.get(i.id);let d=this.attributes.get(l.id.id);(0,o.A)(d)||(d=n.getGeometryInstanceAttributes(l.id),this.attributes.set(l.id.id,d));const h=a.isShowing&&(i.hasConstantFill||i.isFilled(e));h!==(1===d.show[0])&&(d.show=c.A.toValue(h,d.show));const A=i.distanceDisplayConditionProperty;if(!f.A.isConstant(A)){const t=f.A.getValueOrDefault(A,e,m,p);r.A.equals(t,d._lastDistanceDisplayCondition)||(d._lastDistanceDisplayCondition=r.A.clone(t,d._lastDistanceDisplayCondition),d.distanceDisplayCondition=s.A.toValue(t,d.distanceDisplayCondition))}}this.updateShows(n)}else(0,o.A)(n)&&!n.ready&&(t=!1);return t},_.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],r=n.entity,s=this.geometry.get(n.id);let a=this.attributes.get(s.id.id);(0,o.A)(a)||(a=e.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,a));const l=r.isShowing;l!==(1===a.show[0])&&(a.show=c.A.toValue(l,a.show),s.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},_.prototype.contains=function(e){return this.updaters.contains(e.id)},_.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return d.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,o.A)(i)||!(0,o.A)(i.boundingSphere)||(0,o.A)(i.show)&&0===i.show[0]?d.A.FAILED:(i.boundingSphere.clone(t),d.A.DONE)},_.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,o.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,o.A)(n)&&t.remove(n),this.removeMaterialSubscription()},g.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=u.A.shouldUseSphericalCoordinates(o.geometry.rectangle),s=f.A.getValueOrDefault(t.zIndex,0);for(let a=0;a<i;++a){const i=n[a];if(i.isMaterial(t)&&i.usingSphericalTextureCoordinates===r&&i.zIndex===s&&!i.overlapping(o.geometry.rectangle))return void i.add(e,t,o)}const a=new _(this._primitives,this._classificationType,this._appearanceType,t.fillMaterialProperty,r,s);a.add(e,t,o),n.push(a)},g.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},g.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},g.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return d.A.FAILED},g.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const y=g},282323:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(288787),o=n(41476),r=n(433235),s=n(419061),a=n(491446),c=n(853331),l=n(330926),u=n(708857),d=n(433052),h=n(234957),A=n(920757),f=n(810600),p=n(312421),m=n(644736),_=n(46257);const g=new o.A,y=new c.A,b=new c.A;function v(e,t,n,o,r){let s;s=n instanceof p.A?h.A:A.A,this.orderedGroundPrimitives=e,this.classificationType=t,this.appearanceType=s,this.materialProperty=n,this.updaters=new i.A,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.material=void 0,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(v.prototype.onMaterialChanged,this),this.subscriptions=new i.A,this.showsUpdated=new i.A,this.zIndex=o,this._asynchronous=r}function T(e,t,n){this._items=[],this._orderedGroundPrimitives=e,this._classificationType=t,this._asynchronous=(0,s.A)(n,!0)}v.prototype.onMaterialChanged=function(){this.invalidated=!0},v.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof p.A&&t instanceof p.A||(0,a.A)(t)&&t.equals(n)},v.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&_.A.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},v.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.A)(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},v.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.orderedGroundPrimitives,s=this.geometry.values;let h;if(this.createPrimitive){if(s.length>0)(0,a.A)(n)&&((0,a.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new d.A({show:!1,asynchronous:this._asynchronous,geometryInstances:s.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===A.A&&(this.material=m.A.getValue(e,this.materialProperty,this.material),n.appearance.material=this.material),i.add(n,this.zIndex),t=!1;else{(0,a.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,a.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,a.A)(n)&&n.ready){n.show=!0,(0,a.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===A.A&&(this.material=m.A.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material);const t=this.updatersWithAttributes.values,s=t.length;for(h=0;h<s;h++){const i=t[h],s=i.entity,d=this.geometry.get(i.id);let A=this.attributes.get(d.id.id);if((0,a.A)(A)||(A=n.getGeometryInstanceAttributes(d.id),this.attributes.set(d.id.id,A)),!i.fillMaterialProperty.isConstant){const t=i.fillMaterialProperty.color,n=_.A.getValueOrDefault(t,e,o.A.WHITE,g);o.A.equals(A._lastColor,n)||(A._lastColor=o.A.clone(n,A._lastColor),A.color=r.A.toValue(n,A.color))}const f=s.isShowing&&(i.hasConstantFill||i.isFilled(e));f!==(1===A.show[0])&&(A.show=u.A.toValue(f,A.show));const p=i.distanceDisplayConditionProperty;if(!_.A.isConstant(p)){const t=_.A.getValueOrDefault(p,e,b,y);c.A.equals(t,A._lastDistanceDisplayCondition)||(A._lastDistanceDisplayCondition=c.A.clone(t,A._lastDistanceDisplayCondition),A.distanceDisplayCondition=l.A.toValue(t,A.distanceDisplayCondition))}}this.updateShows(n)}else(0,a.A)(n)&&!n.ready&&(t=!1);return t},v.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,r=this.geometry.get(n.id);let s=this.attributes.get(r.id.id);(0,a.A)(s)||(s=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,s));const c=o.isShowing;c!==(1===s.show[0])&&(s.show=u.A.toValue(c,s.show),r.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(e){return this.updaters.contains(e.id)},v.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return f.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.A)(i)||!(0,a.A)(i.boundingSphere)||(0,a.A)(i.show)&&0===i.show[0]?f.A.FAILED:(i.boundingSphere.clone(t),f.A.DONE)},v.prototype.destroy=function(){const e=this.primitive,t=this.orderedGroundPrimitives;(0,a.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.A)(n)&&t.remove(n),this.removeMaterialSubscription()},T.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=_.A.getValueOrDefault(t.zIndex,0);for(let s=0;s<i;++s){const i=n[s];if(i.isMaterial(t)&&i.zIndex===r)return void i.add(e,t,o)}const s=new v(this._orderedGroundPrimitives,this._classificationType,t.fillMaterialProperty,r,this._asynchronous);s.add(e,t,o),n.push(s)},T.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},T.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},T.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return f.A.FAILED},T.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const w=T},174068:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(288787),o=n(267980),r=n(41476),s=n(433235),a=n(491446),c=n(853331),l=n(330926),u=n(852575),d=n(708857),h=n(612123),A=n(842153),f=n(810600),p=n(46257);const m=new r.A,_=new c.A,g=new c.A,y=o.A.ZERO,b=new o.A;function v(e,t,n,o){this.translucent=t,this.width=n,this.shadows=o,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.updaters=new i.A,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.itemsToRemove=[],this.subscriptions=new i.A,this.showsUpdated=new i.A}function T(e,t,n){this._primitives=e,this._scene=t,this._shadows=n,this._solidBatches=new i.A,this._translucentBatches=new i.A}v.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantOutline&&e.outlineColorProperty.isConstant&&p.A.isConstant(e.distanceDisplayConditionProperty)&&p.A.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},v.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},v.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const f=this.primitives;let v;if(this.createPrimitive){const e=this.geometry.values;if(e.length>0)(0,a.A)(i)&&((0,a.A)(this.oldPrimitive)?f.remove(i):this.oldPrimitive=i),i=new A.A({show:!1,asynchronous:!0,geometryInstances:e.slice(),appearance:new h.A({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),f.add(i),t=!1;else{(0,a.A)(i)&&(f.remove(i),i=void 0);const e=this.oldPrimitive;(0,a.A)(e)&&(f.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.A)(i)&&i.ready){i.show=!0,(0,a.A)(this.oldPrimitive)&&(f.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,h=t.length,A=this.waitingOnCreate;for(v=0;v<h;v++){const h=t[v],f=this.geometry.get(h.id);let T=this.attributes.get(f.id.id);if((0,a.A)(T)||(T=i.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,T)),!h.outlineColorProperty.isConstant||A){const t=h.outlineColorProperty,i=p.A.getValueOrDefault(t,e,r.A.WHITE,m);r.A.equals(T._lastColor,i)||(T._lastColor=r.A.clone(i,T._lastColor),T.color=s.A.toValue(i,T.color),(this.translucent&&255===T.color[3]||!this.translucent&&255!==T.color[3])&&(this.itemsToRemove[n++]=h))}const w=h.entity.isShowing&&(h.hasConstantOutline||h.isOutlineVisible(e));w!==(1===T.show[0])&&(T.show=d.A.toValue(w,T.show));const E=h.distanceDisplayConditionProperty;if(!p.A.isConstant(E)){const t=p.A.getValueOrDefault(E,e,g,_);c.A.equals(t,T._lastDistanceDisplayCondition)||(T._lastDistanceDisplayCondition=c.A.clone(t,T._lastDistanceDisplayCondition),T.distanceDisplayCondition=l.A.toValue(t,T.distanceDisplayCondition))}const S=h.terrainOffsetProperty;if(!p.A.isConstant(S)){const t=p.A.getValueOrDefault(S,e,y,b);o.A.equals(t,T._lastOffset)||(T._lastOffset=o.A.clone(t,T._lastOffset),T.offset=u.A.toValue(t,T.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else(0,a.A)(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},v.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,a.A)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const s=n.entity.isShowing;s!==(1===r.show[0])&&(r.show=d.A.toValue(s,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(e){return this.updaters.contains(e.id)},v.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return f.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.A)(i)||!(0,a.A)(i.boundingSphere)||(0,a.A)(i.show)&&0===i.show[0]?f.A.FAILED:(i.boundingSphere.clone(t),f.A.DONE)},v.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;(0,a.A)(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;(0,a.A)(n)&&(e.remove(n),this.oldPrimitive=void 0)},T.prototype.add=function(e,t){const n=t.createOutlineGeometryInstance(e),i=this._scene.clampLineWidth(t.outlineWidth);let o,r;255===n.attributes.color.value[3]?(o=this._solidBatches,r=o.get(i),(0,a.A)(r)||(r=new v(this._primitives,!1,i,this._shadows),o.set(i,r)),r.add(t,n)):(o=this._translucentBatches,r=o.get(i),(0,a.A)(r)||(r=new v(this._primitives,!0,i,this._shadows),o.set(i,r)),r.add(t,n))},T.prototype.remove=function(e){let t;const n=this._solidBatches.values,i=n.length;for(t=0;t<i;t++)if(n[t].remove(e))return;const o=this._translucentBatches.values,r=o.length;for(t=0;t<r;t++)if(o[t].remove(e))return},T.prototype.update=function(e){let t,n,i,o;const r=this._solidBatches.values,s=r.length,a=this._translucentBatches.values,c=a.length;let l,u=!0,d=!1;do{for(d=!1,n=0;n<s;n++){o=r[n],u=o.update(e),l=o.itemsToRemove;const s=l.length;if(s>0)for(d=!0,t=0;t<s;t++)i=l[t],o.remove(i),this.add(e,i)}for(n=0;n<c;n++){o=a[n],u=o.update(e),l=o.itemsToRemove;const r=l.length;if(r>0)for(d=!0,t=0;t<r;t++)i=l[t],o.remove(i),this.add(e,i)}}while(d);return u},T.prototype.getBoundingSphere=function(e,t){let n;const i=this._solidBatches.values,o=i.length;for(n=0;n<o;n++){const o=i[n];if(o.contains(e))return o.getBoundingSphere(e,t)}const r=this._translucentBatches.values,s=r.length;for(n=0;n<s;n++){const i=r[n];if(i.contains(e))return i.getBoundingSphere(e,t)}return f.A.FAILED},T.prototype.removeAllPrimitives=function(){let e;const t=this._solidBatches.values,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._translucentBatches.values,o=i.length;for(e=0;e<o;e++)i[e].removeAllPrimitives()};const w=T},307509:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(336946),r=n(369031),s=n(491446),a=n(677354),c=n(955943),l=n(32655),u=n(367817),d=n(63316),h=n(62467),A=n(46257);const f=new i.A,p=new o.A;function m(e,t,n,a){r.A.defined("scene",e),r.A.defined("positionProperty",t),this._scene=e,this._heightReference=n,this._extrudedHeightReference=a,this._positionProperty=t,this._position=new i.A,this._cartographicPosition=new o.A,this._normal=new i.A,this._definitionChanged=new c.A,this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;const u=this;if((0,s.A)(e.globe)&&(this._removeEventListener=e.terrainProviderChanged.addEventListener((function(){u._updateClamping()})),this._removeModeListener=e.morphComplete.addEventListener((function(){u._updateClamping()}))),t.isConstant){const n=t.getValue(l.A.MINIMUM_VALUE,f);if(!(0,s.A)(n)||i.A.equals(n,i.A.ZERO)||!(0,s.A)(e.globe))return;this._position=i.A.clone(n,this._position),this._updateClamping(),this._normal=e.globe.ellipsoid.geodeticSurfaceNormal(n,this._normal)}}Object.defineProperties(m.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),m.prototype._updateClamping=function(){(0,s.A)(this._removeCallbackFunc)&&this._removeCallbackFunc();const e=this._scene,t=e.globe,n=this._position;if(!(0,s.A)(t)||i.A.equals(n,i.A.ZERO))return void(this._terrainHeight=0);const o=t.ellipsoid,r=t._surface,a=this,c=o.cartesianToCartographic(n,this._cartographicPosition),l=t.getHeight(c);(0,s.A)(l)?this._terrainHeight=l:this._terrainHeight=0,this._removeCallbackFunc=r.updateHeight(c,(function(t){if(e.mode===h.A.SCENE3D){const e=o.cartesianToCartographic(t,p);a._terrainHeight=e.height}else a._terrainHeight=t.x;a.definitionChanged.raiseEvent()}))},m.prototype.getValue=function(e,t){const n=A.A.getValueOrDefault(this._heightReference,e,d.A.NONE),o=A.A.getValueOrDefault(this._extrudedHeightReference,e,d.A.NONE);if(n===d.A.NONE&&o!==d.A.RELATIVE_TO_GROUND)return this._position=i.A.clone(i.A.ZERO,this._position),i.A.clone(i.A.ZERO,t);if(this._positionProperty.isConstant)return i.A.multiplyByScalar(this._normal,this._terrainHeight,t);const r=this._scene,a=this._positionProperty.getValue(e,f);if(!(0,s.A)(a)||i.A.equals(a,i.A.ZERO)||!(0,s.A)(r.globe))return i.A.clone(i.A.ZERO,t);if(i.A.equalsEpsilon(this._position,a,u.A.EPSILON10))return i.A.multiplyByScalar(this._normal,this._terrainHeight,t);this._position=i.A.clone(a,this._position),this._updateClamping();const c=r.globe.ellipsoid.geodeticSurfaceNormal(a,this._normal);return i.A.multiplyByScalar(c,this._terrainHeight,t)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return(0,s.A)(this._removeEventListener)&&this._removeEventListener(),(0,s.A)(this._removeModeListener)&&this._removeModeListener(),(0,s.A)(this._removeCallbackFunc)&&this._removeCallbackFunc(),(0,a.A)(this)};const _=m},13346:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(419061),o=n(491446),r=n(605971),s=n(955943),a=n(886033),c=n(224847),l=n(759078),u=n(46257);function d(e){this._definitionChanged=new s.A,this._intervals=new c.A,this._intervals.changedEvent.addEventListener(d.prototype._intervalsChanged,this),this._referenceFrame=(0,i.A)(e,a.A.FIXED)}Object.defineProperties(d.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),d.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,a.A.FIXED,t)},d.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,o.A)(e))throw new r.A("time is required.");if(!(0,o.A)(t))throw new r.A("referenceFrame is required.");const i=this._intervals.findDataForIntervalContainingDate(e);if((0,o.A)(i))return l.A.convertToReferenceFrame(e,i,this._referenceFrame,t,n)},d.prototype.equals=function(e){return this===e||e instanceof d&&this._intervals.equals(e._intervals,u.A.equals)&&this._referenceFrame===e._referenceFrame},d.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};const h=d},146511:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(369031),o=n(41476),r=n(433235),s=n(491446),a=n(605971),c=n(330926),l=n(75200),u=n(32655),d=n(708857),h=n(660419),A=n(903473),f=n(551549),p=n(612123),m=n(312421),_=n(799086),g=n(286299),y=n(46257);const b=new o.A;function v(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function T(e,t){g.A.call(this,{entity:e,scene:t,geometryOptions:new v(e),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(e,"wall",e.wall,void 0)}function w(e,t,n){_.A.call(this,e,t,n)}(0,s.A)(Object.create)&&(T.prototype=Object.create(g.A.prototype),T.prototype.constructor=T),T.prototype.createFillGeometryInstance=function(e){if(i.A.defined("time",e),!this._fillEnabled)throw new a.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let u,A;const f=new d.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),p=this._distanceDisplayConditionProperty.getValue(e),_=c.A.fromDistanceDisplayCondition(p);if(this._materialProperty instanceof m.A){let t;(0,s.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,b)),(0,s.A)(t)||(t=o.A.WHITE),A=r.A.fromColor(t),u={show:f,distanceDisplayCondition:_,color:A}}else u={show:f,distanceDisplayCondition:_};return new l.A({id:t,geometry:new h.A(this._options),attributes:u})},T.prototype.createOutlineGeometryInstance=function(e){if(i.A.defined("time",e),!this._outlineEnabled)throw new a.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),s=y.A.getValueOrDefault(this._outlineColorProperty,e,o.A.BLACK,b),u=this._distanceDisplayConditionProperty.getValue(e);return new l.A({id:t,geometry:new A.A(this._options),attributes:{show:new d.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:r.A.fromColor(s),distanceDisplayCondition:c.A.fromDistanceDisplayCondition(u)}})},T.prototype._isHidden=function(e,t){return!(0,s.A)(t.positions)||g.A.prototype._isHidden.call(this,e,t)},T.prototype._getIsClosed=function(e){return!1},T.prototype._isDynamic=function(e,t){return!(t.positions.isConstant&&y.A.isConstant(t.minimumHeights)&&y.A.isConstant(t.maximumHeights)&&y.A.isConstant(t.outlineWidth)&&y.A.isConstant(t.granularity))},T.prototype._setStaticOptions=function(e,t){const n=t.minimumHeights,i=t.maximumHeights,o=t.granularity,r=this._materialProperty instanceof m.A,a=this._options;a.vertexFormat=r?p.A.VERTEX_FORMAT:f.A.MaterialSupport.TEXTURED.vertexFormat,a.positions=t.positions.getValue(u.A.MINIMUM_VALUE,a.positions),a.minimumHeights=(0,s.A)(n)?n.getValue(u.A.MINIMUM_VALUE,a.minimumHeights):void 0,a.maximumHeights=(0,s.A)(i)?i.getValue(u.A.MINIMUM_VALUE,a.maximumHeights):void 0,a.granularity=(0,s.A)(o)?o.getValue(u.A.MINIMUM_VALUE):void 0},T.DynamicGeometryUpdater=w,(0,s.A)(Object.create)&&(w.prototype=Object.create(_.A.prototype),w.prototype.constructor=w),w.prototype._isHidden=function(e,t,n){return!(0,s.A)(this._options.positions)||_.A.prototype._isHidden.call(this,e,t,n)},w.prototype._setOptions=function(e,t,n){const i=this._options;i.positions=y.A.getValueOrUndefined(t.positions,n,i.positions),i.minimumHeights=y.A.getValueOrUndefined(t.minimumHeights,n,i.minimumHeights),i.maximumHeights=y.A.getValueOrUndefined(t.maximumHeights,n,i.maximumHeights),i.granularity=y.A.getValueOrUndefined(t.granularity,n)};const E=T},116112:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(605971);const o=function(e){if("string"==typeof e){const t=document.getElementById(e);if(null===t)throw new i.A(`Element with id "${e}" does not exist in the document.`);e=t}return e}},764729:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(10082),r=n(286299),s=n(307509);const a=function(e,t,n,a){if(r.A.prototype._onEntityPropertyChanged.call(this,e,t,n,a),-1===this._observedPropertyNames.indexOf(t))return;const c=this._entity[this._geometryPropertyName];if(!(0,i.A)(c))return;(0,i.A)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const l=c.heightReference;if((0,i.A)(l)){const e=new o.A(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new s.A(this._scene,e,l)}}},769493:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(41476),o=n(419061);function r(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}r.ALL=Object.freeze(new r({color:new i.A(0,0,0,0),depth:1,stencil:0})),r.prototype.execute=function(e,t){e.clear(this,t)};const s=r},718289:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(419061),o=n(760866);function r(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT),this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=(0,i.A)(e.persists,!1),this.pass=o.A.COMPUTE,this.owner=e.owner}r.prototype.execute=function(e){e.execute(this)};const s=r},494156:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(647934),o=n(369031),r=n(41476),s=n(491446),a=n(677354),c=n(605971),l=n(402330),u=n(351014),d=n(769493),h=n(377496),A=n(483128),f=n(40118),p=n(302836);function m(e){this._context=e}let _;const g=new h.A({primitiveType:l.A.TRIANGLES}),y=new d.A({color:new r.A(0,0,0,0)});m.prototype.execute=function(e){if(o.A.defined("computeCommand",e),(0,s.A)(e.preExecute)&&e.preExecute(e),!(0,s.A)(e.fragmentShaderSource)&&!(0,s.A)(e.shaderProgram))throw new c.A("computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.");o.A.defined("computeCommand.outputTexture",e.outputTexture);const t=e.outputTexture,n=t.width,r=t.height,a=this._context,l=(0,s.A)(e.vertexArray)?e.vertexArray:a.getViewportQuadVertexArray(),d=(0,s.A)(e.shaderProgram)?e.shaderProgram:function(e,t){return p.A.fromCache({context:e,vertexShaderSource:u.A,fragmentShaderSource:t,attributeLocations:{position:0,textureCoordinates:1}})}(a,e.fragmentShaderSource),h=function(e,t){return new A.A({context:e,colorTextures:[t],destroyAttachments:!1})}(a,t),m=function(e,t){return(0,s.A)(_)&&_.viewport.width===e&&_.viewport.height===t||(_=f.A.fromCache({viewport:new i.A(0,0,e,t)})),_}(n,r),b=e.uniformMap,v=y;v.framebuffer=h,v.renderState=m,v.execute(a);const T=g;T.vertexArray=l,T.renderState=m,T.shaderProgram=d,T.uniformMap=b,T.framebuffer=h,T.execute(a),h.destroy(),e.persists||(d.destroy(),(0,s.A)(e.vertexArray)&&l.destroy()),(0,s.A)(e.postExecute)&&e.postExecute(t)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return(0,a.A)(this)};const b=m},681480:(e,t,n)=>{"use strict";n.d(t,{A:()=>q});var i=n(369031),o=n(41476),r=n(571804),s=n(673874),a=n(419061),c=n(491446),l=n(786101),u=n(677354),d=n(605971),h=n(944479),A=n(305439),f=n(471874),p=n(584164),m=n(276904),_=n(402330),g=n(123245),y=n(352581),b=n(351014),v=n(442790),T=n(769493),w=n(430332),E=n(346154),S=n(377496),C=n(326429),x=n(57775),I=n(40118),P=n(389994),D=n(302836),O=n(616e3),L=n(16012),N=n(492718),M=n(508380);function R(e,t){i.A.defined("canvas",e);const{getWebGLStub:n,requestWebgl1:r,webgl:l={},allowTextureFilterAnisotropic:u=!0}=(0,a.A)(t,{});l.alpha=(0,a.A)(l.alpha,!1),l.stencil=(0,a.A)(l.stencil,!0),l.powerPreference=(0,a.A)(l.powerPreference,"high-performance");const d=(0,c.A)(n)?n(e,l):function(e,t,n){if("undefined"==typeof WebGLRenderingContext)throw new g.A("The browser does not support WebGL.  Visit http://get.webgl.org.");const i="undefined"!=typeof WebGL2RenderingContext;n||i||(n=!0);const o=n?"webgl":"webgl2",r=e.getContext(o,t);if(!(0,c.A)(r))throw new g.A("The browser supports WebGL, but initialization failed.");return r}(e,l,r),h="undefined"!=typeof WebGL2RenderingContext&&d instanceof WebGL2RenderingContext;this._canvas=e,this._originalGLContext=d,this._gl=d,this._webgl2=h,this._id=(0,s.A)(),this.validateFramebuffer=!1,this.validateShaderProgram=!1,this.logShaderCompilation=!1,this._throwOnWebGLError=!1,this._shaderCache=new P.A(this),this._textureCache=new L.A;const A=d;this._stencilBits=A.getParameter(A.STENCIL_BITS),w.A._maximumCombinedTextureImageUnits=A.getParameter(A.MAX_COMBINED_TEXTURE_IMAGE_UNITS),w.A._maximumCubeMapSize=A.getParameter(A.MAX_CUBE_MAP_TEXTURE_SIZE),w.A._maximumFragmentUniformVectors=A.getParameter(A.MAX_FRAGMENT_UNIFORM_VECTORS),w.A._maximumTextureImageUnits=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),w.A._maximumRenderbufferSize=A.getParameter(A.MAX_RENDERBUFFER_SIZE),w.A._maximumTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE),w.A._maximumVaryingVectors=A.getParameter(A.MAX_VARYING_VECTORS),w.A._maximumVertexAttributes=A.getParameter(A.MAX_VERTEX_ATTRIBS),w.A._maximumVertexTextureImageUnits=A.getParameter(A.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w.A._maximumVertexUniformVectors=A.getParameter(A.MAX_VERTEX_UNIFORM_VECTORS),w.A._maximumSamples=this._webgl2?A.getParameter(A.MAX_SAMPLES):0;const p=A.getParameter(A.ALIASED_LINE_WIDTH_RANGE);w.A._minimumAliasedLineWidth=p[0],w.A._maximumAliasedLineWidth=p[1];const m=A.getParameter(A.ALIASED_POINT_SIZE_RANGE);w.A._minimumAliasedPointSize=m[0],w.A._maximumAliasedPointSize=m[1];const _=A.getParameter(A.MAX_VIEWPORT_DIMS);w.A._maximumViewportWidth=_[0],w.A._maximumViewportHeight=_[1];const b=A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT);w.A._highpFloatSupported=0!==b.precision;const v=A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_INT);w.A._highpIntSupported=0!==v.rangeMax,this._antialias=A.getContextAttributes().antialias,this._standardDerivatives=!!U(A,["OES_standard_derivatives"]),this._blendMinmax=!!U(A,["EXT_blend_minmax"]),this._elementIndexUint=!!U(A,["OES_element_index_uint"]),this._depthTexture=!!U(A,["WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),this._fragDepth=!!U(A,["EXT_frag_depth"]),this._debugShaders=U(A,["WEBGL_debug_shaders"]),this._textureFloat=!!U(A,["OES_texture_float"]),this._textureHalfFloat=!!U(A,["OES_texture_half_float"]),this._textureFloatLinear=!!U(A,["OES_texture_float_linear"]),this._textureHalfFloatLinear=!!U(A,["OES_texture_half_float_linear"]),this._colorBufferFloat=!!U(A,["EXT_color_buffer_float","WEBGL_color_buffer_float"]),this._floatBlend=!!U(A,["EXT_float_blend"]),this._colorBufferHalfFloat=!!U(A,["EXT_color_buffer_half_float"]),this._s3tc=!!U(A,["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"]),this._pvrtc=!!U(A,["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"]),this._astc=!!U(A,["WEBGL_compressed_texture_astc"]),this._etc=!!U(A,["WEBG_compressed_texture_etc"]),this._etc1=!!U(A,["WEBGL_compressed_texture_etc1"]),this._bc7=!!U(A,["EXT_texture_compression_bptc"]),f.A.setKTX2SupportedFormats(this._s3tc,this._pvrtc,this._astc,this._etc,this._etc1,this._bc7);const T=u?U(A,["EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"]):void 0;let E,S,x,D,O,M,R,F,B,k;if(this._textureFilterAnisotropic=T,w.A._maximumTextureFilterAnisotropy=(0,c.A)(T)?A.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,h){const e=this;E=function(){return e._gl.createVertexArray()},S=function(t){e._gl.bindVertexArray(t)},x=function(t){e._gl.deleteVertexArray(t)},D=function(e,t,n,i,o){A.drawElementsInstanced(e,t,n,i,o)},O=function(e,t,n,i){A.drawArraysInstanced(e,t,n,i)},M=function(e,t){A.vertexAttribDivisor(e,t)},R=function(e){A.drawBuffers(e)}}else F=U(A,["OES_vertex_array_object"]),(0,c.A)(F)&&(E=function(){return F.createVertexArrayOES()},S=function(e){F.bindVertexArrayOES(e)},x=function(e){F.deleteVertexArrayOES(e)}),B=U(A,["ANGLE_instanced_arrays"]),(0,c.A)(B)&&(D=function(e,t,n,i,o){B.drawElementsInstancedANGLE(e,t,n,i,o)},O=function(e,t,n,i){B.drawArraysInstancedANGLE(e,t,n,i)},M=function(e,t){B.vertexAttribDivisorANGLE(e,t)}),k=U(A,["WEBGL_draw_buffers"]),(0,c.A)(k)&&(R=function(e){k.drawBuffersWEBGL(e)});this.glCreateVertexArray=E,this.glBindVertexArray=S,this.glDeleteVertexArray=x,this.glDrawElementsInstanced=D,this.glDrawArraysInstanced=O,this.glVertexAttribDivisor=M,this.glDrawBuffers=R,this._vertexArrayObject=!!F,this._instancedArrays=!!B,this._drawBuffers=!!k,w.A._maximumDrawBuffers=this.drawBuffers?A.getParameter(y.A.MAX_DRAW_BUFFERS):1,w.A._maximumColorAttachments=this.drawBuffers?A.getParameter(y.A.MAX_COLOR_ATTACHMENTS):1,this._clearColor=new o.A(0,0,0,0),this._clearDepth=1,this._clearStencil=0;const V=new N.A,H=new C.A(this),z=I.A.fromCache();this._defaultPassState=H,this._defaultRenderState=z,this._defaultTexture=void 0,this._defaultEmissiveTexture=void 0,this._defaultNormalTexture=void 0,this._defaultCubeMap=void 0,this._us=V,this._currentRenderState=z,this._currentPassState=H,this._currentFramebuffer=void 0,this._maxFrameTextureUnitIndex=0,this._vertexAttribDivisors=[],this._previousDrawInstanced=!1;for(let e=0;e<w.A._maximumVertexAttributes;e++)this._vertexAttribDivisors.push(0);this._pickObjects={},this._nextPickColor=new Uint32Array(1),this.options={getWebGLStub:n,requestWebgl1:r,webgl:l,allowTextureFilterAnisotropic:u},this.cache={},I.A.apply(A,z,H)}function F(e,t,n){const i=e.getError();if(i!==e.NO_ERROR)throw new g.A(function(e,t,n,i){let o=`${function(e,t){let n="WebGL Error:  ";switch(t){case e.INVALID_ENUM:n+="INVALID_ENUM";break;case e.INVALID_VALUE:n+="INVALID_VALUE";break;case e.INVALID_OPERATION:n+="INVALID_OPERATION";break;case e.OUT_OF_MEMORY:n+="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:n+="CONTEXT_LOST_WEBGL lost";break;default:n+=`Unknown (${t})`}return n}(e,i)}: ${t.name}(`;for(let e=0;e<n.length;++e)0!==e&&(o+=", "),o+=n[e];return o+=");",o}(e,t,n,i))}function B(e,t,n){return{get:function(){const i=e[t];return n(e,`get: ${t}`,i),e[t]},set:function(i){e[t]=i,n(e,`set: ${t}`,i)}}}function U(e,t){const n=t.length;for(let i=0;i<n;++i){const n=e.getExtension(t[i]);if(n)return n}}const k={};function V(e,t,n,i){const o=e._currentRenderState,r=e._currentPassState;e._currentRenderState=t,e._currentPassState=n,I.A.partialApply(e._gl,o,t,r,n,i)}let H;function z(e,t){if(t!==e._currentFramebuffer){e._currentFramebuffer=t;let n=H;if((0,c.A)(t))t._bind(),function(e){if(e.validateFramebuffer){const t=e._gl,n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE){let e;switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:e="Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.";break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:e="Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.";break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:e="Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.";break;case t.FRAMEBUFFER_UNSUPPORTED:e="Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions."}throw new d.A(e)}}}(e),n=t._getActiveColorAttachments();else{const t=e._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}e.drawBuffers&&e.glDrawBuffers(n)}}Object.defineProperties(R.prototype,{id:{get:function(){return this._id}},webgl2:{get:function(){return this._webgl2}},canvas:{get:function(){return this._canvas}},shaderCache:{get:function(){return this._shaderCache}},textureCache:{get:function(){return this._textureCache}},uniformState:{get:function(){return this._us}},stencilBits:{get:function(){return this._stencilBits}},stencilBuffer:{get:function(){return this._stencilBits>=8}},antialias:{get:function(){return this._antialias}},msaa:{get:function(){return this._webgl2}},standardDerivatives:{get:function(){return this._standardDerivatives||this._webgl2}},floatBlend:{get:function(){return this._floatBlend}},blendMinmax:{get:function(){return this._blendMinmax||this._webgl2}},elementIndexUint:{get:function(){return this._elementIndexUint||this._webgl2}},depthTexture:{get:function(){return this._depthTexture||this._webgl2}},floatingPointTexture:{get:function(){return this._webgl2||this._textureFloat}},halfFloatingPointTexture:{get:function(){return this._webgl2||this._textureHalfFloat}},textureFloatLinear:{get:function(){return this._textureFloatLinear}},textureHalfFloatLinear:{get:function(){return this._webgl2&&this._textureFloatLinear||!this._webgl2&&this._textureHalfFloatLinear}},textureFilterAnisotropic:{get:function(){return!!this._textureFilterAnisotropic}},s3tc:{get:function(){return this._s3tc}},pvrtc:{get:function(){return this._pvrtc}},astc:{get:function(){return this._astc}},etc:{get:function(){return this._etc}},etc1:{get:function(){return this._etc1}},bc7:{get:function(){return this._bc7}},supportsBasis:{get:function(){return this._s3tc||this._pvrtc||this._astc||this._etc||this._etc1||this._bc7}},vertexArrayObject:{get:function(){return this._vertexArrayObject||this._webgl2}},fragmentDepth:{get:function(){return this._fragDepth||this._webgl2}},instancedArrays:{get:function(){return this._instancedArrays||this._webgl2}},colorBufferFloat:{get:function(){return this._colorBufferFloat}},colorBufferHalfFloat:{get:function(){return this._webgl2&&this._colorBufferFloat||!this._webgl2&&this._colorBufferHalfFloat}},drawBuffers:{get:function(){return this._drawBuffers||this._webgl2}},debugShaders:{get:function(){return this._debugShaders}},throwOnWebGLError:{get:function(){return this._throwOnWebGLError},set:function(e){this._throwOnWebGLError=e,this._gl=function(e,t){if(!(0,c.A)(t))return e;function n(n){return function(){const i=n.apply(e,arguments);return t(e,n,arguments),i}}const i={};for(const o in e){const r=e[o];r instanceof Function?i[o]=n(r):Object.defineProperty(i,o,B(e,o,t))}return i}(this._originalGLContext,e?F:void 0)}},defaultTexture:{get:function(){return void 0===this._defaultTexture&&(this._defaultTexture=new O.A({context:this,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:!1})),this._defaultTexture}},defaultEmissiveTexture:{get:function(){return void 0===this._defaultEmissiveTexture&&(this._defaultEmissiveTexture=new O.A({context:this,pixelFormat:m.A.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0])},flipY:!1})),this._defaultEmissiveTexture}},defaultNormalTexture:{get:function(){return void 0===this._defaultNormalTexture&&(this._defaultNormalTexture=new O.A({context:this,pixelFormat:m.A.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([128,128,255])},flipY:!1})),this._defaultNormalTexture}},defaultCubeMap:{get:function(){if(void 0===this._defaultCubeMap){const e={width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])};this._defaultCubeMap=new E.A({context:this,source:{positiveX:e,negativeX:e,positiveY:e,negativeY:e,positiveZ:e,negativeZ:e},flipY:!1})}return this._defaultCubeMap}},drawingBufferHeight:{get:function(){return this._gl.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._gl.drawingBufferWidth}},defaultFramebuffer:{get:function(){return k}}}),"undefined"!=typeof WebGLRenderingContext&&(H=[y.A.BACK]);const G=new T.A;R.prototype.clear=function(e,t){e=(0,a.A)(e,G),t=(0,a.A)(t,this._defaultPassState);const n=this._gl;let i=0;const r=e.color,s=e.depth,l=e.stencil;(0,c.A)(r)&&(o.A.equals(this._clearColor,r)||(o.A.clone(r,this._clearColor),n.clearColor(r.red,r.green,r.blue,r.alpha)),i|=n.COLOR_BUFFER_BIT),(0,c.A)(s)&&(s!==this._clearDepth&&(this._clearDepth=s,n.clearDepth(s)),i|=n.DEPTH_BUFFER_BIT),(0,c.A)(l)&&(l!==this._clearStencil&&(this._clearStencil=l,n.clearStencil(l)),i|=n.STENCIL_BUFFER_BIT),V(this,(0,a.A)(e.renderState,this._defaultRenderState),t,!0),z(this,(0,a.A)(e.framebuffer,t.framebuffer)),n.clear(i)},R.prototype.draw=function(e,t,n,o){i.A.defined("drawCommand",e),i.A.defined("drawCommand.shaderProgram",e._shaderProgram),t=(0,a.A)(t,this._defaultPassState);const r=(0,a.A)(e._framebuffer,t.framebuffer),s=(0,a.A)(e._renderState,this._defaultRenderState);n=(0,a.A)(n,e._shaderProgram),o=(0,a.A)(o,e._uniformMap),function(e,t,n,i,o){if((0,c.A)(t)&&o.depthTest&&o.depthTest.enabled&&!t.hasDepthAttachment)throw new d.A("The depth test can not be enabled (drawCommand.renderState.depthTest.enabled) because the framebuffer (drawCommand.framebuffer) does not have a depth or depth-stencil renderbuffer.");z(e,t),V(e,o,n,!1),i._bind(),e._maxFrameTextureUnitIndex=Math.max(e._maxFrameTextureUnitIndex,i.maximumTextureUnitIndex)}(this,r,t,n,s),function(e,t,n,o){const r=t._primitiveType,s=t._vertexArray;let l=t._offset,u=t._count;const h=t.instanceCount;if(!_.A.validate(r))throw new d.A("drawCommand.primitiveType is required and must be valid.");if(i.A.defined("drawCommand.vertexArray",s),i.A.typeOf.number.greaterThanOrEquals("drawCommand.offset",l,0),(0,c.A)(u)&&i.A.typeOf.number.greaterThanOrEquals("drawCommand.count",u,0),i.A.typeOf.number.greaterThanOrEquals("drawCommand.instanceCount",h,0),h>0&&!e.instancedArrays)throw new d.A("Instanced arrays extension is not supported");e._us.model=(0,a.A)(t._modelMatrix,p.A.IDENTITY),n._setUniforms(o,e._us,e.validateShaderProgram),s._bind();const A=s.indexBuffer;(0,c.A)(A)?(l*=A.bytesPerIndex,u=(0,a.A)(u,A.numberOfIndices),0===h?e._gl.drawElements(r,u,A.indexDatatype,l):e.glDrawElementsInstanced(r,u,A.indexDatatype,l,h)):(u=(0,a.A)(u,s.numberOfVertices),0===h?e._gl.drawArrays(r,l,u):e.glDrawArraysInstanced(r,l,u,h)),s._unBind()}(this,e,n,o)},R.prototype.endFrame=function(){const e=this._gl;e.useProgram(null),this._currentFramebuffer=void 0,e.bindFramebuffer(e.FRAMEBUFFER,null);const t=H;this.drawBuffers&&this.glDrawBuffers(t);const n=this._maxFrameTextureUnitIndex;this._maxFrameTextureUnitIndex=0;for(let t=0;t<n;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null)},R.prototype.readPixels=function(e){const t=this._gl;e=(0,a.A)(e,a.A.EMPTY_OBJECT);const n=Math.max((0,a.A)(e.x,0),0),o=Math.max((0,a.A)(e.y,0),0),r=(0,a.A)(e.width,t.drawingBufferWidth),s=(0,a.A)(e.height,t.drawingBufferHeight),l=e.framebuffer;i.A.typeOf.number.greaterThan("readState.width",r,0),i.A.typeOf.number.greaterThan("readState.height",s,0);let u=x.A.UNSIGNED_BYTE;(0,c.A)(l)&&l.numberOfColorAttachments>0&&(u=l.getColorTexture(0).pixelDatatype);const d=m.A.createTypedArray(m.A.RGBA,u,r,s);return z(this,l),t.readPixels(n,o,r,s,m.A.RGBA,x.A.toWebGLConstant(u,this),d),d};const j={position:0,textureCoordinates:1};function W(e,t,n){this._pickObjects=e,this.key=t,this.color=n}R.prototype.getViewportQuadVertexArray=function(){let e=this.cache.viewportQuad_vertexArray;if(!(0,c.A)(e)){const t=new h.A({attributes:{position:new A.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1]}),textureCoordinates:new A.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:2,values:[0,0,1,0,1,1,0,1]})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:_.A.TRIANGLES});e=M.A.fromGeometry({context:this,geometry:t,attributeLocations:j,bufferUsage:v.A.STATIC_DRAW,interleave:!0}),this.cache.viewportQuad_vertexArray=e}return e},R.prototype.createViewportQuadCommand=function(e,t){return t=(0,a.A)(t,a.A.EMPTY_OBJECT),new S.A({vertexArray:this.getViewportQuadVertexArray(),primitiveType:_.A.TRIANGLES,renderState:t.renderState,shaderProgram:D.A.fromCache({context:this,vertexShaderSource:b.A,fragmentShaderSource:e,attributeLocations:j}),uniformMap:t.uniformMap,owner:t.owner,framebuffer:t.framebuffer,pass:t.pass})},R.prototype.getObjectByPickColor=function(e){return i.A.defined("pickColor",e),this._pickObjects[e.toRgba()]},Object.defineProperties(W.prototype,{object:{get:function(){return this._pickObjects[this.key]},set:function(e){this._pickObjects[this.key]=e}}}),W.prototype.destroy=function(){delete this._pickObjects[this.key]},R.prototype.createPickId=function(e){i.A.defined("object",e),++this._nextPickColor[0];const t=this._nextPickColor[0];if(0===t)throw new g.A("Out of unique Pick IDs.");return this._pickObjects[t]=e,new W(this._pickObjects,t,o.A.fromRgba(t))},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){const e=this.cache;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];(0,c.A)(n.destroy)&&n.destroy()}return this._shaderCache=this._shaderCache.destroy(),this._textureCache=this._textureCache.destroy(),this._defaultTexture=this._defaultTexture&&this._defaultTexture.destroy(),this._defaultEmissiveTexture=this._defaultEmissiveTexture&&this._defaultEmissiveTexture.destroy(),this._defaultNormalTexture=this._defaultNormalTexture&&this._defaultNormalTexture.destroy(),this._defaultCubeMap=this._defaultCubeMap&&this._defaultCubeMap.destroy(),(0,u.A)(this)},R._deprecationWarning=l.A;const q=R},804701:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(483128),o=n(915777),r=n(57775),s=n(557053),a=n(100482),c=n(654799),l=n(616e3),u=n(419061),d=n(491446),h=n(605971),A=n(276904);function f(e){if(e=(0,u.A)(e,u.A.EMPTY_OBJECT),this._numSamples=(0,u.A)(e.numSamples,1),this._colorAttachmentsLength=(0,u.A)(e.colorAttachmentsLength,1),this._color=(0,u.A)(e.color,!0),this._depth=(0,u.A)(e.depth,!1),this._depthStencil=(0,u.A)(e.depthStencil,!1),this._supportsDepthTexture=(0,u.A)(e.supportsDepthTexture,!1),!this._color&&!this._depth&&!this._depthStencil)throw new h.A("Must enable at least one type of framebuffer attachment.");if(this._depth&&this._depthStencil)throw new h.A("Cannot have both a depth and depth-stencil attachment.");this._createColorAttachments=(0,u.A)(e.createColorAttachments,!0),this._createDepthAttachments=(0,u.A)(e.createDepthAttachments,!0),this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(f.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}}),f.prototype.isDirty=function(e,t,n,i,o){n=(0,u.A)(n,1);const r=this._width!==e||this._height!==t,s=this._numSamples!==n,a=(0,d.A)(i)&&this._pixelDatatype!==i||(0,d.A)(o)&&this._pixelFormat!==o,c=1===n?(0,d.A)(this._framebuffer):(0,d.A)(this._multisampleFramebuffer);return this._attachmentsDirty||r||s||a||!c||this._color&&!(0,d.A)(this._colorTextures[0])},f.prototype.update=function(e,t,n,f,p,m){if(!(0,d.A)(t)||!(0,d.A)(n))throw new h.A("width and height must be defined.");if(f=e.msaa?(0,u.A)(f,1):1,p=(0,u.A)(p,this._color?(0,u.A)(this._pixelDatatype,r.A.UNSIGNED_BYTE):void 0),m=(0,u.A)(m,this._color?(0,u.A)(this._pixelFormat,A.A.RGBA):void 0),this.isDirty(t,n,f,p,m)){if(this.destroy(),this._width=t,this._height=n,this._numSamples=f,this._pixelDatatype=p,this._pixelFormat=m,this._attachmentsDirty=!1,this._color&&this._createColorAttachments)for(let i=0;i<this._colorAttachmentsLength;++i)if(this._colorTextures[i]=new l.A({context:e,width:t,height:n,pixelFormat:m,pixelDatatype:p,sampler:c.A.NEAREST}),this._numSamples>1){const o=a.A.getColorFormat(p);this._colorRenderbuffers[i]=new s.A({context:e,width:t,height:n,format:o,numSamples:this._numSamples})}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new l.A({context:e,width:t,height:n,pixelFormat:A.A.DEPTH_STENCIL,pixelDatatype:r.A.UNSIGNED_INT_24_8,sampler:c.A.NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new s.A({context:e,width:t,height:n,format:a.A.DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new s.A({context:e,width:t,height:n,format:a.A.DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new l.A({context:e,width:t,height:n,pixelFormat:A.A.DEPTH_COMPONENT,pixelDatatype:r.A.UNSIGNED_INT,sampler:c.A.NEAREST}):this._depthRenderbuffer=new s.A({context:e,width:t,height:n,format:a.A.DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new o.A({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new i.A({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}},f.prototype.getColorTexture=function(e){if((e=(0,u.A)(e,0))>=this._colorAttachmentsLength)throw new h.A("index must be smaller than total number of color attachments.");return this._colorTextures[e]},f.prototype.setColorTexture=function(e,t){if(t=(0,u.A)(t,0),this._createColorAttachments)throw new h.A("createColorAttachments must be false if setColorTexture is called.");if(t>=this._colorAttachmentsLength)throw new h.A("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e},f.prototype.getColorRenderbuffer=function(e){if((e=(0,u.A)(e,0))>=this._colorAttachmentsLength)throw new h.A("index must be smaller than total number of color attachments.");return this._colorRenderbuffers[e]},f.prototype.setColorRenderbuffer=function(e,t){if(t=(0,u.A)(t,0),this._createColorAttachments)throw new h.A("createColorAttachments must be false if setColorRenderbuffer is called.");if(t>=this._colorAttachmentsLength)throw new h.A("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e},f.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer},f.prototype.setDepthRenderbuffer=function(e){if(this._createDepthAttachments)throw new h.A("createDepthAttachments must be false if setDepthRenderbuffer is called.");this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e},f.prototype.getDepthTexture=function(){return this._depthTexture},f.prototype.setDepthTexture=function(e){if(this._createDepthAttachments)throw new h.A("createDepthAttachments must be false if setDepthTexture is called.");this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e},f.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer},f.prototype.setDepthStencilRenderbuffer=function(e){if(this._createDepthAttachments)throw new h.A("createDepthAttachments must be false if setDepthStencilRenderbuffer is called.");this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e},f.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture},f.prototype.setDepthStencilTexture=function(e){if(this._createDepthAttachments)throw new h.A("createDepthAttachments must be false if setDepthStencilTexture is called.");this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e},f.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)},f.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,n),t.framebuffer=i},f.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()},f.prototype.destroy=function(){if(this._color){let e;const t=this._colorTextures.length;for(e=0;e<t;++e){const t=this._colorTextures[e];this._createColorAttachments&&(0,d.A)(t)&&!t.isDestroyed()&&(this._colorTextures[e].destroy(),this._colorTextures[e]=void 0),(0,d.A)(t)&&t.isDestroyed()&&(this._colorTextures[e]=void 0);const n=this._colorRenderbuffers[e];this._createColorAttachments&&(0,d.A)(n)&&!n.isDestroyed()&&(this._colorRenderbuffers[e].destroy(),this._colorRenderbuffers[e]=void 0),(0,d.A)(n)&&n.isDestroyed()&&(this._colorRenderbuffers[e]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),(0,d.A)(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),(0,d.A)(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),(0,d.A)(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),(0,d.A)(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()};const p=f},915777:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(419061),r=n(491446),s=n(677354),a=n(605971),c=n(483128);function l(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).context,n=e.width,s=e.height;i.A.defined("options.context",t),i.A.defined("options.width",n),i.A.defined("options.height",s),this._width=n,this._height=s;const l=e.colorRenderbuffers,u=e.colorTextures;if((0,r.A)(l)!==(0,r.A)(u))throw new a.A("Both color renderbuffer and texture attachments must be provided.");const d=e.depthStencilRenderbuffer,h=e.depthStencilTexture;if((0,r.A)(d)!==(0,r.A)(h))throw new a.A("Both depth-stencil renderbuffer and texture attachments must be provided.");this._renderFramebuffer=new c.A({context:t,colorRenderbuffers:l,depthStencilRenderbuffer:d,destroyAttachments:e.destroyAttachments}),this._colorFramebuffer=new c.A({context:t,colorTextures:u,depthStencilTexture:h,destroyAttachments:e.destroyAttachments})}l.prototype.getRenderFramebuffer=function(){return this._renderFramebuffer},l.prototype.getColorFramebuffer=function(){return this._colorFramebuffer},l.prototype.blitFramebuffers=function(e,t){this._renderFramebuffer.bindRead(),this._colorFramebuffer.bindDraw();const n=e._gl;let i=0;this._colorFramebuffer._colorTextures.length>0&&(i|=n.COLOR_BUFFER_BIT),(0,r.A)(this._colorFramebuffer.depthStencilTexture)&&(i|=n.DEPTH_BUFFER_BIT|(t?n.STENCIL_BUFFER_BIT:0)),n.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,i,n.NEAREST),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._renderFramebuffer.destroy(),this._colorFramebuffer.destroy(),(0,s.A)(this)};const u=l},326429:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e){this.context=e,this.framebuffer=void 0,this.blendingEnabled=void 0,this.scissorTest=void 0,this.viewport=void 0}},557053:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(491446),s=n(677354),a=n(605971),c=n(430332),l=n(100482);function u(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),i.A.defined("options.context",e.context);const t=e.context._gl,n=c.A.maximumRenderbufferSize,s=(0,o.A)(e.format,l.A.RGBA4),u=(0,r.A)(e.width)?e.width:t.drawingBufferWidth,d=(0,r.A)(e.height)?e.height:t.drawingBufferHeight,h=(0,o.A)(e.numSamples,1);if(!l.A.validate(s))throw new a.A("Invalid format.");if(i.A.typeOf.number.greaterThan("width",u,0),u>n)throw new a.A(`Width must be less than or equal to the maximum renderbuffer size (${n}).  Check maximumRenderbufferSize.`);if(i.A.typeOf.number.greaterThan("height",d,0),d>n)throw new a.A(`Height must be less than or equal to the maximum renderbuffer size (${n}).  Check maximumRenderbufferSize.`);this._gl=t,this._format=s,this._width=u,this._height=d,this._renderbuffer=this._gl.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this._renderbuffer),h>1?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,s,u,d):t.renderbufferStorage(t.RENDERBUFFER,s,u,d),t.bindRenderbuffer(t.RENDERBUFFER,null)}Object.defineProperties(u.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),u.prototype._getRenderbuffer=function(){return this._renderbuffer},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),(0,s.A)(this)};const d=u},100482:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(352581);const o={RGBA4:i.A.RGBA4,RGBA8:i.A.RGBA8,RGBA16F:i.A.RGBA16F,RGBA32F:i.A.RGBA32F,RGB5_A1:i.A.RGB5_A1,RGB565:i.A.RGB565,DEPTH_COMPONENT16:i.A.DEPTH_COMPONENT16,STENCIL_INDEX8:i.A.STENCIL_INDEX8,DEPTH_STENCIL:i.A.DEPTH_STENCIL,DEPTH24_STENCIL8:i.A.DEPTH24_STENCIL8,validate:function(e){return e===o.RGBA4||e===o.RGBA8||e===o.RGBA16F||e===o.RGBA32F||e===o.RGB5_A1||e===o.RGB565||e===o.DEPTH_COMPONENT16||e===o.STENCIL_INDEX8||e===o.DEPTH_STENCIL||e===o.DEPTH24_STENCIL8},getColorFormat:function(e){return e===i.A.FLOAT?o.RGBA32F:e===i.A.HALF_FLOAT_OES?o.RGBA16F:o.RGBA8}},r=Object.freeze(o)},469635:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(369031),o=n(376758),r=n(491446),s=n(419061),a=n(605971),c=n(624512),l=n(302836),u=n(342875),d=n(693299),h=n(539846);function A(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}Object.defineProperties(A.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}}),A.prototype.addDefine=function(e,t,n){i.A.typeOf.string("identifier",e),n=(0,s.A)(n,c.A.BOTH);let o=e;(0,r.A)(t)&&(o+=` ${t.toString()}`),c.A.includesVertexShader(n)&&this._vertexShaderParts.defineLines.push(o),c.A.includesFragmentShader(n)&&this._fragmentShaderParts.defineLines.push(o)},A.prototype.addStruct=function(e,t,n){i.A.typeOf.string("structId",e),i.A.typeOf.string("structName",t),i.A.typeOf.number("destination",n),this._structs[e]=new d.A(t),c.A.includesVertexShader(n)&&this._vertexShaderParts.structIds.push(e),c.A.includesFragmentShader(n)&&this._fragmentShaderParts.structIds.push(e)},A.prototype.addStructField=function(e,t,n){i.A.typeOf.string("structId",e),i.A.typeOf.string("type",t),i.A.typeOf.string("identifier",n),this._structs[e].addField(t,n)},A.prototype.addFunction=function(e,t,n){i.A.typeOf.string("functionName",e),i.A.typeOf.string("signature",t),i.A.typeOf.number("destination",n),this._functions[e]=new h.A(t),c.A.includesVertexShader(n)&&this._vertexShaderParts.functionIds.push(e),c.A.includesFragmentShader(n)&&this._fragmentShaderParts.functionIds.push(e)},A.prototype.addFunctionLines=function(e,t){if(i.A.typeOf.string("functionName",e),"string"!=typeof t&&!Array.isArray(t))throw new a.A(`Expected lines to be a string or an array of strings, actual value was ${t}`);this._functions[e].addLines(t)},A.prototype.addUniform=function(e,t,n){i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t),n=(0,s.A)(n,c.A.BOTH);const o=`uniform ${e} ${t};`;c.A.includesVertexShader(n)&&this._vertexShaderParts.uniformLines.push(o),c.A.includesFragmentShader(n)&&this._fragmentShaderParts.uniformLines.push(o)},A.prototype.setPositionAttribute=function(e,t){if(i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t),(0,r.A)(this._positionAttributeLine))throw new a.A("setPositionAttribute() must be called exactly once for the attribute used for gl_Position. For other attributes, use addAttribute()");return this._positionAttributeLine=`in ${e} ${t};`,this._attributeLocations[t]=0,0},A.prototype.addAttribute=function(e,t){i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t);const n=`in ${e} ${t};`;this._attributeLines.push(n);const o=this._nextAttributeLocation;return this._attributeLocations[t]=o,this._nextAttributeLocation+=function(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}(e),o},A.prototype.addVarying=function(e,t){i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t);const n=`${e} ${t};`;this._vertexShaderParts.varyingLines.push(`out ${n}`),this._fragmentShaderParts.varyingLines.push(`in ${n}`)},A.prototype.addVertexLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new a.A(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._vertexShaderParts.shaderLines;Array.isArray(e)?t.push.apply(t,e):t.push(e)},A.prototype.addFragmentLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new a.A(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._fragmentShaderParts.shaderLines;Array.isArray(e)?t.push.apply(t,e):t.push(e)},A.prototype.buildShaderProgram=function(e){i.A.typeOf.object("context",e);const t=(0,r.A)(this._positionAttributeLine)?[this._positionAttributeLine]:[],n=function(e){const t=[],n=[];let i,o,r,s,a=e._vertexShaderParts.structIds;for(i=0;i<a.length;i++)o=a[i],r=e._structs[o],s=r.generateGlslLines(),t.push.apply(t,s);for(a=e._fragmentShaderParts.structIds,i=0;i<a.length;i++)o=a[i],r=e._structs[o],s=r.generateGlslLines(),n.push.apply(n,s);return{vertexLines:t,fragmentLines:n}}(this),o=function(e){const t=[],n=[];let i,o,r,s,a=e._vertexShaderParts.functionIds;for(i=0;i<a.length;i++)o=a[i],r=e._functions[o],s=r.generateGlslLines(),t.push.apply(t,s);for(a=e._fragmentShaderParts.functionIds,i=0;i<a.length;i++)o=a[i],r=e._functions[o],s=r.generateGlslLines(),n.push.apply(n,s);return{vertexLines:t,fragmentLines:n}}(this),s=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,n.vertexLines,o.vertexLines,this._vertexShaderParts.shaderLines).join("\n"),a=new u.A({defines:this._vertexShaderParts.defineLines,sources:[s]}),c=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,n.fragmentLines,o.fragmentLines,this._fragmentShaderParts.shaderLines).join("\n"),d=new u.A({defines:this._fragmentShaderParts.defineLines,sources:[c]});return l.A.fromCache({context:e,vertexShaderSource:a,fragmentShaderSource:d,attributeLocations:this._attributeLocations})},A.prototype.clone=function(){return(0,o.A)(this,!0)};const f=A},389994:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(677354),r=n(302836),s=n(342875);function a(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function c(e,t){const n=t.derivedKeywords,i=n.length;for(let o=0;o<i;++o){const i=n[o]+t.keyword;c(e,e._shaders[i])}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(a.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),a.prototype.replaceShaderProgram=function(e){return(0,i.A)(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},a.prototype.getShaderProgram=function(e){let t=e.vertexShaderSource,n=e.fragmentShaderSource;const o=e.attributeLocations;"string"==typeof t&&(t=new s.A({sources:[t]})),"string"==typeof n&&(n=new s.A({sources:[n]}));const a=`${t.getCacheKey()}:${n.getCacheKey()}:${(0,i.A)(o)?function(e){const t=Object.keys(e).sort();return JSON.stringify(e,t)}(o):""}`;let c;if((0,i.A)(this._shaders[a]))c=this._shaders[a],delete this._shadersToRelease[a];else{const e=this._context,i=t.createCombinedVertexShader(e),s=n.createCombinedFragmentShader(e),l=new r.A({gl:e._gl,logShaderCompilation:e.logShaderCompilation,debugShaders:e.debugShaders,vertexShaderSource:t,vertexShaderText:i,fragmentShaderSource:n,fragmentShaderText:s,attributeLocations:o});c={cache:this,shaderProgram:l,keyword:a,derivedKeywords:[],count:0},l._cachedShader=c,this._shaders[a]=c,++this._numberOfShaders}return++c.count,c.shaderProgram},a.prototype.replaceDerivedShaderProgram=function(e,t,n){const o=e._cachedShader,r=t+o.keyword,s=this._shaders[r];if((0,i.A)(s)){c(this,s);const e=o.derivedKeywords.indexOf(t);e>-1&&o.derivedKeywords.splice(e,1)}return this.createDerivedShaderProgram(e,t,n)},a.prototype.getDerivedShaderProgram=function(e,t){const n=t+e._cachedShader.keyword,o=this._shaders[n];if((0,i.A)(o))return o.shaderProgram},a.prototype.createDerivedShaderProgram=function(e,t,n){const i=e._cachedShader,o=t+i.keyword;let a=n.vertexShaderSource,c=n.fragmentShaderSource;const l=n.attributeLocations;"string"==typeof a&&(a=new s.A({sources:[a]})),"string"==typeof c&&(c=new s.A({sources:[c]}));const u=this._context,d=a.createCombinedVertexShader(u),h=c.createCombinedFragmentShader(u),A=new r.A({gl:u._gl,logShaderCompilation:u.logShaderCompilation,debugShaders:u.debugShaders,vertexShaderSource:a,vertexShaderText:d,fragmentShaderSource:c,fragmentShaderText:h,attributeLocations:l}),f={cache:this,shaderProgram:A,keyword:o,derivedKeywords:[],count:0};return i.derivedKeywords.push(t),A._cachedShader=f,this._shaders[o]=f,A},a.prototype.destroyReleasedShaderPrograms=function(){const e=this._shadersToRelease;for(const t in e)e.hasOwnProperty(t)&&(c(this,e[t]),--this._numberOfShaders);this._shadersToRelease={}},a.prototype.releaseShaderProgram=function(e){if((0,i.A)(e)){const t=e._cachedShader;t&&0==--t.count&&(this._shadersToRelease[t.keyword]=t)}},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){const e=this._shaders;for(const t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return(0,o.A)(this)};const l=a},624512:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);const o={VERTEX:0,FRAGMENT:1,BOTH:2,includesVertexShader:function(e){return i.A.typeOf.number("destination",e),e===o.VERTEX||e===o.BOTH},includesFragmentShader:function(e){return i.A.typeOf.number("destination",e),e===o.FRAGMENT||e===o.BOTH}},r=Object.freeze(o)},539846:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(605971);function o(e){this.signature=e,this.body=[]}o.prototype.addLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new i.A(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this.body;if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;i++)t.push(`    ${e[i]}`)}else t.push(`    ${e}`)},o.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")};const r=o},693299:(e,t,n)=>{"use strict";function i(e){this.name=e,this.fields=[]}n.d(t,{A:()=>o}),i.prototype.addField=function(e,t){const n=`    ${e} ${t};`;this.fields.push(n)},i.prototype.generateGlslLines=function(){let e=this.fields;return 0===e.length&&(e=["    float _empty;"]),[].concat(`struct ${this.name}`,"{",e,"};")};const o=i},16012:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(677354);function r(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(r.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),r.prototype.getTexture=function(e){const t=this._textures[e];if((0,i.A)(t))return delete this._texturesToRelease[e],++t.count,t.texture},r.prototype.addTexture=function(e,t){const n={texture:t,count:1};t.finalDestroy=t.destroy;const i=this;t.destroy=function(){0==--n.count&&(i._texturesToRelease[e]=n)},this._textures[e]=n,++this._numberOfTextures},r.prototype.destroyReleasedTextures=function(){const e=this._texturesToRelease;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];delete this._textures[t],n.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){const e=this._textures;for(const t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return(0,o.A)(this)};const s=r},492718:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(647934),o=n(434067),r=n(267980),s=n(626809),a=n(336946),c=n(41476),l=n(419061),u=n(491446),d=n(610750),h=n(816422),A=n(367817),f=n(331185),p=n(584164),m=n(811203),_=n(658542),g=n(543622),y=n(62467),b=n(205672);function v(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new i.A,this._viewportCartesian4=new s.A,this._viewportDirty=!1,this._viewportOrthographicMatrix=p.A.clone(p.A.IDENTITY),this._viewportTransformation=p.A.clone(p.A.IDENTITY),this._model=p.A.clone(p.A.IDENTITY),this._view=p.A.clone(p.A.IDENTITY),this._inverseView=p.A.clone(p.A.IDENTITY),this._projection=p.A.clone(p.A.IDENTITY),this._infiniteProjection=p.A.clone(p.A.IDENTITY),this._entireFrustum=new o.A,this._currentFrustum=new o.A,this._frustumPlanes=new s.A,this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=f.A.clone(p.A.IDENTITY),this._view3DDirty=!0,this._view3D=new p.A,this._inverseView3DDirty=!0,this._inverseView3D=new p.A,this._inverseModelDirty=!0,this._inverseModel=new p.A,this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new f.A,this._viewRotation=new f.A,this._inverseViewRotation=new f.A,this._viewRotation3D=new f.A,this._inverseViewRotation3D=new f.A,this._inverseProjectionDirty=!0,this._inverseProjection=new p.A,this._modelViewDirty=!0,this._modelView=new p.A,this._modelView3DDirty=!0,this._modelView3D=new p.A,this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new p.A,this._inverseModelViewDirty=!0,this._inverseModelView=new p.A,this._inverseModelView3DDirty=!0,this._inverseModelView3D=new p.A,this._viewProjectionDirty=!0,this._viewProjection=new p.A,this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new p.A,this._modelViewProjectionDirty=!0,this._modelViewProjection=new p.A,this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new p.A,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new p.A,this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new p.A,this._normalDirty=!0,this._normal=new f.A,this._normal3DDirty=!0,this._normal3D=new f.A,this._inverseNormalDirty=!0,this._inverseNormal=new f.A,this._inverseNormal3DDirty=!0,this._inverseNormal3D=new f.A,this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new h.A,this._cameraPosition=new r.A,this._sunPositionWC=new r.A,this._sunPositionColumbusView=new r.A,this._sunDirectionWC=new r.A,this._sunDirectionEC=new r.A,this._moonDirectionEC=new r.A,this._lightDirectionWC=new r.A,this._lightDirectionEC=new r.A,this._lightColor=new r.A,this._lightColorHdr=new r.A,this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new r.A,this._cameraRight=new r.A,this._cameraUp=new r.A,this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new o.A,this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new c.A,this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new o.A,this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._splitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}Object.defineProperties(v.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!i.A.equals(e,this._viewport)){i.A.clone(e,this._viewport);const t=this._viewport,n=this._viewportCartesian4;n.x=t.x,n.y=t.y,n.z=t.width,n.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return C(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return C(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){p.A.clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,p.A.inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){const e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,p.A.getMatrix3(this.inverseModel,e),f.A.transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return F(this),this._view3D}},viewRotation:{get:function(){return F(this),this._viewRotation}},viewRotation3D:{get:function(){return F(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return B(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return B(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){var e;return(e=this)._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===y.A.SCENE2D||e._mode===y.A.MORPHING||e._orthographicIn3D?p.A.clone(p.A.ZERO,e._inverseProjection):p.A.inverse(e._projection,e._inverseProjection)),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){var e;return(e=this)._modelViewDirty&&(e._modelViewDirty=!1,p.A.multiplyTransformation(e._view,e._model,e._modelView)),this._modelView}},modelView3D:{get:function(){var e;return(e=this)._modelView3DDirty&&(e._modelView3DDirty=!1,p.A.multiplyTransformation(e.view3D,e._model,e._modelView3D)),this._modelView3D}},modelViewRelativeToEye:{get:function(){return function(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;const t=e.modelView,n=e._modelViewRelativeToEye;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=0,n[13]=0,n[14]=0,n[15]=t[15]}}(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){var e;return(e=this)._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,p.A.inverse(e.modelView,e._inverseModelView)),this._inverseModelView}},inverseModelView3D:{get:function(){var e;return(e=this)._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,p.A.inverse(e.modelView3D,e._inverseModelView3D)),this._inverseModelView3D}},viewProjection:{get:function(){var e;return(e=this)._viewProjectionDirty&&(e._viewProjectionDirty=!1,p.A.multiply(e._projection,e._view,e._viewProjection)),this._viewProjection}},inverseViewProjection:{get:function(){var e;return(e=this)._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,p.A.inverse(e.viewProjection,e._inverseViewProjection)),this._inverseViewProjection}},modelViewProjection:{get:function(){var e;return(e=this)._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,p.A.multiply(e._projection,e.modelView,e._modelViewProjection)),this._modelViewProjection}},inverseModelViewProjection:{get:function(){var e;return(e=this)._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,p.A.inverse(e.modelViewProjection,e._inverseModelViewProjection)),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){var e;return(e=this)._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,p.A.multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye)),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){var e;return(e=this)._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,p.A.multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection)),this._modelViewInfiniteProjection}},normal:{get:function(){return function(e){if(e._normalDirty){e._normalDirty=!1;const t=e._normal;p.A.getMatrix3(e.inverseModelView,t),f.A.getRotation(t,t),f.A.transpose(t,t)}}(this),this._normal}},normal3D:{get:function(){return function(e){if(e._normal3DDirty){e._normal3DDirty=!1;const t=e._normal3D;p.A.getMatrix3(e.inverseModelView3D,t),f.A.getRotation(t,t),f.A.transpose(t,t)}}(this),this._normal3D}},inverseNormal:{get:function(){var e;return(e=this)._inverseNormalDirty&&(e._inverseNormalDirty=!1,p.A.getMatrix3(e.inverseModelView,e._inverseNormal),f.A.getRotation(e._inverseNormal,e._inverseNormal)),this._inverseNormal}},inverseNormal3D:{get:function(){var e;return(e=this)._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,p.A.getMatrix3(e.inverseModelView3D,e._inverseNormal3D),f.A.getRotation(e._inverseNormal3D,e._inverseNormal3D)),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return I(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return I(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},splitPosition:{get:function(){return this._splitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return(0,l.A)(this._ellipsoid,d.A.WGS84)}}});let T=new f.A;const w=new a.A;v.prototype.updateCamera=function(e){var t,n;t=this,n=e.viewMatrix,p.A.clone(n,t._view),p.A.getMatrix3(n,t._viewRotation),t._view3DDirty=!0,t._inverseView3DDirty=!0,t._modelViewDirty=!0,t._modelView3DDirty=!0,t._modelViewRelativeToEyeDirty=!0,t._inverseModelViewDirty=!0,t._inverseModelView3DDirty=!0,t._viewProjectionDirty=!0,t._inverseViewProjectionDirty=!0,t._modelViewProjectionDirty=!0,t._modelViewProjectionRelativeToEyeDirty=!0,t._modelViewInfiniteProjectionDirty=!0,t._normalDirty=!0,t._inverseNormalDirty=!0,t._normal3DDirty=!0,t._inverseNormal3DDirty=!0,function(e,t){p.A.clone(t,e._inverseView),p.A.getMatrix3(t,e._inverseViewRotation)}(this,e.inverseViewMatrix),function(e,t){r.A.clone(t.positionWC,e._cameraPosition),r.A.clone(t.directionWC,e._cameraDirection),r.A.clone(t.rightWC,e._cameraRight),r.A.clone(t.upWC,e._cameraUp);const n=t.positionCartographic;(0,u.A)(n)?e._eyeHeight=n.height:e._eyeHeight=-e._ellipsoid.maximumRadius,e._encodedCameraPositionMCDirty=!0}(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==y.A.SCENE2D&&e.frustum instanceof m.A},v.prototype.updateFrustum=function(e){var t,n;t=this,n=e.projectionMatrix,p.A.clone(n,t._projection),t._inverseProjectionDirty=!0,t._viewProjectionDirty=!0,t._inverseViewProjectionDirty=!0,t._modelViewProjectionDirty=!0,t._modelViewProjectionRelativeToEyeDirty=!0,(0,u.A)(e.infiniteProjectionMatrix)&&function(e,t){p.A.clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=A.A.log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne;const i=e.offCenterFrustum;(0,u.A)(i)&&(e=i),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},v.prototype.updatePass=function(e){this._pass=e};const E=[],S=new b.A;function C(e){if(e._viewportDirty){const t=e._viewport;p.A.computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),p.A.computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}v.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;const t=e.camera;this.updateCamera(t),e.mode===y.A.SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),function(e,t){(0,u.A)(g.A.computeIcrfToFixedMatrix(t.time,T))||(T=g.A.computeTemeToPseudoFixedMatrix(t.time,T));let n=_.A.computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);f.A.multiplyByVector(T,n,n),r.A.normalize(n,e._sunDirectionWC),n=f.A.multiplyByVector(e.viewRotation3D,n,e._sunDirectionEC),r.A.normalize(n,n),n=_.A.computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),f.A.multiplyByVector(T,n,n),f.A.multiplyByVector(e.viewRotation3D,n,n),r.A.normalize(n,n);const i=t.mapProjection,o=i.ellipsoid.cartesianToCartographic(e._sunPositionWC,w);i.project(o,e._sunPositionColumbusView)}(this,e);const n=(0,l.A)(e.light,S);n instanceof b.A?(this._lightDirectionWC=r.A.clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=r.A.clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=r.A.normalize(r.A.negate(n.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=f.A.multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));const i=n.color;let s=r.A.fromElements(i.red,i.green,i.blue,this._lightColorHdr);s=r.A.multiplyByScalar(s,n.intensity,s);const a=r.A.maximumComponent(s);a>1?r.A.divideByScalar(s,a,this._lightColor):r.A.clone(s,this._lightColor);const d=e.brdfLutGenerator,h=(0,u.A)(d)?d.colorTexture:void 0;this._brdfLut=h,this._environmentMap=(0,l.A)(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=(0,l.A)(e.sphericalHarmonicCoefficients,E),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,(0,u.A)(this._specularEnvironmentMaps)&&o.A.clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=g.A.computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._splitPosition=e.splitPosition*e.context.drawingBufferWidth;const A=t.frustum.fov,p=this._viewport;let m;m=(0,u.A)(A)?p.height>p.width?2*Math.tan(.5*A)/p.height:2*Math.tan(.5*A)/p.width:1/Math.max(p.width,p.height),this._geometricToleranceOverMeter=m*e.maximumScreenSpaceError,c.A.clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};const x=new r.A;function I(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,p.A.multiplyByPoint(e.inverseModel,e._cameraPosition,x),h.A.fromCartesian(x,e._encodedCameraPositionMC))}const P=new r.A,D=new r.A,O=new r.A,L=new r.A,N=new a.A,M=new r.A,R=new p.A;function F(e){e._view3DDirty&&(e._mode===y.A.SCENE3D?p.A.clone(e._view,e._view3D):function(e,t,n,i,o,s,a,c){const l=P;l.x=e.y,l.y=e.z,l.z=e.x;const d=D;d.x=n.y,d.y=n.z,d.z=n.x;const h=O;h.x=i.y,h.y=i.z,h.z=i.x;const f=L;f.x=t.y,f.y=t.z,f.z=t.x,s===y.A.SCENE2D&&(l.z=.5*o);const m=a.unproject(l,N);m.longitude=A.A.clamp(m.longitude,-Math.PI,Math.PI),m.latitude=A.A.clamp(m.latitude,-A.A.PI_OVER_TWO,A.A.PI_OVER_TWO);const _=a.ellipsoid,b=_.cartographicToCartesian(m,M),v=g.A.eastNorthUpToFixedFrame(b,_,R);p.A.multiplyByPointAsVector(v,d,d),p.A.multiplyByPointAsVector(v,h,h),p.A.multiplyByPointAsVector(v,f,f),(0,u.A)(c)||(c=new p.A),c[0]=d.x,c[1]=h.x,c[2]=-f.x,c[3]=0,c[4]=d.y,c[5]=h.y,c[6]=-f.y,c[7]=0,c[8]=d.z,c[9]=h.z,c[10]=-f.z,c[11]=0,c[12]=-r.A.dot(d,b),c[13]=-r.A.dot(h,b),c[14]=r.A.dot(f,b),c[15]=1}(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),p.A.getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function B(e){e._inverseView3DDirty&&(p.A.inverseTransformation(e.view3D,e._inverseView3D),p.A.getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}const U=v},454214:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(491446),r=n(605971),s=n(744603),a=n(346154);const c=function(e,t,n){if(i.A.defined("context",e),!((0,o.A)(t)&&(0,o.A)(t.positiveX)&&(0,o.A)(t.negativeX)&&(0,o.A)(t.positiveY)&&(0,o.A)(t.negativeY)&&(0,o.A)(t.positiveZ)&&(0,o.A)(t.negativeZ)))throw new r.A("urls is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");const c={flipY:!0,skipColorSpaceConversion:n,preferImageBitmap:!0},l=[s.A.createIfNeeded(t.positiveX).fetchImage(c),s.A.createIfNeeded(t.negativeX).fetchImage(c),s.A.createIfNeeded(t.positiveY).fetchImage(c),s.A.createIfNeeded(t.negativeY).fetchImage(c),s.A.createIfNeeded(t.positiveZ).fetchImage(c),s.A.createIfNeeded(t.negativeZ).fetchImage(c)];return Promise.all(l).then((function(t){return new a.A({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}})}))}},953019:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"})},418510:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({SATELLITE:1,OCEANS:2,HILLSHADE:3})},531573:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(434067),o=n(267980),r=n(336946),s=n(369031),a=n(672743),c=n(419061),l=n(491446),u=n(786101),d=n(955943),h=n(653577),A=n(182348),f=n(367817),p=n(697422),m=n(744603),_=n(123245),g=n(705302),y=n(414305),b=n(41076),v=n(95146),T=n(836721),w=n(789989),E=n(553909),S=n(418510),C=n(605971);function x(e){this.useTiles=(0,c.A)(e.usePreCachedTilesIfAvailable,!0);const t=e.ellipsoid;this.tilingScheme=(0,c.A)(e.tilingScheme,new A.A({ellipsoid:t})),this.rectangle=(0,c.A)(e.rectangle,this.tilingScheme.rectangle),this.ellipsoid=t;let n=e.credit;"string"==typeof n&&(n=new a.A(n)),this.credit=n,this.tileCredits=void 0,this.tileDiscardPolicy=e.tileDiscardPolicy,this.tileWidth=(0,c.A)(e.tileWidth,256),this.tileHeight=(0,c.A)(e.tileHeight,256),this.maximumLevel=e.maximumLevel}async function I(e,t,n){const i=e.getDerivedResource({queryParameters:{f:"json"}});try{!function(e,t){const n=e.tileInfo;if((0,l.A)(n)){if(t.tileWidth=n.rows,t.tileHeight=n.cols,102100===n.spatialReference.wkid||102113===n.spatialReference.wkid)t.tilingScheme=new b.A({ellipsoid:t.ellipsoid});else{if(4326!==e.tileInfo.spatialReference.wkid){const t=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;throw new _.A(t)}t.tilingScheme=new A.A({ellipsoid:t.ellipsoid})}if(t.maximumLevel=e.tileInfo.lods.length-1,(0,l.A)(e.fullExtent)){if((0,l.A)(e.fullExtent.spatialReference)&&(0,l.A)(e.fullExtent.spatialReference.wkid))if(102100===e.fullExtent.spatialReference.wkid||102113===e.fullExtent.spatialReference.wkid){const n=new y.A,i=e.fullExtent,r=n.unproject(new o.A(Math.max(i.xmin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(i.ymin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),s=n.unproject(new o.A(Math.min(i.xmax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(i.ymax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0));t.rectangle=new p.A(r.longitude,r.latitude,s.longitude,s.latitude)}else{if(4326!==e.fullExtent.spatialReference.wkid){const t=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;throw new _.A(t)}t.rectangle=p.A.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax)}}else t.rectangle=t.tilingScheme.rectangle;t.useTiles=!0}else t.useTiles=!1;(0,l.A)(e.copyrightText)&&e.copyrightText.length>0&&((0,l.A)(t.credit)?t.tileCredits=[new a.A(e.copyrightText)]:t.credit=new a.A(e.copyrightText))}(await i.fetchJson(),t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw(0,l.A)(t)&&(0,l.A)(t.message)&&(i+=`: ${t.message}`),g.A.reportError(void 0,n,(0,l.A)(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new _.A(i)}(e,t,n)}}function P(e){e=(0,c.A)(e,c.A.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=(0,c.A)(e.tileWidth,256),this._tileHeight=(0,c.A)(e.tileHeight,256),this._maximumLevel=e.maximumLevel,this._tilingScheme=(0,c.A)(e.tilingScheme,new A.A({ellipsoid:e.ellipsoid})),this._useTiles=(0,c.A)(e.usePreCachedTilesIfAvailable,!0),this._rectangle=(0,c.A)(e.rectangle,this._tilingScheme.rectangle),this._layers=e.layers,this._credit=e.credit,this._tileCredits=void 0;let t=e.credit;if("string"==typeof t&&(t=new a.A(t)),this.enablePickFeatures=(0,c.A)(e.enablePickFeatures,!0),this._errorEvent=new d.A,this._ready=!1,(0,l.A)(e.url)){(0,u.A)("ArcGisMapServerImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGisMapServerImageryProvider.fromUrl instead.");const t=m.A.createIfNeeded(e.url);t.appendForwardSlash(),this._tileDiscardPolicy=e.tileDiscardPolicy,(0,l.A)(e.token)&&t.setQueryParameters({token:e.token}),this._resource=t;const n=new x(e);n.useTiles?this._readyPromise=I(t,n,this).then((()=>(n.build(this),!0))):(n.build(this),this._readyPromise=Promise.resolve(!0))}}function D(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{const s=e._tilingScheme.tileXYToNativeRectangle(t,n,i),a={bbox:`${s.west},${s.south},${s.east},${s.north}`,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof h.A?(a.bboxSR=4326,a.imageSR=4326):(a.bboxSR=3857,a.imageSR=3857),e.layers&&(a.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:"export",request:o,queryParameters:a})}return r}x.prototype.build=function(e){e._useTiles=this.useTiles,e._tilingScheme=this.tilingScheme,e._rectangle=this.rectangle,e._credit=this.credit,e._tileCredits=this.tileCredits,e._tileDiscardPolicy=this.tileDiscardPolicy,e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,this.useTiles&&!(0,l.A)(this.tileDiscardPolicy)&&(e._tileDiscardPolicy=new T.A({missingImageUrl:D(e,0,0,this.maximumLevel).url,pixelsToCheck:[new i.A(0,0),new i.A(200,20),new i.A(20,200),new i.A(80,110),new i.A(160,130)],disableCheckIfAllPixelsAreTransparent:!0})),e._ready=!0},P.fromBasemapType=async function(e,t){let n,i,o;switch(s.A.defined("style",e),t=(0,c.A)(t,c.A.EMPTY_OBJECT),e){case S.A.SATELLITE:{n=(0,c.A)(t.token,v.A.defaultAccessToken),i=m.A.createIfNeeded((0,c.A)(t.url,v.A.defaultWorldImageryServer)),i.appendForwardSlash();const e=v.A.getDefaultTokenCredit(n);(0,l.A)(e)&&(o=a.A.clone(e))}break;case S.A.OCEANS:{n=(0,c.A)(t.token,v.A.defaultAccessToken),i=m.A.createIfNeeded((0,c.A)(t.url,v.A.defaultWorldOceanServer)),i.appendForwardSlash();const e=v.A.getDefaultTokenCredit(n);(0,l.A)(e)&&(o=a.A.clone(e))}break;case S.A.HILLSHADE:{n=(0,c.A)(t.token,v.A.defaultAccessToken),i=m.A.createIfNeeded((0,c.A)(t.url,v.A.defaultWorldHillshadeServer)),i.appendForwardSlash();const e=v.A.getDefaultTokenCredit(n);(0,l.A)(e)&&(o=a.A.clone(e))}break;default:throw new C.A(`Unsupported basemap type: ${e}`)}return P.fromUrl(i,{...t,token:n,credit:o,usePreCachedTilesIfAvailable:!0})},Object.defineProperties(P.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.ready","ArcGisMapServerImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGisMapServerImageryProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.readyPromise","ArcGisMapServerImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGisMapServerImageryProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}},defaultAlpha:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultAlpha","ArcGisMapServerImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultAlpha","ArcGisMapServerImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultNightAlpha","ArcGisMapServerImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultNightAlpha","ArcGisMapServerImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultDayAlpha","ArcGisMapServerImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultDayAlpha","ArcGisMapServerImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultBrightness","ArcGisMapServerImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultBrightness","ArcGisMapServerImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultContrast","ArcGisMapServerImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultContrast","ArcGisMapServerImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultHue","ArcGisMapServerImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultHue","ArcGisMapServerImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultSaturation","ArcGisMapServerImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultSaturation","ArcGisMapServerImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultGamma","ArcGisMapServerImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultGamma","ArcGisMapServerImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultMinificationFilter","ArcGisMapServerImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultMinificationFilter","ArcGisMapServerImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,u.A)("ArcGisMapServerImageryProvider.defaultMagnificationFilter","ArcGisMapServerImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,u.A)("ArcGisMapServerImageryProvider.defaultMagnificationFilter","ArcGisMapServerImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),P.fromUrl=async function(e,t){s.A.defined("url",e),t=(0,c.A)(t,c.A.EMPTY_OBJECT);const n=m.A.createIfNeeded(e);n.appendForwardSlash(),(0,l.A)(t.token)&&n.setQueryParameters({token:t.token});const i=new P(t);i._resource=n;const o=new x(t);return(0,c.A)(t.usePreCachedTilesIfAvailable,!0)&&await I(n,o),o.build(i),i._readyPromise=Promise.resolve(!0),i},P.prototype.getTileCredits=function(e,t,n){return this._tileCredits},P.prototype.requestImage=function(e,t,n,i){return E.A.loadImage(this,D(this,e,t,n,i))},P.prototype.pickFeatures=function(e,t,n,i,s){if(!this.enablePickFeatures)return;const a=this._tilingScheme.tileXYToNativeRectangle(e,t,n);let c,u,d;if(this._tilingScheme.projection instanceof h.A)c=f.A.toDegrees(i),u=f.A.toDegrees(s),d="4326";else{const e=this._tilingScheme.projection.project(new r.A(i,s,0));c=e.x,u=e.y,d="3857"}let A="visible";(0,l.A)(this._layers)&&(A+=`:${this._layers}`);const p={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${c},${u}`,mapExtent:`${a.west},${a.south},${a.east},${a.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:d,layers:A};return this._resource.getDerivedResource({url:"identify",queryParameters:p}).fetchJson().then((function(e){const t=[],n=e.results;if(!(0,l.A)(n))return t;for(let e=0;e<n.length;++e){const i=n[e],s=new w.A;if(s.data=i,s.name=i.value,s.properties=i.attributes,s.configureDescriptionFromProperties(i.attributes),"esriGeometryPoint"===i.geometryType&&i.geometry){const e=i.geometry.spatialReference&&i.geometry.spatialReference.wkid?i.geometry.spatialReference.wkid:4326;if(4326===e||4283===e)s.position=r.A.fromDegrees(i.geometry.x,i.geometry.y,i.geometry.z);else if(102100===e||900913===e||3857===e){const e=new y.A;s.position=e.unproject(new o.A(i.geometry.x,i.geometry.y,i.geometry.z))}}t.push(s)}return t}))},P._metadataCache={};const O=P},95146:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(672743),o=n(491446),r=n(744603);let s;const a="AAPKac82a6d80f1340a4aa9587f789d07e96a_Jj1a4fbA59cggYHArDizxxA2U4QDofLUm36VivpUsSRyK7O1JjRPwy916Y-7ld",c={};c.defaultAccessToken=a,c.defaultWorldImageryServer=new r.A({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}),c.defaultWorldHillshadeServer=new r.A({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}),c.defaultWorldOceanServer=new r.A({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"}),c.getDefaultTokenCredit=function(e){if(e===a){if(!(0,o.A)(s)){const e='<b>             This application is using a default ArcGIS access token. Please assign <i>Cesium.ArcGisMapService.defaultAccessToken</i>             with an API key from your ArcGIS Developer account before using the ArcGIS tile services.             You can sign up for a free ArcGIS Developer account at <a href="https://developers.arcgis.com/">https://developers.arcgis.com/</a>.</b>';s=new i.A(e,!0),s._isDefaultToken=!0}return s}};const l=c},355540:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(434067),o=n(41476),r=n(491446),s=n(677354),a=n(769493),c=n(804701),l=n(57775);function u(){this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._ready=!1,this._name="czm_autoexposure",this._logDepthChanged=void 0,this._useLogDepth=void 0,this._framebuffers=void 0,this._previousLuminance=new c.A,this._commands=void 0,this._clearCommand=void 0,this._minMaxLuminance=new i.A,this.enabled=!0,this._enabled=!0,this.minimumLuminance=.1,this.maximumLuminance=10}function d(e){const t=e._framebuffers;if(!(0,r.A)(t))return;const n=t.length;for(let e=0;e<n;++e)t[e].destroy();e._framebuffers=void 0,e._previousLuminance.destroy(),e._previousLuminance=void 0}function h(e){const t=e._commands;if(!(0,r.A)(t))return;const n=t.length;for(let e=0;e<n;++e)t[e].shaderProgram.destroy();e._commands=void 0}function A(e,t){let n;if(0===t)n={colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions}};else{const i=e._framebuffers[t-1].getColorTexture(0);n={colorTexture:function(){return i},colorTextureDimensions:function(){return i.dimensions}}}return n.minMaxLuminance=function(){return e._minMaxLuminance},n.previousLuminance=function(){return e._previousLuminance.getColorTexture(0)},n}function f(e,t){let n="uniform sampler2D colorTexture; \nin vec2 v_textureCoordinates; \nfloat sampleTexture(vec2 offset) { \n";return n+=0===e?"    vec4 color = texture(colorTexture, v_textureCoordinates + offset); \n    return czm_luminance(color.rgb); \n":"    return texture(colorTexture, v_textureCoordinates + offset).r; \n",n+="}\n\n",n+="uniform vec2 colorTextureDimensions; \nuniform vec2 minMaxLuminance; \nuniform sampler2D previousLuminance; \nvoid main() { \n    float color = 0.0; \n    float xStep = 1.0 / colorTextureDimensions.x; \n    float yStep = 1.0 / colorTextureDimensions.y; \n    int count = 0; \n    for (int i = 0; i < 3; ++i) { \n        for (int j = 0; j < 3; ++j) { \n            vec2 offset; \n            offset.x = -xStep + float(i) * xStep; \n            offset.y = -yStep + float(j) * yStep; \n            if (offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0) { \n                continue; \n            } \n            color += sampleTexture(offset); \n            ++count; \n        } \n    } \n    if (count > 0) { \n        color /= float(count); \n    } \n",e===t-1&&(n+="    float previous = texture(previousLuminance, vec2(0.5)).r; \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n    color = previous + (color - previous) / (60.0 * 1.5); \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n"),n+="    out_FragColor = vec4(color); \n} \n",n}Object.defineProperties(u.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},outputTexture:{get:function(){const e=this._framebuffers;if((0,r.A)(e))return e[e.length-1].getColorTexture(0)}}}),u.prototype.clear=function(e){const t=this._framebuffers;if(!(0,r.A)(t))return;let n=this._clearCommand;(0,r.A)(n)||(n=this._clearCommand=new a.A({color:new o.A(0,0,0,0),framebuffer:void 0}));const i=t.length;for(let o=0;o<i;++o)t[o].clear(e,n)},u.prototype.update=function(e){const t=e.drawingBufferWidth,n=e.drawingBufferHeight;t===this._width&&n===this._height||(this._width=t,this._height=n,function(e,t){d(e);let n=e._width,i=e._height;const o=t.halfFloatingPointTexture?l.A.HALF_FLOAT:l.A.FLOAT,r=Math.ceil(Math.log(Math.max(n,i))/Math.log(3)),s=new Array(r);for(let e=0;e<r;++e)n=Math.max(Math.ceil(n/3),1),i=Math.max(Math.ceil(i/3),1),s[e]=new c.A,s[e].update(t,n,i,1,o);const a=s[r-1].getColorTexture(0);e._previousLuminance.update(t,a.width,a.height,1,o),e._framebuffers=s}(this,e),function(e,t){h(e);const n=e._framebuffers,i=n.length,o=new Array(i);for(let r=0;r<i;++r)o[r]=t.createViewportQuadCommand(f(r,i),{framebuffer:n[r].framebuffer,uniformMap:A(e,r)});e._commands=o}(this,e),this._ready||(this._ready=!0)),this._minMaxLuminance.x=this.minimumLuminance,this._minMaxLuminance.y=this.maximumLuminance;const i=this._framebuffers,o=i[i.length-1];i[i.length-1]=this._previousLuminance,this._commands[this._commands.length-1].framebuffer=this._previousLuminance.framebuffer,this._previousLuminance=o},u.prototype.execute=function(e,t){this._colorTexture=t;const n=this._commands;if(!(0,r.A)(n))return;const i=n.length;for(let t=0;t<i;++t)n[t].execute(e)},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return d(this),h(this),(0,s.A)(this)};const p=u},320475:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(367817),r=n(331185),s=n(584164);const a={X:0,Y:1,Z:2};a.Y_UP_TO_Z_UP=s.A.fromRotationTranslation(r.A.fromRotationX(o.A.PI_OVER_TWO)),a.Z_UP_TO_Y_UP=s.A.fromRotationTranslation(r.A.fromRotationX(-o.A.PI_OVER_TWO)),a.X_UP_TO_Z_UP=s.A.fromRotationTranslation(r.A.fromRotationY(-o.A.PI_OVER_TWO)),a.Z_UP_TO_X_UP=s.A.fromRotationTranslation(r.A.fromRotationY(o.A.PI_OVER_TWO)),a.X_UP_TO_Y_UP=s.A.fromRotationTranslation(r.A.fromRotationZ(o.A.PI_OVER_TWO)),a.Y_UP_TO_X_UP=s.A.fromRotationTranslation(r.A.fromRotationZ(-o.A.PI_OVER_TWO)),a.fromName=function(e){return i.A.typeOf.string("name",e),a[e]};const c=Object.freeze(a)},511517:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(419061),r=n(786101),s=n(604752),a=n(123245);const c={};c._deprecationWarning=r.A;const l=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(e,t){const n=(0,o.A)(t,0);i.A.defined("arrayBuffer",e),t=n;const r=new Uint8Array(e),u=new DataView(e);t+=l;const d=u.getUint32(t,!0);if(1!==d)throw new a.A(`Only Batched 3D Model version 1 is supported.  Version ${d} is not.`);t+=l;const h=u.getUint32(t,!0);t+=l;let A=u.getUint32(t,!0);t+=l;let f=u.getUint32(t,!0);t+=l;let p=u.getUint32(t,!0);t+=l;let m,_,g=u.getUint32(t,!0);t+=l,p>=570425344?(t-=2*l,m=A,p=f,g=0,A=0,f=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):g>=570425344&&(t-=l,m=p,p=A,g=f,A=0,f=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")),0===A?_={BATCH_LENGTH:(0,o.A)(m,0)}:(_=(0,s.A)(r,t,A),t+=A);const y=new Uint8Array(e,t,f);let b,v;t+=f,p>0&&(b=(0,s.A)(r,t,p),t+=p,g>0&&(v=new Uint8Array(e,t,g),v=new Uint8Array(v),t+=g));const T=n+h-t;if(0===T)throw new a.A("glTF byte length must be greater than 0.");let w;return t%4==0?w=new Uint8Array(e,t,T):(c._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),w=new Uint8Array(r.subarray(t,t+T))),{batchLength:m,featureTableJson:_,featureTableBinary:y,batchTableJson:b,batchTableBinary:v,gltf:w}};const u=c},744671:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(730839),o=n(369031),r=n(376758),s=n(430346),a=n(571804),c=n(491446),l=n(419061),u=n(605971),d=n(351554),h=n(123245);function A(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,this._byteLength=0,o.A.typeOf.object("options.extension",e.extension),function(e,t,n){let o,r,u;const h=t.instancesLength,A=t.classes;let m,_=t.classIds,g=t.parentCounts,y=t.parentIds,b=h,v=0;if((0,c.A)(_.byteOffset)&&(_.componentType=(0,l.A)(_.componentType,a.A.UNSIGNED_SHORT),_.type=i.A.SCALAR,u=(0,d.A)(_),_=u.createArrayBufferView(n.buffer,n.byteOffset+_.byteOffset,h),v+=_.byteLength),(0,c.A)(g)){for((0,c.A)(g.byteOffset)&&(g.componentType=(0,l.A)(g.componentType,a.A.UNSIGNED_SHORT),g.type=i.A.SCALAR,u=(0,d.A)(g),g=u.createArrayBufferView(n.buffer,n.byteOffset+g.byteOffset,h),v+=g.byteLength),m=new Uint16Array(h),b=0,o=0;o<h;++o)m[o]=b,b+=g[o];v+=m.byteLength}(0,c.A)(y)&&(0,c.A)(y.byteOffset)&&(y.componentType=(0,l.A)(y.componentType,a.A.UNSIGNED_SHORT),y.type=i.A.SCALAR,u=(0,d.A)(y),y=u.createArrayBufferView(n.buffer,n.byteOffset+y.byteOffset,b),v+=y.byteLength);const T=A.length;for(o=0;o<T;++o){const e=A[o].length,t=A[o].instances,i=f(e,t,n);v+=p(i),A[o].instances=(0,s.A)(i,t)}const w=new Array(T).fill(0),E=new Uint16Array(h);for(o=0;o<h;++o)r=_[o],E[o]=w[r],++w[r];v+=E.byteLength,e._classes=A,e._classIds=_,e._classIndexes=E,e._parentCounts=g,e._parentIndexes=m,e._parentIds=y,e._byteLength=v}(this,e.extension,e.binaryBody),function(e){const t=m;t.length=0;const n=e._classIds.length;for(let i=0;i<n;++i)_(e,i,t)}(this)}function f(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const r=t[o],s=r.byteOffset;if((0,c.A)(s)){const t=r.componentType,a=r.type;if(!(0,c.A)(t))throw new h.A("componentType is required.");if(!(0,c.A)(a))throw new h.A("type is required.");if(!(0,c.A)(n))throw new h.A(`Property ${o} requires a batch table binary.`);const l=(0,d.A)(r),u=l.componentsPerAttribute,A=l.classType,f=l.createArrayBufferView(n.buffer,n.byteOffset+s,e);(0,c.A)(i)||(i={}),i[o]={typedArray:f,componentCount:u,type:A}}}return i}function p(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}Object.defineProperties(A.prototype,{byteLength:{get:function(){return this._byteLength}}});const m=[];function _(e,t,n){const i=e._parentCounts,o=e._parentIds,r=e._parentIndexes,s=e._classIds.length;if(!(0,c.A)(o))return;if(t>=s)throw new u.A(`Parent index ${t} exceeds the total number of instances: ${s}`);if(n.indexOf(t)>-1)throw new u.A("Circular dependency detected in the batch table hierarchy.");n.push(t);const a=(0,c.A)(i)?i[t]:1,l=(0,c.A)(i)?r[t]:t;for(let i=0;i<a;++i){const r=o[l+i];r!==t&&_(e,r,n)}n.pop(t)}const g=[],y=[];let b=0;function v(e,t,n){const i=e._parentCounts,o=e._parentIds;return(0,c.A)(o)?(0,c.A)(i)?function(e,t,n){const i=e._classIds,o=e._parentCounts,r=e._parentIds,s=e._parentIndexes,a=i.length,l=g;l.length=Math.max(l.length,a);const u=++b,d=y;for(d.length=0,d.push(t);d.length>0;){if(l[t=d.pop()]===u)continue;l[t]=u;const i=n(e,t);if((0,c.A)(i))return i;const a=o[t],h=s[t];for(let e=0;e<a;++e){const n=r[h+e];n!==t&&d.push(n)}}}(e,t,n):function(e,t,n){let i=!0;for(;i;){const o=n(e,t);if((0,c.A)(o))return o;const r=e._parentIds[t];i=r!==t,t=r}}(e,t,n):n(e,t)}A.prototype.hasProperty=function(e,t){const n=v(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i].instances;if((0,c.A)(o[t]))return!0}));return(0,c.A)(n)},A.prototype.propertyExists=function(e){const t=this._classes,n=t.length;for(let i=0;i<n;++i){const n=t[i].instances;if((0,c.A)(n[e]))return!0}return!1},A.prototype.getPropertyIds=function(e,t){return(t=(0,c.A)(t)?t:[]).length=0,v(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i].instances;for(const e in o)o.hasOwnProperty(e)&&-1===t.indexOf(e)&&t.push(e)})),t},A.prototype.getProperty=function(e,t){return v(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i],s=e._classIndexes[n],a=o.instances[t];if((0,c.A)(a))return(0,c.A)(a.typedArray)?function(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}(a,s):(0,r.A)(a[s],!0)}))},A.prototype.setProperty=function(e,t,n){const i=v(this,e,(function(i,o){const s=i._classIds[o],a=i._classes[s],l=i._classIndexes[o],d=a.instances[t];if((0,c.A)(d)){if(o!==e)throw new u.A(`Inherited property "${t}" is read-only.`);return(0,c.A)(d.typedArray)?function(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}(d,l,n):d[l]=(0,r.A)(n,!0),!0}}));return(0,c.A)(i)},A.prototype.isClass=function(e,t){const n=v(this,e,(function(e,n){const i=e._classIds[n];if(e._classes[i].name===t)return!0}));return(0,c.A)(n)},A.prototype.getClassName=function(e){const t=this._classIds[e];return this._classes[t].name};const T=A},653565:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(434067),o=n(626809),r=n(369031),s=n(41476),a=n(673874),c=n(491446),l=n(677354),u=n(605971),d=n(276904),h=n(430332),A=n(57775),f=n(654799),p=n(616e3);function m(e){r.A.typeOf.number("options.featuresLength",e.featuresLength),r.A.typeOf.object("options.owner",e.owner),this._id=(0,a.A)();const t=e.featuresLength;let n,s;if(this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],t>0){const e=Math.min(t,h.A.maximumTextureSize),r=Math.ceil(t/h.A.maximumTextureSize),a=1/e,c=.5*a,l=1/r,u=.5*l;n=new i.A(e,r),s=new o.A(a,c,l,u)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=s,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}function _(e){const t=e._textureDimensions;return t.x*t.y*4}function g(e){if(!(0,c.A)(e._batchValues)){const t=_(e),n=new Uint8Array(t).fill(255);e._batchValues=n}return e._batchValues}function y(e){if(!(0,c.A)(e._showAlphaProperties)){const t=2*e._featuresLength,n=new Uint8Array(t).fill(255);e._showAlphaProperties=n}return e._showAlphaProperties}function b(e,t){if(!(0,c.A)(e)||e<0||e>=t)throw new u.A(`batchId is required and between zero and featuresLength - 1 (${t}`-NaN)}Object.defineProperties(m.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},byteLength:{get:function(){let e=0;return(0,c.A)(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),(0,c.A)(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}}),m.DEFAULT_COLOR_VALUE=s.A.WHITE,m.DEFAULT_SHOW_VALUE=!0,m.prototype.setShow=function(e,t){if(b(e,this._featuresLength),r.A.typeOf.bool("show",t),t&&!(0,c.A)(this._showAlphaProperties))return;const n=y(this),i=2*e,o=t?255:0;n[i]!==o&&(n[i]=o,g(this)[4*e+3]=t?n[i+1]:0,this._batchValuesDirty=!0)},m.prototype.setAllShow=function(e){r.A.typeOf.bool("show",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)},m.prototype.getShow=function(e){if(b(e,this._featuresLength),!(0,c.A)(this._showAlphaProperties))return!0;const t=2*e;return 255===this._showAlphaProperties[t]};const v=new Array(4);function T(e,t,n){const i=e._textureDimensions;return new p.A({context:t,pixelFormat:d.A.RGBA,pixelDatatype:A.A.UNSIGNED_BYTE,source:{width:i.x,height:i.y,arrayBufferView:n},flipY:!1,sampler:f.A.NEAREST})}m.prototype.setColor=function(e,t){if(b(e,this._featuresLength),r.A.typeOf.object("color",t),s.A.equals(t,m.DEFAULT_COLOR_VALUE)&&!(0,c.A)(this._batchValues))return;const n=t.toBytes(v),i=n[3],o=g(this),a=4*e,l=y(this),u=2*e;if(o[a]!==n[0]||o[a+1]!==n[1]||o[a+2]!==n[2]||l[u+1]!==i){o[a]=n[0],o[a+1]=n[1],o[a+2]=n[2];const r=255!==l[u+1],s=0!==l[u];o[a+3]=s?i:0,l[u+1]=i;const d=255!==i;d&&!r?++this._translucentFeaturesLength:!d&&r&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,(0,c.A)(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}},m.prototype.setAllColor=function(e){r.A.typeOf.object("color",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)},m.prototype.getColor=function(e,t){if(b(e,this._featuresLength),r.A.typeOf.object("result",t),!(0,c.A)(this._batchValues))return s.A.clone(m.DEFAULT_COLOR_VALUE,t);const n=this._batchValues,i=4*e,o=this._showAlphaProperties,a=2*e;return s.A.fromBytes(n[i],n[i+1],n[i+2],o[a+1],t)},m.prototype.getPickColor=function(e){return b(e,this._featuresLength),this._pickIds[e]},m.prototype.update=function(e,t){const n=t.context;this._defaultTexture=n.defaultTexture;const i=t.passes;(i.pick||i.postProcess)&&function(e,t){const n=e._featuresLength;if(!(0,c.A)(e._pickTexture)&&n>0){const i=e._pickIds,o=_(e),r=new Uint8Array(o),a=e._owner,l=e._statistics;for(let e=0;e<n;++e){const n=t.createPickId(a.getFeature(e));i.push(n);const o=n.color,c=4*e;r[c]=s.A.floatToByte(o.red),r[c+1]=s.A.floatToByte(o.green),r[c+2]=s.A.floatToByte(o.blue),r[c+3]=s.A.floatToByte(o.alpha)}e._pickTexture=T(e,t,r),(0,c.A)(l)&&(l.batchTableByteLength+=e._pickTexture.sizeInBytes)}}(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,(0,c.A)(this._batchTexture)||(this._batchTexture=T(this,n,this._batchValues),(0,c.A)(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),function(e){const t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}(this))},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();const e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,l.A)(this)};const w=m},886626:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(303578),o=n(369031),r=n(672743),s=n(419061),a=n(491446),c=n(786101),l=n(955943),u=n(367817),d=n(697422),h=n(744603),A=n(123245),f=n(705302),p=n(41076),m=n(74006),_=n(253478),g=n(553909);function y(e){this.tileWidth=void 0,this.tileHeight=void 0,this.maximumLevel=void 0,this.imageUrlSubdomains=void 0,this.imageUrlTemplate=void 0,this.attributionList=void 0}async function b(e,t,n){const i=e.url;let o=v._metadataCache[i];(0,a.A)(o)||(o=e.fetchJsonp("jsonp"),v._metadataCache[i]=o);try{return function(e,t){if(1!==e.resourceSets.length)throw new A.A("metadata does not specify one resource in resourceSets");const n=e.resourceSets[0].resources[0];t.tileWidth=n.imageWidth,t.tileHeight=n.imageHeight,t.maximumLevel=n.zoomMax-1,t.imageUrlSubdomains=n.imageUrlSubdomains,t.imageUrlTemplate=n.imageUrl,t.attributionList=n.imageryProviders}(await o,t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw(0,a.A)(t)&&(0,a.A)(t.message)&&(i+=`: ${t.message}`),f.A.reportError(void 0,n,(0,a.A)(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new A.A(i)}(e,t,n)}}function v(e){if(e=(0,s.A)(e,s.A.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._mapStyle=(0,s.A)(e.mapStyle,m.A.AERIAL),this._culture=(0,s.A)(e.culture,""),this._key=e.key,this._tileDiscardPolicy=e.tileDiscardPolicy,(0,a.A)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new _.A),this._proxy=e.proxy,this._credit=new r.A(`<a href="https://www.microsoft.com/en-us/maps/product/enduserterms"><img src="${v.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new p.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._attributionList=void 0,this._errorEvent=new l.A,this._ready=!1,(0,a.A)(e.url)){(0,c.A)("BingMapsImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use BingMapsImageryProvider.fromUrl instead."),o.A.defined("options.key",e.key);let t=e.tileProtocol;(0,a.A)(t)?t.length>0&&":"===t[t.length-1]&&(t=t.substr(0,t.length-1)):t="http:"===document.location.protocol?"http":"https";const n=h.A.createIfNeeded(e.url);this._resource=n,n.appendForwardSlash();const i=n.getDerivedResource({url:`REST/v1/Imagery/Metadata/${this._mapStyle}`,queryParameters:{incl:"ImageryProviders",key:e.key,uriScheme:t}}),r=new y(e);this._readyPromise=b(i,r,this).then((()=>(r.build(this),!0)))}}y.prototype.build=function(e){e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,e._imageUrlSubdomains=this.imageUrlSubdomains,e._imageUrlTemplate=this.imageUrlTemplate;let t=e._attributionList=this.attributionList;t||(t=[]),e._attributionList=t;for(let e=0,n=t.length;e<n;++e){const n=t[e];if(n.credit instanceof r.A)break;n.credit=new r.A(n.attribution);const i=n.coverageAreas;for(let e=0,t=n.coverageAreas.length;e<t;++e){const t=i[e],n=t.bbox;t.bbox=new d.A(u.A.toRadians(n[1]),u.A.toRadians(n[0]),u.A.toRadians(n[3]),u.A.toRadians(n[2]))}}e._ready=!0},Object.defineProperties(v.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,c.A)("BingMapsImageryProvider.ready","BingMapsImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use BingMapsImageryProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,c.A)("BingMapsImageryProvider.readyPromise","BingMapsImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use BingMapsImageryProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}},defaultAlpha:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultAlpha","BingMapsImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultAlpha","BingMapsImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultNightAlpha","BingMapsImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultNightAlpha","BingMapsImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultDayAlpha","BingMapsImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultDayAlpha","BingMapsImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultBrightness","BingMapsImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultBrightness","BingMapsImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultContrast","BingMapsImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultContrast","BingMapsImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultHue","BingMapsImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultHue","BingMapsImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultSaturation","BingMapsImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultSaturation","BingMapsImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultGamma","BingMapsImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultGamma","BingMapsImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultMinificationFilter","BingMapsImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultMinificationFilter","BingMapsImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,c.A)("BingMapsImageryProvider.defaultMagnificationFilter","BingMapsImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,c.A)("BingMapsImageryProvider.defaultMagnificationFilter","BingMapsImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),v.fromUrl=async function(e,t){t=(0,s.A)(t,s.A.EMPTY_OBJECT),o.A.defined("url",e),o.A.defined("options.key",t.key);let n=t.tileProtocol;(0,a.A)(n)?n.length>0&&":"===n[n.length-1]&&(n=n.substr(0,n.length-1)):n="http:"===document.location.protocol?"http":"https";const i=(0,s.A)(t.mapStyle,m.A.AERIAL),r=h.A.createIfNeeded(e);r.appendForwardSlash();const c=r.getDerivedResource({url:`REST/v1/Imagery/Metadata/${i}`,queryParameters:{incl:"ImageryProviders",key:t.key,uriScheme:n}}),l=new v(t);l._resource=r;const u=new y(t);return await b(c,u),u.build(l),l._readyPromise=Promise.resolve(!0),l};const T=new d.A;v.prototype.getTileCredits=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(e,t,n,T),o=function(e,t,n){++t;const i=[];for(let o=0,r=e.length;o<r;++o){const r=e[o],s=r.coverageAreas;let c=!1;for(let e=0,i=r.coverageAreas.length;!c&&e<i;++e){const i=s[e];if(t>=i.zoomMin&&t<=i.zoomMax){const e=d.A.intersection(n,i.bbox,w);(0,a.A)(e)&&(c=!0)}}c&&i.push(r.credit)}return i}(this._attributionList,n,i);return o},v.prototype.requestImage=function(e,t,n,i){const o=g.A.loadImage(this,function(e,t,n,i,o){const r=e._imageUrlTemplate,s=e._imageUrlSubdomains,a=(t+n+i)%s.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:v.tileXYToQuadKey(t,n,i),subdomain:s[a],culture:e._culture},queryParameters:{n:"z"}})}(this,e,t,n,i));if((0,a.A)(o))return o.catch((function(e){return(0,a.A)(e.blob)&&0===e.blob.size?_.A.EMPTY_IMAGE:Promise.reject(e)}))},v.prototype.pickFeatures=function(e,t,n,i,o){},v.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){const n=1<<o;let r=0;e&n&&(r|=1),t&n&&(r|=2),i+=r}return i},v.quadKeyToTileXY=function(e){let t=0,n=0;const i=e.length-1;for(let o=i;o>=0;--o){const r=1<<o,s=+e[i-o];1&s&&(t|=r),2&s&&(n|=r)}return{x:t,y:n,level:i}},v._logoUrl=void 0,Object.defineProperties(v,{logoUrl:{get:function(){return(0,a.A)(v._logoUrl)||(v._logoUrl=(0,i.A)("Assets/Images/bing_maps_credit.png")),v._logoUrl},set:function(e){o.A.defined("value",e),v._logoUrl=e}}});const w=new d.A;v._metadataCache={};const E=v},74006:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"})},691302:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(647934),o=n(491446),r=n(677354),s=n(276904),a=n(483128),c=n(57775),l=n(40118),u=n(654799),d=n(616e3),h=n(562523);function A(){this._colorTexture=void 0,this._drawCommand=void 0}Object.defineProperties(A.prototype,{colorTexture:{get:function(){return this._colorTexture}}}),A.prototype.update=function(e){if(!(0,o.A)(this._colorTexture)){const t=e.context,n=new d.A({context:t,width:256,height:256,pixelFormat:s.A.RGBA,pixelDatatype:c.A.UNSIGNED_BYTE,sampler:u.A.NEAREST});this._colorTexture=n;const o=new a.A({context:t,colorTextures:[n],destroyAttachments:!1});!function(e,t,n){const o=t.createViewportQuadCommand(h.A,{framebuffer:n,renderState:l.A.fromCache({viewport:new i.A(0,0,256,256)})});e._drawCommand=o}(this,t,o),this._drawCommand.execute(t),o.destroy(),this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()}},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this._colorTexture=this._colorTexture&&this._colorTexture.destroy(),(0,r.A)(this)};const f=A},452663:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(419061),o=n(491446),r=n(605971),s=n(569445),a=n(48660);function c(e){const t=(e=(0,i.A)(e,i.A.EMPTY_OBJECT)).typedArray,n=e.resource,s=e.cacheKey;if((0,o.A)(t)===(0,o.A)(n))throw new r.A("One of options.typedArray and options.resource must be defined.");this._typedArray=t,this._resource=n,this._cacheKey=s,this._state=a.A.UNLOADED,this._promise=void 0}(0,o.A)(Object.create)&&(c.prototype=Object.create(s.A.prototype),c.prototype.constructor=c),Object.defineProperties(c.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),c.prototype.load=async function(){return(0,o.A)(this._promise)?this._promise:(0,o.A)(this._typedArray)?(this._promise=Promise.resolve(this),this._promise):(this._promise=async function(e){const t=e._resource;e._state=a.A.LOADING;try{const n=await c._fetchArrayBuffer(t);if(e.isDestroyed())return;return e._typedArray=new Uint8Array(n),e._state=a.A.READY,e}catch(n){if(e.isDestroyed())return;e._state=a.A.FAILED;const i=`Failed to load external buffer: ${t.url}`;throw e.getError(i,n)}}(this),this._promise)},c._fetchArrayBuffer=function(e){return e.fetchArrayBuffer()},c.prototype.unload=function(){this._typedArray=void 0};const l=c},635577:(e,t,n)=>{"use strict";n.d(t,{A:()=>Bt});var i=n(660662),o=n(434067),r=n(267980),s=n(626809),a=n(336946),c=n(419061),l=n(491446),u=n(605971),d=n(924290),h=n(610750),A=n(602289),f=n(955943),p=n(230259),m=n(805746),_=n(953612),g=n(647326),y=n(150429),b=n(367817),v=n(331185),T=n(584164),w=n(811203),E=n(65891),S=n(666775),C=n(99479),x=n(766067),I=n(697422),P=n(543622),D=n(625224),O=n(77879),L=n(62467);function N(e){if(!(0,l.A)(e))throw new u.A("scene is required.");this._scene=e,this._transform=T.A.clone(T.A.IDENTITY),this._invTransform=T.A.clone(T.A.IDENTITY),this._actualTransform=T.A.clone(T.A.IDENTITY),this._actualInvTransform=T.A.clone(T.A.IDENTITY),this._transformChanged=!1,this.position=new r.A,this._position=new r.A,this._positionWC=new r.A,this._positionCartographic=new a.A,this._oldPositionWC=void 0,this.positionWCDeltaMagnitude=0,this.positionWCDeltaMagnitudeLastFrame=0,this.timeSinceMoved=0,this._lastMovedTimestamp=0,this.direction=new r.A,this._direction=new r.A,this._directionWC=new r.A,this.up=new r.A,this._up=new r.A,this._upWC=new r.A,this.right=new r.A,this._right=new r.A,this._rightWC=new r.A,this.frustum=new S.A,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=b.A.toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumZoomFactor=1.5,this._moveStart=new f.A,this._moveEnd=new f.A,this._changed=new f.A,this._changedPosition=void 0,this._changedDirection=void 0,this._changedFrustum=void 0,this._changedHeading=void 0,this.percentageChanged=.5,this._viewMatrix=new T.A,this._invViewMatrix=new T.A,M(this),this._mode=L.A.SCENE3D,this._modeChanged=!0;const t=e.mapProjection;this._projection=t,this._maxCoord=t.project(new a.A(Math.PI,b.A.PI_OVER_TWO)),this._max2Dfrustum=void 0,Qe(this,N.DEFAULT_VIEW_RECTANGLE,this.position,!0);let n=r.A.magnitude(this.position);n+=n*N.DEFAULT_VIEW_FACTOR,r.A.normalize(this.position,this.position),r.A.multiplyByScalar(this.position,n,this.position)}function M(e){T.A.computeView(e._position,e._direction,e._up,e._right,e._viewMatrix),T.A.multiply(e._viewMatrix,e._actualInvTransform,e._viewMatrix),T.A.inverseTransformation(e._viewMatrix,e._invViewMatrix)}N.TRANSFORM_2D=new T.A(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),N.TRANSFORM_2D_INVERSE=T.A.inverseTransformation(N.TRANSFORM_2D,new T.A),N.DEFAULT_VIEW_RECTANGLE=I.A.fromDegrees(-95,-20,-70,90),N.DEFAULT_VIEW_FACTOR=.5,N.DEFAULT_OFFSET=new m.A(0,-b.A.PI_OVER_FOUR,0),N.prototype.canPreloadFlight=function(){return(0,l.A)(this._currentFlight)&&this._mode!==L.A.SCENE2D},N.prototype._updateCameraChanged=function(){const e=this;if(function(e){if((0,l.A)(e._oldPositionWC)){e.positionWCDeltaMagnitudeLastFrame=e.positionWCDeltaMagnitude;const t=r.A.subtract(e.positionWC,e._oldPositionWC,e._oldPositionWC);e.positionWCDeltaMagnitude=r.A.magnitude(t),e._oldPositionWC=r.A.clone(e.positionWC,e._oldPositionWC),e.positionWCDeltaMagnitude>0?(e.timeSinceMoved=0,e._lastMovedTimestamp=(0,p.A)()):e.timeSinceMoved=Math.max((0,p.A)()-e._lastMovedTimestamp,0)/1e3}else e._oldPositionWC=r.A.clone(e.positionWC,e._oldPositionWC)}(e),0===e._changed.numberOfListeners)return;const t=e.percentageChanged,n=e.heading;(0,l.A)(e._changedHeading)||(e._changedHeading=n);let i=Math.abs(e._changedHeading-n)%b.A.TWO_PI;i=i>b.A.PI?b.A.TWO_PI-i:i;const o=i/Math.PI;if(o>t&&(e._changed.raiseEvent(o),e._changedHeading=n),e._mode===L.A.SCENE2D){if(!(0,l.A)(e._changedFrustum))return e._changedPosition=r.A.clone(e.position,e._changedPosition),void(e._changedFrustum=e.frustum.clone());const n=e.position,i=e._changedPosition,o=e.frustum,s=e._changedFrustum,a=n.x+o.left,c=n.x+o.right,u=i.x+s.left,d=i.x+s.right,h=n.y+o.bottom,A=n.y+o.top,f=i.y+s.bottom,p=i.y+s.top,m=Math.max(a,u),_=Math.min(c,d),g=Math.max(h,f),y=Math.min(A,p);let b;if(m>=_||g>=A)b=1;else{let e=s;a<u&&c>d&&h<f&&A>p&&(e=o),b=1-(_-m)*(y-g)/((e.right-e.left)*(e.top-e.bottom))}return void(b>t&&(e._changed.raiseEvent(b),e._changedPosition=r.A.clone(e.position,e._changedPosition),e._changedFrustum=e.frustum.clone(e._changedFrustum)))}if(!(0,l.A)(e._changedDirection))return e._changedPosition=r.A.clone(e.positionWC,e._changedPosition),void(e._changedDirection=r.A.clone(e.directionWC,e._changedDirection));const s=b.A.acosClamped(r.A.dot(e.directionWC,e._changedDirection));let a;a=(0,l.A)(e.frustum.fovy)?s/(.5*e.frustum.fovy):s;const c=r.A.distance(e.positionWC,e._changedPosition)/e.positionCartographic.height;(a>t||c>t)&&(e._changed.raiseEvent(Math.max(a,c)),e._changedPosition=r.A.clone(e.positionWC,e._changedPosition),e._changedDirection=r.A.clone(e.directionWC,e._changedDirection))};const R=new a.A,F=new r.A,B=new r.A,U=new s.A,k=new s.A,V=new s.A,H=new s.A,z=new s.A,G=new r.A;function j(e){const t=e._mode;let n=!1,i=0;t===L.A.SCENE2D&&(i=e.frustum.right-e.frustum.left,n=i!==e._positionCartographic.height);let o=e._position;const a=!r.A.equals(o,e.position)||n;a&&(o=r.A.clone(e.position,e._position));let c=e._direction;const l=!r.A.equals(c,e.direction);l&&(r.A.normalize(e.direction,e.direction),c=r.A.clone(e.direction,e._direction));let u=e._up;const d=!r.A.equals(u,e.up);d&&(r.A.normalize(e.up,e.up),u=r.A.clone(e.up,e._up));let h=e._right;const A=!r.A.equals(h,e.right);A&&(r.A.normalize(e.right,e.right),h=r.A.clone(e.right,e._right));const f=e._transformChanged||e._modeChanged;e._transformChanged=!1,f&&(T.A.inverseTransformation(e._transform,e._invTransform),e._mode===L.A.COLUMBUS_VIEW||e._mode===L.A.SCENE2D?T.A.equals(T.A.IDENTITY,e._transform)?T.A.clone(N.TRANSFORM_2D,e._actualTransform):e._mode===L.A.COLUMBUS_VIEW?function(e){P.A.basisTo2D(e._projection,e._transform,e._actualTransform)}(e):function(e){const t=e._projection,n=t.ellipsoid,i=T.A.getColumn(e._transform,3,U),o=n.cartesianToCartographic(i,R),a=t.project(o,F),c=k;c.x=a.z,c.y=a.x,c.z=a.y,c.w=1;const l=s.A.clone(s.A.UNIT_X,z),u=s.A.add(T.A.getColumn(e._transform,0,B),i,B);n.cartesianToCartographic(u,o),t.project(o,a);const d=V;d.x=a.z,d.y=a.x,d.z=a.y,d.w=0,r.A.subtract(d,c,d),d.x=0;const h=H;if(r.A.magnitudeSquared(d)>b.A.EPSILON10)r.A.cross(l,d,h);else{const l=s.A.add(T.A.getColumn(e._transform,1,B),i,B);n.cartesianToCartographic(l,o),t.project(o,a),h.x=a.z,h.y=a.x,h.z=a.y,h.w=0,r.A.subtract(h,c,h),h.x=0,r.A.magnitudeSquared(h)<b.A.EPSILON10&&(s.A.clone(s.A.UNIT_Y,d),s.A.clone(s.A.UNIT_Z,h))}r.A.cross(h,l,d),r.A.normalize(d,d),r.A.cross(l,d,h),r.A.normalize(h,h),T.A.setColumn(e._actualTransform,0,d,e._actualTransform),T.A.setColumn(e._actualTransform,1,h,e._actualTransform),T.A.setColumn(e._actualTransform,2,l,e._actualTransform),T.A.setColumn(e._actualTransform,3,c,e._actualTransform)}(e):T.A.clone(e._transform,e._actualTransform),T.A.inverseTransformation(e._actualTransform,e._actualInvTransform),e._modeChanged=!1);const p=e._actualTransform;if(a||f)if(e._positionWC=T.A.multiplyByPoint(p,o,e._positionWC),t===L.A.SCENE3D||t===L.A.MORPHING)e._positionCartographic=e._projection.ellipsoid.cartesianToCartographic(e._positionWC,e._positionCartographic);else{const n=G;n.x=e._positionWC.y,n.y=e._positionWC.z,n.z=e._positionWC.x,t===L.A.SCENE2D&&(n.z=i),e._projection.unproject(n,e._positionCartographic)}if(l||d||A){const t=r.A.dot(c,r.A.cross(u,h,G));if(Math.abs(1-t)>b.A.EPSILON2){const t=1/r.A.magnitudeSquared(u),n=r.A.dot(u,c)*t,i=r.A.multiplyByScalar(c,n,G);u=r.A.normalize(r.A.subtract(u,i,e._up),e._up),r.A.clone(u,e.up),h=r.A.cross(c,u,e._right),r.A.clone(h,e.right)}}(l||f)&&(e._directionWC=T.A.multiplyByPointAsVector(p,c,e._directionWC),r.A.normalize(e._directionWC,e._directionWC)),(d||f)&&(e._upWC=T.A.multiplyByPointAsVector(p,u,e._upWC),r.A.normalize(e._upWC,e._upWC)),(A||f)&&(e._rightWC=T.A.multiplyByPointAsVector(p,h,e._rightWC),r.A.normalize(e._rightWC,e._rightWC)),(a||l||d||A||f)&&M(e)}function W(e,t){let n;return n=b.A.equalsEpsilon(Math.abs(e.z),1,b.A.EPSILON3)?Math.atan2(t.y,t.x)-b.A.PI_OVER_TWO:Math.atan2(e.y,e.x)-b.A.PI_OVER_TWO,b.A.TWO_PI-b.A.zeroToTwoPi(n)}function q(e){return b.A.PI_OVER_TWO-b.A.acosClamped(e.z)}function Y(e,t,n){let i=0;return b.A.equalsEpsilon(Math.abs(e.z),1,b.A.EPSILON3)||(i=Math.atan2(-n.z,t.z),i=b.A.zeroToTwoPi(i+b.A.TWO_PI)),i}const X=new T.A,J=new T.A;Object.defineProperties(N.prototype,{transform:{get:function(){return this._transform}},inverseTransform:{get:function(){return j(this),this._invTransform}},viewMatrix:{get:function(){return j(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return j(this),this._invViewMatrix}},positionCartographic:{get:function(){return j(this),this._positionCartographic}},positionWC:{get:function(){return j(this),this._positionWC}},directionWC:{get:function(){return j(this),this._directionWC}},upWC:{get:function(){return j(this),this._upWC}},rightWC:{get:function(){return j(this),this._rightWC}},heading:{get:function(){if(this._mode!==L.A.MORPHING){const e=this._projection.ellipsoid,t=T.A.clone(this._transform,X),n=P.A.eastNorthUpToFixedFrame(this.positionWC,e,J);this._setTransform(n);const i=W(this.direction,this.up);return this._setTransform(t),i}}},pitch:{get:function(){if(this._mode!==L.A.MORPHING){const e=this._projection.ellipsoid,t=T.A.clone(this._transform,X),n=P.A.eastNorthUpToFixedFrame(this.positionWC,e,J);this._setTransform(n);const i=q(this.direction);return this._setTransform(t),i}}},roll:{get:function(){if(this._mode!==L.A.MORPHING){const e=this._projection.ellipsoid,t=T.A.clone(this._transform,X),n=P.A.eastNorthUpToFixedFrame(this.positionWC,e,J);this._setTransform(n);const i=Y(this.direction,this.up,this.right);return this._setTransform(t),i}}},moveStart:{get:function(){return this._moveStart}},moveEnd:{get:function(){return this._moveEnd}},changed:{get:function(){return this._changed}}}),N.prototype.update=function(e){if(!(0,l.A)(e))throw new u.A("mode is required.");if(e===L.A.SCENE2D&&!(this.frustum instanceof E.A))throw new u.A("An OrthographicOffCenterFrustum is required in 2D.");if(!(e!==L.A.SCENE3D&&e!==L.A.COLUMBUS_VIEW||this.frustum instanceof S.A||this.frustum instanceof w.A))throw new u.A("A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view");let t=!1;if(e!==this._mode&&(this._mode=e,this._modeChanged=e!==L.A.MORPHING,t=this._mode===L.A.SCENE2D),t){const e=this._max2Dfrustum=this.frustum.clone();if(!(e instanceof E.A))throw new u.A("The camera frustum is expected to be orthographic for 2D camera control.");const t=2,n=e.top/e.right;e.right=this._maxCoord.x*t,e.left=-e.right,e.top=n*e.right,e.bottom=-e.top}this._mode===L.A.SCENE2D&&_e(this,this.position)};const Q=new r.A,$=new r.A,K=new r.A;N.prototype._setTransform=function(e){const t=r.A.clone(this.positionWC,Q),n=r.A.clone(this.upWC,$),i=r.A.clone(this.directionWC,K);T.A.clone(e,this._transform),this._transformChanged=!0,j(this);const o=this._actualInvTransform;T.A.multiplyByPoint(o,t,this.position),T.A.multiplyByPointAsVector(o,i,this.direction),T.A.multiplyByPointAsVector(o,n,this.up),r.A.cross(this.direction,this.up,this.right),j(this)};const Z=new o.A,ee=new x.A,te=new r.A,ne=new r.A;function ie(e){if(!T.A.equals(T.A.IDENTITY,e.transform))return r.A.magnitude(e.position);const t=e._scene,n=t.globe,i=Z;let o,s,a;if(i.x=t.drawingBufferWidth/2,i.y=t.drawingBufferHeight/2,(0,l.A)(n)){const r=e.getPickRay(i,ee);o=n.pickWorldCoordinates(r,t,!0,te)}if(t.pickPositionSupported&&(s=t.pickPositionWorldCoordinates(i,ne)),(0,l.A)(o)||(0,l.A)(s)){const t=(0,l.A)(s)?r.A.distance(s,e.positionWC):Number.POSITIVE_INFINITY,n=(0,l.A)(o)?r.A.distance(o,e.positionWC):Number.POSITIVE_INFINITY;a=Math.min(t,n)}else a=Math.max(e.positionCartographic.height,0);return a}N.prototype._adjustOrthographicFrustum=function(e){this.frustum instanceof w.A&&(!e&&this._positionCartographic.height<15e4||(this.frustum.width=ie(this)))};const oe=new r.A,re=new T.A,se=new T.A,ae=new C.A,ce=new v.A,le=new a.A,ue=new r.A,de=new r.A,he=new r.A;function Ae(e,t,n,i){const o=r.A.clone(n.direction,ue),s=r.A.clone(n.up,de);if(e._scene.mode===L.A.SCENE3D){const n=e._projection.ellipsoid,i=P.A.eastNorthUpToFixedFrame(t,n,X),r=T.A.inverseTransformation(i,J);T.A.multiplyByPointAsVector(r,o,o),T.A.multiplyByPointAsVector(r,s,s)}const a=r.A.cross(o,s,he);return i.heading=W(o,s),i.pitch=q(o),i.roll=Y(o,s,a),i}const fe={destination:void 0,orientation:{direction:void 0,up:void 0,heading:void 0,pitch:void 0,roll:void 0},convert:void 0,endTransform:void 0},pe=new _.A;N.prototype.setView=function(e){e=(0,c.A)(e,c.A.EMPTY_OBJECT);let t=(0,c.A)(e.orientation,c.A.EMPTY_OBJECT);const n=this._mode;if(n===L.A.MORPHING)return;(0,l.A)(e.endTransform)&&this._setTransform(e.endTransform);let i=(0,c.A)(e.convert,!0),s=(0,c.A)(e.destination,r.A.clone(this.positionWC,oe));(0,l.A)(s)&&(0,l.A)(s.west)&&(s=this.getRectangleCameraCoordinates(s,oe),i=!1),(0,l.A)(t.direction)&&(t=Ae(this,s,t,fe.orientation)),pe.heading=(0,c.A)(t.heading,0),pe.pitch=(0,c.A)(t.pitch,-b.A.PI_OVER_TWO),pe.roll=(0,c.A)(t.roll,0),n===L.A.SCENE3D?function(e,t,n){const i=T.A.clone(e.transform,re),o=P.A.eastNorthUpToFixedFrame(t,e._projection.ellipsoid,se);e._setTransform(o),r.A.clone(r.A.ZERO,e.position),n.heading=n.heading-b.A.PI_OVER_TWO;const s=C.A.fromHeadingPitchRoll(n,ae),a=v.A.fromQuaternion(s,ce);v.A.getColumn(a,0,e.direction),v.A.getColumn(a,2,e.up),r.A.cross(e.direction,e.up,e.right),e._setTransform(i),e._adjustOrthographicFrustum(!0)}(this,s,pe):n===L.A.SCENE2D?function(e,t,n,i){const s=T.A.clone(e.transform,re);if(e._setTransform(T.A.IDENTITY),!r.A.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,le);t=n.project(i,oe)}o.A.clone(t,e.position);const n=.5*-t.z,r=-n,s=e.frustum;if(r>n){const e=s.top/s.right;s.right=r,s.left=n,s.top=s.right*e,s.bottom=-s.top}}if(e._scene.mapMode2D===O.A.ROTATE){n.heading=n.heading-b.A.PI_OVER_TWO,n.pitch=-b.A.PI_OVER_TWO,n.roll=0;const t=C.A.fromHeadingPitchRoll(n,ae),i=v.A.fromQuaternion(t,ce);v.A.getColumn(i,2,e.up),r.A.cross(e.direction,e.up,e.right)}e._setTransform(s)}(this,s,pe,i):function(e,t,n,i){const o=T.A.clone(e.transform,re);if(e._setTransform(T.A.IDENTITY),!r.A.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,le);t=n.project(i,oe)}r.A.clone(t,e.position)}n.heading=n.heading-b.A.PI_OVER_TWO;const s=C.A.fromHeadingPitchRoll(n,ae),a=v.A.fromQuaternion(s,ce);v.A.getColumn(a,0,e.direction),v.A.getColumn(a,2,e.up),r.A.cross(e.direction,e.up,e.right),e._setTransform(o),e._adjustOrthographicFrustum(!0)}(this,s,pe,i)};const me=new r.A;function _e(e,t){const n=e._scene.mapMode2D===O.A.ROTATE,i=e._maxCoord.x,o=e._maxCoord.y;let r,s;n?(s=i,r=-s):(s=t.x-2*i,r=t.x+2*i),t.x>i&&(t.x=s),t.x<-i&&(t.x=r),t.y>o&&(t.y=o),t.y<-o&&(t.y=-o)}N.prototype.flyHome=function(e){const t=this._mode;if(t===L.A.MORPHING&&this._scene.completeMorph(),t===L.A.SCENE2D)this.flyTo({destination:N.DEFAULT_VIEW_RECTANGLE,duration:e,endTransform:T.A.IDENTITY});else if(t===L.A.SCENE3D){const t=this.getRectangleCameraCoordinates(N.DEFAULT_VIEW_RECTANGLE);let n=r.A.magnitude(t);n+=n*N.DEFAULT_VIEW_FACTOR,r.A.normalize(t,t),r.A.multiplyByScalar(t,n,t),this.flyTo({destination:t,duration:e,endTransform:T.A.IDENTITY})}else if(t===L.A.COLUMBUS_VIEW){const t=this._projection.ellipsoid.maximumRadius;let n=new r.A(0,-1,1);n=r.A.multiplyByScalar(r.A.normalize(n,n),5*t,n),this.flyTo({destination:n,duration:e,orientation:{heading:0,pitch:-Math.acos(r.A.normalize(n,me).z),roll:0},endTransform:T.A.IDENTITY,convert:!1})}},N.prototype.worldToCameraCoordinates=function(e,t){if(!(0,l.A)(e))throw new u.A("cartesian is required.");return(0,l.A)(t)||(t=new s.A),j(this),T.A.multiplyByVector(this._actualInvTransform,e,t)},N.prototype.worldToCameraCoordinatesPoint=function(e,t){if(!(0,l.A)(e))throw new u.A("cartesian is required.");return(0,l.A)(t)||(t=new r.A),j(this),T.A.multiplyByPoint(this._actualInvTransform,e,t)},N.prototype.worldToCameraCoordinatesVector=function(e,t){if(!(0,l.A)(e))throw new u.A("cartesian is required.");return(0,l.A)(t)||(t=new r.A),j(this),T.A.multiplyByPointAsVector(this._actualInvTransform,e,t)},N.prototype.cameraToWorldCoordinates=function(e,t){if(!(0,l.A)(e))throw new u.A("cartesian is required.");return(0,l.A)(t)||(t=new s.A),j(this),T.A.multiplyByVector(this._actualTransform,e,t)},N.prototype.cameraToWorldCoordinatesPoint=function(e,t){if(!(0,l.A)(e))throw new u.A("cartesian is required.");return(0,l.A)(t)||(t=new r.A),j(this),T.A.multiplyByPoint(this._actualTransform,e,t)},N.prototype.cameraToWorldCoordinatesVector=function(e,t){if(!(0,l.A)(e))throw new u.A("cartesian is required.");return(0,l.A)(t)||(t=new r.A),j(this),T.A.multiplyByPointAsVector(this._actualTransform,e,t)};const ge=new r.A;N.prototype.move=function(e,t){if(!(0,l.A)(e))throw new u.A("direction is required.");const n=this.position;r.A.multiplyByScalar(e,t,ge),r.A.add(n,ge,n),this._mode===L.A.SCENE2D&&_e(this,n),this._adjustOrthographicFrustum(!0)},N.prototype.moveForward=function(e){e=(0,c.A)(e,this.defaultMoveAmount),this._mode===L.A.SCENE2D?Pe(this,e):this.move(this.direction,e)},N.prototype.moveBackward=function(e){e=(0,c.A)(e,this.defaultMoveAmount),this._mode===L.A.SCENE2D?Pe(this,-e):this.move(this.direction,-e)},N.prototype.moveUp=function(e){e=(0,c.A)(e,this.defaultMoveAmount),this.move(this.up,e)},N.prototype.moveDown=function(e){e=(0,c.A)(e,this.defaultMoveAmount),this.move(this.up,-e)},N.prototype.moveRight=function(e){e=(0,c.A)(e,this.defaultMoveAmount),this.move(this.right,e)},N.prototype.moveLeft=function(e){e=(0,c.A)(e,this.defaultMoveAmount),this.move(this.right,-e)},N.prototype.lookLeft=function(e){e=(0,c.A)(e,this.defaultLookAmount),this._mode!==L.A.SCENE2D&&this.look(this.up,-e)},N.prototype.lookRight=function(e){e=(0,c.A)(e,this.defaultLookAmount),this._mode!==L.A.SCENE2D&&this.look(this.up,e)},N.prototype.lookUp=function(e){e=(0,c.A)(e,this.defaultLookAmount),this._mode!==L.A.SCENE2D&&this.look(this.right,-e)},N.prototype.lookDown=function(e){e=(0,c.A)(e,this.defaultLookAmount),this._mode!==L.A.SCENE2D&&this.look(this.right,e)};const ye=new C.A,be=new v.A;N.prototype.look=function(e,t){if(!(0,l.A)(e))throw new u.A("axis is required.");const n=(0,c.A)(t,this.defaultLookAmount),i=C.A.fromAxisAngle(e,-n,ye),o=v.A.fromQuaternion(i,be),r=this.direction,s=this.up,a=this.right;v.A.multiplyByVector(o,r,r),v.A.multiplyByVector(o,s,s),v.A.multiplyByVector(o,a,a)},N.prototype.twistLeft=function(e){e=(0,c.A)(e,this.defaultLookAmount),this.look(this.direction,e)},N.prototype.twistRight=function(e){e=(0,c.A)(e,this.defaultLookAmount),this.look(this.direction,-e)};const ve=new C.A,Te=new v.A;N.prototype.rotate=function(e,t){if(!(0,l.A)(e))throw new u.A("axis is required.");const n=(0,c.A)(t,this.defaultRotateAmount),i=C.A.fromAxisAngle(e,-n,ve),o=v.A.fromQuaternion(i,Te);v.A.multiplyByVector(o,this.position,this.position),v.A.multiplyByVector(o,this.direction,this.direction),v.A.multiplyByVector(o,this.up,this.up),r.A.cross(this.direction,this.up,this.right),r.A.cross(this.right,this.direction,this.up),this._adjustOrthographicFrustum(!1)},N.prototype.rotateDown=function(e){xe(this,e=(0,c.A)(e,this.defaultRotateAmount))},N.prototype.rotateUp=function(e){xe(this,-(e=(0,c.A)(e,this.defaultRotateAmount)))};const we=new r.A,Ee=new r.A,Se=new r.A,Ce=new r.A;function xe(e,t){const n=e.position;if((0,l.A)(e.constrainedAxis)&&!r.A.equalsEpsilon(e.position,r.A.ZERO,b.A.EPSILON2)){const i=r.A.normalize(n,we),o=r.A.equalsEpsilon(i,e.constrainedAxis,b.A.EPSILON2),s=r.A.equalsEpsilon(i,r.A.negate(e.constrainedAxis,Ce),b.A.EPSILON2);if(o||s)(o&&t<0||s&&t>0)&&e.rotate(e.right,t);else{const n=r.A.normalize(e.constrainedAxis,Ee);let o=r.A.dot(i,n),s=b.A.acosClamped(o);t>0&&t>s&&(t=s-b.A.EPSILON4),o=r.A.dot(i,r.A.negate(n,Ce)),s=b.A.acosClamped(o),t<0&&-t>s&&(t=-s+b.A.EPSILON4);const a=r.A.cross(n,i,Se);e.rotate(a,t)}}else e.rotate(e.right,t)}function Ie(e,t){(0,l.A)(e.constrainedAxis)?e.rotate(e.constrainedAxis,t):e.rotate(e.up,t)}function Pe(e,t){const n=e.frustum;if(!(n instanceof E.A&&(0,l.A)(n.left)&&(0,l.A)(n.right)&&(0,l.A)(n.bottom)&&(0,l.A)(n.top)))throw new u.A("The camera frustum is expected to be orthographic for 2D camera control.");let i;if(t*=.5,Math.abs(n.top)+Math.abs(n.bottom)>Math.abs(n.left)+Math.abs(n.right)){let o=n.top-t,r=n.bottom+t,s=e._maxCoord.y;e._scene.mapMode2D===O.A.ROTATE&&(s*=e.maximumZoomFactor),r>s&&(r=s,o=-s),o<=r&&(o=1,r=-1),i=n.right/n.top,n.top=o,n.bottom=r,n.right=n.top*i,n.left=-n.right}else{let o=n.right-t,r=n.left+t,s=e._maxCoord.x;e._scene.mapMode2D===O.A.ROTATE&&(s*=e.maximumZoomFactor),o>s&&(o=s,r=-s),o<=r&&(o=1,r=-1),i=n.top/n.right,n.right=o,n.left=r,n.top=n.right*i,n.bottom=-n.top}}function De(e,t){e.move(e.direction,t)}N.prototype.rotateRight=function(e){Ie(this,-(e=(0,c.A)(e,this.defaultRotateAmount)))},N.prototype.rotateLeft=function(e){Ie(this,e=(0,c.A)(e,this.defaultRotateAmount))},N.prototype.zoomIn=function(e){e=(0,c.A)(e,this.defaultZoomAmount),this._mode===L.A.SCENE2D?Pe(this,e):De(this,e)},N.prototype.zoomOut=function(e){e=(0,c.A)(e,this.defaultZoomAmount),this._mode===L.A.SCENE2D?Pe(this,-e):De(this,-e)},N.prototype.getMagnitude=function(){return this._mode===L.A.SCENE3D?r.A.magnitude(this.position):this._mode===L.A.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===L.A.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0};const Oe=new T.A;N.prototype.lookAt=function(e,t){if(!(0,l.A)(e))throw new u.A("target is required");if(!(0,l.A)(t))throw new u.A("offset is required");if(this._mode===L.A.MORPHING)throw new u.A("lookAt is not supported while morphing.");const n=P.A.eastNorthUpToFixedFrame(e,h.A.WGS84,Oe);this.lookAtTransform(n,t)};const Le=new r.A,Ne=new C.A,Me=new C.A,Re=new v.A;function Fe(e,t,n){t=b.A.clamp(t,-b.A.PI_OVER_TWO,b.A.PI_OVER_TWO),e=b.A.zeroToTwoPi(e)-b.A.PI_OVER_TWO;const i=C.A.fromAxisAngle(r.A.UNIT_Y,-t,Ne),o=C.A.fromAxisAngle(r.A.UNIT_Z,-e,Me),s=C.A.multiply(o,i,o),a=v.A.fromQuaternion(s,Re),c=r.A.clone(r.A.UNIT_X,Le);return v.A.multiplyByVector(a,c,c),r.A.negate(c,c),r.A.multiplyByScalar(c,n,c),c}N.prototype.lookAtTransform=function(e,t){if(!(0,l.A)(e))throw new u.A("transform is required");if(this._mode===L.A.MORPHING)throw new u.A("lookAtTransform is not supported while morphing.");if(this._setTransform(e),!(0,l.A)(t))return;let n;if(n=(0,l.A)(t.heading)?Fe(t.heading,t.pitch,t.range):t,this._mode===L.A.SCENE2D){o.A.clone(o.A.ZERO,this.position),r.A.negate(n,this.up),this.up.z=0,r.A.magnitudeSquared(this.up)<b.A.EPSILON10&&r.A.clone(r.A.UNIT_Y,this.up),r.A.normalize(this.up,this.up),this._setTransform(T.A.IDENTITY),r.A.negate(r.A.UNIT_Z,this.direction),r.A.cross(this.direction,this.up,this.right),r.A.normalize(this.right,this.right);const t=this.frustum,i=t.top/t.right;return t.right=.5*r.A.magnitude(n),t.left=-t.right,t.top=i*t.right,t.bottom=-t.top,void this._setTransform(e)}r.A.clone(n,this.position),r.A.negate(this.position,this.direction),r.A.normalize(this.direction,this.direction),r.A.cross(this.direction,r.A.UNIT_Z,this.right),r.A.magnitudeSquared(this.right)<b.A.EPSILON10&&r.A.clone(r.A.UNIT_X,this.right),r.A.normalize(this.right,this.right),r.A.cross(this.right,this.direction,this.up),r.A.normalize(this.up,this.up),this._adjustOrthographicFrustum(!0)};const Be=new a.A,Ue=new a.A,ke=new r.A,Ve=new r.A,He=new r.A,ze=new r.A,Ge=new r.A,je=new r.A,We=new r.A,qe=new r.A,Ye={direction:new r.A,right:new r.A,up:new r.A};let Xe;function Je(e,t,n,i){return Math.abs(r.A.dot(t,n))/i-r.A.dot(e,n)}function Qe(e,t,n,i){const o=e._projection.ellipsoid,s=i?e:Ye,a=t.north,c=t.south;let u=t.east;const d=t.west;d>u&&(u+=b.A.TWO_PI);const h=.5*(d+u);let f;if(c<-b.A.PI_OVER_TWO+b.A.RADIANS_PER_DEGREE&&a>b.A.PI_OVER_TWO-b.A.RADIANS_PER_DEGREE)f=0;else{const e=Be;e.longitude=h,e.latitude=a,e.height=0;const t=Ue;t.longitude=h,t.latitude=c,t.height=0;let n=Xe;(0,l.A)(n)&&n.ellipsoid===o||(Xe=n=new A.A(void 0,void 0,o)),n.setEndPoints(e,t),f=n.interpolateUsingFraction(.5,Be).latitude}const p=Be;p.longitude=h,p.latitude=f,p.height=0;const m=o.cartographicToCartesian(p,We),_=Be;_.longitude=u,_.latitude=a;const g=o.cartographicToCartesian(_,ke);_.longitude=d;const y=o.cartographicToCartesian(_,He);_.longitude=h;const v=o.cartographicToCartesian(_,Ge);_.latitude=c;const T=o.cartographicToCartesian(_,je);_.longitude=u;const E=o.cartographicToCartesian(_,ze);_.longitude=d;const S=o.cartographicToCartesian(_,Ve);r.A.subtract(y,m,y),r.A.subtract(E,m,E),r.A.subtract(g,m,g),r.A.subtract(S,m,S),r.A.subtract(v,m,v),r.A.subtract(T,m,T);const C=o.geodeticSurfaceNormal(m,s.direction);r.A.negate(C,C);const x=r.A.cross(C,r.A.UNIT_Z,s.right);r.A.normalize(x,x);const I=r.A.cross(x,C,s.up);let P;if(e.frustum instanceof w.A){const t=Math.max(r.A.distance(g,y),r.A.distance(E,S)),n=Math.max(r.A.distance(g,E),r.A.distance(y,S));let i,o;const s=e.frustum._offCenterFrustum,a=s.right/s.top,c=n*a;t>c?(i=t,o=i/a):(o=n,i=c),P=Math.max(i,o)}else{const t=Math.tan(.5*e.frustum.fovy),n=e.frustum.aspectRatio*t;if(P=Math.max(Je(C,I,y,t),Je(C,I,E,t),Je(C,I,g,t),Je(C,I,S,t),Je(C,I,v,t),Je(C,I,T,t),Je(C,x,y,n),Je(C,x,E,n),Je(C,x,g,n),Je(C,x,S,n),Je(C,x,v,n),Je(C,x,T,n)),c<0&&a>0){const e=Be;e.longitude=d,e.latitude=0,e.height=0;let i=o.cartographicToCartesian(e,qe);r.A.subtract(i,m,i),P=Math.max(P,Je(C,I,i,t),Je(C,x,i,n)),e.longitude=u,i=o.cartographicToCartesian(e,qe),r.A.subtract(i,m,i),P=Math.max(P,Je(C,I,i,t),Je(C,x,i,n))}}return r.A.add(m,r.A.multiplyByScalar(C,-P,qe),n)}const $e=new a.A,Ke=new r.A,Ze=new r.A,et=new a.A,tt=new r.A,nt=new r.A;N.prototype.getRectangleCameraCoordinates=function(e,t){if(!(0,l.A)(e))throw new u.A("rectangle is required");const n=this._mode;return(0,l.A)(t)||(t=new r.A),n===L.A.SCENE3D?Qe(this,e,t):n===L.A.COLUMBUS_VIEW?function(e,t,n){const i=e._projection;t.west>t.east&&(t=I.A.MAX_VALUE);const o=e._actualTransform,r=e._actualInvTransform,s=$e;s.longitude=t.east,s.latitude=t.north;const a=i.project(s,Ke);T.A.multiplyByPoint(o,a,a),T.A.multiplyByPoint(r,a,a),s.longitude=t.west,s.latitude=t.south;const c=i.project(s,Ze);if(T.A.multiplyByPoint(o,c,c),T.A.multiplyByPoint(r,c,c),n.x=.5*(a.x-c.x)+c.x,n.y=.5*(a.y-c.y)+c.y,(0,l.A)(e.frustum.fovy)){const t=Math.tan(.5*e.frustum.fovy),i=e.frustum.aspectRatio*t;n.z=.5*Math.max((a.x-c.x)/i,(a.y-c.y)/t)}else{const e=a.x-c.x,t=a.y-c.y;n.z=Math.max(e,t)}return n}(this,e,t):n===L.A.SCENE2D?function(e,t,n){const i=e._projection;let o=t.east;t.west>t.east&&(e._scene.mapMode2D===O.A.INFINITE_SCROLL?o+=b.A.TWO_PI:o=(t=I.A.MAX_VALUE).east);let r=et;r.longitude=o,r.latitude=t.north;const s=i.project(r,tt);r.longitude=t.west,r.latitude=t.south;const a=i.project(r,nt),c=.5*Math.abs(s.x-a.x);let l,u,d=.5*Math.abs(s.y-a.y);const h=e.frustum.right/e.frustum.top,A=d*h;return c>A?(l=c,u=l/h):(u=d,l=A),d=Math.max(2*l,2*u),n.x=.5*(s.x-a.x)+a.x,n.y=.5*(s.y-a.y)+a.y,r=i.unproject(n,r),r.height=d,i.project(r,n)}(this,e,t):void 0};const it=new x.A,ot=new x.A,rt=new x.A;N.prototype.pickEllipsoid=function(e,t,n){if(!(0,l.A)(e))throw new u.A("windowPosition is required.");const i=this._scene.canvas;if(0!==i.clientWidth&&0!==i.clientHeight){if((0,l.A)(n)||(n=new r.A),t=(0,c.A)(t,h.A.WGS84),this._mode===L.A.SCENE3D)n=function(e,t,n,i){n=(0,c.A)(n,h.A.WGS84);const o=e.getPickRay(t,it),r=y.A.rayEllipsoid(o,n);if(!r)return;const s=r.start>0?r.start:r.stop;return x.A.getPoint(o,s,i)}(this,e,t,n);else if(this._mode===L.A.SCENE2D)n=function(e,t,n,i){let o=e.getPickRay(t,ot).origin;o=r.A.fromElements(o.y,o.z,0,o);const s=n.unproject(o);if(!(s.latitude<-b.A.PI_OVER_TWO||s.latitude>b.A.PI_OVER_TWO))return n.ellipsoid.cartographicToCartesian(s,i)}(this,e,this._projection,n);else{if(this._mode!==L.A.COLUMBUS_VIEW)return;n=function(e,t,n,i){const o=e.getPickRay(t,rt),s=-o.origin.x/o.direction.x;x.A.getPoint(o,s,i);const a=n.unproject(new r.A(i.y,i.z,0));if(!(a.latitude<-b.A.PI_OVER_TWO||a.latitude>b.A.PI_OVER_TWO||a.longitude<-Math.PI||a.longitude>Math.PI))return n.ellipsoid.cartographicToCartesian(a,i)}(this,e,this._projection,n)}return n}};const st=new r.A,at=new r.A,ct=new r.A,lt=new r.A;N.prototype.getPickRay=function(e,t){if(!(0,l.A)(e))throw new u.A("windowPosition is required.");(0,l.A)(t)||(t=new x.A);const n=this._scene.canvas;if(n.clientWidth<=0||n.clientHeight<=0)return;const i=this.frustum;return(0,l.A)(i.aspectRatio)&&(0,l.A)(i.fov)&&(0,l.A)(i.near)?function(e,t,n){const i=e._scene.canvas,o=i.clientWidth,s=i.clientHeight,a=Math.tan(.5*e.frustum.fovy),c=e.frustum.aspectRatio*a,l=e.frustum.near,u=2/o*t.x-1,d=2/s*(s-t.y)-1,h=e.positionWC;r.A.clone(h,n.origin);const A=r.A.multiplyByScalar(e.directionWC,l,st);r.A.add(h,A,A);const f=r.A.multiplyByScalar(e.rightWC,u*l*c,at),p=r.A.multiplyByScalar(e.upWC,d*l*a,ct),m=r.A.add(A,f,n.direction);return r.A.add(m,p,m),r.A.subtract(m,h,m),r.A.normalize(m,m),n}(this,e,t):function(e,t,n){const i=e._scene.canvas,o=i.clientWidth,s=i.clientHeight;let a=e.frustum;const c=a.offCenterFrustum;(0,l.A)(c)&&(a=c);let u=2/o*t.x-1;u*=.5*(a.right-a.left);let d=2/s*(s-t.y)-1;d*=.5*(a.top-a.bottom);const h=n.origin;return r.A.clone(e.position,h),r.A.multiplyByScalar(e.right,u,lt),r.A.add(lt,h,h),r.A.multiplyByScalar(e.up,d,lt),r.A.add(lt,h,h),r.A.clone(e.directionWC,n.direction),e._mode!==L.A.COLUMBUS_VIEW&&e._mode!==L.A.SCENE2D||r.A.fromElements(n.origin.z,n.origin.x,n.origin.y,n.origin),n}(this,e,t)};const ut=new r.A,dt=new r.A;N.prototype.distanceToBoundingSphere=function(e){if(!(0,l.A)(e))throw new u.A("boundingSphere is required.");const t=r.A.subtract(this.positionWC,e.center,ut),n=r.A.multiplyByScalar(this.directionWC,r.A.dot(t,this.directionWC),dt);return Math.max(0,r.A.magnitude(n)-e.radius)};const ht=new o.A;N.prototype.getPixelSize=function(e,t,n){if(!(0,l.A)(e))throw new u.A("boundingSphere is required.");if(!(0,l.A)(t))throw new u.A("drawingBufferWidth is required.");if(!(0,l.A)(n))throw new u.A("drawingBufferHeight is required.");const i=this.distanceToBoundingSphere(e),o=this.frustum.getPixelDimensions(t,n,i,this._scene.pixelRatio,ht);return Math.max(o.x,o.y)};const At=new r.A,ft=new r.A,pt=new r.A,mt=new r.A;N.prototype.createCorrectPositionTween=function(e){if(!(0,l.A)(e))throw new u.A("duration is required.");if(this._mode===L.A.COLUMBUS_VIEW)return function(e,t){let n=e.position;const i=e.direction,o=e.worldToCameraCoordinatesVector(r.A.UNIT_X,At),s=-r.A.dot(o,n)/r.A.dot(o,i),a=r.A.add(n,r.A.multiplyByScalar(i,s,ft),ft);e.cameraToWorldCoordinatesPoint(a,a),n=e.cameraToWorldCoordinatesPoint(e.position,pt);const c=Math.tan(.5*e.frustum.fovy),l=e.frustum.aspectRatio*c,u=r.A.magnitude(r.A.subtract(n,a,mt)),h=l*u,A=c*u,f=e._maxCoord.x,p=e._maxCoord.y,m=Math.max(h-f,f),_=Math.max(A-p,p);if(n.z<-m||n.z>m||n.y<-_||n.y>_){const i=a.y<-m||a.y>m,o=a.z<-_||a.z>_;if(i||o)return function(e,t,n,i,o,s){const a=r.A.clone(t);return n.y>i?a.y-=n.y-i:n.y<-i&&(a.y+=-i-n.y),n.z>o?a.z-=n.z-o:n.z<-o&&(a.z+=-o-n.z),{easingFunction:d.A.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:s,update:function(n){const i=r.A.lerp(t,a,n.time,new r.A);e.worldToCameraCoordinatesPoint(i,e.position)}}}(e,n,a,m,_,t)}}(this,e)};const _t=new r.A,gt={destination:void 0,heading:void 0,pitch:void 0,roll:void 0,duration:void 0,complete:void 0,cancel:void 0,endTransform:void 0,maximumHeight:void 0,easingFunction:void 0};function yt(e,t,n){n=m.A.clone((0,l.A)(n)?n:N.DEFAULT_OFFSET);const i=e._scene.screenSpaceCameraController.minimumZoomDistance,o=e._scene.screenSpaceCameraController.maximumZoomDistance,r=n.range;if(!(0,l.A)(r)||0===r){const r=t.radius;0===r?n.range=100:e.frustum instanceof w.A||e._mode===L.A.SCENE2D?n.range=function(e,t){let n=e.frustum;const i=n.offCenterFrustum;let o,r;(0,l.A)(i)&&(n=i);const s=n.right/n.top,a=t*s;return t>a?(o=t,r=o/s):(r=t,o=a),1.5*Math.max(o,r)}(e,r):n.range=function(e,t){const n=e.frustum,i=Math.tan(.5*n.fovy),o=n.aspectRatio*i;return Math.max(t/o,t/i)}(e,r),n.range=b.A.clamp(n.range,i,o)}return n}N.prototype.cancelFlight=function(){(0,l.A)(this._currentFlight)&&(this._currentFlight.cancelTween(),this._currentFlight=void 0)},N.prototype.completeFlight=function(){if((0,l.A)(this._currentFlight)){this._currentFlight.cancelTween();const e={destination:void 0,orientation:{heading:void 0,pitch:void 0,roll:void 0}};e.destination=gt.destination,e.orientation.heading=gt.heading,e.orientation.pitch=gt.pitch,e.orientation.roll=gt.roll,this.setView(e),(0,l.A)(this._currentFlight.complete)&&this._currentFlight.complete(),this._currentFlight=void 0}},N.prototype.flyTo=function(e){let t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).destination;if(!(0,l.A)(t))throw new u.A("destination is required.");if(this._mode===L.A.MORPHING)return;this.cancelFlight();const n=t instanceof I.A;n&&(t=this.getRectangleCameraCoordinates(t,_t));let i=(0,c.A)(e.orientation,c.A.EMPTY_OBJECT);if((0,l.A)(i.direction)&&(i=Ae(this,t,i,fe.orientation)),(0,l.A)(e.duration)&&e.duration<=0){const t=fe;return t.destination=e.destination,t.orientation.heading=i.heading,t.orientation.pitch=i.pitch,t.orientation.roll=i.roll,t.convert=e.convert,t.endTransform=e.endTransform,this.setView(t),void("function"==typeof e.complete&&e.complete())}const o=this;let r;gt.destination=t,gt.heading=i.heading,gt.pitch=i.pitch,gt.roll=i.roll,gt.duration=e.duration,gt.complete=function(){r===o._currentFlight&&(o._currentFlight=void 0),(0,l.A)(e.complete)&&e.complete()},gt.cancel=e.cancel,gt.endTransform=e.endTransform,gt.convert=!n&&e.convert,gt.maximumHeight=e.maximumHeight,gt.pitchAdjustHeight=e.pitchAdjustHeight,gt.flyOverLongitude=e.flyOverLongitude,gt.flyOverLongitudeWeight=e.flyOverLongitudeWeight,gt.easingFunction=e.easingFunction;const s=this._scene,a=D.A.createTween(s,gt);if(0===a.duration)return void("function"==typeof a.complete&&a.complete());r=s.tweens.add(a),this._currentFlight=r;let d=this._scene.preloadFlightCamera;this._mode!==L.A.SCENE2D&&((0,l.A)(d)||(d=N.clone(this)),d.setView({destination:t,orientation:i}),this._scene.preloadFlightCullingVolume=d.frustum.computeCullingVolume(d.positionWC,d.directionWC,d.upWC))},N.prototype.viewBoundingSphere=function(e,t){if(!(0,l.A)(e))throw new u.A("boundingSphere is required.");if(this._mode===L.A.MORPHING)throw new u.A("viewBoundingSphere is not supported while morphing.");t=yt(this,e,t),this.lookAt(e.center,t)};const bt=new T.A,vt=new r.A,Tt=new r.A,wt=new r.A,Et=new r.A,St=new s.A,Ct=new C.A,xt=new v.A;N.prototype.flyToBoundingSphere=function(e,t){if(!(0,l.A)(e))throw new u.A("boundingSphere is required.");t=(0,c.A)(t,c.A.EMPTY_OBJECT);const n=this._mode===L.A.SCENE2D||this._mode===L.A.COLUMBUS_VIEW;this._setTransform(T.A.IDENTITY);const i=yt(this,e,t.offset);let o;o=n?r.A.multiplyByScalar(r.A.UNIT_Z,i.range,vt):Fe(i.heading,i.pitch,i.range);const s=P.A.eastNorthUpToFixedFrame(e.center,h.A.WGS84,bt);let a,d;if(T.A.multiplyByPoint(s,o,o),!n){if(a=r.A.subtract(e.center,o,Tt),r.A.normalize(a,a),d=T.A.multiplyByPointAsVector(s,r.A.UNIT_Z,wt),1-Math.abs(r.A.dot(a,d))<b.A.EPSILON6){const e=C.A.fromAxisAngle(a,i.heading,Ct),t=v.A.fromQuaternion(e,xt);r.A.fromCartesian4(T.A.getColumn(s,1,St),d),v.A.multiplyByVector(t,d,d)}const t=r.A.cross(a,d,Et);r.A.cross(t,a,d),r.A.normalize(d,d)}this.flyTo({destination:o,orientation:{direction:a,up:d},duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:t.endTransform,maximumHeight:t.maximumHeight,easingFunction:t.easingFunction,flyOverLongitude:t.flyOverLongitude,flyOverLongitudeWeight:t.flyOverLongitudeWeight,pitchAdjustHeight:t.pitchAdjustHeight})};const It=new r.A,Pt=new r.A,Dt=new r.A,Ot=new r.A,Lt=[new r.A,new r.A,new r.A,new r.A],Nt=new o.A,Mt=new r.A,Rt=[new a.A,new a.A,new a.A,new a.A];function Ft(e,t,n,i,o,r){Nt.x=e,Nt.y=t;const s=i.pickEllipsoid(Nt,o,Mt);return(0,l.A)(s)?(Rt[n]=o.cartesianToCartographic(s,Rt[n]),1):(Rt[n]=o.cartesianToCartographic(r[n],Rt[n]),0)}N.prototype.computeViewRectangle=function(e,t){e=(0,c.A)(e,h.A.WGS84);const n=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),o=new i.A(r.A.ZERO,e.maximumRadius);if(n.computeVisibility(o)===g.A.OUTSIDE)return;const s=this._scene.canvas,a=s.clientWidth,l=s.clientHeight;let u=0;const d=function(e,t){const n=t.radii,i=e.positionWC,o=r.A.multiplyComponents(t.oneOverRadii,i,It),s=r.A.magnitude(o),a=r.A.normalize(o,Pt);let c,l;r.A.equalsEpsilon(a,r.A.UNIT_Z,b.A.EPSILON10)?(c=new r.A(0,1,0),l=new r.A(0,0,1)):(c=r.A.normalize(r.A.cross(r.A.UNIT_Z,a,Dt),Dt),l=r.A.normalize(r.A.cross(a,c,Ot),Ot));const u=Math.sqrt(r.A.magnitudeSquared(o)-1),d=r.A.multiplyByScalar(a,1/s,It),h=u/s,A=r.A.multiplyByScalar(c,h,Pt),f=r.A.multiplyByScalar(l,h,Dt),p=r.A.add(d,f,Lt[0]);r.A.subtract(p,A,p),r.A.multiplyComponents(n,p,p);const m=r.A.subtract(d,f,Lt[1]);r.A.subtract(m,A,m),r.A.multiplyComponents(n,m,m);const _=r.A.subtract(d,f,Lt[2]);r.A.add(_,A,_),r.A.multiplyComponents(n,_,_);const g=r.A.add(d,f,Lt[3]);return r.A.add(g,A,g),r.A.multiplyComponents(n,g,g),Lt}(this,e);if(u+=Ft(0,0,0,this,e,d),u+=Ft(0,l,1,this,e,d),u+=Ft(a,l,2,this,e,d),u+=Ft(a,0,3,this,e,d),u<2)return I.A.MAX_VALUE;t=I.A.fromCartographicArray(Rt,t);let A=0,f=Rt[3].longitude;for(let e=0;e<4;++e){const t=Rt[e].longitude,n=Math.abs(t-f);n>b.A.PI?A+=b.A.TWO_PI-n:A+=n,f=t}return b.A.equalsEpsilon(Math.abs(A),b.A.TWO_PI,b.A.EPSILON9)&&(t.west=-b.A.PI,t.east=b.A.PI,Rt[0].latitude>=0?t.north=b.A.PI_OVER_TWO:t.south=-b.A.PI_OVER_TWO),t},N.prototype.switchToPerspectiveFrustum=function(){if(this._mode===L.A.SCENE2D||this.frustum instanceof S.A)return;const e=this._scene;this.frustum=new S.A,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=b.A.toRadians(60)},N.prototype.switchToOrthographicFrustum=function(){if(this._mode===L.A.SCENE2D||this.frustum instanceof w.A)return;const e=ie(this),t=this._scene;this.frustum=new w.A,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.width=e},N.clone=function(e,t){return(0,l.A)(t)||(t=new N(e._scene)),r.A.clone(e.position,t.position),r.A.clone(e.direction,t.direction),r.A.clone(e.up,t.up),r.A.clone(e.right,t.right),T.A.clone(e._transform,t.transform),t._transformChanged=!0,t.frustum=e.frustum.clone(),t};const Bt=N},985888:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(434067),o=n(491446),r=n(677354),s=n(605971),a=n(267465),c=n(367817),l=n(86881),u=n(149785),d=n(927181);function h(e,t){let n=e;return(0,o.A)(t)&&(n+=`+${t}`),n}function A(e,t,n){const r=h(d.A.PINCH,t),s=e._update,a=e._isDown,c=e._eventStartPosition,l=e._pressTime,A=e._releaseTime;s[r]=!0,a[r]=!1,c[r]=new i.A;let f=e._movement[r];(0,o.A)(f)||(f=e._movement[r]={}),f.distance={startPosition:new i.A,endPosition:new i.A},f.angleAndHeight={startPosition:new i.A,endPosition:new i.A},f.prevAngle=0,e._eventHandler.setInputAction((function(t){e._buttonsDown++,a[r]=!0,l[r]=new Date,i.A.lerp(t.position1,t.position2,.5,c[r])}),u.A.PINCH_START,t),e._eventHandler.setInputAction((function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),a[r]=!1,A[r]=new Date}),u.A.PINCH_END,t),e._eventHandler.setInputAction((function(e){if(a[r]){s[r]?(t=e,o=f,i.A.clone(t.distance.startPosition,o.distance.startPosition),i.A.clone(t.distance.endPosition,o.distance.endPosition),i.A.clone(t.angleAndHeight.startPosition,o.angleAndHeight.startPosition),i.A.clone(t.angleAndHeight.endPosition,o.angleAndHeight.endPosition),s[r]=!1,f.prevAngle=f.angleAndHeight.startPosition.x):(i.A.clone(e.distance.endPosition,f.distance.endPosition),i.A.clone(e.angleAndHeight.endPosition,f.angleAndHeight.endPosition));let a=f.angleAndHeight.endPosition.x;const c=f.prevAngle,l=2*Math.PI;for(;a>=c+Math.PI;)a-=l;for(;a<c-Math.PI;)a+=l;f.angleAndHeight.endPosition.x=-a*n.clientWidth/12,f.angleAndHeight.startPosition.x=-c*n.clientWidth/12}var t,o}),u.A.PINCH_MOVE,t)}function f(e,t){const n=h(d.A.WHEEL,t),r=e._pressTime,s=e._releaseTime,a=e._update;a[n]=!0;let l=e._movement[n];(0,o.A)(l)||(l=e._movement[n]={});let A=e._lastMovement[n];(0,o.A)(A)||(A=e._lastMovement[n]={startPosition:new i.A,endPosition:new i.A,valid:!1}),l.startPosition=new i.A,i.A.clone(i.A.ZERO,l.startPosition),l.endPosition=new i.A,e._eventHandler.setInputAction((function(e){const t=7.5*c.A.toRadians(e);r[n]=s[n]=new Date,l.endPosition.x=0,l.endPosition.y=t,i.A.clone(l.endPosition,A.endPosition),A.valid=!0,a[n]=!1}),u.A.WHEEL,t)}function p(e,t,n){const r=h(n,t),s=e._isDown,a=e._eventStartPosition,c=e._pressTime,l=e._releaseTime;s[r]=!1,a[r]=new i.A;let A,f,p=e._lastMovement[r];(0,o.A)(p)||(p=e._lastMovement[r]={startPosition:new i.A,endPosition:new i.A,valid:!1}),n===d.A.LEFT_DRAG?(A=u.A.LEFT_DOWN,f=u.A.LEFT_UP):n===d.A.RIGHT_DRAG?(A=u.A.RIGHT_DOWN,f=u.A.RIGHT_UP):n===d.A.MIDDLE_DRAG&&(A=u.A.MIDDLE_DOWN,f=u.A.MIDDLE_UP),e._eventHandler.setInputAction((function(t){e._buttonsDown++,p.valid=!1,s[r]=!0,c[r]=new Date,i.A.clone(t.position,a[r])}),A,t),e._eventHandler.setInputAction((function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),s[r]=!1,l[r]=new Date}),f,t)}function m(e,t){i.A.clone(e.startPosition,t.startPosition),i.A.clone(e.endPosition,t.endPosition)}function _(e,t){const n=e._update,r=e._movement,s=e._lastMovement,a=e._isDown;for(const r in d.A)if(d.A.hasOwnProperty(r)){const s=d.A[r];if((0,o.A)(s)){const r=h(s,t);n[r]=!0,(0,o.A)(e._lastMovement[r])||(e._lastMovement[r]={startPosition:new i.A,endPosition:new i.A,valid:!1}),(0,o.A)(e._movement[r])||(e._movement[r]={startPosition:new i.A,endPosition:new i.A})}}e._eventHandler.setInputAction((function(c){for(const e in d.A)if(d.A.hasOwnProperty(e)){const l=d.A[e];if((0,o.A)(l)){const e=h(l,t);a[e]&&(n[e]?(m(r[e],s[e]),s[e].valid=!0,m(c,r[e]),n[e]=!1):i.A.clone(c.endPosition,r[e].endPosition))}}i.A.clone(c.endPosition,e._currentMousePosition)}),u.A.MOUSE_MOVE,t)}function g(e){if(!(0,o.A)(e))throw new s.A("canvas is required.");this._eventHandler=new l.A(e),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new i.A,f(this,void 0),A(this,void 0,e),p(this,void 0,d.A.LEFT_DRAG),p(this,void 0,d.A.RIGHT_DRAG),p(this,void 0,d.A.MIDDLE_DRAG),_(this,void 0);for(const t in a.A)if(a.A.hasOwnProperty(t)){const n=a.A[t];(0,o.A)(n)&&(f(this,n),A(this,n,e),p(this,n,d.A.LEFT_DRAG),p(this,n,d.A.RIGHT_DRAG),p(this,n,d.A.MIDDLE_DRAG),_(this,n))}}Object.defineProperties(g.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){const e=!(this._update[h(d.A.WHEEL)]&&this._update[h(d.A.WHEEL,a.A.SHIFT)]&&this._update[h(d.A.WHEEL,a.A.CTRL)]&&this._update[h(d.A.WHEEL,a.A.ALT)]);return this._buttonsDown>0||e}}}),g.prototype.isMoving=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");const n=h(e,t);return!this._update[n]},g.prototype.getMovement=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");const n=h(e,t);return this._movement[n]},g.prototype.getLastMovement=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");const n=h(e,t),i=this._lastMovement[n];if(i.valid)return i},g.prototype.isButtonDown=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");const n=h(e,t);return this._isDown[n]},g.prototype.getStartMousePosition=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");if(e===d.A.WHEEL)return this._currentMousePosition;const n=h(e,t);return this._eventStartPosition[n]},g.prototype.getButtonPressTime=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");const n=h(e,t);return this._pressTime[n]},g.prototype.getButtonReleaseTime=function(e,t){if(!(0,o.A)(e))throw new s.A("type is required.");const n=h(e,t);return this._releaseTime[n]},g.prototype.reset=function(){for(const e in this._update)this._update.hasOwnProperty(e)&&(this._update[e]=!0)},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),(0,r.A)(this)};const y=g},927181:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4})},625224:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(434067),o=n(267980),r=n(336946),s=n(419061),a=n(491446),c=n(605971),l=n(924290),u=n(367817),d=n(666775),h=n(65783),A=n(62467);const f={},p=new o.A,m=new o.A;function _(e,t,n,i){if((0,a.A)(i)&&n(.5)>i){const i=n(0),o=n(1),r=n(.5),s=r-i,a=r-o;return function(r){const c=n(r);if(r<=.5){const t=(c-i)/s;return u.A.lerp(e,-u.A.PI_OVER_TWO,t)}const l=(c-o)/a;return u.A.lerp(-u.A.PI_OVER_TWO,t,1-l)}}return function(n){return u.A.lerp(e,t,n)}}function g(e,t,n,i,r){let s=r;const c=Math.max(n,i);if(!(0,a.A)(s)){const n=e.position,i=t,r=e.up,a=e.right,c=e.frustum,l=o.A.subtract(n,i,p),u=o.A.magnitude(o.A.multiplyByScalar(r,o.A.dot(l,r),m)),A=o.A.magnitude(o.A.multiplyByScalar(a,o.A.dot(l,a),m));s=Math.min(.2*function(e,t,n){let i,o,r;if(e instanceof d.A){const s=Math.tan(.5*e.fovy);return i=e.near,o=e.near*s,r=e.aspectRatio*o,Math.max(t*i/r,n*i/o)}return e instanceof h.A?(i=e.near,o=e.top,r=e.right,Math.max(t*i/r,n*i/o)):Math.max(t,n)}(c,u,A),1e9)}if(c<s){const e=8,t=1e6,o=-Math.pow((s-n)*t,1/e),r=Math.pow((s-i)*t,1/e);return function(n){const i=n*(r-o)+o;return-Math.pow(i,e)/t+s}}return function(e){return u.A.lerp(n,i,e)}}function y(e,t){return u.A.equalsEpsilon(e,u.A.TWO_PI,u.A.EPSILON11)&&(e=0),t>e+Math.PI?e+=u.A.TWO_PI:t<e-Math.PI&&(e-=u.A.TWO_PI),e}const b=new o.A;function v(e,t,n,r,s,a,c,l){const d=e.camera,h=o.A.clone(d.position,b),A=d.pitch,f=y(d.heading,r),p=y(d.roll,a),m=g(d,n,h.z,n.z,c),v=_(A,s,m,l);return function(e){const o=e.time/t;d.setView({orientation:{heading:u.A.lerp(f,r,o),pitch:v(o),roll:u.A.lerp(p,a,o)}}),i.A.lerp(h,n,o,d.position),d.position.z=m(o)}}const T=new r.A,w=new r.A;function E(e,t,n,i,s,c,l,d,h,A){const f=e.camera,p=e.mapProjection.ellipsoid,m=r.A.clone(f.positionCartographic,T),b=f.pitch,v=y(f.heading,i),E=y(f.roll,c),S=p.cartesianToCartographic(n,w);m.longitude=u.A.zeroToTwoPi(m.longitude),S.longitude=u.A.zeroToTwoPi(S.longitude);let C=!1;if((0,a.A)(d)){const e=u.A.zeroToTwoPi(d),t=Math.min(m.longitude,S.longitude),n=Math.max(m.longitude,S.longitude),i=e>=t&&e<=n;if((0,a.A)(h)){const e=Math.abs(m.longitude-S.longitude),t=u.A.TWO_PI-e;(i?e:t)<(i?t:e)*h&&!i&&(C=!0)}else i||(C=!0)}C?function(e,t){e.longitude<t.longitude?e.longitude+=u.A.TWO_PI:t.longitude+=u.A.TWO_PI}(m,S):function(e,t){const n=e.longitude-t.longitude;n<-u.A.PI?e.longitude+=u.A.TWO_PI:n>u.A.PI&&(t.longitude+=u.A.TWO_PI)}(m,S);const x=g(f,n,m.height,S.height,l),I=_(b,s,x,A);return function(){const e=m.longitude,n=S.longitude,r=m.latitude,s=S.latitude;return function(a){const l=a.time/t,d=o.A.fromRadians(u.A.lerp(e,n,l),u.A.lerp(r,s,l),x(l),p);f.setView({destination:d,orientation:{heading:u.A.lerp(v,i,l),pitch:I(l),roll:u.A.lerp(E,c,l)}})}}()}function S(e,t,n,r,s,a,c){const l=e.camera,d=o.A.clone(l.position,b),h=y(l.heading,r),A=l.frustum.right-l.frustum.left,f=g(l,n,A,n.z,c);return function(e){const o=e.time/t;l.setView({orientation:{heading:u.A.lerp(h,r,o)}}),i.A.lerp(d,n,o,l.position);const s=f(o),a=l.frustum,c=a.top/a.right,A=.5*(s-(a.right-a.left));a.right+=A,a.left-=A,a.top=c*a.right,a.bottom=-a.top}}const C=new r.A,x=new o.A;function I(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function P(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}f.createTween=function(e,t){let n=(t=(0,s.A)(t,s.A.EMPTY_OBJECT)).destination;if(!(0,a.A)(e))throw new c.A("scene is required.");if(!(0,a.A)(n))throw new c.A("destination is required.");const r=e.mode;if(r===A.A.MORPHING)return I();const d=(0,s.A)(t.convert,!0),h=e.mapProjection,f=h.ellipsoid,p=t.maximumHeight,m=t.flyOverLongitude,_=t.flyOverLongitudeWeight,g=t.pitchAdjustHeight;let y=t.easingFunction;d&&r!==A.A.SCENE3D&&(f.cartesianToCartographic(n,C),n=h.project(C,x));const b=e.camera,T=t.endTransform;(0,a.A)(T)&&b._setTransform(T);let w=t.duration;(0,a.A)(w)||(w=Math.ceil(o.A.distance(b.position,n)/1e6)+2,w=Math.min(w,3));const D=(0,s.A)(t.heading,0),O=(0,s.A)(t.pitch,-u.A.PI_OVER_TWO),L=(0,s.A)(t.roll,0),N=e.screenSpaceCameraController;N.enableInputs=!1;const M=P(N,t.complete),R=P(N,t.cancel),F=b.frustum;let B=e.mode===A.A.SCENE2D;if(B=B&&i.A.equalsEpsilon(b.position,n,u.A.EPSILON6),B=B&&u.A.equalsEpsilon(Math.max(F.right-F.left,F.top-F.bottom),n.z,u.A.EPSILON6),B=B||e.mode!==A.A.SCENE2D&&o.A.equalsEpsilon(n,b.position,u.A.EPSILON10),B=B&&u.A.equalsEpsilon(u.A.negativePiToPi(D),u.A.negativePiToPi(b.heading),u.A.EPSILON10)&&u.A.equalsEpsilon(u.A.negativePiToPi(O),u.A.negativePiToPi(b.pitch),u.A.EPSILON10)&&u.A.equalsEpsilon(u.A.negativePiToPi(L),u.A.negativePiToPi(b.roll),u.A.EPSILON10),B)return I(M,R);const U=new Array(4);if(U[A.A.SCENE2D]=S,U[A.A.SCENE3D]=E,U[A.A.COLUMBUS_VIEW]=v,w<=0)return I((function(){U[r](e,1,n,D,O,L,p,m,_,g)({time:1}),"function"==typeof M&&M()}),R);const k=U[r](e,w,n,D,O,L,p,m,_,g);if(!(0,a.A)(y)){const e=b.positionCartographic.height;y=e>(r===A.A.SCENE3D?f.cartesianToCartographic(n).height:n.z)&&e>11500?l.A.CUBIC_OUT:l.A.QUINTIC_IN_OUT}return{duration:w,easingFunction:y,startObject:{time:0},stopObject:{time:w},update:k,complete:M,cancel:R}};const D=f},308695:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(419061);function r(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),i.A.typeOf.object("options.metadata",e.metadata),this._metadata=e.metadata}Object.defineProperties(r.prototype,{metadata:{get:function(){return this._metadata}}});const s=r},474751:(e,t,n)=>{"use strict";n.d(t,{A:()=>ue});var i=n(660662),o=n(267980),r=n(41476),s=n(433235),a=n(400793),c=n(419061),l=n(491446),u=n(786101),d=n(677354),h=n(610750),A=n(647326),f=n(591978),p=n(367817),m=n(331185),_=n(584164),g=n(832698),y=n(811203),b=n(697422),v=n(209202),T=n(866569),w=n(83181),E=n(307898),S=n(744603),C=n(123245),x=n(308695),I=n(891846),P=n(621065),D=n(223702),O=n(45679),L=n(581010),N=n(661314),M=n(84269),R=n(635649),F=n(217543),B=n(961624),U=n(800859),k=n(409816),V=n(192518),H=n(62467),z=n(413690),G=n(224159),j=n(315747),W=n(11745),q=n(760866);function Y(e,t,n,i){this._tileset=e,this._header=n;const o=(0,l.A)(n.contents),s=o&&n.contents.length>1||(0,U.A)(n,"3DTILES_multiple_contents"),a=o&&!s?n.contents[0]:n.content;this._contentHeader=a,this.transform=(0,l.A)(n.transform)?_.A.unpack(n.transform):_.A.clone(_.A.IDENTITY);const c=(0,l.A)(i)?i.computedTransform:e.modelMatrix,u=_.A.multiply(c,this.transform,new _.A),d=(0,l.A)(i)?i._initialTransform:_.A.IDENTITY;let h,A,p,m;this._initialTransform=_.A.multiply(d,this.transform,new _.A),this.computedTransform=u,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,u),this._boundingVolume2D=void 0,(0,l.A)(a)&&(0,l.A)(a.boundingVolume)&&(h=this.createBoundingVolume(a.boundingVolume,u)),this._contentBoundingVolume=h,this._contentBoundingVolume2D=void 0,(0,l.A)(n.viewerRequestVolume)&&(A=this.createBoundingVolume(n.viewerRequestVolume,u)),this._viewerRequestVolume=A,this.geometricError=n.geometricError,this._geometricError=n.geometricError,(0,l.A)(this._geometricError)||(this._geometricError=(0,l.A)(i)?i._geometricError:e._geometricError,Y._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),(0,l.A)(n.refine)?("replace"!==n.refine&&"add"!==n.refine||Y._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),p="REPLACE"===n.refine.toUpperCase()?N.A.REPLACE:N.A.ADD):p=(0,l.A)(i)?i.refine:N.A.REPLACE,this.refine=p,this.children=[],this.parent=i;let g,y,b,v=!1;if(t=S.A.createIfNeeded(t),s)g=P.A.UNLOADED,y=t.clone();else if((0,l.A)(a)){let n=a.uri;(0,l.A)(a.url)&&(Y._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),n=a.url),""===n?(Y._deprecationWarning("contentUriEmpty","content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead"),m=new M.A(e,this),v=!0,g=P.A.READY):(g=P.A.UNLOADED,y=t.getDerivedResource({url:n}),b=T.A.getServerKey(y.getUrlComponent()))}else m=new M.A(e,this),v=!0,g=P.A.READY;this._content=m,this._contentResource=y,this._contentState=g,this._expiredContent=void 0,this._serverKey=b,this.hasEmptyContent=v,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=s,this.metadata=(0,B.A)(e,n),this.cacheNode=void 0;const w=n.expire;let E,C;(0,l.A)(w)&&(E=w.duration,(0,l.A)(w.date)&&(C=f.A.fromIso8601(w.date))),this.expireDuration=E,this.expireDate=C,this.lastStyleTime=0,this._optimChildrenWithinParent=O.A.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=r.A.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new f.A,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}Y._deprecationWarning=u.A,Object.defineProperties(Y.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return(0,c.A)(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},isVisible:{get:function(){return this._visible&&this._inRequestVolume}},extras:{get:function(){return this._header.extras}},color:{get:function(){return(0,l.A)(this._color)||(this._color=new r.A),r.A.clone(this._color)},set:function(e){this._color=r.A.clone(e,this._color),this._colorDirty=!0}},hasRenderableContent:{get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent}},contentAvailable:{get:function(){return this.contentReady&&this.hasRenderableContent||(0,l.A)(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===P.A.READY}},contentUnloaded:{get:function(){return this._contentState===P.A.UNLOADED}},hasUnloadedRenderableContent:{get:function(){return this.hasRenderableContent&&this.contentUnloaded}},contentExpired:{get:function(){return this._contentState===P.A.EXPIRED}},contentFailed:{get:function(){return this._contentState===P.A.FAILED}},commandsLength:{get:function(){return this._commandsLength}}});const X=new o.A,J=new f.A;function Q(e){return function(){return e._priority}}Y.prototype.getScreenSpaceError=function(e,t,n){const i=this._tileset,o=(0,c.A)(n,1),r=(0,l.A)(this.parent)?this.parent.geometricError:i._scaledGeometricError,s=t?r:this.geometricError;if(0===s)return 0;const{camera:a,context:u}=e;let d=a.frustum;const h=u.drawingBufferWidth,A=u.drawingBufferHeight*o;let f;if(e.mode===H.A.SCENE2D||d instanceof y.A){const e=d.offCenterFrustum;(0,l.A)(e)&&(d=e),f=s/(Math.max(d.top-d.bottom,d.right-d.left)/Math.max(h,A))}else{const e=Math.max(this._distanceToCamera,p.A.EPSILON7);if(f=s*A/(e*d.sseDenominator),i.dynamicScreenSpaceError){const t=i._dynamicScreenSpaceErrorComputedDensity,n=i.dynamicScreenSpaceErrorFactor;f-=p.A.fog(e,t)*n}}return f/=e.pixelRatio,f},Y.prototype.updateVisibility=function(e){const{parent:t,tileset:n}=this;if(this._updatedVisibilityFrame===n._updatedVisibilityFrame)return;const i=(0,l.A)(t)?t.computedTransform:n.modelMatrix,r=(0,l.A)(t)?t._visibilityPlaneMask:a.A.MASK_INDETERMINATE;this.updateTransform(i),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,r),this._visible=this._visibilityPlaneMask!==a.A.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=function(e,t){const n=t.parent,i=(0,l.A)(n)&&(!e.isSkippingLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent||n.hasImplicitContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-i}(n,this),this._priorityProgressiveResolution=function(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;let n=t._screenSpaceErrorProgressiveResolution>e._maximumScreenSpaceError;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const i=t.parent,o=e._maximumScreenSpaceError,r=t._screenSpaceErrorProgressiveResolution<=o,s=(0,l.A)(i)&&i._screenSpaceErrorProgressiveResolution>o;return r&&s&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,n=!0),n}(n,this),this.priorityDeferred=function(e,t){const{tileset:n,boundingSphere:i}=e,{radius:r,center:s}=i,{camera:a}=t,c=o.A.multiplyByScalar(a.directionWC,e._centerZDepth,X),u=o.A.add(a.positionWC,c,X),d=o.A.subtract(u,s,X);if(o.A.magnitude(d)>r){const t=o.A.normalize(d,X),n=o.A.multiplyByScalar(t,r,X),i=o.A.add(s,n,X),c=o.A.subtract(i,a.positionWC,X),l=o.A.normalize(c,X);e._foveatedFactor=1-Math.abs(o.A.dot(a.directionWC,l))}else e._foveatedFactor=0;const h=e.refine===N.A.REPLACE,A=n.isSkippingLevelOfDetail;if(h&&!A||!n.foveatedScreenSpaceError||1===n.foveatedConeSize||e._priorityProgressiveResolution&&h&&A||n._pass===L.A.PRELOAD_FLIGHT||n._pass===L.A.PRELOAD)return!1;const f=1-Math.cos(.5*a.frustum.fov),m=n.foveatedConeSize*f;if(e._foveatedFactor<=m)return!1;const _=f-m,g=p.A.clamp((e._foveatedFactor-m)/_,0,1),y=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.maximumScreenSpaceError,g),b=0===e._screenSpaceError&&(0,l.A)(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return n.maximumScreenSpaceError-y<=b}(this,e),this._updatedVisibilityFrame=n._updatedVisibilityFrame},Y.prototype.updateExpiration=function(){if((0,l.A)(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const e=f.A.now(J);f.A.lessThan(this.expireDate,e)&&(this._contentState=P.A.EXPIRED,this._expiredContent=this._content)}},Y.prototype.requestContent=function(){if(!this.hasEmptyContent)return this.hasMultipleContents?function(e){let t=e._content;const n=e._tileset;if(!(0,l.A)(t)){const i=(0,U.A)(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new k.A(n,e,e._contentResource.clone(),i),e._content=t}const i=t.requestInnerContents();if((0,l.A)(i))return e._contentState=P.A.LOADING,i.then((n=>{if(!e.isDestroyed()&&(0,l.A)(n))return e._contentState=P.A.PROCESSING,t})).catch((t=>{if(!e.isDestroyed())throw e._contentState=P.A.FAILED,t}))}(this):function(e){const t=e._contentResource.clone(),n=e.contentExpired;n&&t.setQueryParameters({expired:e.expireDate.toString()});const i=new v.A({throttle:!0,throttleByServer:!0,type:E.A.TILES3D,priorityFunction:Q(e),serverKey:e._serverKey});e._request=i,t.request=i;const o=e._tileset,r=t.fetchArrayBuffer();if((0,l.A)(r))return async function(e,t,n,i,o){const r=e._contentState;let s;e._contentState=P.A.LOADING,++t.statistics.numberOfPendingRequests;try{s=await o}catch(i){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;if(n.cancelled||n.state===w.A.CANCELLED)return e._contentState=r,void++t.statistics.numberOfAttemptedRequests;throw e._contentState=P.A.FAILED,i}if(e.isDestroyed())--t.statistics.numberOfPendingRequests;else{if(n.cancelled||n.state===w.A.CANCELLED)return e._contentState=r,--t.statistics.numberOfPendingRequests,void++t.statistics.numberOfAttemptedRequests;try{const n=await async function(e,t){const n=(0,V.A)(t),i=e._tileset;let o;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===D.A.GEOMETRY||n.contentType===D.A.VECTOR,(n.contentType===D.A.IMPLICIT_SUBTREE||n.contentType===D.A.IMPLICIT_SUBTREE_JSON)&&(e.hasImplicitContent=!0),n.contentType===D.A.EXTERNAL_TILESET&&(e.hasTilesetContent=!0);const r=I.A[n.contentType];if(e.isDestroyed())return;o=(0,l.A)(n.binaryPayload)?await Promise.resolve(r(i,e,e._contentResource,n.binaryPayload.buffer,0)):await Promise.resolve(r(i,e,e._contentResource,n.jsonPayload));const s=e._contentHeader;if(e.hasImplicitContentMetadata){const t=e.implicitSubtree,n=e.implicitCoordinates;o.metadata=t.getContentMetadataView(n,0)}else e.hasImplicitContent||(o.metadata=(0,R.A)(i,s));const a=(0,F.A)(i,s);return(0,l.A)(a)&&(o.group=new x.A({metadata:a})),o}(e,s);if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;return i&&(e.expireDate=void 0),e._content=n,e._contentState=P.A.PROCESSING,n}catch(n){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;throw e._contentState=P.A.FAILED,n}}}(e,o,i,n,r);++o.statistics.numberOfAttemptedRequests}(this)},Y.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},Y.prototype.unloadContent=function(){this.hasRenderableContent&&(this._content=this._content&&this._content.destroy(),this._contentState=P.A.UNLOADED,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const $=new i.A;function K(e,t){if(t.mode!==H.A.SCENE3D&&!(0,l.A)(e._boundingVolume2D)){const n=e._boundingVolume.boundingSphere,o=i.A.projectTo2D(n,t.mapProjection,$);e._boundingVolume2D=new j.A(o.center,o.radius)}return t.mode!==H.A.SCENE3D?e._boundingVolume2D:e._boundingVolume}Y.prototype.visibility=function(e,t){const n=e.cullingVolume,i=K(this,e),o=this._tileset,r=o.clippingPlanes;if((0,l.A)(r)&&r.enabled){const e=r.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==A.A.INSIDE,e===A.A.OUTSIDE)return a.A.MASK_OUTSIDE}return n.computeVisibilityWithPlaneMask(i,t)},Y.prototype.contentVisibility=function(e){if(!(0,l.A)(this._contentBoundingVolume))return A.A.INSIDE;if(this._visibilityPlaneMask===a.A.MASK_INSIDE)return A.A.INSIDE;const t=e.cullingVolume,n=function(e,t){if(t.mode!==H.A.SCENE3D&&!(0,l.A)(e._contentBoundingVolume2D)){const n=e._contentBoundingVolume.boundingSphere,o=i.A.projectTo2D(n,t.mapProjection,$);e._contentBoundingVolume2D=new j.A(o.center,o.radius)}return t.mode!==H.A.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}(this,e),o=this._tileset,r=o.clippingPlanes;if((0,l.A)(r)&&r.enabled){const e=r.computeIntersectionWithBoundingVolume(n,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==A.A.INSIDE,e===A.A.OUTSIDE)return A.A.OUTSIDE}return t.computeVisibility(n)},Y.prototype.distanceToTile=function(e){return K(this,e).distanceToCamera(e)};const Z=new o.A;Y.prototype.distanceToTileCenter=function(e){const t=K(this,e).boundingVolume,n=o.A.subtract(t.center,e.camera.positionWC,Z);return o.A.dot(e.camera.directionWC,n)},Y.prototype.insideViewerRequestVolume=function(e){const t=this._viewerRequestVolume;return!(0,l.A)(t)||0===t.distanceToCamera(e)};const ee=new m.A,te=new o.A,ne=new m.A,ie=new o.A,oe=new b.A,re=new g.A,se=new _.A;Y.prototype.createBoundingVolume=function(e,t,n){if(!(0,l.A)(e))throw new C.A("boundingVolume must be defined");if((0,U.A)(e,"3DTILES_bounding_volume_S2"))return new G.A(e.extensions["3DTILES_bounding_volume_S2"]);const{box:i,region:r,sphere:s}=e;if((0,l.A)(i))return function(e,t,n){let i=o.A.fromElements(e[0],e[1],e[2],ie),r=m.A.fromArray(e,3,ne);i=_.A.multiplyByPoint(t,i,i);const s=_.A.getMatrix3(t,ee);return r=m.A.multiply(s,r,r),(0,l.A)(n)?(n.update(i,r),n):new W.A(i,r)}(i,t,n);if((0,l.A)(r))return function(e,t,n,i){if(!_.A.equalsEpsilon(t,n,p.A.EPSILON8))return function(e,t,n,i){const o=b.A.unpack(e,0,oe),r=e[4],s=e[5],a=g.A.fromRectangle(o,r,s,h.A.WGS84,re);let c=a.center,u=a.halfAxes;t=_.A.multiplyTransformation(t,_.A.inverseTransformation(n,se),se),c=_.A.multiplyByPoint(t,c,c);const d=_.A.getMatrix3(t,ee);return u=m.A.multiply(d,u,u),(0,l.A)(i)&&i instanceof W.A?(i.update(c,u),i):new W.A(c,u)}(e,t,n,i);if((0,l.A)(i))return i;const o=b.A.unpack(e,0,oe);return new z.A({rectangle:o,minimumHeight:e[4],maximumHeight:e[5]})}(r,t,this._initialTransform,n);if((0,l.A)(s))return function(e,t,n){let i=o.A.fromElements(e[0],e[1],e[2],ie),r=e[3];i=_.A.multiplyByPoint(t,i,i);const s=_.A.getScale(t,te);return r*=o.A.maximumComponent(s),(0,l.A)(n)?(n.update(i,r),n):new j.A(i,r)}(s,t,n);throw new C.A("boundingVolume must contain a sphere, region, or box")},Y.prototype.updateTransform=function(e){e=(0,c.A)(e,_.A.IDENTITY);const t=_.A.multiplyTransformation(e,this.transform,se);if(_.A.equals(t,this.computedTransform))return;_.A.clone(t,this.computedTransform);const n=this._header,i=this._contentHeader;this._boundingVolume=this.createBoundingVolume(n.boundingVolume,this.computedTransform,this._boundingVolume),(0,l.A)(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(i.boundingVolume,this.computedTransform,this._contentBoundingVolume)),(0,l.A)(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},Y.prototype.updateGeometricErrorScale=function(){const e=_.A.getScale(this.computedTransform,te),t=o.A.maximumComponent(e);if(this.geometricError=this._geometricError*t,!(0,l.A)(this.parent)){const e=this._tileset;e._scaledGeometricError=e._geometricError*t}},Y.prototype.update=function(e,t,n){const{commandList:i}=t,o=i.length;!function(e,t){const n=t.clippingPlanes;let i=0;(0,l.A)(n)&&e._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==e._clippingPlanesState&&(e._clippingPlanesState=i,e.clippingPlanesDirty=!0)}(this,e),function(e,t,n,i){if(!i.isRender)return;const o=(0,l.A)(e._contentHeader)&&(0,l.A)(e._contentHeader.boundingVolume),a=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!o;if(a){let t;t=e._finalResolution?e.hasRenderableContent?r.A.WHITE:r.A.DARKGRAY:r.A.YELLOW,(0,l.A)(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(t)),e._debugBoundingVolume.update(n);const i=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");i.color=s.A.toValue(t,i.color)}else!a&&(0,l.A)(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&o?((0,l.A)(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(r.A.BLUE)),e._debugContentBoundingVolume.update(n)):!t.debugShowContentBoundingVolume&&(0,l.A)(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&(0,l.A)(e._viewerRequestVolume)?((0,l.A)(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(r.A.YELLOW)),e._debugViewerRequestVolume.update(n)):!t.debugShowViewerRequestVolume&&(0,l.A)(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());const c=t.debugColorizeTiles&&!e._debugColorizeTiles||(0,l.A)(t._heatmap.tilePropertyName),u=!t.debugColorizeTiles&&e._debugColorizeTiles;c?(t._heatmap.colorize(e,n),e._debugColorizeTiles=!0,e.color=e._debugColor):u&&(e._debugColorizeTiles=!1,e.color=r.A.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),u&&t.makeStyleDirty()}(this,e,t,n),function(e,t,n){const i=e._expiredContent;if(!e.hasMultipleContents&&(0,l.A)(i)){if(!e.contentReady){try{i.update(t,n)}catch(e){}return}e._expiredContent.destroy(),e._expiredContent=void 0}if((0,l.A)(e.content))try{e.content.update(t,n)}catch(t){throw e._contentState=P.A.FAILED,t}}(this,e,t);const a=i.length;this._commandsLength=a-o;for(let e=o;e<a;++e){const t=i[e],n=t.pass===q.A.TRANSLUCENT;t.depthForTranslucentClassification=n}this.clippingPlanesDirty=!1};const ae=[];function ce(e,t,n){const i=e*Math.pow(10,t);return parseInt(i)*Math.pow(10,n)}function le(e,t,n){return Math.max(p.A.normalize(e,t,n)-p.A.EPSILON7,0)}Y.prototype.process=function(e,t){this.contentExpired||this.contentReady||!this._content.ready||(function(e){if(!(0,l.A)(e.expireDuration))return;const t=f.A.now(J);f.A.addSeconds(t,e.expireDuration,t),(0,l.A)(e.expireDate)?f.A.lessThan(e.expireDate,t)&&f.A.clone(t,e.expireDate):e.expireDate=f.A.clone(t)}(this),this._selectedFrame=0,this.lastStyleTime=0,f.A.now(this._loadTimestamp),this._contentState=P.A.READY,this.hasTilesetContent||this.hasImplicitContent||(e._statistics.incrementLoadCounts(this.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(this)));const n=t.commandList;t.commandList=ae;try{this._content.update(e,t)}catch(e){throw this._contentState=P.A.FAILED,e}ae.length=0,t.commandList=n},Y.prototype.updatePriority=function(){const e=this.tileset,t=e.preferLeaves,n=e._minimumPriority,i=e._maximumPriority,o=Math.pow(10,8),r=Math.pow(10,9),s=Math.pow(10,10);let a=le(this._depth,n.depth,i.depth);a=t?1-a:a;const c=ce(e.isSkippingLevelOfDetail||this.refine!==N.A.REPLACE?le(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError):le(this._priorityHolder._distanceToCamera,n.distance,i.distance),4,0),l=this._priorityProgressiveResolution?0:o,u=ce(le(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),4,4),d=this.priorityDeferred?r:0,h=e._pass===L.A.PRELOAD_FLIGHT?0:s;this._priority=a+c+l+u+d+h},Y.prototype.isDestroyed=function(){return!1},Y.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),(0,d.A)(this)};const ue=Y},184483:(e,t,n)=>{"use strict";n.d(t,{A:()=>z});var i=n(434067),o=n(369031),r=n(376758),s=n(41476),a=n(430346),c=n(419061),l=n(491446),u=n(786101),d=n(677354),h=n(605971),A=n(367817),f=n(123245),p=n(430332),m=n(377496),_=n(760866),g=n(40118),y=n(342875),b=n(653565),v=n(744671),T=n(200646),w=n(716750),E=n(527083),S=n(351554),C=n(938987),x=n(896464),I=n(138151);const P=b.A.DEFAULT_COLOR_VALUE,D=b.A.DEFAULT_SHOW_VALUE;function O(e,t,n,i,o){let s;this.featuresLength=t,(0,l.A)(n)&&(s=n.extensions),this._extensions=(0,c.A)(s,{});const a=function(e){const t={};if(!(0,l.A)(e))return t;for(const n in e)e.hasOwnProperty(n)&&"HIERARCHY"!==n&&"extensions"!==n&&"extras"!==n&&(t[n]=(0,r.A)(e[n],!0));return t}(n);this._properties=a,this._batchTableHierarchy=function(e,t,n){if(!(0,l.A)(t))return;let i=e._extensions["3DTILES_batch_table_hierarchy"];const o=t.HIERARCHY;return(0,l.A)(o)&&(O._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),(0,l.A)(i)?new v.A({extension:i,binaryBody:n}):void 0}(this,n,i);const u=L(t,a,i);this._binaryPropertiesByteLength=function(e){if(!(0,l.A)(e))return 0;let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}(u),this._batchTableBinaryProperties=u,this._content=e,this._batchTexture=new b.A({featuresLength:t,colorChangedCallback:o,owner:e,statistics:e.tileset.statistics})}function L(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const r=t[o],s=r.byteOffset;if((0,l.A)(s)){const t=r.componentType,a=r.type;if(!(0,l.A)(t))throw new f.A("componentType is required.");if(!(0,l.A)(a))throw new f.A("type is required.");if(!(0,l.A)(n))throw new f.A(`Property ${o} requires a batch table binary.`);const c=(0,S.A)(r),u=c.componentsPerAttribute,d=c.classType,h=c.createArrayBufferView(n.buffer,n.byteOffset+s,e);(0,l.A)(i)||(i={}),i[o]={typedArray:h,componentCount:u,type:d}}}return i}O._deprecationWarning=u.A,Object.defineProperties(O.prototype,{batchTableByteLength:{get:function(){let e=this._binaryPropertiesByteLength;return(0,l.A)(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e+=this._batchTexture.byteLength,e}}}),O.getBinaryProperties=function(e,t,n){return L(e,t,n)},O.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},O.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},O.prototype.getShow=function(e){return this._batchTexture.getShow(e)},O.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},O.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},O.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},O.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};const N=new s.A;function M(e,t){if(!(0,l.A)(e)||e<0||e>=t)throw new h.A(`batchId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}function R(e,t){return e=y.A.replaceMain(e,"tile_main"),t?`${e}uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    out_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n`:`${e}void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n`}function F(e,t,n){if(!(0,l.A)(t))return R(e,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${t};`);const o=e.match(i);if(!(0,l.A)(o))return R(e,n);const r=o[0],s=o[2];let a;if(e=(e=y.A.replaceMain(e,"tile_main")).replace(r,""),"vec3"===s||"vec4"===s){const n="vec3"===s?`vec4(${t}, 1.0)`:t,o="vec3"===s?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(t,"g"),e=e.replace(i,o),a=`    vec4 source = ${n}; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n`}else"sampler2D"===s&&(e=function(e,t){const n=`texture(${t}`;let i,o=0,r=e.indexOf(n,o);for(;r>-1;){let t=0;for(let n=r;n<e.length;++n){const o=e.charAt(n);if("("===o)++t;else if(")"===o&&(--t,0===t)){i=n+1;break}}const s=`tile_diffuse_final(${e.slice(r,i)}, tile_diffuse)`;e=e.slice(0,r)+s+e.slice(i),o=r+s.length,r=e.indexOf(n,o)}return e}(e,t),a="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return e=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \nbool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n${r}\n${e}\nvoid tile_color(vec4 tile_featureColor) \n{ \n${a}`,n&&(e+="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    out_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n"),e+"} \n"}O.prototype.applyStyle=function(e){if(!(0,l.A)(e))return this.setAllColor(P),void this.setAllShow(D);const t=this._content,n=this.featuresLength;for(let i=0;i<n;++i){const n=t.getFeature(i),o=(0,l.A)(e.color)?(0,c.A)(e.color.evaluateColor(n,N),P):P,r=(0,l.A)(e.show)?(0,c.A)(e.show.evaluate(n),D):D;this.setColor(i,o),this.setShow(i,r)}},O.prototype.isClass=function(e,t){M(e,this.featuresLength),o.A.typeOf.string("className",t);const n=this._batchTableHierarchy;return!!(0,l.A)(n)&&n.isClass(e,t)},O.prototype.isExactClass=function(e,t){return o.A.typeOf.string("className",t),this.getExactClassName(e)===t},O.prototype.getExactClassName=function(e){M(e,this.featuresLength);const t=this._batchTableHierarchy;if((0,l.A)(t))return t.getClassName(e)},O.prototype.hasProperty=function(e,t){return M(e,this.featuresLength),o.A.typeOf.string("name",t),(0,l.A)(this._properties[t])||(0,l.A)(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)},O.prototype.hasPropertyBySemantic=function(){return!1},O.prototype.getPropertyIds=function(e,t){M(e,this.featuresLength),(t=(0,l.A)(t)?t:[]).length=0;const n=Object.keys(this._properties);return t.push.apply(t,n),(0,l.A)(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,n)),t},O.prototype.getPropertyBySemantic=function(e,t){},O.prototype.getProperty=function(e,t){if(M(e,this.featuresLength),o.A.typeOf.string("name",t),(0,l.A)(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[t];if((0,l.A)(n))return function(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}(n,e)}const n=this._properties[t];if((0,l.A)(n))return(0,r.A)(n[e],!0);if((0,l.A)(this._batchTableHierarchy)){const n=this._batchTableHierarchy.getProperty(e,t);if((0,l.A)(n))return n}},O.prototype.setProperty=function(e,t,n){const i=this.featuresLength;if(M(e,i),o.A.typeOf.string("name",t),(0,l.A)(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[t];if((0,l.A)(i))return void function(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}(i,e,n)}if((0,l.A)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))return;let s=this._properties[t];(0,l.A)(s)||(this._properties[t]=new Array(i),s=this._properties[t]),s[e]=(0,r.A)(n,!0)},O.prototype.getVertexShaderCallback=function(e,t,n){if(0===this.featuresLength)return;const i=this;return function(o){const r=F(o,n,!1);let s;return p.A.maximumVertexTextureImageUnits>0?(s="",e&&(s+="uniform bool tile_translucentCommand; \n"),s+=`uniform sampler2D tile_batchTexture; \nout vec4 tile_featureColor; \nout vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${t}); \n    vec4 featureProperties = texture(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n`,e&&(s+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),s+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):s=`out vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${t}); \n}`,`${r}\n${a=i,1===a._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}${s}`;var a}},O.prototype.getFragmentShaderCallback=function(e,t,n){if(0!==this.featuresLength)return function(i){return i=F(i,t,!0),p.A.maximumVertexTextureImageUnits>0?(i+="uniform sampler2D tile_pickTexture; \nin vec2 tile_featureSt; \nin vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",n&&(i+="    out_FragColor.rgb *= out_FragColor.a; \n"),i+="}"):(e&&(i+="uniform bool tile_translucentCommand; \n"),i+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nin vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",e&&(i+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),i+="    tile_color(featureProperties); \n",n&&(i+="    out_FragColor.rgb *= out_FragColor.a; \n"),i+="} \n"),i}},O.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(e){return e=y.A.replaceMain(e,"tile_main"),p.A.maximumVertexTextureImageUnits>0?e+="uniform sampler2D tile_pickTexture;\nin vec2 tile_featureSt; \nin vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    out_FragColor = tile_featureColor; \n    out_FragColor.rgb *= out_FragColor.a; \n}":e+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nin vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    out_FragColor = featureProperties; \n    out_FragColor.rgb *= out_FragColor.a; \n} \n",e}},O.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const e=this;return function(t){const n={tile_batchTexture:function(){return(0,c.A)(e._batchTexture.batchTexture,e._batchTexture.defaultTexture)},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return function(e){const t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===w.A.HIGHLIGHT)return 0;if(n===w.A.REPLACE)return 1;if(n===w.A.MIX)return A.A.clamp(i,A.A.EPSILON4,1);throw new h.A(`Invalid color blend mode "${n}".`)}(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}};return(0,a.A)(t,n)}},O.prototype.getPickId=function(){return"texture(tile_pickTexture, tile_featureSt)"};function B(e){const t=m.A.shallowClone(e),n=t.pass===_.A.TRANSLUCENT;return t.uniformMap=(0,l.A)(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function U(e){const t=m.A.shallowClone(e);return t.pass=_.A.TRANSLUCENT,t.renderState=function(e){const t=(0,r.A)(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=T.A.ALPHA_BLEND,t.stencilTest=C.A.setCesium3DTileBit(),t.stencilMask=C.A.CESIUM_3D_TILE_MASK,g.A.fromCache(t)}(e.renderState),t}function k(e){const t=m.A.shallowClone(e);return t.renderState=function(e){const t=(0,r.A)(e,!0);return t.stencilTest=C.A.setCesium3DTileBit(),t.stencilMask=C.A.CESIUM_3D_TILE_MASK,g.A.fromCache(t)}(e.renderState),t}function V(e,t){const n=m.A.shallowClone(t),o=(0,r.A)(n.renderState,!0);o.cull.enabled=!0,o.cull.face=E.A.FRONT,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o.polygonOffset={enabled:!0,factor:5,units:5},o.stencilTest=C.A.setCesium3DTileBit(),o.stencilMask=C.A.CESIUM_3D_TILE_MASK,n.renderState=g.A.fromCache(o),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=(0,r.A)(t.uniformMap);const s=new i.A(5,5);return n.uniformMap.u_polygonOffset=function(){return s},n.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!(0,l.A)(n)){const i=t.fragmentShaderSource.clone();i.defines=(0,l.A)(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),n=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}(e,t.shaderProgram),n}function H(e,t){const n=m.A.shallowClone(e),i=(0,r.A)(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=C.A.SKIP_LOD_MASK,i.stencilTest.reference=C.A.CESIUM_3D_TILE_MASK|t<<C.A.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=x.A.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=I.A.REPLACE,i.stencilTest.backFunction=x.A.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=I.A.REPLACE,i.stencilMask=C.A.CESIUM_3D_TILE_MASK|C.A.SKIP_LOD_MASK,n.renderState=g.A.fromCache(i),n}O.prototype.addDerivedCommands=function(e,t){const n=e.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,s=o.tileset,a=s.isSkippingLevelOfDetail&&s.hasMixedContent&&e.context.stencilBuffer,c=function(e){const t=e._batchTexture.translucentFeaturesLength;return 0===t?0:t===e.featuresLength?1:2}(this);for(let u=t;u<i;++u){const t=n[u];if(t.pass===_.A.COMPUTE)continue;let i=t.derivedCommands.tileset;(0,l.A)(i)&&!t.dirty||(i={},t.derivedCommands.tileset=i,i.originalCommand=B(t),t.dirty=!1);const d=i.originalCommand;0!==c&&t.pass!==_.A.TRANSLUCENT&&((0,l.A)(i.translucent)||(i.translucent=U(d))),1!==c&&t.pass!==_.A.TRANSLUCENT&&((0,l.A)(i.opaque)||(i.opaque=k(d)),a&&(r||((0,l.A)(i.zback)||(i.zback=V(e.context,d)),s._backfaceCommands.push(i.zback)),(0,l.A)(i.stencil)&&o._selectionDepth===(i.stencil.renderState.stencilTest.reference&C.A.SKIP_LOD_MASK)>>>C.A.SKIP_LOD_BIT_SHIFT||(t.renderState.depthMask?i.stencil=H(d,o._selectionDepth):i.stencil=i.opaque)));const h=a?i.stencil:i.opaque,A=i.translucent;t.pass!==_.A.TRANSLUCENT?(0===c&&(n[u]=h),1===c&&(n[u]=A),2===c&&(n[u]=h,n.push(A))):n[u]=d}},O.prototype.update=function(e,t){this._batchTexture.update(e,t)},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,d.A)(this)};const z=O},716750:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({HIGHLIGHT:0,REPLACE:1,MIX:2})},891846:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(583511),o=n(823064),r=n(961965),s=n(224975),a=n(323314),c=n(868897),l=n(123245);const u={b3dm:function(e,t,n,i,o){return s.A.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return s.A.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return s.A.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,o,r){return i.A.fromTileType(e,t,n,o,r,u)},externalTileset:function(e,t,n,i){return a.A.fromJson(e,t,n,i)},geom:function(e,t,n,i,r){return new o.A(e,t,n,i,r)},vctr:function(e,t,n,i,o){return new c.A(e,t,n,i,o)},subt:function(e,t,n,i,o){return r.A.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return r.A.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new l.A("Invalid glb content");const r=new DataView(i,o).getUint32(8,!0),a=new Uint8Array(i,o,r);return s.A.fromGltf(e,t,n,a)},gltf:function(e,t,n,i){return s.A.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return s.A.fromGeoJson(e,t,n,i)}},d=u},621065:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5})},223702:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",VOXEL_BINARY:"voxl",VOXEL_JSON:"voxelJson",isBinaryFormat:function(e){switch(e){case i.BATCHED_3D_MODEL:case i.INSTANCED_3D_MODEL:case i.COMPOSITE:case i.POINT_CLOUD:case i.VECTOR:case i.GEOMETRY:case i.IMPLICIT_SUBTREE:case i.VOXEL_BINARY:case i.GLTF_BINARY:return!0;default:return!1}}},o=Object.freeze(i)},622569:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(41476),o=n(491446);function r(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return(0,o.A)(this._color)||(this._color=new i.A),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if((0,o.A)(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),r.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},r.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},r.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},r.getPropertyInherited=function(e,t,n){const i=e.batchTable;if((0,o.A)(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}const r=e.metadata;if((0,o.A)(r)){if(r.hasPropertyBySemantic(n))return r.getPropertyBySemantic(n);if(r.hasProperty(n))return r.getProperty(n)}const s=e.tile,a=s.metadata;if((0,o.A)(a)){if(a.hasPropertyBySemantic(n))return a.getPropertyBySemantic(n);if(a.hasProperty(n))return a.getProperty(n)}let c;if((0,o.A)(s.implicitSubtree)&&(c=s.implicitSubtree.metadata),(0,o.A)(c)){if(c.hasPropertyBySemantic(n))return c.getPropertyBySemantic(n);if(c.hasProperty(n))return c.getProperty(n)}const l=(0,o.A)(e.group)?e.group.metadata:void 0;if((0,o.A)(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}const u=e.tileset.metadata;if((0,o.A)(u)){if(u.hasPropertyBySemantic(n))return u.getPropertyBySemantic(n);if(u.hasProperty(n))return u.getProperty(n)}},r.prototype.getPropertyInherited=function(e){return r.getPropertyInherited(this._content,this._batchId,e)},r.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},r.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const s=r},468741:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(571804),o=n(419061),r=n(491446);function s(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function a(e,t,n,o,s,a){const c=e._cachedTypedArrays;let l=c[t];return(0,r.A)(l)||(l=i.A.createArrayBufferView(n,e.buffer.buffer,e.buffer.byteOffset+a,s*o),c[t]=l),l}s.prototype.getGlobalProperty=function(e,t,n){const s=this.json[e];if((0,r.A)(s))return(0,r.A)(s.byteOffset)?a(this,e,t=(0,o.A)(t,i.A.UNSIGNED_INT),n=(0,o.A)(n,1),1,s.byteOffset):s},s.prototype.hasProperty=function(e){return(0,r.A)(this.json[e])},s.prototype.getPropertyArray=function(e,t,n){const o=this.json[e];if((0,r.A)(o))return(0,r.A)(o.byteOffset)?((0,r.A)(o.componentType)&&(t=i.A.fromName(o.componentType)),a(this,e,t,n,this.featuresLength,o.byteOffset)):function(e,t,n,o){const s=e._cachedTypedArrays;let a=s[t];return(0,r.A)(a)||(a=i.A.createTypedArray(n,o),s[t]=a),a}(this,e,t,o)},s.prototype.getProperty=function(e,t,n,i,o){const s=this.json[e];if(!(0,r.A)(s))return;const a=this.getPropertyArray(e,t,n);if(1===n)return a[i];for(let e=0;e<n;++e)o[e]=a[n*i+e];return o};const c=s},45679:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0})},649413:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(267980),o=n(369031),r=n(45679),s=n(413690),a=n(11745);const c={},l=new i.A;c.checkChildrenWithinParent=function(e){o.A.typeOf.object("tile",e);const t=e.children,n=t.length,c=e.boundingVolume;if(c instanceof a.A||c instanceof s.A){const o=c._orientedBoundingBox;e._optimChildrenWithinParent=r.A.USE_OPTIMIZATION;for(let c=0;c<n;++c){const n=t[c].boundingVolume;if(!(n instanceof a.A||n instanceof s.A)){e._optimChildrenWithinParent=r.A.SKIP_OPTIMIZATION;break}const u=n._orientedBoundingBox,d=i.A.subtract(u.center,o.center,l),h=i.A.magnitude(d);if(i.A.divideByScalar(d,h,d),Math.abs(o.halfAxes[0]*d.x)+Math.abs(o.halfAxes[1]*d.y)+Math.abs(o.halfAxes[2]*d.z)+Math.abs(o.halfAxes[3]*d.x)+Math.abs(o.halfAxes[4]*d.y)+Math.abs(o.halfAxes[5]*d.z)+Math.abs(o.halfAxes[6]*d.x)+Math.abs(o.halfAxes[7]*d.y)+Math.abs(o.halfAxes[8]*d.z)<=Math.abs(u.halfAxes[0]*d.x)+Math.abs(u.halfAxes[1]*d.y)+Math.abs(u.halfAxes[2]*d.z)+Math.abs(u.halfAxes[3]*d.x)+Math.abs(u.halfAxes[4]*d.y)+Math.abs(u.halfAxes[5]*d.z)+Math.abs(u.halfAxes[6]*d.x)+Math.abs(u.halfAxes[7]*d.y)+Math.abs(u.halfAxes[8]*d.z)+h){e._optimChildrenWithinParent=r.A.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===r.A.USE_OPTIMIZATION};const u=c},581010:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},o=new Array(i.NUMBER_OF_PASSES);o[i.RENDER]=Object.freeze({pass:i.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1}),o[i.PICK]=Object.freeze({pass:i.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1}),o[i.SHADOW]=Object.freeze({pass:i.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1}),o[i.PRELOAD]=Object.freeze({pass:i.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.PRELOAD_FLIGHT]=Object.freeze({pass:i.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:i.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.MOST_DETAILED_PRELOAD]=Object.freeze({pass:i.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.MOST_DETAILED_PICK]=Object.freeze({pass:i.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1}),i.getPassOptions=function(e){return o[e]};const r=Object.freeze(i)},953677:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(369031);const o=function(e){i.A.typeOf.object("options",e),i.A.typeOf.number("options.pass",e.pass),this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}},294023:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(336946),o=n(41476),r=n(419061),s=n(491446),a=n(622569),c=n(883734);function l(e,t,n,i,o){this._content=e,this._billboard=n,this._label=i,this._polyline=o,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),d(this)}const u=new i.A;function d(e){const t=e._billboard;if((0,s.A)(e._billboardImage)&&e._billboardImage!==t.image)return void(t.image=e._billboardImage);if((0,s.A)(e._billboardImage))return;const n=(0,r.A)(e._color,l.defaultColor),i=(0,r.A)(e._pointOutlineColor,l.defaultPointOutlineColor),a=(0,r.A)(e._pointOutlineWidth,l.defaultPointOutlineWidth),u=(0,r.A)(e._pointSize,l.defaultPointSize),d=e._billboardColor,h=e._billboardOutlineColor,A=e._billboardOutlineWidth,f=e._billboardSize;if(o.A.equals(n,d)&&o.A.equals(i,h)&&a===A&&u===f)return;e._billboardColor=o.A.clone(n,e._billboardColor),e._billboardOutlineColor=o.A.clone(i,e._billboardOutlineColor),e._billboardOutlineWidth=a,e._billboardSize=u;const p=n.alpha,m=n.toCssColorString(),_=i.toCssColorString(),g=JSON.stringify([m,u,_,a]);t.setImage(g,(0,c.A)(p,m,_,a,u))}Object.defineProperties(l.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=o.A.clone(e,this._color),d(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,d(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=o.A.clone(e,this._pointOutlineColor),d(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,d(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){(0,s.A)(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){const t=(0,r.A)(this._heightOffset,0),n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,u);i.height=i.height-t+e;const o=n.cartographicToCartesian(i);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=o.A.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){const t=this._billboardImage!==e;this._billboardImage=e,t&&d(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}}),l.defaultColor=o.A.WHITE,l.defaultPointOutlineColor=o.A.BLACK,l.defaultPointOutlineWidth=0,l.defaultPointSize=8,l.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},l.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},l.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},l.prototype.getPropertyInherited=function(e){return a.A.getPropertyInherited(this._content,this._batchId,e)},l.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},l.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},l.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},l.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const h=l},661314:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ADD:0,REPLACE:1})},816968:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446);function o(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(o.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}}),o.prototype.makeDirty=function(){this._styleDirty=!0},o.prototype.resetDirty=function(){this._styleDirty=!1},o.prototype.applyStyle=function(e){if(!(0,i.A)(e.root))return;if((0,i.A)(this._style)&&!this._style._ready)return;const t=this._styleDirty;t&&++this._lastStyleTime;const n=this._lastStyleTime,o=e._statistics,r=t?e._selectedTiles:e._selectedTilesToStyle,s=r.length;for(let e=0;e<s;++e){const t=r[e];if(t.lastStyleTime!==n){const e=t.content;t.lastStyleTime=n,e.applyStyle(this._style),o.numberOfFeaturesStyled+=e.featuresLength,++o.numberOfTilesStyled}}};const r=o},855927:(e,t,n)=>{"use strict";n.d(t,{A:()=>xe});var i=n(564886),o=n(434067),r=n(267980),s=n(336946),a=n(369031),c=n(376758),l=n(41476),u=n(672743),d=n(419061),h=n(491446),A=n(786101),f=n(677354),p=n(610750),m=n(955943),_=n(208198),g=n(954865),y=n(591978),b=n(981757),v=n(367817),T=n(584164),w=n(744603),E=n(123245),S=n(543622),C=n(769493),x=n(760866),I=n(40118),P=n(320475),D=n(474751),O=n(716750),L=n(621065),N=n(979830),M=n(649413),R=n(581010),F=n(661314),B=n(648117),U=n(529755),k=n(485760),V=n(816968),H=n(711284),z=n(800859),G=n(834957),j=n(410974),W=n(465674),q=n(983884),Y=n(534135),X=n(929771),J=n(872182),Q=n(62467),$=n(988609),K=n(913419),Z=n(938987),ee=n(413690),te=n(315747),ne=n(11745),ie=n(741740),oe=n(329554),re=n(724812);function se(e){e=(0,d.A)(e,d.A.EMPTY_OBJECT),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._scaledGeometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new B.A,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=(0,d.A)(e.showCreditsOnScreen,!1),this._cullWithChildrenBounds=(0,d.A)(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new b.A,this._maximumScreenSpaceError=(0,d.A)(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=(0,d.A)(e.maximumMemoryUsage,512),this._styleEngine=new V.A,this._styleApplied=!1,this._modelMatrix=(0,h.A)(e.modelMatrix)?T.A.clone(e.modelMatrix):T.A.clone(T.A.IDENTITY),this._statistics=new k.A,this._statisticsLast=new k.A,this._statisticsPerPass=new Array(R.A.NUMBER_OF_PASSES);for(let e=0;e<R.A.NUMBER_OF_PASSES;++e)this._statisticsPerPass[e]=new k.A;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new U.A(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=(0,d.A)(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=(0,d.A)(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=v.A.clamp((0,d.A)(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=(0,d.A)(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._ellipsoid=(0,d.A)(e.ellipsoid,p.A.WGS84),this._initialClippingPlanesOriginMatrix=T.A.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=(0,d.A)(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=(0,d.A)(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=(0,d.A)(e.preloadWhenHidden,!1),this.preloadFlightDestinations=(0,d.A)(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=(0,d.A)(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=(0,d.A)(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=(0,d.A)(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=(0,d.A)(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=(0,d.A)(e.foveatedInterpolationCallback,v.A.lerp),this.foveatedTimeDelay=(0,d.A)(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=(0,d.A)(e.shadows,$.A.ENABLED),this.show=(0,d.A)(e.show,!0),this.colorBlendMode=O.A.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new X.A(e.pointCloudShading),this._pointCloudEyeDomeLighting=new Y.A,this.loadProgress=new m.A,this.allTilesLoaded=new m.A,this.initialTilesLoaded=new m.A,this.tileLoad=new m.A,this.tileUnload=new m.A,this.tileFailed=new m.A,this.tileVisible=new m.A,this.skipLevelOfDetail=(0,d.A)(e.skipLevelOfDetail,!1),this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=(0,d.A)(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=(0,d.A)(e.skipScreenSpaceErrorFactor,16),this.skipLevels=(0,d.A)(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=(0,d.A)(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=(0,d.A)(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,(0,h.A)(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new _.A,this._shouldDestroyImageBasedLighting=!0),this.lightColor=e.lightColor,this.backFaceCulling=(0,d.A)(e.backFaceCulling,!0),this._enableShowOutline=(0,d.A)(e.enableShowOutline,!0),this.showOutline=(0,d.A)(e.showOutline,!0),this.outlineColor=(0,d.A)(e.outlineColor,l.A.BLACK),this.splitDirection=(0,d.A)(e.splitDirection,K.A.NONE),this._projectTo2D=(0,d.A)(e.projectTo2D,!1),this.debugFreezeFrame=(0,d.A)(e.debugFreezeFrame,!1),this.debugColorizeTiles=(0,d.A)(e.debugColorizeTiles,!1),this._enableDebugWireframe=(0,d.A)(e.enableDebugWireframe,!1),this.debugWireframe=(0,d.A)(e.debugWireframe,!1),!0===this.debugWireframe&&!1===this._enableDebugWireframe&&(0,q.A)("tileset-debug-wireframe-ignored","enableDebugWireframe must be set to true in the Cesium3DTileset constructor, otherwise debugWireframe will be ignored."),this.debugShowBoundingVolume=(0,d.A)(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=(0,d.A)(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=(0,d.A)(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=(0,d.A)(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=(0,d.A)(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=(0,d.A)(e.debugShowMemoryUsage,!1),this.debugShowUrl=(0,d.A)(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader;let t=(0,d.A)(e.featureIdLabel,"featureId_0");"number"==typeof t&&(t=`featureId_${t}`),this._featureIdLabel=t;let n=(0,d.A)(e.instanceFeatureIdLabel,"instanceFeatureId_0");if("number"==typeof n&&(n=`instanceFeatureId_${n}`),this._instanceFeatureIdLabel=n,(0,h.A)(e.url)){(0,A.A)("Cesium3DTileset options.url","Cesium3DTileset constructor parameter options.url was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTileset.fromUrl instead.");const t=this;let n;this._readyPromise=Promise.resolve(e.url).then((function(e){let i;return n=w.A.createIfNeeded(e),t._resource=n,t._credits=n.credits,"json"===n.extension?i=n.getBaseUri(!0):n.isDataUri&&(i=""),t._url=n.url,t._basePath=i,se.loadJson(n)})).then((function(e){if(!t.isDestroyed())return ce(n,e).then((n=>(t._metadataExtension=n,e)))})).then((function(o){if(t.isDestroyed())return;t._geometricError=o.geometricError,t._scaledGeometricError=o.geometricError,t._root=t.loadTileset(n,o);const r=(0,h.A)(o.asset.gltfUpAxis)?P.A.fromName(o.asset.gltfUpAxis):P.A.Y,s=(0,d.A)(e.modelUpAxis,r),a=(0,d.A)(e.modelForwardAxis,P.A.X),c=o.asset;t._asset=c,t._properties=o.properties,t._extensionsUsed=o.extensionsUsed,t._extensions=o.extensions,t._modelUpAxis=s,t._modelForwardAxis=a,t._extras=o.extras;const l=c.extras;if((0,h.A)(l)&&(0,h.A)(l.cesium)&&(0,h.A)(l.cesium.credits)){const e=l.cesium.credits;let n=t._credits;(0,h.A)(n)||(n=[],t._credits=n);for(let i=0;i<e.length;++i){const o=e[i];n.push(new u.A(o.html,t._showCreditsOnScreen))}}const A=t._root.createBoundingVolume(o.root.boundingVolume,T.A.IDENTITY).boundingSphere.center,f=t._ellipsoid.cartesianToCartographic(A);return(0,h.A)(f)&&f.height>i.A._defaultMinTerrainHeight&&(t._initialClippingPlanesOriginMatrix=S.A.eastNorthUpToFixedFrame(A)),t._clippingPlanesOriginMatrix=T.A.clone(t._initialClippingPlanesOriginMatrix),t}))}}function ae(e,t,n,i){if(!(0,h.A)(n.implicitTiling)&&!(0,z.A)(n,"3DTILES_implicit_tiling"))return new D.A(e,t,n,i);const o=e.schema,r=new G.A(t,n,o),s=new j.A({subdivisionScheme:r.subdivisionScheme,subtreeLevels:r.subtreeLevels,level:0,x:0,y:0,z:0}),a=r.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,l=(0,c.A)(n,!0);l.contents=[{uri:a}],delete l.content,delete l.extensions;const u=new D.A(e,t,l,i);return u.implicitTileset=r,u.implicitCoordinates=s,u}async function ce(e,t){const n=(0,z.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let i;if((0,h.A)(n.schemaUri))e=e.getDerivedResource({url:n.schemaUri}),i=J.A.getSchemaLoader({resource:e});else{if(!(0,h.A)(n.schema))return;i=J.A.getSchemaLoader({schema:n.schema})}await i.load();const o=new N.A({schema:i.schema,metadataJson:n});return J.A.unload(i),o}Object.defineProperties(se.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){H.A.setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){return this._properties}},ready:{get:function(){return(0,A.A)("Cesium3DTileset.ready","Cesium3DTileset.ready was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTileset.fromUrl instead."),(0,h.A)(this._root)}},readyPromise:{get:function(){return(0,A.A)("Cesium3DTileset.readyPromise","Cesium3DTileset.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTileset.fromUrl instead."),this._readyPromise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return(0,A.A)("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},hasMixedContent:{get:function(){return this._hasMixedContent},set:function(e){a.A.typeOf.bool("value",e),this._hasMixedContent=e}},isSkippingLevelOfDetail:{get:function(){return this.skipLevelOfDetail&&!(0,h.A)(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if((0,h.A)(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if((0,h.A)(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){a.A.typeOf.number.greaterThanOrEquals("maximumScreenSpaceError",e,0),this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){a.A.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMemoryUsage=e}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){a.A.defined("pointCloudShading",e),this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=T.A.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return(0,h.A)(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(T.A.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):T.A.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){a.A.typeOf.number.greaterThanOrEquals("foveatedConeSize",e,0),a.A.typeOf.number.lessThanOrEquals("foveatedConeSize",e,1),this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){a.A.typeOf.number.greaterThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,0),a.A.typeOf.number.lessThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,this.maximumScreenSpaceError),this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){a.A.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),a.A.typeOf.string("value",e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),a.A.typeOf.string("value",e),this._instanceFeatureIdLabel=e}}}),se.fromIonAssetId=async function(e,t){a.A.defined("assetId",e);const n=await g.A.fromAssetId(e);return se.fromUrl(n,t)},se.fromUrl=async function(e,t){a.A.defined("url",e),t=(0,d.A)(t,d.A.EMPTY_OBJECT);const n=w.A.createIfNeeded(e);let o;"json"===n.extension?o=n.getBaseUri(!0):n.isDataUri&&(o="");const r=await se.loadJson(n),s=await ce(n,r),c=new se(t);c._resource=n,c._url=n.url,c._basePath=o,c._metadataExtension=s,c._geometricError=r.geometricError,c._scaledGeometricError=r.geometricError;const l=r.asset;c._asset=l,c._extras=r.extras;let A=n.credits;(0,h.A)(A)||(A=[]);const f=l.extras;if((0,h.A)(f)&&(0,h.A)(f.cesium)&&(0,h.A)(f.cesium.credits)){const e=f.cesium.credits;for(let t=0;t<e.length;++t){const n=e[t];A.push(new u.A(n.html,c._showCreditsOnScreen))}}c._credits=A;const p=(0,h.A)(r.asset.gltfUpAxis)?P.A.fromName(r.asset.gltfUpAxis):P.A.Y,m=(0,d.A)(t.modelUpAxis,p),_=(0,d.A)(t.modelForwardAxis,P.A.X);c._properties=r.properties,c._extensionsUsed=r.extensionsUsed,c._extensions=r.extensions,c._modelUpAxis=m,c._modelForwardAxis=_,c._root=c.loadTileset(n,r);const g=c._root.createBoundingVolume(r.root.boundingVolume,T.A.IDENTITY).boundingSphere.center,y=c._ellipsoid.cartesianToCartographic(g);return(0,h.A)(y)&&y.height>i.A._defaultMinTerrainHeight&&(c._initialClippingPlanesOriginMatrix=S.A.eastNorthUpToFixedFrame(g)),c._clippingPlanesOriginMatrix=T.A.clone(c._initialClippingPlanesOriginMatrix),c._readyPromise=Promise.resolve(c),c._ready=!0,c},se.loadJson=function(e){return w.A.createIfNeeded(e).fetchJson()},se.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},se.prototype.loadTileset=function(e,t,n){const i=t.asset;if(!(0,h.A)(i))throw new E.A("Tileset must have an asset property.");if("0.0"!==i.version&&"1.0"!==i.version&&"1.1"!==i.version)throw new E.A("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");(0,h.A)(t.extensionsRequired)&&se.checkSupportedExtensions(t.extensionsRequired);const o=this._statistics,r=i.tilesetVersion;(0,h.A)(r)&&(this._basePath+=`?v=${r}`,(e=e.clone()).setQueryParameters({v:r}));const s=ae(this,e,t.root,n);(0,h.A)(n)&&(n.children.push(s),s._depth=n._depth+1);const a=[];for(a.push(s);a.length>0;){const t=a.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===F.A.ADD;const n=t._header.children;if((0,h.A)(n))for(let i=0;i<n.length;++i){const o=ae(this,e,n[i],t);t.children.push(o),o._depth=t._depth+1,a.push(o)}this._cullWithChildrenBounds&&M.A.checkChildrenWithinParent(t)}return s};const le=new r.A,ue=new s.A,de=new T.A,he=new r.A,Ae=new r.A,fe=new r.A;function pe(e,t){if(t.hasEmptyContent)return;const{statistics:n}=e,i=t.contentExpired,o=t.requestContent();(0,h.A)(o)&&(o.then((i=>{!(0,h.A)(i)||t.isDestroyed()||e.isDestroyed()||(e._processingQueue.push(t),++n.numberOfTilesProcessing)})).catch((n=>{_e(n,e,t)})),i&&(t.hasTilesetContent||t.hasImplicitContent?function(e,t){const n=t,i=we;for(i.push(t);i.length>0;){const o=(t=i.pop()).children;for(let e=0;e<o.length;++e)i.push(o[e]);t!==n&&(Se(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t))}function me(e,t){return e._priority-t._priority}function _e(e,t,n){if(t.isDestroyed())return;let i;n.isDestroyed()||(i=n._contentResource.url);const o=(0,h.A)(e.message)?e.message:e.toString();t.tileFailed.numberOfListeners>0?t.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`))}se.prototype.postPassesUpdate=function(e){(0,h.A)(this._root)&&(function(e,t){const n=e._requestedTilesInFlight;let i=0;for(let e=0;e<n.length;++e){const o=n[e],r=t.frameNumber-o._touchedFrame>=1;o._contentState===L.A.LOADING?r?(o.cancelRequests(),++i):i>0&&(n[e-i]=o):++i}n.length-=i}(this,e),function(e,t){const n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,s=i.numberOfPendingRequests,a=i.numberOfTilesProcessing;k.A.clone(n,i);const c=o!==s||r!==a;c&&t.afterRender.push((function(){return e.loadProgress.raiseEvent(o,r),!0})),e._tilesLoaded=0===n.numberOfPendingRequests&&0===n.numberOfTilesProcessing&&0===n.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){return e.allTilesLoaded.raiseEvent(),!0})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){return e.initialTilesLoaded.raiseEvent(),!0}))))}(this,e),this._cache.unloadTiles(this,Ee),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)},se.prototype.prePassesUpdate=function(e){if(!(0,h.A)(this._root))return;!function(e,t){!function(e){const t=e._processingQueue;let n=0;for(let e=0;e<t.length;++e){const i=t[e];i.isDestroyed()||i._contentState!==L.A.PROCESSING?++n:n>0&&(t[e-n]=i)}t.length-=n}(e);const n=e._processingQueue,i=e._statistics;let o;for(let r=0;r<n.length;++r){o=n[r];try{o.process(e,t),o.contentReady&&(--i.numberOfTilesProcessing,e.tileLoad.raiseEvent(o))}catch(t){--i.numberOfTilesProcessing,_e(t,e,o)}}}(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,(0,h.A)(t)&&t.enabled&&t.update(e),(0,h.A)(this._loadTimestamp)||(this._loadTimestamp=y.A.clone(e.time)),this._timeSinceLoad=Math.max(1e3*y.A.secondsDifference(e.time,this._loadTimestamp),0),this.dynamicScreenSpaceError&&function(e,t){let n,i,o,a,c;const l=t.camera,u=e._root,d=u.contentBoundingVolume;if(d instanceof ee.A)n=r.A.normalize(l.positionWC,le),i=l.directionWC,o=l.positionCartographic.height,a=d.minimumHeight,c=d.maximumHeight;else{const e=T.A.inverseTransformation(u.computedTransform,de),h=t.mapProjection.ellipsoid,A=d.boundingVolume,f=T.A.multiplyByPoint(e,A.center,he);if(r.A.magnitude(f)>h.minimumRadius){const e=s.A.fromCartesian(f,h,ue);n=r.A.normalize(l.positionWC,le),i=l.directionWC,o=l.positionCartographic.height,a=0,c=2*e.height}else{const t=T.A.multiplyByPoint(e,l.positionWC,Ae);if(n=r.A.UNIT_Z,i=T.A.multiplyByPointAsVector(e,l.directionWC,fe),i=r.A.normalize(i,i),o=t.z,d instanceof ne.A){const e=u._header.boundingVolume.box[11];a=f.z-e,c=f.z+e}else if(d instanceof te.A){const e=A.radius;a=f.z-e,c=f.z+e}}}const h=a+(c-a)*e.dynamicScreenSpaceErrorHeightFalloff,A=c,f=v.A.clamp((o-h)/(A-h),0,1);let p=1-Math.abs(r.A.dot(i,n));p*=1-f,e._dynamicScreenSpaceErrorComputedDensity=e.dynamicScreenSpaceErrorDensity*p}(this,e),e.newFrame&&this._cache.reset()};const ge=new r.A,ye={maximumFractionDigits:3};function be(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,ye):Math.round(t).toLocaleString()}function ve(e){const{halfAxes:t,radius:n,center:i}=e.boundingVolume.boundingVolume;let o=r.A.clone(i,ge);if((0,h.A)(t))o.x+=.75*(t[0]+t[3]+t[6]),o.y+=.75*(t[1]+t[4]+t[7]),o.z+=.75*(t[2]+t[5]+t[8]);else if((0,h.A)(n)){let e=r.A.normalize(i,ge);e=r.A.multiplyByScalar(e,.75*n,ge),o=r.A.add(e,i,ge)}return o}function Te(e,t,n){let i="",o=0;if(t.debugShowGeometricError&&(i+=`\nGeometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics&&(i+=`\nCommands: ${e.commandsLength}`,o++,e.content.pointsLength>0&&(i+=`\nPoints: ${e.content.pointsLength}`,o++),e.content.trianglesLength>0&&(i+=`\nTriangles: ${e.content.trianglesLength}`,o++),i+=`\nFeatures: ${e.content.featuresLength}`,o++),t.debugShowMemoryUsage&&(i+=`\nTexture Memory: ${be(e.content.texturesByteLength)}`,i+=`\nGeometry Memory: ${be(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)i+=`\n- ${t[e]}`;o+=t.length}else i+=`\nUrl: ${e._contentHeader.uri}`,o++;const r={text:i.substring(1),position:n,font:19-o+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}const we=[];function Ee(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function Se(e,t){e._cache.unloadTile(e,t,Ee),t.destroy()}function Ce(e,t,n,i){if(t.mode===Q.A.MORPHING)return!1;if(!(0,h.A)(e._root))return!1;const r=e._statistics;r.clear(),++e._updatedVisibilityFrame,function(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}(e),function(e,t){t.frameNumber===e._updatedModelMatrixFrame&&(0,h.A)(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!T.A.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=T.A.clone(e.modelMatrix,e._previousModelMatrix)))}(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const s=e.getTraversal(i).selectTiles(e,t);if(i.requestTiles&&function(e){const t=e._requestedTiles;t.sort(me);for(let n=0;n<t.length;++n)pe(e,t[n])}(e),function(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;const{commandList:i,context:r}=t,s=i.length,a=e._selectedTiles,c=e.isSkippingLevelOfDetail&&e._hasMixedContent&&r.stencilBuffer&&a.length>0;e._backfaceCommands.length=0,c&&((0,h.A)(e._stencilClearCommand)||(e._stencilClearCommand=new C.A({stencil:0,pass:x.A.CESIUM_3D_TILE,renderState:I.A.fromCache({stencilMask:Z.A.SKIP_LOD_MASK})})),i.push(e._stencilClearCommand));const{statistics:l,tileVisible:u}=e,d=n.isRender,A=i.length;for(let i=0;i<a.length;++i){const o=a[i];d&&u.raiseEvent(o),o.update(e,t,n),l.incrementSelectionCounts(o.content),++l.selected}const f=e._emptyTiles;for(let i=0;i<f.length;++i)f[i].update(e,t,n);let p=i.length-A;if(e._backfaceCommands.trim(),c){const t=e._backfaceCommands.values,n=t.length;i.length+=n;for(let e=p-1;e>=0;--e)i[A+n+e]=i[A+e];for(let e=0;e<n;++e)i[A+e]=t[e]}p=i.length-s,l.numberOfCommands=p,d&&(e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&p>0&&e._pointCloudEyeDomeLighting.update(t,s,e.pointCloudShading,e.boundingSphere),e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?((0,h.A)(e._tileDebugLabels)||(e._tileDebugLabels=new W.A),function(e,t){const n=e._selectedTiles,i=n.length,r=e._emptyTiles,s=r.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if((0,h.A)(e.debugPickedTile)){const t=(0,h.A)(e.debugPickPosition)?e.debugPickPosition:ve(e.debugPickedTile);Te(e.debugPickedTile,e,t).pixelOffset=new o.A(15,-15)}}else{for(let t=0;t<i;++t){const i=n[t];Te(i,e,ve(i))}for(let t=0;t<s;++t){const n=r[t];(n.hasTilesetContent||n.hasImplicitContent)&&Te(n,e,ve(n))}}e._tileDebugLabels.update(t)}(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}(e,t,i),k.A.clone(r,n),i.isRender){const n=e._credits;if((0,h.A)(n)&&0!==r.selected)for(let i=0;i<n.length;++i){const o=n[i];o.showOnScreen=e._showCreditsOnScreen||o._isDefaultToken,t.creditDisplay.addCreditToNextFrame(o)}}return s}se.prototype.trimLoadedTiles=function(){this._cache.trim()},se.prototype.getTraversal=function(e){const{pass:t}=e;return t===R.A.MOST_DETAILED_PRELOAD||t===R.A.MOST_DETAILED_PICK?ie.A:this.isSkippingLevelOfDetail?re.A:oe.A},se.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},se.prototype.updateForPass=function(e,t){a.A.typeOf.object("frameState",e),a.A.typeOf.object("tilesetPassState",t);const n=t.pass;if(n===R.A.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===R.A.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===R.A.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const i=e.commandList,o=e.camera,r=e.cullingVolume;t.ready=!1;const s=R.A.getPassOptions(n),c=s.ignoreCommands,l=(0,d.A)(t.commandList,i),u=l.length;e.commandList=l,e.camera=(0,d.A)(t.camera,o),e.cullingVolume=(0,d.A)(t.cullingVolume,r);const h=this._statisticsPerPass[n];(this.show||c)&&(this._pass=n,t.ready=Ce(this,e,h,s)),c&&(l.length=u),e.commandList=i,e.camera=o,e.cullingVolume=r},se.prototype.hasExtension=function(e){return!!(0,h.A)(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},se.prototype.isDestroyed=function(){return!1},se.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,h.A)(this._root)){const e=we;for(e.push(this._root);e.length>0;){const t=e.pop();t.destroy();const n=t.children;for(let t=0;t<n.length;++t)e.push(n[t])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,f.A)(this)},se.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0},se.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!se.supportedExtensions[e[t]])throw new E.A(`Unsupported 3D Tiles Extension: ${e[t]}`)};const xe=se},329554:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(981757),r=n(661314),s=n(727541);function a(){}const c={stack:new o.A,stackMaximumLength:0},l={stack:new o.A,stackMaximumLength:0};function u(e,t){e.contentAvailable&&s.A.selectTile(e,t)}function d(e,t,n){const i=e.refine===r.A.REPLACE,{tileset:o,children:a}=e,{updateTile:c,loadTile:l,touchTile:u}=s.A;for(let e=0;e<a.length;++e)c(a[e],n);a.sort(s.A.sortChildrenByDistanceToCamera);const d=i&&e.hasRenderableContent;let A=!0,f=!1,p=-1,m=Number.MAX_VALUE;for(let e=0;e<a.length;++e){const i=a[e];if(i.isVisible?(t.push(i),i._foveatedFactor<m&&(p=e,m=i._foveatedFactor),f=!0):(d||o.loadSiblings)&&(i._foveatedFactor<m&&(p=e,m=i._foveatedFactor),l(i,n),u(i,n)),d){let e;e=!!i._inRequestVolume&&(i.hasRenderableContent?i.contentAvailable:h(i,n)),A=A&&e}}if(f||(A=!1),-1!==p&&i){const t=a[p];t._wasMinPriorityChild=!0;const n=(e._wasMinPriorityChild||e===o.root)&&m<=e._priorityHolder._foveatedFactor?e._priorityHolder:e;n._foveatedFactor=Math.min(t._foveatedFactor,n._foveatedFactor),n._distanceToCamera=Math.min(t._distanceToCamera,n._distanceToCamera);for(let e=0;e<a.length;++e)a[e]._priorityHolder=n}return A}function h(e,t){const{canTraverse:n,updateTile:i,loadTile:o,touchTile:r}=s.A;let a=!0;const c=l.stack;for(c.push(e);c.length>0;){l.stackMaximumLength=Math.max(l.stackMaximumLength,c.length);const e=c.pop(),s=e.children,u=s.length,d=!e.hasRenderableContent&&n(e),h=!e.hasRenderableContent&&0===e.children.length;if(d||e.contentAvailable||h||(a=!1),i(e,t),e.isVisible||(o(e,t),r(e,t)),d)for(let e=0;e<u;++e){const t=s[e];c.push(t)}}return a}a.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;const n=e.root;if(s.A.updateTile(n,t),!n.isVisible)return;if(n.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;!function(e,t){const{tileset:n}=e,{canTraverse:o,loadTile:a,visitTile:l,touchTile:h}=s.A,A=c.stack;for(A.push(e);A.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,A.length);const e=A.pop(),s=e.parent,f=!(0,i.A)(s)||s._refines;e._refines=!!o(e)&&d(e,A,t)&&f;const p=!e._refines&&f;e.hasRenderableContent?e.refine===r.A.ADD?(u(e,t),a(e,t)):e.refine===r.A.REPLACE&&(a(e,t),p&&u(e,t)):(n._emptyTiles.push(e),a(e,t),p&&u(e,t)),l(e,t),h(e,t)}}(n,t),c.stack.trim(c.stackMaximumLength),l.stack.trim(l.stackMaximumLength);const o=e._requestedTiles;for(let e=0;e<o.length;++e)o[e].updatePriority()};const A=a},648117:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(606707);function r(){this._list=new o.A,this._sentinel=this._list.add(),this._trimTiles=!1}r.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},r.prototype.touch=function(e){const t=e.cacheNode;(0,i.A)(t)&&this._list.splice(this._sentinel,t)},r.prototype.add=function(e){(0,i.A)(e.cacheNode)||(e.cacheNode=this._list.add(e))},r.prototype.unloadTile=function(e,t,n){const o=t.cacheNode;(0,i.A)(o)&&(this._list.remove(o),t.cacheNode=void 0,n(e,t))},r.prototype.unloadTiles=function(e,t){const n=this._trimTiles;this._trimTiles=!1;const i=this._list,o=1024*e.maximumMemoryUsage*1024,r=this._sentinel;let s=i.head;for(;s!==r&&(e.totalMemoryUsageInBytes>o||n);){const n=s.item;s=s.next,this.unloadTile(e,n,t)}},r.prototype.trim=function(){this._trimTiles=!0};const s=r},529755:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(41476),o=n(491446),r=n(591978),s=n(367817);function a(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function c(e,t){let n;return n="_loadTimestamp"===t?r.A.toDate(e).getTime():e,n}a.prototype.setReferenceMinimumMaximum=function(e,t,n){this._referenceMinimum[n]=c(e,n),this._referenceMaximum[n]=c(t,n)};const l=[new i.A(.1,.1,.1,1),new i.A(.153,.278,.878,1),new i.A(.827,.231,.49,1),new i.A(.827,.188,.22,1),new i.A(1,.592,.259,1),new i.A(1,.843,0,1)];a.prototype.colorize=function(e,t){const n=this.tilePropertyName;if(!(0,o.A)(n)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const r=function(e,t){const n=e.tilePropertyName;if((0,o.A)(n)){const i=c(t[n],n);return(0,o.A)(i)?(e._maximum=Math.max(i,e._maximum),e._minimum=Math.min(i,e._minimum),i):(e.tilePropertyName=void 0,i)}}(this,e),a=this._previousMinimum,u=this._previousMaximum;if(a===Number.MAX_VALUE||u===-Number.MAX_VALUE)return;const d=u-a+s.A.EPSILON7,h=s.A.clamp(r-a,0,d)/d*(l.length-1),A=Math.floor(h),f=Math.ceil(h),p=h-A,m=l[A],_=l[f],g=i.A.clone(i.A.WHITE);g.red=s.A.lerp(m.red,_.red,p),g.green=s.A.lerp(m.green,_.green,p),g.blue=s.A.lerp(m.blue,_.blue,p),e._debugColor=g},a.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if((0,o.A)(e)){const t=this._referenceMinimum[e],n=this._referenceMaximum[e],i=(0,o.A)(t)&&(0,o.A)(n);this._previousMinimum=i?t:this._minimum,this._previousMaximum=i?n:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};const u=a},979830:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(419061),r=n(491446),s=n(834298),a=n(751069);function c(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).metadataJson,n=e.schema;i.A.typeOf.object("options.metadataJson",t),i.A.typeOf.object("options.schema",n);const c=(0,o.A)(t.metadata,t.tileset);let l;(0,r.A)(c)&&(l=new a.A({tileset:c,class:n.classes[c.class]}));let u=[];const d=[],h=t.groups;if(Array.isArray(h)){const e=h.length;for(let t=0;t<e;t++){const e=h[t];d.push(new s.A({group:e,class:n.classes[e.class]}))}}else if((0,r.A)(h)){u=Object.keys(h).sort();const e=u.length;for(let t=0;t<e;t++){const e=u[t];if(h.hasOwnProperty(e)){const t=h[e];d.push(new s.A({id:e,group:h[e],class:n.classes[t.class]}))}}}this._schema=n,this._groups=d,this._groupIds=u,this._tileset=l,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(c.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const l=c},741740:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(647326),o=n(981757),r=n(661314),s=n(727541);function a(){}const c={stack:new o.A,stackMaximumLength:0};function l(e){return 0!==e.children.length&&(e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:(e.hasEmptyContent,!0))}function u(e,t,n){const{children:i}=e;for(let e=0;e<i.length;++e){const o=i[e];o.updateVisibility(n),o.isVisible&&t.push(o)}}function d(e,t){(t.hasUnloadedRenderableContent||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function h(e,t){e.contentAvailable&&e.contentVisibility(t)!==i.A.OUTSIDE&&e.tileset._selectedTiles.push(e)}a.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e.hasMixedContent=!1;let n=!0;const i=e.root;if(i.updateVisibility(t),!i.isVisible)return n;const{touchTile:o,visitTile:a}=s.A,A=c.stack;for(A.push(i);A.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,A.length);const i=A.pop(),s=i.refine===r.A.ADD,f=i.refine===r.A.REPLACE,p=l(i);p&&u(i,A,t),(s||f&&!p)&&(d(e,i),o(i,t),h(i,t),i.hasRenderableContent&&!i.contentAvailable&&(n=!1)),a(i,t)}return c.stack.trim(c.stackMaximumLength),n};const A=a},724812:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(491446),o=n(981757),r=n(661314),s=n(727541);function a(){}const c={stack:new o.A,stackMaximumLength:0},l={stack:new o.A,stackMaximumLength:0},u={stack:new o.A,stackMaximumLength:0,ancestorStack:new o.A,ancestorStackMaximumLength:0};function d(e,t){const n=e.contentAvailable?e:e._ancestorWithContentAvailable;(0,i.A)(n)?n._shouldSelect=!0:function(e,t){const{updateTile:n,touchTile:i,selectTile:o}=s.A,r=l.stack;for(r.push(e);r.length>0;){l.stackMaximumLength=Math.max(l.stackMaximumLength,r.length);const s=r.pop().children;for(let a=0;a<s.length;++a){const c=s[a];c.isVisible&&(c.contentAvailable?(n(c,t),i(c,t),o(c,t)):c._depth-e._depth<2&&r.push(c))}}}(e,t)}function h(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const{parent:n}=e;if(!(0,i.A)(n))return;const o=!n.hasUnloadedRenderableContent||n._requestedFrame===t.frameNumber;e._ancestorWithContent=o?n:n._ancestorWithContent,e._ancestorWithContentAvailable=n.contentAvailable?n:n._ancestorWithContentAvailable}function A(e,t){const n=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||(0,i.A)(n)&&t._screenSpaceError<n._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>n._depth+e.skipLevels)}function f(e,t,n){const{tileset:i,children:o}=e,{updateTile:r,loadTile:a,touchTile:c}=s.A;for(let e=0;e<o.length;++e)r(o[e],n);o.sort(s.A.sortChildrenByDistanceToCamera);let l=!1;for(let e=0;e<o.length;++e){const r=o[e];r.isVisible?(t.push(r),l=!0):i.loadSiblings&&(a(r,n),c(r,n))}return l}function p(e,t){const{tileset:n}=e;return!n.immediatelyLoadDesiredLevelOfDetail&&(!(0,i.A)(e._ancestorWithContent)||(0===e._screenSpaceError?e.parent._screenSpaceError>t:e._screenSpaceError>t))}a.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;const n=e.root;if(s.A.updateTile(n,t),!n.isVisible)return;if(n.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;!function(e,t){const{tileset:n}=e,o=n.immediatelyLoadDesiredLevelOfDetail?Number.MAX_VALUE:Math.max(n.baseScreenSpaceError,n.maximumScreenSpaceError),{canTraverse:a,loadTile:l,visitTile:u,touchTile:m}=s.A,_=c.stack;for(_.push(e);_.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,_.length);const e=_.pop();h(e,t);const s=e.parent,g=!(0,i.A)(s)||s._refines;e._refines=!!a(e)&&f(e,_,t)&&g;const y=!e._refines&&g;e.hasRenderableContent?e.refine===r.A.ADD?(d(e,t),l(e,t)):e.refine===r.A.REPLACE&&(p(e,o)?(l(e,t),y&&d(e,t)):y?(d(e,t),l(e,t)):A(n,e)&&l(e,t)):(n._emptyTiles.push(e),l(e,t),y&&d(e,t)),u(e,t),m(e,t)}}(n,t),function(e,t){const{selectTile:n,canTraverse:o}=s.A,{stack:a,ancestorStack:c}=u;let l;for(a.push(e);a.length>0||c.length>0;){if(u.stackMaximumLength=Math.max(u.stackMaximumLength,a.length),u.ancestorStackMaximumLength=Math.max(u.ancestorStackMaximumLength,c.length),c.length>0){const e=c.peek();if(e._stackLength===a.length){c.pop(),e!==l&&(e._finalResolution=!1),n(e,t);continue}}const e=a.pop();if(!(0,i.A)(e))continue;const s=o(e);if(e._shouldSelect)if(e.refine===r.A.ADD)n(e,t);else{if(e._selectionDepth=c.length,e._selectionDepth>0&&(e.tileset.hasMixedContent=!0),l=e,!s){n(e,t);continue}c.push(e),e._stackLength=a.length}if(s){const t=e.children;for(let e=0;e<t.length;++e){const n=t[e];n.isVisible&&a.push(n)}}}}(n,t),c.stack.trim(c.stackMaximumLength),l.stack.trim(l.stackMaximumLength),u.stack.trim(u.stackMaximumLength),u.ancestorStack.trim(u.ancestorStackMaximumLength);const o=e._requestedTiles;for(let e=0;e<o.length;++e)o[e].updatePriority()};const m=a},485760:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446);function o(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function r(e,t,n,o){const s=t.innerContents,a=t.pointsLength,c=t.trianglesLength,l=t.featuresLength,u=t.geometryByteLength,d=t.texturesByteLength,h=t.batchTableByteLength;if(o?(e.numberOfFeaturesLoaded+=n?-l:l,e.numberOfPointsLoaded+=n?-a:a,e.geometryByteLength+=n?-u:u,e.texturesByteLength+=n?-d:d,e.batchTableByteLength+=n?-h:h):(e.numberOfFeaturesSelected+=n?-l:l,e.numberOfPointsSelected+=n?-a:a,e.numberOfTrianglesSelected+=n?-c:c),(0,i.A)(s)){const t=s.length;for(let i=0;i<t;++i)r(e,s[i],n,o)}}o.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},o.prototype.incrementSelectionCounts=function(e){r(this,e,!1,!1)},o.prototype.incrementLoadCounts=function(e){r(this,e,!1,!0)},o.prototype.decrementLoadCounts=function(e){r(this,e,!0,!0)},o.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength};const s=o},727541:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(647326),s=n(45679),a=n(661314);function c(){}function l(e,t){if(e.updateVisibility(t),!e.isVisible)return;const n=e.children.length>0;if((e.hasTilesetContent||e.hasImplicitContent)&&n){const n=e.children[0];return l(n,t),void(e._visible=n._visible)}if(function(e,t){const{parent:n,tileset:o}=e;return!(!(0,i.A)(n)||n.hasTilesetContent||n.hasImplicitContent||n.refine!==a.A.ADD)&&e.getScreenSpaceError(t,!0)<=o._maximumScreenSpaceError}(e,t))return void(e._visible=!1);const o=e.refine===a.A.REPLACE,r=e._optimChildrenWithinParent===s.A.USE_OPTIMIZATION;return o&&r&&n&&!function(e,t){let n=!1;const i=e.children;for(let e=0;e<i.length;++e){const o=i[e];o.updateVisibility(t),n=n||o.isVisible}return n}(e,t)?(++e.tileset._statistics.numberOfTilesCulledWithChildrenUnion,void(e._visible=!1)):void 0}c.selectTiles=function(e,t){o.A.throwInstantiationError()},c.sortChildrenByDistanceToCamera=function(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera},c.canTraverse=function(e){return 0!==e.children.length&&(e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:e._screenSpaceError>e.tileset._maximumScreenSpaceError)},c.selectTile=function(e,t){if(e.contentVisibility(t)===r.A.OUTSIDE)return;const{content:n,tileset:i}=e;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,e.lastStyleTime=0,i._selectedTilesToStyle.push(e)):e._selectedFrame<t.frameNumber-1&&i._selectedTilesToStyle.push(e),e._selectedFrame=t.frameNumber,i._selectedTiles.push(e)},c.visitTile=function(e,t){++e.tileset._statistics.visited,e._visitedFrame=t.frameNumber},c.touchTile=function(e,t){e._touchedFrame!==t.frameNumber&&(e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber)},c.loadTile=function(e,t){const{tileset:n}=e;if(e._requestedFrame===t.frameNumber||!e.hasUnloadedRenderableContent&&!e.contentExpired)return;if(!function(e,t){const{tileset:n}=e;if(!n._cullRequestsWhileMoving)return!0;const{positionWCDeltaMagnitude:i,positionWCDeltaMagnitudeLastFrame:o}=t.camera,r=0!==i?i:o,s=Math.max(2*e.boundingSphere.radius,1);return n.cullRequestsWhileMovingMultiplier*r/s<1}(e,t))return;const i=t.camera.timeSinceMoved<n.foveatedTimeDelay;e.priorityDeferred&&i||(e._requestedFrame=t.frameNumber,n._requestedTiles.push(e))},c.updateTile=function(e,t){l(e,t),e.updateExpiration(),e._wasMinPriorityChild=!1,e._priorityHolder=e,function(e){const t=e.tileset._minimumPriority,n=e.tileset._maximumPriority,i=e._priorityHolder;n.distance=Math.max(i._distanceToCamera,n.distance),t.distance=Math.min(i._distanceToCamera,t.distance),n.depth=Math.max(e._depth,n.depth),t.depth=Math.min(e._depth,t.depth),n.foveatedFactor=Math.max(i._foveatedFactor,n.foveatedFactor),t.foveatedFactor=Math.min(i._foveatedFactor,t.foveatedFactor),n.reverseScreenSpaceError=Math.max(e._priorityReverseScreenSpaceError,n.reverseScreenSpaceError),t.reverseScreenSpaceError=Math.min(e._priorityReverseScreenSpaceError,t.reverseScreenSpaceError)}(e),e._shouldSelect=!1,e._finalResolution=!0};const u=c},23708:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(267980),o=n(369031),r=n(491446);function s(e,t){o.A.typeOf.object("normal",e),o.A.typeOf.number("distance",t),this._distance=t,this._normal=new a(e,this),this.onChangeCallback=void 0,this.index=-1}function a(e,t){this._clippingPlane=t,this._cartesian3=i.A.clone(e)}Object.defineProperties(s.prototype,{distance:{get:function(){return this._distance},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){o.A.typeOf.object("value",e),(0,r.A)(this.onChangeCallback)&&!i.A.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),i.A.clone(e,this._normal._cartesian3)}}}),s.fromPlane=function(e,t){return o.A.typeOf.object("plane",e),(0,r.A)(t)?(t.normal=e.normal,t.distance=e.distance):t=new s(e.normal,e.distance),t},s.clone=function(e,t){return(0,r.A)(t)?(t.normal=e.normal,t.distance=e.distance,t):new s(e.normal,e.distance)},Object.defineProperties(a.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});const c=s},711284:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var i=n(961645),o=n(434067),r=n(267980),s=n(626809),a=n(369031),c=n(41476),l=n(419061),u=n(491446),d=n(677354),h=n(605971),A=n(955943),f=n(647326),p=n(584164),m=n(276904),_=n(257941),g=n(430332),y=n(57775),b=n(654799),v=n(616e3),T=n(23708);function w(e){e=(0,l.A)(e,l.A.EMPTY_OBJECT),this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=(0,l.A)(e.enabled,!0),this.modelMatrix=p.A.clone((0,l.A)(e.modelMatrix,p.A.IDENTITY)),this.edgeColor=c.A.clone((0,l.A)(e.edgeColor,c.A.WHITE)),this.edgeWidth=(0,l.A)(e.edgeWidth,0),this.planeAdded=new A.A,this.planeRemoved=new A.A,this._owner=void 0;const t=(0,l.A)(e.unionClippingRegions,!1);this._unionClippingRegions=t,this._testIntersection=t?E:S,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;const n=e.planes;if((0,u.A)(n)){const e=n.length;for(let t=0;t<e;++t)this.add(n[t])}}function E(e){return e===f.A.OUTSIDE}function S(e){return e===f.A.INSIDE}function C(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||-1!==e._dirtyIndex&&e._dirtyIndex!==t,e._dirtyIndex=t}function x(e,t){const n=e.length;for(let i=0;i<n;++i)if(_.A.equals(e[i],t))return i;return-1}Object.defineProperties(w.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?E:S)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}}),w.prototype.add=function(e){const t=this._planes.length,n=this;e.onChangeCallback=function(e){C(n,e)},e.index=t,C(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)},w.prototype.get=function(e){return a.A.typeOf.number("index",e),this._planes[e]},w.prototype.contains=function(e){return-1!==x(this._planes,e)},w.prototype.remove=function(e){const t=this._planes,n=x(t,e);if(-1===n)return!1;e instanceof T.A&&(e.onChangeCallback=void 0,e.index=-1);const i=t.length-1;for(let e=n;e<i;++e){const n=t[e+1];t[e]=n,n instanceof T.A&&(n.index=e)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0},w.prototype.removeAll=function(){const e=this._planes,t=e.length;for(let n=0;n<t;++n){const t=e[n];t instanceof T.A&&(t.onChangeCallback=void 0,t.index=-1),this.planeRemoved.raiseEvent(t,n)}this._multipleDirtyPlanes=!0,this._planes=[]};const I=new s.A,P=new s.A;function D(e,t,n){const o=e._uint8View,r=e._planes;let a=0;for(let e=t;e<n;++e){const t=r[e],n=i.A.octEncodeToCartesian4(t.normal,P);o[a]=n.x,o[a+1]=n.y,o[a+2]=n.z,o[a+3]=n.w;const c=s.A.packFloat(t.distance,I);o[a+4]=c.x,o[a+5]=c.y,o[a+6]=c.z,o[a+7]=c.w,a+=8}}function O(e,t,n){const i=e._float32View,o=e._planes;let r=0;for(let e=t;e<n;++e){const t=o[e],n=t.normal;i[r]=n.x,i[r+1]=n.y,i[r+2]=n.z,i[r+3]=t.distance,r+=4}}function L(e,t){const n=g.A.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}const N=new o.A;w.prototype.update=function(e){let t=this._clippingPlanesTexture;const n=e.context,i=w.useFloatTexture(n),o=i?this.length:2*this.length;if((0,u.A)(t)){const e=t.width*t.height;(e<o||o<.25*e)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(0===this.length)return;if(!(0,u.A)(t)){const e=L(o,N);e.y*=2,i?(t=new v.A({context:n,width:e.x,height:e.y,pixelFormat:m.A.RGBA,pixelDatatype:y.A.FLOAT,sampler:b.A.NEAREST,flipY:!1}),this._float32View=new Float32Array(e.x*e.y*4)):(t=new v.A({context:n,width:e.x,height:e.y,pixelFormat:m.A.RGBA,pixelDatatype:y.A.UNSIGNED_BYTE,sampler:b.A.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(e.x*e.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}const r=this._dirtyIndex;if(this._multipleDirtyPlanes||-1!==r){if(this._multipleDirtyPlanes)i?(O(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(D(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let e=0,n=0;i?(n=Math.floor(r/t.width),e=Math.floor(r-n*t.width),O(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:e,yOffset:n})):(n=Math.floor(2*r/t.width),e=Math.floor(2*r-n*t.width),D(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:e,yOffset:n}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};const M=new p.A,R=new _.A(r.A.UNIT_X,0);w.prototype.computeIntersectionWithBoundingVolume=function(e,t){const n=this._planes,i=n.length;let o=this.modelMatrix;(0,u.A)(t)&&(o=p.A.multiply(t,o,M));let r=f.A.INSIDE;!this.unionClippingRegions&&i>0&&(r=f.A.OUTSIDE);for(let t=0;t<i;++t){const i=n[t];_.A.transform(i,o,R);const s=e.intersectPlane(R);if(s===f.A.INTERSECTING)r=s;else if(this._testIntersection(s))return s}return r},w.setOwner=function(e,t,n){if(e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),(0,u.A)(e))){if((0,u.A)(e._owner))throw new h.A("ClippingPlaneCollection should only be assigned to one object");e._owner=t,t[n]=e}},w.useFloatTexture=function(e){return e.floatingPointTexture},w.getTextureResolution=function(e,t,n){const i=e.texture;if((0,u.A)(i))return n.x=i.width,n.y=i.height,n;const o=L(w.useFloatTexture(t)?e.length:2*e.length,n);return o.y*=2,o},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),(0,d.A)(this)};const F=w},428027:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(367817);const o={HIGHLIGHT:0,REPLACE:1,MIX:2,getColorBlend:function(e,t){return e===o.HIGHLIGHT?0:e===o.REPLACE?1:e===o.MIX?i.A.clamp(t,i.A.EPSILON4,1):void 0}},r=Object.freeze(o)},583511:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(419061),o=n(491446),r=n(786101),s=n(677354),a=n(452684),c=n(123245);function l(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,(0,o.A)(i)||(i=[]),this._contents=i,this._metadata=void 0,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e}))}Object.defineProperties(l.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,r.A)("Composite3DTileContent.readyPromise","Composite3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Composite3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].group=e}}});const u=Uint32Array.BYTES_PER_ELEMENT;l.fromTileType=async function(e,t,n,r,s,d){s=(0,i.A)(s,0);const h=new Uint8Array(r),A=new DataView(r);s+=u;const f=A.getUint32(s,!0);if(1!==f)throw new c.A(`Only Composite Tile version 1 is supported. Version ${f} is not.`);s+=u,s+=u;const p=A.getUint32(s,!0);s+=u;let m=n.queryParameters.compositeIndex;m=(0,o.A)(m)?`${m}_`:"";const _=[];_.length=p;for(let i=0;i<p;++i){const l=(0,a.A)(h,s),f=A.getUint32(s+2*u,!0),p=d[l],g=`${m}${i}`,y=n.getDerivedResource({queryParameters:{compositeIndex:g}});if(!(0,o.A)(p))throw new c.A(`Unknown tile content type, ${l}, inside Composite tile`);_[i]=Promise.resolve(p(e,t,y,r,s)),s+=f}return new l(e,t,n,await Promise.all(_))},l.prototype.hasProperty=function(e,t){return!1},l.prototype.getFeature=function(e){},l.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},l.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},l.prototype.update=function(e,t){const n=this._contents,i=n.length;let o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0,this._resolveContent(this))},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,s.A)(this)};const d=l},35204:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(419061),r=n(965976);function s(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).content,n=e.class;i.A.typeOf.object("options.content",t),i.A.typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return r.A.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return r.A.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return r.A.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return r.A.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return r.A.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return r.A.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return r.A.setPropertyBySemantic(e,t,this._properties,this._class)};const a=s},937069:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(288787),o=n(303578),r=n(369031),s=n(672743),a=n(419061),c=n(491446),l=n(786101),u=n(677354),d=n(484193);const h="#ffffff",A="#48b";function f(e,t){this.credit=e,this.count=(0,a.A)(t,1)}function p(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(s.A.equals(n,t))return!0}return!1}const m="cesium-credit-delimiter";function _(e){const t=document.createElement("span");return t.textContent=e,t.className=m,t}function g(e,t){if((0,c.A)(t)){const n=document.createElement(t);n._creditId=e._creditId,n.appendChild(e),e=n}return e}function y(e,t,n,i){const o=e.childNodes;let r=-1;t.sort((function(e,t){return t.count-e.count}));for(let s=0;s<t.length;++s){const a=t[s].credit;if((0,c.A)(a)){if(r=s,(0,c.A)(n)&&(r*=2,s>0)){const t=r-1;if(o.length<=t)e.appendChild(_(n));else{const i=o[t];i.className!==m&&e.replaceChild(_(n),i)}}const t=a.element;if(o.length<=r)e.appendChild(g(t,i));else{const n=o[r];n._creditId!==a._id&&e.replaceChild(g(t,i),n)}}}for(++r;r<o.length;)e.removeChild(o[r])}function b(e,t){let n=`${e} {`;for(const e in t)t.hasOwnProperty(e)&&(n+=`${e}: ${t[e]}; `);return n+=" }\n",n}function v(e,t,n){r.A.defined("container",e);const o=this;n=(0,a.A)(n,document.body);const c=document.createElement("div");c.className="cesium-credit-lightbox-overlay",n.appendChild(c);const l=document.createElement("div");function u(e){l.contains(e.target)||o.hideLightbox()}l.className="cesium-credit-lightbox",c.appendChild(l),c.addEventListener("click",u,!1);const d=document.createElement("div");d.className="cesium-credit-lightbox-title",d.textContent="Data provided by:",l.appendChild(d);const f=document.createElement("a");f.onclick=this.hideLightbox.bind(this),f.innerHTML="&times;",f.className="cesium-credit-lightbox-close",l.appendChild(f);const p=document.createElement("ul");l.appendChild(p);const m=document.createElement("div");m.className="cesium-credit-logoContainer",m.style.display="inline",e.appendChild(m);const _=document.createElement("div");_.className="cesium-credit-textContainer",_.style.display="inline",e.appendChild(_);const g=document.createElement("a");g.className="cesium-credit-expand-link",g.onclick=this.showLightbox.bind(this),g.textContent="Data attribution",e.appendChild(g),function(e){let t="";t+=b(".cesium-credit-lightbox-overlay",{display:"none","z-index":"1",position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(80, 80, 80, 0.8)"}),t+=b(".cesium-credit-lightbox",{"background-color":"#303336",color:h,position:"relative","min-height":"100px",margin:"auto"}),t+=b(".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited",{color:h}),t+=b(".cesium-credit-lightbox > ul > li a:hover",{color:A}),t+=b(".cesium-credit-lightbox.cesium-credit-lightbox-expanded",{border:"1px solid #444","border-radius":"5px","max-width":"370px"}),t+=b(".cesium-credit-lightbox.cesium-credit-lightbox-mobile",{height:"100%",width:"100%"}),t+=b(".cesium-credit-lightbox-title",{padding:"20px 20px 0 20px"}),t+=b(".cesium-credit-lightbox-close",{"font-size":"18pt",cursor:"pointer",position:"absolute",top:"0",right:"6px",color:h}),t+=b(".cesium-credit-lightbox-close:hover",{color:A}),t+=b(".cesium-credit-lightbox > ul",{margin:"0",padding:"12px 20px 12px 40px","font-size":"13px"}),t+=b(".cesium-credit-lightbox > ul > li",{"padding-bottom":"6px"}),t+=b(".cesium-credit-lightbox > ul > li *",{padding:"0",margin:"0"}),t+=b(".cesium-credit-expand-link",{"padding-left":"5px",cursor:"pointer","text-decoration":"underline",color:h}),t+=b(".cesium-credit-expand-link:hover",{color:A}),t+=b(".cesium-credit-text",{color:h}),t+=b(".cesium-credit-textContainer *, .cesium-credit-logoContainer *",{display:"inline"});const n=(0,a.A)(function(e){if(e.shadowRoot)return e.shadowRoot;if(e.getRootNode){const t=e.getRootNode();if(t instanceof ShadowRoot)return t}}(e),document.head),i=document.createElement("style");i.innerHTML=t,n.appendChild(i)}(e);const y=s.A.clone(v.cesiumCredit);this._delimiter=(0,a.A)(t,"  "),this._screenContainer=_,this._cesiumCreditContainer=m,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=l,this._creditList=p,this._lightbox=c,this._hideLightbox=u,this._expandLink=g,this._expanded=!1,this._staticCredits=[],this._cesiumCredit=y,this._previousCesiumCredit=void 0,this._currentCesiumCredit=y,this._creditDisplayElementPool=[],this._creditDisplayElementIndex=0,this._currentFrameCredits={screenCredits:new i.A,lightboxCredits:new i.A},this._defaultCredit=void 0,this.viewport=n,this.container=e}function T(e,t,n,i){i=(0,a.A)(i,1);let o=t.get(n.id);if((0,c.A)(o))o.count<Number.MAX_VALUE&&(o.count+=i);else{const r=e._creditDisplayElementPool,s=e._creditDisplayElementPoolIndex;s<r.length?(o=r[s],o.credit=n,o.count=i):(o=new f(n,i),r.push(o)),++e._creditDisplayElementPoolIndex,t.set(n.id,o)}}let w;function E(){if(!(0,c.A)(w)){let e=(0,o.A)("Assets/Images/ion-credit.png");0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("data:")&&(e=new d(e).path()),w=new s.A(`<a href="https://cesium.com/" target="_blank"><img src="${e}" title="Cesium ion"/></a>`,!0)}return v._cesiumCreditInitialized||(v._cesiumCredit=w,v._cesiumCreditInitialized=!0),w}v.prototype.addCredit=function(e){(0,l.A)("CreditDisplay.addCredit","CreditDisplay.addCredit was deprecated in CesiumJS 1.105.  It will be removed in CesiumJS 1.107.  Use CreditDisplay.addCreditToNextFrame instead."),this.addCreditToNextFrame(e)},v.prototype.addCreditToNextFrame=function(e){if(r.A.defined("credit",e),e._isIon)return(0,c.A)(this._defaultCredit)||(this._defaultCredit=s.A.clone(E())),void(this._currentCesiumCredit=this._defaultCredit);let t;t=e.showOnScreen?this._currentFrameCredits.screenCredits:this._currentFrameCredits.lightboxCredits,T(this,t,e)},v.prototype.addDefaultCredit=function(e){r.A.defined("credit",e),(0,l.A)("CreditDisplay.addDefaultCredit","CreditDisplay.addDefaultCredit was deprecated in CesiumJS 1.105.  It will be removed in CesiumJS 1.107.  Use CreditDisplay.addStaticCredit instead.");const t=this._staticCredits;p(t,e)||(e.showOnScreen=!0,t.push(e))},v.prototype.addStaticCredit=function(e){r.A.defined("credit",e);const t=this._staticCredits;p(t,e)||t.push(e)},v.prototype.removeStaticCredit=function(e){r.A.defined("credit",e);const t=this._staticCredits,n=t.indexOf(e);-1!==n&&t.splice(n,1)},v.prototype.removeDefaultCredit=function(e){(0,l.A)("CreditDisplay.removeDefaultCredit","CreditDisplay.removeDefaultCredit was deprecated in CesiumJS 1.105.  It will be removed in CesiumJS 1.107.  Use CreditDisplay.addStaticCredit instead."),this.removeStaticCredit(e)},v.prototype.showLightbox=function(){this._lightbox.style.display="block",this._expanded=!0},v.prototype.hideLightbox=function(){this._lightbox.style.display="none",this._expanded=!1},v.prototype.update=function(){this._expanded&&function(e){const t=e._lightboxCredits,n=e.viewport.clientWidth,i=e.viewport.clientHeight;n!==e._lastViewportWidth&&(n<576?(t.className="cesium-credit-lightbox cesium-credit-lightbox-mobile",t.style.marginTop="0"):(t.className="cesium-credit-lightbox cesium-credit-lightbox-expanded",t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`),e._lastViewportWidth=n),n>=576&&i!==e._lastViewportHeight&&(t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`,e._lastViewportHeight=i)}(this)},v.prototype.beginFrame=function(){const e=this._currentFrameCredits;this._creditDisplayElementPoolIndex=0;const t=e.screenCredits,n=e.lightboxCredits;t.removeAll(),n.removeAll();const i=this._staticCredits;for(let e=0;e<i.length;++e){const o=i[e],r=o.showOnScreen?t:n;o._isIon&&s.A.equals(v.cesiumCredit,this._cesiumCredit)||T(this,r,o,Number.MAX_VALUE)}s.A.equals(v.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=s.A.clone(v.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit},v.prototype.endFrame=function(){const e=this._currentFrameCredits.screenCredits.values;y(this._screenContainer,e,this._delimiter,void 0);const t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?"inline":"none",y(this._creditList,t,void 0,"li"),function(e){const t=e._previousCesiumCredit,n=e._currentCesiumCredit;s.A.equals(n,t)||((0,c.A)(t)&&e._cesiumCreditContainer.removeChild(t.element),(0,c.A)(n)&&e._cesiumCreditContainer.appendChild(n.element),e._previousCesiumCredit=n)}(this)},v.prototype.destroy=function(){return this._lightbox.removeEventListener("click",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),(0,u.A)(this)},v.prototype.isDestroyed=function(){return!1},v._cesiumCredit=void 0,v._cesiumCreditInitialized=!1,Object.defineProperties(v,{cesiumCredit:{get:function(){return E(),v._cesiumCredit},set:function(e){v._cesiumCredit=e,v._cesiumCreditInitialized=!0}}}),v.CreditDisplayElement=f;const S=v},199744:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(267980),o=n(41476),r=n(433235),s=n(419061),a=n(491446),c=n(677354),l=n(605971),u=n(17117),d=n(788335),h=n(75200),A=n(331185),f=n(811203),p=n(65891),m=n(666775),_=n(65783),g=n(99479),y=n(612123),b=n(842153);function v(e){if(e=(0,s.A)(e,s.A.EMPTY_OBJECT),!(0,a.A)(e.camera))throw new l.A("options.camera is required.");this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=(0,s.A)(e.color,o.A.CYAN),this._updateOnChange=(0,s.A)(e.updateOnChange,!0),this.show=(0,s.A)(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const T=new i.A,w=new A.A,E=new g.A,S=new m.A,C=new _.A,x=new f.A,I=new p.A,P=new o.A,D=[1,1e5];v.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,n=this._outlinePrimitives;let s,c;if(this._updateOnChange){for(c=t.length,s=0;s<c;++s)n[s]=n[s]&&n[s].destroy(),t[s]=t[s]&&t[s].destroy();t.length=0,n.length=0}if(0===t.length){const e=this._camera,c=e.frustum;let l,p;l=c instanceof m.A?S:c instanceof _.A?C:c instanceof f.A?x:I,l=c.clone(l);let v=this._frustumSplits;!(0,a.A)(v)||v.length<=1?(v=D,v[0]=this._camera.frustum.near,v[1]=this._camera.frustum.far,p=1):p=v.length-1;const O=e.positionWC,L=e.directionWC,N=e.upWC;let M=e.rightWC;M=i.A.negate(M,T);const R=w;A.A.setColumn(R,0,M,R),A.A.setColumn(R,1,N,R),A.A.setColumn(R,2,L,R);const F=g.A.fromRotationMatrix(R,E);for(t.length=n.length=p,s=0;s<p;++s)l.near=v[s],l.far=v[s+1],t[s]=new b.A({geometryInstances:new h.A({geometry:new u.A({origin:O,orientation:F,frustum:l,_drawNearPlane:0===s}),attributes:{color:r.A.fromColor(o.A.fromAlpha(this._color,.1,P))},id:this.id,pickPrimitive:this}),appearance:new y.A({translucent:!0,flat:!0}),asynchronous:!1}),n[s]=new b.A({geometryInstances:new h.A({geometry:new d.A({origin:O,orientation:F,frustum:l,_drawNearPlane:0===s}),attributes:{color:r.A.fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new y.A({translucent:!1,flat:!0}),asynchronous:!1})}for(c=t.length,s=0;s<c;++s)n[s].update(e),t[s].update(e)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return(0,c.A)(this)};const O=v},809418:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(41476),o=n(377496),r=n(342875),s=n(302836),a=n(491446);function c(){this._cachedShowFrustumsShaders={}}const l=new i.A,u=new o.A;c.prototype.executeDebugShowFrustumsCommand=function(e,t,n){const c=t.shaderProgram.id;let d=this._cachedShowFrustumsShaders[c];(0,a.A)(d)||(d=function(e,t){const n=e.context,i=t,o=i.fragmentShaderSource.clone(),a=[];o.sources=o.sources.map((function(e){e=r.A.replaceMain(e,"czm_Debug_main");const t=/out_FragData_(\d+)/g;let n;for(;null!==(n=t.exec(e));)-1===a.indexOf(n[1])&&a.push(n[1]);return e}));const c=a.length;let l,u="";if(u+="uniform vec3 debugShowCommandsColor;\n",u+="uniform vec3 debugShowFrustumsColor;\n",u+="void main() \n{ \n    czm_Debug_main(); \n",c>0)for(l=0;l<c;++l)u+=`    out_FragData_${a[l]}.rgb *= debugShowCommandsColor;\n`,u+=`    out_FragData_${a[l]}.rgb *= debugShowFrustumsColor;\n`;else u+="    out_FragColor.rgb *= debugShowCommandsColor;\n",u+="    out_FragColor.rgb *= debugShowFrustumsColor;\n";u+="}",o.sources.push(u);const d=function(e){const t={},n=e.vertexAttributes;for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e].index);return t}(i);return s.A.fromCache({context:n,vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:o,attributeLocations:d})}(e,t.shaderProgram),this._cachedShowFrustumsShaders[c]=d);const h=o.A.shallowClone(t,u);h.shaderProgram=d,h.uniformMap=function(e,t){let n;return n=(0,a.A)(t.uniformMap)?t.uniformMap:{},(0,a.A)(n.debugShowCommandsColor)||(0,a.A)(n.debugShowFrustumsColor)||(n.debugShowCommandsColor=function(){return e.debugShowCommands?((0,a.A)(t._debugColor)||(t._debugColor=i.A.fromRandom()),t._debugColor):i.A.WHITE},n.debugShowFrustumsColor=function(){return e.debugShowFrustums?(l.red=1&t.debugOverlappingFrustums?1:0,l.green=2&t.debugOverlappingFrustums?1:0,l.blue=4&t.debugOverlappingFrustums?1:0,l.alpha=1,l):i.A.WHITE}),n}(e,t),h.execute(e.context,n)};const d=c},626355:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(660662),o=n(267980),r=n(571804),s=n(491446),a=n(520098),c=n(944479),l=n(305439),u=n(811203),d=n(402330),h=n(442790),A=n(377496),f=n(760866),p=n(40118),m=n(302836),_=n(342875),g=n(508380),y=n(710434),b=n(77202),v=n(62467),T=n(419061),w=n(610750);function E(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=(0,T.A)(e,0)}const S=a.A.supportsTypedArrays()?new Float32Array(12):[],C=new o.A,x=new o.A,I=new o.A,P=new o.A,D=new o.A;E.prototype.update=function(e){if(this._mode=e.mode,e.mode!==v.A.SCENE3D)return;const t=e.context,n=e.mapProjection.ellipsoid.radii,a=new w.A(n.x+this._ellipsoidOffset,n.y+this._ellipsoidOffset,n.z+this._ellipsoidOffset),T=e.useLogDepth;if((0,s.A)(this._command)||(this._rs=p.A.fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new A.A({renderState:this._rs,boundingVolume:new i.A(o.A.ZERO,a.maximumRadius),pass:f.A.OPAQUE,owner:this})),!(0,s.A)(this._sp)||this._useLogDepth!==T){this._useLogDepth=T;const e=new _.A({sources:[b.A]}),n=new _.A({sources:[y.A]});T&&(n.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")),this._sp=m.A.replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const E=function(e,t){const n=e.radii,i=t.camera;let r,s,a;if(i.frustum instanceof u.A)r=o.A.ZERO,s=i.rightWC,a=i.upWC;else{const t=i.positionWC,n=o.A.multiplyComponents(e.oneOverRadii,t,C),c=o.A.normalize(n,x),l=o.A.normalize(o.A.cross(o.A.UNIT_Z,n,I),I),u=o.A.normalize(o.A.cross(c,l,P),P),d=o.A.magnitude(n),h=Math.sqrt(d*d-1);r=o.A.multiplyByScalar(c,1/d,C);const A=h/d;s=o.A.multiplyByScalar(l,A,x),a=o.A.multiplyByScalar(u,A,I)}const c=o.A.add(r,a,D);o.A.subtract(c,s,c),o.A.multiplyComponents(n,c,c),o.A.pack(c,S,0);const l=o.A.subtract(r,a,D);o.A.subtract(l,s,l),o.A.multiplyComponents(n,l,l),o.A.pack(l,S,3);const d=o.A.add(r,a,D);o.A.add(d,s,d),o.A.multiplyComponents(n,d,d),o.A.pack(d,S,6);const h=o.A.subtract(r,a,D);return o.A.add(h,s,h),o.A.multiplyComponents(n,h,h),o.A.pack(h,S,9),S}(a,e);if((0,s.A)(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(E);else{const e=new c.A({attributes:{position:new l.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:E})},indices:[0,1,2,2,1,3],primitiveType:d.A.TRIANGLES});this._va=g.A.fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:h.A.DYNAMIC_DRAW}),this._command.vertexArray=this._va}},E.prototype.execute=function(e,t){this._mode===v.A.SCENE3D&&this._command.execute(e,t)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()};const O=E},384292:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(377496),r=n(40118),s=n(342875);function a(){}const c=/\bgl_FragDepth\b/,l=/\bdiscard\b/;a.createDepthOnlyDerivedCommand=function(e,t,n,a){let u,d;return(0,i.A)(a)||(a={}),(0,i.A)(a.depthOnlyCommand)&&(u=a.depthOnlyCommand.shaderProgram,d=a.depthOnlyCommand.renderState),a.depthOnlyCommand=o.A.shallowClone(t,a.depthOnlyCommand),(0,i.A)(u)&&a.shaderProgramId===t.shaderProgram.id?(a.depthOnlyCommand.shaderProgram=u,a.depthOnlyCommand.renderState=d):(a.depthOnlyCommand.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!(0,i.A)(n)){const i=t._attributeLocations;let o,r=t.fragmentShaderSource,a=!1;const u=r.sources;let d=u.length;for(o=0;o<d;++o)if(c.test(u[o])||l.test(u[o])){a=!0;break}let h=!1;const A=r.defines;for(d=A.length,o=0;o<d;++o)if("LOG_DEPTH"===A[o]){h=!0;break}let f;a||h?!a&&h&&(f="void main() \n{ \n    out_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",r=new s.A({defines:["LOG_DEPTH"],sources:[f]})):(f="void main() \n{ \n    out_FragColor = vec4(1.0); \n} \n",r=new s.A({sources:[f]})),n=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:i})}return n}(n,t.shaderProgram),a.depthOnlyCommand.renderState=function(e,t){const n=e._depthOnlyRenderStateCache;let o=n[t.id];if(!(0,i.A)(o)){const e=r.A.getState(t);e.depthMask=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o=r.A.fromCache(e),n[t.id]=o}return o}(e,t.renderState),a.shaderProgramId=t.shaderProgram.id),a};const u=/\s+czm_writeLogDepth\(/,d=/\s+czm_vertexLogDepth\(/;a.createLogDepthCommand=function(e,t,n){let r;return(0,i.A)(n)||(n={}),(0,i.A)(n.command)&&(r=n.command.shaderProgram),n.command=o.A.shallowClone(e,n.command),(0,i.A)(r)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=r:(n.command.shaderProgram=function(e,t){if(t.fragmentShaderSource.defines.indexOf("LOG_DEPTH_READ_ONLY")>=0)return t;let n=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!(0,i.A)(n)){const o=t._attributeLocations,r=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();let c,l;r.defines=(0,i.A)(r.defines)?r.defines.slice(0):[],r.defines.push("LOG_DEPTH"),a.defines=(0,i.A)(a.defines)?a.defines.slice(0):[],a.defines.push("LOG_DEPTH");let h=!1,A=r.sources,f=A.length;for(c=0;c<f;++c)if(d.test(A[c])){h=!0;break}if(!h){for(c=0;c<f;++c)A[c]=s.A.replaceMain(A[c],"czm_log_depth_main");l="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",A.push(l)}for(A=a.sources,f=A.length,h=!1,c=0;c<f;++c)u.test(A[c])&&(h=!0);-1!==a.defines.indexOf("LOG_DEPTH_WRITE")&&(h=!0);let p="";if(!h){for(c=0;c<f;c++)A[c]=s.A.replaceMain(A[c],"czm_log_depth_main");p+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}A.push(p),n=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:o})}return n}(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n},a.createPickDerivedCommand=function(e,t,n,a){let c,l;return(0,i.A)(a)||(a={}),(0,i.A)(a.pickCommand)&&(c=a.pickCommand.shaderProgram,l=a.pickCommand.renderState),a.pickCommand=o.A.shallowClone(t,a.pickCommand),(0,i.A)(c)&&a.shaderProgramId===t.shaderProgram.id?(a.pickCommand.shaderProgram=c,a.pickCommand.renderState=l):(a.pickCommand.shaderProgram=function(e,t,n){let o=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!(0,i.A)(o)){const i=t._attributeLocations;let r=t.fragmentShaderSource;const a=r.sources,c=a.length,l=`void main() \n{ \n    czm_non_pick_main(); \n    if (out_FragColor.a == 0.0) { \n        discard; \n    } \n    out_FragColor = ${n}; \n} \n`,u=new Array(c+1);for(let e=0;e<c;++e)u[e]=s.A.replaceMain(a[e],"czm_non_pick_main");u[c]=l,r=new s.A({sources:u,defines:r.defines}),o=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:i})}return o}(n,t.shaderProgram,t.pickId),a.pickCommand.renderState=function(e,t){const n=e.picking.pickRenderStateCache;let o=n[t.id];if(!(0,i.A)(o)){const e=r.A.getState(t);e.blending.enabled=!1,e.depthMask=!0,o=r.A.fromCache(e),n[t.id]=o}return o}(e,t.renderState),a.shaderProgramId=t.shaderProgram.id),a},a.createHdrCommand=function(e,t,n){let r;return(0,i.A)(n)||(n={}),(0,i.A)(n.command)&&(r=n.command.shaderProgram),n.command=o.A.shallowClone(e,n.command),(0,i.A)(r)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=r:(n.command.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!(0,i.A)(n)){const o=t._attributeLocations,r=t.vertexShaderSource.clone(),s=t.fragmentShaderSource.clone();r.defines=(0,i.A)(r.defines)?r.defines.slice(0):[],r.defines.push("HDR"),s.defines=(0,i.A)(s.defines)?s.defines.slice(0):[],s.defines.push("HDR"),n=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:o})}return n}(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n};const h=a},77191:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(677354),r=n(605971),s=n(367817),a=n(331185),c=n(99479);function l(e){if(!(0,i.A)(e))throw new r.A("scene is required.");this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function n(e){const n=e.alpha;if(!(0,i.A)(n))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=s.A.toRadians(n),t._beta=s.A.toRadians(e.beta),t._gamma=s.A.toRadians(e.gamma)}window.addEventListener("deviceorientation",n,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",n,!1)}}const u=new c.A,d=new c.A,h=new a.A;l.prototype.update=function(){if(!(0,i.A)(this._alpha))return;(0,i.A)(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,n=this._lastGamma-this._gamma;!function(e,t,n,i){const o=e.direction,r=e.right,s=e.up,l=c.A.fromAxisAngle(o,n,d),A=c.A.fromAxisAngle(r,i,u),f=c.A.multiply(A,l,A),p=c.A.fromAxisAngle(s,t,d);c.A.multiply(p,f,f);const m=a.A.fromQuaternion(f,h);a.A.multiplyByVector(m,r,r),a.A.multiplyByVector(m,s,s),a.A.multiplyByVector(m,o,o)}(this._scene.camera,-e,t,n),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._removeListener(),(0,o.A)(this)};const A=l},489970:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(267980),o=n(369031),r=n(41476),s=n(419061),a=n(605971);const c=function(e){if(o.A.typeOf.object("options",e),o.A.typeOf.object("options.direction",e.direction),i.A.equals(e.direction,i.A.ZERO))throw new a.A("options.direction cannot be zero-length");this.direction=i.A.clone(e.direction),this.color=r.A.clone((0,s.A)(e.color,r.A.WHITE)),this.intensity=(0,s.A)(e.intensity,1)}},253478:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446);function o(e){}let r;o.prototype.isReady=function(){return!0},o.prototype.shouldDiscardImage=function(e){return o.EMPTY_IMAGE===e},Object.defineProperties(o,{EMPTY_IMAGE:{get:function(){return(0,i.A)(r)||(r=new Image,r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),r}}});const s=o},836721:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(419061),o=n(491446),r=n(605971),s=n(85935),a=n(744603);function c(e){if(e=(0,i.A)(e,i.A.EMPTY_OBJECT),!(0,o.A)(e.missingImageUrl))throw new r.A("options.missingImageUrl is required.");if(!(0,o.A)(e.pixelsToCheck))throw new r.A("options.pixelsToCheck is required.");this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=a.A.createIfNeeded(e.missingImageUrl),n=this;t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then((function(t){(0,o.A)(t.blob)&&(n._missingImageByteLength=t.blob.size);let i=(0,s.A)(t);if(e.disableCheckIfAllPixelsAreTransparent){let n=!0;const o=t.width,r=e.pixelsToCheck;for(let e=0,t=r.length;n&&e<t;++e){const t=r[e];i[4*t.x+t.y*o+3]>0&&(n=!1)}n&&(i=void 0)}n._missingImagePixels=i,n._isReady=!0})).catch((function(){n._missingImagePixels=void 0,n._isReady=!0}))}c.prototype.isReady=function(){return this._isReady},c.prototype.shouldDiscardImage=function(e){if(!this._isReady)throw new r.A("shouldDiscardImage must not be called before the discard policy is ready.");const t=this._pixelsToCheck,n=this._missingImagePixels;if(!(0,o.A)(n))return!1;if((0,o.A)(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const i=(0,s.A)(e),a=e.width;for(let e=0,o=t.length;e<o;++e){const o=t[e],r=4*o.x+o.y*a;for(let e=0;e<4;++e){const t=r+e;if(i[t]!==n[t])return!1}}return!0};const l=c},445848:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(520098),r=n(971724);function s(){}s._maxDecodingConcurrency=Math.max(o.A.hardwareConcurrency-1,1),s._decoderTaskProcessor=void 0,s._taskProcessorReady=!1,s._getDecoderTaskProcessor=function(){if(!(0,i.A)(s._decoderTaskProcessor)){const e=new r.A("decodeDraco",s._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((function(){s._taskProcessorReady=!0})),s._decoderTaskProcessor=e}return s._decoderTaskProcessor},s.decodePointCloud=function(e){const t=s._getDecoderTaskProcessor();if(s._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},s.decodeBufferView=function(e){const t=s._getDecoderTaskProcessor();if(s._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])};const a=s},168976:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(660662),o=n(554630),r=n(267980),s=n(430346),a=n(419061),c=n(491446),l=n(677354),u=n(605971),d=n(584164),h=n(769534),A=n(442790),f=n(377496),p=n(760866),m=n(40118),_=n(302836),g=n(342875),y=n(508380),b=n(559352),v=n(437736),T=n(200646),w=n(527083),E=n(608191),S=n(62467);const C={position:0};function x(e){e=(0,a.A)(e,a.A.EMPTY_OBJECT),this.center=r.A.clone((0,a.A)(e.center,r.A.ZERO)),this._center=new r.A,this.radii=r.A.clone(e.radii),this._radii=new r.A,this._oneOverEllipsoidRadiiSquared=new r.A,this._boundingSphere=new i.A,this.modelMatrix=d.A.clone((0,a.A)(e.modelMatrix,d.A.IDENTITY)),this._modelMatrix=new d.A,this._computedModelMatrix=new d.A,this.show=(0,a.A)(e.show,!0),this.material=(0,a.A)(e.material,E.A.fromType(E.A.ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=(0,a.A)(e.debugShowBoundingVolume,!1),this.onlySunLighting=(0,a.A)(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=(0,a.A)(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new f.A({owner:(0,a.A)(e._owner,this)}),this._pickCommand=new f.A({owner:(0,a.A)(e._owner,this),pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}x.prototype.update=function(e){if(!this.show||e.mode!==S.A.SCENE3D||!(0,c.A)(this.center)||!(0,c.A)(this.radii))return;if(!(0,c.A)(this.material))throw new u.A("this.material must be defined.");const t=e.context,n=this.material.isTranslucent(),a=this._translucent!==n;(0,c.A)(this._rs)&&!a||(this._translucent=n,this._rs=m.A.fromCache({cull:{enabled:!0,face:w.A.FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!n&&t.fragmentDepth,blending:n?T.A.ALPHA_BLEND:void 0})),(0,c.A)(this._va)||(this._va=function(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if((0,c.A)(t))return t;const n=o.A.createGeometry(o.A.fromDimensions({dimensions:new r.A(2,2,2),vertexFormat:h.A.POSITION_ONLY}));return t=y.A.fromGeometry({context:e,geometry:n,attributeLocations:C,bufferUsage:A.A.STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}(t));let l=!1;const f=this.radii;if(!r.A.equals(this._radii,f)){r.A.clone(f,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(f.x*f.x),e.y=1/(f.y*f.y),e.z=1/(f.z*f.z),l=!0}d.A.equals(this.modelMatrix,this._modelMatrix)&&r.A.equals(this.center,this._center)||(d.A.clone(this.modelMatrix,this._modelMatrix),r.A.clone(this.center,this._center),d.A.multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),l=!0),l&&(r.A.clone(r.A.ZERO,this._boundingSphere.center),this._boundingSphere.radius=r.A.maximumComponent(f),i.A.transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const E=this._material!==this.material;this._material=this.material,this._material.update(t);const x=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const I=e.useLogDepth,P=this._useLogDepth!==I;this._useLogDepth=I;const D=this._colorCommand;let O,L;(E||x||a||P)&&(O=new g.A({sources:[v.A]}),L=new g.A({sources:[this.material.shaderSource,b.A]}),this.onlySunLighting&&L.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&L.defines.push("WRITE_DEPTH"),this._useLogDepth&&(O.defines.push("LOG_DEPTH"),L.defines.push("LOG_DEPTH")),this._sp=_.A.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:O,fragmentShaderSource:L,attributeLocations:C}),D.vertexArray=this._va,D.renderState=this._rs,D.shaderProgram=this._sp,D.uniformMap=(0,s.A)(this._uniforms,this.material._uniforms),D.executeInClosestFrustum=n);const N=e.commandList,M=e.passes;if(M.render&&(D.boundingVolume=this._boundingSphere,D.debugShowBoundingVolume=this.debugShowBoundingVolume,D.modelMatrix=this._computedModelMatrix,D.pass=n?p.A.TRANSLUCENT:p.A.OPAQUE,N.push(D)),M.pick){const e=this._pickCommand;(0,c.A)(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(E||x||!(0,c.A)(this._pickSP)||P)&&(O=new g.A({sources:[v.A]}),L=new g.A({sources:[this.material.shaderSource,b.A],pickColorQualifier:"uniform"}),this.onlySunLighting&&L.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&L.defines.push("WRITE_DEPTH"),this._useLogDepth&&(O.defines.push("LOG_DEPTH"),L.defines.push("LOG_DEPTH")),this._pickSP=_.A.replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:O,fragmentShaderSource:L,attributeLocations:C}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=(0,s.A)((0,s.A)(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=n),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=n?p.A.TRANSLUCENT:p.A.OPAQUE,N.push(e)}},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,l.A)(this)};const I=x},84269:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(786101),o=n(677354),r=n(605971);function s(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(s.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},readyPromise:{get:function(){return(0,i.A)("Empty3DTileContent.readyPromise","Empty3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Empty3DTileContent.ready to return true instead."),Promise.resolve(this)}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){throw new r.A("Empty3DTileContent cannot have content metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){throw new r.A("Empty3DTileContent cannot have group metadata")}}}),s.prototype.hasProperty=function(e,t){return!1},s.prototype.getFeature=function(e){},s.prototype.applyDebugSettings=function(e,t){},s.prototype.applyStyle=function(e){},s.prototype.update=function(e,t){},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return(0,o.A)(this)};const a=s},470622:(e,t,n)=>{"use strict";n.d(t,{A:()=>q});var i=n(434067),o=n(267980),r=n(626809),s=n(369031),a=n(41476),c=n(491446),l=n(605971),u=n(367817),d=n(123245);class h{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+h.version}static addUnaryOp(e){return h.max_unop_len=Math.max(e.length,h.max_unop_len),h.unary_ops[e]=1,h}static addBinaryOp(e,t,n){return h.max_binop_len=Math.max(e.length,h.max_binop_len),h.binary_ops[e]=t,n?h.right_associative.add(e):h.right_associative.delete(e),h}static addIdentifierChar(e){return h.additional_identifier_chars.add(e),h}static addLiteral(e,t){return h.literals[e]=t,h}static removeUnaryOp(e){return delete h.unary_ops[e],e.length===h.max_unop_len&&(h.max_unop_len=h.getMaxKeyLen(h.unary_ops)),h}static removeAllUnaryOps(){return h.unary_ops={},h.max_unop_len=0,h}static removeIdentifierChar(e){return h.additional_identifier_chars.delete(e),h}static removeBinaryOp(e){return delete h.binary_ops[e],e.length===h.max_binop_len&&(h.max_binop_len=h.getMaxKeyLen(h.binary_ops)),h.right_associative.delete(e),h}static removeAllBinaryOps(){return h.binary_ops={},h.max_binop_len=0,h}static removeLiteral(e){return delete h.literals[e],h}static removeAllLiterals(){return h.literals={},h}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new h(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map((e=>e.length)))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return h.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!h.binary_ops[String.fromCharCode(e)]||h.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return h.isIdentifierStart(e)||h.isDecimalDigit(e)}throwError(e){const t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(h.hooks[e]){const n={context:this,node:t};return h.hooks.run(e,n),n.node}return t}searchHook(e){if(h.hooks[e]){const t={context:this};return h.hooks[e].find((function(e){return e.call(t.context,t),t.node})),t.node}}gobbleSpaces(){let e=this.code;for(;e===h.SPACE_CODE||e===h.TAB_CODE||e===h.LF_CODE||e===h.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),t=1===e.length?e[0]:{type:h.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t,n,i=[];for(;this.index<this.expr.length;)if(t=this.code,t===h.SEMCOL_CODE||t===h.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())i.push(n);else if(this.index<this.expr.length){if(t===e)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,h.max_binop_len),t=e.length;for(;t>0;){if(h.binary_ops.hasOwnProperty(e)&&(!h.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!h.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,n,i,o,r,s,a,c;if(r=this.gobbleToken(),!r)return r;if(t=this.gobbleBinaryOp(),!t)return r;for(o={value:t,prec:h.binaryPrecedence(t),right_a:h.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),i=[r,o,s];t=this.gobbleBinaryOp();){if(n=h.binaryPrecedence(t),0===n){this.index-=t.length;break}o={value:t,prec:n,right_a:h.right_associative.has(t)},c=t;const a=e=>o.right_a&&e.right_a?n>e.prec:n<=e.prec;for(;i.length>2&&a(i[i.length-2]);)s=i.pop(),t=i.pop().value,r=i.pop(),e={type:h.BINARY_EXP,operator:t,left:r,right:s},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),i.push(o,e)}for(a=i.length-1,e=i[a];a>1;)e={type:h.BINARY_EXP,operator:i[a-1].value,left:i[a-2],right:e},a-=2;return e}gobbleToken(){let e,t,n,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,h.isDecimalDigit(e)||e===h.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===h.SQUOTE_CODE||e===h.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===h.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,h.max_unop_len),n=t.length;n>0;){if(h.unary_ops.hasOwnProperty(t)&&(!h.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!h.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=n;const e=this.gobbleToken();return e||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:h.UNARY_EXP,operator:t,argument:e,prefix:!0})}t=t.substr(0,--n)}h.isIdentifierStart(e)?(i=this.gobbleIdentifier(),h.literals.hasOwnProperty(i.name)?i={type:h.LITERAL,value:h.literals[i.name],raw:i.name}:i.name===h.this_str&&(i={type:h.THIS_EXP})):e===h.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===h.PERIOD_CODE||t===h.OBRACK_CODE||t===h.OPAREN_CODE||t===h.QUMARK_CODE;){let n;if(t===h.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==h.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===h.OBRACK_CODE?((e={type:h.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),t=this.code,t!==h.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===h.OPAREN_CODE?e={type:h.CALL_EXP,arguments:this.gobbleArguments(h.CPAREN_CODE),callee:e}:(t===h.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:h.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e,t,n="";for(;h.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(this.code===h.PERIOD_CODE)for(n+=this.expr.charAt(this.index++);h.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(n+=this.expr.charAt(this.index++),e=this.char,"+"!==e&&"-"!==e||(n+=this.expr.charAt(this.index++));h.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);h.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+n+this.char+")")}return t=this.code,h.isIdentifierStart(t)?this.throwError("Variable names cannot start with a number ("+n+this.char+")"):(t===h.PERIOD_CODE||1===n.length&&n.charCodeAt(0)===h.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:h.LITERAL,value:parseFloat(n),raw:n}}gobbleStringLiteral(){let e="";const t=this.index,n=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let t=this.expr.charAt(this.index++);if(t===n){i=!0;break}if("\\"===t)switch(t=this.expr.charAt(this.index++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:h.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(h.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,h.isIdentifierPart(e));)this.index++;return{type:h.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){const t=[];let n=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===e){n=!0,this.index++,e===h.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(o===h.COMMA_CODE){if(this.index++,i++,i!==t.length)if(e===h.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===h.CBRACK_CODE)for(let e=t.length;e<i;e++)t.push(null)}else if(t.length!==i&&0!==i)this.throwError("Expected comma");else{const e=this.gobbleExpression();e&&e.type!==h.COMPOUND||this.throwError("Expected comma"),t.push(e)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(h.CPAREN_CODE);if(this.code===h.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:h.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:h.ARRAY_EXP,elements:this.gobbleArguments(h.CBRACK_CODE)}}}const A=new class{add(e,t,n){if("string"!=typeof arguments[0])for(let e in arguments[0])this.add(e,arguments[0][e],arguments[1]);else(Array.isArray(e)?e:[e]).forEach((function(e){this[e]=this[e]||[],t&&this[e][n?"unshift":"push"](t)}),this)}run(e,t){this[e]=this[e]||[],this[e].forEach((function(e){e.call(t&&t.context?t.context:t,t)}))}};Object.assign(h,{hooks:A,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach((e=>{if("object"!=typeof e||!e.name||!e.init)throw new Error("Invalid JSEP plugin format");this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)}))}}(h),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),h.max_unop_len=h.getMaxKeyLen(h.unary_ops),h.max_binop_len=h.getMaxKeyLen(h.binary_ops);const f=e=>new h(e).parse(),p=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(h).filter((e=>!p.includes(e)&&void 0===f[e])).forEach((e=>{f[e]=h[e]})),f.Jsep=h;var m={name:"ternary",init(e){e.hooks.add("after-expression",(function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;const n=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:n,consequent:i,alternate:o},n.operator&&e.binary_ops[n.operator]<=.9){let i=n;for(;i.right.operator&&e.binary_ops[i.right.operator]<=.9;)i=i.right;t.node.test=i.right,i.right=t.node,t.node=n}}else this.throwError("Expected :")}}))}};f.plugins.register(m);var _=n(203576);function g(e,t){let n;s.A.typeOf.string("expression",e),this._expression=e,e=function(e,t){if(!(0,c.A)(t))return e;for(const n in t)if(t.hasOwnProperty(n)){const i=new RegExp(`\\$\\{${n}\\}`,"g"),o=`(${t[n]})`;(0,c.A)(o)&&(e=e.replace(i,o))}return e}(e,t),e=function(e){let t=e,n="",i=t.indexOf("${");for(;i>=0;){const e=t.indexOf("'"),o=t.indexOf('"');let r;if(e>=0&&e<i)r=t.indexOf("'",e+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else if(o>=0&&o<i)r=t.indexOf('"',o+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else{n+=t.substr(0,i);const e=t.indexOf("}");if(e<0)throw new d.A("Unmatched {.");n+=`czm_${t.substr(i+2,e-(i+2))}`,t=t.substr(e+1),i=t.indexOf("${")}}return n+=t,n}(function(e){return e.replace(w,E)}(e)),f.addBinaryOp("=~",0),f.addBinaryOp("!~",0);try{n=f(e)}catch(e){throw new d.A(e)}this._runtimeAst=F(this,n)}Object.defineProperties(g.prototype,{expression:{get:function(){return this._expression}}});const y={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new i.A],cartesian3Array:[new o.A],cartesian4Array:[new r.A],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new i.A),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new o.A),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new r.A),this.cartesian4Array[this.cartesian4Index++]}};g.prototype.evaluate=function(e,t){y.reset();const n=this._runtimeAst.evaluate(e);return t instanceof a.A&&n instanceof r.A?a.A.fromCartesian4(n,t):n instanceof i.A||n instanceof o.A||n instanceof r.A?n.clone(t):n},g.prototype.evaluateColor=function(e,t){y.reset();const n=this._runtimeAst.evaluate(e);return a.A.fromCartesian4(n,t)},g.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e}\n{\n    return ${o};\n}\n`,o},g.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},g.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter((function(e,t,n){return n.indexOf(e)===t})),e};const b=["!","-","+"],v=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],T=/\${(.*?)}/g,w=/\\/g,E="@#%",S=/@#%/g,C=new a.A,x={abs:D(Math.abs),sqrt:D(Math.sqrt),cos:D(Math.cos),sin:D(Math.sin),tan:D(Math.tan),acos:D(Math.acos),asin:D(Math.asin),atan:D(Math.atan),radians:D(u.A.toRadians),degrees:D(u.A.toDegrees),sign:D(u.A.sign),floor:D(Math.floor),ceil:D(Math.ceil),round:D(Math.round),exp:D(Math.exp),exp2:D((function(e){return Math.pow(2,e)})),log:D(Math.log),log2:D((function(e){return u.A.log2(e)})),fract:D((function(e){return e-Math.floor(e)})),length:function(e,t){if("number"==typeof t)return Math.abs(t);if(t instanceof i.A)return i.A.magnitude(t);if(t instanceof o.A)return o.A.magnitude(t);if(t instanceof r.A)return r.A.magnitude(t);throw new d.A(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)},normalize:function(e,t){if("number"==typeof t)return 1;if(t instanceof i.A)return i.A.normalize(t,y.getCartesian2());if(t instanceof o.A)return o.A.normalize(t,y.getCartesian3());if(t instanceof r.A)return r.A.normalize(t,y.getCartesian4());throw new d.A(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}},I={atan2:O(Math.atan2,!1),pow:O(Math.pow,!1),min:O(Math.min,!0),max:O(Math.max,!0),distance:function(e,t,n){if("number"==typeof t&&"number"==typeof n)return Math.abs(t-n);if(t instanceof i.A&&n instanceof i.A)return i.A.distance(t,n);if(t instanceof o.A&&n instanceof o.A)return o.A.distance(t,n);if(t instanceof r.A&&n instanceof r.A)return r.A.distance(t,n);throw new d.A(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},dot:function(e,t,n){if("number"==typeof t&&"number"==typeof n)return t*n;if(t instanceof i.A&&n instanceof i.A)return i.A.dot(t,n);if(t instanceof o.A&&n instanceof o.A)return o.A.dot(t,n);if(t instanceof r.A&&n instanceof r.A)return r.A.dot(t,n);throw new d.A(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},cross:function(e,t,n){if(t instanceof o.A&&n instanceof o.A)return o.A.cross(t,n,y.getCartesian3());throw new d.A(`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${n}.`)}},P={clamp:L(u.A.clamp,!0),mix:L(u.A.lerp,!0)};function D(e){return function(t,n){if("number"==typeof n)return e(n);if(n instanceof i.A)return i.A.fromElements(e(n.x),e(n.y),y.getCartesian2());if(n instanceof o.A)return o.A.fromElements(e(n.x),e(n.y),e(n.z),y.getCartesian3());if(n instanceof r.A)return r.A.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),y.getCartesian4());throw new d.A(`Function "${t}" requires a vector or number argument. Argument is ${n}.`)}}function O(e,t){return function(n,s,a){if(t&&"number"==typeof a){if("number"==typeof s)return e(s,a);if(s instanceof i.A)return i.A.fromElements(e(s.x,a),e(s.y,a),y.getCartesian2());if(s instanceof o.A)return o.A.fromElements(e(s.x,a),e(s.y,a),e(s.z,a),y.getCartesian3());if(s instanceof r.A)return r.A.fromElements(e(s.x,a),e(s.y,a),e(s.z,a),e(s.w,a),y.getCartesian4())}if("number"==typeof s&&"number"==typeof a)return e(s,a);if(s instanceof i.A&&a instanceof i.A)return i.A.fromElements(e(s.x,a.x),e(s.y,a.y),y.getCartesian2());if(s instanceof o.A&&a instanceof o.A)return o.A.fromElements(e(s.x,a.x),e(s.y,a.y),e(s.z,a.z),y.getCartesian3());if(s instanceof r.A&&a instanceof r.A)return r.A.fromElements(e(s.x,a.x),e(s.y,a.y),e(s.z,a.z),e(s.w,a.w),y.getCartesian4());throw new d.A(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${s} and ${a}.`)}}function L(e,t){return function(n,s,a,c){if(t&&"number"==typeof c){if("number"==typeof s&&"number"==typeof a)return e(s,a,c);if(s instanceof i.A&&a instanceof i.A)return i.A.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),y.getCartesian2());if(s instanceof o.A&&a instanceof o.A)return o.A.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),e(s.z,a.z,c),y.getCartesian3());if(s instanceof r.A&&a instanceof r.A)return r.A.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),e(s.z,a.z,c),e(s.w,a.w,c),y.getCartesian4())}if("number"==typeof s&&"number"==typeof a&&"number"==typeof c)return e(s,a,c);if(s instanceof i.A&&a instanceof i.A&&c instanceof i.A)return i.A.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),y.getCartesian2());if(s instanceof o.A&&a instanceof o.A&&c instanceof o.A)return o.A.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),e(s.z,a.z,c.z),y.getCartesian3());if(s instanceof r.A&&a instanceof r.A&&c instanceof r.A)return r.A.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),e(s.z,a.z,c.z),e(s.w,a.w,c.w),y.getCartesian4());throw new d.A(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${s}, ${a}, and ${c}.`)}}function N(e,t,n,i,o){var r;this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,(r=this)._type===_.A.CONDITIONAL?r.evaluate=r._evaluateConditional:r._type===_.A.FUNCTION_CALL?"test"===r._value?r.evaluate=r._evaluateRegExpTest:"exec"===r._value?r.evaluate=r._evaluateRegExpExec:"toString"===r._value&&(r.evaluate=r._evaluateToString):r._type===_.A.UNARY?"!"===r._value?r.evaluate=r._evaluateNot:"-"===r._value?r.evaluate=r._evaluateNegative:"+"===r._value?r.evaluate=r._evaluatePositive:"isNaN"===r._value?r.evaluate=r._evaluateNaN:"isFinite"===r._value?r.evaluate=r._evaluateIsFinite:"isExactClass"===r._value?r.evaluate=r._evaluateIsExactClass:"isClass"===r._value?r.evaluate=r._evaluateIsClass:"getExactClassName"===r._value?r.evaluate=r._evaluateGetExactClassName:"Boolean"===r._value?r.evaluate=r._evaluateBooleanConversion:"Number"===r._value?r.evaluate=r._evaluateNumberConversion:"String"===r._value?r.evaluate=r._evaluateStringConversion:(0,c.A)(x[r._value])&&(r.evaluate=function(e){const t=x[e];return function(n){const i=this._left.evaluate(n);return t(e,i)}}(r._value)):r._type===_.A.BINARY?"+"===r._value?r.evaluate=r._evaluatePlus:"-"===r._value?r.evaluate=r._evaluateMinus:"*"===r._value?r.evaluate=r._evaluateTimes:"/"===r._value?r.evaluate=r._evaluateDivide:"%"===r._value?r.evaluate=r._evaluateMod:"==="===r._value?r.evaluate=r._evaluateEqualsStrict:"!=="===r._value?r.evaluate=r._evaluateNotEqualsStrict:"<"===r._value?r.evaluate=r._evaluateLessThan:"<="===r._value?r.evaluate=r._evaluateLessThanOrEquals:">"===r._value?r.evaluate=r._evaluateGreaterThan:">="===r._value?r.evaluate=r._evaluateGreaterThanOrEquals:"&&"===r._value?r.evaluate=r._evaluateAnd:"||"===r._value?r.evaluate=r._evaluateOr:"=~"===r._value?r.evaluate=r._evaluateRegExpMatch:"!~"===r._value?r.evaluate=r._evaluateRegExpNotMatch:(0,c.A)(I[r._value])&&(r.evaluate=function(e){const t=I[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n);return t(e,i,o)}}(r._value)):r._type===_.A.TERNARY?r.evaluate=function(e){const t=P[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n),r=this._test.evaluate(n);return t(e,i,o,r)}}(r._value):r._type===_.A.MEMBER?"brackets"===r._value?r.evaluate=r._evaluateMemberBrackets:r.evaluate=r._evaluateMemberDot:r._type===_.A.ARRAY?r.evaluate=r._evaluateArray:r._type===_.A.VARIABLE?r.evaluate=r._evaluateVariable:r._type===_.A.VARIABLE_IN_STRING?r.evaluate=r._evaluateVariableString:r._type===_.A.LITERAL_COLOR?r.evaluate=r._evaluateLiteralColor:r._type===_.A.LITERAL_VECTOR?r.evaluate=r._evaluateLiteralVector:r._type===_.A.LITERAL_STRING?r.evaluate=r._evaluateLiteralString:r._type===_.A.REGEX?r.evaluate=r._evaluateRegExp:r._type===_.A.BUILTIN_VARIABLE?"tiles3d_tileset_time"===r._value&&(r.evaluate=B):r.evaluate=r._evaluateLiteral}function M(e){return e.replace(S,"\\")}function R(e){return e._type>=_.A.LITERAL_NULL}function F(e,t){let n,i,o,r;if("Literal"===t.type)n=function(e){const t=typeof e.value;return null===e.value?new N(_.A.LITERAL_NULL,null):"boolean"===t?new N(_.A.LITERAL_BOOLEAN,e.value):"number"===t?new N(_.A.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new N(_.A.VARIABLE_IN_STRING,e.value):new N(_.A.LITERAL_STRING,M(e.value)):void 0}(t);else if("CallExpression"===t.type)n=function(e,t){const n=t.arguments,i=n.length;let o,r,s,a;if("MemberExpression"===t.callee.type){o=t.callee.property.name;const l=t.callee.object;if("test"===o||"exec"===o){if(!(0,c.A)(l.callee)||"regExp"!==l.callee.name)throw new d.A(`${o} is not a function.`);return 0===i?"test"===o?new N(_.A.LITERAL_BOOLEAN,!1):new N(_.A.LITERAL_NULL,null):(s=F(e,l),a=F(e,n[0]),new N(_.A.FUNCTION_CALL,o,s,a))}if("toString"===o)return r=F(e,l),new N(_.A.FUNCTION_CALL,o,r);throw new d.A(`Unexpected function call "${o}".`)}if(o=t.callee.name,"color"===o){if(0===i)return new N(_.A.LITERAL_COLOR,o);if(r=F(e,n[0]),(0,c.A)(n[1])){const t=F(e,n[1]);return new N(_.A.LITERAL_COLOR,o,[r,t])}return new N(_.A.LITERAL_COLOR,o,[r])}if("rgb"===o||"hsl"===o){if(i<3)throw new d.A(`${o} requires three arguments.`);return r=[F(e,n[0]),F(e,n[1]),F(e,n[2])],new N(_.A.LITERAL_COLOR,o,r)}if("rgba"===o||"hsla"===o){if(i<4)throw new d.A(`${o} requires four arguments.`);return r=[F(e,n[0]),F(e,n[1]),F(e,n[2]),F(e,n[3])],new N(_.A.LITERAL_COLOR,o,r)}if("vec2"===o||"vec3"===o||"vec4"===o){r=new Array(i);for(let t=0;t<i;++t)r[t]=F(e,n[t]);return new N(_.A.LITERAL_VECTOR,o,r)}if("isNaN"===o||"isFinite"===o)return 0===i?new N(_.A.LITERAL_BOOLEAN,"isNaN"===o):(r=F(e,n[0]),new N(_.A.UNARY,o,r));if("isExactClass"===o||"isClass"===o){if(i<1||i>1)throw new d.A(`${o} requires exactly one argument.`);return r=F(e,n[0]),new N(_.A.UNARY,o,r)}if("getExactClassName"===o){if(i>0)throw new d.A(`${o} does not take any argument.`);return new N(_.A.UNARY,o)}if((0,c.A)(x[o])){if(1!==i)throw new d.A(`${o} requires exactly one argument.`);return r=F(e,n[0]),new N(_.A.UNARY,o,r)}if((0,c.A)(I[o])){if(2!==i)throw new d.A(`${o} requires exactly two arguments.`);return s=F(e,n[0]),a=F(e,n[1]),new N(_.A.BINARY,o,s,a)}if((0,c.A)(P[o])){if(3!==i)throw new d.A(`${o} requires exactly three arguments.`);s=F(e,n[0]),a=F(e,n[1]);const t=F(e,n[2]);return new N(_.A.TERNARY,o,s,a,t)}if("Boolean"===o)return 0===i?new N(_.A.LITERAL_BOOLEAN,!1):(r=F(e,n[0]),new N(_.A.UNARY,o,r));if("Number"===o)return 0===i?new N(_.A.LITERAL_NUMBER,0):(r=F(e,n[0]),new N(_.A.UNARY,o,r));if("String"===o)return 0===i?new N(_.A.LITERAL_STRING,""):(r=F(e,n[0]),new N(_.A.UNARY,o,r));if("regExp"===o)return function(e,t){const n=t.arguments;if(0===n.length)return new N(_.A.LITERAL_REGEX,new RegExp);const i=F(e,n[0]);let o;if(n.length>1){const t=F(e,n[1]);if(R(i)&&R(t)){try{o=new RegExp(M(String(i._value)),t._value)}catch(e){throw new d.A(e)}return new N(_.A.LITERAL_REGEX,o)}return new N(_.A.REGEX,i,t)}if(R(i)){try{o=new RegExp(M(String(i._value)))}catch(e){throw new d.A(e)}return new N(_.A.LITERAL_REGEX,o)}return new N(_.A.REGEX,i)}(e,t);throw new d.A(`Unexpected function call "${o}".`)}(e,t);else if("Identifier"===t.type)n=function(e){if("czm_"===e.name.substr(0,4)){const t=e.name.substr(4);return"tiles3d_"===t.substr(0,8)?new N(_.A.BUILTIN_VARIABLE,t):new N(_.A.VARIABLE,t)}if("NaN"===e.name)return new N(_.A.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new N(_.A.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new N(_.A.LITERAL_UNDEFINED,void 0);throw new d.A(`${e.name} is not defined.`)}(t);else if("UnaryExpression"===t.type){i=t.operator;const o=F(e,t.argument);if(!(b.indexOf(i)>-1))throw new d.A(`Unexpected operator "${i}".`);n=new N(_.A.UNARY,i,o)}else if("BinaryExpression"===t.type){if(i=t.operator,o=F(e,t.left),r=F(e,t.right),!(v.indexOf(i)>-1))throw new d.A(`Unexpected operator "${i}".`);n=new N(_.A.BINARY,i,o,r)}else if("LogicalExpression"===t.type)i=t.operator,o=F(e,t.left),r=F(e,t.right),v.indexOf(i)>-1&&(n=new N(_.A.BINARY,i,o,r));else if("ConditionalExpression"===t.type){const i=F(e,t.test);o=F(e,t.consequent),r=F(e,t.alternate),n=new N(_.A.CONDITIONAL,"?",o,r,i)}else if("MemberExpression"===t.type)n=function(e,t){if("Math"===t.object.name)return function(e){const t=e.property.name;return"PI"===t?new N(_.A.LITERAL_NUMBER,Math.PI):"E"===t?new N(_.A.LITERAL_NUMBER,Math.E):void 0}(t);if("Number"===t.object.name)return function(e){if("POSITIVE_INFINITY"===e.property.name)return new N(_.A.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}(t);let n;const i=F(e,t.object);return t.computed?(n=F(e,t.property),new N(_.A.MEMBER,"brackets",i,n)):(n=new N(_.A.LITERAL_STRING,t.property.name),new N(_.A.MEMBER,"dot",i,n))}(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new d.A("Provide exactly one expression."):new d.A("Cannot parse expression.");{const i=[];for(let n=0;n<t.elements.length;n++)i[n]=F(e,t.elements[n]);n=new N(_.A.ARRAY,i)}}return n}function B(e){return(0,c.A)(e)?e.content.tileset.timeSinceLoad:0}function U(e,t){if((0,c.A)(e))return e.getPropertyInherited(t)}function k(e){return"feature"===e._value}function V(e){const t=e._left,n=t.length;for(let e=0;e<n;++e)if(t[e]._type!==_.A.LITERAL_NUMBER)return;const i=t[0]._value,o=t[1]._value,r=t[2]._value,s=4===n?t[3]._value:1;return a.A.fromHsl(i,o,r,s,C)}function H(e){const t=e._left,n=t.length;for(let e=0;e<n;++e)if(t[e]._type!==_.A.LITERAL_NUMBER)return;const i=C;return i.red=t[0]._value/255,i.green=t[1]._value/255,i.blue=t[2]._value/255,i.alpha=4===n?t[3]._value:1,i}function z(e){return e%1==0?e.toFixed(1):e.toString()}function G(e){return`vec4(${z(e.red)}, ${z(e.green)}, ${z(e.blue)}, ${z(e.alpha)})`}function j(e,t,n,i){const o=e.length,r=new Array(o);for(let s=0;s<o;++s)r[s]=e[s].getShaderExpression(t,n,i);return r}function W(e,t){return(0,c.A)(t[e])?t[e]:g.NULL_SENTINEL}N.prototype._evaluateLiteral=function(){return this._value},N.prototype._evaluateLiteralColor=function(e){const t=C,n=this._left;if("color"===this._value)(0,c.A)(n)?n.length>1?(a.A.fromCssColorString(n[0].evaluate(e),t),t.alpha=n[1].evaluate(e)):a.A.fromCssColorString(n[0].evaluate(e),t):a.A.fromBytes(255,255,255,255,t);else if("rgb"===this._value)a.A.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),255,t);else if("rgba"===this._value){const i=255*n[3].evaluate(e);a.A.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),i,t)}else"hsl"===this._value?a.A.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),1,t):"hsla"===this._value&&a.A.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),n[3].evaluate(e),t);return r.A.fromColor(t,y.getCartesian4())},N.prototype._evaluateLiteralVector=function(e){const t=y.getArray(),n=this._value,s=this._left,a=s.length;for(let c=0;c<a;++c){const a=s[c].evaluate(e);if("number"==typeof a)t.push(a);else if(a instanceof i.A)t.push(a.x,a.y);else if(a instanceof o.A)t.push(a.x,a.y,a.z);else{if(!(a instanceof r.A))throw new d.A(`${n} argument must be a vector or number. Argument is ${a}.`);t.push(a.x,a.y,a.z,a.w)}}const c=t.length,l=parseInt(n.charAt(3));if(0===c)throw new d.A(`Invalid ${n} constructor. No valid arguments.`);if(c<l&&c>1)throw new d.A(`Invalid ${n} constructor. Not enough arguments.`);if(c>l&&a>1)throw new d.A(`Invalid ${n} constructor. Too many arguments.`);if(1===c){const e=t[0];t.push(e,e,e)}return"vec2"===n?i.A.fromArray(t,0,y.getCartesian2()):"vec3"===n?o.A.fromArray(t,0,y.getCartesian3()):"vec4"===n?r.A.fromArray(t,0,y.getCartesian4()):void 0},N.prototype._evaluateLiteralString=function(){return this._value},N.prototype._evaluateVariableString=function(e){let t=this._value,n=T.exec(t);for(;null!==n;){const i=n[0];let o=U(e,n[1]);(0,c.A)(o)||(o=""),t=t.replace(i,o),n=T.exec(t)}return t},N.prototype._evaluateVariable=function(e){return U(e,this._value)},N.prototype._evaluateMemberDot=function(e){if(k(this._left))return U(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,c.A)(t))return;const n=this._right.evaluate(e);if(t instanceof i.A||t instanceof o.A||t instanceof r.A){if("r"===n)return t.x;if("g"===n)return t.y;if("b"===n)return t.z;if("a"===n)return t.w}return t[n]},N.prototype._evaluateMemberBrackets=function(e){if(k(this._left))return U(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,c.A)(t))return;const n=this._right.evaluate(e);if(t instanceof i.A||t instanceof o.A||t instanceof r.A){if(0===n||"r"===n)return t.x;if(1===n||"g"===n)return t.y;if(2===n||"b"===n)return t.z;if(3===n||"a"===n)return t.w}return t[n]},N.prototype._evaluateArray=function(e){const t=[];for(let n=0;n<this._value.length;n++)t[n]=this._value[n].evaluate(e);return t},N.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new d.A(`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},N.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof i.A)return i.A.negate(t,y.getCartesian2());if(t instanceof o.A)return o.A.negate(t,y.getCartesian3());if(t instanceof r.A)return r.A.negate(t,y.getCartesian4());if("number"==typeof t)return-t;throw new d.A(`Operator "-" requires a vector or number argument. Argument is ${t}.`)},N.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof i.A||t instanceof o.A||t instanceof r.A||"number"==typeof t))throw new d.A(`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},N.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.A(`Operator "<" requires number arguments. Arguments are ${t} and ${n}.`);return t<n},N.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.A(`Operator "<=" requires number arguments. Arguments are ${t} and ${n}.`);return t<=n},N.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.A(`Operator ">" requires number arguments. Arguments are ${t} and ${n}.`);return t>n},N.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new d.A(`Operator ">=" requires number arguments. Arguments are ${t} and ${n}.`);return t>=n},N.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new d.A(`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const n=this._right.evaluate(e);if("boolean"!=typeof n)throw new d.A(`Operator "||" requires boolean arguments. Second argument is ${n}.`);return t||n},N.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new d.A(`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const n=this._right.evaluate(e);if("boolean"!=typeof n)throw new d.A(`Operator "&&" requires boolean arguments. Second argument is ${n}.`);return t&&n},N.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.add(t,n,y.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.add(t,n,y.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.add(t,n,y.getCartesian4());if("string"==typeof t||"string"==typeof n)return t+n;if("number"==typeof t&&"number"==typeof n)return t+n;throw new d.A(`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${n}.`)},N.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.subtract(t,n,y.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.subtract(t,n,y.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.subtract(t,n,y.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t-n;throw new d.A(`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},N.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.multiplyComponents(t,n,y.getCartesian2());if(n instanceof i.A&&"number"==typeof t)return i.A.multiplyByScalar(n,t,y.getCartesian2());if(t instanceof i.A&&"number"==typeof n)return i.A.multiplyByScalar(t,n,y.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.multiplyComponents(t,n,y.getCartesian3());if(n instanceof o.A&&"number"==typeof t)return o.A.multiplyByScalar(n,t,y.getCartesian3());if(t instanceof o.A&&"number"==typeof n)return o.A.multiplyByScalar(t,n,y.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.multiplyComponents(t,n,y.getCartesian4());if(n instanceof r.A&&"number"==typeof t)return r.A.multiplyByScalar(n,t,y.getCartesian4());if(t instanceof r.A&&"number"==typeof n)return r.A.multiplyByScalar(t,n,y.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t*n;throw new d.A(`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${n}.`)},N.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.divideComponents(t,n,y.getCartesian2());if(t instanceof i.A&&"number"==typeof n)return i.A.divideByScalar(t,n,y.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.divideComponents(t,n,y.getCartesian3());if(t instanceof o.A&&"number"==typeof n)return o.A.divideByScalar(t,n,y.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.divideComponents(t,n,y.getCartesian4());if(t instanceof r.A&&"number"==typeof n)return r.A.divideByScalar(t,n,y.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t/n;throw new d.A(`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${n}.`)},N.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.fromElements(t.x%n.x,t.y%n.y,y.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,y.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,t.w%n.w,y.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t%n;throw new d.A(`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},N.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof i.A&&t instanceof i.A||n instanceof o.A&&t instanceof o.A||n instanceof r.A&&t instanceof r.A?t.equals(n):t===n},N.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof i.A&&t instanceof i.A||n instanceof o.A&&t instanceof o.A||n instanceof r.A&&t instanceof r.A?!t.equals(n):t!==n},N.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!=typeof t)throw new d.A(`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},N.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},N.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},N.prototype._evaluateIsExactClass=function(e){return!!(0,c.A)(e)&&e.isExactClass(this._left.evaluate(e))},N.prototype._evaluateIsClass=function(e){return!!(0,c.A)(e)&&e.isClass(this._left.evaluate(e))},N.prototype._evaluateGetExactClassName=function(e){if((0,c.A)(e))return e.getExactClassName()},N.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},N.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},N.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},N.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let n,i="";(0,c.A)(this._left)&&(i=this._left.evaluate(e));try{n=new RegExp(t,i)}catch(e){throw new d.A(e)}return n},N.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof n))throw new d.A(`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);return t.test(n)},N.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof n)return t.test(n);if(n instanceof RegExp&&"string"==typeof t)return n.test(t);throw new d.A(`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},N.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof n)return!t.test(n);if(n instanceof RegExp&&"string"==typeof t)return!n.test(t);throw new d.A(`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},N.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof n))throw new d.A(`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);const i=t.exec(n);return(0,c.A)(i)?i[1]:null},N.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof i.A||t instanceof o.A||t instanceof r.A)return String(t);throw new d.A(`Unexpected function call "${this._value}".`)},g.NULL_SENTINEL="czm_infinity",N.prototype.getShaderExpression=function(e,t,n){let i,o,r,s;const u=this._type;let h,A,f,p=this._value;switch((0,c.A)(this._left)&&(o=Array.isArray(this._left)?j(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),(0,c.A)(this._right)&&(r=this._right.getShaderExpression(e,t,this)),(0,c.A)(this._test)&&(s=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(p=j(this._value,e,t,this)),u){case _.A.VARIABLE:if(k(this))return;return W(p,e);case _.A.UNARY:if("Boolean"===p)return`bool(${o})`;if("Number"===p)return`float(${o})`;if("round"===p)return`floor(${o} + 0.5)`;if((0,c.A)(x[p]))return`${p}(${o})`;if("isNaN"===p)return`(${o} != ${o})`;if("isFinite"===p)return`(abs(${o}) < czm_infinity)`;if("String"===p||"isExactClass"===p||"isClass"===p||"getExactClassName"===p)throw new d.A(`Error generating style shader: "${p}" is not supported.`);return p+o;case _.A.BINARY:return"%"===p?`mod(${o}, ${r})`:"==="===p?`(${o} == ${r})`:"!=="===p?`(${o} != ${r})`:"atan2"===p?`atan(${o}, ${r})`:(0,c.A)(I[p])?`${p}(${o}, ${r})`:`(${o} ${p} ${r})`;case _.A.TERNARY:if((0,c.A)(P[p]))return`${p}(${o}, ${r}, ${s})`;break;case _.A.CONDITIONAL:return`(${s} ? ${o} : ${r})`;case _.A.MEMBER:return k(this._left)?W(r,e):"r"===r||"x"===r||"0.0"===r?`${o}[0]`:"g"===r||"y"===r||"1.0"===r?`${o}[1]`:"b"===r||"z"===r||"2.0"===r?`${o}[2]`:"a"===r||"w"===r||"3.0"===r?`${o}[3]`:`${o}[int(${r})]`;case _.A.FUNCTION_CALL:throw new d.A(`Error generating style shader: "${p}" is not supported.`);case _.A.ARRAY:if(4===p.length)return`vec4(${p[0]}, ${p[1]}, ${p[2]}, ${p[3]})`;if(3===p.length)return`vec3(${p[0]}, ${p[1]}, ${p[2]})`;if(2===p.length)return`vec2(${p[0]}, ${p[1]})`;throw new d.A("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case _.A.REGEX:throw new d.A("Error generating style shader: Regular expressions are not supported.");case _.A.VARIABLE_IN_STRING:throw new d.A("Error generating style shader: Converting a variable to a string is not supported.");case _.A.LITERAL_NULL:return g.NULL_SENTINEL;case _.A.LITERAL_BOOLEAN:return p?"true":"false";case _.A.LITERAL_NUMBER:return z(p);case _.A.LITERAL_STRING:if((0,c.A)(n)&&n._type===_.A.MEMBER&&("r"===p||"g"===p||"b"===p||"a"===p||"x"===p||"y"===p||"z"===p||"w"===p||k(n._left)))return p;if(i=a.A.fromCssColorString(p,C),(0,c.A)(i))return function(e){return`vec3(${z(e.red)}, ${z(e.green)}, ${z(e.blue)})`}(i);throw new d.A("Error generating style shader: String literals are not supported.");case _.A.LITERAL_COLOR:if(h=o,"color"===p){if(!(0,c.A)(h))return"vec4(1.0)";if(h.length>1){const e=h[0],n=h[1];return"1.0"!==n&&(t.translucent=!0),`vec4(${e}, ${n})`}return`vec4(${h[0]}, 1.0)`}if("rgb"===p)return i=H(this),(0,c.A)(i)?G(i):`vec4(${h[0]} / 255.0, ${h[1]} / 255.0, ${h[2]} / 255.0, 1.0)`;if("rgba"===p)return"1.0"!==h[3]&&(t.translucent=!0),i=H(this),(0,c.A)(i)?G(i):`vec4(${h[0]} / 255.0, ${h[1]} / 255.0, ${h[2]} / 255.0, ${h[3]})`;if("hsl"===p)return i=V(this),(0,c.A)(i)?G(i):`vec4(czm_HSLToRGB(vec3(${h[0]}, ${h[1]}, ${h[2]})), 1.0)`;if("hsla"===p)return i=V(this),(0,c.A)(i)?(1!==i.alpha&&(t.translucent=!0),G(i)):("1.0"!==h[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${h[0]}, ${h[1]}, ${h[2]})), ${h[3]})`);break;case _.A.LITERAL_VECTOR:if(!(0,c.A)(o))throw new l.A("left should always be defined for type ExpressionNodeType.LITERAL_VECTOR");A=o.length,f=`${p}(`;for(let e=0;e<A;++e)f+=o[e],e<A-1&&(f+=", ");return f+=")",f;case _.A.LITERAL_REGEX:throw new d.A("Error generating style shader: Regular expressions are not supported.");case _.A.LITERAL_UNDEFINED:return g.NULL_SENTINEL;case _.A.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===p)return p}},N.prototype.getVariables=function(e,t){let n,i,o;const r=this._type,s=this._value;if((0,c.A)(this._left))if(Array.isArray(this._left))for(n=this._left,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);else this._left.getVariables(e,this);if((0,c.A)(this._right)&&this._right.getVariables(e,this),(0,c.A)(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(n=this._value,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);let a;switch(r){case _.A.VARIABLE:k(this)||e.push(s);break;case _.A.VARIABLE_IN_STRING:for(a=T.exec(s);null!==a;)e.push(a[1]),a=T.exec(s);break;case _.A.LITERAL_STRING:(0,c.A)(t)&&t._type===_.A.MEMBER&&k(t._left)&&e.push(s)}};const q=g},203576:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18})},5244:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(267980),o=n(491446),r=n(367817),s=n(62467);function a(){this.enabled=!0,this.renderable=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}const c=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],l=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7];for(let e=0;e<l.length;++e)l[e]*=1e6;const u=l[1],d=l[l.length-1];for(let e=0;e<l.length;++e)l[e]=(l[e]-d)/(u-d);let h=0;const A=new i.A;a.prototype.update=function(e){if(!(e.fog.enabled=this.enabled))return;e.fog.renderable=this.renderable;const t=e.camera,n=t.positionCartographic;if(!(0,o.A)(n)||n.height>8e5||e.mode!==s.A.SCENE3D)return void(e.fog.enabled=!1);const a=n.height,f=function(e){const t=c,n=t.length;if(e<t[0])return h=0,h;if(e>t[n-1])return h=n-2,h;if(e>=t[h]){if(h+1<n&&e<t[h+1])return h;if(h+2<n&&e<t[h+2])return++h,h}else if(h-1>=0&&e>=t[h-1])return--h,h;let i;for(i=0;i<n-2&&!(e>=t[i]&&e<t[i+1]);++i);return h=i,h}(a),p=r.A.clamp((a-c[f])/(c[f+1]-c[f]),0,1);let m=r.A.lerp(l[f],l[f+1],p);const _=1e6*this.density;m=m*(_-_/u*d)*1e-6;const g=i.A.normalize(t.positionWC,A);m*=1-Math.abs(i.A.dot(t.directionWC,g)),e.fog.density=m,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness};const f=a},346400:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(62467);const o=function(e,t,n){this.context=e,this.commandList=[],this.shadowMaps=[],this.brdfLutGenerator=void 0,this.environmentMap=void 0,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this.specularEnvironmentMapsMaximumLOD=void 0,this.mode=i.A.SCENE3D,this.morphTime=i.A.getMorphTime(i.A.SCENE3D),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.jobScheduler=n,this.mapProjection=void 0,this.camera=void 0,this.cameraUnderground=!1,this.globeTranslucencyState=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.maximumScreenSpaceError=void 0,this.pixelRatio=1,this.passes={render:!1,pick:!1,depth:!1,postProcess:!1,offscreen:!1},this.creditDisplay=t,this.afterRender=[],this.scene3DOnly=!1,this.fog={enabled:!1,density:void 0,sse:void 0,minimumBrightness:void 0},this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.shadowState={shadowsEnabled:!0,shadowMaps:[],lightShadowMaps:[],nearPlane:1,farPlane:5e3,closestObjectSize:1e3,lastDirtyTime:0,outOfView:!0},this.splitPosition=0,this.frustumSplits=[],this.backgroundColor=void 0,this.light=void 0,this.minimumDisableDepthTestDistance=void 0,this.invertClassification=!1,this.invertClassificationColor=void 0,this.useLogDepth=!1,this.tilesetPassState=void 0,this.minimumTerrainHeight=0}},311664:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(419061),o=n(760866);const r=function(e,t){this.near=(0,i.A)(e,0),this.far=(0,i.A)(t,0);const n=o.A.NUMBER_OF_PASSES,r=new Array(n),s=new Array(n);for(let e=0;e<n;++e)r[e]=[],s[e]=0;this.commands=r,this.indices=s}},823064:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(419061),r=n(491446),s=n(786101),a=n(677354),c=n(605971),l=n(604752),u=n(584164),d=n(123245),h=n(184483),A=n(301350);function f(e,t,n,s,a){this._tileset=e,this._tile=t,this._resource=n,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e})),function(e,t,n){n=(0,o.A)(n,0);const s=new Uint8Array(t),a=new DataView(t);n+=p;const c=a.getUint32(n,!0);if(1!==c)throw new d.A(`Only Geometry tile version 1 is supported.  Version ${c} is not.`);n+=p;const f=a.getUint32(n,!0);if(n+=p,0===f)return e._ready=!0,void e._resolveContent(e);const m=a.getUint32(n,!0);if(n+=p,0===m)throw new d.A("Feature table must have a byte length greater than zero");const _=a.getUint32(n,!0);n+=p;const g=a.getUint32(n,!0);n+=p;const y=a.getUint32(n,!0);n+=p;const b=(0,l.A)(s,n,m);n+=m;const v=new Uint8Array(t,n,_);let T,w;n+=_,g>0&&(T=(0,l.A)(s,n,g),n+=g,y>0&&(w=new Uint8Array(t,n,y),w=new Uint8Array(w)));const E=(0,o.A)(b.BOXES_LENGTH,0),S=(0,o.A)(b.CYLINDERS_LENGTH,0),C=(0,o.A)(b.ELLIPSOIDS_LENGTH,0),x=(0,o.A)(b.SPHERES_LENGTH,0),I=E+S+C+x,P=new h.A(e,I,T,w,function(e){return function(t,n){(0,r.A)(e._geometries)&&e._geometries.updateCommands(t,n)}}(e));if(e._batchTable=P,0===I)return;const D=e.tile.computedTransform;let O;(0,r.A)(b.RTC_CENTER)&&(O=i.A.unpack(b.RTC_CENTER),u.A.multiplyByPoint(D,O,O));const L=function(e,t){let n,i,s,a,c;const l=(0,o.A)(e.BOXES_LENGTH,0),u=(0,o.A)(e.CYLINDERS_LENGTH,0),h=(0,o.A)(e.ELLIPSOIDS_LENGTH,0),A=(0,o.A)(e.SPHERES_LENGTH,0);if(l>0&&(0,r.A)(e.BOX_BATCH_IDS)){const i=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,l)}if(u>0&&(0,r.A)(e.CYLINDER_BATCH_IDS)){const n=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,u)}if(h>0&&(0,r.A)(e.ELLIPSOID_BATCH_IDS)){const n=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,n,h)}if(A>0&&(0,r.A)(e.SPHERE_BATCH_IDS)){const n=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,n,A)}const f=(0,r.A)(n)||(0,r.A)(i)||(0,r.A)(s)||(0,r.A)(a),p=l>0&&!(0,r.A)(n)||u>0&&!(0,r.A)(i)||h>0&&!(0,r.A)(s)||A>0&&!(0,r.A)(a);if(f&&p)throw new d.A("If one group of batch ids is defined, then all batch ids must be defined");if(!((0,r.A)(n)||(0,r.A)(i)||(0,r.A)(s)||(0,r.A)(a))){let e=0;if(!(0,r.A)(n)&&l>0)for(n=new Uint16Array(l),c=0;c<l;++c)n[c]=e++;if(!(0,r.A)(i)&&u>0)for(i=new Uint16Array(u),c=0;c<u;++c)i[c]=e++;if(!(0,r.A)(s)&&h>0)for(s=new Uint16Array(h),c=0;c<h;++c)s[c]=e++;if(!(0,r.A)(a)&&A>0)for(a=new Uint16Array(A),c=0;c<A;++c)a[c]=e++}return{boxes:n,cylinders:i,ellipsoids:s,spheres:a}}(b,v);if(E>0||S>0||C>0||x>0){let t,n,i,o;if(E>0){const e=v.byteOffset+b.BOXES.byteOffset;t=new Float32Array(v.buffer,e,A.A.packedBoxLength*E)}if(S>0){const e=v.byteOffset+b.CYLINDERS.byteOffset;n=new Float32Array(v.buffer,e,A.A.packedCylinderLength*S)}if(C>0){const e=v.byteOffset+b.ELLIPSOIDS.byteOffset;i=new Float32Array(v.buffer,e,A.A.packedEllipsoidLength*C)}if(x>0){const e=v.byteOffset+b.SPHERES.byteOffset;o=new Float32Array(v.buffer,e,A.A.packedSphereLength*x)}return e._geometries=new A.A({boxes:t,boxBatchIds:L.boxes,cylinders:n,cylinderBatchIds:L.cylinders,ellipsoids:i,ellipsoidBatchIds:L.ellipsoids,spheres:o,sphereBatchIds:L.spheres,center:O,modelMatrix:D,batchTable:P,boundingVolume:e.tile.boundingVolume.boundingVolume}),e}Promise.resolve(e)}(this,s,a)}Object.defineProperties(f.prototype,{featuresLength:{get:function(){return(0,r.A)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return(0,r.A)(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return(0,r.A)(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return(0,r.A)(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,s.A)("Geometry3DTileContent.readyPromise","Geometry3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Geometry3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const p=Uint32Array.BYTES_PER_ELEMENT;function m(e){const t=e.featuresLength;if(!(0,r.A)(e._features)&&t>0){const n=new Array(t);(0,r.A)(e._geometries)&&e._geometries.createFeatures(e,n),e._features=n}}f.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},f.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,r.A)(e)||e<0||e>=t)throw new c.A(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return m(this),this._features[e]},f.prototype.applyDebugSettings=function(e,t){(0,r.A)(this._geometries)&&this._geometries.applyDebugSettings(e,t)},f.prototype.applyStyle=function(e){m(this),(0,r.A)(this._geometries)&&this._geometries.applyStyle(e,this._features)},f.prototype.update=function(e,t){(0,r.A)(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),(0,r.A)(this._batchTable)&&this._geometries.ready&&(this._batchTable.update(e,t),this._ready=!0,this._resolveContent(this))},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,a.A)(this)};const _=f},463823:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(336946),o=n(491446),r=n(605971),s=n(123245),a=n(789989);function c(e){const t=[],n=e.features;for(let e=0;e<n.length;++e){const r=n[e],s=new a.A;if(s.data=r,s.properties=r.properties,s.configureNameFromProperties(r.properties),s.configureDescriptionFromProperties(r.properties),(0,o.A)(r.geometry)&&"Point"===r.geometry.type){const e=r.geometry.coordinates[0],t=r.geometry.coordinates[1];s.position=i.A.fromDegrees(e,t)}t.push(s)}return t}const l="http://www.mapinfo.com/mxp";function u(e){const t=e.documentElement;if("MultiFeatureCollection"===t.localName&&t.namespaceURI===l)return function(e){const t=[],n=e.documentElement.getElementsByTagNameNS(l,"Feature");for(let e=0;e<n.length;++e){const i=n[e],o={},r=i.getElementsByTagNameNS(l,"Val");for(let e=0;e<r.length;++e){const t=r[e];if(t.hasAttribute("ref")){const e=t.getAttribute("ref"),n=t.textContent.trim();o[e]=n}}const s=new a.A;s.data=i,s.properties=o,s.configureNameFromProperties(o),s.configureDescriptionFromProperties(o),t.push(s)}return t}(e);if("FeatureInfoResponse"===t.localName&&"http://www.esri.com/wms"===t.namespaceURI)return function(e){const t=e.documentElement,n=[];let i;const o=t.getElementsByTagNameNS("*","FIELDS");if(o.length>0)for(let e=0;e<o.length;++e){const t=o[e];i={};const r=t.attributes;for(let e=0;e<r.length;++e){const t=r[e];i[t.name]=t.value}n.push(h(t,i))}else{const e=t.getElementsByTagNameNS("*","FeatureInfo");for(let t=0;t<e.length;++t){const o=e[t];i={};const r=o.childNodes;for(let e=0;e<r.length;++e){const t=r[e];t.nodeType===Node.ELEMENT_NODE&&(i[t.localName]=t.textContent)}n.push(h(o,i))}}return n}(e);if("FeatureCollection"===t.localName&&"http://www.opengis.net/wfs"===t.namespaceURI)return function(e){const t=[],n=e.documentElement.getElementsByTagNameNS("http://www.opengis.net/gml","featureMember");for(let e=0;e<n.length;++e){const i=n[e],o={};d(i,o),t.push(h(i,o))}return t}(e);if("ServiceExceptionReport"===t.localName)throw new s.A((new XMLSerializer).serializeToString(t));return"msGMLOutput"===t.localName?function(e){const t=[];let n;const i=e.documentElement.childNodes;for(let e=0;e<i.length;e++)if(i[e].nodeType===Node.ELEMENT_NODE){n=i[e];break}if(!(0,o.A)(n))throw new s.A("Unable to find first child of the feature info xml document");const r=n.childNodes;for(let e=0;e<r.length;++e){const n=r[e];if(n.nodeType===Node.ELEMENT_NODE){const e={};d(n,e),t.push(h(n,e))}}return t}(e):function(e){const t=(new XMLSerializer).serializeToString(e),n=document.createElement("div"),i=document.createElement("pre");i.textContent=t,n.appendChild(i);const o=new a.A;return o.data=e,o.description=n.innerHTML,[o]}(e)}function d(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){const o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),"Point"!==o.localName&&"LineString"!==o.localName&&"Polygon"!==o.localName&&"boundedBy"!==o.localName&&o.hasChildNodes()&&d(o,t)&&(t[o.localName]=o.textContent)}return n}function h(e,t){const n=new a.A;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}const A=/<body>\s*<\/body>/im,f=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,p=/<title>([\s\S]*)<\/title>/im;function m(e){if(A.test(e))return;if(f.test(e))return;let t;const n=p.exec(e);n&&n.length>1&&(t=n[1]);const i=new a.A;return i.name=t,i.description=e,i.data=e,[i]}const _=function(e,t,n){if(!(0,o.A)(e))throw new r.A("type is required.");if(this.type=e,!(0,o.A)(t))if("json"===e)t="application/json";else if("xml"===e)t="text/xml";else if("html"===e)t="text/html";else{if("text"!==e)throw new r.A('format is required when type is not "json", "xml", "html", or "text".');t="text/plain"}if(this.format=t,!(0,o.A)(n))if("json"===e)n=c;else if("xml"===e)n=u;else if("html"===e)n=m;else{if("text"!==e)throw new r.A('callback is required when type is not "json", "xml", "html", or "text".');n=m}this.callback=n}},897741:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(660662),o=n(303578),r=n(267980),s=n(336946),a=n(41476),c=n(419061),l=n(491446),u=n(677354),d=n(605971),h=n(610750),A=n(149192),f=n(955943),p=n(150429),m=n(290176),_=n(766067),g=n(697422),y=n(744603),b=n(342875),v=n(616e3),T=n(805696),w=n(691760),E=n(468649),S=n(423603),C=n(38867),x=n(301947),I=n(208375),P=n(869327),D=n(798732),O=n(62467),L=n(988609);function N(e){e=(0,c.A)(e,h.A.WGS84);const t=new A.A({ellipsoid:e}),n=new P.A;this._ellipsoid=e,this._imageryLayerCollection=n,this._surfaceShaderSet=new C.A,this._material=void 0,this._surface=new D.A({tileProvider:new x.A({terrainProvider:t,imageryLayers:n,surfaceShaderSet:this._surfaceShaderSet})}),this._terrainProvider=t,this._terrainProviderChanged=new f.A,this._undergroundColor=a.A.clone(a.A.BLACK),this._undergroundColorAlphaByDistance=new m.A(e.maximumRadius/1e3,0,e.maximumRadius/5,1),this._translucency=new I.A,M(this),this.show=!0,this._oceanNormalMapResourceDirty=!0,this._oceanNormalMapResource=new y.A({url:(0,o.A)("Assets/Textures/waterNormalsSmall.jpg")}),this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this.fillHighlightColor=void 0,this.enableLighting=!1,this.lambertDiffuseMultiplier=.9,this.dynamicAtmosphereLighting=!0,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!0,this.atmosphereLightIntensity=10,this.atmosphereRayleighCoefficient=new r.A(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new r.A(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.lightingFadeOutDistance=1e7,this.lightingFadeInDistance=2e7,this.nightFadeOutDistance=1e7,this.nightFadeInDistance=5e7,this.showWaterEffect=!0,this.depthTestAgainstTerrain=!1,this.shadows=L.A.RECEIVE_ONLY,this.atmosphereHueShift=0,this.atmosphereSaturationShift=0,this.atmosphereBrightnessShift=0,this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.showSkirts=!0,this.backFaceCulling=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=void 0,this.vertexShadowDarkness=.3}function M(e){const t=[],n=(0,l.A)(e._material)&&(e._material.shaderSource.match(/slope/)||e._material.shaderSource.match("normalEC")),i=[E.A,S.A];!(0,l.A)(e._material)||n&&!e._terrainProvider.requestVertexNormals?e._surface._tileProvider.materialUniformMap=void 0:(i.push(e._material.shaderSource),t.push("APPLY_MATERIAL"),e._surface._tileProvider.materialUniformMap=e._material._uniforms),i.push(T.A),e._surfaceShaderSet.baseVertexShaderSource=new b.A({sources:[E.A,S.A,w.A],defines:t}),e._surfaceShaderSet.baseFragmentShaderSource=new b.A({sources:i,defines:t}),e._surfaceShaderSet.material=e._material}Object.defineProperties(N.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},imageryLayersUpdatedEvent:{get:function(){return this._surface.tileProvider.imageryLayersUpdatedEvent}},tilesLoaded:{get:function(){return!(0,l.A)(this._surface)||this._surface.tileProvider.ready&&0===this._surface._tileLoadQueueHigh.length&&0===this._surface._tileLoadQueueMedium.length&&0===this._surface._tileLoadQueueLow.length}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(e){this._surface.tileProvider.baseColor=e}},clippingPlanes:{get:function(){return this._surface.tileProvider.clippingPlanes},set:function(e){this._surface.tileProvider.clippingPlanes=e}},cartographicLimitRectangle:{get:function(){return this._surface.tileProvider.cartographicLimitRectangle},set:function(e){(0,l.A)(e)||(e=g.A.clone(g.A.MAX_VALUE)),this._surface.tileProvider.cartographicLimitRectangle=e}},oceanNormalMapUrl:{get:function(){return this._oceanNormalMapResource.url},set:function(e){this._oceanNormalMapResource.url=e,this._oceanNormalMapResourceDirty=!0}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){e!==this._terrainProvider&&(this._terrainProvider=e,this._terrainProviderChanged.raiseEvent(e),(0,l.A)(this._material)&&M(this))}},terrainProviderChanged:{get:function(){return this._terrainProviderChanged}},tileLoadProgressEvent:{get:function(){return this._surface.tileLoadProgressEvent}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,M(this))}},undergroundColor:{get:function(){return this._undergroundColor},set:function(e){this._undergroundColor=a.A.clone(e,this._undergroundColor)}},undergroundColorAlphaByDistance:{get:function(){return this._undergroundColorAlphaByDistance},set:function(e){if((0,l.A)(e)&&e.far<e.near)throw new d.A("far distance must be greater than near distance.");this._undergroundColorAlphaByDistance=m.A.clone(e,this._undergroundColorAlphaByDistance)}},translucency:{get:function(){return this._translucency}}});const R=[],F={start:0,stop:0};N.prototype.pickWorldCoordinates=function(e,t,n,o){if(!(0,l.A)(e))throw new d.A("ray is required");if(!(0,l.A)(t))throw new d.A("scene is required");n=(0,c.A)(n,!0);const s=t.mode,a=t.mapProjection,u=R;u.length=0;const h=this._surface._tilesToRender;let A,f,m=h.length;for(f=0;f<m;++f){A=h[f];const t=A.data;if(!(0,l.A)(t))continue;let n=t.pickBoundingSphere;if(s!==O.A.SCENE3D)t.pickBoundingSphere=n=i.A.fromRectangleWithHeights2D(A.rectangle,a,t.tileBoundingRegion.minimumHeight,t.tileBoundingRegion.maximumHeight,n),r.A.fromElements(n.center.z,n.center.x,n.center.y,n.center);else{if(!(0,l.A)(t.renderedMesh))continue;i.A.clone(t.tileBoundingRegion.boundingSphere,n)}const o=p.A.raySphere(e,n,F);(0,l.A)(o)&&u.push(t)}var _;let g;for(u.sort((_=e.origin,function(e,t){return i.A.distanceSquaredTo(e.pickBoundingSphere,_)-i.A.distanceSquaredTo(t.pickBoundingSphere,_)})),m=u.length,f=0;f<m&&(g=u[f].pick(e,t.mode,t.mapProjection,n,o),!(0,l.A)(g));++f);return g};const B=new s.A;N.prototype.pick=function(e,t,n){if(n=this.pickWorldCoordinates(e,t,!0,n),(0,l.A)(n)&&t.mode!==O.A.SCENE3D){n=r.A.fromElements(n.y,n.z,n.x,n);const e=t.mapProjection.unproject(n,B);n=t.globe.ellipsoid.cartographicToCartesian(e,n)}return n};const U=new r.A,k=new r.A,V=new s.A,H=new _.A;function z(e,t){return(0,l.A)(e)&&g.A.contains(e.rectangle,t)?e:void 0}N.prototype.getHeight=function(e){if(!(0,l.A)(e))throw new d.A("cartographic is required");const t=this._surface._levelZeroTiles;if(!(0,l.A)(t))return;let n,i;const o=t.length;for(i=0;i<o&&(n=t[i],!g.A.contains(n.rectangle,e));++i);if(i>=o)return;let s=n;for(;(0,l.A)(n);)n=z(n._southwestChild,e)||z(n._southeastChild,e)||z(n._northwestChild,e)||n._northeastChild,(0,l.A)(n)&&(0,l.A)(n.data)&&(0,l.A)(n.data.renderedMesh)&&(s=n);if(n=s,!(0,l.A)(n)||!(0,l.A)(n.data)||!(0,l.A)(n.data.renderedMesh))return;const a=this._surface._tileProvider.tilingScheme.projection,u=this._surface._tileProvider.tilingScheme.ellipsoid,h=r.A.fromRadians(e.longitude,e.latitude,0,u,U),A=H,f=u.geodeticSurfaceNormal(h,A.direction),p=u.getSurfaceNormalIntersectionWithZAxis(h,11500,A.origin);if(!(0,l.A)(p)){let e;(0,l.A)(n.data.tileBoundingRegion)&&(e=n.data.tileBoundingRegion.minimumHeight);const t=Math.min((0,c.A)(e,0),-11500),i=r.A.multiplyByScalar(f,Math.abs(t)+1,k);r.A.subtract(h,i,A.origin)}const m=n.data.pick(A,void 0,a,!1,k);return(0,l.A)(m)?u.cartesianToCartographic(m,V).height:void 0},N.prototype.update=function(e){this.show&&e.passes.render&&this._surface.update(e)},N.prototype.beginFrame=function(e){const t=this._surface,n=t.tileProvider,i=this.terrainProvider,o=(0,l.A)(i)&&((0,l.A)(i._ready)?i._ready:!(0,l.A)(i.ready)||i.ready),r=this.showWaterEffect&&o&&i.hasWaterMask&&i.hasWaterMask;if(r&&this._oceanNormalMapResourceDirty){this._oceanNormalMapResourceDirty=!1;const t=this._oceanNormalMapResource,n=t.url;if((0,l.A)(n)){const i=this;t.fetchImage().then((function(t){n===i._oceanNormalMapResource.url&&(i._oceanNormalMap=i._oceanNormalMap&&i._oceanNormalMap.destroy(),i._oceanNormalMap=new v.A({context:e.context,source:t}))}))}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}const s=e.passes,a=e.mode;s.render&&(this.showGroundAtmosphere?this._zoomedOutOceanSpecularIntensity=.4:this._zoomedOutOceanSpecularIntensity=.5,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t.tileCacheSize=this.tileCacheSize,t.loadingDescendantLimit=this.loadingDescendantLimit,t.preloadAncestors=this.preloadAncestors,t.preloadSiblings=this.preloadSiblings,n.terrainProvider=this.terrainProvider,n.lightingFadeOutDistance=this.lightingFadeOutDistance,n.lightingFadeInDistance=this.lightingFadeInDistance,n.nightFadeOutDistance=this.nightFadeOutDistance,n.nightFadeInDistance=this.nightFadeInDistance,n.zoomedOutOceanSpecularIntensity=a===O.A.SCENE3D?this._zoomedOutOceanSpecularIntensity:0,n.hasWaterMask=r,n.oceanNormalMap=this._oceanNormalMap,n.enableLighting=this.enableLighting,n.dynamicAtmosphereLighting=this.dynamicAtmosphereLighting,n.dynamicAtmosphereLightingFromSun=this.dynamicAtmosphereLightingFromSun,n.showGroundAtmosphere=this.showGroundAtmosphere,n.atmosphereLightIntensity=this.atmosphereLightIntensity,n.atmosphereRayleighCoefficient=this.atmosphereRayleighCoefficient,n.atmosphereMieCoefficient=this.atmosphereMieCoefficient,n.atmosphereRayleighScaleHeight=this.atmosphereRayleighScaleHeight,n.atmosphereMieScaleHeight=this.atmosphereMieScaleHeight,n.atmosphereMieAnisotropy=this.atmosphereMieAnisotropy,n.shadows=this.shadows,n.hueShift=this.atmosphereHueShift,n.saturationShift=this.atmosphereSaturationShift,n.brightnessShift=this.atmosphereBrightnessShift,n.fillHighlightColor=this.fillHighlightColor,n.showSkirts=this.showSkirts,n.backFaceCulling=this.backFaceCulling,n.vertexShadowDarkness=this.vertexShadowDarkness,n.undergroundColor=this._undergroundColor,n.undergroundColorAlphaByDistance=this._undergroundColorAlphaByDistance,n.lambertDiffuseMultiplier=this.lambertDiffuseMultiplier,t.beginFrame(e))},N.prototype.render=function(e){this.show&&((0,l.A)(this._material)&&this._material.update(e.context),this._surface.render(e))},N.prototype.endFrame=function(e){this.show&&e.passes.render&&this._surface.endFrame(e)},N.prototype.isDestroyed=function(){return!1},N.prototype.destroy=function(){return this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),(0,u.A)(this)};const G=N},545880:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(647934),o=n(41476),r=n(491446),s=n(677354),a=n(769493),c=n(804701),l=n(57775),u=n(40118),d=n(90979),h=n(307386),A=n(200646),f=n(938987),p=n(896464),m=n(138151);function _(){this._picking=!1,this._numSamples=1,this._tempCopyDepthTexture=void 0,this._pickColorFramebuffer=new c.A({depthStencil:!0,supportsDepthTexture:!0}),this._outputFramebuffer=new c.A({depthStencil:!0,supportsDepthTexture:!0}),this._copyDepthFramebuffer=new c.A,this._tempCopyDepthFramebuffer=new c.A,this._updateDepthFramebuffer=new c.A({createColorAttachments:!1,createDepthAttachments:!1,depthStencil:!0}),this._clearGlobeColorCommand=void 0,this._copyColorCommand=void 0,this._copyDepthCommand=void 0,this._tempCopyDepthCommand=void 0,this._updateDepthCommand=void 0,this._viewport=new i.A,this._rs=void 0,this._rsBlend=void 0,this._rsUpdate=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0,this._clearGlobeDepth=void 0}function g(e,t,n,s,c){e._viewport.width=n,e._viewport.height=s;const l=!i.A.equals(e._viewport,c.viewport);let _=l!==e._useScissorTest;e._useScissorTest=l,i.A.equals(e._scissorRectangle,c.viewport)||(e._scissorRectangle=i.A.clone(c.viewport,e._scissorRectangle),_=!0),(0,r.A)(e._rs)&&i.A.equals(e._viewport,e._rs.viewport)&&!_||(e._rs=u.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}}),e._rsBlend=u.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:A.A.ALPHA_BLEND}),e._rsUpdate=u.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:p.A.EQUAL,frontOperation:{fail:m.A.KEEP,zFail:m.A.KEEP,zPass:m.A.KEEP},backFunction:p.A.NEVER,reference:f.A.CESIUM_3D_TILE_MASK,mask:f.A.CESIUM_3D_TILE_MASK}})),(0,r.A)(e._copyDepthCommand)||(e._copyDepthCommand=t.createViewportQuadCommand(h.A,{uniformMap:{u_depthTexture:function(){return e.colorFramebufferManager.getDepthStencilTexture()}},owner:e})),e._copyDepthCommand.framebuffer=e._copyDepthFramebuffer.framebuffer,e._copyDepthCommand.renderState=e._rs,(0,r.A)(e._copyColorCommand)||(e._copyColorCommand=t.createViewportQuadCommand(d.A,{uniformMap:{colorTexture:function(){return e.colorFramebufferManager.getColorTexture()}},owner:e})),e._copyColorCommand.renderState=e._rs,(0,r.A)(e._tempCopyDepthCommand)||(e._tempCopyDepthCommand=t.createViewportQuadCommand(h.A,{uniformMap:{u_depthTexture:function(){return e._tempCopyDepthTexture}},owner:e})),e._tempCopyDepthCommand.framebuffer=e._tempCopyDepthFramebuffer.framebuffer,e._tempCopyDepthCommand.renderState=e._rs,(0,r.A)(e._updateDepthCommand)||(e._updateDepthCommand=t.createViewportQuadCommand(d.A,{uniformMap:{colorTexture:function(){return e._tempCopyDepthFramebuffer.getColorTexture()}},owner:e})),e._updateDepthCommand.framebuffer=e._updateDepthFramebuffer.framebuffer,e._updateDepthCommand.renderState=e._rsUpdate,(0,r.A)(e._clearGlobeColorCommand)||(e._clearGlobeColorCommand=new a.A({color:new o.A(0,0,0,0),stencil:0,owner:e})),e._clearGlobeColorCommand.framebuffer=e.framebuffer}Object.defineProperties(_.prototype,{colorFramebufferManager:{get:function(){return this._picking?this._pickColorFramebuffer:this._outputFramebuffer}},framebuffer:{get:function(){return this.colorFramebufferManager.framebuffer}},depthStencilTexture:{get:function(){return this.colorFramebufferManager.getDepthStencilTexture()}},picking:{get:function(){return this._picking},set:function(e){this._picking=e}}}),_.prototype.update=function(e,t,n,i,o,r){const s=n.width,a=n.height,c=o?e.halfFloatingPointTexture?l.A.HALF_FLOAT:l.A.FLOAT:l.A.UNSIGNED_BYTE;this._numSamples=i,this.picking?this._pickColorFramebuffer.update(e,s,a):this._outputFramebuffer.update(e,s,a,i,c),this._copyDepthFramebuffer.update(e,s,a),g(this,e,s,a,t),e.uniformState.globeDepthTexture=void 0,this._useHdr=o,this._clearGlobeDepth=r},_.prototype.prepareColorTextures=function(e,t){!this.picking&&this._numSamples>1&&this._outputFramebuffer.prepareTextures(e,t)},_.prototype.executeCopyDepth=function(e,t){(0,r.A)(this._copyDepthCommand)&&(this.prepareColorTextures(e),this._copyDepthCommand.execute(e,t),e.uniformState.globeDepthTexture=this._copyDepthFramebuffer.getColorTexture())},_.prototype.executeUpdateDepth=function(e,t,n,i){const o=(0,r.A)(i)?i:t.framebuffer.depthStencilTexture;if(n||o!==this.colorFramebufferManager.getDepthStencilTexture()){if((0,r.A)(this._updateDepthCommand)){if(!(0,r.A)(this._updateDepthFramebuffer.framebuffer)||this._updateDepthFramebuffer.getDepthStencilTexture()!==o||this._updateDepthFramebuffer.getColorTexture()!==this._copyDepthFramebuffer.getColorTexture()){const n=this._copyDepthFramebuffer.getColorTexture().width,i=this._copyDepthFramebuffer.getColorTexture().height;this._tempCopyDepthFramebuffer.destroy(),this._tempCopyDepthFramebuffer.update(e,n,i);const r=this._copyDepthFramebuffer.getColorTexture();this._updateDepthFramebuffer.setColorTexture(r,0),this._updateDepthFramebuffer.setDepthStencilTexture(o),this._updateDepthFramebuffer.update(e,n,i),g(this,e,n,i,t)}this._tempCopyDepthTexture=o,this._tempCopyDepthCommand.execute(e,t),this._updateDepthCommand.execute(e,t)}}else(0,r.A)(this._copyDepthCommand)&&this._copyDepthCommand.execute(e,t)},_.prototype.executeCopyColor=function(e,t){(0,r.A)(this._copyColorCommand)&&this._copyColorCommand.execute(e,t)},_.prototype.clear=function(e,t,n){const i=this._clearGlobeColorCommand;(0,r.A)(i)&&(o.A.clone(n,i.color),this.colorFramebufferManager.clear(e,i,t))},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){var e;return(e=this)._pickColorFramebuffer.destroy(),e._outputFramebuffer.destroy(),e._copyDepthFramebuffer.destroy(),e._tempCopyDepthFramebuffer.destroy(),e._updateDepthFramebuffer.destroy(),(0,r.A)(this._copyColorCommand)&&(this._copyColorCommand.shaderProgram=this._copyColorCommand.shaderProgram.destroy()),(0,r.A)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=this._copyDepthCommand.shaderProgram.destroy()),(0,r.A)(this._tempCopyDepthCommand)&&(this._tempCopyDepthCommand.shaderProgram=this._tempCopyDepthCommand.shaderProgram.destroy()),(0,r.A)(this._updateDepthCommand)&&(this._updateDepthCommand.shaderProgram=this._updateDepthCommand.shaderProgram.destroy()),(0,s.A)(this)};const y=_},38867:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(677354),r=n(66415),s=n(302836),a=n(796170),c=n(62467);function l(e,t,n,i,o){this.numberOfDayTextures=e,this.flags=t,this.material=n,this.shaderProgram=i,this.clippingShaderState=o}function u(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}u.prototype.getShaderProgram=function(e){const t=e.frameState,n=e.surfaceTile,o=e.numberOfDayTextures,u=e.applyBrightness,d=e.applyContrast,h=e.applyHue,A=e.applySaturation,f=e.applyGamma,p=e.applyAlpha,m=e.applyDayNightAlpha,_=e.applySplit,g=e.showReflectiveOcean,y=e.showOceanWaves,b=e.enableLighting,v=e.dynamicAtmosphereLighting,T=e.dynamicAtmosphereLightingFromSun,w=e.showGroundAtmosphere,E=e.perFragmentGroundAtmosphere,S=e.hasVertexNormals,C=e.useWebMercatorProjection,x=e.enableFog,I=e.enableClippingPlanes,P=e.clippingPlanes,D=e.clippedByBoundaries,O=e.hasImageryLayerCutout,L=e.colorCorrect,N=e.highlightFillTile,M=e.colorToAlpha,R=e.hasGeodeticSurfaceNormals,F=e.hasExaggeration,B=e.showUndergroundColor,U=e.translucent;let k=0,V="";const H=n.renderedMesh.encoding;H.quantization===r.A.BITS12&&(k=1,V="QUANTIZATION_BITS12");let z=0,G="";D&&(z=1,G="TILE_LIMIT_RECTANGLE");let j=0,W="";O&&(j=1,W="APPLY_IMAGERY_CUTOUT");const q=t.mode,Y=q|u<<2|d<<3|h<<4|A<<5|f<<6|p<<7|g<<8|y<<9|b<<10|v<<11|T<<12|w<<13|E<<14|S<<15|C<<16|x<<17|k<<18|_<<19|I<<20|z<<21|j<<22|L<<23|N<<24|M<<25|R<<26|F<<27|B<<28|U<<29|m<<30;let X=0;(0,i.A)(P)&&P.length>0&&(X=I?P.clippingPlanesState:0);let J=n.surfaceShader;if((0,i.A)(J)&&J.numberOfDayTextures===o&&J.flags===Y&&J.material===this.material&&J.clippingShaderState===X)return J.shaderProgram;let Q=this._shadersByTexturesFlags[o];if((0,i.A)(Q)||(Q=this._shadersByTexturesFlags[o]=[]),J=Q[Y],!(0,i.A)(J)||J.material!==this.material||J.clippingShaderState!==X){const e=this.baseVertexShaderSource.clone(),n=this.baseFragmentShaderSource.clone();0!==X&&n.sources.unshift((0,a.A)(P,t.context)),e.defines.push(V),n.defines.push(`TEXTURE_UNITS ${o}`,G,W),u&&n.defines.push("APPLY_BRIGHTNESS"),d&&n.defines.push("APPLY_CONTRAST"),h&&n.defines.push("APPLY_HUE"),A&&n.defines.push("APPLY_SATURATION"),f&&n.defines.push("APPLY_GAMMA"),p&&n.defines.push("APPLY_ALPHA"),m&&n.defines.push("APPLY_DAY_NIGHT_ALPHA"),g&&(n.defines.push("SHOW_REFLECTIVE_OCEAN"),e.defines.push("SHOW_REFLECTIVE_OCEAN")),y&&n.defines.push("SHOW_OCEAN_WAVES"),M&&n.defines.push("APPLY_COLOR_TO_ALPHA"),B&&(e.defines.push("UNDERGROUND_COLOR"),n.defines.push("UNDERGROUND_COLOR")),U&&(e.defines.push("TRANSLUCENT"),n.defines.push("TRANSLUCENT")),b&&(S?(e.defines.push("ENABLE_VERTEX_LIGHTING"),n.defines.push("ENABLE_VERTEX_LIGHTING")):(e.defines.push("ENABLE_DAYNIGHT_SHADING"),n.defines.push("ENABLE_DAYNIGHT_SHADING"))),v&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),T&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"))),w&&(e.defines.push("GROUND_ATMOSPHERE"),n.defines.push("GROUND_ATMOSPHERE"),E&&(e.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"),n.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"))),e.defines.push("INCLUDE_WEB_MERCATOR_Y"),n.defines.push("INCLUDE_WEB_MERCATOR_Y"),x&&(e.defines.push("FOG"),n.defines.push("FOG")),_&&n.defines.push("APPLY_SPLIT"),I&&n.defines.push("ENABLE_CLIPPING_PLANES"),L&&n.defines.push("COLOR_CORRECT"),N&&n.defines.push("HIGHLIGHT_FILL_TILE"),R&&e.defines.push("GEODETIC_SURFACE_NORMALS"),F&&e.defines.push("EXAGGERATION");let i="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend)\n    {\n        vec4 color = initialColor;\n";O&&(i+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(let e=0;e<o;++e)i+=O?`        cutoutAndColorResult = u_dayTextureCutoutRectangles[${e}];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n`:"        color = sampleAndBlend(\n",i+=`            color,\n            u_dayTextures[${e}],\n            u_dayTextureUseWebMercatorT[${e}] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle[${e}],\n            u_dayTextureTranslationAndScale[${e}],\n            ${p?`u_dayTextureAlpha[${e}]`:"1.0"},\n            ${m?`u_dayTextureNightAlpha[${e}]`:"1.0"},\n${m?`u_dayTextureDayAlpha[${e}]`:"1.0"},\n${u?`u_dayTextureBrightness[${e}]`:"0.0"},\n            ${d?`u_dayTextureContrast[${e}]`:"0.0"},\n            ${h?`u_dayTextureHue[${e}]`:"0.0"},\n            ${A?`u_dayTextureSaturation[${e}]`:"0.0"},\n            ${f?`u_dayTextureOneOverGamma[${e}]`:"0.0"},\n            ${_?`u_dayTextureSplit[${e}]`:"0.0"},\n            ${M?`u_colorsToAlpha[${e}]`:"vec4(0.0)"},\n        nightBlend        );\n`,O&&(i+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");i+="        return color;\n    }",n.sources.push(i),e.sources.push(function(e){let t;switch(e){case c.A.SCENE3D:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }";break;case c.A.SCENE2D:case c.A.COLUMBUS_VIEW:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }";break;case c.A.MORPHING:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }"}return t}(q)),e.sources.push(function(e){return e?"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }":"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }"}(C));const r=s.A.fromCache({context:t.context,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:H.getAttributeLocations()});J=Q[Y]=new l(o,Y,this.material,r,X)}return n.surfaceShader=J,J.shaderProgram},u.prototype.destroy=function(){let e,t;const n=this._shadersByTexturesFlags;for(const o in n)if(n.hasOwnProperty(o)){const r=n[o];if(!(0,i.A)(r))continue;for(e in r)r.hasOwnProperty(e)&&(t=r[e],(0,i.A)(t)&&t.shaderProgram.destroy())}return(0,o.A)(this)};const d=u},295550:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(660662),o=n(267980),r=n(626809),s=n(336946),a=n(491446),c=n(874915),l=n(150429),u=n(276904),d=n(766067),h=n(209202),A=n(83181),f=n(307898),p=n(371267),m=n(705302),_=n(641613),g=n(442790),y=n(57775),b=n(654799),v=n(616e3),T=n(957233),w=n(78078),E=n(557448),S=n(508380),C=n(921243),x=n(980840),I=n(62467),P=n(71160);function D(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new r.A(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new o.A,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=P.A.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new i.A,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(D.prototype,{eligibleForUnloading:{get:function(){const e=this.terrainState;let t=!(e===P.A.RECEIVING||e===P.A.TRANSFORMING);const n=this.imagery;for(let e=0,i=n.length;t&&e<i;++e){const i=n[e];t=!(0,a.A)(i.loadingImagery)||i.loadingImagery.state!==C.A.TRANSITIONING}return t}},renderedMesh:{get:function(){return(0,a.A)(this.vertexArray)?this.mesh:(0,a.A)(this.fill)?this.fill.mesh:void 0}}});const O=new s.A;function L(e,t,n,i,r,s){let c=e.getExaggeratedPosition(i,r,s);if((0,a.A)(t)&&t!==I.A.SCENE3D){const e=n.ellipsoid.cartesianToCartographic(c,O);c=n.project(e,s),c=o.A.fromElements(c.z,c.x,c.y,s)}return c}const N=new o.A,M=new o.A,R=new o.A;function F(e,t,n,i){const o=e.renderedMesh,r=o.vertices,s=o.encoding,a=r.length/s.stride;let c=p.A.clone(s);c.hasGeodeticSurfaceNormals=t,c=p.A.clone(c);const l=c.stride,u=new Float32Array(a*l);t?s.addGeodeticSurfaceNormals(r,u,n):s.removeGeodeticSurfaceNormals(r,u),o.vertices=u,o.stride=l,o!==e.mesh?(D._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=D._createVertexArrayForMesh(i.context,o)):(D._freeVertexArray(e.vertexArray),e.vertexArray=D._createVertexArrayForMesh(i.context,o)),D._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}D.prototype.pick=function(e,t,n,i,o){const r=this.renderedMesh;if(!(0,a.A)(r))return;const s=r.vertices,c=r.indices,u=r.encoding,h=c.length;let A=Number.MAX_VALUE;for(let o=0;o<h;o+=3){const r=c[o],d=c[o+1],h=c[o+2],f=L(u,t,n,s,r,N),p=L(u,t,n,s,d,M),m=L(u,t,n,s,h,R),_=l.A.rayTriangleParametric(e,f,p,m,i);(0,a.A)(_)&&_<A&&_>=0&&(A=_)}return A!==Number.MAX_VALUE?d.A.getPoint(e,A,o):void 0},D.prototype.freeResources=function(){(0,a.A)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=P.A.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();const e=this.imagery;for(let t=0,n=e.length;t<n;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},D.prototype.freeVertexArray=function(){D._freeVertexArray(this.vertexArray),this.vertexArray=void 0,D._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},D.initialize=function(e,t,n){let i=e.data;(0,a.A)(i)||(i=e.data=new D),e.state===x.A.START&&(function(e,t,n){let i=t.getTileDataAvailable(e.x,e.y,e.level);if(!(0,a.A)(i)&&(0,a.A)(e.parent)){const t=e.parent,n=t.data;(0,a.A)(n)&&(0,a.A)(n.terrainData)&&(i=n.terrainData.isChildAvailable(t.x,t.y,e.x,e.y))}!1===i&&(e.data.terrainState=P.A.FAILED);for(let i=0,o=n.length;i<o;++i){const o=n.get(i);o.show&&o._createTileImagerySkeletons(e,t)}}(e,t,n),e.state=x.A.LOADING)},D.processStateMachine=function(e,t,n,i,o,s,c){D.initialize(e,n,i);const l=e.data;if(e.state===x.A.LOADING&&function(e,t,n,i,o,s){const c=e.data,l=e.parent;if(c.terrainState===P.A.FAILED&&void 0!==l&&(void 0!==l.data&&void 0!==l.data.terrainData&&!1!==l.data.terrainData.canUpsample||D.processStateMachine(l,t,n,i,o,s,!0)),c.terrainState===P.A.FAILED&&function(e,t,n,i,o,r,s){const c=t.parent;if(!c)return void(t.state=x.A.FAILED);const l=c.data.terrainData,u=c.x,d=c.y,h=c.level;if(!(0,a.A)(l))return;const A=l.upsample(i.tilingScheme,u,d,h,o,r,s);(0,a.A)(A)&&(e.terrainState=P.A.RECEIVING,Promise.resolve(A).then((function(t){e.terrainData=t,e.terrainState=P.A.RECEIVED})).catch((function(){e.terrainState=P.A.FAILED})))}(c,e,0,n,e.x,e.y,e.level),c.terrainState===P.A.UNLOADED&&function(e,t,n,i,o){function r(){const s=new h.A({throttle:!1,throttleByServer:!0,type:f.A.TERRAIN});e.request=s;const c=t.requestTileGeometry(n,i,o,s);(0,a.A)(c)?(e.terrainState=P.A.RECEIVING,Promise.resolve(c).then((function(t){!function(t){e.terrainData=t,e.terrainState=P.A.RECEIVED,e.request=void 0}(t)})).catch((function(s){!function(s){if(e.request.state===A.A.CANCELLED)return e.terrainData=void 0,e.terrainState=P.A.UNLOADED,void(e.request=void 0);e.terrainState=P.A.FAILED,e.request=void 0;const a=`Failed to obtain terrain tile X: ${n} Y: ${i} Level: ${o}. Error message: "${s}"`;t._requestError=m.A.reportError(t._requestError,t,t.errorEvent,a,n,i,o),t._requestError.retry&&r()}(s)}))):(e.terrainState=P.A.UNLOADED,e.request=void 0)}r()}(c,n,e.x,e.y,e.level),c.terrainState===P.A.RECEIVED&&function(e,t,n,i,o,r){const s=n.tilingScheme,c=B;c.tilingScheme=s,c.x=i,c.y=o,c.level=r,c.exaggeration=t.terrainExaggeration,c.exaggerationRelativeHeight=t.terrainExaggerationRelativeHeight,c.throttle=!0;const l=e.terrainData.createMesh(c);(0,a.A)(l)&&(e.terrainState=P.A.TRANSFORMING,Promise.resolve(l).then((function(t){e.mesh=t,e.terrainState=P.A.TRANSFORMED})).catch((function(){e.terrainState=P.A.FAILED})))}(c,t,n,e.x,e.y,e.level),c.terrainState===P.A.TRANSFORMED&&(function(e,t,n,i,o,r,s){e.vertexArray=D._createVertexArrayForMesh(t,e.mesh),e.terrainState=P.A.READY,e.fill=e.fill&&e.fill.destroy(s)}(c,t.context,0,e.x,e.y,e.level,s),c.updateExaggeration(e,t,o)),c.terrainState>=P.A.RECEIVED&&void 0===c.waterMaskTexture&&n.hasWaterMask)if(void 0!==c.terrainData.waterMask)!function(e,t){const n=t.terrainData.waterMask,i=function(e){let t=e.cache.tile_waterMaskData;if(!(0,a.A)(t)){const n=v.A.create({context:e,pixelFormat:u.A.LUMINANCE,pixelDatatype:y.A.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});n.referenceCount=1,t={allWaterTexture:n,sampler:new b.A({wrapS:E.A.CLAMP_TO_EDGE,wrapT:E.A.CLAMP_TO_EDGE,minificationFilter:w.A.LINEAR,magnificationFilter:T.A.LINEAR}),destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}(e);let o;const s=n.length;if(1===s){if(0===n[0])return;o=i.allWaterTexture}else{const t=Math.sqrt(s);o=v.A.create({context:e,pixelFormat:u.A.LUMINANCE,pixelDatatype:y.A.UNSIGNED_BYTE,source:{width:t,height:t,arrayBufferView:n},sampler:i.sampler,flipY:!1}),o.referenceCount=0}++o.referenceCount,t.waterMaskTexture=o,r.A.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}(t.context,c);else{const t=c._findAncestorTileWithTerrainData(e);(0,a.A)(t)&&(0,a.A)(t.data.waterMaskTexture)&&(c.waterMaskTexture=t.data.waterMaskTexture,++c.waterMaskTexture.referenceCount,c._computeWaterMaskTranslationAndScale(e,t,c.waterMaskTranslationAndScale))}}(e,t,n,i,o,s),c)return;const d=e.renderable;e.renderable=(0,a.A)(l.vertexArray);const p=l.terrainState===P.A.READY;e.upsampledFromParent=(0,a.A)(l.terrainData)&&l.terrainData.wasCreatedByUpsampling();const _=l.processImagery(e,n,t);if(p&&_){const t=e._loadedCallbacks,n={};for(const i in t)t.hasOwnProperty(i)&&(t[i](e)||(n[i]=t[i]));e._loadedCallbacks=n,e.state=x.A.DONE}d&&(e.renderable=!0)},D.prototype.processImagery=function(e,t,n,i){const o=e.data;let r=e.upsampledFromParent,s=!1,c=!0;const l=o.imagery;let u,d;for(u=0,d=l.length;u<d;++u){const o=l[u];if(!(0,a.A)(o.loadingImagery)){r=!1;continue}if(o.loadingImagery.state===C.A.PLACEHOLDER){const n=o.loadingImagery.imageryLayer,i=n.imageryProvider;if(n.ready&&((0,a.A)(i._ready)?i._ready:!(0,a.A)(i.ready)||i.ready)){o.freeResources(),l.splice(u,1),n._createTileImagerySkeletons(e,t,u),--u,d=l.length;continue}r=!1}const h=o.processStateMachine(e,n,i);c=c&&h,s=s||h||(0,a.A)(o.readyImagery),r=r&&(0,a.A)(o.loadingImagery)&&(o.loadingImagery.state===C.A.FAILED||o.loadingImagery.state===C.A.INVALID)}return e.upsampledFromParent=r,e.renderable=e.renderable&&(s||c),c},D.prototype.addGeodeticSurfaceNormals=function(e,t){F(this,!0,e,t)},D.prototype.removeGeodeticSurfaceNormals=function(e){F(this,!1,void 0,e)},D.prototype.updateExaggeration=function(e,t,n){const i=this,o=i.renderedMesh;if(void 0===o)return;const r=t.terrainExaggeration,s=t.terrainExaggerationRelativeHeight,a=1!==r,c=o.encoding,l=c.exaggeration!==r,u=c.exaggerationRelativeHeight!==s;if(l||u){if(l)if(a&&!c.hasGeodeticSurfaceNormals){const n=e.tilingScheme.ellipsoid;i.addGeodeticSurfaceNormals(n,t)}else!a&&c.hasGeodeticSurfaceNormals&&i.removeGeodeticSurfaceNormals(t);if(c.exaggeration=r,c.exaggerationRelativeHeight=s,void 0!==n){n._tileToUpdateHeights.push(e);const t=e.customData,i=t.length;for(let e=0;e<i;e++)t[e].level=-1}}};const B={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};D._createVertexArrayForMesh=function(e,t){const n=t.vertices,i=_.A.createVertexBuffer({context:e,typedArray:n,usage:g.A.STATIC_DRAW}),o=t.encoding.getAttributes(i),r=t.indices.indexBuffers||{};let s=r[e.id];if(!(0,a.A)(s)||s.isDestroyed()){const n=t.indices;s=_.A.createIndexBuffer({context:e,typedArray:n,usage:g.A.STATIC_DRAW,indexDatatype:c.A.fromSizeInBytes(n.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,r[e.id]=s,t.indices.indexBuffers=r}else++s.referenceCount;return new S.A({context:e,attributes:o,indexBuffer:s})},D._freeVertexArray=function(e){if((0,a.A)(e)){const t=e.indexBuffer;e.isDestroyed()||e.destroy(),(0,a.A)(t)&&!t.isDestroyed()&&(0,a.A)(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},D.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;for(;(0,a.A)(t)&&(!(0,a.A)(t.data)||!(0,a.A)(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling());)t=t.parent;return t},D.prototype._computeWaterMaskTranslationAndScale=function(e,t,n){const i=t.rectangle,o=e.rectangle,r=o.width,s=o.height,a=r/i.width,c=s/i.height;return n.x=a*(o.west-i.west)/r,n.y=c*(o.south-i.south)/s,n.z=a,n.w=c,n};const U=D},301947:(e,t,n)=>{"use strict";n.d(t,{A:()=>Be});var i=n(660662),o=n(854894),r=n(434067),s=n(267980),a=n(626809),c=n(336946),l=n(376758),u=n(41476),d=n(433235),h=n(430346),A=n(419061),f=n(491446),p=n(677354),m=n(605971),_=n(955943),g=n(75200),y=n(34233),b=n(874915),v=n(647326),T=n(367817),w=n(584164),E=n(290176),S=n(832698),C=n(811203),x=n(402330),I=n(697422),P=n(6874),D=n(680220),O=n(66415),L=n(566123),N=n(414305),M=n(641613),R=n(442790),F=n(430332),B=n(377496),U=n(760866),k=n(40118),V=n(508380),H=n(200646),z=n(711284),G=n(523721),j=n(295550),W=n(451227),q=n(921243),Y=n(612123),X=n(842153),J=n(980840),Q=n(62467),$=n(988609),K=n(640809),Z=n(71160),ee=n(413690),te=n(960847);function ne(e){if(!(0,f.A)(e))throw new m.A("options is required.");if(!(0,f.A)(e.terrainProvider))throw new m.A("options.terrainProvider is required.");if(!(0,f.A)(e.imageryLayers))throw new m.A("options.imageryLayers is required.");if(!(0,f.A)(e.surfaceShaderSet))throw new m.A("options.surfaceShaderSet is required.");this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=$.A.RECEIVE_ONLY,this.vertexShadowDarkness=.3,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this.undergroundColor=void 0,this.undergroundColorAlphaByDistance=void 0,this.lambertDiffuseMultiplier=0,this.materialUniformMap=void 0,this._materialUniformMap=void 0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new _.A,this._removeLayerAddedListener=this._imageryLayers.layerAdded.addEventListener(ne.prototype._onLayerAdded,this),this._removeLayerRemovedListener=this._imageryLayers.layerRemoved.addEventListener(ne.prototype._onLayerRemoved,this),this._removeLayerMovedListener=this._imageryLayers.layerMoved.addEventListener(ne.prototype._onLayerMoved,this),this._removeLayerShownListener=this._imageryLayers.layerShownOrHidden.addEventListener(ne.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new _.A,this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new u.A(0,0,.5,1),this._clippingPlanes=void 0,this.cartographicLimitRectangle=I.A.clone(I.A.MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1,this._oldTerrainExaggeration=void 0,this._oldTerrainExaggerationRelativeHeight=void 0}function ie(e,t){let n=e.loadingImagery;(0,f.A)(n)||(n=e.readyImagery);let i=t.loadingImagery;return(0,f.A)(i)||(i=t.readyImagery),n.imageryLayer._layerIndex-i.imageryLayer._layerIndex}function oe(e,t){const n=t.globeTranslucencyState;if(n.translucent){const i=e.renderState.blending.enabled;n.pushDerivedCommands(e,i,t)}else t.commandList.push(e)}Object.defineProperties(ne.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){if(!(0,f.A)(e))throw new m.A("value is required.");this._baseColor=e,this._firstPassInitialColor=a.A.fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){if(!(0,f.A)(e))throw new m.A("value is required.");this._quadtree=e}},ready:{get:function(){const e=this._terrainProvider;if(!(0,f.A)(e)||((0,f.A)(e._ready)?!e._ready:(0,f.A)(e.ready)&&!e.ready))return!1;if(0===this._imageryLayers.length)return!0;const t=this._imageryLayers.get(0);if(!t.ready)return!1;const n=t.imageryProvider;return(0,f.A)(n._ready)?n._ready:!(0,f.A)(n.ready)||n.ready}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){this._terrainProvider!==e&&(this._terrainProvider=e,(0,f.A)(this._quadtree)&&this._quadtree.invalidateAllTiles())}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){z.A.setOwner(e,this,"_clippingPlanes")}}}),ne.prototype.update=function(e){this._imageryLayers._update()},ne.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile((function(e){e.data.imagery.sort(ie)}))),function(e,t){const n=t.creditDisplay,i=e._terrainProvider;(0,f.A)(i)&&((0,f.A)(i._ready)?i._ready:!(0,f.A)(i.ready)||i.ready)&&(0,f.A)(i.credit)&&n.addCreditToNextFrame(i.credit);const o=e._imageryLayers;for(let e=0,t=o.length;e<t;++e){const t=o.get(e);if(t.ready){const e=t.imageryProvider;((0,f.A)(e._ready)?e._ready:!(0,f.A)(e.ready)||e.ready)&&(0,f.A)(t.imageryProvider.credit)&&n.addCreditToNextFrame(t.imageryProvider.credit)}}}(this,e);const t=this._vertexArraysToDestroy,n=t.length;for(let e=0;e<n;++e)j.A._freeVertexArray(t[e]);t.length=0},ne.prototype.beginUpdate=function(e){const t=this._tilesToRenderByTextureCount;for(let e=0,n=t.length;e<n;++e){const n=t[e];(0,f.A)(n)&&(n.length=0)}const n=this._clippingPlanes;(0,f.A)(n)&&n.enabled&&n.update(e),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},ne.prototype.endUpdate=function(e){if(!(0,f.A)(this._renderState)){this._renderState=k.A.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:G.A.LESS}}),this._blendRenderState=k.A.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:G.A.LESS_OR_EQUAL},blending:H.A.ALPHA_BLEND});let e=(0,l.A)(this._renderState,!0);e.cull.enabled=!1,this._disableCullingRenderState=k.A.fromCache(e),e=(0,l.A)(this._blendRenderState,!0),e.cull.enabled=!1,this._disableCullingBlendRenderState=k.A.fromCache(e)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&K.A.updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);const t=this.quadtree,n=e.terrainExaggeration,i=e.terrainExaggerationRelativeHeight,o=this._oldTerrainExaggeration!==n||this._oldTerrainExaggerationRelativeHeight!==i;this._oldTerrainExaggeration=n,this._oldTerrainExaggerationRelativeHeight=i,o&&t.forEachLoadedTile((function(n){n.data.updateExaggeration(n,e,t)}));const r=this._tilesToRenderByTextureCount;for(let t=0,n=r.length;t<n;++t){const n=r[t];if((0,f.A)(n))for(let t=0,i=n.length;t<i;++t){const i=n[t],o=i.data.tileBoundingRegion;Fe(this,i,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,o.minimumHeight)}}},ne.prototype.updateForPick=function(e){const t=this._drawCommands;for(let n=0,i=this._usedDrawCommands;n<i;++n)oe(t[n],e)},ne.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},ne.prototype.getLevelMaximumGeometricError=function(e){return(0,f.A)(this._terrainProvider)?this._terrainProvider.getLevelMaximumGeometricError(e):0},ne.prototype.loadTile=function(e,t){let n,i=t.data,o=!0;(0,f.A)(i)&&(o=i.boundingVolumeSourceTile!==t||t._lastSelectionResult===te.A.CULLED_BUT_NEEDED,n=i.terrainState),j.A.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o),i=t.data,o&&n!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==L.A.NONE&&i.boundingVolumeSourceTile===t&&(o=!1,j.A.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o))};const re=new i.A,se=new I.A,ae=new I.A,ce=new c.A;function le(e,t){if(t.west<t.east)return t;const n=I.A.clone(t,ae);return I.A.center(e,ce).longitude>0?n.east=T.A.PI:n.west=-T.A.PI,n}function ue(e,t){if(t.cameraUnderground)return!0;if(t.globeTranslucencyState.translucent)return!0;if(e.backFaceCulling)return!1;const n=e._clippingPlanes;return!(!(0,f.A)(n)||!n.enabled)||!I.A.equals(e.cartographicLimitRectangle,I.A.MAX_VALUE)}ne.prototype.computeTileVisibility=function(e,t,n){const o=this.computeDistanceToTile(e,t);e._distance=o;const r=ue(this,t);if(t.fog.enabled&&!r&&T.A.fog(o,t.fog.density)>=1)return L.A.NONE;const a=e.data,c=a.tileBoundingRegion;if(void 0===a.boundingVolumeSourceTile)return L.A.PARTIAL;const l=t.cullingVolume;let u=c.boundingVolume;(0,f.A)(u)||(u=c.boundingSphere),a.clippedByBoundaries=!1;const d=le(e.rectangle,this.cartographicLimitRectangle),h=I.A.simpleIntersection(d,e.rectangle,se);if(!(0,f.A)(h))return L.A.NONE;if(I.A.equals(h,e.rectangle)||(a.clippedByBoundaries=!0),t.mode!==Q.A.SCENE3D&&(u=re,i.A.fromRectangleWithHeights2D(e.rectangle,t.mapProjection,c.minimumHeight,c.maximumHeight,u),s.A.fromElements(u.center.z,u.center.x,u.center.y,u.center),t.mode===Q.A.MORPHING&&(0,f.A)(a.renderedMesh)&&(u=i.A.union(c.boundingSphere,u,u))),!(0,f.A)(u))return L.A.PARTIAL;const A=this._clippingPlanes;if((0,f.A)(A)&&A.enabled){const t=A.computeIntersectionWithBoundingVolume(u);if(e.isClipped=t!==v.A.INSIDE,t===v.A.OUTSIDE)return L.A.NONE}let p;const m=l.computeVisibility(u);if(m===v.A.OUTSIDE?p=L.A.NONE:m===v.A.INTERSECTING?p=L.A.PARTIAL:m===v.A.INSIDE&&(p=L.A.FULL),p===L.A.NONE)return p;const _=t.mode===Q.A.SCENE3D&&t.camera.frustum instanceof C.A;if(t.mode===Q.A.SCENE3D&&!_&&(0,f.A)(n)&&!r){const e=a.occludeePointInScaledSpace;return(0,f.A)(e)?n.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(e,c.minimumHeight)?p:L.A.NONE:p}return p},ne.prototype.canRefine=function(e){return!!(0,f.A)(e.data.terrainData)||void 0!==this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1)};const de=[],he=[];ne.prototype.canRenderWithoutLosingDetail=function(e,t){const n=e.data,i=de;i.length=this._imageryLayers.length;let o,r,s,a=!1,c=!1;for((0,f.A)(n)&&(a=n.terrainState===Z.A.READY,c=!0,o=n.imagery),r=0,s=i.length;r<s;++r)i[r]=c;if((0,f.A)(o))for(r=0,s=o.length;r<s;++r){const e=o[r],t=e.loadingImagery,n=!(0,f.A)(t)||t.state===q.A.FAILED||t.state===q.A.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;i[s]=n&&i[s]}const l=this.quadtree._lastSelectionFrameNumber,u=he;for(u.length=0,u.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);u.length>0;){const e=u.pop(),t=e._lastSelectionResultFrame===l?e._lastSelectionResult:te.A.NONE;if(t===te.A.RENDERED){const t=e.data;if(!(0,f.A)(t))continue;if(!a&&e.data.terrainState===Z.A.READY)return!1;const n=e.data.imagery;for(r=0,s=n.length;r<s;++r){const e=n[r],t=e.loadingImagery,o=!(0,f.A)(t)||t.state===q.A.FAILED||t.state===q.A.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;if(o&&!i[s])return!1}}else t===te.A.REFINED&&u.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild)}return!0};const Ae=new s.A;ne.prototype.computeTileLoadPriority=function(e,t){const n=e.data;if(void 0===n)return 0;const i=n.tileBoundingRegion.boundingVolume;if(void 0===i)return 0;const o=t.camera.positionWC,r=t.camera.directionWC,a=s.A.subtract(i.center,o,Ae),c=s.A.magnitude(a);return c<T.A.EPSILON5?0:(s.A.divideByScalar(a,c,a),(1-s.A.dot(a,r))*e._distance)};const fe=new w.A,pe=new w.A,me=new a.A,_e=new a.A,ge=new a.A,ye=new s.A,be=new s.A,ve=new s.A,Te=new s.A;ne.prototype.showTileThisFrame=function(e,t){let n=0;const i=e.data.imagery;for(let e=0,t=i.length;e<t;++e){const t=i[e];(0,f.A)(t.readyImagery)&&0!==t.readyImagery.imageryLayer.alpha&&++n}let o=this._tilesToRenderByTextureCount[n];(0,f.A)(o)||(o=[],this._tilesToRenderByTextureCount[n]=o),o.push(e);const r=e.data;(0,f.A)(r.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;const s=this._debug;++s.tilesRendered,s.texturesRendered+=n};const we=[new s.A,new s.A,new s.A,new s.A];function Ee(e,t,n,i,o,r){const a=e.quadtree._occluders.ellipsoid,c=a.ellipsoid,l=we;return s.A.fromRadians(n.west,n.south,o,c,l[0]),s.A.fromRadians(n.east,n.south,o,c,l[1]),s.A.fromRadians(n.west,n.north,o,c,l[2]),s.A.fromRadians(n.east,n.north,o,c,l[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,l,i,r)}ne.prototype.computeDistanceToTile=function(e,t){!function(e,t,n){let o=e.data;void 0===o&&(o=e.data=new j.A);const r=e.tilingScheme.ellipsoid;void 0===o.tileBoundingRegion&&(o.tileBoundingRegion=new ee.A({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:r,minimumHeight:0,maximumHeight:0}));const a=o.tileBoundingRegion,c=a.minimumHeight,l=a.maximumHeight;let u=!1,d=e;const h=o.mesh,A=o.terrainData;if(void 0!==h&&void 0!==h.minimumHeight&&void 0!==h.maximumHeight)a.minimumHeight=h.minimumHeight,a.maximumHeight=h.maximumHeight,u=!0;else if(void 0!==A&&void 0!==A._minimumHeight&&void 0!==A._maximumHeight)a.minimumHeight=A._minimumHeight,a.maximumHeight=A._maximumHeight;else{a.minimumHeight=Number.NaN,a.maximumHeight=Number.NaN;let t=e.parent;for(;void 0!==t;){const e=t.data;if(void 0!==e){const t=e.mesh,n=e.terrainData;if(void 0!==t&&void 0!==t.minimumHeight&&void 0!==t.maximumHeight){a.minimumHeight=t.minimumHeight,a.maximumHeight=t.maximumHeight;break}if(void 0!==n&&void 0!==n._minimumHeight&&void 0!==n._maximumHeight){a.minimumHeight=n._minimumHeight,a.maximumHeight=n._maximumHeight;break}}t=t.parent}d=t}if(void 0!==d){const A=n.terrainExaggeration,p=n.terrainExaggerationRelativeHeight;if(1!==A&&(u=!1,a.minimumHeight=D.A.getHeight(a.minimumHeight,A,p),a.maximumHeight=D.A.getHeight(a.maximumHeight,A,p)),u)o.boundingVolumeIsFromMesh||(a._orientedBoundingBox=S.A.clone(h.orientedBoundingBox,a._orientedBoundingBox),a._boundingSphere=i.A.clone(h.boundingSphere3D,a._boundingSphere),o.occludeePointInScaledSpace=s.A.clone(h.occludeePointInScaledSpace,o.occludeePointInScaledSpace),(0,f.A)(o.occludeePointInScaledSpace)||(o.occludeePointInScaledSpace=Ee(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,o.occludeePointInScaledSpace)));else{const n=void 0===a._orientedBoundingBox||void 0===a._boundingSphere;(a.minimumHeight!==c||a.maximumHeight!==l||n)&&(a.computeBoundingVolumes(r),o.occludeePointInScaledSpace=Ee(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,o.occludeePointInScaledSpace))}o.boundingVolumeSourceTile=d,o.boundingVolumeIsFromMesh=u}else o.boundingVolumeSourceTile=void 0,o.boundingVolumeIsFromMesh=!1}(e,this,t);const n=e.data;if(void 0===n.boundingVolumeSourceTile)return 9999999999;const o=n.tileBoundingRegion,r=o.minimumHeight,a=o.maximumHeight;if(n.boundingVolumeSourceTile!==e){const e=t.camera.positionCartographic.height;Math.abs(e-r)>Math.abs(e-a)?(o.minimumHeight=r,o.maximumHeight=r):(o.minimumHeight=a,o.maximumHeight=a)}const c=o.distanceToCamera(t);return o.minimumHeight=r,o.maximumHeight=a,c},ne.prototype.isDestroyed=function(){return!1},ne.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._removeLayerAddedListener=this._removeLayerAddedListener&&this._removeLayerAddedListener(),this._removeLayerRemovedListener=this._removeLayerRemovedListener&&this._removeLayerRemovedListener(),this._removeLayerMovedListener=this._removeLayerMovedListener&&this._removeLayerMovedListener(),this._removeLayerShownListener=this._removeLayerShownListener&&this._removeLayerShownListener(),(0,p.A)(this)},ne.prototype._onLayerAdded=function(e,t){if(!this.isDestroyed()&&e.show){const t=this._terrainProvider,n=this,i=this._imageryLayersUpdatedEvent,o=function(){e._imageryCache={},n._quadtree.forEachLoadedTile((function(n){if((0,f.A)(n._loadedCallbacks[e._layerIndex]))return;let i;const o=n.data.imagery,r=o.length;let s=-1,a=0;for(i=0;i<r;++i){const t=o[i];if((0,A.A)(t.readyImagery,t.loadingImagery).imageryLayer===e)-1===s&&(s=i),++a;else if(-1!==s)break}if(-1===s)return;const c=s+a;e._createTileImagerySkeletons(n,t,c)&&(n._loadedCallbacks[e._layerIndex]=function(e,t,n){return function(i){let o,r,s=-1;const a=i.data.imagery,c=a.length;let l;for(l=0;l<c;++l)if(o=a[l],r=(0,A.A)(o.readyImagery,o.loadingImagery),r.imageryLayer===t){s=l;break}if(-1!==s){const c=s+e;if(o=a[c],r=(0,f.A)(o)?(0,A.A)(o.readyImagery,o.loadingImagery):void 0,!(0,f.A)(r)||r.imageryLayer!==t)return!t._createTileImagerySkeletons(i,n,c);for(l=s;l<c;++l)a[l].freeResources();a.splice(s,e)}return!0}}(a,e,t),n.state=J.A.LOADING)}))};e.ready&&(e.imageryProvider._reload=o),this._quadtree.forEachLoadedTile((function(i){e._createTileImagerySkeletons(i,t)&&(i.state=J.A.LOADING,0===i.level||i._lastSelectionResultFrame===n.quadtree._lastSelectionFrameNumber&&i._lastSelectionResult===te.A.RENDERED||(i.renderable=!1))})),this._layerOrderChanged=!0,i.raiseEvent()}},ne.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile((function(t){const n=t.data.imagery;let i=-1,o=0;for(let t=0,r=n.length;t<r;++t){const r=n[t];let s=r.loadingImagery;if((0,f.A)(s)||(s=r.readyImagery),s.imageryLayer===e)-1===i&&(i=t),r.freeResources(),++o;else if(-1!==i)break}-1!==i&&n.splice(i,o)})),(0,f.A)(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},ne.prototype._onLayerMoved=function(e,t,n){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},ne.prototype._onLayerShownOrHidden=function(e,t,n){n?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};const Se=new w.A,Ce=new w.A;function xe(e,t){const n={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_atmosphereLightIntensity:function(){return this.properties.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return this.properties.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return this.properties.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return this.properties.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return this.properties.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return this.properties.atmosphereMieAnisotropy},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_terrainExaggerationAndRelativeHeight:function(){return this.properties.terrainExaggerationAndRelativeHeight},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){const t=e.context.uniformState.view,n=w.A.multiplyByPoint(t,this.properties.rtc,be);return w.A.setTranslation(t,n,fe),fe},u_modifiedModelViewProjection:function(){const t=e.context.uniformState.view,n=e.context.uniformState.projection,i=w.A.multiplyByPoint(t,this.properties.rtc,be);return w.A.setTranslation(t,i,pe),w.A.multiply(n,pe,pe),pe},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureNightAlpha:function(){return this.properties.dayTextureNightAlpha},u_dayTextureDayAlpha:function(){return this.properties.dayTextureDayAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){const n=t._clippingPlanes;return(0,f.A)(n)&&(0,f.A)(n.texture)?n.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){const n=t._clippingPlanes,i=(0,f.A)(n)?w.A.multiply(e.context.uniformState.view,n.modelMatrix,Se):w.A.IDENTITY;return w.A.inverseTranspose(i,Ce)},u_clippingPlanesEdgeStyle:function(){const e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},u_frontFaceAlphaByDistance:function(){return this.properties.frontFaceAlphaByDistance},u_backFaceAlphaByDistance:function(){return this.properties.backFaceAlphaByDistance},u_translucencyRectangle:function(){return this.properties.localizedTranslucencyRectangle},u_undergroundColor:function(){return this.properties.undergroundColor},u_undergroundColorAlphaByDistance:function(){return this.properties.undergroundColorAlphaByDistance},u_lambertDiffuseMultiplier:function(){return this.properties.lambertDiffuseMultiplier},u_vertexShadowDarkness:function(){return this.properties.vertexShadowDarkness},properties:{initialColor:new a.A(0,0,.5,1),fillHighlightColor:new u.A(0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new r.A(65e5,9e6),nightFadeDistance:new r.A(1e7,4e7),atmosphereLightIntensity:10,atmosphereRayleighCoefficient:new s.A(55e-7,13e-6,284e-7),atmosphereMieCoefficient:new s.A(21e-6,21e-6,21e-6),atmosphereRayleighScaleHeight:1e4,atmosphereMieScaleHeight:3200,atmosphereMieAnisotropy:.9,hsbShift:new s.A,center3D:void 0,rtc:new s.A,modifiedModelView:new w.A,tileRectangle:new a.A,terrainExaggerationAndRelativeHeight:new r.A(1,0),dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureNightAlpha:[],dayTextureDayAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new r.A,southMercatorYAndOneOverHeight:new r.A,waterMask:void 0,waterMaskTranslationAndScale:new a.A,minMaxHeight:new r.A,scaleAndBias:new w.A,clippingPlanesEdgeColor:u.A.clone(u.A.WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new a.A,frontFaceAlphaByDistance:new a.A,backFaceAlphaByDistance:new a.A,localizedTranslucencyRectangle:new a.A,undergroundColor:u.A.clone(u.A.TRANSPARENT),undergroundColorAlphaByDistance:new a.A,lambertDiffuseMultiplier:0,vertexShadowDarkness:0}};return(0,f.A)(t.materialUniformMap)?(0,h.A)(n,t.materialUniformMap):n}function Ie(e,t,n){const i=n.data;let o,r;if((0,f.A)(i.vertexArray)?(o=i.mesh,r=i.vertexArray):(0,f.A)(i.fill)&&(0,f.A)(i.fill.vertexArray)&&(o=i.fill.mesh,r=i.fill.vertexArray),(0,f.A)(o)&&(0,f.A)(r)){if((0,f.A)(i.wireframeVertexArray)){if(i.wireframeVertexArray.mesh===o)return;i.wireframeVertexArray.destroy(),i.wireframeVertexArray=void 0}i.wireframeVertexArray=function(e,t,n){const i={indices:n.indices,primitiveType:x.A.TRIANGLES};y.A.toWireframe(i);const o=i.indices,r=M.A.createIndexBuffer({context:e,typedArray:o,usage:R.A.STATIC_DRAW,indexDatatype:b.A.fromSizeInBytes(o.BYTES_PER_ELEMENT)});return new V.A({context:e,attributes:t._attributes,indexBuffer:r})}(e,r,o),i.wireframeVertexArray.mesh=o}}let Pe,De,Oe;!function(){const e=new g.A({geometry:o.A.fromDimensions({dimensions:new s.A(2,2,2)})}),t=new g.A({geometry:new P.A({radius:1})});let n,i,r=new w.A;function a(e){return new X.A({geometryInstances:e,appearance:new Y.A({translucent:!1,flat:!0}),asynchronous:!1})}Pe=function(t,o){return t===n||(Oe(),n=t,r=w.A.fromRotationTranslation(t.halfAxes,t.center,r),e.modelMatrix=r,e.attributes.color=d.A.fromColor(o),i=a(e)),i},De=function(e,o){return e===n||(Oe(),n=e,r=w.A.fromTranslation(e.center,r),r=w.A.multiplyByUniformScale(r,e.radius,r),t.modelMatrix=r,t.attributes.color=d.A.fromColor(o),i=a(t)),i},Oe=function(){(0,f.A)(i)&&(i.destroy(),i=void 0,n=void 0)}}();const Le=new a.A(0,0,0,0),Ne={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applyDayNightAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0,hasGeodeticSurfaceNormals:void 0,hasExaggeration:void 0},Me=u.A.TRANSPARENT,Re=new E.A;function Fe(e,t,n){const o=t.data;(0,f.A)(o.vertexArray)||(void 0===o.fill&&(o.fill=new K.A(t)),o.fill.update(e,n));const r=n.creditDisplay,c=o.terrainData;if((0,f.A)(c)&&(0,f.A)(c.credits)){const e=c.credits;for(let t=0,n=e.length;t<n;++t)r.addCreditToNextFrame(e[t])}let l=F.A.maximumTextureImageUnits,d=o.waterMaskTexture,h=o.waterMaskTranslationAndScale;!(0,f.A)(d)&&(0,f.A)(o.fill)&&(d=o.fill.waterMaskTexture,h=o.fill.waterMaskTranslationAndScale);const p=n.cameraUnderground,_=n.globeTranslucencyState,g=_.translucent,y=_.frontFaceAlphaByDistance,b=_.backFaceAlphaByDistance,v=_.rectangle,E=(0,A.A)(e.undergroundColor,Me),C=(0,A.A)(e.undergroundColorAlphaByDistance,Re),P=ue(e,n)&&n.mode===Q.A.SCENE3D&&E.alpha>0&&(C.nearValue>0||C.farValue>0),D=e.lambertDiffuseMultiplier,L=e.vertexShadowDarkness,M=e.hasWaterMask&&(0,f.A)(d),R=e.oceanNormalMap,k=M&&(0,f.A)(R),V=e.terrainProvider,H=(0,f.A)(V)&&((0,f.A)(V._ready)?V._ready:!(0,f.A)(V.ready)||V.ready)&&e.terrainProvider.hasVertexNormals,z=n.fog.enabled&&n.fog.renderable&&!p,G=e.showGroundAtmosphere&&n.mode===Q.A.SCENE3D,j=$.A.castShadows(e.shadows)&&!g,q=$.A.receiveShadows(e.shadows)&&!g,Y=e.hueShift,X=e.saturationShift,J=e.brightnessShift;let Z=!(T.A.equalsEpsilon(Y,0,T.A.EPSILON7)&&T.A.equalsEpsilon(X,0,T.A.EPSILON7)&&T.A.equalsEpsilon(J,0,T.A.EPSILON7)),ee=!1;G&&(ee=s.A.magnitude(n.camera.positionWC)>e.nightFadeOutDistance),M&&--l,k&&--l,(0,f.A)(n.shadowState)&&n.shadowState.shadowsEnabled&&--l,(0,f.A)(e.clippingPlanes)&&e.clippingPlanes.enabled&&--l,l-=_.numberOfTextureUniforms;const te=o.renderedMesh;let ne=te.center;const ie=te.encoding,re=o.tileBoundingRegion,ae=n.terrainExaggeration,ce=n.terrainExaggerationRelativeHeight,de=1!==ae,he=ie.hasGeodeticSurfaceNormals,Ae=me;let fe=0,pe=0,be=0,we=0,Ee=!1;if(n.mode!==Q.A.SCENE3D){const e=n.mapProjection,i=e.project(I.A.southwest(t.rectangle),ve),o=e.project(I.A.northeast(t.rectangle),Te);if(Ae.x=i.x,Ae.y=i.y,Ae.z=o.x,Ae.w=o.y,n.mode!==Q.A.MORPHING&&(ne=ye,ne.x=0,ne.y=.5*(Ae.z+Ae.x),ne.z=.5*(Ae.w+Ae.y),Ae.x-=ne.y,Ae.y-=ne.z,Ae.z-=ne.y,Ae.w-=ne.z),n.mode===Q.A.SCENE2D&&ie.quantization===O.A.BITS12){const e=1/(Math.pow(2,12)-1)*.5,t=(Ae.z-Ae.x)*e,n=(Ae.w-Ae.y)*e;Ae.x-=t,Ae.y-=n,Ae.z+=t,Ae.w+=n}e instanceof N.A&&(fe=t.rectangle.south,pe=t.rectangle.north,be=N.A.geodeticLatitudeToMercatorAngle(fe),we=1/(N.A.geodeticLatitudeToMercatorAngle(pe)-be),Ee=!0)}const Se=Ne;Se.frameState=n,Se.surfaceTile=o,Se.showReflectiveOcean=M,Se.showOceanWaves=k,Se.enableLighting=e.enableLighting,Se.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,Se.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,Se.showGroundAtmosphere=G,Se.atmosphereLightIntensity=e.atmosphereLightIntensity,Se.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,Se.atmosphereMieCoefficient=e.atmosphereMieCoefficient,Se.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,Se.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,Se.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,Se.perFragmentGroundAtmosphere=ee,Se.hasVertexNormals=H,Se.useWebMercatorProjection=Ee,Se.clippedByBoundaries=o.clippedByBoundaries,Se.hasGeodeticSurfaceNormals=he,Se.hasExaggeration=de;const Ce=o.imagery;let Fe=0;const Be=Ce.length,Ue=e.showSkirts&&!p&&!g,ke=e.backFaceCulling&&!p&&!g,Ve=ke?e._renderState:e._disableCullingRenderState,He=ke?e._blendRenderState:e._disableCullingBlendRenderState;let ze=Ve,Ge=e._firstPassInitialColor;const je=n.context;if((0,f.A)(e._debug.boundingSphereTile)||Oe(),e._materialUniformMap!==e.materialUniformMap){e._materialUniformMap=e.materialUniformMap;const t=e._drawCommands.length;for(let i=0;i<t;++i)e._uniformMaps[i]=xe(n,e)}do{let c,A,O=0;if(e._drawCommands.length<=e._usedDrawCommands?(c=new B.A,c.owner=t,c.cull=!1,c.boundingVolume=new i.A,c.orientedBoundingBox=void 0,A=xe(n,e),e._drawCommands.push(c),e._uniformMaps.push(A)):(c=e._drawCommands[e._usedDrawCommands],A=e._uniformMaps[e._usedDrawCommands]),c.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){const e=re.boundingVolume,t=re.boundingSphere;(0,f.A)(e)?Pe(e,u.A.RED).update(n):(0,f.A)(t)&&De(t,u.A.RED).update(n)}const N=A.properties;a.A.clone(Ge,N.initialColor),N.oceanNormalMap=R,N.lightingFadeDistance.x=e.lightingFadeOutDistance,N.lightingFadeDistance.y=e.lightingFadeInDistance,N.nightFadeDistance.x=e.nightFadeOutDistance,N.nightFadeDistance.y=e.nightFadeInDistance,N.atmosphereLightIntensity=e.atmosphereLightIntensity,N.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,N.atmosphereMieCoefficient=e.atmosphereMieCoefficient,N.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,N.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,N.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,N.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;const M=p?b:y,F=p?y:b;(0,f.A)(M)&&(a.A.fromElements(M.near,M.nearValue,M.far,M.farValue,N.frontFaceAlphaByDistance),a.A.fromElements(F.near,F.nearValue,F.far,F.farValue,N.backFaceAlphaByDistance)),a.A.fromElements(C.near,C.nearValue,C.far,C.farValue,N.undergroundColorAlphaByDistance),u.A.clone(E,N.undergroundColor),N.lambertDiffuseMultiplier=D,N.vertexShadowDarkness=L;const k=!(0,f.A)(o.vertexArray)&&(0,f.A)(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;k&&u.A.clone(e.fillHighlightColor,N.fillHighlightColor),N.terrainExaggerationAndRelativeHeight.x=ae,N.terrainExaggerationAndRelativeHeight.y=ce,N.center3D=te.center,s.A.clone(ne,N.rtc),a.A.clone(Ae,N.tileRectangle),N.southAndNorthLatitude.x=fe,N.southAndNorthLatitude.y=pe,N.southMercatorYAndOneOverHeight.x=be,N.southMercatorYAndOneOverHeight.y=we;const V=_e,H=le(t.rectangle,e.cartographicLimitRectangle),$=ge,K=le(t.rectangle,v);s.A.fromElements(Y,X,J,N.hsbShift);const ee=t.rectangle,ue=1/ee.width,de=1/ee.height;V.x=(H.west-ee.west)*ue,V.y=(H.south-ee.south)*de,V.z=(H.east-ee.west)*ue,V.w=(H.north-ee.south)*de,a.A.clone(V,N.localizedCartographicLimitRectangle),$.x=(K.west-ee.west)*ue,$.y=(K.south-ee.south)*de,$.z=(K.east-ee.west)*ue,$.w=(K.north-ee.south)*de,a.A.clone($,N.localizedTranslucencyRectangle);const he=z&&T.A.fog(t._distance,n.fog.density)>T.A.EPSILON3;Z=Z&&(he||G);let me=!1,ye=!1,ve=!1,Te=!1,Ee=!1,Oe=!1,Ne=!1,Me=!1,Re=!1,ke=!1;for(;O<l&&Fe<Be;){const e=Ce[Fe],n=e.readyImagery;if(++Fe,!(0,f.A)(n)||0===n.imageryLayer.alpha)continue;const i=e.useWebMercatorT?n.textureWebMercator:n.texture;if(!(0,f.A)(i))throw new m.A("readyImagery is not actually ready!");const o=n.imageryLayer;(0,f.A)(e.textureTranslationAndScale)||(e.textureTranslationAndScale=o._calculateTextureTranslationAndScale(t,e)),N.dayTextures[O]=i,N.dayTextureTranslationAndScale[O]=e.textureTranslationAndScale,N.dayTextureTexCoordsRectangle[O]=e.textureCoordinateRectangle,N.dayTextureUseWebMercatorT[O]=e.useWebMercatorT,N.dayTextureAlpha[O]=o.alpha,Oe=Oe||1!==N.dayTextureAlpha[O],N.dayTextureNightAlpha[O]=o.nightAlpha,Ne=Ne||1!==N.dayTextureNightAlpha[O],N.dayTextureDayAlpha[O]=o.dayAlpha,Ne=Ne||1!==N.dayTextureDayAlpha[O],N.dayTextureBrightness[O]=o.brightness,me=me||N.dayTextureBrightness[O]!==W.A.DEFAULT_BRIGHTNESS,N.dayTextureContrast[O]=o.contrast,ye=ye||N.dayTextureContrast[O]!==W.A.DEFAULT_CONTRAST,N.dayTextureHue[O]=o.hue,ve=ve||N.dayTextureHue[O]!==W.A.DEFAULT_HUE,N.dayTextureSaturation[O]=o.saturation,Te=Te||N.dayTextureSaturation[O]!==W.A.DEFAULT_SATURATION,N.dayTextureOneOverGamma[O]=1/o.gamma,Ee=Ee||N.dayTextureOneOverGamma[O]!==1/W.A.DEFAULT_GAMMA,N.dayTextureSplit[O]=o.splitDirection,Me=Me||0!==N.dayTextureSplit[O];let s=N.dayTextureCutoutRectangles[O];if((0,f.A)(s)||(s=N.dayTextureCutoutRectangles[O]=new a.A),a.A.clone(a.A.ZERO,s),(0,f.A)(o.cutoutRectangle)){const e=le(ee,o.cutoutRectangle),t=I.A.simpleIntersection(e,ee,se);Re=(0,f.A)(t)||Re,s.x=(e.west-ee.west)*ue,s.y=(e.south-ee.south)*de,s.z=(e.east-ee.west)*ue,s.w=(e.north-ee.south)*de}let c=N.colorsToAlpha[O];(0,f.A)(c)||(c=N.colorsToAlpha[O]=new a.A);const l=(0,f.A)(o.colorToAlpha)&&o.colorToAlphaThreshold>0;if(ke=ke||l,l){const e=o.colorToAlpha;c.x=e.red,c.y=e.green,c.z=e.blue,c.w=o.colorToAlphaThreshold}else c.w=-1;if((0,f.A)(n.credits)){const e=n.credits;for(let t=0,n=e.length;t<n;++t)r.addCreditToNextFrame(e[t])}++O}N.dayTextures.length=O,N.waterMask=d,a.A.clone(h,N.waterMaskTranslationAndScale),N.minMaxHeight.x=ie.minimumHeight,N.minMaxHeight.y=ie.maximumHeight,w.A.clone(ie.matrix,N.scaleAndBias);const Ve=e._clippingPlanes,We=(0,f.A)(Ve)&&Ve.enabled&&t.isClipped;We&&(N.clippingPlanesEdgeColor=u.A.clone(Ve.edgeColor,N.clippingPlanesEdgeColor),N.clippingPlanesEdgeWidth=Ve.edgeWidth),Se.numberOfDayTextures=O,Se.applyBrightness=me,Se.applyContrast=ye,Se.applyHue=ve,Se.applySaturation=Te,Se.applyGamma=Ee,Se.applyAlpha=Oe,Se.applyDayNightAlpha=Ne,Se.applySplit=Me,Se.enableFog=he,Se.enableClippingPlanes=We,Se.clippingPlanes=Ve,Se.hasImageryLayerCutout=Re,Se.colorCorrect=Z,Se.highlightFillTile=k,Se.colorToAlpha=ke,Se.showUndergroundColor=P,Se.translucent=g;let qe=o.renderedMesh.indices.length;Ue||(qe=o.renderedMesh.indexCountWithoutSkirts),c.shaderProgram=e._surfaceShaderSet.getShaderProgram(Se),c.castShadows=j,c.receiveShadows=q,c.renderState=ze,c.primitiveType=x.A.TRIANGLES,c.vertexArray=o.vertexArray||o.fill.vertexArray,c.count=qe,c.uniformMap=A,c.pass=U.A.GLOBE,e._debug.wireframe&&(Ie(je,0,t),(0,f.A)(o.wireframeVertexArray)&&(c.vertexArray=o.wireframeVertexArray,c.primitiveType=x.A.LINES,c.count=2*qe));let Ye=c.boundingVolume;const Xe=c.orientedBoundingBox;n.mode!==Q.A.SCENE3D?(i.A.fromRectangleWithHeights2D(t.rectangle,n.mapProjection,re.minimumHeight,re.maximumHeight,Ye),s.A.fromElements(Ye.center.z,Ye.center.x,Ye.center.y,Ye.center),n.mode===Q.A.MORPHING&&(Ye=i.A.union(re.boundingSphere,Ye,Ye))):(c.boundingVolume=i.A.clone(re.boundingSphere,Ye),c.orientedBoundingBox=S.A.clone(re.boundingVolume,Xe)),c.dirty=!0,g&&_.updateDerivedCommands(c,n),oe(c,n),ze=He,Ge=Le}while(Fe<Be)}const Be=ne},208375:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(491446),r=n(605971),s=n(290176),a=n(697422);function c(){this._enabled=!1,this._frontFaceAlpha=1,this._frontFaceAlphaByDistance=void 0,this._backFaceAlpha=1,this._backFaceAlphaByDistance=void 0,this._rectangle=a.A.clone(a.A.MAX_VALUE)}Object.defineProperties(c.prototype,{enabled:{get:function(){return this._enabled},set:function(e){i.A.typeOf.bool("enabled",e),this._enabled=e}},frontFaceAlpha:{get:function(){return this._frontFaceAlpha},set:function(e){i.A.typeOf.number.greaterThanOrEquals("frontFaceAlpha",e,0),i.A.typeOf.number.lessThanOrEquals("frontFaceAlpha",e,1),this._frontFaceAlpha=e}},frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance},set:function(e){if((0,o.A)(e)&&e.far<e.near)throw new r.A("far distance must be greater than near distance.");this._frontFaceAlphaByDistance=s.A.clone(e,this._frontFaceAlphaByDistance)}},backFaceAlpha:{get:function(){return this._backFaceAlpha},set:function(e){i.A.typeOf.number.greaterThanOrEquals("backFaceAlpha",e,0),i.A.typeOf.number.lessThanOrEquals("backFaceAlpha",e,1),this._backFaceAlpha=e}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance},set:function(e){if((0,o.A)(e)&&e.far<e.near)throw new r.A("far distance must be greater than near distance.");this._backFaceAlphaByDistance=s.A.clone(e,this._backFaceAlphaByDistance)}},rectangle:{get:function(){return this._rectangle},set:function(e){(0,o.A)(e)||(e=a.A.clone(a.A.MAX_VALUE)),a.A.clone(e,this._rectangle)}}});const l=c},5105:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(647934),o=n(41476),r=n(491446),s=n(677354),a=n(769493),c=n(804701),l=n(57775),u=n(40118),d=n(307386);function h(){this._framebuffer=new c.A({depthStencil:!0,supportsDepthTexture:!0}),this._packedDepthFramebuffer=new c.A,this._renderState=void 0,this._packedDepthCommand=void 0,this._clearCommand=void 0,this._viewport=new i.A,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0}Object.defineProperties(h.prototype,{classificationTexture:{get:function(){return this._framebuffer.getColorTexture()}},classificationFramebuffer:{get:function(){return this._framebuffer.framebuffer}},packedDepthFramebuffer:{get:function(){return this._packedDepthFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._framebuffer.getDepthStencilTexture()}},depthStencilRenderbuffer:{get:function(){return this._framebuffer.getDepthStencilRenderbuffer()}},packedDepthTexture:{get:function(){return this._packedDepthFramebuffer.getColorTexture()}}}),h.prototype.updateAndClear=function(e,t,n,s){const c=t.width,h=t.height;!function(e,t,n,i,o){const r=o?t.halfFloatingPointTexture?l.A.HALF_FLOAT:l.A.FLOAT:l.A.UNSIGNED_BYTE;e._framebuffer.update(t,n,i,1,r),e._packedDepthFramebuffer.update(t,n,i)}(this,n,c,h,e),function(e,t,n,s,c){e._viewport.width=n,e._viewport.height=s;const l=!i.A.equals(e._viewport,c.viewport);let h=l!==e._useScissorTest;e._useScissorTest=l,i.A.equals(e._scissorRectangle,c.viewport)||(e._scissorRectangle=i.A.clone(c.viewport,e._scissorRectangle),h=!0),(0,r.A)(e._renderState)&&i.A.equals(e._viewport,e._renderState.viewport)&&!h||(e._renderState=u.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,r.A)(e._packedDepthCommand)||(e._packedDepthCommand=t.createViewportQuadCommand(d.A,{uniformMap:{u_depthTexture:function(){return e.depthStencilTexture}},owner:e})),(0,r.A)(e._clearCommand)||(e._clearCommand=new a.A({color:new o.A(0,0,0,0),depth:1,stencil:0,owner:e})),e._packedDepthCommand.framebuffer=e._packedDepthFramebuffer.framebuffer,e._packedDepthCommand.renderState=e._renderState,e._clearCommand.framebuffer=e.classificationFramebuffer,e._clearCommand.renderState=e._renderState}(this,n,c,h,s),this._useHdr=e},h.prototype.clearClassification=function(e,t){this._clearCommand.execute(e,t)},h.prototype.packDepth=function(e,t){return this._packedDepthCommand.execute(e,t),this.packedDepthTexture},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._packedDepthFramebuffer.destroy(),(0,s.A)(this)};const A=h},738375:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});var i=n(430346),o=n(419061),r=n(491446),s=n(290176),a=n(697422),c=n(377496),l=n(760866),u=n(40118),d=n(342875),h=n(200646),A=n(527083),f=n(62467);const p=11,m=["opaqueFrontFaceCommand","opaqueBackFaceCommand","depthOnlyFrontFaceCommand","depthOnlyBackFaceCommand","depthOnlyFrontAndBackFaceCommand","translucentFrontFaceCommand","translucentBackFaceCommand","translucentFrontFaceManualDepthTestCommand","translucentBackFaceManualDepthTestCommand","pickFrontFaceCommand","pickBackFaceCommand"];function _(){this._frontFaceAlphaByDistance=new s.A(0,1,0,1),this._backFaceAlphaByDistance=new s.A(0,1,0,1),this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._requiresManualDepthTest=!1,this._sunVisibleThroughGlobe=!1,this._environmentVisible=!1,this._useDepthPlane=!1,this._numberOfTextureUniforms=0,this._globeTranslucencyFramebuffer=void 0,this._rectangle=a.A.clone(a.A.MAX_VALUE),this._derivedCommandKey=0,this._derivedCommandsDirty=!1,this._derivedCommandPacks=void 0,this._derivedCommandTypes=new Array(p),this._derivedBlendCommandTypes=new Array(p),this._derivedPickCommandTypes=new Array(p),this._derivedCommandTypesToUpdate=new Array(p),this._derivedCommandsLength=0,this._derivedBlendCommandsLength=0,this._derivedPickCommandsLength=0,this._derivedCommandsToUpdateLength=0}function g(e,t,n,i){return e?(0,r.A)(n)?(s.A.clone(n,i),i.nearValue*=t,i.farValue*=t,i):(i.nearValue=t,i.farValue=t,i):(i.nearValue=1,i.farValue=1,i)}function y(e,t,n){return e&&(n.baseColor.alpha<1||t.nearValue<1||t.farValue<1)}function b(e,t,n,i,o){let r=0;const s=e._frontFaceTranslucent,a=e._backFaceTranslucent;if(!s)return r;const c=t.cameraUnderground,l=e._requiresManualDepthTest,u=i?9:l?7:5,d=i?10:l?8:6;return t.mode===f.A.SCENE2D?(o[r++]=2,o[r++]=u,r):(a?(n||(o[r++]=4),c?(o[r++]=u,o[r++]=d):(o[r++]=d,o[r++]=u)):c?(n||(o[r++]=3),o[r++]=0,o[r++]=d):(n||(o[r++]=2),o[r++]=1,o[r++]=u),r)}function v(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function T(e,t){return e.indexOf(t)>-1}function w(e,t){v(e.defines,"TRANSLUCENT"),v(t.defines,"TRANSLUCENT")}function E(e,t){v(e.defines,"GROUND_ATMOSPHERE"),v(t.defines,"GROUND_ATMOSPHERE"),v(e.defines,"FOG"),v(t.defines,"FOG"),v(e.defines,"TRANSLUCENT"),v(t.defines,"TRANSLUCENT")}function S(e,t){T(t.defines,"TILE_LIMIT_RECTANGLE")||T(t.defines,"ENABLE_CLIPPING_PLANES")||(t.sources=["void main() \n{ \n    out_FragColor = vec4(1.0); \n} \n"])}function C(e,t){const n=t.sources,i=n.length;for(let e=0;e<i;++e)n[e]=d.A.replaceMain(n[e],"czm_globe_translucency_main");n.push("\n\nuniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n#ifdef MANUAL_DEPTH_TEST \n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st)); \n    if (logDepthOrDepth != 0.0) \n    { \n        vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); \n        float depthEC = eyeCoordinate.z / eyeCoordinate.w; \n        if (v_positionEC.z < depthEC) \n        { \n            discard; \n        } \n    } \n#endif \n    czm_globe_translucency_main(); \n    vec4 classificationColor = texture(u_classificationTexture, st); \n    if (classificationColor.a > 0.0) \n    { \n        // Reverse premultiplication process to get the correct composited result of the classification primitives \n        classificationColor.rgb /= classificationColor.a; \n    } \n    out_FragColor = classificationColor * vec4(classificationColor.aaa, 1.0) + out_FragColor * (1.0 - classificationColor.a); \n} \n")}function x(e,t){C(0,t),v(e.defines,"GROUND_ATMOSPHERE"),v(t.defines,"GROUND_ATMOSPHERE"),v(e.defines,"FOG"),v(t.defines,"FOG")}function I(e,t){C(0,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function P(e,t){x(e,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function D(e,t){t.sources=["uniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n    vec4 pickColor = texture(u_classificationTexture, st); \n    if (pickColor == vec4(0.0)) \n    { \n        discard; \n    } \n    out_FragColor = pickColor; \n} \n"]}function O(e,t,n,i,o,s){if(!(0,r.A)(o))return t;if(!i&&(0,r.A)(n))return n;let a=e.shaderCache.getDerivedShaderProgram(t,s);if(!(0,r.A)(a)){const n=t._attributeLocations,i=t.vertexShaderSource.clone(),c=t.fragmentShaderSource.clone();i.defines=(0,r.A)(i.defines)?i.defines.slice(0):[],c.defines=(0,r.A)(c.defines)?c.defines.slice(0):[],o(i,c),a=e.shaderCache.createDerivedShaderProgram(t,s,{vertexShaderSource:i,fragmentShaderSource:c,attributeLocations:n})}return a}function L(e){e.cull.face=A.A.BACK,e.cull.enabled=!0}function N(e){e.cull.face=A.A.FRONT,e.cull.enabled=!0}function M(e){e.cull.face=A.A.BACK,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function R(e){e.cull.face=A.A.FRONT,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function F(e){e.cull.enabled=!1,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function B(e){e.cull.face=A.A.BACK,e.cull.enabled=!0,e.depthMask=!1,e.blending=h.A.ALPHA_BLEND}function U(e){e.cull.face=A.A.FRONT,e.cull.enabled=!0,e.depthMask=!1,e.blending=h.A.ALPHA_BLEND}function k(e){e.cull.face=A.A.BACK,e.cull.enabled=!0,e.blending.enabled=!1}function V(e){e.cull.face=A.A.FRONT,e.cull.enabled=!0,e.blending.enabled=!1}function H(e,t,n,i,o){if(!(0,r.A)(i))return e;if(!n&&(0,r.A)(t))return t;let s=o[e.id];if(!(0,r.A)(s)){const t=u.A.getState(e);i(t),s=u.A.fromCache(t),o[e.id]=s}return s}function z(e){return{u_classificationTexture:function(){return e._globeTranslucencyFramebuffer.classificationTexture}}}function G(e,t,n,o,s){return(0,r.A)(s)?!o&&(0,r.A)(n)?n:(0,i.A)(t,s(e),!1):t}function j(e){this.pass=e.pass,this.pickOnly=e.pickOnly,this.getShaderProgramFunction=e.getShaderProgramFunction,this.getRenderStateFunction=e.getRenderStateFunction,this.getUniformMapFunction=e.getUniformMapFunction,this.renderStateCache={}}Object.defineProperties(_.prototype,{frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance}},translucent:{get:function(){return this._frontFaceTranslucent}},sunVisibleThroughGlobe:{get:function(){return this._sunVisibleThroughGlobe}},environmentVisible:{get:function(){return this._environmentVisible}},useDepthPlane:{get:function(){return this._useDepthPlane}},numberOfTextureUniforms:{get:function(){return this._numberOfTextureUniforms}},rectangle:{get:function(){return this._rectangle}}}),_.prototype.update=function(e){const t=e.globe;if(!(0,r.A)(t)||!t.show)return this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._sunVisibleThroughGlobe=!0,this._environmentVisible=!0,void(this._useDepthPlane=!1);this._frontFaceAlphaByDistance=g(t.translucency.enabled,t.translucency.frontFaceAlpha,t.translucency.frontFaceAlphaByDistance,this._frontFaceAlphaByDistance),this._backFaceAlphaByDistance=g(t.translucency.enabled,t.translucency.backFaceAlpha,t.translucency.backFaceAlphaByDistance,this._backFaceAlphaByDistance),this._frontFaceTranslucent=y(t.translucency.enabled,this._frontFaceAlphaByDistance,t),this._backFaceTranslucent=y(t.translucency.enabled,this._backFaceAlphaByDistance,t),this._requiresManualDepthTest=function(e,t,n){return e._frontFaceTranslucent&&!e._backFaceTranslucent&&!n.depthTestAgainstTerrain&&t.mode!==f.A.SCENE2D&&t.context.depthTexture}(this,e,t),this._sunVisibleThroughGlobe=function(e,t){const n=e._frontFaceTranslucent,i=e._backFaceTranslucent;return n&&(t.cameraUnderground||i)}(this,e),this._environmentVisible=function(e,t){return!t.cameraUnderground||e._frontFaceTranslucent}(this,e),this._useDepthPlane=function(e,t){return!t.cameraUnderground&&!e._frontFaceTranslucent}(this,e),this._numberOfTextureUniforms=function(e){let t=0;return e._frontFaceTranslucent&&++t,e._requiresManualDepthTest&&++t,t}(this),this._rectangle=a.A.clone(t.translucency.rectangle,this._rectangle),function(e,t){let n;e._derivedCommandsLength=b(e,t,!1,!1,e._derivedCommandTypes),e._derivedBlendCommandsLength=b(e,t,!0,!1,e._derivedBlendCommandTypes),e._derivedPickCommandsLength=b(e,t,!1,!0,e._derivedPickCommandTypes);let i=0;for(n=0;n<e._derivedCommandsLength;++n)i|=1<<e._derivedCommandTypes[n];for(n=0;n<e._derivedBlendCommandsLength;++n)i|=1<<e._derivedBlendCommandTypes[n];for(n=0;n<e._derivedPickCommandsLength;++n)i|=1<<e._derivedPickCommandTypes[n];let o=0;for(n=0;n<p;++n)(i&1<<n)>0&&(e._derivedCommandTypesToUpdate[o++]=n);e._derivedCommandsToUpdateLength=o;const s=i!==e._derivedCommandKey;e._derivedCommandKey=i,e._derivedCommandsDirty=s,!(0,r.A)(e._derivedCommandPacks)&&e._frontFaceTranslucent&&(e._derivedCommandPacks=[new j({pass:l.A.GLOBE,pickOnly:!1,getShaderProgramFunction:w,getRenderStateFunction:L,getUniformMapFunction:void 0}),new j({pass:l.A.GLOBE,pickOnly:!1,getShaderProgramFunction:E,getRenderStateFunction:N,getUniformMapFunction:void 0}),new j({pass:l.A.GLOBE,pickOnly:!1,getShaderProgramFunction:S,getRenderStateFunction:M,getUniformMapFunction:void 0}),new j({pass:l.A.GLOBE,pickOnly:!1,getShaderProgramFunction:S,getRenderStateFunction:R,getUniformMapFunction:void 0}),new j({pass:l.A.GLOBE,pickOnly:!1,getShaderProgramFunction:S,getRenderStateFunction:F,getUniformMapFunction:void 0}),new j({pass:l.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:C,getRenderStateFunction:B,getUniformMapFunction:z}),new j({pass:l.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:x,getRenderStateFunction:U,getUniformMapFunction:z}),new j({pass:l.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:I,getRenderStateFunction:B,getUniformMapFunction:z}),new j({pass:l.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:P,getRenderStateFunction:U,getUniformMapFunction:z}),new j({pass:l.A.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:D,getRenderStateFunction:k,getUniformMapFunction:z}),new j({pass:l.A.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:D,getRenderStateFunction:V,getUniformMapFunction:z})])}(this,e)};const W=new Array(p),q=new Array(p);function Y(e,t,n,i,o,s,a){for(let c=0;c<t;++c){const t=e[c],l=t.derivedCommands.type;(!(0,r.A)(a)||a.indexOf(l)>-1)&&n(t,i,o,s)}}function X(e,t,n,i,o,r){for(let s=0;s<t;++s)n(e[s],i,o,r)}_.prototype.updateDerivedCommands=function(e,t){const n=this._derivedCommandTypesToUpdate,i=this._derivedCommandsToUpdateLength;if(0!==i){for(let e=0;e<i;++e)q[e]=this._derivedCommandPacks[n[e]],W[e]=m[n[e]];!function(e,t,n,i,s,a,l){let u=t.derivedCommands.globeTranslucency;const d=e._derivedCommandsDirty;if(t.dirty||!(0,r.A)(u)||d){t.dirty=!1,(0,r.A)(u)||(u={},t.derivedCommands.globeTranslucency=u);const d=l.frameNumber,h=(0,o.A)(u.uniformMapDirtyFrame,0),A=(0,o.A)(u.shaderProgramDirtyFrame,0),f=(0,o.A)(u.renderStateDirtyFrame,0),p=u.uniformMap!==t.uniformMap,m=u.shaderProgramId!==t.shaderProgram.id,_=u.renderStateId!==t.renderState.id;p&&(u.uniformMapDirtyFrame=d),m&&(u.shaderProgramDirtyFrame=d),_&&(u.renderStateDirtyFrame=d),u.uniformMap=t.uniformMap,u.shaderProgramId=t.shaderProgram.id,u.renderStateId=t.renderState.id;for(let g=0;g<n;++g){const n=a[g],y=i[g],b=s[g];let v,T,w,E=u[b];(0,r.A)(E)?(v=E.uniformMap,T=E.shaderProgram,w=E.renderState):(v=void 0,T=void 0,w=void 0),E=c.A.shallowClone(t,E),u[b]=E;const S=(0,o.A)(E.derivedCommands.uniformMapDirtyFrame,0),C=(0,o.A)(E.derivedCommands.shaderProgramDirtyFrame,0),x=(0,o.A)(E.derivedCommands.renderStateDirtyFrame,0),I=p||S<h,P=m||C<A,D=_||x<f;I&&(E.derivedCommands.uniformMapDirtyFrame=d),P&&(E.derivedCommands.shaderProgramDirtyFrame=d),D&&(E.derivedCommands.renderStateDirtyFrame=d),E.derivedCommands.type=y,E.pass=n.pass,E.pickOnly=n.pickOnly,E.uniformMap=G(e,t.uniformMap,v,I,n.getUniformMapFunction),E.shaderProgram=O(l.context,t.shaderProgram,T,P,n.getShaderProgramFunction,b),E.renderState=H(t.renderState,w,D,n.getRenderStateFunction,n.renderStateCache)}}}(this,e,i,n,W,q,t)}},_.prototype.pushDerivedCommands=function(e,t,n){const i=n.passes.pick;if(i&&t)return;let o=this._derivedCommandTypes,r=this._derivedCommandsLength;if(i?(o=this._derivedPickCommandTypes,r=this._derivedPickCommandsLength):t&&(o=this._derivedBlendCommandTypes,r=this._derivedBlendCommandsLength),0===r)return void n.commandList.push(e);const s=e.derivedCommands.globeTranslucency;for(let e=0;e<r;++e){const t=m[o[e]];n.commandList.push(s[t])}};const J=[0,1],Q=[2,3,4];_.prototype.executeGlobeCommands=function(e,t,n,i,o){const r=i.context,s=e.commands[l.A.GLOBE],a=e.indices[l.A.GLOBE];0!==a&&(this._globeTranslucencyFramebuffer=n,n.clearClassification(r,o),Y(s,a,t,i,r,o,J))},_.prototype.executeGlobeClassificationCommands=function(e,t,n,i,o){const r=i.context,s=e.commands[l.A.GLOBE],a=e.indices[l.A.GLOBE],c=e.commands[l.A.TERRAIN_CLASSIFICATION],u=e.indices[l.A.TERRAIN_CLASSIFICATION];if(0===a||0===u)return;const d=this._frontFaceTranslucent,h=this._backFaceTranslucent;if(d&&h||X(c,u,t,i,r,o),!d&&!h)return;this._globeTranslucencyFramebuffer=n;const A=r.uniformState.globeDepthTexture,f=o.framebuffer;if(o.framebuffer=n.classificationFramebuffer,Y(s,a,t,i,r,o,Q),r.depthTexture){const e=n.packDepth(r,o);r.uniformState.globeDepthTexture=e}X(c,u,t,i,r,o),r.uniformState.globeDepthTexture=A,o.framebuffer=f};const $=_},386920:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(491446),s=n(800859),a=(function(){var e,t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(e){for(var n=new Uint8Array(10792),i=0;i<10792;++i){var o=e.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<10792;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79TebbbeJq9Geueu9Geub9Gbb9Gvuuuuueu9Gduueu9Gluuuueu9Gvuuuuub9Gouuuuuub9Gluuuub9GiuuueuiLQdilevlevlooroowwvbDDbelve9Weiiviebeoweuec:G;kekr;qiHo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWVbe8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9c9V919U9KbdE9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949wWV79P9V9UbiY9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWVbl8E9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWV9c9V919U9Kbv8A9TW79O9V9Wt9FW9U9J9V9KW69U9KW949wWV79P9V9UboE9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JWbra9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JW9c9V919U9KbwL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9p9JtbDK9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9r919HtbqL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVT949WbkE9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OWbPa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OW9ttV9P9Wbsa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9Wbzl79IV9RbHDwebcekdXCq:fSQdbk:fxeYu8Jjjjjbcjo9Rgv8Kjjjjbcbhodnalcefae0mbabcbRb:q:kjjbc:GeV86bbavcjdfcbcjdz:tjjjb8AdnaiTmbavcjdfadalzMjjjb8Akabaefhrabcefhwavalfcbcbcjdal9RalcFe0Ez:tjjjb8AavavcjdfalzMjjjbhDcj;abal9UhodndndndndnalTmbaoc;WFbGgecjdaecjd6Ehqcbhkdninakai9pmiaDcjlfcbcjdz:tjjjb8Aaqaiak9Rakaqfai6Egxcsfgecl4cifcd4hmadakal2fhPdndndndndnaec9WGgsTmbcbhzcehHaPhOawhAxekdnaxTmbcbhAcehHaPhCinaDaAfRbbhXaDcjlfheaChoaxhQinaeaoRbbgLaX9RgXcetaXcKtcK91cr4786bbaoalfhoaecefheaLhXaQcufgQmbkaraw9Ram6miawcbamz:tjjjbgeTmiaCcefhCaeamfhwaAcefgAal6hHaAal9hmbxvkkaraw9Ram6mvawcbamz:tjjjb8AceheinawgXamfhwalaegoSmldnaraw9Ram6mbaocefheawcbamz:tjjjb8AaXmekkcbhwaoal6mvxikindnaxTmbaDazfRbbhXaDcjlfheaOhoaxhQinaeaoRbbgLaX9RgXcetaXcKtcK91cr4786bbaoalfhoaecefheaLhXaQcufgQmbkkaraA9Ram6mearaAcbamz:tjjjbgKamfgw9RcK6mdcbhYaDcjlfhAinaDcjlfaYfh8AcwhCczhLcehQindndnaQce9hmbcuhoa8ARbbmecbhodninaogecsSmeaecefhoaAaefcefRbbTmbkkcucbaecs6EhoxekaQcetc;:FFFeGhocuaQtcu7cFeGhXcbheinaoaXaAaefRbb9nfhoaecefgecz9hmbkkaoaLaoaL6geEhLaQaCaeEhCaQcetgQcw6mbkdndndndnaCcufPdiebkaKaYco4fgeaeRbbcdciaCclSEaYci4coGtV86bbaCcw9hmeawa8A8Pbb83bbawcwfa8Acwf8Pbb83bbawczfhwxdkaKaYco4fgeaeRbbceaYci4coGtV86bbkdncwaC9TgEmbinawcb86bbawcefhwxbkkcuaCtcu7h8Acbh3aAh5ina5heaEhQcbhoinaeRbbgLa8AcFeGgXaLaX6EaoaCtVhoaecefheaQcufgQmbkawao86bba5aEfh5awcefhwa3aEfg3cz6mbkcbheindnaAaefRbbgoaX6mbawao86bbawcefhwkaecefgecz9hmbkkdnaYczfgYas9pmbaAczfhAaraw9RcL0mekkaYas6meawTmeaOcefhOazcefgzal6hHawhAazalSmixbkkcbhwaHceGTmexikcbhwaHceGmdkaDaPaxcufal2falzMjjjb8AaxakfhkawmbkcbhoxokcbhoxvkaiTmekcbhoaraw9Ralcaalca0E6mialc8F9nmexdkcbhoaecufca6mdkawcbcaal9Rgez:tjjjbaefhwkawaDcjdfalzMjjjbalfab9Rhokavcjof8Kjjjjbaok9heeuaecaaeca0Eabcj;abae9Uc;WFbGgdcjdadcjd6Egdfcufad9Uae2adcl4cifcd4adV2fcefkmbcbabBd:q:kjjbk;use3u8Jjjjjbc;ae9Rgl8Kjjjjbcbhvdnaici9UgocHfae0mbabcbydN:kjjbgrc;GeV86bbalc;abfcFecjez:tjjjb8AalcUfgw9cu83ibalc8WfgD9cu83ibalcyfgq9cu83ibalcafgk9cu83ibalcKfgx9cu83ibalczfgm9cu83ibal9cu83iwal9cu83ibabaefc9WfhPabcefgsaofhednaiTmbcmcsarcb9kgzEhHcbhOcbhAcbhCcbhXcbhQindnaeaP9nmbcbhvxikaQcufhvadaCcdtfgoydbhLaocwfydbhKaoclfydbhYcbh8Adndninalc;abfavcsGcitfgoydlhEdndndnaoydbgoaL9hmbaEaYSmekdnaoaY9hmbaEaK9hmba8Acefh8AxekaoaK9hmeaEaL9hmea8Acdfh8Aka8Ac870mdaXcufhvada8AciGcx2goc:y1jjbfydbaCfcdtfydbhEadaocN1jjbfydbaCfcdtfydbhKadaoc:q1jjbfydbaCfcdtfydbhLcbhodnindnalavcsGcdtfydbaE9hmbaohYxdkcuhYavcufhvaocefgocz9hmbkkaEaOSgvaYcb9kaYaH9iGgoce7Gh3dndndndndnaYcbcsavEaoEgvcs9hmbarce9imbaEaEaAaEcefaASgvEgAcefSmecmcsavEhvkasava8Acdtc;WeGV86bbavcs9hmeaEaA9Rgvcetavc8F917hvinaeavcFb0crtavcFbGV86bbaecefheavcje6hoavcr4hvaoTmbkaEhAxdkcPhvasa8AcdtcPV86bbaEhAkavTmbavaH9imekalaXcdtfaEBdbaXcefcsGhXkaOa3fhOalc;abfaQcitfgvaKBdlavaEBdbalc;abfaQcefcsGgvcitfgoaEBdlaoaLBdbavcefhoxikavcufhva8Aclfg8Ac;ab9hmbkkdnadceaKaOScetaYaOSEcx2gvc:q1jjbfydbaCfcdtfydbgLTadavcN1jjbfydbaCfcdtfydbg8AceSGadavc:y1jjbfydbaCfcdtfydbgYcdSGaOcb9hGazGg5ce9hmbaw9cu83ibaD9cu83ibaq9cu83ibak9cu83ibax9cu83ibam9cu83ibal9cu83iwal9cu83ibcbhOkcbhEaXcufgvhodnindnalaocsGcdtfydba8A9hmbaEhKxdkcuhKaocufhoaEcefgEcz9hmbkkcbhodnindnalavcsGcdtfydbaY9hmbaohExdkcuhEavcufhvaocefgocz9hmbkkaOaLaOSg8Efh3dndnaKcm0mbaKcefhKxekcbcsa8Aa3SgvEhKa3avfh3kdndnaEcm0mbaEcefhExekcbcsaYa3SgvEhEa3avfh3kc9:cua8EEh8FaEaKcltVhocbhvdndndninavcj1jjbfRbbaocFeGSmeavcefgvcz9hmbxdkkaLaO9havcm0Va5Vmbasavc;WeV86bbxekasa8F86bbaeao86bbaecefhekdna8EmbaLaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaLhAkdnaKcs9hmba8AaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka8AhAkdnaEcs9hmbaYaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaYhAkalaXcdtfaLBdbaXcefcsGhvdndnaKPzbeeeeeeeeeeeeeebekalavcdtfa8ABdbaXcdfcsGhvkdndnaEPzbeeeeeeeeeeeeeebekalavcdtfaYBdbavcefcsGhvkalc;abfaQcitfgoaLBdlaoa8ABdbalc;abfaQcefcsGcitfgoa8ABdlaoaYBdbalc;abfaQcdfcsGcitfgoaYBdlaoaLBdbaQcifhoavhXa3hOkascefhsaocsGhQaCcifgCai6mbkkcbhvaeaP0mbcbhvinaeavfavcj1jjbfRbb86bbavcefgvcz9hmbkaeab9Ravfhvkalc;aef8KjjjjbavkZeeucbhddninadcefgdc8F0meceadtae6mbkkadcrfcFeGcr9Uci2cdfabci9U2cHfkmbcbabBdN:kjjbk:ydewu8Jjjjjbcz9Rhlcbhvdnaicvfae0mbcbhvabcbRbN:kjjbc;qeV86bbal9cb83iwabcefhoabaefc98fhrdnaiTmbcbhwcbhDindnaoar6mbcbskadaDcdtfydbgqalcwfawaqav9Rgvavc8F91gv7av9Rc507gwcdtfgkydb9Rgvc8E91c9:Gavcdt7awVhvinaoavcFb0gecrtavcFbGV86bbavcr4hvaocefhoaembkakaqBdbaqhvaDcefgDai9hmbkkcbhvaoar0mbaocbBbbaoab9RclfhvkavkBeeucbhddninadcefgdc8F0meceadtae6mbkkadcwfcFeGcr9Uab2cvfk:dvli99dui99ludnaeTmbcuadcetcuftcu7:Yhvdndncuaicuftcu7:YgoJbbbZMgr:lJbbb9p9DTmbar:Ohwxekcjjjj94hwkcbhicbhDinalclfIdbgrJbbbbJbbjZalIdbgq:lar:lMalcwfIdbgk:lMgr:varJbbbb9BEgrNhxaqarNhralcxfIdbhqdndnakJbbbb9GTmbaxhkxekJbbjZar:l:tgkak:maxJbbbb9GEhkJbbjZax:l:tgxax:marJbbbb9GEhrkdndnaqJbbj:;aqJbbj:;9GEgxJbbjZaxJbbjZ9FEavNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohmxekcjjjj94hmkdndnakJbbj:;akJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;akJbbbb9GEMgq:lJbbb9p9DTmbaq:OhPxekcjjjj94hPkdndnarJbbj:;arJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;arJbbbb9GEMgr:lJbbb9p9DTmbar:Ohsxekcjjjj94hskdndnadcl9hmbabaDfgzas86bbazcifam86bbazcdfaw86bbazcefaP86bbxekabaifgzas87ebazcofam87ebazclfaw87ebazcdfaP87ebkalczfhlaicwfhiaDclfhDaecufgembkkk;klld99eud99eudnaeTmbdndncuaicuftcu7:YgvJbbbZMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikaic;8FiGhrinabcofcicdalclfIdb:lalIdb:l9EgialcwfIdb:lalaicdtfIdb:l9EEgialcxfIdb:lalaicdtfIdb:l9EEgiarV87ebdndnalaicefciGcdtfIdbJ;Zl:1ZNJbbj:;JbbjZalaicdtfIdbJbbbb9DEgoNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabaq87ebdndnaoalaicdfciGcdtfIdbJ;Zl:1ZNNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabcdfaq87ebdndnaoalaicufciGcdtfIdbJ;Zl:1ZNNgoJbbj:;aoJbbj:;9GEgwJbbjZawJbbjZ9FEavNJbbbZJbbb:;aoJbbbb9GEMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikabclfai87ebabcwfhbalczfhlaecufgembkkk:Hvdxue998Jjjjjbcjd9Rgo8Kjjjjbadcd4hrdndndndnavcd9hmbadcl6mearcearce0EhwaohDinaDc:CuBdbaDclfhDawcufgwmbkaeTmiadcl6mdarcearce0EhqarcdthkalhxcbhminaohDaxhwaqhPinaDaDydbgsawydbgzcL4cFeGc:cufcbazEgzasaz9kEBdbawclfhwaDclfhDaPcufgPmbkaxakfhxamcefgmae9hmbkkaeTmdxekaeTmekavcb9hadcl6gqVhHarcearce0Ehkarcdthrceai9Rhmcbhdindndndnavce9hmbaqmdc:CuhwalhDakhPinawaDydbgscL4cFeGc:cufcbasEgsawas9kEhwaDclfhDaPcufgPmbxdkkc:CuhwaHmbaohDalhPakhsinaDaPydbgzcL4cFeGgxc8Aaxc8A9kEc:cufcbazEBdbaPclfhPaDclfhDascufgsmbkkaqmbcbhDakhsinawhPdnavceSmbaoaDfydbhPkdndnalaDfIdbgOcjjj;8iamaPfgPcLt9R::NJbbbZJbbb:;aOJbbbb9GEMgO:lJbbb9p9DTmbaO:Ohzxekcjjjj94hzkabaDfazcFFFrGaPcKtVBdbaDclfhDascufgsmbkkabarfhbalarfhladcefgdae9hmbkkaocjdf8Kjjjjbk;TkdCui998Jjjjjbc:qd9Rgv8Kjjjjbavc:Oefcbc;Kbz:tjjjb8AcbhodnadTmbcbhoaiTmbdnabae9hmbavcuadcdtgoadcFFFFi0Ecbyd1:kjjbHjjjjbbgeBd:OeavceBd1daeabaozMjjjb8Akavc:yefcwfcbBdbav9cb83i:yeavc:yefaeadaiavc:Oefz:njjjbcuaicdtgraicFFFFi0Egwcbyd1:kjjbHjjjjbbhoavc:Oefavyd1dgDcdtfaoBdbavaDcefgqBd1daoavyd:yegkarzMjjjbhxavc:Oefaqcdtfadci9Ugmcbyd1:kjjbHjjjjbbgoBdbavaDcdfgrBd1daocbamz:tjjjbhPavc:Oefarcdtfawcbyd1:kjjbHjjjjbbgsBdbavaDcifgqBd1daxhoashrinaralIdbalaoydbgwcwawcw6Ecdtfc;ebfIdbMUdbaoclfhoarclfhraicufgimbkavc:OefaqcdtfcuamcdtadcFFFF970Ecbyd1:kjjbHjjjjbbgqBdbavaDclfBd1ddnadci6mbamceamce0EhiaehoaqhrinarasaoydbcdtfIdbasaoclfydbcdtfIdbMasaocwfydbcdtfIdbMUdbaocxfhoarclfhraicufgimbkkavc;mbfhzavhoavyd:CehHavyd:GehOcbhwcbhrcbhAcehCinaohXcihQaearci2gLcdtfgocwfydbhKaoydbhdabaAcx2fgiclfaoclfydbgDBdbaiadBdbaicwfaKBdbaParfce86bbazaKBdwazaDBdlazadBdbaqarcdtfcbBdbdnawTmbcihQaXhiindnaiydbgoadSmbaoaDSmbaoaKSmbazaQcdtfaoBdbaQcefhQkaiclfhiawcufgwmbkkaAcefhAaxadcdtfgoaoydbcufBdbaxaDcdtfgoaoydbcufBdbaxaKcdtfgoaoydbcufBdbcbhwinaOaHaeawaLfcdtfydbcdtgifydbcdtfgKhoakaifgDydbgdhidnadTmbdninaoydbarSmeaoclfhoaicufgiTmdxbkkaoadcdtaKfc98fydbBdbaDaDydbcufBdbkawcefgwci9hmbkdndndnaQTmbcuhrJbbbbhYcbhoinasazaocdtfydbcdtgifgwIdbh8AawalcbaocefgDaocs0EcdtfIdbalaxaifydbgocwaocw6Ecdtfc;ebfIdbMgEUdbdnakaifydbgwTmbaEa8A:thEaOaHaifydbcdtfhoawcdthiinaqaoydbgwcdtfgdaEadIdbMg8AUdba8AaYaYa8A9DgdEhYawaradEhraoclfhoaic98fgimbkkaDhoaDaQ9hmbkarcu9hmekaCam9pmeindnaPaCfRbbmbaChrxdkamaCcefgC9hmbxdkkaQczaQcz6EhwazhoaXhzarcu9hmekkavyd1dhokaocdtavc:Oeffc98fhrdninaoTmearydbcbyd:e:kjjbH:bjjjbbarc98fhraocufhoxbkkavc:qdf8Kjjjjbk;UlevucuaicdtgvaicFFFFi0Egocbyd1:kjjbHjjjjbbhralalyd9GgwcdtfarBdbalawcefBd9GabarBdbaocbyd1:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdlcuadcdtadcFFFFi0Ecbyd1:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdwabydbcbavz:tjjjb8Aadci9UhwdnadTmbabydbhoaehladhrinaoalydbcdtfgvavydbcefBdbalclfhlarcufgrmbkkdnaiTmbabydbhlabydlhrcbhvaihoinaravBdbarclfhralydbavfhvalclfhlaocufgombkkdnadci6mbawceawce0EhDabydlhrabydwhvcbhlinaecwfydbhoaeclfydbhdaraeydbcdtfgwawydbgwcefBdbavawcdtfalBdbaradcdtfgdadydbgdcefBdbavadcdtfalBdbaraocdtfgoaoydbgocefBdbavaocdtfalBdbaecxfheaDalcefgl9hmbkkdnaiTmbabydlheabydbhlinaeaeydbalydb9RBdbalclfhlaeclfheaicufgimbkkkQbabaeadaic:01jjbz:mjjjbkQbabaeadaic:C:jjjbz:mjjjbk9DeeuabcFeaicdtz:tjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd:m:kjjbgeabcifc98GfgbBd:m:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd:m:kjjbgeabcrfc94GfgbBd:m:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd:m:kjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd:m:kjjbfgdBd:m:kjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk:Eddbcjwk:edb4:h9w9N94:P:gW:j9O:ye9Pbbbbbbebbbdbbbebbbdbbbbbbbdbbbbbbbebbbbbbb:l29hZ;69:9kZ;N;76Z;rg97Z;z;o9xZ8J;B85Z;:;u9yZ;b;k9HZ:2;Z9DZ9e:l9mZ59A8KZ:r;T3Z:A:zYZ79OHZ;j4::8::Y:D9V8:bbbb9s:49:Z8R:hBZ9M9M;M8:L;z;o8:;8:PG89q;x:J878R:hQ8::M:B;e87bbbbbbjZbbjZbbjZ:E;V;N8::Y:DsZ9i;H;68:xd;R8:;h0838:;W:NoZbbbb:WV9O8:uf888:9i;H;68:9c9G;L89;n;m9m89;D8Ko8:bbbbf:8tZ9m836ZS:2AZL;zPZZ818EZ9e:lxZ;U98F8:819E;68:bc:eqkxebbbdbbbaWbb"),{}).then((function(t){(e=t.instance).exports.__wasm_call_ctors(),e.exports.meshopt_encodeVertexVersion(0),e.exports.meshopt_encodeIndexVersion(1)}))}(),function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var n,i=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;a9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;d8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgAclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;tzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfalaDcu7gPcl4fcsGcitfgsydlhzasydbhHdnaDcsGgDak9pmbavaiaPfcsGcdtfydbaxaDEhsaDThDdndnadcd9hmbabarcetfgPaH87ebaPcdfaz87ebaPclfas87ebxekabarcdtfgPaHBdbaPclfazBdbaPcwfasBdbkaxaDfhxavc;abfalcitfgPasBdbaPazBdlavaicdtfasBdbavc;abfalcefcsGglcitfgPaHBdbaPasBdlaiaDfhialcefhlxdkdndnaDcsSmbamaDfaDc987fcefhmxekaocefhDao8SbbgscFeGhPdndnascu9mmbaDhoxekaocvfhoaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhokaPce4cbaPceG9R7amfhmkdndnadcd9hmbabarcetfgDaH87ebaDcdfaz87ebaDclfam87ebxekabarcdtfgDaHBdbaDclfazBdbaDcwfamBdbkavc;abfalcitfgDamBdbaDazBdlavaicdtfamBdbavc;abfalcefcsGglcitfgDaHBdbaDamBdlaicefhialcefhlxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHcdfaD87ebaHclfas87ebxekabarcdtfgHaxBdbaHclfaDBdbaHcwfasBdbkavaicdtfaxBdbavc;abfalcitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfalcefcsGcitfgHasBdbaHaDBdlavaiaPfcsGgicdtfasBdbavc;abfalcdfcsGglcitfgDaxBdbaDasBdlalcefhlaiaOfhiazaOfhxxekaxcbaoRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbaocefhDxekaocdfhDao8SbegPcFeGhsdnaPcu9kmbaocofhAascFbGhscrhodninaD8SbbgPcFbGaotasVhsaPcu9kmeaDcefhDaocrfgoc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbgocFeGhPdnaocu9kmbaDcvfhzaPcFbGhPcrhodninas8SbbgDcFbGaotaPVhPaDcu9kmeascefhsaocrfgoc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashoxekascefhoas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninao8SbbgscFbGaDtaPVhPascu9kmeaocefhoaDcrfgDc8J9hmbkaOhoxekaocefhokaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDcdfaz87ebaDclfaO87ebxekabarcdtfgDaABdbaDclfazBdbaDcwfaOBdbkavc;abfalcitfgDazBdbaDaABdlavaicdtfaABdbavc;abfalcefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfalcdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiarcifgrae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:wPliuo97eue978Jjjjjbca9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskdnalTmbcbhvabhdinadczfgxaxpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabalcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbadczfhdaeclfgeav6mbkkdnaval9pmbaialciGgecdtgdVcbc;abad9R;8kbaiabavcdtfgvad;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiad;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:78Yqdbk:qzezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhlaicefhodnadTmbalc;WFbGglcjdalcjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfglcl4cifcd4hxdndndndnalc9WGgmTmbcbhPcehsawcjdfhzaohHinaraH9Rax6midnaraHaxfgo9RcK6mbczhlinalgic9Wfglawcj;cbffhOdndndndndnaHalco4fRbbalci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOaoRblaoRbbgAco4glalciSgCE86bbawcj;cbfaifglcGfaoclfaCfgORbbaAcl4ciGgCaCciSgCE86bbalcVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbalc7faOaCfgORbbaAciGgAaAciSgAE86bbalctfaOaAfgARbbaoRbegOco4gCaCciSgCE86bbalc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc93faAaCfgARbbaOciGgOaOciSgOE86bbalc94faAaOfgARbbaoRbdgOco4gCaCciSgCE86bbalc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc97faAaCfgARbbaOciGgOaOciSgOE86bbalc98faAaOfgORbbaoRbigoco4gAaAciSgAE86bbalc99faOaAfgORbbaocl4ciGgAaAciSgAE86bbalc9:faOaAfgORbbaocd4ciGgAaAciSgAE86bbalcufaOaAfglRbbaociGgoaociSgoE86bbalaofhoxdkaOaoRbwaoRbbgAcl4glalcsSgCE86bbawcj;cbfaifglcGfaocwfaCfgORbbaAcsGgAaAcsSgAE86bbalcVfaOaAfgORbbaoRbegAcl4gCaCcsSgCE86bbalc7faOaCfgORbbaAcsGgAaAcsSgAE86bbalctfaOaAfgORbbaoRbdgAcl4gCaCcsSgCE86bbalc91faOaCfgORbbaAcsGgAaAcsSgAE86bbalc4faOaAfgORbbaoRbigAcl4gCaCcsSgCE86bbalc93faOaCfgORbbaAcsGgAaAcsSgAE86bbalc94faOaAfgORbbaoRblgAcl4gCaCcsSgCE86bbalc95faOaCfgORbbaAcsGgAaAcsSgAE86bbalc96faOaAfgORbbaoRbvgAcl4gCaCcsSgCE86bbalc97faOaCfgORbbaAcsGgAaAcsSgAE86bbalc98faOaAfgORbbaoRbogAcl4gCaCcsSgCE86bbalc99faOaCfgORbbaAcsGgAaAcsSgAE86bbalc9:faOaAfgORbbaoRbrgocl4gAaAcsSgAE86bbalcufaOaAfglRbbaocsGgoaocsSgoE86bbalaofhoxekaOao8Pbb83bbaOcwfaocwf8Pbb83bbaoczfhokdnaiam9pmbaiczfhlarao9RcL0mekkaiam6miaoTmidnakTmbawaPfRbbhOawcj;cbfhlazhiakhHinaialRbbgAce4cbaAceG9R7aOfgO86bbaiadfhialcefhlaHcufgHmbkkazcefhzaPcefgPad6hsaohHaPad9hmexvkkcbhoasceGmdxikaoaxad2fhPdnakTmbcbhmcehsawcjdfhCinarao9Rax6miaoTmdaoaxfhoawamfRbbhOawcj;cbfhlaChiakhHinaialRbbgAce4cbaAceG9R7aOfgO86bbaiadfhialcefhlaHcufgHmbkaCcefhCamcefgmad6hsamad9hmbkaPhoxikcbhlcehsinarao9Rax6mdaoTmeaoaxfhoalcefglad6hsadal9hmbkaPhoxdkcbhoasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqaombkc9:hoxekcbc99arao9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;xzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfalaDcu7gPcl4fcsGcitfgsydlhzasydbhHdnaDcsGgDak9pmbavaiaPfcsGcdtfydbaxaDEhsaDThDdndnadcd9hmbabarcetfgPaH87ebaPcdfaz87ebaPclfas87ebxekabarcdtfgPaHBdbaPclfazBdbaPcwfasBdbkaxaDfhxavc;abfalcitfgPasBdbaPazBdlavaicdtfasBdbavc;abfalcefcsGglcitfgPaHBdbaPasBdlaiaDfhialcefhlxdkdndnaDcsSmbamaDfaDc987fcefhmxekaocefhDao8SbbgscFeGhPdndnascu9mmbaDhoxekaocvfhoaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhokaPce4cbaPceG9R7amfhmkdndnadcd9hmbabarcetfgDaH87ebaDcdfaz87ebaDclfam87ebxekabarcdtfgDaHBdbaDclfazBdbaDcwfamBdbkavc;abfalcitfgDamBdbaDazBdlavaicdtfamBdbavc;abfalcefcsGglcitfgDaHBdbaDamBdlaicefhialcefhlxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHcdfaD87ebaHclfas87ebxekabarcdtfgHaxBdbaHclfaDBdbaHcwfasBdbkavaicdtfaxBdbavc;abfalcitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfalcefcsGcitfgHasBdbaHaDBdlavaiaPfcsGgicdtfasBdbavc;abfalcdfcsGglcitfgDaxBdbaDasBdlalcefhlaiaOfhiazaOfhxxekaxcbaoRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbaocefhDxekaocdfhDao8SbegPcFeGhsdnaPcu9kmbaocofhAascFbGhscrhodninaD8SbbgPcFbGaotasVhsaPcu9kmeaDcefhDaocrfgoc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbgocFeGhPdnaocu9kmbaDcvfhzaPcFbGhPcrhodninas8SbbgDcFbGaotaPVhPaDcu9kmeascefhsaocrfgoc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashoxekascefhoas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninao8SbbgscFbGaDtaPVhPascu9kmeaocefhoaDcrfgDc8J9hmbkaOhoxekaocefhokaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDcdfaz87ebaDclfaO87ebxekabarcdtfgDaABdbaDclfazBdbaDcwfaOBdbkavc;abfalcitfgDazBdbaDaABdlavaicdtfaABdbavc;abfalcefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfalcdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiarcifgrae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj;8ifcjjj98G::NUdbabclfhbadcufgdmbkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",o=WebAssembly.instantiate(r(i),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function r(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var o=e.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}function s(e,t,i,o,r,s){var a=n.exports.sbrk,c=i+3&-4,l=a(c*o),u=a(r.length),d=new Uint8Array(n.exports.memory.buffer);d.set(r,u);var h=e(l,i,o,u,r.length);if(0==h&&s&&s(l,c,o),t.set(d.subarray(l,l+i*o)),a(l-a(0)),0!=h)throw new Error("Malformed buffer data: "+h)}var a={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},l=[],u=0;function d(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var n=e.data;t.pending-=n.count,t.requests[n.id][n.action](n.value),delete t.requests[n.id]},t}function h(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(r(i))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+s.toString()+A.toString(),n=new Blob([t],{type:"text/javascript"}),o=URL.createObjectURL(n),a=0;a<e;++a)l[a]=d(o);URL.revokeObjectURL(o)}function A(e){o.then((function(){var t=e.data;try{var i=new Uint8Array(t.count*t.size);s(n.exports[t.mode],i,t.count,t.size,t.source,n.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:i},[i.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}}))}return{ready:o,supported:!0,useWorkers:function(e){h(e)},decodeVertexBuffer:function(e,t,i,o,r){s(n.exports.meshopt_decodeVertexBuffer,e,t,i,o,n.exports[a[r]])},decodeIndexBuffer:function(e,t,i,o){s(n.exports.meshopt_decodeIndexBuffer,e,t,i,o)},decodeIndexSequence:function(e,t,i,o){s(n.exports.meshopt_decodeIndexSequence,e,t,i,o)},decodeGltfBuffer:function(e,t,i,o,r,l){s(n.exports[c[r]],e,t,i,o,n.exports[a[l]])},decodeGltfBufferAsync:function(e,t,i,r,d){return l.length>0?function(e,t,n,i,o){for(var r=l[0],s=1;s<l.length;++s)l[s].pending<r.pending&&(r=l[s]);return new Promise((function(s,a){var c=new Uint8Array(n),l=u++;r.pending+=e,r.requests[l]={resolve:s,reject:a},r.object.postMessage({id:l,count:e,size:t,source:c,mode:i,filter:o},[c.buffer])}))}(e,t,i,c[r],a[d]):o.then((function(){var o=new Uint8Array(e*t);return s(n.exports[c[r]],o,e,t,i,n.exports[a[d]]),o}))}}}()),c=(function(){var e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(t){for(var n=new Uint8Array(9709),i=0;i<9709;++i){var o=t.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<9709;++i)n[r++]=n[i]<60?e[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79TebbbecD9Geueu9Geub9Gbb9Gquuuuuuu99uueu9Gvuuuuub9Gluuuue999Giuuue999Gluuuueu9Giuuueuimxdilvorbwwbewlve9Weiiviebeoweuecj;jekr7oo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bbz9TW79O9V9Wt9F79P9T9W29P9M95beX9TW79O9V9Wt9F79P9T9W29P9M959t9J9H2Wbla9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9Wbvl79IV9RboDwebcekdDqq:XJxdbkp8WiKuP99Hu8Jjjjjbcj;bb9Rgq8KjjjjbaqcKfcbc;Kbz1jjjb8AaqcualcdtgkalcFFFFi0Egxcbyd;S1jjbHjjjjbbgmBdKaqceBd94aqamBdwaqaxcbyd;S1jjbHjjjjbbgPBd3aqcdBd94aqaPBdxaqcuadcitadcFFFFe0Ecbyd;S1jjbHjjjjbbgsBdaaqciBd94aqasBdzaqcwfaeadalcbz:cjjjbaqaxcbyd;S1jjbHjjjjbbgzBd8KaqclBd94aqaxcbyd;S1jjbHjjjjbbgHBdyaqcvBd94alcd4alfhOcehAinaAgCcethAaCaO6mbkcbhXaqcuaCcdtgAaCcFFFFi0Ecbyd;S1jjbHjjjjbbgOBd8SaqcoBd94aOcFeaAz1jjjbhQdnalTmbavcd4hLaCcufhKinaiaXaL2cdtfgYydlgCcH4aC7c:F:b:DD2aYydbgCcH4aC7c;D;O:B8J27aYydwgCcH4aC7c:3F;N8N27hOcbhCdndninaQaOaKGgOcdtfg8AydbgAcuSmeaiaAaL2cdtfaYcxz:ljjjbTmdaCcefgCaOfhOaCaK9nmbxdkka8AaXBdbaXhAkazaXcdtfaABdbaXcefgXal9hmbkcbhCaHhAinaAaCBdbaAclfhAalaCcefgC9hmbkcbhCazhAaHhOindnaCaAydbgKSmbaOaHaKcdtfgKydbBdbaKaCBdbkaAclfhAaOclfhOalaCcefgC9hmbkkcbhOaqalcbyd;S1jjbHjjjjbbgYBd8WaqcrBd94aqaxcbyd;S1jjbHjjjjbbgCBd80aqcwBd94aqaxcbyd;S1jjbHjjjjbbgABdUaqcDBd94aCcFeakz1jjjbhEaAcFeakz1jjjbh3dnalTmbascwfh5indnamaOcdtgCfydbg8ETmbasaPaCfydbcitfh8Fa3aCfhaaEaCfhXcbhLindndna8FaLcitfydbgQaO9hmbaXaOBdbaaaOBdbxekdnamaQcdtgkfydbghTmbasaPakfydbcitgCfydbaOSmeahcufh8Aa5aCfhAcbhCina8AaCSmeaCcefhCaAydbhKaAcwfhAaKaO9hmbkaCah6meka3akfgCaOaQaCydbcuSEBdbaXaQaOaXydbcuSEBdbkaLcefgLa8E9hmbkkaOcefgOal9hmbkazhAaHhOa3hKaEhLcbhCindndnaCaAydbg8A9hmbdnaCaOydbg8A9hmbaLydbh8AdnaKydbgQcu9hmba8Acu9hmbaYaCfcb86bbxikaYaCfhXdnaCaQSmbaCa8ASmbaXce86bbxikaXcl86bbxdkdnaCaHa8AcdtgQfydb9hmbdnaKydbgXcuSmbaCaXSmbaLydbgkcuSmbaCakSmba3aQfydbg8EcuSmba8Ea8ASmbaEaQfydbgQcuSmbaQa8ASmbdnazaXcdtfydbazaQcdtfydb9hmbazakcdtfydbaza8Ecdtfydb9hmbaYaCfcd86bbxlkaYaCfcl86bbxikaYaCfcl86bbxdkaYaCfcl86bbxekaYaCfaYa8AfRbb86bbkaAclfhAaOclfhOaKclfhKaLclfhLalaCcefgC9hmbkawceGTmbaYhCalhAindnaCRbbce9hmbaCcl86bbkaCcefhCaAcufgAmbkkcbhLcualcx2alc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbhmaqcKfaqyd94gCcdtfamBdbaqaCcefgABd94amaialavz:djjjb8AaqcKfaAcdtfcualc8S2gAalc;D;O;f8U0Ecbyd;S1jjbHjjjjbbgOBdbaqaCcdfBd94aOcbaAz1jjjbhsdnadTmbaehAindnamaAclfydbg8Acx2fgCIdbamaAydbgQcx2fgOIdbgg:tg8JamaAcwfydbgXcx2fgKIdlaOIdlg8K:tg8LNaKIdbag:tg8MaCIdla8K:tg8NN:tgyayNa8NaKIdwaOIdwg8P:tgINa8LaCIdwa8P:tg8NN:tg8La8LNa8Na8MNaIa8JN:tg8Ja8JNMM:rg8MJbbbb9ETmbaya8M:vhya8Ja8M:vh8Ja8La8M:vh8LkasazaQcdtfydbc8S2fgCa8La8M:rg8Ma8LNNg8NaCIdbMUdbaCa8Ja8Ma8JNg8RNgIaCIdlMUdlaCaya8MayNg8SNgRaCIdwMUdwaCa8Ra8LNg8RaCIdxMUdxaCa8Sa8LNg8UaCIdzMUdzaCa8Sa8JNg8SaCIdCMUdCaCa8La8Maya8PNa8LagNa8Ka8JNMM:mg8KNggNg8LaCIdKMUdKaCa8JagNg8JaCId3MUd3aCayagNgyaCIdaMUdaaCaga8KNggaCId8KMUd8KaCa8MaCIdyMUdyasaza8Acdtfydbc8S2fgCa8NaCIdbMUdbaCaIaCIdlMUdlaCaRaCIdwMUdwaCa8RaCIdxMUdxaCa8UaCIdzMUdzaCa8SaCIdCMUdCaCa8LaCIdKMUdKaCa8JaCId3MUd3aCayaCIdaMUdaaCagaCId8KMUd8KaCa8MaCIdyMUdyasazaXcdtfydbc8S2fgCa8NaCIdbMUdbaCaIaCIdlMUdlaCaRaCIdwMUdwaCa8RaCIdxMUdxaCa8UaCIdzMUdzaCa8SaCIdCMUdCaCa8LaCIdKMUdKaCa8JaCId3MUd3aCayaCIdaMUdaaCagaCId8KMUd8KaCa8MaCIdyMUdyaAcxfhAaLcifgLad6mbkcbh8AaehXincbhAinaYaeaAc:81jjbfydbgQa8AfcdtfydbgOfRbbhCdndnaYaXaAfydbgKfRbbgLc99fcFeGcpe0mbaCceSmbaCcd9hmekdnaLcufcFeGce0mbaEaKcdtfydbaO9hmekdnaCcufcFeGce0mba3aOcdtfydbaK9hmekdnaLcv2aCfc:G1jjbfRbbTmbazaOcdtfydbazaKcdtfydb0mekJbbacJbbjZaCceSEh8MaLceShkamaeaQcdtc:81jjbfydba8Afcdtfydbcx2fhCdnamaOcx2fgLIdwamaKcx2fgQIdwg8K:tg8La8LNaLIdbaQIdbg8P:tg8Ja8JNaLIdlaQIdlg8N:tgyayNMM:rggJbbbb9ETmba8Lag:vh8Layag:vhya8Jag:vh8JkJbbaca8MakEh8SdnaCIdwa8K:tg8Ma8La8Ma8LNaCIdba8P:tgRa8JNayaCIdla8N:tg8RNMMgIN:tg8Ma8MNaRa8JaIN:tg8La8LNa8RayaIN:tg8Ja8JNMM:rgyJbbbb9ETmba8May:vh8Ma8Jay:vh8Ja8Lay:vh8LkasazaKcdtfydbc8S2fgCa8La8SagNgya8LNNgIaCIdbMUdbaCa8Jaya8JNg8SNgRaCIdlMUdlaCa8Maya8MNggNg8RaCIdwMUdwaCa8Sa8LNg8SaCIdxMUdxaCaga8LNg8UaCIdzMUdzaCaga8JNg8VaCIdCMUdCaCa8Laya8Ma8KNa8La8PNa8Na8JNMM:mg8KNggNg8LaCIdKMUdKaCa8JagNg8JaCId3MUd3aCa8MagNg8MaCIdaMUdaaCaga8KNggaCId8KMUd8KaCayaCIdyMUdyasazaOcdtfydbc8S2fgCaIaCIdbMUdbaCaRaCIdlMUdlaCa8RaCIdwMUdwaCa8SaCIdxMUdxaCa8UaCIdzMUdzaCa8VaCIdCMUdCaCa8LaCIdKMUdKaCa8JaCId3MUd3aCa8MaCIdaMUdaaCagaCId8KMUd8KaCayaCIdyMUdykaAclfgAcx9hmbkaXcxfhXa8Acifg8Aad6mbkkdnabaeSmbabaeadcdtz:hjjjb8Akcuadcx2adc;v:Q;v:Qe0Ecbyd;S1jjbHjjjjbbhaaqcKfaqyd94gCcdtfaaBdbaqaCcefgABd94aqcKfaAcdtfcuadcdtadcFFFFi0Ecbyd;S1jjbHjjjjbbg5BdbaqaCcdfgABd94aqcKfaAcdtfaxcbyd;S1jjbHjjjjbbgiBdbaqaCcifgABd94aqcKfaAcdtfalcbyd;S1jjbHjjjjbbg8WBdbaqaCclfBd94JbbbbhRdnadao9nmbararNh8Saacwfh8Xaqydwh8Yaqydxh8Zaqydzh80JbbbbhRinaqcwfabadgPalazz:cjjjbcbhhabhXcbhkincbhCindnazaXaCfydbgOcdtgefydbgLazabaCc:81jjbfydbakfcdtfydbgAcdtfydbg8ASmbaYaAfRbbgQcv2aYaOfRbbgKfc;q1jjbfRbbg8FaKcv2aQfg8Ec;q1jjbfRbbgdVcFeGTmbdna8Ec:G1jjbfRbbTmba8AaL0mekdnaKaQ9hmbaKcufcFeGce0mbaEaefydbaA9hmekaaahcx2fgKaAaOadcFeGgLEBdlaKaOaAaLEBdbaKaLa8FGcb9hBdwahcefhhkaCclfgCcx9hmbkaXcxfhXakcifgkaP6mbkdndnahTmbaahAahh8AinaAcwfgQJbbbbJbbjZasazaAydbgOcdtfydbc8S2fgCIdyg8L:va8LJbbbb9BEaCIdwamaAclfgeydbgKcx2fgLIdwg8LNaCIdzaLIdbg8JNaCIdaMg8Ma8MMMa8LNaCIdlaLIdlg8MNaCIdCa8LNaCId3Mg8La8LMMa8MNaCIdba8JNaCIdxa8MNaCIdKMg8La8LMMa8JNaCId8KMMM:lNgyJbbbbJbbjZasazaKaOaQydbgLEgQcdtfydbc8S2fgCIdyg8L:va8LJbbbb9BEaCIdwamaOaKaLEgXcx2fgLIdwg8LNaCIdzaLIdbg8JNaCIdaMg8Ma8MMMa8LNaCIdlaLIdlg8MNaCIdCa8LNaCId3Mg8La8LMMa8MNaCIdba8JNaCIdxa8MNaCIdKMg8La8LMMa8JNaCId8KMMM:lNg8Laya8L9FgCEUdbaeaKaXaCEBdbaAaOaQaCEBdbaAcxfhAa8Acufg8Ambkaqcjefcbcj;abz1jjjb8Aa8XhCahhAinaqcjefaCydbcO4c;8ZGfgOaOydbcefBdbaCcxfhCaAcufgAmbkcbhCcbhAinaqcjefaCfgOydbhKaOaABdbaKaAfhAaCclfgCcj;ab9hmbkcbhCa8XhAinaqcjefaAydbcO4c;8ZGfgOaOydbgOcefBdba5aOcdtfaCBdbaAcxfhAahaCcefgC9hmbkaPao9RgOci9Uh81dnalTmbcbhCaihAinaAaCBdbaAclfhAalaCcefgC9hmbkkcbhBa8Wcbalz1jjjbh83aOcO9UhUa81ce4h85cbh86cbhkdninaaa5akcdtfydbcx2fgXIdwg8Ja8S9Emea86a819pmeJFFuuh8Ldna85ah9pmbaaa5a85cdtfydbcx2fIdwJbb;aZNh8Lkdna8Ja8L9ETmba86aU0mdkdna83azaXydlg87cdtg88fydbgOfg89Rbba83azaXydbgecdtg8:fydbgZfgnRbbVmbdna8YaZcdtgCfydbgKTmba80a8ZaCfydbcitfhCamaOcx2fg8Ecwfhda8EclfhxamaZcx2fg8Fcwfhva8FclfhwcbhAcehQdnindnaiaCydbcdtfydbgLaOSmbaiaCclfydbcdtfydbg8AaOSmbama8Acx2fg8AIdbamaLcx2fgLIdbg8M:tg8LawIdbaLIdlgy:tggNa8FIdba8M:tg8Ka8AIdlay:tg8JN:ta8LaxIdbay:tg8PNa8EIdba8M:tg8Na8JN:tNa8JavIdbaLIdwgy:tgINaga8AIdway:tg8MN:ta8JadIdbay:tgyNa8Pa8MN:tNa8Ma8KNaIa8LN:ta8Ma8NNaya8LN:tNMMJbbbb9DmdkaCcwfhCaAcefgAaK6hQaKaA9hmbkkaQceGTmba85cefh85xekaXcwfhKasaOc8S2fgCasaZc8S2fgAIdbaCIdbMUdbaCaAIdlaCIdlMUdlaCaAIdwaCIdwMUdwaCaAIdxaCIdxMUdxaCaAIdzaCIdzMUdzaCaAIdCaCIdCMUdCaCaAIdKaCIdKMUdKaCaAId3aCId3MUd3aCaAIdaaCIdaMUdaaCaAId8KaCId8KMUd8KaCaAIdyaCIdyMUdydndndndnaYaefgARbbc9:fPdebdkaehCinaiaCcdtgCfaOBdbaHaCfydbgCae9hmbxikkaHa88fydbhCaHa8:fydbheaia8:fa87BdbaCh87kaiaecdtfa87Bdbkance86bba89ce86bbaKIdbg8LaRaRa8L9DEhRaBcefhBcecdaARbbceSEa86fh86kakcefgkah9hmbkkaBTmbdnalTmbcbhAaEhCindnaCydbgOcuSmbdnaAaiaOcdtgKfydbgO9hmbaEaKfydbhOkaCaOBdbkaCclfhCalaAcefgA9hmbkcbhAa3hCindnaCydbgOcuSmbdnaAaiaOcdtgKfydbgO9hmba3aKfydbhOkaCaOBdbkaCclfhCalaAcefgA9hmbkkcbhdabhCcbhLindnaiaCydbcdtfydbgAaiaCclfydbcdtfydbgOSmbaAaiaCcwfydbcdtfydbgKSmbaOaKSmbabadcdtfg8AaABdba8AclfaOBdba8AcwfaKBdbadcifhdkaCcxfhCaLcifgLaP9pmdxbkkaPhdxdkadao0mbkkdnaDTmbaDaR:rUdbkaqyd94gCcdtaqcKffc98fhzdninaCTmeazydbcbyd;W1jjbH:bjjjbbazc98fhzaCcufhCxbkkaqcj;bbf8Kjjjjbadk;pleouabydbcbaicdtz1jjjb8Aadci9UhvdnadTmbabydbhodnalTmbaehradhwinaoalarydbcdtfydbcdtfgDaDydbcefBdbarclfhrawcufgwmbxdkkaehradhwinaoarydbcdtfgDaDydbcefBdbarclfhrawcufgwmbkkdnaiTmbabydbhrabydlhwcbhDaihoinawaDBdbawclfhwarydbaDfhDarclfhraocufgombkkdnadci6mbavceavce0EhqabydlhvabydwhrinaecwfydbhwaeclfydbhDaeydbhodnalTmbalawcdtfydbhwalaDcdtfydbhDalaocdtfydbhokaravaocdtfgdydbcitfaDBdbaradydbcitfawBdladadydbcefBdbaravaDcdtfgdydbcitfawBdbaradydbcitfaoBdladadydbcefBdbaravawcdtfgwydbcitfaoBdbarawydbcitfaDBdlawawydbcefBdbaecxfheaqcufgqmbkkdnaiTmbabydlhrabydbhwinararydbawydb9RBdbawclfhwarclfhraicufgimbkkk:3ldouv998Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdnadTmbaicd4hvdnabTmbavcdthocbhraehwinabarcx2fgiaearav2cdtfgDIdbUdbaiaDIdlUdlaiaDIdwUdwcbhiinalczfaifgDawaifIdbgqaDIdbgkakaq9EEUdbalaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkawaofhwarcefgrad9hmbxdkkavcdthrcbhwincbhiinalczfaifgDaeaifIdbgqaDIdbgkakaq9EEUdbalaifgDaqaDIdbgkakaq9DEUdbaiclfgicx9hmbkaearfheawcefgwad9hmbkkalIdbalIdzgk:tJbbbb:xgqalIdlalIdCgx:tgmamaq9DEgqalIdwalIdKgm:tgPaPaq9DEhPdnabTmbadTmbJbbbbJbbjZaP:vaPJbbbb9BEhqinabaqabIdbak:tNUdbabclfgiaqaiIdbax:tNUdbabcwfgiaqaiIdbam:tNUdbabcxfhbadcufgdmbkkaPk:Qdidui99ducbhi8Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdndnaembJbbjFhvJbbjFhoJbbjFhrxekadcd4cdthwincbhdinalczfadfgDabadfIdbgoaDIdbgrarao9EEUdbaladfgDaoaDIdbgrarao9DEUdbadclfgdcx9hmbkabawfhbaicefgiae9hmbkalIdwalIdK:thralIdlalIdC:thoalIdbalIdz:thvkavJbbbb:xgvaoaoav9DEgoararao9DEk9DeeuabcFeaicdtz1jjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd;01jjbgeabcifc98GfgbBd;01jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;01jjbgeabcrfc94GfgbBd;01jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;01jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;01jjbfgdBd;01jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk6eiucbhidnadTmbdninabRbbglaeRbbgv9hmeaecefheabcefhbadcufgdmbxdkkalav9Rhikaikk:cedbcjwk9PFFuuFFuuFFuuFFuFFFuFFFuFbbbbbbbbeeebeebebbeeebebbbbbebebbbbbebbbdbbbbbbbbbbbbbbbeeeeebebbbbbebbbbbeebbbbbbc;Swkxebbbdbbbj9Kbb"),{}).then((function(e){e.instance.exports.__wasm_call_ctors()}))}(),n(569445)),l=n(48660);function u(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resourceCache,n=e.gltf,r=e.bufferViewId,a=e.gltfResource,c=e.baseResource,u=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.number("options.bufferViewId",r),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",c);const d=n.bufferViews[r];let h,A,f,p,m=d.buffer,_=d.byteOffset,g=d.byteLength,y=!1;if((0,s.A)(d,"EXT_meshopt_compression")){const e=d.extensions.EXT_meshopt_compression;m=e.buffer,_=(0,o.A)(e.byteOffset,0),g=e.byteLength,y=!0,h=e.byteStride,A=e.count,f=e.mode,p=(0,o.A)(e.filter,"NONE")}const b=n.buffers[m];this._hasMeshopt=y,this._meshoptByteStride=h,this._meshoptCount=A,this._meshoptMode=f,this._meshoptFilter=p,this._resourceCache=t,this._gltfResource=a,this._baseResource=c,this._buffer=b,this._bufferId=m,this._byteOffset=_,this._byteLength=g,this._cacheKey=u,this._bufferLoader=void 0,this._typedArray=void 0,this._state=l.A.UNLOADED,this._promise=void 0}(0,r.A)(Object.create)&&(u.prototype=Object.create(c.A.prototype),u.prototype.constructor=u),Object.defineProperties(u.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),u.prototype.load=async function(){return(0,r.A)(this._promise)||(this._state=l.A.LOADING,this._promise=async function(e){try{const t=function(e){const t=e._resourceCache,n=e._buffer;if((0,r.A)(n.uri)){const i=e._baseResource.getDerivedResource({url:n.uri});return t.getExternalBufferLoader({resource:i})}return t.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:e._bufferId})}(e);if(e._bufferLoader=t,await t.load(),e.isDestroyed())return;const n=t.typedArray,i=new Uint8Array(n.buffer,n.byteOffset+e._byteOffset,e._byteLength);if(e.unload(),e._typedArray=i,e._hasMeshopt){const t=e._meshoptCount,n=e._meshoptByteStride,i=new Uint8Array(t*n);a.decodeGltfBuffer(i,t,n,e._typedArray,e._meshoptMode,e._meshoptFilter),e._typedArray=i}return e._state=l.A.READY,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=l.A.FAILED;const n="Failed to load buffer view";throw e.getError(n,t)}}(this)),this._promise},u.prototype.unload=function(){(0,r.A)(this._bufferLoader)&&!this._bufferLoader.isDestroyed()&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0};const d=u},201783:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(491446),s=n(445848),a=n(569445),c=n(48660);function l(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resourceCache,n=e.gltf,r=e.draco,s=e.gltfResource,a=e.baseResource,l=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.draco",r),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a),this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=n,this._draco=r,this._cacheKey=l,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=c.A.UNLOADED,this._promise=void 0,this._dracoError=void 0}function u(e,t){throw e.unload(),e._state=c.A.FAILED,e.getError("Failed to load Draco",t)}(0,r.A)(Object.create)&&(l.prototype=Object.create(a.A.prototype),l.prototype.constructor=l),Object.defineProperties(l.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}}),l.prototype.load=async function(){return(0,r.A)(this._promise)||(this._state=c.A.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._draco.bufferView,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._bufferViewTypedArray=n.typedArray,e._state=c.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;u(e,t)}}(this)),this._promise},l.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===c.A.READY)return!0;if(this._state!==c.A.PROCESSING)return!1;if((0,r.A)(this._dracoError)&&u(this,this._dracoError),!(0,r.A)(this._bufferViewTypedArray))return!1;if((0,r.A)(this._decodePromise))return!1;const t=this._draco,n=this._gltf.bufferViews[t.bufferView],o=t.attributes,a={array:new Uint8Array(this._bufferViewTypedArray),bufferView:n,compressedAttributes:o,dequantizeInShader:!0},l=s.A.decodeBufferView(a);if(!(0,r.A)(l))return!1;this._decodePromise=async function(e,t){try{const n=await t;if(e.isDestroyed())return;return e.unload(),e._decodedData={indices:n.indexArray,vertexAttributes:n.attributeData},e._state=c.A.READY,e._baseResource}catch(t){if(e.isDestroyed())return;e._dracoError=t}}(this,l)},l.prototype.unload=function(){(0,r.A)(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0};const d=l},395989:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(369031),o=n(419061),r=n(491446),s=n(404547),a=n(471874),c=n(123245),l=n(569445),u=n(48660);function d(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resourceCache,n=e.gltf,r=e.imageId,s=e.gltfResource,a=e.baseResource,c=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.number("options.imageId",r),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a);const l=n.images[r],d=l.bufferView,h=l.uri;this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=n,this._bufferViewId=d,this._uri=h,this._cacheKey=c,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=u.A.UNLOADED,this._promise=void 0}function h(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map((function(e){return e.bufferView})),e=e[0]),{image:e,mipLevels:t}}function A(e,t,n){return e.unload(),e._state=u.A.FAILED,Promise.reject(e.getError(n,t))}(0,r.A)(Object.create)&&(d.prototype=Object.create(l.A.prototype),d.prototype.constructor=d),Object.defineProperties(d.prototype,{cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}}),d.prototype.load=function(){return(0,r.A)(this._promise)?this._promise:(0,r.A)(this._bufferViewId)?(this._promise=async function(e){e._state=u.A.LOADING;const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;const i=n.typedArray,o=await async function(e){const t=function(e){const t=e.subarray(0,2),n=e.subarray(0,4),i=e.subarray(8,12);if(255===t[0]&&216===t[1])return"image/jpeg";if(137===t[0]&&80===t[1])return"image/png";if(171===t[0]&&75===t[1])return"image/ktx2";if(82===n[0]&&73===n[1]&&70===n[2]&&70===n[3]&&87===i[0]&&69===i[1]&&66===i[2]&&80===i[3])return"image/webp";throw new c.A("Image format is not recognized")}(e);if("image/ktx2"===t){const t=new Uint8Array(e);return(0,a.A)(t)}return d._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}(i);if(e.isDestroyed())return;const r=h(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=u.A.READY,e}catch(t){if(e.isDestroyed())return;return A(e,t,"Failed to load embedded image")}}(this),this._promise):(this._promise=async function(e){e._state=u.A.LOADING;const t=e._baseResource,n=e._uri,i=t.getDerivedResource({url:n});try{const t=await function(e){const t=e.getUrlComponent(!1,!0);return f.test(t)?(0,a.A)(e):e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}(i);if(e.isDestroyed())return;const n=h(t);return e.unload(),e._image=n.image,e._mipLevels=n.mipLevels,e._state=u.A.READY,e}catch(t){if(e.isDestroyed())return;return A(e,t,`Failed to load image: ${n}`)}}(this),this._promise)};const f=/(^data:image\/ktx2)|(\.ktx2$)/i;d.prototype.unload=function(){(0,r.A)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0},d._loadImageFromTypedArray=s.A;const p=d},385618:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(571804),r=n(419061),s=n(491446),a=n(786101),c=n(605971),l=n(874915),u=n(641613),d=n(442790),h=n(666203),A=n(569445),f=n(48660);function p(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).resourceCache,n=e.gltf,o=e.accessorId,s=e.gltfResource,a=e.baseResource,l=e.draco,u=e.cacheKey,d=(0,r.A)(e.asynchronous,!0),h=(0,r.A)(e.loadBuffer,!1),A=(0,r.A)(e.loadTypedArray,!1);if(i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.number("options.accessorId",o),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a),!h&&!A)throw new c.A("At least one of loadBuffer and loadTypedArray must be true.");const p=n.accessors[o].componentType;this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=n,this._accessorId=o,this._indexDatatype=p,this._draco=l,this._cacheKey=u,this._asynchronous=d,this._loadBuffer=h,this._loadTypedArray=A,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=f.A.UNLOADED,this._promise=void 0}(0,s.A)(Object.create)&&(p.prototype=Object.create(A.A.prototype),p.prototype.constructor=p),Object.defineProperties(p.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});const m=new g;function _(e,t){throw e.unload(),e._state=f.A.FAILED,e.getError("Failed to load index buffer",t)}function g(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}function y(e,t,n){const i=u.A.createIndexBuffer({typedArray:e,context:n,usage:d.A.STATIC_DRAW,indexDatatype:t});return i.vertexArrayDestroyable=!1,i}p.prototype.load=async function(){return(0,s.A)(this._promise)?this._promise:(0,s.A)(this._draco)?(this._promise=async function(e){e._state=f.A.LOADING;const t=e._resourceCache;try{const n=t.getDracoLoader({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._dracoLoader=n,await n.load(),e.isDestroyed())return;return e._state=f.A.LOADED,e}catch(t){if(e.isDestroyed())return;_(e,t)}}(this),this._promise):(this._promise=async function(e){const t=e._gltf,n=e._accessorId,i=t.accessors[n].bufferView;e._state=f.A.LOADING;const o=e._resourceCache;try{const n=o.getBufferViewLoader({gltf:t,bufferViewId:i,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;const r=n.typedArray;return e._typedArray=function(e,t){const n=e._gltf,i=e._accessorId,o=n.accessors[i],r=o.count,s=o.componentType,c=l.A.getSizeInBytes(s);let u,d=t.buffer,h=t.byteOffset+o.byteOffset;if(h%c!=0){const e=new Uint8Array(d,h,r*c);d=new Uint8Array(e).buffer,h=0,(0,a.A)("index-buffer-unaligned",`The index array is not aligned to a ${c}-byte boundary.`)}return s===l.A.UNSIGNED_BYTE?u=new Uint8Array(d,h,r):s===l.A.UNSIGNED_SHORT?u=new Uint16Array(d,h,r):s===l.A.UNSIGNED_INT&&(u=new Uint32Array(d,h,r)),u}(e,r),e._state=f.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;_(e,t)}}(this),this._promise)},g.prototype.set=function(e,t,n){this.typedArray=e,this.indexDatatype=t,this.context=n},g.prototype.execute=function(){this.buffer=y(this.typedArray,this.indexDatatype,this.context)},p.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===f.A.READY)return!0;if(this._state!==f.A.LOADED&&this._state!==f.A.PROCESSING)return!1;let t,n=this._typedArray,r=this._indexDatatype;if((0,s.A)(this._dracoLoader))try{this._dracoLoader.process(e)&&(n=this._dracoLoader.decodedData.indices.typedArray,this._typedArray=n,r=o.A.fromTypedArray(n),this._indexDatatype=r)}catch(e){_(this,e)}if(!(0,s.A)(n))return!1;if(this._loadBuffer&&this._asynchronous){const i=m;if(i.set(n,r,e.context),!e.jobScheduler.execute(i,h.A.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=y(n,r,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=f.A.READY,this._resourceCache.statistics.addGeometryLoader(this),!0},p.prototype.unload=function(){(0,s.A)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,s.A)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),(0,s.A)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};const b=p},560710:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(369031),o=n(419061),r=n(491446),s=n(604752),a=n(452684),c=n(647885),l=n(744603),u=n(123245),d=n(267047),h=n(865980),A=n(133240),f=n(512286),p=n(899557),m=n(913081),_=n(493435),g=n(569445),y=n(48660),b=n(471147);function v(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resourceCache,n=e.gltfResource,r=e.baseResource,s=e.typedArray,a=e.gltfJson,c=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltfResource",n),i.A.typeOf.object("options.baseResource",r),this._resourceCache=t,this._gltfResource=n,this._baseResource=r,this._typedArray=s,this._gltfJson=a,this._cacheKey=c,this._gltf=void 0,this._bufferLoaders=[],this._state=y.A.UNLOADED,this._promise=void 0}function T(e,t){e.unload(),e._state=y.A.FAILED;const n=`Failed to load glTF: ${e._gltfResource.url}`;throw e.getError(n,t)}async function w(e,t){try{(0,h.A)(t),await function(e){const t=[];return A.A.buffer(e,(function(e){const n=e.uri;!(0,r.A)(e.extras._pipeline.source)&&(0,r.A)(n)&&(0,c.A)(n)&&(delete e.uri,t.push(l.A.fetchArrayBuffer(n).then((function(t){e.extras._pipeline.source=new Uint8Array(t)}))))})),Promise.all(t)}(t),await async function(e,t){if((0,r.A)(t.asset)&&"2.0"===t.asset.version&&!(0,_.A)(t,"KHR_techniques_webgl")&&!(0,_.A)(t,"KHR_materials_common"))return Promise.resolve();const n=[];A.A.buffer(t,(function(t){if(!(0,r.A)(t.extras._pipeline.source)&&(0,r.A)(t.uri)){const i=e._baseResource.getDerivedResource({url:t.uri}),o=e._resourceCache.getExternalBufferLoader({resource:i});e._bufferLoaders.push(o),n.push(o.load().then((function(){o.isDestroyed()||(t.extras._pipeline.source=o.typedArray)})))}})),await Promise.all(n),(0,m.A)(t)}(e,t),(0,d.A)(t),await function(e,t){const n=[];return A.A.buffer(t,(function(t,i){const o=t.extras._pipeline.source;if((0,r.A)(o)&&!(0,r.A)(t.uri)){const t=e._resourceCache.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:i,typedArray:o});e._bufferLoaders.push(t),n.push(t.load())}})),Promise.all(n)}(e,t),(0,p.A)(t);const n=t.asset.version;if("1.0"!==n&&"2.0"!==n)throw new u.A(`Unsupported glTF version: ${n}`);const i=t.extensionsRequired;return(0,r.A)(i)&&b.A.checkSupportedExtensions(i),e._gltf=t,e._state=y.A.READY,e}catch(t){if(e.isDestroyed())return;T(e,t)}}async function E(e,t){let n;try{n="glTF"===(0,a.A)(t)?(0,f.A)(t):(0,s.A)(t)}catch(t){if(e.isDestroyed())return;T(e,t)}return w(e,n)}(0,r.A)(Object.create)&&(v.prototype=Object.create(g.A.prototype),v.prototype.constructor=v),Object.defineProperties(v.prototype,{cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}}),v.prototype.load=async function(){return(0,r.A)(this._promise)?this._promise:(this._state=y.A.LOADING,(0,r.A)(this._gltfJson)?(this._promise=w(this,this._gltfJson),this._promise):(0,r.A)(this._typedArray)?(this._promise=E(this,this._typedArray),this._promise):(this._promise=async function(e){let t;try{const n=await e._fetchGltf();if(e.isDestroyed())return;t=new Uint8Array(n)}catch(t){if(e.isDestroyed())return;T(e,t)}return E(e,t)}(this),this._promise))},v.prototype.unload=function(){const e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)e[n]=!e[n].isDestroyed()&&this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0},v.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};const S=v},982504:(e,t,n)=>{"use strict";n.d(t,{A:()=>Fe});var i=n(794282),o=n(434067),r=n(267980),s=n(626809),a=n(369031),c=n(571804),l=n(672743),u=n(419061),d=n(491446),h=n(520098),A=n(92457),f=n(584164),p=n(402330),m=n(99479),_=n(123245),g=n(654799),y=n(534702),b=n(614480),v=n(137261),T=n(582998),w=n(730839),E=n(320475),S=n(782556),C=n(800859),x=n(866857),I=n(995537),P=n(289758),D=n(872182),O=n(569445),L=n(768213),N=n(595826);const M=I.A.Attribute,R=I.A.Indices,F=I.A.FeatureIdAttribute,B=I.A.FeatureIdTexture,U=I.A.FeatureIdImplicitRange,k=I.A.MorphTarget,V=I.A.Primitive,H=I.A.Instances,z=I.A.Skin,G=I.A.Node,j=I.A.AnimatedPropertyType,W=I.A.AnimationSampler,q=I.A.AnimationTarget,Y=I.A.AnimationChannel,X=I.A.Animation,J=I.A.ArticulationStage,Q=I.A.Articulation,$=I.A.Asset,K=I.A.Scene,Z=I.A.Components,ee=I.A.MetallicRoughness,te=I.A.SpecularGlossiness,ne=I.A.Material;function ie(e){const t=(e=(0,u.A)(e,u.A.EMPTY_OBJECT)).gltfResource;let n=e.baseResource;const i=e.typedArray,o=(0,u.A)(e.releaseGltfJson,!1),r=(0,u.A)(e.asynchronous,!0),s=(0,u.A)(e.incrementallyLoadTextures,!0),c=(0,u.A)(e.upAxis,E.A.Y),l=(0,u.A)(e.forwardAxis,E.A.Z),h=(0,u.A)(e.loadAttributesAsTypedArray,!1),A=(0,u.A)(e.loadAttributesFor2D,!1),f=(0,u.A)(e.loadIndicesForWireframe,!1),p=(0,u.A)(e.loadPrimitiveOutline,!0),m=(0,u.A)(e.loadForClassification,!1),_=(0,u.A)(e.renameBatchIdSemantic,!1);a.A.typeOf.object("options.gltfResource",t),n=(0,d.A)(n)?n:t.clone(),this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=n,this._typedArray=i,this._releaseGltfJson=o,this._asynchronous=r,this._incrementallyLoadTextures=s,this._upAxis=c,this._forwardAxis=l,this._loadAttributesAsTypedArray=h,this._loadAttributesFor2D=A,this._loadIndicesForWireframe=f,this._loadPrimitiveOutline=p,this._loadForClassification=m,this._renameBatchIdSemantic=_,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=0,this._textureState=0,this._promise=void 0,this._processError=void 0,this._textureErrors=[],this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._textureCallbacks=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._geometryCallbacks=[],this._structuralMetadataLoader=void 0,this._loadResourcesPromise=void 0,this._resourcesLoaded=!1,this._texturesLoaded=!1,this._postProcessBuffers=[],this._components=void 0}function oe(e,t){throw e.unload(),e.getError("Failed to load glTF",t)}function re(e,t){const n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;(0,d.A)(o)&&n.push(o.buffer);const r=i.attributes,s=r.length;for(let e=0;e<s;e++){const t=r[e];(0,d.A)(t.buffer)&&n.push(t.buffer)}const a=i.indices;(0,d.A)(a)&&(0,d.A)(a.buffer)&&n.push(a.buffer)}function se(e,t,n){let i=t.byteOffset;const o=(0,y.A)(e,t),r=t.count,s=(0,v.A)(t.type),a=t.componentType,l=c.A.getSizeInBytes(a),u=r*s;if(o===l*s)return n=new Uint8Array(n),c.A.createArrayBufferView(a,n.buffer,n.byteOffset+i,u);const d=c.A.createTypedArray(a,u),h=new DataView(n.buffer),A=new Array(s),f=(0,b.A)(t.componentType);i=n.byteOffset+i;for(let e=0;e<r;++e){f(h,i,s,l,A);for(let t=0;t<s;++t)d[e*s+t]=A[t];i+=o}return d}function ae(e,t,n,i){const o=t.accessors[n],r=o.count,s=new Array(r),a=o.bufferView;if((0,d.A)(a)){const n=function(e,t,n){const i=D.A.getBufferViewLoader({gltf:t,bufferViewId:n,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(i),i}(e,t,a),r=async function(e,t,n,i,o,r){await t.load(),e.isDestroyed()||function(e,t,n,i){const o=e.type,r=e.count;if(o===w.A.SCALAR)for(let e=0;e<r;e++)n[e]=t[e];else if(o===w.A.VEC4&&i)for(let e=0;e<r;e++)n[e]=m.A.unpack(t,4*e);else{const e=w.A.getMathType(o),i=w.A.getNumberOfComponents(o);for(let o=0;o<r;o++)n[o]=e.unpack(t,o*i)}}(i,se(n,i,t.typedArray),r,o=(0,u.A)(o,!1))}(e,n,t,o,i,s);return e._loaderPromises.push(r),s}return function(e,t){const n=e.type;if(n===w.A.SCALAR)return t.fill(0);const i=w.A.getMathType(n);return t.fill(i.clone(i.ZERO))}(o,s)}function ce(e,t){if((0,d.A)(t))return e===Number?t[0]:e.unpack(t)}(0,d.A)(Object.create)&&(ie.prototype=Object.create(O.A.prototype),ie.prototype.constructor=ie),Object.defineProperties(ie.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},gltfJson:{get:function(){return(0,d.A)(this._gltfJsonLoader)?this._gltfJsonLoader.gltf:this._gltfJson}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},texturesLoaded:{get:function(){return this._texturesLoaded}}}),ie.prototype.load=async function(){return(0,d.A)(this._promise)||(this._promise=async function(e){e._state=1,e._textureState=1;try{const t=D.A.getGltfJsonLoader({gltfResource:e._gltfResource,baseResource:e._baseResource,typedArray:e._typedArray,gltfJson:e._gltfJson});if(e._gltfJsonLoader=t,await t.load(),e.isDestroyed()||e.isUnloaded()||t.isDestroyed())return;return e._state=2,e._textureState=2,e}catch(t){if(e.isDestroyed())return;e._state=7,e._textureState=7,oe(e,t)}}(this)),this._promise},ie.prototype._process=function(e){return 6===this._state||(3===this._state&&function(e,t){let n,i=!0;const o=e._geometryLoaders,r=o.length;for(n=0;n<r;++n){const r=o[n].process(t);r&&(0,d.A)(e._geometryCallbacks[n])&&(e._geometryCallbacks[n](),e._geometryCallbacks[n]=void 0),i=i&&r}const s=e._structuralMetadataLoader;if((0,d.A)(s)){const n=s.process(t);n&&(e._components.structuralMetadata=s.structuralMetadata),i=i&&n}i&&(e._state=4)}(this,e),this._resourcesLoaded&&4===this._state&&(function(e,t){const n=e._primitiveLoadPlans,i=n.length;for(let o=0;o<i;o++){const i=n[o];i.postProcess(t),i.needsOutlines&&re(e,i)}}(this,e.context),this._state=5),!(!this._resourcesLoaded||5!==this._state||(Re(this),this._typedArray=void 0,this._state=6,0)))},ie.prototype._processTextures=function(e){if(6===this._textureState)return!0;if(3!==this._textureState)return!1;let t,n=!0;const i=this._textureLoaders,o=i.length;for(t=0;t<o;++t){const o=i[t].process(e);o&&(0,d.A)(this._textureCallbacks[t])&&(this._textureCallbacks[t](),this._textureCallbacks[t]=void 0),n=n&&o}return!!n&&(this._textureState=6,this._texturesLoaded=!0,!0)},ie.prototype.process=function(e){if(a.A.typeOf.object("frameState",e),2!==this._state||(0,d.A)(this._loadResourcesPromise)||(this._loadResourcesPromise=async function(e,t){h.A.supportsWebP.initialized||await h.A.supportsWebP.initialize();const n=new L.A({webp:h.A.supportsWebP(),basis:t.context.supportsBasis}),i=function(e,t,n,i){const o=(0,u.A)(t.extensions,u.A.EMPTY_OBJECT),s=o.EXT_structural_metadata,a=o.EXT_feature_metadata,c=o.CESIUM_RTC;if((0,d.A)(a)){const t=a.featureTables,n=a.featureTextures,i=(0,d.A)(t)?t:[],o=(0,d.A)(n)?n:[];e._sortedPropertyTableIds=Object.keys(i).sort(),e._sortedFeatureTextureIds=Object.keys(o).sort()}const h=function(e,t,n,i){if(!(0,d.A)(t.nodes))return[];let o,r;const s=t.nodes.length,a=new Array(s);for(o=0;o<s;++o){const r=xe(e,t,t.nodes[o],n,i);r.index=o,a[o]=r}for(o=0;o<s;++o){const e=t.nodes[o].children;if((0,d.A)(e)){const t=e.length;for(r=0;r<t;++r)a[o].children.push(a[e[r]])}}return a}(e,t,n,i),A=function(e,t,n){const i=t.skins;if(e._loadForClassification||!(0,d.A)(i))return[];const o=t.skins.length,r=new Array(o);for(let i=0;i<o;++i){const o=Ie(e,t,t.skins[i],n);o.index=i,r[i]=o}const s=n.length;for(let e=0;e<s;++e){const i=t.nodes[e].skin;(0,d.A)(i)&&(n[e].skin=r[i])}return r}(e,t,h),p=function(e,t,n){const i=t.animations;if(e._loadForClassification||!(0,d.A)(i))return[];const o=t.animations.length,r=new Array(o);for(let i=0;i<o;++i){const o=Oe(e,t,t.animations[i],n);o.index=i,r[i]=o}return r}(e,t,h),m=function(e){const t=(0,u.A)(e.extensions,u.A.EMPTY_OBJECT).AGI_articulations;if(!(0,d.A)(t))return[];const n=t.articulations;if(!(0,d.A)(n))return[];const i=n.length,o=new Array(i);for(let e=0;e<i;e++){const t=Ne(n[e]);o[e]=t}return o}(t),_=function(e,t){const n=new K,i=function(e){let t;return(0,d.A)(e.scenes)&&(0,d.A)(e.scene)&&(t=e.scenes[e.scene].nodes),t=(0,u.A)(t,e.nodes),t=(0,d.A)(t)?t:[],t}(e);return n.nodes=i.map((function(e){return t[e]})),n}(t,h),g=new Z,y=new $,b=t.asset.copyright;if((0,d.A)(b)){const e=b.split(";").map((function(e){return new l.A(e.trim())}));y.credits=e}if(g.asset=y,g.scene=_,g.nodes=h,g.skins=A,g.animations=p,g.articulations=m,g.upAxis=e._upAxis,g.forwardAxis=e._forwardAxis,(0,d.A)(c)){const e=r.A.fromArray(c.center,0,Me);g.transform=f.A.fromTranslation(e,g.transform)}if(e._components=g,(0,d.A)(s)||(0,d.A)(a)){const o=async function(e,t,n,i,o,r){const s=new T.A({gltf:t,extension:n,extensionLegacy:i,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:o,frameState:r,asynchronous:e._asynchronous});return e._structuralMetadataLoader=s,s.load()}(e,t,s,a,n,i);e._loaderPromises.push(o)}const v=[];return v.push.apply(v,e._loaderPromises),e._incrementallyLoadTextures||v.push.apply(v,e._texturesPromises),Promise.all(v)}(e,e.gltfJson,n,t);return e._state=3,e._textureState=3,(0,d.A)(e._gltfJsonLoader)&&e._releaseGltfJson&&(D.A.unload(e._gltfJsonLoader),e._gltfJsonLoader=void 0),i}(this,e).then((()=>{this._resourcesLoaded=!0})).catch((e=>{this._processError=e}))),(0,d.A)(this._processError)){this._state=7;const e=this._processError;this._processError=void 0,oe(this,e)}const t=this._textureErrors.pop();if((0,d.A)(t)){const e=this.getError("Failed to load glTF texture",t);throw e.name="TextureError",e}if(7===this._state)return!1;let n=!1;try{n=this._process(e)}catch(e){this._state=7,oe(this,e)}let i=!1;try{i=this._processTextures(e)}catch(e){this._textureState=7,oe(this,e)}return this._incrementallyLoadTextures?n:n&&i};const le={VEC2:new o.A(-1,-1),VEC3:new r.A(-1,-1,-1),VEC4:new s.A(-1,-1,-1,-1)};function ue(e,t,n,i,a){const l=e.accessors[t],h=w.A.getMathType(l.type),A=(0,u.A)(l.normalized,!1),f=new M;f.name=n,f.semantic=i,f.setIndex=a,f.constant=function(e){return e===Number?0:new e}(h),f.componentDatatype=l.componentType,f.normalized=A,f.count=l.count,f.type=l.type,f.min=ce(h,l.min),f.max=ce(h,l.max),f.byteOffset=l.byteOffset,f.byteStride=(0,y.A)(e,l),(0,C.A)(l,"WEB3D_quantized_attributes")&&function(e,t,n){const i=e.decodeMatrix,a=ce(n,e.decodedMin),c=ce(n,e.decodedMax);(0,d.A)(a)&&(0,d.A)(c)&&(t.min=a,t.max=c);const l=new I.A.Quantization;l.componentDatatype=t.componentDatatype,l.type=t.type,4===i.length?(l.quantizedVolumeOffset=i[2],l.quantizedVolumeStepSize=i[0]):9===i.length?(l.quantizedVolumeOffset=new o.A(i[6],i[7]),l.quantizedVolumeStepSize=new o.A(i[0],i[4])):16===i.length?(l.quantizedVolumeOffset=new r.A(i[12],i[13],i[14]),l.quantizedVolumeStepSize=new r.A(i[0],i[5],i[10])):25===i.length&&(l.quantizedVolumeOffset=new s.A(i[20],i[21],i[22],i[23]),l.quantizedVolumeStepSize=new s.A(i[0],i[6],i[12],i[18])),t.quantization=l}(l.extensions.WEB3D_quantized_attributes,f,h);const p=f.semantic===N.A.POSITION||f.semantic===N.A.NORMAL||f.semantic===N.A.TANGENT||f.semantic===N.A.TEXCOORD,m=e.extensionsRequired?.includes("KHR_mesh_quantization");return m&&A&&p&&function(e,t){const n=function(e){switch(e){case c.A.BYTE:return 127;case c.A.UNSIGNED_BYTE:return 255;case c.A.SHORT:return 32767;case c.A.UNSIGNED_SHORT:return 65535;default:return 1}}(e.componentDatatype),i=le[e.type];let o=e.min;(0,d.A)(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let r=e.max;(0,d.A)(r)&&(r=t.divideByScalar(r,n,r),r=t.maximumByComponent(r,i,r)),e.min=o,e.max=r}(f,h),f}function de(e){const t=/^\w+_(\d+)$/.exec(e);if(null!==t)return parseInt(t[1])}const he={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function Ae(e,t,n){let i=n;!e._renameBatchIdSemantic||"_BATCHID"!==n&&"BATCHID"!==n||(i="_FEATURE_ID_0");const o=t.fromGltfSemantic(i),r=he;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function fe(e){const t=e===N.A.POSITION,n=e===N.A.FEATURE_ID,i=e===N.A.TEXCOORD;return t||n||i}function pe(e,t,n,i,o,r,s,a){const l=t.accessors[n],u=l.bufferView,h=i.gltfSemantic,A=i.renamedSemantic,f=i.modelSemantic,p=(0,d.A)(f)?de(A):void 0,m=ue(t,n,h,f,p);if(!(0,d.A)(o)&&!(0,d.A)(u))return m;const _=function(e,t,n,i,o,r,s,a){const c=t.accessors[n].bufferView;return D.A.getVertexBufferLoader({gltf:t,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:a,bufferViewId:c,draco:o,attributeSemantic:i,accessorId:n,asynchronous:e._asynchronous,loadBuffer:r,loadTypedArray:s})}(e,t,n,h,o,r,s,a),g=e._geometryLoaders.length;e._geometryLoaders.push(_);const y=_.load();return e._loaderPromises.push(y),e._geometryCallbacks[g]=()=>{(0,d.A)(o)&&(0,d.A)(o.attributes)&&(0,d.A)(o.attributes[h])?function(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){const n=(0,d.A)(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=c.A.createArrayBufferView(n,t.typedArray.buffer)}}(m,_,r,s):function(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){const r=i.typedArray;n.typedArray=se(e,t,r),o||(n.byteOffset=0,n.byteStride=void 0)}}(t,l,m,_,r,s)},m}function me(e,t,n,i,o,r,s,a){const c=i.modelSemantic,l=c===N.A.POSITION,u=c===N.A.FEATURE_ID,d=l&&!r&&e._loadAttributesFor2D&&!a.scene3DOnly,h=e._loadForClassification&&u,A=e._loadAttributesAsTypedArray,f=!A,p=A||d||h,m=pe(e,t,n,i,o,!s&&f,!!s||p,a),_=new P.A.AttributeLoadPlan(m);return _.loadBuffer=f,_.loadTypedArray=p,_}function _e(e,t,n,i,o,r){const s=(0,d.A)(i.ROTATION),a=(0,d.A)(i.TRANSLATION)&&(0,d.A)(t.accessors[i.TRANSLATION].min)&&(0,d.A)(t.accessors[i.TRANSLATION].max),c=Ae(e,x.A,o),l=c.modelSemantic,u=l===x.A.TRANSLATION||l===x.A.ROTATION||l===x.A.SCALE,h=l===x.A.TRANSLATION,A=e._loadAttributesAsTypedArray||s&&u||!r.context.instancedArrays,f=!A,p=e._loadAttributesFor2D&&!r.scene3DOnly;return pe(e,t,n,c,void 0,f,A||h&&(!a||p),r)}function ge(e,t,n,i,o,r){const s=S.A.getImageIdFromTexture({gltf:t,textureId:n.index,supportedImageFormats:i});if(!(0,d.A)(s))return;const a=D.A.getTextureLoader({gltf:t,textureInfo:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:i,frameState:o,asynchronous:e._asynchronous}),c=S.A.createModelTextureReader({textureInfo:n}),l=e._textureLoaders.length;e._textureLoaders.push(a);const u=a.load().catch((t=>{if(!e.isDestroyed()){if(!e._incrementallyLoadTextures)throw t;e._textureState=7,e._textureErrors.push(t)}}));return e._texturesPromises.push(u),e._textureCallbacks[l]=()=>{c.texture=a.texture,(0,d.A)(r)&&(c.texture.sampler=r)},c}function ye(e,t){const n=new F;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function be(e,t,n,i){const o=new F,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=de(r.attribute),o.positionalLabel=i,o}function ve(e,t){const n=new U;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function Te(e,t,n,i){const o=new U,r=e.featureIds;o.propertyTableId=t,o.featureCount=n,o.offset=(0,u.A)(r.constant,0);const s=(0,u.A)(r.divisor,0);return o.repeat=0===s?void 0:s,o.positionalLabel=i,o}function we(e,t,n,i,o,r){const s=new B;s.featureCount=n.featureCount,s.nullFeatureId=n.nullFeatureId,s.propertyTableId=n.propertyTable,s.label=n.label,s.positionalLabel=r;const a=n.texture;s.textureReader=ge(e,t,a,i,o,g.A.NEAREST);const c=((0,d.A)(a.channels)?a.channels:[0]).map((function(e){return"rgba".charAt(e)})).join("");return s.textureReader.channels=c,s}function Ee(e,t,n,i,o,r,s,a){const c=new B,l=n.featureIds,u=l.texture;return c.featureCount=s,c.propertyTableId=i,c.textureReader=ge(e,t,u,o,r,g.A.NEAREST),c.textureReader.channels=l.channels,c.positionalLabel=a,c}function Se(e,t,n,i,o,r){const s=new k;for(const a in n)if(n.hasOwnProperty(a)){const c=me(e,t,n[a],Ae(e,N.A,a),void 0,!1,i,r);s.attributes.push(c.attribute),o.attributePlans.push(c)}return s}function Ce(e,t,n,i,o,a){const c=new V,l=new P.A(c);e._primitiveLoadPlans.push(l);const h=n.material;(0,d.A)(h)&&(c.material=function(e,t,n,i,o){const a=new ne,c=(0,u.A)(n.extensions,u.A.EMPTY_OBJECT),l=c.KHR_materials_pbrSpecularGlossiness,h=n.pbrMetallicRoughness;if(a.unlit=(0,d.A)(c.KHR_materials_unlit),(0,d.A)(l)){const n=new te;a.specularGlossiness=n,(0,d.A)(l.diffuseTexture)&&(n.diffuseTexture=ge(e,t,l.diffuseTexture,i,o)),(0,d.A)(l.specularGlossinessTexture)&&(0,d.A)(l.specularGlossinessTexture)&&(n.specularGlossinessTexture=ge(e,t,l.specularGlossinessTexture,i,o)),n.diffuseFactor=ce(s.A,l.diffuseFactor),n.specularFactor=ce(r.A,l.specularFactor),n.glossinessFactor=l.glossinessFactor,a.pbrSpecularGlossiness=l}else if((0,d.A)(h)){const n=new ee;(0,d.A)(h.baseColorTexture)&&(n.baseColorTexture=ge(e,t,h.baseColorTexture,i,o)),(0,d.A)(h.metallicRoughnessTexture)&&(n.metallicRoughnessTexture=ge(e,t,h.metallicRoughnessTexture,i,o)),n.baseColorFactor=ce(s.A,h.baseColorFactor),n.metallicFactor=h.metallicFactor,n.roughnessFactor=h.roughnessFactor,a.metallicRoughness=n}return(0,d.A)(n.emissiveTexture)&&(a.emissiveTexture=ge(e,t,n.emissiveTexture,i,o)),(0,d.A)(n.normalTexture)&&!e._loadForClassification&&(a.normalTexture=ge(e,t,n.normalTexture,i,o)),(0,d.A)(n.occlusionTexture)&&(a.occlusionTexture=ge(e,t,n.occlusionTexture,i,o)),a.emissiveFactor=ce(r.A,n.emissiveFactor),a.alphaMode=n.alphaMode,a.alphaCutoff=n.alphaCutoff,a.doubleSided=n.doubleSided,a}(e,t,t.materials[h],o,a));const A=(0,u.A)(n.extensions,u.A.EMPTY_OBJECT);let f=!1;const m=A.CESIUM_primitive_outline;e._loadPrimitiveOutline&&(0,d.A)(m)&&(f=!0,l.needsOutlines=!0,l.outlineIndices=function(e,t,n){return ae(e,t,n.indices,!1)}(e,t,m));const g=e._loadForClassification,y=A.KHR_draco_mesh_compression;let b=!1;const v=n.attributes;if((0,d.A)(v))for(const n in v)if(v.hasOwnProperty(n)){const o=v[n],r=Ae(e,N.A,n),s=r.modelSemantic;if(g&&!fe(s))continue;s===N.A.FEATURE_ID&&(b=!0);const u=me(e,t,o,r,y,i,f,a);l.attributePlans.push(u),c.attributes.push(u.attribute)}const T=n.targets;if((0,d.A)(T)&&!g){const n=T.length;for(let i=0;i<n;++i)c.morphTargets.push(Se(e,t,T[i],f,l,a))}const w=n.indices;if((0,d.A)(w)){const n=function(e,t,n,i,o,r,s){const a=t.accessors[n],c=a.bufferView;if(!(0,d.A)(i)&&!(0,d.A)(c))return;const l=new R;l.count=a.count;const u=e._loadAttributesAsTypedArray,h=e._loadIndicesForWireframe&&!s.context.webgl2,A=e._loadForClassification&&o,f=!u,p=u||h||A,m=function(e,t,n,i,o,r,s){return D.A.getIndexBufferLoader({gltf:t,accessorId:n,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:s,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r})}(e,t,n,i,!r&&f,!!r||p,s),_=e._geometryLoaders.length;e._geometryLoaders.push(m);const g=m.load();e._loaderPromises.push(g),e._geometryCallbacks[_]=()=>{l.indexDatatype=m.indexDatatype,l.buffer=m.buffer,l.typedArray=m.typedArray};const y=new P.A.IndicesLoadPlan(l);return y.loadBuffer=f,y.loadTypedArray=p,y}(e,t,w,y,b,f,a);(0,d.A)(n)&&(l.indicesPlan=n,c.indices=n.indices)}const E=A.EXT_structural_metadata,S=A.EXT_mesh_features,C=A.EXT_feature_metadata,x=(0,d.A)(C);(0,d.A)(S)?function(e,t,n,i,o,r){let s;s=(0,d.A)(i)&&(0,d.A)(i.featureIds)?i.featureIds:[];for(let i=0;i<s.length;i++){const a=s[i],c=`featureId_${i}`;let l;l=(0,d.A)(a.texture)?we(e,t,a,o,r,c):(0,d.A)(a.attribute)?ye(a,c):ve(a,c),n.featureIds.push(l)}}(e,t,c,S,o,a):x&&function(e,t,n,i,o,r){const s=t.extensions.EXT_feature_metadata.featureTables;let a=0;const c=i.featureIdAttributes;if((0,d.A)(c)){const t=c.length;for(let i=0;i<t;++i){const t=c[i],o=t.featureTable,r=e._sortedPropertyTableIds.indexOf(o),l=s[o].count,u=`featureId_${a}`;let h;a++,h=(0,d.A)(t.featureIds.attribute)?be(t,r,l,u):Te(t,r,l,u),n.featureIds.push(h)}}const l=i.featureIdTextures;if((0,d.A)(l)){const i=l.length;for(let c=0;c<i;++c){const i=l[c],u=i.featureTable,d=e._sortedPropertyTableIds.indexOf(u),h=`featureId_${a}`;a++;const A=Ee(e,t,i,d,o,r,s[u].count,h);n.featureIds.push(A)}}}(e,t,c,C,o,a),(0,d.A)(E)?function(e,t){(0,d.A)(t)&&((0,d.A)(t.propertyTextures)&&(e.propertyTextureIds=t.propertyTextures),(0,d.A)(t.propertyAttributes)&&(e.propertyAttributeIds=t.propertyAttributes))}(c,E):x&&function(e,t,n){(0,d.A)(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map((function(t){return e._sortedFeatureTextureIds.indexOf(t)})))}(e,c,C);const I=n.mode;if(g&&I!==p.A.TRIANGLES)throw new _.A("Only triangle meshes can be used for classification.");return c.primitiveType=I,c}function xe(e,t,n,i,o){const s=new G;s.name=n.name,s.matrix=ce(f.A,n.matrix),s.translation=ce(r.A,n.translation),s.rotation=ce(m.A,n.rotation),s.scale=ce(r.A,n.scale);const a=(0,u.A)(n.extensions,u.A.EMPTY_OBJECT),c=a.EXT_mesh_gpu_instancing,l=a.AGI_articulations;if((0,d.A)(c)){if(e._loadForClassification)throw new _.A("Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.");s.instances=function(e,t,n,i){const o=n.EXT_mesh_gpu_instancing,r=new H,s=o.attributes;if((0,d.A)(s))for(const n in s)if(s.hasOwnProperty(n)){const o=s[n];r.attributes.push(_e(e,t,o,s,n,i))}const a=(0,u.A)(o.extensions,u.A.EMPTY_OBJECT),c=n.EXT_instance_features,l=a.EXT_feature_metadata;return(0,d.A)(c)?function(e,t){const n=t.featureIds;for(let t=0;t<n.length;t++){const i=n[t],o=`instanceFeatureId_${t}`;let r;r=(0,d.A)(i.attribute)?ye(i,o):ve(i,o),e.featureIds.push(r)}}(r,c):(0,d.A)(l)&&function(e,t,n,i){const o=e.extensions.EXT_feature_metadata.featureTables,r=n.featureIdAttributes;if((0,d.A)(r)){const e=r.length;for(let n=0;n<e;++n){const e=r[n],s=e.featureTable,a=i.indexOf(s),c=o[s].count,l=`instanceFeatureId_${n}`;let u;u=(0,d.A)(e.featureIds.attribute)?be(e,a,c,l):Te(e,a,c,l),t.featureIds.push(u)}}}(t,r,l,e._sortedPropertyTableIds),r}(e,t,a,o)}(0,d.A)(l)&&(s.articulationName=l.articulationName);const h=n.mesh;if((0,d.A)(h)){const r=t.meshes[h],a=r.primitives,c=a.length;for(let n=0;n<c;++n)s.primitives.push(Ce(e,t,a[n],(0,d.A)(s.instances),i,o));const l=(0,u.A)(n.weights,r.weights),A=s.primitives[0].morphTargets.length;s.morphWeights=(0,d.A)(l)?l.slice():new Array(A).fill(0)}return s}function Ie(e,t,n,i){const o=new z,r=n.joints,s=r.length,a=new Array(s);for(let e=0;e<s;++e)a[e]=i[r[e]];o.joints=a;const c=n.inverseBindMatrices;return(0,d.A)(c)?o.inverseBindMatrices=ae(e,t,c):o.inverseBindMatrices=new Array(s).fill(f.A.IDENTITY),o}function Pe(e,t,n){const i=new W,o=n.input;i.input=ae(e,t,o);const r=n.interpolation;i.interpolation=(0,u.A)(A.A[r],A.A.LINEAR);const s=n.output;return i.output=ae(e,t,s,!0),i}function De(e,t,n){const i=new Y,o=e.sampler;return i.sampler=t[o],i.target=function(e,t){const n=new q,i=e.node;if(!(0,d.A)(i))return;n.node=t[i];const o=e.path.toUpperCase();return n.path=j[o],n}(e.target,n),i}function Oe(e,t,n,i){let o;const r=new X;r.name=n.name;const s=n.samplers,a=s.length,c=new Array(a);for(o=0;o<a;o++){const n=Pe(e,t,s[o]);n.index=o,c[o]=n}const l=n.channels,u=l.length,d=new Array(u);for(o=0;o<u;o++)d[o]=De(l[o],c,i);return r.samplers=c,r.channels=d,r}function Le(e){const t=new J;t.name=e.name;const n=e.type.toUpperCase();return t.type=i.A[n],t.minimumValue=e.minimumValue,t.maximumValue=e.maximumValue,t.initialValue=e.initialValue,t}function Ne(e){const t=new Q;t.name=e.name;const n=e.stages,i=n.length,o=new Array(i);for(let e=0;e<i;e++){const t=Le(n[e]);o[e]=t}return t.stages=o,t}const Me=new r.A;function Re(e){const t=e._bufferViewLoaders,n=t.length;for(let e=0;e<n;++e)t[e]=!t[e].isDestroyed()&&D.A.unload(t[e]);e._bufferViewLoaders.length=0}ie.prototype.isUnloaded=function(){return 8===this._state},ie.prototype.unload=function(){var e;(0,d.A)(this._gltfJsonLoader)&&!this._gltfJsonLoader.isDestroyed()&&D.A.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,function(e){const t=e._textureLoaders,n=t.length;for(let e=0;e<n;++e)t[e]=!t[e].isDestroyed()&&D.A.unload(t[e]);e._textureLoaders.length=0}(this),Re(this),function(e){const t=e._geometryLoaders,n=t.length;for(let e=0;e<n;++e)t[e]=!t[e].isDestroyed()&&D.A.unload(t[e]);e._geometryLoaders.length=0}(this),function(e){const t=e._postProcessBuffers,n=t.length;for(let e=0;e<n;e++){const n=t[e];n.isDestroyed()||n.destroy()}t.length=0}(this),e=this,(0,d.A)(e._structuralMetadataLoader)&&!e._structuralMetadataLoader.isDestroyed()&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0),this._components=void 0,this._typedArray=void 0,this._state=8};const Fe=ie},782556:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(434067),o=n(369031),r=n(419061),s=n(491446),a=n(331185),c=n(654799),l=n(957233),u=n(78078),d=n(557448),h=n(995537);const A={getImageIdFromTexture:function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).gltf,n=e.textureId,i=e.supportedImageFormats;o.A.typeOf.object("options.gltf",t),o.A.typeOf.number("options.textureId",n),o.A.typeOf.object("options.supportedImageFormats",i);const a=t.textures[n],c=a.extensions;if((0,s.A)(c)){if(i.webp&&(0,s.A)(c.EXT_texture_webp))return c.EXT_texture_webp.source;if(i.basis&&(0,s.A)(c.KHR_texture_basisu))return c.KHR_texture_basisu.source}return a.source},createSampler:function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).gltf,n=e.textureInfo,i=(0,r.A)(e.compressedTextureNoMipmap,!1);o.A.typeOf.object("options.gltf",t),o.A.typeOf.object("options.textureInfo",n);let a=d.A.REPEAT,h=d.A.REPEAT,A=u.A.LINEAR,f=l.A.LINEAR;const p=n.index,m=t.textures[p].sampler;if((0,s.A)(m)){const e=t.samplers[m];a=(0,r.A)(e.wrapS,a),h=(0,r.A)(e.wrapT,h),A=(0,r.A)(e.minFilter,A),f=(0,r.A)(e.magFilter,f)}let _=!1;const g=n.extensions;return(0,s.A)(g)&&(0,s.A)(g.KHR_texture_transform)&&(_=!0),(i||_)&&A!==u.A.LINEAR&&A!==u.A.NEAREST&&(A=A===u.A.NEAREST_MIPMAP_NEAREST||A===u.A.NEAREST_MIPMAP_LINEAR?u.A.NEAREST:u.A.LINEAR),new c.A({wrapS:a,wrapT:h,minificationFilter:A,magnificationFilter:f})}},f=new i.A(1,1);A.createModelTextureReader=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).textureInfo,n=e.channels,c=e.texture;o.A.typeOf.object("options.textureInfo",t);let l,u=(0,r.A)(t.texCoord,0);const d=(0,r.A)(t.extensions,r.A.EMPTY_OBJECT).KHR_texture_transform;if((0,s.A)(d)){u=(0,r.A)(d.texCoord,u);const e=(0,s.A)(d.offset)?i.A.unpack(d.offset):i.A.ZERO;let t=(0,r.A)(d.rotation,0);const n=(0,s.A)(d.scale)?i.A.unpack(d.scale):f;t=-t,l=new a.A(Math.cos(t)*n.x,-Math.sin(t)*n.y,e.x,Math.sin(t)*n.x,Math.cos(t)*n.y,e.y,0,0,1)}const A=new h.A.TextureReader;return A.index=t.index,A.texture=c,A.texCoord=u,A.transform=l,A.channels=n,A};const p=A},133240:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(493435),o=n(491446);function r(){}r.objectLegacy=function(e,t){if((0,o.A)(e))for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=t(e[n],n);if((0,o.A)(i))return i}},r.object=function(e,t){if((0,o.A)(e)){const n=e.length;for(let i=0;i<n;i++){const n=t(e[i],i);if((0,o.A)(n))return n}}},r.topLevel=function(e,t,n){const i=e[t];return(0,o.A)(i)&&!Array.isArray(i)?r.objectLegacy(i,n):r.object(i,n)},r.accessor=function(e,t){return r.topLevel(e,"accessors",t)},r.accessorWithSemantic=function(e,t,n){const i={};return r.mesh(e,(function(e){return r.meshPrimitive(e,(function(e){const s=r.meshPrimitiveAttribute(e,(function(e,r){if(0===r.indexOf(t)&&!(0,o.A)(i[e])){i[e]=!0;const t=n(e);if((0,o.A)(t))return t}}));return(0,o.A)(s)?s:r.meshPrimitiveTarget(e,(function(e){return r.meshPrimitiveTargetAttribute(e,(function(e,r){if(0===r.indexOf(t)&&!(0,o.A)(i[e])){i[e]=!0;const t=n(e);if((0,o.A)(t))return t}}))}))}))}))},r.accessorContainingVertexAttributeData=function(e,t){const n={};return r.mesh(e,(function(e){return r.meshPrimitive(e,(function(e){const i=r.meshPrimitiveAttribute(e,(function(e){if(!(0,o.A)(n[e])){n[e]=!0;const i=t(e);if((0,o.A)(i))return i}}));return(0,o.A)(i)?i:r.meshPrimitiveTarget(e,(function(e){return r.meshPrimitiveTargetAttribute(e,(function(e){if(!(0,o.A)(n[e])){n[e]=!0;const i=t(e);if((0,o.A)(i))return i}}))}))}))}))},r.accessorContainingIndexData=function(e,t){const n={};return r.mesh(e,(function(e){return r.meshPrimitive(e,(function(e){const i=e.indices;if((0,o.A)(i)&&!(0,o.A)(n[i])){n[i]=!0;const e=t(i);if((0,o.A)(e))return e}}))}))},r.animation=function(e,t){return r.topLevel(e,"animations",t)},r.animationChannel=function(e,t){const n=e.channels;return r.object(n,t)},r.animationSampler=function(e,t){const n=e.samplers;return r.object(n,t)},r.buffer=function(e,t){return r.topLevel(e,"buffers",t)},r.bufferView=function(e,t){return r.topLevel(e,"bufferViews",t)},r.camera=function(e,t){return r.topLevel(e,"cameras",t)},r.image=function(e,t){return r.topLevel(e,"images",t)},r.material=function(e,t){return r.topLevel(e,"materials",t)},r.materialValue=function(e,t){let n=e.values;(0,o.A)(e.extensions)&&(0,o.A)(e.extensions.KHR_techniques_webgl)&&(n=e.extensions.KHR_techniques_webgl.values);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.mesh=function(e,t){return r.topLevel(e,"meshes",t)},r.meshPrimitive=function(e,t){const n=e.primitives;if((0,o.A)(n)){const e=n.length;for(let i=0;i<e;i++){const e=t(n[i],i);if((0,o.A)(e))return e}}},r.meshPrimitiveAttribute=function(e,t){const n=e.attributes;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.meshPrimitiveTarget=function(e,t){const n=e.targets;if((0,o.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=t(n[i],i);if((0,o.A)(e))return e}}},r.meshPrimitiveTargetAttribute=function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=t(e[n],n);if((0,o.A)(i))return i}},r.node=function(e,t){return r.topLevel(e,"nodes",t)},r.nodeInTree=function(e,t,n){const i=e.nodes;if((0,o.A)(i)){const s=t.length;for(let a=0;a<s;a++){const s=t[a],c=i[s];if((0,o.A)(c)){let t=n(c,s);if((0,o.A)(t))return t;const i=c.children;if((0,o.A)(i)&&(t=r.nodeInTree(e,i,n),(0,o.A)(t)))return t}}}},r.nodeInScene=function(e,t,n){const i=t.nodes;if((0,o.A)(i))return r.nodeInTree(e,i,n)},r.program=function(e,t){return(0,i.A)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.programs,t):r.topLevel(e,"programs",t)},r.sampler=function(e,t){return r.topLevel(e,"samplers",t)},r.scene=function(e,t){return r.topLevel(e,"scenes",t)},r.shader=function(e,t){return(0,i.A)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.shaders,t):r.topLevel(e,"shaders",t)},r.skin=function(e,t){return r.topLevel(e,"skins",t)},r.skinJoint=function(e,t){const n=e.joints;if((0,o.A)(n)){const e=n.length;for(let i=0;i<e;i++){const e=t(n[i]);if((0,o.A)(e))return e}}},r.techniqueAttribute=function(e,t){const n=e.attributes;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.techniqueUniform=function(e,t){const n=e.uniforms;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.techniqueParameter=function(e,t){const n=e.parameters;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.technique=function(e,t){return(0,i.A)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.techniques,t):r.topLevel(e,"techniques",t)},r.texture=function(e,t){return r.topLevel(e,"textures",t)};const s=r},724447:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(155463);const o=function(e,t){const n={byteLength:t.length,extras:{_pipeline:{source:t}}},o={buffer:(0,i.A)(e.buffers,n),byteOffset:0,byteLength:t.length};return(0,i.A)(e.bufferViews,o)}},267047:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(155463),o=n(133240),r=n(534702),s=n(419061),a=n(491446),c=n(352581);function l(e){(0,a.A)(e)&&(e.texCoord=(0,s.A)(e.texCoord,0))}const u=function(e){o.A.accessor(e,(function(e){(0,a.A)(e.bufferView)&&(e.byteOffset=(0,s.A)(e.byteOffset,0))})),o.A.bufferView(e,(function(e){(0,a.A)(e.buffer)&&(e.byteOffset=(0,s.A)(e.byteOffset,0))})),o.A.mesh(e,(function(t){o.A.meshPrimitive(t,(function(t){if(t.mode=(0,s.A)(t.mode,c.A.TRIANGLES),!(0,a.A)(t.material)){(0,a.A)(e.materials)||(e.materials=[]);const n={name:"default"};t.material=(0,i.A)(e.materials,n)}}))})),o.A.accessorContainingVertexAttributeData(e,(function(t){const n=e.accessors[t],i=n.bufferView;if(n.normalized=(0,s.A)(n.normalized,!1),(0,a.A)(i)){const t=e.bufferViews[i];t.byteStride=(0,r.A)(e,n),t.target=c.A.ARRAY_BUFFER}})),o.A.accessorContainingIndexData(e,(function(t){const n=e.accessors[t].bufferView;(0,a.A)(n)&&(e.bufferViews[n].target=c.A.ELEMENT_ARRAY_BUFFER)})),o.A.material(e,(function(e){const t=(0,s.A)(e.extensions,s.A.EMPTY_OBJECT),n=t.KHR_materials_common;if((0,a.A)(n)){const e=n.technique,t=(0,a.A)(n.values)?n.values:{};return n.values=t,t.ambient=(0,a.A)(t.ambient)?t.ambient:[0,0,0,1],t.emission=(0,a.A)(t.emission)?t.emission:[0,0,0,1],t.transparency=(0,s.A)(t.transparency,1),"CONSTANT"!==e&&(t.diffuse=(0,a.A)(t.diffuse)?t.diffuse:[0,0,0,1],"LAMBERT"!==e&&(t.specular=(0,a.A)(t.specular)?t.specular:[0,0,0,1],t.shininess=(0,s.A)(t.shininess,0))),n.transparent=(0,s.A)(n.transparent,!1),void(n.doubleSided=(0,s.A)(n.doubleSided,!1))}e.emissiveFactor=(0,s.A)(e.emissiveFactor,[0,0,0]),e.alphaMode=(0,s.A)(e.alphaMode,"OPAQUE"),e.doubleSided=(0,s.A)(e.doubleSided,!1),"MASK"===e.alphaMode&&(e.alphaCutoff=(0,s.A)(e.alphaCutoff,.5));const i=t.KHR_techniques_webgl;(0,a.A)(i)&&o.A.materialValue(e,(function(e){(0,a.A)(e.index)&&l(e)})),l(e.emissiveTexture),l(e.normalTexture),l(e.occlusionTexture);const r=e.pbrMetallicRoughness;(0,a.A)(r)&&(r.baseColorFactor=(0,s.A)(r.baseColorFactor,[1,1,1,1]),r.metallicFactor=(0,s.A)(r.metallicFactor,1),r.roughnessFactor=(0,s.A)(r.roughnessFactor,1),l(r.baseColorTexture),l(r.metallicRoughnessTexture));const c=t.KHR_materials_pbrSpecularGlossiness;(0,a.A)(c)&&(c.diffuseFactor=(0,s.A)(c.diffuseFactor,[1,1,1,1]),c.specularFactor=(0,s.A)(c.specularFactor,[1,1,1]),c.glossinessFactor=(0,s.A)(c.glossinessFactor,1),l(c.specularGlossinessTexture))})),o.A.animation(e,(function(e){o.A.animationSampler(e,(function(e){e.interpolation=(0,s.A)(e.interpolation,"LINEAR")}))}));const t=function(e){const t={};return o.A.animation(e,(function(e){o.A.animationChannel(e,(function(e){const n=e.target,i=n.node,o=n.path;"translation"!==o&&"rotation"!==o&&"scale"!==o||(t[i]=!0)}))})),t}(e);return o.A.node(e,(function(e,n){(0,a.A)(t[n])||(0,a.A)(e.translation)||(0,a.A)(e.rotation)||(0,a.A)(e.scale)?(e.translation=(0,s.A)(e.translation,[0,0,0]),e.rotation=(0,s.A)(e.rotation,[0,0,0,1]),e.scale=(0,s.A)(e.scale,[1,1,1])):e.matrix=(0,s.A)(e.matrix,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])})),o.A.sampler(e,(function(e){e.wrapS=(0,s.A)(e.wrapS,c.A.REPEAT),e.wrapT=(0,s.A)(e.wrapT,c.A.REPEAT)})),(0,a.A)(e.scenes)&&!(0,a.A)(e.scene)&&(e.scene=0),e}},84334:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(114098),o=n(155463),r=n(491446);const s=function(e,t){let n=e.extensionsRequired;(0,r.A)(n)||(n=[],e.extensionsRequired=n),(0,o.A)(n,t,!0),(0,i.A)(e,t)}},114098:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(155463),o=n(491446);const r=function(e,t){let n=e.extensionsUsed;(0,o.A)(n)||(n=[],e.extensionsUsed=n),(0,i.A)(n,t,!0)}},865980:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(133240),o=n(491446);function r(e){e.extras=(0,o.A)(e.extras)?e.extras:{},e.extras._pipeline=(0,o.A)(e.extras._pipeline)?e.extras._pipeline:{}}const s=function(e){return i.A.shader(e,(function(e){r(e)})),i.A.buffer(e,(function(e){r(e)})),i.A.image(e,(function(e){r(e)})),r(e),e}},155463:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(419061);const o=function(e,t,n){if(n=(0,i.A)(n,!1)){const n=e.indexOf(t);if(n>-1)return n}return e.push(t),e.length-1}},839078:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(534702),o=n(614480),r=n(137261),s=n(571804),a=n(491446);const c=function(e,t){const n=e.bufferViews,c=e.buffers,l=t.bufferView,u=(0,r.A)(t.type);if(!(0,a.A)(t.bufferView))return{min:new Array(u).fill(0),max:new Array(u).fill(0)};const d=new Array(u).fill(Number.POSITIVE_INFINITY),h=new Array(u).fill(Number.NEGATIVE_INFINITY),A=n[l],f=c[A.buffer].extras._pipeline.source,p=t.count,m=(0,i.A)(e,t);let _=t.byteOffset+A.byteOffset+f.byteOffset;const g=t.componentType,y=s.A.getSizeInBytes(g),b=new DataView(f.buffer),v=new Array(u),T=(0,o.A)(g);for(let e=0;e<p;e++){T(b,_,u,y,v);for(let e=0;e<u;e++){const t=v[e];d[e]=Math.min(d[e],t),h[e]=Math.max(h[e],t)}_+=m}return{min:d,max:h}}},464335:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(133240),o=n(369031),r=n(491446);const s=function(e,t){o.A.typeOf.object("material",e),o.A.defined("handler",t);const n=e.pbrMetallicRoughness;if((0,r.A)(n)){if((0,r.A)(n.baseColorTexture)){const e=n.baseColorTexture,i=t(e.index,e);if((0,r.A)(i))return i}if((0,r.A)(n.metallicRoughnessTexture)){const e=n.metallicRoughnessTexture,i=t(e.index,e);if((0,r.A)(i))return i}}if((0,r.A)(e.extensions)){const n=e.extensions.KHR_materials_pbrSpecularGlossiness;if((0,r.A)(n)){if((0,r.A)(n.diffuseTexture)){const e=n.diffuseTexture,i=t(e.index,e);if((0,r.A)(i))return i}if((0,r.A)(n.specularGlossinessTexture)){const e=n.specularGlossinessTexture,i=t(e.index,e);if((0,r.A)(i))return i}}const i=e.extensions.KHR_materials_common;if((0,r.A)(i)&&(0,r.A)(i.values)){const e=i.values.diffuse,n=i.values.ambient,o=i.values.emission,s=i.values.specular;if((0,r.A)(e)&&(0,r.A)(e.index)){const n=t(e.index,e);if((0,r.A)(n))return n}if((0,r.A)(n)&&(0,r.A)(n.index)){const e=t(n.index,n);if((0,r.A)(e))return e}if((0,r.A)(o)&&(0,r.A)(o.index)){const e=t(o.index,o);if((0,r.A)(e))return e}if((0,r.A)(s)&&(0,r.A)(s.index)){const e=t(s.index,s);if((0,r.A)(e))return e}}}const s=i.A.materialValue(e,(function(e){if((0,r.A)(e.index)){const n=t(e.index,e);if((0,r.A)(n))return n}}));if((0,r.A)(s))return s;if((0,r.A)(e.emissiveTexture)){const n=e.emissiveTexture,i=t(n.index,n);if((0,r.A)(i))return i}if((0,r.A)(e.normalTexture)){const n=e.normalTexture,i=t(n.index,n);if((0,r.A)(i))return i}if((0,r.A)(e.occlusionTexture)){const n=e.occlusionTexture,i=t(n.index,n);if((0,r.A)(i))return i}}},534702:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(137261),o=n(571804),r=n(491446);const s=function(e,t){const n=t.bufferView;if((0,r.A)(n)){const t=e.bufferViews[n];if((0,r.A)(t.byteStride)&&t.byteStride>0)return t.byteStride}return o.A.getSizeInBytes(t.componentType)*(0,i.A)(t.type)}},614480:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(571804);const o=function(e){switch(e){case i.A.BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt8(t+r*i)};case i.A.UNSIGNED_BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint8(t+r*i)};case i.A.SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt16(t+r*i,!0)};case i.A.UNSIGNED_SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint16(t+r*i,!0)};case i.A.INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt32(t+r*i,!0)};case i.A.UNSIGNED_INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint32(t+r*i,!0)};case i.A.FLOAT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat32(t+r*i,!0)};case i.A.DOUBLE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat64(t+r*i,!0)}}}},884137:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(114098),o=n(133240),r=n(419061),s=n(491446),a=n(352581);const c=[a.A.FUNC_ADD,a.A.FUNC_ADD],l=[a.A.ONE,a.A.ZERO,a.A.ONE,a.A.ZERO];function u(e,t){const n=e.enable;return!!(0,s.A)(n)&&n.indexOf(t)>-1}const d=[a.A.ZERO,a.A.ONE,a.A.SRC_COLOR,a.A.ONE_MINUS_SRC_COLOR,a.A.SRC_ALPHA,a.A.ONE_MINUS_SRC_ALPHA,a.A.DST_ALPHA,a.A.ONE_MINUS_DST_ALPHA,a.A.DST_COLOR,a.A.ONE_MINUS_DST_COLOR];function h(e,t){if(!(0,s.A)(e))return t;for(let n=0;n<4;n++)if(-1===d.indexOf(e[n]))return t;return e}const A=function(e){const t={},n={},d=e.techniques;return(0,s.A)(d)?(o.A.technique(e,(function(e,i){const o=e.states;if((0,s.A)(o)){const d=n[i]={};if(u(o,a.A.BLEND)){d.alphaMode="BLEND";const e=o.functions;(0,s.A)(e)&&((0,s.A)(e.blendEquationSeparate)||(0,s.A)(e.blendFuncSeparate))&&(t[i]={blendEquation:(0,r.A)(e.blendEquationSeparate,c),blendFactors:h(e.blendFuncSeparate,l)})}u(o,a.A.CULL_FACE)||(d.doubleSided=!0),delete e.states}})),Object.keys(t).length>0&&((0,s.A)(e.extensions)||(e.extensions={}),(0,i.A)(e,"KHR_blend")),o.A.material(e,(function(e){if((0,s.A)(e.technique)){const i=n[e.technique];o.A.objectLegacy(i,(function(t,n){e[n]=t}));const r=t[e.technique];(0,s.A)(r)&&((0,s.A)(e.extensions)||(e.extensions={}),e.extensions.KHR_blend=r)}})),e):e}},494490:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(114098),o=n(84334),r=n(155463),s=n(133240),a=n(491446);const c=function(e){const t=e.techniques,n={},c={},l={};if((0,a.A)(t)){const t={programs:[],shaders:[],techniques:[]},u=e.glExtensionsUsed;delete e.glExtensionsUsed,s.A.technique(e,(function(i,o){const d={name:i.name,program:void 0,attributes:{},uniforms:{}};let h;if(s.A.techniqueAttribute(i,(function(e,t){h=i.parameters[e],d.attributes[t]={semantic:h.semantic}})),s.A.techniqueUniform(i,(function(e,t){h=i.parameters[e],d.uniforms[t]={count:h.count,node:h.node,type:h.type,semantic:h.semantic,value:h.value},(0,a.A)(n[o])||(n[o]={}),n[o][e]=t})),(0,a.A)(l[i.program]))d.program=l[i.program];else{const n=e.programs[i.program],o={name:n.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:u},s=e.shaders[n.fragmentShader];o.fragmentShader=(0,r.A)(t.shaders,s,!0);const a=e.shaders[n.vertexShader];o.vertexShader=(0,r.A)(t.shaders,a,!0),d.program=(0,r.A)(t.programs,o),l[i.program]=d.program}c[o]=(0,r.A)(t.techniques,d)})),t.techniques.length>0&&((0,a.A)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t,(0,i.A)(e,"KHR_techniques_webgl"),(0,o.A)(e,"KHR_techniques_webgl"))}return s.A.material(e,(function(e){if((0,a.A)(e.technique)){const t={technique:c[e.technique]};s.A.objectLegacy(e.values,(function(i,o){(0,a.A)(t.values)||(t.values={});const r=n[e.technique][o];(0,a.A)(r)&&(t.values[r]=i)})),(0,a.A)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t}delete e.technique,delete e.values})),delete e.techniques,delete e.programs,delete e.shaders,e}},137261:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}},512286:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(865980),o=n(277315),r=n(419061),s=n(491446),a=n(452684),c=n(241839),l=n(123245);function u(e,t,n){const i=new DataView(e.buffer),o=new Array(n);for(let r=0;r<n;++r)o[r]=i.getUint32(e.byteOffset+t+4*r,!0);return o}const d=function(e){if("glTF"!==(0,a.A)(e))throw new l.A("File is not valid binary glTF");const t=u(e,0,5),n=t[1];if(1!==n&&2!==n)throw new l.A("Binary glTF version is not 1 or 2");return 1===n?function(e,t){const n=t[2],a=t[3];if(0!==t[4])throw new l.A("Binary glTF scene format is not JSON");const u=20+a,d=(0,c.A)(e,20,a),h=JSON.parse(d);(0,i.A)(h);const A=e.subarray(u,n),f=h.buffers;if((0,s.A)(f)&&Object.keys(f).length>0){const e=(0,r.A)(f.binary_glTF,f.KHR_binary_glTF);(0,s.A)(e)&&(e.extras._pipeline.source=A,delete e.uri)}return(0,o.A)(h,"KHR_binary_glTF"),h}(e,t):function(e,t){const n=t[2];let o,r,a=12;for(;a<n;){const t=u(e,a,2),n=t[0],s=t[1];a+=8;const l=e.subarray(a,a+n);if(a+=n,1313821514===s){const e=(0,c.A)(l);o=JSON.parse(e),(0,i.A)(o)}else 5130562===s&&(r=l)}if((0,s.A)(o)&&(0,s.A)(r)){const e=o.buffers;(0,s.A)(e)&&e.length>0&&(e[0].extras._pipeline.source=r)}return o}(e,t)}},578283:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(534702),o=n(614480),r=n(137261),s=n(571804),a=n(491446);const c=function(e,t){const n=(0,i.A)(e,t),c=s.A.getSizeInBytes(t.componentType),l=(0,r.A)(t.type),u=t.count,d=new Array(l*u);if(!(0,a.A)(t.bufferView))return d.fill(0);const h=e.bufferViews[t.bufferView],A=e.buffers[h.buffer].extras._pipeline.source;let f=t.byteOffset+h.byteOffset+A.byteOffset;const p=new DataView(A.buffer),m=new Array(l),_=(0,o.A)(t.componentType);for(let e=0;e<u;++e){_(p,f,l,c,m);for(let t=0;t<l;++t)d[e*l+t]=m[t];f+=n}return d}},166479:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(133240),o=n(277315),r=n(491446);function s(e,t){if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;++i)s(e[i],t)}else if(null!==e&&"object"==typeof e&&e.constructor===Object){const n=e.extensions;let i;(0,r.A)(n)&&(i=n[t],(0,r.A)(i)&&(delete n[t],0===Object.keys(n).length&&delete e.extensions));for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&s(e[n],t);return i}}const a=function(e,t){return(0,o.A)(e,t),"CESIUM_RTC"===t&&function(e){i.A.technique(e,(function(e){i.A.techniqueUniform(e,(function(e){"CESIUM_RTC_MODELVIEW"===e.semantic&&(e.semantic="MODELVIEW")}))}))}(e),s(e,t)}},495331:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){const n=e.extensionsRequired;if((0,i.A)(n)){const i=n.indexOf(t);i>=0&&n.splice(i,1),0===n.length&&delete e.extensionsRequired}}},277315:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(495331),o=n(491446);const r=function(e,t){const n=e.extensionsUsed;if((0,o.A)(n)){const o=n.indexOf(t);o>=0&&n.splice(o,1),(0,i.A)(e,t),0===n.length&&delete e.extensionsUsed}}},899557:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(133240),o=n(491446);function r(e){(0,o.A)(e.extras)&&((0,o.A)(e.extras._pipeline)&&delete e.extras._pipeline,0===Object.keys(e.extras).length&&delete e.extras)}const s=function(e){return i.A.shader(e,(function(e){r(e)})),i.A.buffer(e,(function(e){r(e)})),i.A.image(e,(function(e){r(e)})),r(e),e}},330483:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(133240),o=n(464335),r=n(493435),s=n(419061),a=n(491446);const c=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"],l={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function u(){}function d(){}function h(e,t,n){const i=e.nodes[t];return!((0,a.A)(i.mesh)||(0,a.A)(i.camera)||(0,a.A)(i.skin)||(0,a.A)(i.weights)||(0,a.A)(i.extras)||(0,a.A)(i.extensions)&&0!==Object.keys(i.extensions).length||(0,a.A)(n[t])||(0,a.A)(i.children)&&0!==i.children.filter((function(t){return!h(e,t,n)})).length)}u.accessor=function(e,t){e.accessors.splice(t,1),i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){i.A.meshPrimitiveAttribute(e,(function(n,i){n>t&&e.attributes[i]--})),i.A.meshPrimitiveTarget(e,(function(e){i.A.meshPrimitiveTargetAttribute(e,(function(n,i){n>t&&e[i]--}))}));const n=e.indices;(0,a.A)(n)&&n>t&&e.indices--}))})),i.A.skin(e,(function(e){(0,a.A)(e.inverseBindMatrices)&&e.inverseBindMatrices>t&&e.inverseBindMatrices--})),i.A.animation(e,(function(e){i.A.animationSampler(e,(function(e){(0,a.A)(e.input)&&e.input>t&&e.input--,(0,a.A)(e.output)&&e.output>t&&e.output--}))}))},u.buffer=function(e,t){e.buffers.splice(t,1),i.A.bufferView(e,(function(e){(0,a.A)(e.buffer)&&e.buffer>t&&e.buffer--,(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_meshopt_compression)&&e.extensions.EXT_meshopt_compression.buffer--}))},u.bufferView=function(e,t){if(e.bufferViews.splice(t,1),i.A.accessor(e,(function(e){(0,a.A)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),i.A.shader(e,(function(e){(0,a.A)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),i.A.image(e,(function(e){(0,a.A)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),(0,r.A)(e,"KHR_draco_mesh_compression")&&i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.KHR_draco_mesh_compression)&&e.extensions.KHR_draco_mesh_compression.bufferView>t&&e.extensions.KHR_draco_mesh_compression.bufferView--}))})),(0,r.A)(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata.featureTables;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];(0,a.A)(n.bufferView)&&n.bufferView>t&&n.bufferView--,(0,a.A)(n.arrayOffsetBufferView)&&n.arrayOffsetBufferView>t&&n.arrayOffsetBufferView--,(0,a.A)(n.stringOffsetBufferView)&&n.stringOffsetBufferView>t&&n.stringOffsetBufferView--}}}if((0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTables;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];(0,a.A)(i.values)&&i.values>t&&i.values--,(0,a.A)(i.arrayOffsets)&&i.arrayOffsets>t&&i.arrayOffsets--,(0,a.A)(i.stringOffsets)&&i.stringOffsets>t&&i.stringOffsets--}}}}},u.image=function(e,t){e.images.splice(t,1),i.A.texture(e,(function(e){(0,a.A)(e.source)&&e.source>t&&--e.source;const n=e.extensions;(0,a.A)(n)&&(0,a.A)(n.EXT_texture_webp)&&n.EXT_texture_webp.source>t?--e.extensions.EXT_texture_webp.source:(0,a.A)(n)&&(0,a.A)(n.KHR_texture_basisu)&&n.KHR_texture_basisu.source>t&&--e.extensions.KHR_texture_basisu.source}))},u.mesh=function(e,t){e.meshes.splice(t,1),i.A.node(e,(function(e){(0,a.A)(e.mesh)&&(e.mesh>t?e.mesh--:e.mesh===t&&delete e.mesh)}))},u.node=function(e,t){e.nodes.splice(t,1),i.A.skin(e,(function(e){(0,a.A)(e.skeleton)&&e.skeleton>t&&e.skeleton--,e.joints=e.joints.map((function(e){return e>t?e-1:e}))})),i.A.animation(e,(function(e){i.A.animationChannel(e,(function(e){(0,a.A)(e.target)&&(0,a.A)(e.target.node)&&e.target.node>t&&e.target.node--}))})),i.A.technique(e,(function(e){i.A.techniqueUniform(e,(function(e){(0,a.A)(e.node)&&e.node>t&&e.node--}))})),i.A.node(e,(function(e){(0,a.A)(e.children)&&(e.children=e.children.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e})))})),i.A.scene(e,(function(e){e.nodes=e.nodes.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e}))}))},u.material=function(e,t){e.materials.splice(t,1),i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){(0,a.A)(e.material)&&e.material>t&&e.material--}))}))},u.sampler=function(e,t){e.samplers.splice(t,1),i.A.texture(e,(function(e){(0,a.A)(e.sampler)&&e.sampler>t&&--e.sampler}))},u.texture=function(e,t){if(e.textures.splice(t,1),i.A.material(e,(function(e){(0,o.A)(e,(function(e,n){n.index>t&&--n.index}))})),(0,r.A)(e,"EXT_feature_metadata")){i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata.featureIdTextures;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i].featureIds.texture;n.index>t&&--n.index}}}}))}));const n=e.extensions.EXT_feature_metadata.featureTextures;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e].texture;n.index>t&&--n.index}}}if((0,r.A)(e,"EXT_mesh_features")&&i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_mesh_features)){const e=n.EXT_mesh_features.featureIds;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i];(0,a.A)(n.texture)&&n.texture.index>t&&--n.texture.index}}}}))})),(0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTextures;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];i.index>t&&--i.index}}}}},d.accessor=function(e){const t={};return i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){i.A.meshPrimitiveAttribute(e,(function(e){t[e]=!0})),i.A.meshPrimitiveTarget(e,(function(e){i.A.meshPrimitiveTargetAttribute(e,(function(e){t[e]=!0}))}));const n=e.indices;(0,a.A)(n)&&(t[n]=!0)}))})),i.A.skin(e,(function(e){(0,a.A)(e.inverseBindMatrices)&&(t[e.inverseBindMatrices]=!0)})),i.A.animation(e,(function(e){i.A.animationSampler(e,(function(e){(0,a.A)(e.input)&&(t[e.input]=!0),(0,a.A)(e.output)&&(t[e.output]=!0)}))})),(0,r.A)(e,"EXT_mesh_gpu_instancing")&&i.A.node(e,(function(e){(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_mesh_gpu_instancing)&&Object.keys(e.extensions.EXT_mesh_gpu_instancing.attributes).forEach((function(n){const i=e.extensions.EXT_mesh_gpu_instancing.attributes[n];t[i]=!0}))})),t},d.buffer=function(e){const t={};return i.A.bufferView(e,(function(e){(0,a.A)(e.buffer)&&(t[e.buffer]=!0),(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_meshopt_compression)&&(t[e.extensions.EXT_meshopt_compression.buffer]=!0)})),t},d.bufferView=function(e){const t={};if(i.A.accessor(e,(function(e){(0,a.A)(e.bufferView)&&(t[e.bufferView]=!0)})),i.A.shader(e,(function(e){(0,a.A)(e.bufferView)&&(t[e.bufferView]=!0)})),i.A.image(e,(function(e){(0,a.A)(e.bufferView)&&(t[e.bufferView]=!0)})),(0,r.A)(e,"KHR_draco_mesh_compression")&&i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.KHR_draco_mesh_compression)&&(t[e.extensions.KHR_draco_mesh_compression.bufferView]=!0)}))})),(0,r.A)(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata.featureTables;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];(0,a.A)(n.bufferView)&&(t[n.bufferView]=!0),(0,a.A)(n.arrayOffsetBufferView)&&(t[n.arrayOffsetBufferView]=!0),(0,a.A)(n.stringOffsetBufferView)&&(t[n.stringOffsetBufferView]=!0)}}}if((0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTables;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];(0,a.A)(i.values)&&(t[i.values]=!0),(0,a.A)(i.arrayOffsets)&&(t[i.arrayOffsets]=!0),(0,a.A)(i.stringOffsets)&&(t[i.stringOffsets]=!0)}}}}return t},d.image=function(e){const t={};return i.A.texture(e,(function(e){(0,a.A)(e.source)&&(t[e.source]=!0),(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_texture_webp)?t[e.extensions.EXT_texture_webp.source]=!0:(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.KHR_texture_basisu)&&(t[e.extensions.KHR_texture_basisu.source]=!0)})),t},d.mesh=function(e){const t={};return i.A.node(e,(function(n){if((0,a.A)(n.mesh&&(0,a.A)(e.meshes))){const i=e.meshes[n.mesh];(0,a.A)(i)&&(0,a.A)(i.primitives)&&i.primitives.length>0&&(t[n.mesh]=!0)}})),t},d.node=function(e){const t={};return i.A.skin(e,(function(e){(0,a.A)(e.skeleton)&&(t[e.skeleton]=!0),i.A.skinJoint(e,(function(e){t[e]=!0}))})),i.A.animation(e,(function(e){i.A.animationChannel(e,(function(e){(0,a.A)(e.target)&&(0,a.A)(e.target.node)&&(t[e.target.node]=!0)}))})),i.A.technique(e,(function(e){i.A.techniqueUniform(e,(function(e){(0,a.A)(e.node)&&(t[e.node]=!0)}))})),i.A.node(e,(function(n,i){h(e,i,t)||(t[i]=!0)})),t},d.material=function(e){const t={};return i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){(0,a.A)(e.material)&&(t[e.material]=!0)}))})),t},d.texture=function(e){const t={};if(i.A.material(e,(function(e){(0,o.A)(e,(function(e){t[e]=!0}))})),(0,r.A)(e,"EXT_feature_metadata")){i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata.featureIdTextures;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i].featureIds.texture;t[n.index]=!0}}}}))}));const n=e.extensions.EXT_feature_metadata.featureTextures;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e].texture;t[n.index]=!0}}}if((0,r.A)(e,"EXT_mesh_features")&&i.A.mesh(e,(function(e){i.A.meshPrimitive(e,(function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_mesh_features)){const e=n.EXT_mesh_features.featureIds;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i];(0,a.A)(n.texture)&&(t[n.texture.index]=!0)}}}}))})),(0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTextures;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=!0}}}}return t},d.sampler=function(e){const t={};return i.A.texture(e,(function(e){(0,a.A)(e.sampler)&&(t[e.sampler]=!0)})),t};const A=function(e,t){return t=(0,s.A)(t,c),c.forEach((function(n){t.indexOf(n)>-1&&function(e,t){const n=e[l[t]];if((0,a.A)(n)){let i=0;const o=d[t](e),r=n.length;for(let n=0;n<r;++n)o[n]||(u[t](e,n-i),i++)}}(e,n)})),e}},94334:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(724447),o=n(133240),r=n(578283),s=n(571804),a=n(352581);function c(e,t,n){const o=s.A.createTypedArray(n,(0,r.A)(e,t)),a=new Uint8Array(o.buffer);t.bufferView=(0,i.A)(e,a),t.componentType=n,t.byteOffset=0}const l=function(e){let t;return o.A.accessorWithSemantic(e,"JOINTS_0",(function(n){const i=e.accessors[n];t=i.componentType,t===a.A.BYTE?c(e,i,s.A.UNSIGNED_BYTE):t!==a.A.UNSIGNED_BYTE&&t!==a.A.UNSIGNED_SHORT&&c(e,i,s.A.UNSIGNED_SHORT)})),o.A.accessorWithSemantic(e,"WEIGHTS_0",(function(n){const i=e.accessors[n];t=i.componentType,t===a.A.BYTE?c(e,i,s.A.UNSIGNED_BYTE):t===a.A.SHORT&&c(e,i,s.A.UNSIGNED_SHORT)})),e}},913081:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(114098),o=n(155463),r=n(839078),s=n(133240),a=n(534702),c=n(137261),l=n(884137),u=n(494490),d=n(330483),h=n(94334),A=n(166479),f=n(267980),p=n(626809),m=n(376758),_=n(571804),g=n(419061),y=n(491446),b=n(584164),v=n(99479),T=n(352581);const w={.8:function(e){(0,y.A)(e.asset)||(e.asset={});const t=e.asset;if(t.version="1.0","string"==typeof t.profile){const e=t.profile.split(" ");t.profile={api:e[0],version:e[1]}}else t.profile={};if((0,y.A)(e.version)&&delete e.version,E(e),function(e){const t=e.meshes;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e].primitives;if((0,y.A)(n)){const e=n.length;for(let t=0;t<e;++t){const e=n[t],i=(0,g.A)(e.primitive,T.A.TRIANGLES);e.mode=(0,g.A)(e.mode,i),delete e.primitive}}}}(e),function(e){const t=e.nodes,n=new f.A,i=new v.A;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const o=t[e];if((0,y.A)(o.rotation)){const e=o.rotation;f.A.fromArray(e,0,n),v.A.fromAxisAngle(n,e[3],i),o.rotation=[i.x,i.y,i.z,i.w]}const r=o.instanceSkin;(0,y.A)(r)&&(o.skeletons=r.skeletons,o.skin=r.skin,o.meshes=r.meshes,delete o.instanceSkin)}}(e),function(e){const t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,r={},s=new f.A,a=new v.A;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const l=t[e],u=l.channels,d=l.parameters,h=l.samplers;if((0,y.A)(u)){const e=u.length;for(let t=0;t<e;++t){const e=u[t];if("rotation"===e.target.path){const t=d[h[e.sampler].output];if((0,y.A)(r[t]))continue;r[t]=!0;const l=n[t],u=i[l.bufferView],A=o[u.buffer].extras._pipeline.source,p=A.byteOffset+u.byteOffset+l.byteOffset,m=l.componentType,g=l.count,b=(0,c.A)(l.type),T=l.count*b,w=_.A.createArrayBufferView(m,A.buffer,p,T);for(let e=0;e<g;e++){const t=e*b;f.A.unpack(w,t,s);const n=w[t+3];v.A.fromAxisAngle(s,n,a),v.A.pack(a,w,t)}}}}}}(e),function(e){const t=e.techniques;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.passes;if((0,y.A)(i)){const e=(0,g.A)(n.pass,"defaultPass");if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e],o=t.instanceProgram;n.attributes=(0,g.A)(n.attributes,o.attributes),n.program=(0,g.A)(n.program,o.program),n.uniforms=(0,g.A)(n.uniforms,o.uniforms),n.states=(0,g.A)(n.states,t.states)}delete n.passes,delete n.pass}}}(e),(0,y.A)(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),(0,y.A)(e.lights)){const t=(0,g.A)(e.extensions,{});e.extensions=t;const n=(0,g.A)(t.KHR_materials_common,{});t.KHR_materials_common=n,n.lights=e.lights,delete e.lights,(0,i.A)(e,"KHR_materials_common")}},"1.0":function(e){e.asset=(0,g.A)(e.asset,{}),e.asset.version="2.0",E(e),function(e){const t=e.animations;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.parameters;if((0,y.A)(i)){const e=n.samplers;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];n.input=i[n.input],n.output=i[n.output]}delete n.parameters}}}(e),function(e){s.A.node(e,(function(t,n){D(t)&&O(e,n)}))}(e),function(e){let t;const n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}};let i;const r={},a=e.nodes;for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&(i=a[e].jointName,(0,y.A)(i)&&(r[i]=e));for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(0,y.A)(n[t])){const i={},o=e[t];e[t]=S(o,i),n[t]=i}for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(r[i]=n.nodes[r[i]]);(0,y.A)(e.scene)&&(e.scene=n.scenes[e.scene]),s.A.bufferView(e,(function(e){(0,y.A)(e.buffer)&&(e.buffer=n.buffers[e.buffer])})),s.A.accessor(e,(function(e){(0,y.A)(e.bufferView)&&(e.bufferView=n.bufferViews[e.bufferView])})),s.A.shader(e,(function(e){const t=e.extensions;if((0,y.A)(t)){const i=t.KHR_binary_glTF;(0,y.A)(i)&&(e.bufferView=n.bufferViews[i.bufferView],delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),s.A.program(e,(function(e){(0,y.A)(e.vertexShader)&&(e.vertexShader=n.shaders[e.vertexShader]),(0,y.A)(e.fragmentShader)&&(e.fragmentShader=n.shaders[e.fragmentShader])})),s.A.technique(e,(function(e){(0,y.A)(e.program)&&(e.program=n.programs[e.program]),s.A.techniqueParameter(e,(function(e){(0,y.A)(e.node)&&(e.node=n.nodes[e.node]);const t=e.value;"string"==typeof t&&(e.value={index:n.textures[t]})}))})),s.A.mesh(e,(function(e){s.A.meshPrimitive(e,(function(e){(0,y.A)(e.indices)&&(e.indices=n.accessors[e.indices]),s.A.meshPrimitiveAttribute(e,(function(t,i){e.attributes[i]=n.accessors[t]})),(0,y.A)(e.material)&&(e.material=n.materials[e.material])}))})),s.A.node(e,(function(i){let r=i.children;if((0,y.A)(r)){const e=r.length;for(t=0;t<e;++t)r[t]=n.nodes[r[t]]}if((0,y.A)(i.meshes)){const s=i.meshes,a=s.length;if(a>0)for(i.mesh=n.meshes[s[0]],t=1;t<a;++t){const a={mesh:n.meshes[s[t]]},c=(0,o.A)(e.nodes,a);(0,y.A)(r)||(r=[],i.children=r),r.push(c)}delete i.meshes}if((0,y.A)(i.camera)&&(i.camera=n.cameras[i.camera]),(0,y.A)(i.skin)&&(i.skin=n.skins[i.skin]),(0,y.A)(i.skeletons)){const t=i.skeletons;t.length>0&&(0,y.A)(i.skin)&&(e.skins[i.skin].skeleton=n.nodes[t[0]]),delete i.skeletons}(0,y.A)(i.jointName)&&delete i.jointName})),s.A.skin(e,(function(e){(0,y.A)(e.inverseBindMatrices)&&(e.inverseBindMatrices=n.accessors[e.inverseBindMatrices]);const i=e.jointNames;if((0,y.A)(i)){const n=[],o=i.length;for(t=0;t<o;++t)n[t]=r[i[t]];e.joints=n,delete e.jointNames}})),s.A.scene(e,(function(e){const i=e.nodes;if((0,y.A)(i)){const e=i.length;for(t=0;t<e;++t)i[t]=n.nodes[i[t]]}})),s.A.animation(e,(function(e){const t={};e.samplers=S(e.samplers,t),s.A.animationSampler(e,(function(e){e.input=n.accessors[e.input],e.output=n.accessors[e.output]})),s.A.animationChannel(e,(function(e){e.sampler=t[e.sampler];const i=e.target;(0,y.A)(i)&&(i.node=n.nodes[i.id],delete i.id)}))})),s.A.material(e,(function(e){(0,y.A)(e.technique)&&(e.technique=n.techniques[e.technique]),s.A.materialValue(e,(function(t,i){"string"==typeof t&&(e.values[i]={index:n.textures[t]})}));const t=e.extensions;if((0,y.A)(t)){const e=t.KHR_materials_common;(0,y.A)(e)&&(0,y.A)(e.values)&&s.A.materialValue(e,(function(t,i){"string"==typeof t&&(e.values[i]={index:n.textures[t]})}))}})),s.A.image(e,(function(e){const t=e.extensions;if((0,y.A)(t)){const i=t.KHR_binary_glTF;(0,y.A)(i)&&(e.bufferView=n.bufferViews[i.bufferView],e.mimeType=i.mimeType,delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),s.A.texture(e,(function(e){(0,y.A)(e.sampler)&&(e.sampler=n.samplers[e.sampler]),(0,y.A)(e.source)&&(e.source=n.images[e.source])}))}(e),function(e){s.A.animation(e,(function(e){s.A.animationSampler(e,(function(e){delete e.name}))}))}(e),function(e){const t=e.asset;delete t.profile,delete t.premultipliedAlpha}(e),function(e){const t=e.extensionsUsed;if(e.extensionsRequired=(0,g.A)(e.extensionsRequired,[]),(0,y.A)(t)){const n=t.length;for(let i=0;i<n;++i){const n=t[i];(0,y.A)(C[n])&&e.extensionsRequired.push(n)}}}(e),function(e){s.A.buffer(e,(function(e){(0,y.A)(e.byteLength)||(e.byteLength=e.extras._pipeline.source.length)})),s.A.accessor(e,(function(t){const n=t.bufferView;if((0,y.A)(n)){const i=e.bufferViews[n],o=P(e,t),r=t.byteOffset+t.count*o;i.byteLength=Math.max((0,g.A)(i.byteLength,0),r)}}))}(e),function(e){let t,n,i;const r=e.bufferViews,a={};s.A.accessorContainingVertexAttributeData(e,(function(t){const n=e.accessors[t];(0,y.A)(n.bufferView)&&(a[n.bufferView]=!0)}));const c={};s.A.accessor(e,(function(e){(0,y.A)(e.bufferView)&&(c[e.bufferView]=(0,g.A)(c[e.bufferView],[]),c[e.bufferView].push(e))}));for(const s in c)if(Object.prototype.hasOwnProperty.call(c,s)){i=r[s];const l=c[s];l.sort((function(e,t){return e.byteOffset-t.byteOffset}));let u=0,d=0;const h=l.length;for(t=0;t<h;++t){let c=l[t];const A=P(e,c),f=c.byteOffset,p=c.count*A;delete c.byteStride;const _=t<h-1;if(A!==(_?P(e,l[t+1]):void 0)){const e=(0,m.A)(i,!0);a[s]&&(e.byteStride=A),e.byteOffset+=u,e.byteLength=f+p-u;const h=(0,o.A)(r,e);for(n=d;n<=t;++n)c=l[n],c.bufferView=h,c.byteOffset=c.byteOffset-u;u=_?l[t+1].byteOffset:void 0,d=t+1}}}(0,d.A)(e,["accessor","bufferView","buffer"])}(e),function(e){s.A.accessorWithSemantic(e,"POSITION",(function(t){const n=e.accessors[t];if(!(0,y.A)(n.min)||!(0,y.A)(n.max)){const t=(0,r.A)(e,n);n.min=t.min,n.max=t.max}}))}(e),function(e){s.A.animation(e,(function(t){s.A.animationSampler(t,(function(t){const n=e.accessors[t.input];if(!(0,y.A)(n.min)||!(0,y.A)(n.max)){const t=(0,r.A)(e,n);n.min=t.min,n.max=t.max}}))}))}(e),function(e){s.A.accessor(e,(function(t){if((0,y.A)(t.min)||(0,y.A)(t.max)){const n=(0,r.A)(e,t);(0,y.A)(t.min)&&(t.min=n.min),(0,y.A)(t.max)&&(t.max=n.max)}}))}(e),function(e){s.A.buffer(e,(function(e){delete e.type}))}(e),function(e){s.A.texture(e,(function(e){delete e.format,delete e.internalFormat,delete e.target,delete e.type}))}(e),function(e){s.A.mesh(e,(function(e){s.A.meshPrimitive(e,(function(e){s.A.meshPrimitiveAttribute(e,(function(t,n){"TEXCOORD"===n?e.attributes.TEXCOORD_0=t:"COLOR"===n&&(e.attributes.COLOR_0=t)})),delete e.attributes.TEXCOORD,delete e.attributes.COLOR}))})),s.A.technique(e,(function(e){s.A.techniqueParameter(e,(function(e){const t=e.semantic;(0,y.A)(t)&&("TEXCOORD"===t?e.semantic="TEXCOORD_0":"COLOR"===t&&(e.semantic="COLOR_0"))}))}))}(e),function(e){const t={};s.A.mesh(e,(function(e){s.A.meshPrimitive(e,(function(e){s.A.meshPrimitiveAttribute(e,(function(e,n){if("_"!==n.charAt(0)){const e=n.search(/_[0-9]+/g);let i,o=n,r="_0";e>=0&&(o=n.substring(0,e),r=n.substring(e));const s=I[o];(0,y.A)(s)?(i=s+r,t[n]=i):(0,y.A)(x[o])||(i=`_${n}`,t[n]=i)}}));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n],o=e.attributes[n];(0,y.A)(o)&&(delete e.attributes[n],e.attributes[i]=o)}}))})),s.A.technique(e,(function(e){s.A.techniqueParameter(e,(function(e){const n=t[e.semantic];(0,y.A)(n)&&(e.semantic=n)}))}))}(e),(0,h.A)(e),function(e){s.A.camera(e,(function(e){const t=e.perspective;if((0,y.A)(t)){const e=t.aspectRatio;(0,y.A)(e)&&0===e&&delete t.aspectRatio;const n=t.yfov;(0,y.A)(n)&&0===n&&(t.yfov=1)}}))}(e),(0,l.A)(e),(0,u.A)(e),function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];Array.isArray(n)&&0===n.length&&delete e[t]}s.A.node(e,(function(e){(0,y.A)(e.children)&&0===e.children.length&&delete e.children}))}(e)},"2.0":void 0};function E(e){const t=e.materials;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.instanceTechnique;(0,y.A)(i)&&(n.technique=i.technique,n.values=i.values,delete n.instanceTechnique)}}function S(e,t){const n=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];t[i]=n.length,n.push(o),(0,y.A)(o.name)||(o.name=i)}return n}const C={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0},x={POSITION:!0,NORMAL:!0,TANGENT:!0},I={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function P(e,t){return(0,y.A)(t.byteStride)&&0!==t.byteStride?t.byteStride:(0,a.A)(e,t)}function D(e){return(!(0,y.A)(e.children)||0===e.children.length)&&(!(0,y.A)(e.meshes)||0===e.meshes.length)&&!(0,y.A)(e.camera)&&!(0,y.A)(e.skin)&&!(0,y.A)(e.skeletons)&&!(0,y.A)(e.jointName)&&(!(0,y.A)(e.translation)||f.A.fromArray(e.translation).equals(f.A.ZERO))&&(!(0,y.A)(e.scale)||f.A.fromArray(e.scale).equals(new f.A(1,1,1)))&&(!(0,y.A)(e.rotation)||p.A.fromArray(e.rotation).equals(new p.A(0,0,0,1)))&&(!(0,y.A)(e.matrix)||b.A.fromColumnMajorArray(e.matrix).equals(b.A.IDENTITY))&&!(0,y.A)(e.extensions)&&!(0,y.A)(e.extras)}function O(e,t){s.A.scene(e,(function(e){const n=e.nodes;if((0,y.A)(n))for(let e=n.length;e>=0;--e)if(n[e]===t)return void n.splice(e,1)})),s.A.node(e,(function(n,i){if((0,y.A)(n.children)){const o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),D(n)&&O(e,i))}})),delete e.nodes[t]}const L=["u_tex","u_diffuse","u_emission"],N=["u_diffuse"];function M(e){e.pbrMetallicRoughness=(0,y.A)(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function R(e){return(0,y.A)(e.index)}function F(e){return Array.isArray(e)&&4===e.length}function B(e){const t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){const i=e[n];t[n]=i<=.04045?.07739938080495357*e[n]:Math.pow(.9478672985781991*(i+.055),2.4)}return t}const U=function(e,t){const n=(t=(0,g.A)(t,g.A.EMPTY_OBJECT)).targetVersion;let o=e.version;e.asset=(0,g.A)(e.asset,{version:"1.0"}),e.asset.version=(0,g.A)(e.asset.version,"1.0"),o=(0,g.A)(o,e.asset.version).toString(),Object.prototype.hasOwnProperty.call(w,o)||((0,y.A)(o)&&(o=o.substring(0,3)),Object.prototype.hasOwnProperty.call(w,o)||(o="1.0"));let r=w[o];for(;(0,y.A)(r)&&o!==n;)r(e,t),o=e.asset.version,r=w[o];return t.keepLegacyExtensions||(function(e){s.A.material(e,(function(e){s.A.materialValue(e,(function(t,n){-1!==L.indexOf(n)&&R(t)?(M(e),e.pbrMetallicRoughness.baseColorTexture=t):-1!==N.indexOf(n)&&F(t)&&(M(e),e.pbrMetallicRoughness.baseColorFactor=B(t))}))})),(0,A.A)(e,"KHR_techniques_webgl"),(0,A.A)(e,"KHR_blend")}(e),function(e){s.A.material(e,(function(t){const n=(0,g.A)(t.extensions,g.A.EMPTY_OBJECT).KHR_materials_common;if((0,y.A)(n)){"CONSTANT"===n.technique&&((0,i.A)(e,"KHR_materials_unlit"),t.extensions=(0,y.A)(t.extensions)?t.extensions:{},t.extensions.KHR_materials_unlit={});const o=(0,y.A)(n.values)?n.values:{},r=o.ambient,s=o.diffuse,a=o.emission,c=o.transparency,l=n.doubleSided,u=n.transparent;M(t),(0,y.A)(r)&&(F(r)?t.emissiveFactor=r.slice(0,3):R(r)&&(t.emissiveTexture=r)),(0,y.A)(s)&&(F(s)?t.pbrMetallicRoughness.baseColorFactor=B(s):R(s)&&(t.pbrMetallicRoughness.baseColorTexture=s)),(0,y.A)(l)&&(t.doubleSided=l),(0,y.A)(a)&&(F(a)?t.emissiveFactor=a.slice(0,3):R(a)&&(t.emissiveTexture=a)),(0,y.A)(c)&&((0,y.A)(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=c:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,c]),(0,y.A)(u)&&(t.alphaMode=u?"BLEND":"OPAQUE")}})),(0,A.A)(e,"KHR_materials_common")}(e)),e}},493435:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){return(0,i.A)(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}},582998:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(613161),c=n(4471),l=n(872182),u=n(569445),d=n(48660);function h(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.extension,a=e.extensionLegacy,c=e.gltfResource,l=e.baseResource,u=e.supportedImageFormats,h=e.frameState,A=e.cacheKey,f=(0,o.A)(e.asynchronous,!0);if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.gltfResource",c),i.A.typeOf.object("options.baseResource",l),i.A.typeOf.object("options.supportedImageFormats",u),i.A.typeOf.object("options.frameState",h),!(0,r.A)(e.extension)&&!(0,r.A)(e.extensionLegacy))throw new s.A("One of options.extension or options.extensionLegacy must be specified");this._gltfResource=c,this._baseResource=l,this._gltf=t,this._extension=n,this._extensionLegacy=a,this._supportedImageFormats=u,this._frameState=h,this._cacheKey=A,this._asynchronous=f,this._bufferViewLoaders=[],this._bufferViewIds=[],this._textureLoaders=[],this._textureIds=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=d.A.UNLOADED,this._promise=void 0}function A(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.values,s=i.arrayOffsets,a=i.stringOffsets;(0,r.A)(o)&&(t[o]=!0),(0,r.A)(s)&&(t[s]=!0),(0,r.A)(a)&&(t[a]=!0)}}function f(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.bufferView,s=i.arrayOffsetBufferView,a=i.stringOffsetBufferView;(0,r.A)(o)&&(t[o]=!0),(0,r.A)(s)&&(t[s]=!0),(0,r.A)(a)&&(t[a]=!0)}}function p(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=i}}function m(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n].texture;t[i.index]=i}}function _(e){const t=e._bufferViewLoaders,n=t.length;for(let e=0;e<n;++e)l.A.unload(t[e]);e._bufferViewLoaders.length=0,e._bufferViewIds.length=0}(0,r.A)(Object.create)&&(h.prototype=Object.create(u.A.prototype),h.prototype.constructor=h),Object.defineProperties(h.prototype,{cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}}),h.prototype.load=function(){return(0,r.A)(this._promise)||(this._state=d.A.LOADING,this._promise=async function(e){try{const t=async function(e){let t;t=(0,r.A)(e._extension)?function(e){const t=e.propertyTables,n={};if((0,r.A)(t))for(let e=0;e<t.length;e++)A(t[e].properties,n);return n}(e._extension):function(e){const t=e.featureTables,n={};if((0,r.A)(t))for(const e in t)if(t.hasOwnProperty(e)){const i=t[e].properties;(0,r.A)(i)&&f(i,n)}return n}(e._extensionLegacy);const n=[];for(const i in t)if(t.hasOwnProperty(i)){const t=l.A.getBufferViewLoader({gltf:e._gltf,bufferViewId:parseInt(i),gltfResource:e._gltfResource,baseResource:e._baseResource});e._bufferViewLoaders.push(t),e._bufferViewIds.push(i),n.push(t.load())}return Promise.all(n)}(e),n=function(e){let t;t=(0,r.A)(e._extension)?function(e){const t={},n=e.propertyTextures;if((0,r.A)(n))for(let e=0;e<n.length;e++){const i=n[e].properties;(0,r.A)(i)&&p(i,t)}return t}(e._extension):function(e){const t={},n=e.featureTextures;if((0,r.A)(n))for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;(0,r.A)(i)&&m(i,t)}return t}(e._extensionLegacy);const n=e._gltf,i=e._gltfResource,o=e._baseResource,s=e._supportedImageFormats,a=e._frameState,c=e._asynchronous,u=[];for(const r in t)if(t.hasOwnProperty(r)){const d=l.A.getTextureLoader({gltf:n,textureInfo:t[r],gltfResource:i,baseResource:o,supportedImageFormats:s,frameState:a,asynchronous:c});e._textureLoaders.push(d),e._textureIds.push(r),u.push(d.load())}return Promise.all(u)}(e),i=async function(e){const t=(0,o.A)(e._extension,e._extensionLegacy);let n;if((0,r.A)(t.schemaUri)){const i=e._baseResource.getDerivedResource({url:t.schemaUri});n=l.A.getSchemaLoader({resource:i})}else n=l.A.getSchemaLoader({schema:t.schema});if(e._schemaLoader=n,await n.load(),!n.isDestroyed())return n.schema}(e);if(await Promise.all([t,n,i]),e.isDestroyed())return;return e._gltf=void 0,e._state=d.A.LOADED,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=d.A.FAILED;const n="Failed to load structural metadata";throw e.getError(n,t)}}(this)),this._promise},h.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===d.A.READY)return!0;if(this._state!==d.A.LOADED)return!1;const t=this._textureLoaders,n=t.length;let o=!0;for(let i=0;i<n;++i){const n=t[i].process(e);o=o&&n}if(!o)return!1;const s=this._schemaLoader.schema,l={};for(let e=0;e<this._bufferViewIds.length;++e){const t=this._bufferViewIds[e],n=this._bufferViewLoaders[e];if(!n.isDestroyed()){const e=new Uint8Array(n.typedArray);l[t]=e}}const u={};for(let e=0;e<this._textureIds.length;++e){const n=this._textureIds[e],i=t[e];i.isDestroyed()||(u[n]=i.texture)}return(0,r.A)(this._extension)?this._structuralMetadata=(0,a.A)({extension:this._extension,schema:s,bufferViews:l,textures:u}):this._structuralMetadata=(0,c.A)({extension:this._extensionLegacy,schema:s,bufferViews:l,textures:u}),_(this),this._state=d.A.READY,!0},h.prototype.unload=function(){_(this),function(e){const t=e._textureLoaders,n=t.length;for(let e=0;e<n;++e)l.A.unload(t[e]);e._textureLoaders.length=0,e._textureIds.length=0}(this),(0,r.A)(this._schemaLoader)&&l.A.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};const g=h},952575:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(367817),r=n(419061),s=n(491446),a=n(276904),c=n(616e3),l=n(78078),u=n(557448),d=n(782556),h=n(666203),A=n(569445),f=n(48660),p=n(271868);function m(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).resourceCache,n=e.gltf,o=e.textureInfo,s=e.gltfResource,a=e.baseResource,c=e.supportedImageFormats,l=e.cacheKey,u=(0,r.A)(e.asynchronous,!0);i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.textureInfo",o),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a),i.A.typeOf.object("options.supportedImageFormats",c);const h=o.index,A=d.A.getImageIdFromTexture({gltf:n,textureId:h,supportedImageFormats:c});this._resourceCache=t,this._gltf=n,this._textureInfo=o,this._imageId=A,this._gltfResource=s,this._baseResource=a,this._cacheKey=l,this._asynchronous=u,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=f.A.UNLOADED,this._promise=void 0}(0,s.A)(Object.create)&&(m.prototype=Object.create(A.A.prototype),m.prototype.constructor=m),Object.defineProperties(m.prototype,{cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});const _=new g;function g(){this.gltf=void 0,this.textureInfo=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}function y(e,t,n,i,r){const h=n.internalFormat;let A=!1;a.A.isCompressedFormat(h)&&!(0,s.A)(i)&&(A=!0);const f=d.A.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:A}),m=f.minificationFilter,_=f.wrapS,g=f.wrapT,y=m===l.A.NEAREST_MIPMAP_NEAREST||m===l.A.NEAREST_MIPMAP_LINEAR||m===l.A.LINEAR_MIPMAP_NEAREST||m===l.A.LINEAR_MIPMAP_LINEAR,b=!(0,s.A)(h)&&y,v=b||_===u.A.REPEAT||_===u.A.MIRRORED_REPEAT||g===u.A.REPEAT||g===u.A.MIRRORED_REPEAT,T=!o.A.isPowerOfTwo(n.width)||!o.A.isPowerOfTwo(n.height),w=v&&T;let E;return(0,s.A)(h)?(!r.webgl2&&a.A.isCompressedFormat(h)&&T&&v&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."),E=c.A.create({context:r,source:{arrayBufferView:n.bufferView,mipLevels:i},width:n.width,height:n.height,pixelFormat:n.internalFormat,sampler:f})):(w&&(n=(0,p.A)(n)),E=c.A.create({context:r,source:n,sampler:f,flipY:!1,skipColorSpaceConversion:!0})),b&&E.generateMipmap(),E}m.prototype.load=async function(){return(0,s.A)(this._promise)||(this._state=f.A.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getImageLoader({gltf:e._gltf,imageId:e._imageId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._imageLoader=n,await n.load(),e.isDestroyed())return;return e._image=n.image,e._mipLevels=n.mipLevels,e._state=f.A.LOADED,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=f.A.FAILED;const n="Failed to load texture";throw e.getError(n,t)}}(this)),this._promise},g.prototype.set=function(e,t,n,i,o){this.gltf=e,this.textureInfo=t,this.image=n,this.mipLevels=i,this.context=o},g.prototype.execute=function(){this.texture=y(this.gltf,this.textureInfo,this.image,this.mipLevels,this.context)},m.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===f.A.READY)return!0;if(this._state!==f.A.LOADED&&this._state!==f.A.PROCESSING)return!1;if((0,s.A)(this._texture))return!1;if(!(0,s.A)(this._image))return!1;let t;if(this._state=f.A.PROCESSING,this._asynchronous){const n=_;if(n.set(this._gltf,this._textureInfo,this._image,this._mipLevels,e.context),!e.jobScheduler.execute(n,h.A.TEXTURE))return;t=n.texture}else t=y(this._gltf,this._textureInfo,this._image,this._mipLevels,e.context);return this.unload(),this._texture=t,this._state=f.A.READY,this._resourceCache.statistics.addTextureLoader(this),!0},m.prototype.unload=function(){(0,s.A)(this._texture)&&this._texture.destroy(),(0,s.A)(this._imageLoader)&&!this._imageLoader.isDestroyed()&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};const b=m},946240:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(641613),c=n(442790),l=n(730839),u=n(666203),d=n(995537),h=n(569445),A=n(48660);function f(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resourceCache,n=e.gltf,a=e.gltfResource,c=e.baseResource,l=e.bufferViewId,u=e.draco,d=e.attributeSemantic,h=e.accessorId,f=e.cacheKey,m=(0,o.A)(e.asynchronous,!0),_=(0,o.A)(e.loadBuffer,!1),g=(0,o.A)(e.loadTypedArray,!1);if(i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",c),!_&&!g)throw new s.A("At least one of loadBuffer and loadTypedArray must be true.");const y=(0,r.A)(l),b=p(u,d),v=(0,r.A)(d),T=(0,r.A)(h);if(y===b)throw new s.A("One of options.bufferViewId and options.draco must be defined.");if(b&&!v)throw new s.A("When options.draco is defined options.attributeSemantic must also be defined.");if(b&&!T)throw new s.A("When options.draco is defined options.accessorId must also be defined.");b&&(i.A.typeOf.object("options.draco",u),i.A.typeOf.string("options.attributeSemantic",d),i.A.typeOf.number("options.accessorId",h)),this._resourceCache=t,this._gltfResource=a,this._baseResource=c,this._gltf=n,this._bufferViewId=l,this._draco=u,this._attributeSemantic=d,this._accessorId=h,this._cacheKey=f,this._asynchronous=m,this._loadBuffer=_,this._loadTypedArray=g,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=A.A.UNLOADED,this._promise=void 0}function p(e,t){return(0,r.A)(e)&&(0,r.A)(e.attributes)&&(0,r.A)(e.attributes[t])}function m(e,t){throw e.unload(),e._state=A.A.FAILED,e.getError("Failed to load vertex buffer",t)}function _(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}function g(e,t){const n=a.A.createVertexBuffer({typedArray:e,context:t,usage:c.A.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}(0,r.A)(Object.create)&&(f.prototype=Object.create(h.A.prototype),f.prototype.constructor=f),Object.defineProperties(f.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}}),f.prototype.load=async function(){return(0,r.A)(this._promise)?this._promise:p(this._draco,this._attributeSemantic)?(this._promise=async function(e){e._state=A.A.LOADING;const t=e._resourceCache;try{const n=t.getDracoLoader({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._dracoLoader=n,await n.load(),e.isDestroyed())return;return e._state=A.A.LOADED,e}catch{if(e.isDestroyed())return;m(e)}}(this),this._promise):(this._promise=async function(e){e._state=A.A.LOADING;const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._typedArray=n.typedArray,e._state=A.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;m(e,t)}}(this),this._promise)},_.prototype.set=function(e,t){this.typedArray=e,this.context=t},_.prototype.execute=function(){this.buffer=g(this.typedArray,this.context)};const y=new _;f.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===A.A.READY)return!0;if(this._state!==A.A.LOADED&&this._state!==A.A.PROCESSING)return!1;if((0,r.A)(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(e){m(this,e)}!function(e){e._state=A.A.PROCESSING;const t=e._dracoLoader.decodedData.vertexAttributes[e._attributeSemantic],n=e._accessorId,i=e._gltf.accessors[n].type,o=t.array,s=t.data.quantization;(0,r.A)(s)&&(e._quantization=function(e,t,n,i){const o=(1<<e.quantizationBits)-1,r=1/o,s=new d.A.Quantization;if(s.componentDatatype=t,s.octEncoded=e.octEncoded,s.octEncodedZXY=!0,s.type=i,s.octEncoded)s.type=l.A.VEC2,s.normalizationRange=o;else{const t=l.A.getMathType(i);if(t===Number){const t=e.range;s.quantizedVolumeOffset=e.minValues[0],s.quantizedVolumeDimensions=t,s.normalizationRange=o,s.quantizedVolumeStepSize=t*r}else{s.quantizedVolumeOffset=t.unpack(e.minValues),s.normalizationRange=t.unpack(new Array(n).fill(o));const i=new Array(n).fill(e.range);s.quantizedVolumeDimensions=t.unpack(i);const a=i.map((function(e){return e*r}));s.quantizedVolumeStepSize=t.unpack(a)}}return s}(s,t.data.componentDatatype,t.data.componentsPerAttribute,i)),e._typedArray=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}(this)}let t;const n=this._typedArray;if(this._loadBuffer&&this._asynchronous){const i=y;if(i.set(n,e.context),!e.jobScheduler.execute(i,u.A.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=g(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=A.A.READY,this._resourceCache.statistics.addGeometryLoader(this),!0},f.prototype.unload=function(){(0,r.A)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,r.A)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),(0,r.A)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};const b=f},38300:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(303578),o=n(369031),r=n(672743),s=n(419061),a=n(491446),c=n(786101),l=n(605971),u=n(955943),d=n(182348),h=n(697422),A=n(744603),f=n(123245),p=n(705302),m=n(41076),_=n(553909);function g(e){this.channel=e.channel,this.ellipsoid=e.ellipsoid,this.tilingScheme=void 0,this.version=void 0}async function y(e,t,n){try{!function(e,t){let n,i;try{n=JSON.parse(e)}catch(t){n=JSON.parse(e.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(let e=0;e<n.layers.length;e++)if(n.layers[e].id===t.channel){i=n.layers[e];break}if(!(0,a.A)(i)){const e=`Could not find layer with channel (id) of ${t.channel}.`;throw new f.A(e)}if(!(0,a.A)(i.version)){const e=`Could not find a version in channel (id) ${t.channel}.`;throw new f.A(e)}if(t.version=i.version,(0,a.A)(n.projection)&&"flat"===n.projection)t.tilingScheme=new d.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new h.A(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:t.ellipsoid});else{if((0,a.A)(n.projection)&&"mercator"!==n.projection){const e=`Unsupported projection ${n.projection}.`;throw new f.A(e)}t.tilingScheme=new m.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid})}}(await e.fetchText(),t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${t.url}.`;throw(0,a.A)(e)&&(0,a.A)(e.message)&&(i+=`: ${e.message}`),p.A.reportError(void 0,n,(0,a.A)(n)?n._errorEvent:void 0,i),new f.A(i)}(t,e,n)}}function b(e){if(e=(0,s.A)(e,{}),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1.9,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new r.A(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${b.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new u.A,(0,a.A)(e.url)||(0,a.A)(e.channel)){if(!(0,a.A)(e.url))throw new l.A("options.url is required.");if(!(0,a.A)(e.channel))throw new l.A("options.channel is required.");(0,c.A)("GoogleEarthEnterpriseMapsProvider.url","GoogleEarthEnterpriseMapsProvider.url and GoogleEarthEnterpriseMapsProvider.channel were deprecated in CesiumJS 1.104.  They will be in CesiumJS 1.107. Use GoogleEarthEnterpriseMapsProvider.fromUrl instead.");const t=e.url,n=(0,s.A)(e.path,"/default_map"),i=A.A.createIfNeeded(t).getDerivedResource({url:"/"===n[0]?n.substring(1):n});i.appendForwardSlash(),this._resource=i,this._url=t,this._path=n,this._ready=!1;const o=i.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),r=new g(e);this._readyPromise=y(o,r,this).then((()=>(r.build(this),this._ready=!0,!0)))}}g.prototype.build=function(e){e._channel=this.channel,e._version=this.version,e._tilingScheme=this.tilingScheme},Object.defineProperties(b.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.ready","GoogleEarthEnterpriseMapsProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use GoogleEarthEnterpriseMapsProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.readyPromise","GoogleEarthEnterpriseMapsProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use GoogleEarthEnterpriseMapsProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},defaultAlpha:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultAlpha","GoogleEarthEnterpriseMapsProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultAlpha","GoogleEarthEnterpriseMapsProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultNightAlpha","GoogleEarthEnterpriseMapsProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultNightAlpha","GoogleEarthEnterpriseMapsProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultDayAlpha","GoogleEarthEnterpriseMapsProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultDayAlpha","GoogleEarthEnterpriseMapsProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultBrightness","GoogleEarthEnterpriseMapsProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultBrightness","GoogleEarthEnterpriseMapsProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultContrast","GoogleEarthEnterpriseMapsProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultContrast","GoogleEarthEnterpriseMapsProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultHue","GoogleEarthEnterpriseMapsProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultHue","GoogleEarthEnterpriseMapsProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultSaturation","GoogleEarthEnterpriseMapsProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultSaturation","GoogleEarthEnterpriseMapsProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultGamma","GoogleEarthEnterpriseMapsProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultGamma","GoogleEarthEnterpriseMapsProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,c.A)("GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter","GoogleEarthEnterpriseMapsProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),b.fromUrl=async function(e,t,n){o.A.defined("url",e),o.A.defined("channel",t),n=(0,s.A)(n,{});const i=(0,s.A)(n.path,"/default_map"),r=A.A.createIfNeeded(e).getDerivedResource({url:"/"===i[0]?i.substring(1):i});r.appendForwardSlash();const a=r.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),c=new g(n);c.channel=t,await y(a,c);const l=new b(n);return c.build(l),l._readyPromise=Promise.resolve(!0),l._ready=!0,l._resource=r,l._url=e,l._path=i,l},b.prototype.getTileCredits=function(e,t,n){},b.prototype.requestImage=function(e,t,n,i){const o=this._resource.getDerivedResource({url:"query",request:i,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:n+1}});return _.A.loadImage(this,o)},b.prototype.pickFeatures=function(e,t,n,i,o){},b._logoUrl=void 0,Object.defineProperties(b,{logoUrl:{get:function(){return(0,a.A)(b._logoUrl)||(b._logoUrl=(0,i.A)("Assets/Images/google_earth_credit.png")),b._logoUrl},set:function(e){o.A.defined("value",e),b._logoUrl=e}}});const v=b},834298:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(419061),r=n(491446),s=n(965976);function a(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).id,n=e.group,s=e.class;i.A.typeOf.object("options.group",n),i.A.typeOf.object("options.class",s);const a=(0,r.A)(n.properties)?n.properties:{};this._class=s,this._properties=a,this._id=t,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.A.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.A.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.A.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.A.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.A.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.A.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.A.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},680278:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(419061),r=n(786101),s=n(604752),a=n(123245);const c={};c._deprecationWarning=r.A;const l=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(e,t){i.A.defined("arrayBuffer",e);const n=(0,o.A)(t,0);t=n;const r=new Uint8Array(e),u=new DataView(e);t+=l;const d=u.getUint32(t,!0);if(1!==d)throw new a.A(`Only Instanced 3D Model version 1 is supported. Version ${d} is not.`);t+=l;const h=u.getUint32(t,!0);t+=l;const A=u.getUint32(t,!0);if(0===A)throw new a.A("featureTableJsonByteLength is zero, the feature table must be defined.");t+=l;const f=u.getUint32(t,!0);t+=l;const p=u.getUint32(t,!0);t+=l;const m=u.getUint32(t,!0);t+=l;const _=u.getUint32(t,!0);if(1!==_&&0!==_)throw new a.A(`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${_} is not.`);t+=l;const g=(0,s.A)(r,t,A);t+=A;const y=new Uint8Array(e,t,f);let b,v;t+=f,p>0&&(b=(0,s.A)(r,t,p),t+=p,m>0&&(v=new Uint8Array(e,t,m),v=new Uint8Array(v),t+=m));const T=n+h-t;if(0===T)throw new a.A("glTF byte length must be greater than 0.");let w;return t%4==0?w=new Uint8Array(e,t,T):(c._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),w=new Uint8Array(r.subarray(t,t+T))),{gltfFormat:_,featureTableJson:g,featureTableBinary:y,batchTableJson:b,batchTableBinary:v,gltf:w}};const u=c},208198:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(434067),o=n(369031),r=n(491446),s=n(419061),a=n(677354),c=n(605971),l=n(311994);function u(e){e=(0,s.A)(e,s.A.EMPTY_OBJECT);const t=(0,r.A)(e.imageBasedLightingFactor)?i.A.clone(e.imageBasedLightingFactor):new i.A(1,1);o.A.typeOf.object("options.imageBasedLightingFactor",t),o.A.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.x",t.x,0),o.A.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.x",t.x,1),o.A.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.y",t.y,0),o.A.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.y",t.y,1),this._imageBasedLightingFactor=t;const n=(0,s.A)(e.luminanceAtZenith,.2);o.A.typeOf.number("options.luminanceAtZenith",n),this._luminanceAtZenith=n;const a=e.sphericalHarmonicCoefficients;if((0,r.A)(a)&&(!Array.isArray(a)||9!==a.length))throw new c.A("options.sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._sphericalHarmonicCoefficients=a,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapAtlas=void 0,this._specularEnvironmentMapAtlasDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousImageBasedLightingFactor=i.A.clone(t),this._previousLuminanceAtZenith=n,this._previousSphericalHarmonicCoefficients=a,this._removeErrorListener=void 0}Object.defineProperties(u.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){o.A.typeOf.object("imageBasedLightingFactor",e),o.A.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),o.A.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),o.A.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),o.A.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),this._previousImageBasedLightingFactor=i.A.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=i.A.clone(e,this._imageBasedLightingFactor)}},luminanceAtZenith:{get:function(){return this._luminanceAtZenith},set:function(e){this._previousLuminanceAtZenith=this._luminanceAtZenith,this._luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){if((0,r.A)(e)&&(!Array.isArray(e)||9!==e.length))throw new c.A("sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentMapAtlasDirty=this._specularEnvironmentMapAtlasDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useSphericalHarmonicCoefficients:{get:function(){return(0,r.A)(this._sphericalHarmonicCoefficients)||this._useDefaultSphericalHarmonics}},specularEnvironmentMapAtlas:{get:function(){return this._specularEnvironmentMapAtlas}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return(0,r.A)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready||this._useDefaultSpecularMaps}}}),u.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber)return;this._previousFrameNumber=e.frameNumber;const t=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;const n=this._imageBasedLightingFactor,o=this._previousImageBasedLightingFactor;i.A.equals(n,o)||(this._shouldRegenerateShaders=n.x>0&&0===o.x||0===n.x&&o.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||n.y>0&&0===o.y||0===n.y&&o.y>0,this._previousImageBasedLightingFactor=i.A.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._luminanceAtZenith!==this._previousLuminanceAtZenith&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,r.A)(this._luminanceAtZenith)!==(0,r.A)(this._previousLuminanceAtZenith),this._previousLuminanceAtZenith=this._luminanceAtZenith),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,r.A)(this._previousSphericalHarmonicCoefficients)!==(0,r.A)(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentMapAtlasDirty&&(function(e,t){if(l.A.isSupported(t)){if(e._specularEnvironmentMapAtlas=e._specularEnvironmentMapAtlas&&e._specularEnvironmentMapAtlas.destroy(),(0,r.A)(e._specularEnvironmentMaps)){const t=new l.A(e._specularEnvironmentMaps);e._specularEnvironmentMapAtlas=t,e._removeErrorListener=t.errorEvent.addEventListener((e=>{console.error(`Error loading specularEnvironmentMaps: ${e}`)}))}e._shouldRegenerateShaders=!0}}(this,t),this._specularEnvironmentMapAtlasDirty=!1),(0,r.A)(this._specularEnvironmentMapAtlas)&&(this._specularEnvironmentMapAtlas.update(e),this._specularEnvironmentMapAtlas.ready&&(this._specularEnvironmentMapLoaded=!0));const s=!(0,r.A)(this._specularEnvironmentMapAtlas)&&(0,r.A)(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,a=!(0,r.A)(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,c=!(0,r.A)(this._sphericalHarmonicCoefficients)&&(0,r.A)(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,u=!(0,r.A)(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||s||a||c||u,this._useDefaultSpecularMaps=!(0,r.A)(this._specularEnvironmentMapAtlas)&&(0,r.A)(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!(0,r.A)(this._sphericalHarmonicCoefficients)&&(0,r.A)(e.sphericalHarmonicCoefficients)},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),this._removeErrorListener=this._removeErrorListener&&this._removeErrorListener(),(0,a.A)(this)};const d=u},17656:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(677354),r=n(921243);function s(e,t,n,o,s){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=o,this.request=void 0,0!==o){const i=t/2|0,r=n/2|0,s=o-1;this.parent=e.getImageryFromCache(i,r,s)}this.state=r.A.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0;const a=e.imageryProvider;!(0,i.A)(s)&&e.ready&&((0,i.A)(a._ready)?a._ready:!(0,i.A)(a.ready)||a.ready)&&(s=e.imageryProvider.tilingScheme.tileXYToRectangle(t,n,o)),this.rectangle=s}s.createPlaceholder=function(e){const t=new s(e,0,0,0);return t.addReference(),t.state=r.A.PLACEHOLDER,t},s.prototype.addReference=function(){++this.referenceCount},s.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),(0,i.A)(this.parent)&&this.parent.releaseReference(),(0,i.A)(this.image)&&(0,i.A)(this.image.destroy)&&this.image.destroy(),(0,i.A)(this.texture)&&this.texture.destroy(),(0,i.A)(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),(0,o.A)(this),0):this.referenceCount},s.prototype.processStateMachine=function(e,t,n){this.state!==r.A.UNLOADED||n||(this.state=r.A.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===r.A.RECEIVED&&(this.state=r.A.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));const i=this.state===r.A.READY&&t&&!this.texture;(this.state===r.A.TEXTURE_LOADED||i)&&(this.state=r.A.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};const a=s},451227:(e,t,n)=>{"use strict";n.d(t,{A:()=>Z});var i=n(434067),o=n(626809),r=n(369031),s=n(655028),a=n(419061),c=n(491446),l=n(677354),u=n(786101),d=n(605971),h=n(955943),A=n(520098),f=n(653577),p=n(874915),m=n(367817),_=n(276904),g=n(697422),y=n(209202),b=n(83181),v=n(307898),T=n(98055),w=n(705302),E=n(414305),S=n(641613),C=n(442790),x=n(718289),I=n(430332),P=n(418906),D=n(654799),O=n(302836),L=n(342875),N=n(616e3),M=n(957233),R=n(78078),F=n(557448),B=n(508380),U=n(275058),k=n(208898),V=n(17656),H=n(921243),z=n(913419),G=n(976092);function j(e,t){this._imageryProvider=e,this._readyEvent=new h.A,this._errorEvent=new h.A,t=(0,a.A)(t,a.A.EMPTY_OBJECT),e=(0,a.A)(e,a.A.EMPTY_OBJECT),this.alpha=(0,a.A)(t.alpha,(0,a.A)(e._defaultAlpha,1)),this.nightAlpha=(0,a.A)(t.nightAlpha,(0,a.A)(e._defaultNightAlpha,1)),this.dayAlpha=(0,a.A)(t.dayAlpha,(0,a.A)(e._defaultDayAlpha,1)),this.brightness=(0,a.A)(t.brightness,(0,a.A)(e._defaultBrightness,j.DEFAULT_BRIGHTNESS)),this.contrast=(0,a.A)(t.contrast,(0,a.A)(e._defaultContrast,j.DEFAULT_CONTRAST)),this.hue=(0,a.A)(t.hue,(0,a.A)(e._defaultHue,j.DEFAULT_HUE)),this.saturation=(0,a.A)(t.saturation,(0,a.A)(e._defaultSaturation,j.DEFAULT_SATURATION)),this.gamma=(0,a.A)(t.gamma,(0,a.A)(e._defaultGamma,j.DEFAULT_GAMMA)),this.splitDirection=(0,a.A)(t.splitDirection,j.DEFAULT_SPLIT),this.minificationFilter=(0,a.A)(t.minificationFilter,(0,a.A)(e._defaultMinificationFilter,j.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=(0,a.A)(t.magnificationFilter,(0,a.A)(e._defaultMagnificationFilter,j.DEFAULT_MAGNIFICATION_FILTER)),this.show=(0,a.A)(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=(0,a.A)(t.rectangle,g.A.MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new G.A(V.A.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=(0,a.A)(t.colorToAlphaThreshold,j.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(j.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},ready:{get:function(){return(0,c.A)(this._imageryProvider)}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},rectangle:{get:function(){return this._rectangle}}}),j.DEFAULT_BRIGHTNESS=1,j.DEFAULT_CONTRAST=1,j.DEFAULT_HUE=0,j.DEFAULT_SATURATION=1,j.DEFAULT_GAMMA=1,j.DEFAULT_SPLIT=z.A.NONE,j.DEFAULT_MINIFICATION_FILTER=R.A.LINEAR,j.DEFAULT_MAGNIFICATION_FILTER=M.A.LINEAR,j.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,j.fromProviderAsync=function(e,t){r.A.typeOf.object("imageryProviderPromise",e);const n=new j(void 0,t);return async function(e,t){let n;try{if(n=await Promise.resolve(t),e.isDestroyed())return;e._imageryProvider=n,e._readyEvent.raiseEvent(n)}catch(t){!function(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}(e._errorEvent,t)}}(n,Promise.resolve(e)),n},j.fromWorldImagery=function(e){return e=(0,a.A)(e,a.A.EMPTY_OBJECT),j.fromProviderAsync((0,s.A)({style:e.style}),e)},j.prototype.isBaseLayer=function(){return this._isBaseLayer},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return(0,l.A)(this)};const W=new g.A,q=new g.A,Y=new g.A,X=new g.A;function J(e,t,n){return`${e}:${t}:${n}`}function Q(e,t,n){return JSON.stringify([e,t,n])}j.prototype.getViewableRectangle=async function(){(0,u.A)("ImageryLayer.getViewableRectangle","ImageryLayer.getViewableRectangle was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.getImageryRectangle instead.");const e=this._imageryProvider,t=this._rectangle;return(0,c.A)(e._readyPromise)?await e._readyPromise:(0,c.A)(e.readyPromise)&&await e.readyPromise,g.A.intersection(e.rectangle,t)},j.prototype.getImageryRectangle=function(){const e=this._imageryProvider,t=this._rectangle;return g.A.intersection(e.rectangle,t)},j.prototype._createTileImagerySkeletons=function(e,t,n){const i=e.data;if(!(0,c.A)(t)||(0,c.A)(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if((0,c.A)(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;(0,c.A)(n)||(n=i.imagery.length);const r=this._imageryProvider;if(!this.ready||((0,c.A)(r._ready)?!r._ready:(0,c.A)(r.ready)&&!r.ready))return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;const s=r.tilingScheme.projection instanceof E.A&&e.rectangle.north<E.A.MaximumLatitude&&e.rectangle.south>-E.A.MaximumLatitude,a=g.A.intersection(r.rectangle,this._rectangle,W);let l=g.A.intersection(e.rectangle,a,q);if(!(0,c.A)(l)){if(!this.isBaseLayer())return!1;const t=a,n=e.rectangle;l=q,n.south>=t.north?l.north=l.south=t.north:n.north<=t.south?l.north=l.south=t.south:(l.south=Math.max(n.south,t.south),l.north=Math.min(n.north,t.north)),n.west>=t.east?l.west=l.east=t.east:n.east<=t.west?l.west=l.east=t.west:(l.west=Math.max(n.west,t.west),l.east=Math.min(n.east,t.east))}let u=0;l.south>0?u=l.south:l.north<0&&(u=l.north);let d=function(e,t,n){const i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,s=e._imageryProvider.tilingScheme.projection instanceof f.A?1:Math.cos(n),a=o.rectangle,c=r.maximumRadius*a.width*s/(i.tileWidth*o.getNumberOfXTilesAtLevel(0))/t,l=Math.log(c)/Math.log(2);return 0|Math.round(l)}(this,1*t.getLevelMaximumGeometricError(e.level),u);d=Math.max(0,d);const h=r.maximumLevel;if(d>h&&(d=h),(0,c.A)(r.minimumLevel)){const e=r.minimumLevel;d<e&&(d=e)}const A=r.tilingScheme,p=A.positionToTileXY(g.A.northwest(l),d),m=A.positionToTileXY(g.A.southeast(l),d);let _=e.rectangle.width/512,y=e.rectangle.height/512;const b=A.tileXYToRectangle(p.x,p.y,d);Math.abs(b.south-e.rectangle.north)<y&&p.y<m.y&&++p.y,Math.abs(b.east-e.rectangle.west)<_&&p.x<m.x&&++p.x;const v=A.tileXYToRectangle(m.x,m.y,d);Math.abs(v.north-e.rectangle.south)<y&&m.y>p.y&&--m.y,Math.abs(v.west-e.rectangle.east)<_&&m.x>p.x&&--m.x;const T=g.A.clone(e.rectangle,X);let w,S,C=A.tileXYToRectangle(p.x,p.y,d),x=g.A.intersection(C,a,Y);s?(A.rectangleToNativeRectangle(T,T),A.rectangleToNativeRectangle(C,C),A.rectangleToNativeRectangle(x,x),A.rectangleToNativeRectangle(a,a),w=A.tileXYToNativeRectangle.bind(A),_=T.width/512,y=T.height/512):w=A.tileXYToRectangle.bind(A);let I,P=0,D=1;!this.isBaseLayer()&&Math.abs(x.west-T.west)>=_&&(P=Math.min(1,(x.west-T.west)/T.width)),!this.isBaseLayer()&&Math.abs(x.north-T.north)>=y&&(D=Math.max(0,(x.north-T.south)/T.height));const O=D;for(let e=p.x;e<=m.x;e++)if(S=P,C=w(e,p.y,d),x=g.A.simpleIntersection(C,a,Y),(0,c.A)(x)){P=Math.min(1,(x.east-T.west)/T.width),e===m.x&&(this.isBaseLayer()||Math.abs(x.east-T.east)<_)&&(P=1),D=O;for(let t=p.y;t<=m.y;t++){if(I=D,C=w(e,t,d),x=g.A.simpleIntersection(C,a,Y),!(0,c.A)(x))continue;D=Math.max(0,(x.south-T.south)/T.height),t===m.y&&(this.isBaseLayer()||Math.abs(x.south-T.south)<y)&&(D=0);const r=new o.A(S,D,P,I),l=this.getImageryFromCache(e,t,d);i.imagery.splice(n,0,new G.A(l,r,s)),++n}}return!0},j.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){const e=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=e.rectangleToNativeRectangle(n,W),i=e.rectangleToNativeRectangle(i,X)}const r=i.width,s=i.height,a=r/n.width,c=s/n.height;return new o.A(a*(i.west-n.west)/r,c*(i.south-n.south)/s,a,c)},j.prototype._requestImagery=function(e){const t=this._imageryProvider,n=this;function i(i){if(e.request.state===b.A.CANCELLED)return e.state=H.A.UNLOADED,void(e.request=void 0);e.state=H.A.FAILED,e.request=void 0;const r=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=w.A.reportError(n._requestImageError,t,t.errorEvent,r,e.x,e.y,e.level,i),n._requestImageError.retry&&o()}function o(){const o=new y.A({throttle:!1,throttleByServer:!0,type:v.A.IMAGERY});e.request=o,e.state=H.A.TRANSITIONING;const r=t.requestImage(e.x,e.y,e.level,o);if(!(0,c.A)(r))return e.state=H.A.UNLOADED,void(e.request=void 0);(0,c.A)(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),r.then((function(t){!function(t){if(!(0,c.A)(t))return i();e.image=t,e.state=H.A.RECEIVED,e.request=void 0,w.A.reportSuccess(n._requestImageError)}(t)})).catch((function(e){i(e)}))}o()},j.prototype._createTextureWebGL=function(e,t){const n=new D.A({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return(0,c.A)(i.internalFormat)?new N.A({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new N.A({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?_.A.RGBA:_.A.RGB,sampler:n})},j.prototype._createTexture=function(e,t){const n=this._imageryProvider,i=t.image;if((0,c.A)(n.tileDiscardPolicy)){const e=n.tileDiscardPolicy;if((0,c.A)(e)){if(!e.isReady())return void(t.state=H.A.RECEIVED);if(e.shouldDiscardImage(i))return void(t.state=H.A.INVALID)}}if(this.minificationFilter!==R.A.NEAREST&&this.minificationFilter!==R.A.LINEAR)throw new d.A("ImageryLayer minification filter must be NEAREST or LINEAR");const o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof E.A?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=H.A.TEXTURE_LOADED},j.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter;const i=this.magnificationFilter;if(n===R.A.LINEAR&&i===M.A.LINEAR&&!_.A.isCompressedFormat(t.pixelFormat)&&m.A.isPowerOfTwo(t.width)&&m.A.isPowerOfTwo(t.height)){n=R.A.LINEAR_MIPMAP_LINEAR;const o=I.A.maximumTextureFilterAnisotropy,r=Math.min(o,(0,a.A)(this._maximumAnisotropy,o)),s=J(n,i,r);let l=e.cache.imageryLayerMipmapSamplers;(0,c.A)(l)||(l={},e.cache.imageryLayerMipmapSamplers=l);let u=l[s];(0,c.A)(u)||(u=l[s]=new D.A({wrapS:F.A.CLAMP_TO_EDGE,wrapT:F.A.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:r})),t.generateMipmap(P.A.NICEST),t.sampler=u}else{const o=J(n,i,0);let r=e.cache.imageryLayerNonMipmapSamplers;(0,c.A)(r)||(r={},e.cache.imageryLayerNonMipmapSamplers=r);let s=r[o];(0,c.A)(s)||(s=r[o]=new D.A({wrapS:F.A.CLAMP_TO_EDGE,wrapT:F.A.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=s}},j.prototype._reprojectTexture=function(e,t,n){const i=t.textureWebMercator||t.texture,o=t.rectangle,r=e.context;if((n=(0,a.A)(n,!0))&&!(this._imageryProvider.tilingScheme.projection instanceof f.A)&&o.width/i.width>1e-5){const e=this;t.addReference();const n=new x.A({persists:!0,owner:this,preExecute:function(e){!function(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!(0,c.A)(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){(0,c.A)(this.framebuffer)&&this.framebuffer.destroy(),(0,c.A)(this.vertexArray)&&this.vertexArray.destroy(),(0,c.A)(this.shaderProgram)&&this.shaderProgram.destroy()}};const e=new Float32Array(256);let n=0;for(let t=0;t<64;++t){const i=t/63;e[n++]=0,e[n++]=i,e[n++]=1,e[n++]=i}const i={position:0,webMercatorT:1},r=T.A.getRegularGridIndices(2,64),s=S.A.createIndexBuffer({context:t,typedArray:r,usage:C.A.STATIC_DRAW,indexDatatype:p.A.UNSIGNED_SHORT});o.vertexArray=new B.A({context:t,attributes:[{index:i.position,vertexBuffer:S.A.createVertexBuffer({context:t,typedArray:e,usage:C.A.STATIC_DRAW}),componentsPerAttribute:2},{index:i.webMercatorT,vertexBuffer:S.A.createVertexBuffer({context:t,sizeInBytes:512,usage:C.A.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:s});const a=new L.A({sources:[k.A]});o.shaderProgram=O.A.fromCache({context:t,vertexShaderSource:a,fragmentShaderSource:U.A,attributeLocations:i}),o.sampler=new D.A({wrapS:F.A.CLAMP_TO_EDGE,wrapT:F.A.CLAMP_TO_EDGE,minificationFilter:R.A.LINEAR,magnificationFilter:M.A.LINEAR})}n.sampler=o.sampler;const r=n.width,s=n.height;$.textureDimensions.x=r,$.textureDimensions.y=s,$.texture=n;let a=Math.sin(i.south);const l=.5*Math.log((1+a)/(1-a));a=Math.sin(i.north);const u=1/(.5*Math.log((1+a)/(1-a))-l),d=new N.A({context:t,width:r,height:s,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});m.A.isPowerOfTwo(r)&&m.A.isPowerOfTwo(s)&&d.generateMipmap(P.A.NICEST);const h=i.south,A=i.north,f=K;let _=0;for(let e=0;e<64;++e){const t=e/63,n=m.A.lerp(h,A,t);a=Math.sin(n);const i=(.5*Math.log((1+a)/(1-a))-l)*u;f[_++]=i,f[_++]=i}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(f),e.shaderProgram=o.shaderProgram,e.outputTexture=d,e.uniformMap=$,e.vertexArray=o.vertexArray}(e,r,i,t.rectangle)},postExecute:function(n){t.texture=n,e._finalizeReprojectTexture(r,n),t.state=H.A.READY,t.releaseReference()},canceled:function(){t.state=H.A.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(n)}else n&&(t.texture=i),this._finalizeReprojectTexture(r,i),t.state=H.A.READY},j.prototype.queueReprojectionCommands=function(e){const t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0},j.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach((function(e){(0,c.A)(e.canceled)&&e.canceled()})),this._reprojectComputeCommands.length=0},j.prototype.getImageryFromCache=function(e,t,n,i){const o=Q(e,t,n);let r=this._imageryCache[o];return(0,c.A)(r)||(r=new V.A(this,e,t,n,i),this._imageryCache[o]=r),r.addReference(),r},j.prototype.removeImageryFromCache=function(e){const t=Q(e.x,e.y,e.level);delete this._imageryCache[t]};const $={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new i.A,texture:void 0},K=A.A.supportsTypedArrays()?new Float32Array(128):void 0,Z=j},869327:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(419061),o=n(491446),r=n(677354),s=n(605971),a=n(955943),c=n(367817),l=n(697422),u=n(451227);function d(){this._layers=[],this.layerAdded=new a.A,this.layerRemoved=new a.A,this.layerMoved=new a.A,this.layerShownOrHidden=new a.A}function h(e,t){if(!(0,o.A)(t))throw new s.A("layer is required.");const n=e.indexOf(t);if(-1===n)throw new s.A("layer is not in this collection.");return n}function A(e,t,n){const i=e._layers;if((t=c.A.clamp(t,0,i.length-1))===(n=c.A.clamp(n,0,i.length-1)))return;const o=i[t];i[t]=i[n],i[n]=o,e._update(),e.layerMoved.raiseEvent(o,n,t)}Object.defineProperties(d.prototype,{length:{get:function(){return this._layers.length}}}),d.prototype.add=function(e,t){const n=(0,o.A)(t);if(!(0,o.A)(e))throw new s.A("layer is required.");if(n){if(t<0)throw new s.A("index must be greater than or equal to zero.");if(t>this._layers.length)throw new s.A("index must be less than or equal to the number of layers.")}n?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t);const i=e.readyEvent.addEventListener((()=>{this.layerShownOrHidden.raiseEvent(e,e._layerIndex,e.show),i()}))},d.prototype.addImageryProvider=function(e,t){if(!(0,o.A)(e))throw new s.A("imageryProvider is required.");const n=new u.A(e);return this.add(n,t),n},d.prototype.remove=function(e,t){t=(0,i.A)(t,!0);const n=this._layers.indexOf(e);return-1!==n&&(this._layers.splice(n,1),this._update(),this.layerRemoved.raiseEvent(e,n),t&&e.destroy(),!0)},d.prototype.removeAll=function(e){e=(0,i.A)(e,!0);const t=this._layers;for(let n=0,i=t.length;n<i;n++){const i=t[n];this.layerRemoved.raiseEvent(i,n),e&&i.destroy()}this._layers=[]},d.prototype.contains=function(e){return-1!==this.indexOf(e)},d.prototype.indexOf=function(e){return this._layers.indexOf(e)},d.prototype.get=function(e){if(!(0,o.A)(e))throw new s.A("index is required.","index");return this._layers[e]},d.prototype.raise=function(e){const t=h(this._layers,e);A(this,t,t+1)},d.prototype.lower=function(e){const t=h(this._layers,e);A(this,t,t-1)},d.prototype.raiseToTop=function(e){const t=h(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},d.prototype.lowerToBottom=function(e){const t=h(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};const f=new l.A;function p(e,t,n,i){const r=e.globe._surface._tilesToRender;let s;for(let e=0;!(0,o.A)(s)&&e<r.length;++e){const n=r[e];l.A.contains(n.rectangle,t)&&(s=n)}if(!(0,o.A)(s))return;const a=s.data.imagery;for(let e=a.length-1;e>=0;--e){const r=a[e],u=r.readyImagery;if(!(0,o.A)(u))continue;if(!u.imageryLayer.ready)continue;const d=u.imageryLayer.imageryProvider;if(n&&!(0,o.A)(d.pickFeatures))continue;if(!l.A.contains(u.rectangle,t))continue;const h=f,A=1/1024;h.west=c.A.lerp(s.rectangle.west,s.rectangle.east,r.textureCoordinateRectangle.x-A),h.east=c.A.lerp(s.rectangle.west,s.rectangle.east,r.textureCoordinateRectangle.z+A),h.south=c.A.lerp(s.rectangle.south,s.rectangle.north,r.textureCoordinateRectangle.y-A),h.north=c.A.lerp(s.rectangle.south,s.rectangle.north,r.textureCoordinateRectangle.w+A),l.A.contains(h,t)&&i(u)}}d.prototype.pickImageryLayers=function(e,t){const n=t.globe.pick(e,t);if(!(0,o.A)(n))return;const i=t.globe.ellipsoid.cartesianToCartographic(n),r=[];return p(t,i,!1,(function(e){r.push(e.imageryLayer)})),0!==r.length?r:void 0},d.prototype.pickImageryLayerFeatures=function(e,t){const n=t.globe.pick(e,t);if(!(0,o.A)(n))return;const i=t.globe.ellipsoid.cartesianToCartographic(n),r=[],s=[];return p(t,i,!0,(function(e){if(!e.imageryLayer.ready)return;const t=e.imageryLayer.imageryProvider.pickFeatures(e.x,e.y,e.level,i.longitude,i.latitude);(0,o.A)(t)&&(r.push(t),s.push(e.imageryLayer))})),0!==r.length?Promise.all(r).then((function(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n],a=s[n];if((0,o.A)(r)&&r.length>0)for(let e=0;e<r.length;++e){const n=r[e];n.imageryLayer=a,(0,o.A)(n.position)||(n.position=i),t.push(n)}}return t})):void 0},d.prototype.queueReprojectionCommands=function(e){const t=this._layers;for(let n=0,i=t.length;n<i;++n)t[n].queueReprojectionCommands(e)},d.prototype.cancelReprojections=function(){const e=this._layers;for(let t=0,n=e.length;t<n;++t)e[t].cancelReprojections()},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this.removeAll(!0),(0,r.A)(this)},d.prototype._update=function(){let e=!0;const t=this._layers;let n,i,r,s;for(r=0,s=t.length;r<s;++r)i=t[r],i._layerIndex=r,i.show?(i._isBaseLayer=e,e=!1):i._isBaseLayer=!1,i.show!==i._show&&((0,o.A)(i._show)&&((0,o.A)(n)||(n=[]),n.push(i)),i._show=i.show);if((0,o.A)(n))for(r=0,s=n.length;r<s;++r)i=n[r],this.layerShownOrHidden.raiseEvent(i,i._layerIndex,i.show)};const m=d},789989:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446);function o(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}o.prototype.configureNameFromProperties=function(e){let t,n=10;for(const i in e)if(e.hasOwnProperty(i)&&e[i]){const e=i.toLowerCase();n>1&&"name"===e?(n=1,t=i):n>2&&"title"===e?(n=2,t=i):n>3&&/name/i.test(i)?(n=3,t=i):n>4&&/title/i.test(i)&&(n=4,t=i)}(0,i.A)(t)&&(this.name=e[t])},o.prototype.configureDescriptionFromProperties=function(e){this.description=function e(t){let n='<table class="cesium-infoBox-defaultTable">';for(const o in t)if(t.hasOwnProperty(o)){const r=t[o];(0,i.A)(r)&&(n+="object"==typeof r?`<tr><td>${o}</td><td>${e(r)}</td></tr>`:`<tr><td>${o}</td><td>${r}</td></tr>`)}return n+="</table>",n}(e)};const r=o},553909:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(491446),r=n(605971),s=n(471874),a=n(744603);function c(){r.A.throwInstantiationError()}Object.defineProperties(c.prototype,{ready:{get:r.A.throwInstantiationError},readyPromise:{get:r.A.throwInstantiationError},rectangle:{get:r.A.throwInstantiationError},tileWidth:{get:r.A.throwInstantiationError},tileHeight:{get:r.A.throwInstantiationError},maximumLevel:{get:r.A.throwInstantiationError},minimumLevel:{get:r.A.throwInstantiationError},tilingScheme:{get:r.A.throwInstantiationError},tileDiscardPolicy:{get:r.A.throwInstantiationError},errorEvent:{get:r.A.throwInstantiationError},credit:{get:r.A.throwInstantiationError},proxy:{get:r.A.throwInstantiationError},hasAlphaChannel:{get:r.A.throwInstantiationError},defaultAlpha:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultNightAlpha:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultDayAlpha:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultBrightness:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultContrast:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultHue:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultSaturation:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultGamma:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultMinificationFilter:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError},defaultMagnificationFilter:{get:r.A.throwInstantiationError,set:r.A.throwInstantiationError}}),c.prototype.getTileCredits=function(e,t,n){r.A.throwInstantiationError()},c.prototype.requestImage=function(e,t,n,i){r.A.throwInstantiationError()},c.prototype.pickFeatures=function(e,t,n,i,o){r.A.throwInstantiationError()};const l=/\.ktx2$/i;c.loadImage=function(e,t){i.A.defined("url",t);const n=a.A.createIfNeeded(t);return l.test(n.url)?(0,s.A)(n):(0,o.A)(e)&&(0,o.A)(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};const u=c},921243:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7})},961965:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(267980),o=n(369031),r=n(376758),s=n(430346),a=n(419061),c=n(491446),l=n(786101),u=n(677354),d=n(605971),h=n(367817),A=n(416721),f=n(331185),p=n(697422),m=n(252538),_=n(409211),g=n(800859),y=n(165955),b=n(335724);function v(e,t,n){o.A.defined("tile.implicitTileset",t.implicitTileset),o.A.defined("tile.implicitCoordinates",t.implicitCoordinates);const i=t.implicitTileset,r=t.implicitCoordinates;this._implicitTileset=i,this._implicitCoordinates=r,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;const s=r.getTemplateValues(),a=i.subtreeUriTemplate.getDerivedResource({templateValues:s});this._url=a.getUrlComponent(!0),this._ready=!1,this._readyPromise=void 0}function T(e,t,n){const i=y.A.TILE_GEOMETRIC_ERROR;return(0,c.A)(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function w(e,t,n,i,o,l){const u=e._implicitTileset;let d,h,A,f;if(d=(0,a.A)(l,!1)?n.implicitCoordinates:n.implicitCoordinates.getChildCoordinates(i),(0,c.A)(t.tilePropertyTableJson)){h=t.getTileMetadataView(d);const e=(0,b.A)(h);A=e.tile,f=e.content}const p=t.contentPropertyTableJsons.length;let m=!1;for(let e=0;e<p;e++)if(t.contentIsAvailableAtCoordinates(d,e)){m=!0;break}const _=function(e,t,n,i,o,r){let s;return s=!(0,c.A)(r)||!(0,c.A)(r.boundingVolume)||!E(r.boundingVolume,r)&&E(e.boundingVolume,r)?x(e,t,n,(0,a.A)(i,!1),o):r.boundingVolume,S(s,r),s}(u,d,i,l,n,A),g=[];for(let e=0;e<u.contentCount;e++){if(!t.contentIsAvailableAtIndex(o,e))continue;const n={uri:u.contentUriTemplates[e].getDerivedResource({templateValues:d.getTemplateValues()}).url},i=C(_,f);(0,c.A)(i)&&(n.boundingVolume=i),g.push((0,s.A)(n,u.contentHeaders[e]))}const y={boundingVolume:_,geometricError:T(h,u,d),refine:u.refine,contents:g},v=!0,w=(0,r.A)(u.tileHeader,v);delete w.boundingVolume,delete w.transform;const I=(0,s.A)(y,w,v),P=B(e,u.baseResource,I,n);return P.implicitCoordinates=d,P.implicitSubtree=t,P.metadata=h,P.hasImplicitContentMetadata=m,P}function E(e,t){return(0,c.A)(e)&&(0,c.A)(t)&&((0,c.A)(t.minimumHeight)||(0,c.A)(t.maximumHeight))&&((0,g.A)(e,"3DTILES_bounding_volume_S2")||(0,c.A)(e.region))}function S(e,t){var n,i,o;(0,c.A)(t)&&((0,g.A)(e,"3DTILES_bounding_volume_S2")?(n=e.extensions["3DTILES_bounding_volume_S2"],i=t.minimumHeight,o=t.maximumHeight,(0,c.A)(i)&&(n.minimumHeight=i),(0,c.A)(o)&&(n.maximumHeight=o)):(0,c.A)(e.region)&&function(e,t,n){(0,c.A)(t)&&(e[4]=t),(0,c.A)(n)&&(e[5]=n)}(e.region,t.minimumHeight,t.maximumHeight))}function C(e,t){let n;return(0,c.A)(t)&&(n=t.boundingVolume),E(n,t)?S(n,t):E(e,t)&&(n=(0,r.A)(e,!0),S(n,t)),n}function x(e,t,n,i,o){const r=e.boundingVolume;return(0,g.A)(r,"3DTILES_bounding_volume_S2")?I(i,o,n,t.level,t.x,t.y,t.z):(0,c.A)(r.region)?{region:R(r.region,t.level,t.x,t.y,t.z)}:{box:N(r.box,t.level,t.x,t.y,t.z)}}function I(e,t,n,i,r,s,a){o.A.typeOf.bool("parentIsPlaceholderTile",e),o.A.typeOf.object("parentTile",t),o.A.typeOf.number("childIndex",n),o.A.typeOf.number("level",i),o.A.typeOf.number("x",r),o.A.typeOf.number("y",s),(0,c.A)(a)&&o.A.typeOf.number("z",a);const l=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:m.A.getTokenFromId(l.s2Cell._cellId),minimumHeight:l.minimumHeight,maximumHeight:l.maximumHeight}}};const u=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),d=u%2==0?A.A.encode2D(i,r,s):A.A.encode2D(i,s,r),h=m.A.fromFacePositionLevel(u,BigInt(d),i);let f,p;if((0,c.A)(a)){const e=(l.maximumHeight+l.minimumHeight)/2;f=n<4?l.minimumHeight:e,p=n<4?e:l.maximumHeight}else f=l.minimumHeight,p=l.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:m.A.getTokenFromId(h._cellId),minimumHeight:f,maximumHeight:p}}}}Object.defineProperties(v.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,l.A)("Implicit3DTileContent.readyPromise","Implicit3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Implicit3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){throw new d.A("Implicit3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),v.fromSubtreeJson=async function(e,t,n,i,r,s){if(o.A.defined("tile.implicitTileset",t.implicitTileset),o.A.defined("tile.implicitCoordinates",t.implicitCoordinates),(0,c.A)(i)===(0,c.A)(r))throw new d.A("One of json and arrayBuffer must be defined.");let l;s=(0,a.A)(s,0),(0,c.A)(r)&&(l=new Uint8Array(r,s));const u=t.implicitTileset,h=t.implicitCoordinates,A=await _.A.fromSubtreeJson(n,i,l,u,h),f=new v(e,t,n);return f._implicitSubtree=A,function(e,t){const n=e._tile,i=function(e,t,n,i){const o=w(e,t,n,i,0,!0),r=e._tileset.statistics;let s=[o],a=[];const c=e._implicitTileset;for(let n=1;n<c.subtreeLevels;n++){const i=t.getLevelOffset(n),o=c.branchingFactor*s.length;for(let n=0;n<o;n++){const o=i+n;if(!t.tileIsAvailableAtIndex(o)){a.push(void 0);continue}const l=s[t.getParentMortonIndex(n)],u=w(e,t,l,n%c.branchingFactor,o);l.children.push(u),r.numberOfTilesTotal++,a.push(u)}s=a,a=[]}return{rootTile:o,bottomRow:s}}(e,t,n,e._implicitCoordinates.childIndex),o=e._tileset.statistics;n.children.push(i.rootTile),o.numberOfTilesTotal++;const r=function(e,t,n){const i=[],o=e._implicitTileset.branchingFactor;for(let e=0;e<n.length;e++){const r=n[e];if((0,c.A)(r))for(let n=0;n<o;n++){const s=e*o+n;t.childSubtreeIsAvailableAtIndex(s)&&i.push({tile:r,childIndex:n})}}return i}(e,t,i.bottomRow);for(let t=0;t<r.length;t++){const n=r[t],i=n.tile,s=F(e,i,n.childIndex);i.children.push(s),o.numberOfTilesTotal++}}(f,A),f._ready=!0,f._readyPromise=Promise.resolve(f),f};const P=new i.A,D=new i.A,O=new i.A,L=new f.A;function N(e,t,n,r,s){if(o.A.typeOf.object("rootBox",e),o.A.typeOf.number("level",t),o.A.typeOf.number("x",n),o.A.typeOf.number("y",r),(0,c.A)(s)&&o.A.typeOf.number("z",s),0===t)return e;const a=i.A.unpack(e,0,D),l=f.A.unpack(e,3,L),u=Math.pow(2,-t),d=(2*n+1)*u-1,h=(2*r+1)*u-1;let A=0;const p=i.A.fromElements(u,u,1,P);(0,c.A)(s)&&(A=(2*s+1)*u-1,p.z=u);let m=i.A.fromElements(d,h,A,O);m=f.A.multiplyByVector(l,m,O),m=i.A.add(m,a,O);let _=f.A.clone(l);_=f.A.multiplyByScale(_,p,_);const g=new Array(12);return i.A.pack(m,g),f.A.pack(_,g,3),g}const M=new p.A;function R(e,t,n,i,r){if(o.A.typeOf.object("rootRegion",e),o.A.typeOf.number("level",t),o.A.typeOf.number("x",n),o.A.typeOf.number("y",i),(0,c.A)(r)&&o.A.typeOf.number("z",r),0===t)return e.slice();const s=p.A.unpack(e,0,M),a=e[4],l=e[5],u=Math.pow(2,-t),d=u*s.width,A=h.A.negativePiToPi(s.west+n*d),f=h.A.negativePiToPi(A+d),m=u*s.height,_=h.A.negativePiToPi(s.south+i*m),g=h.A.negativePiToPi(_+m);let y=a,b=l;if((0,c.A)(r)){const e=u*(l-a);y+=r*e,b=y+e}return[A,_,f,g,y,b]}function F(e,t,n){const i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=x(i,o,n,!1,t),s=T(void 0,i,o),a=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,c={boundingVolume:r,geometricError:s,refine:i.refine,contents:[{uri:a}]},l=B(e,i.baseResource,c,t);return l.implicitTileset=i,l.implicitCoordinates=o,l}function B(e,t,n,i){return new(0,e._tile.constructor)(e._tileset,t,n,i)}v.prototype.hasProperty=function(e,t){return!1},v.prototype.getFeature=function(e){},v.prototype.applyDebugSettings=function(e,t){},v.prototype.applyStyle=function(e){},v.prototype.update=function(e,t){},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),(0,u.A)(this)},v._deriveBoundingBox=N,v._deriveBoundingRegion=R,v._deriveBoundingVolumeS2=I;const U=v},1235:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(491446),r=n(419061),s=n(605971),a=n(123245);function c(e){const t=e.lengthBits;let n=e.availableCount;i.A.typeOf.number("options.lengthBits",t);const s=e.constant,c=e.bitstream;if((0,o.A)(s))n=t;else{const i=Math.ceil(t/8);if(c.length!==i)throw new a.A(`Availability bitstream must be exactly ${i} bytes long to store ${t} bits. Actual bitstream was ${c.length} bytes long.`);const s=(0,r.A)(e.computeAvailableCountEnabled,!1);!(0,o.A)(n)&&s&&(n=function(e,t){let n=0;for(let i=0;i<t;i++){const t=i%8;n+=e[i>>3]>>t&1}return n}(c,t))}this._lengthBits=t,this._availableCount=n,this._constant=s,this._bitstream=c}Object.defineProperties(c.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),c.prototype.getBit=function(e){if(e<0||e>=this._lengthBits)throw new s.A("Bit index out of bounds.");if((0,o.A)(this._constant))return this._constant;const t=e>>3,n=e%8;return 1==(this._bitstream[t]>>n&1)};const l=c},829513:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(419061);function r(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).metadataTable,n=e.class,r=e.entityId,s=e.propertyTableJson;i.A.typeOf.object("options.metadataTable",t),i.A.typeOf.object("options.class",n),i.A.typeOf.number("options.entityId",r),i.A.typeOf.object("options.propertyTableJson",s),this._class=n,this._metadataTable=t,this._entityId=r,this._extensions=s.extensions,this._extras=s.extras}Object.defineProperties(r.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),r.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},r.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},r.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},r.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},r.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},r.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},r.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};const s=r},586067:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(605971);const o={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case o.OCTREE:return 8;case o.QUADTREE:return 4;default:throw new i.A("subdivisionScheme is not a valid value.")}}},r=Object.freeze(o)},409211:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(369031),o=n(419061),r=n(605971),s=n(491446),a=n(677354),c=n(604752),l=n(123245),u=n(800859),d=n(1235),h=n(829513),A=n(586067),f=n(123314),p=n(874403),m=n(872182);function _(e,t,n){i.A.typeOf.object("resource",e),i.A.typeOf.object("implicitTileset",t),i.A.typeOf.object("implicitCoordinates",n),this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=n,this._subtreeLevels=t.subtreeLevels,this._subdivisionScheme=t.subdivisionScheme,this._branchingFactor=t.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._ready=!1}function g(e,t){const n=e.properties;let i;for(const e in n)if(n.hasOwnProperty(e)){const r=n[e];i=t[(0,o.A)(r.values,r.bufferView)],i.isActive=!0,i.bufferHeader.isActive=!0;const a=(0,o.A)(r.stringOffsets,r.stringOffsetBufferView);(0,s.A)(a)&&(i=t[a],i.isActive=!0,i.bufferHeader.isActive=!0);const c=(0,o.A)(r.arrayOffsets,r.arrayOffsetBufferView);(0,s.A)(c)&&(i=t[c],i.isActive=!0,i.bufferHeader.isActive=!0)}}async function y(e,t){const n=e._resource.getDerivedResource({url:t.uri}),i=m.A.getExternalBufferLoader({resource:n});e._bufferLoader=i;try{await i.load()}catch(e){if(i.isDestroyed())return;throw e}return i.typedArray}function b(e,t,n,i){if((0,s.A)(e.constant))return new d.A({constant:Boolean(e.constant),lengthBits:n,availableCount:e.availableCount});let o;return(0,s.A)(e.bitstream)?o=t[e.bitstream]:(0,s.A)(e.bufferView)&&(o=t[e.bufferView]),new d.A({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function v(e){let t=0;const n=e.lengthBits,i=e.availableCount;let o;o=i<256?new Uint8Array(n):i<65536?new Uint16Array(n):new Uint32Array(n);for(let n=0;n<e.lengthBits;n++)e.getBit(n)&&(o[n]=t,t++);return o}Object.defineProperties(_.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),_.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},_.prototype.tileIsAvailableAtCoordinates=function(e){const t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},_.prototype.contentIsAvailableAtIndex=function(e,t){if((t=(0,o.A)(t,0))<0||t>=this._contentAvailabilityBitstreams.length)throw new r.A("contentIndex out of bounds.");return this._contentAvailabilityBitstreams[t].getBit(e)},_.prototype.contentIsAvailableAtCoordinates=function(e,t){const n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)},_.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},_.prototype.childSubtreeIsAvailableAtCoordinates=function(e){const t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},_.prototype.getLevelOffset=function(e){const t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},_.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===A.A.OCTREE&&(t=3),e>>t},_.fromSubtreeJson=async function(e,t,n,a,l){if(i.A.typeOf.object("resource",e),(0,s.A)(t)===(0,s.A)(n))throw new r.A("One of json and subtreeView must be defined.");i.A.typeOf.object("implicitTileset",a),i.A.typeOf.object("implicitCoordinates",l);const d=new _(e,a,l);let h;h=(0,s.A)(t)?{json:t,binary:void 0}:function(e){const t=!0,n=new DataView(e.buffer,e.byteOffset);let i=8;const o=n.getUint32(i,t);i+=8;const r=n.getUint32(i,t);i+=8;const s=(0,c.A)(e,i,o);i+=o;return{json:s,binary:e.subarray(i,i+r)}}(n);const A=h.json;let m;if(d._subtreeJson=A,(0,u.A)(A,"3DTILES_metadata"))m=A.extensions["3DTILES_metadata"];else if((0,s.A)(A.tileMetadata)){const e=A.tileMetadata;m=A.propertyTables[e]}const T=[];if((0,s.A)(A.contentMetadata)){const e=A.contentMetadata.length;for(let t=0;t<e;t++){const e=A.contentMetadata[t];T.push(A.propertyTables[e])}}let w;const E=a.metadataSchema,S=A.subtreeMetadata;if((0,s.A)(S)){const e=S.class,t=E.classes[e];w=new f.A({subtreeMetadata:S,class:t})}d._metadata=w,d._tilePropertyTableJson=m,d._contentPropertyTableJsons=T;A.contentAvailabilityHeaders=[],(0,u.A)(A,"3DTILES_multiple_contents")?A.contentAvailabilityHeaders=A.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(A.contentAvailability)?A.contentAvailabilityHeaders=A.contentAvailability:A.contentAvailabilityHeaders.push((0,o.A)(A.contentAvailability,{constant:0}));const C=function(e){e=(0,s.A)(e)?e:[];for(let t=0;t<e.length;t++){const n=e[t];n.isExternal=(0,s.A)(n.uri),n.isActive=!1}return e}(A.buffers),x=function(e,t){e=(0,s.A)(e)?e:[];for(let n=0;n<e.length;n++){const i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}(A.bufferViews,C);!function(e,t){let n;const i=e.tileAvailability;(0,s.A)(i.bitstream)?n=t[i.bitstream]:(0,s.A)(i.bufferView)&&(n=t[i.bufferView]),(0,s.A)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);const o=e.contentAvailabilityHeaders;for(let e=0;e<o.length;e++)n=void 0,(0,s.A)(o[e].bitstream)?n=t[o[e].bitstream]:(0,s.A)(o[e].bufferView)&&(n=t[o[e].bufferView]),(0,s.A)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;const r=e.childSubtreeAvailability;(0,s.A)(r.bitstream)?n=t[r.bitstream]:(0,s.A)(r.bufferView)&&(n=t[r.bufferView]),(0,s.A)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}(A,x),(0,s.A)(m)&&g(m,x);for(let e=0;e<T.length;e++)g(T[e],x);const I=await function(e,t,n){const i=[];for(let o=0;o<t.length;o++){const r=t[o];if(r.isActive)if(r.isExternal){const t=y(e,r);i.push(t)}else i.push(Promise.resolve(n));else i.push(Promise.resolve(void 0))}return Promise.all(i).then((function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];(0,s.A)(i)&&(t[n]=i)}return t}))}(d,C,h.binary),P=function(e,t){const n={};for(let i=0;i<e.length;i++){const o=e[i];if(!o.isActive)continue;const r=o.byteOffset,s=r+o.byteLength,a=t[o.buffer].subarray(r,s);n[i]=a}return n}(x,I);return function(e,t,n,i){const o=n.branchingFactor,r=n.subtreeLevels,a=(Math.pow(o,r)-1)/(o-1),c=Math.pow(o,r),l=(0,u.A)(t,"3DTILES_metadata"),d=(0,s.A)(e._tilePropertyTableJson);let h=l||d;e._tileAvailability=b(t.tileAvailability,i,a,h);const A=e._contentPropertyTableJsons.length>0;h=h||A;for(let n=0;n<t.contentAvailabilityHeaders.length;n++){const o=b(t.contentAvailabilityHeaders[n],i,a,h);e._contentAvailabilityBitstreams.push(o)}e._childSubtreeAvailability=b(t.childSubtreeAvailability,i,c)}(d,A,a,P),(0,s.A)(m)&&(function(e,t,n){const i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,s=i.class,a=r.classes[s];e._tileMetadataTable=new p.A({class:a,count:o,properties:i.properties,bufferViews:n})}(d,a,P),function(e){const t=v(e._tileAvailability);e._tileJumpBuffer=t}(d)),function(e,t,n){const i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,s=e._contentMetadataTables;for(let e=0;e<i.length;e++){const t=i[e],a=o[e].availableCount,c=t.class,l=r.classes[c],u=new p.A({class:l,count:a,properties:t.properties,bufferViews:n});s.push(u)}}(d,a,P),function(e){const t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let e=0;e<n.length;e++){const i=v(n[e]);t.push(i)}}(d),d._ready=!0,d},_.prototype.getTileIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new l.A("level is out of bounds for this subtree");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex},_.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new l.A("level is out of bounds for this subtree");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex},_.prototype.getTileMetadataView=function(e){const t=function(e,t){if(!(0,s.A)(e._tileMetadataTable))return;const n=e.getTileIndex(t);return e._tileAvailability.getBit(n)?e._tileJumpBuffer[n]:void 0}(this,e);if(!(0,s.A)(t))return;const n=this._tileMetadataTable;return new h.A({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})},_.prototype.getContentMetadataView=function(e,t){const n=function(e,t,n){const i=e._contentMetadataTables;if(!(0,s.A)(i))return;const o=i[n];if(!(0,s.A)(o))return;const r=e._contentAvailabilityBitstreams[n],a=e.getTileIndex(t);return r.getBit(a)?e._contentJumpBuffers[n][a]:void 0}(this,e,t);if(!(0,s.A)(n))return;const i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new h.A({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return(0,s.A)(this._bufferLoader)&&m.A.unload(this._bufferLoader),(0,a.A)(this)};const T=_},123314:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(419061),r=n(491446),s=n(965976);function a(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).subtreeMetadata,n=e.class;i.A.typeOf.object("options.subtreeMetadata",t),i.A.typeOf.object("options.class",n);const s=(0,r.A)(t.properties)?t.properties:{};this._class=n,this._properties=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.A.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.A.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.A.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.A.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.A.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.A.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.A.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},410974:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(367817),o=n(369031),r=n(605971),s=n(245226),a=n(586067);function c(e){if(o.A.typeOf.string("options.subdivisionScheme",e.subdivisionScheme),o.A.typeOf.number("options.subtreeLevels",e.subtreeLevels),o.A.typeOf.number("options.level",e.level),o.A.typeOf.number("options.x",e.x),o.A.typeOf.number("options.y",e.y),e.subdivisionScheme===a.A.OCTREE&&o.A.typeOf.number("options.z",e.z),e.level<0)throw new r.A("level must be non-negative");if(e.x<0)throw new r.A("x must be non-negative");if(e.y<0)throw new r.A("y must be non-negative");if(e.subdivisionScheme===a.A.OCTREE&&e.z<0)throw new r.A("z must be non-negative");const t=1<<e.level;if(e.x>=t)throw new r.A("x is out of range");if(e.y>=t)throw new r.A("y is out of range");if(e.subdivisionScheme===a.A.OCTREE&&e.z>=t)throw new r.A("z is out of range");this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===a.A.OCTREE&&(this.z=e.z)}function l(e,t){if(e.subdivisionScheme!==t.subdivisionScheme)throw new r.A("coordinates must have same subdivisionScheme");if(e.subtreeLevels!==t.subtreeLevels)throw new r.A("coordinates must have same subtreeLevels")}Object.defineProperties(c.prototype,{childIndex:{get:function(){let e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===a.A.OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===a.A.OCTREE?s.A.encode3D(this.x,this.y,this.z):s.A.encode2D(this.x,this.y)}},tileIndex:{get:function(){return(this.subdivisionScheme===a.A.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3)+this.mortonIndex}}}),c.prototype.getDescendantCoordinates=function(e){o.A.typeOf.object("offsetCoordinates",e),l(this,e);const t=this.level+e.level,n=(this.x<<e.level)+e.x,i=(this.y<<e.level)+e.y;if(this.subdivisionScheme===a.A.OCTREE){const o=(this.z<<e.level)+e.z;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})},c.prototype.getAncestorCoordinates=function(e){if(o.A.typeOf.number("offsetLevels",e),e<0)throw new r.A("offsetLevels must be non-negative");if(e>this.level)throw new r.A("ancestor cannot be above the tileset root");const t=1<<e,n=this.level-e,i=Math.floor(this.x/t),s=Math.floor(this.y/t);if(this.subdivisionScheme===a.A.OCTREE){const e=Math.floor(this.z/t);return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s,z:e})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s})},c.prototype.getOffsetCoordinates=function(e){if(o.A.typeOf.object("descendantCoordinates",e),!this.isEqual(e)&&!this.isAncestor(e))throw new r.A("this is not an ancestor of descendant");l(this,e);const t=e.level-this.level,n=1<<t,i=e.x%n,s=e.y%n;if(this.subdivisionScheme===a.A.OCTREE){const o=e.z%n;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:s,z:o})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:s})},c.prototype.getChildCoordinates=function(e){o.A.typeOf.number("childIndex",e);const t=a.A.getBranchingFactor(this.subdivisionScheme);if(e<0||t<=e)throw new r.A(`childIndex must be at least 0 and less than ${t}`);const n=this.level+1,i=2*this.x+e%2,s=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===a.A.OCTREE){const t=2*this.z+Math.floor(e/4)%2;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s,z:t})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:s})},c.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},c.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},c.prototype.isAncestor=function(e){o.A.typeOf.object("descendantCoordinates",e),l(this,e);const t=e.level-this.level;if(t<=0)return!1;const n=e.x>>t,i=e.y>>t,r=this.x===n,s=this.y===i;if(this.subdivisionScheme===a.A.OCTREE){const n=e.z>>t,i=this.z===n;return r&&s&&i}return r&&s},c.prototype.isEqual=function(e){return o.A.typeOf.object("otherCoordinates",e),this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==a.A.OCTREE||this.z===e.z)},c.prototype.isImplicitTilesetRoot=function(){return 0===this.level},c.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels==0},c.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels==this.subtreeLevels-1},c.prototype.getTemplateValues=function(){const e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===a.A.OCTREE&&(e.z=this.z),e};const u=[0,0,0];c.fromMortonIndex=function(e,t,n,i){let o;return e===a.A.OCTREE?(o=s.A.decode3D(i,u),new c({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1],z:o[2]})):(o=s.A.decode2D(i,u),new c({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1]}))},c.fromTileIndex=function(e,t,n){let o,r,s;return e===a.A.OCTREE?(o=Math.floor(i.A.log2(7*n+1)/3),r=((1<<3*o)-1)/7,s=n-r):(o=Math.floor(i.A.log2(3*n+1)/2),r=((1<<2*o)-1)/3,s=n-r),c.fromMortonIndex(e,t,o,s)};const d=c},834957:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(376758),r=n(491446),s=n(744603),a=n(123245),c=n(800859),l=n(586067);const u=function(e,t,n){const u=(0,c.A)(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;i.A.typeOf.object("implicitTiling",u),this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=n;const d=t.boundingVolume;if(!((0,r.A)(d.box)||(0,r.A)(d.region)||(0,c.A)(d,"3DTILES_bounding_volume_S2")||(0,c.A)(d,"3DTILES_bounding_volume_cylinder")))throw new a.A("Only box, region, 3DTILES_bounding_volume_S2, and 3DTILES_bounding_volume_cylinder are supported for implicit tiling");this.boundingVolume=d,this.refine=t.refine,this.subtreeUriTemplate=new s.A({url:u.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];const h=function(e){if((0,c.A)(e,"3DTILES_multiple_contents")){const t=e.extensions["3DTILES_multiple_contents"];return(0,r.A)(t.contents)?t.contents:t.content}return(0,r.A)(e.contents)?e.contents:(0,r.A)(e.content)?[e.content]:[]}(t);for(let e=0;e<h.length;e++){const t=h[e];this.contentHeaders.push((0,o.A)(t,!0));const n=new s.A({url:t.uri});this.contentUriTemplates.push(n)}this.contentCount=this.contentHeaders.length,this.tileHeader=function(e){const t=(0,o.A)(e,!0);return(0,r.A)(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}(t),this.subdivisionScheme=l.A[u.subdivisionScheme],this.branchingFactor=l.A.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=u.subtreeLevels,(0,r.A)(u.availableLevels)?this.availableLevels=u.availableLevels:this.availableLevels=u.maximumLevel+1}},866857:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);const o={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID",fromGltfSemantic:function(e){i.A.typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/.exec(e);switch(null!==n&&(t=n[1]),t){case"TRANSLATION":return o.TRANSLATION;case"ROTATION":return o.ROTATION;case"SCALE":return o.SCALE;case"_FEATURE_ID":return o.FEATURE_ID}}},r=Object.freeze(o)},819598:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(41476),o=n(491446),r=n(677354),s=n(276904),a=n(769493),c=n(804701),l=n(57775),u=n(557053),d=n(100482),h=n(40118),A=n(342875),f=n(616e3),p=n(90979),m=n(200646),_=n(938987),g=n(896464),y=n(138151);function b(){this._numSamples=1,this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this._fbo=new c.A({depthStencil:!0,createDepthAttachments:!1}),this._fboClassified=new c.A({depthStencil:!0,createDepthAttachments:!1}),this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new a.A({color:new i.A(0,0,0,0),owner:this}),this._clearCommand=new a.A({color:new i.A(0,0,0,0),depth:1,stencil:0});const e=this;this._uniformMap={colorTexture:function(){return e._fbo.getColorTexture()},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._fboClassified.getColorTexture()}}}Object.defineProperties(b.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),b.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};const v={depthMask:!1,stencilTest:{enabled:!0,frontFunction:g.A.EQUAL,frontOperation:{fail:y.A.KEEP,zFail:y.A.KEEP,zPass:y.A.KEEP},backFunction:g.A.NEVER,reference:0,mask:_.A.CLASSIFICATION_MASK},blending:m.A.ALPHA_BLEND},T={depthMask:!1,stencilTest:{enabled:!0,frontFunction:g.A.NOT_EQUAL,frontOperation:{fail:y.A.KEEP,zFail:y.A.KEEP,zPass:y.A.KEEP},backFunction:g.A.NEVER,reference:0,mask:_.A.CLASSIFICATION_MASK},blending:m.A.ALPHA_BLEND},w={depthMask:!0,depthTest:{enabled:!0},stencilTest:_.A.setCesium3DTileBit(),stencilMask:_.A.CESIUM_3D_TILE_MASK,blending:m.A.ALPHA_BLEND};b.prototype.update=function(e,t,n){const i=this._fbo.getColorTexture(),r=this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;const a=this._numSamples!==t,c=e.drawingBufferWidth,m=e.drawingBufferHeight,_=!(0,o.A)(i)||i.width!==c||i.height!==m;if((_||r||a)&&(this._numSamples=t,this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,o.A)(this._previousFramebuffer)||(this._depthStencilTexture=new f.A({context:e,width:c,height:m,pixelFormat:s.A.DEPTH_STENCIL,pixelDatatype:l.A.UNSIGNED_INT_24_8}),t>1&&(this._depthStencilRenderbuffer=new u.A({context:e,width:c,height:m,format:d.A.DEPTH24_STENCIL8,numSamples:t})))),!(0,o.A)(this._fbo.framebuffer)||_||r||a){let i,r;this._fbo.destroy(),this._fboClassified.destroy(),(0,o.A)(this._previousFramebuffer)?(i=n.getDepthStencilTexture(),r=n.getDepthStencilRenderbuffer()):(i=this._depthStencilTexture,r=this._depthStencilRenderbuffer),this._fbo.setDepthStencilTexture(i),(0,o.A)(r)&&this._fbo.setDepthStencilRenderbuffer(r),this._fbo.update(e,c,m,t),(0,o.A)(this._previousFramebuffer)||(this._fboClassified.setDepthStencilTexture(i),this._fboClassified.update(e,c,m))}if((0,o.A)(this._rsUnclassified)||(this._rsUnclassified=h.A.fromCache(v),this._rsClassified=h.A.fromCache(T),this._rsDefault=h.A.fromCache(w)),!(0,o.A)(this._unclassifiedCommand)||r||a){(0,o.A)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());const t=(0,o.A)(this._previousFramebuffer)?"uniform sampler2D colorTexture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    out_FragColor = color * czm_invertClassificationColor;\n#else\n    out_FragColor = color;\n#endif\n}\n":"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    out_FragColor = color * highlightColor;\n    gl_FragDepth = texture(depthTexture, v_textureCoordinates).r;\n}\n",n=new A.A({defines:["UNCLASSIFIED"],sources:[t]}),i=new A.A({sources:[t]});this._unclassifiedCommand=e.createViewportQuadCommand(n,{renderState:(0,o.A)(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(i,{renderState:(0,o.A)(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),(0,o.A)(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),(0,o.A)(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(p.A,{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},b.prototype.prepareTextures=function(e,t){this._fbo._numSamples>1&&this._fbo.prepareTextures(e,t)},b.prototype.clear=function(e,t){(0,o.A)(this._previousFramebuffer)?this._fbo.clear(e,this._clearColorCommand,t):(this._fbo.clear(e,this._clearCommand,t),this._fboClassified.clear(e,this._clearCommand,t))},b.prototype.executeClassified=function(e,t){if(!(0,o.A)(this._previousFramebuffer)){const n=t.framebuffer;this.prepareTextures(e,!0),t.framebuffer=this._fboClassified.framebuffer,this._translucentCommand.execute(e,t),t.framebuffer=n}this._classifiedCommand.execute(e,t)},b.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._fbo.destroy(),this._fboClassified.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,o.A)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),(0,r.A)(this)};const E=b},670549:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(369031),o=n(419061),r=n(491446),s=n(786101),a=n(955943),c=n(954865),l=n(123245),u=n(531573),d=n(886626),h=n(829670),A=n(38300),f=n(847072),p=n(556541),m=n(66458),_=n(762270),g=n(32706);function y(e){return function(t){return new e(t)}}const b={ARCGIS_MAPSERVER:y(u.A),BING:y(d.A),GOOGLE_EARTH:y(A.A),MAPBOX:y(f.A),SINGLE_TILE:y(p.A),TMS:y(h.A),URL_TEMPLATE:y(m.A),WMS:y(_.A),WMTS:y(g.A)},v={ARCGIS_MAPSERVER:u.A.fromUrl,BING:async(e,t)=>d.A.fromUrl(e,t),GOOGLE_EARTH:async(e,t)=>{const n=t.channel;return delete t.channel,A.A.fromUrl(e,n,t)},MAPBOX:(e,t)=>new f.A({url:e,...t}),SINGLE_TILE:p.A.fromUrl,TMS:h.A.fromUrl,URL_TEMPLATE:(e,t)=>new m.A({url:e,...t}),WMS:(e,t)=>new _.A({url:e,...t}),WMTS:(e,t)=>new g.A({url:e,...t})};function T(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new a.A;const t=e.assetId;(0,r.A)(t)&&((0,s.A)("IonImageryProvider options.assetId","options.assetId was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use IonImageryProvider.fromAssetId instead."),T._initialize(this,t,e))}Object.defineProperties(T.prototype,{ready:{get:function(){return(0,s.A)("IonImageryProvider.ready","IonImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use IonImageryProvider.fromAssetId instead."),this._ready}},readyPromise:{get:function(){return(0,s.A)("IonImageryProvider.readyPromise","IonImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use IonImageryProvider.fromAssetId instead."),this._readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},proxy:{get:function(){}},defaultAlpha:{get:function(){return(0,s.A)("IonImageryProvider.defaultAlpha","IonImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,s.A)("IonImageryProvider.defaultAlpha","IonImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,s.A)("IonImageryProvider.defaultNightAlpha","IonImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,s.A)("IonImageryProvider.defaultNightAlpha","IonImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,s.A)("IonImageryProvider.defaultDayAlpha","IonImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,s.A)("IonImageryProvider.defaultDayAlpha","IonImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,s.A)("IonImageryProvider.defaultBrightness","IonImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,s.A)("IonImageryProvider.defaultBrightness","IonImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,s.A)("IonImageryProvider.defaultContrast","IonImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,s.A)("IonImageryProvider.defaultContrast","IonImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,s.A)("IonImageryProvider.defaultHue","IonImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,s.A)("IonImageryProvider.defaultHue","IonImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,s.A)("IonImageryProvider.defaultSaturation","IonImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,s.A)("IonImageryProvider.defaultSaturation","IonImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,s.A)("IonImageryProvider.defaultGamma","IonImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,s.A)("IonImageryProvider.defaultGamma","IonImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,s.A)("IonImageryProvider.defaultMinificationFilter","IonImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,s.A)("IonImageryProvider.defaultMinificationFilter","IonImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,s.A)("IonImageryProvider.defaultMagnificationFilter","IonImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,s.A)("IonImageryProvider.defaultMagnificationFilter","IonImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),T._initialize=function(e,t,n){const i=c.A._createEndpointResource(t,n),o=t.toString()+n.accessToken+n.server;let s=T._endpointCache[o];(0,r.A)(s)||(s=i.fetchJson(),T._endpointCache[o]=s),e._readyPromise=s.then((function(n){if("IMAGERY"!==n.type)return Promise.reject(new l.A(`Cesium ion asset ${t} is not an imagery asset.`));let o;const s=n.externalType;if((0,r.A)(s)){const e=b[s];if(!(0,r.A)(e))return Promise.reject(new l.A(`Unrecognized Cesium ion imagery type: ${s}`));o=e(n.options)}else o=new h.A({url:new c.A(n,i)});return e._tileCredits=c.A.getCreditsFromEndpoint(n,i),o.errorEvent.addEventListener((function(t){t.provider=e,e._errorEvent.raiseEvent(t)})),e._imageryProvider=o,Promise.resolve(o._readyPromise).then((function(){return e._ready=!0,!0}))}))},T.fromAssetId=async function(e,t){i.A.typeOf.number("assetId",e),t=(0,o.A)(t,o.A.EMPTY_OBJECT);const n=c.A._createEndpointResource(e,t),s=e.toString()+t.accessToken+t.server;let a=T._endpointCache[s];(0,r.A)(a)||(a=n.fetchJson(),T._endpointCache[s]=a);const u=await a;if("IMAGERY"!==u.type)throw new l.A(`Cesium ion asset ${e} is not an imagery asset.`);let d;const A=u.externalType;if((0,r.A)(A)){const e=v[A];if(!(0,r.A)(e))throw new l.A(`Unrecognized Cesium ion imagery type: ${A}`);const t={...u.options},n=t.url;delete t.url,d=await e(n,t)}else d=await h.A.fromUrl(new c.A(u,n));const f=new T(t);return d.errorEvent.addEventListener((function(e){e.provider=f,f._errorEvent.raiseEvent(e)})),f._tileCredits=c.A.getCreditsFromEndpoint(u,n),f._imageryProvider=d,f._ready=!0,f._readyPromise=Promise.resolve(!0),f},T.prototype.getTileCredits=function(e,t,n){const i=this._imageryProvider.getTileCredits(e,t,n);return(0,r.A)(i)?this._tileCredits.concat(i):this._tileCredits},T.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},T.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},T._endpointCache={};const w=T},231097:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4})},647474:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(230259),s=n(666203);function a(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function c(e){if((0,i.A)(e)&&e.length!==s.A.NUMBER_OF_JOB_TYPES)throw new o.A("A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES.");const t=new Array(s.A.NUMBER_OF_JOB_TYPES);t[s.A.TEXTURE]=new a((0,i.A)(e)?e[s.A.TEXTURE]:10),t[s.A.PROGRAM]=new a((0,i.A)(e)?e[s.A.PROGRAM]:10),t[s.A.BUFFER]=new a((0,i.A)(e)?e[s.A.BUFFER]:30);const n=t.length;let r,c=0;for(r=0;r<n;++r)c+=t[r].total;const l=new Array(n);for(r=0;r<n;++r)l[r]=!1;this._totalBudget=c,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=l}Object.defineProperties(a.prototype,{total:{get:function(){return this._total}}}),c.getTimestamp=r.A,Object.defineProperties(c.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),c.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},c.prototype.resetBudgets=function(){const e=this._budgets,t=e.length;for(let n=0;n<t;++n){const t=e[n];t.starvedLastFrame=t.starvedThisFrame,t.starvedThisFrame=!1,t.usedThisFrame=0,t.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},c.prototype.execute=function(e,t){const n=this._budgets,i=n[t],o=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&o)return i.starvedThisFrame=!0,!1;let r;if(i.usedThisFrame+i.stolenFromMeThisFrame>=i.total){const e=n.length;let t;for(t=0;t<e&&(r=n[t],!(r.usedThisFrame+r.stolenFromMeThisFrame<r.total)||r.starvedLastFrame);++t);if(t===e&&o)return!1;o&&(i.starvedThisFrame=!0)}const s=c.getTimestamp();e.execute();const a=c.getTimestamp()-s;return this._totalUsedThisFrame+=a,r?r.stolenFromMeThisFrame+=a:i.usedThisFrame+=a,this._executedThisFrame[t]=!0,!0};const l=c},666203:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3})},784749:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(376758),r=n(491446),s=n(605971),a=n(965976);const c={};function l(e){i.A.typeOf.number.greaterThan("options.count",e.count,0),i.A.typeOf.object("options.properties",e.properties),this._count=e.count,this._properties=(0,o.A)(e.properties,!0)}l.prototype.hasProperty=function(e){return a.A.hasProperty(e,this._properties,c)},l.prototype.getPropertyIds=function(e){return a.A.getPropertyIds(this._properties,c,e)},l.prototype.getProperty=function(e,t){if(i.A.typeOf.number("index",e),i.A.typeOf.string("propertyId",t),e<0||e>=this._count)throw new s.A(`index must be in the range [0, ${this._count})`);const n=this._properties[t];if((0,r.A)(n))return(0,o.A)(n[e],!0)},l.prototype.setProperty=function(e,t,n){if(i.A.typeOf.number("index",e),i.A.typeOf.string("propertyId",t),e<0||e>=this._count)throw new s.A(`index must be in the range [0, ${this._count})`);let a=this._properties[t];(0,r.A)(a)||(a=new Array(this._count),this._properties[t]=a),a[e]=(0,o.A)(n,!0)};const u=l},301866:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i=Object.freeze({UNLOADED:0,RECEIVING:1,RECEIVED:2,LOADED:3,FAILED:4,UNAVAILABLE:5});function o(e,t){this.spatialNode=e,this.keyframe=t,this.state=i.UNLOADED,this.metadatas=[],this.megatextureIndex=-1,this.priority=-Number.MAX_VALUE,this.highPriorityFrameNumber=-1}o.priorityComparator=function(e,t){return e.priority-t.priority},o.searchComparator=function(e,t){return e.keyframe-t.keyframe},o.LoadState=i;const r=o},77879:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ROTATE:0,INFINITE_SCROLL:1})},847072:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(672743),o=n(419061),r=n(491446),s=n(786101),a=n(605971),c=n(744603),l=n(66458);const u=/\/$/,d=new i.A('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function h(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).mapId;if(!(0,r.A)(t))throw new a.A("options.mapId is required.");const n=e.accessToken;if(!(0,r.A)(n))throw new a.A("options.accessToken is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const s=c.A.createIfNeeded((0,o.A)(e.url,"https://{s}.tiles.mapbox.com/v4/"));this._mapId=t,this._accessToken=n;let h=(0,o.A)(e.format,"png");/\./.test(h)||(h=`.${h}`),this._format=h;let A,f=s.getUrlComponent();u.test(f)||(f+="/"),f+=`${t}/{z}/{x}/{y}${this._format}`,s.url=f,s.setQueryParameters({access_token:n}),(0,r.A)(e.credit)?(A=e.credit,"string"==typeof A&&(A=new i.A(A))):A=d,this._resource=s,this._imageryProvider=new l.A({url:s,credit:A,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle}),this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(h.prototype,{url:{get:function(){return this._imageryProvider.url}},ready:{get:function(){return(0,s.A)("MapboxImageryProvider.ready","MapboxImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._imageryProvider.ready}},readyPromise:{get:function(){return(0,s.A)("MapboxImageryProvider.readyPromise","MapboxImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._imageryProvider._readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},defaultAlpha:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultAlpha","MapboxImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,s.A)("MapboxImageryProvider.defaultAlpha","MapboxImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultNightAlpha","MapboxImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,s.A)("MapboxImageryProvider.defaultNightAlpha","MapboxImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultDayAlpha","MapboxImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,s.A)("MapboxImageryProvider.defaultDayAlpha","MapboxImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultBrightness","MapboxImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,s.A)("MapboxImageryProvider.defaultBrightness","MapboxImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultContrast","MapboxImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,s.A)("MapboxImageryProvider.defaultContrast","MapboxImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultHue","MapboxImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,s.A)("MapboxImageryProvider.defaultHue","MapboxImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultSaturation","MapboxImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,s.A)("MapboxImageryProvider.defaultSaturation","MapboxImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultGamma","MapboxImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,s.A)("MapboxImageryProvider.defaultGamma","MapboxImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultMinificationFilter","MapboxImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,s.A)("MapboxImageryProvider.defaultMinificationFilter","MapboxImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,s.A)("MapboxImageryProvider.defaultMagnificationFilter","MapboxImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,s.A)("MapboxImageryProvider.defaultMagnificationFilter","MapboxImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),h.prototype.getTileCredits=function(e,t,n){},h.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},h.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},h._defaultCredit=d;const A=h},551549:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(419061),o=n(491446),r=n(769534),s=n(301005),a=n(980509),c=n(291192),l=n(149800),u=n(64137),d=n(373785),h=n(207828),A=n(608191);function f(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT);const t=(0,i.A)(e.translucent,!0),n=(0,i.A)(e.closed,!1),r=(0,i.A)(e.materialSupport,f.MaterialSupport.TEXTURED);this.material=(0,o.A)(e.material)?e.material:A.A.fromType(A.A.ColorType),this.translucent=t,this._vertexShaderSource=(0,i.A)(e.vertexShaderSource,r.vertexShaderSource),this._fragmentShaderSource=(0,i.A)(e.fragmentShaderSource,r.fragmentShaderSource),this._renderState=h.A.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=r,this._vertexFormat=r.vertexFormat,this._flat=(0,i.A)(e.flat,!1),this._faceForward=(0,i.A)(e.faceForward,!n)}Object.defineProperties(f.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),f.prototype.getFragmentShaderSource=h.A.prototype.getFragmentShaderSource,f.prototype.isTranslucent=h.A.prototype.isTranslucent,f.prototype.getRenderState=h.A.prototype.getRenderState,f.MaterialSupport={BASIC:Object.freeze({vertexFormat:r.A.POSITION_AND_NORMAL,vertexShaderSource:l.A,fragmentShaderSource:c.A}),TEXTURED:Object.freeze({vertexFormat:r.A.POSITION_NORMAL_AND_ST,vertexShaderSource:d.A,fragmentShaderSource:u.A}),ALL:Object.freeze({vertexFormat:r.A.ALL,vertexShaderSource:a.A,fragmentShaderSource:s.A})};const p=f},866109:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(434067),o=n(267980),r=n(571804),s=n(430332),a=n(419061),c=n(491446),l=n(677354),u=n(605971),d=n(367817),h=n(568748),A=n(57775),f=n(276904),p=n(123245),m=n(654799),_=n(616e3),g=n(957233),y=n(78078),b=n(557448);function v(e,t,n,c,l){c===h.A.UNSIGNED_SHORT&&(c=h.A.FLOAT32);const u=e.floatingPointTexture;if(c===h.A.FLOAT32&&!u)throw new p.A("Floating point texture not supported");let v,w;c===h.A.FLOAT32||c===h.A.FLOAT64?v=A.A.FLOAT:c===h.A.UINT8&&(v=A.A.UNSIGNED_BYTE),1===n?w=e.webgl2?f.A.RED:f.A.LUMINANCE:2===n?w=e.webgl2?f.A.RG:f.A.LUMINANCE_ALPHA:3===n?w=f.A.RGB:4===n&&(w=f.A.RGBA),l=Math.min((0,a.A)(l,134217728),536870912);const E=s.A.maximumTextureSize,S=h.A.getSizeInBytes(c),C=Math.floor(l/(n*S)),x=Math.min(E,d.A.previousPowerOfTwo(Math.floor(Math.sqrt(C)))),I=Math.ceil(Math.sqrt(t.x)),P=Math.ceil(t.z/I),D=I*t.x,O=P*t.y,L=Math.floor(x/D),N=Math.floor(x/O);if(0===L||0===N)throw new p.A("Tileset is too large to fit into megatexture");this.channelCount=n,this.componentType=c,this.voxelCountPerTile=o.A.clone(t,new o.A),this.maximumTileCount=L*N,this.regionCountPerMegatexture=new i.A(L,N),this.voxelCountPerRegion=new i.A(D,O),this.sliceCountPerRegion=new i.A(I,P),this.voxelSizeUv=new i.A(1/x,1/x),this.sliceSizeUv=new i.A(t.x/x,t.y/x),this.regionSizeUv=new i.A(D/x,O/x),this.texture=new _.A({context:e,pixelFormat:w,pixelDatatype:v,flipY:!1,width:x,height:x,sampler:new m.A({wrapS:b.A.CLAMP_TO_EDGE,wrapT:b.A.CLAMP_TO_EDGE,minificationFilter:y.A.LINEAR,magnificationFilter:g.A.LINEAR})});const M=h.A.toComponentDatatype(c);this.tileVoxelDataTemp=r.A.createTypedArray(M,D*O*n),this.nodes=new Array(this.maximumTileCount);for(let e=0;e<this.maximumTileCount;e++)this.nodes[e]=new T(e);for(let e=0;e<this.maximumTileCount;e++){const t=this.nodes[e];t.previousNode=e>0?this.nodes[e-1]:void 0,t.nextNode=e<this.maximumTileCount-1?this.nodes[e+1]:void 0}this.occupiedList=void 0,this.emptyList=this.nodes[0],this.occupiedCount=0}function T(e){this.index=e,this.nextNode=void 0,this.previousNode=void 0}v.prototype.add=function(e){if(this.isFull())throw new u.A("Trying to add when there are no empty spots");const t=this.emptyList;this.emptyList=this.emptyList.nextNode,(0,c.A)(this.emptyList)&&(this.emptyList.previousNode=void 0),t.nextNode=this.occupiedList,(0,c.A)(t.nextNode)&&(t.nextNode.previousNode=t),this.occupiedList=t;const n=t.index;return this.writeDataToTexture(n,e),this.occupiedCount++,n},v.prototype.remove=function(e){if(e<0||e>=this.maximumTileCount)throw new u.A("Megatexture index out of bounds");const t=this.nodes[e];(0,c.A)(t.previousNode)&&(t.previousNode.nextNode=t.nextNode),(0,c.A)(t.nextNode)&&(t.nextNode.previousNode=t.previousNode),t.nextNode=this.emptyList,(0,c.A)(t.nextNode)&&(t.nextNode.previousNode=t),t.previousNode=void 0,this.emptyList=t,this.occupiedCount--},v.prototype.isFull=function(){return void 0===this.emptyList},v.getApproximateTextureMemoryByteLength=function(e,t,n,i){i===h.A.UNSIGNED_SHORT&&(i=h.A.FLOAT32);const o=h.A.getSizeInBytes(i),r=e*t.x*t.y*t.z,s=Math.ceil(Math.sqrt(t.z)),a=Math.ceil(t.z/s),c=s*t.x,l=a*t.y;let u=d.A.previousPowerOfTwo(Math.floor(Math.sqrt(r)));for(;!(Math.floor(u/c)*Math.floor(u/l)>=e);)u*=2;return u*u*n*o},v.prototype.writeDataToTexture=function(e,t){const n=t.constructor===Uint16Array?new Float32Array(t):t,i=this.voxelCountPerTile,o=this.sliceCountPerRegion,r=this.voxelCountPerRegion,s=this.channelCount,a=this.tileVoxelDataTemp;for(let e=0;e<i.z;e++){const t=e%o.x*i.x,c=Math.floor(e/o.x)*i.y;for(let o=0;o<i.y;o++)for(let l=0;l<i.x;l++){const u=e*i.y*i.x+o*i.x+l,d=(c+o)*r.x+(t+l);for(let e=0;e<s;e++)a[d*s+e]=n[u*s+e]}}const c=this.regionCountPerMegatexture,l={source:{arrayBufferView:a,width:r.x,height:r.y},xOffset:e%c.x*r.x,yOffset:Math.floor(e/c.x)*r.y};this.texture.copyFrom(l)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this.texture=this.texture&&this.texture.destroy(),(0,l.A)(this)};const w=v},32335:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(376758),r=n(419061),s=n(491446),a=n(343674);function c(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).id;i.A.typeOf.string("options.id",t);const n=(0,r.A)(e.properties,{}),a={};for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];(0,s.A)(t.semantic)&&(a[t.semantic]=t)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=a,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}c.fromJson=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).id,n=e.class;i.A.typeOf.string("options.id",t),i.A.typeOf.object("options.class",n);const o={};for(const t in n.properties)if(n.properties.hasOwnProperty(t)){const i=a.A.fromJson({id:t,property:n.properties[t],enums:e.enums});o[t]=i}return new c({id:t,name:n.name,description:n.description,properties:o,extras:n.extras,extensions:n.extensions})},Object.defineProperties(c.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),c.BATCH_TABLE_CLASS_NAME="_batchTable";const l=c},343674:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(434067),o=n(267980),r=n(626809),s=n(369031),a=n(376758),c=n(419061),l=n(491446),u=n(605971),d=n(463298),h=n(331185),A=n(584164),f=n(374607),p=n(568748);function m(e){const t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).id,n=e.type;s.A.typeOf.string("options.id",t),s.A.typeOf.string("options.type",n);const i=e.componentType,o=e.enumType,r=(0,l.A)(i)&&p.A.isIntegerType(i)&&(0,c.A)(e.normalized,!1);this._id=t,this._name=e.name,this._description=e.description,this._semantic=e.semantic,this._isLegacyExtension=e.isLegacyExtension,this._type=n,this._componentType=i,this._enumType=o,this._valueType=(0,l.A)(o)?o.valueType:i,this._isArray=(0,c.A)(e.isArray,!1),this._isVariableLengthArray=(0,c.A)(e.isVariableLengthArray,!1),this._arrayLength=e.arrayLength,this._min=(0,a.A)(e.min,!0),this._max=(0,a.A)(e.max,!0),this._normalized=r;let u=(0,a.A)(e.offset,!0),d=(0,a.A)(e.scale,!0);const h=(0,l.A)(u)||(0,l.A)(d),A=!0;(0,l.A)(u)||(u=this.expandConstant(0,A)),(0,l.A)(d)||(d=this.expandConstant(1,A)),this._offset=u,this._scale=d,this._hasValueTransform=h,this._noData=(0,a.A)(e.noData,!0),this._default=(0,a.A)(e.default,!0),this._required=(0,c.A)(e.required,!0),this._extras=(0,a.A)(e.extras,!0),this._extensions=(0,a.A)(e.extensions,!0)}function _(e,t){if(!Array.isArray(e))return e===t;if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!_(e[n],t[n]))return!1;return!0}function g(e,t){const n=e._type,s=e._componentType,a=e._enumType,c=e._normalized;return f.A.isVectorType(n)?function(e,t,n){return p.A.isVectorCompatible(n)?t!==f.A.VEC2||e instanceof i.A?t!==f.A.VEC3||e instanceof o.A?t!==f.A.VEC4||e instanceof r.A?void 0:`vector value ${e} must be a Cartesian4`:`vector value ${e} must be a Cartesian3`:`vector value ${e} must be a Cartesian2`:`componentType ${n} is incompatible with vector type ${t}`}(t,n,s):f.A.isMatrixType(n)?function(e,t,n){return p.A.isVectorCompatible(n)?t!==f.A.MAT2||e instanceof d.A?t!==f.A.MAT3||e instanceof h.A?t!==f.A.MAT4||e instanceof A.A?void 0:`matrix value ${e} must be a Matrix4`:`matrix value ${e} must be a Matrix3`:`matrix value ${e} must be a Matrix2`:`componentType ${n} is incompatible with matrix type ${t}`}(t,n,s):n===f.A.STRING?function(e){if("string"!=typeof e)return y(e,f.A.STRING)}(t):n===f.A.BOOLEAN?function(e){if("boolean"!=typeof e)return y(e,f.A.BOOLEAN)}(t):n===f.A.ENUM?function(e,t){const n=typeof e;if((0,l.A)(t))return"string"===n&&(0,l.A)(t.valuesByName[e])?void 0:`value ${e} is not a valid enum name for ${t.id}`}(t,a):function(e,t,n){const i=typeof e;switch(t){case p.A.INT8:case p.A.UINT8:case p.A.INT16:case p.A.UINT16:case p.A.INT32:case p.A.UINT32:case p.A.FLOAT32:case p.A.FLOAT64:return"number"!==i?y(e,t):isFinite(e)?v(e,t,n):T(e,t);case p.A.INT64:case p.A.UINT64:return"number"!==i&&"bigint"!==i?y(e,t):"number"!==i||isFinite(e)?v(e,t,n):T(e,t)}}(t,s,c)}function y(e,t){return`value ${e} does not match type ${t}`}function b(e,t,n){let i=`value ${e} is out of range for type ${t}`;return n&&(i+=" (normalized)"),i}function v(e,t,n){return n?e<(p.A.isUnsignedIntegerType(t)?0:-1)||e>1?b(e,t,n):void 0:e<p.A.getMinimum(t)||e>p.A.getMaximum(t)?b(e,t,n):void 0}function T(e,t){return`value ${e} of type ${t} must be finite`}function w(e,t,n){if(!Array.isArray(e))return n(e,t);for(let i=0;i<e.length;i++)e[i]=w(e[i],t,n);return e}m.fromJson=function(e){const t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).id,n=e.property;s.A.typeOf.string("options.id",t),s.A.typeOf.object("options.property",n),s.A.typeOf.string("options.property.type",n.type);const i=function(e){if("ARRAY"===e.type)return!0;const t=e.type;return t!==f.A.SCALAR&&!f.A.isMatrixType(t)&&!f.A.isVectorType(t)&&(!!(0,l.A)(p.A[t])||!((0,l.A)(e.noData)||(0,l.A)(e.scale)||(0,l.A)(e.offset)||(0,l.A)(e.required)||(0,l.A)(e.count)||(0,l.A)(e.array))&&(!(0,l.A)(e.optional)&&void 0))}(n),o=function(e,t){const n=e.type,i=e.componentType,o="ARRAY"===n;let r,s,a,c;if(o?(r=!0,s=e.componentCount,a=!(0,l.A)(s)):e.array?(r=!0,s=e.count,a=!(0,l.A)(e.count)):(r=!1,s=void 0,a=!1),(0,l.A)(e.enumType)&&(c=t[e.enumType]),n===f.A.ENUM)return{type:n,componentType:void 0,enumType:c,valueType:c.valueType,isArray:r,isVariableLengthArray:a,arrayLength:s};if(o&&i===f.A.ENUM)return{type:i,componentType:void 0,enumType:c,valueType:c.valueType,isArray:r,isVariableLengthArray:a,arrayLength:s};if(n===f.A.SCALAR||f.A.isMatrixType(n)||f.A.isVectorType(n))return{type:n,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:a,arrayLength:s};if(n===f.A.BOOLEAN||n===f.A.STRING)return{type:n,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:a,arrayLength:s};if(o&&(i===f.A.BOOLEAN||i===f.A.STRING))return{type:i,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:a,arrayLength:s};if((0,l.A)(i)&&(0,l.A)(p.A[i]))return{type:f.A.SCALAR,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:a,arrayLength:s};if((0,l.A)(p.A[n]))return{type:f.A.SCALAR,componentType:n,enumType:void 0,valueType:n,isArray:r,isVariableLengthArray:a,arrayLength:s};throw new u.A(`unknown metadata type {type: ${n}, componentType: ${i})`)}(n,e.enums);let r;return r=!!(0,l.A)(i)&&(i?!(0,l.A)(n.optional)||!n.optional:(0,c.A)(n.required,!1)),new m({id:t,type:o.type,componentType:o.componentType,enumType:o.enumType,isArray:o.isArray,isVariableLengthArray:o.isVariableLengthArray,arrayLength:o.arrayLength,normalized:n.normalized,min:n.min,max:n.max,offset:n.offset,scale:n.scale,noData:n.noData,default:n.default,required:r,name:n.name,description:n.description,semantic:n.semantic,extras:n.extras,extensions:n.extensions,isLegacyExtension:i})},Object.defineProperties(m.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},enumType:{get:function(){return this._enumType}},componentType:{get:function(){return this._componentType}},valueType:{get:function(){return this._valueType}},isArray:{get:function(){return this._isArray}},isVariableLengthArray:{get:function(){return this._isVariableLengthArray}},arrayLength:{get:function(){return this._arrayLength}},normalized:{get:function(){return this._normalized}},max:{get:function(){return this._max}},min:{get:function(){return this._min}},noData:{get:function(){return this._noData}},default:{get:function(){return this._default}},required:{get:function(){return this._required}},semantic:{get:function(){return this._semantic}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),m.prototype.normalize=function(e){return this._normalized?w(e,this._valueType,p.A.normalize):e},m.prototype.unnormalize=function(e){return this._normalized?w(e,this._valueType,p.A.unnormalize):e},m.prototype.applyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:m.valueTransformInPlace(e,this._offset,this._scale,p.A.applyValueTransform)},m.prototype.unapplyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:m.valueTransformInPlace(e,this._offset,this._scale,p.A.unapplyValueTransform)},m.prototype.expandConstant=function(e,t){t=(0,c.A)(t,!1);const n=this._isArray,i=this._arrayLength,o=f.A.getComponentCount(this._type),r=n&&o>1;if(!n&&1===o)return e;if(!n)return new Array(o).fill(e);if(!r)return new Array(i).fill(e);if(!t)return new Array(this._arrayLength*o).fill(e);const s=new Array(o).fill(e);return new Array(this._arrayLength).fill(s)},m.prototype.handleNoData=function(e){const t=this._noData;return(0,l.A)(t)&&_(e,t)?void 0:e},m.prototype.unpackVectorAndMatrixTypes=function(e,t){t=(0,c.A)(t,!1);const n=f.A.getMathType(this._type),i=this._isArray,o=f.A.getComponentCount(this._type),r=i&&o>1;return(0,l.A)(n)?t&&r?e.map((function(e){return n.unpack(e)})):i?n.unpackArray(e):n.unpack(e):e},m.prototype.packVectorAndMatrixTypes=function(e,t){t=(0,c.A)(t,!1);const n=f.A.getMathType(this._type),i=this._isArray,o=f.A.getComponentCount(this._type),r=i&&o>1;return(0,l.A)(n)?t&&r?e.map((function(e){return n.pack(e,[])})):i?n.packArray(e,[]):n.pack(e,[]):e},m.prototype.validate=function(e){if((0,l.A)(e)||!(0,l.A)(this._default))return this._required&&!(0,l.A)(e)?"required property must have a value":this._isArray?function(e,t){if(!Array.isArray(t))return`value ${t} must be an array`;const n=t.length;if(!e._isVariableLengthArray&&n!==e._arrayLength)return"Array length does not match property.arrayLength";for(let i=0;i<n;i++){const n=g(e,t[i]);if((0,l.A)(n))return n}}(this,e):g(this,e)},m.valueTransformInPlace=function(e,t,n,i){if(!Array.isArray(e))return i(e,t,n);for(let o=0;o<e.length;o++)e[o]=m.valueTransformInPlace(e[o],t[o],n[o],i);return e};const E=m},568748:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(367817),o=n(369031),r=n(571804),s=n(605971),a=n(520098);const c={INT8:"INT8",UINT8:"UINT8",INT16:"INT16",UINT16:"UINT16",INT32:"INT32",UINT32:"UINT32",INT64:"INT64",UINT64:"UINT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64",getMinimum:function(e){switch(o.A.typeOf.string("type",e),e){case c.INT8:return-128;case c.UINT8:return 0;case c.INT16:return-32768;case c.UINT16:return 0;case c.INT32:return-2147483648;case c.UINT32:return 0;case c.INT64:return a.A.supportsBigInt()?BigInt("-9223372036854775808"):-Math.pow(2,63);case c.UINT64:return a.A.supportsBigInt()?BigInt(0):0;case c.FLOAT32:return-34028234663852886e22;case c.FLOAT64:return-Number.MAX_VALUE}},getMaximum:function(e){switch(o.A.typeOf.string("type",e),e){case c.INT8:return 127;case c.UINT8:return 255;case c.INT16:return 32767;case c.UINT16:return 65535;case c.INT32:return 2147483647;case c.UINT32:return 4294967295;case c.INT64:return a.A.supportsBigInt()?BigInt("9223372036854775807"):Math.pow(2,63)-1;case c.UINT64:return a.A.supportsBigInt()?BigInt("18446744073709551615"):Math.pow(2,64)-1;case c.FLOAT32:return 34028234663852886e22;case c.FLOAT64:return Number.MAX_VALUE}},isIntegerType:function(e){switch(o.A.typeOf.string("type",e),e){case c.INT8:case c.UINT8:case c.INT16:case c.UINT16:case c.INT32:case c.UINT32:case c.INT64:case c.UINT64:return!0;default:return!1}},isUnsignedIntegerType:function(e){switch(o.A.typeOf.string("type",e),e){case c.UINT8:case c.UINT16:case c.UINT32:case c.UINT64:return!0;default:return!1}},isVectorCompatible:function(e){switch(o.A.typeOf.string("type",e),e){case c.INT8:case c.UINT8:case c.INT16:case c.UINT16:case c.INT32:case c.UINT32:case c.FLOAT32:case c.FLOAT64:return!0;default:return!1}},normalize:function(e,t){if("number"!=typeof e&&"bigint"!=typeof e)throw new s.A("value must be a number or a BigInt");if(!c.isIntegerType(t))throw new s.A("type must be an integer type");return Math.max(Number(e)/Number(c.getMaximum(t)),-1)},unnormalize:function(e,t){if(o.A.typeOf.number("value",e),!c.isIntegerType(t))throw new s.A("type must be an integer type");const n=c.getMaximum(t),r=c.isUnsignedIntegerType(t)?0:-n;return e=i.A.sign(e)*Math.round(Math.abs(e)*Number(n)),t!==c.INT64&&t!==c.UINT64||!a.A.supportsBigInt()||(e=BigInt(e)),e>n?n:e<r?r:e},applyValueTransform:function(e,t,n){return n*e+t},unapplyValueTransform:function(e,t,n){return 0===n?0:(e-t)/n},getSizeInBytes:function(e){switch(o.A.typeOf.string("type",e),e){case c.INT8:case c.UINT8:return 1;case c.INT16:case c.UINT16:return 2;case c.INT32:case c.UINT32:return 4;case c.INT64:case c.UINT64:return 8;case c.FLOAT32:return 4;case c.FLOAT64:return 8}},fromComponentDatatype:function(e){switch(o.A.typeOf.number("componentDatatype",e),e){case r.A.BYTE:return c.INT8;case r.A.UNSIGNED_BYTE:return c.UINT8;case r.A.SHORT:return c.INT16;case r.A.UNSIGNED_SHORT:return c.UINT16;case r.A.INT:return c.INT32;case r.A.UNSIGNED_INT:return c.UINT32;case r.A.FLOAT:return c.FLOAT32;case r.A.DOUBLE:return c.FLOAT64}},toComponentDatatype:function(e){switch(o.A.typeOf.string("type",e),e){case c.INT8:return r.A.BYTE;case c.UINT8:return r.A.UNSIGNED_BYTE;case c.INT16:return r.A.SHORT;case c.UINT16:return r.A.UNSIGNED_SHORT;case c.INT32:return r.A.INT;case c.UINT32:return r.A.UNSIGNED_INT;case c.FLOAT32:return r.A.FLOAT;case c.FLOAT64:return r.A.DOUBLE}}},l=Object.freeze(c)},965976:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(376758),r=n(491446),s=n(605971);function a(){}Object.defineProperties(a.prototype,{class:{get:function(){s.A.throwInstantiationError()}}}),a.prototype.hasProperty=function(e){s.A.throwInstantiationError()},a.prototype.hasPropertyBySemantic=function(e){s.A.throwInstantiationError()},a.prototype.getPropertyIds=function(e){s.A.throwInstantiationError()},a.prototype.getProperty=function(e){s.A.throwInstantiationError()},a.prototype.setProperty=function(e,t){s.A.throwInstantiationError()},a.prototype.getPropertyBySemantic=function(e){s.A.throwInstantiationError()},a.prototype.setPropertyBySemantic=function(e,t){s.A.throwInstantiationError()},a.hasProperty=function(e,t,n){if(i.A.typeOf.string("propertyId",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n),(0,r.A)(t[e]))return!0;const o=n.properties;if(!(0,r.A)(o))return!1;const s=o[e];return!(!(0,r.A)(s)||!(0,r.A)(s.default))},a.hasPropertyBySemantic=function(e,t,n){i.A.typeOf.string("semantic",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!(0,r.A)(o))return!1;const s=o[e];return(0,r.A)(s)},a.getPropertyIds=function(e,t,n){i.A.typeOf.object("properties",e),i.A.typeOf.object("classDefinition",t),(n=(0,r.A)(n)?n:[]).length=0;for(const t in e)e.hasOwnProperty(t)&&(0,r.A)(e[t])&&n.push(t);const o=t.properties;if((0,r.A)(o))for(const t in o)o.hasOwnProperty(t)&&!(0,r.A)(e[t])&&(0,r.A)(o[t].default)&&n.push(t);return n},a.getProperty=function(e,t,n){if(i.A.typeOf.string("propertyId",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n),!(0,r.A)(n.properties[e]))throw new s.A(`Class definition missing property ${e}`);const a=n.properties[e];let c=t[e];Array.isArray(c)&&(c=c.slice());const l=!0;return c=a.handleNoData(c),!(0,r.A)(c)&&(0,r.A)(a.default)?(c=(0,o.A)(a.default,!0),a.unpackVectorAndMatrixTypes(c,l)):(0,r.A)(c)?(c=a.normalize(c),c=a.applyValueTransform(c),a.unpackVectorAndMatrixTypes(c,l)):void 0},a.setProperty=function(e,t,n,o){if(i.A.typeOf.string("propertyId",e),i.A.defined("value",t),i.A.typeOf.object("properties",n),i.A.typeOf.object("classDefinition",o),!(0,r.A)(n[e]))return!1;let s;Array.isArray(t)&&(t=t.slice());const a=o.properties;return(0,r.A)(a)&&(s=a[e]),(0,r.A)(s)&&(t=s.packVectorAndMatrixTypes(t,!0),t=s.unapplyValueTransform(t),t=s.unnormalize(t)),n[e]=t,!0},a.getPropertyBySemantic=function(e,t,n){i.A.typeOf.string("semantic",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!(0,r.A)(o))return;const s=o[e];return(0,r.A)(s)?a.getProperty(s.id,t,n):void 0},a.setPropertyBySemantic=function(e,t,n,o){i.A.typeOf.string("semantic",e),i.A.defined("value",t),i.A.typeOf.object("properties",n),i.A.typeOf.object("classDefinition",o);const s=o.propertiesBySemantic;if(!(0,r.A)(s))return!1;const c=o.propertiesBySemantic[e];return!!(0,r.A)(c)&&a.setProperty(c.id,t,n,o)};const c=a},266262:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(376758),r=n(419061),s=n(901717),a=n(568748);function c(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).id,n=e.values;i.A.typeOf.string("options.id",t),i.A.defined("options.values",n);const s={},c={},l=n.length;for(let e=0;e<l;++e){const t=n[e];s[t.value]=t.name,c[t.name]=t.value}const u=(0,r.A)(e.valueType,a.A.UINT16);this._values=n,this._namesByValue=s,this._valuesByName=c,this._valueType=u,this._id=t,this._name=e.name,this._description=e.description,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}c.fromJson=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).id,n=e.enum;return i.A.typeOf.string("options.id",t),i.A.typeOf.object("options.enum",n),new c({id:t,values:n.values.map((function(e){return s.A.fromJson(e)})),valueType:a.A[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})},Object.defineProperties(c.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const l=c},901717:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(376758),r=n(419061);function s(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).value,n=e.name;i.A.typeOf.number("options.value",t),i.A.typeOf.string("options.name",n),this._value=t,this._name=n,this._description=e.description,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}s.fromJson=function(e){return i.A.typeOf.object("value",e),new s({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})},Object.defineProperties(s.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const a=s},4024:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(376758),r=n(419061),s=n(491446),a=n(32335),c=n(266262);function l(e){e=(0,r.A)(e,r.A.EMPTY_OBJECT);const t=(0,r.A)(e.classes,{}),n=(0,r.A)(e.enums,{});this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}l.fromJson=function(e){i.A.typeOf.object("schema",e);const t={};if((0,s.A)(e.enums))for(const n in e.enums)e.enums.hasOwnProperty(n)&&(t[n]=c.A.fromJson({id:n,enum:e.enums[n]}));const n={};if((0,s.A)(e.classes))for(const i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=a.A.fromJson({id:i,class:e.classes[i],enums:t}));return new l({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})},Object.defineProperties(l.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const u=l},729295:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(419061),o=n(491446),r=n(605971),s=n(4024),a=n(569445),c=n(48660);function l(e){const t=(e=(0,i.A)(e,i.A.EMPTY_OBJECT)).schema,n=e.resource,a=e.cacheKey;if((0,o.A)(t)===(0,o.A)(n))throw new r.A("One of options.schema and options.resource must be defined.");this._schema=(0,o.A)(t)?s.A.fromJson(t):void 0,this._resource=n,this._cacheKey=a,this._state=c.A.UNLOADED,this._promise=void 0}(0,o.A)(Object.create)&&(l.prototype=Object.create(a.A.prototype),l.prototype.constructor=l),Object.defineProperties(l.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}}),l.prototype.load=async function(){return(0,o.A)(this._promise)?this._promise:(0,o.A)(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=async function(e){const t=e._resource;e._state=c.A.LOADING;try{const n=await t.fetchJson();if(e.isDestroyed())return;return e._schema=s.A.fromJson(n),e._state=c.A.READY,e}catch(n){if(e.isDestroyed())return;e._state=c.A.FAILED;const i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}(this),this._promise)},l.prototype.unload=function(){this._schema=void 0};const u=l},165955:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ID:"ID",NAME:"NAME",DESCRIPTION:"DESCRIPTION",TILESET_TILE_COUNT:"TILESET_TILE_COUNT",TILE_BOUNDING_BOX:"TILE_BOUNDING_BOX",TILE_BOUNDING_REGION:"TILE_BOUNDING_REGION",TILE_BOUNDING_SPHERE:"TILE_BOUNDING_SPHERE",TILE_MINIMUM_HEIGHT:"TILE_MINIMUM_HEIGHT",TILE_MAXIMUM_HEIGHT:"TILE_MAXIMUM_HEIGHT",TILE_HORIZON_OCCLUSION_POINT:"TILE_HORIZON_OCCLUSION_POINT",TILE_GEOMETRIC_ERROR:"TILE_GEOMETRIC_ERROR",CONTENT_BOUNDING_BOX:"CONTENT_BOUNDING_BOX",CONTENT_BOUNDING_REGION:"CONTENT_BOUNDING_REGION",CONTENT_BOUNDING_SPHERE:"CONTENT_BOUNDING_SPHERE",CONTENT_MINIMUM_HEIGHT:"CONTENT_MINIMUM_HEIGHT",CONTENT_MAXIMUM_HEIGHT:"CONTENT_MAXIMUM_HEIGHT",CONTENT_HORIZON_OCCLUSION_POINT:"CONTENT_HORIZON_OCCLUSION_POINT"})},874403:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(376758),r=n(419061),s=n(491446),a=n(965976),c=n(140182);function l(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).count,n=e.class;i.A.typeOf.number.greaterThan("options.count",t,0),i.A.typeOf.object("options.class",n);let o=0;const a={};if((0,s.A)(e.properties))for(const i in e.properties)if(e.properties.hasOwnProperty(i)){const r=new c.A({count:t,property:e.properties[i],classProperty:n.properties[i],bufferViews:e.bufferViews});a[i]=r,o+=r.byteLength}this._count=t,this._class=n,this._properties=a,this._byteLength=o}Object.defineProperties(l.prototype,{count:{get:function(){return this._count}},class:{get:function(){return this._class}},byteLength:{get:function(){return this._byteLength}}}),l.prototype.hasProperty=function(e){return a.A.hasProperty(e,this._properties,this._class)},l.prototype.hasPropertyBySemantic=function(e){return a.A.hasPropertyBySemantic(e,this._properties,this._class)},l.prototype.getPropertyIds=function(e){return a.A.getPropertyIds(this._properties,this._class,e)},l.prototype.getProperty=function(e,t){i.A.typeOf.string("propertyId",t);const n=this._properties[t];let r;return r=(0,s.A)(n)?n.get(e):function(e,t){const n=e.properties;if(!(0,s.A)(n))return;const i=n[t];if((0,s.A)(i)&&(0,s.A)(i.default)){let e=i.default;return i.isArray&&(e=(0,o.A)(e,!0)),e=i.normalize(e),i.unpackVectorAndMatrixTypes(e)}}(this._class,t),r},l.prototype.setProperty=function(e,t,n){i.A.typeOf.string("propertyId",t);const o=this._properties[t];return!!(0,s.A)(o)&&(o.set(e,n),!0)},l.prototype.getPropertyBySemantic=function(e,t){let n;i.A.typeOf.string("semantic",t);const o=this._class.propertiesBySemantic;if((0,s.A)(o)&&(n=o[t]),(0,s.A)(n))return this.getProperty(e,n.id)},l.prototype.setPropertyBySemantic=function(e,t,n){let o;i.A.typeOf.string("semantic",t);const r=this._class.propertiesBySemantic;return(0,s.A)(r)&&(o=r[t]),!!(0,s.A)(o)&&this.setProperty(e,o.id,n)},l.prototype.getPropertyTypedArray=function(e){i.A.typeOf.string("propertyId",e);const t=this._properties[e];if((0,s.A)(t))return t.getTypedArray()},l.prototype.getPropertyTypedArrayBySemantic=function(e){let t;i.A.typeOf.string("semantic",e);const n=this._class.propertiesBySemantic;if((0,s.A)(n)&&(t=n[e]),(0,s.A)(t))return this.getPropertyTypedArray(t.id)};const u=l},140182:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(369031),o=n(376758),r=n(571804),s=n(419061),a=n(491446),c=n(605971),l=n(520098),u=n(241839),d=n(983884),h=n(568748),A=n(343674),f=n(374607);function p(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).count,n=e.property,o=e.classProperty,r=e.bufferViews;i.A.typeOf.number.greaterThan("options.count",t,0),i.A.typeOf.object("options.property",n),i.A.typeOf.object("options.classProperty",o),i.A.typeOf.object("options.bufferViews",r);const c=o.type,l=o.isArray,d=o.isVariableLengthArray;let A=o.valueType;const p=o.enumType,_=c===f.A.STRING,g=c===f.A.BOOLEAN;let y,b=0;if(d){let e=(0,s.A)(n.arrayOffsetType,n.offsetType);e=(0,s.A)(h.A[e],h.A.UINT32),y=new v(r[(0,s.A)(n.arrayOffsets,n.arrayOffsetBufferView)],e,t+1),b+=y.typedArray.byteLength}const T=f.A.getComponentCount(c);let w;w=d?y.get(t)-y.get(0):l?t*o.arrayLength:t;const E=T*w;let S,C;if(_){let e=(0,s.A)(n.stringOffsetType,n.offsetType);e=(0,s.A)(h.A[e],h.A.UINT32),S=new v(r[(0,s.A)(n.stringOffsets,n.stringOffsetBufferView)],e,E+1),b+=S.typedArray.byteLength}(_||g)&&(A=h.A.UINT8),C=_?S.get(E)-S.get(0):g?Math.ceil(E/8):E;const x=new v(r[(0,s.A)(n.values,n.bufferView)],A,C);b+=x.typedArray.byteLength;let I=n.offset,P=n.scale;const D=o.hasValueTransform||(0,a.A)(I)||(0,a.A)(P);let O,L;I=(0,s.A)(I,o.offset),P=(0,s.A)(P,o.scale),I=m(I),P=m(P);const N=this;_?O=function(e){return function(e,t,n){const i=n.get(e),o=n.get(e+1)-i;return(0,u.A)(t.typedArray,i,o)}(e,N._values,N._stringOffsets)}:g?(O=function(e){return function(e,t){const n=e>>3,i=e%8;return 1==(t.typedArray[n]>>i&1)}(e,N._values)},L=function(e,t){!function(e,t,n){const i=e>>3,o=e%8;n?t.typedArray[i]|=1<<o:t.typedArray[i]&=~(1<<o)}(e,N._values,t)}):(0,a.A)(p)?(O=function(e){const t=N._values.get(e);return p.namesByValue[t]},L=function(e,t){const n=p.valuesByName[t];N._values.set(e,n)}):(O=function(e){return N._values.get(e)},L=function(e,t){N._values.set(e,t)}),this._arrayOffsets=y,this._stringOffsets=S,this._values=x,this._classProperty=o,this._count=t,this._vectorComponentCount=T,this._min=n.min,this._max=n.max,this._offset=I,this._scale=P,this._hasValueTransform=D,this._getValue=O,this._setValue=L,this._unpackedValues=void 0,this._extras=n.extras,this._extensions=n.extensions,this._byteLength=b}function m(e){if(!Array.isArray(e))return e;const t=[];for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}function _(e,t){const n=e._count;if(!(0,a.A)(t)||t<0||t>=n){const e=n-1;throw new c.A(`index is required and between zero and count - 1. Actual value: ${e}`)}}function g(e,t,n){let i,o;if(t.isVariableLengthArray){i=e._arrayOffsets.get(n),o=e._arrayOffsets.get(n+1)-i;const r=f.A.getComponentCount(t.type);i*=r,o*=r}else{const r=(0,s.A)(t.arrayLength,1)*e._vectorComponentCount;i=n*r,o=r}const r=new Array(o);for(let t=0;t<o;t++)r[t]=e._getValue(i+t);return r}function y(e){if((0,a.A)(e._unpackedValues))return!1;const t=e._classProperty,n=t.type,i=t.valueType;return n===f.A.STRING||i===h.A.INT64&&!l.A.supportsBigInt64Array()||i===h.A.UINT64&&!l.A.supportsBigUint64Array()}function b(e){e._unpackedValues=function(e){const t=e._count,n=new Array(t),i=e._classProperty,o=i.isArray,r=i.type,s=f.A.getComponentCount(r);if(!o&&1===s){for(let i=0;i<t;++i)n[i]=e._getValue(i);return n}for(let o=0;o<t;o++)n[o]=g(e,i,o);return n}(e),e._arrayOffsets=void 0,e._stringOffsets=void 0,e._values=void 0}function v(e,t,n){const i=this;let o,s,c;if(t===h.A.INT64)l.A.supportsBigInt()?l.A.supportsBigInt64Array()?(o=new BigInt64Array(e.buffer,e.byteOffset,n),c=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e;let o=BigInt(0);const r=(128&n.getUint8(i+7))>0;let s=!0;for(let e=0;e<8;++e){let t=n.getUint8(i+e);r&&(s?0!==t&&(t=255&~(t-1),s=!1):t=255&~t),o+=BigInt(t)*(BigInt(1)<<BigInt(8*e))}return r&&(o=-o),o}(e,i)}):((0,d.A)("INT64 type is not fully supported on this platform. Values greater than 2^53 - 1 or less than -(2^53 - 1) may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e;let o=0;const r=(128&n.getUint8(i+7))>0;let s=!0;for(let e=0;e<8;++e){let t=n.getUint8(i+e);r&&(s?0!==t&&(t=255&~(t-1),s=!1):t=255&~t),o+=t*Math.pow(256,e)}return r&&(o=-o),o}(e,i)});else if(t===h.A.UINT64)l.A.supportsBigInt()?l.A.supportsBigUint64Array()?(o=new BigUint64Array(e.buffer,e.byteOffset,n),c=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e,o=BigInt(n.getUint32(i,!0)),r=BigInt(n.getUint32(i+4,!0));return o+BigInt(4294967296)*r}(e,i)}):((0,d.A)("UINT64 type is not fully supported on this platform. Values greater than 2^53 - 1 may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),s=function(e){return function(e,t){const n=t.dataView,i=8*e;return n.getUint32(i,!0)+4294967296*n.getUint32(i+4,!0)}(e,i)});else{const s=function(e){switch(e){case h.A.INT8:return r.A.BYTE;case h.A.UINT8:return r.A.UNSIGNED_BYTE;case h.A.INT16:return r.A.SHORT;case h.A.UINT16:return r.A.UNSIGNED_SHORT;case h.A.INT32:return r.A.INT;case h.A.UINT32:return r.A.UNSIGNED_INT;case h.A.FLOAT32:return r.A.FLOAT;case h.A.FLOAT64:return r.A.DOUBLE}}(t);o=r.A.createArrayBufferView(s,e.buffer,e.byteOffset,n),c=function(e,t){i.typedArray[e]=t}}(0,a.A)(s)||(s=function(e){return i.typedArray[e]}),this.typedArray=o,this.dataView=new DataView(o.buffer,o.byteOffset),this.get=s,this.set=c,this._componentType=t}Object.defineProperties(p.prototype,{hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){return this._byteLength}}}),p.prototype.get=function(e){_(this,e);let t=function(e,t){y(e)&&b(e);const n=e._classProperty,i=n.isArray,r=n.type,s=f.A.getComponentCount(r);if((0,a.A)(e._unpackedValues)){const n=e._unpackedValues[t];return i?(0,o.A)(n,!0):n}return i||1!==s?g(e,n,t):e._getValue(t)}(this,e);return t=this._classProperty.handleNoData(t),(0,a.A)(t)?(t=this._classProperty.normalize(t),t=function(e,t){const n=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||n?t:A.A.valueTransformInPlace(t,e._offset,e._scale,h.A.applyValueTransform)}(this,t),this._classProperty.unpackVectorAndMatrixTypes(t)):(t=this._classProperty.default,this._classProperty.unpackVectorAndMatrixTypes(t))},p.prototype.set=function(e,t){const n=this._classProperty;i.A.defined("value",t),_(this,e);const r=n.validate(t);if((0,a.A)(r))throw new c.A(r);t=function(e,t){const n=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||n?t:A.A.valueTransformInPlace(t,e._offset,e._scale,h.A.unapplyValueTransform)}(this,t=n.packVectorAndMatrixTypes(t)),function(e,t,n){(function(e,t,n){if(y(e))return!0;const i=e._arrayOffsets;return!(!(0,a.A)(i)||i.get(t+1)-i.get(t)===n.length)})(e,t,n)&&b(e);const i=e._classProperty,r=i.isArray,c=i.type,l=f.A.getComponentCount(c);if((0,a.A)(e._unpackedValues))return i.isArray&&(n=(0,o.A)(n,!0)),void(e._unpackedValues[t]=n);if(!r&&1===l)return void e._setValue(t,n);let u,d;if(i.isVariableLengthArray)u=e._arrayOffsets.get(t),d=e._arrayOffsets.get(t+1)-u;else{const n=(0,s.A)(i.arrayLength,1)*e._vectorComponentCount;u=t*n,d=n}for(let t=0;t<d;++t)e._setValue(u+t,n[t])}(this,e,t=n.unnormalize(t))},p.prototype.getTypedArray=function(){if((0,a.A)(this._values))return this._values.typedArray};const T=p},374607:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(369031),o=n(434067),r=n(267980),s=n(626809),a=n(605971),c=n(463298),l=n(331185),u=n(584164);const d={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",BOOLEAN:"BOOLEAN",STRING:"STRING",ENUM:"ENUM",isVectorType:function(e){switch(i.A.typeOf.string("type",e),e){case d.VEC2:case d.VEC3:case d.VEC4:return!0;default:return!1}},isMatrixType:function(e){switch(i.A.typeOf.string("type",e),e){case d.MAT2:case d.MAT3:case d.MAT4:return!0;default:return!1}},getComponentCount:function(e){switch(i.A.typeOf.string("type",e),e){case d.SCALAR:case d.STRING:case d.ENUM:case d.BOOLEAN:return 1;case d.VEC2:return 2;case d.VEC3:return 3;case d.VEC4:case d.MAT2:return 4;case d.MAT3:return 9;case d.MAT4:return 16;default:throw new a.A(`Invalid metadata type ${e}`)}},getMathType:function(e){switch(e){case d.VEC2:return o.A;case d.VEC3:return r.A;case d.VEC4:return s.A;case d.MAT2:return c.A;case d.MAT3:return l.A;case d.MAT4:return u.A;default:return}}},h=Object.freeze(d)},19120:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(419061),o=n(491446),r=n(624512),s=n(200646),a=n(760866);const c={name:"AlphaPipelineStage",process:function(e,t,n){const c=e.alphaOptions,l=e.model;c.pass=(0,i.A)(c.pass,l.opaquePass);const u=e.renderStateOptions;c.pass===a.A.TRANSLUCENT&&(u.cull.enabled=!1,u.depthMask=!1,u.blending=s.A.ALPHA_BLEND);const d=e.shaderBuilder,h=e.uniformMap;(0,o.A)(c.alphaCutoff)&&(d.addDefine("ALPHA_MODE_MASK",void 0,r.A.FRAGMENT),d.addUniform("float","u_alphaCutoff",r.A.FRAGMENT),h.u_alphaCutoff=function(){return c.alphaCutoff})}}},802227:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(320475),o=n(511517),r=n(267980),s=n(468741),a=n(369031),c=n(571804),l=n(419061),u=n(491446),d=n(590732),h=n(982504),A=n(584164),f=n(32335),p=n(995537),m=n(471147),_=n(115959),g=n(287659),y=n(569445),b=n(595826);const v=p.A.FeatureIdAttribute;function T(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).b3dmResource;let n=e.baseResource;const o=e.arrayBuffer,r=(0,l.A)(e.byteOffset,0),s=(0,l.A)(e.releaseGltfJson,!1),c=(0,l.A)(e.asynchronous,!0),d=(0,l.A)(e.incrementallyLoadTextures,!0),h=(0,l.A)(e.upAxis,i.A.Y),f=(0,l.A)(e.forwardAxis,i.A.X),p=(0,l.A)(e.loadAttributesAsTypedArray,!1),m=(0,l.A)(e.loadAttributesFor2D,!1),_=(0,l.A)(e.loadIndicesForWireframe,!1),g=(0,l.A)(e.loadPrimitiveOutline,!0),y=(0,l.A)(e.loadForClassification,!1);a.A.typeOf.object("options.b3dmResource",t),a.A.typeOf.object("options.arrayBuffer",o),n=(0,u.A)(n)?n:t.clone(),this._b3dmResource=t,this._baseResource=n,this._arrayBuffer=o,this._byteOffset=r,this._releaseGltfJson=s,this._asynchronous=c,this._incrementallyLoadTextures=d,this._upAxis=h,this._forwardAxis=f,this._loadAttributesAsTypedArray=p,this._loadAttributesFor2D=m,this._loadIndicesForWireframe=_,this._loadPrimitiveOutline=g,this._loadForClassification=y,this._state=0,this._promise=void 0,this._gltfLoader=void 0,this._batchLength=0,this._propertyTable=void 0,this._batchTable=void 0,this._components=void 0,this._transform=A.A.IDENTITY}function w(e){const t=e.children.length;for(let n=0;n<t;n++)w(e.children[n]);const n=e.primitives.length;for(let t=0;t<n;t++){const n=e.primitives[t],i=m.A.getAttributeBySemantic(n,b.A.FEATURE_ID);if((0,u.A)(i)){i.setIndex=0;const e=new v;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",n.featureIds.push(e)}}}(0,u.A)(Object.create)&&(T.prototype=Object.create(y.A.prototype),T.prototype.constructor=T),Object.defineProperties(T.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),T.prototype.load=function(){if((0,u.A)(this._promise))return this._promise;const e=o.A.parse(this._arrayBuffer,this._byteOffset);let t=e.batchLength;const n=e.featureTableJson,i=e.featureTableBinary,a=e.batchTableJson,l=e.batchTableBinary,d=new s.A(n,i);t=d.getGlobalProperty("BATCH_LENGTH"),this._batchLength=t;const f=d.getGlobalProperty("RTC_CENTER",c.A.FLOAT,3);(0,u.A)(f)&&(this._transform=A.A.fromTranslation(r.A.fromArray(f))),this._batchTable={json:a,binary:l};const p=new h.A({typedArray:e.gltf,upAxis:this._upAxis,forwardAxis:this._forwardAxis,gltfResource:this._b3dmResource,baseResource:this._baseResource,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadAttributesFor2D:this._loadAttributesFor2D,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline,loadForClassification:this._loadForClassification,renameBatchIdSemantic:!0});this._gltfLoader=p,this._state=1;const m=this;return this._promise=p.load().then((function(){if(!m.isDestroyed())return m._state=2,m})).catch((function(e){if(!m.isDestroyed())return function(e,t){e.unload(),e._state=4;return t=e.getError("Failed to load b3dm",t),Promise.reject(t)}(m,e)})),this._promise},T.prototype.process=function(e){if(a.A.typeOf.object("frameState",e),3===this._state)return!0;if(2!==this._state)return!1;if(!this._gltfLoader.process(e))return!1;const t=this._gltfLoader.components;return t.transform=A.A.multiplyTransformation(this._transform,t.transform,t.transform),function(e,t){const n=e._batchTable,i=e._batchLength;if(0===i)return;let o;if((0,u.A)(n.json))o=(0,_.A)({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new g.A({name:f.A.BATCH_TABLE_CLASS_NAME,count:i});o=new d.A({schema:{},propertyTables:[e]})}const r=t.scene.nodes,s=r.length;for(let e=0;e<s;e++)w(r[e]);t.structuralMetadata=o}(this,t),this._components=t,this._arrayBuffer=void 0,this._state=3,!0},T.prototype.unload=function(){(0,u.A)(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),this._components=void 0,this._arrayBuffer=void 0};const E=T},186919:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(430346),o=n(419061);const r={name:"BatchTexturePipelineStage",process:function(e,t,n){const r=e.shaderBuilder,s={},a=e.model,c=a.featureTables[a.featureTableId],l=c.featuresLength;r.addUniform("int","model_featuresLength"),s.model_featuresLength=function(){return l};const u=c.batchTexture;r.addUniform("sampler2D","model_batchTexture"),s.model_batchTexture=function(){return(0,o.A)(u.batchTexture,u.defaultTexture)},r.addUniform("vec4","model_textureStep"),s.model_textureStep=function(){return u.textureStep},u.textureDimensions.y>1&&(r.addDefine("MULTILINE_BATCH_TEXTURE"),r.addUniform("vec2","model_textureDimensions"),s.model_textureDimensions=function(){return u.textureDimensions}),e.uniformMap=(0,i.A)(s,e.uniformMap)}}},212642:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(428027),o=n(726401),r=n(759889),s=n(491446),a=n(542614),c=n(760866),l=n(624512);const u={name:"CPUStylingPipelineStage",process:function(e,t,n){const u=e.model,d=e.shaderBuilder;d.addVertexLines(o.A),d.addFragmentLines(r.A),d.addDefine("USE_CPU_STYLING",void 0,l.A.BOTH),(0,s.A)(u.color)||(d.addUniform("float",a.A.COLOR_BLEND_UNIFORM_NAME,l.A.FRAGMENT),e.uniformMap[a.A.COLOR_BLEND_UNIFORM_NAME]=function(){return i.A.getColorBlend(u.colorBlendMode,u.colorBlendAmount)}),d.addUniform("bool","model_commandTranslucent",l.A.BOTH),e.uniformMap.model_commandTranslucent=function(){return e.alphaOptions.pass===c.A.TRANSLUCENT}}}},899700:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(660662),o=n(369031),r=n(419061),s=n(584164),a=n(377496),c=n(760866),l=n(40118),u=n(200646),d=n(71578),h=n(523721),A=n(938987),f=n(896464),p=n(138151);function m(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).command,n=e.primitiveRenderResources;o.A.typeOf.object("options.command",t),o.A.typeOf.object("options.primitiveRenderResources",n);const i=n.model;this._command=t,this._model=i,this._runtimePrimitive=n.runtimePrimitive,this._modelMatrix=t.modelMatrix,this._boundingVolume=t.boundingVolume,this._cullFace=t.renderState.cull.face;const s=i.classificationType;this._classificationType=s,this._classifiesTerrain=s!==d.A.CESIUM_3D_TILE,this._classifies3DTiles=s!==d.A.TERRAIN,this._useDebugWireframe=i._enableDebugWireframe&&i.debugWireframe,this._pickId=n.pickId,this._commandListTerrain=[],this._commandList3DTiles=[],this._commandListIgnoreShow=[],this._commandListDebugWireframe=[],this._commandListTerrainPicking=[],this._commandList3DTilesPicking=[],function(e){const t=e._command,n=y;if(e._useDebugWireframe){t.pass=c.A.OPAQUE,n.length=0,n.push(t),e._commandListDebugWireframe=b(e,n,e._commandListDebugWireframe);const i=e._commandListDebugWireframe,o=i.length;for(let e=0;e<o;e++){const t=i[e];t.count*=2,t.offset*=2}return}const i=e.model.allowPicking;if(e._classifiesTerrain){const o=c.A.TERRAIN_CLASSIFICATION,r=v(t,o),s=T(t,o);n.length=0,n.push(r,s),e._commandListTerrain=b(e,n,e._commandListTerrain),i&&(e._commandListTerrainPicking=E(e,n,e._commandListTerrainPicking))}if(e._classifies3DTiles){const o=c.A.CESIUM_3D_TILE_CLASSIFICATION,r=v(t,o),s=T(t,o);n.length=0,n.push(r,s),e._commandList3DTiles=b(e,n,e._commandList3DTiles),i&&(e._commandList3DTilesPicking=E(e,n,e._commandList3DTilesPicking))}}(this)}const _={stencilTest:{enabled:!0,frontFunction:f.A.NOT_EQUAL,frontOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},backFunction:f.A.NOT_EQUAL,backOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},reference:0,mask:A.A.CLASSIFICATION_MASK},stencilMask:A.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:u.A.PRE_MULTIPLIED_ALPHA_BLEND},g={stencilTest:{enabled:!0,frontFunction:f.A.NOT_EQUAL,frontOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},backFunction:f.A.NOT_EQUAL,backOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},reference:0,mask:A.A.CLASSIFICATION_MASK},stencilMask:A.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},y=[];function b(e,t,n){const i=e._runtimePrimitive,o=i.batchLengths,r=i.batchOffsets,s=o.length,c=t.length;for(let e=0;e<s;e++){const i=o[e],s=r[e];for(let e=0;e<c;e++){const o=t[e],r=a.A.shallowClone(o);r.count=i,r.offset=s,n.push(r)}}return n}function v(e,t){const n=a.A.shallowClone(e);n.cull=!1,n.pass=t;const i={colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:o=t===c.A.TERRAIN_CLASSIFICATION?f.A.ALWAYS:f.A.EQUAL,frontOperation:{fail:p.A.KEEP,zFail:p.A.DECREMENT_WRAP,zPass:p.A.KEEP},backFunction:o,backOperation:{fail:p.A.KEEP,zFail:p.A.INCREMENT_WRAP,zPass:p.A.KEEP},reference:A.A.CESIUM_3D_TILE_MASK,mask:A.A.CESIUM_3D_TILE_MASK},stencilMask:A.A.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:h.A.LESS_OR_EQUAL},depthMask:!1};var o;return n.renderState=l.A.fromCache(i),n}function T(e,t){const n=a.A.shallowClone(e);return n.cull=!1,n.pass=t,n.renderState=l.A.fromCache(_),n}const w=[];function E(e,t,n){const i=l.A.fromCache(g),o=t[0],r=t[1],s=a.A.shallowClone(o);s.cull=!0,s.pickOnly=!0;const c=a.A.shallowClone(r);c.cull=!0,c.pickOnly=!0,c.renderState=i,c.pickId=e._pickId;const u=w;return u.length=0,u.push(s,c),b(e,u,n)}Object.defineProperties(m.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},batchLengths:{get:function(){return this._runtimePrimitive.batchLengths}},batchOffsets:{get:function(){return this._runtimePrimitive.batchOffsets}},model:{get:function(){return this._model}},classificationType:{get:function(){return this._classificationType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=s.A.clone(e,this._modelMatrix);const t=this._runtimePrimitive.boundingSphere;this._boundingVolume=i.A.transform(t,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e}}}),m.prototype.pushCommands=function(e,t){const n=e.passes;if(n.render){if(this._useDebugWireframe)return void t.push.apply(t,this._commandListDebugWireframe);if(this._classifiesTerrain&&t.push.apply(t,this._commandListTerrain),this._classifies3DTiles&&t.push.apply(t,this._commandList3DTiles),e.invertClassification&&this._classifies3DTiles){if(0===this._commandListIgnoreShow.length){const e=c.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,t=v(this._command,e),n=y;n.length=0,n.push(t),this._commandListIgnoreShow=b(this,n,this._commandListIgnoreShow)}t.push.apply(t,this._commandListIgnoreShow)}}return n.pick&&(this._classifiesTerrain&&t.push.apply(t,this._commandListTerrainPicking),this._classifies3DTiles&&t.push.apply(t,this._commandList3DTilesPicking)),t};const S=m},662274:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(123245),r=n(624512),s=n(595826),a=n(471147);const c={name:"ClassificationPipelineStage",process:function(e,t,n){e.shaderBuilder.addDefine("HAS_CLASSIFICATION",void 0,r.A.BOTH);const c=e.runtimePrimitive;(0,i.A)(c.batchLengths)||function(e,t){const n=a.A.getAttributeBySemantic(e,s.A.POSITION);if(!(0,i.A)(n))throw new o.A("Primitives must have a position attribute to be used for classification.");let r;const c=e.indices,l=(0,i.A)(c);l&&(r=c.typedArray,c.typedArray=void 0);const u=l?c.count:n.count,d=a.A.getAttributeBySemantic(e,s.A.FEATURE_ID,0);if(!(0,i.A)(d))return t.batchLengths=[u],void(t.batchOffsets=[0]);const h=d.typedArray;d.typedArray=void 0;const A=[],f=[0];let p=h[l?r[0]:0],m=0;for(let e=1;e<u;e++){const t=h[l?r[e]:e];if(t!==p){const n=e-m,i=e;A.push(n),f.push(i),m=i,p=t}}const _=u-m;A.push(_),t.batchLengths=A,t.batchOffsets=f}(t,c)}},l=c},106430:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(419061),r=n(491446),s=n(677354),a=n(605971),c=n(212525),l=n(671098),u=n(821174),d=n(747680);function h(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),this.mode=(0,o.A)(e.mode,c.A.MODIFY_MATERIAL),this.lightingModel=e.lightingModel,this.uniforms=(0,o.A)(e.uniforms,o.A.EMPTY_OBJECT),this.varyings=(0,o.A)(e.varyings,o.A.EMPTY_OBJECT),this.vertexShaderText=e.vertexShaderText,this.fragmentShaderText=e.fragmentShaderText,this.translucencyMode=(0,o.A)(e.translucencyMode,d.A.INHERIT),this._textureManager=new u.A,this._defaultTexture=void 0,this.uniformMap=function(e){const t=e.uniforms,n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i],r=o.type;if(r===l.A.SAMPLER_CUBE)throw new a.A("CustomShader does not support samplerCube uniforms");r===l.A.SAMPLER_2D?(e._textureManager.loadTexture2D(i,o.value),n[i]=A(e,i)):n[i]=f(e,i)}return n}(this),this.usedVariablesVertex={attributeSet:{},featureIdSet:{},metadataSet:{}},this.usedVariablesFragment={attributeSet:{},featureIdSet:{},metadataSet:{},materialSet:{}},function(e){const t=/[vf]sInput\.attributes\.(\w+)/g,n=/[vf]sInput\.featureIds\.(\w+)/g,i=/[vf]sInput\.metadata.(\w+)/g;let o;const s=e.vertexShaderText;(0,r.A)(s)&&(o=e.usedVariablesVertex.attributeSet,p(s,t,o),o=e.usedVariablesVertex.featureIdSet,p(s,n,o),o=e.usedVariablesVertex.metadataSet,p(s,i,o));const a=e.fragmentShaderText;(0,r.A)(a)&&(o=e.usedVariablesFragment.attributeSet,p(a,t,o),o=e.usedVariablesFragment.featureIdSet,p(a,n,o),o=e.usedVariablesFragment.metadataSet,p(a,i,o),p(a,/material\.(\w+)/g,e.usedVariablesFragment.materialSet))}(this),function(e){const t=e.usedVariablesVertex.attributeSet;_(t,"position","positionMC","vertex"),_(t,"normal","normalMC","vertex"),_(t,"tangent","tangentMC","vertex"),_(t,"bitangent","bitangentMC","vertex"),_(t,"positionWC","positionMC","vertex"),_(t,"positionEC","positionMC","vertex"),_(t,"normalEC","normalMC","vertex"),_(t,"tangentEC","tangentMC","vertex"),_(t,"bitangentEC","bitangentMC","vertex");const n=e.usedVariablesFragment.attributeSet;_(n,"position","positionEC","fragment"),_(n,"normal","normalEC","fragment"),_(n,"tangent","tangentEC","fragment"),_(n,"bitangent","bitangentEC","fragment"),_(n,"normalMC","normalEC","fragment"),_(n,"tangentMC","tangentEC","fragment"),_(n,"bitangentMC","bitangentEC","fragment")}(this)}function A(e,t){return function(){return(0,o.A)(e._textureManager.getTexture(t),e._defaultTexture)}}function f(e,t){return function(){return e.uniforms[t].value}}function p(e,t,n){let i;for(;null!==(i=t.exec(e));)n[i[1]]=!0}function m(e){return/^.*MC$/.test(e)?`${e} (model coordinates)`:/^.*WC$/.test(e)?`${e} (Cartesian world coordinates)`:/^.*EC$/.test(e)?`${e} (eye coordinates)`:e}function _(e,t,n,i){if(e.hasOwnProperty(t)){const e=`${m(t)} is not available in the ${i} shader. Did you mean ${m(n)} instead?`;throw new a.A(e)}}h.prototype.setUniform=function(e,t){if(i.A.typeOf.string("uniformName",e),i.A.defined("value",t),!(0,r.A)(this.uniforms[e]))throw new a.A(`Uniform ${e} must be declared in the CustomShader constructor.`);const n=this.uniforms[e];n.type===l.A.SAMPLER_2D?this._textureManager.loadTexture2D(e,t):(0,r.A)(t.clone)?n.value=t.clone(n.value):n.value=t},h.prototype.update=function(e){this._defaultTexture=e.context.defaultTexture,this._textureManager.update(e)},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){this._textureManager=this._textureManager&&this._textureManager.destroy(),(0,s.A)(this)};const g=h},212525:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL",getDefineName:function(e){return`CUSTOM_SHADER_${e}`}})},381508:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(430346),o=n(491446),r=n(983884),s=n(624512),a=n(760866),c=n(181163),l=n(58747),u=n(212525),d=n(598073),h=n(64389),A=n(471147),f=n(747680);const p={name:"CustomShaderPipelineStage",STRUCT_ID_ATTRIBUTES_VS:"AttributesVS",STRUCT_ID_ATTRIBUTES_FS:"AttributesFS",STRUCT_NAME_ATTRIBUTES:"Attributes",STRUCT_ID_VERTEX_INPUT:"VertexInput",STRUCT_NAME_VERTEX_INPUT:"VertexInput",STRUCT_ID_FRAGMENT_INPUT:"FragmentInput",STRUCT_NAME_FRAGMENT_INPUT:"FragmentInput",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS:"initializeInputStructVS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS:"void initializeInputStruct(out VertexInput vsInput, ProcessedAttributes attributes)",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS:"initializeInputStructFS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS:"void initializeInputStruct(out FragmentInput fsInput, ProcessedAttributes attributes)",_oneTimeWarning:r.A,process:function(e,t,n){const r=e.shaderBuilder,m=e.model.customShader;(0,o.A)(m.lightingModel)&&(e.lightingOptions.lightingModel=m.lightingModel);const _=e.alphaOptions;m.translucencyMode===f.A.TRANSLUCENT?_.pass=a.A.TRANSLUCENT:m.translucencyMode===f.A.OPAQUE&&(_.pass=void 0);const y=function(e,t){const n={enabled:!1},i={enabled:!1},r=function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=A.A.getAttributeInfo(i);t[o.variableName]=o}return t}(t.attributes);(0,o.A)(e.vertexShaderText)&&function(e,t,n){const i=b(t,e.usedVariablesVertex.attributeSet,!1),r=i.addToShader,s=i.missingAttributes;let a,c;const l=[],u=[];for(a in r)if(r.hasOwnProperty(a)){const e=[r[a].glslType,a];l.push(e),c=`vsInput.attributes.${a} = attributes.${a};`,u.push(c)}for(let e=0;e<s.length;e++){a=s[e];const t=g(a);if(!(0,o.A)(t))return void p._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveVS",`Primitive is missing attribute ${a}, disabling custom vertex shader`);l.push(t.attributeField),c=`vsInput.attributes.${a} = ${t.value};`,u.push(c)}n.enabled=!0,n.attributeFields=l,n.initializationLines=u}(e,r,n),(0,o.A)(e.fragmentShaderText)&&function(e,t,n){const i=b(t,e.usedVariablesFragment.attributeSet,!0),r=i.addToShader,s=i.missingAttributes;let a,c;const l=[],u=[];for(a in r)if(r.hasOwnProperty(a)){const e=[r[a].glslType,a];l.push(e),c=`fsInput.attributes.${a} = attributes.${a};`,u.push(c)}for(let e=0;e<s.length;e++){a=s[e];const t=g(a);if(!(0,o.A)(t))return void p._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveFS",`Primitive is missing attribute ${a}, disabling custom fragment shader.`);l.push(t.attributeField),c=`fsInput.attributes.${a} = ${t.value};`,u.push(c)}const d=function(e){const t=[],n=[],i=e.usedVariablesFragment.attributeSet;return i.hasOwnProperty("positionWC")&&(t.push(["vec3","positionWC"]),n.push("fsInput.attributes.positionWC = attributes.positionWC;")),i.hasOwnProperty("positionEC")&&(t.push(["vec3","positionEC"]),n.push("fsInput.attributes.positionEC = attributes.positionEC;")),{attributeFields:t,initializationLines:n}}(e);n.enabled=!0,n.attributeFields=l.concat(d.attributeFields),n.initializationLines=d.initializationLines.concat(u)}(e,r,i);const s=e.usedVariablesFragment.attributeSet.hasOwnProperty("positionWC")&&i.enabled;return{vertexLines:n,fragmentLines:i,vertexLinesEnabled:n.enabled,fragmentLinesEnabled:i.enabled,customShaderEnabled:n.enabled||i.enabled,shouldComputePositionWC:s}}(m,t);if(!y.customShaderEnabled)return;if(function(e,t,n){const i=n.vertexLines,o=v;i.enabled&&(function(e,t){let n,i=p.STRUCT_ID_ATTRIBUTES_VS;e.addStruct(i,p.STRUCT_NAME_ATTRIBUTES,s.A.VERTEX);const o=t.attributeFields;for(n=0;n<o.length;n++){const t=o[n],r=t[0],s=t[1];e.addStructField(i,r,s)}i=p.STRUCT_ID_VERTEX_INPUT,e.addStruct(i,p.STRUCT_NAME_VERTEX_INPUT,s.A.VERTEX),e.addStructField(i,p.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(i,d.A.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(i,h.A.STRUCT_NAME_METADATA,"metadata"),e.addStructField(i,h.A.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(i,h.A.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");const r=p.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS;e.addFunction(r,p.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS,s.A.VERTEX);const a=t.initializationLines;e.addFunctionLines(r,a)}(e,i),o.length=0,o.push("#line 0",t.vertexShaderText,c.A),e.addVertexLines(o));const r=n.fragmentLines;r.enabled&&(function(e,t){let n,i,o,r,a=p.STRUCT_ID_ATTRIBUTES_FS;e.addStruct(a,p.STRUCT_NAME_ATTRIBUTES,s.A.FRAGMENT);const c=t.attributeFields;for(n=0;n<c.length;n++)i=c[n],o=i[0],r=i[1],e.addStructField(a,o,r);a=p.STRUCT_ID_FRAGMENT_INPUT,e.addStruct(a,p.STRUCT_NAME_FRAGMENT_INPUT,s.A.FRAGMENT),e.addStructField(a,p.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(a,d.A.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(a,h.A.STRUCT_NAME_METADATA,"metadata"),e.addStructField(a,h.A.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(a,h.A.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");const l=p.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS;e.addFunction(l,p.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS,s.A.FRAGMENT);const u=t.initializationLines;e.addFunctionLines(l,u)}(e,r),o.length=0,o.push("#line 0",t.fragmentShaderText,l.A),e.addFragmentLines(o))}(r,m,y),y.shouldComputePositionWC&&r.addDefine("COMPUTE_POSITION_WC_CUSTOM_SHADER",void 0,s.A.BOTH),(0,o.A)(m.vertexShaderText)&&r.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,s.A.VERTEX),(0,o.A)(m.fragmentShaderText)){r.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,s.A.FRAGMENT);const e=u.A.getDefineName(m.mode);r.addDefine(e,void 0,s.A.FRAGMENT)}const T=m.uniforms;for(const e in T)if(T.hasOwnProperty(e)){const t=T[e];r.addUniform(t.type,e)}const w=m.varyings;for(const e in w)if(w.hasOwnProperty(e)){const t=w[e];r.addVarying(t,e)}e.uniformMap=(0,i.A)(e.uniformMap,m.uniformMap)}},m={position:"vec3",normal:"vec3",tangent:"vec3",bitangent:"vec3",texCoord:"vec2",color:"vec4",joints:"ivec4",weights:"vec4"},_={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec3(1.0, 0.0, 0.0)",bitangent:"vec3(0.0, 1.0, 0.0)",texCoord:"vec2(0.0)",color:"vec4(1.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function g(e){let t=e.replace(/_[0-9]+$/,"");t=t.replace(/(MC|EC)$/,"");const n=m[t],i=_[t];if((0,o.A)(n))return{attributeField:[n,e],value:i}}const y={positionWC:!0,positionEC:!0};function b(e,t,n){let i,o;const r={};for(o in e)if(e.hasOwnProperty(o)){const s=e[o];i=o,n&&"normalMC"===o?i="normalEC":n&&"tangentMC"===o&&(i="tangentEC"),t.hasOwnProperty(i)&&(r[i]=s)}const s=[];for(o in t)if(t.hasOwnProperty(o)){if(y.hasOwnProperty(o))continue;i=o,n&&"normalEC"===o?i="normalMC":n&&"tangentEC"===o&&(i="tangentMC"),e.hasOwnProperty(i)||s.push(o)}return{addToShader:r,missingAttributes:s}}const v=[],T=p},747680:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({INHERIT:0,OPAQUE:1,TRANSLUCENT:2})},13916:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(626809),r=n(624512),s=n(471147),a=n(595826);const c={name:"DequantizationPipelineStage",FUNCTION_ID_DEQUANTIZATION_STAGE_VS:"dequantizationStage",FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS:"void dequantizationStage(inout ProcessedAttributes attributes)"};function l(e,t){const n=e.shaderBuilder,i=e.uniformMap,o=t.variableName,s=t.attribute.quantization;if(s.octEncoded){const e=`model_normalizationRange_${o}`;n.addUniform("float",e,r.A.VERTEX),i[e]=function(){return s.normalizationRange}}else{const e=`model_quantizedVolumeOffset_${o}`,a=`model_quantizedVolumeStepSize_${o}`,c=t.glslType;n.addUniform(c,e,r.A.VERTEX),n.addUniform(c,a,r.A.VERTEX);let l=s.quantizedVolumeOffset,d=s.quantizedVolumeStepSize;/^color_\d+$/.test(o)&&(l=u(l,0),d=u(d,1)),i[e]=function(){return l},i[a]=function(){return d}}}function u(e,t){return e instanceof o.A?e:new o.A(e.x,e.y,e.z,t)}function d(e,t){const n=t.variableName,i=t.attribute.quantization;let o;o=i.octEncoded?function(e,t){return`${`attributes.${e}`} = czm_octDecode(${`a_quantized_${e}`}, ${`model_normalizationRange_${e}`})${t.octEncodedZXY?".zxy":".xyz"};`}(n,i):function(e){return`${`attributes.${e}`} = ${`model_quantizedVolumeOffset_${e}`} + ${`a_quantized_${e}`} * ${`model_quantizedVolumeStepSize_${e}`};`}(n),e.addFunctionLines(c.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,[o])}c.process=function(e,t,n){const o=e.shaderBuilder,u=e.model,h=(0,i.A)(u.classificationType);o.addDefine("USE_DEQUANTIZATION",void 0,r.A.VERTEX),o.addFunction(c.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,c.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS,r.A.VERTEX);const A=t.attributes;for(let t=0;t<A.length;t++){const n=A[t],r=n.quantization;if(!(0,i.A)(r))continue;const c=n.semantic===a.A.POSITION,u=n.semantic===a.A.TEXCOORD;if(h&&!c&&!u)continue;const f=s.A.getAttributeInfo(n);d(o,f),l(e,f)}};const h=c},598073:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(571804),o=n(419061),r=n(491446),s=n(624512),a=n(641613),c=n(442790),l=n(625322),u=n(204410),d=n(995537),h=n(595826),A=n(471147);const f={name:"FeatureIdPipelineStage",STRUCT_ID_FEATURE_IDS_VS:"FeatureIdsVS",STRUCT_ID_FEATURE_IDS_FS:"FeatureIdsFS",STRUCT_NAME_FEATURE_IDS:"FeatureIds",FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS:"initializeFeatureIdsVS",FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS:"initializeFeatureIdsFS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS:"initializeFeatureIdAliasesVS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS:"initializeFeatureIdAliasesFS",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS:"void initializeFeatureIds(out FeatureIds featureIds, ProcessedAttributes attributes)",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES:"void initializeFeatureIdAliases(inout FeatureIds featureIds)",FUNCTION_ID_SET_FEATURE_ID_VARYINGS:"setFeatureIdVaryings",FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS:"void setFeatureIdVaryings()"};function p(e,t,n){const i=e.shaderBuilder;i.addStructField(f.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(f.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),s=`a_${r}${o}`,a=`v_${r}${o}`,c=`featureIds.${n} = int(czm_round(${s}));`,l=`featureIds.${n} = int(czm_round(${a}));`;i.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[c]),i.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[l]),i.addVarying("float",a),i.addFunctionLines(f.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${a} = ${s};`])}function m(e,t,n){const i=e.shaderBuilder;i.addStructField(f.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(f.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),s=[`featureIds.${n} = int(czm_round(attributes.${r}${o}));`];i.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,s),i.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,s)}function _(e,t,n,o,s,l){!function(e,t,n,o,s){const l=e.model;let u,d;if((0,r.A)(t.repeat)){const e=function(e,t){const n=e.offset,i=e.repeat,o=new Float32Array(t);for(let e=0;e<t;e++)o[e]=n+Math.floor(e/i);return o}(t,n);u=a.A.createVertexBuffer({context:s.context,typedArray:e,usage:c.A.STATIC_DRAW}),u.vertexArrayDestroyable=!1,l._pipelineResources.push(u);const i=!1;l.statistics.addBuffer(u,i)}else d=[t.offset];const h={index:e.attributeIndex++,instanceDivisor:o,value:d,vertexBuffer:u,normalize:!1,componentsPerAttribute:1,componentDatatype:i.A.FLOAT,strideInBytes:i.A.getSizeInBytes(i.A.FLOAT),offsetInBytes:0};e.attributes.push(h)}(e,t,o,s,l);const u=e.shaderBuilder,d=`a_implicit_${n}`;u.addAttribute("float",d);const h=`v_implicit_${n}`;u.addVarying("float",h),u.addStructField(f.STRUCT_ID_FEATURE_IDS_VS,"int",n),u.addStructField(f.STRUCT_ID_FEATURE_IDS_FS,"int",n),u.addFunctionLines(f.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${h} = ${d};`]),u.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[`featureIds.${n} = int(czm_round(${d}));`]),u.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[`featureIds.${n} = int(czm_round(${h}));`])}function g(e,t,n,i,r){const a=`u_featureIdTexture_${i}`,c=e.uniformMap,l=t.textureReader;c[a]=function(){return(0,o.A)(l.texture,r.context.defaultTexture)};const u=l.channels,d=e.shaderBuilder;d.addStructField(f.STRUCT_ID_FEATURE_IDS_FS,"int",n),d.addUniform("sampler2D",a,s.A.FRAGMENT);const h=`featureIds.${n} = czm_unpackUint(texture(${a}, v_texCoord_${l.texCoord}).${u});`;d.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[h])}function y(e,t,n,i){const o=e.shaderBuilder,r=s.A.includesVertexShader(i);r&&o.addStructField(f.STRUCT_ID_FEATURE_IDS_VS,"int",n),o.addStructField(f.STRUCT_ID_FEATURE_IDS_FS,"int",n);const a=[`featureIds.${n} = featureIds.${t};`];r&&o.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,a),o.addFunctionLines(f.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,a)}f.process=function(e,t,n){const i=e.shaderBuilder;!function(e){e.addStruct(f.STRUCT_ID_FEATURE_IDS_VS,f.STRUCT_NAME_FEATURE_IDS,s.A.VERTEX),e.addStruct(f.STRUCT_ID_FEATURE_IDS_FS,f.STRUCT_NAME_FEATURE_IDS,s.A.FRAGMENT),e.addFunction(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,f.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,s.A.VERTEX),e.addFunction(f.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,f.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,s.A.FRAGMENT),e.addFunction(f.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,f.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,s.A.VERTEX),e.addFunction(f.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,f.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,s.A.FRAGMENT),e.addFunction(f.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,f.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS,s.A.VERTEX)}(i);const o=e.runtimeNode.node.instances;(0,r.A)(o)&&function(e,t,n){const i=t.featureIds,o=t.attributes[0].count;for(let t=0;t<i.length;t++){const a=i[t],c=a.positionalLabel;a instanceof d.A.FeatureIdAttribute?p(e,a,c):_(e,a,c,o,1,n);const l=a.label;(0,r.A)(l)&&y(e,c,l,s.A.BOTH)}}(e,o,n),function(e,t,n){const i=t.featureIds,o=A.A.getAttributeBySemantic(t,h.A.POSITION).count;for(let t=0;t<i.length;t++){const a=i[t],c=a.positionalLabel;let l=s.A.BOTH;a instanceof d.A.FeatureIdAttribute?m(e,a,c):a instanceof d.A.FeatureIdImplicitRange?_(e,a,c,o,void 0,n):(g(e,a,c,t,n),l=s.A.FRAGMENT);const u=a.label;(0,r.A)(u)&&y(e,c,u,l)}}(e,t,n),i.addVertexLines(u.A),i.addFragmentLines(l.A)};const b=f},66502:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(267980),o=n(369031),r=n(571804),s=n(419061),a=n(491446),c=n(610750),l=n(874915),u=n(584164),d=n(402330),h=n(123245),A=n(543622),f=n(730839),p=n(784749),m=n(4024),_=n(995537),g=n(287659),y=n(569445),b=n(590732),v=n(595826),T=n(641613),w=n(442790);function E(e){e=(0,s.A)(e,s.A.EMPTY_OBJECT),o.A.typeOf.object("options.geoJson",e.geoJson),this._geoJson=e.geoJson,this._components=void 0}function S(){this.lines=void 0,this.points=void 0,this.properties=void 0}function C(){this.features=[]}function x(e){const t=e[0],n=e[1],o=(0,s.A)(e[2],0);return new i.A(t,n,o)}function I(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=x(e[i]);return[n]}function P(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=I(e[i])[0];return n}(0,a.A)(Object.create)&&(E.prototype=Object.create(y.A.prototype),E.prototype.constructor=E),Object.defineProperties(E.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),E.prototype.load=function(){return Promise.resolve(this)},E.prototype.process=function(e){return o.A.typeOf.object("frameState",e),(0,a.A)(this._components)||(this._components=function(e,t){const n=new C,o=N[e.type];(0,a.A)(o)&&o(e,n);const y=n.features,E=y.length;if(0===E)throw new h.A("GeoJSON must have at least one feature");const S={};for(let e=0;e<E;e++){const t=y[e],n=(0,s.A)(t.properties,s.A.EMPTY_OBJECT);for(const e in n)n.hasOwnProperty(e)&&((0,a.A)(S[e])||(S[e]=new Array(E)))}for(let e=0;e<E;e++){const t=y[e];for(const n in S)if(S.hasOwnProperty(n)){const i=(0,s.A)(t.properties[n],"");S[n][e]=i}}const x=new p.A({count:E,properties:S}),I=[new g.A({id:0,count:E,jsonMetadataTable:x})],P=m.A.fromJson({}),D=new b.A({schema:P,propertyTables:I}),O=new i.A(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),L=new i.A(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let R=!1,F=!1;for(let e=0;e<E;e++){const t=y[e];if((0,a.A)(t.lines)){R=!0;const e=t.lines.length;for(let n=0;n<e;n++){const e=t.lines[n],o=e.length;for(let t=0;t<o;t++)i.A.minimumByComponent(O,e[t],O),i.A.maximumByComponent(L,e[t],L)}}if((0,a.A)(t.points)){F=!0;const e=t.points.length;for(let n=0;n<e;n++){const e=t.points[n];i.A.minimumByComponent(O,e,O),i.A.maximumByComponent(L,e,L)}}}const B=i.A.midpoint(O,L,new i.A),U=i.A.fromDegrees(B.x,B.y,B.z,c.A.WGS84,new i.A),k=A.A.eastNorthUpToFixedFrame(U,c.A.WGS84,new u.A),V=u.A.inverseTransformation(k,new u.A),H=[];R&&H.push(function(e,t,n){let o=0,s=0;const h=e.length;for(let t=0;t<h;t++){const n=e[t];if((0,a.A)(n.lines)){const e=n.lines.length;for(let t=0;t<e;t++){const e=n.lines[t];o+=e.length,s+=2*(e.length-1)}}}const A=new Float32Array(3*o),p=new Float32Array(o),m=l.A.createTypedArray(o,s),g=l.A.fromTypedArray(m),y=new i.A(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),b=new i.A(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let E=0,S=0;for(let n=0;n<h;n++){const o=e[n];if(!(0,a.A)(o.lines))continue;const r=o.lines.length;for(let e=0;e<r;e++){const r=o.lines[e],s=r.length;for(let e=0;e<s;e++){const o=r[e],a=i.A.fromDegrees(o.x,o.y,o.z,c.A.WGS84,M),l=u.A.multiplyByPoint(t,a,M);i.A.minimumByComponent(y,l,y),i.A.maximumByComponent(b,l,b),i.A.pack(l,A,3*E),p[E]=n,e<s-1&&(m[2*S]=E,m[2*S+1]=E+1,S++),E++}}}const C=T.A.createVertexBuffer({typedArray:A,context:n.context,usage:w.A.STATIC_DRAW});C.vertexArrayDestroyable=!1;const x=T.A.createVertexBuffer({typedArray:p,context:n.context,usage:w.A.STATIC_DRAW});x.vertexArrayDestroyable=!1;const I=T.A.createIndexBuffer({typedArray:m,context:n.context,usage:w.A.STATIC_DRAW,indexDatatype:g});I.vertexArrayDestroyable=!1;const P=new _.A.Attribute;P.semantic=v.A.POSITION,P.componentDatatype=r.A.FLOAT,P.type=f.A.VEC3,P.count=o,P.min=y,P.max=b,P.buffer=C;const D=new _.A.Attribute;D.semantic=v.A.FEATURE_ID,D.setIndex=0,D.componentDatatype=r.A.FLOAT,D.type=f.A.SCALAR,D.count=o,D.buffer=x;const O=[P,D],L=new _.A.Material;L.unlit=!0;const N=new _.A.Indices;N.indexDatatype=g,N.count=m.length,N.buffer=I;const R=new _.A.FeatureIdAttribute;R.featureCount=h,R.propertyTableId=0,R.setIndex=0,R.positionalLabel="featureId_0";const F=[R],B=new _.A.Primitive;return B.attributes=O,B.indices=N,B.featureIds=F,B.primitiveType=d.A.LINES,B.material=L,B}(y,V,t)),F&&H.push(function(e,t,n){let o=0;const s=e.length;for(let t=0;t<s;t++){const n=e[t];(0,a.A)(n.points)&&(o+=n.points.length)}const l=new Float32Array(3*o),h=new Float32Array(o),A=new i.A(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=new i.A(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let m=0;for(let n=0;n<s;n++){const o=e[n];if(!(0,a.A)(o.points))continue;const r=o.points.length;for(let e=0;e<r;e++){const r=o.points[e],s=i.A.fromDegrees(r.x,r.y,r.z,c.A.WGS84,M),a=u.A.multiplyByPoint(t,s,M);i.A.minimumByComponent(A,a,A),i.A.maximumByComponent(p,a,p),i.A.pack(a,l,3*m),h[m]=n,m++}}const g=T.A.createVertexBuffer({typedArray:l,context:n.context,usage:w.A.STATIC_DRAW});g.vertexArrayDestroyable=!1;const y=T.A.createVertexBuffer({typedArray:h,context:n.context,usage:w.A.STATIC_DRAW});y.vertexArrayDestroyable=!1;const b=new _.A.Attribute;b.semantic=v.A.POSITION,b.componentDatatype=r.A.FLOAT,b.type=f.A.VEC3,b.count=o,b.min=A,b.max=p,b.buffer=g;const E=new _.A.Attribute;E.semantic=v.A.FEATURE_ID,E.setIndex=0,E.componentDatatype=r.A.FLOAT,E.type=f.A.SCALAR,E.count=o,E.buffer=y;const S=[b,E],C=new _.A.Material;C.unlit=!0;const x=new _.A.FeatureIdAttribute;x.featureCount=s,x.propertyTableId=0,x.setIndex=0,x.positionalLabel="featureId_0";const I=[x],P=new _.A.Primitive;return P.attributes=S,P.featureIds=I,P.primitiveType=d.A.POINTS,P.material=C,P}(y,V,t));const z=new _.A.Node;z.index=0,z.primitives=H;const G=[z],j=new _.A.Scene;j.nodes=G;const W=new _.A.Components;return W.scene=j,W.nodes=G,W.transform=k,W.structuralMetadata=D,W}(this._geoJson,e),this._geoJson=void 0),!0};const D={LineString:I,MultiLineString:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=I(e[i])[0];return n},MultiPolygon:function(e){const t=e.length,n=[];for(let i=0;i<t;i++)Array.prototype.push.apply(n,P(e[i]));return n},Polygon:P,MultiPoint:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=x(e[i]);return n},Point:function(e){return[x(e)]}},O={LineString:d.A.LINES,MultiLineString:d.A.LINES,MultiPolygon:d.A.LINES,Polygon:d.A.LINES,MultiPoint:d.A.POINTS,Point:d.A.POINTS};function L(e,t){if(!(0,a.A)(e.geometry))return;const n=e.geometry.type,i=D[n],o=O[n],r=e.geometry.coordinates;if(!(0,a.A)(i))return;if(!(0,a.A)(r))return;const s=new S;o===d.A.LINES?s.lines=i(r):o===d.A.POINTS&&(s.points=i(r)),s.properties=e.properties,t.features.push(s)}const N={FeatureCollection:function(e,t){const n=e.features,i=n.length;for(let e=0;e<i;e++)L(n[e],t)},Feature:L},M=new i.A;E.prototype.unload=function(){this._components=void 0};const R=E},320578:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(571804),o=n(491446),r=n(605971),s=n(402330),a=n(624512),c=n(896077),l=n(575581),u=n(730839),d=n(62467),h=n(226827),A=n(471147),f=n(391852),p=n(595826);const m={name:"GeometryPipelineStage",STRUCT_ID_PROCESSED_ATTRIBUTES_VS:"ProcessedAttributesVS",STRUCT_ID_PROCESSED_ATTRIBUTES_FS:"ProcessedAttributesFS",STRUCT_NAME_PROCESSED_ATTRIBUTES:"ProcessedAttributes",FUNCTION_ID_INITIALIZE_ATTRIBUTES:"initializeAttributes",FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES:"void initializeAttributes(out ProcessedAttributes attributes)",FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS:"setDynamicVaryingsVS",FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS:"setDynamicVaryingsFS",FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS:"void setDynamicVaryings(inout ProcessedAttributes attributes)"};function _(e,t,n,r,s,a){const c=e.shaderBuilder,l=A.A.getAttributeInfo(t),d=s&&!a;r>1?function(e,t,n,r){const s=t.quantization;let a,c;(0,o.A)(s)?(a=s.type,c=s.componentDatatype):(a=t.type,c=t.componentDatatype);const l=t.normalized,d=u.A.getNumberOfComponents(a)/r,h=d*i.A.getSizeInBytes(c),A=t.byteStride;for(let i=0;i<r;i++){const o=t.byteOffset+i*h,r={index:n+i,vertexBuffer:t.buffer,componentsPerAttribute:d,componentDatatype:c,offsetInBytes:o,strideInBytes:A,normalize:l};e.attributes.push(r)}}(e,t,n,r):function(e,t,n,r){const s=t.quantization;let a,c;(0,o.A)(s)?(a=s.type,c=s.componentDatatype):(a=t.type,c=t.componentDatatype);const l=t.semantic,d=t.setIndex;l===p.A.FEATURE_ID&&d>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=d+1);const h=l===p.A.POSITION,A=h?0:n,f=u.A.getNumberOfComponents(a),m={index:A,value:(0,o.A)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:f,componentDatatype:c,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(e.attributes.push(m),!h||!r)return;const _={index:n,vertexBuffer:e.runtimePrimitive.positionBuffer2D,count:t.count,componentsPerAttribute:f,componentDatatype:i.A.FLOAT,offsetInBytes:0,strideInBytes:void 0,normalize:t.normalized};e.attributes.push(_)}(e,t,n,d),function(e,t,n){const i=t.attribute.semantic,o=t.variableName;let r,s;t.isQuantized?(r=`a_quantized_${o}`,s=t.quantizedGlslType):(r=`a_${o}`,s=t.glslType);const a=i===p.A.POSITION;a?e.setPositionAttribute(s,r):e.addAttribute(s,r),a&&n&&e.addAttribute("vec3","a_position2D")}(c,l,d),function(e,t){const n=t.variableName;let i,o=`v_${n}`;"normalMC"===n?(o="v_normalEC",i=t.glslType):"tangentMC"===n?(i="vec3",o="v_tangentEC"):i=t.glslType,e.addVarying(i,o)}(c,l),(0,o.A)(t.semantic)&&function(e,t){const n=t.semantic,i=t.setIndex;switch(n){case p.A.NORMAL:e.addDefine("HAS_NORMALS");break;case p.A.TANGENT:e.addDefine("HAS_TANGENTS");break;case p.A.FEATURE_ID:e.addDefine(`HAS${n}_${i}`);break;case p.A.TEXCOORD:case p.A.COLOR:e.addDefine(`HAS_${n}_${i}`)}}(c,t),function(e,t,n){const i=m.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,o=m.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,r=t.variableName;"tangentMC"===r?(e.addStructField(i,"vec3","tangentMC"),e.addStructField(i,"float","tangentSignMC"),e.addStructField(o,"vec3","tangentEC")):"normalMC"===r?(e.addStructField(i,"vec3","normalMC"),e.addStructField(o,"vec3","normalEC")):(e.addStructField(i,t.glslType,r),e.addStructField(o,t.glslType,r)),"positionMC"===r&&n&&e.addStructField(i,"vec3","position2D")}(c,l,s),function(e,t,n){const i=m.FUNCTION_ID_INITIALIZE_ATTRIBUTES,o=t.variableName;if("positionMC"===o&&n){const t="attributes.position2D = a_position2D;";e.addFunctionLines(i,[t])}if(t.isQuantized)return;const r=[];"tangentMC"===o?(r.push("attributes.tangentMC = a_tangentMC.xyz;"),r.push("attributes.tangentSignMC = a_tangentMC.w;")):r.push(`attributes.${o} = a_${o};`),e.addFunctionLines(i,r)}(c,l,d),function(e,t){const n=t.attribute.semantic,i=t.attribute.setIndex;if((0,o.A)(n)&&!(0,o.A)(i))return;let r=m.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS;const s=t.variableName;let a=`v_${s} = attributes.${s};`;e.addFunctionLines(r,[a]),r=m.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,a=`attributes.${s} = v_${s};`,e.addFunctionLines(r,[a])}(c,l)}m.process=function(e,t,n){const i=e.shaderBuilder,A=e.model;i.addStruct(m.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"ProcessedAttributes",a.A.VERTEX),i.addStruct(m.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"ProcessedAttributes",a.A.FRAGMENT),i.addStruct(f.A.STRUCT_ID_SELECTED_FEATURE,f.A.STRUCT_NAME_SELECTED_FEATURE,a.A.BOTH),i.addFunction(m.FUNCTION_ID_INITIALIZE_ATTRIBUTES,m.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES,a.A.VERTEX),i.addVarying("vec3","v_positionWC"),i.addVarying("vec3","v_positionEC"),i.addStructField(m.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionWC"),i.addStructField(m.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionEC"),i.addFunction(m.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,m.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,a.A.VERTEX),i.addFunction(m.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,m.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,a.A.FRAGMENT),A.type===h.A.TILE_PNTS&&i.addDefine("HAS_SRGB_COLOR",void 0,a.A.FRAGMENT);const g=n.mode!==d.A.SCENE3D&&!n.scene3DOnly&&A._projectTo2D,y=(0,o.A)(e.runtimeNode.node.instances),b=g&&!y,v=t.attributes.length;for(let n=0;n<v;n++){const i=t.attributes[n],s=u.A.getAttributeLocationCount(i.type);if(!(0,o.A)(i.buffer)&&!(0,o.A)(i.constant))throw new r.A("Attributes must be provided as a Buffer or constant value");const a=i.semantic===p.A.POSITION;let c;s>1?(c=e.attributeIndex,e.attributeIndex+=s):c=a&&!b?0:e.attributeIndex++,_(e,i,c,s,g,y)}!function(e,t){let n=!1,i=!1;for(let e=0;e<t.length;e++){const o=t[e];o.semantic===p.A.NORMAL?n=!0:o.semantic===p.A.TANGENT&&(i=!0)}n&&i&&(e.addDefine("HAS_BITANGENTS"),e.addVarying("vec3","v_bitangentEC"),e.addStructField(m.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"vec3","bitangentMC"),e.addStructField(m.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","bitangentEC"))}(i,t.attributes),t.primitiveType===s.A.POINTS&&i.addDefine("PRIMITIVE_TYPE_POINTS"),i.addVertexLines(l.A),i.addFragmentLines(c.A)};const g=m},521032:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(961645),o=n(660662),r=n(267980),s=n(369031),a=n(376758),c=n(571804),l=n(419061),u=n(491446),d=n(610750),h=n(241839),A=n(331185),f=n(584164),p=n(99479),m=n(123245),_=n(543622),g=n(641613),y=n(442790),b=n(730839),v=n(320475),T=n(468741),w=n(982504),E=n(866857),S=n(680278),C=n(32335),x=n(995537),I=n(115959),P=n(287659),D=n(569445),O=n(590732);const L=x.A.Attribute,N=x.A.FeatureIdAttribute,M=x.A.Instances;function R(e){const t=(e=(0,l.A)(e,l.A.EMPTY_OBJECT)).i3dmResource,n=e.arrayBuffer;let i=e.baseResource;const o=(0,l.A)(e.byteOffset,0),r=(0,l.A)(e.releaseGltfJson,!1),a=(0,l.A)(e.asynchronous,!0),c=(0,l.A)(e.incrementallyLoadTextures,!0),d=(0,l.A)(e.upAxis,v.A.Y),h=(0,l.A)(e.forwardAxis,v.A.X),A=(0,l.A)(e.loadAttributesAsTypedArray,!1),p=(0,l.A)(e.loadIndicesForWireframe,!1),m=(0,l.A)(e.loadPrimitiveOutline,!0);s.A.typeOf.object("options.i3dmResource",t),s.A.typeOf.object("options.arrayBuffer",n),i=(0,u.A)(i)?i:t.clone(),this._i3dmResource=t,this._baseResource=i,this._arrayBuffer=n,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=a,this._incrementallyLoadTextures=c,this._upAxis=d,this._forwardAxis=h,this._loadAttributesAsTypedArray=A,this._loadIndicesForWireframe=p,this._loadPrimitiveOutline=m,this._state=0,this._promise=void 0,this._gltfLoader=void 0,this._buffers=[],this._components=void 0,this._transform=f.A.IDENTITY,this._batchTable=void 0,this._featureTable=void 0,this._instancesLength=0}(0,u.A)(Object.create)&&(R.prototype=Object.create(D.A.prototype),R.prototype.constructor=R),Object.defineProperties(R.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),R.prototype.load=function(){if((0,u.A)(this._promise))return this._promise;const e=S.A.parse(this._arrayBuffer,this._byteOffset),t=e.featureTableJson,n=e.featureTableBinary,i=e.batchTableJson,o=e.batchTableBinary,s=e.gltfFormat,a=new T.A(t,n);this._featureTable=a;const l=a.getGlobalProperty("INSTANCES_LENGTH");if(a.featuresLength=l,!(0,u.A)(l))throw new m.A("Feature table global property: INSTANCES_LENGTH must be defined");this._instancesLength=l;const d=a.getGlobalProperty("RTC_CENTER",c.A.FLOAT,3);(0,u.A)(d)&&(this._transform=f.A.fromTranslation(r.A.fromArray(d))),this._batchTable={json:i,binary:o};const A={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(0===s){let t=(0,h.A)(e.gltf);t=t.replace(/[\s\0]+$/,"");const n=this._baseResource.getDerivedResource({url:t});A.gltfResource=n,A.baseResource=n}else A.gltfResource=this._i3dmResource,A.typedArray=e.gltf;const p=new w.A(A);return this._gltfLoader=p,this._state=1,this._promise=p.load().then((()=>{if(!this.isDestroyed())return this._state=2,this})).catch((e=>{if(!this.isDestroyed())throw function(e,t){e.unload(),e._state=5;return e.getError("Failed to load i3dm",t)}(this,e)})),this._promise},R.prototype.process=function(e){if(s.A.typeOf.object("frameState",e),4===this._state)return!0;const t=this._gltfLoader;let n=!1;if(2===this._state&&(n=t.process(e)),!n)return!1;const i=t.components;return i.transform=f.A.multiplyTransformation(this._transform,i.transform,i.transform),function(e,t,n){let i;const s=e._featureTable,a=e._instancesLength;if(0===a)return;const l=s.getGlobalProperty("RTC_CENTER",c.A.FLOAT,3),d=s.getGlobalProperty("EAST_NORTH_UP"),h=s.hasProperty("NORMAL_UP")||s.hasProperty("NORMAL_UP_OCT32P")||d,_=s.hasProperty("SCALE")||s.hasProperty("SCALE_NON_UNIFORM"),v=function(e){if(e.hasProperty("POSITION"))return e.getPropertyArray("POSITION",c.A.FLOAT,3);if(e.hasProperty("POSITION_QUANTIZED")){const t=e.getPropertyArray("POSITION_QUANTIZED",c.A.UNSIGNED_SHORT,3),n=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",c.A.FLOAT,3);if(!(0,u.A)(n))throw new m.A("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",c.A.FLOAT,3);if(!(0,u.A)(i))throw new m.A("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=new Float32Array(t.length);for(let e=0;e<t.length/3;e++)for(let r=0;r<3;r++){const s=3*e+r;o[s]=t[s]/65535*i[r]+n[r]}return o}throw new m.A("Either POSITION or POSITION_QUANTIZED must be defined for each instance.")}(s);let T,w;h&&(T=new Float32Array(4*a)),_&&(w=new Float32Array(3*a));const S=new Float32Array(a),C=r.A.unpackArray(v);let x=new r.A;const I=new r.A,P=new r.A,D=new r.A,O=new A.A,R=new p.A,B=new Array(4),V=new r.A,G=new Array(3),j=new f.A;if(!(0,u.A)(l)){const e=o.A.fromPoints(C);for(i=0;i<C.length;i++)r.A.subtract(C[i],e.center,F),v[3*i+0]=F.x,v[3*i+1]=F.y,v[3*i+2]=F.z;const n=f.A.fromTranslation(e.center,U);t.transform=f.A.multiplyTransformation(n,t.transform,t.transform)}for(i=0;i<a;i++){x=r.A.clone(C[i]),(0,u.A)(l)&&r.A.add(x,r.A.unpack(l),x),h&&(H(s,d,i,R,x,P,I,D,O,j),p.A.pack(R,B,0),T[4*i+0]=B[0],T[4*i+1]=B[1],T[4*i+2]=B[2],T[4*i+3]=B[3]),_&&(z(s,i,V),r.A.pack(V,G,0),w[3*i+0]=G[0],w[3*i+1]=G[1],w[3*i+2]=G[2]);let e=s.getProperty("BATCH_ID",c.A.UNSIGNED_SHORT,1,i);(0,u.A)(e)||(e=i),S[i]=e}const W=new M;W.transformInWorldSpace=!0;const q=e._buffers,Y=new L;if(Y.name="Instance Translation",Y.semantic=E.A.TRANSLATION,Y.componentDatatype=c.A.FLOAT,Y.type=b.A.VEC3,Y.count=a,Y.typedArray=v,!h){const e=g.A.createVertexBuffer({context:n.context,typedArray:v,usage:y.A.STATIC_DRAW});e.vertexArrayDestroyable=!1,q.push(e),Y.buffer=e}if(W.attributes.push(Y),h){const e=new L;e.name="Instance Rotation",e.semantic=E.A.ROTATION,e.componentDatatype=c.A.FLOAT,e.type=b.A.VEC4,e.count=a,e.typedArray=T,W.attributes.push(e)}if(_){const e=new L;if(e.name="Instance Scale",e.semantic=E.A.SCALE,e.componentDatatype=c.A.FLOAT,e.type=b.A.VEC3,e.count=a,h)e.typedArray=w;else{const t=g.A.createVertexBuffer({context:n.context,typedArray:w,usage:y.A.STATIC_DRAW});t.vertexArrayDestroyable=!1,q.push(t),e.buffer=t}W.attributes.push(e)}const X=new L;X.name="Instance Feature ID",X.setIndex=0,X.semantic=E.A.FEATURE_ID,X.componentDatatype=c.A.FLOAT,X.type=b.A.SCALAR,X.count=a;const J=g.A.createVertexBuffer({context:n.context,typedArray:S,usage:y.A.STATIC_DRAW});J.vertexArrayDestroyable=!1,q.push(J),X.buffer=J,W.attributes.push(X);const Q=new N;Q.propertyTableId=0,Q.setIndex=0,Q.positionalLabel="instanceFeatureId_0",W.featureIds.push(Q);const $=t.nodes,K=$.length;let Z=!1;for(i=0;i<K;i++){const e=$[i];e.primitives.length>0&&(e.instances=Z?k(W):W,Z=!0)}}(this,i,e),function(e,t){const n=e._batchTable,i=e._instancesLength;if(0===i)return;let o;if((0,u.A)(n.json))o=(0,I.A)({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new P.A({name:C.A.BATCH_TABLE_CLASS_NAME,count:i});o=new O.A({schema:{},propertyTables:[e]})}t.structuralMetadata=o}(this,i),this._components=i,this._arrayBuffer=void 0,this._state=4,!0};const F=new r.A,B=new Array(4),U=new f.A;function k(e){const t=new M;t.transformInWorldSpace=e.transformInWorldSpace;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=(0,a.A)(n[e],!1);t.attributes.push(i)}return t.featureIds=e.featureIds,t}const V=new Array(4);function H(e,t,n,o,s,a,l,h,g,y){const b=e.getProperty("NORMAL_UP",c.A.FLOAT,3,n,B),v=e.getProperty("NORMAL_RIGHT",c.A.FLOAT,3,n,V);let T=!1;if((0,u.A)(b)){if(!(0,u.A)(v))throw new m.A("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");r.A.unpack(b,0,a),r.A.unpack(v,0,l),T=!0}else{const o=e.getProperty("NORMAL_UP_OCT32P",c.A.UNSIGNED_SHORT,2,n,B),r=e.getProperty("NORMAL_RIGHT_OCT32P",c.A.UNSIGNED_SHORT,2,n,V);if((0,u.A)(o)){if(!(0,u.A)(r))throw new m.A("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");i.A.octDecodeInRange(o[0],o[1],65535,a),i.A.octDecodeInRange(r[0],r[1],65535,l),T=!0}else t?(_.A.eastNorthUpToFixedFrame(s,d.A.WGS84,y),f.A.getMatrix3(y,g)):A.A.clone(A.A.IDENTITY,g)}T&&(r.A.cross(l,a,h),r.A.normalize(h,h),A.A.setColumn(g,0,l,g),A.A.setColumn(g,1,a,g),A.A.setColumn(g,2,h,g)),p.A.fromRotationMatrix(g,o)}function z(e,t,n){n=r.A.fromElements(1,1,1,n);const i=e.getProperty("SCALE",c.A.FLOAT,1,t);(0,u.A)(i)&&r.A.multiplyByScalar(n,i,n);const o=e.getProperty("SCALE_NON_UNIFORM",c.A.FLOAT,3,t,B);(0,u.A)(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}R.prototype.isUnloaded=function(){return 6===this._state},R.prototype.unload=function(){(0,u.A)(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),function(e){const t=e._buffers,n=t.length;for(let e=0;e<n;e++){const n=t[e];n.isDestroyed()||n.destroy()}t.length=0}(this),this._components=void 0,this._arrayBuffer=void 0,this._state=6};const G=R},3282:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(430346),o=n(491446),r=n(490129),s=n(624512),a=n(311994);const c={name:"ImageBasedLightingPipelineStage",process:function(e,t,n){const c=t.imageBasedLighting,l=e.shaderBuilder;l.addDefine("USE_IBL_LIGHTING",void 0,s.A.FRAGMENT),l.addUniform("vec2","model_iblFactor",s.A.FRAGMENT),a.A.isSupported(n.context)&&((c.useSphericalHarmonics||c.useSpecularEnvironmentMaps||c.enabled)&&l.addUniform("mat3","model_iblReferenceFrameMatrix",s.A.FRAGMENT),(0,o.A)(c.sphericalHarmonicCoefficients)?(l.addDefine("DIFFUSE_IBL",void 0,s.A.FRAGMENT),l.addDefine("CUSTOM_SPHERICAL_HARMONICS",void 0,s.A.FRAGMENT),l.addUniform("vec3","model_sphericalHarmonicCoefficients[9]",s.A.FRAGMENT)):c.useDefaultSphericalHarmonics&&l.addDefine("DIFFUSE_IBL",void 0,s.A.FRAGMENT),(0,o.A)(c.specularEnvironmentMapAtlas)&&c.specularEnvironmentMapAtlas.ready?(l.addDefine("SPECULAR_IBL",void 0,s.A.FRAGMENT),l.addDefine("CUSTOM_SPECULAR_IBL",void 0,s.A.FRAGMENT),l.addUniform("sampler2D","model_specularEnvironmentMaps",s.A.FRAGMENT),l.addUniform("vec2","model_specularEnvironmentMapsSize",s.A.FRAGMENT),l.addUniform("float","model_specularEnvironmentMapsMaximumLOD",s.A.FRAGMENT)):t.useDefaultSpecularMaps&&l.addDefine("SPECULAR_IBL",void 0,s.A.FRAGMENT)),(0,o.A)(c.luminanceAtZenith)&&(l.addDefine("USE_SUN_LUMINANCE",void 0,s.A.FRAGMENT),l.addUniform("float","model_luminanceAtZenith",s.A.FRAGMENT)),l.addFragmentLines(r.A);const u={model_iblFactor:function(){return c.imageBasedLightingFactor},model_iblReferenceFrameMatrix:function(){return t._iblReferenceFrameMatrix},model_luminanceAtZenith:function(){return c.luminanceAtZenith},model_sphericalHarmonicCoefficients:function(){return c.sphericalHarmonicCoefficients},model_specularEnvironmentMaps:function(){return c.specularEnvironmentMapAtlas.texture},model_specularEnvironmentMapsSize:function(){return c.specularEnvironmentMapAtlas.texture.dimensions},model_specularEnvironmentMapsMaximumLOD:function(){return c.specularEnvironmentMapAtlas.maximumMipmapLevel}};e.uniformMap=(0,i.A)(u,e.uniformMap)}}},281810:(e,t,n)=>{"use strict";n.d(t,{A:()=>Y});var i=n(961645),o=n(267980),r=n(376758),s=n(430346),a=n(571804),c=n(491446),l=n(584164),u=n(99479),d=n(543622),h=n(641613),A=n(442790),f=n(624512),p=n(75899),m=n(295673),_=n(370988),g=n(730839),y=n(866857),b=n(62467),v=n(78173),T=n(471147);const w=new l.A,E=new l.A,S=new l.A,C={name:"InstancingPipelineStage",_getInstanceTransformsAsMatrices:G,_transformsToTypedArray:k,process:function(e,t,n){const i=t.instances,a=i.attributes[0].count,u=e.shaderBuilder;u.addDefine("HAS_INSTANCING"),u.addVertexLines(p.A);const h=e.model,A=h.sceneGraph,v=e.runtimeNode,C=n.mode!==b.A.SCENE3D&&!n.scene3DOnly&&h._projectTo2D,x=[];!function(e,t,n,i,s){const a=T.A.getAttributeBySemantic(n,y.A.ROTATION);(0,c.A)(a)?function(e,t,n,i,s){const a=e.shaderBuilder,u=t.attributes[0].count,d=e.model,h=e.runtimeNode;a.addDefine("HAS_INSTANCE_MATRICES");let A,f=h.instancingTransformsBuffer;if((0,c.A)(f)||(A=G(t,u,e),f=j(k(A),i),d._modelResources.push(f),h.instancingTransformsBuffer=f),W(e,f,n,"Transform"),!s)return;const p=(0,r.A)(i);p.mode=b.A.COLUMBUS_VIEW,U(e,p);let m=h.instancingTransformsBuffer2D;if(!(0,c.A)(m)){const t=function(e,t,n,i){const r=L,s=N;O(t,r,s);const a=t.runtimeNode.instancingReferencePoint2D,c=e.length;for(let t=0;t<c;t++){const c=P(e[t],r,s,n,M),u=l.A.getTranslation(c,R),d=o.A.subtract(u,a,u);i[t]=l.A.setTranslation(c,d,i[t])}return i}(A,e,p,A);m=j(k(t),i),d._modelResources.push(m),h.instancingTransformsBuffer2D=m}W(e,m,n,"Transform2D")}(e,n,i,t,s):function(e,t,n,i,s){const a=e.shaderBuilder,l=e.runtimeNode,u=T.A.getAttributeBySemantic(t,y.A.TRANSLATION),d=T.A.getAttributeBySemantic(t,y.A.SCALE);if((0,c.A)(d)){a.addDefine("HAS_INSTANCE_SCALE");const t="Scale";q(e,d.buffer,d.byteOffset,d.byteStride,n,t)}if(!(0,c.A)(u))return;let h;const A=u.typedArray;(0,c.A)(A)?h=function(e,t,n){const i=new Array(t),r=e.typedArray,s=new o.A(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new o.A(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let e=0;e<t;e++){const t=new o.A(r[3*e],r[3*e+1],r[3*e+2]);i[e]=t,o.A.minimumByComponent(s,t,s),o.A.maximumByComponent(a,t,a)}const c=n.runtimeNode;return c.instancingTranslationMin=s,c.instancingTranslationMax=a,e.typedArray=void 0,i}(u,u.count,e):(0,c.A)(l.instancingTranslationMin)||(l.instancingTranslationMin=u.min,l.instancingTranslationMax=u.max),a.addDefine("HAS_INSTANCE_TRANSLATION");if(q(e,u.buffer,u.byteOffset,u.byteStride,n,"Translation"),!s)return;const f=(0,r.A)(i);f.mode=b.A.COLUMBUS_VIEW,U(e,f);let p=l.instancingTranslationBuffer2D;if(!(0,c.A)(p)){const t=function(e,t,n,i){const r=L,s=N;O(t,r,s);const a=t.runtimeNode.instancingReferencePoint2D,c=e.length;for(let t=0;t<c;t++){const c=e[t],l=D(c,r,s,n,c);i[t]=o.A.subtract(l,a,i[t])}return i}(h,e,f,h),n=function(e){const t=e.length,n=new Float32Array(3*t);for(let i=0;i<t;i++){const t=e[i],o=3*i;n[o+0]=t[0],n[o+1]=t[4],n[o+2]=t[8]}return n}(t);p=j(n,i),e.model._modelResources.push(p),l.instancingTranslationBuffer2D=p}q(e,p,0,void 0,n,"Translation2D")}(e,n,i,t,s)}(e,n,i,x,C),function(e,t,n,i){const o=n.attributes,r=e.shaderBuilder;for(let t=0;t<o.length;t++){const n=o[t];n.semantic===y.A.FEATURE_ID&&(n.setIndex>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=n.setIndex+1),i.push({index:e.attributeIndex++,vertexBuffer:n.buffer,componentsPerAttribute:g.A.getNumberOfComponents(n.type),componentDatatype:n.componentDatatype,normalize:!1,offsetInBytes:n.byteOffset,strideInBytes:n.byteStride,instanceDivisor:1}),r.addAttribute("float",`a_instanceFeatureId_${n.setIndex}`))}}(e,0,i,x);const I={};if(i.transformInWorldSpace?(u.addDefine("USE_LEGACY_INSTANCING",void 0,f.A.VERTEX),u.addUniform("mat4","u_instance_modifiedModelView",f.A.VERTEX),u.addUniform("mat4","u_instance_nodeTransform",f.A.VERTEX),I.u_instance_modifiedModelView=function(){let e=l.A.multiplyTransformation(h.modelMatrix,A.components.transform,w);return C?l.A.multiplyTransformation(n.context.uniformState.view3D,e,w):(n.mode!==b.A.SCENE3D&&(e=d.A.basisTo2D(n.mapProjection,e,w)),l.A.multiplyTransformation(n.context.uniformState.view,e,w))},I.u_instance_nodeTransform=function(){return l.A.multiplyTransformation(A.axisCorrectionMatrix,v.computedTransform,E)},u.addVertexLines(_.A)):u.addVertexLines(m.A),C){u.addDefine("USE_2D_INSTANCING",void 0,f.A.VERTEX),u.addUniform("mat4","u_modelView2D",f.A.VERTEX);const e=n.context,t=l.A.fromTranslation(v.instancingReferencePoint2D,new l.A);I.u_modelView2D=function(){return l.A.multiplyTransformation(e.uniformState.view,t,S)}}e.uniformMap=(0,s.A)(I,e.uniformMap),e.instanceCount=a,e.attributes.push.apply(e.attributes,x)}},x=new l.A,I=new o.A;function P(e,t,n,i,o){let r=l.A.multiplyTransformation(t,e,x);return r=l.A.multiplyTransformation(r,n,x),d.A.basisTo2D(i.mapProjection,r,o)}function D(e,t,n,i,o){const r=l.A.fromTranslation(e,x);let s=l.A.multiplyTransformation(t,r,x);s=l.A.multiplyTransformation(s,n,x);const a=l.A.getTranslation(s,I);return v.A.computeActualWgs84Position(i,a,o)}function O(e,t,n){const i=e.model,o=i.sceneGraph;e.runtimeNode.node.instances.transformInWorldSpace?(t=l.A.multiplyTransformation(i.modelMatrix,o.components.transform,t),n=l.A.multiplyTransformation(o.axisCorrectionMatrix,e.runtimeNode.computedTransform,n)):(t=l.A.clone(o.computedModelMatrix,t),t=l.A.multiplyTransformation(t,e.runtimeNode.computedTransform,t),n=l.A.clone(l.A.IDENTITY,n))}const L=new l.A,N=new l.A,M=new l.A,R=new o.A,F=new o.A,B=new o.A;function U(e,t){const n=e.runtimeNode,i=e.model.sceneGraph.computedModelMatrix,r=l.A.multiplyByPoint(i,n.instancingTranslationMin,F),s=v.A.computeActualWgs84Position(t,r,r),a=l.A.multiplyByPoint(i,n.instancingTranslationMax,B),c=v.A.computeActualWgs84Position(t,a,a);n.instancingReferencePoint2D=o.A.lerp(s,c,.5,new o.A)}function k(e){const t=e.length,n=new Float32Array(12*t);for(let i=0;i<t;i++){const t=e[i],o=12*i;n[o+0]=t[0],n[o+1]=t[4],n[o+2]=t[8],n[o+3]=t[12],n[o+4]=t[1],n[o+5]=t[5],n[o+6]=t[9],n[o+7]=t[13],n[o+8]=t[2],n[o+9]=t[6],n[o+10]=t[10],n[o+11]=t[14]}return n}const V=new o.A,H=new u.A,z=new o.A;function G(e,t,n){const r=new Array(t),s=T.A.getAttributeBySemantic(e,y.A.TRANSLATION),a=T.A.getAttributeBySemantic(e,y.A.ROTATION),d=T.A.getAttributeBySemantic(e,y.A.SCALE),h=new o.A(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),A=new o.A(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),f=(0,c.A)(s),p=(0,c.A)(a),m=(0,c.A)(d),_=f?s.typedArray:new Float32Array(3*t);let g,b=p?a.typedArray:new Float32Array(4*t);p&&a.normalized&&(b=i.A.dequantize(b,a.componentDatatype,a.type,t)),m?g=d.typedArray:(g=new Float32Array(3*t),g.fill(1));for(let e=0;e<t;e++){const t=new o.A(_[3*e],_[3*e+1],_[3*e+2],V);o.A.maximumByComponent(h,t,h),o.A.minimumByComponent(A,t,A);const n=new u.A(b[4*e],b[4*e+1],b[4*e+2],p?b[4*e+3]:1,H),i=new o.A(g[3*e],g[3*e+1],g[3*e+2],z),s=l.A.fromTranslationQuaternionRotationScale(t,n,i,new l.A);r[e]=s}const v=n.runtimeNode;return v.instancingTranslationMin=A,v.instancingTranslationMax=h,f&&(s.typedArray=void 0),p&&(a.typedArray=void 0),m&&(d.typedArray=void 0),r}function j(e,t){const n=h.A.createVertexBuffer({context:t.context,typedArray:e,usage:A.A.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}function W(e,t,n,i){const o=a.A.getSizeInBytes(a.A.FLOAT),r=12*o,s=[{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:a.A.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:r,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:a.A.FLOAT,normalize:!1,offsetInBytes:4*o,strideInBytes:r,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:a.A.FLOAT,normalize:!1,offsetInBytes:8*o,strideInBytes:r,instanceDivisor:1}],c=e.shaderBuilder;c.addAttribute("vec4",`a_instancing${i}Row0`),c.addAttribute("vec4",`a_instancing${i}Row1`),c.addAttribute("vec4",`a_instancing${i}Row2`),n.push.apply(n,s)}function q(e,t,n,i,o,r){o.push({index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:3,componentDatatype:a.A.FLOAT,normalize:!1,offsetInBytes:n,strideInBytes:i,instanceDivisor:1}),e.shaderBuilder.addAttribute("vec3",`a_instance${r}`)}const Y=C},10803:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLIT:0,PBR:1})},817082:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(624512),r=n(419421),s=n(10803);const a={name:"LightingPipelineStage",process:function(e,t){const n=e.model,a=e.lightingOptions,c=e.shaderBuilder;(0,i.A)(n.lightColor)&&(c.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,o.A.FRAGMENT),c.addUniform("vec3","model_lightColorHdr",o.A.FRAGMENT),e.uniformMap.model_lightColorHdr=function(){return n.lightColor}),a.lightingModel===s.A.PBR?c.addDefine("LIGHTING_PBR",void 0,o.A.FRAGMENT):c.addDefine("LIGHTING_UNLIT",void 0,o.A.FRAGMENT),c.addFragmentLines(r.A)}}},193497:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(491446),o=n(419061),r=n(267980),s=n(626809),a=n(331185),c=n(624512),l=n(760866),u=n(563402),d=n(953019),h=n(995537),A=n(595826),f=n(10803),p=n(471147);const m=h.A.Material,_=h.A.MetallicRoughness,g=h.A.SpecularGlossiness,y={name:"MaterialPipelineStage",_processTexture:v,_processTextureTransform:b};function b(e,t,n,i,o){const r=`HAS_${o}_TEXTURE_TRANSFORM`;e.addDefine(r,void 0,c.A.FRAGMENT);const s=`${i}Transform`;e.addUniform("mat3",s,c.A.FRAGMENT),t[s]=function(){return n.transform}}function v(e,t,n,r,s,l){e.addUniform("sampler2D",r,c.A.FRAGMENT),t[r]=function(){return(0,o.A)(n.texture,l)};const u=`HAS_${s}_TEXTURE`;e.addDefine(u,void 0,c.A.FRAGMENT);const d=`v_texCoord_${n.texCoord}`,h=`TEXCOORD_${s}`;e.addDefine(h,d,c.A.FRAGMENT);const A=n.transform;(0,i.A)(A)&&!a.A.equals(A,a.A.IDENTITY)&&b(e,t,n,r,s)}y.process=function(e,t,n){const o=t.material,a=e.model,h=(0,i.A)(a.classificationType),y=h,b=e.uniformMap,T=e.shaderBuilder,w=n.context.defaultTexture;!function(e,t,n,o,s,a,l){const u=e.emissiveFactor;if((0,i.A)(u)&&!r.A.equals(u,m.DEFAULT_EMISSIVE_FACTOR)){n.addUniform("vec3","u_emissiveFactor",c.A.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,c.A.FRAGMENT);const o=e.emissiveTexture;(0,i.A)(o)&&!l&&v(n,t,o,"u_emissiveTexture","EMISSIVE",a)}const d=e.normalTexture;(0,i.A)(d)&&!l&&v(n,t,d,"u_normalTexture","NORMAL",s);const h=e.occlusionTexture;(0,i.A)(h)&&!l&&v(n,t,h,"u_occlusionTexture","OCCLUSION",o)}(o,b,T,w,n.context.defaultNormalTexture,n.context.defaultEmissiveTexture,y),(0,i.A)(o.specularGlossiness)?function(e,t,n,o,a){const l=e.specularGlossiness;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,c.A.FRAGMENT);const u=l.diffuseTexture;(0,i.A)(u)&&!a&&v(n,t,u,"u_diffuseTexture","DIFFUSE",o);const d=l.diffuseFactor;(0,i.A)(d)&&!s.A.equals(d,g.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",c.A.FRAGMENT),t.u_diffuseFactor=function(){return l.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,c.A.FRAGMENT));const h=l.specularGlossinessTexture;(0,i.A)(h)&&!a&&v(n,t,h,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",o);const A=l.specularFactor;(0,i.A)(A)&&!r.A.equals(A,g.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_specularFactor",c.A.FRAGMENT),t.u_specularFactor=function(){return l.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,c.A.FRAGMENT));const f=l.glossinessFactor;(0,i.A)(f)&&f!==g.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",c.A.FRAGMENT),t.u_glossinessFactor=function(){return l.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,c.A.FRAGMENT))}(o,b,T,w,y):function(e,t,n,o,r){const a=e.metallicRoughness;n.addDefine("USE_METALLIC_ROUGHNESS",void 0,c.A.FRAGMENT);const l=a.baseColorTexture;(0,i.A)(l)&&!r&&v(n,t,l,"u_baseColorTexture","BASE_COLOR",o);const u=a.baseColorFactor;(0,i.A)(u)&&!s.A.equals(u,_.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",c.A.FRAGMENT),t.u_baseColorFactor=function(){return a.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,c.A.FRAGMENT));const d=a.metallicRoughnessTexture;(0,i.A)(d)&&!r&&v(n,t,d,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",o);const h=a.metallicFactor;(0,i.A)(h)&&h!==_.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",c.A.FRAGMENT),t.u_metallicFactor=function(){return a.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,c.A.FRAGMENT));const A=a.roughnessFactor;(0,i.A)(A)&&A!==_.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",c.A.FRAGMENT),t.u_roughnessFactor=function(){return a.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,c.A.FRAGMENT))}(o,b,T,w,y);const E=p.A.getAttributeBySemantic(t,A.A.NORMAL),S=e.lightingOptions;o.unlit||!E||h?S.lightingModel=f.A.UNLIT:S.lightingModel=f.A.PBR;const C=a.backFaceCulling&&!o.doubleSided;e.renderStateOptions.cull.enabled=C;const x=e.alphaOptions;o.alphaMode===d.A.BLEND?x.pass=l.A.TRANSLUCENT:o.alphaMode===d.A.MASK&&(x.alphaCutoff=o.alphaCutoff),T.addFragmentLines(u.A),o.doubleSided&&T.addDefine("HAS_DOUBLE_SIDED_MATERIAL",void 0,c.A.BOTH)};const T=y},64389:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(491446),o=n(624512),r=n(143938),s=n(801202),a=n(374607),c=n(471147);const l={name:"MetadataPipelineStage",STRUCT_ID_METADATA_VS:"MetadataVS",STRUCT_ID_METADATA_FS:"MetadataFS",STRUCT_NAME_METADATA:"Metadata",STRUCT_ID_METADATA_CLASS_VS:"MetadataClassVS",STRUCT_ID_METADATA_CLASS_FS:"MetadataClassFS",STRUCT_NAME_METADATA_CLASS:"MetadataClass",STRUCT_ID_METADATA_STATISTICS_VS:"MetadataStatisticsVS",STRUCT_ID_METADATA_STATISTICS_FS:"MetadataStatisticsFS",STRUCT_NAME_METADATA_STATISTICS:"MetadataStatistics",FUNCTION_ID_INITIALIZE_METADATA_VS:"initializeMetadataVS",FUNCTION_ID_INITIALIZE_METADATA_FS:"initializeMetadataFS",FUNCTION_SIGNATURE_INITIALIZE_METADATA:"void initializeMetadata(out Metadata metadata, out MetadataClass metadataClass, out MetadataStatistics metadataStatistics, ProcessedAttributes attributes)",FUNCTION_ID_SET_METADATA_VARYINGS:"setMetadataVaryings",FUNCTION_SIGNATURE_SET_METADATA_VARYINGS:"void setMetadataVaryings()",METADATA_CLASS_FIELDS:[{specName:"noData",shaderName:"noData"},{specName:"default",shaderName:"defaultValue"},{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"}],METADATA_STATISTICS_FIELDS:[{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"},{specName:"mean",shaderName:"mean",type:"float"},{specName:"median",shaderName:"median"},{specName:"standardDeviation",shaderName:"standardDeviation",type:"float"},{specName:"variance",shaderName:"variance",type:"float"},{specName:"sum",shaderName:"sum"}],process:function(e,t,n){const{shaderBuilder:u,model:f}=e,{structuralMetadata:p={},content:m}=f,_=m?.tileset.metadataExtension?.statistics,g=function(e,t,n){return(0,i.A)(e)?e.flatMap((e=>function(e,t,n){const{getAttributeByName:i,getAttributeInfo:r,sanitizeGlslIdentifier:s}=c.A,a=e.class.id,l=n?.classes[a],u=Object.entries(e.properties),d=new Array(u.length);for(let e=0;e<u.length;e++){const[n,a]=u[e],c=i(t,a.attribute),{glslType:h,variableName:A}=r(c);d[e]={metadataVariable:s(n),property:a,type:a.classProperty.type,glslType:h,variableName:A,propertyStatistics:l?.properties[n],shaderDestination:o.A.BOTH}}return d}(e,t,n))):[]}(p.propertyAttributes,t,_),y=function(e,t){return(0,i.A)(e)?e.flatMap((e=>function(e,t){const{sanitizeGlslIdentifier:n}=c.A,i=e.class.id,r=t?.classes[i],s=Object.entries(e.properties).filter((([e,t])=>t.isGpuCompatible())),a=new Array(s.length);for(let e=0;e<s.length;e++){const[t,i]=s[e];a[e]={metadataVariable:n(t),property:i,type:i.classProperty.type,glslType:i.getGlslType(),propertyStatistics:r?.properties[t],shaderDestination:o.A.FRAGMENT}}return a}(e,t))):[]}(p.propertyTextures,_);!function(e,t){const n=new Set,r=new Set;for(let e=0;e<t.length;e++){const{type:o,glslType:s,propertyStatistics:c}=t[e];n.add(s),(0,i.A)(c)&&o!==a.A.ENUM&&r.add(s)}const s=l.METADATA_CLASS_FIELDS;for(const e of n)u(`${e}MetadataClass`,e,s);const c=l.METADATA_STATISTICS_FIELDS;for(const e of r)u(`${e}MetadataStatistics`,e,c);function u(t,n,i){e.addStruct(t,t,o.A.BOTH);for(let o=0;o<i.length;o++){const{shaderName:r}=i[o],s="float"===i[o].type?d(n):n;e.addStructField(t,s,r)}}}(u,g.concat(y)),function(e){e.addStruct(l.STRUCT_ID_METADATA_VS,l.STRUCT_NAME_METADATA,o.A.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_FS,l.STRUCT_NAME_METADATA,o.A.FRAGMENT),e.addStruct(l.STRUCT_ID_METADATA_CLASS_VS,l.STRUCT_NAME_METADATA_CLASS,o.A.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_CLASS_FS,l.STRUCT_NAME_METADATA_CLASS,o.A.FRAGMENT),e.addStruct(l.STRUCT_ID_METADATA_STATISTICS_VS,l.STRUCT_NAME_METADATA_STATISTICS,o.A.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_STATISTICS_FS,l.STRUCT_NAME_METADATA_STATISTICS,o.A.FRAGMENT),e.addFunction(l.FUNCTION_ID_INITIALIZE_METADATA_VS,l.FUNCTION_SIGNATURE_INITIALIZE_METADATA,o.A.VERTEX),e.addFunction(l.FUNCTION_ID_INITIALIZE_METADATA_FS,l.FUNCTION_SIGNATURE_INITIALIZE_METADATA,o.A.FRAGMENT),e.addFunction(l.FUNCTION_ID_SET_METADATA_VARYINGS,l.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,o.A.VERTEX)}(u),u.addVertexLines(s.A),u.addFragmentLines(r.A);for(let t=0;t<g.length;t++)h(e,g[t]);for(let t=0;t<y.length;t++)A(e,y[t])}},u={int:"float",ivec2:"vec2",ivec3:"vec3",ivec4:"vec4"};function d(e){const t=u[e];return(0,i.A)(t)?t:e}function h(e,t){!function(e,t){const{shaderBuilder:n}=e,{metadataVariable:i,property:r,glslType:s}=t,a=_({valueExpression:`attributes.${t.variableName}`,renderResources:e,glslType:s,metadataVariable:i,shaderDestination:o.A.BOTH,property:r});n.addStructField(l.STRUCT_ID_METADATA_VS,s,i),n.addStructField(l.STRUCT_ID_METADATA_FS,s,i);const c=`metadata.${i} = ${a};`;n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,[c]),n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,[c])}(e,t),f(e.shaderBuilder,t),p(e.shaderBuilder,t)}function A(e,t){!function(e,t){const{shaderBuilder:n,uniformMap:i}=e,{metadataVariable:r,glslType:s,property:a}=t,{texCoord:c,channels:u,index:d,texture:h}=a.textureReader,A=`u_propertyTexture_${d}`;i.hasOwnProperty(A)||(n.addUniform("sampler2D",A,o.A.FRAGMENT),i[A]=()=>h),n.addStructField(l.STRUCT_ID_METADATA_FS,s,r);const f=`texture(${A}, attributes.texCoord_${c}).${u}`,p=`metadata.${r} = ${_({valueExpression:a.unpackInShader(f),renderResources:e,glslType:s,metadataVariable:r,shaderDestination:o.A.FRAGMENT,property:a})};`;n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,[p])}(e,t),f(e.shaderBuilder,t),p(e.shaderBuilder,t)}function f(e,t){const{classProperty:n}=t.property,{metadataVariable:i,glslType:r,shaderDestination:s}=t,a=m(l.METADATA_CLASS_FIELDS,n,`metadataClass.${i}`,r),c=`${r}MetadataClass`;e.addStructField(l.STRUCT_ID_METADATA_CLASS_FS,c,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,a),o.A.includesVertexShader(s)&&(e.addStructField(l.STRUCT_ID_METADATA_CLASS_VS,c,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,a))}function p(e,t){const{propertyStatistics:n}=t;if(!(0,i.A)(n))return;const{metadataVariable:r,type:s,glslType:c}=t;if(s===a.A.ENUM)return;const u=m(l.METADATA_STATISTICS_FIELDS,n,`metadataStatistics.${r}`,c),d=`${c}MetadataStatistics`;e.addStructField(l.STRUCT_ID_METADATA_STATISTICS_FS,d,r),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,u),o.A.includesVertexShader(t.shaderDestination)&&(e.addStructField(l.STRUCT_ID_METADATA_STATISTICS_VS,d,r),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,u))}function m(e,t,n,o){return(0,i.A)(t)?e.map((function(e){const r=t[e.specName];if((0,i.A)(r))return`${n}.${e.shaderName} = ${o}(${r});`})).filter(i.A):[]}function _(e){const{valueExpression:t,property:n}=e;if(!n.hasValueTransform)return t;const i=e.metadataVariable,o=`u_${i}_offset`,r=`u_${i}_scale`,{shaderBuilder:s,uniformMap:a}=e.renderResources,{glslType:c,shaderDestination:l}=e;s.addUniform(c,o,l),s.addUniform(c,r,l);const{offset:u,scale:d}=n;return a[o]=()=>u,a[r]=()=>d,`czm_valueTransform(${o}, ${r}, ${t})`}const g=l},623379:(e,t,n)=>{"use strict";n.d(t,{A:()=>oe});var i=n(660662),o=n(267980),r=n(336946),s=n(369031),a=n(672743),c=n(41476),l=n(491446),u=n(419061),d=n(786101),h=n(605971),A=n(677354),f=n(853331),p=n(955943),m=n(331185),_=n(584164),g=n(744603),y=n(123245),b=n(760866),v=n(711284),T=n(428027),w=n(982504),E=n(63316),S=n(208198),C=n(929771),x=n(62467),I=n(78173),P=n(988609),D=n(913419),O=n(802227),L=n(66502),N=n(521032),M=n(4773),R=n(947129),F=n(814071),B=n(650884),U=n(226827),k=n(471147),V=n(983884),H=n(31908),z=n(942836);function G(e){e=(0,u.A)(e,u.A.EMPTY_OBJECT),s.A.typeOf.object("options.loader",e.loader),s.A.typeOf.object("options.resource",e.resource),this._loader=e.loader,this._resource=e.resource,this.type=(0,u.A)(e.type,U.A.GLTF),this.modelMatrix=_.A.clone((0,u.A)(e.modelMatrix,_.A.IDENTITY)),this._modelMatrix=_.A.clone(this.modelMatrix),this._scale=(0,u.A)(e.scale,1),this._minimumPixelSize=(0,u.A)(e.minimumPixelSize,0),this._maximumScale=e.maximumScale,this._clampedScale=(0,l.A)(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=m.A.clone(m.A.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new M.A(this),this._clampAnimations=(0,u.A)(e.clampAnimations,!0),this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=c.A.clone(e.color),this._colorBlendMode=(0,u.A)(e.colorBlendMode,T.A.HIGHLIGHT),this._colorBlendAmount=(0,u.A)(e.colorBlendAmount,.5);const t=(0,u.A)(e.silhouetteColor,c.A.RED);this._silhouetteColor=c.A.clone(t),this._silhouetteSize=(0,u.A)(e.silhouetteSize,0),this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=(0,u.A)(e.cull,!0),this._opaquePass=(0,u.A)(e.opaquePass,b.A.OPAQUE),this._allowPicking=(0,u.A)(e.allowPicking,!0),this._show=(0,u.A)(e.show,!0),this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=(0,u.A)(e.featureIdLabel,"featureId_0");"number"==typeof n&&(n=`featureId_${n}`),this._featureIdLabel=n;let r=(0,u.A)(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"==typeof r&&(r=`instanceFeatureId_${r}`),this._instanceFeatureIdLabel=r,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new i.A,this._initialRadius=void 0,this._heightReference=(0,u.A)(e.heightReference,E.A.NONE),this._heightDirty=this._heightReference!==E.A.NONE,this._removeUpdateHeightCallback=void 0,this._clampedModelMatrix=void 0;const d=e.scene;(0,l.A)(d)&&(0,l.A)(d.terrainProviderChanged)&&(this._terrainProviderChangedCallback=d.terrainProviderChanged.addEventListener((function(){this._heightDirty=!0}),this)),this._scene=d,this._distanceDisplayCondition=e.distanceDisplayCondition;const h=new C.A(e.pointCloudShading);this._pointCloudShading=h,this._attenuation=h.attenuation,this._pointCloudBackFaceCulling=h.backFaceCulling;const A=e.clippingPlanes;(0,l.A)(A)&&void 0===A.owner?v.A.setOwner(A,this,"_clippingPlanes"):this._clippingPlanes=A,this._clippingPlanesState=0,this._clippingPlanesMatrix=_.A.clone(_.A.IDENTITY),this._lightColor=o.A.clone(e.lightColor),this._imageBasedLighting=(0,l.A)(e.imageBasedLighting)?e.imageBasedLighting:new S.A,this._shouldDestroyImageBasedLighting=!(0,l.A)(e.imageBasedLighting),this._backFaceCulling=(0,u.A)(e.backFaceCulling,!0),this._backFaceCullingDirty=!1,this._shadows=(0,u.A)(e.shadows,P.A.ENABLED),this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=(0,u.A)(e.debugShowBoundingVolume,!1),this._enableDebugWireframe=(0,u.A)(e.enableDebugWireframe,!1),this._enableShowOutline=(0,u.A)(e.enableShowOutline,!0),this._debugWireframe=(0,u.A)(e.debugWireframe,!1),!0===this._debugWireframe&&!1===this._enableDebugWireframe&&this.type===U.A.GLTF&&(0,V.A)("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltf, otherwise debugWireframe will be ignored.");let f=e.credit;"string"==typeof f&&(f=new a.A(f)),this._credit=f,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=(0,u.A)(e.showCreditsOnScreen,!1),this._showCreditsOnScreenDirty=!0,this._splitDirection=(0,u.A)(e.splitDirection,D.A.NONE),this._enableShowOutline=(0,u.A)(e.enableShowOutline,!0),this.showOutline=(0,u.A)(e.showOutline,!0),this.outlineColor=(0,u.A)(e.outlineColor,c.A.BLACK),this._classificationType=e.classificationType,this._statistics=new B.A,this._sceneMode=void 0,this._projectTo2D=(0,u.A)(e.projectTo2D,!1),this._skipLevelOfDetail=!1,this._ignoreCommands=(0,u.A)(e.ignoreCommands,!1),this._texturesLoadedPromise=void 0,this._completeLoad=void 0,this._rejectLoad=void 0,this._completeTexturesLoad=void 0,this._rejectTexturesLoad=void 0,(0,l.A)(this._loader._promise)?(this._readyPromise=Promise.resolve(this),this._texturesLoadedPromise=Promise.resolve(this)):(this._readyPromise=new Promise(((e,t)=>{this._completeLoad=()=>(e(this),!1),this._rejectLoad=e=>(t(e),!1)})),this._loader instanceof H.A?this._texturesLoadedPromise=Promise.resolve(this):this._texturesLoadedPromise=new Promise(((e,t)=>{this._completeTexturesLoad=()=>(e(this),!1),this._rejectTexturesLoad=e=>(t(e),!1)})),this._loader.load().catch((e=>{this.isDestroyed()||!(0,l.A)(this._loader)||this._loader.isDestroyed()||(this._rejectLoad=this._rejectLoad(k.A.getError("model",this._resource,e)))}))),this._errorEvent=new p.A,this._readyEvent=new p.A,this._texturesReadyEvent=new p.A,this._sceneGraph=void 0,this._nodesByName={},this.pickObject=e.pickObject}function j(e,t){e._errorEvent.numberOfListeners>0?e._errorEvent.raiseEvent(t):console.log(t)}function W(e,t){if(!(0,l.A)(e)&&!(0,l.A)(t))return!1;if((0,l.A)(e)!==(0,l.A)(t))return!0;const n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}Object.defineProperties(G.prototype,{ready:{get:function(){return this._ready}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},incrementallyLoadTextures:{get:function(){return(0,u.A)(this._loader.incrementallyLoadTextures,!1)}},texturesReadyEvent:{get:function(){return this._texturesReadyEvent}},readyPromise:{get:function(){return(0,d.A)("Model.readyPromise","Model.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in 1.107. Use Model.fromGltfAsync and Model.readyEvent instead."),this._readyPromise}},texturesLoadedPromise:{get:function(){return(0,d.A)("Model.texturesLoadedPromise","Model.texturesLoadedPromise was deprecated in CesiumJS 1.104.  It will be removed in 1.107. Use Model.fromGltfAsync and Model.texturesReadyEvent instead."),this._texturesLoadedPromise}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){s.A.defined("pointCloudShading",e),e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,l.A)(e)&&e.far<=e.near)throw new h.A("far must be greater than near");this._distanceDisplayCondition=f.A.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){W(e,this._color)&&this.resetDrawCommands(),this._color=c.A.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!c.A.equals(e,this._silhouetteColor)){const t=W(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=c.A.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){const t=this._silhouetteSize,n=e>0&&0===t||0===e&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){if(!this._ready)throw new h.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return K(this,(0,l.A)(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e,!0===this._debugWireframe&&!1===this._enableDebugWireframe&&this.type===U.A.GLTF&&(0,V.A)("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltfAsync, otherwise debugWireframe will be ignored.")}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),s.A.typeOf.string("value",e),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),s.A.typeOf.string("value",e),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(v.A.setOwner(e,this,"_clippingPlanes"),this.resetDrawCommands())}},lightColor:{get:function(){return this._lightColor},set:function(e){(0,l.A)(e)!==(0,l.A)(this._lightColor)&&this.resetDrawCommands(),this._lightColor=o.A.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){s.A.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}}),G.prototype.getNode=function(e){if(!this._ready)throw new h.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return s.A.typeOf.string("name",e),this._nodesByName[e]},G.prototype.setArticulationStage=function(e,t){if(s.A.typeOf.number("value",t),!this._ready)throw new h.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");this._sceneGraph.setArticulationStage(e,t)},G.prototype.applyArticulations=function(){if(!this._ready)throw new h.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");this._sceneGraph.applyArticulations()},G.prototype.makeStyleDirty=function(){this._styleDirty=!0},G.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};const q=new _.A,Y=new m.A,X=new _.A;function J(e){const t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=z.A.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}G.prototype.update=function(e){let t=!1;try{t=function(e,t){return!(!e._resourcesLoaded||!e._texturesLoaded)||(t.afterRender.push((()=>!0)),e._loader.process(t))}(this,e)}catch(e){if(this._loader.incrementallyLoadTextures)if("TextureError"===e.name)j(this,e),this._rejectTexturesLoad=this._rejectTexturesLoad&&this._rejectTexturesLoad(e);else{const t=k.A.getError("model",this._resource,e);j(this,t),this._rejectLoad=this._rejectLoad&&this._rejectLoad(t)}else{const t=k.A.getError("model",this._resource,e);j(this,t),this._rejectLoad=this._rejectLoad&&this._rejectLoad(t),this._rejectTexturesLoad=this._rejectTexturesLoad&&this._rejectTexturesLoad(t)}}if(function(e,t){(0,l.A)(e._customShader)&&e._customShader.update(t)}(this,e),function(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}(this,e),!this._resourcesLoaded&&t){this._resourcesLoaded=!0;const e=this._loader.components;if(!(0,l.A)(e)){if(this._loader.isUnloaded())return;const e=k.A.getError("model",this._resource,new y.A("Failed to load model."));j(e),this._rejectLoad=this._rejectLoad&&this._rejectLoad(e)}const t=e.structuralMetadata;(0,l.A)(t)&&t.propertyTableCount>0&&function(e,t){const n=e._featureTables,i=t.propertyTables,o=i.length;for(let t=0;t<o;t++){const o=i[t],r=new R.A({model:e,propertyTable:o});n.push(r)}}(this,t);const n=new F.A({model:this,modelComponents:e});this._sceneGraph=n,this._gltfCredits=n.components.asset.credits}var n;this._resourcesLoaded&&e.mode!==x.A.MORPHING&&(function(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;const t=e._sceneGraph.components,n=t.structuralMetadata;(0,l.A)(n)&&n.propertyTableCount>0&&(e.featureTableId=function(e,t){const n=t._featureIdLabel,i=t._instanceFeatureIdLabel;let o,r,s,a;for(o=0;o<e.nodes.length;o++)if(a=e.nodes[o],(0,l.A)(a.instances)&&(s=k.A.getFeatureIdsByLabel(a.instances.featureIds,i),(0,l.A)(s)&&(0,l.A)(s.propertyTableId)))return s.propertyTableId;for(o=0;o<e.nodes.length;o++)for(a=e.nodes[o],r=0;r<a.primitives.length;r++){const e=a.primitives[r],t=k.A.getFeatureIdsByLabel(e.featureIds,n);if((0,l.A)(t))return t.propertyTableId}if(1===t._featureTables.length)return 0}(t,e),e._styleDirty=!0,e.resetDrawCommands())}(this),(n=this)._styleDirty&&(n.applyStyle(n._style),n._styleDirty=!1),function(e,t){const n=e._featureTables,i=n.length;let o=!1;for(let e=0;e<i;e++)n[e].update(t),n[e].styleCommandsNeededDirty&&(o=!0);o&&J(e)}(this,e),function(e){const t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}(this),function(e,t){e._silhouetteDirty&&(ne(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}(this,e),function(e,t){const n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}(this,e),function(e,t){let n=0;e.isClippingEnabled()&&(e._clippingPlanes.owner===e&&e._clippingPlanes.update(t),n=e._clippingPlanes.clippingPlanesState),n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}(this,e),function(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}(this,e),this._defaultTexture=e.context.defaultTexture,function(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}(this,e),function(e,t){if(!_.A.equals(e.modelMatrix,e._modelMatrix)){if(t.mode!==x.A.SCENE3D&&e._projectTo2D)throw new h.A("Model.modelMatrix cannot be changed in 2D or Columbus View if projectTo2D is true.");e._updateModelMatrix=!0,e._modelMatrix=_.A.clone(e.modelMatrix,e._modelMatrix)}}(this,e),function(e){if(!e._updateModelMatrix&&!e._heightDirty&&0===e._minimumPixelSize)return;(0,l.A)(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);const t=e._scene;if(!(0,l.A)(t)||!(0,l.A)(t.globe)||e.heightReference===E.A.NONE){if(e.heightReference!==E.A.NONE)throw new h.A("Height reference is not supported without a scene and globe.");return void(e._clampedModelMatrix=void 0)}const n=t.globe,i=n.ellipsoid,o=e.modelMatrix;Q.x=o[12],Q.y=o[13],Q.z=o[14];const s=i.cartesianToCartographic(Q);(0,l.A)(e._clampedModelMatrix)||(e._clampedModelMatrix=_.A.clone(o,new _.A));const a=n._surface;e._removeUpdateHeightCallback=a.updateHeight(s,ee(e,i,s));const c=n.getHeight(s);if((0,l.A)(c)){const t=ee(e,i,s);r.A.clone(s,$),$.height=c,i.cartographicToCartesian($,Q),t(Q)}e._heightDirty=!1,e._updateModelMatrix=!0}(this),function(e,t){if(!e._updateModelMatrix&&0===e._minimumPixelSize)return;const n=(0,l.A)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;K(e,n),function(e,t,n){let i=e.scale;if(0!==e.minimumPixelSize&&!e._projectTo2D){const o=n.context,r=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);_.A.getTranslation(t,Q),e._sceneMode!==x.A.SCENE3D&&I.A.computeActualWgs84Position(n,Q,Q);const s=e._boundingSphere.radius,a=function(e,t,n){return Z.center=e,Z.radius=t,n.camera.getPixelSize(Z,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}(Q,s,n),c=1/a;Math.min(c*(2*s),r)<e.minimumPixelSize&&(i=e.minimumPixelSize*a/(2*e._initialRadius))}e._computedScale=(0,l.A)(e.maximumScale)?Math.min(e.maximumScale,i):i}(e,n,t)}(this,e),function(e,t){const n=(0,l.A)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix,i=(0,u.A)(e.referenceMatrix,n),o=t.context,r=e._imageBasedLighting;if(r.useSphericalHarmonicCoefficients||r.useSpecularEnvironmentMaps){let t=Y,n=q;n=_.A.multiply(o.uniformState.view3D,i,n),t=_.A.getMatrix3(n,t),t=m.A.getRotation(t,t),e._iblReferenceFrameMatrix=m.A.transpose(t,e._iblReferenceFrameMatrix)}if(e.isClippingEnabled()){let t=X;t=_.A.multiply(o.uniformState.view3D,i,t),t=_.A.multiply(t,e._clippingPlanes.modelMatrix,t),e._clippingPlanesMatrix=_.A.inverseTranspose(t,e._clippingPlanesMatrix)}}(this,e),this._ready?(this._loader.incrementallyLoadTextures&&!this._texturesLoaded&&this._loader.texturesLoaded&&(this.resetDrawCommands(),this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this),this._completeTexturesLoad=this._completeTexturesLoad&&this._completeTexturesLoad()),function(e){if(!e._idDirty)return;e._idDirty=!1;const t=e._id,n=e._pickIds,i=n.length;for(let e=0;e<i;++e)n[e].object.id=t}(this),function(e,t){const n=e._sceneGraph;if(e._updateModelMatrix||0!==e._minimumPixelSize){const i=(0,l.A)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;n.updateModelMatrix(i,t),e._updateModelMatrix=!1}e._backFaceCullingDirty&&(n.updateBackFaceCulling(e._backFaceCulling),e._backFaceCullingDirty=!1),e._shadowsDirty&&(n.updateShadows(e._shadows),e._shadowsDirty=!1),e._debugShowBoundingVolumeDirty&&(n.updateShowBoundingVolume(e._debugShowBoundingVolume),e._debugShowBoundingVolumeDirty=!1);let i=!1;(0,l.A)(e.classificationType)||(i=e._userAnimationDirty||e._activeAnimations.update(t)),n.update(t,i),e._userAnimationDirty=!1}(this,e),function(e){if(!e._showCreditsOnScreenDirty)return;e._showCreditsOnScreenDirty=!1;const t=e._showCreditsOnScreen;(0,l.A)(e._credit)&&(e._credit.showOnScreen=t||e._credit._isDefaultToken);const n=e._resourceCredits,i=n.length;for(let e=0;e<i;e++)n[e].showOnScreen=t||n[e]._isDefaultToken;const o=e._gltfCredits,r=o.length;for(let e=0;e<r;e++)o[e].showOnScreen=t||o[e]._isDefaultToken}(this),function(e,t){const n=function(e,t){const n=e.distanceDisplayCondition;if(!(0,l.A)(n))return!0;const i=n.near*n.near,r=n.far*n.far;let s;if(t.mode===x.A.SCENE2D){const e=.5*(t.camera.frustum.right-t.camera.frustum.left);s=e*e}else{const n=_.A.getTranslation(e.modelMatrix,te);I.A.computeActualWgs84Position(t,n,n),s=o.A.distanceSquared(n,t.camera.positionWC)}return s>=i&&s<=r}(e,t),i=e.isInvisible(),r=e.hasSilhouette(t),s=e._show&&0!==e._computedScale&&n&&(!i||r),a=t.passes,c=a.render||a.pick&&e.allowPicking;s&&!e._ignoreCommands&&c&&(function(e,t){const n=t.creditDisplay,i=e._credit;(0,l.A)(i)&&n.addCreditToNextFrame(i);const o=e._resourceCredits,r=o.length;for(let e=0;e<r;e++)n.addCreditToNextFrame(o[e]);const s=e._gltfCredits,a=s.length;for(let e=0;e<a;e++)n.addCreditToNextFrame(s[e])}(e,t),e._sceneGraph.pushDrawCommands(t))}(this,e)):e.afterRender.push((()=>{this._ready=!0,this._readyEvent.raiseEvent(this),this._completeLoad=this._completeLoad&&this._completeLoad(),this._loader.incrementallyLoadTextures||(this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this),this._completeTexturesLoad=this._completeTexturesLoad&&this._completeTexturesLoad())})))};const Q=new o.A,$=new r.A;function K(e,t){e._clampedScale=(0,l.A)(e._maximumScale)?Math.min(e._scale,e._maximumScale):e._scale,e._boundingSphere.center=o.A.multiplyByScalar(e._sceneGraph.boundingSphere.center,e._clampedScale,e._boundingSphere.center),e._boundingSphere.radius=e._initialRadius*e._clampedScale,e._boundingSphere=i.A.transform(e._boundingSphere,t,e._boundingSphere)}const Z=new i.A;function ee(e,t,n){return function(i){if(e.heightReference===E.A.RELATIVE_TO_GROUND){const e=t.cartesianToCartographic(i,$);e.height+=n.height,t.cartographicToCartesian(e,i)}const o=e._clampedModelMatrix;_.A.clone(e.modelMatrix,o),o[12]=i.x,o[13]=i.y,o[14]=i.z,e._heightDirty=!0}}const te=new o.A;function ne(e){return e.context.stencilBuffer}function ie(e,t,n){return{loader:e,type:t,resource:n.resource,show:n.show,modelMatrix:n.modelMatrix,scale:n.scale,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,id:n.id,allowPicking:n.allowPicking,clampAnimations:n.clampAnimations,shadows:n.shadows,debugShowBoundingVolume:n.debugShowBoundingVolume,enableDebugWireframe:n.enableDebugWireframe,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,customShader:n.customShader,content:n.content,heightReference:n.heightReference,scene:n.scene,distanceDisplayCondition:n.distanceDisplayCondition,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,silhouetteColor:n.silhouetteColor,silhouetteSize:n.silhouetteSize,enableShowOutline:n.enableShowOutline,showOutline:n.showOutline,outlineColor:n.outlineColor,clippingPlanes:n.clippingPlanes,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,credit:n.credit,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection,projectTo2D:n.projectTo2D,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,classificationType:n.classificationType,pickObject:n.pickObject}}G.prototype.isTranslucent=function(){const e=this.color;return(0,l.A)(e)&&e.alpha>0&&e.alpha<1},G.prototype.isInvisible=function(){const e=this.color;return(0,l.A)(e)&&0===e.alpha},G.prototype.hasSilhouette=function(e){return ne(e)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0&&!(0,l.A)(this._classificationType)},G.prototype.hasSkipLevelOfDetail=function(e){if(!U.A.is3DTiles(this.type))return!1;const t=e.context.stencilBuffer,n=this._content.tileset;return t&&n.isSkippingLevelOfDetail},G.prototype.isClippingEnabled=function(){const e=this._clippingPlanes;return(0,l.A)(e)&&e.enabled&&0!==e.length},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){const e=this._loader;(0,l.A)(e)&&e.destroy();const t=this._featureTables;if((0,l.A)(t)){const e=t.length;for(let n=0;n<e;n++)t[n].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),(0,l.A)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),(0,l.A)(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);const n=this._clippingPlanes;(0,l.A)(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,A.A)(this)},G.prototype.destroyPipelineResources=function(){const e=this._pipelineResources;for(let t=0;t<e.length;t++)e[t].destroy();this._pipelineResources.length=0,this._pickIds.length=0},G.prototype.destroyModelResources=function(){const e=this._modelResources;for(let t=0;t<e.length;t++)e[t].destroy();this._modelResources.length=0},G.fromGltf=function(e){if((0,d.A)("Model.fromGltf","Model.fromGltf was deprecated in CesiumJS 1.104.  It will be removed in 1.107. Use Model.fromGltfAsync instead."),e=(0,u.A)(e,u.A.EMPTY_OBJECT),!(0,l.A)(e.url)&&!(0,l.A)(e.gltf))throw new h.A("options.url is required.");const t=(0,u.A)(e.url,e.gltf),n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,l.A)(e.classificationType)},i=(0,u.A)(e.basePath,""),o=g.A.createIfNeeded(i);(0,l.A)(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=g.A.createIfNeeded(t);const r=ie(new w.A(n),(0,l.A)(e.content)?U.A.TILE_GLTF:U.A.GLTF,e);return r.resource=n.gltfResource,new G(r)},G.fromGltfAsync=async function(e){if(e=(0,u.A)(e,u.A.EMPTY_OBJECT),!(0,l.A)(e.url)&&!(0,l.A)(e.gltf))throw new h.A("options.url is required.");const t=(0,u.A)(e.url,e.gltf),n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,l.A)(e.classificationType)},i=(0,u.A)(e.basePath,""),o=g.A.createIfNeeded(i);(0,l.A)(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=g.A.createIfNeeded(t);const r=new w.A(n),a=(0,l.A)(e.content)?U.A.TILE_GLTF:U.A.GLTF,c=n.gltfResource,d=ie(r,a,e);d.resource=c;try{await r.load()}catch(e){throw r.destroy(),k.A.getError("model",c,e)}const A=e.gltfCallback;(0,l.A)(A)&&(s.A.typeOf.func("options.gltfCallback",A),A(r.gltfJson));const f=new G(d),p=f._resource.credits;if((0,l.A)(p)){const e=p.length;for(let t=0;t<e;t++)f._resourceCredits.push(p[t])}return f},G.fromB3dm=async function(e){const t={b3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,l.A)(e.classificationType)},n=new O.A(t);try{await n.load();return new G(ie(n,U.A.TILE_B3DM,e))}catch(e){throw n.destroy(),e}},G.fromPnts=async function(e){const t={arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,loadAttributesFor2D:e.projectTo2D},n=new H.A(t);try{await n.load();return new G(ie(n,U.A.TILE_PNTS,e))}catch(e){throw n.destroy(),e}},G.fromI3dm=async function(e){const t={i3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline},n=new N.A(t);try{await n.load();return new G(ie(n,U.A.TILE_I3DM,e))}catch(e){throw n.destroy(),e}},G.fromGeoJson=async function(e){const t={geoJson:e.geoJson};return new G(ie(new L.A(t),U.A.TILE_GEOJSON,e))},G.prototype.applyColorAndShow=function(e){const t=this._color,n=(0,l.A)(e)&&(0,l.A)(e.color),i=(0,l.A)(e)&&(0,l.A)(e.show);this._color=n?e.color.evaluateColor(void 0,this._color):c.A.clone(c.A.WHITE,this._color),this._show=!i||e.show.evaluate(void 0),W(t,this._color)&&this.resetDrawCommands()},G.prototype.applyStyle=function(e){const t=this.type===U.A.TILE_PNTS,n=(0,l.A)(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,i=(0,l.A)(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=(0,l.A)(i)&&(0,l.A)(i[0]);!t||n&&!o?n?(this.featureTables[this.featureTableId].applyStyle(e),J(this)):(this.applyColorAndShow(e),this._styleCommandsNeeded=void 0):this.resetDrawCommands()};const oe=G},224975:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(41476),o=n(430346),r=n(491446),s=n(677354),a=n(786101),c=n(605971),l=n(760866),u=n(598361),d=n(623379);function h(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._metadata=void 0,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=void 0}function A(e,t,n,i){const r={cull:!1,releaseGltfJson:!0,opaquePass:l.A.CESIUM_3D_TILE,modelMatrix:t.computedTransform,upAxis:e._modelUpAxis,forwardAxis:e._modelForwardAxis,incrementallyLoadTextures:!1,customShader:e.customShader,content:n,colorBlendMode:e.colorBlendMode,colorBlendAmount:e.colorBlendAmount,lightColor:e.lightColor,imageBasedLighting:e.imageBasedLighting,featureIdLabel:e.featureIdLabel,instanceFeatureIdLabel:e.instanceFeatureIdLabel,pointCloudShading:e.pointCloudShading,clippingPlanes:e.clippingPlanes,backFaceCulling:e.backFaceCulling,shadows:e.shadows,showCreditsOnScreen:e.showCreditsOnScreen,splitDirection:e.splitDirection,enableDebugWireframe:e._enableDebugWireframe,debugWireframe:e.debugWireframe,projectTo2D:e._projectTo2D,enableShowOutline:e._enableShowOutline,showOutline:e.showOutline,outlineColor:e.outlineColor};return(0,o.A)(i,r)}Object.defineProperties(h.prototype,{featuresLength:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;return(0,r.A)(t)&&(0,r.A)(t[n])?t[n].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){const e=this._model.statistics;return e.propertyTablesByteLength+e.batchTexturesByteLength}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,a.A)("Model3DTileContent.readyPromise","Model3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Model3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;if((0,r.A)(t)&&(0,r.A)(t[n]))return t[n]}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),h.prototype.getFeature=function(e){const t=this._model,n=t.featureTableId;if(!(0,r.A)(n))throw new c.A("No feature ID set is selected. Make sure Cesium3DTileset.featureIdLabel or Cesium3DTileset.instanceFeatureIdLabel is defined");const i=t.featureTables[n];if(!(0,r.A)(i))throw new c.A("No feature table found for the selected feature ID set");const o=i.featuresLength;if(!(0,r.A)(e)||e<0||e>=o)throw new c.A(`featureId is required and must be between 0 and featuresLength - 1 (${o-1}).`);return i.getFeature(e)},h.prototype.hasProperty=function(e,t){const n=this._model,i=n.featureTableId;return!!(0,r.A)(i)&&n.featureTables[i].hasProperty(e,t)},h.prototype.applyDebugSettings=function(e,t){t=e?t:i.A.WHITE,0===this.featuresLength?this._model.color=t:(0,r.A)(this.batchTable)&&this.batchTable.setAllColor(t)},h.prototype.applyStyle=function(e){this._model.style=e},h.prototype.update=function(e,t){const n=this._model,i=this._tile;n.colorBlendAmount=e.colorBlendAmount,n.colorBlendMode=e.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=e.customShader,n.featureIdLabel=e.featureIdLabel,n.instanceFeatureIdLabel=e.instanceFeatureIdLabel,n.lightColor=e.lightColor,n.imageBasedLighting=e.imageBasedLighting,n.backFaceCulling=e.backFaceCulling,n.shadows=e.shadows,n.showCreditsOnScreen=e.showCreditsOnScreen,n.splitDirection=e.splitDirection,n.debugWireframe=e.debugWireframe,n.showOutline=e.showOutline,n.outlineColor=e.outlineColor,n.pointCloudShading=e.pointCloudShading;const o=e.clippingPlanes;n.referenceMatrix=e.clippingPlanesOriginMatrix,(0,r.A)(o)&&i.clippingPlanesDirty&&(n._clippingPlanes=o.enabled&&i._isClipped?o:void 0),(0,r.A)(o)&&(0,r.A)(n._clippingPlanes)&&n._clippingPlanes!==o&&(n._clippingPlanes=o,n._clippingPlanesState=0),n.update(t),!this._ready&&n.ready&&(n.activeAnimations.addAll({loop:u.A.REPEAT}),this._ready=!0,this._resolveContent=this._resolveContent&&this._resolveContent(this))},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),(0,s.A)(this)},h.fromGltf=async function(e,t,n,i){const o=new h(e,t,n),r=A(e,t,o,{gltf:i,basePath:n}),s=e.vectorClassificationOnly?void 0:e.classificationType;r.classificationType=s;const a=await d.A.fromGltfAsync(r);return o._model=a,o._readyPromise=new Promise((e=>{o._resolveContent=e})),o},h.fromB3dm=async function(e,t,n,i,o){const r=new h(e,t,n),s=A(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),a=e.vectorClassificationOnly?void 0:e.classificationType;s.classificationType=a;const c=await d.A.fromB3dm(s);return r._model=c,r._readyPromise=new Promise((e=>{r._resolveContent=e})),r},h.fromI3dm=async function(e,t,n,i,o){const r=new h(e,t,n),s=A(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),a=await d.A.fromI3dm(s);return r._model=a,r._readyPromise=new Promise((e=>{r._resolveContent=e})),r},h.fromPnts=async function(e,t,n,i,o){const r=new h(e,t,n),s=A(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),a=await d.A.fromPnts(s);return r._model=a,r._readyPromise=new Promise((e=>{r._resolveContent=e})),r},h.fromGeoJson=async function(e,t,n,i){const o=new h(e,t,n),r=A(e,t,o,{geoJson:i,resource:n}),s=await d.A.fromGeoJson(r);return o._model=s,o._readyPromise=new Promise((e=>{o._resolveContent=e})),o};const f=h},56241:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(){this.pass=void 0,this.alphaCutoff=void 0}},156621:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(419061),o=n(491446),r=n(955943),s=n(591978),a=n(598361),c=n(304686),l=n(275670);function u(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=s.A.clone(n.startTime),this._delay=(0,i.A)(n.delay,0),this._stopTime=s.A.clone(n.stopTime),this.removeOnStop=(0,i.A)(n.removeOnStop,!1),this._multiplier=(0,i.A)(n.multiplier,1),this._reverse=(0,i.A)(n.reverse,!1),this._loop=(0,i.A)(n.loop,a.A.NONE),this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new r.A,this.update=new r.A,this.stop=new r.A,this._state=c.A.STOPPED,this._computedStartTime=void 0,this._duration=void 0;const u=this;this._raiseStartEvent=function(){u.start.raiseEvent(e,u)},this._updateEventTime=0,this._raiseUpdateEvent=function(){u.update.raiseEvent(e,u,u._updateEventTime)},this._raiseStopEvent=function(){u.stop.raiseEvent(e,u)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,function(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;const i=e._model.sceneGraph,r=e._animation.channels,s=r.length,a=[];for(let c=0;c<s;c++){const s=r[c],u=s.target;if(!(0,o.A)(u))continue;const d=u.node.index,h=i._runtimeNodes[d],A=new l.A({channel:s,runtimeAnimation:e,runtimeNode:h}),f=s.sampler.input;t=Math.min(t,f[0]),n=Math.max(n,f[f.length-1]),a.push(A)}e._runtimeChannels=a,e._localStartTime=t,e._localStopTime=n}(this)}Object.defineProperties(u.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}}),u.prototype.animate=function(e){const t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};const d=u},275670:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(267980),o=n(369031),r=n(931806),s=n(419061),a=n(491446),c=n(961136),l=n(92457),u=n(153127),d=n(995537),h=n(587841),A=n(99479),f=n(259690);const p=d.A.AnimatedPropertyType;function m(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).channel,n=e.runtimeAnimation,r=e.runtimeNode;o.A.typeOf.object("options.channel",t),o.A.typeOf.object("options.runtimeAnimation",n),o.A.typeOf.object("options.runtimeNode",r),this._channel=t,this._runtimeAnimation=n,this._runtimeNode=r,this._splines=[],this._path=void 0,function(e){const t=e._channel,n=t.sampler,o=n.input,r=n.output,s=n.interpolation,c=t.target.path,u=e._runtimeNode,d=function(e,t,n,i,o){const r=[];if(i===p.WEIGHTS){const s=t.length/o;let a,c;for(a=0;a<o;a++){const u=new Array(s);let d=a;if(n===l.A.CUBICSPLINE)for(c=0;c<s;c+=3)u[c]=t[d],u[c+1]=t[d+o],u[c+2]=t[d+2*o],d+=3*o;else for(c=0;c<s;c++)u[c]=t[d],d+=o;r.push(_(e,u,n,i))}}else r.push(_(e,t,n,i));return r}(o,r,s,c,(0,a.A)(u.morphWeights)?u.morphWeights.length:1);switch(e._splines=d,e._path=c,c){case p.TRANSLATION:case p.SCALE:g=new i.A;break;case p.ROTATION:g=new A.A;case p.WEIGHTS:}}(this)}function _(e,t,n,i){if(1===e.length&&1===t.length)return new r.A(t[0]);switch(n){case l.A.STEP:return new h.A({times:e,points:t});case l.A.CUBICSPLINE:return function(e,t){const n=[],i=[],o=[],r=t.length;for(let e=0;e<r;e+=3)i.push(t[e]),n.push(t[e+1]),o.push(t[e+2]);return i.splice(0,1),o.length=o.length-1,new c.A({times:e,points:n,inTangents:i,outTangents:o})}(e,t);case l.A.LINEAR:return i===p.ROTATION?new f.A({times:e,points:t}):new u.A({times:e,points:t})}}let g;Object.defineProperties(m.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}}),m.prototype.animate=function(e){const t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===p.WEIGHTS){const n=o.morphWeights,r=n.length;for(let o=0;o<r;o++){const r=t[o],s=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n[o]=r.evaluate(s)}}else{if(o.userAnimated)return;{const r=t[0],s=i.clampAnimations?r.clampTime(e):r.wrapTime(e);o[n]=r.evaluate(s,g)}}};const y=m},4773:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(419061),o=n(491446),r=n(605971),s=n(955943),a=n(591978),c=n(367817),l=n(156621),u=n(598361),d=n(304686);function h(e){this.animationAdded=new s.A,this.animationRemoved=new s.A,this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}function A(e,t,n){const i=e._model,o=new l.A(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}Object.defineProperties(h.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}}),h.prototype.add=function(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT);const t=this._model;if(!t.ready)throw new r.A("Animations are not loaded.  Wait for Model.ready to be true.");const n=t.sceneGraph.components.animations;if(!(0,o.A)(e.name)&&!(0,o.A)(e.index))throw new r.A("Either options.name or options.index must be defined.");if((0,o.A)(e.multiplier)&&e.multiplier<=0)throw new r.A("options.multiplier must be greater than zero.");if((0,o.A)(e.index)&&(e.index>=n.length||e.index<0))throw new r.A("options.index must be a valid animation index.");let s=e.index;if((0,o.A)(s))return A(this,n[s],e);const a=n.length;for(let t=0;t<a;++t)if(n[t].name===e.name){s=t;break}if(!(0,o.A)(s))throw new r.A("options.name must be a valid animation name.");return A(this,n[s],e)},h.prototype.addAll=function(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT);const t=this._model;if(!t.ready)throw new r.A("Animations are not loaded.  Wait for Model.ready to be true.");if((0,o.A)(e.multiplier)&&e.multiplier<=0)throw new r.A("options.multiplier must be greater than zero.");const n=t.sceneGraph.components.animations,s=[],a=n.length;for(let t=0;t<a;++t){const i=A(this,n[t],e);s.push(i)}return s},h.prototype.remove=function(e){if(!(0,o.A)(e))return!1;const t=this._runtimeAnimations,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0)},h.prototype.removeAll=function(){const e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])},h.prototype.contains=function(e){return!!(0,o.A)(e)&&-1!==this._runtimeAnimations.indexOf(e)},h.prototype.get=function(e){if(!(0,o.A)(e))throw new r.A("index is required.");if(e>=this._runtimeAnimations.length||e<0)throw new r.A("index must be valid within the range of the collection");return this._runtimeAnimations[e]};const f=[];function p(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}h.prototype.update=function(e){const t=this._runtimeAnimations;let n=t.length;if(0===n)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&a.A.equals(e.time,this._previousTime))return!1;this._previousTime=a.A.clone(e.time,this._previousTime);let r=!1;const s=e.time,l=this._model;for(let l=0;l<n;++l){const n=t[l];(0,o.A)(n._computedStartTime)||(n._computedStartTime=a.A.addSeconds((0,i.A)(n.startTime,s),n.delay,new a.A)),(0,o.A)(n._duration)||(n._duration=n.localStopTime*(1/n.multiplier));const h=n._computedStartTime,A=n._duration,p=n.stopTime,m=a.A.lessThanOrEquals(h,s),_=(0,o.A)(p)&&a.A.greaterThan(s,p);let g=0;if(0!==A){const e=a.A.secondsDifference(_?p:s,h);g=(0,o.A)(n._animationTime)?n._animationTime(A,e):e/A}const y=n.loop===u.A.REPEAT||n.loop===u.A.MIRRORED_REPEAT,b=(m||y&&!(0,o.A)(n.startTime))&&(g<=1||y)&&!_;if((g!==n._prevAnimationDelta||b===(n._state===d.A.STOPPED))&&(n._prevAnimationDelta=g,b||n._state===d.A.ANIMATING)){if(b&&n._state===d.A.STOPPED&&(n._state=d.A.ANIMATING,n.start.numberOfListeners>0&&e.afterRender.push(n._raiseStartEvent)),n.loop===u.A.REPEAT)g-=Math.floor(g);else if(n.loop===u.A.MIRRORED_REPEAT){const e=Math.floor(g),t=g-e;g=e%2==1?1-t:t}n.reverse&&(g=1-g);let t=g*A*n.multiplier;t=c.A.clamp(t,n.localStartTime,n.localStopTime),n.animate(t),n.update.numberOfListeners>0&&(n._updateEventTime=t,e.afterRender.push(n._raiseUpdateEvent)),r=!0,b||(n._state=d.A.STOPPED,n.stop.numberOfListeners>0&&e.afterRender.push(n._raiseStopEvent),n.removeOnStop&&f.push(n))}}n=f.length;for(let i=0;i<n;++i){const n=f[i];t.splice(t.indexOf(n),1),e.afterRender.push(p(this,l,n))}return f.length=0,r};const m=h},41358:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(491446),s=n(584164),a=n(647478);function c(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).articulation,n=e.sceneGraph;i.A.typeOf.object("options.articulation",t),i.A.typeOf.object("options.sceneGraph",n),this._articulation=t,this._sceneGraph=n,this._name=t.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,function(e){const t=e.articulation.stages,n=t.length,i=e._runtimeStages,o=e._runtimeStagesByName;for(let r=0;r<n;r++){const n=t[r],s=new a.A({stage:n,runtimeArticulation:e});i.push(s),o[n.name]=s}}(this)}Object.defineProperties(c.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}}),c.prototype.setArticulationStage=function(e,t){const n=this._runtimeStagesByName[e];(0,r.A)(n)&&(n.currentValue=t)};const l=new s.A,u=new s.A;c.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let e,t=s.A.clone(s.A.IDENTITY,l);const n=this._runtimeStages,i=n.length;for(e=0;e<i;e++)t=n[e].applyStageToMatrix(t);const o=this._runtimeNodes,r=o.length;for(e=0;e<r;e++){const n=o[e],i=s.A.multiplyTransformation(n.originalTransform,t,u);n.transform=i}};const d=c},647478:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(794282),o=n(267980),r=n(367817),s=n(369031),a=n(419061),c=n(331185),l=n(584164);const u=r.A.EPSILON16;function d(e){const t=(e=(0,a.A)(e,a.A.EMPTY_OBJECT)).stage,n=e.runtimeArticulation;s.A.typeOf.object("options.stage",t),s.A.typeOf.object("options.runtimeArticulation",n),this._stage=t,this._runtimeArticulation=n,this._name=t.name,this._type=t.type,this._minimumValue=t.minimumValue,this._maximumValue=t.maximumValue,this._currentValue=t.initialValue}Object.defineProperties(d.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(e){s.A.typeOf.number("value",e),e=r.A.clamp(e,this.minimumValue,this.maximumValue),r.A.equalsEpsilon(this._currentValue,e,u)||(this._currentValue=e,this.runtimeArticulation._dirty=!0)}}});const h=new o.A,A=new c.A;d.prototype.applyStageToMatrix=function(e){s.A.typeOf.object("result",e);const t=this.type,n=this.currentValue,o=h;let a;switch(t){case i.A.XROTATE:a=c.A.fromRotationX(r.A.toRadians(n),A),e=l.A.multiplyByMatrix3(e,a,e);break;case i.A.YROTATE:a=c.A.fromRotationY(r.A.toRadians(n),A),e=l.A.multiplyByMatrix3(e,a,e);break;case i.A.ZROTATE:a=c.A.fromRotationZ(r.A.toRadians(n),A),e=l.A.multiplyByMatrix3(e,a,e);break;case i.A.XTRANSLATE:o.x=n,o.y=0,o.z=0,e=l.A.multiplyByTranslation(e,o,e);break;case i.A.YTRANSLATE:o.x=0,o.y=n,o.z=0,e=l.A.multiplyByTranslation(e,o,e);break;case i.A.ZTRANSLATE:o.x=0,o.y=0,o.z=n,e=l.A.multiplyByTranslation(e,o,e);break;case i.A.XSCALE:o.x=n,o.y=1,o.z=1,e=l.A.multiplyByScale(e,o,e);break;case i.A.YSCALE:o.x=1,o.y=n,o.z=1,e=l.A.multiplyByScale(e,o,e);break;case i.A.ZSCALE:o.x=1,o.y=1,o.z=n,e=l.A.multiplyByScale(e,o,e);break;case i.A.UNIFORMSCALE:e=l.A.multiplyByUniformScale(e,n,e)}return e};const f=d},303036:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(434067),o=n(711284),r=n(430346),s=n(41476),a=n(403139),c=n(624512);const l={name:"ModelClippingPlanesPipelineStage"},u=new i.A;l.process=function(e,t,n){const i=t.clippingPlanes,l=n.context,d=e.shaderBuilder;d.addDefine("HAS_CLIPPING_PLANES",void 0,c.A.FRAGMENT),d.addDefine("CLIPPING_PLANES_LENGTH",i.length,c.A.FRAGMENT),i.unionClippingRegions&&d.addDefine("UNION_CLIPPING_REGIONS",void 0,c.A.FRAGMENT),o.A.useFloatTexture(l)&&d.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,c.A.FRAGMENT);const h=o.A.getTextureResolution(i,l,u);d.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",h.x,c.A.FRAGMENT),d.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",h.y,c.A.FRAGMENT),d.addUniform("sampler2D","model_clippingPlanes",c.A.FRAGMENT),d.addUniform("vec4","model_clippingPlanesEdgeStyle",c.A.FRAGMENT),d.addUniform("mat4","model_clippingPlanesMatrix",c.A.FRAGMENT),d.addFragmentLines(a.A);const A={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){const e=s.A.clone(i.edgeColor);return e.alpha=i.edgeWidth,e},model_clippingPlanesMatrix:function(){return t._clippingPlanesMatrix}};e.uniformMap=(0,r.A)(A,e.uniformMap)};const d=l},542614:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(428027),o=n(430346),r=n(325161),s=n(760866),a=n(624512);const c={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend",process:function(e,t,n){const l=e.shaderBuilder;l.addDefine("HAS_MODEL_COLOR",void 0,a.A.FRAGMENT),l.addFragmentLines(r.A);const u={},d=t.color;0!==d.alpha||t.hasSilhouette(n)||(e.renderStateOptions.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),d.alpha<1&&(e.alphaOptions.pass=s.A.TRANSLUCENT),l.addUniform("vec4",c.COLOR_UNIFORM_NAME,a.A.FRAGMENT),u[c.COLOR_UNIFORM_NAME]=function(){return t.color},l.addUniform("float",c.COLOR_BLEND_UNIFORM_NAME,a.A.FRAGMENT),u[c.COLOR_BLEND_UNIFORM_NAME]=function(){return i.A.getColorBlend(t.colorBlendMode,t.colorBlendAmount)},e.uniformMap=(0,o.A)(u,e.uniformMap)}},l=c},270316:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(660662),o=n(434067),r=n(367817),s=n(369031),a=n(376758),c=n(419061),l=n(491446),u=n(584164),d=n(352581),h=n(377496),A=n(760866),f=n(40118),p=n(200646),m=n(527083),_=n(62467),g=n(988609),y=n(938987),b=n(896464),v=n(138151),T=n(942836);function w(e){const t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).command,n=e.primitiveRenderResources;s.A.typeOf.object("options.command",t),s.A.typeOf.object("options.primitiveRenderResources",n);const o=n.model;this._model=o;const r=n.runtimePrimitive;this._runtimePrimitive=r;const a=t.pass===A.A.TRANSLUCENT,l=!r.primitive.material.doubleSided&&!a,d=n.hasSilhouette,h=!a&&!d,f=n.hasSkipLevelOfDetail&&!a,p=d;this._command=t,this._modelMatrix=u.A.clone(t.modelMatrix),this._boundingVolume=i.A.clone(t.boundingVolume),this._modelMatrix2D=new u.A,this._boundingVolume2D=new i.A,this._modelMatrix2DDirty=!1,this._backFaceCulling=t.renderState.cull.enabled,this._cullFace=t.renderState.cull.face,this._shadows=o.shadows,this._debugShowBoundingVolume=t.debugShowBoundingVolume,this._usesBackFaceCulling=l,this._needsTranslucentCommand=h,this._needsSkipLevelOfDetailCommands=f,this._needsSilhouetteCommands=p,this._originalCommand=void 0,this._translucentCommand=void 0,this._skipLodBackfaceCommand=void 0,this._skipLodStencilCommand=void 0,this._silhouetteModelCommand=void 0,this._silhouetteColorCommand=void 0,this._derivedCommands=[],this._has2DCommands=!1,function(e){const t=e._command;t.modelMatrix=e._modelMatrix,t.boundingVolume=e._boundingVolume;const n=e._model,i=e._usesBackFaceCulling,o=e._derivedCommands;e._originalCommand=new E({command:t,updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0,is2D:!1}),o.push(e._originalCommand),e._needsTranslucentCommand&&(e._translucentCommand=new E({command:I(t),updateShadows:!0,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!0}),o.push(e._translucentCommand)),e._needsSkipLevelOfDetailCommands&&(e._skipLodBackfaceCommand=new E({command:O(t),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:i,updateDebugShowBoundingVolume:!1}),e._skipLodStencilCommand=new E({command:L(t),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),o.push(e._skipLodBackfaceCommand),o.push(e._skipLodStencilCommand)),e._needsSilhouetteCommands&&(e._silhouetteModelCommand=new E({command:P(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),e._silhouetteColorCommand=new E({command:D(t,n),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!1}),o.push(e._silhouetteModelCommand),o.push(e._silhouetteColorCommand))}(this)}function E(e){this.command=e.command,this.updateShadows=e.updateShadows,this.updateBackFaceCulling=e.updateBackFaceCulling,this.updateCullFace=e.updateCullFace,this.updateDebugShowBoundingVolume=e.updateDebugShowBoundingVolume,this.is2D=(0,c.A)(e.is2D,!1),this.derivedCommand2D=void 0}function S(e,t,n){e.push(t.command),n&&e.push(t.derivedCommand2D.command)}function C(e,t){if(t.mode!==_.A.SCENE2D||e.model._projectTo2D)return!1;const n=e.model.sceneGraph._boundingSphere2D,i=n.center.y-n.radius,o=n.center.y+n.radius,s=t.mapProjection.ellipsoid.maximumRadius*r.A.PI;return i<s&&o>s||i<-s&&o>-s}function x(e,t){if(!(0,l.A)(t))return;const n=E.clone(t),i=h.A.shallowClone(t.command);return i.modelMatrix=e._modelMatrix2D,i.boundingVolume=e._boundingVolume2D,n.command=i,n.updateShadows=!1,n.is2D=!0,t.derivedCommand2D=n,e._derivedCommands.push(n),n}function I(e){const t=h.A.shallowClone(e);t.pass=A.A.TRANSLUCENT;const n=(0,a.A)(e.renderState,!0);return n.cull.enabled=!1,n.depthMask=!1,n.blending=p.A.ALPHA_BLEND,t.renderState=f.A.fromCache(n),t}function P(e,t){const n=t._silhouetteId%255,i=h.A.shallowClone(e),o=(0,a.A)(e.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:d.A.ALWAYS,backFunction:d.A.ALWAYS,reference:n,mask:-1,frontOperation:{fail:d.A.KEEP,zFail:d.A.KEEP,zPass:d.A.REPLACE},backOperation:{fail:d.A.KEEP,zFail:d.A.KEEP,zPass:d.A.REPLACE}},t.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),i.renderState=f.A.fromCache(o),i}function D(e,t){const n=t._silhouetteId%255,i=h.A.shallowClone(e),o=(0,a.A)(e.renderState,!0);o.cull.enabled=!1,(e.pass===A.A.TRANSLUCENT||t.silhouetteColor.alpha<1)&&(i.pass=A.A.TRANSLUCENT,o.depthMask=!1,o.blending=p.A.ALPHA_BLEND),o.stencilTest={enabled:!0,frontFunction:d.A.NOTEQUAL,backFunction:d.A.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:d.A.KEEP,zFail:d.A.KEEP,zPass:d.A.KEEP},backOperation:{fail:d.A.KEEP,zFail:d.A.KEEP,zPass:d.A.KEEP}};const r=(0,a.A)(e.uniformMap);return r.model_silhouettePass=function(){return!0},i.renderState=f.A.fromCache(o),i.uniformMap=r,i.castShadows=!1,i.receiveShadows=!1,i}function O(e){const t=h.A.shallowClone(e),n=(0,a.A)(e.renderState,!0);n.cull.enabled=!0,n.cull.face=m.A.FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5};const i=(0,a.A)(t.uniformMap),r=new o.A(5,5);return i.u_polygonOffset=function(){return r},t.renderState=f.A.fromCache(n),t.uniformMap=i,t.castShadows=!1,t.receiveShadows=!1,t}function L(e){const t=h.A.shallowClone(e),n=(0,a.A)(e.renderState,!0),{stencilTest:i}=n;return i.enabled=!0,i.mask=y.A.SKIP_LOD_MASK,i.reference=y.A.CESIUM_3D_TILE_MASK,i.frontFunction=b.A.GREATER_OR_EQUAL,i.frontOperation.zPass=v.A.REPLACE,i.backFunction=b.A.GREATER_OR_EQUAL,i.backOperation.zPass=v.A.REPLACE,n.stencilMask=y.A.CESIUM_3D_TILE_MASK|y.A.SKIP_LOD_MASK,t.renderState=f.A.fromCache(n),t}E.clone=function(e){return new E({command:e.command,updateShadows:e.updateShadows,updateBackFaceCulling:e.updateBackFaceCulling,updateCullFace:e.updateCullFace,updateDebugShowBoundingVolume:e.updateDebugShowBoundingVolume,is2D:e.is2D,derivedCommand2D:e.derivedCommand2D})},Object.defineProperties(w.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=u.A.clone(e,this._modelMatrix),this._modelMatrix2DDirty=!0,this._boundingVolume=i.A.transform(this.runtimePrimitive.boundingSphere,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},shadows:{get:function(){return this._shadows},set:function(e){this._shadows=e,function(e){const t=e.shadows,n=g.A.castShadows(t),i=g.A.receiveShadows(t),o=e._derivedCommands;for(let e=0;e<o.length;++e){const t=o[e];if(t.updateShadows){const e=t.command;e.castShadows=n,e.receiveShadows=i}}}(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,function(e){const t=e.backFaceCulling,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];if(i.updateBackFaceCulling){const e=i.command,n=(0,a.A)(e.renderState,!0);n.cull.enabled=t,e.renderState=f.A.fromCache(n)}}}(this))}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,function(e){const t=e.cullFace,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];if(i.updateCullFace){const e=i.command,n=(0,a.A)(e.renderState,!0);n.cull.face=t,e.renderState=f.A.fromCache(n)}}}(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolume=e,function(e){const t=e.debugShowBoundingVolume,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];i.updateDebugShowBoundingVolume&&(i.command.debugShowBoundingVolume=t)}}(this))}}}),w.prototype.pushCommands=function(e,t){const n=C(this,e);var o;n&&!this._has2DCommands&&(x(o=this,o._originalCommand),x(o,o._translucentCommand),x(o,o._skipLodBackfaceCommand),x(o,o._skipLodStencilCommand),x(o,o._silhouetteModelCommand),x(o,o._silhouetteColorCommand),this._has2DCommands=!0,this._modelMatrix2DDirty=!0),this._modelMatrix2DDirty&&(function(e,t){const n=e._modelMatrix;e._modelMatrix2D=u.A.clone(n,e._modelMatrix2D),e._modelMatrix2D[13]-=2*r.A.sign(n[13])*r.A.PI*t.mapProjection.ellipsoid.maximumRadius,e._boundingVolume2D=i.A.transform(e.runtimePrimitive.boundingSphere,e._modelMatrix2D,e._boundingVolume2D)}(this,e),this._modelMatrix2DDirty=!1);const s=this.model.styleCommandsNeeded;if(!this._needsTranslucentCommand||!(0,l.A)(s)||(s!==T.A.ALL_OPAQUE&&S(t,this._translucentCommand,n),s!==T.A.ALL_TRANSLUCENT)){if(this._needsSkipLevelOfDetailCommands){const{tileset:e,tile:i}=this._model.content;if(e.hasMixedContent)return i._finalResolution||S(e._backfaceCommands,this._skipLodBackfaceCommand,n),function(e,t,n){const i=e._skipLodStencilCommand,o=i.command,r=t._selectionDepth,s=function(e){return(e.renderState.stencilTest.reference&y.A.SKIP_LOD_MASK)>>>y.A.SKIP_LOD_BIT_SHIFT}(o);if(r!==s){const e=function(e){return y.A.CESIUM_3D_TILE_MASK|e<<y.A.SKIP_LOD_BIT_SHIFT}(r),t=(0,a.A)(o.renderState,!0);t.stencilTest.reference=e,o.renderState=f.A.fromCache(t),n&&(i.derivedCommand2D.renderState=t)}}(this,i,n),void S(t,this._skipLodStencilCommand,n)}if(!this._needsSilhouetteCommands)return S(t,this._originalCommand,n),t;S(t,this._silhouetteModelCommand,n)}},w.prototype.pushSilhouetteCommands=function(e,t){const n=C(this,e);return S(t,this._silhouetteColorCommand,n),t};const N=w},242893:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(41476),o=n(491446);function r(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return(0,o.A)(this._color)||(this._color=new i.A),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}}),r.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)},r.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)},r.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)},r.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)},r.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};const s=r},947129:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(653565),o=n(622569),r=n(369031),s=n(41476),a=n(491446),c=n(677354),l=n(242893),u=n(419061),d=n(942836),h=n(226827);function A(e){const t=e.model,n=e.propertyTable;r.A.typeOf.object("propertyTable",n),r.A.typeOf.object("model",t),this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=d.A.ALL_OPAQUE,function(e){const t=e._model,n=h.A.is3DTiles(t.type),r=e._propertyTable.count;if(0===r)return;let s;const a=new Array(r);if(n){const e=t.content;for(s=0;s<r;s++)a[s]=new o.A(e,s)}else for(s=0;s<r;s++)a[s]=new l.A({model:t,featureId:s,featureTable:e});e._features=a,e._featuresLength=r,e._batchTexture=new i.A({featuresLength:r,owner:e,statistics:n?t.content.tileset.statistics:void 0})}(this)}Object.defineProperties(A.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return(0,a.A)(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}}),A.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);const t=d.A.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)},A.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},A.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},A.prototype.getShow=function(e){return this._batchTexture.getShow(e)},A.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},A.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},A.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},A.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)},A.prototype.getFeature=function(e){return this._features[e]},A.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)},A.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)},A.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)},A.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)},A.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)},A.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)},A.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)},A.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)},A.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};const f=new s.A;A.prototype.applyStyle=function(e){if(!(0,a.A)(e))return this.setAllColor(i.A.DEFAULT_COLOR_VALUE),void this.setAllShow(i.A.DEFAULT_SHOW_VALUE);for(let t=0;t<this._featuresLength;t++){const n=this.getFeature(t),o=(0,a.A)(e.color)?(0,u.A)(e.color.evaluateColor(n,f),i.A.DEFAULT_COLOR_VALUE):i.A.DEFAULT_COLOR_VALUE,r=(0,a.A)(e.show)?(0,u.A)(e.show.evaluate(n),i.A.DEFAULT_SHOW_VALUE):i.A.DEFAULT_SHOW_VALUE;this.setColor(t,o),this.setShow(t,r)}},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,c.A)(this)};const p=A},127329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(419061),o=n(10803);const r=function(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT),this.lightingModel=(0,i.A)(e.lightingModel,o.A.UNLIT)}},657685:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(584164),o=n(471147),r=n(62467);const s={};function a(e,t,n,r){let s;r=i.A.multiplyTransformation(r,e.transform,new i.A),e.updateComputedTransform();const c=e.runtimePrimitives.length;for(s=0;s<c;s++){const t=e.runtimePrimitives[s].drawCommand;t.modelMatrix=i.A.multiplyTransformation(n,r,t.modelMatrix),t.cullFace=o.A.getCullFace(t.modelMatrix,t.primitiveType)}const l=e.children.length;for(s=0;s<l;s++){const o=t._runtimeNodes[e.children[s]];o._transformToRoot=i.A.clone(r,o._transformToRoot),a(o,t,n,r),o._transformDirty=!1}}s.name="ModelMatrixUpdateStage",s.update=function(e,t,n){const i=n.mode!==r.A.SCENE3D;i&&t._model._projectTo2D||!e._transformDirty||(a(e,t,i?t._computedModelMatrix2D:t._computedModelMatrix,e.transformToRoot),e._transformDirty=!1)};const c=s},922167:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(491446);function r(e,t){i.A.typeOf.object("model",e),i.A.typeOf.object("runtimeNode",t),this._model=e,this._runtimeNode=t}Object.defineProperties(r.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(e){this._runtimeNode.show=e}},matrix:{get:function(){return this._runtimeNode.transform},set:function(e){(0,o.A)(e)?(this._runtimeNode.transform=e,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});const s=r},136426:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(56241),r=n(40118),s=n(469635),a=n(523721);const c=function(e){i.A.typeOf.object("model",e),this.shaderBuilder=new s.A,this.model=e,this.uniformMap={},this.alphaOptions=new o.A,this.renderStateOptions=r.A.getState(r.A.fromCache({depthTest:{enabled:!0,func:a.A.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1}},885251:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(267980),o=n(369031),r=n(419061),s=n(491446),a=n(605971),c=n(584164),l=n(884842),u=n(99479),d=n(281810),h=n(657685),A=n(799395);function f(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).node,n=e.transform,i=e.transformToRoot,a=e.sceneGraph,u=e.children;o.A.typeOf.object("options.node",t),o.A.typeOf.object("options.transform",n),o.A.typeOf.object("options.transformToRoot",i),o.A.typeOf.object("options.sceneGraph",a),o.A.typeOf.object("options.children",u),this._node=t,this._name=t.name,this._id=t.index,this._sceneGraph=a,this._children=u,this._originalTransform=c.A.clone(n,this._originalTransform),this._transform=c.A.clone(n,this._transform),this._transformToRoot=c.A.clone(i,this._transformToRoot),this._computedTransform=new c.A,this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTranslationMin=void 0,this.instancingTranslationMax=void 0,this.instancingTransformsBuffer=void 0,this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,this.instancingReferencePoint2D=void 0,function(e){const t=e.transform,n=e.transformToRoot,i=e._computedTransform;e._computedTransform=c.A.multiply(n,t,i);const o=e.node;(0,s.A)(o.matrix)||(e._transformParameters=new l.A(o.translation,o.rotation,o.scale)),(0,s.A)(o.morphWeights)&&(e._morphWeights=o.morphWeights.slice());const r=o.articulationName;if((0,s.A)(r)){const t=e.sceneGraph._runtimeArticulations[r];(0,s.A)(t)&&t.runtimeNodes.push(e)}}(this)}function p(e,t){e._transformDirty=!0,e._transform=c.A.fromTranslationRotationScale(t,e._transform)}Object.defineProperties(f.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(e){this._transformDirty=!0,this._transform=c.A.clone(e,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return(0,s.A)(this._transformParameters)?this._transformParameters.translation:void 0},set:function(e){const t=this._transformParameters;if(!(0,s.A)(t))throw new a.A("The translation of a node cannot be set if it was defined using a matrix in the model.");const n=t.translation;i.A.equals(n,e)||(t.translation=i.A.clone(e,t.translation),p(this,t))}},rotation:{get:function(){return(0,s.A)(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(e){const t=this._transformParameters;if(!(0,s.A)(t))throw new a.A("The rotation of a node cannot be set if it was defined using a matrix in the model.");const n=t.rotation;u.A.equals(n,e)||(t.rotation=u.A.clone(e,t.rotation),p(this,t))}},scale:{get:function(){return(0,s.A)(this._transformParameters)?this._transformParameters.scale:void 0},set:function(e){const t=this._transformParameters;if(!(0,s.A)(t))throw new a.A("The scale of a node cannot be set if it was defined using a matrix in the model.");const n=t.scale;i.A.equals(n,e)||(t.scale=i.A.clone(e,t.scale),p(this,t))}},morphWeights:{get:function(){return this._morphWeights},set:function(e){const t=e.length;if(this._morphWeights.length!==t)throw new a.A("value must have the same length as the original weights array.");for(let n=0;n<t;n++)this._morphWeights[n]=e[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}}),f.prototype.getChild=function(e){if(o.A.typeOf.number("index",e),e<0||e>=this.children.length)throw new a.A("index must be greater than or equal to 0 and less than the number of children.");return this.sceneGraph._runtimeNodes[this.children[e]]},f.prototype.configurePipeline=function(){const e=this.node,t=this.pipelineStages;t.length=0;const n=this.updateStages;n.length=0,(0,s.A)(e.instances)&&t.push(d.A),t.push(A.A),n.push(h.A)},f.prototype.updateComputedTransform=function(){this._computedTransform=c.A.multiply(this._transformToRoot,this._transform,this._computedTransform)},f.prototype.updateJointMatrices=function(){const e=this._runtimeSkin;if(!(0,s.A)(e))return;e.updateJointMatrices();const t=this._computedJointMatrices,n=e.jointMatrices,i=n.length;for(let e=0;e<i;e++){(0,s.A)(t[e])||(t[e]=new c.A);const i=c.A.multiplyTransformation(this.transformToRoot,this.transform,t[e]),o=c.A.inverseTransformation(i,t[e]);t[e]=c.A.multiplyTransformation(o,n[e],t[e])}};const m=f},850210:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(369031),o=n(419061),r=n(491446),s=n(402330),a=n(62467),c=n(19120),l=n(186919),u=n(662274),d=n(212642),h=n(212525),A=n(381508),f=n(13916),p=n(598073),m=n(320578),_=n(817082),g=n(193497),y=n(64389),b=n(471147),v=n(163010),T=n(601945),w=n(752709),E=n(366413),S=n(531218),C=n(252843),x=n(391852),I=n(456727),P=n(6214);function D(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).primitive,n=e.node,r=e.model;i.A.typeOf.object("options.primitive",t),i.A.typeOf.object("options.node",n),i.A.typeOf.object("options.model",r),this.primitive=t,this.node=n,this.model=r,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}D.prototype.configurePipeline=function(e){const t=this.pipelineStages;t.length=0;const n=this.primitive,i=this.node,o=this.model,D=o.customShader,O=o.style,L=e.context.webgl2,N=e.mode!==a.A.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,M=(0,r.A)(n.morphTargets)&&n.morphTargets.length>0,R=(0,r.A)(i.skin),F=(0,r.A)(D),B=!(F&&(0,r.A)(D.fragmentShaderText))||D.mode!==h.A.REPLACE_MATERIAL,U=b.A.hasQuantizedAttributes(n.attributes),k=o.debugWireframe&&s.A.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||L),V=o.pointCloudShading,H=(0,r.A)(V)&&V.attenuation,z=(0,r.A)(V)&&V.backFaceCulling,G=n.primitiveType===s.A.POINTS&&((0,r.A)(O)||H||z),j=o._enableShowOutline&&(0,r.A)(n.outlineCoordinates),W=function(e,t,n){let i;return(0,r.A)(t.instances)&&(i=b.A.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,r.A)(i))?{hasFeatureIds:!0,hasPropertyTable:(0,r.A)(i.propertyTableId)}:(i=b.A.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),(0,r.A)(i)?{hasFeatureIds:!0,hasPropertyTable:(0,r.A)(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}(o,i,n),q=(0,r.A)(o.classificationType);N&&t.push(C.A),t.push(m.A),k&&t.push(P.A),q&&t.push(u.A),M&&t.push(v.A),R&&t.push(I.A),G&&t.push(w.A),U&&t.push(f.A),B&&t.push(g.A),t.push(p.A),t.push(y.A),W.hasPropertyTable&&(t.push(x.A),t.push(l.A),t.push(d.A)),F&&t.push(A.A),t.push(_.A),o.allowPicking&&t.push(T.A),j&&t.push(E.A),t.push(c.A),t.push(S.A)};const O=D},814071:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var i=n(660662),o=n(267980),r=n(369031),s=n(419061),a=n(491446),c=n(584164),l=n(543622),u=n(62467),d=n(913419),h=n(150831),A=n(807048),f=n(3282),p=n(41358),m=n(542614),_=n(303036),g=n(922167),y=n(885251),b=n(850210),v=n(496854),T=n(471147),w=n(136426),E=n(746761),S=n(566258),C=n(226827),x=n(604883),I=n(214666);function P(e){const t=(e=(0,s.A)(e,s.A.EMPTY_OBJECT)).modelComponents;r.A.typeOf.object("options.model",e.model),r.A.typeOf.object("options.modelComponents",t),this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=c.A.clone(c.A.IDENTITY),this._computedModelMatrix2D=c.A.clone(c.A.IDENTITY),this._axisCorrectionMatrix=T.A.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new c.A),this._runtimeArticulations={},function(e){const t=e._components,n=t.scene;D(e,e._model.modelMatrix);const i=t.articulations,o=i.length,r=e._runtimeArticulations;for(let t=0;t<o;t++){const n=i[t],o=new p.A({articulation:n,sceneGraph:e});r[o.name]=o}const s=t.nodes,a=s.length;e._runtimeNodes=new Array(a);const l=n.nodes.length,u=c.A.IDENTITY;for(let t=0;t<l;t++){const i=L(e,n.nodes[t],u);e._rootNodes.push(i)}const d=t.skins,h=e._runtimeSkins,A=d.length;for(let t=0;t<A;t++){const n=d[t];h.push(new v.A({skin:n,sceneGraph:e}))}const f=e._skinnedNodes,m=f.length;for(let t=0;t<m;t++){const n=f[t],i=e._runtimeNodes[n],o=s[n].skin.index;i._runtimeSkin=h[o],i.updateJointMatrices()}e.applyArticulations()}(this)}function D(e,t){const n=e._components,i=e._model;e._computedModelMatrix=c.A.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=c.A.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=c.A.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}Object.defineProperties(P.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});const O=new o.A;function L(e,t,n){const i=[],o=T.A.getNodeTransform(t),r=t.children.length;for(let s=0;s<r;s++){const r=L(e,t.children[s],c.A.multiplyTransformation(n,o,new c.A));i.push(r)}const s=new y.A({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),l=t.primitives.length;for(let n=0;n<l;n++)s.runtimePrimitives.push(new b.A({primitive:t.primitives[n],node:t,model:e._model}));const u=t.index;e._runtimeNodes[u]=s,(0,a.A)(t.skin)&&e._skinnedNodes.push(u);const d=t.name;if((0,a.A)(d)){const t=e._model,n=new g.A(t,s);t._nodesByName[d]=n}return u}const N=new o.A,M=new o.A,R=new o.A,F=new o.A;function B(e,t,n,i,o){if(n&&!t.show)return;const r=t.children.length;for(let s=0;s<r;s++)B(e,t.getChild(s),n,i,o);const s=t.runtimePrimitives,a=s.length;for(let e=0;e<a;e++)i(s[e],o)}function U(e,t,n,i){const o=e._rootNodes,r=o.length;for(let s=0;s<r;s++){const r=o[s];B(e,e._runtimeNodes[r],t,n,i)}}P.prototype.buildDrawCommands=function(e){const t=this._model,n=new w.A(t);t.statistics.clear(),this.configurePipeline(e);const r=this.modelPipelineStages;let s,l,u;for(s=0;s<r.length;s++)r[s].process(n,t,e);const d=o.A.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,N),A=o.A.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,M);for(s=0;s<this._runtimeNodes.length;s++){const t=this._runtimeNodes[s];if(!(0,a.A)(t))continue;t.configurePipeline();const r=t.pipelineStages,f=new x.A(n,t);for(l=0;l<r.length;l++)r[l].process(f,t.node,e);const p=t.computedTransform;for(l=0;l<t.runtimePrimitives.length;l++){const n=t.runtimePrimitives[l];n.configurePipeline(e);const r=n.pipelineStages,s=new I.A(f,n);for(u=0;u<r.length;u++)r[u].process(s,n.primitive,e);n.boundingSphere=i.A.clone(s.boundingSphere,new i.A);const a=c.A.multiplyByPoint(p,s.positionMin,R),m=c.A.multiplyByPoint(p,s.positionMax,F);o.A.minimumByComponent(d,a,d),o.A.maximumByComponent(A,m,A);const _=(0,h.A)(s,e);n.drawCommand=_}}this._boundingSphere=i.A.fromCornerPoints(d,A,new i.A),this._boundingSphere=i.A.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=i.A.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=i.A.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale},P.prototype.configurePipeline=function(e){const t=this.modelPipelineStages;t.length=0;const n=this._model;(0,a.A)(n.color)&&t.push(m.A),(0,a.A)(n.classificationType)||(n.imageBasedLighting.enabled&&t.push(f.A),n.isClippingEnabled()&&t.push(_.A),n.hasSilhouette(e)&&t.push(E.A),(0,a.A)(n.splitDirection)&&n.splitDirection!==d.A.NONE&&t.push(S.A),C.A.is3DTiles(n.type)&&t.push(A.A))},P.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){const r=this._runtimeNodes[n];if(!(0,a.A)(r))continue;for(i=0;i<r.updateStages.length;i++)r.updateStages[i].update(r,this,e);const s=e.mode!==u.A.SCENE3D&&this._model._projectTo2D;for(t&&!s&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){const e=r.runtimePrimitives[i];for(o=0;o<e.updateStages.length;o++)e.updateStages[o].update(e,this)}}},P.prototype.updateModelMatrix=function(e,t){D(this,e),t.mode!==u.A.SCENE3D&&function(e,t){const n=e._computedModelMatrix,r=c.A.getTranslation(n,O);if(o.A.equals(r,o.A.ZERO)){const i=e.boundingSphere.center,o=l.A.wgs84To2DModelMatrix(t.mapProjection,i,e._computedModelMatrix2D);e._computedModelMatrix2D=c.A.multiply(o,n,e._computedModelMatrix2D)}else e._computedModelMatrix2D=l.A.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);e._boundingSphere2D=i.A.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}(this,t);const n=this._rootNodes;for(let e=0;e<n.length;e++)this._runtimeNodes[n[e]]._transformDirty=!0},P.prototype.updateJointMatrices=function(){const e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){const t=e[n];this._runtimeNodes[t].updateJointMatrices()}};const k={backFaceCulling:void 0};function V(e,t){e.drawCommand.backFaceCulling=t.backFaceCulling}P.prototype.updateBackFaceCulling=function(e){const t=k;t.backFaceCulling=e,U(this,!1,V,t)};const H={shadowMode:void 0};function z(e,t){e.drawCommand.shadows=t.shadowMode}P.prototype.updateShadows=function(e){const t=H;t.shadowMode=e,U(this,!1,z,t)};const G={debugShowBoundingVolume:void 0};function j(e,t){e.drawCommand.debugShowBoundingVolume=t.debugShowBoundingVolume}P.prototype.updateShowBoundingVolume=function(e){const t=G;t.debugShowBoundingVolume=e,U(this,!1,j,t)};const W=[],q={frameState:void 0,hasSilhouette:void 0};function Y(e,t){const n=t.frameState,i=t.hasSilhouette,o=n.passes,r=W,s=e.drawCommand;s.pushCommands(n,n.commandList),i&&!o.pick&&s.pushSilhouetteCommands(n,r)}P.prototype.pushDrawCommands=function(e){const t=W;t.length=0;const n=q;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,U(this,!0,Y,n),e.commandList.push.apply(e.commandList,t)},P.prototype.setArticulationStage=function(e,t){const n=e.split(" ");if(2!==n.length)return;const i=n[0],o=n[1],r=this._runtimeArticulations[i];(0,a.A)(r)&&r.setArticulationStage(o,t)},P.prototype.applyArticulations=function(){const e=this._runtimeArticulations;for(const t in e)e.hasOwnProperty(t)&&e[t].apply()};const X=P},746761:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(430346),o=n(491446),r=n(624512),s=n(221334),a=n(980678);const c={name:"ModelSilhouettePipelineStage",silhouettesLength:0,process:function(e,t,n){(0,o.A)(t._silhouetteId)||(t._silhouetteId=++c.silhouettesLength);const l=e.shaderBuilder;l.addDefine("HAS_SILHOUETTE",void 0,r.A.BOTH),l.addVertexLines(a.A),l.addFragmentLines(s.A),l.addUniform("vec4","model_silhouetteColor",r.A.FRAGMENT),l.addUniform("float","model_silhouetteSize",r.A.VERTEX),l.addUniform("bool","model_silhouettePass",r.A.BOTH);const u={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=(0,i.A)(u,e.uniformMap),e.hasSilhouette=!0}},l=c},496854:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(584164),o=n(369031),r=n(419061);function s(e){e=(0,r.A)(e,r.A.EMPTY_OBJECT),o.A.typeOf.object("options.skin",e.skin),o.A.typeOf.object("options.sceneGraph",e.sceneGraph),this._sceneGraph=e.sceneGraph;const t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],function(e){const t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;const o=t.joints,r=o.length,s=e.sceneGraph._runtimeNodes,c=e.joints,l=e._jointMatrices;for(let e=0;e<r;e++){const t=s[o[e].index];c.push(t);const r=a(t,n[e],new i.A);l.push(r)}}(this)}function a(e,t,n){const o=i.A.multiplyTransformation(e.transformToRoot,e.transform,n);return i.A.multiplyTransformation(o,t,n)}Object.defineProperties(s.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}}),s.prototype.updateJointMatrices=function(){const e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){const t=this.joints[n],i=this.inverseBindMatrices[n];e[n]=a(t,i,e[n])}};const c=s},566258:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(430346),o=n(768601),r=n(624512);const s={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection",process:function(e,t,n){const a=e.shaderBuilder;a.addDefine("HAS_MODEL_SPLITTER",void 0,r.A.FRAGMENT),a.addFragmentLines(o.A);const c={};a.addUniform("float",s.SPLIT_DIRECTION_UNIFORM_NAME,r.A.FRAGMENT),c[s.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=(0,i.A)(c,e.uniformMap)}},a=s},650884:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(288787),o=n(369031);function r(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap=new i.A}Object.defineProperties(r.prototype,{batchTexturesByteLength:{get:function(){const e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values;let n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}}),r.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap.removeAll()},r.prototype.addBuffer=function(e,t){if(o.A.typeOf.object("buffer",e),o.A.typeOf.bool("hasCpuCopy",t),!this._bufferIdSet.hasOwnProperty(e._id)){const n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0},r.prototype.addTexture=function(e){o.A.typeOf.object("texture",e),this._textureIdSet.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes),this._textureIdSet[e._id]=!0},r.prototype.addBatchTexture=function(e){o.A.typeOf.object("batchTexture",e),this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};const s=r},226827:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(605971);const r={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON",is3DTiles:function(e){switch(i.A.typeOf.string("modelType",e),e){case r.TILE_GLTF:case r.TILE_B3DM:case r.TILE_I3DM:case r.TILE_PNTS:case r.TILE_GEOJSON:return!0;case r.GLTF:return!1;default:throw new o.A("modelType is not a valid value.")}}},s=Object.freeze(r)},471147:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(267980),o=n(491446),r=n(584164),s=n(99479),a=n(123245),c=n(320475),l=n(730839),u=n(595826),d=n(527083),h=n(402330),A=n(331185);function f(){}f.getError=function(e,t,n){let i=`Failed to load ${e}: ${t}`;(0,o.A)(n)&&(0,o.A)(n.message)&&(i+=`\n${n.message}`);const r=new a.A(i);return(0,o.A)(n)&&(r.stack=`Original stack:\n${n.stack}\nHandler stack:\n${r.stack}`),r},f.getNodeTransform=function(e){return(0,o.A)(e.matrix)?e.matrix:r.A.fromTranslationQuaternionRotationScale((0,o.A)(e.translation)?e.translation:i.A.ZERO,(0,o.A)(e.rotation)?e.rotation:s.A.IDENTITY,(0,o.A)(e.scale)?e.scale:i.A.ONE)},f.getAttributeBySemantic=function(e,t,n){const i=e.attributes,r=i.length;for(let e=0;e<r;++e){const r=i[e],s=!(0,o.A)(n)||r.setIndex===n;if(r.semantic===t&&s)return r}},f.getAttributeByName=function(e,t){const n=e.attributes,i=n.length;for(let e=0;e<i;++e){const i=n[e];if(i.name===t)return i}},f.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.positionalLabel===t||i.label===t)return i}},f.hasQuantizedAttributes=function(e){if(!(0,o.A)(e))return!1;for(let t=0;t<e.length;t++){const n=e[t];if((0,o.A)(n.quantization))return!0}return!1},f.getAttributeInfo=function(e){const t=e.semantic,n=e.setIndex;let i,r=!1;(0,o.A)(t)?(i=u.A.getVariableName(t,n),r=!0):(i=e.name,i=i.replace(/^_/,""),i=i.toLowerCase());const s=/^color_\d+$/.test(i),a=e.type;let c=l.A.getGlslType(a);s&&(c="vec4");const d=(0,o.A)(e.quantization);let h;return d&&(h=s?"vec4":l.A.getGlslType(e.quantization.type)),{attribute:e,isQuantized:d,variableName:i,hasSemantic:r,glslType:c,quantizedGlslType:h}};const p=new i.A,m=new i.A;f.getPositionMinMax=function(e,t,n){const r=f.getAttributeBySemantic(e,"POSITION");let s=r.max,a=r.min;return(0,o.A)(n)&&(0,o.A)(t)&&(a=i.A.add(a,t,m),s=i.A.add(s,n,p)),{min:a,max:s}},f.getAxisCorrectionMatrix=function(e,t,n){return n=r.A.clone(r.A.IDENTITY,n),e===c.A.Y?n=r.A.clone(c.A.Y_UP_TO_Z_UP,n):e===c.A.X&&(n=r.A.clone(c.A.X_UP_TO_Z_UP,n)),t===c.A.Z&&(n=r.A.multiplyTransformation(n,c.A.Z_UP_TO_X_UP,n)),n};const _=new A.A;f.getCullFace=function(e,t){if(!h.A.isTriangles(t))return d.A.BACK;const n=r.A.getMatrix3(e,_);return A.A.determinant(n)<0?d.A.FRONT:d.A.BACK},f.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,"_");return t=t.replace(/^gl_/,""),/^\d/.test(t)&&(t=`_${t}`),t},f.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_techniques_webgl:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0,WEB3D_quantized_attributes:!0},f.checkSupportedExtensions=function(e){const t=e.length;for(let n=0;n<t;n++){const t=e[n];if(!f.supportedExtensions[t])throw new a.A(`Unsupported glTF Extension: ${t}`)}};const g=f},163010:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(730839),o=n(430346),r=n(491446),s=n(624512),a=n(828077),c=n(595826);const l={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,s.A.VERTEX),function(e){e.addFunction(l.FUNCTION_ID_GET_MORPHED_POSITION,l.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,s.A.VERTEX);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_POSITION,["vec3 morphedPosition = position;"]),e.addFunction(l.FUNCTION_ID_GET_MORPHED_NORMAL,l.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,s.A.VERTEX);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_NORMAL,["vec3 morphedNormal = normal;"]),e.addFunction(l.FUNCTION_ID_GET_MORPHED_TANGENT,l.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,s.A.VERTEX);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_TANGENT,["vec3 morphedTangent = tangent;"])}(n);const i=t.morphTargets.length;for(let n=0;n<i;n++){const i=t.morphTargets[n].attributes,o=i.length;for(let t=0;t<o;t++){const o=i[t],r=o.semantic;r!==c.A.POSITION&&r!==c.A.NORMAL&&r!==c.A.TANGENT||(d(e,o,e.attributeIndex,n),e.attributeIndex++)}}!function(e){e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_POSITION,["return morphedPosition;"]);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_NORMAL,["return morphedNormal;"]);e.addFunctionLines(l.FUNCTION_ID_GET_MORPHED_TANGENT,["return morphedTangent;"])}(n);const r=e.runtimeNode.morphWeights.length;n.addUniform("float",`u_morphWeights[${r}]`,s.A.VERTEX),n.addVertexLines(a.A);const u={u_morphWeights:function(){return e.runtimeNode.morphWeights}};e.uniformMap=(0,o.A)(u,e.uniformMap)}},u={attributeString:void 0,functionId:void 0};function d(e,t,n,o){const s=e.shaderBuilder;!function(e,t,n){const o={index:n,value:(0,r.A)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:i.A.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};e.attributes.push(o)}(e,t,n);const a=function(e,t){switch(e.semantic){case c.A.POSITION:t.attributeString="Position",t.functionId=l.FUNCTION_ID_GET_MORPHED_POSITION;break;case c.A.NORMAL:t.attributeString="Normal",t.functionId=l.FUNCTION_ID_GET_MORPHED_NORMAL;break;case c.A.TANGENT:t.attributeString="Tangent",t.functionId=l.FUNCTION_ID_GET_MORPHED_TANGENT}return t}(t,u);!function(e,t,n){const i=t.attributeString,o=`a_target${i}_${n}`,r=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;e.addAttribute("vec3",o),e.addFunctionLines(t.functionId,[r])}(s,a,o)}const h=l},604883:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031),o=n(376758);const r=function(e,t){i.A.typeOf.object("modelRenderResources",e),i.A.typeOf.object("runtimeNode",t),this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=(0,o.A)(e.uniformMap),this.alphaOptions=(0,o.A)(e.alphaOptions),this.renderStateOptions=(0,o.A)(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0}},799395:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446);const o={name:"NodeStatisticsPipelineStage",_countInstancingAttributes:r,_countGeneratedBuffers:s};function r(e,t){if(!(0,i.A)(t))return;const n=t.attributes,o=n.length;for(let t=0;t<o;t++){const o=n[t];if((0,i.A)(o.buffer)){const t=!1;e.addBuffer(o.buffer,t)}}}function s(e,t){if((0,i.A)(t.instancingTransformsBuffer)){const n=!1;e.addBuffer(t.instancingTransformsBuffer,n)}if((0,i.A)(t.instancingTransformsBuffer2D)){const n=!1;e.addBuffer(t.instancingTransformsBuffer2D,n)}if((0,i.A)(t.instancingTranslationBuffer2D)){const n=!1;e.addBuffer(t.instancingTranslationBuffer2D,n)}}o.process=function(e,t,n){const i=e.model.statistics,o=t.instances,a=e.runtimeNode;r(i,o),s(i,a)};const a=o},601945:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(641613),o=n(442790),r=n(41476),s=n(571804),a=n(419061),c=n(491446),l=n(624512),u=n(226827),d=n(471147);const h={name:"PickingPipelineStage"};function A(e,t){const n=e.model;if((0,c.A)(n.pickObject))return n.pickObject;const i={model:n,node:e.runtimeNode,primitive:e.runtimePrimitive};let o;if(u.A.is3DTiles(n.type)){const e=n.content;o={content:e,primitive:e.tileset,detail:i}}else o={primitive:n,detail:i};return o.id=n.id,(0,c.A)(t)&&(o.instanceId=t),o}h.process=function(e,t,n){const u=n.context,h=e.runtimeNode,f=e.shaderBuilder,p=e.model,m=h.node.instances;if(e.hasPropertyTable)!function(e,t,n){const i=e.model;let o,r;const s=i.featureIdLabel,u=i.instanceFeatureIdLabel;(0,c.A)(i.featureTableId)?o=i.featureTableId:(0,c.A)(n)?(r=d.A.getFeatureIdsByLabel(n.featureIds,u),o=r.propertyTableId):(r=d.A.getFeatureIdsByLabel(t.featureIds,s),o=r.propertyTableId);const h=i.featureTables[o];e.shaderBuilder.addUniform("sampler2D","model_pickTexture",l.A.FRAGMENT);const A=h.batchTexture;e.uniformMap.model_pickTexture=function(){return(0,a.A)(A.pickTexture,A.defaultTexture)},e.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture(model_pickTexture, selectedFeature.st) : vec4(0.0))"}(e,t,m);else if((0,c.A)(m))!function(e,t){const n=e.instanceCount,a=new Array(n),c=new Uint8Array(4*n),u=e.model,d=u._pipelineResources;for(let i=0;i<n;i++){const n=A(e,i),o=t.createPickId(n);d.push(o),a[i]=o;const s=o.color;c[4*i+0]=r.A.floatToByte(s.red),c[4*i+1]=r.A.floatToByte(s.green),c[4*i+2]=r.A.floatToByte(s.blue),c[4*i+3]=r.A.floatToByte(s.alpha)}u._pickIds=a;const h=i.A.createVertexBuffer({context:t,typedArray:c,usage:o.A.STATIC_DRAW});h.vertexArrayDestroyable=!1;u.statistics.addBuffer(h,!1),d.push(h);const f={index:e.attributeIndex++,vertexBuffer:h,componentsPerAttribute:4,componentDatatype:s.A.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(f);const p=e.shaderBuilder;p.addDefine("USE_PICKING",void 0,l.A.BOTH),p.addAttribute("vec4","a_pickColor"),p.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}(e,u);else{const t=A(e),n=u.createPickId(t);p._pipelineResources.push(n),p._pickIds.push(n),f.addUniform("vec4","czm_pickColor",l.A.FRAGMENT),e.uniformMap.czm_pickColor=function(){return n.color},e.pickId="czm_pickColor"}};const f=h},31908:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var i=n(961645),o=n(267980),r=n(41476),s=n(369031),a=n(571804),c=n(419061),l=n(491446),u=n(605971),d=n(584164),h=n(402330),A=n(352581),f=n(393682),p=n(641613),m=n(442790),_=n(953019),g=n(730839),y=n(320475),b=n(115959),v=n(445848),T=n(590732),w=n(569445),E=n(995537),S=n(679854),C=n(48660),x=n(595826);const I=E.A.Components,P=E.A.Scene,D=E.A.Node,O=E.A.Primitive,L=E.A.Attribute,N=E.A.Quantization,M=E.A.FeatureIdAttribute,R=E.A.Material,F=E.A.MetallicRoughness;function B(e){const t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).arrayBuffer,n=(0,c.A)(e.byteOffset,0);s.A.typeOf.object("options.arrayBuffer",t),this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=(0,c.A)(e.loadAttributesFor2D,!1),this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._error=void 0,this._state=C.A.UNLOADED,this._buffers=[],this._components=void 0,this._transform=d.A.IDENTITY}function U(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";default:throw new u.A("componentsPerAttribute must be a number from 1-4")}}function k(e){switch(e){case A.A.BYTE:return"BYTE";case A.A.UNSIGNED_BYTE:return"UNSIGNED_BYTE";case A.A.SHORT:return"SHORT";case A.A.UNSIGNED_SHORT:return"UNSIGNED_SHORT";case A.A.INT:return"INT";case A.A.UNSIGNED_INT:return"UNSIGNED_INT";case A.A.DOUBLE:return"DOUBLE";case A.A.FLOAT:return"FLOAT";default:throw new u.A("value is not a valid WebGL constant")}}function V(e,t,n){let s,a=t.typedArray;if(t.octEncoded&&(s=new N,s.octEncoded=t.octEncoded,s.octEncodedZXY=t.octEncodedZXY,s.normalizationRange=t.quantizedRange,s.type=t.quantizedType,s.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){s=new N;const e=t.quantizedRange;s.normalizationRange=e,s.quantizedVolumeOffset=o.A.ZERO;const n=t.quantizedVolumeScale;s.quantizedVolumeDimensions=n,s.quantizedVolumeStepSize=o.A.divideByScalar(n,e,new o.A),s.componentDatatype=t.quantizedComponentDatatype,s.type=t.quantizedType}const u=new L;if(u.name=t.name,u.semantic=t.semantic,u.setIndex=t.setIndex,u.componentDatatype=t.componentDatatype,u.type=t.type,u.normalized=(0,c.A)(t.normalized,!1),u.min=t.min,u.max=t.max,u.quantization=s,t.isRGB565&&(a=i.A.decodeRGB565(a)),(0,l.A)(t.constantColor)){const e=new Array(4);u.constant=r.A.pack(t.constantColor,e)}else{const t=p.A.createVertexBuffer({typedArray:a,context:n,usage:m.A.STATIC_DRAW});t.vertexArrayDestroyable=!1,e._buffers.push(t),u.buffer=t}const d=e._loadAttributesFor2D;return u.semantic===x.A.POSITION&&d&&(u.typedArray=a),u}let H,z;function G(e){if(!(0,l.A)(z)){H=new f(0),z=new Array(e);for(let t=0;t<e;++t)z[t]=H.random()}return z}(0,l.A)(Object.create)&&(B.prototype=Object.create(w.A.prototype),B.prototype.constructor=B),Object.defineProperties(B.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}}),B.prototype.load=function(){if((0,l.A)(this._promise))return this._promise;this._parsedContent=S.A.parse(this._arrayBuffer,this._byteOffset),this._state=C.A.PROCESSING,this._promise=Promise.resolve(this)},B.prototype.process=function(e){if((0,l.A)(this._error)){const e=this._error;throw this._error=void 0,e}if(this._state===C.A.READY)return!0;if(this._state===C.A.PROCESSING){if((0,l.A)(this._decodePromise))return!1;this._decodePromise=function(e,t){const n=e._parsedContent.draco;let i;if(i=(0,l.A)(n)?v.A.decodePointCloud(n,t):Promise.resolve(),(0,l.A)(i))return e._decodePromise=i,i.then((function(i){if(!e.isDestroyed())return(0,l.A)(i)&&function(e,t,n){e._state=C.A.READY;const i=e._parsedContent;let r;if((0,l.A)(n.POSITION)){if(r={name:"POSITION",semantic:x.A.POSITION,typedArray:n.POSITION.array,componentDatatype:a.A.FLOAT,type:g.A.VEC3,isQuantized:!1},(0,l.A)(n.POSITION.data.quantization)){const e=n.POSITION.data.quantization,t=e.range,i=o.A.fromElements(t,t,t),s=o.A.unpack(e.minValues),c=(1<<e.quantizationBits)-1;r.isQuantized=!0,r.quantizedRange=c,r.quantizedVolumeOffset=s,r.quantizedVolumeScale=i,r.quantizedComponentDatatype=c<=255?a.A.UNSIGNED_BYTE:a.A.UNSIGNED_SHORT,r.quantizedType=g.A.VEC3}i.positions=r}if((0,l.A)(n.NORMAL)){if(r={name:"NORMAL",semantic:x.A.NORMAL,typedArray:n.NORMAL.array,componentDatatype:a.A.FLOAT,type:g.A.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},(0,l.A)(n.NORMAL.data.quantization)){const e=(1<<n.NORMAL.data.quantization.quantizationBits)-1;r.quantizedRange=e,r.octEncoded=!0,r.octEncodedZXY=!0,r.quantizedComponentDatatype=a.A.UNSIGNED_BYTE,r.quantizedType=g.A.VEC2}i.normals=r}if((0,l.A)(n.RGBA)?i.colors={name:"COLOR",semantic:x.A.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:a.A.UNSIGNED_BYTE,type:g.A.VEC4,normalized:!0,isTranslucent:!0}:(0,l.A)(n.RGB)&&(i.colors={name:"COLOR",semantic:x.A.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:a.A.UNSIGNED_BYTE,type:g.A.VEC3,normalized:!0,isTranslucent:!1}),(0,l.A)(n.BATCH_ID)){const e=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:x.A.FEATURE_ID,setIndex:0,typedArray:e,componentDatatype:a.A.fromTypedArray(e),type:g.A.SCALAR}}let s=i.batchTableJson;const c=t.batchTableProperties;for(const e in c)if(c.hasOwnProperty(e)){const t=n[e];(0,l.A)(s)||(s={}),i.hasDracoBatchTable=!0;const o=t.data;s[e]={byteOffset:o.byteOffset,type:U(o.componentsPerAttribute),componentType:k(o.componentDatatype),typedArray:t.array}}i.batchTableJson=s}(e,n,i),function(e,t){const n=e._parsedContent,i=new F;i.metallicFactor=0,i.roughnessFactor=.9;const r=new R;r.metallicRoughness=i;const s=n.colors;(0,l.A)(s)&&s.isTranslucent&&(r.alphaMode=_.A.BLEND);const a=!(0,l.A)(n.normals);r.unlit=a;const u=new O;if(u.attributes=function(e,t,n){const i=[];let r;const s=t.positions;return(0,l.A)(s)&&(function(e){const t=e.typedArray,n=t.length/3,i=Math.min(n,20),r=G(20),s=Number.MAX_VALUE,a=-Number.MAX_VALUE;let c,l,u,d=o.A.fromElements(s,s,s,j),h=o.A.fromElements(a,a,a,W);if(e.isQuantized)d=o.A.ZERO,h=e.quantizedVolumeScale;else for(c=0;c<i;++c)l=Math.floor(r[c]*n),u=o.A.unpack(t,3*l,q),o.A.minimumByComponent(d,u,d),o.A.maximumByComponent(h,u,h);e.min=o.A.clone(d),e.max=o.A.clone(h)}(s),r=V(e,s,n),r.count=t.pointsLength,i.push(r)),(0,l.A)(t.normals)&&(r=V(e,t.normals,n),i.push(r)),(0,l.A)(t.colors)?(r=V(e,t.colors,n),i.push(r)):(r=V(e,Y,n),i.push(r)),(0,l.A)(t.batchIds)&&(r=V(e,t.batchIds,n),i.push(r)),i}(e,n,t),u.primitiveType=h.A.POINTS,u.material=r,(0,l.A)(n.batchIds)){const e=new M;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",u.featureIds.push(e)}const A=new D;A.index=0,A.primitives=[u];const f=new P;f.nodes=[A],f.upAxis=y.A.Z,f.forwardAxis=y.A.X;const g=new I;g.scene=f,g.nodes=[A];const v=[];g.structuralMetadata=function(e,t){const n=e.batchLength,i=e.pointsLength,o=e.batchTableBinary,r=!(0,l.A)(e.batchIds);if((0,l.A)(o)||e.hasDracoBatchTable){const s=(0,c.A)(n,i);return(0,b.A)({count:s,batchTable:e.batchTableJson,binaryBody:o,parseAsPropertyAttributes:r,customAttributeOutput:t})}return new T.A({schema:{},propertyTables:[]})}(n,v),v.length>0&&function(e,t,n,i){const o=t.attributes,r=n.length;for(let t=0;t<r;t++){const r=n[t],s=p.A.createVertexBuffer({typedArray:r.typedArray,context:i,usage:m.A.STATIC_DRAW});s.vertexArrayDestroyable=!1,e._buffers.push(s),r.buffer=s,r.typedArray=void 0,o.push(r)}t.propertyAttributeIds=[0]}(e,u,v,t),(0,l.A)(n.rtcCenter)&&(g.transform=d.A.multiplyByTranslation(g.transform,n.rtcCenter,g.transform));const w=n.positions;(0,l.A)(w)&&w.isQuantized&&(g.transform=d.A.multiplyByTranslation(g.transform,w.quantizedVolumeOffset,g.transform)),e._components=g,e._parsedContent=void 0,e._arrayBuffer=void 0}(e,t),e._state=C.A.READY,e})).catch((function(t){e.unload(),e._state=C.A.FAILED;e._error=e.getError("Failed to load Draco pnts",t)}))}(this,e.context)}return!1};const j=new o.A,W=new o.A,q=new o.A,Y={name:x.A.COLOR,semantic:x.A.COLOR,setIndex:0,constantColor:r.A.DARKGRAY,componentDatatype:a.A.FLOAT,type:g.A.VEC4,isQuantized:!1,isTranslucent:!1};B.prototype.unload=function(){const e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};const X=B},752709:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(267980),o=n(626809),r=n(367817),s=n(661314),a=n(376758),c=n(419061),l=n(491446),u=n(584164),d=n(226827),h=n(471147),A=n(811203),f=n(760866),p=n(7562),m=n(123245),_=n(62467),g=n(624512),y=n(595826);const b=new o.A,v={name:"PointCloudStylingPipelineStage",process:function(e,t,n){const o=e.shaderBuilder,v=e.model,x=v.style,I=v.structuralMetadata,P=(0,l.A)(I)?I.propertyAttributes:void 0,D=(0,l.A)(v.featureTableId)&&v.featureTables[v.featureTableId].featuresLength>0,O=!(0,l.A)(P)&&D;if((0,l.A)(x)&&!O){const n=function(e){const t=(0,a.A)(E);if(!(0,l.A)(e))return t;for(let n=0;n<e.length;n++){const i=e[n].properties;for(const e in i)i.hasOwnProperty(e)&&(t[e]=`metadata.${e}`)}return t}(P),i=function(e,t){const n=w,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${S})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${S})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${S})`,t,i),n.styleTranslucent=(0,l.A)(n.colorStyleFunction)&&i.translucent,n}(x,n);!function(e,t){const n=t.colorStyleFunction;(0,l.A)(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,g.A.BOTH),e.addVertexLines(n),e.addVarying("vec4","v_pointCloudColor"));const i=t.showStyleFunction;(0,l.A)(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,g.A.VERTEX),e.addVertexLines(i));const o=t.pointSizeStyleFunction;(0,l.A)(o)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,g.A.VERTEX),e.addVertexLines(o))}(o,i);const r=function(e){const t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return(0,l.A)(t)&&C(t,o),(0,l.A)(n)&&C(n,o),(0,l.A)(i)&&C(i,o),o}(i),s=r.indexOf("normalMC")>=0,c=h.A.getAttributeBySemantic(t,y.A.NORMAL);if(s&&!c)throw new m.A("Style references the NORMAL semantic but the point cloud does not have normals");o.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,g.A.VERTEX),i.styleTranslucent&&(e.alphaOptions.pass=f.A.TRANSLUCENT)}const L=v.pointCloudShading;let N,M,R;L.attenuation&&o.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,g.A.VERTEX),L.backFaceCulling&&o.addDefine("HAS_POINT_CLOUD_BACK_FACE_CULLING",void 0,g.A.VERTEX),d.A.is3DTiles(v.type)&&(M=!0,N=v.content,R=N.tile.refine===s.A.ADD),o.addUniform("vec4","model_pointCloudParameters",g.A.VERTEX),o.addVertexLines(p.A),e.uniformMap.model_pointCloudParameters=function(){const o=b;let s=1;M&&(s=R?5:N.tileset.maximumScreenSpaceError),o.x=(0,c.A)(L.maximumAttenuation,s),o.x*=n.pixelRatio;const a=function(e,t,n,o){if((0,l.A)(o)){const e=o.tile.geometricError;if(e>0)return e}if((0,l.A)(n.baseResolution))return n.baseResolution;const s=h.A.getAttributeBySemantic(t,y.A.POSITION),a=s.count,c=e.runtimeNode.transform;let d=i.A.subtract(s.max,s.min,T);d=u.A.multiplyByPointAsVector(c,d,T);const A=d.x*d.y*d.z;return r.A.cbrt(A/a)}(e,t,L,N);o.y=a*L.geometricErrorScale;const d=n.context,f=n.camera.frustum;let p;return p=n.mode===_.A.SCENE2D||f instanceof A.A?Number.POSITIVE_INFINITY:d.drawingBufferHeight/n.camera.frustum.sseDenominator,o.z=p,M&&(o.w=N.tileset.timeSinceLoad),o}}},T=new i.A,w={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},E={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"},S="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function C(e,t){const n=/attributes\.(\w+)/g;let i=n.exec(e);for(;null!==i;){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}const x=v},623524:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(369031),o=n(491446),r=n(419061),s=n(276904),a=n(430332),c=n(654799),l=n(616e3),u=n(957233),d=n(78078),h=n(557448);function A(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).triangleIndices,n=e.outlineIndices,s=e.originalVertexCount;i.A.typeOf.object("options.triangleIndices",t),i.A.typeOf.object("options.outlineIndices",n),i.A.typeOf.number("options.originalVertexCount",s),this._triangleIndices=t,this._originalVertexCount=s,this._edges=new g(n,s),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],function(e){let t=e._triangleIndices;const n=e._edges,i=[],r=e._extraVertices,s=e._originalVertexCount,a={};for(let e=0;e<t.length;e+=3){let c=t[e],l=t[e+1],u=t[e+2];const d=!1,h=d||n.hasEdge(c,l),A=d||n.hasEdge(l,u),p=d||n.hasEdge(u,c);let m=f(i,c,l,u,h,A,p);for(;(0,o.A)(m);){let n=a[m];if(!(0,o.A)(n)){n=s+r.length;let e=m;for(;e>=s;)e=r[e-s];r.push(e),a[m]=n}n>65534&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):n>255&&t instanceof Uint8Array&&(t=new Uint16Array(t)),m===c?(c=n,t[e]=n):m===l?(l=n,t[e+1]=n):(u=n,t[e+2]=n),m=f(i,c,l,u,h,A,p)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}(this)}function f(e,t,n,i,o,r,s){const a=s?1:0,c=o?1:0,l=p(e,t,a,c,0);if(0===l)return t;const u=o?1:0,d=r?1:0,h=p(e,n,0,u,d);if(0===h)return n;const A=s?1:0,f=r?1:0,_=p(e,i,A,0,f);if(0===_)return i;const g=l&h&_;let y,b,v;if(1&g)y=0,b=1,v=2;else if(2&g)y=0,v=1,b=2;else if(4&g)b=0,y=1,v=2;else if(8&g)b=0,v=1,y=2;else if(16&g)v=0,y=1,b=2;else{if(!(32&g)){const e=m(l),o=m(h),r=m(_);return e<o&&e<r?t:o<r?n:i}v=0,b=1,y=2}const T=3*t;e[T+y]=a,e[T+b]=c,e[T+v]=0;const w=3*n;e[w+y]=0,e[w+b]=u,e[w+v]=d;const E=3*i;e[E+y]=A,e[E+b]=0,e[E+v]=f}function p(e,t,n,i,r){const s=3*t,a=e[s],c=e[s+1],l=e[s+2];return(0,o.A)(a)?(a===n&&c===i&&l===r)|(a===n&&c===r&&l===i)<<1|(a===i&&c===n&&l===r)<<2|(a===i&&c===r&&l===n)<<3|(a===r&&c===n&&l===i)<<4|(a===r&&c===i&&l===n)<<5:63}function m(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function _(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function g(e,t){this._originalVertexCount=t,this._edges=new Set;for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1],o=Math.min(n,i),r=Math.max(n,i),s=o*this._originalVertexCount+r;this._edges.add(s)}}Object.defineProperties(A.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}}),A.prototype.updateAttribute=function(e){const t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=new(0,e.constructor)(e.length+o*i);r.set(e);for(let e=0;e<o;e++){const o=t[e]*i,s=n+e*i;for(let e=0;e<i;e++)r[s+e]=r[o+e]}return r},A.createTexture=function(e){let t=e.cache.modelOutliningCache;if((0,o.A)(t)||(t=e.cache.modelOutliningCache={}),(0,o.A)(t.outlineTexture))return t.outlineTexture;const n=Math.min(4096,a.A.maximumTextureSize);let i=n;const r=_(i),A=[];for(;i>1;)i>>=1,A.push(_(i));const f=new l.A({context:e,source:{arrayBufferView:r,mipLevels:A},width:n,height:1,pixelFormat:s.A.LUMINANCE,sampler:new c.A({wrapS:h.A.CLAMP_TO_EDGE,wrapT:h.A.CLAMP_TO_EDGE,minificationFilter:d.A.LINEAR_MIPMAP_LINEAR,magnificationFilter:u.A.LINEAR})});return t.outlineTexture=f,f},g.prototype.hasEdge=function(e,t){const n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};const y=A},366413:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(730839),o=n(624512),r=n(623524),s=n(494098),a=n(34274);const c={name:"PrimitiveOutlinePipelineStage",process:function(e,t,n){const c=e.shaderBuilder,l=e.uniformMap;c.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,o.A.BOTH),c.addAttribute("vec3","a_outlineCoordinates"),c.addVarying("vec3","v_outlineCoordinates");const u=t.outlineCoordinates,d={index:e.attributeIndex++,vertexBuffer:u.buffer,componentsPerAttribute:i.A.getNumberOfComponents(u.type),componentDatatype:u.componentDatatype,offsetInBytes:u.byteOffset,strideInBytes:u.byteStride,normalize:u.normalized};e.attributes.push(d),c.addUniform("sampler2D","model_outlineTexture",o.A.FRAGMENT);const h=r.A.createTexture(n.context);l.model_outlineTexture=function(){return h};const A=e.model;c.addUniform("vec4","model_outlineColor",o.A.FRAGMENT),l.model_outlineColor=function(){return A.outlineColor},c.addUniform("bool","model_showOutline",o.A.FRAGMENT),l.model_showOutline=function(){return A.showOutline},c.addVertexLines(s.A),c.addFragmentLines(a.A)}}},214666:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(660662),o=n(267980),r=n(369031),s=n(376758),a=n(491446),c=n(471147),l=n(127329);const u=function(e,t){r.A.typeOf.object("nodeRenderResources",e),r.A.typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=(0,s.A)(e.uniformMap),this.alphaOptions=(0,s.A)(e.alphaOptions),this.renderStateOptions=(0,s.A)(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const n=t.primitive;this.count=(0,a.A)(n.indices)?n.indices.count:c.A.getAttributeBySemantic(n,"POSITION").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;const u=c.A.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=o.A.clone(u.min,new o.A),this.positionMax=o.A.clone(u.max,new o.A),this.boundingSphere=i.A.fromCornerPoints(this.positionMin,this.positionMax,new i.A),this.lightingOptions=new l.A,this.pickId=void 0}},531218:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(491446),o=n(402330),r=n(995537),s=n(471147);const a={name:"PrimitiveStatisticsPipelineStage",_countGeometry:c,_count2DPositions:l,_countMorphTargetAttributes:u,_countMaterialTextures:d,_countFeatureIdTextures:h,_countBinaryMetadata:A};function c(e,t){const n=(0,i.A)(t.indices)?t.indices.count:s.A.getAttributeBySemantic(t,"POSITION").count,r=t.primitiveType;r===o.A.POINTS?e.pointsLength+=n:o.A.isTriangles(r)&&(e.trianglesLength+=function(e,t){switch(e){case o.A.TRIANGLES:return t/3;case o.A.TRIANGLE_STRIP:case o.A.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}(r,n));const a=t.attributes,c=a.length;for(let t=0;t<c;t++){const n=a[t];if((0,i.A)(n.buffer)){const t=(0,i.A)(n.typedArray);e.addBuffer(n.buffer,t)}}const l=t.outlineCoordinates;if((0,i.A)(l)&&(0,i.A)(l.buffer)){const t=!1;e.addBuffer(l.buffer,t)}const u=t.indices;if((0,i.A)(u)&&(0,i.A)(u.buffer)){const t=(0,i.A)(u.typedArray);e.addBuffer(u.buffer,t)}}function l(e,t){const n=t.positionBuffer2D;if((0,i.A)(n)){const t=!0;e.addBuffer(n,t)}}function u(e,t){const n=t.morphTargets;if(!(0,i.A)(n))return;const o=n.length;for(let t=0;t<o;t++){const o=n[t].attributes,r=o.length;for(let t=0;t<r;t++){const n=o[t];(0,i.A)(n.buffer)&&e.addBuffer(n.buffer,!1)}}}function d(e,t){const n=function(e){const t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],o=e.specularGlossiness;return(0,i.A)(o)&&(n.push(o.diffuseTexture),n.push(o.specularGlossinessTexture)),n}(t),o=n.length;for(let t=0;t<o;t++){const o=n[t];(0,i.A)(o)&&(0,i.A)(o.texture)&&e.addTexture(o.texture)}}function h(e,t){const n=t.length;for(let o=0;o<n;o++){const n=t[o];if(n instanceof r.A.FeatureIdTexture){const t=n.textureReader;(0,i.A)(t.texture)&&e.addTexture(t.texture)}}}function A(e,t){const n=t.structuralMetadata;(0,i.A)(n)&&(function(e,t){const n=t.propertyTextures;if(!(0,i.A)(n))return;const o=n.length;for(let t=0;t<o;t++){const o=n[t].properties;for(const t in o)if(o.hasOwnProperty(t)){const n=o[t].textureReader;(0,i.A)(n.texture)&&e.addTexture(n.texture)}}}(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);const o=t.featureTables;if(!(0,i.A)(o))return;const r=o.length;for(let t=0;t<r;t++){const n=o[t];e.addBatchTexture(n.batchTexture)}}a.process=function(e,t,n){const i=e.model,o=i.statistics;c(o,t),l(o,e.runtimePrimitive),u(o,t),d(o,t.material),h(o,t.featureIds),A(o,i)};const f=a},252843:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(660662),o=n(641613),r=n(442790),s=n(267980),a=n(376758),c=n(430346),l=n(491446),u=n(584164),d=n(471147),h=n(62467),A=n(624512),f=n(595826),p=n(78173);const m=new u.A,_=new u.A,g={name:"SceneMode2DPipelineStage",process:function(e,t,n){const g=d.A.getAttributeBySemantic(t,f.A.POSITION),T=e.shaderBuilder,w=e.model,E=w.sceneGraph.computedModelMatrix,S=e.runtimeNode.computedTransform,C=u.A.multiplyTransformation(E,S,m),x=function(e,t,n){const o=u.A.multiplyByPoint(t,e.positionMin,y),r=p.A.computeActualWgs84Position(n,o,o),s=u.A.multiplyByPoint(t,e.positionMax,b),a=p.A.computeActualWgs84Position(n,s,s);return i.A.fromCornerPoints(r,a,new i.A)}(e,C,n),I=e.runtimePrimitive;I.boundingSphere2D=x;const P=e.runtimeNode.node.instances;if((0,l.A)(P))return;if((0,l.A)(g.typedArray)){const e=function(e,t,n,i){const c=(0,a.A)(i);c.mode=h.A.COLUMBUS_VIEW;const d=function(e,t,n,i){let o;o=(0,l.A)(e.quantization)?function(e,t){const n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let t=0;t<n;t+=3){const n=s.A.fromArray(e,t,v),a=s.A.multiplyComponents(n,r,n),c=s.A.add(a,o,a);i[t]=c.x,i[t+1]=c.y,i[t+2]=c.z}return i}(e.typedArray,e.quantization):e.typedArray.slice();const r=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,a=o.length,c=(0,l.A)(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let e=r;e<a;e+=c){const r=s.A.fromArray(o,e,v);if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))continue;const a=u.A.multiplyByPoint(t,r,r),c=p.A.computeActualWgs84Position(i,a,a),l=s.A.subtract(c,n,c);o[e]=l.x,o[e+1]=l.y,o[e+2]=l.z}return o}(e,t,n.center,c),A=o.A.createVertexBuffer({context:i.context,typedArray:d,usage:r.A.STATIC_DRAW});return A.vertexArrayDestroyable=!1,A}(g,C,x,n);I.positionBuffer2D=e,w._modelResources.push(e),g.typedArray=void 0}T.addDefine("USE_2D_POSITIONS",void 0,A.A.VERTEX),T.addUniform("mat4","u_modelView2D",A.A.VERTEX);const D=u.A.fromTranslation(x.center,new u.A),O=n.context,L={u_modelView2D:function(){return u.A.multiplyTransformation(O.uniformState.view,D,_)}};e.uniformMap=(0,c.A)(L,e.uniformMap)}},y=new s.A,b=new s.A,v=new s.A,T=g},391852:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(419061),o=n(491446),r=n(624512),s=n(443045),a=n(995537),c=n(471147);const l={name:"SelectedFeatureIdPipelineStage",STRUCT_ID_SELECTED_FEATURE:"SelectedFeature",STRUCT_NAME_SELECTED_FEATURE:"SelectedFeature",FUNCTION_ID_FEATURE_VARYINGS_VS:"updateFeatureStructVS",FUNCTION_ID_FEATURE_VARYINGS_FS:"updateFeatureStructFS",FUNCTION_SIGNATURE_UPDATE_FEATURE:"void updateFeatureStruct(inout SelectedFeature feature)"};function u(e){return e instanceof a.A.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function d(e){return e instanceof a.A.FeatureIdTexture?r.A.FRAGMENT:r.A.BOTH}l.process=function(e,t,n){const a=e.shaderBuilder;e.hasPropertyTable=!0;const h=function(e,t,n){let r,s;return(0,o.A)(t.instances)&&(s=c.A.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,o.A)(s))?(r=(0,i.A)(s.label,s.positionalLabel),{featureIds:s,variableName:r,shaderDestination:d(s),featureIdDefine:u(s)}):(s=c.A.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),r=(0,i.A)(s.label,s.positionalLabel),{featureIds:s,variableName:r,shaderDestination:d(s),featureIdDefine:u(s)})}(e.model,e.runtimeNode.node,t),A=h.shaderDestination;a.addDefine("HAS_SELECTED_FEATURE_ID",void 0,A),a.addDefine("SELECTED_FEATURE_ID",h.variableName,A),a.addDefine(h.featureIdDefine,void 0,A),function(e){e.addStructField(l.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(l.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(l.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}(a);const f=h.featureIds.nullFeatureId,p=e.uniformMap;(0,o.A)(f)&&(a.addDefine("HAS_NULL_FEATURE_ID",void 0,A),a.addUniform("int","model_nullFeatureId",A),p.model_nullFeatureId=function(){return f}),h.shaderDestination===r.A.BOTH&&a.addVertexLines(s.A),a.addFragmentLines(s.A)};const h=l},456727:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(430346),o=n(624512),r=n(40640),s=n(595826);const a={name:"SkinningPipelineStage",FUNCTION_ID_GET_SKINNING_MATRIX:"getSkinningMatrix",FUNCTION_SIGNATURE_GET_SKINNING_MATRIX:"mat4 getSkinningMatrix()",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,o.A.VERTEX),function(e,t){e.addFunction(a.FUNCTION_ID_GET_SKINNING_MATRIX,a.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,o.A.VERTEX);let n,i;e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,["mat4 skinnedMatrix = mat4(0);"]);const r=["x","y","z","w"],c=function(e){let t=-1;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=n[e];(i.semantic===s.A.JOINTS||i.semantic===s.A.WEIGHTS)&&(t=Math.max(t,i.setIndex))}return t}(t);for(n=0;n<=c;n++)for(i=0;i<=3;i++){const t=r[i],o=`skinnedMatrix += a_weights_${n}.${t} * u_jointMatrices[int(a_joints_${n}.${t})];`;e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,[o])}e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,["return skinnedMatrix;"])}(n,t);const c=e.runtimeNode,l=c.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${l.length}]`,o.A.VERTEX),n.addVertexLines(r.A);const u={u_jointMatrices:function(){return c.computedJointMatrices}};e.uniformMap=(0,i.A)(u,e.uniformMap)}},c=a},942836:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?i.ALL_OPAQUE:t===e?i.ALL_TRANSLUCENT:i.OPAQUE_AND_TRANSLUCENT}},o=Object.freeze(i)},821174:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(491446),o=n(677354),r=n(869467),s=n(367817),a=n(271868),c=n(57775),l=n(616e3),u=n(78078),d=n(557448);function h(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function A(e,t,n){const{id:o,textureUniform:l,image:u}=t,h=n.webgl2?f(l,u,n):function(e,t,n){const{typedArray:o,sampler:l}=e,u=p(l),h=l.wrapS===d.A.REPEAT||l.wrapS===d.A.MIRRORED_REPEAT||l.wrapT===d.A.REPEAT||l.wrapT===d.A.MIRRORED_REPEAT,{width:A,height:_}=(0,i.A)(o)?e:t,g=[A,_].every(s.A.isPowerOfTwo);if(!u&&!h||g)return f(e,t,n);if(!(0,i.A)(o))return f(e,(0,a.A)(t),n);if(e.pixelDatatype===c.A.UNSIGNED_BYTE){const e=(0,r.A)(o,A,_);return f({sampler:l},(0,a.A)(e),n)}return u?console.warn("Texture requires resizing for mipmaps but pixelDataType cannot be resized. The texture may be rendered incorrectly."):h&&console.warn("Texture requires resizing for wrapping but pixelDataType cannot be resized. The texture may be rendered incorrectly."),m(e,n)}(l,u,n),A=e._textures[o];(0,i.A)(A)&&A!==n.defaultTexture&&A.destroy(),e._textures[o]=h}function f(e,t,n){const{typedArray:o,sampler:r}=e,s=(0,i.A)(o)?m(e,n):new l.A({context:n,source:t,sampler:r});return p(r)&&s.generateMipmap(),s}function p(e){return[u.A.NEAREST_MIPMAP_NEAREST,u.A.NEAREST_MIPMAP_LINEAR,u.A.LINEAR_MIPMAP_NEAREST,u.A.LINEAR_MIPMAP_LINEAR].includes(e.minificationFilter)}function m(e,t){const{pixelFormat:n,pixelDatatype:i,width:o,height:r,typedArray:s,sampler:a}=e;return new l.A({context:t,pixelFormat:n,pixelDatatype:i,source:{arrayBufferView:s,width:o,height:r},sampler:a,flipY:!1})}h.prototype.getTexture=function(e){return this._textures[e]},h.prototype.loadTexture2D=function(e,t){(0,i.A)(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):function(e,t,n){n.resource.fetchImage().then((function(i){e._loadedImages.push({id:t,image:i,textureUniform:n})})).catch((function(){const n=e._textures[t];(0,i.A)(n)&&n!==e._defaultTexture&&n.destroy(),e._textures[t]=e._defaultTexture}))}(this,e,t)},h.prototype.update=function(e){if(e.frameNumber===this._lastUpdatedFrame)return;this._lastUpdatedFrame=e.frameNumber;const t=e.context;this._defaultTexture=t.defaultTexture;const n=this._loadedImages;for(let e=0;e<n.length;e++)A(this,n[e],t);n.length=0},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){const e=this._textures;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n!==this._defaultTexture&&n.destroy()}return(0,o.A)(this)};const _=h},807048:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(430346),o=n(624512),r=n(434067),s=n(938987);const a={name:"TilesetPipelineStage",process:function(e,t,n){if(t.hasSkipLevelOfDetail(n)){e.shaderBuilder.addDefine("POLYGON_OFFSET",void 0,o.A.FRAGMENT);const t={u_polygonOffset:function(){return r.A.ZERO}};e.uniformMap=(0,i.A)(t,e.uniformMap),e.hasSkipLevelOfDetail=!0}const a=e.renderStateOptions;a.stencilTest=s.A.setCesium3DTileBit(),a.stencilMask=s.A.CESIUM_3D_TILE_MASK}}},671098:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat3",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"})},6214:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(641613),o=n(442790),r=n(491446),s=n(874915),a=n(471147),c=n(402330),l=n(624512),u=n(595826),d=n(635692);const h={name:"WireframePipelineStage",process:function(e,t,n){e.shaderBuilder.addDefine("HAS_WIREFRAME",void 0,l.A.FRAGMENT);const h=e.model,A=function(e,t,n){const c=a.A.getAttributeBySemantic(e,u.A.POSITION).count,l=n.context.webgl2;let h;if((0,r.A)(t)){const e=t.buffer,n=t.count;(0,r.A)(e)&&l?(h=e.sizeInBytes===n?new Uint8Array(n):s.A.createTypedArray(c,n),e.getBufferData(h)):h=t.typedArray}const A=e.primitiveType,f=d.A.createWireframeIndices(A,c,h),p=s.A.fromSizeInBytes(f.BYTES_PER_ELEMENT);return i.A.createIndexBuffer({context:n.context,typedArray:f,usage:o.A.STATIC_DRAW,indexDatatype:p})}(t,e.indices,n);h._pipelineResources.push(A),e.wireframeIndexBuffer=A,h.statistics.addBuffer(A,!1);const f=e.primitiveType,p=e.count;e.primitiveType=c.A.LINES,e.count=d.A.getWireframeIndicesCount(f,p)}},A=h},150831:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(660662),o=n(376758),r=n(491446),s=n(605971),a=n(584164),c=n(377496),l=n(40118),u=n(508380),d=n(261126),h=n(501782),A=n(62467),f=n(988609),p=n(899700),m=n(471147),_=n(270316);const g=function(e,t){const n=e.shaderBuilder;n.addVertexLines(h.A),n.addFragmentLines(d.A);const g=function(e){const t=e.wireframeIndexBuffer;if((0,r.A)(t))return t;const n=e.indices;if((0,r.A)(n)){if(!(0,r.A)(n.buffer))throw new s.A("Indices must be provided as a Buffer");return n.buffer}}(e),y=new u.A({context:t.context,indexBuffer:g,attributes:e.attributes}),b=e.model;b._pipelineResources.push(y);const v=n.buildShaderProgram(t.context);b._pipelineResources.push(v);const T=e.alphaOptions.pass,w=b.sceneGraph,E=t.mode===A.A.SCENE3D;let S,C;if(E||t.scene3DOnly||!b._projectTo2D){const t=E?w._computedModelMatrix:w._computedModelMatrix2D;S=a.A.multiplyTransformation(t,e.runtimeNode.computedTransform,new a.A),C=i.A.transform(e.boundingSphere,S,e.boundingSphere)}else S=a.A.multiplyTransformation(w._computedModelMatrix,e.runtimeNode.computedTransform,new a.A),C=e.runtimePrimitive.boundingSphere2D;let x=(0,o.A)(l.A.fromCache(e.renderStateOptions),!0);x.cull.face=m.A.getCullFace(S,e.primitiveType),x=l.A.fromCache(x);const I=(0,r.A)(b.classificationType),P=!I&&f.A.castShadows(b.shadows),D=!I&&f.A.receiveShadows(b.shadows),O=I?void 0:e.pickId,L=new c.A({boundingVolume:C,modelMatrix:S,uniformMap:e.uniformMap,renderState:x,vertexArray:y,shaderProgram:v,cull:b.cull,pass:T,count:e.count,owner:b,pickId:O,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:b.debugShowBoundingVolume,castShadows:P,receiveShadows:D});return I?new p.A({primitiveRenderResources:e,command:L}):new _.A({primitiveRenderResources:e,command:L})}},598361:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,REPEAT:1,MIRRORED_REPEAT:2})},304686:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({STOPPED:0,ANIMATING:1})},995537:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(953019),o=n(267980),r=n(626809),s=n(331185),a=n(584164);const c={};function l(){this.credits=[]}function u(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=r.A.clone(u.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=u.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=u.DEFAULT_ROUGHNESS_FACTOR}function d(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=r.A.clone(d.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=o.A.clone(d.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=d.DEFAULT_GLOSSINESS_FACTOR}function h(){this.metallicRoughness=new u,this.specularGlossiness=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=o.A.clone(h.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=i.A.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}u.DEFAULT_BASE_COLOR_FACTOR=r.A.ONE,u.DEFAULT_METALLIC_FACTOR=1,u.DEFAULT_ROUGHNESS_FACTOR=1,d.DEFAULT_DIFFUSE_FACTOR=r.A.ONE,d.DEFAULT_SPECULAR_FACTOR=o.A.ONE,d.DEFAULT_GLOSSINESS_FACTOR=1,h.DEFAULT_EMISSIVE_FACTOR=o.A.ZERO,c.Quantization=function(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0},c.Attribute=function(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0},c.Indices=function(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0},c.FeatureIdAttribute=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0},c.FeatureIdTexture=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0},c.FeatureIdImplicitRange=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0},c.MorphTarget=function(){this.attributes=[]},c.Primitive=function(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0},c.Instances=function(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1},c.Skin=function(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]},c.Node=function(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0},c.Scene=function(){this.nodes=[]},c.AnimatedPropertyType=Object.freeze({TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"}),c.AnimationSampler=function(){this.input=[],this.interpolation=void 0,this.output=[]},c.AnimationTarget=function(){this.node=void 0,this.path=void 0},c.AnimationChannel=function(){this.sampler=void 0,this.target=void 0},c.Animation=function(){this.name=void 0,this.samplers=[],this.channels=[]},c.ArticulationStage=function(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0},c.Articulation=function(){this.name=void 0,this.stages=[]},c.Asset=l,c.Components=function(){this.asset=new l,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=a.A.clone(a.A.IDENTITY)},c.TextureReader=function(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=s.A.clone(s.A.IDENTITY),this.channels=void 0},c.MetallicRoughness=u,c.SpecularGlossiness=d,c.Material=h;const A=c},534095:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(303578),o=n(267980),r=n(419061),s=n(491446),a=n(677354),c=n(610750),l=n(220871),u=n(331185),d=n(584164),h=n(658542),A=n(543622),f=n(168976),p=n(608191);function m(e){let t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).textureUrl;(0,s.A)(t)||(t=(0,i.A)("Assets/Textures/moonSmall.jpg")),this.show=(0,r.A)(e.show,!0),this.textureUrl=t,this._ellipsoid=(0,r.A)(e.ellipsoid,c.A.MOON),this.onlySunLighting=(0,r.A)(e.onlySunLighting,!0),this._ellipsoidPrimitive=new f.A({radii:this.ellipsoid.radii,material:p.A.fromType(p.A.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new l.A}Object.defineProperties(m.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const _=new u.A,g=new u.A,y=new o.A,b=[];m.prototype.update=function(e){if(!this.show)return;const t=this._ellipsoidPrimitive;t.material.uniforms.image=this.textureUrl,t.onlySunLighting=this.onlySunLighting;const n=e.time;(0,s.A)(A.A.computeIcrfToFixedMatrix(n,_))||A.A.computeTemeToPseudoFixedMatrix(n,_);const i=this._axes.evaluate(n,g);u.A.transpose(i,i),u.A.multiply(_,i,i);const o=h.A.computeMoonPositionInEarthInertialFrame(n,y);u.A.multiplyByVector(_,o,o),d.A.fromRotationTranslation(i,o,t.modelMatrix);const r=e.commandList;return e.commandList=b,b.length=0,t.update(e),e.commandList=r,1===b.length?b[0]:void 0},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),(0,a.A)(this)};const v=m},409816:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(491446),o=n(786101),r=n(677354),s=n(605971),a=n(209202),c=n(866569),l=n(83181),u=n(307898),d=n(123245),h=n(308695),A=n(223702),f=n(891846),p=n(635649),m=n(217543),_=n(192518);function g(e,t,n,o){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;const r=(0,i.A)(o.contents)?o.contents:o.content;this._innerContentHeaders=r,this._requestsInFlight=0,this._cancelCount=0;const s=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(s),this._requests=new Array(s),this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e})),this._innerContentResources=new Array(s),this._serverKeys=new Array(s);for(let e=0;e<s;e++){const t=n.getDerivedResource({url:r[e].uri}),i=c.A.getServerKey(t.getUrlComponent());this._innerContentResources[e]=t,this._serverKeys[e]=i}}function y(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function b(e,t){e._cancelCount++,e._tile._contentState=t;const n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;const i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}function v(e,t,n,o){const r=e._innerContentResources[t].clone(),s=e.tile,c=e._serverKeys[t],d=new a.A({throttle:!0,throttleByServer:!0,type:u.A.TILES3D,priorityFunction:function(){return s._priority},serverKey:c});r.request=d,e._requests[t]=d;const h=r.fetchArrayBuffer();if((0,i.A)(h))return h.then((function(t){if(!(n<e._cancelCount)){if(!r.request.cancelled&&r.request.state!==l.A.CANCELLED)return y(e,-1),t;b(e,o)}})).catch((function(i){n<e._cancelCount||(r.request.cancelled||r.request.state===l.A.CANCELLED?b(e,o):(y(e,-1),T(e,t,i)))}))}function T(e,t,n){const o=e._tileset,r=e._innerContentResources[t].url,s=(0,i.A)(n.message)?n.message:n.toString();o.tileFailed.numberOfListeners>0?o.tileFailed.raiseEvent({url:r,message:s}):(console.log(`A content failed to load: ${r}`),console.log(`Error: ${s}`))}Object.defineProperties(g.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return!!this._contentsCreated&&this._ready}},readyPromise:{get:function(){return(0,o.A)("Multiple3DTileContent.readyPromise","Multiple3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Multiple3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){throw new s.A("Multiple3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(){throw new s.A("Multiple3DTileContent cannot have group metadata")}},innerContentUrls:{get:function(){return this._innerContentHeaders.map((function(e){return e.uri}))}}}),g.prototype.requestInnerContents=function(){if(!function(e){const t={};for(let n=0;n<e.length;n++){const o=e[n];(0,i.A)(t[o])?t[o]++:t[o]=1}for(const e in t)if(t.hasOwnProperty(e)&&!c.A.serverHasOpenSlots(e,t[e]))return!1;return c.A.heapHasOpenSlots(e.length)}(this._serverKeys))return void(this.tileset.statistics.numberOfAttemptedRequests+=this._serverKeys.length);const e=this._innerContentHeaders;y(this,e.length);const t=this._cancelCount;for(let n=0;n<e.length;n++)this._arrayFetchPromises[n]=v(this,n,t,this._tile._contentState);return async function(e){const t=e._cancelCount,n=await Promise.all(e._arrayFetchPromises);if(t<e._cancelCount)return;const o=n.map(((t,n)=>async function(e,t,n){if((0,i.A)(t))try{const o=(0,_.A)(t);if(o.contentType===A.A.EXTERNAL_TILESET)throw new d.A("External tilesets are disallowed inside multiple contents");e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||o.contentType===A.A.GEOMETRY||o.contentType===A.A.VECTOR;const r=e._tileset,s=e._innerContentResources[n],a=e._tile;let c;const l=f.A[o.contentType];c=(0,i.A)(o.binaryPayload)?await Promise.resolve(l(r,a,s,o.binaryPayload.buffer,0)):await Promise.resolve(l(r,a,s,o.jsonPayload));const u=e._innerContentHeaders[n];if(a.hasImplicitContentMetadata){const e=a.implicitSubtree,t=a.implicitCoordinates;c.metadata=e.getContentMetadataView(t,n)}else a.hasImplicitContent||(c.metadata=(0,p.A)(r,u));const g=(0,m.A)(r,u);return(0,i.A)(g)&&(c.group=new h.A({metadata:g})),c}catch(t){T(e,n,t)}}(e,t,n))),r=await Promise.all(o);return e._contentsCreated=!0,e._contents=r.filter(i.A),r}(this)},g.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){const t=this._requests[e];(0,i.A)(t)&&t.cancel()}},g.prototype.hasProperty=function(e,t){return!1},g.prototype.getFeature=function(e){},g.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},g.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},g.prototype.update=function(e,t){const n=this._contents,i=n.length;let o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0,this._resolveContent(this))},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,r.A)(this)};const w=g},433184:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(647934),o=n(41476),r=n(491446),s=n(677354),a=n(276904),c=n(352581),l=n(769493),u=n(377496),d=n(804701),h=n(57775),A=n(40118),f=n(342875),p=n(616e3),m=n(756995),_=n(615954),g=n(620297),y=n(443383);function b(e){this._numSamples=1,this._translucentMultipassSupport=!1,this._translucentMRTSupport=!1;const t=e.colorBufferFloat&&e.depthTexture&&e.floatBlend;this._translucentMRTSupport=e.drawBuffers&&t,this._translucentMultipassSupport=!this._translucentMRTSupport&&t,this._opaqueFBO=void 0,this._opaqueTexture=void 0,this._depthStencilTexture=void 0,this._accumulationTexture=void 0,this._translucentFBO=new d.A({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._alphaFBO=new d.A({createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._adjustTranslucentFBO=new d.A({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1}),this._adjustAlphaFBO=new d.A({createColorAttachments:!1}),this._opaqueClearCommand=new l.A({color:new o.A(0,0,0,0),owner:this}),this._translucentMRTClearCommand=new l.A({color:new o.A(0,0,0,1),owner:this}),this._translucentMultipassClearCommand=new l.A({color:new o.A(0,0,0,0),owner:this}),this._alphaClearCommand=new l.A({color:new o.A(1,1,1,1),owner:this}),this._translucentRenderStateCache={},this._alphaRenderStateCache={},this._compositeCommand=void 0,this._adjustTranslucentCommand=void 0,this._adjustAlphaCommand=void 0,this._viewport=new i.A,this._rs=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHDR=!1}function v(e){e._accumulationTexture=e._accumulationTexture&&!e._accumulationTexture.isDestroyed()&&e._accumulationTexture.destroy(),e._revealageTexture=e._revealageTexture&&!e._revealageTexture.isDestroyed()&&e._revealageTexture.destroy()}function T(e){e._translucentFBO.destroy(),e._alphaFBO.destroy(),e._adjustTranslucentFBO.destroy(),e._adjustAlphaFBO.destroy()}function w(e){v(e),T(e)}b.prototype.update=function(e,t,n,o,s){if(!this.isSupported())return;this._opaqueFBO=n,this._opaqueTexture=n.getColorTexture(0),this._depthStencilTexture=n.getDepthStencilTexture();const{width:l,height:u}=this._opaqueTexture,d=this._accumulationTexture,g=!(0,r.A)(d)||d.width!==l||d.height!==u||o!==this._useHDR,y=this._numSamples!==s;if((g||y)&&(this._numSamples=s,function(e,t,n,i){v(e),e._accumulationTexture=new p.A({context:t,width:n,height:i,pixelFormat:a.A.RGBA,pixelDatatype:h.A.FLOAT});const o=new Float32Array(n*i*4);e._revealageTexture=new p.A({context:t,pixelFormat:a.A.RGBA,pixelDatatype:h.A.FLOAT,source:{arrayBufferView:o,width:n,height:i},flipY:!1})}(this,e,l,u)),(!(0,r.A)(this._translucentFBO.framebuffer)||g||y)&&!function(e,t){T(e);const n=c.A.FRAMEBUFFER_COMPLETE;let i=!0;const{width:o,height:r}=e._accumulationTexture;if(e._translucentMRTSupport&&(e._translucentFBO.setColorTexture(e._accumulationTexture,0),e._translucentFBO.setColorTexture(e._revealageTexture,1),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture,0),e._adjustTranslucentFBO.setColorTexture(e._revealageTexture,1),e._adjustTranslucentFBO.update(t,o,r),e._translucentFBO.status===n&&e._adjustTranslucentFBO.status===n||(T(e),e._translucentMRTSupport=!1)),!e._translucentMRTSupport){e._translucentFBO.setColorTexture(e._accumulationTexture),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._alphaFBO.setColorTexture(e._revealageTexture),e._alphaFBO.setDepthStencilTexture(e._depthStencilTexture),e._alphaFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture),e._adjustTranslucentFBO.update(t,o,r),e._adjustAlphaFBO.setColorTexture(e._revealageTexture),e._adjustAlphaFBO.update(t,o,r);const s=e._translucentFBO.status===n,a=e._alphaFBO.status===n,c=e._adjustTranslucentFBO.status===n,l=e._adjustAlphaFBO.status===n;s&&a&&c&&l||(w(e),e._translucentMultipassSupport=!1,i=!1)}return i}(this,e))return;this._useHDR=o;const b=this;let E,S;(0,r.A)(this._compositeCommand)||(E=new f.A({sources:[_.A]}),this._translucentMRTSupport&&E.defines.push("MRT"),S={u_opaque:function(){return b._opaqueTexture},u_accumulation:function(){return b._accumulationTexture},u_revealage:function(){return b._revealageTexture}},this._compositeCommand=e.createViewportQuadCommand(E,{uniformMap:S,owner:this})),(0,r.A)(this._adjustTranslucentCommand)||(this._translucentMRTSupport?(E=new f.A({defines:["MRT"],sources:[m.A]}),S={u_bgColor:function(){return b._translucentMRTClearCommand.color},u_depthTexture:function(){return b._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(E,{uniformMap:S,owner:this})):this._translucentMultipassSupport&&(E=new f.A({sources:[m.A]}),S={u_bgColor:function(){return b._translucentMultipassClearCommand.color},u_depthTexture:function(){return b._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(E,{uniformMap:S,owner:this}),S={u_bgColor:function(){return b._alphaClearCommand.color},u_depthTexture:function(){return b._depthStencilTexture}},this._adjustAlphaCommand=e.createViewportQuadCommand(E,{uniformMap:S,owner:this}))),this._viewport.width=l,this._viewport.height=u;const C=!i.A.equals(this._viewport,t.viewport);let x=C!==this._useScissorTest;this._useScissorTest=C,i.A.equals(this._scissorRectangle,t.viewport)||(this._scissorRectangle=i.A.clone(t.viewport,this._scissorRectangle),x=!0),(0,r.A)(this._rs)&&i.A.equals(this._viewport,this._rs.viewport)&&!x||(this._rs=A.A.fromCache({viewport:this._viewport,scissorTest:{enabled:this._useScissorTest,rectangle:this._scissorRectangle}})),(0,r.A)(this._compositeCommand)&&(this._compositeCommand.renderState=this._rs),this._adjustTranslucentCommand&&(this._adjustTranslucentCommand.renderState=this._rs),(0,r.A)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.renderState=this._rs)};const E={enabled:!0,color:new o.A(0,0,0,0),equationRgb:g.A.ADD,equationAlpha:g.A.ADD,functionSourceRgb:y.A.ONE,functionDestinationRgb:y.A.ONE,functionSourceAlpha:y.A.ZERO,functionDestinationAlpha:y.A.ONE_MINUS_SOURCE_ALPHA},S={enabled:!0,color:new o.A(0,0,0,0),equationRgb:g.A.ADD,equationAlpha:g.A.ADD,functionSourceRgb:y.A.ONE,functionDestinationRgb:y.A.ONE,functionSourceAlpha:y.A.ONE,functionDestinationAlpha:y.A.ONE},C={enabled:!0,color:new o.A(0,0,0,0),equationRgb:g.A.ADD,equationAlpha:g.A.ADD,functionSourceRgb:y.A.ZERO,functionDestinationRgb:y.A.ONE_MINUS_SOURCE_ALPHA,functionSourceAlpha:y.A.ZERO,functionDestinationAlpha:y.A.ONE_MINUS_SOURCE_ALPHA};function x(e,t,n,i){let o=n[i.id];if(!(0,r.A)(o)){const e=A.A.getState(i);e.depthMask=!1,e.blending=t,o=A.A.fromCache(e),n[i.id]=o}return o}function I(e,t,n,i){const{shaderCache:o}=e,s=o.getDerivedShaderProgram(t,n);if((0,r.A)(s))return s;const a=t._attributeLocations,c=t.fragmentShaderSource.clone();c.sources=c.sources.map((function(e){return f.A.replaceMain(e,"czm_translucent_main").replace(/out_FragColor/g,"czm_out_FragColor").replace(/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,"").replace(/\bdiscard\b/g,"czm_discard = true").replace(/czm_phong/g,"czm_translucentPhong")})),c.sources.splice(0,0,"vec4 czm_out_FragColor;\nbool czm_discard = false;\n");const l=[...i.matchAll(/out_FragData_(\d+)/g)];let u="";for(let e=0;e<l.length;e++){const t=l[e];u=`layout (location = ${t[1]}) out vec4 ${t[0]};\n${u}`}return c.sources.push(u),c.sources.push(`void main()\n{\n    czm_translucent_main();\n    if (czm_discard)\n    {\n        discard;\n    }\n${i}}\n`),o.createDerivedShaderProgram(t,n,{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:c,attributeLocations:a})}b.prototype.createDerivedCommands=function(e,t,n){if((0,r.A)(n)||(n={}),this._translucentMRTSupport){let o,s;return(0,r.A)(n.translucentCommand)&&(o=n.translucentCommand.shaderProgram,s=n.translucentCommand.renderState),n.translucentCommand=u.A.shallowClone(e,n.translucentCommand),(0,r.A)(o)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=o,n.translucentCommand.renderState=s):(n.translucentCommand.shaderProgram=function(e,t){return I(e,t,"translucentMRT","    vec3 Ci = czm_out_FragColor.rgb * czm_out_FragColor.a;\n    float ai = czm_out_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    out_FragData_0 = vec4(Ci * wzi, ai);\n    out_FragData_1 = vec4(ai * wzi);\n")}(t,e.shaderProgram),n.translucentCommand.renderState=(i=e.renderState,x(0,E,this._translucentRenderStateCache,i)),n.shaderProgramId=e.shaderProgram.id),n}var i;let o,s,a,c;return(0,r.A)(n.translucentCommand)&&(o=n.translucentCommand.shaderProgram,s=n.translucentCommand.renderState,a=n.alphaCommand.shaderProgram,c=n.alphaCommand.renderState),n.translucentCommand=u.A.shallowClone(e,n.translucentCommand),n.alphaCommand=u.A.shallowClone(e,n.alphaCommand),(0,r.A)(o)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=o,n.translucentCommand.renderState=s,n.alphaCommand.shaderProgram=a,n.alphaCommand.renderState=c):(n.translucentCommand.shaderProgram=function(e,t){return I(e,t,"translucentMultipass","    vec3 Ci = czm_out_FragColor.rgb * czm_out_FragColor.a;\n    float ai = czm_out_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    out_FragColor = vec4(Ci, ai) * wzi;\n")}(t,e.shaderProgram),n.translucentCommand.renderState=function(e,t,n){return x(0,S,e._translucentRenderStateCache,n)}(this,0,e.renderState),n.alphaCommand.shaderProgram=function(e,t){return I(e,t,"alphaMultipass","    float ai = czm_out_FragColor.a;\n    out_FragColor = vec4(ai);\n")}(t,e.shaderProgram),n.alphaCommand.renderState=function(e,t,n){return x(0,C,e._alphaRenderStateCache,n)}(this,0,e.renderState),n.shaderProgramId=e.shaderProgram.id),n},b.prototype.executeCommands=function(e,t,n,i,o){this._translucentMRTSupport?function(e,t,n,i,o,s){const{context:a,frameState:c}=t,{useLogDepth:l,shadowState:u}=c,d=t._hdr,h=i.framebuffer,A=u.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(a,i);const f=e._opaqueFBO.framebuffer;let p,m;i.framebuffer=e._translucentFBO.framebuffer;for(let e=0;e<o.length;++e)p=o[e],p=l?p.derivedCommands.logDepth.command:p,p=d?p.derivedCommands.hdr.command:p,m=A&&p.receiveShadows?p.derivedCommands.oit.shadows.translucentCommand:p.derivedCommands.oit.translucentCommand,n(m,t,a,i,f);(0,r.A)(s)&&(p=s.unclassifiedCommand,m=A&&p.receiveShadows?p.derivedCommands.oit.shadows.translucentCommand:p.derivedCommands.oit.translucentCommand,n(m,t,a,i,f)),i.framebuffer=h}(this,e,t,n,i,o):function(e,t,n,i,o,s){let a,c,l;const{context:u,frameState:d}=t,{useLogDepth:h,shadowState:A}=d,f=t._hdr,p=i.framebuffer,m=A.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(u,i),i.framebuffer=e._adjustAlphaFBO.framebuffer,e._adjustAlphaCommand.execute(u,i);const _=e._opaqueFBO.framebuffer;for(i.framebuffer=e._translucentFBO.framebuffer,l=0;l<o.length;++l)a=o[l],a=h?a.derivedCommands.logDepth.command:a,a=f?a.derivedCommands.hdr.command:a,c=m&&a.receiveShadows?a.derivedCommands.oit.shadows.translucentCommand:a.derivedCommands.oit.translucentCommand,n(c,t,u,i,_);for((0,r.A)(s)&&(a=s.unclassifiedCommand,c=m&&a.receiveShadows?a.derivedCommands.oit.shadows.translucentCommand:a.derivedCommands.oit.translucentCommand,n(c,t,u,i,_)),i.framebuffer=e._alphaFBO.framebuffer,l=0;l<o.length;++l)a=o[l],a=h?a.derivedCommands.logDepth.command:a,a=f?a.derivedCommands.hdr.command:a,c=m&&a.receiveShadows?a.derivedCommands.oit.shadows.alphaCommand:a.derivedCommands.oit.alphaCommand,n(c,t,u,i,_);(0,r.A)(s)&&(a=s.unclassifiedCommand,c=m&&a.receiveShadows?a.derivedCommands.oit.shadows.alphaCommand:a.derivedCommands.oit.alphaCommand,n(c,t,u,i,_)),i.framebuffer=p}(this,e,t,n,i,o)},b.prototype.execute=function(e,t){this._compositeCommand.execute(e,t)},b.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this._opaqueFBO.framebuffer,o.A.clone(n,this._opaqueClearCommand.color),this._opaqueClearCommand.execute(e,t),t.framebuffer=this._translucentFBO.framebuffer,(this._translucentMRTSupport?this._translucentMRTClearCommand:this._translucentMultipassClearCommand).execute(e,t),this._translucentMultipassSupport&&(t.framebuffer=this._alphaFBO.framebuffer,this._alphaClearCommand.execute(e,t)),t.framebuffer=i},b.prototype.isSupported=function(){return this._translucentMRTSupport||this._translucentMultipassSupport},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return w(this),(0,r.A)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,r.A)(this._adjustTranslucentCommand)&&(this._adjustTranslucentCommand.shaderProgram=this._adjustTranslucentCommand.shaderProgram&&this._adjustTranslucentCommand.shaderProgram.destroy()),(0,r.A)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.shaderProgram=this._adjustAlphaCommand.shaderProgram&&this._adjustAlphaCommand.shaderProgram.destroy()),(0,s.A)(this)};const P=b},311994:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(267980),o=n(571804),r=n(491446),s=n(677354),a=n(955943),c=n(874915),l=n(471874),u=n(276904),d=n(641613),h=n(442790),A=n(718289),f=n(346154),p=n(57775),m=n(302836),_=n(342875),g=n(616e3),y=n(508380),b=n(975574),v=n(720979),T=n(810467);function w(e){this._url=e,this._cubeMapBuffers=void 0,this._cubeMaps=void 0,this._texture=void 0,this._mipTextures=void 0,this._va=void 0,this._sp=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1,this._errorEvent=new a.A}Object.defineProperties(w.prototype,{url:{get:function(){return this._url}},errorEvent:{get:function(){return this._errorEvent}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}}}),w.isSupported=function(e){return e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat};const E=new i.A(1,0,0),S=new i.A(0,0,1),C=new i.A(-1,0,0),x=new i.A(0,0,-1),I=new i.A(0,1,0),P=[I,C,S,new i.A(0,-1,0),E,I,x,I,I],D=P.length,O=new Float32Array(3*D);let L=0;for(let e=0;e<D;++e,L+=3)i.A.pack(P[e],O,L);const N=new Float32Array([-1,1,-1,0,0,1,0,0,1,0,1,1,0,-1,-1,-1,1,-1]),M=new Uint16Array([0,1,2,2,3,1,7,6,1,3,6,1,2,5,4,3,4,2,4,8,6,3,4,6]);function R(e){return function(){return e}}function F(e){let t,n;e._va=e._va&&e._va.destroy(),e._sp=e._sp&&e._sp.destroy();const i=e._cubeMaps;if((0,r.A)(i))for(n=i.length,t=0;t<n;++t)i[t].destroy();const o=e._mipTextures;if((0,r.A)(o))for(n=o.length,t=0;t<n;++t)o[t].destroy();e._va=void 0,e._sp=void 0,e._cubeMaps=void 0,e._cubeMapBuffers=void 0,e._mipTextures=void 0}w.prototype.update=function(e){const t=e.context;if(!w.isSupported(t))return;if((0,r.A)(this._texture)&&(0,r.A)(this._va)&&F(this),(0,r.A)(this._texture))return;if(!(0,r.A)(this._texture)&&!this._loading){const t=e.context.textureCache.getTexture(this._url);(0,r.A)(t)&&(F(this),this._texture=t,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0)}const n=this._cubeMapBuffers;if(!(0,r.A)(n)&&!this._loading){const e=this;(0,l.A)(this._url).then((function(t){e._cubeMapBuffers=t,e._loading=!1})).catch((function(t){e.isDestroyed()||e._errorEvent.raiseEvent(t)})),this._loading=!0}if(!(0,r.A)(this._cubeMapBuffers))return;const i=[];let s=n[0].positiveX.pixelDatatype;(0,r.A)(s)?i.push("RGBA_NORMALIZED"):s=t.halfFloatingPointTexture?p.A.HALF_FLOAT:p.A.FLOAT;const a=u.A.RGBA,E=new _.A({defines:i,sources:[v.A]});this._va=function(e){const t=d.A.createVertexBuffer({context:e,typedArray:N,usage:h.A.STATIC_DRAW}),n=d.A.createVertexBuffer({context:e,typedArray:O,usage:h.A.STATIC_DRAW}),i=d.A.createIndexBuffer({context:e,typedArray:M,usage:h.A.STATIC_DRAW,indexDatatype:c.A.UNSIGNED_SHORT}),r=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:o.A.FLOAT},{index:1,vertexBuffer:n,componentsPerAttribute:3,componentDatatype:o.A.FLOAT}];return new y.A({context:e,attributes:r,indexBuffer:i})}(t),this._sp=m.A.fromCache({context:t,vertexShaderSource:T.A,fragmentShaderSource:E,attributeLocations:{position:0,cubeMapCoordinates:1}});const S=Math.min(n.length,6);this._maximumMipmapLevel=S-1;const C=this._cubeMaps=new Array(S),x=this._mipTextures=new Array(S),I=2*n[0].positiveX.width,P={originalSize:function(){return I}};for(let i=0;i<S;++i){const o=n[i].positiveY;n[i].positiveY=n[i].negativeY,n[i].negativeY=o;const r=C[i]=new f.A({context:t,source:n[i],pixelDatatype:s}),c=2*C[i].width,l=x[i]=new g.A({context:t,width:c,height:c,pixelDatatype:s,pixelFormat:a}),u=new A.A({vertexArray:this._va,shaderProgram:this._sp,uniformMap:{cubeMap:R(r)},outputTexture:l,persists:!0,owner:this});e.commandList.push(u),P[`texture${i}`]=R(l)}this._texture=new g.A({context:t,width:1.5*I+2,height:I,pixelDatatype:s,pixelFormat:a}),this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture);const D=new A.A({fragmentShaderSource:b.A,uniformMap:P,outputTexture:this._texture,persists:!1,owner:this});e.commandList.push(D),this._ready=!0},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return F(this),this._texture=this._texture&&this._texture.destroy(),(0,s.A)(this)};const B=w},566334:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(672743),o=n(419061),r=n(491446),s=n(605971),a=n(697422),c=n(744603),l=n(41076),u=n(66458);const d=new i.A("MapQuest, Open Street Map and contributors, CC-BY-SA");function h(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT);const t=c.A.createIfNeeded((0,o.A)(e.url,"https://a.tile.openstreetmap.org/"));t.appendForwardSlash(),t.url+=`{z}/{x}/{y}.${(0,o.A)(e.fileExtension,"png")}`;const n=new l.A({ellipsoid:e.ellipsoid}),r=(0,o.A)(e.minimumLevel,0),h=e.maximumLevel,A=(0,o.A)(e.rectangle,n.rectangle),f=n.positionToTileXY(a.A.southwest(A),r),p=n.positionToTileXY(a.A.northeast(A),r),m=(Math.abs(p.x-f.x)+1)*(Math.abs(p.y-f.y)+1);if(m>4)throw new s.A(`The rectangle and minimumLevel indicate that there are ${m} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);let _=(0,o.A)(e.credit,d);"string"==typeof _&&(_=new i.A(_)),u.A.call(this,{url:t,credit:_,tilingScheme:n,tileWidth:256,tileHeight:256,minimumLevel:r,maximumLevel:h,rectangle:A})}(0,r.A)(Object.create)&&(h.prototype=Object.create(u.A.prototype),h.prototype.constructor=h);const A=h},736125:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(419061),r=n(491446),s=n(677354),a=n(493721);function c(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(c.prototype,{length:{get:function(){return this._length}}}),c.prototype.add=function(e,t){i.A.defined("primitive",e),(0,r.A)(t)&&i.A.typeOf.number("zIndex",t),t=(0,o.A)(t,0);let n=this._collections[t];if(!(0,r.A)(n)){n=new a.A({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;const e=this._collectionsArray;let i=0;for(;i<e.length&&e[i]._zIndex<t;)i++;e.splice(i,0,n)}return n.add(e),this._length++,e._zIndex=t,e},c.prototype.set=function(e,t){return i.A.defined("primitive",e),i.A.typeOf.number("zIndex",t),t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e},c.prototype.remove=function(e,t){if(this.contains(e)){const n=e._zIndex,i=this._collections[n];let o;return o=t?i.remove(e):i.removeAndDestroy(e),o&&this._length--,0===i.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),o}return!1},c.prototype.removeAll=function(){const e=this._collectionsArray;for(let t=0;t<e.length;t++){const n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0},c.prototype.contains=function(e){if(!(0,r.A)(e))return!1;const t=this._collections[e._zIndex];return(0,r.A)(t)&&t.contains(e)},c.prototype.update=function(e){if(!this.show)return;const t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,s.A)(this)};const l=c},467302:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(419061),o=n(491446),r=n(677354),s=n(605971),a=n(230259),c=n(116112);function l(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT);const t=(0,c.A)(e.container);if(!(0,o.A)(t))throw new s.A("container is required");this._container=t;const n=document.createElement("div");n.className="cesium-performanceDisplay";const r=document.createElement("div");r.className="cesium-performanceDisplay-fps",this._fpsText=document.createTextNode(""),r.appendChild(this._fpsText);const l=document.createElement("div");l.className="cesium-performanceDisplay-ms",this._msText=document.createTextNode(""),l.appendChild(this._msText),n.appendChild(l),n.appendChild(r),this._container.appendChild(n),this._lastFpsSampleTime=(0,a.A)(),this._lastMsSampleTime=(0,a.A)(),this._fpsFrameCount=0,this._msFrameCount=0,this._throttled=!1;const u=document.createElement("div");u.className="cesium-performanceDisplay-throttled",this._throttledText=document.createTextNode(""),u.appendChild(this._throttledText),n.appendChild(u)}Object.defineProperties(l.prototype,{throttled:{get:function(){return this._throttled},set:function(e){this._throttled!==e&&(this._throttledText.nodeValue=e?"(throttled)":"",this._throttled=e)}}}),l.prototype.update=function(e){const t=(0,a.A)(),n=(0,i.A)(e,!0);this._fpsFrameCount++;const o=t-this._lastFpsSampleTime;if(o>1e3){let e="N/A";n&&(e=1e3*this._fpsFrameCount/o|0),this._fpsText.nodeValue=`${e} FPS`,this._lastFpsSampleTime=t,this._fpsFrameCount=0}this._msFrameCount++;const r=t-this._lastMsSampleTime;if(r>200){let e="N/A";n&&(e=(r/this._msFrameCount).toFixed(2)),this._msText.nodeValue=`${e} MS`,this._lastMsSampleTime=t,this._msFrameCount=0}},l.prototype.destroy=function(){return(0,r.A)(this)};const u=l},670270:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(626809),o=n(491446),r=n(677354),s=n(804701),a=n(40118);function c(){this._framebuffer=new s.A,this._textureToCopy=void 0,this._copyDepthCommand=void 0}Object.defineProperties(c.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),c.prototype.update=function(e,t){!function(e,t,n){const i=n.width,o=n.height;e._framebuffer.update(t,i,o)}(this,e,t),function(e,t,n){if(!(0,o.A)(e._copyDepthCommand)){const n="uniform highp sampler2D u_texture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    out_FragColor = czm_packDepth(texture(u_texture, v_textureCoordinates).r);\n}\n";e._copyDepthCommand=t.createViewportQuadCommand(n,{renderState:a.A.fromCache(),uniformMap:{u_texture:function(){return e._textureToCopy}},owner:e})}e._textureToCopy=n,e._copyDepthCommand.framebuffer=e.framebuffer}(this,e,t)};const l=new i.A,u=new i.A(1,1/255,1/65025,1/16581375);c.prototype.getDepth=function(e,t,n){if(!(0,o.A)(this.framebuffer))return;const r=e.readPixels({x:t,y:n,width:1,height:1,framebuffer:this.framebuffer}),s=i.A.unpack(r,0,l);return i.A.divideByScalar(s,255,s),i.A.dot(s,u)},c.prototype.executeCopyDepth=function(e,t){this._copyDepthCommand.execute(e,t)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._framebuffer.destroy(),(0,o.A)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=(0,o.A)(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy()),(0,r.A)(this)};const d=c},425415:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(647934),o=n(677354),r=n(804701),s=n(326429);function a(){this._framebuffer=new r.A({color:!1,depthStencil:!0,supportsDepthTexture:!0}),this._passState=void 0}Object.defineProperties(a.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),a.prototype.update=function(e,t,n){const o=n.width,r=n.height;this._framebuffer.isDirty(o,r)&&function(e,t){const n=t.drawingBufferWidth,o=t.drawingBufferHeight;e._framebuffer.update(t,n,o);const r=new s.A(t);r.blendingEnabled=!1,r.scissorTest={enabled:!0,rectangle:new i.A},r.viewport=new i.A,e._passState=r}(this,e);const a=this.framebuffer,c=this._passState;return c.framebuffer=a,c.viewport.width=o,c.viewport.height=r,c.scissorTest.rectangle.x=t.x,c.scissorTest.rectangle.y=r-t.y,c.scissorTest.rectangle.width=1,c.scissorTest.rectangle.height=1,c},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){return this._framebuffer.destroy(),(0,o.A)(this)};const c=a},981152:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(647934),o=n(41476),r=n(419061),s=n(491446),a=n(677354),c=n(804701),l=n(326429);function u(e){const t=new l.A(e);t.blendingEnabled=!1,t.scissorTest={enabled:!0,rectangle:new i.A},t.viewport=new i.A,this._context=e,this._fb=new c.A({depthStencil:!0}),this._passState=t,this._width=0,this._height=0}u.prototype.begin=function(e,t){const n=this._context,o=t.width,r=t.height;return i.A.clone(e,this._passState.scissorTest.rectangle),this._width=o,this._height=r,this._fb.update(n,o,r),this._passState.framebuffer=this._fb.framebuffer,this._passState.viewport.width=o,this._passState.viewport.height=r,this._passState};const d=new o.A;u.prototype.end=function(e){const t=(0,r.A)(e.width,1),n=(0,r.A)(e.height,1),i=this._context,a=i.readPixels({x:e.x,y:e.y,width:t,height:n,framebuffer:this._fb.framebuffer}),c=Math.max(t,n),l=c*c,u=Math.floor(.5*t),h=Math.floor(.5*n);let A=0,f=0,p=0,m=-1;for(let e=0;e<l;++e){if(-u<=A&&A<=u&&-h<=f&&f<=h){const e=4*((h-f)*t+A+u);d.red=o.A.byteToFloat(a[e]),d.green=o.A.byteToFloat(a[e+1]),d.blue=o.A.byteToFloat(a[e+2]),d.alpha=o.A.byteToFloat(a[e+3]);const n=i.getObjectByPickColor(d);if((0,s.A)(n))return n}if(A===f||A<0&&-A===f||A>0&&A===1-f){const e=p;p=-m,m=e}A+=p,f+=m}},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._fb.destroy(),(0,a.A)(this)};const h=u},878471:(e,t,n)=>{"use strict";n.d(t,{A:()=>ye});var i=n(564886),o=n(647934),r=n(434067),s=n(267980),a=n(336946),c=n(369031),l=n(41476),u=n(419061),d=n(491446),h=n(605971),A=n(584164),f=n(811203),p=n(65891),m=n(666775),_=n(65783),g=n(766067),y=n(708857),b=n(635577),v=n(622569),T=n(581010),w=n(953677),E=n(670270),S=n(493721),C=n(62467),x=n(78173),I=n(342767);const P=new w.A({pass:T.A.MOST_DETAILED_PRELOAD}),D=new w.A({pass:T.A.MOST_DETAILED_PICK}),O=new w.A({pass:T.A.PICK});function L(e){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;const t=new o.A(0,0,1,1),n=new b.A(e);n.frustum=new f.A({width:.1,aspectRatio:1,near:.1}),this._pickOffscreenView=new I.A(e,n,t)}L.prototype.update=function(){this._pickPositionCacheDirty=!0},L.prototype.getPickDepth=function(e,t){const n=e.view.pickDepths;let i=n[t];return(0,d.A)(i)||(i=new E.A,n[t]=i),i};const N=new p.A,M=new s.A,R=new s.A,F=new r.A,B=new A.A,U=new _.A,k=new r.A;function V(e,t,n,i,o){const r=e.camera.frustum;return r instanceof f.A||r instanceof p.A?function(e,t,n,i,o){const r=e.camera;let a=r.frustum;const c=a.offCenterFrustum;(0,d.A)(c)&&(a=c);let l=2*(t.x-o.x)/o.width-1;l*=.5*(a.right-a.left);let u=2*(o.height-t.y-o.y)/o.height-1;u*=.5*(a.top-a.bottom);const h=A.A.clone(r.transform,B);r._setTransform(A.A.IDENTITY);const f=s.A.clone(r.position,M);s.A.multiplyByScalar(r.right,l,R),s.A.add(R,f,f),s.A.multiplyByScalar(r.up,u,R),s.A.add(R,f,f),r._setTransform(h),e.mode===C.A.SCENE2D&&s.A.fromElements(f.z,f.x,f.y,f);const p=a.getPixelDimensions(o.width,o.height,1,1,F),m=N;return m.right=.5*p.x,m.left=-m.right,m.top=.5*p.y,m.bottom=-m.top,m.near=a.near,m.far=a.far,m.computeCullingVolume(f,r.directionWC,r.upWC)}(e,t,0,0,o):function(e,t,n,i,o){const r=e.camera,s=r.frustum,a=s.near,c=Math.tan(.5*s.fovy),l=s.aspectRatio*c,u=(2*(t.x-o.x)/o.width-1)*a*l,d=(2*(o.height-t.y-o.y)/o.height-1)*a*c,h=s.getPixelDimensions(o.width,o.height,1,1,k),A=h.x*n*.5,f=h.y*i*.5,p=U;return p.top=d+f,p.bottom=d-f,p.right=u+A,p.left=u-A,p.near=a,p.far=s.far,p.computeCullingVolume(r.positionWC,r.directionWC,r.upWC)}(e,t,n,i,o)}let H=3,z=3,G=new o.A(0,0,H,z);const j=new r.A,W=new l.A(0,0,0,0);L.prototype.pick=function(e,t,n,i){if(!(0,d.A)(t))throw new h.A("windowPosition is undefined.");H=(0,u.A)(n,3),z=(0,u.A)(i,H);const r=e.context,s=r.uniformState,a=e.frameState,c=e.defaultView;e.view=c;const l=c.viewport;l.x=0,l.y=0,l.width=r.drawingBufferWidth,l.height=r.drawingBufferHeight;let A=c.passState;A.viewport=o.A.clone(l,A.viewport);const f=x.A.transformWindowToDrawingBuffer(e,t,j);e.jobScheduler.disableThisFrame(),e.updateFrameState(),a.cullingVolume=V(e,f,H,z,l),a.invertClassification=!1,a.passes.pick=!0,a.tilesetPassState=O,s.update(a),e.updateEnvironment(),G.x=f.x-.5*(H-1),G.y=e.drawingBufferHeight-f.y-.5*(z-1),G.width=H,G.height=z,A=c.pickFramebuffer.begin(G,c.viewport),e.updateAndExecuteCommands(A,W),e.resolveFramebuffers(A);const p=c.pickFramebuffer.end(G);return r.endFrame(),p};const q=new m.A,Y=new _.A,X=new f.A,J=new p.A;L.prototype.pickPositionWorldCoordinates=function(e,t,n){if(!e.useDepthPicking)return;if(!(0,d.A)(t))throw new h.A("windowPosition is undefined.");if(!e.context.depthTexture)throw new h.A("Picking from the depth buffer is not supported. Check pickPositionSupported.");const i=t.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return s.A.clone(this._pickPositionCache[i],n);const r=e.frameState,a=e.context,c=a.uniformState,l=e.defaultView;e.view=l;const u=x.A.transformWindowToDrawingBuffer(e,t,j);e.pickTranslucentDepth?function(e,t){const n=e.context,i=e.frameState,r=e.environmentState,s=e.defaultView;e.view=s;const a=s.viewport;a.x=0,a.y=0,a.width=n.drawingBufferWidth,a.height=n.drawingBufferHeight;let c=s.passState;c.viewport=o.A.clone(a,c.viewport),e.clearPasses(i.passes),i.passes.pick=!0,i.passes.depth=!0,i.cullingVolume=V(e,t,1,1,a),i.tilesetPassState=O,e.updateEnvironment(),r.renderTranslucentDepthForPick=!0,c=s.pickDepthFramebuffer.update(n,t,a),e.updateAndExecuteCommands(c,W),e.resolveFramebuffers(c),n.endFrame()}(e,u):(e.updateFrameState(),c.update(r),e.updateEnvironment()),u.y=e.drawingBufferHeight-u.y;const A=e.camera;let f;f=(0,d.A)(A.frustum.fov)?A.frustum.clone(q):(0,d.A)(A.frustum.infiniteProjectionMatrix)?A.frustum.clone(Y):(0,d.A)(A.frustum.width)?A.frustum.clone(X):A.frustum.clone(J);const p=l.frustumCommandsList,m=p.length;for(let t=0;t<m;++t){const o=this.getPickDepth(e,t).getDepth(a,u.x,u.y);if((0,d.A)(o)&&o>0&&o<1){const a=p[t];let l;return e.mode===C.A.SCENE2D?(l=A.position.z,A.position.z=l-a.near+1,f.far=Math.max(1,a.far-a.near),f.near=1,c.update(r),c.updateFrustum(f)):(f.near=a.near*(0!==t?e.opaqueFrustumNearOffset:1),f.far=a.far,c.updateFrustum(f)),n=x.A.drawingBufferToWgs84Coordinates(e,u,o,n),e.mode===C.A.SCENE2D&&(A.position.z=l,c.update(r)),this._pickPositionCache[i]=s.A.clone(n),n}}this._pickPositionCache[i]=void 0};const Q=new a.A;function $(e,t){let n,i;const o=[],r=[],s=[],a=[];(0,d.A)(e)||(e=Number.MAX_VALUE);let c=t();for(;(0,d.A)(c);){const n=c.object,l=c.position,u=c.exclude;if((0,d.A)(l)&&!(0,d.A)(n)){o.push(c);break}if(!(0,d.A)(n)||!(0,d.A)(n.primitive))break;if(!u&&(o.push(c),0>=--e))break;const h=n.primitive;let A=!1;"function"==typeof h.getGeometryInstanceAttributes&&(0,d.A)(n.id)&&(i=h.getGeometryInstanceAttributes(n.id),(0,d.A)(i)&&(0,d.A)(i.show)&&(A=!0,i.show=y.A.toValue(!1,i.show),s.push(i))),n instanceof v.A&&(A=!0,n.show=!1,a.push(n)),A||(h.show=!1,r.push(h)),c=t()}for(n=0;n<r.length;++n)r[n].show=!0;for(n=0;n<s.length;++n)i=s[n],i.show=y.A.toValue(!0,i.show);for(n=0;n<a.length;++n)a[n].show=!0;return o}L.prototype.pickPosition=function(e,t,n){if(n=this.pickPositionWorldCoordinates(e,t,n),(0,d.A)(n)&&e.mode!==C.A.SCENE3D){s.A.fromElements(n.y,n.z,n.x,n);const t=e.mapProjection,i=t.ellipsoid,o=t.unproject(n,Q);i.cartographicToCartesian(o,n)}return n},L.prototype.drillPick=function(e,t,n,i,o){const r=this;return $(n,(function(){const n=r.pick(e,t,i,o);if((0,d.A)(n))return{object:n,position:void 0,exclude:!1}})).map((function(e){return e.object}))};const K=new s.A,Z=new s.A;function ee(e,t,n){this.ray=e,this.width=t,this.tilesets=n,this.ready=!1;const i=this;this.promise=new Promise((e=>{i._completePick=()=>{e()}}))}function te(e,t,n,i){const o=t.direction,r=s.A.mostOrthogonalAxis(o,K),a=s.A.cross(o,r,K),c=s.A.cross(o,a,Z);return i.position=t.origin,i.direction=o,i.up=c,i.right=a,i.frustum.width=(0,u.A)(n,.1),i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function ne(e,t,n){const i=t.frameState,o=n.ray,r=n.width,s=n.tilesets,a=e._pickOffscreenView.camera,c=te(0,o,r,a),l=P;l.camera=a,l.cullingVolume=c;let u=!0;const d=s.length;for(let e=0;e<d;++e){const n=s[e];n.show&&t.primitives.contains(n)&&(n.updateForPass(i,l),u=u&&l.ready)}return u&&n._completePick(),u}function ie(e,t,n){const i=e.length;for(let o=0;o<i;++o){const i=e.get(o);i.show&&((0,d.A)(i.isCesium3DTileset)?(0,d.A)(t)&&-1!==t.indexOf(i)||n.push(i):i instanceof S.A&&ie(i,t,n))}}function oe(e,t,n,i,o,r){const s=[];if(ie(t.primitives,i,s),0===s.length)return Promise.resolve(r());const a=new ee(n,o,s);return e._mostDetailedRayPicks.push(a),a.promise.then((function(){return r()}))}function re(e,t){return!(!(0,d.A)(e)||!(0,d.A)(t)||0===t.length)&&(t.indexOf(e)>-1||t.indexOf(e.primitive)>-1||t.indexOf(e.id)>-1)}function se(e,t,n,i,r,s,a,c){return $(i,(function(){return function(e,t,n,i,r,s,a){const c=t.context,l=c.uniformState,u=t.frameState,h=e._pickOffscreenView;t.view=h,te(0,n,r,h.camera),G=o.A.clone(h.viewport,G);const A=h.pickFramebuffer.begin(G,h.viewport);let f;t.jobScheduler.disableThisFrame(),t.updateFrameState(),u.invertClassification=!1,u.passes.pick=!0,u.passes.offscreen=!0,u.tilesetPassState=a?D:O,l.update(u),t.updateEnvironment(),t.updateAndExecuteCommands(A,W),t.resolveFramebuffers(A);const p=h.pickFramebuffer.end(G);if(t.context.depthTexture){const i=h.frustumCommandsList.length;for(let o=0;o<i;++o){const i=e.getPickDepth(t,o).getDepth(c,0,0);if((0,d.A)(i)&&i>0&&i<1){const e=h.frustumCommandsList[o],r=e.near*(0!==o?t.opaqueFrustumNearOffset:1),s=r+i*(e.far-r);f=g.A.getPoint(n,s);break}}}if(t.view=t.defaultView,c.endFrame(),(0,d.A)(p)||(0,d.A)(f))return{object:p,position:f,exclude:!(0,d.A)(f)&&s||re(p,i)}}(e,t,n,r,s,a,c)}))}function ae(e,t,n,i,o,r,s){const a=se(e,t,n,1,i,o,r,s);if(a.length>0)return a[0]}function ce(e,t,n,i,o,r,s,a){return se(e,t,n,i,o,r,s,a)}function le(e,t){return new Promise(((n,i)=>{t.then((function(t){const i=e.postRender.addEventListener((function(){i(),n(t)}));e.requestRender()})).catch((function(e){i(e)}))}))}L.prototype.updateMostDetailedRayPicks=function(e){const t=this._mostDetailedRayPicks;for(let n=0;n<t.length;++n)ne(this,e,t[n])&&t.splice(n--,1)},L.prototype.pickFromRay=function(e,t,n,i){if(c.A.defined("ray",t),e.mode!==C.A.SCENE3D)throw new h.A("Ray intersections are only supported in 3D mode.");return ae(this,e,t,n,i,!1,!1)},L.prototype.drillPickFromRay=function(e,t,n,i,o){if(c.A.defined("ray",t),e.mode!==C.A.SCENE3D)throw new h.A("Ray intersections are only supported in 3D mode.");return ce(this,e,t,n,i,o,!1,!1)},L.prototype.pickFromRayMostDetailed=function(e,t,n,i){if(c.A.defined("ray",t),e.mode!==C.A.SCENE3D)throw new h.A("Ray intersections are only supported in 3D mode.");const o=this;return t=g.A.clone(t),n=(0,d.A)(n)?n.slice():n,le(e,oe(o,e,t,n,i,(function(){return ae(o,e,t,n,i,!1,!0)})))},L.prototype.drillPickFromRayMostDetailed=function(e,t,n,i,o){if(c.A.defined("ray",t),e.mode!==C.A.SCENE3D)throw new h.A("Ray intersections are only supported in 3D mode.");const r=this;return t=g.A.clone(t),i=(0,d.A)(i)?i.slice():i,le(e,oe(r,e,t,i,o,(function(){return ce(r,e,t,n,i,o,!1,!0)})))};const ue=new s.A,de=new s.A,he=new g.A,Ae=new a.A;function fe(e,t){const n=e.globe,o=(0,d.A)(n)?n.ellipsoid:e.mapProjection.ellipsoid,r=i.A._defaultMaxTerrainHeight,c=o.geodeticSurfaceNormalCartographic(t,de),l=a.A.toCartesian(t,o,ue),u=he;u.origin=l,u.direction=c;const h=new g.A;return g.A.getPoint(u,r,h.origin),s.A.negate(c,h.direction),h}function pe(e,t){const n=e.globe,i=(0,d.A)(n)?n.ellipsoid:e.mapProjection.ellipsoid;return fe(e,a.A.fromCartesian(t,i,Ae))}function me(e,t){const n=e.globe,i=(0,d.A)(n)?n.ellipsoid:e.mapProjection.ellipsoid;return a.A.fromCartesian(t,i,Ae).height}function _e(e,t,n,i,o){const r=fe(t,n);return oe(e,t,r,i,o,(function(){const n=ae(e,t,r,i,o,!0,!0);if((0,d.A)(n))return me(t,n.position)}))}function ge(e,t,n,i,o,r){const a=pe(t,n);return oe(e,t,a,i,o,(function(){const n=ae(e,t,a,i,o,!0,!0);if((0,d.A)(n))return s.A.clone(n.position,r)}))}L.prototype.sampleHeight=function(e,t,n,i){if(c.A.defined("position",t),e.mode!==C.A.SCENE3D)throw new h.A("sampleHeight is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new h.A("sampleHeight requires depth texture support. Check sampleHeightSupported.");const o=ae(this,e,fe(e,t),n,i,!0,!1);if((0,d.A)(o))return me(e,o.position)},L.prototype.clampToHeight=function(e,t,n,i,o){if(c.A.defined("cartesian",t),e.mode!==C.A.SCENE3D)throw new h.A("clampToHeight is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new h.A("clampToHeight requires depth texture support. Check clampToHeightSupported.");const r=ae(this,e,pe(e,t),n,i,!0,!1);if((0,d.A)(r))return s.A.clone(r.position,o)},L.prototype.sampleHeightMostDetailed=function(e,t,n,i){if(c.A.defined("positions",t),e.mode!==C.A.SCENE3D)throw new h.A("sampleHeightMostDetailed is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new h.A("sampleHeightMostDetailed requires depth texture support. Check sampleHeightSupported.");n=(0,d.A)(n)?n.slice():n;const o=t.length,r=new Array(o);for(let s=0;s<o;++s)r[s]=_e(this,e,t[s],n,i);return le(e,Promise.all(r).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i].height=e[i];return t})))},L.prototype.clampToHeightMostDetailed=function(e,t,n,i){if(c.A.defined("cartesians",t),e.mode!==C.A.SCENE3D)throw new h.A("clampToHeightMostDetailed is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new h.A("clampToHeightMostDetailed requires depth texture support. Check clampToHeightSupported.");n=(0,d.A)(n)?n.slice():n;const o=t.length,r=new Array(o);for(let s=0;s<o;++s)r[s]=ge(this,e,t[s],n,i,t[s]);return le(e,Promise.all(r).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i]=e[i];return t})))},L.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()};const ye=L},679854:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(369031),r=n(41476),s=n(430346),a=n(571804),c=n(419061),l=n(491446),u=n(604752),d=n(123245),h=n(730839),A=n(468741),f=n(595826);const p={},m=Uint32Array.BYTES_PER_ELEMENT;p.parse=function(e,t){t=(0,c.A)(t,0),o.A.defined("arrayBuffer",e);const n=new Uint8Array(e),p=new DataView(e);t+=m;const _=p.getUint32(t,!0);if(1!==_)throw new d.A(`Only Point Cloud tile version 1 is supported.  Version ${_} is not.`);t+=m,t+=m;const g=p.getUint32(t,!0);if(0===g)throw new d.A("Feature table must have a byte length greater than zero");t+=m;const y=p.getUint32(t,!0);t+=m;const b=p.getUint32(t,!0);t+=m;const v=p.getUint32(t,!0);t+=m;const T=(0,u.A)(n,t,g);t+=g;const w=new Uint8Array(e,t,y);let E,S;t+=y,b>0&&(E=(0,u.A)(n,t,b),t+=b,v>0&&(S=new Uint8Array(e,t,v),t+=v));const C=new A.A(T,w),x=C.getGlobalProperty("POINTS_LENGTH");if(C.featuresLength=x,!(0,l.A)(x))throw new d.A("Feature table global property: POINTS_LENGTH must be defined");let I=C.getGlobalProperty("RTC_CENTER",a.A.FLOAT,3);(0,l.A)(I)&&(I=i.A.unpack(I));const P=function(e,t){const n=e.json;let i,o,r;const a=(0,l.A)(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,c=(0,l.A)(t)&&(0,l.A)(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;let u,h,A,f,p,m;if((0,l.A)(c)&&(r=c.properties),(0,l.A)(a)){o=a.properties;const t=a.byteOffset,n=a.byteLength;if(!(0,l.A)(o)||!(0,l.A)(t)||!(0,l.A)(n))throw new d.A("Draco properties, byteOffset, and byteLength must be defined");i=e.buffer.slice(t,t+n),u=(0,l.A)(o.POSITION),h=(0,l.A)(o.RGB)||(0,l.A)(o.RGBA),A=(0,l.A)(o.NORMAL),f=(0,l.A)(o.BATCH_ID),p=(0,l.A)(o.RGBA)}return(0,l.A)(i)&&(m={buffer:i,featureTableProperties:o,batchTableProperties:r,properties:(0,s.A)(o,r),dequantizeInShader:!0}),{draco:m,hasPositions:u,hasColors:h,isTranslucent:p,hasNormals:A,hasBatchIds:f}}(C,E);if(P.rtcCenter=I,P.pointsLength=x,!P.hasPositions){const e=function(e){const t=e.json;let n;if((0,l.A)(t.POSITION))return n=e.getPropertyArray("POSITION",a.A.FLOAT,3),{name:f.A.POSITION,semantic:f.A.POSITION,typedArray:n,isQuantized:!1,componentDatatype:a.A.FLOAT,type:h.A.VEC3};if((0,l.A)(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",a.A.UNSIGNED_SHORT,3);const t=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",a.A.FLOAT,3);if(!(0,l.A)(t))throw new d.A("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=65535,r=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",a.A.FLOAT,3);if(!(0,l.A)(r))throw new d.A("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:f.A.POSITION,semantic:f.A.POSITION,typedArray:n,isQuantized:!0,componentDatatype:a.A.FLOAT,type:h.A.VEC3,quantizedRange:o,quantizedVolumeOffset:i.A.unpack(r),quantizedVolumeScale:i.A.unpack(t),quantizedComponentDatatype:a.A.UNSIGNED_SHORT,quantizedType:h.A.VEC3}}}(C);P.positions=e,P.hasPositions=P.hasPositions||(0,l.A)(e)}if(!P.hasPositions)throw new d.A("Either POSITION or POSITION_QUANTIZED must be defined.");if(!P.hasNormals){const e=function(e){const t=e.json;let n;if((0,l.A)(t.NORMAL))return n=e.getPropertyArray("NORMAL",a.A.FLOAT,3),{name:f.A.NORMAL,semantic:f.A.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:a.A.FLOAT,type:h.A.VEC3};if((0,l.A)(t.NORMAL_OCT16P)){n=e.getPropertyArray("NORMAL_OCT16P",a.A.UNSIGNED_BYTE,2);const t=8;return{name:f.A.NORMAL,semantic:f.A.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<t)-1,quantizedType:h.A.VEC2,quantizedComponentDatatype:a.A.UNSIGNED_BYTE,componentDatatype:a.A.FLOAT,type:h.A.VEC3}}}(C);P.normals=e,P.hasNormals=P.hasNormals||(0,l.A)(e)}if(!P.hasColors){const e=function(e){const t=e.json;let n;if((0,l.A)(t.RGBA))return n=e.getPropertyArray("RGBA",a.A.UNSIGNED_BYTE,4),{name:f.A.COLOR,semantic:f.A.COLOR,setIndex:0,typedArray:n,componentDatatype:a.A.UNSIGNED_BYTE,type:h.A.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if((0,l.A)(t.RGB))return n=e.getPropertyArray("RGB",a.A.UNSIGNED_BYTE,3),{name:"COLOR",semantic:f.A.COLOR,setIndex:0,typedArray:n,componentDatatype:a.A.UNSIGNED_BYTE,type:h.A.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if((0,l.A)(t.RGB565))return n=e.getPropertyArray("RGB565",a.A.UNSIGNED_SHORT,1),{name:"COLOR",semantic:f.A.COLOR,setIndex:0,typedArray:n,componentDatatype:a.A.FLOAT,type:h.A.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if((0,l.A)(t.CONSTANT_RGBA)){const t=e.getGlobalProperty("CONSTANT_RGBA",a.A.UNSIGNED_BYTE,4),n=t[3],i=r.A.fromBytes(t[0],t[1],t[2],n),o=n<255;return{name:f.A.COLOR,semantic:f.A.COLOR,setIndex:0,constantColor:i,componentDatatype:a.A.FLOAT,type:h.A.VEC4,isQuantized:!1,isTranslucent:o}}}(C);P.colors=e,P.hasColors=P.hasColors||(0,l.A)(e),P.hasConstantColor=(0,l.A)(P.constantColor),P.isTranslucent=(0,l.A)(e)&&e.isTranslucent}if(!P.hasBatchIds){const e=function(e){const t=e.json;if((0,l.A)(t.BATCH_ID)){const t=e.getPropertyArray("BATCH_ID",a.A.UNSIGNED_SHORT,1);return{name:f.A.FEATURE_ID,semantic:f.A.FEATURE_ID,setIndex:0,typedArray:t,componentDatatype:a.A.fromTypedArray(t),type:h.A.SCALAR}}}(C);P.batchIds=e,P.hasBatchIds=P.hasBatchIds||(0,l.A)(e)}if(P.hasBatchIds){const e=C.getGlobalProperty("BATCH_LENGTH");if(!(0,l.A)(e))throw new d.A("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");P.batchLength=e}return(0,l.A)(S)&&(S=new Uint8Array(S),P.batchTableJson=E,P.batchTableBinary=S),P};const _=p},259069:(e,t,n)=>{"use strict";n.d(t,{A:()=>re});var i=n(660662),o=n(267980),r=n(626809),s=n(369031),a=n(376758),c=n(41476),l=n(430346),u=n(571804),d=n(419061),h=n(491446),A=n(677354),f=n(367817),p=n(584164),m=n(983884),_=n(811203),g=n(402330),y=n(123245),b=n(543622),v=n(641613),T=n(442790),w=n(377496),E=n(760866),S=n(40118),C=n(302836),x=n(508380),I=n(393682),P=n(200646),D=n(184483),O=n(445848),L=n(245329),N=n(796170),M=n(679854),R=n(62467),F=n(988609),B=n(913419),U=n(992881),k=n(938987);function V(e){s.A.typeOf.object("options",e),s.A.typeOf.object("options.arrayBuffer",e.arrayBuffer),this._parsedContent=void 0,this._drawCommand=void 0,this._isTranslucent=!1,this._styleTranslucent=!1,this._constantColor=c.A.clone(c.A.DARKGRAY),this._highlightColor=c.A.clone(c.A.WHITE),this._pointSize=1,this._rtcCenter=void 0,this._quantizedVolumeScale=void 0,this._quantizedVolumeOffset=void 0,this._styleableShaderAttributes=void 0,this._isQuantized=!1,this._isOctEncoded16P=!1,this._isRGB565=!1,this._hasColors=!1,this._hasNormals=!1,this._hasBatchIds=!1,this._decodingState=2,this._dequantizeInShader=!0,this._isQuantizedDraco=!1,this._isOctEncodedDraco=!1,this._quantizedRange=0,this._octEncodedRange=0,this.backFaceCulling=!1,this._backFaceCulling=!1,this.normalShading=!0,this._normalShading=!0,this._opaqueRenderState=void 0,this._translucentRenderState=void 0,this._mode=void 0,this._ready=!1,this._pointsLength=0,this._geometryByteLength=0,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._batchTableLoaded=e.batchTableLoaded,this._pickIdLoaded=e.pickIdLoaded,this._opaquePass=(0,d.A)(e.opaquePass,E.A.OPAQUE),this._cull=(0,d.A)(e.cull,!0),this.style=void 0,this._style=void 0,this.styleDirty=!1,this.modelMatrix=p.A.clone(p.A.IDENTITY),this._modelMatrix=p.A.clone(p.A.IDENTITY),this.time=0,this.shadows=F.A.ENABLED,this._boundingSphere=void 0,this.clippingPlanes=void 0,this.isClipped=!1,this.clippingPlanesDirty=!1,this.clippingPlanesOriginMatrix=void 0,this.attenuation=!1,this._attenuation=!1,this.geometricError=0,this.geometricErrorScale=1,this.maximumAttenuation=this._pointSize,this.splitDirection=(0,d.A)(e.splitDirection,B.A.NONE),this._splittingEnabled=!1,this._error=void 0,function(e,t){const n=M.A.parse(t.arrayBuffer,t.byteOffset);if(e._parsedContent=n,e._rtcCenter=n.rtcCenter,e._hasNormals=n.hasNormals,e._hasColors=n.hasColors,e._hasBatchIds=n.hasBatchIds,e._isTranslucent=n.isTranslucent,!n.hasBatchIds&&(0,h.A)(n.batchTableBinary)&&(n.styleableProperties=D.A.getBinaryProperties(n.pointsLength,n.batchTableJson,n.batchTableBinary)),(0,h.A)(n.draco)){const t=n.draco;e._decodingState=0,t.dequantizeInShader=e._dequantizeInShader}const i=n.positions;(0,h.A)(i)&&(e._isQuantized=i.isQuantized,e._quantizedVolumeScale=i.quantizedVolumeScale,e._quantizedVolumeOffset=i.quantizedVolumeOffset,e._quantizedRange=i.quantizedRange);const o=n.normals;(0,h.A)(o)&&(e._isOctEncoded16P=o.octEncoded);const r=n.colors;(0,h.A)(r)&&((0,h.A)(r.constantColor)&&(e._constantColor=c.A.clone(r.constantColor,e._constantColor),e._hasColors=!1),e._isRGB565=r.isRGB565);const s=n.batchIds;(0,h.A)(n.batchIds)&&(s.name="BATCH_ID",s.semantic="BATCH_ID",s.setIndex=void 0),n.hasBatchIds&&e._batchTableLoaded(n.batchLength,n.batchTableJson,n.batchTableBinary),e._pointsLength=n.pointsLength}(this,e)}Object.defineProperties(V.prototype,{pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}},color:{get:function(){return c.A.clone(this._highlightColor)},set:function(e){this._highlightColor=c.A.clone(e,this._highlightColor)}},boundingSphere:{get:function(){if((0,h.A)(this._drawCommand))return this._drawCommand.boundingVolume},set:function(e){this._boundingSphere=i.A.clone(e,this._boundingSphere)}}});const H=new o.A,z=new o.A,G=new o.A;let j,W;function q(e){if(!(0,h.A)(W)){j=new I(0),W=new Array(e);for(let t=0;t<e;++t)W[t]=j.random()}return W}function Y(e,t){const n=u.A.fromTypedArray(e);return n===u.A.INT||n===u.A.UNSIGNED_INT||n===u.A.DOUBLE?((0,m.A)("Cast pnts property to floats",`Point cloud property "${t}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),new Float32Array(e)):e}const X=new r.A,J=new r.A,Q=new c.A,$=new p.A,K=new p.A;function Z(e,t){const n=/czm_3dtiles_property_(\d+)/g;let i=n.exec(e);for(;null!==i;){const o=parseInt(i[1]);-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function ee(e,t){e=e.slice(e.indexOf("\n"));const n=/czm_3dtiles_builtin_property_(\w+)/g;let i=n.exec(e);for(;null!==i;){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function te(e,t){const n=e.numberOfAttributes;for(let i=0;i<n;++i){const n=e.getAttribute(i);if(n.index===t)return n}}const ne={POSITION:"czm_3dtiles_builtin_property_POSITION",POSITION_ABSOLUTE:"czm_3dtiles_builtin_property_POSITION_ABSOLUTE",COLOR:"czm_3dtiles_builtin_property_COLOR",NORMAL:"czm_3dtiles_builtin_property_NORMAL"};const ie=new r.A,oe=new o.A;V.prototype.update=function(e){const t=e.context;if((0,h.A)(this._error)){const e=this._error;throw this._error=void 0,e}const n=function(e,t){if(2===e._decodingState)return!1;if(0===e._decodingState){const n=e._parsedContent,i=n.draco,r=O.A.decodePointCloud(i,t);(0,h.A)(r)&&(e._decodingState=1,r.then((function(t){e._decodingState=2;const r=(0,h.A)(t.POSITION)?t.POSITION.array:void 0,s=(0,h.A)(t.RGB)?t.RGB.array:void 0,a=(0,h.A)(t.RGBA)?t.RGBA.array:void 0,c=(0,h.A)(t.NORMAL)?t.NORMAL.array:void 0,l=(0,h.A)(t.BATCH_ID)?t.BATCH_ID.array:void 0,u=(0,h.A)(r)&&(0,h.A)(t.POSITION.data.quantization),A=(0,h.A)(c)&&(0,h.A)(t.NORMAL.data.quantization);if(u){const n=t.POSITION.data.quantization,i=n.range;e._quantizedVolumeScale=o.A.fromElements(i,i,i),e._quantizedVolumeOffset=o.A.unpack(n.minValues),e._quantizedRange=(1<<n.quantizationBits)-1,e._isQuantizedDraco=!0}A&&(e._octEncodedRange=(1<<t.NORMAL.data.quantization.quantizationBits)-1,e._isOctEncodedDraco=!0);let f=n.styleableProperties;const p=i.batchTableProperties;for(const e in p)if(p.hasOwnProperty(e)){const n=t[e];(0,h.A)(f)||(f={}),f[e]={typedArray:n.array,componentCount:n.data.componentsPerAttribute}}(0,h.A)(r)&&(n.positions={typedArray:r});const m=(0,d.A)(a,s);(0,h.A)(m)&&(n.colors={typedArray:m}),(0,h.A)(c)&&(n.normals={typedArray:c}),(0,h.A)(l)&&(n.batchIds={typedArray:l}),n.styleableProperties=f})).catch((function(t){e._decodingState=3,e._error=t})))}return!0}(this,t);if(n)return;let s=!1,A=!p.A.equals(this._modelMatrix,this.modelMatrix);if(this._mode!==e.mode&&(this._mode=e.mode,A=!0),(0,h.A)(this._drawCommand)||(function(e,t){const n=t.context,r=e._parsedContent,s=e._pointsLength,a=r.positions,c=r.colors,l=r.normals,d=r.batchIds,A=r.styleableProperties,m=(0,h.A)(A),_=e._isQuantized,y=e._isQuantizedDraco,b=e._isOctEncoded16P,C=e._isOctEncodedDraco,I=e._quantizedRange,D=e._octEncodedRange,O=e._isRGB565,L=e._isTranslucent,N=e._hasColors,M=e._hasNormals,R=e._hasBatchIds;let F,B;const U=[],V={};if(e._styleableShaderAttributes=V,m){let t=4;for(const i in A)if(A.hasOwnProperty(i)){const o=A[i],r=Y(o.typedArray,i);F=o.componentCount,B=u.A.fromTypedArray(r);const s=v.A.createVertexBuffer({context:n,typedArray:r,usage:T.A.STATIC_DRAW});e._geometryByteLength+=s.sizeInBytes;const a={index:t,vertexBuffer:s,componentsPerAttribute:F,componentDatatype:B,normalize:!1,offsetInBytes:0,strideInBytes:0};U.push(a),V[i]={location:t,componentCount:F},++t}}const j=v.A.createVertexBuffer({context:n,typedArray:a.typedArray,usage:T.A.STATIC_DRAW});let W,X,J;e._geometryByteLength+=j.sizeInBytes,N&&(W=v.A.createVertexBuffer({context:n,typedArray:c.typedArray,usage:T.A.STATIC_DRAW}),e._geometryByteLength+=W.sizeInBytes),M&&(X=v.A.createVertexBuffer({context:n,typedArray:l.typedArray,usage:T.A.STATIC_DRAW}),e._geometryByteLength+=X.sizeInBytes),R&&(d.typedArray=Y(d.typedArray,"batchIds"),J=v.A.createVertexBuffer({context:n,typedArray:d.typedArray,usage:T.A.STATIC_DRAW}),e._geometryByteLength+=J.sizeInBytes);let Q=[];if(B=_?u.A.UNSIGNED_SHORT:y?I<=255?u.A.UNSIGNED_BYTE:u.A.UNSIGNED_SHORT:u.A.FLOAT,Q.push({index:0,vertexBuffer:j,componentsPerAttribute:3,componentDatatype:B,normalize:!1,offsetInBytes:0,strideInBytes:0}),e._cull&&(e._boundingSphere=_||y?i.A.fromCornerPoints(o.A.ZERO,e._quantizedVolumeScale):function(e){const t=e.length/3,n=Math.min(t,20),r=q(20),s=Number.MAX_VALUE,a=-Number.MAX_VALUE,c=o.A.fromElements(s,s,s,H),l=o.A.fromElements(a,a,a,z);for(let i=0;i<n;++i){const n=Math.floor(r[i]*t),s=o.A.unpack(e,3*n,G);o.A.minimumByComponent(c,s,c),o.A.maximumByComponent(l,s,l)}const u=i.A.fromCornerPoints(c,l);return u.radius+=f.A.EPSILON2,u}(a.typedArray)),N)if(O)Q.push({index:1,vertexBuffer:W,componentsPerAttribute:1,componentDatatype:u.A.UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0});else{const e=L?4:3;Q.push({index:1,vertexBuffer:W,componentsPerAttribute:e,componentDatatype:u.A.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0})}M&&(b?(F=2,B=u.A.UNSIGNED_BYTE):C?(F=2,B=D<=255?u.A.UNSIGNED_BYTE:u.A.UNSIGNED_SHORT):(F=3,B=u.A.FLOAT),Q.push({index:2,vertexBuffer:X,componentsPerAttribute:F,componentDatatype:B,normalize:!1,offsetInBytes:0,strideInBytes:0})),R&&Q.push({index:3,vertexBuffer:J,componentsPerAttribute:1,componentDatatype:u.A.fromTypedArray(d.typedArray),normalize:!1,offsetInBytes:0,strideInBytes:0}),m&&(Q=Q.concat(U));const $=new x.A({context:n,attributes:Q}),K={depthTest:{enabled:!0}},Z={depthTest:{enabled:!0},depthMask:!1,blending:P.A.ALPHA_BLEND};e._opaquePass===E.A.CESIUM_3D_TILE&&(K.stencilTest=k.A.setCesium3DTileBit(),K.stencilMask=k.A.CESIUM_3D_TILE_MASK,Z.stencilTest=k.A.setCesium3DTileBit(),Z.stencilMask=k.A.CESIUM_3D_TILE_MASK),e._opaqueRenderState=S.A.fromCache(K),e._translucentRenderState=S.A.fromCache(Z),e._drawCommand=new w.A({boundingVolume:new i.A,cull:e._cull,modelMatrix:new p.A,primitiveType:g.A.POINTS,vertexArray:$,count:s,shaderProgram:void 0,uniformMap:void 0,renderState:L?e._translucentRenderState:e._opaqueRenderState,pass:L?E.A.TRANSLUCENT:e._opaquePass,owner:e,castShadows:!1,receiveShadows:!1,pickId:e._pickIdLoaded()})}(this,e),A=!0,s=!0,this._ready=!0,this._parsedContent=void 0),A){p.A.clone(this.modelMatrix,this._modelMatrix);const t=this._drawCommand.modelMatrix;if(p.A.clone(this._modelMatrix,t),(0,h.A)(this._rtcCenter)&&p.A.multiplyByTranslation(t,this._rtcCenter,t),(0,h.A)(this._quantizedVolumeOffset)&&p.A.multiplyByTranslation(t,this._quantizedVolumeOffset,t),e.mode!==R.A.SCENE3D){const n=e.mapProjection,i=p.A.getColumn(t,3,ie);r.A.equals(i,r.A.UNIT_W)||b.A.basisTo2D(n,t,t)}const n=this._drawCommand.boundingVolume;if(i.A.clone(this._boundingSphere,n),this._cull){const e=n.center;p.A.multiplyByPoint(t,e,e);const i=p.A.getScale(t,oe);n.radius*=o.A.maximumComponent(i)}}this.clippingPlanesDirty&&(this.clippingPlanesDirty=!1,s=!0),this._attenuation!==this.attenuation&&(this._attenuation=this.attenuation,s=!0),this.backFaceCulling!==this._backFaceCulling&&(this._backFaceCulling=this.backFaceCulling,s=!0),this.normalShading!==this._normalShading&&(this._normalShading=this.normalShading,s=!0),(this._style!==this.style||this.styleDirty)&&(this._style=this.style,this.styleDirty=!1,s=!0);const m=this.splitDirection!==B.A.NONE;this._splittingEnabled!==m&&(this._splittingEnabled=m,s=!0),s&&function(e,t,n){let i,r,s;const u=t.context,A=(0,h.A)(n),f=e._isQuantized,m=e._isQuantizedDraco,g=e._isOctEncoded16P,b=e._isOctEncodedDraco,v=e._isRGB565,T=e._isTranslucent,w=e._hasColors,E=e._hasNormals,S=e._hasBatchIds,x=e._backFaceCulling,I=e._normalShading,P=e._drawCommand.vertexArray,D=e.clippingPlanes,O=e._attenuation;let M,F,k,V=T;const H=(0,a.A)(ne),z={},G=e._styleableShaderAttributes;for(r in G)G.hasOwnProperty(r)&&(s=G[r],H[r]=`czm_3dtiles_property_${s.location}`,z[s.location]=s);if(A){const e={translucent:!1},t="(vec3 czm_3dtiles_builtin_property_POSITION, vec3 czm_3dtiles_builtin_property_POSITION_ABSOLUTE, vec4 czm_3dtiles_builtin_property_COLOR, vec3 czm_3dtiles_builtin_property_NORMAL)";M=n.getColorShaderFunction(`getColorFromStyle${t}`,H,e),F=n.getShowShaderFunction(`getShowFromStyle${t}`,H,e),k=n.getPointSizeShaderFunction(`getPointSizeFromStyle${t}`,H,e),(0,h.A)(M)&&e.translucent&&(V=!0)}e._styleTranslucent=V;const j=(0,h.A)(M),W=(0,h.A)(F),q=(0,h.A)(k),Y=e.isClipped,ie=[],oe=[];j&&(Z(M,ie),ee(M,oe)),W&&(Z(F,ie),ee(F,oe)),q&&(Z(k,ie),ee(k,oe));const re=oe.indexOf("COLOR")>=0,se=oe.indexOf("NORMAL")>=0;if(se&&!E)throw new y.A("Style references the NORMAL semantic but the point cloud does not have normals");for(r in G)if(G.hasOwnProperty(r)){s=G[r];const e=ie.indexOf(s.location)>=0;te(P,s.location).enabled=e}const ae=w&&(!j||re);w&&(te(P,1).enabled=ae);const ce=E&&(I||x||se);E&&(te(P,2).enabled=ce);const le={a_position:0};ae&&(le.a_color=1),ce&&(le.a_normal=2),S&&(le.a_batchId=3);let ue="";const de=ie.length;for(i=0;i<de;++i){const e=ie[i];s=z[e];const t=s.componentCount,n=`czm_3dtiles_property_${e}`;let o;o=1===t?"float":`vec${t}`,ue+=`in ${o} ${n}; \n`,le[n]=s.location}!function(e,t){const n=t.context,i=e._isQuantized,r=e._isQuantizedDraco,s=e._isOctEncodedDraco;let a={u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier:function(){const i=X;if(i.x=e._attenuation?e.maximumAttenuation:e._pointSize,i.x*=t.pixelRatio,i.y=e.time,e._attenuation){const o=t.camera.frustum;let r;r=t.mode===R.A.SCENE2D||o instanceof _.A?Number.POSITIVE_INFINITY:n.drawingBufferHeight/t.camera.frustum.sseDenominator,i.z=e.geometricError*e.geometricErrorScale,i.w=r}return i},u_highlightColor:function(){return e._highlightColor},u_constantColor:function(){return e._constantColor},u_clippingPlanes:function(){const t=e.clippingPlanes;return e.isClipped?t.texture:n.defaultTexture},u_clippingPlanesEdgeStyle:function(){const t=e.clippingPlanes;if(!(0,h.A)(t))return c.A.TRANSPARENT;const n=c.A.clone(t.edgeColor,Q);return n.alpha=t.edgeWidth,n},u_clippingPlanesMatrix:function(){const t=e.clippingPlanes;if(!(0,h.A)(t))return p.A.IDENTITY;const i=(0,d.A)(e.clippingPlanesOriginMatrix,e._modelMatrix);p.A.multiply(n.uniformState.view3D,i,$);const o=p.A.multiply($,t.modelMatrix,$);return p.A.inverseTranspose(o,K)}};U.A.addUniforms(e,a),(i||r||s)&&(a=(0,l.A)(a,{u_quantizedVolumeScaleAndOctEncodedRange:function(){const t=J;if((0,h.A)(e._quantizedVolumeScale)){const n=o.A.clone(e._quantizedVolumeScale,t);o.A.divideByScalar(n,e._quantizedRange,t)}return t.w=e._octEncodedRange,t}})),(0,h.A)(e._uniformMapLoaded)&&(a=e._uniformMapLoaded(a)),e._drawCommand.uniformMap=a}(e,t);let he="in vec3 a_position; \nout vec4 v_color; \nuniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \nuniform vec4 u_constantColor; \nuniform vec4 u_highlightColor; \n";he+="float u_pointSize; \nfloat tiles3d_tileset_time; \n",O&&(he+="float u_geometricError; \nfloat u_depthMultiplier; \n"),he+=ue,ae&&(he+=T?"in vec4 a_color; \n":v?"in float a_color; \nconst float SHIFT_RIGHT_11 = 1.0 / 2048.0; \nconst float SHIFT_RIGHT_5 = 1.0 / 32.0; \nconst float SHIFT_LEFT_11 = 2048.0; \nconst float SHIFT_LEFT_5 = 32.0; \nconst float NORMALIZE_6 = 1.0 / 64.0; \nconst float NORMALIZE_5 = 1.0 / 32.0; \n":"in vec3 a_color; \n"),ce&&(he+=g||b?"in vec2 a_normal; \n":"in vec3 a_normal; \n"),S&&(he+="in float a_batchId; \n"),(f||m||b)&&(he+="uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \n"),j&&(he+=M),W&&(he+=F),q&&(he+=k),he+="void main() \n{ \n    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \n    tiles3d_tileset_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \n",O&&(he+="    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \n    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \n"),he+=ae?T?"    vec4 color = a_color; \n":v?"    float compressed = a_color; \n    float r = floor(compressed * SHIFT_RIGHT_11); \n    compressed -= r * SHIFT_LEFT_11; \n    float g = floor(compressed * SHIFT_RIGHT_5); \n    compressed -= g * SHIFT_LEFT_5; \n    float b = compressed; \n    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \n    vec4 color = vec4(rgb, 1.0); \n":"    vec4 color = vec4(a_color, 1.0); \n":"    vec4 color = u_constantColor; \n",he+=f||m?"    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \n":"    vec3 position = a_position; \n",he+="    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \n",ce?(he+=g?"    vec3 normal = czm_octDecode(a_normal); \n":b?"    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \n":"    vec3 normal = a_normal; \n",he+="    vec3 normalEC = czm_normal * normal; \n"):he+="    vec3 normal = vec3(1.0); \n",j&&(he+="    color = getColorFromStyle(position, position_absolute, color, normal); \n"),W&&(he+="    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \n"),he+=q?"    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \n":O?"    vec4 positionEC = czm_modelView * vec4(position, 1.0); \n    float depth = -positionEC.z; \n    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \n":"    gl_PointSize = u_pointSize; \n",he+="    color = color * u_highlightColor; \n",ce&&I&&(he+="    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \n    diffuseStrength = max(diffuseStrength, 0.4); \n    color.xyz *= diffuseStrength * czm_lightColor; \n"),he+="    v_color = color; \n    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \n",ce&&x&&(he+="    float visible = step(-normalEC.z, 0.0); \n    gl_Position *= visible; \n    gl_PointSize *= visible; \n"),W&&(he+="    gl_Position.w *= float(show); \n    gl_PointSize *= float(show); \n"),he+="} \n";let Ae="in vec4 v_color; \n";Y&&(Ae+="uniform highp sampler2D u_clippingPlanes; \nuniform mat4 u_clippingPlanesMatrix; \nuniform vec4 u_clippingPlanesEdgeStyle; \n",Ae+="\n",Ae+=(0,N.A)(D,u),Ae+="\n"),Ae+="void main() \n{ \n    out_FragColor = czm_gammaCorrect(v_color); \n",Y&&(Ae+=(0,L.A)("u_clippingPlanes","u_clippingPlanesMatrix","u_clippingPlanesEdgeStyle")),Ae+="} \n",e.splitDirection!==B.A.NONE&&(Ae=U.A.modifyFragmentShader(Ae)),(0,h.A)(e._vertexShaderLoaded)&&(he=e._vertexShaderLoaded(he)),(0,h.A)(e._fragmentShaderLoaded)&&(Ae=e._fragmentShaderLoaded(Ae));const fe=e._drawCommand;(0,h.A)(fe.shaderProgram)&&fe.shaderProgram.destroy(),fe.shaderProgram=C.A.fromCache({context:u,vertexShaderSource:he,fragmentShaderSource:Ae,attributeLocations:le});try{fe.shaderProgram._bind()}catch(e){throw new y.A("Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error.")}}(this,e,this._style),this._drawCommand.castShadows=F.A.castShadows(this.shadows),this._drawCommand.receiveShadows=F.A.receiveShadows(this.shadows);const I=this._highlightColor.alpha<1||this._constantColor.alpha<1||this._styleTranslucent;this._drawCommand.renderState=I?this._translucentRenderState:this._opaqueRenderState,this._drawCommand.pass=I?E.A.TRANSLUCENT:this._opaquePass;const D=e.commandList,M=e.passes;(M.render||M.pick)&&D.push(this._drawCommand)},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){const e=this._drawCommand;return(0,h.A)(e)&&(e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),(0,A.A)(this)};const re=V},534135:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(434067),o=n(41476),r=n(491446),s=n(677354),a=n(402330),c=n(769493),l=n(377496),u=n(804701),d=n(760866),h=n(40118),A=n(342875),f=n(200646),p=n(938987),m=n(812178);function _(){this._framebuffer=new u.A({colorAttachmentsLength:2,depth:!0,supportsDepthTexture:!0}),this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}Object.defineProperties(_.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}},colorGBuffer:{get:function(){return this._framebuffer.getColorTexture(0)}},depthGBuffer:{get:function(){return this._framebuffer.getColorTexture(1)}}});const g=new i.A;function y(e){return e.drawBuffers&&e.fragmentDepth}function b(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"EC");if(!(0,r.A)(n)){const i=t._attributeLocations,o=t.fragmentShaderSource.clone();o.sources.splice(0,0,"layout (location = 0) out vec4 out_FragData_0;\nlayout (location = 1) out vec4 out_FragData_1;"),o.sources=o.sources.map((function(e){return(e=A.A.replaceMain(e,"czm_point_cloud_post_process_main")).replaceAll(/out_FragColor/g,"out_FragData_0")})),o.sources.push("void main() \n{ \n    czm_point_cloud_post_process_main(); \n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n    out_FragData_1 = czm_packDepth(gl_FragDepth); \n#else\n    out_FragData_1 = czm_packDepth(gl_FragCoord.z);\n#endif\n}"),n=e.shaderCache.createDerivedShaderProgram(t,"EC",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}_.isSupported=y,_.prototype.update=function(e,t,n,i){if(!y(e.context))return;let s;this._strength=n.eyeDomeLightingStrength,this._radius=n.eyeDomeLightingRadius*e.pixelRatio,function(e,t){const n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i),function(e,t){const n=new A.A({defines:["LOG_DEPTH_WRITE"],sources:[m.A]}),i={u_pointCloud_colorGBuffer:function(){return e.colorGBuffer},u_pointCloud_depthGBuffer:function(){return e.depthGBuffer},u_distanceAndEdlStrength:function(){return g.x=e._radius,g.y=e._strength,g}},r=h.A.fromCache({blending:f.A.ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:p.A.setCesium3DTileBit(),stencilMask:p.A.CESIUM_3D_TILE_MASK});e._drawCommand=t.createViewportQuadCommand(n,{uniformMap:i,renderState:r,pass:d.A.CESIUM_3D_TILE,owner:e}),e._clearCommand=new c.A({framebuffer:e.framebuffer,color:new o.A(0,0,0,0),depth:1,renderState:h.A.fromCache(),pass:d.A.CESIUM_3D_TILE,owner:e})}(e,t)}(this,e.context);const u=e.commandList,_=u.length;for(s=t;s<_;++s){const t=u[s];if(t.primitiveType!==a.A.POINTS||t.pass===d.A.TRANSLUCENT)continue;let n,i,o=t.derivedCommands.pointCloudProcessor;(0,r.A)(o)&&(n=o.command,i=o.originalShaderProgram),(0,r.A)(n)&&!t.dirty&&i===t.shaderProgram&&n.framebuffer===this.framebuffer||(n=l.A.shallowClone(t,n),n.framebuffer=this.framebuffer,n.shaderProgram=b(e.context,t.shaderProgram),n.castShadows=!1,n.receiveShadows=!1,(0,r.A)(o)||(o={command:n,originalShaderProgram:t.shaderProgram},t.derivedCommands.pointCloudProcessor=o),o.originalShaderProgram=t.shaderProgram),u[s]=n}const v=this._clearCommand,T=this._drawCommand;T.boundingVolume=i,u.push(T),u.push(v)},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._drawCommand=void 0,e._clearCommand=void 0,(0,s.A)(this)};const v=_},929771:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(419061),o=n(534135);function r(e){const t=(0,i.A)(e,{});this.attenuation=(0,i.A)(t.attenuation,!1),this.geometricErrorScale=(0,i.A)(t.geometricErrorScale,1),this.maximumAttenuation=t.maximumAttenuation,this.baseResolution=t.baseResolution,this.eyeDomeLighting=(0,i.A)(t.eyeDomeLighting,!0),this.eyeDomeLightingStrength=(0,i.A)(t.eyeDomeLightingStrength,1),this.eyeDomeLightingRadius=(0,i.A)(t.eyeDomeLightingRadius,1),this.backFaceCulling=(0,i.A)(t.backFaceCulling,!1),this.normalShading=(0,i.A)(t.normalShading,!0)}r.isSupported=function(e){return o.A.isSupported(e.context)};const s=r},154622:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(263604),o=n(660662),r=n(267980),s=n(41476),a=n(419061),c=n(491446),l=n(605971),u=n(853331),d=n(584164),h=n(870349),A=n(608191);function f(e,t){e=(0,a.A)(e,a.A.EMPTY_OBJECT),this._show=(0,a.A)(e.show,!0),this._width=(0,a.A)(e.width,1),this._loop=(0,a.A)(e.loop,!1),this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,(0,c.A)(this._material)||(this._material=A.A.fromType(A.A.ColorType,{color:new s.A(1,1,1,1)}));let n,l=e.positions;(0,c.A)(l)||(l=[]),this._positions=l,this._actualPositions=(0,i.A)(l,r.A.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=l.slice()),this._actualPositions.push(r.A.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id,(0,c.A)(t)&&(n=d.A.clone(t.modelMatrix)),this._modelMatrix=n,this._segments=h.A.wrapLongitude(this._actualPositions,n),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(v),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=o.A.fromPoints(this._actualPositions),this._boundingVolumeWC=o.A.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new o.A}const p=f.POSITION_INDEX=0,m=f.SHOW_INDEX=1,_=f.WIDTH_INDEX=2,g=f.MATERIAL_INDEX=3,y=f.POSITION_SIZE_INDEX=4,b=f.DISTANCE_DISPLAY_CONDITION=5,v=f.NUMBER_OF_PROPERTIES=6;function T(e,t){++e._propertiesChanged[t];const n=e._polylineCollection;(0,c.A)(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(f.prototype,{show:{get:function(){return this._show},set:function(e){if(!(0,c.A)(e))throw new l.A("value is required.");e!==this._show&&(this._show=e,T(this,m))}},positions:{get:function(){return this._positions},set:function(e){if(!(0,c.A)(e))throw new l.A("value is required.");let t=(0,i.A)(e,r.A.equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(r.A.clone(t[0]))),this._actualPositions.length===t.length&&this._actualPositions.length===this._length||T(this,y),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=o.A.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=o.A.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),T(this,p),this.update()}},material:{get:function(){return this._material},set:function(e){if(!(0,c.A)(e))throw new l.A("material is required.");this._material!==e&&(this._material=e,T(this,g))}},width:{get:function(){return this._width},set:function(e){if(!(0,c.A)(e))throw new l.A("value is required.");e!==this._width&&(this._width=e,T(this,_))}},loop:{get:function(){return this._loop},set:function(e){if(!(0,c.A)(e))throw new l.A("value is required.");if(e!==this._loop){let t=this._actualPositions;e?t.length>2&&!r.A.equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(r.A.clone(t[0]))):t.length>2&&r.A.equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,T(this,y)}}},id:{get:function(){return this._id},set:function(e){this._id=e,(0,c.A)(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!(0,c.A)(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,c.A)(e)&&e.far<=e.near)throw new l.A("far distance must be greater than near distance.");u.A.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=u.A.clone(e,this._distanceDisplayCondition),T(this,b))}}}),f.prototype.update=function(){let e=d.A.IDENTITY;(0,c.A)(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);const t=this._segments.positions.length,n=this._segments.lengths,i=this._propertiesChanged[p]>0||this._propertiesChanged[y]>0;if(d.A.equals(e,this._modelMatrix)&&!i||(this._segments=h.A.wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=o.A.transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=d.A.clone(e,this._modelMatrix),this._segments.positions.length!==t)T(this,y);else{const e=n.length;for(let t=0;t<e;++t)if(n[t]!==this._segments.lengths[t]){T(this,y);break}}},f.prototype.getPickId=function(e){return(0,c.A)(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},f.prototype._clean=function(){this._dirty=!1;const e=this._propertiesChanged;for(let t=0;t<v-1;++t)e[t]=0},f.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0};const w=f},891674:(e,t,n)=>{"use strict";n.d(t,{A:()=>Pe});var i=n(660662),o=n(434067),r=n(267980),s=n(626809),a=n(336946),c=n(41476),l=n(430346),u=n(571804),d=n(419061),h=n(491446),A=n(677354),f=n(605971),p=n(816422),m=n(520098),_=n(874915),g=n(647326),y=n(367817),b=n(584164),v=n(257941),T=n(123245),w=n(641613),E=n(442790),S=n(430332),C=n(377496),x=n(760866),I=n(40118),P=n(302836),D=n(342875),O=n(616e3),L=n(508380),N=n(78149),M=n(682091),R=n(57723),F=n(425438),B=n(200646),U=n(608191),k=n(154622),V=n(62467);const H=k.A.SHOW_INDEX,z=k.A.WIDTH_INDEX,G=k.A.POSITION_INDEX,j=k.A.MATERIAL_INDEX,W=k.A.POSITION_SIZE_INDEX,q=k.A.DISTANCE_DISPLAY_CONDITION,Y=k.A.NUMBER_OF_PROPERTIES,X={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function J(e){e=(0,d.A)(e,d.A.EMPTY_OBJECT),this.show=(0,d.A)(e.show,!0),this.modelMatrix=b.A.clone((0,d.A)(e.modelMatrix,b.A.IDENTITY)),this._modelMatrix=b.A.clone(b.A.IDENTITY),this.debugShowBoundingVolume=(0,d.A)(e.debugShowBoundingVolume,!1),this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(Y),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:E.A.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=c.A.clone(c.A.WHITE);const t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}Object.defineProperties(J.prototype,{length:{get:function(){return se(this),this._polylines.length}}}),J.prototype.add=function(e){const t=new k.A(e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t},J.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,(0,h.A)(e._bucket)){const t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1},J.prototype.removeAll=function(){ae(this),le(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},J.prototype.contains=function(e){return(0,h.A)(e)&&e._polylineCollection===this},J.prototype.get=function(e){if(!(0,h.A)(e))throw new f.A("index is required.");return se(this),this._polylines[e]};const Q=new p.A,$=new s.A,K=new o.A;J.prototype.update=function(e){if(se(this),0===this._polylines.length||!this.show)return;!function(e,t){const n=t.mode;e._mode===n&&b.A.equals(e._modelMatrix,e.modelMatrix)||(e._mode=n,e._modelMatrix=b.A.clone(e.modelMatrix),e._createVertexArray=!0)}(this,e);const t=e.context,n=e.mapProjection;let r,a=this._propertiesChanged;if(this._createBatchTable){if(0===S.A.maximumVertexTextureImageUnits)throw new T.A("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");!function(e,t){(0,h.A)(e._batchTable)&&e._batchTable.destroy();const n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:u.A.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:u.A.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:u.A.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:u.A.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:u.A.FLOAT,componentsPerAttribute:2}];e._batchTable=new F.A(t,n,e._polylines.length)}(this,t),this._createBatchTable=!1}if(this._createVertexArray||function(e){let t=!1;const n=e._propertiesChanged,i=e._positionBufferUsage;return n[G]?i.bufferUsage!==E.A.STREAM_DRAW?(t=!0,i.bufferUsage=E.A.STREAM_DRAW,i.frameCount=100):i.frameCount=100:i.bufferUsage!==E.A.STATIC_DRAW&&(0===i.frameCount?(t=!0,i.bufferUsage=E.A.STATIC_DRAW):i.frameCount--),t}(this))ne(this,t,n);else if(this._polylinesUpdated){const i=this._polylinesToUpdate;if(this._mode!==V.A.SCENE3D){const e=i.length;for(let t=0;t<e;++t)r=i[t],r.update()}if(a[W]||a[j])ne(this,t,n);else{const t=i.length,c=this._polylineBuckets;for(let l=0;l<t;++l){r=i[l],a=r._propertiesChanged;const t=r._bucket;let u=0;for(const e in c)if(c.hasOwnProperty(e)){if(c[e]===t){a[G]&&t.writeUpdate(u,r,this._positionBuffer,n);break}u+=c[e].lengthOfPositions}if((a[H]||a[z])&&this._batchTable.setBatchedAttribute(r._index,0,new o.A(r._width,r._show)),this._batchTable.attributes.length>2){if(a[G]||a[W]){const t=e.mode===V.A.SCENE2D?r._boundingVolume2D:r._boundingVolumeWC,n=p.A.fromCartesian(t.center,Q),i=s.A.fromElements(n.low.x,n.low.y,n.low.z,t.radius,$);this._batchTable.setBatchedAttribute(r._index,2,n.high),this._batchTable.setBatchedAttribute(r._index,3,i)}if(a[q]){const e=K;e.x=0,e.y=Number.MAX_VALUE;const t=r.distanceDisplayCondition;(0,h.A)(t)&&(e.x=t.near,e.y=t.far),this._batchTable.setBatchedAttribute(r._index,4,e)}}r._clean()}}i.length=0,this._polylinesUpdated=!1}a=this._propertiesChanged;for(let e=0;e<Y;++e)a[e]=0;let c=b.A.IDENTITY;e.mode===V.A.SCENE3D&&(c=this.modelMatrix);const d=e.passes,A=0!==e.morphTime;(0,h.A)(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===A||(this._opaqueRS=I.A.fromCache({depthMask:A,depthTest:{enabled:A}})),(0,h.A)(this._translucentRS)&&this._translucentRS.depthTest.enabled===A||(this._translucentRS=I.A.fromCache({blending:B.A.ALPHA_BLEND,depthMask:!A,depthTest:{enabled:A}})),this._batchTable.update(e),(d.render||d.pick)&&function(e,t,n,o){const r=t.context,s=t.commandList,a=n.length;let c=0,u=!0;const d=e._vertexArrays,A=e.debugShowBoundingVolume,f=e._batchTable.getUniformMapCallback(),p=d.length;for(let m=0;m<p;++m){const p=d[m],_=p.buckets,g=_.length;for(let d=0;d<g;++d){const m=_[d];let g=m.offset;const y=m.bucket.shaderProgram,b=m.bucket.polylines,v=b.length;let T,w,E,S,I=0;for(let d=0;d<v;++d){const _=b[d],v=re(_._material);if(v!==T){if((0,h.A)(T)&&I>0){const t=w.isTranslucent();c>=a?(E=new C.A({owner:e}),n.push(E)):E=n[c],++c,S=(0,l.A)(f(w._uniforms),e._uniformMap),E.boundingVolume=i.A.clone(Z,E.boundingVolume),E.modelMatrix=o,E.shaderProgram=y,E.vertexArray=p.va,E.renderState=t?e._translucentRS:e._opaqueRS,E.pass=t?x.A.TRANSLUCENT:x.A.OPAQUE,E.debugShowBoundingVolume=A,E.pickId="v_pickColor",E.uniformMap=S,E.count=I,E.offset=g,g+=I,I=0,u=!0,s.push(E)}w=_._material,w.update(r),T=v}const P=_._locatorBuckets,D=P.length;for(let e=0;e<D;++e){const t=P[e];t.locator===m&&(I+=t.count)}let O;t.mode===V.A.SCENE3D?O=_._boundingVolumeWC:t.mode===V.A.COLUMBUS_VIEW?O=_._boundingVolume2D:t.mode===V.A.SCENE2D?(0,h.A)(_._boundingVolume2D)&&(O=i.A.clone(_._boundingVolume2D,ee),O.center.x=0):(0,h.A)(_._boundingVolumeWC)&&(0,h.A)(_._boundingVolume2D)&&(O=i.A.union(_._boundingVolumeWC,_._boundingVolume2D,ee)),u?(u=!1,i.A.clone(O,Z)):i.A.union(O,Z,Z)}(0,h.A)(T)&&I>0&&(c>=a?(E=new C.A({owner:e}),n.push(E)):E=n[c],++c,S=(0,l.A)(f(w._uniforms),e._uniformMap),E.boundingVolume=i.A.clone(Z,E.boundingVolume),E.modelMatrix=o,E.shaderProgram=y,E.vertexArray=p.va,E.renderState=w.isTranslucent()?e._translucentRS:e._opaqueRS,E.pass=w.isTranslucent()?x.A.TRANSLUCENT:x.A.OPAQUE,E.debugShowBoundingVolume=A,E.pickId="v_pickColor",E.uniformMap=S,E.count=I,E.offset=g,u=!0,s.push(E)),T=void 0}}n.length=c}(this,e,this._colorCommands,c)};const Z=new i.A,ee=new i.A;J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){return ce(this),ae(this),le(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,A.A)(this)};const te=[0,0,0];function ne(e,t,n){e._createVertexArray=!1,ae(e),ce(e),function(e){const t=e._mode,n=e._modelMatrix,i=e._polylineBuckets={},o=e._polylines,r=o.length;for(let e=0;e<r;++e){const r=o[e];if(r._actualPositions.length>1){r.update();const e=r.material;let o=i[e.type];(0,h.A)(o)||(o=i[e.type]=new de(e,t,n)),o.addPolyline(r)}}}(e);const i=[[]];let o=i[0];const r=e._batchTable,s=e._useHighlightColor,a=[0];let c=0;const l=[[]];let d=0;const A=e._polylineBuckets;let f,p;for(f in A)A.hasOwnProperty(f)&&(p=A[f],p.updateShader(t,r,s),d+=p.lengthOfPositions);if(d>0){const s=e._mode,m=new Float32Array(6*d*3),g=new Float32Array(4*d);let b,v=0,T=0,S=0;for(f in A)if(A.hasOwnProperty(f)){p=A[f],p.write(m,g,v,T,S,r,t,n),s===V.A.MORPHING&&((0,h.A)(b)||(b=new Float32Array(6*d*3)),p.writeForMorph(b,v));const e=p.lengthOfPositions;v+=6*e*3,T+=4*e,S+=4*e,c=p.updateIndices(i,a,l,c)}const C=e._positionBufferUsage.bufferUsage,x=E.A.STATIC_DRAW;let I;e._positionBuffer=w.A.createVertexBuffer({context:t,typedArray:m,usage:C}),(0,h.A)(b)&&(I=w.A.createVertexBuffer({context:t,typedArray:b,usage:C})),e._texCoordExpandAndBatchIndexBuffer=w.A.createVertexBuffer({context:t,typedArray:g,usage:x});const P=3*Float32Array.BYTES_PER_ELEMENT,D=4*Float32Array.BYTES_PER_ELEMENT;let O=0;const N=i.length;for(let n=0;n<N;++n)if(o=i[n],o.length>0){const i=new Uint16Array(o),r=w.A.createIndexBuffer({context:t,typedArray:i,usage:E.A.STATIC_DRAW,indexDatatype:_.A.UNSIGNED_SHORT});O+=a[n];const c=6*(n*(P*y.A.SIXTY_FOUR_KILOBYTES)-O*P),d=P+c,h=P+d,A=P+h,f=P+A,p=P+f,m=n*(D*y.A.SIXTY_FOUR_KILOBYTES)-O*D,g=[{index:X.position3DHigh,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:c,strideInBytes:6*P},{index:X.position3DLow,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:d,strideInBytes:6*P},{index:X.position2DHigh,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:c,strideInBytes:6*P},{index:X.position2DLow,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:d,strideInBytes:6*P},{index:X.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:h,strideInBytes:6*P},{index:X.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:A,strideInBytes:6*P},{index:X.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:h,strideInBytes:6*P},{index:X.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:A,strideInBytes:6*P},{index:X.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:f,strideInBytes:6*P},{index:X.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:p,strideInBytes:6*P},{index:X.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:f,strideInBytes:6*P},{index:X.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:u.A.FLOAT,offsetInBytes:p,strideInBytes:6*P},{index:X.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:u.A.FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:m}];let b,v,T,S;s===V.A.SCENE3D?(v=e._positionBuffer,b="vertexBuffer",T=te,S="value"):s===V.A.SCENE2D||s===V.A.COLUMBUS_VIEW?(v=te,b="value",T=e._positionBuffer,S="vertexBuffer"):(v=I,b="vertexBuffer",T=e._positionBuffer,S="vertexBuffer"),g[0][b]=v,g[1][b]=v,g[2][S]=T,g[3][S]=T,g[4][b]=v,g[5][b]=v,g[6][S]=T,g[7][S]=T,g[8][b]=v,g[9][b]=v,g[10][S]=T,g[11][S]=T;const C=new L.A({context:t,attributes:g,indexBuffer:r});e._vertexArrays.push({va:C,buckets:l[n]})}}}function ie(e,t){return t instanceof O.A?t.id:t}const oe=[];function re(e){const t=U.A._uniformList[e.type],n=t.length;oe.length=2*n;let i=0;for(let o=0;o<n;++o){const n=t[o];oe[i]=n,oe[i+1]=e._uniforms[n](),i+=2}return`${e.type}:${JSON.stringify(oe,ie)}`}function se(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;const t=[],n=[];let i,o=0;const r=e._polylines.length;for(let s=0;s<r;++s)i=e._polylines[s],i.isDestroyed||(i._index=o++,n.push(i),t.push(i));e._polylines=t,e._polylinesToUpdate=n}}function ae(e){const t=e._polylines,n=t.length;for(let e=0;e<n;++e)if(!t[e].isDestroyed){const n=t[e]._bucket;(0,h.A)(n)&&(n.shaderProgram=n.shaderProgram&&n.shaderProgram.destroy())}}function ce(e){const t=e._vertexArrays.length;for(let n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}function le(e){const t=e._polylines,n=t.length;for(let e=0;e<n;++e)t[e].isDestroyed||t[e]._destroy()}function ue(e,t,n){this.count=e,this.offset=t,this.bucket=n}function de(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}function he(e){return r.A.dot(r.A.UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(v.A.ORIGIN_ZX_PLANE)===g.A.INTERSECTING}J.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]},de.prototype.addPolyline=function(e){this.polylines.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this},de.prototype.updateShader=function(e,t,n){if((0,h.A)(this.shaderProgram))return;const i=["DISTANCE_DISPLAY_CONDITION"];n&&i.push("VECTOR_TILE"),-1!==this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)&&i.push("POLYLINE_DASH"),m.A.isInternetExplorer()||i.push("CLIP_POLYLINE");const o=new D.A({defines:i,sources:["in vec4 v_pickColor;\n",this.material.shaderSource,M.A]}),r=t.getVertexShaderCallback()(R.A),s=new D.A({defines:i,sources:[N.A,r]});this.shaderProgram=P.A.fromCache({context:e,vertexShaderSource:s,fragmentShaderSource:o,attributeLocations:X})},de.prototype.getPolylinePositionsLength=function(e){let t;if(this.mode===V.A.SCENE3D||!he(e))return t=e._actualPositions.length,4*t-4;let n=0;const i=e._segments.lengths;t=i.length;for(let e=0;e<t;++e)n+=4*i[e]-4;return n};const Ae=new r.A,fe=new r.A,pe=new r.A,me=new r.A,_e=new s.A,ge=new o.A;de.prototype.write=function(e,t,n,i,o,a,l,u){const d=this.mode,A=u.ellipsoid.maximumRadius*y.A.PI,f=this.polylines,m=f.length;for(let i=0;i<m;++i){const m=f[i],_=m.width,g=m.show&&_>0,y=m._index,b=this.getSegments(m,u),v=b.positions,T=b.lengths,w=v.length,E=m.getPickId(l).color;let S,C=0,x=0;for(let i=0;i<w;++i){0===i?m._loop?S=v[w-2]:(S=me,r.A.subtract(v[0],v[1],S),r.A.add(v[0],S,S)):S=v[i-1],r.A.clone(S,fe),r.A.clone(v[i],Ae),i===w-1?m._loop?S=v[1]:(S=me,r.A.subtract(v[w-1],v[w-2],S),r.A.add(v[w-1],S,S)):S=v[i+1],r.A.clone(S,pe);const s=T[C];i===x+s&&(x+=s,++C);const a=i-x==0,c=i===x+T[C]-1;d===V.A.SCENE2D&&(fe.z=0,Ae.z=0,pe.z=0),d!==V.A.SCENE2D&&d!==V.A.MORPHING||(a||c)&&A-Math.abs(Ae.x)<1&&((Ae.x<0&&fe.x>0||Ae.x>0&&fe.x<0)&&r.A.clone(Ae,fe),(Ae.x<0&&pe.x>0||Ae.x>0&&pe.x<0)&&r.A.clone(Ae,pe));const l=c?2:4;for(let r=a?2:0;r<l;++r){p.A.writeElements(Ae,e,n),p.A.writeElements(fe,e,n+6),p.A.writeElements(pe,e,n+12);const s=r-2<0?-1:1;t[o]=i/(w-1),t[o+1]=r%2*2-1,t[o+2]=s,t[o+3]=y,n+=18,o+=4}}const I=_e;I.x=c.A.floatToByte(E.red),I.y=c.A.floatToByte(E.green),I.z=c.A.floatToByte(E.blue),I.w=c.A.floatToByte(E.alpha);const P=ge;P.x=_,P.y=g?1:0;const D=d===V.A.SCENE2D?m._boundingVolume2D:m._boundingVolumeWC,O=p.A.fromCartesian(D.center,Q),L=O.high,N=s.A.fromElements(O.low.x,O.low.y,O.low.z,D.radius,$),M=K;M.x=0,M.y=Number.MAX_VALUE;const R=m.distanceDisplayCondition;(0,h.A)(R)&&(M.x=R.near,M.y=R.far),a.setBatchedAttribute(y,0,P),a.setBatchedAttribute(y,1,I),a.attributes.length>2&&(a.setBatchedAttribute(y,2,L),a.setBatchedAttribute(y,3,N),a.setBatchedAttribute(y,4,M))}};const ye=new r.A,be=new r.A,ve=new r.A,Te=new r.A;de.prototype.writeForMorph=function(e,t){const n=this.modelMatrix,i=this.polylines,o=i.length;for(let s=0;s<o;++s){const o=i[s],a=o._segments.positions,c=o._segments.lengths,l=a.length;let u=0,d=0;for(let i=0;i<l;++i){let s;0===i?o._loop?s=a[l-2]:(s=Te,r.A.subtract(a[0],a[1],s),r.A.add(a[0],s,s)):s=a[i-1],s=b.A.multiplyByPoint(n,s,be);const h=b.A.multiplyByPoint(n,a[i],ye);let A;i===l-1?o._loop?A=a[1]:(A=Te,r.A.subtract(a[l-1],a[l-2],A),r.A.add(a[l-1],A,A)):A=a[i+1],A=b.A.multiplyByPoint(n,A,ve);const f=c[u];i===d+f&&(d+=f,++u);const m=i-d==0,_=i===d+c[u]-1?2:4;for(let n=m?2:0;n<_;++n)p.A.writeElements(h,e,t),p.A.writeElements(s,e,t+6),p.A.writeElements(A,e,t+12),t+=18}}};const we=new Array(1);de.prototype.updateIndices=function(e,t,n,i){let o=n.length-1,r=new ue(0,i,this);n[o].push(r);let s=0,a=e[e.length-1],c=0;a.length>0&&(c=a[a.length-1]+1);const l=this.polylines,u=l.length;for(let d=0;d<u;++d){const u=l[d];let h;if(u._locatorBuckets=[],this.mode===V.A.SCENE3D){h=we;const e=u._actualPositions.length;if(!(e>0))continue;h[0]=e}else h=u._segments.lengths;const A=h.length;if(A>0){let l=0;for(let d=0;d<A;++d){const A=h[d]-1;for(let d=0;d<A;++d)c+4>y.A.SIXTY_FOUR_KILOBYTES&&(u._locatorBuckets.push({locator:r,count:l}),l=0,t.push(4),a=[],e.push(a),c=0,r.count=s,s=0,i=0,r=new ue(0,0,this),n[++o]=[r]),a.push(c,c+2,c+1),a.push(c+1,c+2,c+3),l+=6,s+=6,i+=6,c+=4}u._locatorBuckets.push({locator:r,count:l}),c+4>y.A.SIXTY_FOUR_KILOBYTES&&(t.push(0),a=[],e.push(a),c=0,r.count=s,i=0,s=0,r=new ue(0,0,this),n[++o]=[r])}u._clean()}return r.count=s,i},de.prototype.getPolylineStartIndex=function(e){const t=this.polylines;let n=0;const i=t.length;for(let o=0;o<i;++o){const i=t[o];if(i===e)break;n+=i._actualLength}return n};const Ee={positions:void 0,lengths:void 0},Se=new Array(1),Ce=new r.A,xe=new a.A;let Ie;de.prototype.getSegments=function(e,t){let n=e._actualPositions;if(this.mode===V.A.SCENE3D)return Se[0]=n.length,Ee.positions=n,Ee.lengths=Se,Ee;he(e)&&(n=e._segments.positions);const o=t.ellipsoid,s=[],a=this.modelMatrix,c=n.length;let l,u=Ce;for(let e=0;e<c;++e)l=n[e],u=b.A.multiplyByPoint(a,l,u),s.push(t.project(o.cartesianToCartographic(u,xe)));if(s.length>0){e._boundingVolume2D=i.A.fromPoints(s,e._boundingVolume2D);const t=e._boundingVolume2D.center;e._boundingVolume2D.center=new r.A(t.z,t.x,t.y)}return Ee.positions=s,Ee.lengths=e._segments.lengths,Ee},de.prototype.writeUpdate=function(e,t,n,i){const o=this.mode,s=i.ellipsoid.maximumRadius*y.A.PI;let a=t._actualLength;if(a){e+=this.getPolylineStartIndex(t);let c=Ie;const l=6*a*3;!(0,h.A)(c)||c.length<l?c=Ie=new Float32Array(l):c.length>l&&(c=new Float32Array(c.buffer,0,l));const u=this.getSegments(t,i),d=u.positions,A=u.lengths;let f,m=0,_=0,g=0;a=d.length;for(let e=0;e<a;++e){0===e?t._loop?f=d[a-2]:(f=me,r.A.subtract(d[0],d[1],f),r.A.add(d[0],f,f)):f=d[e-1],r.A.clone(f,fe),r.A.clone(d[e],Ae),e===a-1?t._loop?f=d[1]:(f=me,r.A.subtract(d[a-1],d[a-2],f),r.A.add(d[a-1],f,f)):f=d[e+1],r.A.clone(f,pe);const n=A[_];e===g+n&&(g+=n,++_);const i=e-g==0,l=e===g+A[_]-1;o===V.A.SCENE2D&&(fe.z=0,Ae.z=0,pe.z=0),o!==V.A.SCENE2D&&o!==V.A.MORPHING||(i||l)&&s-Math.abs(Ae.x)<1&&((Ae.x<0&&fe.x>0||Ae.x>0&&fe.x<0)&&r.A.clone(Ae,fe),(Ae.x<0&&pe.x>0||Ae.x>0&&pe.x<0)&&r.A.clone(Ae,pe));const u=l?2:4;for(let e=i?2:0;e<u;++e)p.A.writeElements(Ae,c,m),p.A.writeElements(fe,c,m+6),p.A.writeElements(pe,c,m+12),m+=18}n.copyFromArrayView(c,18*Float32Array.BYTES_PER_ELEMENT*e)}};const Pe=J},421549:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(647934),o=n(369031),r=n(41476),s=n(430346),a=n(673874),c=n(419061),l=n(491446),u=n(677354),d=n(605971),h=n(276904),A=n(744603),f=n(326429),p=n(57775),m=n(40118),_=n(654799),g=n(342875),y=n(616e3),b=n(957233),v=n(78078),T=n(557448),w=n(339600);function E(e){const t=(e=(0,c.A)(e,c.A.EMPTY_OBJECT)).fragmentShader,n=(0,c.A)(e.textureScale,1),s=(0,c.A)(e.pixelFormat,h.A.RGBA);if(o.A.typeOf.string("options.fragmentShader",t),o.A.typeOf.number.greaterThan("options.textureScale",n,0),o.A.typeOf.number.lessThanOrEquals("options.textureScale",n,1),!h.A.isColorFormat(s))throw new d.A("options.pixelFormat must be a color format.");this._fragmentShader=t,this._uniforms=e.uniforms,this._textureScale=n,this._forcePowerOfTwo=(0,c.A)(e.forcePowerOfTwo,!1),this._sampleMode=(0,c.A)(e.sampleMode,w.A.NEAREST),this._pixelFormat=s,this._pixelDatatype=(0,c.A)(e.pixelDatatype,p.A.UNSIGNED_BYTE),this._clearColor=(0,c.A)(e.clearColor,r.A.BLACK),this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._idTexture=void 0,this._actualUniforms={},this._dirtyUniforms=[],this._texturesToRelease=[],this._texturesToCreate=[],this._texturePromise=void 0;const u=new f.A;u.scissorTest={enabled:!0,rectangle:(0,l.A)(e.scissorRectangle)?i.A.clone(e.scissorRectangle):new i.A},this._passState=u,this._ready=!1;let A=e.name;(0,l.A)(A)||(A=(0,a.A)()),this._name=A,this._logDepthChanged=void 0,this._useLogDepth=void 0,this._selectedIdTexture=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0,this._textureCache=void 0,this._index=void 0,this.enabled=!0,this._enabled=!0}Object.defineProperties(E.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},fragmentShader:{get:function(){return this._fragmentShader}},uniforms:{get:function(){return this._uniforms}},textureScale:{get:function(){return this._textureScale}},forcePowerOfTwo:{get:function(){return this._forcePowerOfTwo}},sampleMode:{get:function(){return this._sampleMode}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},clearColor:{get:function(){return this._clearColor}},scissorRectangle:{get:function(){return this._passState.scissorTest.rectangle}},outputTexture:{get:function(){if((0,l.A)(this._textureCache)){const e=this._textureCache.getFramebuffer(this._name);if((0,l.A)(e))return e.getColorTexture(0)}}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}});const S=/uniform\s+sampler2D\s+depthTexture/g;function C(e,t,n){const i=t[n];return("string"==typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData)&&e._dirtyUniforms.push(n),{get:function(){return t[n]},set:function(i){const o=t[n];t[n]=i;const r=e._actualUniforms,s=r[n];(0,l.A)(s)&&s!==o&&s instanceof y.A&&!(0,l.A)(e._textureCache.getStageByName(n))&&(e._texturesToRelease.push(s),delete r[n],delete r[`${n}Dimensions`]),o instanceof y.A&&e._texturesToRelease.push(o),"string"==typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData?e._dirtyUniforms.push(n):r[n]=i}}}function x(e,t){return function(){const n=e._actualUniforms[t];return"function"==typeof n?n():n}}function I(e,t){return function(){const n=e[t]();if((0,l.A)(n))return n.dimensions}}function P(e,t){return function(n){e._texturesToCreate.push({name:t,source:n})}}function D(e,t){return function(){return e._textureCache.getOutputTexture(t)}}function O(e){(0,l.A)(e._command)&&(e._command.shaderProgram=e._command.shaderProgram&&e._command.shaderProgram.destroy(),e._command=void 0),e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy();const t=e._textureCache;if(!(0,l.A)(t))return;const n=e._uniforms,i=e._actualUniforms;for(const o in i)i.hasOwnProperty(o)&&i[o]instanceof y.A&&((0,l.A)(t.getStageByName(n[o]))||i[o].destroy(),e._dirtyUniforms.push(o))}E.prototype._isSupported=function(e){return!S.test(this._fragmentShader)||e.depthTexture},E.prototype.update=function(e,t){if(this.enabled===this._enabled||this.enabled||O(this),this._enabled=this.enabled,!this._enabled)return;if(this._logDepthChanged=t!==this._useLogDepth,this._useLogDepth=t,this._selectedDirty=function(e){let t=(0,l.A)(e._selected)?e._selected.length:0;const n=(0,l.A)(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,l.A)(e._selected)&&(0,l.A)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,l.A)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&(0,l.A)(e._combinedSelected)){if(!(0,l.A)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,l.A)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,l.A)(this._parentSelected)?this._parentSelected.length:0,function(e,t){if(!e._selectedDirty)return;e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy(),e._selectedIdTexture=void 0;const n=e._combinedSelected;if(!(0,l.A)(n))return;let i,o,s=0;const a=n.length;for(i=0;i<a;++i)o=n[i],(0,l.A)(o.pickIds)?s+=o.pickIds.length:(0,l.A)(o.pickId)&&++s;if(0===a||0===s){const n=new Uint8Array(4);return n[0]=255,n[1]=255,n[2]=255,n[3]=255,void(e._selectedIdTexture=new y.A({context:t,pixelFormat:h.A.RGBA,pixelDatatype:p.A.UNSIGNED_BYTE,source:{arrayBufferView:n,width:1,height:1},sampler:_.A.NEAREST}))}let c,u=0;const d=new Uint8Array(4*s);for(i=0;i<a;++i)if(o=n[i],(0,l.A)(o.pickIds)){const e=o.pickIds,t=e.length;for(let n=0;n<t;++n)c=e[n].color,d[u]=r.A.floatToByte(c.red),d[u+1]=r.A.floatToByte(c.green),d[u+2]=r.A.floatToByte(c.blue),d[u+3]=r.A.floatToByte(c.alpha),u+=4}else(0,l.A)(o.pickId)&&(c=o.pickId.color,d[u]=r.A.floatToByte(c.red),d[u+1]=r.A.floatToByte(c.green),d[u+2]=r.A.floatToByte(c.blue),d[u+3]=r.A.floatToByte(c.alpha),u+=4);e._selectedIdTexture=new y.A({context:t,pixelFormat:h.A.RGBA,pixelDatatype:p.A.UNSIGNED_BYTE,source:{arrayBufferView:d,width:s,height:1},sampler:_.A.NEAREST})}(this,e),function(e){if((0,l.A)(e._uniformMap))return;const t={},n={},i=e._uniforms,o=e._actualUniforms;for(const r in i)if(i.hasOwnProperty(r)){"function"!=typeof i[r]?(t[r]=x(e,r),n[r]=C(e,i,r)):(t[r]=i[r],n[r]=i[r]),o[r]=i[r];const s=t[r]();("string"==typeof s||s instanceof y.A||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(t[`${r}Dimensions`]=I(t,r))}e._uniforms={},Object.defineProperties(e._uniforms,n),e._uniformMap=(0,s.A)(t,{colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions},depthTexture:function(){return e._depthTexture},depthTextureDimensions:function(){return e._depthTexture.dimensions},czm_idTexture:function(){return e._idTexture},czm_selectedIdTexture:function(){return e._selectedIdTexture},czm_selectedIdTextureStep:function(){return 1/e._selectedIdTexture.width}})}(this),function(e,t){let n,i,o;const r=e._texturesToRelease;let s=r.length;for(n=0;n<s;++n)i=r[n],i=i&&i.destroy();r.length=0;const a=e._texturesToCreate;for(s=a.length,n=0;n<s;++n){const i=a[n];o=i.name;const r=i.source;e._actualUniforms[o]=new y.A({context:t,source:r})}a.length=0;const c=e._dirtyUniforms;if(0===c.length&&!(0,l.A)(e._texturePromise))return void(e._ready=!0);if(0===c.length||(0,l.A)(e._texturePromise))return;s=c.length;const u=e._uniforms,d=[];for(n=0;n<s;++n){o=c[n];const t=u[o],i=e._textureCache.getStageByName(t);if((0,l.A)(i))e._actualUniforms[o]=D(e,t);else if("string"==typeof t){const n=new A.A({url:t});d.push(n.fetchImage().then(P(e,o)))}else e._texturesToCreate.push({name:o,source:t})}c.length=0,d.length>0?(e._ready=!1,e._texturePromise=Promise.all(d).then((function(){e._ready=!0,e._texturePromise=void 0}))):e._ready=!0}(this,e),function(e,t){if((0,l.A)(e._command)&&!e._logDepthChanged&&!e._selectedDirty)return;let n=e._fragmentShader;if((0,l.A)(e._selectedIdTexture)){const t=e._selectedIdTexture.width;n=n.replace(/in\s+vec2\s+v_textureCoordinates;/g,""),n=`#define CZM_SELECTED_FEATURE \nuniform sampler2D czm_idTexture; \nuniform sampler2D czm_selectedIdTexture; \nuniform float czm_selectedIdTextureStep; \nin vec2 v_textureCoordinates; \nbool czm_selected(vec2 offset) \n{ \n    bool selected = false;\n    vec4 id = texture(czm_idTexture, v_textureCoordinates + offset); \n    for (int i = 0; i < ${t}; ++i) \n    { \n        vec4 selectedId = texture(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5)); \n        if (all(equal(id, selectedId))) \n        { \n            return true; \n        } \n    } \n    return false; \n} \n\nbool czm_selected() \n{ \n    return czm_selected(vec2(0.0)); \n} \n\n${n}`}const i=new g.A({defines:[e._useLogDepth?"LOG_DEPTH":""],sources:[n]});e._command=t.createViewportQuadCommand(i,{uniformMap:e._uniformMap,owner:e})}(this,e),function(e){let t,n;e._sampleMode===w.A.LINEAR?(t=v.A.LINEAR,n=b.A.LINEAR):(t=v.A.NEAREST,n=b.A.NEAREST);const i=e._sampler;(0,l.A)(i)&&i.minificationFilter===t&&i.magnificationFilter===n||(e._sampler=new _.A({wrapS:T.A.CLAMP_TO_EDGE,wrapT:T.A.CLAMP_TO_EDGE,minificationFilter:t,magnificationFilter:n}))}(this),this._selectedDirty=!1,!this._ready)return;const n=this._textureCache.getFramebuffer(this._name);if(this._command.framebuffer=n,!(0,l.A)(n))return;const o=n.getColorTexture(0);let a;o.width===e.drawingBufferWidth&&o.height===e.drawingBufferHeight||(a=this._renderState,(0,l.A)(a)&&o.width===a.viewport.width&&o.height===a.viewport.height||(this._renderState=m.A.fromCache({viewport:new i.A(0,0,o.width,o.height)}))),this._command.renderState=a},E.prototype.execute=function(e,t,n,i){if(!((0,l.A)(this._command)&&(0,l.A)(this._command.framebuffer)&&this._ready&&this._enabled))return;this._colorTexture=t,this._depthTexture=n,this._idTexture=i,_.A.equals(this._colorTexture.sampler,this._sampler)||(this._colorTexture.sampler=this._sampler);const o=this.scissorRectangle.width>0&&this.scissorRectangle.height>0?this._passState:void 0;(0,l.A)(o)&&(o.context=e),this._command.execute(e,o)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return O(this),(0,u.A)(this)};const L=E},201733:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(369031),o=n(491446),r=n(677354),s=n(605971),a=n(276904),c=n(57775),l=n(654799),u=n(616e3),d=n(957233),h=n(78078),A=n(557448),f=n(90979),p=n(380590),m=n(922990),_=n(639475);const g=[];function y(){const e=p.A.createFXAAStage(),t=p.A.createAmbientOcclusionStage(),n=p.A.createBloomStage();this._autoExposureEnabled=!1,this._autoExposure=p.A.createAutoExposureStage(),this._tonemapping=void 0,this._tonemapper=void 0,this.tonemapper=_.A.ACES;const i=this._tonemapping;e.enabled=!1,t.enabled=!1,n.enabled=!1,i.enabled=!1;const r=new m.A(this),s={},a=g;for(a.push(e,t,n,i);a.length>0;){const e=a.pop();s[e.name]=e,e._textureCache=r;const t=e.length;if((0,o.A)(t))for(let n=0;n<t;++n)a.push(e.get(n))}this._stages=[],this._activeStages=[],this._previousActiveStages=[],this._randomTexture=void 0;const c=this;t.uniforms.randomTexture=function(){return c._randomTexture},this._ao=t,this._bloom=n,this._fxaa=e,this._aoEnabled=void 0,this._bloomEnabled=void 0,this._tonemappingEnabled=void 0,this._fxaaEnabled=void 0,this._activeStagesChanged=!1,this._stagesRemoved=!1,this._textureCacheDirty=!1,this._stageNames=s,this._textureCache=r}function b(e){if(!e._stagesRemoved)return;e._stagesRemoved=!1;const t=[],n=e._stages,i=n.length;for(let e=0,o=0;e<i;++e){const i=n[e];i&&(i._index=o++,t.push(i))}e._stages=t}function v(e){for(;(0,o.A)(e.length);)e=e.get(e.length-1);return e.outputTexture}function T(e,t,n,i,r){if((0,o.A)(e.execute))return void e.execute(t,n,i,r);const s=e.length;let a;if(e.inputPreviousStageTexture)for(T(e.get(0),t,n,i,r),a=1;a<s;++a)T(e.get(a),t,v(e.get(a-1)),i,r);else for(a=0;a<s;++a)T(e.get(a),t,n,i,r)}Object.defineProperties(y.prototype,{ready:{get:function(){let e=!1;const t=this._stages;for(let n=t.length-1;n>=0;--n){const i=t[n];e=e||i.ready&&i.enabled}const n=this._fxaa,i=this._ao,o=this._bloom,r=this._tonemapping;return e=e||n.ready&&n.enabled,e=e||i.ready&&i.enabled,e=e||o.ready&&o.enabled,e=e||r.ready&&r.enabled,e}},fxaa:{get:function(){return this._fxaa}},ambientOcclusion:{get:function(){return this._ao}},bloom:{get:function(){return this._bloom}},length:{get:function(){return b(this),this._stages.length}},outputTexture:{get:function(){const e=this._fxaa;if(e.enabled&&e.ready)return this.getOutputTexture(e.name);const t=this._stages;for(let e=t.length-1;e>=0;--e){const n=t[e];if((0,o.A)(n)&&n.ready&&n.enabled)return this.getOutputTexture(n.name)}const n=this._tonemapping;if(n.enabled&&n.ready)return this.getOutputTexture(n.name);const i=this._bloom;if(i.enabled&&i.ready)return this.getOutputTexture(i.name);const r=this._ao;return r.enabled&&r.ready?this.getOutputTexture(r.name):void 0}},hasSelected:{get:function(){const e=this._stages.slice();for(;e.length>0;){const t=e.pop();if(!(0,o.A)(t))continue;if((0,o.A)(t.selected))return!0;const n=t.length;if((0,o.A)(n))for(let i=0;i<n;++i)e.push(t.get(i))}return!1}},tonemapper:{get:function(){return this._tonemapper},set:function(e){if(this._tonemapper===e)return;if(!_.A.validate(e))throw new s.A("tonemapper was set to an invalid value.");(0,o.A)(this._tonemapping)&&(delete this._stageNames[this._tonemapping.name],this._tonemapping.destroy());const t=this._autoExposureEnabled;let n;switch(e){case _.A.REINHARD:n=p.A.createReinhardTonemappingStage(t);break;case _.A.MODIFIED_REINHARD:n=p.A.createModifiedReinhardTonemappingStage(t);break;case _.A.FILMIC:n=p.A.createFilmicTonemappingStage(t);break;default:n=p.A.createAcesTonemappingStage(t)}if(t){const e=this._autoExposure;n.uniforms.autoExposure=function(){return e.outputTexture}}this._tonemapper=e,this._tonemapping=n,(0,o.A)(this._stageNames)&&(this._stageNames[n.name]=n,n._textureCache=this._textureCache),this._textureCacheDirty=!0}}}),y.prototype.add=function(e){i.A.typeOf.object("stage",e);const t=this._stageNames,n=g;for(n.push(e);n.length>0;){const e=n.pop();if((0,o.A)(t[e.name]))throw new s.A(`${e.name} has already been added to the collection or does not have a unique name.`);t[e.name]=e,e._textureCache=this._textureCache;const i=e.length;if((0,o.A)(i))for(let t=0;t<i;++t)n.push(e.get(t))}const r=this._stages;return e._index=r.length,r.push(e),this._textureCacheDirty=!0,e},y.prototype.remove=function(e){if(!this.contains(e))return!1;const t=this._stageNames,n=g;for(n.push(e);n.length>0;){const e=n.pop();delete t[e.name];const i=e.length;if((0,o.A)(i))for(let t=0;t<i;++t)n.push(e.get(t))}return this._stages[e._index]=void 0,this._stagesRemoved=!0,this._textureCacheDirty=!0,e._index=void 0,e._textureCache=void 0,e.destroy(),!0},y.prototype.contains=function(e){return(0,o.A)(e)&&(0,o.A)(e._index)&&e._textureCache===this._textureCache},y.prototype.get=function(e){b(this);const t=this._stages,n=t.length;return i.A.typeOf.number.greaterThanOrEquals("stages length",n,0),i.A.typeOf.number.greaterThanOrEquals("index",e,0),i.A.typeOf.number.lessThan("index",e,n),t[e]},y.prototype.removeAll=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)this.remove(e[n]);e.length=0},y.prototype.getStageByName=function(e){return this._stageNames[e]},y.prototype.update=function(e,t,n){b(this);const i=this._activeStages,r=this._activeStages=this._previousActiveStages;this._previousActiveStages=i;const s=this._stages;let f,p,m=r.length=s.length,_=0;for(f=0;f<m;++f)p=s[f],p.ready&&p.enabled&&p._isSupported(e)&&(r[_++]=p);r.length=_;let g=_!==i.length;if(!g)for(f=0;f<_;++f)if(r[f]!==i[f]){g=!0;break}const y=this._ao,v=this._bloom,T=this._autoExposure,w=this._tonemapping,E=this._fxaa;w.enabled=n;const S=y.enabled&&y._isSupported(e),C=v.enabled&&v._isSupported(e),x=w.enabled&&w._isSupported(e),I=E.enabled&&E._isSupported(e);if((g||this._textureCacheDirty||S!==this._aoEnabled||C!==this._bloomEnabled||x!==this._tonemappingEnabled||I!==this._fxaaEnabled)&&(this._textureCache.updateDependencies(),this._aoEnabled=S,this._bloomEnabled=C,this._tonemappingEnabled=x,this._fxaaEnabled=I,this._textureCacheDirty=!1),(0,o.A)(this._randomTexture)&&!S&&(this._randomTexture.destroy(),this._randomTexture=void 0),!(0,o.A)(this._randomTexture)&&S){m=196608;const t=new Uint8Array(m);for(f=0;f<m;f+=3)t[f]=Math.floor(255*Math.random());this._randomTexture=new u.A({context:e,pixelFormat:a.A.RGB,pixelDatatype:c.A.UNSIGNED_BYTE,source:{arrayBufferView:t,width:256,height:256},sampler:new l.A({wrapS:A.A.REPEAT,wrapT:A.A.REPEAT,minificationFilter:h.A.NEAREST,magnificationFilter:d.A.NEAREST})})}for(this._textureCache.update(e),E.update(e,t),y.update(e,t),v.update(e,t),w.update(e,t),this._autoExposureEnabled&&T.update(e,t),m=s.length,f=0;f<m;++f)s[f].update(e,t);for(_=0,f=0;f<m;++f)p=s[f],p.ready&&p.enabled&&p._isSupported(e)&&_++;g=_!==r.length,g&&this.update(e,t,n)},y.prototype.clear=function(e){this._textureCache.clear(e),this._autoExposureEnabled&&this._autoExposure.clear(e)},y.prototype.getOutputTexture=function(e){const t=this.getStageByName(e);if((0,o.A)(t))return v(t)},y.prototype.execute=function(e,t,n,i){const o=this._activeStages,r=o.length,s=this._fxaa,a=this._ao,c=this._bloom,l=this._autoExposure,u=this._tonemapping,d=a.enabled&&a._isSupported(e),h=c.enabled&&c._isSupported(e),A=this._autoExposureEnabled,f=u.enabled&&u._isSupported(e),p=s.enabled&&s._isSupported(e);if(!(p||d||h||f||0!==r))return;let m=t;d&&a.ready&&(T(a,e,m,n,i),m=v(a)),h&&c.ready&&(T(c,e,m,n,i),m=v(c)),A&&l.ready&&T(l,e,m,n,i),f&&u.ready&&(T(u,e,m,n,i),m=v(u));let _=m;if(r>0){T(o[0],e,m,n,i);for(let t=1;t<r;++t)T(o[t],e,v(o[t-1]),n,i);_=v(o[r-1])}p&&s.ready&&T(s,e,_,n,i)},y.prototype.copy=function(e,t){if(!(0,o.A)(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(f.A,{uniformMap:{colorTexture:function(){return t.outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._fxaa.destroy(),this._ao.destroy(),this._bloom.destroy(),this._autoExposure.destroy(),this._tonemapping.destroy(),this.removeAll(),this._textureCache=this._textureCache&&this._textureCache.destroy(),(0,r.A)(this)};const w=y},517290:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(673874),r=n(419061),s=n(491446),a=n(677354);function c(e){e=(0,r.A)(e,r.A.EMPTY_OBJECT),i.A.defined("options.stages",e.stages),i.A.typeOf.number.greaterThan("options.stages.length",e.stages.length,0),this._stages=e.stages,this._inputPreviousStageTexture=(0,r.A)(e.inputPreviousStageTexture,!0);let t=e.name;(0,s.A)(t)||(t=(0,o.A)()),this._name=t,this._uniforms=e.uniforms,this._textureCache=void 0,this._index=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0}Object.defineProperties(c.prototype,{ready:{get:function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)if(!e[n].ready)return!1;return!0}},name:{get:function(){return this._name}},enabled:{get:function(){return this._stages[0].enabled},set:function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)t[i].enabled=e}},uniforms:{get:function(){return this._uniforms}},inputPreviousStageTexture:{get:function(){return this._inputPreviousStageTexture}},length:{get:function(){return this._stages.length}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}}),c.prototype._isSupported=function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)if(!t[i]._isSupported(e))return!1;return!0},c.prototype.get=function(e){return i.A.typeOf.number.greaterThanOrEquals("index",e,0),i.A.typeOf.number.lessThan("index",e,this.length),this._stages[e]},c.prototype.update=function(e,t){this._selectedDirty=function(e){let t=(0,s.A)(e._selected)?e._selected.length:0;const n=(0,s.A)(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,s.A)(e._selected)&&(0,s.A)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,s.A)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&(0,s.A)(e._combinedSelected)){if(!(0,s.A)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,s.A)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,s.A)(this._parentSelected)?this._parentSelected.length:0;const n=this._stages,i=n.length;for(let o=0;o<i;++o){const i=n[o];this._selectedDirty&&(i.parentSelected=this._combinedSelected),i.update(e,t)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,a.A)(this)};const l=c},380590:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(303578),o=n(41476),r=n(673874),s=n(491446),a=n(610750),c=n(752925),l=n(365559),u=n(427139),d=n(844644),h=n(638943),A=n(377126),f=n(547146),p=n(934993),m=n(712957),_=n(388241),g=n(347961),y=n(780953),b=n(602142),v=n(947709),T=n(724355),w=n(573311),E=n(951834),S=n(382743),C=n(689520),x=n(355540),I=n(421549),P=n(517290),D=n(339600);const O={};function L(e){const t=`#define USE_STEP_SIZE\n${b.A}`,n=new I.A({name:`${e}_x_direction`,fragmentShader:t,uniforms:{delta:1,sigma:2,stepSize:1,direction:0},sampleMode:D.A.LINEAR}),i=new I.A({name:`${e}_y_direction`,fragmentShader:t,uniforms:{delta:1,sigma:2,stepSize:1,direction:1},sampleMode:D.A.LINEAR}),o={};return Object.defineProperties(o,{delta:{get:function(){return n.uniforms.delta},set:function(e){const t=n.uniforms,o=i.uniforms;t.delta=o.delta=e}},sigma:{get:function(){return n.uniforms.sigma},set:function(e){const t=n.uniforms,o=i.uniforms;t.sigma=o.sigma=e}},stepSize:{get:function(){return n.uniforms.stepSize},set:function(e){const t=n.uniforms,o=i.uniforms;t.stepSize=o.stepSize=e}}}),new P.A({name:e,stages:[n,i],uniforms:o})}O.createBlurStage=function(){return L("czm_blur")},O.createDepthOfFieldStage=function(){const e=L("czm_depth_of_field_blur"),t=new I.A({name:"czm_depth_of_field_composite",fragmentShader:p.A,uniforms:{focalDistance:5,blurTexture:e.name}}),n={};return Object.defineProperties(n,{focalDistance:{get:function(){return t.uniforms.focalDistance},set:function(e){t.uniforms.focalDistance=e}},delta:{get:function(){return e.uniforms.delta},set:function(t){e.uniforms.delta=t}},sigma:{get:function(){return e.uniforms.sigma},set:function(t){e.uniforms.sigma=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}}}),new P.A({name:"czm_depth_of_field",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},O.isDepthOfFieldSupported=function(e){return e.context.depthTexture},O.createEdgeDetectionStage=function(){const e=(0,r.A)();return new I.A({name:`czm_edge_detection_${e}`,fragmentShader:_.A,uniforms:{length:.25,color:o.A.clone(o.A.BLACK)}})},O.isEdgeDetectionSupported=function(e){return e.context.depthTexture},O.createSilhouetteStage=function(e){const t=function(e){if(!(0,s.A)(e))return O.createEdgeDetectionStage();const t=new P.A({name:"czm_edge_detection_multiple",stages:e,inputPreviousStageTexture:!1}),n={};let i="",o="";for(let t=0;t<e.length;++t)i+=`uniform sampler2D edgeTexture${t}; \n`,o+=`        vec4 edge${t} = texture(edgeTexture${t}, v_textureCoordinates); \n        if (edge${t}.a > 0.0) \n        { \n            color = edge${t}; \n            break; \n        } \n`,n[`edgeTexture${t}`]=e[t].name;const r=`${i}in vec2 v_textureCoordinates; \nvoid main() { \n    vec4 color = vec4(0.0); \n    for (int i = 0; i < ${e.length}; i++) \n    { \n${o}    } \n    out_FragColor = color; \n} \n`,a=new I.A({name:"czm_edge_detection_combine",fragmentShader:r,uniforms:n});return new P.A({name:"czm_edge_detection_composite",stages:[t,a]})}(e),n=new I.A({name:"czm_silhouette_color_edges",fragmentShader:S.A,uniforms:{silhouetteTexture:t.name}});return new P.A({name:"czm_silhouette",stages:[t,n],inputPreviousStageTexture:!1,uniforms:t.uniforms})},O.isSilhouetteSupported=function(e){return e.context.depthTexture},O.createBloomStage=function(){const e=new I.A({name:"czm_bloom_contrast_bias",fragmentShader:f.A,uniforms:{contrast:128,brightness:-.3}}),t=L("czm_bloom_blur"),n=new P.A({name:"czm_bloom_contrast_bias_blur",stages:[e,t]}),i=new I.A({name:"czm_bloom_generate_composite",fragmentShader:h.A,uniforms:{glowOnly:!1,bloomTexture:n.name}}),o={};return Object.defineProperties(o,{glowOnly:{get:function(){return i.uniforms.glowOnly},set:function(e){i.uniforms.glowOnly=e}},contrast:{get:function(){return e.uniforms.contrast},set:function(t){e.uniforms.contrast=t}},brightness:{get:function(){return e.uniforms.brightness},set:function(t){e.uniforms.brightness=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},stepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}}}),new P.A({name:"czm_bloom",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},O.createAmbientOcclusionStage=function(){const e=new I.A({name:"czm_ambient_occlusion_generate",fragmentShader:l.A,uniforms:{intensity:3,bias:.1,lengthCap:.26,stepSize:1.95,frustumLength:1e3,randomTexture:void 0}}),t=L("czm_ambient_occlusion_blur");t.uniforms.stepSize=.86;const n=new P.A({name:"czm_ambient_occlusion_generate_blur",stages:[e,t]}),i=new I.A({name:"czm_ambient_occlusion_composite",fragmentShader:u.A,uniforms:{ambientOcclusionOnly:!1,ambientOcclusionTexture:n.name}}),o={};return Object.defineProperties(o,{intensity:{get:function(){return e.uniforms.intensity},set:function(t){e.uniforms.intensity=t}},bias:{get:function(){return e.uniforms.bias},set:function(t){e.uniforms.bias=t}},lengthCap:{get:function(){return e.uniforms.lengthCap},set:function(t){e.uniforms.lengthCap=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}},frustumLength:{get:function(){return e.uniforms.frustumLength},set:function(t){e.uniforms.frustumLength=t}},randomTexture:{get:function(){return e.uniforms.randomTexture},set:function(t){e.uniforms.randomTexture=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},blurStepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}},ambientOcclusionOnly:{get:function(){return i.uniforms.ambientOcclusionOnly},set:function(e){i.uniforms.ambientOcclusionOnly=e}}}),new P.A({name:"czm_ambient_occlusion",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},O.isAmbientOcclusionSupported=function(e){return e.context.depthTexture};const N=`#define FXAA_QUALITY_PRESET 39 \n${C.A}\n${y.A}`;O.createFXAAStage=function(){return new I.A({name:"czm_FXAA",fragmentShader:N,sampleMode:D.A.LINEAR})},O.createAcesTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=c.A,new I.A({name:"czm_aces",fragmentShader:t,uniforms:{autoExposure:void 0}})},O.createFilmicTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=g.A,new I.A({name:"czm_filmic",fragmentShader:t,uniforms:{autoExposure:void 0}})},O.createReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=E.A,new I.A({name:"czm_reinhard",fragmentShader:t,uniforms:{autoExposure:void 0}})},O.createModifiedReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=T.A,new I.A({name:"czm_modified_reinhard",fragmentShader:t,uniforms:{white:o.A.WHITE,autoExposure:void 0}})},O.createAutoExposureStage=function(){return new x.A},O.createBlackAndWhiteStage=function(){return new I.A({name:"czm_black_and_white",fragmentShader:d.A,uniforms:{gradations:5}})},O.createBrightnessStage=function(){return new I.A({name:"czm_brightness",fragmentShader:A.A,uniforms:{brightness:.5}})},O.createNightVisionStage=function(){return new I.A({name:"czm_night_vision",fragmentShader:w.A})},O.createDepthViewStage=function(){return new I.A({name:"czm_depth_view",fragmentShader:m.A})},O.createLensFlareStage=function(){return new I.A({name:"czm_lens_flare",fragmentShader:v.A,uniforms:{dirtTexture:(0,i.A)("Assets/Textures/LensFlare/DirtMask.jpg"),starTexture:(0,i.A)("Assets/Textures/LensFlare/StarBurst.jpg"),intensity:2,distortion:10,ghostDispersal:.4,haloWidth:.4,dirtAmount:.4,earthRadius:a.A.WGS84.maximumRadius}})};const M=O},339600:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={NEAREST:0,LINEAR:1}},922990:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(41476),o=n(491446),r=n(677354),s=n(367817),a=n(769493),c=n(804701);function l(e){this._collection=e,this._framebuffers=[],this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0,this._updateDependencies=!1}function u(e){for(;(0,o.A)(e.length);)e=e.get(e.length-1);return e.name}function d(e,t,n,i,r){if(!i.enabled||!i._isSupported(t))return r;const s=n[i.name]={};(0,o.A)(r)&&(s[u(e.getStageByName(r))]=!0);const a=i.uniforms;if((0,o.A)(a)){const t=Object.getOwnPropertyNames(a),n=t.length;for(let i=0;i<n;++i){const n=a[t[i]];if("string"==typeof n){const t=e.getStageByName(n);(0,o.A)(t)&&(s[u(t)]=!0)}}}return i.name}function h(e,t,n,i,r){if((0,o.A)(i.enabled)&&!i.enabled||(0,o.A)(i._isSupported)&&!i._isSupported(t))return r;const s=r,a=!(0,o.A)(i.inputPreviousStageTexture)||i.inputPreviousStageTexture;let c=r;const l=i.length;for(let s=0;s<l;++s){const l=i.get(s);c=(0,o.A)(l.length)?h(e,t,n,l,r):d(e,t,n,l,r),a&&(r=c)}let A,f;if(a)for(A=1;A<l;++A)f=u(i.get(A)),(0,o.A)(n[f])||(n[f]={}),n[f][s]=!0;else for(A=1;A<l;++A){f=u(i.get(A));const e=n[f];for(let t=0;t<A;++t)e[u(i.get(t))]=!0}return c}function A(e,t,n){const r=e._collection.getStageByName(t),s=r._textureScale,a=r._forcePowerOfTwo,l=r._pixelFormat,u=r._pixelDatatype,d=r._clearColor;let h,A;const f=e._framebuffers,p=f.length;for(h=0;h<p;++h){if(A=f[h],s!==A.textureScale||a!==A.forcePowerOfTwo||l!==A.pixelFormat||u!==A.pixelDatatype||!i.A.equals(d,A.clearColor))continue;const e=A.stages,t=e.length;let o=!1;for(let i=0;i<t;++i)if(n[e[i]]){o=!0;break}if(!o)break}return(0,o.A)(A)&&h<p?(A.stages.push(t),A):(A={textureScale:s,forcePowerOfTwo:a,pixelFormat:l,pixelDatatype:u,clearColor:d,stages:[t],buffer:new c.A({pixelFormat:l,pixelDatatype:u}),clear:void 0},f.push(A),A)}function f(e){const t=e._framebuffers,n=t.length;for(let e=0;e<n;++e)t[e].buffer.destroy()}l.prototype.updateDependencies=function(){this._updateDependencies=!0},l.prototype.update=function(e){const t=this._collection,n=this._updateDependencies,i=(0,o.A)(t.ambientOcclusion)&&t.ambientOcclusion.enabled&&t.ambientOcclusion._isSupported(e),r=(0,o.A)(t.bloom)&&t.bloom.enabled&&t.bloom._isSupported(e),c=(0,o.A)(t._tonemapping)&&t._tonemapping.enabled&&t._tonemapping._isSupported(e),l=(0,o.A)(t.fxaa)&&t.fxaa.enabled&&t.fxaa._isSupported(e),u=!(0,o.A)(t._activeStages)||t._activeStages.length>0||i||r||c||l;if((n||!u&&this._framebuffers.length>0)&&(f(this),this._framebuffers.length=0,this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0),!n&&!u)return;0===this._framebuffers.length&&function(e,t){const n=function(e,t){const n={};if((0,o.A)(e.ambientOcclusion)){const i=e.ambientOcclusion,o=e.bloom,r=e._tonemapping,s=e.fxaa;let a=h(e,t,n,i,void 0);a=h(e,t,n,o,a),a=d(e,t,n,r,a),a=h(e,t,n,e,a),d(e,t,n,s,a)}else h(e,t,n,e,void 0);return n}(e._collection,t);for(const t in n)n.hasOwnProperty(t)&&(e._stageNameToFramebuffer[t]=A(e,t,n[t]))}(this,e);const p=e.drawingBufferWidth,m=e.drawingBufferHeight,_=this._width!==p||this._height!==m;(n||_)&&(this._width=p,this._height=m,this._updateDependencies=!1,f(this),function(e,t){const n=e._width,i=e._height,o=e._framebuffers,r=o.length;for(let e=0;e<r;++e){const r=o[e],c=r.textureScale;let l=Math.ceil(n*c),u=Math.ceil(i*c),d=Math.min(l,u);r.forcePowerOfTwo&&(s.A.isPowerOfTwo(d)||(d=s.A.nextPowerOfTwo(d)),l=d,u=d),r.buffer.update(t,l,u),r.clear=new a.A({color:r.clearColor,framebuffer:r.buffer.framebuffer})}}(this,e))},l.prototype.clear=function(e){const t=this._framebuffers;for(let n=0;n<t.length;++n)t[n].clear.execute(e)},l.prototype.getStageByName=function(e){return this._collection.getStageByName(e)},l.prototype.getOutputTexture=function(e){return this._collection.getOutputTexture(e)},l.prototype.getFramebuffer=function(e){const t=this._stageNameToFramebuffer[e];if((0,o.A)(t))return t.buffer.framebuffer},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return f(this),(0,r.A)(this)};const p=l},493721:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(673874),o=n(419061),r=n(491446),s=n(677354),a=n(605971);function c(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),this._primitives=[],this._guid=(0,i.A)(),this._zIndex=void 0,this.show=(0,o.A)(e.show,!0),this.destroyPrimitives=(0,o.A)(e.destroyPrimitives,!0)}function l(e,t){if(!e.contains(t))throw new a.A("primitive is not in this collection.");return e._primitives.indexOf(t)}Object.defineProperties(c.prototype,{length:{get:function(){return this._primitives.length}}}),c.prototype.add=function(e,t){const n=(0,r.A)(t);if(!(0,r.A)(e))throw new a.A("primitive is required.");if(n){if(t<0)throw new a.A("index must be greater than or equal to zero.");if(t>this._primitives.length)throw new a.A("index must be less than or equal to the number of primitives.")}const i=e._external=e._external||{};return(i._composites=i._composites||{})[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),e},c.prototype.remove=function(e){if(this.contains(e)){const t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},c.prototype.removeAndDestroy=function(e){const t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},c.prototype.removeAll=function(){const e=this._primitives,t=e.length;for(let n=0;n<t;++n)delete e[n]._external._composites[this._guid],this.destroyPrimitives&&e[n].destroy();this._primitives=[]},c.prototype.contains=function(e){return!!((0,r.A)(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},c.prototype.raise=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;if(t!==n.length-1){const e=n[t];n[t]=n[t+1],n[t+1]=e}}},c.prototype.raiseToTop=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}},c.prototype.lower=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;if(0!==t){const e=n[t];n[t]=n[t-1],n[t-1]=e}}},c.prototype.lowerToBottom=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;0!==t&&(n.splice(t,1),n.unshift(e))}},c.prototype.get=function(e){if(!(0,r.A)(e))throw new a.A("index is required.");return this._primitives[e]},c.prototype.update=function(e){if(!this.show)return;const t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)},c.prototype.prePassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];(0,r.A)(i.prePassesUpdate)&&i.prePassesUpdate(e)}},c.prototype.updateForPass=function(e,t){const n=this._primitives;for(let i=0;i<n.length;++i){const o=n[i];(0,r.A)(o.updateForPass)&&o.updateForPass(e,t)}},c.prototype.postPassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];(0,r.A)(i.postPassesUpdate)&&i.postPassesUpdate(e)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,s.A)(this)};const u=c},289758:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(369031),o=n(571804),r=n(491446),s=n(874915),a=n(641613),c=n(442790),l=n(730839),u=n(995537),d=n(623524);function h(e){i.A.typeOf.object("attribute",e),this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function A(e){i.A.typeOf.object("primitive",e),this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0}A.prototype.postProcess=function(e){this.needsOutlines&&(function(e){const t=e.primitive,n=t.indices,i=t.attributes[0].count,r=new d.A({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=r.updatedTriangleIndices,n.indexDatatype=s.A.fromTypedArray(n.typedArray);const a=new h(function(e){const t=new u.A.Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=o.A.FLOAT,t.type=l.A.VEC3,t.normalized=!1,t.count=e.length/3,t}(r.outlineCoordinates));a.loadBuffer=!0,a.loadTypedArray=!1,e.attributePlans.push(a),t.outlineCoordinates=a.attribute;const c=e.attributePlans,A=e.attributePlans.length;for(let e=0;e<A;e++){const t=c[e].attribute;t.typedArray=r.updateAttribute(t.typedArray)}}(this),function(e,t){(function(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i],o=n.attribute,r=o.typedArray;if(n.loadBuffer){const e=a.A.createVertexBuffer({typedArray:r,context:t,usage:c.A.STATIC_DRAW});e.vertexArrayDestroyable=!1,o.buffer=e}n.loadTypedArray||(o.typedArray=void 0)}})(e.attributePlans,t),(0,r.A)(e.indicesPlan)&&function(e,t){const n=e.indices;if(e.loadBuffer){const e=a.A.createIndexBuffer({typedArray:n.typedArray,context:t,usage:c.A.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=e,e.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}(e.indicesPlan,t)}(this,e))},A.AttributeLoadPlan=h,A.IndicesLoadPlan=function(e){i.A.typeOf.object("indices",e),this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1};const f=A},828847:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(419061),r=n(491446),s=n(663386);function a(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).propertyAttribute,n=e.class;i.A.typeOf.object("options.propertyAttribute",t),i.A.typeOf.object("options.class",n);const a={};if((0,r.A)(t.properties))for(const e in t.properties)t.properties.hasOwnProperty(e)&&(a[e]=new s.A({property:t.properties[e],classProperty:n.properties[e]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.getProperty=function(e){return i.A.typeOf.string("propertyId",e),this._properties[e]};const c=a},663386:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(419061),r=n(491446);function s(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).property,n=e.classProperty;i.A.typeOf.object("options.property",t),i.A.typeOf.object("options.classProperty",n),this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let s=t.offset,a=t.scale;const c=n.hasValueTransform||(0,r.A)(s)||(0,r.A)(a);s=(0,o.A)(s,n.offset),a=(0,o.A)(a,n.scale),s=n.unpackVectorAndMatrixTypes(s),a=n.unpackVectorAndMatrixTypes(a),this._offset=s,this._scale=a,this._hasValueTransform=c,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(s.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const a=s},287659:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(605971),s=n(491446),a=n(784749);function c(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),i.A.typeOf.number("options.count",e.count),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(c.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if((0,s.A)(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return(0,s.A)(this._metadataTable)&&(e+=this._metadataTable.byteLength),(0,s.A)(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}}),c.prototype.hasProperty=function(e,t){return i.A.typeOf.number("index",e),i.A.typeOf.string("propertyId",t),!(!(0,s.A)(this._metadataTable)||!this._metadataTable.hasProperty(t))||!(!(0,s.A)(this._batchTableHierarchy)||!this._batchTableHierarchy.hasProperty(e,t))||!(!(0,s.A)(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(t))},c.prototype.hasPropertyBySemantic=function(e,t){return i.A.typeOf.number("index",e),i.A.typeOf.string("semantic",t),!!(0,s.A)(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(t)},c.prototype.propertyExists=function(e){return i.A.typeOf.string("propertyId",e),!(!(0,s.A)(this._metadataTable)||!this._metadataTable.hasProperty(e))||!(!(0,s.A)(this._batchTableHierarchy)||!this._batchTableHierarchy.propertyExists(e))||!(!(0,s.A)(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(e))},c.prototype.propertyExistsBySemantic=function(e){return i.A.typeOf.string("semantic",e),!!(0,s.A)(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(e)};const l=[];function u(e,t){if(!(0,s.A)(e)||e<0||e>=t)throw new r.A(`featureId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}c.prototype.getPropertyIds=function(e,t){return(t=(0,s.A)(t)?t:[]).length=0,(0,s.A)(this._metadataTable)&&t.push.apply(t,this._metadataTable.getPropertyIds(l)),(0,s.A)(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,l)),(0,s.A)(this._jsonMetadataTable)&&t.push.apply(t,this._jsonMetadataTable.getPropertyIds(l)),t},c.prototype.getProperty=function(e,t){let n;return(0,s.A)(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),(0,s.A)(n))||(0,s.A)(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),(0,s.A)(n))||(0,s.A)(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),(0,s.A)(n))?n:void 0},c.prototype.setProperty=function(e,t,n){(0,s.A)(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||(0,s.A)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||((0,s.A)(this._jsonMetadataTable)||(this._jsonMetadataTable=new a.A({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))},c.prototype.getPropertyBySemantic=function(e,t){if((0,s.A)(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)},c.prototype.setPropertyBySemantic=function(e,t,n){return!!(0,s.A)(this._metadataTable)&&this._metadataTable.setPropertyBySemantic(e,t,n)},c.prototype.getPropertyTypedArray=function(e){if(i.A.typeOf.string("propertyId",e),(0,s.A)(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)},c.prototype.getPropertyTypedArrayBySemantic=function(e){if(i.A.typeOf.string("semantic",e),(0,s.A)(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)},c.prototype.isClass=function(e,t){u(e,this.count),i.A.typeOf.string("className",t);const n=this._batchTableHierarchy;return!!(0,s.A)(n)&&n.isClass(e,t)},c.prototype.isExactClass=function(e,t){return u(e,this.count),i.A.typeOf.string("className",t),this.getExactClassName(e)===t},c.prototype.getExactClassName=function(e){u(e,this.count);const t=this._batchTableHierarchy;if((0,s.A)(t))return t.getClassName(e)};const d=c},105792:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(419061),r=n(491446),s=n(875037);function a(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).propertyTexture,n=e.class,a=e.textures;i.A.typeOf.object("options.propertyTexture",t),i.A.typeOf.object("options.class",n),i.A.typeOf.object("options.textures",a);const c=t.extensions,l=t.extras,u={};if((0,r.A)(t.properties))for(const e in t.properties)t.properties.hasOwnProperty(e)&&(u[e]=new s.A({property:t.properties[e],classProperty:n.properties[e],textures:a}));this._name=e.name,this._id=e.id,this._class=n,this._properties=u,this._extras=l,this._extensions=c}Object.defineProperties(a.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.getProperty=function(e){return i.A.typeOf.string("propertyId",e),this._properties[e]};const c=a},875037:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(419061),r=n(491446),s=n(782556),a=n(374607),c=n(568748);function l(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).property,n=e.classProperty,a=e.textures;i.A.typeOf.object("options.property",t),i.A.typeOf.object("options.classProperty",n),i.A.typeOf.object("options.textures",a);const c=(0,r.A)(t.channels)?t.channels:[0],l=t,u=s.A.createModelTextureReader({textureInfo:l,channels:h(c),texture:a[l.index]});this._min=t.min,this._max=t.max;let d=t.offset,A=t.scale;const f=n.hasValueTransform||(0,r.A)(d)||(0,r.A)(A);d=(0,o.A)(d,n.offset),A=(0,o.A)(A,n.scale),d=n.unpackVectorAndMatrixTypes(d),A=n.unpackVectorAndMatrixTypes(A),this._offset=d,this._scale=A,this._hasValueTransform=f,this._textureReader=u,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(l.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),l.prototype.isGpuCompatible=function(){const e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?!e.isVariableLengthArray&&e.arrayLength<=4&&t===a.A.SCALAR&&n===c.A.UINT8:!(!a.A.isVectorType(t)&&t!==a.A.SCALAR)&&n===c.A.UINT8};const u=[void 0,"float","vec2","vec3","vec4"],d=[void 0,"int","ivec2","ivec3","ivec4"];function h(e){return e.map((function(e){return"rgba".charAt(e)})).join("")}l.prototype.getGlslType=function(){const e=this._classProperty;let t=a.A.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?u[t]:d[t]},l.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};const A=l},1229:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(267980),o=n(199528);function r(e){this._ellipsoid=new o.A(e.ellipsoid,i.A.ZERO)}Object.defineProperties(r.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const s=r},798732:(e,t,n)=>{"use strict";n.d(t,{A:()=>z});var i=n(267980),o=n(336946),r=n(419061),s=n(491446),a=n(605971),c=n(955943),l=n(230259),u=n(367817),d=n(584164),h=n(811203),A=n(65891),f=n(766067),p=n(697422),m=n(566123),_=n(1229),g=n(67521),y=n(980840),b=n(62467),v=n(271101),T=n(960847);function w(e){if(!(0,s.A)(e)||!(0,s.A)(e.tileProvider))throw new a.A("options.tileProvider is required.");if((0,s.A)(e.tileProvider.quadtree))throw new a.A("A QuadtreeTileProvider can only be used with a single QuadtreePrimitive");this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};const t=this._tileProvider.tilingScheme.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new v.A,this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=(0,r.A)(e.maximumScreenSpaceError,2),this.tileCacheSize=(0,r.A)(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new _.A({ellipsoid:t}),this._tileLoadProgressEvent=new c.A,this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function E(e){const t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}let S;Object.defineProperties(w.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),w.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},w.prototype.forEachLoadedTile=function(e){let t=this._tileReplacementQueue.head;for(;(0,s.A)(t);)t.state!==y.A.START&&e(t),t=t.replacementNext},w.prototype.forEachRenderedTile=function(e){const t=this._tilesToRender;for(let n=0,i=t.length;n<i;++n)e(t[n])},w.prototype.updateHeight=function(e,t){const n=this,i={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){const e=n._addHeightCallbacks,t=e.length;for(let n=0;n<t;++n)if(e[n]===i){e.splice(n,1);break}n._removeHeightCallbacks.push(i),i.callback&&(i.callback=void 0)}};return n._addHeightCallbacks.push(i),i.removeFunc},w.prototype.update=function(e){(0,s.A)(this._tileProvider.update)&&this._tileProvider.update(e)},w.prototype.beginFrame=function(e){e.passes.render&&(this._tilesInvalidated&&(function(e){const t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,E(e);const n=e._levelZeroTiles;if((0,s.A)(n))for(let t=0;t<n.length;++t){const i=n[t].customData,o=i.length;for(let t=0;t<o;++t){const n=i[t];n.level=0,e._addHeightCallbacks.push(n)}n[t].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),E(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},w.prototype.render=function(e){const t=e.passes,n=this._tileProvider;t.render&&(n.beginUpdate(e),function(e,t){const n=e._debug;if(n.suspendLodUpdate)return;let i;e._tilesToRender.length=0;const o=e._tileProvider;if(!(0,s.A)(e._levelZeroTiles)){if(!o.ready)return;{const t=o.tilingScheme;e._levelZeroTiles=g.A.createLevelZeroTiles(t);const n=e._levelZeroTiles.length;if(P.length<n)for(P=new Array(n),i=0;i<n;++i)void 0===P[i]&&(P[i]=new O)}}let r;e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;const a=e._levelZeroTiles,c=a.length>1?e._occluders:void 0;S=t.camera.positionCartographic,a.sort(x);const l=e._addHeightCallbacks,u=e._removeHeightCallbacks,h=t.frameNumber;let A;if(l.length>0||u.length>0){for(i=0,A=a.length;i<A;++i)r=a[i],r._updateCustomData(h,l,u);l.length=0,u.length=0}const f=t.camera;e._cameraPositionCartographic=f.positionCartographic;const p=d.A.getTranslation(f.transform,I);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(p,e._cameraReferenceFrameOriginCartographic),i=0,A=a.length;i<A;++i)r=a[i],e._tileReplacementQueue.markTileRendered(r),r.renderable?M(e,r,o,t,c,!1,P[i]):(D(e,e._tileLoadQueueHigh,r,t),++n.tilesWaitingForChildren);e._lastSelectionFrameNumber=h}(this,e),function(e,t){const n=e._tileProvider,i=e._tilesToRender;for(let e=0,o=i.length;e<o;++e){const o=i[e];n.showTileThisFrame(o,t)}}(this,e),n.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&n.updateForPick(e)},w.prototype.endFrame=function(e){e.passes.render&&e.mode!==b.A.MORPHING&&(function(e,t){const n=e._tileLoadQueueHigh,i=e._tileLoadQueueMedium,o=e._tileLoadQueueLow;if(0===n.length&&0===i.length&&0===o.length)return;e._tileReplacementQueue.trimTiles(e.tileCacheSize);const r=(0,l.A)()+e._loadQueueTimeSlice,s=e._tileProvider;let a=B(e,t,s,r,n,!1);a=B(e,t,s,r,i,a),B(e,t,s,r,o,a)}(this,e),function(e,t){if(!e.tileProvider.ready)return;const n=H;n.length=0;const r=e._tileToUpdateHeights,a=(0,l.A)()+e._updateHeightsTimeSlice,c=t.mode,u=t.mapProjection,d=e.tileProvider.tilingScheme.ellipsoid;let h;for(;r.length>0;){const t=r[0];if(!(0,s.A)(t.data)||!(0,s.A)(t.data.mesh)){const i=t._lastSelectionResultFrame===e._lastSelectionFrameNumber?t._lastSelectionResult:T.A.NONE;i!==T.A.RENDERED&&i!==T.A.CULLED_BUT_NEEDED||n.push(t),r.shift(),e._lastTileIndex=0;continue}const A=t.customData,f=A.length;let p=!1;for(h=e._lastTileIndex;h<f;++h){const e=A[h],n=t.data.terrainData,r=(0,s.A)(n)&&n.wasCreatedByUpsampling();if(t.level>e.level&&!r){if((0,s.A)(e.positionOnEllipsoidSurface)||(e.positionOnEllipsoidSurface=i.A.fromRadians(e.positionCartographic.longitude,e.positionCartographic.latitude,0,d)),c===b.A.SCENE3D){const n=d.geodeticSurfaceNormal(e.positionOnEllipsoidSurface,U.direction),o=d.getSurfaceNormalIntersectionWithZAxis(e.positionOnEllipsoidSurface,11500,U.origin);if(!(0,s.A)(o)){let o=0;(0,s.A)(t.data.tileBoundingRegion)&&(o=t.data.tileBoundingRegion.minimumHeight);const r=Math.min(o,-11500),a=i.A.multiplyByScalar(n,Math.abs(r)+1,V);i.A.subtract(e.positionOnEllipsoidSurface,a,U.origin)}}else o.A.clone(e.positionCartographic,k),k.height=-11500,u.project(k,V),i.A.fromElements(V.z,V.x,V.y,V),i.A.clone(V,U.origin),i.A.clone(i.A.UNIT_X,U.direction);const n=t.data.pick(U,c,u,!1,V);(0,s.A)(n)&&((0,s.A)(e.callback)&&e.callback(n),e.level=t.level)}if((0,l.A)()>=a){p=!0;break}}if(p){e._lastTileIndex=h;break}e._lastTileIndex=0,r.shift()}for(h=0;h<n.length;h++)r.push(n[h])}(this,e),function(e,t){const n=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;if(n!==e._lastTileLoadQueueLength||e._tilesInvalidated){const i=c.A.prototype.raiseEvent.bind(e._tileLoadProgressEvent,n);t.afterRender.push((()=>(i(),!0))),e._lastTileLoadQueueLength=n}const i=e._debug;i.enableDebugOutput&&!i.suspendLodUpdate&&(i.maxDepth=e._tilesToRender.reduce((function(e,t){return Math.max(e,t.level)}),-1),i.tilesRendered=e._tilesToRender.length,i.tilesVisited===i.lastTilesVisited&&i.tilesRendered===i.lastTilesRendered&&i.tilesCulled===i.lastTilesCulled&&i.maxDepth===i.lastMaxDepth&&i.tilesWaitingForChildren===i.lastTilesWaitingForChildren&&i.maxDepthVisited===i.lastMaxDepthVisited||(console.log(`Visited ${i.tilesVisited}, Rendered: ${i.tilesRendered}, Culled: ${i.tilesCulled}, Max Depth Rendered: ${i.maxDepth}, Max Depth Visited: ${i.maxDepthVisited}, Waiting for children: ${i.tilesWaitingForChildren}`),i.lastTilesVisited=i.tilesVisited,i.lastTilesRendered=i.tilesRendered,i.lastTilesCulled=i.tilesCulled,i.lastMaxDepth=i.maxDepth,i.lastTilesWaitingForChildren=i.tilesWaitingForChildren,i.lastMaxDepthVisited=i.maxDepthVisited))}(this,e))},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};const C=new o.A;function x(e,t){let n=p.A.center(e.rectangle,C);const i=n.longitude-S.longitude,o=n.latitude-S.latitude;n=p.A.center(t.rectangle,C);const r=n.longitude-S.longitude,s=n.latitude-S.latitude;return i*i+o*o-(r*r+s*s)}const I=new i.A;let P=[];function D(e,t,n,i){n.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(n._loadPriority=e.tileProvider.computeTileLoadPriority(n,i)),t.push(n))}function O(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function L(){this.southwest=new O,this.southeast=new O,this.northwest=new O,this.northeast=new O}L.prototype.combine=function(e){const t=this.southwest,n=this.southeast,i=this.northwest,o=this.northeast;e.allAreRenderable=t.allAreRenderable&&n.allAreRenderable&&i.allAreRenderable&&o.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||n.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||o.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+n.notYetRenderableCount+i.notYetRenderableCount+o.notYetRenderableCount};const N=new Array(31);for(let e=0;e<N.length;++e)N[e]=new L;function M(e,t,n,i,o,r,a){if(n.computeTileVisibility(t,i,o)!==m.A.NONE)return function(e,t,n,i,o){const r=e._debug;++r.tilesVisited,e._tileReplacementQueue.markTileRendered(n),n._updateCustomData(t.frameNumber),n.level>r.maxDepthVisited&&(r.maxDepthVisited=n.level);const a=function(e,t,n){if(t.mode===b.A.SCENE2D||t.camera.frustum instanceof h.A||t.camera.frustum instanceof A.A)return function(e,t,n){let i=t.camera.frustum;const o=i.offCenterFrustum;(0,s.A)(o)&&(i=o);const r=t.context,a=r.drawingBufferWidth,c=r.drawingBufferHeight;let l=e._tileProvider.getLevelMaximumGeometricError(n.level)/(Math.max(i.top-i.bottom,i.right-i.left)/Math.max(a,c));return t.fog.enabled&&t.mode!==b.A.SCENE2D&&(l-=u.A.fog(n._distance,t.fog.density)*t.fog.sse),l/=t.pixelRatio,l}(e,t,n);const i=e._tileProvider.getLevelMaximumGeometricError(n.level),o=n._distance;let r=i*t.context.drawingBufferHeight/(o*t.camera.frustum.sseDenominator);return t.fog.enabled&&(r-=u.A.fog(o,t.fog.density)*t.fog.sse),r/=t.pixelRatio,r}(e,t,n)<e.maximumScreenSpaceError,c=n.southwestChild,l=n.southeastChild,d=n.northwestChild,f=n.northeastChild,p=e._lastSelectionFrameNumber,m=n._lastSelectionResultFrame===p?n._lastSelectionResult:T.A.NONE,_=e.tileProvider;if(a||i){const r=T.A.originalResult(m)===T.A.RENDERED,c=T.A.originalResult(m)===T.A.CULLED||m===T.A.NONE,l=n.state===y.A.DONE;let u=r||c||l;if(u||(0,s.A)(_.canRenderWithoutLosingDetail)&&(u=_.canRenderWithoutLosingDetail(n)),u)return a&&D(e,e._tileLoadQueueMedium,n,t),R(e,n),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=m===T.A.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=T.A.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));i=!0,a&&D(e,e._tileLoadQueueHigh,n,t)}if(_.canRefine(n)){if(c.upsampledFromParent&&l.upsampledFromParent&&d.upsampledFromParent&&f.upsampledFromParent)return R(e,n),D(e,e._tileLoadQueueMedium,n,t),e._tileReplacementQueue.markTileRendered(c),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(d),e._tileReplacementQueue.markTileRendered(f),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=m===T.A.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=T.A.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=T.A.REFINED;const s=e._tilesToRender.length,a=e._tileLoadQueueLow.length,u=e._tileLoadQueueMedium.length,h=e._tileLoadQueueHigh.length,A=e._tileToUpdateHeights.length;if(function(e,t,n,i,o,r,s,a){const c=r.camera.positionCartographic,l=e._tileProvider,u=e._occluders,d=N[t.level],h=d.southwest,A=d.southeast,f=d.northwest,p=d.northeast;c.longitude<t.rectangle.east?c.latitude<t.rectangle.north?(M(e,t,l,r,u,s,h),M(e,n,l,r,u,s,A),M(e,i,l,r,u,s,f),M(e,o,l,r,u,s,p)):(M(e,i,l,r,u,s,f),M(e,t,l,r,u,s,h),M(e,o,l,r,u,s,p),M(e,n,l,r,u,s,A)):c.latitude<t.rectangle.north?(M(e,n,l,r,u,s,A),M(e,t,l,r,u,s,h),M(e,o,l,r,u,s,p),M(e,i,l,r,u,s,f)):(M(e,o,l,r,u,s,p),M(e,i,l,r,u,s,f),M(e,n,l,r,u,s,A),M(e,t,l,r,u,s,h)),d.combine(a)}(e,c,l,d,f,t,i,o),s!==e._tilesToRender.length){const i=o.allAreRenderable,c=o.anyWereRenderedLastFrame,l=o.notYetRenderableCount;let d=!1;if(!i&&!c){const i=e._tilesToRender;for(let e=s;e<i.length;++e){let t=i[e];for(;void 0!==t&&t._lastSelectionResult!==T.A.KICKED&&t!==n;)t._lastSelectionResult=T.A.kick(t._lastSelectionResult),t=t.parent}e._tilesToRender.length=s,e._tileToUpdateHeights.length=A,R(e,n),n._lastSelectionResult=T.A.RENDERED;const c=m===T.A.RENDERED;!c&&l>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=a,e._tileLoadQueueMedium.length=u,e._tileLoadQueueHigh.length=h,D(e,e._tileLoadQueueMedium,n,t),o.notYetRenderableCount=n.renderable?0:1,d=!0),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=c,c||e._tileToUpdateHeights.push(n),++r.tilesWaitingForChildren}e.preloadAncestors&&!d&&D(e,e._tileLoadQueueLow,n,t)}}else n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=T.A.RENDERED,R(e,n),D(e,e._tileLoadQueueHigh,n,t),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=m===T.A.RENDERED,o.notYetRenderableCount=n.renderable?0:1}(e,i,t,r,a);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),a.allAreRenderable=!0,a.anyWereRenderedLastFrame=!1,a.notYetRenderableCount=0,function(e,t){const n=t.rectangle;return(0,s.A)(e._cameraPositionCartographic)&&p.A.contains(n,e._cameraPositionCartographic)||(0,s.A)(e._cameraReferenceFrameOriginCartographic)&&p.A.contains(n,e._cameraReferenceFrameOriginCartographic)}(e,t)){(0,s.A)(t.data)&&(0,s.A)(t.data.vertexArray)||D(e,e._tileLoadQueueMedium,t,i);const n=e._lastSelectionFrameNumber,o=t._lastSelectionResultFrame===n?t._lastSelectionResult:T.A.NONE;o!==T.A.CULLED_BUT_NEEDED&&o!==T.A.RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=T.A.CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(D(e,e._tileLoadQueueLow,t,i),t._lastSelectionResult=T.A.CULLED):t._lastSelectionResult=T.A.CULLED;t._lastSelectionResultFrame=i.frameNumber}function R(e,t){e._tilesToRender.push(t)}function F(e,t){return e._loadPriority-t._loadPriority}function B(e,t,n,i,o,r){void 0!==n.computeTileLoadPriority&&o.sort(F);for(let s=0,a=o.length;s<a&&((0,l.A)()<i||!r);++s){const i=o[s];e._tileReplacementQueue.markTileRendered(i),n.loadTile(t,i),r=!0}return r}const U=new f.A,k=new o.A,V=new i.A,H=[],z=w},67521:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(697422),s=n(980840),a=n(960847);function c(e){if(!(0,i.A)(e))throw new o.A("options is required.");if(!(0,i.A)(e.x))throw new o.A("options.x is required.");if(!(0,i.A)(e.y))throw new o.A("options.y is required.");if(e.x<0||e.y<0)throw new o.A("options.x and options.y must be greater than or equal to zero.");if(!(0,i.A)(e.level))throw new o.A("options.level is required and must be greater than or equal to zero.");if(!(0,i.A)(e.tilingScheme))throw new o.A("options.tilingScheme is required.");this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=a.A.NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this.state=s.A.START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function l(e){(0,i.A)(e)&&e.freeResources()}c.createLevelZeroTiles=function(e){if(!(0,i.A)(e))throw new o.A("tilingScheme is required.");const t=e.getNumberOfXTilesAtLevel(0),n=e.getNumberOfYTilesAtLevel(0),r=new Array(t*n);let s=0;for(let i=0;i<n;++i)for(let n=0;n<t;++n)r[s++]=new c({tilingScheme:e,x:n,y:i,level:0});return r},c.prototype._updateCustomData=function(e,t,n){let o,s,a,c=this.customData;if((0,i.A)(t)&&(0,i.A)(n)){for(c=c.filter((function(e){return-1===n.indexOf(e)})),this._customData=c,a=this._rectangle,o=0;o<t.length;++o)s=t[o],r.A.contains(a,s.positionCartographic)&&c.push(s);this._frameUpdated=e}else{const e=this._parent;if((0,i.A)(e)&&this._frameUpdated!==e._frameUpdated){c.length=0,a=this._rectangle;const t=e.customData;for(o=0;o<t.length;++o)s=t[o],r.A.contains(a,s.positionCartographic)&&c.push(s);this._frameUpdated=e._frameUpdated}}},Object.defineProperties(c.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return(0,i.A)(this._southwestChild)||(this._southwestChild=new c({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return(0,i.A)(this._southeastChild)||(this._southeastChild=new c({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return(0,i.A)(this._northwestChild)||(this._northwestChild=new c({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return(0,i.A)(this._northeastChild)||(this._northeastChild=new c({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<s.A.DONE}},eligibleForUnloading:{get:function(){let e=!0;return(0,i.A)(this.data)&&(e=this.data.eligibleForUnloading,(0,i.A)(e)||(e=!0)),e}}}),c.prototype.findLevelZeroTile=function(e,t,n){const i=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=i:t>=i&&(t-=i),!(n<0||n>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter((function(e){return e.x===t&&e.y===n}))[0]},c.prototype.findTileToWest=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;const n=t.findTileToWest(e);return void 0!==n?t.southwestChild===this?n.southeastChild:n.northeastChild:void 0},c.prototype.findTileToEast=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;const n=t.findTileToEast(e);return void 0!==n?t.southeastChild===this?n.southwestChild:n.northwestChild:void 0},c.prototype.findTileToSouth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;const n=t.findTileToSouth(e);return void 0!==n?t.southwestChild===this?n.northwestChild:n.northeastChild:void 0},c.prototype.findTileToNorth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;const n=t.findTileToNorth(e);return void 0!==n?t.northwestChild===this?n.southwestChild:n.southeastChild:void 0},c.prototype.freeResources=function(){this.state=s.A.START,this.renderable=!1,this.upsampledFromParent=!1,(0,i.A)(this.data)&&(0,i.A)(this.data.freeResources)&&this.data.freeResources(),l(this._southwestChild),this._southwestChild=void 0,l(this._southeastChild),this._southeastChild=void 0,l(this._northwestChild),this._northwestChild=void 0,l(this._northeastChild),this._northeastChild=void 0};const u=c},980840:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({START:0,LOADING:1,DONE:2,FAILED:3})},872182:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(452663),c=n(386920),l=n(201783),u=n(395989),d=n(385618),h=n(560710),A=n(952575),f=n(946240),p=n(729295),m=n(147795),_=n(366165);function g(){}function y(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}g.cacheEntries={},g.statistics=new _.A,g.get=function(e){i.A.typeOf.string("cacheKey",e);const t=g.cacheEntries[e];if((0,r.A)(t))return++t.referenceCount,t.resourceLoader},g.add=function(e){i.A.typeOf.object("resourceLoader",e);const t=e.cacheKey;if(i.A.typeOf.string("options.resourceLoader.cacheKey",t),(0,r.A)(g.cacheEntries[t]))throw new s.A(`Resource with this cacheKey is already in the cache: ${t}`);return g.cacheEntries[t]=new y(e),e},g.unload=function(e){i.A.typeOf.object("resourceLoader",e);const t=e.cacheKey,n=g.cacheEntries[t];if(!(0,r.A)(n))throw new s.A(`Resource is not in the cache: ${t}`);--n.referenceCount,0===n.referenceCount&&(g.statistics.removeLoader(e),e.destroy(),delete g.cacheEntries[t])},g.getSchemaLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).schema,n=e.resource;if((0,r.A)(t)===(0,r.A)(n))throw new s.A("One of options.schema and options.resource must be defined.");const i=m.A.getSchemaCacheKey({schema:t,resource:n});let a=g.get(i);return(0,r.A)(a)?a:(a=new p.A({schema:t,resource:n,cacheKey:i}),g.add(a))},g.getEmbeddedBufferLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).parentResource,n=e.bufferId,s=e.typedArray;i.A.typeOf.object("options.parentResource",t),i.A.typeOf.number("options.bufferId",n);const c=m.A.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n});let l=g.get(c);return(0,r.A)(l)?l:(i.A.typeOf.object("options.typedArray",s),l=new a.A({typedArray:s,cacheKey:c}),g.add(l))},g.getExternalBufferLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resource;i.A.typeOf.object("options.resource",t);const n=m.A.getExternalBufferCacheKey({resource:t});let s=g.get(n);return(0,r.A)(s)?s:(s=new a.A({resource:t,cacheKey:n}),g.add(s))},g.getGltfJsonLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltfResource,n=e.baseResource,s=e.typedArray,a=e.gltfJson;i.A.typeOf.object("options.gltfResource",t),i.A.typeOf.object("options.baseResource",n);const c=m.A.getGltfCacheKey({gltfResource:t});let l=g.get(c);return(0,r.A)(l)?l:(l=new h.A({resourceCache:g,gltfResource:t,baseResource:n,typedArray:s,gltfJson:a,cacheKey:c}),g.add(l))},g.getBufferViewLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.bufferViewId,s=e.gltfResource,a=e.baseResource;i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.bufferViewId",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a);const l=m.A.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:s,baseResource:a});let u=g.get(l);return(0,r.A)(u)?u:(u=new c.A({resourceCache:g,gltf:t,bufferViewId:n,gltfResource:s,baseResource:a,cacheKey:l}),g.add(u))},g.getDracoLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.draco,s=e.gltfResource,a=e.baseResource;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.draco",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a);const c=m.A.getDracoCacheKey({gltf:t,draco:n,gltfResource:s,baseResource:a});let u=g.get(c);return(0,r.A)(u)?u:(u=new l.A({resourceCache:g,gltf:t,draco:n,gltfResource:s,baseResource:a,cacheKey:c}),g.add(u))},g.getVertexBufferLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.gltfResource,a=e.baseResource,c=e.frameState,l=e.bufferViewId,u=e.draco,d=e.attributeSemantic,h=e.accessorId,A=(0,o.A)(e.asynchronous,!0),p=(0,o.A)(e.dequantize,!1),_=(0,o.A)(e.loadBuffer,!1),y=(0,o.A)(e.loadTypedArray,!1);if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.gltfResource",n),i.A.typeOf.object("options.baseResource",a),i.A.typeOf.object("options.frameState",c),!_&&!y)throw new s.A("At least one of loadBuffer and loadTypedArray must be true.");const b=(0,r.A)(l),v=function(e,t){return(0,r.A)(e)&&(0,r.A)(e.attributes)&&(0,r.A)(e.attributes[t])}(u,d),T=(0,r.A)(d),w=(0,r.A)(h);if(b===v)throw new s.A("One of options.bufferViewId and options.draco must be defined.");if(v&&!T)throw new s.A("When options.draco is defined options.attributeSemantic must also be defined.");if(v&&!w)throw new s.A("When options.draco is defined options.haAccessorId must also be defined.");v&&(i.A.typeOf.object("options.draco",u),i.A.typeOf.string("options.attributeSemantic",d),i.A.typeOf.number("options.accessorId",h));const E=m.A.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:a,frameState:c,bufferViewId:l,draco:u,attributeSemantic:d,dequantize:p,loadBuffer:_,loadTypedArray:y});let S=g.get(E);return(0,r.A)(S)?S:(S=new f.A({resourceCache:g,gltf:t,gltfResource:n,baseResource:a,bufferViewId:l,draco:u,attributeSemantic:d,accessorId:h,cacheKey:E,asynchronous:A,dequantize:p,loadBuffer:_,loadTypedArray:y}),g.add(S))},g.getIndexBufferLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.accessorId,a=e.gltfResource,c=e.baseResource,l=e.frameState,u=e.draco,h=(0,o.A)(e.asynchronous,!0),A=(0,o.A)(e.loadBuffer,!1),f=(0,o.A)(e.loadTypedArray,!1);if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.accessorId",n),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",c),i.A.typeOf.object("options.frameState",l),!A&&!f)throw new s.A("At least one of loadBuffer and loadTypedArray must be true.");const p=m.A.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:a,baseResource:c,frameState:l,draco:u,loadBuffer:A,loadTypedArray:f});let _=g.get(p);return(0,r.A)(_)?_:(_=new d.A({resourceCache:g,gltf:t,accessorId:n,gltfResource:a,baseResource:c,draco:u,cacheKey:p,asynchronous:h,loadBuffer:A,loadTypedArray:f}),g.add(_))},g.getImageLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.imageId,s=e.gltfResource,a=e.baseResource;i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.imageId",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a);const c=m.A.getImageCacheKey({gltf:t,imageId:n,gltfResource:s,baseResource:a});let l=g.get(c);return(0,r.A)(l)?l:(l=new u.A({resourceCache:g,gltf:t,imageId:n,gltfResource:s,baseResource:a,cacheKey:c}),g.add(l))},g.getTextureLoader=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.textureInfo,s=e.gltfResource,a=e.baseResource,c=e.supportedImageFormats,l=e.frameState,u=(0,o.A)(e.asynchronous,!0);i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.textureInfo",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",a),i.A.typeOf.object("options.supportedImageFormats",c),i.A.typeOf.object("options.frameState",l);const d=m.A.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:s,baseResource:a,supportedImageFormats:c,frameState:l});let h=g.get(d);return(0,r.A)(h)?h:(h=new A.A({resourceCache:g,gltf:t,textureInfo:n,gltfResource:s,baseResource:a,supportedImageFormats:c,cacheKey:d,asynchronous:u}),g.add(h))},g.clearForSpecs=function(){const e=[f.A,d.A,l.A,A.A,u.A,c.A,a.A,p.A,h.A];let t;const n=g.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort((function(t,n){return e.indexOf(t.resourceLoader.constructor)-e.indexOf(n.resourceLoader.constructor)}));const o=i.length;for(let e=0;e<o;++e){const o=i[e];t=o.resourceLoader.cacheKey,(0,r.A)(n[t])&&(o.resourceLoader.destroy(),delete n[t])}g.statistics.clear()};const b=g},147795:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(712066),c=n(782556),l=n(800859);const u={};function d(e){return(0,a.A)(e.url)}function h(e){let t=e.byteOffset,n=e.byteLength;if((0,l.A)(e,"EXT_meshopt_compression")){const i=e.extensions.EXT_meshopt_compression;t=(0,o.A)(i.byteOffset,0),n=i.byteLength}return`${t}-${t+n}`}function A(e){return d(e)}function f(e,t){return`${d(e)}-buffer-id-${t}`}function p(e,t,n,i){return(0,r.A)(e.uri)?A(i.getDerivedResource({url:e.uri})):f(n,t)}function m(e,t,n,i){const o=t.bufferView,r=e.bufferViews[o],s=r.buffer;return`${p(e.buffers[s],s,n,i)}-range-${h(r)}`}function _(e,t,n,i){const o=e.images[t],s=o.bufferView,a=o.uri;if((0,r.A)(a))return d(i.getDerivedResource({url:a}));const c=e.bufferViews[s],l=c.buffer;return`${p(e.buffers[l],l,n,i)}-range-${h(c)}`}u.getSchemaCacheKey=function(e){const t=e.schema,n=e.resource;if((0,r.A)(t)===(0,r.A)(n))throw new s.A("One of options.schema and options.resource must be defined.");return(0,r.A)(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${d(n)}`},u.getExternalBufferCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).resource;return i.A.typeOf.object("options.resource",t),`external-buffer:${A(t)}`},u.getEmbeddedBufferCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).parentResource,n=e.bufferId;return i.A.typeOf.object("options.parentResource",t),i.A.typeOf.number("options.bufferId",n),`embedded-buffer:${f(t,n)}`},u.getGltfCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltfResource;return i.A.typeOf.object("options.gltfResource",t),`gltf:${d(t)}`},u.getBufferViewCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.bufferViewId,r=e.gltfResource,s=e.baseResource;i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.bufferViewId",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",s);const a=t.bufferViews[n];let c=a.buffer;const u=t.buffers[c];return(0,l.A)(a,"EXT_meshopt_compression")&&(c=a.extensions.EXT_meshopt_compression.buffer),`buffer-view:${p(u,c,r,s)}-range-${h(a)}`},u.getDracoCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.draco,r=e.gltfResource,s=e.baseResource;return i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.draco",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",s),`draco:${m(t,n,r,s)}`},u.getVertexBufferCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.gltfResource,a=e.baseResource,c=e.frameState,l=e.bufferViewId,u=e.draco,d=e.attributeSemantic,A=(0,o.A)(e.dequantize,!1),f=(0,o.A)(e.loadBuffer,!1),_=(0,o.A)(e.loadTypedArray,!1);i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.gltfResource",n),i.A.typeOf.object("options.baseResource",a),i.A.typeOf.object("options.frameState",c);const g=(0,r.A)(l),y=function(e,t){return(0,r.A)(e)&&(0,r.A)(e.attributes)&&(0,r.A)(e.attributes[t])}(u,d),b=(0,r.A)(d);if(g===y)throw new s.A("One of options.bufferViewId and options.draco must be defined.");if(y&&!b)throw new s.A("When options.draco is defined options.attributeSemantic must also be defined.");if(y&&(i.A.typeOf.object("options.draco",u),i.A.typeOf.string("options.attributeSemantic",d)),!f&&!_)throw new s.A("At least one of loadBuffer and loadTypedArray must be true.");let v="";if(A&&(v+="-dequantize"),f&&(v+="-buffer",v+=`-context-${c.context.id}`),_&&(v+="-typed-array"),(0,r.A)(u))return`vertex-buffer:${m(t,u,n,a)}-draco-${d}${v}`;const T=t.bufferViews[l],w=T.buffer;return`vertex-buffer:${p(t.buffers[w],w,n,a)}-range-${h(T)}${v}`},u.getIndexBufferCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.accessorId,a=e.gltfResource,c=e.baseResource,l=e.frameState,u=e.draco,d=(0,o.A)(e.loadBuffer,!1),h=(0,o.A)(e.loadTypedArray,!1);if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.accessorId",n),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",c),i.A.typeOf.object("options.frameState",l),!d&&!h)throw new s.A("At least one of loadBuffer and loadTypedArray must be true.");let A="";if(d&&(A+="-buffer",A+=`-context-${l.context.id}`),h&&(A+="-typed-array"),(0,r.A)(u))return`index-buffer:${m(t,u,a,c)}-draco${A}`;const f=t.accessors[n],_=f.bufferView,g=t.bufferViews[_],y=g.buffer,b=p(t.buffers[y],y,a,c),v=function(e,t){return`${t.byteOffset+e.byteOffset}-${e.componentType}-${e.type}-${e.count}`}(f,g);return`index-buffer:${b}-accessor-${v}${A}`},u.getImageCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.imageId,r=e.gltfResource,s=e.baseResource;return i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.imageId",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",s),`image:${_(t,n,r,s)}`},u.getTextureCacheKey=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).gltf,n=e.textureInfo,r=e.gltfResource,s=e.baseResource,a=e.supportedImageFormats,l=e.frameState;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.textureInfo",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",s),i.A.typeOf.object("options.supportedImageFormats",a),i.A.typeOf.object("options.frameState",l);const u=n.index,d=_(t,c.A.getImageIdFromTexture({gltf:t,textureId:u,supportedImageFormats:a}),r,s),h=function(e,t){const n=c.A.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}(t,n);return`texture:${d}-sampler-${h}-context-${l.context.id}`};const g=u},366165:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(491446);function r(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}r.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}},r.prototype.addGeometryLoader=function(e){i.A.typeOf.object("loader",e);const t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;const n=e.buffer,r=e.typedArray;let s=0;(0,o.A)(n)&&(s+=n.sizeInBytes),(0,o.A)(r)&&(s+=r.byteLength),this.geometryByteLength+=s,this._geometrySizes[t]=s},r.prototype.addTextureLoader=function(e){i.A.typeOf.object("loader",e);const t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;const n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n},r.prototype.removeLoader=function(e){i.A.typeOf.object("loader",e);const t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],(0,o.A)(n)&&(this.geometryByteLength-=n);const r=this._textureSizes[t];delete this._textureSizes[t],(0,o.A)(r)&&(this.texturesByteLength-=r)};const s=r},569445:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(491446),r=n(677354),s=n(605971),a=n(123245);function c(){}Object.defineProperties(c.prototype,{cacheKey:{get:function(){s.A.throwInstantiationError()}}}),c.prototype.load=function(){s.A.throwInstantiationError()},c.prototype.unload=function(){},c.prototype.process=function(e){return!1},c.prototype.getError=function(e,t){i.A.typeOf.string("errorMessage",e),(0,o.A)(t)&&(0,o.A)(t.message)&&(e+=`\n${t.message}`);const n=new a.A(e);return(0,o.A)(t)&&(n.stack=`Original stack:\n${t.stack}\nHandler stack:\n${n.stack}`),n},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.unload(),(0,r.A)(this)};const l=c},48660:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLOADED:0,LOADING:1,LOADED:2,PROCESSING:3,READY:4,FAILED:5})},464088:(e,t,n)=>{"use strict";n.d(t,{A:()=>pt});var i=n(647934),o=n(660662),r=n(554630),s=n(267980),a=n(336946),c=n(369031),l=n(376758),u=n(41476),d=n(433235),h=n(673874),A=n(400793),f=n(419061),p=n(491446),m=n(677354),_=n(605971),g=n(87762),y=n(955943),b=n(653577),v=n(75200),T=n(34233),w=n(647326),E=n(591978),S=n(367817),C=n(584164),x=n(108303),I=n(19128),P=n(811203),D=n(65891),O=n(666775),L=n(65783),N=n(866569),M=n(971724),R=n(543622),F=n(769493),B=n(494156),U=n(681480),k=n(430332),V=n(760866),H=n(40118),z=n(691302),G=n(635577),j=n(581010),W=n(953677),q=n(937069),Y=n(199744),X=n(626355),J=n(384292),Q=n(77191),$=n(5244),K=n(346400),Z=n(738375),ee=n(819598),te=n(647474),ne=n(77879),ie=n(311994),oe=n(467302),re=n(612123),se=n(878471),ae=n(201733),ce=n(842153),le=n(493721),ue=n(62467),de=n(78173),he=n(619872),Ae=n(373749),fe=n(681750),pe=n(938987),me=n(205672),_e=n(380983),ge=n(584247),ye=n(342767),be=n(809418);const ve=function(e){return function(){e.frameState.afterRender.push((function(){e.requestRender()}))}};function Te(e){const t=(e=(0,f.A)(e,f.A.EMPTY_OBJECT)).canvas;let n=e.creditContainer,o=e.creditViewport;const r=(0,l.A)(e.contextOptions);if(!(0,p.A)(t))throw new _.A("options and options.canvas are required.");const s=(0,p.A)(n),a=new U.A(t,r);s||(n=document.createElement("div"),n.style.position="absolute",n.style.bottom="0",n.style["text-shadow"]="0 0 2px #000000",n.style.color="#ffffff",n.style["font-size"]="10px",n.style["padding-right"]="5px",t.parentNode.appendChild(n)),(0,p.A)(o)||(o=t.parentNode),this._id=(0,h.A)(),this._jobScheduler=new te.A,this._frameState=new K.A(a,new q.A(n,"  ",o),this._jobScheduler),this._frameState.scene3DOnly=(0,f.A)(e.scene3DOnly,!1),this._removeCreditContainer=!s,this._creditContainer=n,this._canvas=t,this._context=a,this._computeEngine=new B.A(a),this._globe=void 0,this._globeTranslucencyState=new Z.A,this._primitives=new le.A,this._groundPrimitives=new le.A,this._globeHeight=void 0,this._cameraUnderground=!1,this._logDepthBuffer=a.fragmentDepth,this._logDepthBufferDirty=!0,this._tweens=new ge.A,this._shaderFrameCount=0,this._sunPostProcess=void 0,this._computeCommandList=[],this._overlayCommandList=[],this._useOIT=(0,f.A)(e.orderIndependentTranslucency,!0),this._executeOITFunction=void 0,this._depthPlane=new X.A(e.depthPlaneEllipsoidOffset),this._clearColorCommand=new F.A({color:new u.A,stencil:0,owner:this}),this._depthClearCommand=new F.A({depth:1,owner:this}),this._stencilClearCommand=new F.A({stencil:0}),this._classificationStencilClearCommand=new F.A({stencil:0,renderState:H.A.fromCache({stencilMask:pe.A.CLASSIFICATION_MASK})}),this._depthOnlyRenderStateCache={},this._transitioner=new he.A(this),this._preUpdate=new y.A,this._postUpdate=new y.A,this._renderError=new y.A,this._preRender=new y.A,this._postRender=new y.A,this._minimumDisableDepthTestDistance=0,this._debugInspector=new be.A,this._msaaSamples=(0,f.A)(e.msaaSamples,1),this.rethrowRenderErrors=!1,this.completeMorphOnUserInput=!0,this.morphStart=new y.A,this.morphComplete=new y.A,this.skyBox=void 0,this.skyAtmosphere=void 0,this.sun=void 0,this.sunBloom=!0,this._sunBloom=void 0,this.moon=void 0,this.backgroundColor=u.A.clone(u.A.BLACK),this._mode=ue.A.SCENE3D,this._mapProjection=(0,p.A)(e.mapProjection)?e.mapProjection:new b.A,this.morphTime=1,this.farToNearRatio=1e3,this.logarithmicDepthFarToNearRatio=1e9,this.nearToFarDistance2D=175e4,this.debugCommandFilter=void 0,this.debugShowCommands=!1,this.debugShowFrustums=!1,this.debugShowFramesPerSecond=!1,this.debugShowDepthFrustum=1,this.debugShowFrustumPlanes=!1,this._debugShowFrustumPlanes=!1,this._debugFrustumPlanes=void 0,this.useDepthPicking=!0,this.pickTranslucentDepth=!1,this.cameraEventWaitTime=500,this.fog=new $.A,this._shadowMapCamera=new G.A(this),this.shadowMap=new fe.A({context:a,lightCamera:this._shadowMapCamera,enabled:(0,f.A)(e.shadows,!1)}),this.invertClassification=!1,this.invertClassificationColor=u.A.clone(u.A.WHITE),this._actualInvertClassificationColor=u.A.clone(this._invertClassificationColor),this._invertClassification=new ee.A,this.focalLength=void 0,this.eyeSeparation=void 0,this.postProcessStages=new ae.A,this._brdfLutGenerator=new z.A,this._performanceDisplay=void 0,this._debugVolume=void 0,this._screenSpaceCameraController=new Ae.A(this),this._cameraUnderground=!1,this._mapMode2D=(0,f.A)(e.mapMode2D,ne.A.INFINITE_SCROLL),this._environmentState={skyBoxCommand:void 0,skyAtmosphereCommand:void 0,sunDrawCommand:void 0,sunComputeCommand:void 0,moonCommand:void 0,isSunVisible:!1,isMoonVisible:!1,isReadyForAtmosphere:!1,isSkyAtmosphereVisible:!1,clearGlobeDepth:!1,useDepthPlane:!1,renderTranslucentDepthForPick:!1,originalFramebuffer:void 0,useGlobeDepthFramebuffer:!1,useOIT:!1,useInvertClassification:!1,usePostProcess:!1,usePostProcessSelected:!1,useWebVR:!1},this._useWebVR=!1,this._cameraVR=void 0,this._aspectRatioVR=void 0,this.requestRenderMode=(0,f.A)(e.requestRenderMode,!1),this._renderRequested=!0,this.maximumRenderTimeChange=(0,f.A)(e.maximumRenderTimeChange,0),this._lastRenderTime=void 0,this._frameRateMonitor=void 0,this._removeRequestListenerCallback=N.A.requestCompletedEvent.addEventListener(ve(this)),this._removeTaskProcessorListenerCallback=M.A.taskCompletedEvent.addEventListener(ve(this)),this._removeGlobeCallbacks=[],this._removeTerrainProviderReadyListener=void 0;const c=new i.A(0,0,a.drawingBufferWidth,a.drawingBufferHeight),d=new G.A(this);this._logDepthBuffer&&(d.frustum.near=.1,d.frustum.far=1e10),this.preloadFlightCamera=new G.A(this),this.preloadFlightCullingVolume=void 0,this._picking=new se.A(this),this._defaultView=new ye.A(this,d,c),this._view=this._defaultView,this._hdr=void 0,this._hdrDirty=void 0,this.highDynamicRange=!1,this.gamma=2.2,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this._specularEnvironmentMapAtlas=void 0,this.light=new me.A,De(this,0,E.A.now()),this.updateFrameState(),this.initializeFrame()}function we(e,t,n){const i=e._frameState,o=e._context,r=e._view.oit,s=i.shadowState.lightShadowMaps,a=i.shadowState.lightShadowsEnabled;let c=t.derivedCommands;(0,p.A)(t.pickId)&&(c.picking=J.A.createPickDerivedCommand(e,t,o,c.picking)),t.pickOnly||(c.depth=J.A.createDepthOnlyDerivedCommand(e,t,o,c.depth)),c.originalCommand=t,e._hdr&&(c.hdr=J.A.createHdrCommand(t,o,c.hdr),c=(t=c.hdr.command).derivedCommands),a&&t.receiveShadows&&(c.shadows=fe.A.createReceiveDerivedCommand(s,t,n,o,c.shadows)),t.pass===V.A.TRANSLUCENT&&(0,p.A)(r)&&r.isSupported()&&(a&&t.receiveShadows?(c.oit=(0,p.A)(c.oit)?c.oit:{},c.oit.shadows=r.createDerivedCommands(c.shadows.receiveCommand,o,c.oit.shadows)):c.oit=r.createDerivedCommands(t,o,c.oit))}Object.defineProperties(Te.prototype,{canvas:{get:function(){return this._canvas}},drawingBufferHeight:{get:function(){return this._context.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._context.drawingBufferWidth}},maximumAliasedLineWidth:{get:function(){return k.A.maximumAliasedLineWidth}},maximumCubeMapSize:{get:function(){return k.A.maximumCubeMapSize}},pickPositionSupported:{get:function(){return this._context.depthTexture}},sampleHeightSupported:{get:function(){return this._context.depthTexture}},clampToHeightSupported:{get:function(){return this._context.depthTexture}},invertClassificationSupported:{get:function(){return this._context.depthTexture}},specularEnvironmentMapsSupported:{get:function(){return ie.A.isSupported(this._context)}},globe:{get:function(){return this._globe},set:function(e){this._globe=this._globe&&this._globe.destroy(),this._globe=e,function(e,t){for(let t=0;t<e._removeGlobeCallbacks.length;++t)e._removeGlobeCallbacks[t]();e._removeGlobeCallbacks.length=0;const n=[];(0,p.A)(t)&&(n.push(t.imageryLayersUpdatedEvent.addEventListener(ve(e))),n.push(t.terrainProviderChanged.addEventListener(ve(e)))),e._removeGlobeCallbacks=n}(this,e)}},primitives:{get:function(){return this._primitives}},groundPrimitives:{get:function(){return this._groundPrimitives}},camera:{get:function(){return this._view.camera},set:function(e){this._view.camera=e}},view:{get:function(){return this._view},set:function(e){this._view=e}},defaultView:{get:function(){return this._defaultView}},picking:{get:function(){return this._picking}},screenSpaceCameraController:{get:function(){return this._screenSpaceCameraController}},mapProjection:{get:function(){return this._mapProjection}},jobScheduler:{get:function(){return this._jobScheduler}},frameState:{get:function(){return this._frameState}},environmentState:{get:function(){return this._environmentState}},tweens:{get:function(){return this._tweens}},imageryLayers:{get:function(){if((0,p.A)(this.globe))return this.globe.imageryLayers}},terrainProvider:{get:function(){if((0,p.A)(this.globe))return this.globe.terrainProvider},set:function(e){this._removeTerrainProviderReadyListener=this._removeTerrainProviderReadyListener&&this._removeTerrainProviderReadyListener(),(0,p.A)(this.globe)&&(this.globe.terrainProvider=e)}},terrainProviderChanged:{get:function(){if((0,p.A)(this.globe))return this.globe.terrainProviderChanged}},preUpdate:{get:function(){return this._preUpdate}},postUpdate:{get:function(){return this._postUpdate}},renderError:{get:function(){return this._renderError}},preRender:{get:function(){return this._preRender}},postRender:{get:function(){return this._postRender}},lastRenderTime:{get:function(){return this._lastRenderTime}},context:{get:function(){return this._context}},debugFrustumStatistics:{get:function(){return this._view.debugFrustumStatistics}},scene3DOnly:{get:function(){return this._frameState.scene3DOnly}},orderIndependentTranslucency:{get:function(){return this._useOIT}},id:{get:function(){return this._id}},mode:{get:function(){return this._mode},set:function(e){if(this.scene3DOnly&&e!==ue.A.SCENE3D)throw new _.A("Only SceneMode.SCENE3D is valid when scene3DOnly is true.");if(e===ue.A.SCENE2D)this.morphTo2D(0);else if(e===ue.A.SCENE3D)this.morphTo3D(0);else{if(e!==ue.A.COLUMBUS_VIEW)throw new _.A("value must be a valid SceneMode enumeration.");this.morphToColumbusView(0)}this._mode=e}},frustumCommandsList:{get:function(){return this._view.frustumCommandsList}},numberOfFrustums:{get:function(){return this._view.frustumCommandsList.length}},useWebVR:{get:function(){return this._useWebVR},set:function(e){if(this.camera.frustum instanceof P.A)throw new _.A("VR is unsupported with an orthographic projection.");this._useWebVR=e,this._useWebVR?(this._frameState.creditDisplay.container.style.visibility="hidden",this._cameraVR=new G.A(this),(0,p.A)(this._deviceOrientationCameraController)||(this._deviceOrientationCameraController=new Q.A(this)),this._aspectRatioVR=this.camera.frustum.aspectRatio):(this._frameState.creditDisplay.container.style.visibility="visible",this._cameraVR=void 0,this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this.camera.frustum.aspectRatio=this._aspectRatioVR,this.camera.frustum.xOffset=0)}},mapMode2D:{get:function(){return this._mapMode2D}},splitPosition:{get:function(){return this._frameState.splitPosition},set:function(e){this._frameState.splitPosition=e}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance},set:function(e){if(!(0,p.A)(e)||e<0)throw new _.A("minimumDisableDepthTestDistance must be greater than or equal to 0.0.");this._minimumDisableDepthTestDistance=e}},logarithmicDepthBuffer:{get:function(){return this._logDepthBuffer},set:function(e){e=this._context.fragmentDepth&&e,this._logDepthBuffer!==e&&(this._logDepthBuffer=e,this._logDepthBufferDirty=!0)}},gamma:{get:function(){return this._context.uniformState.gamma},set:function(e){this._context.uniformState.gamma=e}},highDynamicRange:{get:function(){return this._hdr},set:function(e){const t=this._context,n=e&&t.depthTexture&&(t.colorBufferFloat||t.colorBufferHalfFloat);this._hdrDirty=n!==this._hdr,this._hdr=n}},highDynamicRangeSupported:{get:function(){const e=this._context;return e.depthTexture&&(e.colorBufferFloat||e.colorBufferHalfFloat)}},cameraUnderground:{get:function(){return this._cameraUnderground}},msaaSamples:{get:function(){return this._msaaSamples},set:function(e){e=Math.min(e,k.A.maximumSamples),this._msaaSamples=e}},msaaSupported:{get:function(){return this._context.msaa}},pixelRatio:{get:function(){return this._frameState.pixelRatio},set:function(e){this._frameState.pixelRatio=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},globeHeight:{get:function(){return this._globeHeight}}}),Te.prototype.getCompressedTextureFormatSupported=function(e){const t=this.context;return("WEBGL_compressed_texture_s3tc"===e||"s3tc"===e)&&t.s3tc||("WEBGL_compressed_texture_pvrtc"===e||"pvrtc"===e)&&t.pvrtc||("WEBGL_compressed_texture_etc"===e||"etc"===e)&&t.etc||("WEBGL_compressed_texture_etc1"===e||"etc1"===e)&&t.etc1||("WEBGL_compressed_texture_astc"===e||"astc"===e)&&t.astc||("EXT_texture_compression_bptc"===e||"bc7"===e)&&t.bc7},Te.prototype.updateDerivedCommands=function(e){if(!(0,p.A)(e.derivedCommands))return;const t=this._frameState,n=this._context;let i=!1;const o=t.shadowState.lastDirtyTime;e.lastDirtyTime!==o&&(e.lastDirtyTime=o,e.dirty=!0,i=!0);const r=t.useLogDepth,s=this._hdr,a=e.derivedCommands,c=(0,p.A)(a.logDepth),l=(0,p.A)(a.hdr),u=(0,p.A)(a.originalCommand),d=r&&!c,h=s&&!l,A=!(r&&s||u);if(e.dirty=e.dirty||d||h||A,e.dirty){e.dirty=!1;const o=t.shadowState.shadowMaps;t.shadowState.shadowsEnabled&&e.castShadows&&(a.shadows=fe.A.createCastDerivedCommand(o,e,i,n,a.shadows)),(c||d)&&(a.logDepth=J.A.createLogDepthCommand(e,n,a.logDepth),we(this,a.logDepth.command,i)),(u||A)&&we(this,e,i)}};const Ee=new W.A({pass:j.A.RENDER}),Se=new W.A({pass:j.A.PRELOAD}),Ce=new W.A({pass:j.A.PRELOAD_FLIGHT}),xe=new W.A({pass:j.A.REQUEST_RENDER_MODE_DEFER_CHECK}),Ie=new o.A;let Pe;function De(e,t,n){const i=e._frameState;i.frameNumber=t,i.time=E.A.clone(n,i.time)}Te.prototype.clearPasses=function(e){e.render=!1,e.pick=!1,e.depth=!1,e.postProcess=!1,e.offscreen=!1},Te.prototype.updateFrameState=function(){const e=this.camera,t=this._frameState;t.commandList.length=0,t.shadowMaps.length=0,t.brdfLutGenerator=this._brdfLutGenerator,t.environmentMap=this.skyBox&&this.skyBox._cubeMap,t.mode=this._mode,t.morphTime=this.morphTime,t.mapProjection=this.mapProjection,t.camera=e,t.cullingVolume=e.frustum.computeCullingVolume(e.positionWC,e.directionWC,e.upWC),t.occluder=function(e){const t=e.globe;if(e._mode===ue.A.SCENE3D&&(0,p.A)(t)&&t.show&&!e._cameraUnderground&&!e._globeTranslucencyState.translucent){const n=t.ellipsoid,i=e.frameState.minimumTerrainHeight;return Ie.radius=n.minimumRadius+i,Pe=I.A.fromBoundingSphere(Ie,e.camera.positionWC,Pe),Pe}}(this),t.minimumTerrainHeight=0,t.minimumDisableDepthTestDistance=this._minimumDisableDepthTestDistance,t.invertClassification=this.invertClassification,t.useLogDepth=this._logDepthBuffer&&!(this.camera.frustum instanceof P.A||this.camera.frustum instanceof D.A),t.light=this.light,t.cameraUnderground=this._cameraUnderground,t.globeTranslucencyState=this._globeTranslucencyState,(0,p.A)(this.globe)&&(t.terrainExaggeration=this.globe.terrainExaggeration,t.terrainExaggerationRelativeHeight=this.globe.terrainExaggerationRelativeHeight),(0,p.A)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready?(t.specularEnvironmentMaps=this._specularEnvironmentMapAtlas.texture,t.specularEnvironmentMapsMaximumLOD=this._specularEnvironmentMapAtlas.maximumMipmapLevel):(t.specularEnvironmentMaps=void 0,t.specularEnvironmentMapsMaximumLOD=void 0),t.sphericalHarmonicCoefficients=this.sphericalHarmonicCoefficients,this._actualInvertClassificationColor=u.A.clone(this.invertClassificationColor,this._actualInvertClassificationColor),ee.A.isTranslucencySupported(this._context)||(this._actualInvertClassificationColor.alpha=1),t.invertClassificationColor=this._actualInvertClassificationColor,(0,p.A)(this.globe)?t.maximumScreenSpaceError=this.globe.maximumScreenSpaceError:t.maximumScreenSpaceError=2,this.clearPasses(t.passes),t.tilesetPassState=void 0},Te.prototype.isVisible=function(e,t,n){return(0,p.A)(e)&&(!(0,p.A)(e.boundingVolume)||!e.cull||t.computeVisibility(e.boundingVolume)!==w.A.OUTSIDE&&(!(0,p.A)(n)||!e.occlude||!e.boundingVolume.isOccluded(n)))};let Oe=new C.A(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1);function Le(e,t,n,i,o){const a=t._frameState;if((0,p.A)(t.debugCommandFilter)&&!t.debugCommandFilter(e))return;if(e instanceof F.A)return void e.execute(n,i);e.debugShowBoundingVolume&&(0,p.A)(e.boundingVolume)&&function(e,t,n,i){const o=t._frameState,a=o.context,c=e.boundingVolume;let l;(0,p.A)(t._debugVolume)&&t._debugVolume.destroy();let u=s.A.clone(c.center);if(o.mode!==ue.A.SCENE3D){u=C.A.multiplyByPoint(Oe,u,u);const e=o.mapProjection,t=e.unproject(u);u=e.ellipsoid.cartographicToCartesian(t)}if((0,p.A)(c.radius)){const e=c.radius;l=T.A.toWireframe(g.A.createGeometry(new g.A({radii:new s.A(e,e,e),vertexFormat:re.A.FLAT_VERTEX_FORMAT}))),t._debugVolume=new ce.A({geometryInstances:new v.A({geometry:l,modelMatrix:C.A.fromTranslation(u),attributes:{color:new d.A(1,0,0,1)}}),appearance:new re.A({flat:!0,translucent:!1}),asynchronous:!1})}else{const e=c.halfAxes;l=T.A.toWireframe(r.A.createGeometry(r.A.fromDimensions({dimensions:new s.A(2,2,2),vertexFormat:re.A.FLAT_VERTEX_FORMAT}))),t._debugVolume=new ce.A({geometryInstances:new v.A({geometry:l,modelMatrix:C.A.fromRotationTranslation(e,u,new C.A),attributes:{color:new d.A(1,0,0,1)}}),appearance:new re.A({flat:!0,translucent:!1}),asynchronous:!1})}const h=o.commandList,A=o.commandList=[];let f;t._debugVolume.update(o),e=A[0],o.useLogDepth&&(e=J.A.createLogDepthCommand(e,a).command),(0,p.A)(i)&&(f=n.framebuffer,n.framebuffer=i),e.execute(a,n),(0,p.A)(f)&&(n.framebuffer=f),o.commandList=h}(e,t,i,o),a.useLogDepth&&(0,p.A)(e.derivedCommands.logDepth)&&(e=e.derivedCommands.logDepth.command);const c=a.passes;if(!c.pick&&!c.depth&&t._hdr&&(0,p.A)(e.derivedCommands)&&(0,p.A)(e.derivedCommands.hdr)&&(e=e.derivedCommands.hdr.command),c.pick||c.depth){if(c.pick&&!c.depth&&(0,p.A)(e.derivedCommands.picking))return void(e=e.derivedCommands.picking.pickCommand).execute(n,i);if((0,p.A)(e.derivedCommands.depth))return void(e=e.derivedCommands.depth.depthOnlyCommand).execute(n,i)}t.debugShowCommands||t.debugShowFrustums?t._debugInspector.executeDebugShowFrustumsCommand(t,e,i):a.shadowState.lightShadowsEnabled&&e.receiveShadows&&(0,p.A)(e.derivedCommands.shadows)?e.derivedCommands.shadows.receiveCommand.execute(n,i):e.execute(n,i)}function Ne(e,t,n,i){const o=t._frameState;let r=e.derivedCommands;(0,p.A)(r)&&(o.useLogDepth&&(0,p.A)(r.logDepth)&&(e=r.logDepth.command),r=e.derivedCommands,(0,p.A)(r.picking)?(e=r.picking.pickCommand).execute(n,i):(0,p.A)(r.depth)&&(e=r.depth.depthOnlyCommand).execute(n,i))}function Me(e,t,n){return t.boundingVolume.distanceSquaredTo(n)-e.boundingVolume.distanceSquaredTo(n)}function Re(e,t,n){return e.boundingVolume.distanceSquaredTo(n)-t.boundingVolume.distanceSquaredTo(n)+S.A.EPSILON12}function Fe(e,t,n,i,o){const r=e.context;(0,x.A)(i,Me,e.camera.positionWC),(0,p.A)(o)&&t(o.unclassifiedCommand,e,r,n);const s=i.length;for(let o=0;o<s;++o)t(i[o],e,r,n)}function Be(e,t,n,i,o){const r=e.context;(0,x.A)(i,Re,e.camera.positionWC),(0,p.A)(o)&&t(o.unclassifiedCommand,e,r,n);const s=i.length;for(let o=0;o<s;++o)t(i[o],e,r,n)}function Ue(e,t,n,i){const o=e.context;(0,x.A)(i,Me,e.camera.positionWC);const r=i.length;for(let s=0;s<r;++s)t(i[s],e,o,n)}Oe=C.A.inverseTransformation(Oe,Oe);const ke=new O.A,Ve=new L.A,He=new P.A,ze=new D.A;function Ge(e,t){const n=e.camera,i=e.context,o=e.frameState,r=i.uniformState;let s;r.updateCamera(n),s=(0,p.A)(n.frustum.fov)?n.frustum.clone(ke):(0,p.A)(n.frustum.infiniteProjectionMatrix)?n.frustum.clone(Ve):(0,p.A)(n.frustum.width)?n.frustum.clone(He):n.frustum.clone(ze),s.near=n.frustum.near,s.far=n.frustum.far,r.updateFrustum(s),r.updatePass(V.A.ENVIRONMENT);const a=o.passes,c=a.pick,l=e._environmentState,u=e._view,d=l.renderTranslucentDepthForPick,h=l.useWebVR;if(!c){const n=l.skyBoxCommand;if((0,p.A)(n)&&Le(n,e,i,t),l.isSkyAtmosphereVisible&&Le(l.skyAtmosphereCommand,e,i,t),l.isSunVisible&&(l.sunDrawCommand.execute(i,t),e.sunBloom&&!h)){let n;n=l.useGlobeDepthFramebuffer?u.globeDepth.framebuffer:l.usePostProcess?u.sceneFramebuffer.framebuffer:l.originalFramebuffer,e._sunPostProcess.execute(i),e._sunPostProcess.copy(i,n),t.framebuffer=n}l.isMoonVisible&&l.moonCommand.execute(i,t)}let A;l.useOIT?((0,p.A)(e._executeOITFunction)||(e._executeOITFunction=function(e,t,n,o,r){u.globeDepth.prepareColorTextures(i),u.oit.executeCommands(e,t,n,o,r)}),A=e._executeOITFunction):A=a.render?Fe:Be;const f=u.frustumCommandsList,m=f.length,_=l.clearGlobeDepth,g=l.useDepthPlane,y=e._globeTranslucencyState,b=y.translucent,v=e._view.globeTranslucencyFramebuffer,T=e._depthClearCommand,w=e._stencilClearCommand,E=e._classificationStencilClearCommand,S=e._depthPlane,C=l.usePostProcessSelected,x=n.position.z;let I;for(let a=0;a<m;++a){const h=m-a-1,P=f[h];e.mode===ue.A.SCENE2D?(n.position.z=x-P.near+1,s.far=Math.max(1,P.far-P.near),s.near=1,r.update(o),r.updateFrustum(s)):(s.near=0!==h?P.near*e.opaqueFrustumNearOffset:P.near,s.far=P.far,r.updateFrustum(s)),T.execute(i,t),i.stencilBuffer&&w.execute(i,t),r.updatePass(V.A.GLOBE);let D=P.commands[V.A.GLOBE],O=P.indices[V.A.GLOBE];if(b)y.executeGlobeCommands(P,Le,v,e,t);else for(I=0;I<O;++I)Le(D[I],e,i,t);const L=u.globeDepth;if((0,p.A)(L)&&l.useGlobeDepthFramebuffer&&L.executeCopyDepth(i,t),!l.renderTranslucentDepthForPick)if(r.updatePass(V.A.TERRAIN_CLASSIFICATION),D=P.commands[V.A.TERRAIN_CLASSIFICATION],O=P.indices[V.A.TERRAIN_CLASSIFICATION],b)y.executeGlobeClassificationCommands(P,Le,v,e,t);else for(I=0;I<O;++I)Le(D[I],e,i,t);if(_&&(T.execute(i,t),g&&S.execute(i,t)),!l.useInvertClassification||c||l.renderTranslucentDepthForPick){for(r.updatePass(V.A.CESIUM_3D_TILE),D=P.commands[V.A.CESIUM_3D_TILE],O=P.indices[V.A.CESIUM_3D_TILE],I=0;I<O;++I)Le(D[I],e,i,t);if(O>0&&((0,p.A)(L)&&l.useGlobeDepthFramebuffer&&(L.prepareColorTextures(i,_),L.executeUpdateDepth(i,t,_,L.depthStencilTexture)),!l.renderTranslucentDepthForPick))for(r.updatePass(V.A.CESIUM_3D_TILE_CLASSIFICATION),D=P.commands[V.A.CESIUM_3D_TILE_CLASSIFICATION],O=P.indices[V.A.CESIUM_3D_TILE_CLASSIFICATION],I=0;I<O;++I)Le(D[I],e,i,t)}else{e._invertClassification.clear(i,t);const n=t.framebuffer;for(t.framebuffer=e._invertClassification._fbo.framebuffer,r.updatePass(V.A.CESIUM_3D_TILE),D=P.commands[V.A.CESIUM_3D_TILE],O=P.indices[V.A.CESIUM_3D_TILE],I=0;I<O;++I)Le(D[I],e,i,t);for((0,p.A)(L)&&l.useGlobeDepthFramebuffer&&(e._invertClassification.prepareTextures(i),L.executeUpdateDepth(i,t,_,e._invertClassification._fbo.getDepthStencilTexture())),r.updatePass(V.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW),D=P.commands[V.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW],O=P.indices[V.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW],I=0;I<O;++I)Le(D[I],e,i,t);for(t.framebuffer=n,e._invertClassification.executeClassified(i,t),1===o.invertClassificationColor.alpha&&e._invertClassification.executeUnclassified(i,t),O>0&&i.stencilBuffer&&E.execute(i,t),r.updatePass(V.A.CESIUM_3D_TILE_CLASSIFICATION),D=P.commands[V.A.CESIUM_3D_TILE_CLASSIFICATION],O=P.indices[V.A.CESIUM_3D_TILE_CLASSIFICATION],I=0;I<O;++I)Le(D[I],e,i,t)}for(O>0&&i.stencilBuffer&&w.execute(i,t),r.updatePass(V.A.VOXELS),D=P.commands[V.A.VOXELS],O=P.indices[V.A.VOXELS],D.length=O,Ue(e,Le,t,D),r.updatePass(V.A.OPAQUE),D=P.commands[V.A.OPAQUE],O=P.indices[V.A.OPAQUE],I=0;I<O;++I)Le(D[I],e,i,t);let N;if(0!==h&&e.mode!==ue.A.SCENE2D&&(s.near=P.near,r.updateFrustum(s)),!c&&l.useInvertClassification&&o.invertClassificationColor.alpha<1&&(N=e._invertClassification),r.updatePass(V.A.TRANSLUCENT),D=P.commands[V.A.TRANSLUCENT],D.length=P.indices[V.A.TRANSLUCENT],A(e,Le,t,D,N),P.indices[V.A.CESIUM_3D_TILE_CLASSIFICATION]>0&&u.translucentTileClassification.isSupported()&&(u.translucentTileClassification.executeTranslucentCommands(e,Le,t,D,L.depthStencilTexture),u.translucentTileClassification.executeClassificationCommands(e,Le,t,P)),i.depthTexture&&e.useDepthPicking&&(l.useGlobeDepthFramebuffer||d)){const n=L.depthStencilTexture,o=e._picking.getPickDepth(e,h);o.update(i,n),o.executeCopyDepth(i,t)}if(c||!C)continue;const M=t.framebuffer;if(t.framebuffer=u.sceneFramebuffer.getIdFramebuffer(),s.near=0!==h?P.near*e.opaqueFrustumNearOffset:P.near,s.far=P.far,r.updateFrustum(s),r.updatePass(V.A.GLOBE),D=P.commands[V.A.GLOBE],O=P.indices[V.A.GLOBE],b)y.executeGlobeCommands(P,Ne,v,e,t);else for(I=0;I<O;++I)Ne(D[I],e,i,t);for(_&&(T.framebuffer=t.framebuffer,T.execute(i,t),T.framebuffer=void 0),_&&g&&S.execute(i,t),r.updatePass(V.A.CESIUM_3D_TILE),D=P.commands[V.A.CESIUM_3D_TILE],O=P.indices[V.A.CESIUM_3D_TILE],I=0;I<O;++I)Ne(D[I],e,i,t);for(r.updatePass(V.A.OPAQUE),D=P.commands[V.A.OPAQUE],O=P.indices[V.A.OPAQUE],I=0;I<O;++I)Ne(D[I],e,i,t);for(r.updatePass(V.A.TRANSLUCENT),D=P.commands[V.A.TRANSLUCENT],O=P.indices[V.A.TRANSLUCENT],I=0;I<O;++I)Ne(D[I],e,i,t);t.framebuffer=M}}function je(e){e.context.uniformState.updatePass(V.A.COMPUTE);const t=e._environmentState.sunComputeCommand;(0,p.A)(t)&&t.execute(e._computeEngine);const n=e._computeCommandList,i=n.length;for(let t=0;t<i;++t)n[t].execute(e._computeEngine)}function We(e,t,n){const i=n.shadowMapCullingVolume,o=n.isPointLight,r=n.passes,s=r.length,a=t.length;for(let n=0;n<a;++n){const a=t[n];if(e.updateDerivedCommands(a),a.castShadows&&(a.pass===V.A.GLOBE||a.pass===V.A.CESIUM_3D_TILE||a.pass===V.A.OPAQUE||a.pass===V.A.TRANSLUCENT)&&e.isVisible(a,i))if(o)for(let e=0;e<s;++e)r[e].commandList.push(a);else if(1===s)r[0].commandList.push(a);else{let t=!1;for(let n=s-1;n>=0;--n){const i=r[n].cullingVolume;if(e.isVisible(a,i))r[n].commandList.push(a),t=!0;else if(t)break}}}}function qe(e){const t=e.frameState,n=t.shadowState.shadowMaps,i=n.length;if(!t.shadowState.shadowsEnabled)return;const o=e.context,r=o.uniformState;for(let t=0;t<i;++t){const i=n[t];if(i.outOfView)continue;const s=i.passes,a=s.length;for(let e=0;e<a;++e)s[e].commandList.length=0;We(e,e.frameState.commandList,i);for(let n=0;n<a;++n){const s=i.passes[n];r.updateCamera(s.camera),i.updatePass(o,n);const a=s.commandList.length;for(let n=0;n<a;++n){const i=s.commandList[n];r.updatePass(i.pass),Le(i.derivedCommands.shadows.castCommands[t],e,o,s.passState)}}}}const Ye=new s.A;Te.prototype.updateAndExecuteCommands=function(e,t){const n=this._frameState.mode;this._environmentState.useWebVR?function(e,t,n){const i=e._view,o=i.camera,r=e._environmentState.renderTranslucentDepthForPick;rt(e,t,n),ot(e),i.createPotentiallyVisibleSet(e),je(e),r||qe(e);const a=t.viewport;a.x=0,a.y=0,a.width=.5*a.width;const c=G.A.clone(o,e._cameraVR);c.frustum=o.frustum;const l=o.frustum.near,u=l*(0,f.A)(e.focalLength,5),d=(0,f.A)(e.eyeSeparation,u/30),h=s.A.multiplyByScalar(c.right,.5*d,Ye);o.frustum.aspectRatio=a.width/a.height;const A=.5*d*l/u;s.A.add(c.position,h,o.position),o.frustum.xOffset=A,Ge(e,t),a.x=a.width,s.A.subtract(c.position,h,o.position),o.frustum.xOffset=-A,Ge(e,t),G.A.clone(c,o)}(this,e,t):n!==ue.A.SCENE2D||this._mapMode2D===ne.A.ROTATE?nt(!0,this,e,t):(rt(this,e,t),function(e,t){const n=e.context,o=e.frameState,r=e.camera,a=t.viewport,c=i.A.clone(a,tt);t.viewport=c;const l=Xe,u=Je;e.mapProjection.project(l,u);const d=s.A.clone(r.position,Qe),h=C.A.clone(r.transform,Ke),A=r.frustum.clone();r._setTransform(C.A.IDENTITY);const f=C.A.computeViewportTransformation(c,0,1,$e),p=r.frustum.projectionMatrix,m=r.positionWC.y,_=s.A.fromElements(S.A.sign(m)*u.x-m,0,-r.positionWC.x,Ze),g=R.A.pointToGLWindowCoordinates(p,f,_,et);g.x=Math.floor(g.x);const y=c.x,b=c.width;if(0===m||g.x<=y||g.x>=y+b)nt(!0,e,t);else if(Math.abs(y+.5*b-g.x)<1)c.width=g.x-c.x,r.position.x*=S.A.sign(r.position.x),r.frustum.right=0,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!0,e,t),c.x=g.x,r.position.x=-r.position.x,r.frustum.right=-r.frustum.left,r.frustum.left=0,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!1,e,t);else if(g.x>y+.5*b){c.width=g.x-y;const i=r.frustum.right;r.frustum.right=u.x-m,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!0,e,t),c.x=g.x,c.width=y+b-g.x,r.position.x=-r.position.x,r.frustum.left=-r.frustum.right,r.frustum.right=i-2*r.frustum.right,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!1,e,t)}else{c.x=g.x,c.width=y+b-g.x;const i=r.frustum.left;r.frustum.left=-u.x-m,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!0,e,t),c.x=y,c.width=g.x-y,r.position.x=-r.position.x,r.frustum.right=-r.frustum.left,r.frustum.left=i-2*r.frustum.left,o.cullingVolume=r.frustum.computeCullingVolume(r.positionWC,r.directionWC,r.upWC),n.uniformState.update(o),nt(!1,e,t)}r._setTransform(h),s.A.clone(d,r.position),r.frustum=A.clone(),t.viewport=a}(this,e))};const Xe=new a.A(Math.PI,S.A.PI_OVER_TWO),Je=new s.A,Qe=new s.A,$e=new C.A,Ke=new C.A,Ze=new s.A,et=new s.A,tt=new i.A;function nt(e,t,n,i){const o=t._environmentState,r=t._view,s=o.renderTranslucentDepthForPick;e||(t.frameState.commandList.length=0),ot(t),r.createPotentiallyVisibleSet(t),e&&((0,p.A)(i)&&rt(t,n,i),je(t),s||qe(t)),Ge(t,n)}const it=new A.A;function ot(e){const t=e._frameState;e._groundPrimitives.update(t),e._primitives.update(t),function(e){const t=e._frameState;e.debugShowFrustumPlanes!==e._debugShowFrustumPlanes&&(e.debugShowFrustumPlanes?e._debugFrustumPlanes=new Y.A({camera:e.camera,updateOnChange:!1,frustumSplits:t.frustumSplits}):e._debugFrustumPlanes=e._debugFrustumPlanes&&e._debugFrustumPlanes.destroy(),e._debugShowFrustumPlanes=e.debugShowFrustumPlanes),(0,p.A)(e._debugFrustumPlanes)&&e._debugFrustumPlanes.update(t)}(e),function(e){const t=e._frameState,n=t.shadowMaps,i=n.length,o=i>0&&!t.passes.pick&&e.mode===ue.A.SCENE3D;if(o!==t.shadowState.shadowsEnabled&&(++t.shadowState.lastDirtyTime,t.shadowState.shadowsEnabled=o),t.shadowState.lightShadowsEnabled=!1,o){for(let e=0;e<i;++e)if(n[e]!==t.shadowState.shadowMaps[e]){++t.shadowState.lastDirtyTime;break}t.shadowState.shadowMaps.length=0,t.shadowState.lightShadowMaps.length=0;for(let e=0;e<i;++e){const i=n[e];i.update(t),t.shadowState.shadowMaps.push(i),i.fromLightSource&&(t.shadowState.lightShadowMaps.push(i),t.shadowState.lightShadowsEnabled=!0),i.dirty&&(++t.shadowState.lastDirtyTime,i.dirty=!1)}}}(e),e._globe&&e._globe.render(t)}function rt(e,t,n){const i=e._context,o=e._frameState,r=e._environmentState,s=e._view,a=e._frameState.passes.pick;(0,p.A)(s.globeDepth)&&(s.globeDepth.picking=a);const c=r.useWebVR;r.originalFramebuffer=t.framebuffer,(0,p.A)(e.sun)&&e.sunBloom!==e._sunBloom?(e.sunBloom&&!c?e._sunPostProcess=new _e.A:(0,p.A)(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy()),e._sunBloom=e.sunBloom):!(0,p.A)(e.sun)&&(0,p.A)(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy(),e._sunBloom=!1);const l=e._clearColorCommand;u.A.clone(n,l.color),l.execute(i,t);const d=r.useGlobeDepthFramebuffer=(0,p.A)(s.globeDepth);d&&(s.globeDepth.update(i,t,s.viewport,e.msaaSamples,e._hdr,r.clearGlobeDepth),s.globeDepth.clear(i,t,n));const h=s.oit,A=r.useOIT=!a&&(0,p.A)(h)&&h.isSupported();A&&(h.update(i,t,s.globeDepth.colorFramebufferManager,e._hdr,e.msaaSamples),h.clear(i,t,n),r.useOIT=h.isSupported());const f=e.postProcessStages;let m=r.usePostProcess=!a&&(e._hdr||f.length>0||f.ambientOcclusion.enabled||f.fxaa.enabled||f.bloom.enabled);if(r.usePostProcessSelected=!1,m&&(s.sceneFramebuffer.update(i,s.viewport,e._hdr,e.msaaSamples),s.sceneFramebuffer.clear(i,t,n),f.update(i,o.useLogDepth,e._hdr),f.clear(i),m=r.usePostProcess=f.ready,r.usePostProcessSelected=m&&f.hasSelected),r.isSunVisible&&e.sunBloom&&!c?(t.framebuffer=e._sunPostProcess.update(t),e._sunPostProcess.clear(i,t,n)):d?t.framebuffer=s.globeDepth.framebuffer:m&&(t.framebuffer=s.sceneFramebuffer.framebuffer),(0,p.A)(t.framebuffer)&&l.execute(i,t),r.useInvertClassification=!a&&(0,p.A)(t.framebuffer)&&e.invertClassification){let n;if(1===e.frameState.invertClassificationColor.alpha&&r.useGlobeDepthFramebuffer&&(n=s.globeDepth.framebuffer),(0,p.A)(n)||i.depthTexture){if(e._invertClassification.previousFramebuffer=n,e._invertClassification.update(i,e.msaaSamples,s.globeDepth.colorFramebufferManager),e._invertClassification.clear(i,t),e.frameState.invertClassificationColor.alpha<1&&A){const t=e._invertClassification.unclassifiedCommand,n=t.derivedCommands;n.oit=h.createDerivedCommands(t,i,n.oit)}}else r.useInvertClassification=!1}e._globeTranslucencyState.translucent&&s.globeTranslucencyFramebuffer.updateAndClear(e._hdr,s.viewport,i,t)}function st(e){e._jobScheduler.resetBudgets();const t=e._frameState;e.primitives.prePassesUpdate(t),(0,p.A)(e.globe)&&e.globe.update(t),e._picking.update(),t.creditDisplay.update()}function at(e){const t=e._frameState;e.primitives.postPassesUpdate(t),N.A.update()}Te.prototype.updateEnvironment=function(){const e=this._frameState,t=this._view,n=this._environmentState,i=e.passes.render,o=e.passes.offscreen,r=this.skyAtmosphere,s=this.globe,a=this._globeTranslucencyState;if(!i||this._mode!==ue.A.SCENE2D&&t.camera.frustum instanceof P.A||!a.environmentVisible)n.skyAtmosphereCommand=void 0,n.skyBoxCommand=void 0,n.sunDrawCommand=void 0,n.sunComputeCommand=void 0,n.moonCommand=void 0;else{(0,p.A)(r)?((0,p.A)(s)&&(r.setDynamicAtmosphereColor(s.enableLighting&&s.dynamicAtmosphereLighting,s.dynamicAtmosphereLightingFromSun),n.isReadyForAtmosphere=n.isReadyForAtmosphere||s._surface._tilesToRender.length>0),n.skyAtmosphereCommand=r.update(e,s),(0,p.A)(n.skyAtmosphereCommand)&&this.updateDerivedCommands(n.skyAtmosphereCommand)):n.skyAtmosphereCommand=void 0,n.skyBoxCommand=(0,p.A)(this.skyBox)?this.skyBox.update(e,this._hdr):void 0;const i=(0,p.A)(this.sun)?this.sun.update(e,t.passState,this._hdr):void 0;n.sunDrawCommand=(0,p.A)(i)?i.drawCommand:void 0,n.sunComputeCommand=(0,p.A)(i)?i.computeCommand:void 0,n.moonCommand=(0,p.A)(this.moon)?this.moon.update(e):void 0}const c=n.clearGlobeDepth=(0,p.A)(s)&&s.show&&(!s.depthTestAgainstTerrain||this.mode===ue.A.SCENE2D);(n.useDepthPlane=c&&this.mode===ue.A.SCENE3D&&a.useDepthPlane)&&this._depthPlane.update(e),n.renderTranslucentDepthForPick=!1,n.useWebVR=this._useWebVR&&this.mode!==ue.A.SCENE2D&&!o;const l=e.mode!==ue.A.SCENE3D||a.sunVisibleThroughGlobe?void 0:e.occluder;let u=e.cullingVolume;const d=it.planes;for(let e=0;e<5;++e)d[e]=u.planes[e];u=it,n.isSkyAtmosphereVisible=(0,p.A)(n.skyAtmosphereCommand)&&n.isReadyForAtmosphere,n.isSunVisible=this.isVisible(n.sunDrawCommand,u,l),n.isMoonVisible=this.isVisible(n.moonCommand,u,l);const h=this.specularEnvironmentMaps;let A=this._specularEnvironmentMapAtlas;!(0,p.A)(h)||(0,p.A)(A)&&A.url===h?!(0,p.A)(h)&&(0,p.A)(A)&&(A.destroy(),this._specularEnvironmentMapAtlas=void 0):(A=A&&A.destroy(),this._specularEnvironmentMapAtlas=new ie.A(h)),(0,p.A)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e)},Te.prototype.resolveFramebuffers=function(e){const t=this._context,n=this._environmentState,i=this._view,o=i.globeDepth;(0,p.A)(o)&&o.prepareColorTextures(t);const r=n.useOIT,s=n.useGlobeDepthFramebuffer,a=n.usePostProcess,c=n.originalFramebuffer,l=s?o.colorFramebufferManager:void 0,u=i.sceneFramebuffer._colorFramebuffer,d=i.sceneFramebuffer.idFramebuffer;r&&(e.framebuffer=a?u.framebuffer:c,i.oit.execute(t,e));const h=i.translucentTileClassification;if(h.hasTranslucentDepth&&h.isSupported()&&h.execute(this,e),a){i.sceneFramebuffer.prepareColorTextures(t);let e=u;s&&!r&&(e=l);const n=this.postProcessStages,o=e.getColorTexture(0),a=d.getColorTexture(0),h=(0,f.A)(l,u).getDepthStencilTexture();n.execute(t,o,h,a),n.copy(t,c)}r||a||!s||(e.framebuffer=c,o.executeCopyColor(t,e))},Te.prototype.initializeFrame=function(){120==this._shaderFrameCount++&&(this._shaderFrameCount=0,this._context.shaderCache.destroyReleasedShaderPrograms(),this._context.textureCache.destroyReleasedTextures()),this._tweens.update(),this._globeHeight=function(e){const t=e._globe,n=e.camera.positionCartographic;if((0,p.A)(t)&&t.show&&(0,p.A)(n))return t.getHeight(n)}(this),this._cameraUnderground=function(e){const t=e.camera,n=e._mode,i=e.globe,o=e._screenSpaceCameraController,r=t.positionCartographic;if(!(0,p.A)(r))return!1;if(!o.onMap()&&r.height<0)return!0;if(!(0,p.A)(i)||!i.show||n===ue.A.SCENE2D||n===ue.A.MORPHING)return!1;const s=e._globeHeight;return(0,p.A)(s)&&r.height<s}(this),this._globeTranslucencyState.update(this),this._screenSpaceCameraController.update(),(0,p.A)(this._deviceOrientationCameraController)&&this._deviceOrientationCameraController.update(),this.camera.update(this._mode),this.camera._updateCameraChanged()};const ct=new u.A;function lt(e){const t=e._frameState,n=e.context,o=n.uniformState,r=e._defaultView;e._view=r,e.updateFrameState(),t.passes.render=!0,t.passes.postProcess=e.postProcessStages.hasSelected,t.tilesetPassState=Ee;let a=(0,f.A)(e.backgroundColor,u.A.BLACK);e._hdr&&(a=u.A.clone(a,ct),a.red=Math.pow(a.red,e.gamma),a.green=Math.pow(a.green,e.gamma),a.blue=Math.pow(a.blue,e.gamma)),t.backgroundColor=a,e.fog.update(t),o.update(t);const c=e.shadowMap;(0,p.A)(c)&&c.enabled&&(!(0,p.A)(e.light)||e.light instanceof me.A?s.A.negate(o.sunDirectionWC,e._shadowMapCamera.direction):s.A.clone(e.light.direction,e._shadowMapCamera.direction),t.shadowMaps.push(c)),e._computeCommandList.length=0,e._overlayCommandList.length=0;const l=r.viewport;l.x=0,l.y=0,l.width=n.drawingBufferWidth,l.height=n.drawingBufferHeight;const d=r.passState;d.framebuffer=void 0,d.blendingEnabled=void 0,d.scissorTest=void 0,d.viewport=i.A.clone(l,d.viewport),(0,p.A)(e.globe)&&e.globe.beginFrame(t),e.updateEnvironment(),e.updateAndExecuteCommands(d,a),e.resolveFramebuffers(d),d.framebuffer=void 0,function(e,t){e.context.uniformState.updatePass(V.A.OVERLAY);const n=e.context,i=e._overlayCommandList,o=i.length;for(let e=0;e<o;++e)i[e].execute(n,t)}(e,d),(0,p.A)(e.globe)&&(e.globe.endFrame(t),e.globe.tilesLoaded||(e._renderRequested=!0)),n.endFrame()}function ut(e,t){try{t(e)}catch(t){if(e._renderError.raiseEvent(e,t),e.rethrowRenderErrors)throw t}}function dt(e){return e._picking.updateMostDetailedRayPicks(e)}function ht(e){const t=e._frameState;Se.camera=t.camera,Se.cullingVolume=t.cullingVolume,e.primitives.updateForPass(t,Se)}function At(e){const t=e._frameState;t.camera.canPreloadFlight()&&(Ce.camera=e.preloadFlightCamera,Ce.cullingVolume=e.preloadFlightCullingVolume,e.primitives.updateForPass(t,Ce))}function ft(e){e.primitives.updateForPass(e._frameState,xe)}Te.prototype.render=function(e){this._preUpdate.raiseEvent(this,e);const t=this._frameState;t.newFrame=!1,(0,p.A)(e)||(e=E.A.now());const n=this._view.checkForCameraUpdates(this);let i=!this.requestRenderMode||this._renderRequested||n||this._logDepthBufferDirty||this._hdrDirty||this.mode===ue.A.MORPHING;if(!i&&(0,p.A)(this.maximumRenderTimeChange)&&(0,p.A)(this._lastRenderTime)){const t=Math.abs(E.A.secondsDifference(this._lastRenderTime,e));i=i||t>this.maximumRenderTimeChange}i&&(this._lastRenderTime=E.A.clone(e,this._lastRenderTime),this._renderRequested=!1,this._logDepthBufferDirty=!1,this._hdrDirty=!1,De(this,S.A.incrementWrap(t.frameNumber,15e6,1),e),t.newFrame=!0),ut(this,st),this.primitives.show&&(ut(this,dt),ut(this,ht),ut(this,At),i||ut(this,ft)),this._postUpdate.raiseEvent(this,e),i&&(this._preRender.raiseEvent(this,e),t.creditDisplay.beginFrame(),ut(this,lt)),function(e,t){if(e.debugShowFramesPerSecond){if(!(0,p.A)(e._performanceDisplay)){const t=document.createElement("div");t.className="cesium-performanceDisplay-defaultContainer",e._canvas.parentNode.appendChild(t);const n=new oe.A({container:t});e._performanceDisplay=n,e._performanceContainer=t}e._performanceDisplay.throttled=e.requestRenderMode,e._performanceDisplay.update(t)}else(0,p.A)(e._performanceDisplay)&&(e._performanceDisplay=e._performanceDisplay&&e._performanceDisplay.destroy(),e._performanceContainer.parentNode.removeChild(e._performanceContainer))}(this,i),ut(this,at),function(e){const t=e._frameState.afterRender;for(let n=0,i=t.length;n<i;++n)t[n]()&&e.requestRender();t.length=0}(this),i&&(this._postRender.raiseEvent(this,e),t.creditDisplay.endFrame())},Te.prototype.forceRender=function(e){this._renderRequested=!0,this.render(e)},Te.prototype.requestRender=function(){this._renderRequested=!0},Te.prototype.clampLineWidth=function(e){return Math.max(k.A.minimumAliasedLineWidth,Math.min(e,k.A.maximumAliasedLineWidth))},Te.prototype.pick=function(e,t,n){return this._picking.pick(this,e,t,n)},Te.prototype.pickPositionWorldCoordinates=function(e,t){return this._picking.pickPositionWorldCoordinates(this,e,t)},Te.prototype.pickPosition=function(e,t){return this._picking.pickPosition(this,e,t)},Te.prototype.drillPick=function(e,t,n,i){return this._picking.drillPick(this,e,t,n,i)},Te.prototype.pickFromRay=function(e,t,n){return this._picking.pickFromRay(this,e,t,n)},Te.prototype.drillPickFromRay=function(e,t,n,i){return this._picking.drillPickFromRay(this,e,t,n,i)},Te.prototype.pickFromRayMostDetailed=function(e,t,n){return this._picking.pickFromRayMostDetailed(this,e,t,n)},Te.prototype.drillPickFromRayMostDetailed=function(e,t,n,i){return this._picking.drillPickFromRayMostDetailed(this,e,t,n,i)},Te.prototype.sampleHeight=function(e,t,n){return this._picking.sampleHeight(this,e,t,n)},Te.prototype.clampToHeight=function(e,t,n,i){return this._picking.clampToHeight(this,e,t,n,i)},Te.prototype.sampleHeightMostDetailed=function(e,t,n){return this._picking.sampleHeightMostDetailed(this,e,t,n)},Te.prototype.clampToHeightMostDetailed=function(e,t,n){return this._picking.clampToHeightMostDetailed(this,e,t,n)},Te.prototype.cartesianToCanvasCoordinates=function(e,t){return de.A.wgs84ToWindowCoordinates(this,e,t)},Te.prototype.completeMorph=function(){this._transitioner.completeMorph()},Te.prototype.morphTo2D=function(e){let t;const n=this.globe;t=(0,p.A)(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=(0,f.A)(e,2),this._transitioner.morphTo2D(e,t)},Te.prototype.morphToColumbusView=function(e){let t;const n=this.globe;t=(0,p.A)(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=(0,f.A)(e,2),this._transitioner.morphToColumbusView(e,t)},Te.prototype.morphTo3D=function(e){let t;const n=this.globe;t=(0,p.A)(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=(0,f.A)(e,2),this._transitioner.morphTo3D(e,t)},Te.prototype.setTerrain=function(e){return c.A.typeOf.object("terrain",e),function(e,t){e._removeTerrainProviderReadyListener=e._removeTerrainProviderReadyListener&&e._removeTerrainProviderReadyListener(),t.ready?(0,p.A)(e.globe)&&(e.globe.terrainProvider=t.provider):(e.globe.terrainProvider=void 0,e._removeTerrainProviderReadyListener=t.readyEvent.addEventListener((t=>{(0,p.A)(e)&&(0,p.A)(e.globe)&&(e.globe.terrainProvider=t),e._removeTerrainProviderReadyListener()})))}(this,e),e},Te.prototype.isDestroyed=function(){return!1},Te.prototype.destroy=function(){this._tweens.removeAll(),this._computeEngine=this._computeEngine&&this._computeEngine.destroy(),this._screenSpaceCameraController=this._screenSpaceCameraController&&this._screenSpaceCameraController.destroy(),this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this._primitives=this._primitives&&this._primitives.destroy(),this._groundPrimitives=this._groundPrimitives&&this._groundPrimitives.destroy(),this._globe=this._globe&&this._globe.destroy(),this._removeTerrainProviderReadyListener=this._removeTerrainProviderReadyListener&&this._removeTerrainProviderReadyListener(),this.skyBox=this.skyBox&&this.skyBox.destroy(),this.skyAtmosphere=this.skyAtmosphere&&this.skyAtmosphere.destroy(),this._debugSphere=this._debugSphere&&this._debugSphere.destroy(),this.sun=this.sun&&this.sun.destroy(),this._sunPostProcess=this._sunPostProcess&&this._sunPostProcess.destroy(),this._depthPlane=this._depthPlane&&this._depthPlane.destroy(),this._transitioner=this._transitioner&&this._transitioner.destroy(),this._debugFrustumPlanes=this._debugFrustumPlanes&&this._debugFrustumPlanes.destroy(),this._brdfLutGenerator=this._brdfLutGenerator&&this._brdfLutGenerator.destroy(),this._picking=this._picking&&this._picking.destroy(),this._defaultView=this._defaultView&&this._defaultView.destroy(),this._view=void 0,this._removeCreditContainer&&this._canvas.parentNode.removeChild(this._creditContainer),this.postProcessStages=this.postProcessStages&&this.postProcessStages.destroy(),this._context=this._context&&this._context.destroy(),this._frameState.creditDisplay=this._frameState.creditDisplay&&this._frameState.creditDisplay.destroy(),(0,p.A)(this._performanceDisplay)&&(this._performanceDisplay=this._performanceDisplay&&this._performanceDisplay.destroy(),this._performanceContainer.parentNode.removeChild(this._performanceContainer)),this._removeRequestListenerCallback(),this._removeTaskProcessorListenerCallback();for(let e=0;e<this._removeGlobeCallbacks.length;++e)this._removeGlobeCallbacks[e]();return this._removeGlobeCallbacks.length=0,(0,m.A)(this)};const pt=Te},413285:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(41476),o=n(677354),r=n(769493),s=n(804701),a=n(57775);function c(){this._numSamples=1,this._colorFramebuffer=new s.A({depthStencil:!0,supportsDepthTexture:!0}),this._idFramebuffer=new s.A({depthStencil:!0,supportsDepthTexture:!0}),this._idClearColor=new i.A(0,0,0,0),this._clearCommand=new r.A({color:new i.A(0,0,0,0),depth:1,owner:this})}Object.defineProperties(c.prototype,{framebuffer:{get:function(){return this._colorFramebuffer.framebuffer}},idFramebuffer:{get:function(){return this._idFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._colorFramebuffer.getDepthStencilTexture()}}}),c.prototype.update=function(e,t,n,i){const o=t.width,r=t.height,s=n?e.halfFloatingPointTexture?a.A.HALF_FLOAT:a.A.FLOAT:a.A.UNSIGNED_BYTE;this._numSamples=i,this._colorFramebuffer.update(e,o,r,i,s),this._idFramebuffer.update(e,o,r)},c.prototype.clear=function(e,t,n){i.A.clone(n,this._clearCommand.color),i.A.clone(this._idClearColor,this._clearCommand.color),this._colorFramebuffer.clear(e,this._clearCommand,t),this._idFramebuffer.clear(e,this._clearCommand,t)},c.prototype.getFramebuffer=function(){return this._colorFramebuffer.framebuffer},c.prototype.getIdFramebuffer=function(){return this._idFramebuffer.framebuffer},c.prototype.prepareColorTextures=function(e){this._numSamples>1&&this._colorFramebuffer.prepareTextures(e)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){var e;return(e=this)._colorFramebuffer.destroy(),e._idFramebuffer.destroy(),(0,o.A)(this)};const l=c},619872:(e,t,n)=>{"use strict";n.d(t,{A:()=>Se});var i=n(267980),o=n(336946),r=n(369031),s=n(491446),a=n(677354),c=n(924290),l=n(367817),u=n(584164),d=n(811203),h=n(65891),A=n(666775),f=n(766067),p=n(86881),m=n(149785),_=n(543622),g=n(635577),y=n(62467);function b(e){r.A.typeOf.object("scene",e),this._scene=e,this._currentTweens=[],this._morphHandler=void 0,this._morphCancelled=!1,this._completeMorph=void 0,this._morphToOrthographic=!1}b.prototype.completeMorph=function(){(0,s.A)(this._completeMorph)&&this._completeMorph()},b.prototype.morphTo2D=function(e,t){(0,s.A)(this._completeMorph)&&this._completeMorph();const n=this._scene;this._previousMode=n.mode,this._morphToOrthographic=n.camera.frustum instanceof d.A,this._previousMode!==y.A.SCENE2D&&this._previousMode!==y.A.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,y.A.SCENE2D,!0),n._mode=y.A.MORPHING,n.camera._setTransform(u.A.IDENTITY),this._previousMode===y.A.COLUMBUS_VIEW?function(e,t){t*=.5;const n=e._scene,o=n.camera,r=i.A.clone(o.position,ie),a=i.A.clone(o.direction,oe),l=i.A.clone(o.up,re),d=i.A.negate(i.A.UNIT_Z,ae),h=i.A.clone(i.A.UNIT_Y,ce),A=se;if(t>0)i.A.clone(i.A.ZERO,se),A.z=5*n.mapProjection.ellipsoid.maximumRadius;else{i.A.clone(r,se);const e=ue;u.A.multiplyByPoint(g.A.TRANSFORM_2D,r,e.origin),u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D,a,e.direction);const t=n.globe;if((0,s.A)(t)){const o=t.pickWorldCoordinates(e,n,!0,de);(0,s.A)(o)&&(u.A.multiplyByPoint(g.A.TRANSFORM_2D_INVERSE,o,A),A.z+=i.A.distance(r,A))}}const f=le;f.right=.5*A.z,f.left=-f.right,f.top=f.right*(n.drawingBufferHeight/n.drawingBufferWidth),f.bottom=-f.top;const p=he;p.position=A,p.direction=d,p.up=h,p.frustum=f;const m=Ee(p);function _(e,t){e.position.z=t}R(e,m);const y=n.tweens.add({duration:t,easingFunction:c.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(r,A,e.time,o.position),te(a,d,e.time,o.direction),te(l,h,e.time,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right),o._adjustOrthographicFrustum(!0)},complete:function(){ne(e,t,p,_,m)}});e._currentTweens.push(y)}(this,e):function(e,t,n){t*=.5;const o=e._scene,r=o.camera,a=fe;if(t>0)i.A.clone(i.A.ZERO,a.position),a.position.z=5*n.maximumRadius,i.A.negate(i.A.UNIT_Z,a.direction),i.A.clone(i.A.UNIT_Y,a.up);else{n.cartesianToCartographic(r.positionWC,Ae),o.mapProjection.project(Ae,a.position),i.A.negate(i.A.UNIT_Z,a.direction),i.A.clone(i.A.UNIT_Y,a.up);const e=_e;i.A.clone(a.position2D,e.origin);const t=i.A.clone(r.directionWC,e.direction),c=n.scaleToGeodeticSurface(r.positionWC,ye),l=_.A.eastNorthUpToFixedFrame(c,n,ge);u.A.inverseTransformation(l,l),u.A.multiplyByPointAsVector(l,t,t),u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D,t,t);const d=o.globe;if((0,s.A)(d)){const t=d.pickWorldCoordinates(e,o,!0,me);if((0,s.A)(t)){const e=i.A.distance(a.position2D,t);t.x+=e,i.A.clone(t,a.position2D)}}}function c(e,t){e.position.x=t}u.A.multiplyByPoint(g.A.TRANSFORM_2D,a.position,a.position2D),u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D,a.direction,a.direction2D),u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D,a.up,a.up2D);const l=a.frustum;l.right=.5*a.position.z,l.left=-l.right,l.top=l.right*(o.drawingBufferHeight/o.drawingBufferWidth),l.bottom=-l.top;const d=pe;u.A.multiplyByPoint(g.A.TRANSFORM_2D_INVERSE,a.position2D,d.position),i.A.clone(a.direction,d.direction),i.A.clone(a.up,d.up),d.frustum=l;const h=Ee(d);R(e,h),ve(e,t,a,(function(){ne(e,t,a,c,h)}))}(this,e,t),0===e&&(0,s.A)(this._completeMorph)&&this._completeMorph())};const v=new i.A,T=new i.A,w=new i.A,E=new i.A,S=new i.A,C=new i.A,x=new i.A,I=new o.A,P=new u.A,D=new A.A,O=new d.A,L={position:void 0,direction:void 0,up:void 0,position2D:void 0,direction2D:void 0,up2D:void 0,frustum:void 0};b.prototype.morphToColumbusView=function(e,t){(0,s.A)(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode===y.A.COLUMBUS_VIEW||this._previousMode===y.A.MORPHING)return;this._scene.morphStart.raiseEvent(this,this._previousMode,y.A.COLUMBUS_VIEW,!0),n.camera._setTransform(u.A.IDENTITY);let o=v;const r=T,a=w;if(e>0)o.x=0,o.y=-1,o.z=1,o=i.A.multiplyByScalar(i.A.normalize(o,o),5*t.maximumRadius,o),i.A.negate(i.A.normalize(o,r),r),i.A.cross(i.A.UNIT_X,r,a);else{const e=n.camera;if(this._previousMode===y.A.SCENE2D)i.A.clone(e.position,o),o.z=e.frustum.right-e.frustum.left,i.A.negate(i.A.UNIT_Z,r),i.A.clone(i.A.UNIT_Y,a);else{i.A.clone(e.positionWC,o),i.A.clone(e.directionWC,r),i.A.clone(e.upWC,a);const s=t.scaleToGeodeticSurface(o,x),c=_.A.eastNorthUpToFixedFrame(s,t,P);u.A.inverseTransformation(c,c),n.mapProjection.project(t.cartesianToCartographic(o,I),o),u.A.multiplyByPointAsVector(c,r,r),u.A.multiplyByPointAsVector(c,a,a)}}let d;this._morphToOrthographic?(d=O,d.width=n.camera.frustum.right-n.camera.frustum.left,d.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight):(d=D,d.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,d.fov=l.A.toRadians(60));const h=L;h.position=o,h.direction=r,h.up=a,h.frustum=d;const A=function(e){return function(t){const n=t._scene;n._mode=y.A.COLUMBUS_VIEW,n.morphTime=y.A.getMorphTime(y.A.COLUMBUS_VIEW),F(t);const o=n.camera;(t._previousModeMode!==y.A.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,i.A.clone(e.position,o.position),i.A.clone(e.direction,o.direction),i.A.clone(e.up,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right));const r=o.frustum;n.frameState.useLogDepth&&(r.near=.1,r.far=1e10);const a=(0,s.A)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,y.A.COLUMBUS_VIEW,a)}}(h);R(this,A),this._previousMode===y.A.SCENE2D?function(e,t,n,o){t*=.5;const r=e._scene,s=r.camera,a=i.A.clone(n.position,K),l=i.A.clone(n.direction,Z),u=i.A.clone(n.up,ee);function d(){s.frustum=n.frustum.clone();const d=i.A.clone(s.position,J),h=i.A.clone(s.direction,Q),A=i.A.clone(s.up,$);d.z=a.z;const f=r.tweens.add({duration:t,easingFunction:c.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(d,a,e.time,s.position),te(h,l,e.time,s.direction),te(A,u,e.time,s.up),i.A.cross(s.direction,s.up,s.right),i.A.normalize(s.right,s.right)},complete:function(){o(e)}});e._currentTweens.push(f)}r._mode=y.A.MORPHING,e._morphToOrthographic?d():be(e,0,n,d)}(this,e,h,A):(h.position2D=u.A.multiplyByPoint(g.A.TRANSFORM_2D,o,E),h.direction2D=u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D,r,S),h.up2D=u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D,a,C),n._mode=y.A.MORPHING,ve(this,e,h,A)),0===e&&(0,s.A)(this._completeMorph)&&this._completeMorph()};const N={position:new i.A,direction:new i.A,up:new i.A,frustum:void 0},M=new A.A;function R(e,t){if(e._scene.completeMorphOnUserInput){e._morphHandler=new p.A(e._scene.canvas);const n=function(){e._morphCancelled=!0,e._scene.camera.cancelFlight(),t(e)};e._completeMorph=n,e._morphHandler.setInputAction(n,m.A.LEFT_DOWN),e._morphHandler.setInputAction(n,m.A.MIDDLE_DOWN),e._morphHandler.setInputAction(n,m.A.RIGHT_DOWN),e._morphHandler.setInputAction(n,m.A.WHEEL)}}function F(e){const t=e._currentTweens;for(let e=0;e<t.length;++e)t[e].cancelTween();e._currentTweens.length=0,e._morphHandler=e._morphHandler&&e._morphHandler.destroy()}b.prototype.morphTo3D=function(e,t){(0,s.A)(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode!==y.A.SCENE3D&&this._previousMode!==y.A.MORPHING){if(this._scene.morphStart.raiseEvent(this,this._previousMode,y.A.SCENE3D,!0),n._mode=y.A.MORPHING,n.camera._setTransform(u.A.IDENTITY),this._previousMode===y.A.SCENE2D)!function(e,t,n){t/=3;const o=e._scene,r=o.camera;let s,a;t>0?(s=N,i.A.fromDegrees(0,0,5*n.maximumRadius,n,s.position),i.A.negate(s.position,s.direction),i.A.normalize(s.direction,s.direction),i.A.clone(i.A.UNIT_Z,s.up)):(r.position.z=r.frustum.right-r.frustum.left,s=V(e,n)),e._morphToOrthographic?(a=X,a.aspectRatio=o.drawingBufferWidth/o.drawingBufferHeight,a.width=r.frustum.right-r.frustum.left):(a=M,a.aspectRatio=o.drawingBufferWidth/o.drawingBufferHeight,a.fov=l.A.toRadians(60)),s.frustum=a;const c=we(s);let u;R(e,c),u=e._morphToOrthographic?function(){Y(e,t,s,c)}:function(){be(e,t,s,(function(){Y(e,t,s,c)}))},t>0?(o._mode=y.A.SCENE2D,r.flyTo({duration:t,destination:i.A.fromDegrees(0,0,5*n.maximumRadius,n,K),complete:function(){o._mode=y.A.MORPHING,u()}})):u()}(this,e,t);else{let o,r;e>0?(o=N,i.A.fromDegrees(0,0,5*t.maximumRadius,t,o.position),i.A.negate(o.position,o.direction),i.A.normalize(o.direction,o.direction),i.A.clone(i.A.UNIT_Z,o.up)):o=V(this,t);const s=n.camera;s.frustum instanceof d.A?r=s.frustum.clone():(r=M,r.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,r.fov=l.A.toRadians(60)),o.frustum=r;const a=we(o);R(this,a),Y(this,e,o,a)}0===e&&(0,s.A)(this._completeMorph)&&this._completeMorph()}},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return F(this),(0,a.A)(this)};const B=new o.A,U=new i.A,k=new u.A;function V(e,t){const n=e._scene,i=n.camera,o=N,r=o.position,s=o.direction,a=o.up,c=n.mapProjection.unproject(i.position,B);t.cartographicToCartesian(c,r);const l=t.scaleToGeodeticSurface(r,U),d=_.A.eastNorthUpToFixedFrame(l,t,k);return u.A.multiplyByPointAsVector(d,i.direction,s),u.A.multiplyByPointAsVector(d,i.up,a),o}const H=new i.A,z=new i.A,G=new i.A,j=new i.A,W=new i.A,q=new i.A;function Y(e,t,n,o){t*=.5;const r=e._scene,s=r.camera,a=i.A.clone(s.position,H),l=i.A.clone(s.direction,z),d=i.A.clone(s.up,G),h=u.A.multiplyByPoint(g.A.TRANSFORM_2D_INVERSE,n.position,j),A=u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D_INVERSE,n.direction,W),f=u.A.multiplyByPointAsVector(g.A.TRANSFORM_2D_INVERSE,n.up,q),p=r.tweens.add({duration:t,easingFunction:c.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(a,h,e.time,s.position),te(l,A,e.time,s.direction),te(d,f,e.time,s.up),i.A.cross(s.direction,s.up,s.right),i.A.normalize(s.right,s.right)},complete:function(){Te(e,r,0,1,t,o)}});e._currentTweens.push(p)}const X=new d.A,J=new i.A,Q=new i.A,$=new i.A,K=new i.A,Z=new i.A,ee=new i.A;function te(e,t,n,o){return i.A.lerp(e,t,n,o)}function ne(e,t,n,i,o){const r=e._scene,s=r.camera;if(s.frustum instanceof d.A)return;const a=s.frustum.fov,u=.5*l.A.RADIANS_PER_DEGREE,h=n.position.z*Math.tan(.5*a);s.frustum.far=h/Math.tan(.5*u)+1e7;const A=r.tweens.add({duration:t,easingFunction:c.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){s.frustum.fov=l.A.lerp(a,u,e.time);const t=h/Math.tan(.5*s.frustum.fov);i(s,t)},complete:function(){s.frustum=n.frustum.clone(),o(e)}});e._currentTweens.push(A)}const ie=new i.A,oe=new i.A,re=new i.A,se=new i.A,ae=new i.A,ce=new i.A,le=new h.A,ue=new f.A,de=new i.A,he={position:void 0,direction:void 0,up:void 0,frustum:void 0},Ae=new o.A,fe={position:new i.A,direction:new i.A,up:new i.A,position2D:new i.A,direction2D:new i.A,up2D:new i.A,frustum:new h.A},pe={position:new i.A,direction:new i.A,up:new i.A,frustum:void 0},me=new i.A,_e=new f.A,ge=new u.A,ye=new i.A;function be(e,t,n,i){const o=e._scene,r=o.camera,s=r.frustum.right-r.frustum.left;r.frustum=n.frustum.clone();const a=r.frustum.fov,u=.5*l.A.RADIANS_PER_DEGREE,d=s*Math.tan(.5*a);r.frustum.far=d/Math.tan(.5*u)+1e7,r.frustum.fov=u;const h=o.tweens.add({duration:t,easingFunction:c.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){r.frustum.fov=l.A.lerp(u,a,e.time),r.position.z=d/Math.tan(.5*r.frustum.fov)},complete:function(){i(e)}});e._currentTweens.push(h)}function ve(e,t,n,o){const r=e._scene,s=r.camera,a=i.A.clone(s.position,J),l=i.A.clone(s.direction,Q),u=i.A.clone(s.up,$),d=i.A.clone(n.position2D,K),h=i.A.clone(n.direction2D,Z),A=i.A.clone(n.up2D,ee),f=r.tweens.add({duration:t,easingFunction:c.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(a,d,e.time,s.position),te(l,h,e.time,s.direction),te(u,A,e.time,s.up),i.A.cross(s.direction,s.up,s.right),i.A.normalize(s.right,s.right),s._adjustOrthographicFrustum(!0)},complete:function(){Te(e,r,1,0,t,o)}});e._currentTweens.push(f)}function Te(e,t,n,i,o,r){const a={object:t,property:"morphTime",startValue:n,stopValue:i,duration:o,easingFunction:c.A.QUARTIC_OUT};(0,s.A)(r)&&(a.complete=function(){r(e)});const l=t.tweens.addProperty(a);e._currentTweens.push(l)}function we(e){return function(t){const n=t._scene;n._mode=y.A.SCENE3D,n.morphTime=y.A.getMorphTime(y.A.SCENE3D),F(t);const o=n.camera;(t._previousMode!==y.A.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,i.A.clone(e.position,o.position),i.A.clone(e.direction,o.direction),i.A.clone(e.up,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right),o.frustum=e.frustum.clone());const r=o.frustum;n.frameState.useLogDepth&&(r.near=.1,r.far=1e10);const a=(0,s.A)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,y.A.SCENE3D,a)}}function Ee(e){return function(t){const n=t._scene;n._mode=y.A.SCENE2D,n.morphTime=y.A.getMorphTime(y.A.SCENE2D),F(t);const o=n.camera;i.A.clone(e.position,o.position),o.position.z=2*n.mapProjection.ellipsoid.maximumRadius,i.A.clone(e.direction,o.direction),i.A.clone(e.up,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right),o.frustum=e.frustum.clone();const r=(0,s.A)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,y.A.SCENE2D,r)}}const Se=b},373749:(e,t,n)=>{"use strict";n.d(t,{A:()=>nn});var i=n(434067),o=n(267980),r=n(626809),s=n(336946),a=n(419061),c=n(491446),l=n(677354),u=n(605971),d=n(610750),h=n(953612),A=n(150429),f=n(267465),p=n(367817),m=n(331185),_=n(584164),g=n(811203),y=n(257941),b=n(99479),v=n(766067),T=n(680220),w=n(543622),E=n(985888),S=n(927181),C=n(77879),x=n(62467),I=n(78173),P=n(584247);function D(e){if(!(0,c.A)(e))throw new u.A("scene is required.");this.enableInputs=!0,this.enableTranslate=!0,this.enableZoom=!0,this.enableRotate=!0,this.enableTilt=!0,this.enableLook=!0,this.inertiaSpin=.9,this.inertiaTranslate=.9,this.inertiaZoom=.8,this.maximumMovementRatio=.1,this.bounceAnimationTime=3,this.minimumZoomDistance=1,this.maximumZoomDistance=Number.POSITIVE_INFINITY,this.translateEventTypes=S.A.LEFT_DRAG,this.zoomEventTypes=[S.A.RIGHT_DRAG,S.A.WHEEL,S.A.PINCH],this.rotateEventTypes=S.A.LEFT_DRAG,this.tiltEventTypes=[S.A.MIDDLE_DRAG,S.A.PINCH,{eventType:S.A.LEFT_DRAG,modifier:f.A.CTRL},{eventType:S.A.RIGHT_DRAG,modifier:f.A.CTRL}],this.lookEventTypes={eventType:S.A.LEFT_DRAG,modifier:f.A.SHIFT},this.minimumPickingTerrainHeight=15e4,this._minimumPickingTerrainHeight=this.minimumPickingTerrainHeight,this.minimumPickingTerrainDistanceWithInertia=4e3,this.minimumCollisionTerrainHeight=15e3,this._minimumCollisionTerrainHeight=this.minimumCollisionTerrainHeight,this.minimumTrackBallHeight=75e5,this._minimumTrackBallHeight=this.minimumTrackBallHeight,this.enableCollisionDetection=!0,this._scene=e,this._globe=void 0,this._ellipsoid=void 0,this._aggregator=new E.A(e.canvas),this._lastInertiaSpinMovement=void 0,this._lastInertiaZoomMovement=void 0,this._lastInertiaTranslateMovement=void 0,this._lastInertiaTiltMovement=void 0,this._inertiaDisablers={_lastInertiaZoomMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement","_lastInertiaTiltMovement"],_lastInertiaTiltMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement"]},this._tweens=new P.A,this._tween=void 0,this._horizontalRotationAxis=void 0,this._tiltCenterMousePosition=new i.A(-1,-1),this._tiltCenter=new o.A,this._rotateMousePosition=new i.A(-1,-1),this._rotateStartPosition=new o.A,this._strafeStartPosition=new o.A,this._strafeMousePosition=new i.A,this._strafeEndMousePosition=new i.A,this._zoomMouseStart=new i.A(-1,-1),this._zoomWorldPosition=new o.A,this._useZoomWorldPosition=!1,this._panLastMousePosition=new i.A,this._panLastWorldPosition=new o.A,this._tiltCVOffMap=!1,this._looking=!1,this._rotating=!1,this._strafing=!1,this._zoomingOnVector=!1,this._zoomingUnderground=!1,this._rotatingZoom=!1,this._adjustedHeightForTerrain=!1,this._cameraUnderground=!1;const t=e.mapProjection;this._maxCoord=t.project(new s.A(Math.PI,p.A.PI_OVER_TWO)),this._zoomFactor=5,this._rotateFactor=void 0,this._rotateRateRangeAdjustment=void 0,this._maximumRotateRate=1.77,this._minimumRotateRate=2e-4,this._minimumZoomRate=20,this._maximumZoomRate=5906376272e3,this._minimumUndergroundPickDistance=2e3,this._maximumUndergroundPickDistance=1e4}function O(e,t,n,o,r,s,a){let l=s[a];(0,c.A)(l)||(l=s[a]={startPosition:new i.A,endPosition:new i.A,motion:new i.A,inertiaEnabled:!0});const u=e.getButtonPressTime(t,n),d=e.getButtonReleaseTime(t,n),h=u&&d&&(d.getTime()-u.getTime())/1e3,A=new Date,f=d&&(A.getTime()-d.getTime())/1e3;if(u&&d&&h<.4){const a=function(e,t){if(e<0)return 0;const n=25*(1-t);return Math.exp(-n*e)}(f,o),u=e.getLastMovement(t,n);if(!(0,c.A)(u)||(m=u,i.A.equalsEpsilon(m.startPosition,m.endPosition,p.A.EPSILON14))||!l.inertiaEnabled)return;if(l.motion.x=.5*(u.endPosition.x-u.startPosition.x),l.motion.y=.5*(u.endPosition.y-u.startPosition.y),l.startPosition=i.A.clone(u.startPosition,l.startPosition),l.endPosition=i.A.multiplyByScalar(l.motion,a,l.endPosition),l.endPosition=i.A.add(l.startPosition,l.endPosition,l.endPosition),isNaN(l.endPosition.x)||isNaN(l.endPosition.y)||i.A.distance(l.startPosition,l.endPosition)<.5)return;e.isButtonDown(t,n)||r(s,e.getStartMousePosition(t,n),l)}var m}function L(e,t){if((0,c.A)(t)){let n=e[t];(0,c.A)(n)&&(n.inertiaEnabled=!0);const i=e._inertiaDisablers[t];if((0,c.A)(i)){const t=i.length;for(let o=0;o<t;++o)n=e[i[o]],(0,c.A)(n)&&(n.inertiaEnabled=!1)}}}const N=[];function M(e,t,n,i,o,r){if(!(0,c.A)(n))return;const s=e._aggregator;Array.isArray(n)||(N[0]=n,n=N);const a=n.length;for(let l=0;l<a;++l){const a=n[l],u=(0,c.A)(a.eventType)?a.eventType:a,d=a.modifier,h=s.isMoving(u,d)&&s.getMovement(u,d),A=s.getStartMousePosition(u,d);e.enableInputs&&t&&(h?(i(e,A,h),L(e,r)):o<1&&O(s,u,d,o,i,e,r))}}const R=new v.A,F=new o.A,B=new i.A,U=new o.A,k=new i.A,V=new o.A,H=new o.A,z=new o.A,G=new o.A,j=new o.A,W=new o.A,q=new o.A,Y=new o.A,X=new o.A,J=new o.A,Q=new o.A,$=new o.A,K=new o.A,Z=new o.A,ee=new o.A,te=new o.A,ne=new o.A,ie=new o.A,oe={orientation:new h.A};function re(e,t,n,r,s,l){let u=1;(0,c.A)(l)&&(u=p.A.clamp(Math.abs(l),.25,1));const d=n.endPosition.y-n.startPosition.y,h=d>0?e.minimumZoomDistance*u:0,A=e.maximumZoomDistance;let f=r*(s-h);f=p.A.clamp(f,e._minimumZoomRate,e._maximumZoomRate);let m=d/e._scene.canvas.clientHeight;m=Math.min(m,e.maximumMovementRatio);let _=f*m;if(e.enableCollisionDetection||0===e.minimumZoomDistance||!(0,c.A)(e._globe)){if(_>0&&Math.abs(s-h)<1)return;if(_<0&&Math.abs(s-A)<1)return;s-_<h?_=s-h-1:s-_>A&&(_=s-A)}const y=e._scene,b=y.camera,v=y.mode,T=oe.orientation;if(T.heading=b.heading,T.pitch=b.pitch,T.roll=b.roll,b.frustum instanceof g.A)return void(Math.abs(_)>0&&(b.zoomIn(_),b._adjustOrthographicFrustum(!0)));const w=(0,a.A)(n.inertiaEnabled,i.A.equals(t,e._zoomMouseStart));let E,S=e._zoomingOnVector,C=e._rotatingZoom;if(w||(e._zoomMouseStart=i.A.clone(t,e._zoomMouseStart),(0,c.A)(e._globe)&&v===x.A.SCENE2D?(E=b.getPickRay(t,R).origin,E=o.A.fromElements(E.y,E.z,E.x)):(0,c.A)(e._globe)&&(E=_e(e,t,F)),(0,c.A)(E)?(e._useZoomWorldPosition=!0,e._zoomWorldPosition=o.A.clone(E,e._zoomWorldPosition)):e._useZoomWorldPosition=!1,S=e._zoomingOnVector=!1,C=e._rotatingZoom=!1,e._zoomingUnderground=e._cameraUnderground),!e._useZoomWorldPosition)return void b.zoomIn(_);let P=v===x.A.COLUMBUS_VIEW;if(b.positionCartographic.height<2e6&&(C=!0),!w||C){if(v===x.A.SCENE2D){const n=e._zoomWorldPosition,i=b.position;if(!o.A.equals(n,i)&&b.positionCartographic.height<2*e._maxCoord.x){const r=b.position.x,s=o.A.subtract(n,i,U);o.A.normalize(s,s);const a=o.A.distance(n,i)*_/(.5*b.getMagnitude());b.move(s,.5*a),(b.position.x<0&&r>0||b.position.x>0&&r<0)&&(E=b.getPickRay(t,R).origin,E=o.A.fromElements(E.y,E.z,E.x),e._zoomWorldPosition=o.A.clone(E,e._zoomWorldPosition))}}else if(v===x.A.SCENE3D){const t=o.A.normalize(b.position,j);if(e._cameraUnderground||e._zoomingUnderground||b.positionCartographic.height<3e3&&Math.abs(o.A.dot(b.direction,t))<.6)P=!0;else{const n=y.canvas,i=k;i.x=n.clientWidth/2,i.y=n.clientHeight/2;const r=_e(e,i,V);if((0,c.A)(r))if(b.positionCartographic.height<1e6){if(!(o.A.dot(b.direction,t)>=-.5)){const n=q;o.A.clone(b.position,n);const i=e._zoomWorldPosition;let r=W;if(r=o.A.normalize(i,r),o.A.dot(r,t)<0)return;const s=ee,a=J;o.A.clone(b.direction,a),o.A.add(n,o.A.multiplyByScalar(a,1e3,te),s);const c=Q,l=$;o.A.subtract(i,n,c),o.A.normalize(c,l);const u=o.A.dot(t,l);if(u>=0)return void(e._zoomMouseStart.x=-1);const d=Math.acos(-u),h=o.A.magnitude(n),A=o.A.magnitude(i),f=h-_,m=o.A.magnitude(c),g=Math.asin(p.A.clamp(m/A*Math.sin(d),-1,1))-Math.asin(p.A.clamp(f/A*Math.sin(d),-1,1))+d,y=Y;o.A.normalize(n,y);let v=X;v=o.A.cross(l,y,v),v=o.A.normalize(v,v),o.A.normalize(o.A.cross(y,v,te),a),o.A.multiplyByScalar(o.A.normalize(s,te),o.A.magnitude(s)-_,s),o.A.normalize(n,n),o.A.multiplyByScalar(n,f,n);const T=K;o.A.multiplyByScalar(o.A.add(o.A.multiplyByScalar(y,Math.cos(g)-1,ne),o.A.multiplyByScalar(a,Math.sin(g),ie),te),f,T),o.A.add(n,T,n),o.A.normalize(s,y),o.A.normalize(o.A.cross(y,v,te),a);const w=Z;return o.A.multiplyByScalar(o.A.add(o.A.multiplyByScalar(y,Math.cos(g)-1,ne),o.A.multiplyByScalar(a,Math.sin(g),ie),te),o.A.magnitude(s),w),o.A.add(s,w,s),o.A.clone(n,b.position),o.A.normalize(o.A.subtract(s,n,te),b.direction),o.A.clone(b.direction,b.direction),o.A.cross(b.direction,b.up,b.right),o.A.cross(b.right,b.direction,b.up),void b.setView(oe)}P=!0}else{const t=o.A.normalize(r,H),n=o.A.normalize(e._zoomWorldPosition,z),i=o.A.dot(n,t);if(i>0&&i<1){const e=p.A.acosClamped(i),r=o.A.cross(n,t,G),s=_/(Math.abs(e)>p.A.toRadians(20)?.75*b.positionCartographic.height:b.positionCartographic.height-_);b.rotate(r,e*s)}}else P=!0}}e._rotatingZoom=!P}if(!w&&P||S){let n;const r=I.A.wgs84ToWindowCoordinates(y,e._zoomWorldPosition,B);n=v!==x.A.COLUMBUS_VIEW&&i.A.equals(t,e._zoomMouseStart)&&(0,c.A)(r)?b.getPickRay(r,R):b.getPickRay(t,R);const s=n.direction;v!==x.A.COLUMBUS_VIEW&&v!==x.A.SCENE2D||o.A.fromElements(s.y,s.z,s.x,s),b.move(s,_),e._zoomingOnVector=!0}else b.zoomIn(_);e._cameraUnderground||b.setView(oe)}const se=new v.A,ae=new v.A,ce=new o.A;function le(e,t,n){const i=e._scene.camera;let r=i.getPickRay(n.startPosition,se).origin,s=i.getPickRay(n.endPosition,ae).origin;r=o.A.fromElements(r.y,r.z,r.x,r),s=o.A.fromElements(s.y,s.z,s.x,s);const a=o.A.subtract(r,s,ce),c=o.A.magnitude(a);c>0&&(o.A.normalize(a,a),i.move(a,c))}function ue(e,t,n){(0,c.A)(n.distance)&&(n=n.distance);const i=e._scene.camera;re(e,t,n,e._zoomFactor,i.getMagnitude())}const de=new i.A,he=new i.A;function Ae(e,t,n){if((0,c.A)(n.angleAndHeight))return void function(e,t,n){let i=e._rotateFactor*e._rotateRateRangeAdjustment;i>e._maximumRotateRate&&(i=e._maximumRotateRate),i<e._minimumRotateRate&&(i=e._minimumRotateRate);const o=e._scene,r=o.camera,s=o.canvas;let a=(n.endPosition.x-n.startPosition.x)/s.clientWidth;a=Math.min(a,e.maximumMovementRatio);const c=i*a*Math.PI*4;r.twistRight(c)}(e,0,n.angleAndHeight);const o=e._scene,r=o.camera,s=o.canvas,a=s.clientWidth,l=s.clientHeight;let u=de;u.x=2/a*n.startPosition.x-1,u.y=2/l*(l-n.startPosition.y)-1,u=i.A.normalize(u,u);let d=he;d.x=2/a*n.endPosition.x-1,d.y=2/l*(l-n.endPosition.y)-1,d=i.A.normalize(d,d);let h=p.A.acosClamped(u.x);u.y<0&&(h=p.A.TWO_PI-h);let A=p.A.acosClamped(d.x);d.y<0&&(A=p.A.TWO_PI-A);const f=A-h;r.twistRight(f)}const fe=new v.A,pe=new o.A,me=new o.A;function _e(e,t,n){const i=e._scene,r=e._globe,s=i.camera;let a;if(i.pickPositionSupported&&(a=i.pickPositionWorldCoordinates(t,pe)),!(0,c.A)(r))return o.A.clone(a,n);const l=!e._cameraUnderground,u=s.getPickRay(t,fe),d=r.pickWorldCoordinates(u,i,l,me);return((0,c.A)(a)?o.A.distance(a,s.positionWC):Number.POSITIVE_INFINITY)<((0,c.A)(d)?o.A.distance(d,s.positionWC):Number.POSITIVE_INFINITY)?o.A.clone(a,n):o.A.clone(d,n)}const ge=new s.A;function ye(e){const t=e._ellipsoid,n=e._scene,i=n.camera;let o=0;if(n.mode===x.A.SCENE3D){const e=t.cartesianToCartographic(i.position,ge);(0,c.A)(e)&&(o=e.height)}else o=i.position.z;const r=(0,a.A)(e._scene.globeHeight,0);return Math.abs(r-o)}const be=new o.A;function ve(e,t){const n=t.origin,i=t.direction,r=ye(e),s=o.A.normalize(n,be);let a=Math.abs(o.A.dot(s,i));return a=2*Math.max(a,.5),r*a}function Te(e,t,n,i){let r=o.A.distance(t.origin,n);const s=ye(e);return r>p.A.clamp(5*s,e._minimumUndergroundPickDistance,e._maximumUndergroundPickDistance)&&(r=Math.min(r,s/5),r=Math.max(r,100)),v.A.getPoint(t,r,i)}function we(e,t,n,i){let r;return(0,c.A)(n)?(r=o.A.distance(t.origin,n),r>e._maximumUndergroundPickDistance&&(r=ye(e))):r=ye(e),v.A.getPoint(t,r,i)}const Ee=new i.A;function Se(e,t){const n=t.endPosition,o=i.A.subtract(t.endPosition,t.startPosition,Ee),r=e._strafeEndMousePosition;i.A.add(r,o,r),t.endPosition=r,rt(e,t,e._strafeStartPosition),t.endPosition=n}const Ce=new v.A,xe=new v.A,Ie=new o.A,Pe=new o.A,De=new o.A,Oe=new o.A,Le=new y.A(o.A.UNIT_X,0),Ne=new i.A,Me=new i.A;function Re(e,t,n){if(o.A.equals(t,e._translateMousePosition)||(e._looking=!1),o.A.equals(t,e._strafeMousePosition)||(e._strafing=!1),e._looking)return void Qt(e,0,n);if(e._strafing)return void Se(e,n);const r=e._scene.camera,s=e._cameraUnderground,a=i.A.clone(n.startPosition,Ne),l=i.A.clone(n.endPosition,Me);let u=r.getPickRay(a,Ce);const d=o.A.clone(o.A.ZERO,Oe),h=o.A.UNIT_X;let f;if(r.position.z<e._minimumPickingTerrainHeight&&(f=_e(e,a,Ie),(0,c.A)(f)&&(d.x=f.x)),s||d.x>r.position.z&&(0,c.A)(f)){let r=f;return s&&(r=we(e,u,f,Ie)),i.A.clone(t,e._strafeMousePosition),i.A.clone(t,e._strafeEndMousePosition),o.A.clone(r,e._strafeStartPosition),e._strafing=!0,void rt(e,n,e._strafeStartPosition)}const m=y.A.fromPointNormal(d,h,Le);u=r.getPickRay(a,Ce);const _=A.A.rayPlane(u,m,Ie),g=r.getPickRay(l,xe),b=A.A.rayPlane(g,m,Pe);if(!(0,c.A)(_)||!(0,c.A)(b))return e._looking=!0,Qt(e,0,n),void i.A.clone(t,e._translateMousePosition);const v=o.A.subtract(_,b,De),T=v.x;v.x=v.y,v.y=v.z,v.z=T;const w=o.A.magnitude(v);w>p.A.EPSILON6&&(o.A.normalize(v,v),r.move(v,w))}const Fe=new i.A,Be=new v.A,Ue=new o.A,ke=new o.A,Ve=new _.A,He=new _.A,ze=new o.A,Ge=new y.A(o.A.UNIT_X,0),je=new o.A,We=new s.A,qe=new _.A,Ye=new b.A,Xe=new m.A,Je=new o.A;function Qe(e,t,n){if((0,c.A)(n.angleAndHeight)&&(n=n.angleAndHeight),i.A.equals(t,e._tiltCenterMousePosition)||(e._tiltCVOffMap=!1,e._looking=!1),e._looking)return void Qt(e,0,n);const r=e._scene.camera;e._tiltCVOffMap||!e.onMap()||Math.abs(r.position.z)>e._minimumPickingTerrainHeight?(e._tiltCVOffMap=!0,function(e,t,n){const r=e._scene,s=r.camera,a=r.canvas,l=Fe;l.x=a.clientWidth/2,l.y=a.clientHeight/2;const u=s.getPickRay(l,Be),h=o.A.UNIT_X,A=u.origin,f=u.direction;let m;const g=o.A.dot(h,f);if(Math.abs(g)>p.A.EPSILON6&&(m=-o.A.dot(h,A)/g),!(0,c.A)(m)||m<=0)return e._looking=!0,Qt(e,0,n),void i.A.clone(t,e._tiltCenterMousePosition);const y=o.A.multiplyByScalar(f,m,Ue);o.A.add(A,y,y);const b=r.mapProjection,v=b.ellipsoid;o.A.fromElements(y.y,y.z,y.x,y);const T=b.unproject(y,We);v.cartographicToCartesian(T,y);const E=w.A.eastNorthUpToFixedFrame(y,v,Ve),S=e._globe,C=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const x=_.A.clone(s.transform,qe);s._setTransform(E),ft(e,0,n,o.A.UNIT_Z),s._setTransform(x),e._globe=S,e._ellipsoid=C;const I=C.maximumRadius;e._rotateFactor=1/I,e._rotateRateRangeAdjustment=I}(e,t,n)):function(e,t,n){const r=e._scene,s=r.camera,a=e._cameraUnderground;let l,u;const h=o.A.UNIT_X;if(i.A.equals(t,e._tiltCenterMousePosition))l=o.A.clone(e._tiltCenter,Ue);else{if(s.position.z<e._minimumPickingTerrainHeight&&(l=_e(e,t,Ue)),!(0,c.A)(l)){u=s.getPickRay(t,Be);const r=u.origin,a=u.direction;let d;const A=o.A.dot(h,a);if(Math.abs(A)>p.A.EPSILON6&&(d=-o.A.dot(h,r)/A),!(0,c.A)(d)||d<=0)return e._looking=!0,Qt(e,0,n),void i.A.clone(t,e._tiltCenterMousePosition);l=o.A.multiplyByScalar(a,d,Ue),o.A.add(r,l,l)}a&&((0,c.A)(u)||(u=s.getPickRay(t,Be)),Te(e,u,l,l)),i.A.clone(t,e._tiltCenterMousePosition),o.A.clone(l,e._tiltCenter)}const f=r.canvas,g=Fe;g.x=f.clientWidth/2,g.y=e._tiltCenterMousePosition.y,u=s.getPickRay(g,Be);const v=o.A.clone(o.A.ZERO,ze);v.x=l.x;const T=y.A.fromPointNormal(v,h,Ge),E=A.A.rayPlane(u,T,ke),S=s._projection,C=S.ellipsoid;o.A.fromElements(l.y,l.z,l.x,l);let x=S.unproject(l,We);C.cartographicToCartesian(x,l);const I=w.A.eastNorthUpToFixedFrame(l,C,Ve);let P;(0,c.A)(E)?(o.A.fromElements(E.y,E.z,E.x,E),x=S.unproject(E,We),C.cartographicToCartesian(x,E),P=w.A.eastNorthUpToFixedFrame(E,C,He)):P=I;const D=e._globe,O=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let L=o.A.UNIT_Z;const N=_.A.clone(s.transform,qe);s._setTransform(I);const M=o.A.cross(o.A.UNIT_Z,o.A.normalize(s.position,je),je),R=o.A.dot(s.right,M);if(ft(e,0,n,L,!1,!0),s._setTransform(P),R<0){const t=n.startPosition.y-n.endPosition.y;(a&&t<0||!a&&t>0)&&(L=void 0);const i=s.constrainedAxis;s.constrainedAxis=void 0,ft(e,0,n,L,!0,!1),s.constrainedAxis=i}else ft(e,0,n,L,!0,!1);if((0,c.A)(s.constrainedAxis)){const e=o.A.cross(s.direction,s.constrainedAxis,Je);o.A.equalsEpsilon(e,o.A.ZERO,p.A.EPSILON6)||(o.A.dot(e,s.right)<0&&o.A.negate(e,e),o.A.cross(e,s.direction,s.up),o.A.cross(s.direction,s.up,s.right),o.A.normalize(s.up,s.up),o.A.normalize(s.right,s.right))}s._setTransform(N),e._globe=D,e._ellipsoid=O;const F=O.maximumRadius;e._rotateFactor=1/F,e._rotateRateRangeAdjustment=F;const B=o.A.clone(s.positionWC,je);if(e.enableCollisionDetection&&Zt(e),!o.A.equals(s.positionWC,B)){s._setTransform(P),s.worldToCameraCoordinatesPoint(B,B);const e=o.A.magnitudeSquared(B);o.A.magnitudeSquared(s.position)>e&&(o.A.normalize(s.position,s.position),o.A.multiplyByScalar(s.position,Math.sqrt(e),s.position));const t=o.A.angleBetween(B,s.position),n=o.A.cross(B,s.position,B);o.A.normalize(n,n);const i=b.A.fromAxisAngle(n,t,Ye),r=m.A.fromQuaternion(i,Xe);m.A.multiplyByVector(r,s.direction,s.direction),m.A.multiplyByVector(r,s.up,s.up),o.A.cross(s.direction,s.up,s.right),o.A.cross(s.right,s.direction,s.up),s._setTransform(N)}}(e,t,n)}const $e=new i.A,Ke=new v.A,Ze=new o.A;function et(e,t,n){(0,c.A)(n.distance)&&(n=n.distance);const i=e._scene,r=i.camera,s=i.canvas,a=e._cameraUnderground;let l;a?l=t:(l=$e,l.x=s.clientWidth/2,l.y=s.clientHeight/2);const u=r.getPickRay(l,Ke),d=u.origin,h=u.direction;let A,f;if(r.position.z<e._minimumPickingTerrainHeight&&(A=_e(e,l,Ze)),(0,c.A)(A)&&(f=o.A.distance(d,A)),a){const t=ve(e,u);f=(0,c.A)(f)?Math.min(f,t):t}if(!(0,c.A)(f)){const e=o.A.UNIT_X;f=-o.A.dot(e,d)/o.A.dot(e,h)}re(e,t,n,e._zoomFactor,f)}const tt=new v.A,nt=new y.A(o.A.UNIT_X,0),it=new o.A,ot=new o.A;function rt(e,t,n){const i=e._scene,r=i.camera,s=r.getPickRay(t.endPosition,tt);let a=o.A.clone(r.direction,ot);i.mode===x.A.COLUMBUS_VIEW&&o.A.fromElements(a.z,a.x,a.y,a);const l=y.A.fromPointNormal(n,a,nt),u=A.A.rayPlane(s,l,it);(0,c.A)(u)&&(a=o.A.subtract(n,u,a),i.mode===x.A.COLUMBUS_VIEW&&o.A.fromElements(a.y,a.z,a.x,a),o.A.add(r.position,a,r.position))}const st=new o.A,at=new s.A,ct=new o.A,lt=new d.A,ut=new o.A,dt=new o.A,ht=new o.A;function At(e,t,n){const r=e._scene.camera,s=e._cameraUnderground;let a,l,u=e._ellipsoid;if(!_.A.equals(r.transform,_.A.IDENTITY))return void ft(e,0,n);const h=u.geodeticSurfaceNormal(r.position,ut);if(i.A.equals(t,e._rotateMousePosition)){if(e._looking)Qt(e,0,n,h);else if(e._rotating)ft(e,0,n);else if(e._strafing)Se(e,n);else{if(o.A.magnitude(r.position)<o.A.magnitude(e._rotateStartPosition))return;a=o.A.magnitude(e._rotateStartPosition),l=ct,l.x=l.y=l.z=a,u=d.A.fromCartesian3(l,lt),Ct(e,0,n,u)}return}e._looking=!1,e._rotating=!1,e._strafing=!1;const A=u.cartesianToCartographic(r.positionWC,at).height,f=e._globe;if((0,c.A)(f)&&A<e._minimumPickingTerrainHeight){const A=_e(e,n.startPosition,ht);if((0,c.A)(A)){let c=!1;const h=r.getPickRay(n.startPosition,fe);if(s)c=!0,we(e,h,A,A);else{const e=u.geodeticSurfaceNormal(A,dt);c=!!(Math.abs(o.A.dot(h.direction,e))<.05)||o.A.magnitude(r.position)<o.A.magnitude(A)}c?(i.A.clone(t,e._strafeEndMousePosition),o.A.clone(A,e._strafeStartPosition),e._strafing=!0,rt(e,n,e._strafeStartPosition)):(a=o.A.magnitude(A),l=ct,l.x=l.y=l.z=a,u=d.A.fromCartesian3(l,lt),Ct(e,0,n,u),o.A.clone(A,e._rotateStartPosition))}else e._looking=!0,Qt(e,0,n,h)}else(0,c.A)(r.pickEllipsoid(n.startPosition,e._ellipsoid,st))?(Ct(e,0,n,e._ellipsoid),o.A.clone(st,e._rotateStartPosition)):A>e._minimumTrackBallHeight?(e._rotating=!0,ft(e,0,n)):(e._looking=!0,Qt(e,0,n,h));i.A.clone(t,e._rotateMousePosition)}function ft(e,t,n,i,r,s){r=(0,a.A)(r,!1),s=(0,a.A)(s,!1);const l=e._scene,u=l.camera,d=l.canvas,h=u.constrainedAxis;(0,c.A)(i)&&(u.constrainedAxis=i);const A=o.A.magnitude(u.position);let f=e._rotateFactor*(A-e._rotateRateRangeAdjustment);f>e._maximumRotateRate&&(f=e._maximumRotateRate),f<e._minimumRotateRate&&(f=e._minimumRotateRate);let p=(n.startPosition.x-n.endPosition.x)/d.clientWidth,m=(n.startPosition.y-n.endPosition.y)/d.clientHeight;p=Math.min(p,e.maximumMovementRatio),m=Math.min(m,e.maximumMovementRatio);const _=f*p*Math.PI*2,g=f*m*Math.PI;r||u.rotateRight(_),s||u.rotateUp(g),u.constrainedAxis=h}const pt=r.A.clone(r.A.UNIT_W),mt=r.A.clone(r.A.UNIT_W),_t=new o.A,gt=new o.A,yt=new o.A,bt=new o.A,vt=new i.A,Tt=new i.A,wt=new i.A,Et=new i.A,St=new v.A;function Ct(e,t,n,r){const s=e._scene,a=s.camera,l=i.A.clone(n.startPosition,vt),u=i.A.clone(n.endPosition,Tt),d=r.cartesianToCartographic(a.positionWC,at).height;let h,A;if(!n.inertiaEnabled&&d<e._minimumPickingTerrainHeight&&(h=o.A.clone(e._panLastWorldPosition,pt),(0,c.A)(e._globe)||i.A.equalsEpsilon(l,e._panLastMousePosition)||(h=_e(e,l,pt)),!(0,c.A)(e._globe)&&(0,c.A)(h))){const t=o.A.subtract(h,a.positionWC,gt),n=o.A.multiplyByScalar(a.directionWC,o.A.dot(a.directionWC,t),gt),r=o.A.magnitude(n),d=a.frustum.getPixelDimensions(s.drawingBufferWidth,s.drawingBufferHeight,r,s.pixelRatio,Et),f=i.A.subtract(u,l,wt),p=o.A.multiplyByScalar(a.rightWC,f.x*d.x,gt),m=o.A.normalize(a.positionWC,j),_=a.getPickRay(u,St).direction,g=o.A.subtract(_,o.A.projectVector(_,a.rightWC,yt),yt),y=o.A.angleBetween(g,a.directionWC);let b=1;(0,c.A)(a.frustum.fov)&&(b=Math.max(Math.tan(y),.1));let v=Math.abs(o.A.dot(a.directionWC,m));const T=-f.y*d.y*2/Math.sqrt(b)*(1-v),w=o.A.multiplyByScalar(_,T,yt);v=Math.abs(o.A.dot(a.upWC,m));const E=o.A.multiplyByScalar(a.upWC,-f.y*(1-v)*d.y,bt);A=o.A.add(h,p,mt),A=o.A.add(A,w,A),A=o.A.add(A,E,A),o.A.clone(A,e._panLastWorldPosition),i.A.clone(u,e._panLastMousePosition)}if((0,c.A)(h)&&(0,c.A)(A)||(h=a.pickEllipsoid(l,r,pt),A=a.pickEllipsoid(u,r,mt)),!(0,c.A)(h)||!(0,c.A)(A))return e._rotating=!0,void ft(e,0,n);if(h=a.worldToCameraCoordinates(h,h),A=a.worldToCameraCoordinates(A,A),(0,c.A)(a.constrainedAxis)){const e=a.constrainedAxis,t=o.A.mostOrthogonalAxis(e,_t);o.A.cross(t,e,t),o.A.normalize(t,t);const n=o.A.cross(e,t,gt),i=o.A.magnitude(h),r=o.A.dot(e,h),s=Math.acos(r/i),c=o.A.multiplyByScalar(e,r,yt);o.A.subtract(h,c,c),o.A.normalize(c,c);const l=o.A.magnitude(A),u=o.A.dot(e,A),d=Math.acos(u/l),f=o.A.multiplyByScalar(e,u,bt);o.A.subtract(A,f,f),o.A.normalize(f,f);let m=Math.acos(o.A.dot(c,t));o.A.dot(c,n)<0&&(m=p.A.TWO_PI-m);let _=Math.acos(o.A.dot(f,t));o.A.dot(f,n)<0&&(_=p.A.TWO_PI-_);const g=m-_;let y;y=o.A.equalsEpsilon(e,a.position,p.A.EPSILON2)?a.right:o.A.cross(e,a.position,_t);const b=o.A.cross(e,y,_t),v=o.A.dot(b,o.A.subtract(h,e,gt)),T=o.A.dot(b,o.A.subtract(A,e,gt));let w;w=v>0&&T>0?d-s:v>0&&T<=0?o.A.dot(a.position,e)>0?-s-d:s+d:s-d,a.rotateRight(g),a.rotateUp(w)}else{o.A.normalize(h,h),o.A.normalize(A,A);const e=o.A.dot(h,A),t=o.A.cross(h,A,_t);if(e<1&&!o.A.equalsEpsilon(t,o.A.ZERO,p.A.EPSILON14)){const n=Math.acos(e);a.rotate(t,n)}}}const xt=new o.A,It=new s.A;let Pt=0;function Dt(e,t,n){(0,c.A)(n.distance)&&(n=n.distance);const i=n.inertiaEnabled,r=e._ellipsoid,s=e._scene,a=s.camera,l=s.canvas,u=e._cameraUnderground;let d;u?d=t:(d=$e,d.x=l.clientWidth/2,d.y=l.clientHeight/2);const h=a.getPickRay(d,Ke);let A;const f=r.cartesianToCartographic(a.position,It).height,p=Math.abs(Pt)<e.minimumPickingTerrainDistanceWithInertia;let m;if((i?p:f<e._minimumPickingTerrainHeight)&&(A=_e(e,d,Ze)),(0,c.A)(A)&&(m=o.A.distance(h.origin,A),Pt=m),u){const t=ve(e,h);m=(0,c.A)(m)?Math.min(m,t):t}(0,c.A)(m)||(m=f);const _=o.A.normalize(a.position,xt);re(e,t,n,e._zoomFactor,m,o.A.dot(_,a.direction))}const Ot=new i.A,Lt=new v.A,Nt=new o.A,Mt=new o.A,Rt=new _.A,Ft=new _.A,Bt=new _.A,Ut=new b.A,kt=new m.A,Vt=new s.A,Ht=new o.A;function zt(e,t,n){const r=e._scene.camera;if(!_.A.equals(r.transform,_.A.IDENTITY))return;if((0,c.A)(n.angleAndHeight)&&(n=n.angleAndHeight),i.A.equals(t,e._tiltCenterMousePosition)||(e._tiltOnEllipsoid=!1,e._looking=!1),e._looking){const t=e._ellipsoid.geodeticSurfaceNormal(r.position,Ht);return void Qt(e,0,n,t)}const s=e._ellipsoid.cartesianToCartographic(r.position,Vt);e._tiltOnEllipsoid||s.height>e._minimumCollisionTerrainHeight?(e._tiltOnEllipsoid=!0,function(e,t,n){const r=e._ellipsoid,s=e._scene,a=s.camera,l=.25*e.minimumZoomDistance,u=r.cartesianToCartographic(a.positionWC,Gt).height;if(u-l-1<p.A.EPSILON3&&n.endPosition.y-n.startPosition.y<0)return;const h=s.canvas,f=Ot;f.x=h.clientWidth/2,f.y=h.clientHeight/2;const m=a.getPickRay(f,Lt);let g;const y=A.A.rayEllipsoid(m,r);if((0,c.A)(y))g=v.A.getPoint(m,y.start,Nt);else{if(!(u>e._minimumTrackBallHeight)){e._looking=!0;const o=e._ellipsoid.geodeticSurfaceNormal(a.position,Ht);return Qt(e,0,n,o),void i.A.clone(t,e._tiltCenterMousePosition)}{const e=A.A.grazingAltitudeLocation(m,r);if(!(0,c.A)(e))return;const t=r.cartesianToCartographic(e,Vt);t.height=0,g=r.cartographicToCartesian(t,Nt)}}const b=w.A.eastNorthUpToFixedFrame(g,r,Rt),T=e._globe,E=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const S=_.A.clone(a.transform,Bt);a._setTransform(b),ft(e,0,n,o.A.UNIT_Z),a._setTransform(S),e._globe=T,e._ellipsoid=E;const C=E.maximumRadius;e._rotateFactor=1/C,e._rotateRateRangeAdjustment=C}(e,t,n)):function(e,t,n){const r=e._ellipsoid,s=e._scene,a=s.camera,l=e._cameraUnderground;let u,h,f;if(i.A.equals(t,e._tiltCenterMousePosition))u=o.A.clone(e._tiltCenter,Nt);else{if(u=_e(e,t,Nt),!(0,c.A)(u)){if(h=a.getPickRay(t,Lt),f=A.A.rayEllipsoid(h,r),!(0,c.A)(f)){if(r.cartesianToCartographic(a.position,Vt).height<=e._minimumTrackBallHeight){e._looking=!0;const o=e._ellipsoid.geodeticSurfaceNormal(a.position,Ht);Qt(e,0,n,o),i.A.clone(t,e._tiltCenterMousePosition)}return}u=v.A.getPoint(h,f.start,Nt)}l&&((0,c.A)(h)||(h=a.getPickRay(t,Lt)),Te(e,h,u,u)),i.A.clone(t,e._tiltCenterMousePosition),o.A.clone(u,e._tiltCenter)}const g=s.canvas,y=Ot;y.x=g.clientWidth/2,y.y=e._tiltCenterMousePosition.y,h=a.getPickRay(y,Lt);const T=o.A.magnitude(u),E=o.A.fromElements(T,T,T,ct),S=d.A.fromCartesian3(E,lt);if(f=A.A.rayEllipsoid(h,S),!(0,c.A)(f))return;const C=o.A.magnitude(h.origin)>T?f.start:f.stop,x=v.A.getPoint(h,C,Mt),I=w.A.eastNorthUpToFixedFrame(u,r,Rt),P=w.A.eastNorthUpToFixedFrame(x,S,Ft),D=e._globe,O=e._ellipsoid;e._globe=void 0,e._ellipsoid=d.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let L=o.A.UNIT_Z;const N=_.A.clone(a.transform,Bt);a._setTransform(P);const M=o.A.cross(x,a.positionWC,Je);if(o.A.dot(a.rightWC,M)<0){const t=n.startPosition.y-n.endPosition.y;(l&&t<0||!l&&t>0)&&(L=void 0);const i=a.constrainedAxis;a.constrainedAxis=void 0,ft(e,0,n,L,!0,!1),a.constrainedAxis=i}else ft(e,0,n,L,!0,!1);if(a._setTransform(I),ft(e,0,n,L,!1,!0),(0,c.A)(a.constrainedAxis)){const e=o.A.cross(a.direction,a.constrainedAxis,Je);o.A.equalsEpsilon(e,o.A.ZERO,p.A.EPSILON6)||(o.A.dot(e,a.right)<0&&o.A.negate(e,e),o.A.cross(e,a.direction,a.up),o.A.cross(a.direction,a.up,a.right),o.A.normalize(a.up,a.up),o.A.normalize(a.right,a.right))}a._setTransform(N),e._globe=D,e._ellipsoid=O;const R=O.maximumRadius;e._rotateFactor=1/R,e._rotateRateRangeAdjustment=R;const F=o.A.clone(a.positionWC,Je);if(e.enableCollisionDetection&&Zt(e),!o.A.equals(a.positionWC,F)){a._setTransform(P),a.worldToCameraCoordinatesPoint(F,F);const e=o.A.magnitudeSquared(F);o.A.magnitudeSquared(a.position)>e&&(o.A.normalize(a.position,a.position),o.A.multiplyByScalar(a.position,Math.sqrt(e),a.position));const t=o.A.angleBetween(F,a.position),n=o.A.cross(F,a.position,F);o.A.normalize(n,n);const i=b.A.fromAxisAngle(n,t,Ut),r=m.A.fromQuaternion(i,kt);m.A.multiplyByVector(r,a.direction,a.direction),m.A.multiplyByVector(r,a.up,a.up),o.A.cross(a.direction,a.up,a.right),o.A.cross(a.right,a.direction,a.up),a._setTransform(N)}}(e,t,n)}const Gt=new s.A,jt=new i.A,Wt=new i.A,qt=new v.A,Yt=new v.A,Xt=new o.A,Jt=new o.A;function Qt(e,t,n,i){const r=e._scene.camera,s=jt;s.x=n.startPosition.x,s.y=0;const l=Wt;l.x=n.endPosition.x,l.y=0;let u,d,h=r.getPickRay(s,qt),A=r.getPickRay(l,Yt),f=0;r.frustum instanceof g.A?(u=h.origin,d=A.origin,o.A.add(r.direction,u,u),o.A.add(r.direction,d,d),o.A.subtract(u,r.position,u),o.A.subtract(d,r.position,d),o.A.normalize(u,u),o.A.normalize(d,d)):(u=h.direction,d=A.direction);let m=o.A.dot(u,d);m<1&&(f=Math.acos(m)),f=n.startPosition.x>n.endPosition.x?-f:f;const _=e._horizontalRotationAxis;if((0,c.A)(i)?r.look(i,-f):(0,c.A)(_)?r.look(_,-f):r.lookLeft(f),s.x=0,s.y=n.startPosition.y,l.x=0,l.y=n.endPosition.y,h=r.getPickRay(s,qt),A=r.getPickRay(l,Yt),f=0,r.frustum instanceof g.A?(u=h.origin,d=A.origin,o.A.add(r.direction,u,u),o.A.add(r.direction,d,d),o.A.subtract(u,r.position,u),o.A.subtract(d,r.position,d),o.A.normalize(u,u),o.A.normalize(d,d)):(u=h.direction,d=A.direction),m=o.A.dot(u,d),m<1&&(f=Math.acos(m)),f=n.startPosition.y>n.endPosition.y?-f:f,i=(0,a.A)(i,_),(0,c.A)(i)){const e=r.direction,t=o.A.negate(i,Xt),n=o.A.equalsEpsilon(e,i,p.A.EPSILON2),s=o.A.equalsEpsilon(e,t,p.A.EPSILON2);if(n||s)(n&&f<0||s&&f>0)&&r.look(r.right,-f);else{m=o.A.dot(e,i);let n=p.A.acosClamped(m);f>0&&f>n&&(f=n-p.A.EPSILON4),m=o.A.dot(e,t),n=p.A.acosClamped(m),f<0&&-f>n&&(f=-n+p.A.EPSILON4);const s=o.A.cross(i,e,Jt);r.look(s,f)}}else r.lookUp(f)}const $t=new _.A,Kt=new s.A;function Zt(e){e._adjustedHeightForTerrain=!0;const t=e._scene,n=t.mode,i=t.globe;if(!(0,c.A)(i)||n===x.A.SCENE2D||n===x.A.MORPHING)return;const r=t.camera,s=i.ellipsoid,a=t.mapProjection;let l,u;_.A.equals(r.transform,_.A.IDENTITY)||(l=_.A.clone(r.transform,$t),u=o.A.magnitude(r.position),r._setTransform(_.A.IDENTITY));const d=Kt;n===x.A.SCENE3D?s.cartesianToCartographic(r.position,d):a.unproject(r.position,d);let h=!1;if(d.height<e._minimumCollisionTerrainHeight){const t=e._scene.globeHeight;if((0,c.A)(t)){const i=t+e.minimumZoomDistance;d.height<i&&(d.height=i,n===x.A.SCENE3D?s.cartographicToCartesian(d,r.position):a.project(d,r.position),h=!0)}}(0,c.A)(l)&&(r._setTransform(l),h&&(o.A.normalize(r.position,r.position),o.A.negate(r.position,r.direction),o.A.multiplyByScalar(r.position,Math.max(u,e.minimumZoomDistance),r.position),o.A.normalize(r.direction,r.direction),o.A.cross(r.direction,r.up,r.right),o.A.cross(r.right,r.direction,r.up)))}D.prototype.onMap=function(){const e=this._scene,t=e.mode,n=e.camera;return t!==x.A.COLUMBUS_VIEW||Math.abs(n.position.x)-this._maxCoord.x<0&&Math.abs(n.position.y)-this._maxCoord.y<0};const en=new o.A,tn=new o.A;D.prototype.update=function(){const e=this._scene,t=e.camera,n=e.globe,i=e.mode;_.A.equals(t.transform,_.A.IDENTITY)?(this._globe=n,this._ellipsoid=(0,c.A)(this._globe)?this._globe.ellipsoid:e.mapProjection.ellipsoid):(this._globe=void 0,this._ellipsoid=d.A.UNIT_SPHERE);const r=(0,c.A)(this._globe)?this._globe.terrainExaggeration:1,s=(0,c.A)(this._globe)?this._globe.terrainExaggerationRelativeHeight:0;this._minimumCollisionTerrainHeight=T.A.getHeight(this.minimumCollisionTerrainHeight,r,s),this._minimumPickingTerrainHeight=T.A.getHeight(this.minimumPickingTerrainHeight,r,s),this._minimumTrackBallHeight=T.A.getHeight(this.minimumTrackBallHeight,r,s),this._cameraUnderground=e.cameraUnderground&&(0,c.A)(this._globe);const a=this._ellipsoid.maximumRadius;this._rotateFactor=1/a,this._rotateRateRangeAdjustment=a,this._adjustedHeightForTerrain=!1;const l=o.A.clone(t.positionWC,en),u=o.A.clone(t.directionWC,tn);var h;i===x.A.SCENE2D?function(e){const t=e._scene.mapMode2D===C.A.ROTATE;_.A.equals(_.A.IDENTITY,e._scene.camera.transform)?(M(e,e.enableTranslate,e.translateEventTypes,le,e.inertiaTranslate,"_lastInertiaTranslateMovement"),M(e,e.enableZoom,e.zoomEventTypes,ue,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&M(e,e.enableRotate,e.tiltEventTypes,Ae,e.inertiaSpin,"_lastInertiaTiltMovement")):(M(e,e.enableZoom,e.zoomEventTypes,ue,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&M(e,e.enableRotate,e.translateEventTypes,Ae,e.inertiaSpin,"_lastInertiaSpinMovement"))}(this):i===x.A.COLUMBUS_VIEW?(this._horizontalRotationAxis=o.A.UNIT_Z,function(e){const t=e._scene.camera;if(_.A.equals(_.A.IDENTITY,t.transform)){const n=e._tweens;if(e._aggregator.anyButtonDown&&n.removeAll(),M(e,e.enableTilt,e.tiltEventTypes,Qe,e.inertiaSpin,"_lastInertiaTiltMovement"),M(e,e.enableTranslate,e.translateEventTypes,Re,e.inertiaTranslate,"_lastInertiaTranslateMovement"),M(e,e.enableZoom,e.zoomEventTypes,et,e.inertiaZoom,"_lastInertiaZoomMovement"),M(e,e.enableLook,e.lookEventTypes,Qt),!e._aggregator.anyButtonDown&&!n.contains(e._tween)){const i=t.createCorrectPositionTween(e.bounceAnimationTime);(0,c.A)(i)&&(e._tween=n.add(i))}n.update()}else M(e,e.enableRotate,e.rotateEventTypes,ft,e.inertiaSpin,"_lastInertiaSpinMovement"),M(e,e.enableZoom,e.zoomEventTypes,Dt,e.inertiaZoom,"_lastInertiaZoomMovement")}(this)):i===x.A.SCENE3D&&(this._horizontalRotationAxis=void 0,M(h=this,h.enableRotate,h.rotateEventTypes,At,h.inertiaSpin,"_lastInertiaSpinMovement"),M(h,h.enableZoom,h.zoomEventTypes,Dt,h.inertiaZoom,"_lastInertiaZoomMovement"),M(h,h.enableTilt,h.tiltEventTypes,zt,h.inertiaSpin,"_lastInertiaTiltMovement"),M(h,h.enableLook,h.lookEventTypes,Qt)),this.enableCollisionDetection&&!this._adjustedHeightForTerrain&&(!o.A.equals(l,t.positionWC)||!o.A.equals(u,t.directionWC))&&Zt(this),this._aggregator.reset()},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){return this._tweens.removeAll(),this._aggregator=this._aggregator&&this._aggregator.destroy(),(0,l.A)(this)};const nn=D},681750:(e,t,n)=>{"use strict";n.d(t,{A:()=>De});var i=n(647934),o=n(660662),r=n(854894),s=n(434067),a=n(267980),c=n(626809),l=n(336946),u=n(376758),d=n(41476),h=n(433235),A=n(430346),f=n(400793),p=n(419061),m=n(491446),_=n(677354),g=n(605971),y=n(520098),b=n(75200),v=n(647326),T=n(367817),w=n(584164),E=n(65891),S=n(666775),C=n(276904),x=n(99479),I=n(6874),P=n(352581),D=n(769493),O=n(430332),L=n(346154),N=n(377496),M=n(483128),R=n(760866),F=n(326429),B=n(57775),U=n(557053),k=n(100482),V=n(40118),H=n(654799),z=n(616e3),G=n(635577),j=n(527083),W=n(199744),q=n(612123),Y=n(842153),X=n(33559);function J(e){const t=(e=(0,p.A)(e,p.A.EMPTY_OBJECT)).context;if(!(0,m.A)(t))throw new g.A("context is required.");if(!(0,m.A)(e.lightCamera))throw new g.A("lightCamera is required.");if((0,m.A)(e.numberOfCascades)&&1!==e.numberOfCascades&&4!==e.numberOfCascades)throw new g.A("Only one or four cascades are supported.");this._enabled=(0,p.A)(e.enabled,!0),this._softShadows=(0,p.A)(e.softShadows,!1),this._normalOffset=(0,p.A)(e.normalOffset,!0),this.dirty=!0,this.fromLightSource=(0,p.A)(e.fromLightSource,!0),this.darkness=(0,p.A)(e.darkness,.3),this._darkness=this.darkness,this.fadingEnabled=(0,p.A)(e.fadingEnabled,!0),this.maximumDistance=(0,p.A)(e.maximumDistance,5e3),this._outOfView=!1,this._outOfViewPrevious=!1,this._needsUpdate=!0;let n,i=!0;(y.A.isInternetExplorer()||y.A.isEdge()||(y.A.isChrome()||y.A.isFirefox())&&y.A.isWindows()&&!t.depthTexture)&&(i=!1),this._polygonOffsetSupported=i,this._terrainBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.5,normalShading:!0,normalShadingSmooth:.3,depthBias:1e-4},this._primitiveBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.1,normalShading:!0,normalShadingSmooth:.05,depthBias:2e-5},this._pointBias={polygonOffset:!1,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:0,normalShading:!0,normalShadingSmooth:.1,depthBias:5e-4},this._depthAttachment=void 0,this._colorAttachment=void 0,this._shadowMapMatrix=new w.A,this._shadowMapTexture=void 0,this._lightDirectionEC=new a.A,this._lightPositionEC=new c.A,this._distance=0,this._lightCamera=e.lightCamera,this._shadowMapCamera=new le,this._shadowMapCullingVolume=void 0,this._sceneCamera=void 0,this._boundingSphere=new o.A,this._isPointLight=(0,p.A)(e.isPointLight,!1),this._pointLightRadius=(0,p.A)(e.pointLightRadius,100),this._cascadesEnabled=!this._isPointLight&&(0,p.A)(e.cascadesEnabled,!0),this._numberOfCascades=this._cascadesEnabled?(0,p.A)(e.numberOfCascades,4):0,this._fitNearFar=!0,this._maximumCascadeDistances=[25,150,700,Number.MAX_VALUE],this._textureSize=new s.A,this._isSpotLight=!1,this._cascadesEnabled?this._shadowMapCamera.frustum=new E.A:(0,m.A)(this._lightCamera.frustum.fov)&&(this._isSpotLight=!0),this._cascadeSplits=[new c.A,new c.A],this._cascadeMatrices=[new w.A,new w.A,new w.A,new w.A],this._cascadeDistances=new c.A,n=this._isPointLight?6:this._cascadesEnabled?this._numberOfCascades:1,this._passes=new Array(n);for(let e=0;e<n;++e)this._passes[e]=new Q(t);this.debugShow=!1,this.debugFreezeFrame=!1,this._debugFreezeFrame=!1,this._debugCascadeColors=!1,this._debugLightFrustum=void 0,this._debugCameraFrustum=void 0,this._debugCascadeFrustums=new Array(this._numberOfCascades),this._debugShadowViewCommand=void 0,this._usesDepthTexture=t.depthTexture,this._isPointLight&&(this._usesDepthTexture=!1),this._primitiveRenderState=void 0,this._terrainRenderState=void 0,this._pointRenderState=void 0,K(this),this._clearCommand=new D.A({depth:1,color:new d.A}),this._clearPassState=new F.A(t),this._size=(0,p.A)(e.size,2048),this.size=this._size}function Q(e){this.camera=new le,this.passState=new F.A(e),this.framebuffer=void 0,this.textureOffsets=void 0,this.commandList=[],this.cullingVolume=void 0}function $(e,t){return V.A.fromCache({cull:{enabled:!0,face:j.A.BACK},depthTest:{enabled:!0},colorMask:{red:e,green:e,blue:e,alpha:e},depthMask:!0,polygonOffset:{enabled:t.polygonOffset,factor:t.polygonOffsetFactor,units:t.polygonOffsetUnits}})}function K(e){const t=!e._usesDepthTexture;e._primitiveRenderState=$(t,e._primitiveBias),e._terrainRenderState=$(t,e._terrainBias),e._pointRenderState=$(t,e._pointBias)}function Z(e){const t=e._passes.length;for(let n=0;n<t;++n){const t=e._passes[n],i=t.framebuffer;(0,m.A)(i)&&!i.isDestroyed()&&i.destroy(),t.framebuffer=void 0}e._depthAttachment=e._depthAttachment&&e._depthAttachment.destroy(),e._colorAttachment=e._colorAttachment&&e._colorAttachment.destroy()}function ee(e,t){e._isPointLight?function(e,t){const n=new U.A({context:t,width:e._textureSize.x,height:e._textureSize.y,format:k.A.DEPTH_COMPONENT16}),i=new L.A({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:C.A.RGBA,pixelDatatype:B.A.UNSIGNED_BYTE,sampler:H.A.NEAREST}),o=[i.negativeX,i.negativeY,i.negativeZ,i.positiveX,i.positiveY,i.positiveZ];for(let i=0;i<6;++i){const r=new M.A({context:t,depthRenderbuffer:n,colorTextures:[o[i]],destroyAttachments:!1}),s=e._passes[i];s.framebuffer=r,s.passState.framebuffer=r}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}(e,t):e._usesDepthTexture?function(e,t){const n=new z.A({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:C.A.DEPTH_STENCIL,pixelDatatype:B.A.UNSIGNED_INT_24_8,sampler:H.A.NEAREST}),i=new M.A({context:t,depthStencilTexture:n,destroyAttachments:!1}),o=e._passes.length;for(let t=0;t<o;++t){const n=e._passes[t];n.framebuffer=i,n.passState.framebuffer=i}e._shadowMapTexture=n,e._depthAttachment=n}(e,t):function(e,t){const n=new U.A({context:t,width:e._textureSize.x,height:e._textureSize.y,format:k.A.DEPTH_COMPONENT16}),i=new z.A({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:C.A.RGBA,pixelDatatype:B.A.UNSIGNED_BYTE,sampler:H.A.NEAREST}),o=new M.A({context:t,depthRenderbuffer:n,colorTextures:[i],destroyAttachments:!1}),r=e._passes.length;for(let t=0;t<r;++t){const n=e._passes[t];n.framebuffer=o,n.passState.framebuffer=o}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}(e,t)}function te(e,t,n){n=(0,p.A)(n,0),(e._isPointLight||0===n)&&(e._clearCommand.framebuffer=e._passes[n].framebuffer,e._clearCommand.execute(t,e._clearPassState))}J.MAXIMUM_DISTANCE=2e4,J.prototype.debugCreateRenderStates=function(){K(this)},Object.defineProperties(J.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this.dirty=this._enabled!==e,this._enabled=e}},normalOffset:{get:function(){return this._normalOffset},set:function(e){this.dirty=this._normalOffset!==e,this._normalOffset=e,this._terrainBias.normalOffset=e,this._primitiveBias.normalOffset=e,this._pointBias.normalOffset=e}},softShadows:{get:function(){return this._softShadows},set:function(e){this.dirty=this._softShadows!==e,this._softShadows=e}},size:{get:function(){return this._size},set:function(e){!function(e,t){e._size=t;const n=e._passes,o=n.length,r=e._textureSize;if(e._isPointLight){t=O.A.maximumCubeMapSize>=t?t:O.A.maximumCubeMapSize,r.x=t,r.y=t;const e=new i.A(0,0,t,t);n[0].passState.viewport=e,n[1].passState.viewport=e,n[2].passState.viewport=e,n[3].passState.viewport=e,n[4].passState.viewport=e,n[5].passState.viewport=e}else 1===o?(t=O.A.maximumTextureSize>=t?t:O.A.maximumTextureSize,r.x=t,r.y=t,n[0].passState.viewport=new i.A(0,0,t,t)):4===o&&(t=O.A.maximumTextureSize>=2*t?t:O.A.maximumTextureSize/2,r.x=2*t,r.y=2*t,n[0].passState.viewport=new i.A(0,0,t,t),n[1].passState.viewport=new i.A(t,0,t,t),n[2].passState.viewport=new i.A(0,t,t,t),n[3].passState.viewport=new i.A(t,t,t,t));e._clearPassState.viewport=new i.A(0,0,r.x,r.y);for(let e=0;e<o;++e){const t=n[e],i=t.passState.viewport,o=i.x/r.x,s=i.y/r.y,a=i.width/r.x,c=i.height/r.y;t.textureOffsets=new w.A(a,0,0,o,0,c,0,s,0,0,1,0,0,0,0,1)}}(this,e)}},outOfView:{get:function(){return this._outOfView}},shadowMapCullingVolume:{get:function(){return this._shadowMapCullingVolume}},passes:{get:function(){return this._passes}},isPointLight:{get:function(){return this._isPointLight}},debugCascadeColors:{get:function(){return this._debugCascadeColors},set:function(e){this.dirty=this._debugCascadeColors!==e,this._debugCascadeColors=e}}});const ne=new i.A;const ie=new Array(8);ie[0]=new c.A(-1,-1,-1,1),ie[1]=new c.A(1,-1,-1,1),ie[2]=new c.A(1,1,-1,1),ie[3]=new c.A(-1,1,-1,1),ie[4]=new c.A(-1,-1,1,1),ie[5]=new c.A(1,-1,1,1),ie[6]=new c.A(1,1,1,1),ie[7]=new c.A(-1,1,1,1);const oe=new w.A,re=new Array(8);for(let e=0;e<8;++e)re[e]=new c.A;const se=[d.A.RED,d.A.GREEN,d.A.BLUE,d.A.MAGENTA],ae=new a.A;function ce(e,t){!function(e,t){const n=t.context,o=t.context.drawingBufferWidth,r=t.context.drawingBufferHeight,s=.3*Math.min(o,r),a=ne;a.x=o-s,a.y=0,a.width=s,a.height=s;let c=e._debugShadowViewCommand;(0,m.A)(c)||(c=function(e,t){let n;n=e._isPointLight?"uniform samplerCube shadowMap_textureCube; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n    vec2 uv = v_textureCoordinates; \n    vec3 dir; \n \n    if (uv.y < 0.5) \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = -1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = -1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else \n        { \n            dir.z = -1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 1.0; \n        } \n    } \n    else \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = 1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = 1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else \n        { \n            dir.z = 1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 3.0; \n        } \n    } \n \n    float shadow = czm_unpackDepth(czm_textureCube(shadowMap_textureCube, dir)); \n    out_FragColor = vec4(vec3(shadow), 1.0); \n} \n":`uniform sampler2D shadowMap_texture; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n${e._usesDepthTexture?"    float shadow = texture(shadowMap_texture, v_textureCoordinates).r; \n":"    float shadow = czm_unpackDepth(texture(shadowMap_texture, v_textureCoordinates)); \n"}    out_FragColor = vec4(vec3(shadow), 1.0); \n} \n`;const i=t.createViewportQuadCommand(n,{uniformMap:{shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture}}});return i.pass=R.A.OVERLAY,i}(e,n),e._debugShadowViewCommand=c),(0,m.A)(c.renderState)&&i.A.equals(c.renderState.viewport,a)||(c.renderState=V.A.fromCache({viewport:i.A.clone(a)})),t.commandList.push(e._debugShadowViewCommand)}(e,t);const n=e.debugFreezeFrame&&!e._debugFreezeFrame;if(e._debugFreezeFrame=e.debugFreezeFrame,e.debugFreezeFrame&&(n&&(e._debugCameraFrustum=e._debugCameraFrustum&&e._debugCameraFrustum.destroy(),e._debugCameraFrustum=new W.A({camera:e._sceneCamera,color:d.A.CYAN,updateOnChange:!1})),e._debugCameraFrustum.update(t)),e._cascadesEnabled){if(e.debugFreezeFrame){n&&(e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=new W.A({camera:e._shadowMapCamera,color:d.A.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t);for(let i=0;i<e._numberOfCascades;++i)n&&(e._debugCascadeFrustums[i]=e._debugCascadeFrustums[i]&&e._debugCascadeFrustums[i].destroy(),e._debugCascadeFrustums[i]=new W.A({camera:e._passes[i].camera,color:se[i],updateOnChange:!1})),e._debugCascadeFrustums[i].update(t)}}else if(e._isPointLight){if(!(0,m.A)(e._debugLightFrustum)||e._needsUpdate){const t=e._shadowMapCamera.positionWC,n=x.A.IDENTITY,i=2*e._pointLightRadius,o=a.A.fromElements(i,i,i,ae),s=w.A.fromTranslationQuaternionRotationScale(t,n,o,oe);e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=function(e,t){const n=new b.A({geometry:new r.A({minimum:new a.A(-.5,-.5,-.5),maximum:new a.A(.5,.5,.5)}),attributes:{color:h.A.fromColor(t)}}),i=new b.A({geometry:new I.A({radius:.5}),attributes:{color:h.A.fromColor(t)}});return new Y.A({geometryInstances:[n,i],appearance:new q.A({translucent:!1,flat:!0}),asynchronous:!1,modelMatrix:e})}(s,d.A.YELLOW)}e._debugLightFrustum.update(t)}else(0,m.A)(e._debugLightFrustum)&&!e._needsUpdate||(e._debugLightFrustum=new W.A({camera:e._shadowMapCamera,color:d.A.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t)}function le(){this.viewMatrix=new w.A,this.inverseViewMatrix=new w.A,this.frustum=void 0,this.positionCartographic=new l.A,this.positionWC=new a.A,this.directionWC=a.A.clone(a.A.UNIT_Z),this.upWC=a.A.clone(a.A.UNIT_Y),this.rightWC=a.A.clone(a.A.UNIT_X),this.viewProjectionMatrix=new w.A}le.prototype.clone=function(e){w.A.clone(e.viewMatrix,this.viewMatrix),w.A.clone(e.inverseViewMatrix,this.inverseViewMatrix),this.frustum=e.frustum.clone(this.frustum),l.A.clone(e.positionCartographic,this.positionCartographic),a.A.clone(e.positionWC,this.positionWC),a.A.clone(e.directionWC,this.directionWC),a.A.clone(e.upWC,this.upWC),a.A.clone(e.rightWC,this.rightWC)};const ue=new w.A(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);le.prototype.getViewProjection=function(){const e=this.viewMatrix,t=this.frustum.projectionMatrix;return w.A.multiply(t,e,this.viewProjectionMatrix),w.A.multiply(ue,this.viewProjectionMatrix,this.viewProjectionMatrix),this.viewProjectionMatrix};const de=new Array(5),he=new S.A,Ae=new Array(4),fe=new a.A,pe=new a.A,me=new w.A,_e=new a.A,ge=new a.A,ye=new a.A,be=[new a.A(-1,0,0),new a.A(0,-1,0),new a.A(0,0,-1),new a.A(1,0,0),new a.A(0,1,0),new a.A(0,0,1)],ve=[new a.A(0,-1,0),new a.A(0,0,-1),new a.A(0,-1,0),new a.A(0,-1,0),new a.A(0,0,1),new a.A(0,-1,0)],Te=[new a.A(0,0,1),new a.A(1,0,0),new a.A(-1,0,0),new a.A(0,0,-1),new a.A(1,0,0),new a.A(1,0,0)],we=new a.A,Ee=new a.A,Se=new o.A,Ce=Se.center;J.prototype.update=function(e){if(function(e,t){const n=t.camera,i=e._lightCamera,r=e._sceneCamera,s=e._shadowMapCamera;e._cascadesEnabled?a.A.clone(i.directionWC,s.directionWC):e._isPointLight?a.A.clone(i.positionWC,s.positionWC):s.clone(i);const c=e._lightDirectionEC;let l,u;w.A.multiplyByPointAsVector(n.viewMatrix,s.directionWC,c),a.A.normalize(c,c),a.A.negate(c,c),w.A.multiplyByPoint(n.viewMatrix,s.positionWC,e._lightPositionEC),e._lightPositionEC.w=e._pointLightRadius,e._fitNearFar?(l=Math.min(t.shadowState.nearPlane,e.maximumDistance),u=Math.min(t.shadowState.farPlane,e.maximumDistance),u=Math.max(u,l+1)):(l=n.frustum.near,u=e.maximumDistance),e._sceneCamera=G.A.clone(n,r),n.frustum.clone(e._sceneCamera.frustum),e._sceneCamera.frustum.near=l,e._sceneCamera.frustum.far=u,e._distance=u-l,function(e,t){const n=e._sceneCamera,i=e._shadowMapCamera,r=Se;if(e._cascadesEnabled){if(n.frustum.near>=e.maximumDistance)return e._outOfView=!0,void(e._needsUpdate=!1);const o=t.mapProjection.ellipsoid.geodeticSurfaceNormal(n.positionWC,we),r=a.A.negate(i.directionWC,Ee),s=a.A.dot(o,r);if(e.fadingEnabled){const t=T.A.clamp(s/.1,0,1);e._darkness=T.A.lerp(1,e.darkness,t)}else e._darkness=e.darkness;if(s<0)return e._outOfView=!0,void(e._needsUpdate=!1);e._needsUpdate=!0,e._outOfView=!1}else if(e._isPointLight)r.center=i.positionWC,r.radius=e._pointLightRadius,e._outOfView=t.cullingVolume.computeVisibility(r)===v.A.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(r),o.A.clone(r,e._boundingSphere);else{const n=i.frustum.far/2,s=a.A.add(i.positionWC,a.A.multiplyByScalar(i.directionWC,n,Ce),Ce);r.center=s,r.radius=n,e._outOfView=t.cullingVolume.computeVisibility(r)===v.A.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(r),o.A.clone(r,e._boundingSphere)}}(e,t),!e._outOfViewPrevious&&e._outOfView&&(e._needsUpdate=!0),e._outOfViewPrevious=e._outOfView}(this,e),this._needsUpdate)if(t=this,n=e.context,(0,m.A)(t._passes[0].framebuffer)&&t._shadowMapTexture.width===t._textureSize.x||(Z(t),ee(t,n),function(e,t){e._usesDepthTexture&&e._passes[0].framebuffer.status!==P.A.FRAMEBUFFER_COMPLETE&&(e._usesDepthTexture=!1,K(e),Z(e),ee(e,t))}(t,n),te(t,n)),this._isPointLight&&function(e,t){const n=new S.A;n.fov=T.A.PI_OVER_TWO,n.near=1,n.far=e._pointLightRadius,n.aspectRatio=1;for(let i=0;i<6;++i){const o=e._passes[i].camera;o.positionWC=e._shadowMapCamera.positionWC,o.positionCartographic=t.mapProjection.ellipsoid.cartesianToCartographic(o.positionWC,o.positionCartographic),o.directionWC=be[i],o.upWC=ve[i],o.rightWC=Te[i],w.A.computeView(o.positionWC,o.directionWC,o.upWC,o.rightWC,o.viewMatrix),w.A.inverse(o.viewMatrix,o.inverseViewMatrix),o.frustum=n}}(this,e),this._cascadesEnabled&&(function(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=w.A.multiply(i.frustum.projectionMatrix,i.viewMatrix,oe),r=w.A.inverse(o,oe),s=n.directionWC;let l=i.directionWC;a.A.equalsEpsilon(s,l,T.A.EPSILON10)&&(l=i.upWC);const u=a.A.cross(s,l,_e);l=a.A.cross(u,s,ge),a.A.normalize(l,l),a.A.normalize(u,u);const d=a.A.fromElements(0,0,0,ye);let h=w.A.computeView(d,s,l,u,me);const A=w.A.multiply(h,r,oe),f=a.A.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,fe),p=a.A.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,pe);for(let e=0;e<8;++e){const t=c.A.clone(ie[e],re[e]);w.A.multiplyByVector(A,t,t),a.A.divideByScalar(t,t.w,t),a.A.minimumByComponent(t,f,f),a.A.maximumByComponent(t,p,p)}p.z+=1e3,f.z-=10;const m=ye;m.x=-.5*(f.x+p.x),m.y=-.5*(f.y+p.y),m.z=-p.z;const _=w.A.fromTranslation(m,oe);h=w.A.multiply(_,h,h);const g=.5*(p.x-f.x),y=.5*(p.y-f.y),b=p.z-f.z,v=n.frustum;v.left=-g,v.right=g,v.bottom=-y,v.top=y,v.near=.01,v.far=b,w.A.clone(h,n.viewMatrix),w.A.inverse(h,n.inverseViewMatrix),w.A.getTranslation(n.inverseViewMatrix,n.positionWC),t.mapProjection.ellipsoid.cartesianToCartographic(n.positionWC,n.positionCartographic),a.A.clone(s,n.directionWC),a.A.clone(l,n.upWC),a.A.clone(u,n.rightWC)}(this,e),this._numberOfCascades>1&&function(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=i.frustum.near,r=i.frustum.far,s=e._numberOfCascades;let l;const u=r-o,d=r/o;let h=.9,A=!1;t.shadowState.closestObjectSize<200&&(A=!0,h=.9);const f=Ae,p=de;for(p[0]=o,p[s]=r,l=0;l<s;++l){const e=(l+1)/s,t=o*Math.pow(d,e),n=o+u*e,i=T.A.lerp(n,t,h);p[l+1]=i,f[l]=i-p[l]}if(A){for(l=0;l<s;++l)f[l]=Math.min(f[l],e._maximumCascadeDistances[l]);let t=p[0];for(l=0;l<s-1;++l)t+=f[l],p[l+1]=t}c.A.unpack(p,0,e._cascadeSplits[0]),c.A.unpack(p,1,e._cascadeSplits[1]),c.A.unpack(f,0,e._cascadeDistances);const m=n.frustum,_=m.left,g=m.right,y=m.bottom,b=m.top,v=m.near,E=m.far,S=n.positionWC,C=n.directionWC,x=n.upWC,I=i.frustum.clone(he),P=n.getViewProjection();for(l=0;l<s;++l){I.near=p[l],I.far=p[l+1];const t=w.A.multiply(I.projectionMatrix,i.viewMatrix,oe),o=w.A.inverse(t,oe),r=w.A.multiply(P,o,oe),s=a.A.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,fe),u=a.A.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,pe);for(let e=0;e<8;++e){const t=c.A.clone(ie[e],re[e]);w.A.multiplyByVector(r,t,t),a.A.divideByScalar(t,t.w,t),a.A.minimumByComponent(t,s,s),a.A.maximumByComponent(t,u,u)}s.x=Math.max(s.x,0),s.y=Math.max(s.y,0),s.z=0,u.x=Math.min(u.x,1),u.y=Math.min(u.y,1),u.z=Math.min(u.z,1);const d=e._passes[l],h=d.camera;h.clone(n);const A=h.frustum;A.left=_+s.x*(g-_),A.right=_+u.x*(g-_),A.bottom=y+s.y*(b-y),A.top=y+u.y*(b-y),A.near=v+s.z*(E-v),A.far=v+u.z*(E-v),d.cullingVolume=h.frustum.computeCullingVolume(S,C,x);const f=e._cascadeMatrices[l];w.A.multiply(h.getViewProjection(),i.inverseViewMatrix,f),w.A.multiply(d.textureOffsets,f,f)}}(this,e)),this._isPointLight)this._shadowMapCullingVolume=f.A.fromBoundingSphere(this._boundingSphere);else{const e=this._shadowMapCamera,t=e.positionWC,n=e.directionWC,i=e.upWC;this._shadowMapCullingVolume=e.frustum.computeCullingVolume(t,n,i),1===this._passes.length&&this._passes[0].camera.clone(e)}var t,n;if(1===this._passes.length){const e=this._sceneCamera.inverseViewMatrix;w.A.multiply(this._shadowMapCamera.getViewProjection(),e,this._shadowMapMatrix)}this.debugShow&&ce(this,e)},J.prototype.updatePass=function(e,t){te(this,e,t)};const xe=new s.A;function Ie(e,t,n){const i=e._isPointLight?e._pointBias:n?e._terrainBias:e._primitiveBias,o={shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture},shadowMap_matrix:function(){return e._shadowMapMatrix},shadowMap_cascadeSplits:function(){return e._cascadeSplits},shadowMap_cascadeMatrices:function(){return e._cascadeMatrices},shadowMap_lightDirectionEC:function(){return e._lightDirectionEC},shadowMap_lightPositionEC:function(){return e._lightPositionEC},shadowMap_cascadeDistances:function(){return e._cascadeDistances},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const t=xe;return t.x=1/e._textureSize.x,t.y=1/e._textureSize.y,c.A.fromElements(t.x,t.y,i.depthBias,i.normalShadingSmooth,this.combinedUniforms1)},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){return c.A.fromElements(i.normalOffsetScale,e._distance,e.maximumDistance,e._darkness,this.combinedUniforms2)},combinedUniforms1:new c.A,combinedUniforms2:new c.A};return(0,A.A)(t,o,!1)}function Pe(e,t,n,i,o,r){let s,a,c;if((0,m.A)(r)&&(s=r.shaderProgram,a=r.renderState,c=r.uniformMap),(r=N.A.shallowClone(n,r)).castShadows=!0,r.receiveShadows=!1,!(0,m.A)(s)||o!==n.shaderProgram.id||t){const t=n.shaderProgram,o=n.pass===R.A.GLOBE,r=n.pass!==R.A.TRANSLUCENT,l=e._isPointLight,d=e._usesDepthTexture,h=X.A.getShadowCastShaderKeyword(l,o,d,r);if(s=i.shaderCache.getDerivedShaderProgram(t,h),!(0,m.A)(s)){const e=t.vertexShaderSource,n=t.fragmentShaderSource,a=X.A.createShadowCastVertexShader(e,l,o),c=X.A.createShadowCastFragmentShader(n,l,d,r);s=i.shaderCache.createDerivedShaderProgram(t,h,{vertexShaderSource:a,fragmentShaderSource:c,attributeLocations:t._attributeLocations})}a=e._primitiveRenderState,l?a=e._pointRenderState:o&&(a=e._terrainRenderState),n.renderState.cull.enabled||(a=(0,u.A)(a,!1),a.cull=(0,u.A)(a.cull,!1),a.cull.enabled=!1,a=V.A.fromCache(a)),c=Ie(e,n.uniformMap,o)}return r.shaderProgram=s,r.renderState=a,r.uniformMap=c,r}J.createReceiveDerivedCommand=function(e,t,n,i,o){(0,m.A)(o)||(o={});const r=e.length>0,s=t.shaderProgram,a=s.vertexShaderSource,c=s.fragmentShaderSource,l=t.pass===R.A.GLOBE;let u=!1;if(l&&(u=t.owner.data.renderedMesh.encoding.hasVertexNormals),t.receiveShadows&&r){let r,d;(0,m.A)(o.receiveCommand)&&(r=o.receiveCommand.shaderProgram,d=o.receiveCommand.uniformMap),o.receiveCommand=N.A.shallowClone(t,o.receiveCommand),o.castShadows=!1,o.receiveShadows=!0;const h=o.receiveShaderCastShadows!==t.castShadows,A=o.receiveShaderProgramId!==t.shaderProgram.id;if(!(0,m.A)(r)||A||n||h){const n=X.A.getShadowReceiveShaderKeyword(e[0],t.castShadows,l,u);if(r=i.shaderCache.getDerivedShaderProgram(s,n),!(0,m.A)(r)){const o=X.A.createShadowReceiveVertexShader(a,l,u),d=X.A.createShadowReceiveFragmentShader(c,e[0],t.castShadows,l,u);r=i.shaderCache.createDerivedShaderProgram(s,n,{vertexShaderSource:o,fragmentShaderSource:d,attributeLocations:s._attributeLocations})}d=Ie(e[0],t.uniformMap,l)}o.receiveCommand.shaderProgram=r,o.receiveCommand.uniformMap=d,o.receiveShaderProgramId=t.shaderProgram.id,o.receiveShaderCastShadows=t.castShadows}return o},J.createCastDerivedCommand=function(e,t,n,i,o){if((0,m.A)(o)||(o={}),t.castShadows){let r=o.castCommands;(0,m.A)(r)||(r=o.castCommands=[]);const s=o.castShaderProgramId,a=e.length;r.length=a;for(let o=0;o<a;++o)r[o]=Pe(e[o],n,t,i,s,r[o]);o.castShaderProgramId=t.shaderProgram.id}return o},J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){Z(this),this._debugLightFrustum=this._debugLightFrustum&&this._debugLightFrustum.destroy(),this._debugCameraFrustum=this._debugCameraFrustum&&this._debugCameraFrustum.destroy(),this._debugShadowViewCommand=this._debugShadowViewCommand&&this._debugShadowViewCommand.shaderProgram&&this._debugShadowViewCommand.shaderProgram.destroy();for(let e=0;e<this._numberOfCascades;++e)this._debugCascadeFrustums[e]=this._debugCascadeFrustums[e]&&this._debugCascadeFrustums[e].destroy();return(0,_.A)(this)};const De=J},33559:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(342875);function r(){}r.getShadowCastShaderKeyword=function(e,t,n,i){return`castShadow ${e} ${t} ${n} ${i}`},r.createShadowCastVertexShader=function(e,t,n){const r=e.defines.slice(0),s=e.sources.slice(0);r.push("SHADOW_MAP"),n&&r.push("GENERATE_POSITION");const a=o.A.findPositionVarying(e),c=(0,i.A)(a);if(t&&!c){const e=s.length;for(let t=0;t<e;++t)s[t]=o.A.replaceMain(s[t],"czm_shadow_cast_main");const t="out vec3 v_positionEC; \nvoid main() \n{ \n    czm_shadow_cast_main(); \n    v_positionEC = (czm_inverseProjection * gl_Position).xyz; \n}";s.push(t)}return new o.A({defines:r,sources:s})},r.createShadowCastFragmentShader=function(e,t,n,r){const s=e.defines.slice(0),a=e.sources.slice(0);s.push("SHADOW_MAP");let c=o.A.findPositionVarying(e);const l=(0,i.A)(c);l||(c="v_positionEC");const u=a.length;for(let e=0;e<u;++e)a[e]=o.A.replaceMain(a[e],"czm_shadow_cast_main");let d="";return t&&(l||(d+="in vec3 v_positionEC; \n"),d+="uniform vec4 shadowMap_lightPositionEC; \n"),d+=r?"void main() \n{ \n":"void main() \n{ \n    czm_shadow_cast_main(); \n    if (out_FragColor.a == 0.0) \n    { \n       discard; \n    } \n",d+=t?`    float distance = length(${c}); \n    if (distance >= shadowMap_lightPositionEC.w) \n    { \n        discard; \n    } \n    distance /= shadowMap_lightPositionEC.w; // radius \n    out_FragColor = czm_packDepth(distance); \n`:n?"    out_FragColor = vec4(1.0); \n":"    out_FragColor = czm_packDepth(gl_FragCoord.z); \n",d+="} \n",a.push(d),new o.A({defines:s,sources:a})},r.getShadowReceiveShaderKeyword=function(e,t,n,i){return`receiveShadow ${e._usesDepthTexture}${e._polygonOffsetSupported}${e._isPointLight}${e._isSpotLight}${e._numberOfCascades>1}${e.debugCascadeColors}${e.softShadows}${t}${n}${i}`},r.createShadowReceiveVertexShader=function(e,t,n){const i=e.defines.slice(0),r=e.sources.slice(0);return i.push("SHADOW_MAP"),t&&(n?i.push("GENERATE_POSITION_AND_NORMAL"):i.push("GENERATE_POSITION")),new o.A({defines:i,sources:r})},r.createShadowReceiveFragmentShader=function(e,t,n,r,s){const a=o.A.findNormalVarying(e),c=!r&&(0,i.A)(a)||r&&s,l=o.A.findPositionVarying(e),u=(0,i.A)(l),d=t._usesDepthTexture,h=t._polygonOffsetSupported,A=t._isPointLight,f=t._isSpotLight,p=t._numberOfCascades>1,m=t.debugCascadeColors,_=t.softShadows,g=A?t._pointBias:r?t._terrainBias:t._primitiveBias,y=e.defines.slice(0),b=e.sources.slice(0),v=b.length;for(let e=0;e<v;++e)b[e]=o.A.replaceMain(b[e],"czm_shadow_receive_main");A?y.push("USE_CUBE_MAP_SHADOW"):d&&y.push("USE_SHADOW_DEPTH_TEXTURE"),_&&!A&&y.push("USE_SOFT_SHADOWS"),p&&n&&r&&(c?y.push("ENABLE_VERTEX_LIGHTING"):y.push("ENABLE_DAYNIGHT_SHADING")),n&&g.normalShading&&c&&(y.push("USE_NORMAL_SHADING"),g.normalShadingSmooth>0&&y.push("USE_NORMAL_SHADING_SMOOTH"));let T,w="";return w+=A?"uniform samplerCube shadowMap_textureCube; \n":"uniform sampler2D shadowMap_texture; \n",T=u?`    return vec4(${l}, 1.0); \n`:"#ifndef LOG_DEPTH \n    return czm_windowToEyeCoordinates(gl_FragCoord); \n#else \n    return vec4(v_logPositionEC, 1.0); \n#endif \n",w+=`uniform mat4 shadowMap_matrix; \nuniform vec3 shadowMap_lightDirectionEC; \nuniform vec4 shadowMap_lightPositionEC; \nuniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness; \nuniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth; \n#ifdef LOG_DEPTH \nin vec3 v_logPositionEC; \n#endif \nvec4 getPositionEC() \n{ \n${T}} \nvec3 getNormalEC() \n{ \n${c?`    return normalize(${a}); \n`:"    return vec3(1.0); \n"}} \nvoid applyNormalOffset(inout vec4 positionEC, vec3 normalEC, float nDotL) \n{ \n${g.normalOffset&&c?"    float normalOffset = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.x; \n    float normalOffsetScale = 1.0 - nDotL; \n    vec3 offset = normalOffset * normalOffsetScale * normalEC; \n    positionEC.xyz += offset; \n":""}} \n`,w+="void main() \n{ \n    czm_shadow_receive_main(); \n    vec4 positionEC = getPositionEC(); \n    vec3 normalEC = getNormalEC(); \n    float depth = -positionEC.z; \n",w+="    czm_shadowParameters shadowParameters; \n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy; \n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z; \n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w; \n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w; \n",r?w+="    shadowParameters.depthBias *= max(depth * 0.01, 1.0); \n":h||(w+="    shadowParameters.depthBias *= mix(1.0, 100.0, depth * 0.0015); \n"),w+=A?"    vec3 directionEC = positionEC.xyz - shadowMap_lightPositionEC.xyz; \n    float distance = length(directionEC); \n    directionEC = normalize(directionEC); \n    float radius = shadowMap_lightPositionEC.w; \n    // Stop early if the fragment is beyond the point light radius \n    if (distance > radius) \n    { \n        return; \n    } \n    vec3 directionWC  = czm_inverseViewRotation * directionEC; \n    shadowParameters.depth = distance / radius; \n    shadowParameters.nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    shadowParameters.texCoords = directionWC; \n    float visibility = czm_shadowVisibility(shadowMap_textureCube, shadowParameters); \n":f?"    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz); \n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Spot light uses a perspective projection, so perform the perspective divide \n    shadowPosition /= shadowPosition.w; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n":p?"    float maxDepth = shadowMap_cascadeSplits[1].w; \n    // Stop early if the eye depth exceeds the last cascade \n    if (depth > maxDepth) \n    { \n        return; \n    } \n    // Get the cascade based on the eye-space depth \n    vec4 weights = czm_cascadeWeights(depth); \n    // Apply normal offset \n    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    // Transform position into the cascade \n    vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC; \n    // Get visibility \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n    // Fade out shadows that are far away \n    float shadowMapMaximumDistance = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.z; \n    float fade = max((depth - shadowMapMaximumDistance * 0.8) / (shadowMapMaximumDistance * 0.2), 0.0); \n    visibility = mix(visibility, 1.0, fade); \n"+(m?"    // Draw cascade colors for debugging \n    out_FragColor *= czm_cascadeColor(weights); \n":""):"    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n",w+="    out_FragColor.rgb *= visibility; \n} \n",b.push(w),new o.A({defines:y,sources:b})};const s=r},556541:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(369031),o=n(672743),r=n(419061),s=n(491446),a=n(786101),c=n(955943),l=n(182348),u=n(697422),d=n(744603),h=n(123245),A=n(705302),f=n(553909);function p(e){e=(0,r.A)(e,r.A.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const t=(0,r.A)(e.rectangle,u.A.MAX_VALUE),n=new l.A({rectangle:t,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});this._tilingScheme=n,this._image=void 0,this._texture=void 0,this._hasError=!1,this._errorEvent=new c.A,this._ready=!1;let h=e.credit;"string"==typeof h&&(h=new o.A(h)),this._credit=h,i.A.defined("options.url",e.url);const f=d.A.createIfNeeded(e.url);if(this._resource=f,(0,s.A)(e.tileWidth)||(0,s.A)(e.tileHeight))return i.A.typeOf.number("options.tileWidth",e.tileWidth),i.A.typeOf.number("options.tileHeight",e.tileHeight),this._tileWidth=e.tileWidth,this._tileHeight=e.tileHeight,this._ready=!0,void(this._readyPromise=Promise.resolve(!0));(0,a.A)("SingleTileImageryProvider options","options.tileHeight and options.tileWidth became required in CesiumJS 1.104. Omitting these properties will result in an error in 1.107. Provide options.tileHeight and options.tileWidth, or use SingleTileImageryProvider.fromUrl instead."),this._tileWidth=0,this._tileHeight=0,this._readyPromise=m(f,this).then((e=>(A.A.reportSuccess(this._errorEvent),this._image=e,this._tileWidth=e.width,this._tileHeight=e.height,this._ready=!0,!0)))}async function m(e,t,n){try{return await f.A.loadImage(null,e)}catch(i){return function(e,t,n,i){let o=`Failed to load image ${e.url}`;(0,s.A)(t)&&(0,s.A)(t.message)&&(o+=`: ${t.message}`);const r=A.A.reportError(i,n,(0,s.A)(n)?n._errorEvent:void 0,o,0,0,0,t);if(r.retry)return m(e,n,r);throw(0,s.A)(n)&&(n._hasError=!0),new h.A(o)}(e,i,t,n)}}Object.defineProperties(p.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 0}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,a.A)("SingleTileImageryProvider.ready","SingleTileImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use SingleTileImageryProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,a.A)("SingleTileImageryProvider.readyPromise","SingleTileImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use SingleTileImageryProvider.fromUrl instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},defaultAlpha:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultAlpha","SingleTileImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultAlpha","SingleTileImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultNightAlpha","SingleTileImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultNightAlpha","SingleTileImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultDayAlpha","SingleTileImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultDayAlpha","SingleTileImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultBrightness","SingleTileImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultBrightness","SingleTileImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultContrast","SingleTileImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultContrast","SingleTileImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultHue","SingleTileImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultHue","SingleTileImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultSaturation","SingleTileImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultSaturation","SingleTileImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultGamma","SingleTileImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultGamma","SingleTileImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultMinificationFilter","SingleTileImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultMinificationFilter","SingleTileImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,a.A)("SingleTileImageryProvider.defaultMagnificationFilter","SingleTileImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,a.A)("SingleTileImageryProvider.defaultMagnificationFilter","SingleTileImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),p.fromUrl=async function(e,t){i.A.defined("url",e);const n=d.A.createIfNeeded(e),o=await m(n);t=(0,r.A)(t,r.A.EMPTY_OBJECT);const s=new p({...t,url:e,tileWidth:o.width,tileHeight:o.height});return s._image=o,s},p.prototype.getTileCredits=function(e,t,n){},p.prototype.requestImage=async function(e,t,n,i){if(!this._hasError&&!(0,s.A)(this._image)){const e=await m(this._resource,this);return this._image=e,A.A.reportSuccess(this._errorEvent),e}return this._image},p.prototype.pickFeatures=function(e,t,n,i,o){};const _=p},920685:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(267980),o=n(419061),r=n(491446),s=n(677354),a=n(610750),c=n(87762),l=n(34233),u=n(367817),d=n(584164),h=n(769534),A=n(442790),f=n(377496),p=n(40118),m=n(302836),_=n(342875),g=n(508380),y=n(468649),b=n(370298),v=n(692352),T=n(143344),w=n(320475),E=n(200646),S=n(527083),C=n(62467);function x(e){e=(0,o.A)(e,a.A.WGS84),this.show=!0,this.perFragmentAtmosphere=!1,this._ellipsoid=e;const t=i.A.multiplyByScalar(e.radii,1.025,new i.A);this._scaleMatrix=d.A.fromScale(t),this._modelMatrix=new d.A,this._command=new f.A({owner:this,modelMatrix:this._modelMatrix}),this._spSkyFromSpace=void 0,this._spSkyFromAtmosphere=void 0,this._flags=void 0,this.atmosphereLightIntensity=50,this.atmosphereRayleighCoefficient=new i.A(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new i.A(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this._hueSaturationBrightness=new i.A;const n=new i.A;n.x=1.025*e.maximumRadius,n.y=e.maximumRadius,n.z=0,this._radiiAndDynamicAtmosphereColor=n;const r=this;this._command.uniformMap={u_radiiAndDynamicAtmosphereColor:function(){return r._radiiAndDynamicAtmosphereColor},u_hsbShift:function(){return r._hueSaturationBrightness.x=r.hueShift,r._hueSaturationBrightness.y=r.saturationShift,r._hueSaturationBrightness.z=r.brightnessShift,r._hueSaturationBrightness},u_atmosphereLightIntensity:function(){return r.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return r.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return r.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return r.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return r.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return r.atmosphereMieAnisotropy}}}Object.defineProperties(x.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),x.prototype.setDynamicAtmosphereColor=function(e,t){const n=e?t?2:1:0;this._radiiAndDynamicAtmosphereColor.z=n};const I=new d.A;x.prototype.update=function(e,t){if(!this.show)return;const n=e.mode;if(n!==C.A.SCENE3D&&n!==C.A.MORPHING)return;if(!e.passes.render)return;const o=d.A.fromRotationTranslation(e.context.uniformState.inverseViewRotation,i.A.ZERO,I),s=d.A.multiplyTransformation(o,w.A.Y_UP_TO_Z_UP,I),a=d.A.multiply(this._scaleMatrix,s,I);d.A.clone(a,this._modelMatrix);const f=e.context,x=(P=this,!(u.A.equalsEpsilon(P.hueShift,0,u.A.EPSILON7)&&u.A.equalsEpsilon(P.saturationShift,0,u.A.EPSILON7)&&u.A.equalsEpsilon(P.brightnessShift,0,u.A.EPSILON7)));var P;const D=e.globeTranslucencyState.translucent,O=this.perFragmentAtmosphere||D||!(0,r.A)(t)||!t.show,L=this._command;if(!(0,r.A)(L.vertexArray)){const e=c.A.createGeometry(new c.A({radii:new i.A(1,1,1),slicePartitions:256,stackPartitions:256,vertexFormat:h.A.POSITION_ONLY}));L.vertexArray=g.A.fromGeometry({context:f,geometry:e,attributeLocations:l.A.createAttributeLocations(e),bufferUsage:A.A.STATIC_DRAW}),L.renderState=p.A.fromCache({cull:{enabled:!0,face:S.A.FRONT},blending:E.A.ALPHA_BLEND,depthMask:!1})}const N=x|O<<2|D<<3;if(N!==this._flags){this._flags=N;const e=[];x&&e.push("COLOR_CORRECT"),O&&e.push("PER_FRAGMENT_ATMOSPHERE"),D&&e.push("GLOBE_TRANSLUCENT");const t=new _.A({defines:e,sources:[y.A,b.A,T.A]}),n=new _.A({defines:e,sources:[y.A,b.A,v.A]});this._spSkyAtmosphere=m.A.fromCache({context:f,vertexShaderSource:t,fragmentShaderSource:n}),L.shaderProgram=this._spSkyAtmosphere}return L},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),this._spSkyAtmosphere=this._spSkyAtmosphere&&this._spSkyAtmosphere.destroy(),(0,s.A)(this)};const P=x},148784:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(554630),o=n(267980),r=n(419061),s=n(491446),a=n(677354),c=n(605971),l=n(34233),u=n(584164),d=n(769534),h=n(442790),A=n(346154),f=n(377496),p=n(454214),m=n(40118),_=n(302836),g=n(342875),y=n(508380),b=n(326453),v=n(789221),T=n(200646),w=n(62467);function E(e){this.sources=e.sources,this._sources=void 0,this.show=(0,r.A)(e.show,!0),this._command=new f.A({modelMatrix:u.A.clone(u.A.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0}E.prototype.update=function(e,t){const n=this;if(!this.show)return;if(e.mode!==w.A.SCENE3D&&e.mode!==w.A.MORPHING)return;if(!e.passes.render)return;const r=e.context;if(this._sources!==this.sources){this._sources=this.sources;const e=this.sources;if(!((0,s.A)(e.positiveX)&&(0,s.A)(e.negativeX)&&(0,s.A)(e.positiveY)&&(0,s.A)(e.negativeY)&&(0,s.A)(e.positiveZ)&&(0,s.A)(e.negativeZ)))throw new c.A("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof e.positiveX!=typeof e.negativeX||typeof e.positiveX!=typeof e.positiveY||typeof e.positiveX!=typeof e.negativeY||typeof e.positiveX!=typeof e.positiveZ||typeof e.positiveX!=typeof e.negativeZ)throw new c.A("this.sources properties must all be the same type.");"string"==typeof e.positiveX?(0,p.A)(r,this._sources).then((function(e){n._cubeMap=n._cubeMap&&n._cubeMap.destroy(),n._cubeMap=e})):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new A.A({context:r,source:e}))}const a=this._command;if(!(0,s.A)(a.vertexArray)){a.uniformMap={u_cubeMap:function(){return n._cubeMap}};const e=i.A.createGeometry(i.A.fromDimensions({dimensions:new o.A(2,2,2),vertexFormat:d.A.POSITION_ONLY})),t=this._attributeLocations=l.A.createAttributeLocations(e);a.vertexArray=y.A.fromGeometry({context:r,geometry:e,attributeLocations:t,bufferUsage:h.A.STATIC_DRAW}),a.renderState=m.A.fromCache({blending:T.A.ALPHA_BLEND})}if(!(0,s.A)(a.shaderProgram)||this._useHdr!==t){const e=new g.A({defines:[t?"HDR":""],sources:[b.A]});a.shaderProgram=_.A.fromCache({context:r,vertexShaderSource:v.A,fragmentShaderSource:e,attributeLocations:this._attributeLocations}),this._useHdr=t}return(0,s.A)(this._cubeMap)?a:void 0},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),(0,a.A)(this)};const S=E},533872:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(525490),o=n(267980),r=n(367817),s=n(491446),a=n(605971),c=n(301866),l=n(331185),u=n(832698);function d(e,t,n,i,o,r,s){this.children=void 0,this.parent=o,this.level=e,this.x=t,this.y=n,this.z=i,this.keyframeNodes=[],this.renderableKeyframeNodes=[],this.renderableKeyframeNodeLerp=0,this.renderableKeyframeNodePrevious=void 0,this.renderableKeyframeNodeNext=void 0,this.orientedBoundingBox=new u.A,this.approximateVoxelSize=0,this.screenSpaceError=0,this.visitedFrameNumber=-1,this.computeBoundingVolumes(r,s)}const h=new o.A;d.prototype.computeBoundingVolumes=function(e,t){this.orientedBoundingBox=e.computeOrientedBoundingBoxForTile(this.level,this.x,this.y,this.z,this.orientedBoundingBox);const n=l.A.getScale(this.orientedBoundingBox.halfAxes,h),i=2*o.A.maximumComponent(n);this.approximateVoxelSize=i/o.A.minimumComponent(t)},d.prototype.constructChildNodes=function(e,t){const{level:n,x:i,y:o,z:r}=this,s=2*i,a=2*o,c=2*r,l=a+1,u=s+1,h=c+1,A=n+1,f=[[A,s,a,c],[A,u,a,c],[A,s,l,c],[A,u,l,c],[A,s,a,h],[A,u,a,h],[A,s,l,h],[A,u,l,h]];this.children=f.map((([n,i,o,r])=>new d(n,i,o,r,this,e,t)))},d.prototype.visibility=function(e,t){const n=this.orientedBoundingBox;return e.cullingVolume.computeVisibilityWithPlaneMask(n,t)},d.prototype.computeScreenSpaceError=function(e,t){const n=this.orientedBoundingBox;let i=Math.sqrt(n.distanceSquaredTo(e));i=Math.max(i,r.A.EPSILON7);const o=t*(this.approximateVoxelSize/i);this.screenSpaceError=o};const A={keyframe:0};function f(e,t){return A.keyframe=e,(0,i.A)(t,A,c.A.searchComparator)}function p(e,t){const n=f(e,t);return n<0?r.A.clamp(~n-1,0,t.length-1):n}function m(e,t){return e*Math.exp(4*e)+t*(t>=0?1:-200)}d.prototype.computeSurroundingRenderableKeyframeNodes=function(e){let t=this;const n=t.level,i=Math.floor(e),o=Math.ceil(e);let a,c,l=+Number.MAX_VALUE,u=+Number.MAX_VALUE;for(;(0,s.A)(t);){const{renderableKeyframeNodes:e}=t;if(e.length>=1){const r=p(i,e),s=e[r],d=e[o===i||i<s.keyframe?r:Math.min(r+1,e.length-1)],h=i-s.keyframe,A=m(n-t.level,h);A<l&&(l=A,a=s);const f=d.keyframe-o,_=m(n-t.level,f);if(_<u&&(u=_,c=d),0===h&&0===f)break}t=t.parent}if(this.renderableKeyframeNodePrevious=a,this.renderableKeyframeNodeNext=c,!(0,s.A)(a)||!(0,s.A)(c))return;const d=a.keyframe,h=c.keyframe;this.renderableKeyframeNodeLerp=d===h?0:r.A.clamp((e-d)/(h-d),0,1)},d.prototype.isVisited=function(e){return this.visitedFrameNumber===e},d.prototype.createKeyframeNode=function(e){let t=f(e,this.keyframeNodes);if(t<0){t=~t;const n=new c.A(this,e);this.keyframeNodes.splice(t,0,n)}},d.prototype.destroyKeyframeNode=function(e,t){const n=e.keyframe,i=f(n,this.keyframeNodes);if(i<0)throw new a.A("Keyframe node does not exist.");if(this.keyframeNodes.splice(i,1),-1!==e.megatextureIndex){for(let n=0;n<t.length;n++)t[n].remove(e.megatextureIndex);const i=f(n,this.renderableKeyframeNodes);if(i<0)throw new a.A("Renderable keyframe node does not exist.");this.renderableKeyframeNodes.splice(i,1)}e.spatialNode=void 0,e.state=c.A.LoadState.UNLOADED,e.metadatas={},e.megatextureIndex=-1,e.priority=-Number.MAX_VALUE,e.highPriorityFrameNumber=-1},d.prototype.addKeyframeNodeToMegatextures=function(e,t){if(e.state!==c.A.LoadState.RECEIVED||-1!==e.megatextureIndex||e.metadatas.length!==t.length)throw new a.A("Keyframe node cannot be added to megatexture");for(let n=0;n<t.length;n++){const i=t[n];e.megatextureIndex=i.add(e.metadatas[n]),e.metadatas[n]=void 0}e.state=c.A.LoadState.LOADED;const n=this.renderableKeyframeNodes;let i=f(e.keyframe,n);if(i>=0)throw new a.A("Keyframe already renderable");i=~i,n.splice(i,0,e)},d.prototype.isRenderable=function(e){const t=this.renderableKeyframeNodePrevious,n=this.renderableKeyframeNodeNext,i=this.level;return(0,s.A)(t)&&(0,s.A)(n)&&(t.spatialNode.level===i||n.spatialNode.level===i)&&this.visitedFrameNumber===e};const _=d},913419:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({LEFT:-1,NONE:0,RIGHT:1})},992881:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(342875);const o={modifyFragmentShader:function(e){return(e=i.A.replaceMain(e,"czm_splitter_main"))+"uniform float czm_splitDirection; \nvoid main() \n{ \n#ifndef SHADOW_MAP\n    if (czm_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard; \n    if (czm_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard; \n#endif\n    czm_splitter_main(); \n} \n"},addUniforms:function(e,t){t.czm_splitDirection=function(){return e.splitDirection}}}},590732:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(419061),r=n(491446);function s(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),i.A.typeOf.object("options.schema",e.schema),this._schema=e.schema;const t=e.propertyTables;this._propertyTableCount=(0,r.A)(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(s.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!(0,r.A)(this._propertyTables))return 0;let e=0;const t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}}),s.prototype.getPropertyTable=function(e){return i.A.typeOf.number("propertyTableId",e),this._propertyTables[e]},s.prototype.getPropertyTexture=function(e){return i.A.typeOf.number("propertyTextureId",e),this._propertyTextures[e]},s.prototype.getPropertyAttribute=function(e){return i.A.typeOf.number("propertyAttributeId",e),this._propertyAttributes[e]};const a=s},874818:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(660662),o=n(434067),r=n(267980),s=n(626809),a=n(571804),c=n(491446),l=n(677354),u=n(874915),d=n(367817),h=n(584164),A=n(276904),f=n(402330),p=n(641613),m=n(442790),_=n(718289),g=n(377496),y=n(57775),b=n(40118),v=n(302836),T=n(616e3),w=n(508380),E=n(860139),S=n(40510),C=n(752123),x=n(200646),I=n(62467),P=n(78173);function D(){this.show=!0,this._drawCommand=new g.A({primitiveType:f.A.TRIANGLES,boundingVolume:new i.A,owner:this}),this._commands={drawCommand:this._drawCommand,computeCommand:void 0},this._boundingVolume=new i.A,this._boundingVolume2D=new i.A,this._texture=void 0,this._drawingBufferWidth=void 0,this._drawingBufferHeight=void 0,this._radiusTS=void 0,this._size=void 0,this.glowFactor=1,this._glowFactorDirty=!1,this._useHdr=void 0;const e=this;this._uniformMap={u_texture:function(){return e._texture},u_size:function(){return e._size}}}Object.defineProperties(D.prototype,{glowFactor:{get:function(){return this._glowFactor},set:function(e){e=Math.max(e,0),this._glowFactor=e,this._glowFactorDirty=!0}}});const O=new o.A,L=new o.A,N=new s.A,M=new s.A;D.prototype.update=function(e,t,n){if(!this.show)return;const s=e.mode;if(s===I.A.SCENE2D||s===I.A.MORPHING)return;if(!e.passes.render)return;const l=e.context,f=t.viewport.width,g=t.viewport.height;if(!(0,c.A)(this._texture)||f!==this._drawingBufferWidth||g!==this._drawingBufferHeight||this._glowFactorDirty||n!==this._useHdr){this._texture=this._texture&&this._texture.destroy(),this._drawingBufferWidth=f,this._drawingBufferHeight=g,this._glowFactorDirty=!1,this._useHdr=n;let e=Math.max(f,g);e=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))-2),e=Math.max(1,e);const t=n?l.halfFloatingPointTexture?y.A.HALF_FLOAT:y.A.FLOAT:y.A.UNSIGNED_BYTE;this._texture=new T.A({context:l,width:e,height:e,pixelFormat:A.A.RGBA,pixelDatatype:t}),this._glowLengthTS=5*this._glowFactor,this._radiusTS=1/(1+2*this._glowLengthTS)*.5;const i=this,o={u_radiusTS:function(){return i._radiusTS}};this._commands.computeCommand=new _.A({fragmentShaderSource:S.A,outputTexture:this._texture,uniformMap:o,persists:!1,owner:this,postExecute:function(){i._commands.computeCommand=void 0}})}const D=this._drawCommand;if(!(0,c.A)(D.vertexArray)){const e={direction:0},t=new Uint8Array(8);t[0]=0,t[1]=0,t[2]=255,t[3]=0,t[4]=255,t[5]=255,t[6]=0,t[7]=255;const n=p.A.createVertexBuffer({context:l,typedArray:t,usage:m.A.STATIC_DRAW}),i=[{index:e.direction,vertexBuffer:n,componentsPerAttribute:2,normalize:!0,componentDatatype:a.A.UNSIGNED_BYTE}],o=p.A.createIndexBuffer({context:l,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:m.A.STATIC_DRAW,indexDatatype:u.A.UNSIGNED_SHORT});D.vertexArray=new w.A({context:l,attributes:i,indexBuffer:o}),D.shaderProgram=v.A.fromCache({context:l,vertexShaderSource:C.A,fragmentShaderSource:E.A,attributeLocations:e}),D.renderState=b.A.fromCache({blending:x.A.ALPHA_BLEND}),D.uniformMap=this._uniformMap}const R=l.uniformState.sunPositionWC,F=l.uniformState.sunPositionColumbusView,B=this._boundingVolume,U=this._boundingVolume2D;r.A.clone(R,B.center),U.center.x=F.z,U.center.y=F.x,U.center.z=F.y,B.radius=d.A.SOLAR_RADIUS+d.A.SOLAR_RADIUS*this._glowLengthTS,U.radius=B.radius,s===I.A.SCENE3D?i.A.clone(B,D.boundingVolume):s===I.A.COLUMBUS_VIEW&&i.A.clone(U,D.boundingVolume);const k=P.A.computeActualWgs84Position(e,R,M),V=r.A.magnitude(r.A.subtract(k,e.camera.position,M)),H=l.uniformState.projection,z=N;z.x=0,z.y=0,z.z=-V,z.w=1;const G=h.A.multiplyByVector(H,z,M),j=P.A.clipToGLWindowCoordinates(t.viewport,G,O);z.x=d.A.SOLAR_RADIUS;const W=h.A.multiplyByVector(H,z,M),q=P.A.clipToGLWindowCoordinates(t.viewport,W,L);return this._size=o.A.magnitude(o.A.subtract(q,j,M)),this._size=2*this._size*(1+2*this._glowLengthTS),this._size=Math.ceil(this._size),this._commands},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){const e=this._drawCommand;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._texture=this._texture&&this._texture.destroy(),(0,l.A)(this)};const R=D},205672:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(41476),o=n(419061);const r=function(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),this.color=i.A.clone((0,o.A)(e.color,i.A.WHITE)),this.intensity=(0,o.A)(e.intensity,2)}},380983:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(647934),o=n(434067),r=n(626809),s=n(491446),a=n(677354),c=n(367817),l=n(584164),u=n(543622),d=n(249550),h=n(732156),A=n(602142),f=n(90979),p=n(421549),m=n(517290),_=n(339600),g=n(922990),y=n(413285);function b(){this._sceneFramebuffer=new y.A;const e=.125,t=new Array(6);t[0]=new p.A({fragmentShader:f.A,textureScale:e,forcePowerOfTwo:!0,sampleMode:_.A.LINEAR});const n=t[1]=new p.A({fragmentShader:h.A,uniforms:{avgLuminance:.5,threshold:.25,offset:.1},textureScale:e,forcePowerOfTwo:!0}),i=this;this._delta=1,this._sigma=2,this._blurStep=new o.A,t[2]=new p.A({fragmentShader:A.A,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:0},textureScale:e,forcePowerOfTwo:!0}),t[3]=new p.A({fragmentShader:A.A,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:1},textureScale:e,forcePowerOfTwo:!0}),t[4]=new p.A({fragmentShader:f.A,sampleMode:_.A.LINEAR}),this._uCenter=new o.A,this._uRadius=void 0,t[5]=new p.A({fragmentShader:d.A,uniforms:{center:function(){return i._uCenter},radius:function(){return i._uRadius},colorTexture2:function(){return i._sceneFramebuffer.framebuffer.getColorTexture(0)}}}),this._stages=new m.A({stages:t});const r=new g.A(this),s=t.length;for(let e=0;e<s;++e)t[e]._textureCache=r;this._textureCache=r,this.length=t.length}b.prototype.get=function(e){return this._stages.get(e)},b.prototype.getStageByName=function(e){const t=this._stages.length;for(let n=0;n<t;++n){const t=this._stages.get(n);if(t.name===e)return t}};const v=new r.A,T=new o.A,w=new o.A,E=new l.A;b.prototype.clear=function(e,t,n){this._sceneFramebuffer.clear(e,t,n),this._textureCache.clear(e)},b.prototype.update=function(e){const t=e.context,n=e.viewport,r=this._sceneFramebuffer;r.update(t,n);const s=r.framebuffer;return this._textureCache.update(t),this._stages.update(t,!1),function(e,t,n){const r=t.uniformState,s=r.sunPositionWC,a=r.view,d=r.viewProjection,h=r.projection;let A=l.A.computeViewportTransformation(n,0,1,E);const f=l.A.multiplyByPoint(a,s,v);let p=u.A.pointToGLWindowCoordinates(d,A,s,T);f.x+=c.A.SOLAR_RADIUS;const m=u.A.pointToGLWindowCoordinates(h,A,f,f),_=30*o.A.magnitude(o.A.subtract(m,p,m))*2,g=w;g.x=_,g.y=_,e._uCenter=o.A.clone(p,e._uCenter),e._uRadius=.15*Math.max(g.x,g.y);const y=t.drawingBufferWidth,b=t.drawingBufferHeight,S=e._stages,C=S.get(0),x=C.outputTexture.width,I=C.outputTexture.height,P=new i.A;P.width=x,P.height=I,A=l.A.computeViewportTransformation(P,0,1,E),p=u.A.pointToGLWindowCoordinates(d,A,s,T),g.x*=x/y,g.y*=I/b;const D=C.scissorRectangle;D.x=Math.max(p.x-.5*g.x,0),D.y=Math.max(p.y-.5*g.y,0),D.width=Math.min(g.x,y),D.height=Math.min(g.y,b);for(let e=1;e<4;++e)i.A.clone(D,S.get(e).scissorRectangle)}(this,t,n),s},b.prototype.execute=function(e){const t=this._sceneFramebuffer.framebuffer.getColorTexture(0),n=this._stages,i=n.length;n.get(0).execute(e,t);for(let t=1;t<i;++t)n.get(t).execute(e,n.get(t-1).outputTexture)},b.prototype.copy=function(e,t){if(!(0,s.A)(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(f.A,{uniformMap:{colorTexture:function(){return t._stages.get(t._stages.length-1).outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._textureCache.destroy(),this._stages.destroy(),(0,a.A)(this)};const S=b},768213:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(419061);const o=function(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT),this.webp=(0,i.A)(e.webp,!1),this.basis=(0,i.A)(e.basis,!1)}},557417:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(955943),r=n(75584);function s(e){i.A.typeOf.object("terrainProviderPromise",e),this._ready=!1,this._provider=void 0,this._errorEvent=new o.A,this._readyEvent=new o.A,async function(e,t){let n;try{n=await Promise.resolve(t),e._provider=n,e._ready=!0,e._readyEvent.raiseEvent(n)}catch(t){!function(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}(e._errorEvent,t)}}(this,e)}Object.defineProperties(s.prototype,{errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},ready:{get:function(){return this._ready}},provider:{get:function(){return this._provider}}}),s.fromWorldTerrain=function(e){return new s((0,r.A)(e))};const a=s},640809:(e,t,n)=>{"use strict";n.d(t,{A:()=>se});var i=n(961645),o=n(525490),r=n(660662),s=n(434067),a=n(267980),c=n(626809),l=n(336946),u=n(491446),d=n(605971),h=n(165755),A=n(367817),f=n(832698),p=n(67988),m=n(697422),_=n(371267),g=n(255335),y=n(36138),b=n(414305),v=n(295550),T=n(960847);function w(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new c.A}w.prototype.update=function(e,t,n){this.changedThisFrame&&(G(e,t,this.tile,n),this.changedThisFrame=!1)},w.prototype.destroy=function(e){this._destroyVertexArray(e),(0,u.A)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)},w.prototype._destroyVertexArray=function(e){(0,u.A)(this.vertexArray)&&((0,u.A)(e)?e.push(this.vertexArray):v.A._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};const E=new p.A;function S(e,t,n,i,o,r,s,a,c){if(void 0===i)return;let l=i;for(;l&&(l._lastSelectionResultFrame!==o||T.A.wasKicked(l._lastSelectionResult)||T.A.originalResult(l._lastSelectionResult)===T.A.CULLED);){if(s)return;const e=l.parent;if(r>=y.A.NORTHWEST&&void 0!==e)switch(r){case y.A.NORTHWEST:l=l===e.northwestChild?e:void 0;break;case y.A.NORTHEAST:l=l===e.northeastChild?e:void 0;break;case y.A.SOUTHWEST:l=l===e.southwestChild?e:void 0;break;case y.A.SOUTHEAST:l=l===e.southeastChild?e:void 0}else l=e}if(void 0!==l)if(l._lastSelectionResult!==T.A.RENDERED){if(T.A.originalResult(i._lastSelectionResult)!==T.A.CULLED)switch(r){case y.A.WEST:S(e,t,n,i.northwestChild,o,r,!0,a,c),S(e,t,n,i.southwestChild,o,r,!0,a,c);break;case y.A.EAST:S(e,t,n,i.southeastChild,o,r,!0,a,c),S(e,t,n,i.northeastChild,o,r,!0,a,c);break;case y.A.SOUTH:S(e,t,n,i.southwestChild,o,r,!0,a,c),S(e,t,n,i.southeastChild,o,r,!0,a,c);break;case y.A.NORTH:S(e,t,n,i.northeastChild,o,r,!0,a,c),S(e,t,n,i.northwestChild,o,r,!0,a,c);break;case y.A.NORTHWEST:S(e,t,n,i.northwestChild,o,r,!0,a,c);break;case y.A.NORTHEAST:S(e,t,n,i.northeastChild,o,r,!0,a,c);break;case y.A.SOUTHWEST:S(e,t,n,i.southwestChild,o,r,!0,a,c);break;case y.A.SOUTHEAST:S(e,t,n,i.southeastChild,o,r,!0,a,c);break;default:throw new d.A("Invalid edge")}}else{if((0,u.A)(l.data.vertexArray))return;!function(e,t,n,i,o,r,s,a){const c=i.data;if(void 0===c.fill)c.fill=new w(i);else if(c.fill.visitedFrame===r)return;c.fill.enqueuedFrame!==r&&(c.fill.enqueuedFrame=r,c.fill.changedThisFrame=!1,s.enqueue(i)),function(e,t,n,i,o,r){const s=i.data.fill;let a;const c=n.data.fill;let l,d,h,f,p,m;switch((0,u.A)(c)?(c.visitedFrame=t.frameNumber,c.changedThisFrame&&(G(e,t,n,r),c.changedThisFrame=!1),a=n.data.fill.mesh):a=n.data.mesh,o){case y.A.WEST:l=s.westMeshes,d=s.westTiles;break;case y.A.SOUTH:l=s.southMeshes,d=s.southTiles;break;case y.A.EAST:l=s.eastMeshes,d=s.eastTiles;break;case y.A.NORTH:l=s.northMeshes,d=s.northTiles;break;case y.A.NORTHWEST:return s.changedThisFrame=s.changedThisFrame||s.northwestMesh!==a,s.northwestMesh=a,void(s.northwestTile=n);case y.A.NORTHEAST:return s.changedThisFrame=s.changedThisFrame||s.northeastMesh!==a,s.northeastMesh=a,void(s.northeastTile=n);case y.A.SOUTHWEST:return s.changedThisFrame=s.changedThisFrame||s.southwestMesh!==a,s.southwestMesh=a,void(s.southwestTile=n);case y.A.SOUTHEAST:return s.changedThisFrame=s.changedThisFrame||s.southeastMesh!==a,s.southeastMesh=a,void(s.southeastTile=n)}if(n.level<=i.level)return s.changedThisFrame=s.changedThisFrame||l[0]!==a||1!==l.length,l[0]=a,d[0]=n,l.length=1,void(d.length=1);const _=n.rectangle;let g;const b=i.rectangle;switch(o){case y.A.WEST:for(g=(b.north-b.south)*A.A.EPSILON5,h=0;h<d.length&&(p=d[h],m=p.rectangle,!A.A.greaterThan(_.north,m.south,g));++h);for(f=h;f<d.length&&(p=d[f],m=p.rectangle,!A.A.greaterThanOrEquals(_.south,m.north,g));++f);break;case y.A.SOUTH:for(g=(b.east-b.west)*A.A.EPSILON5,h=0;h<d.length&&(p=d[h],m=p.rectangle,!A.A.lessThan(_.west,m.east,g));++h);for(f=h;f<d.length&&(p=d[f],m=p.rectangle,!A.A.lessThanOrEquals(_.east,m.west,g));++f);break;case y.A.EAST:for(g=(b.north-b.south)*A.A.EPSILON5,h=0;h<d.length&&(p=d[h],m=p.rectangle,!A.A.lessThan(_.south,m.north,g));++h);for(f=h;f<d.length&&(p=d[f],m=p.rectangle,!A.A.lessThanOrEquals(_.north,m.south,g));++f);break;case y.A.NORTH:for(g=(b.east-b.west)*A.A.EPSILON5,h=0;h<d.length&&(p=d[h],m=p.rectangle,!A.A.greaterThan(_.east,m.west,g));++h);for(f=h;f<d.length&&(p=d[f],m=p.rectangle,!A.A.greaterThanOrEquals(_.west,m.east,g));++f);}f-h==1?(s.changedThisFrame=s.changedThisFrame||l[h]!==a,l[h]=a,d[h]=n):(s.changedThisFrame=!0,l.splice(h,f-h,a),d.splice(h,f-h,n))}(e,t,n,i,o,a)}(e,t,n,l,r,o,a,c)}}w.updateFillTiles=function(e,t,n,i){const o=e._quadtree,r=o._levelZeroTiles,s=o._lastSelectionFrameNumber,a=E;a.clear();for(let e=0;e<t.length;++e){const n=t[e];(0,u.A)(n.data.vertexArray)&&a.enqueue(t[e])}let c=a.dequeue();for(;void 0!==c;){const t=c.findTileToWest(r),o=c.findTileToSouth(r),l=c.findTileToEast(r),u=c.findTileToNorth(r);S(e,n,c,t,s,y.A.EAST,!1,a,i),S(e,n,c,o,s,y.A.NORTH,!1,a,i),S(e,n,c,l,s,y.A.WEST,!1,a,i),S(e,n,c,u,s,y.A.SOUTH,!1,a,i);const d=t.findTileToNorth(r),h=t.findTileToSouth(r),A=l.findTileToNorth(r),f=l.findTileToSouth(r);S(e,n,c,d,s,y.A.SOUTHEAST,!1,a,i),S(e,n,c,A,s,y.A.SOUTHWEST,!1,a,i),S(e,n,c,h,s,y.A.NORTHEAST,!1,a,i),S(e,n,c,f,s,y.A.NORTHWEST,!1,a,i),c=a.dequeue()}};const C=new l.A,x=new l.A,I=new a.A,P=new a.A,D=new s.A,O=new s.A,L=new s.A;function N(){this.height=0,this.encodedNormal=new s.A}function M(e,t,n,i,o,r,s,a,c){if((0,u.A)(o))return o;let l;if((0,u.A)(r)&&(0,u.A)(s))l=.5*(r.height+s.height);else if((0,u.A)(r))l=r.height;else if((0,u.A)(s))l=s.height;else if((0,u.A)(a))l=a.height;else{const t=e.tile.data.tileBoundingRegion;let n=0,i=0;(0,u.A)(t)&&(n=t.minimumHeight,i=t.maximumHeight),l=.5*(n+i)}return $(0,t,0,0,l,c),c}const R={minimumHeight:0,maximumHeight:0},F=new a.A,B=new N,U=new N,k=new N,V=new N,H="undefined"!=typeof Uint8Array?new Uint8Array(81):void 0,z={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0};function G(e,t,n,o){v.A.initialize(n,e.terrainProvider,e._imageryLayers);const c=n.data,l=c.fill,d=n.rectangle,A=t.terrainExaggeration,p=t.terrainExaggerationRelativeHeight,T=1!==A,w=n.tilingScheme.ellipsoid;let E=K(l,w,0,1,l.northwestTile,l.northwestMesh,l.northTiles,l.northMeshes,l.westTiles,l.westMeshes,k),S=K(l,w,0,0,l.southwestTile,l.southwestMesh,l.westTiles,l.westMeshes,l.southTiles,l.southMeshes,B),I=K(l,w,1,0,l.southeastTile,l.southeastMesh,l.southTiles,l.southMeshes,l.eastTiles,l.eastMeshes,U),O=K(l,w,1,1,l.northeastTile,l.northeastMesh,l.eastTiles,l.eastMeshes,l.northTiles,l.northMeshes,V);E=M(l,w,0,0,E,S,O,I,k),S=M(l,w,0,0,S,E,I,O,B),I=M(l,w,0,0,I,S,O,E,U),O=M(l,w,0,0,O,I,E,S,V);const N=S.height,G=I.height,W=E.height,q=O.height;let Y=Math.min(N,G,W,q),X=Math.max(N,G,W,q);const J=.5*(Y+X);let Q,$;const Z=e.getLevelMaximumGeometricError(n.level),te=w.maximumRadius-Z;let ne=4*Math.acos(te/w.maximumRadius);if(ne*=1.5,d.width>ne&&X-Y<=Z){const e=new h.A({width:9,height:9,buffer:H,structure:{heightOffset:X}}),t=z;t.tilingScheme=n.tilingScheme,t.x=n.x,t.y=n.y,t.level=n.level,t.exaggeration=A,t.exaggerationRelativeHeight=p,l.mesh=e._createMeshSync(t)}else{const t=T,o=m.A.center(d,x);o.height=J;const c=w.cartographicToCartesian(o,F),u=new _.A(c,void 0,void 0,void 0,void 0,!0,!0,t,A,p);let h,v=5;for(h=l.westMeshes,Q=0,$=h.length;Q<$;++Q)v+=h[Q].eastIndicesNorthToSouth.length;for(h=l.southMeshes,Q=0,$=h.length;Q<$;++Q)v+=h[Q].northIndicesWestToEast.length;for(h=l.eastMeshes,Q=0,$=h.length;Q<$;++Q)v+=h[Q].westIndicesSouthToNorth.length;for(h=l.northMeshes,Q=0,$=h.length;Q<$;++Q)v+=h[Q].southIndicesEastToWest.length;const N=R;N.minimumHeight=Y,N.maximumHeight=X;const M=u.stride;let B=new Float32Array(v*M),U=0;const k=U;U=j(w,d,u,B,U,0,1,E.height,E.encodedNormal,1,N),U=ee(l,w,u,B,U,l.westTiles,l.westMeshes,y.A.EAST,N);const V=U;U=j(w,d,u,B,U,0,0,S.height,S.encodedNormal,0,N),U=ee(l,w,u,B,U,l.southTiles,l.southMeshes,y.A.NORTH,N);const H=U;U=j(w,d,u,B,U,1,0,I.height,I.encodedNormal,0,N),U=ee(l,w,u,B,U,l.eastTiles,l.eastMeshes,y.A.WEST,N);const z=U;U=j(w,d,u,B,U,1,1,O.height,O.encodedNormal,1,N),U=ee(l,w,u,B,U,l.northTiles,l.northMeshes,y.A.SOUTH,N),Y=N.minimumHeight,X=N.maximumHeight;const G=f.A.fromRectangle(d,Y,X,n.tilingScheme.ellipsoid),W=b.A.geodeticLatitudeToMercatorAngle(d.south),q=1/(b.A.geodeticLatitudeToMercatorAngle(d.north)-W),K=(b.A.geodeticLatitudeToMercatorAngle(o.latitude)-W)*q,Z=w.geodeticSurfaceNormalCartographic(C,P),te=i.A.octEncode(Z,D),ne=U;u.encode(B,U*M,G.center,s.A.fromElements(.5,.5,L),J,te,K,Z),++U;const ie=U,oe=3*(ie-1),se=oe*(ie<256?1:2);let ae;if((B.length-ie*M)*Float32Array.BYTES_PER_ELEMENT>=se){const e=ie*M*Float32Array.BYTES_PER_ELEMENT;ae=ie<256?new Uint8Array(B.buffer,e,oe):new Uint16Array(B.buffer,e,oe)}else ae=ie<256?new Uint8Array(oe):new Uint16Array(oe);B=new Float32Array(B.buffer,0,ie*M);let ce=0;for(Q=0;Q<ie-2;++Q)ae[ce++]=ne,ae[ce++]=Q,ae[ce++]=Q+1;ae[ce++]=ne,ae[ce++]=Q,ae[ce++]=0;const le=[];for(Q=V;Q>=k;--Q)le.push(Q);const ue=[];for(Q=H;Q>=V;--Q)ue.push(Q);const de=[];for(Q=z;Q>=H;--Q)de.push(Q);const he=[];for(he.push(0),Q=ne-1;Q>=z;--Q)he.push(Q);l.mesh=new g.A(u.center,B,ae,oe,ie,Y,X,r.A.fromOrientedBoundingBox(G),function(e,t,n,i,o){const r=e.quadtree._occluders.ellipsoid,s=r.ellipsoid,c=re;return a.A.fromRadians(n.west,n.south,o,s,c[0]),a.A.fromRadians(n.east,n.south,o,s,c[1]),a.A.fromRadians(n.west,n.north,o,s,c[2]),a.A.fromRadians(n.east,n.north,o,s,c[3]),r.computeHorizonCullingPointPossiblyUnderEllipsoid(t,c,i,void 0)}(e,G.center,d,Y,X),u.stride,G,u,le,ue,de,he)}const ie=t.context;l._destroyVertexArray(o),l.vertexArray=v.A._createVertexArrayForMesh(ie,l.mesh),c.processImagery(n,e.terrainProvider,t,!0);const oe=l.waterMaskTexture;if(l.waterMaskTexture=void 0,e.terrainProvider.hasWaterMask){const e=c._findAncestorTileWithTerrainData(n);(0,u.A)(e)&&(0,u.A)(e.data.waterMaskTexture)&&(l.waterMaskTexture=e.data.waterMaskTexture,++l.waterMaskTexture.referenceCount,c._computeWaterMaskTranslationAndScale(n,e,l.waterMaskTranslationAndScale))}(0,u.A)(oe)&&(--oe.referenceCount,0===oe.referenceCount&&oe.destroy())}function j(e,t,n,i,o,r,s,a,c,l,u){const d=C;d.longitude=A.A.lerp(t.west,t.east,r),d.latitude=A.A.lerp(t.south,t.north,s),d.height=a;const h=e.cartographicToCartesian(d,I);let f;n.hasGeodeticSurfaceNormals&&(f=e.geodeticSurfaceNormal(h,P));const p=O;return p.x=r,p.y=s,n.encode(i,o*n.stride,h,p,a,c,l,f),u.minimumHeight=Math.min(u.minimumHeight,a),u.maximumHeight=Math.max(u.maximumHeight,a),o+1}const W=new m.A;function q(e,t,n,i){let o=e.rectangle;const r=t.rectangle;0===t.x&&1===n.x&&e.x===e.tilingScheme.getNumberOfXTilesAtLevel(e.level)-1?(o=m.A.clone(e.rectangle,W),o.west-=A.A.TWO_PI,o.east-=A.A.TWO_PI):0===e.x&&0===n.x&&t.x===t.tilingScheme.getNumberOfXTilesAtLevel(t.level)-1&&(o=m.A.clone(e.rectangle,W),o.west+=A.A.TWO_PI,o.east+=A.A.TWO_PI);const s=o.east-o.west,a=(r.west-o.west)/s,c=(r.east-o.west)/s,l=o.north-o.south,u=(r.south-o.south)/l,d=(r.north-o.south)/l;let h=(n.x-a)/(c-a),f=(n.y-u)/(d-u);return Math.abs(h)<Math.EPSILON5?h=0:Math.abs(h-1)<Math.EPSILON5&&(h=1),Math.abs(f)<Math.EPSILON5?f=0:Math.abs(f-1)<Math.EPSILON5&&(f=1),i.x=h,i.y=f,i}const Y=new s.A;function X(e,t,n,i,o){const r=e.encoding,s=e.vertices;if(o.height=r.decodeHeight(s,t),r.hasVertexNormals)r.getOctEncodedNormal(s,t,o.encodedNormal);else{const e=o.encodedNormal;e.x=0,e.y=0}}const J=new s.A,Q=new a.A;function $(e,t,n,o,r,s){s.height=r;const a=t.geodeticSurfaceNormalCartographic(C,I);i.A.octEncode(a,s.encodedNormal)}function K(e,t,n,i,o,r,s,a,c,l,d){if(oe(e,t,a,s,!1,n,i,d)||oe(e,t,l,c,!0,n,i,d))return d;let h,A;return ie(o,r)?(h=0===n?0===i?r.eastIndicesNorthToSouth[0]:r.southIndicesEastToWest[0]:0===i?r.northIndicesWestToEast[0]:r.westIndicesSouthToNorth[0],X(r,h,0,0,d),d):(A=0===n?0===i?Z(e.westMeshes,e.westTiles,y.A.EAST,e.southMeshes,e.southTiles,y.A.NORTH,n,i):Z(e.northMeshes,e.northTiles,y.A.SOUTH,e.westMeshes,e.westTiles,y.A.EAST,n,i):0===i?Z(e.southMeshes,e.southTiles,y.A.NORTH,e.eastMeshes,e.eastTiles,y.A.WEST,n,i):Z(e.eastMeshes,e.eastTiles,y.A.WEST,e.northMeshes,e.northTiles,y.A.SOUTH,n,i),(0,u.A)(A)?($(0,t,0,0,A,d),d):void 0)}function Z(e,t,n,i,o,r,s,a){const c=ne(e,t,!1,n),l=ne(i,o,!0,r);return(0,u.A)(c)&&(0,u.A)(l)?.5*(c+l):(0,u.A)(c)?c:l}function ee(e,t,n,i,o,r,s,a,c){for(let l=0;l<r.length;++l)o=te(e,t,n,i,o,r[l],s[l],a,c);return o}function te(e,t,n,i,o,r,s,a,c){let l=r.rectangle;a===y.A.EAST&&0===e.tile.x?(l=m.A.clone(r.rectangle,W),l.west-=A.A.TWO_PI,l.east-=A.A.TWO_PI):a===y.A.WEST&&0===r.x&&(l=m.A.clone(r.rectangle,W),l.west+=A.A.TWO_PI,l.east+=A.A.TWO_PI);const u=e.tile.rectangle;let d,h,f,p;switch(o>0&&(n.decodeTextureCoordinates(i,o-1,L),d=L.x,h=L.y),a){case y.A.WEST:f=s.westIndicesSouthToNorth,p=!1;break;case y.A.NORTH:f=s.northIndicesWestToEast,p=!0;break;case y.A.EAST:f=s.eastIndicesNorthToSouth,p=!1;break;case y.A.SOUTH:f=s.southIndicesEastToWest,p=!0}const _=r,g=e.tile,v=s.encoding,T=s.vertices,w=n.stride;let E,S;v.hasWebMercatorT&&(E=b.A.geodeticLatitudeToMercatorAngle(u.south),S=1/(b.A.geodeticLatitudeToMercatorAngle(u.north)-E));for(let e=0;e<f.length;++e){const r=f[e],s=v.decodeTextureCoordinates(T,r,L);q(_,g,s,s);const a=s.x,l=s.y,m=p?a:l;if(m<0||m>1)continue;if(Math.abs(a-d)<A.A.EPSILON5&&Math.abs(l-h)<A.A.EPSILON5)continue;const y=Math.abs(a)<A.A.EPSILON5||Math.abs(a-1)<A.A.EPSILON5,C=Math.abs(l)<A.A.EPSILON5||Math.abs(l-1)<A.A.EPSILON5;if(y&&C)continue;const x=v.decodePosition(T,r,I),O=v.decodeHeight(T,r);let N;v.hasVertexNormals?N=v.getOctEncodedNormal(T,r,D):(N=D,N.x=0,N.y=0);let M,R=l;if(v.hasWebMercatorT){const e=A.A.lerp(u.south,u.north,l);R=(b.A.geodeticLatitudeToMercatorAngle(e)-E)*S}n.hasGeodeticSurfaceNormals&&(M=t.geodeticSurfaceNormal(x,P)),n.encode(i,o*w,x,s,O,N,R,M),c.minimumHeight=Math.min(c.minimumHeight,O),c.maximumHeight=Math.max(c.maximumHeight,O),++o}return o}function ne(e,t,n,i,o,r){let s,a,c;n?(s=0,a=e.length,c=1):(s=e.length-1,a=-1,c=-1);for(let o=s;o!==a;o+=c){const r=e[o];if(!ie(t[o],r))continue;let s;switch(i){case y.A.WEST:s=r.westIndicesSouthToNorth;break;case y.A.SOUTH:s=r.southIndicesEastToWest;break;case y.A.EAST:s=r.eastIndicesNorthToSouth;break;case y.A.NORTH:s=r.northIndicesWestToEast}const a=s[n?0:s.length-1];if((0,u.A)(a))return r.encoding.decodeHeight(r.vertices,a)}}function ie(e,t){return(0,u.A)(t)&&(!(0,u.A)(e.data.fill)||!e.data.fill.changedThisFrame)}function oe(e,t,n,r,s,c,l,u){let d,h,f,p,m;const _=r[s?0:n.length-1],g=n[s?0:n.length-1];if(ie(_,g)&&(0===c?0===l?(d=s?g.northIndicesWestToEast:g.eastIndicesNorthToSouth,h=s,f=s):(d=s?g.eastIndicesNorthToSouth:g.southIndicesEastToWest,h=!s,f=!1):0===l?(d=s?g.westIndicesSouthToNorth:g.northIndicesWestToEast,h=!s,f=!0):(d=s?g.southIndicesEastToWest:g.westIndicesSouthToNorth,h=s,f=!s),d.length>0)){p=s?0:d.length-1,m=d[p],g.encoding.decodeTextureCoordinates(g.vertices,m,L);const n=q(_,e.tile,L,L);if(n.x===c&&n.y===l)return X(g,m,0,0,u),!0;if(p=(0,o.A)(d,h?c:l,(function(t,n){g.encoding.decodeTextureCoordinates(g.vertices,t,L);const i=q(_,e.tile,L,L);return f?h?i.x-c:i.y-l:h?c-i.x:l-i.y})),!(p<0))return X(g,d[p],0,0,u),!0;if(p=~p,p>0&&p<d.length)return function(e,t,n,o,r,s,c,l,u,d){const h=o.encoding,f=o.vertices,p=q(t,n,h.decodeTextureCoordinates(f,r,L),L),m=q(t,n,h.decodeTextureCoordinates(f,s,O),O);let _;_=u?(c-p.x)/(m.x-p.x):(l-p.y)/(m.y-p.y);const g=h.decodeHeight(f,r),y=h.decodeHeight(f,s),b=n.rectangle;let v;if(C.longitude=A.A.lerp(b.west,b.east,c),C.latitude=A.A.lerp(b.south,b.north,l),d.height=C.height=A.A.lerp(g,y,_),h.hasVertexNormals){const e=h.getOctEncodedNormal(f,r,Y),t=h.getOctEncodedNormal(f,s,J),n=i.A.octDecode(e.x,e.y,I),o=i.A.octDecode(t.x,t.y,Q);v=a.A.lerp(n,o,_,I),a.A.normalize(v,v),i.A.octEncode(v,d.encodedNormal)}else v=e.geodeticSurfaceNormalCartographic(C,I),i.A.octEncode(v,d.encodedNormal)}(t,_,e.tile,g,d[p-1],d[p],c,l,h,u),!0}return!1}const re=[new a.A,new a.A,new a.A,new a.A],se=w},71160:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6})},413690:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(660662),o=n(267980),r=n(336946),s=n(369031),a=n(433235),c=n(419061),l=n(491446),u=n(610750),d=n(75200),h=n(150429),A=n(584164),f=n(832698),p=n(257941),m=n(766067),_=n(697422),g=n(406882),y=n(612123),b=n(842153),v=n(62467);function T(e){s.A.typeOf.object("options",e),s.A.typeOf.object("options.rectangle",e.rectangle),this.rectangle=_.A.clone(e.rectangle),this.minimumHeight=(0,c.A)(e.minimumHeight,0),this.maximumHeight=(0,c.A)(e.maximumHeight,0),this.southwestCornerCartesian=new o.A,this.northeastCornerCartesian=new o.A,this.westNormal=new o.A,this.southNormal=new o.A,this.eastNormal=new o.A,this.northNormal=new o.A;const t=(0,c.A)(e.ellipsoid,u.A.WGS84);!function(e,t,n){n.cartographicToCartesian(_.A.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(_.A.northeast(t),e.northeastCornerCartesian),D.longitude=t.west,D.latitude=.5*(t.south+t.north),D.height=0;const i=n.cartographicToCartesian(D,I),r=o.A.cross(i,o.A.UNIT_Z,C);o.A.normalize(r,e.westNormal),D.longitude=t.east;const s=n.cartographicToCartesian(D,P),a=o.A.cross(o.A.UNIT_Z,s,w);o.A.normalize(a,e.eastNormal);let c=o.A.subtract(i,s,w);0===o.A.magnitude(c)&&(c=o.A.clone(r,c));const l=o.A.normalize(c,x),u=t.south;let d;if(u>0){D.longitude=.5*(t.west+t.east),D.latitude=u;const i=n.cartographicToCartesian(D,L.origin);o.A.clone(l,L.direction);const r=p.A.fromPointNormal(e.southwestCornerCartesian,e.westNormal,O);h.A.rayPlane(L,r,e.southwestCornerCartesian),d=n.geodeticSurfaceNormal(i,E)}else d=n.geodeticSurfaceNormalCartographic(_.A.southeast(t),E);const A=o.A.cross(d,c,S);o.A.normalize(A,e.southNormal);const f=t.north;let m;if(f<0){D.longitude=.5*(t.west+t.east),D.latitude=f;const i=n.cartographicToCartesian(D,L.origin);o.A.negate(l,L.direction);const r=p.A.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,O);h.A.rayPlane(L,r,e.northeastCornerCartesian),m=n.geodeticSurfaceNormal(i,E)}else m=n.geodeticSurfaceNormalCartographic(_.A.northwest(t),E);const g=o.A.cross(c,m,S);o.A.normalize(g,e.northNormal)}(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,(0,c.A)(e.computeBoundingVolumes,!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(T.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),T.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=f.A.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=i.A.fromOrientedBoundingBox(this._orientedBoundingBox)};const w=new o.A,E=new o.A,S=new o.A,C=new o.A,x=new o.A,I=new o.A,P=new o.A,D=new r.A,O=new p.A(o.A.UNIT_X,0),L=new m.A,N=new o.A,M=new o.A,R=new o.A(0,-1,0),F=new o.A(0,0,-1),B=new o.A;T.prototype.distanceToCamera=function(e){s.A.defined("frameState",e);const t=function(e,t){const n=t.camera,i=n.positionWC,r=n.positionCartographic;let s,a,c,l=0;if(!_.A.contains(e.rectangle,r)){let n=e.southwestCornerCartesian,r=e.northeastCornerCartesian,s=e.westNormal,a=e.southNormal,c=e.eastNormal,u=e.northNormal;t.mode!==v.A.SCENE3D&&(n=t.mapProjection.project(_.A.southwest(e.rectangle),N),n.z=n.y,n.y=n.x,n.x=0,r=t.mapProjection.project(_.A.northeast(e.rectangle),M),r.z=r.y,r.y=r.x,r.x=0,s=R,c=o.A.UNIT_Y,a=F,u=o.A.UNIT_Z);const d=o.A.subtract(i,n,B),h=o.A.dot(d,s),A=o.A.dot(d,a),f=o.A.subtract(i,r,B),p=o.A.dot(f,c),m=o.A.dot(f,u);h>0?l+=h*h:p>0&&(l+=p*p),A>0?l+=A*A:m>0&&(l+=m*m)}if(t.mode===v.A.SCENE3D?(s=r.height,a=e.minimumHeight,c=e.maximumHeight):(s=i.x,a=0,c=0),s>c){const e=s-c;l+=e*e}else if(s<a){const e=a-s;l+=e*e}return Math.sqrt(l)}(this,e);if(e.mode===v.A.SCENE3D&&(0,l.A)(this._orientedBoundingBox)){const n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t},T.prototype.intersectPlane=function(e){return s.A.defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},T.prototype.createDebugVolume=function(e){s.A.defined("color",e);const t=new A.A.clone(A.A.IDENTITY),n=new g.A({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new d.A({geometry:n,id:"outline",modelMatrix:t,attributes:{color:a.A.fromColor(e)}});return new b.A({geometryInstances:i,appearance:new y.A({translucent:!1,flat:!0}),asynchronous:!1})};const U=T},224159:(e,t,n)=>{"use strict";n.d(t,{A:()=>ee});var i=n(267980),o=n(491446),r=n(336946),s=n(610750),a=n(647326),c=n(331185),l=n(257941),u=n(173885),d=n(660662),h=n(369031),A=n(433235),f=n(419061),p=n(75200),m=n(584164),_=n(612123),g=n(842153),y=n(252538);let b=new r.A;function v(e){h.A.typeOf.object("options",e),h.A.typeOf.string("options.token",e.token);const t=y.A.fromToken(e.token),n=(0,f.A)(e.minimumHeight,0),o=(0,f.A)(e.maximumHeight,0),r=(0,f.A)(e.ellipsoid,s.A.WGS84);this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=o,this.ellipsoid=r;const a=function(e,t,n,o){const r=new Array(6),s=e.getCenter(),a=o.geodeticSurfaceNormal(s,T),c=o.cartesianToCartographic(s,w);c.height=n;const u=o.cartographicToCartesian(c,E),d=l.A.fromPointNormal(u,a);r[0]=d;let h,A=0;const f=[];let p,m;for(h=0;h<4;h++){p=e.getVertex(h),f[h]=p,m=o.cartesianToCartographic(p,S),m.height=t;const n=l.A.getPointDistance(d,o.cartographicToCartesian(m,C));n<A&&(A=n)}const _=l.A.clone(d);for(_.normal=i.A.negate(_.normal,_.normal),_.distance=-1*_.distance+A,r[1]=_,h=0;h<4;h++){p=f[h];const e=f[(h+1)%4],t=o.geodeticSurfaceNormal(p,x),n=i.A.subtract(e,p,P);let s=i.A.cross(n,t,I);s=i.A.normalize(s,s),r[2+h]=l.A.fromPointNormal(p,s)}return r}(t,n,o,r);this._boundingPlanes=a;const c=function(e){const t=new Array(8);for(let n=0;n<4;n++)t[n]=j(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=j(e[1],e[2+(n+3)%4],e[2+n%4]);return t}(a);let u;for(this._vertices=c,this._edgeNormals=new Array(6),this._edgeNormals[0]=Y(a[0],c.slice(0,4)),u=0;u<4;u++)this._edgeNormals[0][u]=i.A.negate(this._edgeNormals[0][u],this._edgeNormals[0][u]);for(this._edgeNormals[1]=Y(a[1],c.slice(4,8)),u=0;u<4;u++)this._edgeNormals[2+u]=Y(a[2+u],[c[u%4],c[(u+1)%4],c[4+(u+1)%4],c[4+u]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],u=0;u<4;u++)this._planeVertices.push([this._vertices[u%4],this._vertices[(u+1)%4],this._vertices[4+(u+1)%4],this._vertices[4+u]]);const A=t.getCenter();b=r.cartesianToCartographic(A,b),b.height=(o+n)/2,this.center=r.cartographicToCartesian(b,A),this._boundingSphere=d.A.fromPoints(c)}const T=new i.A,w=new r.A,E=new i.A,S=new r.A,C=new i.A,x=new i.A,I=new i.A,P=new i.A;let D=new i.A,O=new i.A,L=new i.A,N=new i.A,M=new i.A,R=new i.A;const F=new i.A,B=new i.A,U=new i.A;let k=new i.A,V=new i.A,H=new i.A,z=new i.A;const G=new c.A;function j(e,t,n){D=e.normal,O=t.normal,L=n.normal,N=i.A.multiplyByScalar(e.normal,-e.distance,N),M=i.A.multiplyByScalar(t.normal,-t.distance,M),R=i.A.multiplyByScalar(n.normal,-n.distance,R),k=i.A.multiplyByScalar(i.A.cross(O,L,F),i.A.dot(N,D),k),V=i.A.multiplyByScalar(i.A.cross(L,D,B),i.A.dot(M,O),V),H=i.A.multiplyByScalar(i.A.cross(D,O,U),i.A.dot(R,L),H),G[0]=D.x,G[1]=O.x,G[2]=L.x,G[3]=D.y,G[4]=O.y,G[5]=L.y,G[6]=D.z,G[7]=O.z,G[8]=L.z;const o=c.A.determinant(G);return z=i.A.add(k,V,z),z=i.A.add(z,H,z),new i.A(z.x/o,z.y/o,z.z/o)}let W=new i.A,q=new i.A;function Y(e,t){const n=[];for(let o=0;o<4;o++)W=i.A.subtract(t[(o+1)%4],t[o],W),q=i.A.cross(e.normal,W,q),q=i.A.normalize(q,q),n[o]=i.A.clone(q);return n}Object.defineProperties(v.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});const X=new i.A;v.prototype.distanceToCamera=function(e){h.A.defined("frameState",e);const t=e.camera.positionWC,n=[],o=[];let r,s,a,c,u;for(l.A.getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),o.push(this._planeVertices[0]),r=this._edgeNormals[0]):l.A.getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),o.push(this._planeVertices[1]),r=this._edgeNormals[1]),s=0;s<4;s++)a=2+s,l.A.getPointDistance(this._boundingPlanes[a],t)>0&&(n.push(a),o.push(this._planeVertices[a]),r=this._edgeNormals[a]);if(0===n.length)return 0;if(1===n.length)return u=this._boundingPlanes[n[0]],c=Z(l.A.projectPointOntoPlane(u,t,X),o[0],0,r),i.A.distance(c,t);if(2===n.length){if(0===n[0]){const e=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return c=$(t,e[0],e[1]),i.A.distance(c,t)}let e,r=Number.MAX_VALUE;for(s=0;s<2;s++)u=this._boundingPlanes[n[s]],c=Z(l.A.projectPointOntoPlane(u,t,X),o[s],0,this._edgeNormals[n[s]]),e=i.A.distanceSquared(c,t),e<r&&(r=e);return Math.sqrt(r)}if(n.length>3)return c=Z(l.A.projectPointOntoPlane(this._boundingPlanes[1],t,X),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),i.A.distance(c,t);const d=2===n[1]&&5===n[2]?0:1;return 0===n[0]?i.A.distance(t,this._vertices[(n[1]-2+d)%4]):i.A.distance(t,this._vertices[4+(n[1]-2+d)%4])};const J=new i.A,Q=new i.A;function $(e,t,n){const o=i.A.subtract(n,t,J),r=i.A.subtract(e,t,Q);let s=i.A.dot(o,r);if(s<=0)return t;const a=i.A.dot(o,o);return s>=a?n:(s/=a,new i.A((1-s)*t.x+s*n.x,(1-s)*t.y+s*n.y,(1-s)*t.z+s*n.z))}const K=new l.A(i.A.UNIT_X,0);function Z(e,t,n,r){let s,a,c,u=Number.MAX_VALUE;for(let n=0;n<t.length;n++){const o=l.A.fromPointNormal(t[n],r[n],K);l.A.getPointDistance(o,e)<0||(c=$(e,t[n],t[(n+1)%4]),s=i.A.distance(e,c),s<u&&(u=s,a=c))}return(0,o.A)(a)?a:e}v.prototype.intersectPlane=function(e){h.A.defined("plane",e);let t=0,n=0;for(let o=0;o<this._vertices.length;o++)i.A.dot(e.normal,this._vertices[o])+e.distance<0?n++:t++;return t===this._vertices.length?a.A.INSIDE:n===this._vertices.length?a.A.OUTSIDE:a.A.INTERSECTING},v.prototype.createDebugVolume=function(e){h.A.defined("color",e);const t=new m.A.clone(m.A.IDENTITY),n=new u.A({polygonHierarchy:{positions:this._planeVertices[0]}}),i=u.A.createGeometry(n),o=new p.A({geometry:i,id:"outline",modelMatrix:t,attributes:{color:A.A.fromColor(e)}}),r=new u.A({polygonHierarchy:{positions:this._planeVertices[1]}}),s=u.A.createGeometry(r),a=new p.A({geometry:s,id:"outline",modelMatrix:t,attributes:{color:A.A.fromColor(e)}}),c=[];for(let n=0;n<4;n++){const i=new u.A({polygonHierarchy:{positions:this._planeVertices[2+n]}}),o=u.A.createGeometry(i);c[n]=new p.A({geometry:o,id:"outline",modelMatrix:t,attributes:{color:A.A.fromColor(e)}})}return new g.A({geometryInstances:[c[0],c[1],c[2],c[3],a,o],appearance:new _.A({translucent:!1,flat:!0}),asynchronous:!1})};const ee=v},315747:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(660662),o=n(267980),r=n(369031),s=n(433235),a=n(75200),c=n(367817),l=n(584164),u=n(6874),d=n(612123),h=n(842153);function A(e,t){0===t&&(t=c.A.EPSILON7),this._boundingSphere=new i.A(e,t)}Object.defineProperties(A.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),A.prototype.distanceToCamera=function(e){r.A.defined("frameState",e);const t=this._boundingSphere;return Math.max(0,o.A.distance(t.center,e.camera.positionWC)-t.radius)},A.prototype.intersectPlane=function(e){return r.A.defined("plane",e),i.A.intersectPlane(this._boundingSphere,e)},A.prototype.update=function(e,t){o.A.clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},A.prototype.createDebugVolume=function(e){r.A.defined("color",e);const t=new u.A({radius:this.radius}),n=l.A.fromTranslation(this.center,new l.A.clone(l.A.IDENTITY)),i=new a.A({geometry:t,id:"outline",modelMatrix:n,attributes:{color:s.A.fromColor(e)}});return new h.A({geometryInstances:i,appearance:new d.A({translucent:!1,flat:!0}),asynchronous:!1})};const f=A},976092:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(921243);function r(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}r.prototype.freeResources=function(){(0,i.A)(this.readyImagery)&&this.readyImagery.releaseReference(),(0,i.A)(this.loadingImagery)&&this.loadingImagery.releaseReference()},r.prototype.processStateMachine=function(e,t,n){const r=this.loadingImagery,s=r.imageryLayer;if(r.processStateMachine(t,!this.useWebMercatorT,n),r.state===o.A.READY)return(0,i.A)(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=s._calculateTextureTranslationAndScale(e,this),!0;let a,c=r.parent;for(;(0,i.A)(c)&&(c.state!==o.A.READY||!this.useWebMercatorT&&!(0,i.A)(c.texture));)c.state!==o.A.FAILED&&c.state!==o.A.INVALID&&(a=a||c),c=c.parent;return this.readyImagery!==c&&((0,i.A)(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=c,(0,i.A)(c)&&(c.addReference(),this.textureTranslationAndScale=s._calculateTextureTranslationAndScale(e,this))),!(r.state!==o.A.FAILED&&r.state!==o.A.INVALID||(0,i.A)(a)&&(a.processStateMachine(t,!this.useWebMercatorT,n),1))};const s=r},829670:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(434067),o=n(336946),r=n(369031),s=n(419061),a=n(491446),c=n(786101),l=n(653577),u=n(182348),d=n(697422),h=n(373388),A=n(744603),f=n(123245),p=n(705302),m=n(41076),_=n(66458);function g(e){if(e=(0,s.A)(e,s.A.EMPTY_OBJECT),(0,a.A)(e.url)){let t;(0,c.A)("TileMapServiceImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use TileMapServiceImageryProvider.fromUrl instead."),this._metadataError=void 0,this._ready=!1;const n=this,i=Promise.resolve(e.url).then((function(i){return t=A.A.createIfNeeded(i),t.appendForwardSlash(),n._tmsResource=t,n._xmlResource=t.getDerivedResource({url:"tilemapresource.xml"}),g._requestMetadata(e,n._tmsResource,n._xmlResource,n)})).catch((e=>Promise.reject(e)));_.A.call(this,i),this._promise=i}}function y(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function b(e,t,n){const i=e.positionToTileXY(d.A.southwest(t),n),o=e.positionToTileXY(d.A.northeast(t),n);return(Math.abs(o.x-i.x)+1)*(Math.abs(o.y-i.y)+1)>4?0:n}g._requestMetadata=async function(e,t,n,i){try{const o=await n.fetchXML();return g._metadataSuccess(o,e,t,n,i)}catch(n){if(n instanceof h.A)return g._metadataFailure(e,t);throw n}},g.fromUrl=async function(e,t){r.A.defined("url",e);const n=A.A.createIfNeeded(e);n.appendForwardSlash();const i=n,o=n.getDerivedResource({url:"tilemapresource.xml"});t=(0,s.A)(t,s.A.EMPTY_OBJECT);const a=await g._requestMetadata(t,i,o),c=new g;return _.A.call(c,a),c},(0,a.A)(Object.create)&&(g.prototype=Object.create(_.A.prototype),g.prototype.constructor=g),g._metadataSuccess=function(e,t,n,r,c){const h=/tileformat/i,A=/tileset/i,_=/tilesets/i,g=/boundingbox/i;let v,T,w;const E=[],S=e.childNodes[0].childNodes;for(let e=0;e<S.length;e++)if(h.test(S.item(e).nodeName))v=S.item(e);else if(_.test(S.item(e).nodeName)){w=S.item(e);const t=S.item(e).childNodes;for(let e=0;e<t.length;e++)A.test(t.item(e).nodeName)&&E.push(t.item(e))}else g.test(S.item(e).nodeName)&&(T=S.item(e));let C;if(!(0,a.A)(w)||!(0,a.A)(T))throw C=`Unable to find expected tilesets or bbox attributes in ${r.url}.`,(0,a.A)(c)&&p.A.reportError(void 0,c,c.errorEvent,C),new f.A(C);const x=(0,s.A)(t.fileExtension,v.getAttribute("extension")),I=(0,s.A)(t.tileWidth,parseInt(v.getAttribute("width"),10)),P=(0,s.A)(t.tileHeight,parseInt(v.getAttribute("height"),10));let D=(0,s.A)(t.minimumLevel,parseInt(E[0].getAttribute("order"),10));const O=(0,s.A)(t.maximumLevel,parseInt(E[E.length-1].getAttribute("order"),10)),L=w.getAttribute("profile");let N=t.tilingScheme;if(!(0,a.A)(N))if("geodetic"===L||"global-geodetic"===L)N=new u.A({ellipsoid:t.ellipsoid});else{if("mercator"!==L&&"global-mercator"!==L)throw C=`${r.url} specifies an unsupported profile attribute, ${L}.`,(0,a.A)(c)&&p.A.reportError(void 0,c,c.errorEvent,C),new f.A(C);N=new m.A({ellipsoid:t.ellipsoid})}let M=d.A.clone(t.rectangle);if(!(0,a.A)(M)){let e,n,r,a;(0,s.A)(t.flipXY,!1)?(r=new i.A(parseFloat(T.getAttribute("miny")),parseFloat(T.getAttribute("minx"))),a=new i.A(parseFloat(T.getAttribute("maxy")),parseFloat(T.getAttribute("maxx")))):(r=new i.A(parseFloat(T.getAttribute("minx")),parseFloat(T.getAttribute("miny"))),a=new i.A(parseFloat(T.getAttribute("maxx")),parseFloat(T.getAttribute("maxy"))));const c="geodetic"===L||"mercator"===L;if(N.projection instanceof l.A||c)e=o.A.fromDegrees(r.x,r.y),n=o.A.fromDegrees(a.x,a.y);else{const t=N.projection;e=t.unproject(r),n=t.unproject(a)}M=new d.A(e.longitude,e.latitude,n.longitude,n.latitude)}return M=y(M,N),D=b(N,M,D),{url:n.getDerivedResource({url:`{z}/{x}/{reverseY}.${x}`}),tilingScheme:N,rectangle:M,tileWidth:I,tileHeight:P,minimumLevel:D,maximumLevel:O,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit}},g._metadataFailure=function(e,t){const n=(0,s.A)(e.fileExtension,"png"),i=(0,s.A)(e.tileWidth,256),o=(0,s.A)(e.tileHeight,256),r=e.maximumLevel,c=(0,a.A)(e.tilingScheme)?e.tilingScheme:new m.A({ellipsoid:e.ellipsoid});let l=(0,s.A)(e.rectangle,c.rectangle);l=y(l,c);const u=b(c,l,e.minimumLevel);return{url:t.getDerivedResource({url:`{z}/{x}/{reverseY}.${n}`}),tilingScheme:c,rectangle:l,tileWidth:i,tileHeight:o,minimumLevel:u,maximumLevel:r,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit}};const v=g},335859:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(419061),r=n(965976);function s(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).tile,n=e.class;i.A.typeOf.object("options.tile",t),i.A.typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return r.A.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return r.A.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return r.A.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return r.A.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return r.A.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return r.A.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return r.A.setPropertyBySemantic(e,t,this._properties,this._class)};const a=s},11745:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(660662),o=n(854894),r=n(267980),s=n(369031),a=n(433235),c=n(75200),l=n(331185),u=n(584164),d=n(367817),h=n(832698),A=n(612123),f=n(842153);const p=new r.A,m=new r.A,_=new r.A,g=new r.A;function y(e,t,n){n=r.A.cross(e,t,n);const i=r.A.magnitude(n);return r.A.multiplyByScalar(n,d.A.EPSILON7/i,n)}function b(e,t){const n=r.A.normalize(e,g);return y(e,r.A.equalsEpsilon(n,r.A.UNIT_X,d.A.EPSILON6)?r.A.UNIT_Y:r.A.UNIT_X,t)}function v(e){let t=l.A.getColumn(e,0,p),n=l.A.getColumn(e,1,m),i=l.A.getColumn(e,2,_);const o=r.A.equals(t,r.A.ZERO),s=r.A.equals(n,r.A.ZERO),a=r.A.equals(i,r.A.ZERO);return o||s||a?o&&s&&a?(e[0]=d.A.EPSILON7,e[4]=d.A.EPSILON7,e[8]=d.A.EPSILON7,e):(!o||s||a?o||!s||a?o||s||!a?o?s?a||(t=b(i,t),n=y(i,t,n)):(t=b(n,t),i=y(n,t,i)):(n=b(t,n),i=y(n,t,i)):i=y(n,t,i):n=y(t,i,n):t=y(n,i,t),l.A.setColumn(e,0,t,e),l.A.setColumn(e,1,n,e),l.A.setColumn(e,2,i,e),e):e}function T(e,t){t=v(t),this._orientedBoundingBox=new h.A(e,t),this._boundingSphere=i.A.fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(T.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),T.prototype.distanceToCamera=function(e){return s.A.defined("frameState",e),Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},T.prototype.intersectPlane=function(e){return s.A.defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},T.prototype.update=function(e,t){r.A.clone(e,this._orientedBoundingBox.center),t=v(t),l.A.clone(t,this._orientedBoundingBox.halfAxes),i.A.fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},T.prototype.createDebugVolume=function(e){s.A.defined("color",e);const t=new o.A({minimum:new r.A(-1,-1,-1),maximum:new r.A(1,1,1)}),n=u.A.fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),i=new c.A({geometry:t,id:"outline",modelMatrix:n,attributes:{color:a.A.fromColor(e)}});return new f.A({geometryInstances:i,appearance:new A.A({translucent:!1,flat:!0}),asynchronous:!1})};const w=T},271101:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446);function o(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function r(e,t){const n=t.replacementPrevious,i=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=i),t===e.head?e.head=i:n.replacementNext=i,t===e.tail?e.tail=n:i.replacementPrevious=n,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}o.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},o.prototype.trimTiles=function(e){let t=this.tail,n=!0;for(;n&&(0,i.A)(this._lastBeforeStartOfFrame)&&this.count>e&&(0,i.A)(t);){n=t!==this._lastBeforeStartOfFrame;const e=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),r(this,t)),t=e}},o.prototype.markTileRendered=function(e){const t=this.head;if(t!==e){if(++this.count,!(0,i.A)(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);((0,i.A)(e.replacementPrevious)||(0,i.A)(e.replacementNext))&&r(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)};const s=o},960847:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=i.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}},o=i},323314:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(677354),o=n(786101);function r(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1,this._readyPromise=Promise.resolve(this)}Object.defineProperties(r.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,o.A)("Tileset3DTileContent.readyPromise","Tileset3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Tileset3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),r.fromJson=function(e,t,n,i){const o=new r(e,t,n);return o._tileset.loadTileset(o._resource,i,o._tile),o._ready=!0,o},r.prototype.hasProperty=function(e,t){return!1},r.prototype.getFeature=function(e){},r.prototype.applyDebugSettings=function(e,t){},r.prototype.applyStyle=function(e){},r.prototype.update=function(e,t){},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return(0,i.A)(this)};const s=r},751069:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(419061),r=n(491446),s=n(965976);function a(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).tileset,n=e.class;i.A.typeOf.object("options.tileset",t),i.A.typeOf.object("options.class",n);const s=(0,r.A)(t.properties)?t.properties:{};this._class=n,this._properties=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.A.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.A.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.A.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.A.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.A.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.A.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.A.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},99520:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(369031),o=n(419061),r=n(491446),s=n(605971),a=n(591978),c=n(209202),l=n(307898);function u(e){e=(0,o.A)(e,o.A.EMPTY_OBJECT),i.A.typeOf.object("options.clock",e.clock),i.A.typeOf.object("options.times",e.times),i.A.typeOf.func("options.requestImageFunction",e.requestImageFunction),i.A.typeOf.func("options.reloadFunction",e.reloadFunction),this._tileCache={},this._tilesRequestedForInterval=[];const t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function d(e,t,n){return`${e}-${t}-${n}`}function h(e){const t=e._times;if(!(0,r.A)(t))return;const n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,s=n.multiplier;if(!o&&0!==s)return;let c,l=t.indexOf(i);if(l<0)return;const u=t.get(l);return s>0?(c=a.A.secondsDifference(u.stop,i),++l):(c=a.A.secondsDifference(u.start,i),--l),c/=s,l>=0&&c<=5?t.get(l):void 0}function A(e,t,n){const i=e._times.indexOf(n.start),o=e._tileCache;let s=o[i];(0,r.A)(s)||(s=o[i]={});const a=t.key;if((0,r.A)(s[a]))return!0;const u=function(e){const t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}(a),d=new c.A({throttle:!1,throttleByServer:!0,type:l.A.IMAGERY,priorityFunction:t.priorityFunction}),h=e._requestImageFunction(u.x,u.y,u.level,d,n);return!!(0,r.A)(h)&&(s[a]={promise:h,request:d},!0)}Object.defineProperties(u.prototype,{clock:{get:function(){return this._clock},set:function(e){if(!(0,r.A)(e))throw new s.A("value is required.");this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){if(!(0,r.A)(e))throw new s.A("value is required.");this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),u.prototype.getFromCache=function(e,t,n,i){const o=d(e,t,n);let s;const a=this._tileCache[this._currentIntervalIndex];if((0,r.A)(a)&&(0,r.A)(a[o])){const e=a[o];s=e.promise.catch((function(t){throw i.state=e.request.state,t})),delete a[o]}return s},u.prototype.checkApproachingInterval=function(e,t,n,i){const o=d(e,t,n),s=this._tilesRequestedForInterval,a=h(this),c={key:o,priorityFunction:i.priorityFunction};(0,r.A)(a)&&A(this,c,a)||s.push(c),s.length>=512&&s.splice(0,256)},u.prototype._clockOnTick=function(e){const t=e.currentTime,n=this._times.indexOf(t),i=this._currentIntervalIndex;if(n!==i){const e=this._tileCache[i];for(const t in e)e.hasOwnProperty(t)&&e[t].request.cancel();return delete this._tileCache[i],this._tilesRequestedForInterval=[],this._currentIntervalIndex=n,void this._reloadFunction()}const o=h(this);if((0,r.A)(o)){const e=this._tilesRequestedForInterval;let t=!0;for(;t&&0!==e.length;){const n=e.pop();t=A(this,n,o),t||e.push(n)}}};const f=u},972757:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(369031),o=n(430346),r=n(419061),s=n(491446),a=n(677354),c=n(786101),l=n(955943),u=n(230259),d=n(591978),h=n(367817),A=n(584164),f=n(744603),p=n(711284),m=n(259069),_=n(534135),g=n(929771),y=n(62467),b=n(988609);function v(e){e=(0,r.A)(e,r.A.EMPTY_OBJECT),i.A.typeOf.object("options.clock",e.clock),i.A.typeOf.object("options.intervals",e.intervals),this.show=(0,r.A)(e.show,!0),this.modelMatrix=A.A.clone((0,r.A)(e.modelMatrix,A.A.IDENTITY)),this.shadows=(0,r.A)(e.shadows,b.A.ENABLED),this.maximumMemoryUsage=(0,r.A)(e.maximumMemoryUsage,256),this.shading=new g.A(e.shading),this.style=e.style,this.frameFailed=new l.A,this.frameChanged=new l.A,this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new _.A,this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._resolveReadyPromise=void 0;const t=this;this._readyPromise=new Promise((function(e){t._resolveReadyPromise=e})),this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=new Array(5).fill(0),this._runningAverage=0}function T(e){return`uniform vec4 czm_pickColor;\n${e}`}function w(){return"czm_pickColor"}Object.defineProperties(v.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){p.A.setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if((0,s.A)(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}},readyPromise:{get:function(){return(0,c.A)("TimeDynamicPointCloud.readyPromise","TimeDynamicPointCloud.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use TimeDynamicPointCloud.frameFailed instead."),this._readyPromise}}}),v.prototype.makeStyleDirty=function(){this._styleDirty=!0},v.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};const E=new d.A;function S(e){const t=e._clock,n=t.canAnimate&&t.shouldAnimate,i=t.multiplier;return n?i:0}function C(e,t){return e._intervals.indexOf(t.start)}function x(e,t){return function(n){const i=(0,s.A)(n.message)?n.message:n.toString();e.frameFailed.numberOfListeners>0?e.frameFailed.raiseEvent({uri:t,message:i}):(console.log(`A frame failed to load: ${t}`),console.log(`Error: ${i}`))}}const I=new A.A,P=new g.A;function D(e,t,n,i){const o=(0,r.A)(e.shading,P),a=t.pointCloud,c=(0,r.A)(t.transform,A.A.IDENTITY);a.modelMatrix=A.A.multiplyTransformation(e.modelMatrix,c,I),a.style=e.style,a.time=n.timeSinceLoad,a.shadows=e.shadows,a.clippingPlanes=e._clippingPlanes,a.isClipped=n.isClipped,a.attenuation=o.attenuation,a.backFaceCulling=o.backFaceCulling,a.normalShading=o.normalShading,a.geometricError=function(e,t){const n=e.shading;return(0,s.A)(n)&&(0,s.A)(n.baseResolution)?n.baseResolution:(0,s.A)(t.boundingSphere)?h.A.cbrt(t.boundingSphere.volume()/t.pointsLength):0}(e,a),a.geometricErrorScale=o.geometricErrorScale,a.maximumAttenuation=function(e){const t=e.shading;return(0,s.A)(t)&&(0,s.A)(t.maximumAttenuation)?t.maximumAttenuation:10}(e);try{a.update(i)}catch(n){x(e,t.uri)(n)}t.touchedFrameNumber=i.frameNumber}function O(e,t,n,i){const r=function(e,t,n){const i=C(e,t),r=e._frames;let a=r[i];if(!(0,s.A)(a)){const c=t.data.transform,l=(0,s.A)(c)?A.A.fromArray(c):void 0,d=t.data.uri;a={pointCloud:void 0,transform:l,timestamp:(0,u.A)(),sequential:!0,ready:!1,touchedFrameNumber:n.frameNumber,uri:d},r[i]=a,f.A.fetchArrayBuffer({url:d}).then((function(t){var n;a.pointCloud=new m.A({arrayBuffer:t,cull:!0,fragmentShaderLoaded:T,uniformMapLoaded:(n=e,function(e){return(0,o.A)(e,{czm_pickColor:function(){return n._pickId.color}})}),pickIdLoaded:w})})).catch(x(e,d))}return a}(e,t,i);!function(e,t,n,i){t.touchedFrameNumber<i.frameNumber-1&&(t.sequential=!1);const o=t.pointCloud;if((0,s.A)(o)&&!t.ready){const r=i.commandList,s=r.length;D(e,t,n,i),o.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=o.geometryByteLength,r.length=s,t.sequential)&&function(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}(e,((0,u.A)()-t.timestamp)/1e3)}t.touchedFrameNumber=i.frameNumber}(e,r,n,i)}function L(e,t){const n=e._frames,i=n.length;for(let o=0;o<i;++o){const i=n[o];if((0,s.A)(i)&&(!(0,s.A)(t)||t(i))){const t=i.pointCloud;i.ready&&(e._totalMemoryUsageInBytes-=t.geometryByteLength),(0,s.A)(t)&&t.destroy(),i===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),n[o]=void 0}}}function N(e,t,n,i,o){return!!(0,s.A)(n)&&(!!n.ready||(O(e,t,i,o),n.ready))}const M={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};v.prototype.update=function(e){if(e.mode===y.A.MORPHING)return;if(!this.show)return;(0,s.A)(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),(0,s.A)(this._loadTimestamp)||(this._loadTimestamp=d.A.clone(e.time));const t=Math.max(1e3*d.A.secondsDifference(e.time,this._loadTimestamp),0),n=this._clippingPlanes;let i=0,o=!1;const r=(0,s.A)(n)&&n.enabled;r&&(n.update(e),i=n.clippingPlanesState),this._clippingPlanesState!==i&&(this._clippingPlanesState=i,o=!0);const a=this._styleDirty;this._styleDirty=!1,(o||a)&&function(e,t,n){const i=e._frames,o=i.length;for(let e=0;e<o;++e){const o=i[e];(0,s.A)(o)&&(0,s.A)(o.pointCloud)&&(o.pointCloud.clippingPlanesDirty=t,o.pointCloud.styleDirty=n)}}(this,o,a),M.timeSinceLoad=t,M.isClipped=r;const c=this.shading,l=this._pointCloudEyeDomeLighting,u=e.commandList,h=u.length;let A=this._previousInterval,f=this._nextInterval;const p=function(e){const t=e._intervals,n=e._clock.currentTime,i=t.indexOf(n);return t.get(i)}(this);if(!(0,s.A)(p))return;let m=!1;const _=S(this),g=0===_;_!==this._clockMultiplier&&(m=!0,this._clockMultiplier=_),(0,s.A)(A)&&!g||(A=p),(!(0,s.A)(f)||m||function(e,t,n){const i=S(e),o=C(e,t),r=C(e,n);return i>=0?o>=r:o<=r}(this,p,f))&&(f=function(e,t){const n=e._intervals,i=e._clock,o=S(e);if(0===o)return;const r=e._getAverageLoadTime(),s=d.A.addSeconds(i.currentTime,r*o,E);let a=n.indexOf(s);return a===C(e,t)&&(o>=0?++a:--a),n.get(a)}(this,p)),A=function(e,t,n,i,o){let r,s,a;const c=e._intervals,l=e._frames,u=C(e,n),d=C(e,t);if(u>=d){for(r=u;r>=d;--r)if(s=c.get(r),a=l[r],N(e,s,a,i,o))return s}else for(r=u;r<=d;++r)if(s=c.get(r),a=l[r],N(e,s,a,i,o))return s;return t}(this,A,p,M,e);let b=function(e,t){const n=C(e,t),i=e._frames[n];if((0,s.A)(i)&&i.ready)return i}(this,A);(0,s.A)(b)||(O(this,A,M,e),b=this._lastRenderedFrame),(0,s.A)(b)&&D(this,b,M,e),(0,s.A)(f)&&O(this,f,M,e);const v=this;(0,s.A)(b)&&!(0,s.A)(this._lastRenderedFrame)&&e.afterRender.push((function(){return v._resolveReadyPromise(v),!0})),(0,s.A)(b)&&b!==this._lastRenderedFrame&&v.frameChanged.numberOfListeners>0&&e.afterRender.push((function(){return v.frameChanged.raiseEvent(v),!0})),this._previousInterval=A,this._nextInterval=f,this._lastRenderedFrame=b,this._totalMemoryUsageInBytes>1024*this.maximumMemoryUsage*1024&&L(this,function(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}(e));const T=u.length-h;(0,s.A)(c)&&c.attenuation&&c.eyeDomeLighting&&T>0&&l.update(e,h,c,this.boundingSphere)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return L(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,a.A)(this)};const R=v},639475:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={REINHARD:0,MODIFIED_REINHARD:1,FILMIC:2,ACES:3,validate:function(e){return e===i.REINHARD||e===i.MODIFIED_REINHARD||e===i.FILMIC||e===i.ACES}},o=Object.freeze(i)},440463:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(647934),o=n(41476),r=n(491446),s=n(677354),a=n(276904),c=n(769493),l=n(377496),u=n(804701),d=n(760866),h=n(57775),A=n(40118),f=n(654799),p=n(342875),m=n(616e3),_=n(212597),g=n(279291),y=n(200646),b=n(938987),v=n(896464);function T(e){this._drawClassificationFBO=new u.A({createDepthAttachments:!1}),this._accumulationFBO=new u.A({createDepthAttachments:!1}),this._packFBO=new u.A,this._opaqueDepthStencilTexture=void 0,this._textureToComposite=void 0,this._translucentDepthStencilTexture=void 0,this._packDepthCommand=void 0,this._accumulateCommand=void 0,this._compositeCommand=void 0,this._copyCommand=void 0,this._clearColorCommand=new c.A({color:new o.A(0,0,0,0),owner:this}),this._clearDepthStencilCommand=new c.A({depth:1,stencil:0,owner:this}),this._supported=e.depthTexture,this._viewport=new i.A,this._rsDepth=void 0,this._rsAccumulate=void 0,this._rsComp=void 0,this._useScissorTest=void 0,this._scissorRectangle=void 0,this._hasTranslucentDepth=!1,this._frustumsDrawn=0}function w(e){e._textureToComposite=void 0,e._translucentDepthStencilTexture=e._translucentDepthStencilTexture&&!e._translucentDepthStencilTexture.isDestroyed()&&e._translucentDepthStencilTexture.destroy()}function E(e){e._drawClassificationFBO.destroy(),e._accumulationFBO.destroy(),e._packFBO.destroy()}Object.defineProperties(T.prototype,{hasTranslucentDepth:{get:function(){return this._hasTranslucentDepth}}}),T.prototype.executeTranslucentCommands=function(e,t,n,o,s){const c=o.length;let u,d;const T=e.frameState.useLogDepth,S=e.context,C=n.framebuffer;for(d=0;d<c;++d)if(u=o[d],u=T?u.derivedCommands.logDepth.command:u,u.depthForTranslucentClassification){this._hasTranslucentDepth=!0;break}if(this._hasTranslucentDepth){for(function(e,t,n,o){if(!e.isSupported())return;e._opaqueDepthStencilTexture=o;const s=e._opaqueDepthStencilTexture.width,c=e._opaqueDepthStencilTexture.height;let u,d;if(e._drawClassificationFBO.isDirty(s,c)&&(function(e,t,n,i){w(e),e._translucentDepthStencilTexture=new m.A({context:t,width:n,height:i,pixelFormat:a.A.DEPTH_STENCIL,pixelDatatype:h.A.UNSIGNED_INT_24_8,sampler:f.A.NEAREST})}(e,t,s,c),function(e,t,n,i){E(e),e._drawClassificationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._drawClassificationFBO.update(t,n,i),e._accumulationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._accumulationFBO.update(t,n,i),e._packFBO.update(t,n,i)}(e,t,s,c)),(0,r.A)(e._packDepthCommand)||(u=new p.A({sources:[_.A]}),d={u_opaqueDepthTexture:function(){return e._opaqueDepthStencilTexture},u_translucentDepthTexture:function(){return e._translucentDepthStencilTexture}},e._packDepthCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e})),!(0,r.A)(e._compositeCommand)){u=new p.A({sources:[g.A]}),d={colorTexture:function(){return e._textureToComposite}},e._compositeCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e});const n=e._compositeCommand,i=n.shaderProgram,o=t.shaderCache.createDerivedShaderProgram(i,"pick",{vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:new p.A({sources:u.sources,defines:["PICK"]}),attributeLocations:i._attributeLocations}),r=l.A.shallowClone(n);r.shaderProgram=o,n.derivedCommands.pick=r}(0,r.A)(e._copyCommand)||(u=new p.A({sources:[g.A]}),d={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._copyCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e})),(0,r.A)(e._accumulateCommand)||(u=new p.A({sources:[g.A]}),d={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._accumulateCommand=t.createViewportQuadCommand(u,{uniformMap:d,owner:e})),e._viewport.width=s,e._viewport.height=c;const T=!i.A.equals(e._viewport,n.viewport);let S=T!==e._useScissorTest;e._useScissorTest=T,i.A.equals(e._scissorRectangle,n.viewport)||(e._scissorRectangle=i.A.clone(n.viewport,e._scissorRectangle),S=!0),(0,r.A)(e._rsDepth)&&i.A.equals(e._viewport,e._rsDepth.viewport)&&!S||(e._rsDepth=A.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,r.A)(e._packDepthCommand)&&(e._packDepthCommand.renderState=e._rsDepth),(0,r.A)(e._rsAccumulate)&&i.A.equals(e._viewport,e._rsAccumulate.viewport)&&!S||(e._rsAccumulate=A.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:v.A.EQUAL,reference:b.A.CESIUM_3D_TILE_MASK}})),(0,r.A)(e._accumulateCommand)&&(e._accumulateCommand.renderState=e._rsAccumulate),(0,r.A)(e._rsComp)&&i.A.equals(e._viewport,e._rsComp.viewport)&&!S||(e._rsComp=A.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:y.A.ALPHA_BLEND})),(0,r.A)(e._compositeCommand)&&(e._compositeCommand.renderState=e._rsComp,e._compositeCommand.derivedCommands.pick.renderState=e._rsComp)}(this,S,n,s),n.framebuffer=this._drawClassificationFBO.framebuffer,this._clearDepthStencilCommand.execute(S,n),d=0;d<c;++d)u=o[d],u=T?u.derivedCommands.logDepth.command:u,u.depthForTranslucentClassification&&t(u.derivedCommands.depth.depthOnlyCommand,e,S,n);this._frustumsDrawn+=this._hasTranslucentDepth?1:0,this._hasTranslucentDepth&&(n.framebuffer=this._packFBO.framebuffer,this._packDepthCommand.execute(S,n)),n.framebuffer=C}},T.prototype.executeClassificationCommands=function(e,t,n,i){if(!this._hasTranslucentDepth)return;const o=e.context,r=o.uniformState,s=n.framebuffer;2===this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._copyCommand.execute(o,n)),n.framebuffer=this._drawClassificationFBO.framebuffer,this._frustumsDrawn>1&&this._clearColorCommand.execute(o,n),r.updatePass(d.A.CESIUM_3D_TILE_CLASSIFICATION);const a=r.globeDepthTexture;r.globeDepthTexture=this._packFBO.getColorTexture();const c=i.commands[d.A.CESIUM_3D_TILE_CLASSIFICATION],l=i.indices[d.A.CESIUM_3D_TILE_CLASSIFICATION];for(let i=0;i<l;++i)t(c[i],e,o,n);r.globeDepthTexture=a,n.framebuffer=s,1!==this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._accumulateCommand.execute(o,n),n.framebuffer=s)},T.prototype.execute=function(e,t){this._hasTranslucentDepth&&(1===this._frustumsDrawn?this._textureToComposite=this._drawClassificationFBO.getColorTexture():this._textureToComposite=this._accumulationFBO.getColorTexture(),(e.frameState.passes.pick?this._compositeCommand.derivedCommands.pick:this._compositeCommand).execute(e.context,t),function(e,t,n){if(!e._hasTranslucentDepth)return;const i=n.framebuffer;n.framebuffer=e._drawClassificationFBO.framebuffer,e._clearColorCommand.execute(t._context,n),n.framebuffer=i,e._frustumsDrawn>1&&(n.framebuffer=e._accumulationFBO.framebuffer,e._clearColorCommand.execute(t._context,n)),e._hasTranslucentDepth=!1,e._frustumsDrawn=0}(this,e,t))},T.prototype.isSupported=function(){return this._supported},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return w(this),E(this),(0,r.A)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,r.A)(this._packDepthCommand)&&(this._packDepthCommand.shaderProgram=this._packDepthCommand.shaderProgram&&this._packDepthCommand.shaderProgram.destroy()),(0,s.A)(this)};const S=T},584247:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(376758),o=n(419061),r=n(491446),s=n(605971),a=n(924290),c=n(230259),l=n(711337),u=n(821417);function d(e,t,n,o,r,s,a,c,l,u){this._tweens=e,this._tweenjs=t,this._startObject=(0,i.A)(n),this._stopObject=(0,i.A)(o),this._duration=r,this._delay=s,this._easingFunction=a,this._update=c,this._complete=l,this.cancel=u,this.needsStart=!0}function h(){this._tweens=[]}Object.defineProperties(d.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),d.prototype.cancelTween=function(){this._tweens.remove(this)},Object.defineProperties(h.prototype,{length:{get:function(){return this._tweens.length}}}),h.prototype.add=function(e){if(e=(0,o.A)(e,o.A.EMPTY_OBJECT),!(0,r.A)(e.startObject)||!(0,r.A)(e.stopObject))throw new s.A("options.startObject and options.stopObject are required.");if(!(0,r.A)(e.duration)||e.duration<0)throw new s.A("options.duration is required and must be positive.");if(0===e.duration)return(0,r.A)(e.complete)&&e.complete(),new d(this);const t=e.duration/l.A.SECONDS_PER_MILLISECOND,n=(0,o.A)(e.delay,0),c=n/l.A.SECONDS_PER_MILLISECOND,h=(0,o.A)(e.easingFunction,a.A.LINEAR_NONE),A=e.startObject,f=new u.K(A);f.to((0,i.A)(e.stopObject),t),f.delay(c),f.easing(h),(0,r.A)(e.update)&&f.onUpdate((function(){e.update(A)})),f.onComplete((0,o.A)(e.complete,null)),f.repeat((0,o.A)(e._repeat,0));const p=new d(this,f,e.startObject,e.stopObject,e.duration,n,h,e.update,e.complete,e.cancel);return this._tweens.push(p),p},h.prototype.addProperty=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).object,n=e.property,i=e.startValue,a=e.stopValue;if(!(0,r.A)(t)||!(0,r.A)(e.property))throw new s.A("options.object and options.property are required.");if(!(0,r.A)(t[n]))throw new s.A("options.object must have the specified property.");if(!(0,r.A)(i)||!(0,r.A)(a))throw new s.A("options.startValue and options.stopValue are required.");return this.add({startObject:{value:i},stopObject:{value:a},duration:(0,o.A)(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:function(e){t[n]=e.value},complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},h.prototype.addAlpha=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).material;if(!(0,r.A)(t))throw new s.A("options.material is required.");const n=[];for(const e in t.uniforms)t.uniforms.hasOwnProperty(e)&&(0,r.A)(t.uniforms[e])&&(0,r.A)(t.uniforms[e].alpha)&&n.push(e);if(0===n.length)throw new s.A("material has no properties with alpha components.");return this.add({startObject:{alpha:(0,o.A)(e.startValue,0)},stopObject:{alpha:(0,o.A)(e.stopValue,1)},duration:(0,o.A)(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:function(e){const i=n.length;for(let o=0;o<i;++o)t.uniforms[n[o]].alpha=e.alpha},complete:e.complete,cancel:e.cancel})},h.prototype.addOffsetIncrement=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).material;if(!(0,r.A)(t))throw new s.A("material is required.");if(!(0,r.A)(t.uniforms.offset))throw new s.A("material.uniforms must have an offset property.");const n=t.uniforms;return this.addProperty({object:n,property:"offset",startValue:n.offset,stopValue:n.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},h.prototype.remove=function(e){if(!(0,r.A)(e))return!1;const t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),(0,r.A)(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},h.prototype.removeAll=function(){const e=this._tweens;for(let t=0;t<e.length;++t){const n=e[t];n.tweenjs.stop(),(0,r.A)(n.cancel)&&n.cancel()}e.length=0},h.prototype.contains=function(e){return(0,r.A)(e)&&-1!==this._tweens.indexOf(e)},h.prototype.get=function(e){if(!(0,r.A)(e))throw new s.A("index is required.");return this._tweens[e]},h.prototype.update=function(e){const t=this._tweens;let n=0;for(e=(0,r.A)(e)?e/l.A.SECONDS_PER_MILLISECOND:(0,c.A)();n<t.length;){const i=t[n],o=i.tweenjs;i.needsStart?(i.needsStart=!1,o.start(e)):o.update(e)?n++:(o.stop(),t.splice(n,1))}};const A=h},66458:(e,t,n)=>{"use strict";n.d(t,{A:()=>k});var i=n(434067),o=n(267980),r=n(336946),s=n(369031),a=n(430346),c=n(672743),l=n(419061),u=n(491446),d=n(786101),h=n(605971),A=n(955943),f=n(653577),p=n(367817),m=n(697422),_=n(744603),g=n(41076),y=n(553909);const b=/{[^}]+}/g,v={x:function(e,t,n,i){return O(e,"{x}",t)},y:function(e,t,n,i){return O(e,"{y}",n)},z:function(e,t,n,i){return O(e,"{z}",i)},s:function(e,t,n,i){const o=(t+n+i)%e._subdomains.length;return e._subdomains[o]},reverseX:function(e,t,n,i){const o=e.tilingScheme.getNumberOfXTilesAtLevel(i)-t-1;return O(e,"{reverseX}",o)},reverseY:function(e,t,n,i){const o=e.tilingScheme.getNumberOfYTilesAtLevel(i)-n-1;return O(e,"{reverseY}",o)},reverseZ:function(e,t,n,i){const o=e.maximumLevel;return O(e,"{reverseZ}",(0,u.A)(o)&&i<o?o-i-1:i)},westDegrees:function(e,t,n,i){return L(e,t,n,i),S.west},southDegrees:function(e,t,n,i){return L(e,t,n,i),S.south},eastDegrees:function(e,t,n,i){return L(e,t,n,i),S.east},northDegrees:function(e,t,n,i){return L(e,t,n,i),S.north},westProjected:function(e,t,n,i){return N(e,t,n,i),x.west},southProjected:function(e,t,n,i){return N(e,t,n,i),x.south},eastProjected:function(e,t,n,i){return N(e,t,n,i),x.east},northProjected:function(e,t,n,i){return N(e,t,n,i),x.north},width:function(e,t,n,i){return e.tileWidth},height:function(e,t,n,i){return e.tileHeight}},T=(0,a.A)(v,{i:function(e,t,n,i,o,r,s){return F(e,t,n,i,o,r),P.x},j:function(e,t,n,i,o,r,s){return F(e,t,n,i,o,r),P.y},reverseI:function(e,t,n,i,o,r,s){return F(e,t,n,i,o,r),e.tileWidth-P.x-1},reverseJ:function(e,t,n,i,o,r,s){return F(e,t,n,i,o,r),e.tileHeight-P.y-1},longitudeDegrees:function(e,t,n,i,o,r,s){return p.A.toDegrees(o)},latitudeDegrees:function(e,t,n,i,o,r,s){return p.A.toDegrees(r)},longitudeProjected:function(e,t,n,i,o,r,s){return U(e,0,0,0,o,r),R.x},latitudeProjected:function(e,t,n,i,o,r,s){return U(e,0,0,0,o,r),R.y},format:function(e,t,n,i,o,r,s){return s}});function w(e){if(e=(0,l.A)(e,l.A.EMPTY_OBJECT),this._errorEvent=new A.A,(0,u.A)(e.then))return void this._reinitialize(e);s.A.defined("options.url",e.url);const t=_.A.createIfNeeded(e.url),n=_.A.createIfNeeded(e.pickFeaturesUrl);this._resource=t,this._urlSchemeZeroPadding=e.urlSchemeZeroPadding,this._getFeatureInfoFormats=e.getFeatureInfoFormats,this._pickFeaturesResource=n;let i=e.subdomains;i=Array.isArray(i)?i.slice():(0,u.A)(i)&&i.length>0?i.split(""):["a","b","c"],this._subdomains=i,this._tileWidth=(0,l.A)(e.tileWidth,256),this._tileHeight=(0,l.A)(e.tileHeight,256),this._minimumLevel=(0,l.A)(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._tilingScheme=(0,l.A)(e.tilingScheme,new g.A({ellipsoid:e.ellipsoid})),this._rectangle=(0,l.A)(e.rectangle,this._tilingScheme.rectangle),this._rectangle=m.A.intersection(this._rectangle,this._tilingScheme.rectangle),this._tileDiscardPolicy=e.tileDiscardPolicy;let o=e.credit;"string"==typeof o&&(o=new c.A(o)),this._credit=o,this._hasAlphaChannel=(0,l.A)(e.hasAlphaChannel,!0);const r=e.customTags,d=(0,a.A)(v,r),h=(0,a.A)(T,r);this._tags=d,this._pickFeaturesTags=h,this._readyPromise=Promise.resolve(!0),this._ready=!0,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this.enablePickFeatures=(0,l.A)(e.enablePickFeatures,!0)}Object.defineProperties(w.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.ready","UrlTemplateImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._ready&&(0,u.A)(this._resource)}},readyPromise:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.readyPromise","UrlTemplateImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}},defaultAlpha:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultAlpha","UrlTemplateImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultAlpha","UrlTemplateImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultNightAlpha","UrlTemplateImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultNightAlpha","UrlTemplateImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultDayAlpha","UrlTemplateImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultDayAlpha","UrlTemplateImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultBrightness","UrlTemplateImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultBrightness","UrlTemplateImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultContrast","UrlTemplateImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultContrast","UrlTemplateImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultHue","UrlTemplateImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultHue","UrlTemplateImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultSaturation","UrlTemplateImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultSaturation","UrlTemplateImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultGamma","UrlTemplateImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultGamma","UrlTemplateImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultMinificationFilter","UrlTemplateImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultMinificationFilter","UrlTemplateImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,d.A)("UrlTemplateImageryProvider.defaultMagnificationFilter","UrlTemplateImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,d.A)("UrlTemplateImageryProvider.defaultMagnificationFilter","UrlTemplateImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),w.prototype.reinitialize=function(e){return(0,d.A)("UrlTemplateImageryProvider.reinitialize","UrlTemplateImageryProvider.reinitialize was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._reinitialize(e)},w.prototype._reinitialize=function(e){const t=this;t._readyPromise=Promise.resolve(e).then((function(e){if(!(0,u.A)(e))throw new h.A("options is required.");if(!(0,u.A)(e.url))throw new h.A("options.url is required.");const n=e.customTags,i=(0,a.A)(v,n),o=(0,a.A)(T,n),r=_.A.createIfNeeded(e.url),s=_.A.createIfNeeded(e.pickFeaturesUrl);t.enablePickFeatures=(0,l.A)(e.enablePickFeatures,t.enablePickFeatures),t._urlSchemeZeroPadding=(0,l.A)(e.urlSchemeZeroPadding,t.urlSchemeZeroPadding),t._tileDiscardPolicy=e.tileDiscardPolicy,t._getFeatureInfoFormats=e.getFeatureInfoFormats,t._subdomains=e.subdomains,Array.isArray(t._subdomains)?t._subdomains=t._subdomains.slice():(0,u.A)(t._subdomains)&&t._subdomains.length>0?t._subdomains=t._subdomains.split(""):t._subdomains=["a","b","c"],t._tileWidth=(0,l.A)(e.tileWidth,256),t._tileHeight=(0,l.A)(e.tileHeight,256),t._minimumLevel=(0,l.A)(e.minimumLevel,0),t._maximumLevel=e.maximumLevel,t._tilingScheme=(0,l.A)(e.tilingScheme,new g.A({ellipsoid:e.ellipsoid})),t._rectangle=(0,l.A)(e.rectangle,t._tilingScheme.rectangle),t._rectangle=m.A.intersection(t._rectangle,t._tilingScheme.rectangle),t._hasAlphaChannel=(0,l.A)(e.hasAlphaChannel,!0);let d=e.credit;return"string"==typeof d&&(d=new c.A(d)),t._credit=d,t._resource=r,t._tags=i,t._pickFeaturesResource=s,t._pickFeaturesTags=o,t._ready=!0,!0}))},w.prototype.getTileCredits=function(e,t,n){},w.prototype.requestImage=function(e,t,n,i){return y.A.loadImage(this,function(e,t,n,i,o){E=!1,C=!1;const r=e._resource,s=r.getUrlComponent(!0),a=e._tags,c={},l=s.match(b);return(0,u.A)(l)&&l.forEach((function(o){const r=o.substring(1,o.length-1);(0,u.A)(a[r])&&(c[r]=a[r](e,t,n,i))})),r.getDerivedResource({request:o,templateValues:c})}(this,e,t,n,i))},w.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures||!(0,u.A)(this._pickFeaturesResource)||0===this._getFeatureInfoFormats.length)return;let r=0;const s=this;function a(e,t){return e.callback(t)}return function c(){if(r>=s._getFeatureInfoFormats.length)return Promise.resolve([]);const l=s._getFeatureInfoFormats[r],d=function(e,t,n,i,o,r,s){E=!1,C=!1,I=!1,D=!1;const a=e._pickFeaturesResource,c=a.getUrlComponent(!0),l=e._pickFeaturesTags,d={},h=c.match(b);return(0,u.A)(h)&&h.forEach((function(a){const c=a.substring(1,a.length-1);(0,u.A)(l[c])&&(d[c]=l[c](e,t,n,i,o,r,s))})),a.getDerivedResource({templateValues:d})}(s,e,t,n,i,o,l.format);return++r,"json"===l.type?d.fetchJson().then(l.callback).catch(c):"xml"===l.type?d.fetchXML().then(l.callback).catch(c):"text"===l.type||"html"===l.type?d.fetchText().then(l.callback).catch(c):d.fetch({responseType:l.format}).then(a.bind(void 0,l)).catch(c)}()};let E=!1;const S=new m.A;let C=!1;const x=new m.A;let I=!1;const P=new i.A;let D=!1;function O(e,t,n){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){const i=e.urlSchemeZeroPadding[t];if("string"==typeof i){const e=i.length;e>1&&(n=n.length>=e?n:new Array(e-n.toString().length+1).join("0")+n)}}return n}function L(e,t,n,i){E||(e.tilingScheme.tileXYToRectangle(t,n,i,S),S.west=p.A.toDegrees(S.west),S.south=p.A.toDegrees(S.south),S.east=p.A.toDegrees(S.east),S.north=p.A.toDegrees(S.north),E=!0)}function N(e,t,n,i){C||(e.tilingScheme.tileXYToNativeRectangle(t,n,i,x),C=!0)}const M=new m.A,R=new o.A;function F(e,t,n,i,o,r,s){if(I)return;U(e,0,0,0,o,r);const a=R,c=e.tilingScheme.tileXYToNativeRectangle(t,n,i,M);P.x=e.tileWidth*(a.x-c.west)/c.width|0,P.y=e.tileHeight*(c.north-a.y)/c.height|0,I=!0}const B=new r.A;function U(e,t,n,i,o,r,s){if(!D){if(e.tilingScheme.projection instanceof f.A)R.x=p.A.toDegrees(o),R.y=p.A.toDegrees(r);else{const t=B;t.longitude=o,t.latitude=r,e.tilingScheme.projection.project(t,R)}D=!0}}const k=w},28940:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}},308521:(e,t,n)=>{"use strict";n.d(t,{A:()=>W});var i=n(564886),o=n(434067),r=n(267980),s=n(41476),a=n(571804),c=n(419061),l=n(491446),u=n(677354),d=n(610750),h=n(520098),A=n(874915),f=n(832698),p=n(584164),m=n(697422),_=n(971724),g=n(641613),y=n(442790),b=n(377496),v=n(760866),T=n(40118),w=n(302836),E=n(342875),S=n(508380),C=n(78149),x=n(296312),I=n(154920),P=n(200646),D=n(622569),O=n(71578),L=n(527083),N=n(938987),M=n(896464),R=n(138151),F=n(953681);function B(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=(0,c.A)(e.ellipsoid,d.A.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new o.A(i.A._defaultMinTerrainHeight,i.A._defaultMaxTerrainHeight),this._boundingVolume=f.A.fromRectangle(e.rectangle,i.A._defaultMinTerrainHeight,i.A._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=s.A.clone(s.A.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(B.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});const U=new _.A("createVectorTileClampedPolylines"),k={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};const V=new p.A,H=new r.A;function z(e){return T.A.fromCache({cull:{enabled:!0,face:L.A.FRONT},blending:P.A.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:M.A.EQUAL,frontOperation:{fail:R.A.KEEP,zFail:R.A.KEEP,zPass:R.A.KEEP},backFunction:M.A.EQUAL,backOperation:{fail:R.A.KEEP,zFail:R.A.KEEP,zPass:R.A.KEEP},reference:N.A.CESIUM_3D_TILE_MASK,mask:N.A.CESIUM_3D_TILE_MASK}})}B.prototype.getPositions=function(e){return F.A.getPolylinePositions(this,e)},B.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new D.A(e,i)}},B.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const G=new s.A,j=s.A.WHITE;B.prototype.applyStyle=function(e,t){if(!(0,l.A)(e))return void function(e,t){const n=e._batchIds,i=n.length;for(let e=0;e<i;++e){const i=t[n[e]];i.show=!0,i.color=s.A.WHITE}}(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=t[n[o]];i.color=(0,l.A)(e.color)?e.color.evaluateColor(i,G):j,i.show=!(0,l.A)(e.show)||e.show.evaluate(i)}},B.prototype.update=function(e){const t=e.context;if(!this._ready){if((0,l.A)(this._promise)||(this._promise=(n=this,i.A.initialize().then((function(){!function(e,t,n){const o=i.A.getMinimumMaximumHeights(t,n),r=o.minimumTerrainHeight,s=o.maximumTerrainHeight,a=e._minimumMaximumVectorHeights;a.x=r,a.y=s;const c=e._boundingVolume,l=e._rectangle;f.A.fromRectangle(l,r,s,n,c)}(n,n._rectangle,n._ellipsoid)})).catch((e=>{n.isDestroyed()||(n._error=e)}))).then(function(e,t){if((0,l.A)(e._va))return;let n=e._positions,i=e._widths,o=e._counts,s=e._transferrableBatchIds,c=e._packedBuffer;(0,l.A)(c)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),s=e._transferrableBatchIds=e._batchIds.slice(),c=e._packedBuffer=function(e){const t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,s=e._center,a=2+m.A.packedLength+d.A.packedLength+r.A.packedLength,c=new Float64Array(a);let l=0;return c[l++]=n,c[l++]=i,m.A.pack(t,c,l),l+=m.A.packedLength,d.A.pack(o,c,l),l+=d.A.packedLength,r.A.pack(s,c,l),c}(e));const u=[n.buffer,i.buffer,o.buffer,s.buffer,c.buffer],h={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:s.buffer,packedBuffer:c.buffer,keepDecodedPositions:e._keepDecodedPositions},f=U.scheduleTask(h,u);return(0,l.A)(f)?f.then((function(n){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(n.decodedPositions),e._decodedPositionOffsets=new Uint32Array(n.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(n.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(n.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(n.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(n.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(n.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(n.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(n.vertexBatchIds);const i=n.indexDatatype;e._indices=i===A.A.UNSIGNED_SHORT?new Uint16Array(n.indices):new Uint32Array(n.indices),function(e,t){if(!(0,l.A)(e._va)){const n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,s=e._startFaceNormalAndVertexCornerIds,c=e._endFaceNormalAndHalfWidths,l=e._vertexBatchIds,u=e._indices;let d=n.byteLength+i.byteLength;d+=o.byteLength+r.byteLength,d+=s.byteLength+c.byteLength,d+=l.byteLength+u.byteLength,e._trianglesLength=u.length/3,e._geometryByteLength=d;const h=g.A.createVertexBuffer({context:t,typedArray:n,usage:y.A.STATIC_DRAW}),f=g.A.createVertexBuffer({context:t,typedArray:i,usage:y.A.STATIC_DRAW}),p=g.A.createVertexBuffer({context:t,typedArray:o,usage:y.A.STATIC_DRAW}),m=g.A.createVertexBuffer({context:t,typedArray:r,usage:y.A.STATIC_DRAW}),_=g.A.createVertexBuffer({context:t,typedArray:s,usage:y.A.STATIC_DRAW}),b=g.A.createVertexBuffer({context:t,typedArray:c,usage:y.A.STATIC_DRAW}),v=g.A.createVertexBuffer({context:t,typedArray:l,usage:y.A.STATIC_DRAW}),T=g.A.createIndexBuffer({context:t,typedArray:u,usage:y.A.STATIC_DRAW,indexDatatype:2===u.BYTES_PER_ELEMENT?A.A.UNSIGNED_SHORT:A.A.UNSIGNED_INT}),w=[{index:k.startEllipsoidNormal,vertexBuffer:h,componentDatatype:a.A.FLOAT,componentsPerAttribute:3},{index:k.endEllipsoidNormal,vertexBuffer:f,componentDatatype:a.A.FLOAT,componentsPerAttribute:3},{index:k.startPositionAndHeight,vertexBuffer:p,componentDatatype:a.A.FLOAT,componentsPerAttribute:4},{index:k.endPositionAndHeight,vertexBuffer:m,componentDatatype:a.A.FLOAT,componentsPerAttribute:4},{index:k.startFaceNormalAndVertexCorner,vertexBuffer:_,componentDatatype:a.A.FLOAT,componentsPerAttribute:4},{index:k.endFaceNormalAndHalfWidth,vertexBuffer:b,componentDatatype:a.A.FLOAT,componentsPerAttribute:4},{index:k.a_batchId,vertexBuffer:v,componentDatatype:a.A.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new S.A({context:t,attributes:w,indexBuffer:T}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}(e,t),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)})):void 0}(this,t))),(0,l.A)(this._error)){const e=this._error;throw this._error=void 0,e}return}var n,o;!function(e,t){(0,l.A)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return p.A.clone(n,V),p.A.multiplyByPoint(V,e._center,H),p.A.setTranslation(V,H,V),V},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}(this,t),function(e,t){if((0,l.A)(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(x.A),o=n.getFragmentShaderCallback(!1,void 0,!0)(I.A),r=new E.A({defines:["VECTOR_TILE",h.A.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[C.A,i]}),s=new E.A({defines:["VECTOR_TILE"],sources:[o]});e._sp=w.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:k})}(this,t),o=this,(0,l.A)(o._rs)||(o._rs=z(!1),o._rs3DTiles=z(!0));const s=e.passes;(s.render||s.pick)&&function(e,t){let n=e._command;if(!(0,l.A)(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new b.A({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:v.A.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});const i=b.A.shallowClone(n,n.derivedCommands.tileset);i.renderState=e._rs3DTiles,i.pass=v.A.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=i}const i=e._classificationType;i!==O.A.TERRAIN&&i!==O.A.BOTH||t.commandList.push(n),i!==O.A.CESIUM_3D_TILE&&i!==O.A.BOTH||t.commandList.push(n.derivedCommands.tileset)}(this,e)},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,u.A)(this)};const W=B},868897:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(267980),o=n(419061),r=n(491446),s=n(786101),a=n(677354),c=n(605971),l=n(610750),u=n(604752),d=n(571804),h=n(367817),A=n(584164),f=n(697422),p=n(123245),m=n(184483),_=n(468741),g=n(601165),y=n(566453),b=n(953681),v=n(308521),T=n(223460);function w(e,t,n,s,a){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,this._resolveContent=void 0,this._readyPromise=new Promise((e=>{this._resolveContent=e})),function(e,t,n){n=(0,o.A)(n,0);const s=new Uint8Array(t),a=new DataView(t);n+=E;const c=a.getUint32(n,!0);if(1!==c)throw new p.A(`Only Vector tile version 1 is supported.  Version ${c} is not.`);n+=E;const b=a.getUint32(n,!0);if(n+=E,0===b)return e._ready=!0,void e._resolveContent(e);const v=a.getUint32(n,!0);if(n+=E,0===v)throw new p.A("Feature table must have a byte length greater than zero");const w=a.getUint32(n,!0);n+=E;const x=a.getUint32(n,!0);n+=E;const I=a.getUint32(n,!0);n+=E;const P=a.getUint32(n,!0);n+=E;const D=a.getUint32(n,!0);n+=E;const O=a.getUint32(n,!0);n+=E;const L=a.getUint32(n,!0);n+=E;const N=(0,u.A)(s,n,v);n+=v;const M=new Uint8Array(t,n,w);let R,F;n+=w,x>0&&(R=(0,u.A)(s,n,x),n+=x,I>0&&(F=new Uint8Array(t,n,I),F=new Uint8Array(F),n+=I));const B=(0,o.A)(N.POLYGONS_LENGTH,0),U=(0,o.A)(N.POLYLINES_LENGTH,0),k=(0,o.A)(N.POINTS_LENGTH,0),V=B+U+k,H=new m.A(e,V,R,F,function(e){return function(t,n){(0,r.A)(e._polygons)&&e._polygons.updateCommands(t,n)}}(e));if(e._batchTable=H,0===V)return;const z=new _.A(N,M),G=z.getGlobalProperty("REGION");if(!(0,r.A)(G))throw new p.A("Feature table global property: REGION must be defined");const j=f.A.unpack(G),W=G[4],q=G[5],Y=e._tile.computedTransform;let X=z.getGlobalProperty("RTC_CENTER",d.A.FLOAT,3);(0,r.A)(X)?(X=i.A.unpack(X),A.A.multiplyByPoint(Y,X,X)):(X=f.A.center(j),X.height=h.A.lerp(W,q,.5),X=l.A.WGS84.cartographicToCartesian(X));const J=function(e,t){let n,i,s,a;const c=(0,o.A)(e.POLYGONS_LENGTH,0),l=(0,o.A)(e.POLYLINES_LENGTH,0),u=(0,o.A)(e.POINTS_LENGTH,0);if(c>0&&(0,r.A)(e.POLYGON_BATCH_IDS)){const i=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,c)}if(l>0&&(0,r.A)(e.POLYLINE_BATCH_IDS)){const n=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,l)}if(u>0&&(0,r.A)(e.POINT_BATCH_IDS)){const n=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,n,u)}const d=(0,r.A)(n)||(0,r.A)(i)||(0,r.A)(s),h=c>0&&!(0,r.A)(n)||l>0&&!(0,r.A)(i)||u>0&&!(0,r.A)(s);if(d&&h)throw new p.A("If one group of batch ids is defined, then all batch ids must be defined");if(!(0,r.A)(n)&&!(0,r.A)(i)&&!(0,r.A)(s)){let e=0;if(!(0,r.A)(n)&&c>0)for(n=new Uint16Array(c),a=0;a<c;++a)n[a]=e++;if(!(0,r.A)(i)&&l>0)for(i=new Uint16Array(l),a=0;a<l;++a)i[a]=e++;if(!(0,r.A)(s)&&u>0)for(s=new Uint16Array(u),a=0;a<u;++a)s[a]=e++}return{polygons:n,polylines:i,points:s}}(N,M);if(n+=(4-n%4)%4,B>0){z.featuresLength=B;const i=(0,o.A)(z.getPropertyArray("POLYGON_COUNTS",d.A.UNSIGNED_INT,1),z.getPropertyArray("POLYGON_COUNT",d.A.UNSIGNED_INT,1));if(!(0,r.A)(i))throw new p.A("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const s=(0,o.A)(z.getPropertyArray("POLYGON_INDEX_COUNTS",d.A.UNSIGNED_INT,1),z.getPropertyArray("POLYGON_INDEX_COUNT",d.A.UNSIGNED_INT,1));if(!(0,r.A)(s))throw new p.A("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const a=i.reduce((function(e,t){return e+2*t}),0),c=s.reduce((function(e,t){return e+t}),0),l=new Uint32Array(t,n,c);n+=P;const u=new Uint16Array(t,n,a);let h,A;n+=D,(0,r.A)(N.POLYGON_MINIMUM_HEIGHTS)&&(0,r.A)(N.POLYGON_MAXIMUM_HEIGHTS)&&(h=z.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",d.A.FLOAT,1),A=z.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",d.A.FLOAT,1)),e._polygons=new y.A({positions:u,counts:i,indexCounts:s,indices:l,minimumHeight:W,maximumHeight:q,polygonMinimumHeights:h,polygonMaximumHeights:A,center:X,rectangle:j,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:H,batchIds:J.polygons,modelMatrix:Y})}if(U>0){z.featuresLength=U;const i=(0,o.A)(z.getPropertyArray("POLYLINE_COUNTS",d.A.UNSIGNED_INT,1),z.getPropertyArray("POLYLINE_COUNT",d.A.UNSIGNED_INT,1));if(!(0,r.A)(i))throw new p.A("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let s=z.getPropertyArray("POLYLINE_WIDTHS",d.A.UNSIGNED_SHORT,1);if(!(0,r.A)(s)){s=new Uint16Array(U);for(let e=0;e<U;++e)s[e]=2}const a=i.reduce((function(e,t){return e+3*t}),0),c=new Uint16Array(t,n,a);n+=O;const u=e._tileset,h=u.examineVectorLinesFunction;(0,r.A)(h)&&function(e,t,n,i,o,r){const s=t.length;let a=0;for(let c=0;c<s;c++){const s=3*t[c],l=e.slice(a,a+s);a+=s,r(l,n[c],o,i)}}((0,T.A)(new Uint16Array(c),j,W,q,l.A.WGS84),i,J.polylines,H,e.url,h);let A=S;(0,r.A)(u.classificationType)&&(A=C),e._polylines=A({positions:c,widths:s,counts:i,batchIds:J.polylines,minimumHeight:W,maximumHeight:q,center:X,rectangle:j,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:H,classificationType:u.classificationType,keepDecodedPositions:u.vectorKeepDecodedPositions})}if(k>0){const i=new Uint16Array(t,n,3*k);n+=L,e._points=new g.A({positions:i,batchIds:J.points,minimumHeight:W,maximumHeight:q,rectangle:j,batchTable:H})}}(this,s,a)}Object.defineProperties(w.prototype,{featuresLength:{get:function(){return(0,r.A)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return(0,r.A)(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return(0,r.A)(this._polygons)&&(e+=this._polygons.trianglesLength),(0,r.A)(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return(0,r.A)(this._polygons)&&(e+=this._polygons.geometryByteLength),(0,r.A)(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return(0,r.A)(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return(0,r.A)(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,s.A)("Vector3DTileContent.readyPromise","Vector3DTileContent.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for Vector3DTileContent.ready to return true instead."),this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const E=Uint32Array.BYTES_PER_ELEMENT;function S(e){return new b.A(e)}function C(e){return new v.A(e)}function x(e){const t=e.featuresLength;if(!(0,r.A)(e._features)&&t>0){const n=new Array(t);(0,r.A)(e._polygons)&&e._polygons.createFeatures(e,n),(0,r.A)(e._polylines)&&e._polylines.createFeatures(e,n),(0,r.A)(e._points)&&e._points.createFeatures(e,n),e._features=n}}w.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},w.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,r.A)(e)||e<0||e>=t)throw new c.A(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return(0,r.A)(this._features)||x(this),this._features[e]},w.prototype.applyDebugSettings=function(e,t){(0,r.A)(this._polygons)&&this._polygons.applyDebugSettings(e,t),(0,r.A)(this._polylines)&&this._polylines.applyDebugSettings(e,t),(0,r.A)(this._points)&&this._points.applyDebugSettings(e,t)},w.prototype.applyStyle=function(e){(0,r.A)(this._features)||x(this),(0,r.A)(this._polygons)&&this._polygons.applyStyle(e,this._features),(0,r.A)(this._polylines)&&this._polylines.applyStyle(e,this._features),(0,r.A)(this._points)&&this._points.applyStyle(e,this._features)},w.prototype.update=function(e,t){let n=!0;(0,r.A)(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),(0,r.A)(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),(0,r.A)(this._points)&&(this._points.update(t),n=n&&this._points.ready),(0,r.A)(this._batchTable)&&n&&((0,r.A)(this._features)||x(this),this._batchTable.update(e,t),this._ready=!0,this._resolveContent(this))},w.prototype.getPolylinePositions=function(e){const t=this._polylines;if((0,r.A)(t))return t.getPositions(e)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,a.A)(this)};const I=w},301350:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(660662),o=n(267980),r=n(41476),s=n(419061),a=n(491446),c=n(677354),l=n(584164),u=n(971724),d=n(71578),h=n(28940),A=n(471293);function f(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,(0,a.A)(this._center)||((0,a.A)(this._boundingVolume)?this._center=o.A.clone(this._boundingVolume.center):this._center=o.A.clone(o.A.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=d.A.BOTH}Object.defineProperties(f.prototype,{trianglesLength:{get:function(){return(0,a.A)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,a.A)(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}}),f.packedBoxLength=l.A.packedLength+o.A.packedLength,f.packedCylinderLength=l.A.packedLength+2,f.packedEllipsoidLength=l.A.packedLength+o.A.packedLength,f.packedSphereLength=o.A.packedLength+1;const p=new u.A("createVectorTileGeometries",5),m=new r.A;f.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},f.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},f.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},f.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},f.prototype.update=function(e){if(this._ready)this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e);else if((0,a.A)(this._promise)||(this._promise=function(e){if(!(0,a.A)(e._primitive)&&!(0,a.A)(e._verticesPromise)){let t=e._boxes,n=e._boxBatchIds,c=e._cylinders,u=e._cylinderBatchIds,d=e._ellipsoids,f=e._ellipsoidBatchIds,_=e._spheres,g=e._sphereBatchIds,y=e._batchTableColors,b=e._packedBuffer;if(!(0,a.A)(y)){let i=0;(0,a.A)(e._boxes)&&(t=e._boxes=t.slice(),n=e._boxBatchIds=n.slice(),i+=n.length),(0,a.A)(e._cylinders)&&(c=e._cylinders=c.slice(),u=e._cylinderBatchIds=u.slice(),i+=u.length),(0,a.A)(e._ellipsoids)&&(d=e._ellipsoids=d.slice(),f=e._ellipsoidBatchIds=f.slice(),i+=f.length),(0,a.A)(e._spheres)&&(_=e._sphere=_.slice(),g=e._sphereBatchIds=g.slice(),i+=g.length),y=e._batchTableColors=new Uint32Array(i);const r=e._batchTable;for(let e=0;e<i;++e){const t=r.getColor(e,m);y[e]=t.toRgba()}b=e._packedBuffer=function(e){const t=new Float64Array(l.A.packedLength+o.A.packedLength);let n=0;return o.A.pack(e._center,t,n),n+=o.A.packedLength,l.A.pack(e._modelMatrix,t,n),t}(e)}const v=[];(0,a.A)(t)&&v.push(t.buffer,n.buffer),(0,a.A)(c)&&v.push(c.buffer,u.buffer),(0,a.A)(d)&&v.push(d.buffer,f.buffer),(0,a.A)(_)&&v.push(_.buffer,g.buffer),v.push(y.buffer,b.buffer);const T={boxes:(0,a.A)(t)?t.buffer:void 0,boxBatchIds:(0,a.A)(t)?n.buffer:void 0,cylinders:(0,a.A)(c)?c.buffer:void 0,cylinderBatchIds:(0,a.A)(c)?u.buffer:void 0,ellipsoids:(0,a.A)(d)?d.buffer:void 0,ellipsoidBatchIds:(0,a.A)(d)?f.buffer:void 0,spheres:(0,a.A)(_)?_.buffer:void 0,sphereBatchIds:(0,a.A)(_)?g.buffer:void 0,batchTableColors:y.buffer,packedBuffer:b.buffer},w=e._verticesPromise=p.scheduleTask(T,v);if(!(0,a.A)(w))return;return w.then((function(t){if(e.isDestroyed())return;const n=new Float64Array(t.packedBuffer),o=function(e,t){let n=0;const o=t[n++],s=t[n++],a=e._boundingVolumes=new Array(s);for(let e=0;e<s;++e)a[e]=i.A.unpack(t,n),n+=i.A.packedLength;const c=t[n++],l=e._batchedIndices=new Array(c);for(let e=0;e<c;++e){const i=r.A.unpack(t,n);n+=r.A.packedLength;const o=t[n++],s=t[n++],a=t[n++],c=new Array(a);for(let e=0;e<a;++e)c[e]=t[n++];l[e]=new h.A({color:i,offset:o,count:s,batchIds:c})}return o}(e,n);e._indices=2===o?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),function(e){(0,a.A)(e._primitive)||(e._primitive=new A.A({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:(0,s.A)(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}(e),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)}))}}(this)),(0,a.A)(this._error)){const e=this._error;throw this._error=void 0,e}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,c.A)(this)};const _=f},601165:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(434067),o=n(267980),r=n(41476),s=n(491446),a=n(677354),c=n(853331),l=n(610750),u=n(290176),d=n(697422),h=n(971724),A=n(770103),f=n(294023),p=n(337632),m=n(465674),_=n(15817),g=n(891674),y=n(742558);function b(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=new A.A({batchTable:e.batchTable}),this._labelCollection=new m.A({batchTable:e.batchTable}),this._polylineCollection=new g.A,this._polylineCollection._useHighlightColor=!0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(b.prototype,{ready:{get:function(){return this._ready}},pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){return this._billboardCollection.textureAtlas.texture.sizeInBytes+this._labelCollection._textureAtlas.texture.sizeInBytes}}});const v=new h.A("createVectorTilePoints",5),T=new o.A;b.prototype.createFeatures=function(e,t){const n=this._billboardCollection,i=this._labelCollection,o=this._polylineCollection,r=this._batchIds,s=r.length;for(let a=0;a<s;++a){const s=r[a],c=n.get(a),l=i.get(a),u=o.get(a);t[s]=new f.A(e,s,c,l,u)}},b.prototype.applyDebugSettings=function(e,t){e?(r.A.clone(t,this._billboardCollection._highlightColor),r.A.clone(t,this._labelCollection._highlightColor),r.A.clone(t,this._polylineCollection._highlightColor)):(r.A.clone(r.A.WHITE,this._billboardCollection._highlightColor),r.A.clone(r.A.WHITE,this._labelCollection._highlightColor),r.A.clone(r.A.WHITE,this._polylineCollection._highlightColor))};const w=new r.A,E=new r.A,S=new r.A,C=new r.A,x=new r.A,I=new r.A,P=new u.A,D=new u.A,O=new c.A;b.prototype.applyStyle=function(e,t){if(!(0,s.A)(e))return void function(e,t){const n=e._batchIds,o=n.length;for(let e=0;e<o;++e){const o=t[n[e]];o.show=!0,o.pointSize=f.A.defaultPointSize,o.color=f.A.defaultColor,o.pointOutlineColor=f.A.defaultPointOutlineColor,o.pointOutlineWidth=f.A.defaultPointOutlineWidth,o.labelColor=r.A.WHITE,o.labelOutlineColor=r.A.WHITE,o.labelOutlineWidth=1,o.font="30px sans-serif",o.labelStyle=_.A.FILL,o.labelText=void 0,o.backgroundColor=new r.A(.165,.165,.165,.8),o.backgroundPadding=new i.A(7,5),o.backgroundEnabled=!1,o.scaleByDistance=void 0,o.translucencyByDistance=void 0,o.distanceDisplayCondition=void 0,o.heightOffset=0,o.anchorLineEnabled=!1,o.anchorLineColor=r.A.WHITE,o.image=void 0,o.disableDepthTestDistance=0,o.horizontalOrigin=p.A.CENTER,o.verticalOrigin=y.A.CENTER,o.labelHorizontalOrigin=p.A.RIGHT,o.labelVerticalOrigin=y.A.BASELINE}}(this,t);const n=this._batchIds,o=n.length;for(let i=0;i<o;++i){const o=t[n[i]];if((0,s.A)(e.show)&&(o.show=e.show.evaluate(o)),(0,s.A)(e.pointSize)&&(o.pointSize=e.pointSize.evaluate(o)),(0,s.A)(e.color)&&(o.color=e.color.evaluateColor(o,w)),(0,s.A)(e.pointOutlineColor)&&(o.pointOutlineColor=e.pointOutlineColor.evaluateColor(o,E)),(0,s.A)(e.pointOutlineWidth)&&(o.pointOutlineWidth=e.pointOutlineWidth.evaluate(o)),(0,s.A)(e.labelColor)&&(o.labelColor=e.labelColor.evaluateColor(o,S)),(0,s.A)(e.labelOutlineColor)&&(o.labelOutlineColor=e.labelOutlineColor.evaluateColor(o,C)),(0,s.A)(e.labelOutlineWidth)&&(o.labelOutlineWidth=e.labelOutlineWidth.evaluate(o)),(0,s.A)(e.font)&&(o.font=e.font.evaluate(o)),(0,s.A)(e.labelStyle)&&(o.labelStyle=e.labelStyle.evaluate(o)),(0,s.A)(e.labelText)?o.labelText=e.labelText.evaluate(o):o.labelText=void 0,(0,s.A)(e.backgroundColor)&&(o.backgroundColor=e.backgroundColor.evaluateColor(o,x)),(0,s.A)(e.backgroundPadding)&&(o.backgroundPadding=e.backgroundPadding.evaluate(o)),(0,s.A)(e.backgroundEnabled)&&(o.backgroundEnabled=e.backgroundEnabled.evaluate(o)),(0,s.A)(e.scaleByDistance)){const t=e.scaleByDistance.evaluate(o);(0,s.A)(t)?(P.near=t.x,P.nearValue=t.y,P.far=t.z,P.farValue=t.w,o.scaleByDistance=P):o.scaleByDistance=void 0}else o.scaleByDistance=void 0;if((0,s.A)(e.translucencyByDistance)){const t=e.translucencyByDistance.evaluate(o);(0,s.A)(t)?(D.near=t.x,D.nearValue=t.y,D.far=t.z,D.farValue=t.w,o.translucencyByDistance=D):o.translucencyByDistance=void 0}else o.translucencyByDistance=void 0;if((0,s.A)(e.distanceDisplayCondition)){const t=e.distanceDisplayCondition.evaluate(o);(0,s.A)(t)?(O.near=t.x,O.far=t.y,o.distanceDisplayCondition=O):o.distanceDisplayCondition=void 0}else o.distanceDisplayCondition=void 0;(0,s.A)(e.heightOffset)&&(o.heightOffset=e.heightOffset.evaluate(o)),(0,s.A)(e.anchorLineEnabled)&&(o.anchorLineEnabled=e.anchorLineEnabled.evaluate(o)),(0,s.A)(e.anchorLineColor)&&(o.anchorLineColor=e.anchorLineColor.evaluateColor(o,I)),(0,s.A)(e.image)?o.image=e.image.evaluate(o):o.image=void 0,(0,s.A)(e.disableDepthTestDistance)&&(o.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(o)),(0,s.A)(e.horizontalOrigin)&&(o.horizontalOrigin=e.horizontalOrigin.evaluate(o)),(0,s.A)(e.verticalOrigin)&&(o.verticalOrigin=e.verticalOrigin.evaluate(o)),(0,s.A)(e.labelHorizontalOrigin)&&(o.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(o)),(0,s.A)(e.labelVerticalOrigin)&&(o.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(o))}},b.prototype.update=function(e){if(this._ready)this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e);else if((0,s.A)(this._promise)||(this._promise=function(e,t){let n=e._positions,i=e._packedBuffer;(0,s.A)(i)||(n=e._positions=n.slice(),e._batchIds=e._batchIds.slice(),i=e._packedBuffer=function(e,t){const n=e._rectangle,i=e._minHeight,o=e._maxHeight,r=2+d.A.packedLength+l.A.packedLength,s=new Float64Array(r);let a=0;return s[a++]=i,s[a++]=o,d.A.pack(n,s,a),a+=d.A.packedLength,l.A.pack(t,s,a),s}(e,t));const r=[n.buffer,i.buffer],a={positions:n.buffer,packedBuffer:i.buffer},c=v.scheduleTask(a,r);if((0,s.A)(c))return c.then((t=>{if(e.isDestroyed())return;e._positions=new Float64Array(t.positions);const i=e._billboardCollection,r=e._labelCollection,s=e._polylineCollection;n=e._positions;const a=e._batchIds,c=n.length/3;for(let e=0;e<c;++e){const t=a[e],c=o.A.unpack(n,3*e,T),l=i.add();l.position=c,l._batchIndex=t;const u=r.add();u.text=" ",u.position=c,u._batchIndex=t,s.add().positions=[o.A.clone(c),o.A.clone(c)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)}))}(this,e.mapProjection.ellipsoid)),(0,s.A)(this._error)){const e=this._error;throw this._error=void 0,e}},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),(0,a.A)(this)};const L=b},566453:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(267980),o=n(41476),r=n(419061),s=n(491446),a=n(677354),c=n(610750),l=n(874915),u=n(832698),d=n(697422),h=n(971724),A=n(71578),f=n(28940),p=n(471293);function m(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=(0,r.A)(e.ellipsoid,c.A.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=(0,r.A)(e.center,i.A.ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=A.A.BOTH}Object.defineProperties(m.prototype,{trianglesLength:{get:function(){return(0,s.A)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,s.A)(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});const _=new h.A("createVectorTilePolygons",5),g=new o.A;m.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},m.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},m.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},m.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},m.prototype.update=function(e){if(this._ready)this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e);else if((0,s.A)(this._promise)||(this._promise=function(e){if((0,s.A)(e._primitive))return;let t=e._positions,n=e._counts,r=e._indexCounts,a=e._indices,h=e._transferrableBatchIds,A=e._batchTableColors,m=e._packedBuffer;if(!(0,s.A)(A)){t=e._positions=e._positions.slice(),n=e._counts=e._counts.slice(),r=e._indexCounts=e._indexCounts.slice(),a=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(d.A.center(e._rectangle)),h=e._transferrableBatchIds=new Uint32Array(e._batchIds),A=e._batchTableColors=new Uint32Array(h.length);const o=e._batchTable,s=A.length;for(let e=0;e<s;++e){const t=o.getColor(e,g);A[e]=t.toRgba()}m=e._packedBuffer=function(e){const t=new Float64Array(3+i.A.packedLength+c.A.packedLength+d.A.packedLength);let n=0;return t[n++]=e._indices.BYTES_PER_ELEMENT,t[n++]=e._minimumHeight,t[n++]=e._maximumHeight,i.A.pack(e._center,t,n),n+=i.A.packedLength,c.A.pack(e._ellipsoid,t,n),n+=c.A.packedLength,d.A.pack(e._rectangle,t,n),t}(e)}const y=[t.buffer,n.buffer,r.buffer,a.buffer,h.buffer,A.buffer,m.buffer],b={packedBuffer:m.buffer,positions:t.buffer,counts:n.buffer,indexCounts:r.buffer,indices:a.buffer,batchIds:h.buffer,batchTableColors:A.buffer};let v=e._polygonMinimumHeights,T=e._polygonMaximumHeights;(0,s.A)(v)&&(0,s.A)(T)&&(v=v.slice(),T=T.slice(),y.push(v.buffer,T.buffer),b.minimumHeights=v,b.maximumHeights=T);const w=_.scheduleTask(b,y);return(0,s.A)(w)?w.then((t=>{if(e.isDestroyed())return;e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;const n=new Float64Array(t.packedBuffer),i=n[0];!function(e,t){let n=1;const i=t[n++],r=e._boundingVolumes=new Array(i);for(let e=0;e<i;++e)r[e]=u.A.unpack(t,n),n+=u.A.packedLength;const s=t[n++],a=e._batchedIndices=new Array(s);for(let e=0;e<s;++e){const i=o.A.unpack(t,n);n+=o.A.packedLength;const r=t[n++],s=t[n++],c=t[n++],l=new Array(c);for(let e=0;e<c;++e)l[e]=t[n++];a[e]=new f.A({color:i,offset:r,count:s,batchIds:l})}}(e,n),e._indices=2===l.A.getSizeInBytes(i)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),function(e){(0,s.A)(e._primitive)||(e._primitive=new p.A({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0)}(e),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)})):void 0}(this)),(0,s.A)(this._error)){const e=this._error;throw this._error=void 0,e}},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,a.A)(this)};const y=m},953681:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(267980),o=n(41476),r=n(571804),s=n(419061),a=n(491446),c=n(677354),l=n(610750),u=n(520098),d=n(874915),h=n(584164),A=n(697422),f=n(971724),p=n(641613),m=n(442790),_=n(377496),g=n(760866),y=n(40118),b=n(302836),v=n(342875),T=n(508380),w=n(78149),E=n(747776),S=n(200646),C=n(622569);function x(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=(0,s.A)(e.ellipsoid,l.A.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=o.A.clone(o.A.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(x.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});const I=new f.A("createVectorTilePolylines",5),P={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};const D=new h.A,O=new i.A;x.getPolylinePositions=function(e,t){const n=e._batchIds,i=e._decodedPositions,o=e._decodedPositionOffsets;if(!(0,a.A)(n)||!(0,a.A)(i))return;let r,s;const c=n.length;let l=0,u=0;for(r=0;r<c;++r)n[r]===t&&(l+=o[r+1]-o[r]);if(0===l)return;const d=new Float64Array(3*l);for(r=0;r<c;++r)if(n[r]===t){const e=o[r],t=o[r+1]-e;for(s=0;s<t;++s){const t=3*(e+s);d[u++]=i[t],d[u++]=i[t+1],d[u++]=i[t+2]}}return d},x.prototype.getPositions=function(e){return x.getPolylinePositions(this,e)},x.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new C.A(e,i)}},x.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const L=new o.A,N=o.A.WHITE;x.prototype.applyStyle=function(e,t){if(!(0,a.A)(e))return void function(e,t){const n=e._batchIds,i=n.length;for(let e=0;e<i;++e){const i=t[n[e]];i.show=!0,i.color=o.A.WHITE}}(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=t[n[o]];i.color=(0,a.A)(e.color)?e.color.evaluateColor(i,L):N,i.show=!(0,a.A)(e.show)||e.show.evaluate(i)}},x.prototype.update=function(e){const t=e.context;if(!this._ready){if((0,a.A)(this._promise)||(this._promise=function(e,t){if((0,a.A)(e._va))return;let n=e._positions,o=e._widths,s=e._counts,c=e._transferrableBatchIds,u=e._packedBuffer;(0,a.A)(u)||(n=e._positions=n.slice(),o=e._widths=o.slice(),s=e._counts=s.slice(),c=e._transferrableBatchIds=e._batchIds.slice(),u=e._packedBuffer=function(e){const t=e._rectangle,n=e._minimumHeight,o=e._maximumHeight,r=e._ellipsoid,s=e._center,a=2+A.A.packedLength+l.A.packedLength+i.A.packedLength,c=new Float64Array(a);let u=0;return c[u++]=n,c[u++]=o,A.A.pack(t,c,u),u+=A.A.packedLength,l.A.pack(r,c,u),u+=l.A.packedLength,i.A.pack(s,c,u),c}(e));const h=[n.buffer,o.buffer,s.buffer,c.buffer,u.buffer],f={positions:n.buffer,widths:o.buffer,counts:s.buffer,batchIds:c.buffer,packedBuffer:u.buffer,keepDecodedPositions:e._keepDecodedPositions},_=I.scheduleTask(f,h);return(0,a.A)(_)?_.then((function(n){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(n.decodedPositions),e._decodedPositionOffsets=new Uint32Array(n.decodedPositionOffsets)),e._currentPositions=new Float32Array(n.currentPositions),e._previousPositions=new Float32Array(n.previousPositions),e._nextPositions=new Float32Array(n.nextPositions),e._expandAndWidth=new Float32Array(n.expandAndWidth),e._vertexBatchIds=new Uint16Array(n.batchIds);const i=n.indexDatatype;e._indices=i===d.A.UNSIGNED_SHORT?new Uint16Array(n.indices):new Uint32Array(n.indices),function(e,t){if(!(0,a.A)(e._va)){const n=e._currentPositions,i=e._previousPositions,o=e._nextPositions,s=e._expandAndWidth,a=e._vertexBatchIds,c=e._indices;let l=i.byteLength+n.byteLength+o.byteLength;l+=s.byteLength+a.byteLength+c.byteLength,e._trianglesLength=c.length/3,e._geometryByteLength=l;const u=p.A.createVertexBuffer({context:t,typedArray:i,usage:m.A.STATIC_DRAW}),h=p.A.createVertexBuffer({context:t,typedArray:n,usage:m.A.STATIC_DRAW}),A=p.A.createVertexBuffer({context:t,typedArray:o,usage:m.A.STATIC_DRAW}),f=p.A.createVertexBuffer({context:t,typedArray:s,usage:m.A.STATIC_DRAW}),_=p.A.createVertexBuffer({context:t,typedArray:a,usage:m.A.STATIC_DRAW}),g=p.A.createIndexBuffer({context:t,typedArray:c,usage:m.A.STATIC_DRAW,indexDatatype:2===c.BYTES_PER_ELEMENT?d.A.UNSIGNED_SHORT:d.A.UNSIGNED_INT}),y=[{index:P.previousPosition,vertexBuffer:u,componentDatatype:r.A.FLOAT,componentsPerAttribute:3},{index:P.currentPosition,vertexBuffer:h,componentDatatype:r.A.FLOAT,componentsPerAttribute:3},{index:P.nextPosition,vertexBuffer:A,componentDatatype:r.A.FLOAT,componentsPerAttribute:3},{index:P.expandAndWidth,vertexBuffer:f,componentDatatype:r.A.FLOAT,componentsPerAttribute:2},{index:P.a_batchId,vertexBuffer:_,componentDatatype:r.A.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new T.A({context:t,attributes:y,indexBuffer:g}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}(e,t),e._ready=!0})).catch((t=>{e.isDestroyed()||(e._error=t)})):void 0}(this,t)),(0,a.A)(this._error)){const e=this._error;throw this._error=void 0,e}return}var n;!function(e,t){(0,a.A)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return h.A.clone(n,D),h.A.multiplyByPoint(D,e._center,O),h.A.setTranslation(D,O,D),D},u_highlightColor:function(){return e._highlightColor}})}(this,t),function(e,t){if((0,a.A)(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(E.A),o=n.getFragmentShaderCallback(!1,void 0,!1)("uniform vec4 u_highlightColor; \nvoid main()\n{\n    out_FragColor = u_highlightColor;\n}\n"),r=new v.A({defines:["VECTOR_TILE",u.A.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[w.A,i]}),s=new v.A({defines:["VECTOR_TILE"],sources:[o]});e._sp=b.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:P})}(this,t),n=this,(0,a.A)(n._rs)||(n._rs=y.A.fromCache({blending:S.A.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:{enabled:!0,factor:-5,units:-5}}));const o=e.passes;(o.render||o.pick)&&function(e,t){if(!(0,a.A)(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new _.A({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:g.A.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}(this,e)},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,c.A)(this)};const M=x},471293:(e,t,n)=>{"use strict";n.d(t,{A:()=>W});var i=n(267980),o=n(41476),r=n(571804),s=n(419061),a=n(491446),c=n(677354),l=n(874915),u=n(584164),d=n(402330),h=n(641613),A=n(442790),f=n(377496),p=n(760866),m=n(40118),_=n(302836),g=n(342875),y=n(508380),b=n(488961),v=n(971532),T=n(200646),w=n(622569),E=n(71578),S=n(523721),C=n(470622),x=n(938987),I=n(896464),P=n(138151),D=n(28940);function O(e){e=(0,s.A)(e,s.A.EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=(0,s.A)(e.center,i.A.ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=o.A.clone(o.A.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=(0,s.A)(e.classificationType,E.A.BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};const t=this._batchIds.length;for(let e=0;e<t;++e){const t=this._batchIds[e];this._batchIdLookUp[t]=e}}Object.defineProperties(O.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});const L={position:0,a_batchId:1};function N(e){const t=e?I.A.EQUAL:I.A.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:P.A.KEEP,zFail:P.A.DECREMENT_WRAP,zPass:P.A.KEEP},backFunction:t,backOperation:{fail:P.A.KEEP,zFail:P.A.INCREMENT_WRAP,zPass:P.A.KEEP},reference:x.A.CESIUM_3D_TILE_MASK,mask:x.A.CESIUM_3D_TILE_MASK},stencilMask:x.A.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:S.A.LESS_OR_EQUAL},depthMask:!1}}const M={stencilTest:{enabled:!0,frontFunction:I.A.NOT_EQUAL,frontOperation:{fail:P.A.ZERO,zFail:P.A.ZERO,zPass:P.A.ZERO},backFunction:I.A.NOT_EQUAL,backOperation:{fail:P.A.ZERO,zFail:P.A.ZERO,zPass:P.A.ZERO},reference:0,mask:x.A.CLASSIFICATION_MASK},stencilMask:x.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:T.A.PRE_MULTIPLIED_ALPHA_BLEND},R={stencilTest:{enabled:!0,frontFunction:I.A.NOT_EQUAL,frontOperation:{fail:P.A.ZERO,zFail:P.A.ZERO,zPass:P.A.ZERO},backFunction:I.A.NOT_EQUAL,backOperation:{fail:P.A.ZERO,zFail:P.A.ZERO,zPass:P.A.ZERO},reference:0,mask:x.A.CLASSIFICATION_MASK},stencilMask:x.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},F=new u.A,B=new i.A;function U(e,t,n,i,o,r,s){const a=e.constructor.BYTES_PER_ELEMENT,c=r.length;for(let l=0;l<c;++l){const c=s[r[l]],u=i[c],d=o[c],h=new e.constructor(e.buffer,a*u,d);t.set(h,n),i[c]=n,n+=d}return n}function k(e,t,n,i,o,r,s){const a=e.bytesPerIndex,c=r.length;for(let l=0;l<c;++l){const c=s[r[l]],u=i[c],d=o[c];t.copyFromBuffer(e,u*a,n*a,d*a),i[c]=n,n+=d}return n}function V(e,t){return t.color.toRgba()-e.color.toRgba()}O.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new w.A(e,i)}},O.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const H=new o.A,z=o.A.WHITE,G=/\$/;function j(e,t,n,i){const o=e.classificationType,r=o!==E.A.CESIUM_3D_TILE,s=o!==E.A.TERRAIN,c=t.commandList;let l,u,d=n.length;for(u=0;u<d;++u)r&&(l=n[u],l.pass=p.A.TERRAIN_CLASSIFICATION,c.push(l)),s&&(l=n[u].derivedCommands.tileset,l.pass=p.A.CESIUM_3D_TILE_CLASSIFICATION,c.push(l));if(t.invertClassification&&(0,a.A)(i))for(d=i.length,u=0;u<d;++u)c.push(i[u])}O.prototype.applyStyle=function(e,t){if(!(0,a.A)(e))return void function(e,t){e._updatingAllCommands=!0;const n=e._batchIds;let i,r=n.length;for(i=0;i<r;++i){const e=t[n[i]];e.show=!0,e.color=o.A.WHITE}const s=e._batchedIndices;for(r=s.length,i=0;i<r;++i)s[i].color=o.A.clone(o.A.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}(this,t);const n=e.color,i=n instanceof C.A&&!G.test(n.expression);this._updatingAllCommands=i;const r=this._batchIds;let s,c=r.length;for(s=0;s<c;++s){const n=t[r[s]];n.color=(0,a.A)(e.color)?e.color.evaluateColor(n,H):z,n.show=!(0,a.A)(e.show)||e.show.evaluate(n)}if(i){const e=this._batchedIndices;for(c=e.length,s=0;s<c;++s)e[s].color=o.A.clone(o.A.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}},O.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;const n=this._batchIdLookUp,i=n[e];if(!(0,a.A)(i))return;const r=this._indexOffsets,s=this._indexCounts,c=r[i],l=s[i],u=this._batchedIndices,d=u.length;let h;for(h=0;h<d;++h){const e=u[h].offset,t=u[h].count;if(c>=e&&c<e+t)break}u.push(new D.A({color:o.A.clone(t),offset:c,count:l,batchIds:[e]}));const A=[],f=[],p=u[h].batchIds,m=p.length;for(let t=0;t<m;++t){const i=p[t];i!==e&&(r[n[i]]<c?A.push(i):f.push(i))}0!==f.length&&u.push(new D.A({color:o.A.clone(u[h].color),offset:c+l,count:u[h].offset+u[h].count-(c+l),batchIds:f})),0!==A.length?(u[h].count=c-u[h].offset,u[h].batchIds=A):u.splice(h,1),this._batchDirty=!0},O.prototype.update=function(e){const t=e.context;var n;!function(e,t){if((0,a.A)(e._va))return;const n=h.A.createVertexBuffer({context:t,typedArray:e._positions,usage:A.A.STATIC_DRAW}),i=h.A.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:A.A.STATIC_DRAW}),o=h.A.createIndexBuffer({context:t,typedArray:e._indices,usage:A.A.DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?l.A.UNSIGNED_SHORT:l.A.UNSIGNED_INT}),s=[{index:0,vertexBuffer:n,componentDatatype:r.A.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:i,componentDatatype:r.A.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new y.A({context:t,attributes:s,indexBuffer:o}),t.webgl2&&(e._vaSwap=new y.A({context:t,attributes:s,indexBuffer:h.A.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:A.A.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0}(this,t),function(e,t){if((0,a.A)(e._sp))return;const n=e._batchTable,i=(0,s.A)(e._attributeLocations,L);let o=e._pickId;const r=e._vertexShaderSource;let c=e._fragmentShaderSource;if((0,a.A)(r))return e._sp=_.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:i}),e._spStencil=e._sp,c=g.A.replaceMain(c,"czm_non_pick_main"),c=`${c}void main() \n{ \n    czm_non_pick_main(); \n    out_FragColor = ${o}; \n} \n`,void(e._spPick=_.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:i}));const l=n.getVertexShaderCallback(!1,"a_batchId",void 0)(v.A);let u=n.getFragmentShaderCallback(!1,void 0,!0)(b.A);o=n.getPickId();let d=new g.A({sources:[l]}),h=new g.A({defines:["VECTOR_TILE"],sources:[u]});e._sp=_.A.fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:i}),d=new g.A({sources:[v.A]}),h=new g.A({defines:["VECTOR_TILE"],sources:[b.A]}),e._spStencil=_.A.fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:i}),u=g.A.replaceMain(u,"czm_non_pick_main"),u=`${u}\nvoid main() \n{ \n    czm_non_pick_main(); \n    out_FragColor = ${o}; \n} \n`;const A=new g.A({sources:[l]}),f=new g.A({defines:["VECTOR_TILE"],sources:[u]});e._spPick=_.A.fromCache({context:t,vertexShaderSource:A,fragmentShaderSource:f,attributeLocations:i})}(this,t),n=this,(0,a.A)(n._rsStencilDepthPass)||(n._rsStencilDepthPass=m.A.fromCache(N(!1)),n._rsStencilDepthPass3DTiles=m.A.fromCache(N(!0)),n._rsColorPass=m.A.fromCache(M),n._rsPickPass=m.A.fromCache(R)),function(e,t){if((0,a.A)(e._uniformMap))return;const n={u_modifiedModelViewProjection:function(){const n=t.uniformState.view,i=t.uniformState.projection;return u.A.clone(n,F),u.A.multiplyByPoint(F,e._center,B),u.A.setTranslation(F,B,F),u.A.multiply(i,F,F),F},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(n)}(this,t);const i=e.passes;i.render&&(function(e,t){const n=function(e,t){if(!e._batchDirty)return!1;const n=e._batchedIndices,i=n.length;let r=!1;const s={};for(let e=0;e<i;++e){const t=n[e].color.toRgba();if((0,a.A)(s[t])){r=!0;break}s[t]=!0}return r?r&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(n.sort(V),t.webgl2?function(e,t){const n=e._indexOffsets,i=e._indexCounts,r=e._batchIdLookUp;let s=t.pop();const a=[s],c=e._va.indexBuffer,l=e._vaSwap.indexBuffer;let u=k(c,l,0,n,i,s.batchIds,r);for(s.offset=0,s.count=u;t.length>0;){const e=t.pop();if(o.A.equals(e.color,s.color))u=k(c,l,u,n,i,e.batchIds,r),s.batchIds=s.batchIds.concat(e.batchIds),s.count=u-s.offset;else{const t=u;u=k(c,l,u,n,i,e.batchIds,r),e.offset=t,e.count=u-t,a.push(e),s=e}}const d=e._va;e._va=e._vaSwap,e._vaSwap=d,e._batchedIndices=a}(e,n):function(e,t){const n=e._indices,i=e._indexOffsets,r=e._indexCounts,s=e._batchIdLookUp,a=new n.constructor(n.length);let c=t.pop();const l=[c];let u=U(n,a,0,i,r,c.batchIds,s);for(c.offset=0,c.count=u;t.length>0;){const e=t.pop();if(o.A.equals(e.color,c.color))u=U(n,a,u,i,r,e.batchIds,s),c.batchIds=c.batchIds.concat(e.batchIds),c.count=u-c.offset;else{const t=u;u=U(n,a,u,i,r,e.batchIds,s),e.offset=t,e.count=u-t,l.push(e),c=e}}e._va.indexBuffer.copyFromArrayView(a),e._indices=a,e._batchedIndices=l}(e,n),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}(e,t),i=e._commands,r=e._batchedIndices,c=r.length,l=2*c;if((0,a.A)(i)&&!n&&i.length===l)return;i.length=l;const d=e._va,h=e._sp,A=(0,s.A)(e._modelMatrix,u.A.IDENTITY),m=e._uniformMap,_=e._boundingVolume;for(let t=0;t<c;++t){const n=r[t].offset,o=r[t].count;let s=i[2*t];(0,a.A)(s)||(s=i[2*t]=new f.A({owner:e})),s.vertexArray=d,s.modelMatrix=A,s.offset=n,s.count=o,s.renderState=e._rsStencilDepthPass,s.shaderProgram=h,s.uniformMap=m,s.boundingVolume=_,s.cull=!1,s.pass=p.A.TERRAIN_CLASSIFICATION;const c=f.A.shallowClone(s,s.derivedCommands.tileset);c.renderState=e._rsStencilDepthPass3DTiles,c.pass=p.A.CESIUM_3D_TILE_CLASSIFICATION,s.derivedCommands.tileset=c;let l=i[2*t+1];(0,a.A)(l)||(l=i[2*t+1]=new f.A({owner:e})),l.vertexArray=d,l.modelMatrix=A,l.offset=n,l.count=o,l.renderState=e._rsColorPass,l.shaderProgram=h,l.uniformMap=m,l.boundingVolume=_,l.cull=!1,l.pass=p.A.TERRAIN_CLASSIFICATION;const u=f.A.shallowClone(l,l.derivedCommands.tileset);u.pass=p.A.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=u}e._commandsDirty=!0}(this,t),function(e,t){if(e.classificationType===E.A.TERRAIN||!t.invertClassification||(0,a.A)(e._commandsIgnoreShow)&&!e._commandsDirty)return;const n=e._commands,i=e._commandsIgnoreShow,o=e._spStencil,r=n.length,s=i.length=r/2;let c=0;for(let e=0;e<s;++e){const t=i[e]=f.A.shallowClone(n[c],i[e]);t.shaderProgram=o,t.pass=p.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=2}e._commandsDirty=!1}(this,e),function(e){let t,n,i=e.debugWireframe===e._debugWireframe;if(i=i&&!(e.debugWireframe&&e._wireframeDirty),i)return;(0,a.A)(e._rsWireframe)||(e._rsWireframe=m.A.fromCache({})),e.debugWireframe?(t=e._rsWireframe,n=d.A.LINES):(t=e._rsColorPass,n=d.A.TRIANGLES);const o=e._commands,r=o.length;for(let e=0;e<r;e+=2){const i=o[e+1];i.renderState=t,i.primitiveType=n}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}(this),this._debugWireframe?function(e,t){const n=e.commandList,i=t.length;for(let e=0;e<i;e+=2){const i=t[e+1];i.pass=p.A.OPAQUE,n.push(i)}}(e,this._commands):j(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(function(e){if(!e._pickCommandsDirty)return;const t=e._indexOffsets.length,n=e._pickCommands;n.length=2*t;const i=e._va,o=e._spStencil,r=e._spPick,c=(0,s.A)(e._modelMatrix,u.A.IDENTITY),l=e._uniformMap;for(let s=0;s<t;++s){const t=e._indexOffsets[s],u=e._indexCounts[s],d=(0,a.A)(e._boundingVolumes)?e._boundingVolumes[s]:e.boundingVolume;let h=n[2*s];(0,a.A)(h)||(h=n[2*s]=new f.A({owner:e,pickOnly:!0})),h.vertexArray=i,h.modelMatrix=c,h.offset=t,h.count=u,h.renderState=e._rsStencilDepthPass,h.shaderProgram=o,h.uniformMap=l,h.boundingVolume=d,h.pass=p.A.TERRAIN_CLASSIFICATION;const A=f.A.shallowClone(h,h.derivedCommands.tileset);A.renderState=e._rsStencilDepthPass3DTiles,A.pass=p.A.CESIUM_3D_TILE_CLASSIFICATION,h.derivedCommands.tileset=A;let m=n[2*s+1];(0,a.A)(m)||(m=n[2*s+1]=new f.A({owner:e,pickOnly:!0})),m.vertexArray=i,m.modelMatrix=c,m.offset=t,m.count=u,m.renderState=e._rsPickPass,m.shaderProgram=r,m.uniformMap=l,m.boundingVolume=d,m.pass=p.A.TERRAIN_CLASSIFICATION;const _=f.A.shallowClone(m,m.derivedCommands.tileset);_.pass=p.A.CESIUM_3D_TILE_CLASSIFICATION,m.derivedCommands.tileset=_}e._pickCommandsDirty=!1}(this),j(this,e,this._pickCommands))},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),(0,c.A)(this)};const W=O},595826:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(491446),r=n(605971);const s={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID",hasSetIndex:function(e){switch(i.A.typeOf.string("semantic",e),e){case s.POSITION:case s.NORMAL:case s.TANGENT:return!1;case s.TEXCOORD:case s.COLOR:case s.JOINTS:case s.WEIGHTS:case s.FEATURE_ID:return!0;default:throw new r.A("semantic is not a valid value.")}},fromGltfSemantic:function(e){i.A.typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/.exec(e);switch(null!==n&&(t=n[1]),t){case"POSITION":return s.POSITION;case"NORMAL":return s.NORMAL;case"TANGENT":return s.TANGENT;case"TEXCOORD":return s.TEXCOORD;case"COLOR":return s.COLOR;case"JOINTS":return s.JOINTS;case"WEIGHTS":return s.WEIGHTS;case"_FEATURE_ID":return s.FEATURE_ID}},fromPntsSemantic:function(e){switch(i.A.typeOf.string("pntsSemantic",e),e){case"POSITION":case"POSITION_QUANTIZED":return s.POSITION;case"RGBA":case"RGB":case"RGB565":return s.COLOR;case"NORMAL":case"NORMAL_OCT16P":return s.NORMAL;case"BATCH_ID":return s.FEATURE_ID;default:throw new r.A("pntsSemantic is not a valid value.")}},getGlslType:function(e){switch(i.A.typeOf.string("semantic",e),e){case s.POSITION:case s.NORMAL:case s.TANGENT:return"vec3";case s.TEXCOORD:return"vec2";case s.COLOR:return"vec4";case s.JOINTS:return"ivec4";case s.WEIGHTS:return"vec4";case s.FEATURE_ID:return"int";default:throw new r.A("semantic is not a valid value.")}},getVariableName:function(e,t){i.A.typeOf.string("semantic",e);let n=function(e){switch(e){case s.POSITION:return"positionMC";case s.NORMAL:return"normalMC";case s.TANGENT:return"tangentMC";case s.TEXCOORD:return"texCoord";case s.COLOR:return"color";case s.JOINTS:return"joints";case s.WEIGHTS:return"weights";case s.FEATURE_ID:return"featureId";default:throw new r.A("semantic is not a valid value.")}}(e);return(0,o.A)(t)&&(n+=`_${t}`),n}},a=Object.freeze(s)},342767:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(647934),o=n(267980),r=n(400793),s=n(491446),a=n(230259),c=n(33914),l=n(367817),u=n(584164),d=n(769493),h=n(760866),A=n(326429),f=n(635577),p=n(311664),m=n(545880),_=n(5105),g=n(433184),y=n(425415),b=n(981152),v=n(413285),T=n(62467),w=n(681750),E=n(440463);function S(){this.command=void 0,this.near=void 0,this.far=void 0}function C(e,t,n){const o=e.context;let r,s;o.depthTexture&&(r=new m.A),e._useOIT&&o.depthTexture&&(s=new g.A(o));const a=new A.A(o);a.viewport=i.A.clone(n),this.camera=t,this._cameraClone=f.A.clone(t),this._cameraStartFired=!1,this._cameraMovedTime=void 0,this.viewport=n,this.passState=a,this.pickFramebuffer=new b.A(o),this.pickDepthFramebuffer=new y.A,this.sceneFramebuffer=new v.A,this.globeDepth=r,this.globeTranslucencyFramebuffer=new _.A,this.oit=s,this.translucentTileClassification=new E.A(o),this.pickDepths=[],this.frustumCommandsList=[],this.debugFrustumStatistics=void 0,this._commandExtents=[]}const x=new o.A,I=new o.A;function P(e,t,n,i,o){t.debugShowFrustums&&(n.debugOverlappingFrustums=0);const r=e.frustumCommandsList,a=r.length;for(let e=0;e<a;++e){const s=r[e],a=s.near;if(i>s.far)continue;if(o<a)break;const c=n.pass,l=s.indices[c]++;if(s.commands[c][l]=n,t.debugShowFrustums&&(n.debugOverlappingFrustums|=1<<e),n.executeInClosestFrustum)break}if(t.debugShowFrustums){const t=e.debugFrustumStatistics.commandsInFrustums;t[n.debugOverlappingFrustums]=(0,s.A)(t[n.debugOverlappingFrustums])?t[n.debugOverlappingFrustums]+1:1,++e.debugFrustumStatistics.totalCommands}t.updateDerivedCommands(n)}C.prototype.checkForCameraUpdates=function(e){const t=this.camera,n=this._cameraClone;return function(e,t,n){const i=1/Math.max(1,function(e,t){const n=Math.max(Math.abs(e.x),Math.abs(t.x)),i=Math.max(Math.abs(e.y),Math.abs(t.y)),o=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.max(Math.max(n,i),o)}(e.position,t.position));return o.A.multiplyByScalar(e.position,i,x),o.A.multiplyByScalar(t.position,i,I),o.A.equalsEpsilon(x,I,n)&&o.A.equalsEpsilon(e.direction,t.direction,n)&&o.A.equalsEpsilon(e.up,t.up,n)&&o.A.equalsEpsilon(e.right,t.right,n)&&u.A.equalsEpsilon(e.transform,t.transform,n)&&e.frustum.equalsEpsilon(t.frustum,n)}(t,n,l.A.EPSILON15)?(this._cameraStartFired&&(0,a.A)()-this._cameraMovedTime>e.cameraEventWaitTime&&(t.moveEnd.raiseEvent(),this._cameraStartFired=!1),!1):(this._cameraStartFired||(t.moveStart.raiseEvent(),this._cameraStartFired=!0),this._cameraMovedTime=(0,a.A)(),f.A.clone(t,n),!0)};const D=new r.A,O=new c.A;C.prototype.createPotentiallyVisibleSet=function(e){const t=e.frameState,n=t.camera,i=n.directionWC,o=n.positionWC,r=e._computeCommandList,a=e._overlayCommandList,c=t.commandList;e.debugShowFrustums&&(this.debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});const u=this.frustumCommandsList,A=u.length,f=h.A.NUMBER_OF_PASSES;for(let e=0;e<A;++e)for(let t=0;t<f;++t)u[e].indices[t]=0;r.length=0,a.length=0;const m=this._commandExtents,_=m.length;let g=0,y=+Number.MAX_VALUE,b=-Number.MAX_VALUE;const v=t.shadowState.shadowsEnabled;let E=+Number.MAX_VALUE,C=-Number.MAX_VALUE,x=Number.MAX_VALUE;const I=t.mode===T.A.SCENE3D?t.occluder:void 0;let L=t.cullingVolume;const N=D.planes;for(let e=0;e<5;++e)N[e]=L.planes[e];L=D;const M=c.length;for(let t=0;t<M;++t){const l=c[t],u=l.pass;if(u===h.A.COMPUTE)r.push(l);else if(u===h.A.OVERLAY)a.push(l);else{let t,r;const a=l.boundingVolume;if((0,s.A)(a)){if(!e.isVisible(l,L,I))continue;const n=a.computePlaneDistances(o,i,O);if(t=n.start,r=n.stop,y=Math.min(y,t),b=Math.max(b,r),v&&l.receiveShadows&&t<w.A.MAXIMUM_DISTANCE&&!(u===h.A.GLOBE&&t<-100&&r>100)){const e=r-t;u!==h.A.GLOBE&&t<100&&(x=Math.min(x,e)),E=Math.min(E,t),C=Math.max(C,r)}}else l instanceof d.A?(t=n.frustum.near,r=n.frustum.far):(t=n.frustum.near,r=n.frustum.far,y=Math.min(y,t),b=Math.max(b,r));let c=m[g];(0,s.A)(c)||(c=m[g]=new S),c.command=l,c.near=t,c.far=r,g++}}let R,F;for(v&&(E=Math.min(Math.max(E,n.frustum.near),n.frustum.far),C=Math.max(Math.min(C,n.frustum.far),E)),v&&(t.shadowState.nearPlane=E,t.shadowState.farPlane=C,t.shadowState.closestObjectSize=x),function(e,t,n,i){const o=t.frameState,r=o.camera,a=o.useLogDepth?t.logarithmicDepthFarToNearRatio:t.farToNearRatio,c=t.mode===T.A.SCENE2D,u=t.nearToFarDistance2D;let d;i*=1+l.A.EPSILON2,n=Math.min(Math.max(n,r.frustum.near),r.frustum.far),i=Math.max(Math.min(i,r.frustum.far),n),c?(i=Math.min(i,r.position.z+t.nearToFarDistance2D),n=Math.min(n,i),d=Math.ceil(Math.max(1,i-n)/t.nearToFarDistance2D)):d=Math.ceil(Math.log(i/n)/Math.log(a));const h=e.frustumCommandsList;h.length=d;for(let e=0;e<d;++e){let t,o;c?(t=Math.min(i-u,n+e*u),o=Math.min(i,t+u)):(t=Math.max(n,Math.pow(a,e)*n),o=Math.min(i,a*t));let r=h[e];(0,s.A)(r)?(r.near=t,r.far=o):r=h[e]=new p.A(t,o)}}(this,e,y,b),R=0;R<g;R++)F=m[R],P(this,e,F.command,F.near,F.far);if(g<_)for(R=g;R<_&&(F=m[R],(0,s.A)(F.command));R++)F.command=void 0;const B=u.length,U=t.frustumSplits;U.length=B+1;for(let e=0;e<B;++e)U[e]=u[e].near,e===B-1&&(U[e+1]=u[e].far)},C.prototype.destroy=function(){let e;this.pickFramebuffer=this.pickFramebuffer&&this.pickFramebuffer.destroy(),this.pickDepthFramebuffer=this.pickDepthFramebuffer&&this.pickDepthFramebuffer.destroy(),this.sceneFramebuffer=this.sceneFramebuffer&&this.sceneFramebuffer.destroy(),this.globeDepth=this.globeDepth&&this.globeDepth.destroy(),this.oit=this.oit&&this.oit.destroy(),this.translucentTileClassification=this.translucentTileClassification&&this.translucentTileClassification.destroy(),this.globeTranslucencyFramebuffer=this.globeTranslucencyFramebuffer&&this.globeTranslucencyFramebuffer.destroy();const t=this.pickDepths,n=t.length;for(e=0;e<n;++e)t[e].destroy()};const L=C},204758:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(660662),o=n(267980),r=n(367817),s=n(369031),a=n(331185),c=n(584164),l=n(832698),u=n(419061);function d(){this.orientedBoundingBox=new l.A,this.boundingSphere=new i.A,this.boundTransform=new c.A,this.shapeTransform=new c.A,this._minBounds=o.A.clone(d.DefaultMinBounds,new o.A),this._maxBounds=o.A.clone(d.DefaultMaxBounds,new o.A),this.shaderUniforms={renderMinBounds:new o.A,renderMaxBounds:new o.A,boxUvToShapeUvScale:new o.A,boxUvToShapeUvTranslate:new o.A},this.shaderDefines={BOX_INTERSECTION_INDEX:void 0,BOX_HAS_SHAPE_BOUNDS:void 0},this.shaderMaximumIntersectionsLength=0}const h=new o.A,A=new o.A,f=new a.A,p=new o.A,m=new o.A,_=new o.A,g=new o.A,y=c.A.fromRotationTranslation(a.A.fromUniformScale(.5,new a.A),new o.A(.5,.5,.5),new c.A);d.prototype.update=function(e,t,n,r,a){r=(0,u.A)(r,d.DefaultMinBounds),a=(0,u.A)(a,d.DefaultMaxBounds),s.A.typeOf.object("modelMatrix",e),s.A.typeOf.object("minBounds",t),s.A.typeOf.object("maxBounds",n);const l=d.DefaultMinBounds,h=d.DefaultMaxBounds;t=this._minBounds=o.A.clamp(t,l,h,this._minBounds),n=this._maxBounds=o.A.clamp(n,l,h,this._maxBounds),r=o.A.clamp(r,l,h,p),a=o.A.clamp(a,l,h,m);const f=o.A.clamp(t,r,a,_),b=o.A.clamp(n,r,a,g),v=c.A.getScale(e,A);if(f.x>b.x||f.y>b.y||f.z>b.z||(f.x===b.x)+(f.y===b.y)+(f.z===b.z)>=2||r.x>a.x||r.y>a.y||r.z>a.z||0===v.x||0===v.y||0===v.z)return!1;this.shapeTransform=c.A.clone(e,this.shapeTransform),this.orientedBoundingBox=T(f,b,this.shapeTransform,this.orientedBoundingBox),this.boundTransform=c.A.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.A.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const{shaderUniforms:w,shaderDefines:E}=this;for(const e in E)E.hasOwnProperty(e)&&(E[e]=void 0);const S=!o.A.equals(t,l)||!o.A.equals(n,h);let C=0;if(E.BOX_INTERSECTION_INDEX=C,C+=1,w.renderMinBounds=c.A.multiplyByPoint(y,f,w.renderMinBounds),w.renderMaxBounds=c.A.multiplyByPoint(y,b,w.renderMaxBounds),S){E.BOX_HAS_SHAPE_BOUNDS=!0;const e=t,i=n;w.boxUvToShapeUvScale=o.A.fromElements(2/(e.x===i.x?1:i.x-e.x),2/(e.y===i.y?1:i.y-e.y),2/(e.z===i.z?1:i.z-e.z),w.boxUvToShapeUvScale),w.boxUvToShapeUvTranslate=o.A.fromElements(-w.boxUvToShapeUvScale.x*(.5*e.x+.5),-w.boxUvToShapeUvScale.y*(.5*e.y+.5),-w.boxUvToShapeUvScale.z*(.5*e.z+.5),w.boxUvToShapeUvTranslate)}return this.shaderMaximumIntersectionsLength=C,!0};const b=new o.A,v=new o.A;function T(e,t,n,i){const r=d.DefaultMinBounds,s=d.DefaultMaxBounds;if(o.A.equals(e,r)&&o.A.equals(t,s))i.center=c.A.getTranslation(n,i.center),i.halfAxes=c.A.getMatrix3(n,i.halfAxes);else{let r=c.A.getScale(n,A);const s=o.A.midpoint(e,t,h);i.center=c.A.multiplyByPoint(n,s,i.center),r=o.A.fromElements(.5*r.x*(t.x-e.x),.5*r.y*(t.y-e.y),.5*r.z*(t.z-e.z),A);const l=c.A.getRotation(n,f);i.halfAxes=a.A.setScale(l,r,i.halfAxes)}return i}d.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,a){s.A.typeOf.number("tileLevel",e),s.A.typeOf.number("tileX",t),s.A.typeOf.number("tileY",n),s.A.typeOf.number("tileZ",i),s.A.typeOf.object("result",a);const c=this._minBounds,l=this._maxBounds,u=1/Math.pow(2,e);return T(o.A.fromElements(r.A.lerp(c.x,l.x,u*t),r.A.lerp(c.y,l.y,u*n),r.A.lerp(c.z,l.z,u*i),b),o.A.fromElements(r.A.lerp(c.x,l.x,u*(t+1)),r.A.lerp(c.y,l.y,u*(n+1)),r.A.lerp(c.z,l.z,u*(i+1)),v),this.shapeTransform,a)},d.prototype.computeApproximateStepSize=function(e){return s.A.typeOf.object("dimensions",e),1/o.A.maximumComponent(e)},d.DefaultMinBounds=Object.freeze(new o.A(-1,-1,-1)),d.DefaultMaxBounds=Object.freeze(new o.A(1,1,1));const w=d},823345:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(419061),o=n(660662),r=n(434067),s=n(267980),a=n(369031),c=n(367817),l=n(331185),u=n(584164),d=n(832698),h=n(626809);function A(){this.orientedBoundingBox=new d.A,this.boundingSphere=new o.A,this.boundTransform=new u.A,this.shapeTransform=new u.A,this._minimumRadius=A.DefaultMinBounds.x,this._maximumRadius=A.DefaultMaxBounds.x,this._minimumHeight=A.DefaultMinBounds.y,this._maximumHeight=A.DefaultMaxBounds.y,this._minimumAngle=A.DefaultMinBounds.z,this._maximumAngle=A.DefaultMaxBounds.z,this.shaderUniforms={cylinderUvToRenderBoundsScale:new s.A,cylinderUvToRenderBoundsTranslate:new s.A,cylinderUvToRenderRadiusMin:0,cylinderRenderAngleMinMax:new r.A,cylinderUvToShapeUvRadius:new r.A,cylinderUvToShapeUvHeight:new r.A,cylinderUvToShapeUvAngle:new r.A,cylinderShapeUvAngleMinMax:new r.A,cylinderShapeUvAngleRangeZeroMid:0},this.shaderDefines={CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN:void 0,CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX:void 0,CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT:void 0,CYLINDER_HAS_RENDER_BOUNDS_HEIGHT:void 0,CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF:void 0,CYLINDER_HAS_SHAPE_BOUNDS_RADIUS:void 0,CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED:void 0,CYLINDER_INTERSECTION_INDEX_RADIUS_MAX:void 0,CYLINDER_INTERSECTION_INDEX_RADIUS_MIN:void 0,CYLINDER_INTERSECTION_INDEX_ANGLE:void 0},this.shaderMaximumIntersectionsLength=0}const f=new s.A,p=new s.A,m=new s.A,_=new l.A,g=new u.A,y=new u.A,b=u.A.fromRotationTranslation(l.A.fromUniformScale(2,new l.A),new s.A(-1,-1,-1),new u.A);A.prototype.update=function(e,t,n,d,h){d=(0,i.A)(d,A.DefaultMinBounds),h=(0,i.A)(h,A.DefaultMaxBounds),a.A.typeOf.object("modelMatrix",e),a.A.typeOf.object("minBounds",t),a.A.typeOf.object("maxBounds",n);const v=A.DefaultMinBounds.x,T=A.DefaultMaxBounds.x,w=A.DefaultMinBounds.y,E=A.DefaultMaxBounds.y,S=A.DefaultMinBounds.z,C=A.DefaultMaxBounds.z,x=C-S,I=.5*x,P=c.A.EPSILON10,D=c.A.EPSILON3,O=c.A.EPSILON10,L=c.A.clamp(t.x,v,T),N=c.A.clamp(n.x,v,T),M=c.A.clamp(d.x,v,T),R=c.A.clamp(h.x,v,T),F=Math.max(L,M),U=Math.min(N,R),k=c.A.clamp(t.y,w,E),V=c.A.clamp(n.y,w,E),H=c.A.clamp(d.y,w,E),z=c.A.clamp(h.y,w,E),G=Math.max(k,H),j=Math.min(V,z),W=c.A.negativePiToPi(t.z),q=c.A.negativePiToPi(n.z),Y=c.A.negativePiToPi(d.z),X=c.A.negativePiToPi(h.z),J=Math.max(W,Y),Q=Math.min(q,X),$=u.A.getScale(e,f);if(0===U||F>U||G>j||c.A.equalsEpsilon($.x,0,void 0,P)||c.A.equalsEpsilon($.y,0,void 0,P)||c.A.equalsEpsilon($.z,0,void 0,P))return!1;this._minimumRadius=L,this._maximumRadius=N,this._minimumHeight=k,this._maximumHeight=V,this._minimumAngle=W,this._maximumAngle=q,this.shapeTransform=u.A.clone(e,this.shapeTransform),this.orientedBoundingBox=B(F,U,G,j,J,Q,this.shapeTransform,this.orientedBoundingBox),this.boundTransform=u.A.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=o.A.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const K=L===v&&N===T,Z=k===w&&V===E,ee=q<W,te=q-W+ee*x,ne=te<=O,ie=te>I+O&&te<x-O||te>O&&te<I-O||te>=I-O&&te<=I+O||ne,oe=c.A.equalsEpsilon(W,S,void 0,D),re=c.A.equalsEpsilon(q,C,void 0,D),se=U===T,ae=F===v,ce=G===w&&j===E,le=Q-J+(Q<J)*x,ue=le>I+O&&le<x-O,de=le>O&&le<I-O,he=le>=I-O&&le<=I+O,Ae=le<=O,fe=ue||de||he||Ae,pe=this.shaderUniforms,me=this.shaderDefines;for(const e in me)me.hasOwnProperty(e)&&(me[e]=void 0);let _e=0;if(me.CYLINDER_INTERSECTION_INDEX_RADIUS_MAX=_e,_e+=1,ae||(me.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN=!0,me.CYLINDER_INTERSECTION_INDEX_RADIUS_MIN=_e,_e+=1,pe.cylinderUvToRenderRadiusMin=U/F),se||(me.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX=!0),F===U&&(me.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT=!0),ce||(me.CYLINDER_HAS_RENDER_BOUNDS_HEIGHT=!0),G===j&&(me.CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT=!0),k===V&&(me.CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT=!0),L===N&&(me.CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT=!0),!K){me.CYLINDER_HAS_SHAPE_BOUNDS_RADIUS=!0;const e=1/(N-L),t=L/(L-N);pe.cylinderUvToShapeUvRadius=r.A.fromElements(e,t,pe.cylinderUvToShapeUvRadius)}if(!Z){me.CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT=!0;const e=2/(V-k),t=(k+1)/(k-V);pe.cylinderUvToShapeUvHeight=r.A.fromElements(e,t,pe.cylinderUvToShapeUvHeight)}if(!se||!ce){const e=.5*(j-G),t=s.A.fromElements(1/U,1/U,1/(0===e?1:e),m),n=s.A.fromElements(0,0,.5*-t.z*(G+j),p),i=u.A.fromRotationTranslation(l.A.fromScale(t,_),n,g),o=u.A.multiplyTransformation(i,b,y);pe.cylinderUvToRenderBoundsScale=u.A.getScale(o,pe.cylinderUvToRenderBoundsScale),pe.cylinderUvToRenderBoundsTranslate=u.A.getTranslation(o,pe.cylinderUvToRenderBoundsTranslate)}if(ee&&(me.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED=!0),fe&&(me.CYLINDER_HAS_RENDER_BOUNDS_ANGLE=!0,me.CYLINDER_INTERSECTION_INDEX_ANGLE=_e,ue?(me.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF=!0,_e+=1):de?(me.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF=!0,_e+=2):he?(me.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF=!0,_e+=1):Ae&&(me.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO=!0,_e+=2),pe.cylinderRenderAngleMinMax=r.A.fromElements(J,Q,pe.cylinderAngleMinMax)),ie){me.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE=!0,ne&&(me.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO=!0),oe&&(me.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY=!0),re&&(me.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY=!0);const e=(W-S)/x,t=(q-S)/x,n=1-te/x;pe.cylinderShapeUvAngleMinMax=r.A.fromElements(e,t,pe.cylinderShapeUvAngleMinMax),pe.cylinderShapeUvAngleRangeZeroMid=(t+.5*n)%1;const i=x/te,o=-(W-S)/te;pe.cylinderUvToShapeUvAngle=r.A.fromElements(i,o,pe.cylinderUvToShapeUvAngle)}return this.shaderMaximumIntersectionsLength=_e,!0},A.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,o){a.A.typeOf.number("tileLevel",e),a.A.typeOf.number("tileX",t),a.A.typeOf.number("tileY",n),a.A.typeOf.number("tileZ",i),a.A.typeOf.object("result",o);const r=this._minimumRadius,s=this._maximumRadius,l=this._minimumHeight,u=this._maximumHeight,d=this._minimumAngle,h=this._maximumAngle,A=1/Math.pow(2,e);return B(c.A.lerp(r,s,t*A),c.A.lerp(r,s,(t+1)*A),c.A.lerp(l,u,n*A),c.A.lerp(l,u,(n+1)*A),c.A.lerp(d,h,i*A),c.A.lerp(d,h,(i+1)*A),this.shapeTransform,o)};const v=new d.A,T=new s.A,w=new s.A,E=new s.A;A.prototype.computeApproximateStepSize=function(e){a.A.typeOf.object("dimensions",e);const t=this.shapeTransform,n=this._minimumRadius,i=this._maximumRadius,o=this._minimumHeight,r=this._maximumHeight,d=this._minimumAngle,h=this._maximumAngle,A=1-1/e.x,f=1-1/e.y,p=1-1/e.z,m=B(c.A.lerp(n,i,A),i,c.A.lerp(o,r,f),r,c.A.lerp(d,h,p),h,t,v),_=l.A.getScale(m.halfAxes,T),g=u.A.getScale(t,w),y=s.A.divideComponents(_,g,E);return s.A.minimumComponent(y)},A.DefaultMinBounds=Object.freeze(new s.A(0,-1,-c.A.PI)),A.DefaultMaxBounds=Object.freeze(new s.A(1,1,+c.A.PI));const S=new Array(5),C=new s.A,x=new l.A,I=new u.A,P=new u.A,D=new u.A,O=new u.A,L=new s.A,N=new s.A,M=new s.A,R=new Array(8);for(let e=0;e<8;e++)R[e]=new s.A;function F(e,t,n){return Math.abs(h.A.dot(e,t))<n}function B(e,t,n,i,o,r,a,h){const p=A.DefaultMinBounds,m=A.DefaultMaxBounds,_=p.x,g=m.x,y=p.y,b=m.y,v=p.z,T=m.z;if(e===_&&t===g&&n===y&&i===b&&o===v&&r===T)return h.center=u.A.getTranslation(a,h.center),h.halfAxes=u.A.getMatrix3(a,h.halfAxes),h;r<o&&(r+=c.A.TWO_PI);const w=r-o,E=o+.5*w,B=S;let U=0;B[U++]=o,B[U++]=r,B[U++]=E,w>c.A.PI&&(B[U++]=E-c.A.PI_OVER_TWO,B[U++]=E+c.A.PI_OVER_TWO);let k=1,V=1,H=-1,z=-1;for(let n=0;n<U;++n){const i=B[n]-E,o=Math.cos(i),r=Math.sin(i),s=o*e,a=r*e,c=o*t,l=r*t;k=Math.min(k,s),V=Math.min(V,a),k=Math.min(k,c),V=Math.min(V,l),H=Math.max(H,s),z=Math.max(z,a),H=Math.max(H,c),z=Math.max(z,l)}const G=H-k,j=z-V,W=i-n,q=.5*(k+H),Y=.5*(V+z),X=.5*(n+i),J=s.A.fromElements(q,Y,X,C),Q=l.A.fromRotationZ(E,x),$=s.A.fromElements(G,j,W,f),K=u.A.fromScale($,D),Z=u.A.fromRotation(Q,P),ee=u.A.fromTranslation(J,I),te=u.A.multiplyTransformation(Z,u.A.multiplyTransformation(ee,K,O),O),ne=u.A.multiplyTransformation(a,te,O);return function(e){const t=u.A.getColumn(e,0,L),n=u.A.getColumn(e,1,N),i=u.A.getColumn(e,2,M),o=c.A.EPSILON4;return F(t,n,o)&&F(n,i,o)}(ne)?d.A.fromTransformation(ne,h):function(e,t){const n=R;s.A.fromElements(-.5,-.5,-.5,n[0]),s.A.fromElements(-.5,-.5,.5,n[1]),s.A.fromElements(-.5,.5,-.5,n[2]),s.A.fromElements(-.5,.5,.5,n[3]),s.A.fromElements(.5,-.5,-.5,n[4]),s.A.fromElements(.5,-.5,.5,n[5]),s.A.fromElements(.5,.5,-.5,n[6]),s.A.fromElements(.5,.5,.5,n[7]);for(let t=0;t<8;++t)u.A.multiplyByPoint(e,n[t],n[t]);return d.A.fromPoints(n,t)}(ne,h)}const U=A},2930:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(660662),o=n(434067),r=n(267980),s=n(369031),a=n(610750),c=n(367817),l=n(331185),u=n(584164),d=n(832698),h=n(697422),A=n(419061);function f(){this.orientedBoundingBox=new d.A,this.boundingSphere=new i.A,this.boundTransform=new u.A,this.shapeTransform=new u.A,this._rectangle=new h.A,this._minimumHeight=f.DefaultMinBounds.z,this._maximumHeight=f.DefaultMaxBounds.z,this._ellipsoid=new a.A,this._translation=new r.A,this._rotation=new l.A,this.shaderUniforms={ellipsoidRadiiUv:new r.A,ellipsoidInverseRadiiSquaredUv:new r.A,ellipsoidRenderLongitudeMinMax:new o.A,ellipsoidShapeUvLongitudeMinMaxMid:new r.A,ellipsoidUvToShapeUvLongitude:new o.A,ellipsoidUvToShapeUvLatitude:new o.A,ellipsoidRenderLatitudeCosSqrHalfMinMax:new o.A,ellipsoidInverseHeightDifferenceUv:0,ellipseInnerRadiiUv:new o.A,ellipsoidInverseInnerScaleUv:0,ellipsoidInverseOuterScaleUv:0},this.shaderDefines={ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT:void 0,ELLIPSOID_IS_SPHERE:void 0,ELLIPSOID_INTERSECTION_INDEX_LONGITUDE:void 0,ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX:void 0,ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN:void 0,ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX:void 0,ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN:void 0},this.shaderMaximumIntersectionsLength=0}const p=new r.A,m=new l.A,_=new r.A,g=new r.A,y=new r.A,b=new r.A,v=new h.A;f.prototype.update=function(e,t,n,d,T){d=(0,A.A)(d,f.DefaultMinBounds),T=(0,A.A)(T,f.DefaultMaxBounds),s.A.typeOf.object("modelMatrix",e),s.A.typeOf.object("minBounds",t),s.A.typeOf.object("maxBounds",n);const E=f.DefaultMinBounds.x,S=f.DefaultMaxBounds.x,C=S-E,x=.5*C,I=f.DefaultMinBounds.y,P=f.DefaultMaxBounds.y,D=P-I,O=c.A.EPSILON10,L=c.A.EPSILON3,N=c.A.EPSILON10,M=c.A.EPSILON10,R=c.A.EPSILON3,F=c.A.clamp(t.x,E,S),B=c.A.clamp(n.x,E,S),U=c.A.clamp(d.x,E,S),k=c.A.clamp(T.x,E,S),V=Math.max(F,U),H=Math.min(B,k),z=c.A.clamp(t.y,I,P),G=c.A.clamp(n.y,I,P),j=c.A.clamp(d.y,I,P),W=c.A.clamp(T.y,I,P),q=Math.max(z,j),Y=Math.min(G,W),X=u.A.getScale(e,p),J=X.x===X.y&&X.y===X.z,Q=r.A.minimumComponent(X),$=Math.max(t.z,-Q),K=Math.max(n.z,-Q),Z=Math.max(d.z,-Q),ee=Math.max(T.z,-Q),te=Math.max($,Z),ne=Math.min(K,ee),ie=r.A.add(X,r.A.fromElements($,$,$,g),g),oe=r.A.add(X,r.A.fromElements(K,K,K,_),_),re=r.A.maximumComponent(oe),se=r.A.add(X,r.A.fromElements(te,te,te,b),b),ae=r.A.add(X,r.A.fromElements(ne,ne,ne,y),y);if(q>Y||q===P||Y===I||te>ne||c.A.equalsEpsilon(ae,r.A.ZERO,void 0,O))return!1;this._rectangle=h.A.fromRadians(F,z,B,G),this._translation=u.A.getTranslation(e,this._translation),this._rotation=u.A.getRotation(e,this._rotation),this._ellipsoid=a.A.fromCartesian3(X,this._ellipsoid),this._minimumHeight=$,this._maximumHeight=K;const ce=h.A.fromRadians(V,q,H,Y,v);this.orientedBoundingBox=w(ce,te,ne,this._ellipsoid,this._translation,this._rotation,this.orientedBoundingBox),this.shapeTransform=u.A.fromRotationTranslation(l.A.setScale(this._rotation,oe,m),this._translation,this.shapeTransform),this.boundTransform=u.A.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.A.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const le=H-V+(H<V)*C,ue=le<=N,de=le>x+N&&le<C-N,he=le>=x-N&&le<=x+N,Ae=le>N&&le<x-N,fe=ue||de||he||Ae,pe=B-F+(B<F)*C,me=pe<=N||pe>x+N&&pe<C-N||pe>=x-N&&pe<=x+N||pe>N&&pe<x-N,_e=Y<-R,ge=Y>=-R&&Y<=+R,ye=Y>+R&&Y<P-M,be=_e||ge||ye,ve=q>I+M&&q<-R,Te=q>=-R&&q<=+R,we=q>+R,Ee=ve||Te||we,Se=be||Ee,Ce=G-z,xe=G<-R||G>=-R&&G<=+R||G>+R&&G<P-M||z>I+M&&z<-R||z>=-R&&z<=+R||z>+R,Ie=!r.A.equals(se,r.A.ZERO),Pe=!r.A.equals(ae,r.A.ZERO),De=Ie||Pe,Oe=ne-te,Le=!r.A.equals(ie,r.A.ZERO),Ne=!r.A.equals(oe,r.A.ZERO),Me=Le||Ne,Re=this.shaderUniforms,Fe=this.shaderDefines;for(const e in Fe)Fe.hasOwnProperty(e)&&(Fe[e]=void 0);Re.ellipsoidRadiiUv=r.A.divideByScalar(oe,re,Re.ellipsoidRadiiUv),Re.ellipsoidInverseRadiiSquaredUv=r.A.divideComponents(r.A.ONE,r.A.multiplyComponents(Re.ellipsoidRadiiUv,Re.ellipsoidRadiiUv,Re.ellipsoidInverseRadiiSquaredUv),Re.ellipsoidInverseRadiiSquaredUv);let Be=0;if(Fe.ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX=Be,Be+=1,De&&(0===Oe&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT=!0),Ie&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN=!0,Fe.ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN=Be,Be+=1,Re.ellipsoidInverseInnerScaleUv=re/(re-(K-te))),Pe&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX=!0,Re.ellipsoidInverseOuterScaleUv=re/(re-(K-ne)))),Me){if(Le){Fe.ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN=!0;const e=(K-$)/re;Re.ellipsoidInverseHeightDifferenceUv=1/e,Re.ellipseInnerRadiiUv=o.A.fromElements(Re.ellipsoidRadiiUv.x*(1-e),Re.ellipsoidRadiiUv.z*(1-e),Re.ellipseInnerRadiiUv)}$===K&&(Fe.ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT=!0)}if(fe&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE=!0,Fe.ELLIPSOID_INTERSECTION_INDEX_LONGITUDE=Be,de?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF=!0,Be+=1):Ae?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF=!0,Be+=2):he?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF=!0,Be+=1):ue&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO=!0,Be+=2),Re.ellipsoidRenderLongitudeMinMax=o.A.fromElements(V,H,Re.ellipsoidRenderLongitudeMinMax)),me){Fe.ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE=!0,B<F&&(Fe.ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED=!0);const e=C/pe,t=-(F-E)/pe;Re.ellipsoidUvToShapeUvLongitude=o.A.fromElements(e,t,Re.ellipsoidUvToShapeUvLongitude)}if(fe){const e=c.A.equalsEpsilon(V,E,void 0,L),t=c.A.equalsEpsilon(H,S,void 0,L);e&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY=!0),t&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY=!0);const n=(F-E)/C,i=(B-E)/C,o=((H-E)/C+.5*(1-le/C))%1;Re.ellipsoidShapeUvLongitudeMinMaxMid=r.A.fromElements(n,i,o,Re.ellipsoidShapeUvLongitudeMinMaxMid)}if(Se){Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE=!0,Ee&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN=!0,Fe.ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN=Be,ve?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF=!0,Be+=1):Te?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF=!0,Be+=1):we&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF=!0,Be+=2)),be&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX=!0,Fe.ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX=Be,_e?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF=!0,Be+=2):ge?(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF=!0,Be+=1):ye&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF=!0,Be+=1)),q===Y&&(Fe.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO=!0);const e=Math.pow(Math.cos(c.A.PI_OVER_TWO-Math.abs(q)),2),t=Math.pow(Math.cos(c.A.PI_OVER_TWO-Math.abs(Y)),2);Re.ellipsoidRenderLatitudeCosSqrHalfMinMax=o.A.fromElements(e,t,Re.ellipsoidRenderLatitudeCosSqrHalfMinMax)}if(xe){Fe.ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE=!0,z===G&&(Fe.ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO=!0);const e=D/Ce,t=(I-z)/Ce;Re.ellipsoidUvToShapeUvLatitude=o.A.fromElements(e,t,Re.ellipsoidUvToShapeUvLatitude)}return J&&(Fe.ELLIPSOID_IS_SPHERE=!0),this.shaderMaximumIntersectionsLength=Be,!0};const T=new h.A;function w(e,t,n,i,o,s,a){return(a=d.A.fromRectangle(e,t,n,i,a)).center=r.A.add(a.center,o,a.center),a.halfAxes=l.A.multiply(a.halfAxes,s,a.halfAxes),a}f.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,o){s.A.typeOf.number("tileLevel",e),s.A.typeOf.number("tileX",t),s.A.typeOf.number("tileY",n),s.A.typeOf.number("tileZ",i),s.A.typeOf.object("result",o);const r=1/Math.pow(2,e),a=t*r,l=(t+1)*r,u=n*r,d=(n+1)*r,A=i*r,f=(i+1)*r;return w(h.A.subsection(this._rectangle,a,u,l,d,T),c.A.lerp(this._minimumHeight,this._maximumHeight,A),c.A.lerp(this._minimumHeight,this._maximumHeight,f),this._ellipsoid,this._translation,this._rotation,o)},f.prototype.computeApproximateStepSize=function(e){s.A.typeOf.object("dimensions",e);const t=this._ellipsoid.maximumRadius,n=this._minimumHeight,i=this._maximumHeight;return(i-n)/(t+i)*.5/e.z},f.DefaultMinBounds=Object.freeze(new r.A(-c.A.PI,-c.A.PI_OVER_TWO,-Number.MAX_VALUE)),f.DefaultMaxBounds=Object.freeze(new r.A(+c.A.PI,+c.A.PI_OVER_TWO,+Number.MAX_VALUE));const E=f},450339:(e,t,n)=>{"use strict";n.d(t,{A:()=>K});var i=n(593054),o=n(434067),r=n(267980),s=n(626809),a=n(367817),c=n(369031),l=n(376758),u=n(41476),d=n(419061),h=n(491446),A=n(786101),f=n(677354),p=n(955943),m=n(591978),_=n(331185),g=n(584164),y=n(983884),b=n(711284),v=n(608191),T=n(568748),w=n(374607),E=n(891674),S=n(304431),C=n(307452),x=n(106430);function I(e){e=(0,d.A)(e,d.A.EMPTY_OBJECT),this._ready=!1,this._provider=(0,d.A)(e.provider,I.DefaultProvider),this._traversal=void 0,this._shape=void 0,this._shapeVisible=!1,this._paddingBefore=new r.A,this._paddingAfter=new r.A,this._minBounds=new r.A,this._minBoundsOld=new r.A,this._maxBounds=new r.A,this._maxBoundsOld=new r.A,this._minClippingBounds=new r.A,this._minClippingBoundsOld=new r.A,this._maxClippingBounds=new r.A,this._maxClippingBoundsOld=new r.A,this._clippingPlanes=void 0,this._clippingPlanesState=0,this._clippingPlanesEnabled=!1,this._modelMatrix=g.A.clone((0,d.A)(e.modelMatrix,g.A.IDENTITY)),this._compoundModelMatrix=new g.A,this._compoundModelMatrixOld=new g.A,this._customShader=(0,d.A)(e.customShader,I.DefaultCustomShader),this._customShaderCompilationEvent=new p.A,this._shaderDirty=!0,this._drawCommand=void 0,this._drawCommandPick=void 0,this._pickId=void 0,this._clock=e.clock,this._transformPositionWorldToUv=new g.A,this._transformPositionUvToWorld=new g.A,this._transformDirectionWorldToLocal=new _.A,this._transformNormalLocalToWorld=new _.A,this._stepSizeUv=1,this._jitter=!0,this._nearestSampling=!1,this._levelBlendFactor=0,this._stepSizeMultiplier=1,this._depthTest=!0,this._useLogDepth=void 0,this._screenSpaceError=4,this._debugPolylines=new E.A,this._debugDraw=!1,this._disableRender=!1,this._disableUpdate=!1,this._uniforms={octreeInternalNodeTexture:void 0,octreeInternalNodeTilesPerRow:0,octreeInternalNodeTexelSizeUv:new o.A,octreeLeafNodeTexture:void 0,octreeLeafNodeTilesPerRow:0,octreeLeafNodeTexelSizeUv:new o.A,megatextureTextures:[],megatextureSliceDimensions:new o.A,megatextureTileDimensions:new o.A,megatextureVoxelSizeUv:new o.A,megatextureSliceSizeUv:new o.A,megatextureTileSizeUv:new o.A,dimensions:new r.A,paddingBefore:new r.A,paddingAfter:new r.A,transformPositionViewToUv:new g.A,transformPositionUvToView:new g.A,transformDirectionViewToLocal:new _.A,transformNormalLocalToWorld:new _.A,cameraPositionUv:new r.A,ndcSpaceAxisAlignedBoundingBox:new s.A,clippingPlanesTexture:void 0,clippingPlanesMatrix:new g.A,stepSize:0,pickColor:new u.A},this._shapeDefinesOld={},this._uniformMap={};const t=this._uniforms,n=this._uniformMap;for(const e in t)t.hasOwnProperty(e)&&(n[`u_${e}`]=function(){return t[e]});const i=this._provider;this._completeLoad=function(e,t){},this._readyPromise=async function(e,t){const n=new Promise((function(t){e._completeLoad=function(e,n){n.afterRender.push((function(){return e._ready=!0,t(e),!0}))}}));(0,h.A)(t._readyPromise)&&!t._ready&&await t._readyPromise;const{shape:i,minBounds:o=S.A.getMinBounds(i),maxBounds:r=S.A.getMaxBounds(i)}=t;e.minBounds=o,e.maxBounds=r,e.minClippingBounds=S.A.getMinBounds(i),e.maxClippingBounds=S.A.getMaxBounds(i),H(e,t);const s=S.A.getShapeConstructor(i);return e._shape=new s,e._shapeVisible=G(e,e._shape,t),n}(this,i)}Object.defineProperties(I.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return(0,A.A)("VoxelPrimitive.readyPromise","VoxelPrimitive.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Wait for VoxelPrimitive.ready to return true instead."),this._readyPromise}},provider:{get:function(){return this._provider}},boundingSphere:{get:function(){return this._shape.boundingSphere}},orientedBoundingBox:{get:function(){return this.shape.orientedBoundingBox}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){c.A.typeOf.object("modelMatrix",e),this._modelMatrix=g.A.clone(e,this._modelMatrix)}},shape:{get:function(){return this._provider.shape}},dimensions:{get:function(){return this._provider.dimensions}},minimumValues:{get:function(){return this._provider.minimumValues}},maximumValues:{get:function(){return this._provider.maximumValues}},show:{get:function(){return!this._disableRender},set:function(e){c.A.typeOf.bool("show",e),this._disableRender=!e}},disableUpdate:{get:function(){return this._disableUpdate},set:function(e){c.A.typeOf.bool("disableUpdate",e),this._disableUpdate=e}},debugDraw:{get:function(){return this._debugDraw},set:function(e){c.A.typeOf.bool("debugDraw",e),this._debugDraw=e}},depthTest:{get:function(){return this._depthTest},set:function(e){c.A.typeOf.bool("depthTest",e),this._depthTest!==e&&(this._depthTest=e,this._shaderDirty=!0)}},jitter:{get:function(){return this._jitter},set:function(e){c.A.typeOf.bool("jitter",e),this._jitter!==e&&(this._jitter=e,this._shaderDirty=!0)}},nearestSampling:{get:function(){return this._nearestSampling},set:function(e){c.A.typeOf.bool("nearestSampling",e),this._nearestSampling!==e&&(this._nearestSampling=e,this._shaderDirty=!0)}},levelBlendFactor:{get:function(){return this._levelBlendFactor},set:function(e){c.A.typeOf.number("levelBlendFactor",e),this._levelBlendFactor=a.A.clamp(e,0,1)}},screenSpaceError:{get:function(){return this._screenSpaceError},set:function(e){c.A.typeOf.number("screenSpaceError",e),this._screenSpaceError=e}},stepSize:{get:function(){return this._stepSizeMultiplier},set:function(e){c.A.typeOf.number("stepSize",e),this._stepSizeMultiplier=e}},minBounds:{get:function(){return this._minBounds},set:function(e){c.A.defined("minBounds",e),this._minBounds=r.A.clone(e,this._minBounds)}},maxBounds:{get:function(){return this._maxBounds},set:function(e){c.A.defined("maxBounds",e),this._maxBounds=r.A.clone(e,this._maxBounds)}},minClippingBounds:{get:function(){return this._minClippingBounds},set:function(e){c.A.defined("minClippingBounds",e),this._minClippingBounds=r.A.clone(e,this._minClippingBounds)}},maxClippingBounds:{get:function(){return this._maxClippingBounds},set:function(e){c.A.defined("maxClippingBounds",e),this._maxClippingBounds=r.A.clone(e,this._maxClippingBounds)}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){b.A.setOwner(e,this,"_clippingPlanes")}},customShader:{get:function(){return this._customShader},set:function(e){if(this._customShader!==e){const t=this._uniformMap,n=this._customShader.uniformMap;for(const e in n)n.hasOwnProperty(e)&&delete t[e];(0,h.A)(e)?this._customShader=e:this._customShader=I.DefaultCustomShader,this._shaderDirty=!0}}},customShaderCompilationEvent:{get:function(){return this._customShaderCompilationEvent}}});const P=new r.A,D=new s.A,O=new s.A,L=new r.A,N=new r.A,M=new _.A,R=new _.A,F=new g.A,B=new g.A,U=new g.A,k=g.A.fromRotationTranslation(_.A.fromUniformScale(.5,new _.A),new r.A(.5,.5,.5),new g.A),V=g.A.fromRotationTranslation(_.A.fromUniformScale(2,new _.A),new r.A(-1,-1,-1),new g.A);function H(e,t){const n=(0,d.A)(t.shapeTransform,g.A.IDENTITY),i=(0,d.A)(t.globalTransform,g.A.IDENTITY);return g.A.multiplyTransformation(i,e._modelMatrix,e._compoundModelMatrix),g.A.multiplyTransformation(e._compoundModelMatrix,n,e._compoundModelMatrix),z(e,"_compoundModelMatrix","_compoundModelMatrixOld")+z(e,"_minBounds","_minBoundsOld")+z(e,"_maxBounds","_maxBoundsOld")+z(e,"_minClippingBounds","_minClippingBoundsOld")+z(e,"_maxClippingBounds","_maxClippingBoundsOld")>0}function z(e,t,n){const i=e[t],o=e[n],r=!i.equals(o);return r&&i.clone(o),r?1:0}function G(e,t,n){if(!t.update(e._compoundModelMatrix,e.minBounds,e.maxBounds,e.minClippingBounds,e.maxClippingBounds))return!1;const i=t.shapeTransform,o=g.A.inverse(i,F),s=g.A.getRotation(i,M),a=g.A.getScale(i,L),c=r.A.maximumComponent(a),l=r.A.divideByScalar(a,c,N),u=_.A.multiplyByScale(s,l,R),d=n.dimensions;return e._stepSizeUv=t.computeApproximateStepSize(d),e._transformPositionWorldToUv=g.A.multiplyTransformation(k,o,e._transformPositionWorldToUv),e._transformPositionUvToWorld=g.A.multiplyTransformation(i,V,e._transformPositionUvToWorld),e._transformDirectionWorldToLocal=g.A.getMatrix3(o,e._transformDirectionWorldToLocal),e._transformNormalLocalToWorld=_.A.inverseTranspose(u,e._transformNormalLocalToWorld),!0}I.prototype.update=function(e){const t=this._provider;if(this._customShader.update(e),(0,h.A)(t._ready)&&!t._ready||!(0,h.A)(this._shape))return;const n=e.context;if(!this._ready)return function(e,t,n){const i=e._uniforms;e._pickId=n.createPickId({primitive:e}),i.pickColor=u.A.clone(e._pickId.color,i.pickColor);const{shaderDefines:s,shaderUniforms:a}=e._shape;e._shapeDefinesOld=(0,l.A)(s,!0);const c=e._uniformMap;for(const e in a)if(a.hasOwnProperty(e)){const t=`u_${e}`;(0,h.A)(c[t])&&(0,y.A)(`VoxelPrimitive: Uniform name "${t}" is already defined`),c[t]=function(){return a[e]}}i.dimensions=r.A.clone(t.dimensions,i.dimensions),e._paddingBefore=r.A.clone((0,d.A)(t.paddingBefore,r.A.ZERO),e._paddingBefore),i.paddingBefore=r.A.clone(e._paddingBefore,i.paddingBefore),e._paddingAfter=r.A.clone((0,d.A)(t.paddingAfter,r.A.ZERO),e._paddingBefore),i.paddingAfter=r.A.clone(e._paddingAfter,i.paddingAfter),e._traversal=function(e,t,n){const i=r.A.clone(t.dimensions,P);r.A.add(i,e._paddingBefore,i),r.A.add(i,e._paddingAfter,i);const o=t.maximumTileCount,s=(0,h.A)(o)?C.A.getApproximateTextureMemoryByteLength(o,i,t.types,t.componentTypes):void 0,a=(0,d.A)(t.keyframeCount,1);return new C.A(e,n,i,t.types,t.componentTypes,a,s)}(e,t,n),function(e,t){t.octreeInternalNodeTexture=e.internalNodeTexture,t.octreeInternalNodeTexelSizeUv=o.A.clone(e.internalNodeTexelSizeUv,t.octreeInternalNodeTexelSizeUv),t.octreeInternalNodeTilesPerRow=e.internalNodeTilesPerRow;const n=e.megatextures,i=n[0],r=n.length;t.megatextureTextures=new Array(r);for(let e=0;e<r;e++)t.megatextureTextures[e]=n[e].texture;t.megatextureSliceDimensions=o.A.clone(i.sliceCountPerRegion,t.megatextureSliceDimensions),t.megatextureTileDimensions=o.A.clone(i.regionCountPerMegatexture,t.megatextureTileDimensions),t.megatextureVoxelSizeUv=o.A.clone(i.voxelSizeUv,t.megatextureVoxelSizeUv),t.megatextureSliceSizeUv=o.A.clone(i.sliceSizeUv,t.megatextureSliceSizeUv),t.megatextureTileSizeUv=o.A.clone(i.regionSizeUv,t.megatextureTileSizeUv)}(e._traversal,i)}(this,t,n),void this._completeLoad(this,e);const c=H(this,t),A=this._shape;if(c&&(this._shapeVisible=G(this,A,t),function(e,t){const n=t.shaderDefines,i=Object.keys(n).some((t=>n[t]!==e._shapeDefinesOld[t]));return i&&(e._shapeDefinesOld=(0,l.A)(n,!0)),i}(this,A)&&(this._shaderDirty=!0)),!this._shapeVisible)return;const f=function(e,t){if(!(0,h.A)(e)||!(0,h.A)(t))return 0;let n,i=t.currentTime,o=e.indexOf(i);o>=0?n=e.get(o):(o=~o,o===e.length?(o=e.length-1,n=e.get(o),i=n.stop):(n=e.get(o),i=n.start));const r=m.A.secondsDifference(n.stop,n.start);return o+m.A.secondsDifference(i,n.start)/r}(t.timeIntervalCollection,this._clock),p=this._traversal,b=p._sampleCount;if(p.update(e,f,c,this._disableUpdate),b!==p._sampleCount&&(this._shaderDirty=!0),!p.isRenderable(p.rootNode))return;if(this._debugDraw&&function(e,t){const n=e._traversal,i=e._debugPolylines;function o(e,t,n,o){i.add({positions:[e,t],width:o,material:v.A.fromType("Color",{color:n})})}function s(e,t,n){const i=e.computeCorners();o(i[0],i[1],t,n),o(i[2],i[3],t,n),o(i[4],i[5],t,n),o(i[6],i[7],t,n),o(i[0],i[2],t,n),o(i[4],i[6],t,n),o(i[1],i[3],t,n),o(i[5],i[7],t,n),o(i[0],i[4],t,n),o(i[2],i[6],t,n),o(i[1],i[5],t,n),o(i[3],i[7],t,n)}i.removeAll(),s(e._shape.orientedBoundingBox,u.A.WHITE,5),function e(t){if(!n.isRenderable(t))return;const i=t.level,o=Math.max(1,5/Math.pow(2,i)),r=[u.A.RED,u.A.LIME,u.A.BLUE][i%3];if(s(t.orientedBoundingBox,r,o),(0,h.A)(t.children))for(let n=0;n<8;n++)e(t.children[n])}(n.rootNode);o(r.A.ZERO,X,u.A.RED,10),o(r.A.ZERO,J,u.A.LIME,10),o(r.A.ZERO,Q,u.A.BLUE,10),i.update(t)}(this,e),this._disableRender)return;this._useLogDepth!==e.useLogDepth&&(this._useLogDepth=e.useLogDepth,this._shaderDirty=!0);const T=function(e,t){const n=e.clippingPlanes;if(!(0,h.A)(n))return!1;n.update(t);const{clippingPlanesState:i,enabled:o}=n;if(o){const t=e._uniforms;t.clippingPlanesTexture=n.texture,t.clippingPlanesMatrix=g.A.transpose(g.A.multiplyTransformation(g.A.inverse(n.modelMatrix,t.clippingPlanesMatrix),e._transformPositionUvToWorld,t.clippingPlanesMatrix),t.clippingPlanesMatrix)}return(e._clippingPlanesState!==i||e._clippingPlanesEnabled!==o)&&(e._clippingPlanesState=i,e._clippingPlanesEnabled=o,!0)}(this,e);T&&(this._shaderDirty=!0);const w=p.leafNodeTexture,E=this._uniforms;(0,h.A)(w)&&(E.octreeLeafNodeTexture=p.leafNodeTexture,E.octreeLeafNodeTexelSizeUv=o.A.clone(p.leafNodeTexelSizeUv,E.octreeLeafNodeTexelSizeUv),E.octreeLeafNodeTilesPerRow=p.leafNodeTilesPerRow),this._shaderDirty&&((0,i.A)(this,n),this._shaderDirty=!1);const S=n.uniformState.viewProjection,x=function(e,t,n){const i=g.A.fromRotationTranslation(e.halfAxes,e.center,B),o=g.A.multiply(t,i,U);let r,c=+Number.MAX_VALUE,l=-Number.MAX_VALUE,u=+Number.MAX_VALUE,d=-Number.MAX_VALUE;const h=q,A=j.length;for(r=0;r<A;r++)g.A.multiplyByVector(o,j[r],h[r]);for(r=0;r<A;r++){const e=h[r];if(e.z>=-e.w){const t=e.x/e.w,n=e.y/e.w;c=Math.min(c,t),l=Math.max(l,t),u=Math.min(u,n),d=Math.max(d,n)}else for(let t=0;t<3;t++){const n=h[W[3*r+t]];if(n.z>=-n.w){const t=e.z+e.w,i=t/(t-(n.z+n.w)),o=s.A.lerp(e,n,i,D),r=o.x/o.w,a=o.y/o.w;c=Math.min(c,r),l=Math.max(l,r),u=Math.min(u,a),d=Math.max(d,a)}}}return c=a.A.clamp(c,-1,1),u=a.A.clamp(u,-1,1),l=a.A.clamp(l,-1,1),d=a.A.clamp(d,-1,1),s.A.fromElements(c,u,l,d,n)}(A.orientedBoundingBox,S,O);if(1===x.x||1===x.y||-1===x.z||-1===x.w)return;E.ndcSpaceAxisAlignedBoundingBox=s.A.clone(x,E.ndcSpaceAxisAlignedBoundingBox);const I=n.uniformState.inverseView;E.transformPositionViewToUv=g.A.multiplyTransformation(this._transformPositionWorldToUv,I,E.transformPositionViewToUv);const L=n.uniformState.view;E.transformPositionUvToView=g.A.multiplyTransformation(L,this._transformPositionUvToWorld,E.transformPositionUvToView);const N=n.uniformState.inverseViewRotation;E.transformDirectionViewToLocal=_.A.multiply(this._transformDirectionWorldToLocal,N,E.transformDirectionViewToLocal),E.transformNormalLocalToWorld=_.A.clone(this._transformNormalLocalToWorld,E.transformNormalLocalToWorld);const M=e.camera.positionWC;E.cameraPositionUv=g.A.multiplyByPoint(this._transformPositionWorldToUv,M,E.cameraPositionUv),E.stepSize=this._stepSizeUv*this._stepSizeMultiplier;const R=e.passes.pick?this._drawCommandPick:this._drawCommand;R.boundingVolume=A.boundingSphere,e.commandList.push(R)},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){const e=this._drawCommand;(0,h.A)(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy());const t=this._drawCommandPick;return(0,h.A)(t)&&(t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()),this._pickId=this._pickId&&this._pickId.destroy(),this._traversal=this._traversal&&this._traversal.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,f.A)(this)};const j=new Array(new s.A(-1,-1,-1,1),new s.A(1,-1,-1,1),new s.A(-1,1,-1,1),new s.A(1,1,-1,1),new s.A(-1,-1,1,1),new s.A(1,-1,1,1),new s.A(-1,1,1,1),new s.A(1,1,1,1)),W=new Array(1,2,4,0,3,5,0,3,6,1,2,7,0,5,6,1,4,7,2,4,7,3,5,6),q=new Array(new s.A,new s.A,new s.A,new s.A,new s.A,new s.A,new s.A,new s.A),Y=3e7,X=new r.A(Y,0,0),J=new r.A(0,Y,0),Q=new r.A(0,0,Y);function $(){this.ready=!0,this.shape=S.A.BOX,this.dimensions=new r.A(1,1,1),this.names=["data"],this.types=[w.A.SCALAR],this.componentTypes=[T.A.FLOAT32],this.maximumTileCount=1}I.DefaultCustomShader=new x.A({fragmentShaderText:"void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)\n{\n    material.diffuse = vec3(1.0);\n    material.alpha = 1.0;\n}"}),$.prototype.requestData=function(e){if(!(((0,h.A)(e)?(0,d.A)(e.tileLevel,0):0)>=1))return Promise.resolve([new Float32Array(1)])},I.DefaultProvider=new $;const K=I},618291:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(267980),o=n(430346),r=n(491446),s=n(469635),a=n(624512),c=n(791533),l=n(305725),u=n(418816),d=n(189670),h=n(138338),A=n(186930),f=n(864393),p=n(485326),m=n(741641),_=n(774390),g=n(248877),y=n(945042),b=n(940702),v=n(195987);const T=function(e){const t=new s.A;this.shaderBuilder=t;const n=e._customShader,T=(0,o.A)(e._uniformMap,n.uniformMap);e._uniformMap=T;const w=n.uniforms;for(const e in w)if(w.hasOwnProperty(e)){const n=w[e];t.addUniform(n.type,e,a.A.FRAGMENT)}t.addUniform("sampler2D","u_megatextureTextures[METADATA_COUNT]",a.A.FRAGMENT),this.uniformMap=T;const E=e._clippingPlanes,S=(0,r.A)(E)&&E.enabled?E.length:0;this.clippingPlanes=E,this.clippingPlanesLength=S,t.addVertexLines([l.A]),t.addFragmentLines([n.fragmentShaderText,"#line 0",b.A,u.A,v.A]),S>0&&(t.addDefine("CLIPPING_PLANES",void 0,a.A.FRAGMENT),t.addDefine("CLIPPING_PLANES_COUNT",S,a.A.FRAGMENT),E.unionClippingRegions&&t.addDefine("CLIPPING_PLANES_UNION",void 0,a.A.FRAGMENT),t.addFragmentLines([h.A])),e._depthTest&&(t.addDefine("DEPTH_TEST",void 0,a.A.FRAGMENT),t.addFragmentLines([d.A]));const C=e._provider.shape;"BOX"===C?(t.addDefine("SHAPE_BOX",void 0,a.A.FRAGMENT),t.addFragmentLines([_.A,A.A,m.A])):"CYLINDER"===C?t.addFragmentLines([f.A,m.A,g.A]):"ELLIPSOID"===C&&t.addFragmentLines([p.A,m.A,y.A]),t.addFragmentLines([c.A]);const x=e._shape,I=x.shaderDefines;for(const e in I)if(I.hasOwnProperty(e)){let n=I[e];(0,r.A)(n)&&(n=!0===n?void 0:n,t.addDefine(e,n,a.A.FRAGMENT))}let P=x.shaderMaximumIntersectionsLength;S>0&&(t.addDefine("CLIPPING_PLANES_INTERSECTION_INDEX",P,a.A.FRAGMENT),1===S?P+=1:E.unionClippingRegions?P+=2:P+=1),e._depthTest&&(t.addDefine("DEPTH_INTERSECTION_INDEX",P,a.A.FRAGMENT),P+=1),t.addDefine("INTERSECTION_COUNT",P,a.A.FRAGMENT),i.A.equals(e.paddingBefore,i.A.ZERO)&&i.A.equals(e.paddingAfter,i.A.ZERO)||t.addDefine("PADDING",void 0,a.A.FRAGMENT),e._useLogDepth&&t.addDefine("LOG_DEPTH_READ_ONLY",void 0,a.A.FRAGMENT),e._jitter&&t.addDefine("JITTER",void 0,a.A.FRAGMENT),e._nearestSampling&&t.addDefine("NEAREST_SAMPLING",void 0,a.A.FRAGMENT);const D=e._traversal;t.addDefine("SAMPLE_COUNT",`${D._sampleCount}`,a.A.FRAGMENT)}},304431:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(605971),o=n(204758),r=n(823345),s=n(2930);const a={BOX:"BOX",ELLIPSOID:"ELLIPSOID",CYLINDER:"CYLINDER",getMinBounds:function(e){switch(e){case a.BOX:return o.A.DefaultMinBounds;case a.ELLIPSOID:return s.A.DefaultMinBounds;case a.CYLINDER:return r.A.DefaultMinBounds;default:throw new i.A(`Invalid shape type ${e}`)}},getMaxBounds:function(e){switch(e){case a.BOX:return o.A.DefaultMaxBounds;case a.ELLIPSOID:return s.A.DefaultMaxBounds;case a.CYLINDER:return r.A.DefaultMaxBounds;default:throw new i.A(`Invalid shape type ${e}`)}},getShapeConstructor:function(e){switch(e){case a.BOX:return o.A;case a.ELLIPSOID:return s.A;case a.CYLINDER:return r.A;default:throw new i.A(`Invalid shape type ${e}`)}}},c=Object.freeze(a)},307452:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(434067),o=n(367817),r=n(400793),s=n(491446),a=n(677354),c=n(634061),l=n(230259),u=n(301866),d=n(374607),h=n(866109),A=n(276904),f=n(57775),p=n(654799),m=n(533872),_=n(616e3),g=n(957233),y=n(78078);function b(e,t,n,o,r,s,a){this._primitive=e;const l=o.length;this.megatextures=new Array(l);for(let e=0;e<l;e++){const i=o[e],s=d.A.getComponentCount(i),c=r[e];this.megatextures[e]=new h.A(t,n,s,c,a)}const b=this.megatextures[0].maximumTileCount;this._simultaneousRequestCount=0,this._debugPrint=!1,this._frameNumber=0;const T=e._shape;this.rootNode=new m.A(0,0,0,0,void 0,T,n),this._priorityQueue=new c.A({maximumLength:b,comparator:u.A.priorityComparator}),this._highPriorityKeyframeNodes=new Array(b),this._keyframeNodesInMegatexture=new Array(b),this._keyframeCount=s,this._sampleCount=void 0,this._keyframeLocation=0,this._binaryTreeKeyframeWeighting=new Array(s);const w=this._binaryTreeKeyframeWeighting;w[0]=0,w[s-1]=0,v(w,1,s-2,0);const E=Math.floor(227.55555555555554),S=Math.ceil(b/E);this.internalNodeTexture=new _.A({context:t,pixelFormat:A.A.RGBA,pixelDatatype:f.A.UNSIGNED_BYTE,flipY:!1,width:2048,height:S,sampler:new p.A({minificationFilter:y.A.NEAREST,magnificationFilter:g.A.NEAREST})}),this.internalNodeTilesPerRow=E,this.internalNodeTexelSizeUv=new i.A(.00048828125,1/S),this.leafNodeTexture=void 0,this.leafNodeTilesPerRow=void 0,this.leafNodeTexelSizeUv=new i.A}function v(e,t,n,i){if(t>n)return;const o=Math.floor((t+n)/2);e[o]=i,v(e,t,o-1,i+1),v(e,o+1,n,i+1)}function T(e,t){const n=e._primitive,i=n._shape,o=n._provider.dimensions;if(t.computeBoundingVolumes(i,o),(0,s.A)(t.children))for(let n=0;n<8;n++)T(e,t.children[n])}function w(e,t){if(e._simultaneousRequestCount>=b.simultaneousRequestCountMaximum)return;const n=e._primitive,i=n._provider,{keyframe:o,spatialNode:r}=t,a=i.requestData({tileLevel:r.level,tileX:r.x,tileY:r.y,tileZ:r.z,keyframe:o});(0,s.A)(a)?(e._simultaneousRequestCount++,t.state=u.A.LoadState.RECEIVING,a.then((function(i){e._simultaneousRequestCount--;const o=n._provider.types.length;if((0,s.A)(i))if(i===u.A.LoadState.FAILED)t.state=u.A.LoadState.FAILED;else if(Array.isArray(i)&&i.length===o){const n=e.megatextures;for(let e=0;e<o;e++){const{voxelCountPerTile:o,channelCount:r}=n[e],{x:s,y:a,z:c}=o,l=s*a*c,d=i[e],h=l*r;if(d.length!==h){t.state=u.A.LoadState.FAILED;break}t.metadatas[e]=d,t.state=u.A.LoadState.RECEIVED}}else t.state=u.A.LoadState.FAILED;else t.state=u.A.LoadState.UNAVAILABLE})).catch((function(){e._simultaneousRequestCount--,t.state=u.A.LoadState.FAILED}))):t.state=u.A.LoadState.FAILED}b.simultaneousRequestCountMaximum=50,b.prototype.update=function(e,t,n,a){const c=this._primitive,d=e.context,h=this.megatextures[0].maximumTileCount,m=this._keyframeCount,b=c._levelBlendFactor,v=(b>0?2:1)*(m>1?2:1);this._sampleCount=v;const S=v>=2;if(S&&!(0,s.A)(this.leafNodeTexture)){const e=2,t=1024,n=Math.floor(t/e),o=Math.ceil(h/n);this.leafNodeTexture=new _.A({context:d,pixelFormat:A.A.RGBA,pixelDatatype:f.A.UNSIGNED_BYTE,flipY:!1,width:t,height:o,sampler:new p.A({minificationFilter:y.A.NEAREST,magnificationFilter:g.A.NEAREST})}),this.leafNodeTexelSizeUv=i.A.fromElements(1/t,1/o,this.leafNodeTexelSizeUv),this.leafNodeTilesPerRow=n}else!S&&(0,s.A)(this.leafNodeTexture)&&(this.leafNodeTexture=this.leafNodeTexture.destroy());if(this._keyframeLocation=o.A.clamp(t,0,m-1),n&&T(this,this.rootNode),a)return;this._frameNumber=e.frameNumber;const C=(0,l.A)();!function(e,t){const n=e._frameNumber,i=e._primitive,a=i._shape,{dimensions:c}=i,l=i.screenSpaceError,d=e._priorityQueue,h=e._keyframeLocation,A=e._keyframeCount,f=e.rootNode,{camera:p,context:m,pixelRatio:_}=t,{positionWC:g,frustum:y}=p,b=m.drawingBufferHeight/_/y.sseDenominator;function v(t,n,i){const r=Math.min(Math.abs(n-t),Math.abs(n-i)),s=Math.max(t,A-i-1,1),a=Math.pow(1-r/s,4),c=Math.exp(-e._binaryTreeKeyframeWeighting[n]);return o.A.lerp(c,a,.15+.85*a)}d.reset(),function e(i,f){if(i.computeScreenSpaceError(g,b),(f=i.visibility(t,f))===r.A.MASK_OUTSIDE)return;i.visitedFrameNumber=n;const p=o.A.clamp(Math.floor(h),0,A-2),m=p+1;if(1===A)i.createKeyframeNode(0);else if(i.keyframeNodes.length!==A)for(let e=0;e<A;e++)i.createKeyframeNode(e);const _=(y=i.screenSpaceError)/(1+y);var y;let T=!1;const w=i.keyframeNodes;for(let e=0;e<w.length;e++){const t=w[e];t.priority=10*_+v(p,t.keyframe,m),t.state!==u.A.LoadState.UNAVAILABLE&&t.state!==u.A.LoadState.FAILED&&t.priority!==-Number.MAX_VALUE&&d.insert(t),t.state===u.A.LoadState.LOADED&&(T=!0)}if(i.screenSpaceError<l||!T)i.children=void 0;else{(0,s.A)(i.children)||i.constructChildNodes(a,c);for(let t=0;t<8;t++)e(i.children[t],f)}}(f,r.A.MASK_INDETERMINATE);const T=e._highPriorityKeyframeNodes;let E,S=0;for(;d.length>0;)E=d.removeMaximum(),E.highPriorityFrameNumber=n,T[S]=E,S++;const C=e._keyframeNodesInMegatexture,x=e.megatextures[0],I=x.occupiedCount;C.length=I,C.sort((function(e,t){return e.highPriorityFrameNumber===t.highPriorityFrameNumber?t.priority-e.priority:t.highPriorityFrameNumber-e.highPriorityFrameNumber}));let P=0,D=0;for(let t=0;t<S;t++)if(E=T[t],E.state!==u.A.LoadState.LOADED&&void 0!==E.spatialNode&&(E.state===u.A.LoadState.UNLOADED&&w(e,E),E.state===u.A.LoadState.RECEIVED)){let t=0;if(x.isFull()){t=I-1-P,P++;const n=C[t];n.spatialNode.destroyKeyframeNode(n,e.megatextures)}else t=I+D,D++;E.spatialNode.addKeyframeNodeToMegatextures(E,e.megatextures),C[t]=E}}(this,e);const x=(0,l.A)();!function(e,t,n){const i=e._primitive._screenSpaceError,r=e._keyframeLocation,a=e._frameNumber,c=t>=2;let l=0,u=0;const d=[],h=[];const f=e.rootNode;f.computeSurroundingRenderableKeyframeNodes(r),f.isRenderable(a)&&function e(t,A,f,p,m){let _=!1;if((0,s.A)(t.children))for(let e=0;e<8;e++){const n=t.children[e];n.computeSurroundingRenderableKeyframeNodes(r),n.isRenderable(a)&&(_=!0)}if(_){d[m]=E.INTERNAL<<16|A,d[f]=p,l++,m=9*(p=A)+1;for(let n=0;n<8;n++)e(t.children[n],A=l,f=9*A+0,p,m+n)}else{if(c){const e=5*u,r=t.renderableKeyframeNodePrevious,a=t.level-r.spatialNode.level,c=r.spatialNode.parent,l=(0,s.A)(c)?c.renderableKeyframeNodePrevious:r,A=function(e,t,n){if(void 0===e.parent)return 0;const i=e.screenSpaceError,r=((t-i)/(e.parent.screenSpaceError-i)+n-1)/n;return o.A.clamp(r,0,1)}(t,i,n),f=a,p=1,_=r.megatextureIndex,g=l.megatextureIndex;h[e+0]=A,h[e+1]=f,h[e+2]=p,h[e+3]=_,h[e+4]=g,d[m]=E.LEAF<<16|u}else{const e=t.renderableKeyframeNodePrevious,n=0==t.level-e.spatialNode.level?E.LEAF:E.PACKED_LEAF_FROM_PARENT;d[m]=n<<16|e.megatextureIndex}u++}}(f,0,0,0,0),function(e,t,n,i){const o=A.A.componentsLength(i.pixelFormat),r=Math.ceil(e.length/9),s=Math.max(1,9*Math.min(r,n)),a=Math.max(1,Math.ceil(r/n)),c=new Uint8Array(s*a*o);for(let t=0;t<e.length;t++){const n=e[t],i=t*o;for(let e=0;e<o;e++)c[i+e]=n>>>8*e&255}const l={source:{arrayBufferView:c,width:s,height:a},xOffset:0,yOffset:0};i.copyFrom(l)}(d,0,e.internalNodeTilesPerRow,e.internalNodeTexture),c&&function(e,t,n,i){const r=A.A.componentsLength(i.pixelFormat),s=Math.ceil(e.length/5),a=Math.max(1,2*Math.min(s,n)),c=Math.max(1,Math.ceil(s/n)),l=new Uint8Array(a*c*r);for(let t=0;t<s;t++){const n=e[5*t+0],i=e[5*t+1],r=e[5*t+2],s=e[5*t+3],a=e[5*t+4],c=o.A.clamp(Math.floor(65536*n),0,65535);l[8*t+0]=c>>>0&255,l[8*t+1]=c>>>8&255,l[8*t+2]=255&i,l[8*t+3]=255&r,l[8*t+4]=s>>>0&255,l[8*t+5]=s>>>8&255,l[8*t+6]=a>>>0&255,l[8*t+7]=a>>>8&255}const u={source:{arrayBufferView:l,width:a,height:c},xOffset:0,yOffset:0};i.copyFrom(u)}(h,0,e.leafNodeTilesPerRow,e.leafNodeTexture)}(this,v,b);const I=(0,l.A)();this._debugPrint&&function(e,t,n,i){const o=e._keyframeCount,r=e.rootNode,a=Object.keys(u.A.LoadState).length,c=new Array(a),l=new Array(a);let d=0;for(let e=0;e<a;e++){const t=new Array(o);c[e]=t;for(let e=0;e<o;e++)t[e]=0;l[e]=0}!function e(t){const n=t.keyframeNodes;for(let e=0;e<n.length;e++){const t=n[e],i=t.keyframe,o=t.state;c[o][i]+=1,l[o]+=1,d++}if((0,s.A)(t.children))for(let n=0;n<8;n++)e(t.children[n])}(r);const h=`KEYFRAMES: ${c[u.A.LoadState.LOADED]}`,A=`UNLOADED: ${l[u.A.LoadState.UNLOADED]} | RECEIVING: ${l[u.A.LoadState.RECEIVING]} | RECEIVED: ${l[u.A.LoadState.RECEIVED]} | LOADED: ${l[u.A.LoadState.LOADED]} | FAILED: ${l[u.A.LoadState.FAILED]} | UNAVAILABLE: ${l[u.A.LoadState.UNAVAILABLE]} | TOTAL: ${d}`,f=`LOAD: ${Math.round(100*t)/100} | OCT: ${Math.round(100*n)/100} | ALL: ${Math.round(100*i)/100}`;console.log(`${h} || ${A} || ${f}`)}(this,x-C,I-x,I-C)},b.prototype.isRenderable=function(e){return e.isRenderable(this._frameNumber)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){const e=this.megatextures,t=e.length;for(let n=0;n<t;n++)e[n]=e[n]&&e[n].destroy();return this.internalNodeTexture=this.internalNodeTexture&&this.internalNodeTexture.destroy(),this.leafNodeTexture=this.leafNodeTexture&&this.leafNodeTexture.destroy(),(0,a.A)(this)};const E={INTERNAL:0,LEAF:1,PACKED_LEAF_FROM_PARENT:2};b.getApproximateTextureMemoryByteLength=function(e,t,n,i){let o=0;const r=n.length;for(let s=0;s<r;s++){const r=n[s],a=i[s],c=d.A.getComponentCount(r);o+=h.A.getApproximateTextureMemoryByteLength(e,t,c,a)}return o};const S=b},762270:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(419061),o=n(491446),r=n(786101),s=n(605971),a=n(182348),c=n(744603),l=n(414305),u=n(463823),d=n(99520),h=n(66458);const A=[3034,3035,3042,3043,3044],f=[4471,4559];function p(e){if(e=(0,i.A)(e,i.A.EMPTY_OBJECT),!(0,o.A)(e.url))throw new s.A("options.url is required.");if(!(0,o.A)(e.layers))throw new s.A("options.layers is required.");if((0,o.A)(e.times)&&!(0,o.A)(e.clock))throw new s.A("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=(0,i.A)(e.getFeatureInfoUrl,e.url);const t=c.A.createIfNeeded(e.url),n=c.A.createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(p.DefaultParameters,!0),n.setQueryParameters(p.GetFeatureInfoDefaultParameters,!0),(0,o.A)(e.parameters)&&t.setQueryParameters(_(e.parameters)),(0,o.A)(e.getFeatureInfoParameters)&&n.setQueryParameters(_(e.getFeatureInfoParameters));const r=this;this._reload=void 0,(0,o.A)(e.times)&&(this._timeDynamicImagery=new d.A({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return m(r,e,t,n,i,o)},reloadFunction:function(){(0,o.A)(r._reload)&&r._reload()}}));const u={};if(u.layers=e.layers,u.bbox="{westProjected},{southProjected},{eastProjected},{northProjected}",u.width="{width}",u.height="{height}",parseFloat(t.queryParameters.version)>=1.3){u.crs=(0,i.A)(e.crs,e.tilingScheme&&e.tilingScheme.projection instanceof l.A?"EPSG:3857":"CRS:84");const t=u.crs.split(":");if("EPSG"===t[0]&&2===t.length){const e=Number(t[1]);(e>=4e3&&e<5e3&&!f.includes(e)||A.includes(e))&&(u.bbox="{southProjected},{westProjected},{northProjected},{eastProjected}")}}else u.srs=(0,i.A)(e.srs,e.tilingScheme&&e.tilingScheme.projection instanceof l.A?"EPSG:3857":"EPSG:4326");t.setQueryParameters(u,!0),n.setQueryParameters(u,!0);const g={query_layers:e.layers,info_format:"{format}"};parseFloat(n.queryParameters.version)>=1.3?(g.i="{i}",g.j="{j}"):(g.x="{i}",g.y="{j}"),n.setQueryParameters(g,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new h.A({url:t,pickFeaturesUrl:n,tilingScheme:(0,i.A)(e.tilingScheme,new a.A({ellipsoid:e.ellipsoid})),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:(0,i.A)(e.getFeatureInfoFormats,p.DefaultGetFeatureInfoFormats),enablePickFeatures:e.enablePickFeatures}),this._ready=!0,this._readyPromise=Promise.resolve(!0)}function m(e,t,n,i,r,s){const a=(0,o.A)(s)?s.data:void 0,c=e._tileProvider;return(0,o.A)(a)&&c._resource.setQueryParameters(a),c.requestImage(t,n,i,r)}function _(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}Object.defineProperties(p.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},ready:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.ready","WebMapServiceImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._tileProvider.ready}},readyPromise:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.readyPromise","WebMapServiceImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._tileProvider.readyPromise}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}},defaultAlpha:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultAlpha","WebMapServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultAlpha","WebMapServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultNightAlpha","WebMapServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultNightAlpha","WebMapServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultDayAlpha","WebMapServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultDayAlpha","WebMapServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultBrightness","WebMapServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultBrightness","WebMapServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultContrast","WebMapServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultContrast","WebMapServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultHue","WebMapServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultHue","WebMapServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultSaturation","WebMapServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultSaturation","WebMapServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultGamma","WebMapServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultGamma","WebMapServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultMinificationFilter","WebMapServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultMinificationFilter","WebMapServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,r.A)("WebMapServiceImageryProvider.defaultMagnificationFilter","WebMapServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,r.A)("WebMapServiceImageryProvider.defaultMagnificationFilter","WebMapServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),p.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)},p.prototype.requestImage=function(e,t,n,i){let r;const s=this._timeDynamicImagery;let a;return(0,o.A)(s)&&(a=s.currentInterval,r=s.getFromCache(e,t,n,i)),(0,o.A)(r)||(r=m(this,e,t,n,i,a)),(0,o.A)(r)&&(0,o.A)(s)&&s.checkApproachingInterval(e,t,n,i),r},p.prototype.pickFeatures=function(e,t,n,i,r){const s=this._timeDynamicImagery;return function(e,t,n,i,r,s,a){const c=(0,o.A)(a)?a.data:void 0,l=e._tileProvider;return(0,o.A)(c)&&l._pickFeaturesResource.setQueryParameters(c),l.pickFeatures(t,n,i,r,s)}(this,e,t,n,i,r,(0,o.A)(s)?s.currentInterval:void 0)},p.DefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"}),p.GetFeatureInfoDefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"}),p.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new u.A("json","application/json")),Object.freeze(new u.A("xml","text/xml")),Object.freeze(new u.A("text","text/html"))]);const g=p},32706:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(430346),o=n(672743),r=n(419061),s=n(491446),a=n(786101),c=n(605971),l=n(955943),u=n(697422),d=n(744603),h=n(41076),A=n(553909),f=n(99520);const p=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});function m(e){if(e=(0,r.A)(e,r.A.EMPTY_OBJECT),!(0,s.A)(e.url))throw new c.A("options.url is required.");if(!(0,s.A)(e.layer))throw new c.A("options.layer is required.");if(!(0,s.A)(e.style))throw new c.A("options.style is required.");if(!(0,s.A)(e.tileMatrixSetID))throw new c.A("options.tileMatrixSetID is required.");if((0,s.A)(e.times)&&!(0,s.A)(e.clock))throw new c.A("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const t=d.A.createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,a=t.url,A=a.match(/{/g);if(!(0,s.A)(A)||1===A.length&&/{s}/.test(a))t.setQueryParameters(p),this._useKvp=!0;else{const e={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(e),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=(0,r.A)(e.format,"image/jpeg"),this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=(0,s.A)(e.tilingScheme)?e.tilingScheme:new h.A({ellipsoid:e.ellipsoid}),this._tileWidth=(0,r.A)(e.tileWidth,256),this._tileHeight=(0,r.A)(e.tileHeight,256),this._minimumLevel=(0,r.A)(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=(0,r.A)(e.rectangle,this._tilingScheme.rectangle),this._dimensions=e.dimensions;const m=this;this._reload=void 0,(0,s.A)(e.times)&&(this._timeDynamicImagery=new f.A({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return _(m,e,t,n,i,o)},reloadFunction:function(){(0,s.A)(m._reload)&&m._reload()}})),this._readyPromise=Promise.resolve(!0),this._ready=!0;const g=this._tilingScheme.positionToTileXY(u.A.southwest(this._rectangle),this._minimumLevel),y=this._tilingScheme.positionToTileXY(u.A.northeast(this._rectangle),this._minimumLevel),b=(Math.abs(y.x-g.x)+1)*(Math.abs(y.y-g.y)+1);if(b>4)throw new c.A(`The imagery provider's rectangle and minimumLevel indicate that there are ${b} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);this._errorEvent=new l.A;const v=e.credit;this._credit="string"==typeof v?new o.A(v):v,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():(0,s.A)(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(""):this._subdomains=["a","b","c"]}function _(e,t,n,o,r,a){const c=e._tileMatrixLabels,l=(0,s.A)(c)?c[o]:o.toString(),u=e._subdomains,d=e._dimensions,h=(0,s.A)(a)?a.data:void 0;let f,p;if(e._useKvp){let a={};a.tilematrix=l,a.layer=e._layer,a.style=e._style,a.tilerow=n,a.tilecol=t,a.tilematrixset=e._tileMatrixSetID,a.format=e._format,(0,s.A)(d)&&(a=(0,i.A)(a,d)),(0,s.A)(h)&&(a=(0,i.A)(a,h)),p={s:u[(t+n+o)%u.length]},f=e._resource.getDerivedResource({queryParameters:a,request:r}),f.setTemplateValues(p)}else p={TileMatrix:l,TileRow:n.toString(),TileCol:t.toString(),s:u[(t+n+o)%u.length]},f=e._resource.getDerivedResource({request:r}),f.setTemplateValues(p),(0,s.A)(d)&&f.setTemplateValues(d),(0,s.A)(h)&&f.setTemplateValues(h);return A.A.loadImage(e,f)}Object.defineProperties(m.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},ready:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.ready","WebMapTileServiceImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.readyPromise","WebMapTileServiceImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,(0,s.A)(this._reload)&&this._reload())}},defaultAlpha:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultAlpha","WebMapTileServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultAlpha","WebMapTileServiceImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultNightAlpha","WebMapTileServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultNightAlpha","WebMapTileServiceImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultDayAlpha","WebMapTileServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultDayAlpha","WebMapTileServiceImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultBrightness","WebMapTileServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultBrightness","WebMapTileServiceImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultContrast","WebMapTileServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultContrast","WebMapTileServiceImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultHue","WebMapTileServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultHue","WebMapTileServiceImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultSaturation","WebMapTileServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultSaturation","WebMapTileServiceImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultGamma","WebMapTileServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultGamma","WebMapTileServiceImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultMinificationFilter","WebMapTileServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultMinificationFilter","WebMapTileServiceImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,a.A)("WebMapTileServiceImageryProvider.defaultMagnificationFilter","WebMapTileServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,a.A)("WebMapTileServiceImageryProvider.defaultMagnificationFilter","WebMapTileServiceImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),m.prototype.getTileCredits=function(e,t,n){},m.prototype.requestImage=function(e,t,n,i){let o;const r=this._timeDynamicImagery;let a;return(0,s.A)(r)&&(a=r.currentInterval,o=r.getFromCache(e,t,n,i)),(0,s.A)(o)||(o=_(this,e,t,n,i,a)),(0,s.A)(o)&&(0,s.A)(r)&&r.checkApproachingInterval(e,t,n,i),o},m.prototype.pickFeatures=function(e,t,n,i,o){};const g=m},593054:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(491446),o=n(402330),r=n(200646),s=n(527083),a=n(796170),c=n(377496),l=n(760866),u=n(40118),d=n(624512),h=n(618291),A=n(16620);const f=function(e,t){const n=new h.A(e);(0,A.A)(n,e);const{shaderBuilder:f,clippingPlanes:p,clippingPlanesLength:m}=n;if(m>0){const e="getClippingPlane",n=(0,a.A)(p,t),i=0,o=n.indexOf(")")+1,r=n.indexOf("{",o)+1,s=n.indexOf("}",r),c=n.slice(i,o),l=n.slice(r,s);f.addFunction(e,c,d.A.FRAGMENT),f.addFunctionLines(e,[l])}const _=f.clone();_.addDefine("PICKING",void 0,d.A.FRAGMENT);const g=f.buildShaderProgram(t),y=_.buildShaderProgram(t),b=u.A.fromCache({cull:{enabled:!0,face:s.A.BACK},depthTest:{enabled:!1},depthMask:!1,blending:r.A.PRE_MULTIPLIED_ALPHA_BLEND}),v=t.getViewportQuadVertexArray(),T=e._depthTest,w=new c.A({vertexArray:v,primitiveType:o.A.TRIANGLES,renderState:b,shaderProgram:g,uniformMap:n.uniformMap,modelMatrix:e._compoundModelMatrix,pass:l.A.VOXELS,executeInClosestFrustum:!0,owner:this,cull:T,occlude:T}),E=c.A.shallowClone(w,new c.A);if(E.shaderProgram=y,E.pickOnly=!0,(0,i.A)(e._drawCommand)){const t=e._drawCommand;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}if((0,i.A)(e._drawCommandPick)){const t=e._drawCommandPick;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}e._drawCommand=w,e._drawCommandPick=E}},849750:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(697422),r=n(448871),s=n(62467);async function a(e,t){const n=t.terrainProvider,r=t.mapProjection,c=r.ellipsoid;let l;const u=t.camera.getRectangleCameraCoordinates(e);if(l=t.mode===s.A.SCENE3D?c.cartesianToCartographic(u):r.unproject(u),!(0,i.A)(n))return l;(0,i.A)(n._readyPromise)?await n._readyPromise:(0,i.A)(n.readyPromise)&&await n.readyPromise;const d=n.availability;if(!(0,i.A)(d)||t.mode===s.A.SCENE2D)return l;const h=[o.A.center(e),o.A.southeast(e),o.A.southwest(e),o.A.northeast(e),o.A.northwest(e)],A=await a._sampleTerrainMostDetailed(n,h);let f=!1;const p=A.reduce((function(e,t){return(0,i.A)(t.height)?(f=!0,Math.max(t.height,e)):e}),-Number.MAX_VALUE),m=l;return f&&(m.height+=p),m}a._sampleTerrainMostDetailed=r.A;const c=a},883734:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n,i,o){return function(){const r=document.createElement("canvas"),s=o+2*i;r.height=r.width=s;const a=r.getContext("2d");return a.clearRect(0,0,s,s),0!==i&&(a.beginPath(),a.arc(s/2,s/2,s/2,0,2*Math.PI,!0),a.closePath(),a.fillStyle=n,a.fill(),e<1&&(a.save(),a.globalCompositeOperation="destination-out",a.beginPath(),a.arc(s/2,s/2,o/2,0,2*Math.PI,!0),a.closePath(),a.fillStyle="black",a.fill(),a.restore())),a.beginPath(),a.arc(s/2,s/2,o/2,0,2*Math.PI,!0),a.closePath(),a.fillStyle=t,a.fill(),r}}},655028:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(419061),o=n(670549),r=n(231097);const s=function(e){e=(0,i.A)(e,i.A.EMPTY_OBJECT);const t=(0,i.A)(e.style,r.A.AERIAL);return o.A.fromAssetId(t)}},635649:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(35204),o=n(419061),r=n(491446),s=n(800859),a=n(983884);function c(e,t){const n=(0,s.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!(0,r.A)(n))return;if(!(0,r.A)(e.schema))return void c._oneTimeWarning("findContentMetadata-missing-root-schema","Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const a=(0,o.A)(e.schema.classes,o.A.EMPTY_OBJECT);if((0,r.A)(n.class)){const e=a[n.class];return new i.A({content:n,class:e})}}c._oneTimeWarning=a.A;const l=c},217543:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446),o=n(800859);const r=function(e,t){const n=e.metadataExtension;if(!(0,i.A)(n))return;const r=n.groups,s=(0,o.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"].group:t.group;if("number"==typeof s)return r[s];const a=n.groupIds.findIndex((function(e){return e===s}));return a>=0?r[a]:void 0}},961624:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(419061),o=n(491446),r=n(800859),s=n(335859),a=n(983884);function c(e,t){const n=(0,r.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!(0,o.A)(n))return;if(!(0,o.A)(e.schema))return void c._oneTimeWarning("findTileMetadata-missing-root-schema","Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const a=(0,i.A)(e.schema.classes,i.A.EMPTY_OBJECT);if((0,o.A)(n.class)){const e=a[n.class];return new s.A({tile:n,class:e})}}c._oneTimeWarning=a.A;const l=c},351554:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(434067),o=n(267980),r=n(626809),s=n(571804),a=n(463298),c=n(331185),l=n(584164);const u={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},d={SCALAR:void 0,VEC2:i.A,VEC3:o.A,VEC4:r.A,MAT2:a.A,MAT3:c.A,MAT4:l.A},h=function(e){const t=e.componentType;let n;n="string"==typeof t?s.A.fromName(t):t;const i=u[e.type],o=d[e.type];return{componentsPerAttribute:i,classType:o,createArrayBufferView:function(e,t,o){return s.A.createArrayBufferView(n,e,t,i*o)}}}},245329:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(369031);const o=function(e,t,n){return i.A.typeOf.string("samplerUniformName",e),i.A.typeOf.string("matrixUniformName",t),i.A.typeOf.string("styleUniformName",n),`    float clipDistance = clip(gl_FragCoord, ${e}, ${t}); \n    vec4 clippingPlanesEdgeColor = vec4(1.0); \n    clippingPlanesEdgeColor.rgb = ${n}.rgb; \n    float clippingPlanesEdgeWidth = ${n}.a; \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) \n    { \n        out_FragColor = clippingPlanesEdgeColor;\n    } \n`}},796170:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(434067),o=n(369031),r=n(711284);const s=new i.A,a=function(e,t){o.A.typeOf.object("clippingPlaneCollection",e),o.A.typeOf.object("context",t);const n=e.unionClippingRegions,i=e.length,a=r.A.useFloatTexture(t),c=r.A.getTextureResolution(e,t,s),l=c.x,u=c.y;let d=a?function(e,t){const n=1/t;let i=`${1/e}`;-1===i.indexOf(".")&&(i+=".0");let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");return`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int pixY = clippingPlaneNumber / ${e};\n    int pixX = clippingPlaneNumber - (pixY * ${e});\n    float u = (float(pixX) + 0.5) * ${i};\n    float v = (float(pixY) + 0.5) * ${o};\n    vec4 plane = texture(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n`}(l,u):function(e,t){const n=1/t;let i=`${1/e}`;-1===i.indexOf(".")&&(i+=".0");let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");return`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2;\n    int pixY = clippingPlaneStartIndex / ${e};\n    int pixX = clippingPlaneStartIndex - (pixY * ${e});\n    float u = (float(pixX) + 0.5) * ${i};\n    float v = (float(pixY) + 0.5) * ${o};\n    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + ${i}, v)));\n    return czm_transformPlane(plane, transform);\n}\n`}(l,u);return d+="\n",d+=n?function(e){return`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount;\n    float pixelWidth = czm_metersPerPixel(position);\n    bool breakAndDiscard = false;\n    for (int i = 0; i < ${e}; ++i)\n    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0)\n        {\n           breakAndDiscard = true;\n           break;\n        }\n    }\n    if (breakAndDiscard) {\n        discard;\n    }\n    return clipAmount;\n}\n`}(i):function(e){return`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    bool clipped = true;\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount = 0.0;\n    float pixelWidth = czm_metersPerPixel(position);\n    for (int i = 0; i < ${e}; ++i)\n    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n    }\n    if (clipped)\n    {\n        discard;\n    }\n    return clipAmount;\n}\n`}(i),d}},800859:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){return(0,i.A)(e)&&(0,i.A)(e.extensions)&&(0,i.A)(e.extensions[t])}},115959:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(369031),o=n(571804),r=n(491446),s=n(419061),a=n(786101),c=n(605971),l=n(123245),u=n(744671),d=n(590732),h=n(828847),A=n(287659),f=n(351554),p=n(784749),m=n(32335),_=n(4024),g=n(874403),y=n(995537),b=n(471147),v=n(983884);function T(e){i.A.typeOf.number("options.count",e.count),i.A.typeOf.object("options.batchTable",e.batchTable);const t=e.count,n=e.batchTable,a=e.binaryBody,v=(0,s.A)(e.parseAsPropertyAttributes,!1),E=e.customAttributeOutput;if(v&&!(0,r.A)(E))throw new c.A("customAttributeOutput is required when parsing batch table as property attributes");const S=function(e){const t=e.HIERARCHY,n=e.extras,i=e.extensions;let o,s;(0,r.A)(t)?(T._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),o=t):(0,r.A)(i)&&(o=i["3DTILES_batch_table_hierarchy"]);const a={};for(const t in e){if(!e.hasOwnProperty(t)||"HIERARCHY"===t||"extensions"===t||"extras"===t)continue;const n=e[t];Array.isArray(n)?(s=(0,r.A)(s)?s:{},s[t]=n):a[t]=n}return{binaryProperties:a,jsonProperties:s,hierarchy:o,extras:n,extensions:i}}(n);let C,x;(0,r.A)(S.jsonProperties)&&(C=new p.A({count:t,properties:S.jsonProperties})),(0,r.A)(S.hierarchy)&&(x=new u.A({extension:S.hierarchy,binaryBody:a}));const I=m.A.BATCH_TABLE_CLASS_NAME,P=S.binaryProperties;let D,O,L;if(v){const e=function(e,t,n,i,s){const a={},c={};let u=0;for(const t in n){if(!n.hasOwnProperty(t))continue;const d=n[t];if(!(0,r.A)(i)&&!(0,r.A)(d.typedArray))throw new l.A(`Property ${t} requires a batch table binary.`);let h=b.A.sanitizeGlslIdentifier(t);(""===h||a.hasOwnProperty(h))&&(h=`property_${u}`,u++);const A=w(d);A.name=t,a[h]=A;let p=h.toUpperCase();p.startsWith("_")||(p=`_${p}`);let m=d.typedArray;(0,r.A)(m)||(m=(0,f.A)(d).createArrayBufferView(i.buffer,i.byteOffset+d.byteOffset,e));const _=new y.A.Attribute;_.name=p,_.count=e,_.type=d.type;const g=o.A.fromTypedArray(m);g!==o.A.INT&&g!==o.A.UNSIGNED_INT&&g!==o.A.DOUBLE||(T._oneTimeWarning("Cast pnts property to floats",`Point cloud property "${p}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),m=new Float32Array(m)),_.componentDatatype=o.A.fromTypedArray(m),_.typedArray=m,s.push(_),c[h]={attribute:p}}const d={classes:{}};d.classes[t]={properties:a};const h=_.A.fromJson(d);return{class:t,propertyAttributeJson:{properties:c},transcodedSchema:h,transcodedClass:h.classes[t]}}(t,I,P,a,E);L=e.transcodedSchema,O=[new h.A({propertyAttribute:e.propertyAttributeJson,class:e.transcodedClass})]}else{const e=function(e,t,n,i){const o={},s={},a={};let c=0;for(const t in n){if(!n.hasOwnProperty(t))continue;if(!(0,r.A)(i))throw new l.A(`Property ${t} requires a batch table binary.`);const u=n[t],d=(0,f.A)(u);s[t]={bufferView:c},o[t]=w(u),a[c]=d.createArrayBufferView(i.buffer,i.byteOffset+u.byteOffset,e),c++}const u={classes:{}};u.classes[t]={properties:o};const d=_.A.fromJson(u);return{featureTableJson:{class:t,count:e,properties:s},bufferViewsTypedArrays:a,transcodedSchema:d,transcodedClass:d.classes[t]}}(t,I,P,a);L=e.transcodedSchema;const n=e.featureTableJson;D=new g.A({count:n.count,properties:n.properties,class:e.transcodedClass,bufferViews:e.bufferViewsTypedArrays}),O=[]}const N=[];if((0,r.A)(D)||(0,r.A)(C)||(0,r.A)(x)){const e=new A.A({id:0,name:"Batch Table",count:t,metadataTable:D,jsonMetadataTable:C,batchTableHierarchy:x});N.push(e)}const M={schema:L,propertyTables:N,propertyAttributes:O,extensions:S.extensions,extras:S.extras};return new d.A(M)}function w(e){const t=function(e){switch(e){case"BYTE":return"INT8";case"UNSIGNED_BYTE":return"UINT8";case"SHORT":return"INT16";case"UNSIGNED_SHORT":return"UINT16";case"INT":return"INT32";case"UNSIGNED_INT":return"UINT32";case"FLOAT":return"FLOAT32";case"DOUBLE":return"FLOAT64"}}(e.componentType);return{type:e.type,componentType:t}}T._deprecationWarning=a.A,T._oneTimeWarning=v.A;const E=T},335724:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(491446);function r(e,t){const n=`${e}_BOUNDING_BOX`,i=t.getPropertyBySemantic(n);if((0,o.A)(i))return{box:i};const r=`${e}_BOUNDING_REGION`,s=t.getPropertyBySemantic(r);if((0,o.A)(s))return{region:s};const a=`${e}_BOUNDING_SPHERE`,c=t.getPropertyBySemantic(a);return(0,o.A)(c)?{sphere:c}:void 0}function s(e,t){const n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}function a(e,t){const n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}const c=function(e){return i.A.typeOf.object("tileMetadata",e),{tile:{boundingVolume:r("TILE",e),minimumHeight:s("TILE",e),maximumHeight:a("TILE",e)},content:{boundingVolume:r("CONTENT",e),minimumHeight:s("CONTENT",e),maximumHeight:a("CONTENT",e)}}}},4471:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(430346),r=n(419061),s=n(491446),a=n(287659),c=n(105792),l=n(590732),u=n(874403);function d(e){const t={class:e.class,properties:{}},n=e.properties;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e],r={channels:h(i.channels),extras:i.extras,extensions:i.extensions};t.properties[e]=(0,o.A)(i.texture,r,!0)}return t}function h(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]="rgba".indexOf(e[i]);return n}const A=function(e){const t=(e=(0,r.A)(e,r.A.EMPTY_OBJECT)).extension,n=e.schema;let o;i.A.typeOf.object("options.extension",t),i.A.typeOf.object("options.schema",n);const h=[];let A;if((0,s.A)(t.featureTables))for(A=Object.keys(t.featureTables).sort(),o=0;o<A.length;o++){const i=A[o],r=t.featureTables[i],s=n.classes[r.class],c=new u.A({count:r.count,properties:r.properties,class:s,bufferViews:e.bufferViews});h.push(new a.A({id:i,count:r.count,metadataTable:c,extras:r.extras,extensions:r.extensions}))}const f=[];if((0,s.A)(t.featureTextures))for(A=Object.keys(t.featureTextures).sort(),o=0;o<A.length;o++){const i=A[o],r=t.featureTextures[i];f.push(new c.A({id:i,propertyTexture:d(r),class:n.classes[r.class],textures:e.textures}))}return new l.A({schema:n,propertyTables:h,propertyTextures:f,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}},613161:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(419061),r=n(491446),s=n(287659),a=n(105792),c=n(828847),l=n(590732),u=n(874403);const d=function(e){const t=(e=(0,o.A)(e,o.A.EMPTY_OBJECT)).extension,n=e.schema;i.A.typeOf.object("options.extension",t),i.A.typeOf.object("options.schema",n);const d=[];if((0,r.A)(t.propertyTables))for(let i=0;i<t.propertyTables.length;i++){const o=t.propertyTables[i],r=n.classes[o.class],a=new u.A({count:o.count,properties:o.properties,class:r,bufferViews:e.bufferViews});d.push(new s.A({id:i,name:o.name,count:o.count,metadataTable:a,extras:o.extras,extensions:o.extensions}))}const h=[];if((0,r.A)(t.propertyTextures))for(let i=0;i<t.propertyTextures.length;i++){const o=t.propertyTextures[i];h.push(new a.A({id:i,name:o.name,propertyTexture:o,class:n.classes[o.class],textures:e.textures}))}const A=[];if((0,r.A)(t.propertyAttributes))for(let e=0;e<t.propertyAttributes.length;e++){const i=t.propertyAttributes[e];A.push(new c.A({id:e,name:i.name,class:n.classes[i.class],propertyAttribute:i}))}return new l.A({schema:n,propertyTables:d,propertyTextures:h,propertyAttributes:A,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}},192518:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(604752),r=n(452684),s=n(123245),a=n(223702);const c=function(e){const t=new Uint8Array(e);let n=(0,r.A)(t);if("glTF"===n&&(n="glb"),a.A.isBinaryFormat(n))return{contentType:n,binaryPayload:t};const c=function(e){let t;try{t=(0,o.A)(e)}catch(e){throw new s.A("Invalid tile content.")}return t}(t);if((0,i.A)(c.root))return{contentType:a.A.EXTERNAL_TILESET,jsonPayload:c};if((0,i.A)(c.asset))return{contentType:a.A.GLTF,jsonPayload:c};if((0,i.A)(c.tileAvailability))return{contentType:a.A.IMPLICIT_SUBTREE_JSON,jsonPayload:c};if((0,i.A)(c.type))return{contentType:a.A.GEOJSON,jsonPayload:c};if((0,i.A)(c.voxelTable))return{contentType:a.A.VOXEL_JSON,jsonPayload:c};throw new s.A("Invalid tile content.")}},16620:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(374607),r=n(624512);function s(e){return e===o.A.SCALAR?"float":e===o.A.VEC2?"vec2":e===o.A.VEC3?"vec3":e===o.A.VEC4?"vec4":void 0}function a(e){return e===o.A.SCALAR?".r":e===o.A.VEC2?".ra":e===o.A.VEC3?".rgb":e===o.A.VEC4?"":void 0}function c(e){let t=e.toString();return-1===t.indexOf(".")&&(t=`${e}.0`),t}function l(e,t){return e===o.A.SCALAR?"":`[${t}]`}const u=function(e,t){const{shaderBuilder:n}=e,{names:u,types:d,componentTypes:h,minimumValues:A,maximumValues:f}=t._provider,p=d.length,m=(0,i.A)(A)&&(0,i.A)(f);n.addDefine("METADATA_COUNT",p,r.A.FRAGMENT),m&&n.addDefine("STATISTICS",void 0,r.A.FRAGMENT);for(let e=0;e<p;e++){const t=u[e],i=d[e],o=`PropertyStatistics_${t}`,a=`PropertyStatistics_${t}`;n.addStruct(o,a,r.A.FRAGMENT);const c=s(i);n.addStructField(o,c,"min"),n.addStructField(o,c,"max")}const _="Statistics",g="Statistics",y="statistics";n.addStruct(_,g,r.A.FRAGMENT);for(let e=0;e<p;e++){const t=u[e],i=`PropertyStatistics_${t}`,o=t;n.addStructField(_,i,o)}const b="Metadata",v="Metadata",T="metadata";n.addStruct(b,v,r.A.FRAGMENT),n.addStructField(b,g,y);for(let e=0;e<p;e++){const t=u[e],i=s(d[e]);n.addStructField(b,i,t)}for(let e=0;e<p;e++){const t=u[e],i=(w=d[e])===o.A.SCALAR?"vec3":w===o.A.VEC2?"mat2":w===o.A.VEC3?"mat3":w===o.A.VEC4?"mat4":void 0,s=`VoxelProperty_${t}`,a=`VoxelProperty_${t}`;n.addStruct(s,a,r.A.FRAGMENT),n.addStructField(s,i,"partialDerivativeLocal"),n.addStructField(s,i,"partialDerivativeWorld"),n.addStructField(s,i,"partialDerivativeView"),n.addStructField(s,i,"partialDerivativeValid")}var w;const E="Voxel",S="Voxel";n.addStruct(E,S,r.A.FRAGMENT);for(let e=0;e<p;e++){const t=u[e],i=`VoxelProperty_${t}`;n.addStructField(E,i,t)}n.addStructField(E,"vec3","positionEC"),n.addStructField(E,"vec3","positionUv"),n.addStructField(E,"vec3","positionShapeUv"),n.addStructField(E,"vec3","positionUvLocal"),n.addStructField(E,"vec3","viewDirUv"),n.addStructField(E,"vec3","viewDirWorld"),n.addStructField(E,"vec3","surfaceNormal"),n.addStructField(E,"float","travelDistance");const C="FragmentInput";n.addStruct(C,"FragmentInput",r.A.FRAGMENT),n.addStructField(C,v,T),n.addStructField(C,S,"voxel");const x="Properties",I="Properties",P="properties";n.addStruct(x,I,r.A.FRAGMENT);for(let e=0;e<p;e++){const t=u[e],i=s(d[e]);n.addStructField(x,i,t)}{const e="clearProperties";n.addFunction(e,`${I} clearProperties()`,r.A.FRAGMENT),n.addFunctionLines(e,[`${I} ${P};`]);for(let t=0;t<p;t++){const i=u[t],o=d[t],r=(h[t],s(o));n.addFunctionLines(e,[`${P}.${i} = ${r}(0.0);`])}n.addFunctionLines(e,[`return ${P};`])}{const e="sumProperties";n.addFunction(e,`${I} sumProperties(${I} propertiesA, ${I} propertiesB)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${I} ${P};`]);for(let t=0;t<p;t++){const i=u[t];n.addFunctionLines(e,[`${P}.${i} = propertiesA.${i} + propertiesB.${i};`])}n.addFunctionLines(e,[`return ${P};`])}{const e="scaleProperties";n.addFunction(e,`${I} scaleProperties(${I} ${P}, float scale)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${I} scaledProperties = ${P};`]);for(let t=0;t<p;t++){const i=u[t];n.addFunctionLines(e,[`scaledProperties.${i} *= scale;`])}n.addFunctionLines(e,["return scaledProperties;"])}{const e="mixProperties";n.addFunction(e,`${I} mixProperties(${I} propertiesA, ${I} propertiesB, float mixFactor)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${I} ${P};`]);for(let t=0;t<p;t++){const i=u[t];n.addFunctionLines(e,[`${P}.${i} = mix(propertiesA.${i}, propertiesB.${i}, mixFactor);`])}n.addFunctionLines(e,[`return ${P};`])}{const e="copyPropertiesToMetadata";n.addFunction(e,`void copyPropertiesToMetadata(in ${I} ${P}, inout ${v} ${T})`,r.A.FRAGMENT);for(let t=0;t<p;t++){const i=u[t];n.addFunctionLines(e,[`${T}.${i} = ${P}.${i};`])}}if(m){const e="setStatistics";n.addFunction(e,`void setStatistics(inout ${g} ${y})`,r.A.FRAGMENT);for(let t=0;t<p;t++){const i=u[t],r=d[t],s=o.A.getComponentCount(r);for(let o=0;o<s;o++){const s=l(r,o),a=A[t][o],u=f[t][o];n.addFunctionLines(e,[`${y}.${i}.min${s} = ${c(a)};`,`${y}.${i}.max${s} = ${c(u)};`])}}}{const e="getPropertiesFromMegatextureAtUv";n.addFunction(e,`${I} getPropertiesFromMegatextureAtUv(vec2 texcoord)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${I} ${P};`]);for(let t=0;t<p;t++){const i=u[t],o=d[t],r=(h[t],a(o));n.addFunctionLines(e,[`properties.${i} = texture(u_megatextureTextures[${t}], texcoord)${r};`])}n.addFunctionLines(e,[`return ${P};`])}}},756995:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef MRT\nlayout (location = 0) out vec4 out_FragData_0;\nlayout (location = 1) out vec4 out_FragData_1;\n#else\nlayout (location = 0) out vec4 out_FragColor;\n#endif\n\nuniform vec4 u_bgColor;\nuniform sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    if (texture(u_depthTexture, v_textureCoordinates).r < 1.0)\n    {\n#ifdef MRT\n        out_FragData_0 = u_bgColor;\n        out_FragData_1 = vec4(u_bgColor.a);\n#else\n        out_FragColor = u_bgColor;\n#endif\n        return;\n    }\n    \n    discard;\n}\n"},301005:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\nin vec3 v_tangentEC;\nin vec3 v_bitangentEC;\nin vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},980509:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin vec3 tangent;\nin vec3 bitangent;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\nout vec3 v_tangentEC;\nout vec3 v_bitangentEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates\n    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},291192:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},149800:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},64137:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\nin vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},373785:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},468649:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform vec3 u_radiiAndDynamicAtmosphereColor;\n\nuniform float u_atmosphereLightIntensity;\nuniform float u_atmosphereRayleighScaleHeight;\nuniform float u_atmosphereMieScaleHeight;\nuniform float u_atmosphereMieAnisotropy;\nuniform vec3 u_atmosphereRayleighCoefficient;\nuniform vec3 u_atmosphereMieCoefficient;\n\nconst float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.\nconst int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.\nconst int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n/**\n * Rational approximation to tanh(x)\n*/\nfloat approximateTanh(float x) {\n    float x2 = x * x;\n    return max(-1.0, min(+1.0, x * (27.0 + x2) / (27.0 + 9.0 * x2)));\n}\n\n/**\n * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as\n * the transmittance value for the ray.\n *\n * @param {czm_ray} primaryRay The ray from the camera to the position.\n * @param {float} primaryRayLength The length of the primary ray.\n * @param {vec3} lightDirection The direction of the light to calculate the scattering from.\n * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.\n * @param {vec3} mieColor The variable the Mie scattering will be written to.\n * @param {float} opacity The variable the transmittance will be written to.\n * @glslFunction\n */\nvoid computeScattering(\n    czm_ray primaryRay,\n    float primaryRayLength,\n    vec3 lightDirection,\n    float atmosphereInnerRadius,\n    out vec3 rayleighColor,\n    out vec3 mieColor,\n    out float opacity\n) {\n\n    // Initialize the default scattering amounts to 0.\n    rayleighColor = vec3(0.0);\n    mieColor = vec3(0.0);\n    opacity = 0.0;\n\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n\n    vec3 origin = vec3(0.0);\n\n    // Calculate intersection from the camera to the outer ring of the atmosphere.\n    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);\n\n    // Return empty colors if no intersection with the atmosphere geometry.\n    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {\n        return;\n    }\n\n    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)\n    // we implement a split strategy: sky or horizon.\n    // For performance reasons, instead of a if/else branch\n    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0\n    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);\n    // Value close to 0.0: close to the horizon\n    // Value close to 1.0: above in the sky\n    float w_stop_gt_lprl = 0.5 * (1.0 + approximateTanh(x));\n    \n    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.\n    float start_0 = primaryRayAtmosphereIntersect.start;\n    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);\n    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.\n    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));\n\n    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)\n    // (1) from outer space we have to use more ray steps to get a realistic rendering\n    // (2) within atmosphere we need fewer steps for faster rendering\n    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters\n    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + approximateTanh(x_o_a));\n    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.\n    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.\n    float rayPositionLength = primaryRayAtmosphereIntersect.start;\n    // (1) Outside the atmosphere: constant rayStepLength\n    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps\n    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;\n    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));\n    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));\n\n    vec3 rayleighAccumulation = vec3(0.0);\n    vec3 mieAccumulation = vec3(0.0);\n    vec2 opticalDepth = vec2(0.0);\n    vec2 heightScale = vec2(u_atmosphereRayleighScaleHeight, u_atmosphereMieScaleHeight);\n\n    // Sample positions on the primary ray.\n    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {\n\n        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot\n        // loop with non-constant condition, so it has to break early instead\n        if (i >= PRIMARY_STEPS) {\n            break;\n        }\n\n        // Calculate sample position along viewpoint ray.\n        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);\n\n        // Calculate height of sample position above ellipsoid.\n        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;\n\n        // Calculate and accumulate density of particles at the sample position.\n        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;\n        opticalDepth += sampleDensity;\n\n        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.\n        czm_ray lightRay = czm_ray(samplePosition, lightDirection);\n        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);\n\n        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);\n        float lightPositionLength = 0.0;\n\n        vec2 lightOpticalDepth = vec2(0.0);\n\n        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.\n        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {\n\n            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot\n            // loop with non-constant condition, so it has to break early instead\n            if (j >= LIGHT_STEPS) {\n                break;\n            }\n\n            // Calculate sample position along light ray.\n            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);\n\n            // Calculate height of the light sample position above ellipsoid.\n            float lightHeight = length(lightPosition) - atmosphereInnerRadius;\n\n            // Calculate density of photons at the light sample position.\n            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;\n\n            // Increment distance on light ray.\n            lightPositionLength += lightStepLength;\n        }\n\n        // Compute attenuation via the primary ray and the light ray.\n        vec3 attenuation = exp(-((u_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (u_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));\n\n        // Accumulate the scattering.\n        rayleighAccumulation += sampleDensity.x * attenuation;\n        mieAccumulation += sampleDensity.y * attenuation;\n\n        // Increment distance on primary ray.\n        rayPositionLength += (rayStepLength += rayStepLengthIncrease);\n    }\n\n    // Compute the scattering amount.\n    rayleighColor = u_atmosphereRayleighCoefficient * rayleighAccumulation;\n    mieColor = u_atmosphereMieCoefficient * mieAccumulation;\n\n    // Compute the transmittance i.e. how much light is passing through the atmosphere.\n    opacity = length(exp(-((u_atmosphereMieCoefficient * opticalDepth.y) + (u_atmosphereRayleighCoefficient * opticalDepth.x))));\n}\n\nvec4 computeAtmosphereColor(\n    vec3 positionWC,\n    vec3 lightDirection,\n    vec3 rayleighColor,\n    vec3 mieColor,\n    float opacity\n) {\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n\n    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);\n    float cosAngleSq = cosAngle * cosAngle;\n\n    float G = u_atmosphereMieAnisotropy;\n    float GSq = G * G;\n\n    // The Rayleigh phase function.\n    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);\n    // The Mie phase function.\n    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));\n\n    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.\n    vec3 rayleigh = rayleighPhase * rayleighColor;\n    vec3 mie = miePhase * mieColor;\n\n    vec3 color = (rayleigh + mie) * u_atmosphereLightIntensity;\n\n    return vec4(color, opacity);\n}\n"},562523:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 v_textureCoordinates;\nconst float M_PI = 3.141592653589793;\n\nfloat vdcRadicalInverse(int i)\n{\n    float r;\n    float base = 2.0;\n    float value = 0.0;\n    float invBase = 1.0 / base;\n    float invBi = invBase;\n    for (int x = 0; x < 100; x++)\n    {\n        if (i <= 0)\n        {\n            break;\n        }\n        r = mod(float(i), base);\n        value += r * invBi;\n        invBi *= invBase;\n        i = int(float(i) * invBase);\n    }\n    return value;\n}\n\nvec2 hammersley2D(int i, int N)\n{\n    return vec2(float(i) / float(N), vdcRadicalInverse(i));\n}\n\nvec3 importanceSampleGGX(vec2 xi, float roughness, vec3 N)\n{\n    float a = roughness * roughness;\n    float phi = 2.0 * M_PI * xi.x;\n    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (a * a - 1.0) * xi.y));\n    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n    vec3 tangentX = normalize(cross(upVector, N));\n    vec3 tangentY = cross(N, tangentX);\n    return tangentX * H.x + tangentY * H.y + N * H.z;\n}\n\nfloat G1_Smith(float NdotV, float k)\n{\n    return NdotV / (NdotV * (1.0 - k) + k);\n}\n\nfloat G_Smith(float roughness, float NdotV, float NdotL)\n{\n    float k = roughness * roughness / 2.0;\n    return G1_Smith(NdotV, k) * G1_Smith(NdotL, k);\n}\n\nvec2 integrateBrdf(float roughness, float NdotV)\n{\n    vec3 V = vec3(sqrt(1.0 - NdotV * NdotV), 0.0, NdotV);\n    float A = 0.0;\n    float B = 0.0;\n    const int NumSamples = 1024;\n    for (int i = 0; i < NumSamples; i++)\n    {\n        vec2 xi = hammersley2D(i, NumSamples);\n        vec3 H = importanceSampleGGX(xi, roughness, vec3(0.0, 0.0, 1.0));\n        vec3 L = 2.0 * dot(V, H) * H - V;\n        float NdotL = clamp(L.z, 0.0, 1.0);\n        float NdotH = clamp(H.z, 0.0, 1.0);\n        float VdotH = clamp(dot(V, H), 0.0, 1.0);\n        if (NdotL > 0.0)\n        {\n            float G = G_Smith(roughness, NdotV, NdotL);\n            float G_Vis = G * VdotH / (NdotH * NdotV);\n            float Fc = pow(1.0 - VdotH, 5.0);\n            A += (1.0 - Fc) * G_Vis;\n            B += Fc * G_Vis;\n        }\n    }\n    return vec2(A, B) / float(NumSamples);\n}\n\nvoid main()\n{\n    out_FragColor = vec4(integrateBrdf(v_textureCoordinates.y, v_textureCoordinates.x), 0.0, 1.0);\n}\n"},212597:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_opaqueDepthTexture;\nuniform sampler2D u_translucentDepthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float opaqueDepth = texture(u_opaqueDepthTexture, v_textureCoordinates).r;\n    float translucentDepth = texture(u_translucentDepthTexture, v_textureCoordinates).r;\n    translucentDepth = czm_branchFreeTernary(translucentDepth > opaqueDepth, 1.0, translucentDepth);\n    out_FragColor = czm_packDepth(translucentDepth);\n}\n"},615954:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/**\n * Compositing for Weighted Blended Order-Independent Transparency. See:\n * - http://jcgt.org/published/0002/02/09/\n * - http://casual-effects.blogspot.com/2014/03/weighted-blended-order-independent.html\n */\n\nuniform sampler2D u_opaque;\nuniform sampler2D u_accumulation;\nuniform sampler2D u_revealage;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 opaque = texture(u_opaque, v_textureCoordinates);\n    vec4 accum = texture(u_accumulation, v_textureCoordinates);\n    float r = texture(u_revealage, v_textureCoordinates).r;\n\n#ifdef MRT\n    vec4 transparent = vec4(accum.rgb / clamp(r, 1e-4, 5e4), accum.a);\n#else\n    vec4 transparent = vec4(accum.rgb / clamp(accum.a, 1e-4, 5e4), r);\n#endif\n\n    out_FragColor = (1.0 - transparent.a) * transparent + transparent.a * opaque;\n\n    if (opaque != czm_backgroundColor)\n    {\n        out_FragColor.a = 1.0;\n    }\n}\n"},710434:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 positionEC;\n\nvoid main()\n{\n    vec3 position;\n    vec3 direction;\n    if (czm_orthographicIn3D == 1.0)\n    {\n        vec2 uv = (gl_FragCoord.xy -  czm_viewport.xy) / czm_viewport.zw;\n        vec2 minPlane = vec2(czm_frustumPlanes.z, czm_frustumPlanes.y); // left, bottom\n        vec2 maxPlane = vec2(czm_frustumPlanes.w, czm_frustumPlanes.x); // right, top\n        position = vec3(mix(minPlane, maxPlane, uv), 0.0);\n        direction = vec3(0.0, 0.0, -1.0);\n    } \n    else \n    {\n        position = vec3(0.0);\n        direction = normalize(positionEC.xyz);\n    }\n\n    czm_ray ray = czm_ray(position, direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n    if (!czm_isEmpty(intersection))\n    {\n        out_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n    }\n    else\n    {\n        discard;\n    }\n\n    czm_writeLogDepth();\n}\n"},77202:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\n\nout vec4 positionEC;\n\nvoid main()\n{\n    positionEC = czm_modelView * position;\n    gl_Position = czm_projection * positionEC;\n\n    czm_vertexLogDepth();\n}\n"},559352:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform vec3 u_radii;\nuniform vec3 u_oneOverEllipsoidRadiiSquared;\n\nin vec3 v_positionEC;\n\nvec4 computeEllipsoidColor(czm_ray ray, float intersection, float side)\n{\n    vec3 positionEC = czm_pointAlongRay(ray, intersection);\n    vec3 positionMC = (czm_inverseModelView * vec4(positionEC, 1.0)).xyz;\n    vec3 geodeticNormal = normalize(czm_geodeticSurfaceNormal(positionMC, vec3(0.0), u_oneOverEllipsoidRadiiSquared));\n    vec3 sphericalNormal = normalize(positionMC / u_radii);\n    vec3 normalMC = geodeticNormal * side;              // normalized surface normal (always facing the viewer) in model coordinates\n    vec3 normalEC = normalize(czm_normal * normalMC);   // normalized surface normal in eye coordiantes\n\n    vec2 st = czm_ellipsoidWgs84TextureCoordinates(sphericalNormal);\n    vec3 positionToEyeEC = -positionEC;\n\n    czm_materialInput materialInput;\n    materialInput.s = st.s;\n    materialInput.st = st;\n    materialInput.str = (positionMC + u_radii) / u_radii;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef ONLY_SUN_LIGHTING\n    return czm_private_phong(normalize(positionToEyeEC), material, czm_sunDirectionEC);\n#else\n    return czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n\nvoid main()\n{\n    // PERFORMANCE_TODO: When dynamic branching is available, compute ratio of maximum and minimum radii\n    // in the vertex shader. Only when it is larger than some constant, march along the ray.\n    // Otherwise perform one intersection test which will be the common case.\n\n    // Test if the ray intersects a sphere with the ellipsoid's maximum radius.\n    // For very oblate ellipsoids, using the ellipsoid's radii for an intersection test\n    // may cause false negatives. This will discard fragments before marching the ray forward.\n    float maxRadius = max(u_radii.x, max(u_radii.y, u_radii.z)) * 1.5;\n    vec3 direction = normalize(v_positionEC);\n    vec3 ellipsoidCenter = czm_modelView[3].xyz;\n\n    float t1 = -1.0;\n    float t2 = -1.0;\n\n    float b = -2.0 * dot(direction, ellipsoidCenter);\n    float c = dot(ellipsoidCenter, ellipsoidCenter) - maxRadius * maxRadius;\n\n    float discriminant = b * b - 4.0 * c;\n    if (discriminant >= 0.0) {\n        t1 = (-b - sqrt(discriminant)) * 0.5;\n        t2 = (-b + sqrt(discriminant)) * 0.5;\n    }\n\n    if (t1 < 0.0 && t2 < 0.0) {\n        discard;\n    }\n\n    float t = min(t1, t2);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n\n    // March ray forward to intersection with larger sphere and find\n    czm_ray ray = czm_ray(t * direction, direction);\n\n    vec3 ellipsoid_inverseRadii = vec3(1.0 / u_radii.x, 1.0 / u_radii.y, 1.0 / u_radii.z);\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoidCenter, ellipsoid_inverseRadii);\n\n    if (czm_isEmpty(intersection))\n    {\n        discard;\n    }\n\n    // If the viewer is outside, compute outsideFaceColor, with normals facing outward.\n    vec4 outsideFaceColor = (intersection.start != 0.0) ? computeEllipsoidColor(ray, intersection.start, 1.0) : vec4(0.0);\n\n    // If the viewer either is inside or can see inside, compute insideFaceColor, with normals facing inward.\n    vec4 insideFaceColor = (outsideFaceColor.a < 1.0) ? computeEllipsoidColor(ray, intersection.stop, -1.0) : vec4(0.0);\n\n    out_FragColor = mix(insideFaceColor, outsideFaceColor, outsideFaceColor.a);\n    out_FragColor.a = 1.0 - (1.0 - insideFaceColor.a) * (1.0 - outsideFaceColor.a);\n\n#if (defined(WRITE_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))\n    t = (intersection.start != 0.0) ? intersection.start : intersection.stop;\n    vec3 positionEC = czm_pointAlongRay(ray, t);\n    vec4 positionCC = czm_projection * vec4(positionEC, 1.0);\n#ifdef LOG_DEPTH\n    czm_writeLogDepth(1.0 + positionCC.w);\n#else\n    float z = positionCC.z / positionCC.w;\n\n    float n = czm_depthRange.near;\n    float f = czm_depthRange.far;\n\n    gl_FragDepth = (z * (f - n) + f + n) * 0.5;\n#endif\n#endif\n}\n"},437736:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\n\nuniform vec3 u_radii;\n\nout vec3 v_positionEC;\n\nvoid main()\n{\n    // In the vertex data, the cube goes from (-1.0, -1.0, -1.0) to (1.0, 1.0, 1.0) in model coordinates.\n    // Scale to consider the radii.  We could also do this once on the CPU when using the BoxGeometry,\n    // but doing it here allows us to change the radii without rewriting the vertex data, and\n    // allows all ellipsoids to reuse the same vertex data.\n    vec4 p = vec4(u_radii * position, 1.0);\n\n    v_positionEC = (czm_modelView * p).xyz;     // position in eye coordinates\n    gl_Position = czm_modelViewProjection * p;  // position in clip coordinates\n\n    // With multi-frustum, when the ellipsoid primitive is positioned on the intersection of two frustums\n    // and close to terrain, the terrain (writes depth) in the closest frustum can overwrite part of the\n    // ellipsoid (does not write depth) that was rendered in the farther frustum.\n    //\n    // Here, we clamp the depth in the vertex shader to avoid being overwritten; however, this creates\n    // artifacts since some fragments can be alpha blended twice.  This is solved by only rendering\n    // the ellipsoid in the closest frustum to the viewer.\n    gl_Position.z = clamp(gl_Position.z, czm_depthRange.near, czm_depthRange.far);\n\n    czm_vertexLogDepth();\n}\n"},689520:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/**\n * @license\n * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *  * Neither the name of NVIDIA CORPORATION nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// NVIDIA GameWorks Graphics Samples GitHub link: https://github.com/NVIDIAGameWorks/GraphicsSamples\n// Original FXAA 3.11 shader link: https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/master/samples/es3-kepler/FXAA/FXAA3_11.h\n\n// Steps used to integrate into Cesium:\n// * The following defines are set:\n//       #define FXAA_PC 1\n//       #define FXAA_WEBGL_1 1\n//       #define FXAA_GREEN_AS_LUMA 1\n//       #define FXAA_EARLY_EXIT 1\n//       #define FXAA_GLSL_120 1\n// * All other preprocessor directives besides the FXAA_QUALITY__P* directives were removed.\n// * Double underscores are invalid for preprocessor directives so replace them with a single underscore. Replace\n//   /FXAA_QUALITY__P(.*)/g with /FXAA_QUALITY__P$1/.\n// * There are no implicit conversions from ivec* to vec* so replace:\n//       #define FxaaInt2 ivec2\n//           with\n//       #define FxaaInt2 vec2\n// * The texture2DLod function is only available in vertex shaders so replace:\n//       #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n//       #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n//           with\n//       #define FxaaTexTop(t, p) texture(t, p)\n//       #define FxaaTexOff(t, p, o, r) texture(t, p + (o * r))\n// * FXAA_QUALITY_PRESET is prepended in the javascript code. We may want to expose that setting in the future.\n// * The following parameters to FxaaPixelShader are unused and can be removed:\n//       fxaaConsolePosPos\n//       fxaaConsoleRcpFrameOpt\n//       fxaaConsoleRcpFrameOpt2\n//       fxaaConsole360RcpFrameOpt2\n//       fxaaConsoleEdgeSharpness\n//       fxaaConsoleEdgeThreshold\n//       fxaaConsoleEdgeThresholdMi\n//       fxaaConsole360ConstDir\n\n//\n// Choose the quality preset.\n// This needs to be compiled into the shader as it effects code.\n// Best option to include multiple presets is to\n// in each shader define the preset, then include this file.\n//\n// OPTIONS\n// -----------------------------------------------------------------------\n// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n// 39       - no dither, very expensive\n//\n// NOTES\n// -----------------------------------------------------------------------\n// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n// 13 = about same speed as FXAA 3.9 and better than 12\n// 23 = closest to FXAA 3.9 visually and performance wise\n//  _ = the lowest digit is directly related to performance\n// _  = the highest digit is directly related to style\n//\n//#define FXAA_QUALITY_PRESET 12\n\n\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n#define FxaaBool bool\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 vec2\n#define FxaaTex sampler2D\n\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTexTop(t, p) texture(t, p)\n#define FxaaTexOff(t, p, o, r) texture(t, p + (o * r))\n\nFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {___a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n    #define lumaM rgbyM.y\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        return rgbyM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n}\n"},805696:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform vec4 u_initialColor;\n\n#if TEXTURE_UNITS > 0\nuniform sampler2D u_dayTextures[TEXTURE_UNITS];\nuniform vec4 u_dayTextureTranslationAndScale[TEXTURE_UNITS];\nuniform bool u_dayTextureUseWebMercatorT[TEXTURE_UNITS];\n\n#ifdef APPLY_ALPHA\nuniform float u_dayTextureAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_DAY_NIGHT_ALPHA\nuniform float u_dayTextureNightAlpha[TEXTURE_UNITS];\nuniform float u_dayTextureDayAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SPLIT\nuniform float u_dayTextureSplit[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_BRIGHTNESS\nuniform float u_dayTextureBrightness[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_CONTRAST\nuniform float u_dayTextureContrast[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_HUE\nuniform float u_dayTextureHue[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SATURATION\nuniform float u_dayTextureSaturation[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_GAMMA\nuniform float u_dayTextureOneOverGamma[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_IMAGERY_CUTOUT\nuniform vec4 u_dayTextureCutoutRectangles[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_COLOR_TO_ALPHA\nuniform vec4 u_colorsToAlpha[TEXTURE_UNITS];\n#endif\n\nuniform vec4 u_dayTextureTexCoordsRectangle[TEXTURE_UNITS];\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\nuniform sampler2D u_waterMask;\nuniform vec4 u_waterMaskTranslationAndScale;\nuniform float u_zoomedOutOceanSpecularIntensity;\n#endif\n\n#ifdef SHOW_OCEAN_WAVES\nuniform sampler2D u_oceanNormalMap;\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\nuniform vec2 u_lightingFadeDistance;\n#endif\n\n#ifdef TILE_LIMIT_RECTANGLE\nuniform vec4 u_cartographicLimitRectangle;\n#endif\n\n#ifdef GROUND_ATMOSPHERE\nuniform vec2 u_nightFadeDistance;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\nuniform highp sampler2D u_clippingPlanes;\nuniform mat4 u_clippingPlanesMatrix;\nuniform vec4 u_clippingPlanesEdgeStyle;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG) && defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\nuniform float u_minimumBrightness;\n#endif\n\n#ifdef COLOR_CORRECT\nuniform vec3 u_hsbShift; // Hue, saturation, brightness\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\nuniform vec4 u_fillHighlightColor;\n#endif\n\n#ifdef TRANSLUCENT\nuniform vec4 u_frontFaceAlphaByDistance;\nuniform vec4 u_backFaceAlphaByDistance;\nuniform vec4 u_translucencyRectangle;\n#endif\n\n#ifdef UNDERGROUND_COLOR\nuniform vec4 u_undergroundColor;\nuniform vec4 u_undergroundColorAlphaByDistance;\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\nuniform float u_lambertDiffuseMultiplier;\nuniform float u_vertexShadowDarkness;\n#endif\n\nin vec3 v_positionMC;\nin vec3 v_positionEC;\nin vec3 v_textureCoordinates;\nin vec3 v_normalMC;\nin vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nin float v_height;\nin float v_slope;\nin float v_aspect;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nin float v_distance;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\nin vec3 v_atmosphereRayleighColor;\nin vec3 v_atmosphereMieColor;\nin float v_atmosphereOpacity;\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nfloat interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT) || defined(APPLY_MATERIAL)\nvec4 alphaBlend(vec4 sourceColor, vec4 destinationColor)\n{\n    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);\n}\n#endif\n\n#ifdef TRANSLUCENT\nbool inTranslucencyRectangle()\n{\n    return\n        v_textureCoordinates.x > u_translucencyRectangle.x &&\n        v_textureCoordinates.x < u_translucencyRectangle.z &&\n        v_textureCoordinates.y > u_translucencyRectangle.y &&\n        v_textureCoordinates.y < u_translucencyRectangle.w;\n}\n#endif\n\nvec4 sampleAndBlend(\n    vec4 previousColor,\n    sampler2D textureToSample,\n    vec2 tileTextureCoordinates,\n    vec4 textureCoordinateRectangle,\n    vec4 textureCoordinateTranslationAndScale,\n    float textureAlpha,\n    float textureNightAlpha,\n    float textureDayAlpha,\n    float textureBrightness,\n    float textureContrast,\n    float textureHue,\n    float textureSaturation,\n    float textureOneOverGamma,\n    float split,\n    vec4 colorToAlpha,\n    float nightBlend)\n{\n    // This crazy step stuff sets the alpha to 0.0 if this following condition is true:\n    //    tileTextureCoordinates.s < textureCoordinateRectangle.s ||\n    //    tileTextureCoordinates.s > textureCoordinateRectangle.p ||\n    //    tileTextureCoordinates.t < textureCoordinateRectangle.t ||\n    //    tileTextureCoordinates.t > textureCoordinateRectangle.q\n    // In other words, the alpha is zero if the fragment is outside the rectangle\n    // covered by this texture.  Would an actual 'if' yield better performance?\n    vec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n    alphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    textureAlpha *= mix(textureDayAlpha, textureNightAlpha, nightBlend);\n#endif\n\n    vec2 translation = textureCoordinateTranslationAndScale.xy;\n    vec2 scale = textureCoordinateTranslationAndScale.zw;\n    vec2 textureCoordinates = tileTextureCoordinates * scale + translation;\n    vec4 value = texture(textureToSample, textureCoordinates);\n    vec3 color = value.rgb;\n    float alpha = value.a;\n\n#ifdef APPLY_COLOR_TO_ALPHA\n    vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);\n    colorDiff.r = max(max(colorDiff.r, colorDiff.g), colorDiff.b);\n    alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);\n#endif\n\n#if !defined(APPLY_GAMMA)\n    vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));\n    color = tempColor.rgb;\n    alpha = tempColor.a;\n#else\n    color = pow(color, vec3(textureOneOverGamma));\n#endif\n\n#ifdef APPLY_SPLIT\n    float splitPosition = czm_splitPosition;\n    // Split to the left\n    if (split < 0.0 && gl_FragCoord.x > splitPosition) {\n       alpha = 0.0;\n    }\n    // Split to the right\n    else if (split > 0.0 && gl_FragCoord.x < splitPosition) {\n       alpha = 0.0;\n    }\n#endif\n\n#ifdef APPLY_BRIGHTNESS\n    color = mix(vec3(0.0), color, textureBrightness);\n#endif\n\n#ifdef APPLY_CONTRAST\n    color = mix(vec3(0.5), color, textureContrast);\n#endif\n\n#ifdef APPLY_HUE\n    color = czm_hue(color, textureHue);\n#endif\n\n#ifdef APPLY_SATURATION\n    color = czm_saturation(color, textureSaturation);\n#endif\n\n    float sourceAlpha = alpha * textureAlpha;\n    float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);\n    outAlpha += sign(outAlpha) - 1.0;\n\n    vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;\n\n    // When rendering imagery for a tile in multiple passes,\n    // some GPU/WebGL implementation combinations will not blend fragments in\n    // additional passes correctly if their computation includes an unmasked\n    // divide-by-zero operation,\n    // even if it's not in the output or if the output has alpha zero.\n    //\n    // For example, without sanitization for outAlpha,\n    // this renders without artifacts:\n    //   if (outAlpha == 0.0) { outColor = vec3(0.0); }\n    //\n    // but using czm_branchFreeTernary will cause portions of the tile that are\n    // alpha-zero in the additional pass to render as black instead of blending\n    // with the previous pass:\n    //   outColor = czm_branchFreeTernary(outAlpha == 0.0, vec3(0.0), outColor);\n    //\n    // So instead, sanitize against divide-by-zero,\n    // store this state on the sign of outAlpha, and correct on return.\n\n    return vec4(outColor, max(outAlpha, 0.0));\n}\n\nvec3 colorCorrect(vec3 rgb) {\n#ifdef COLOR_CORRECT\n    // Convert rgb color to hsb\n    vec3 hsb = czm_RGBToHSB(rgb);\n    // Perform hsb shift\n    hsb.x += u_hsbShift.x; // hue\n    hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n    hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n    // Convert shifted hsb back to rgb\n    rgb = czm_HSBToRGB(hsb);\n#endif\n    return rgb;\n}\n\nvec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend);\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue, float fade);\n\nconst float fExposure = 2.0;\n\nvec3 computeEllipsoidPosition()\n{\n    float mpp = czm_metersPerPixel(vec4(0.0, 0.0, -czm_currentFrustum.x, 1.0), 1.0);\n    vec2 xy = gl_FragCoord.xy / czm_viewport.zw * 2.0 - vec2(1.0);\n    xy *= czm_viewport.zw * mpp * 0.5;\n\n    vec3 direction = normalize(vec3(xy, -czm_currentFrustum.x));\n    czm_ray ray = czm_ray(vec3(0.0), direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n\n    vec3 ellipsoidPosition = czm_pointAlongRay(ray, intersection.start);\n    return (czm_inverseView * vec4(ellipsoidPosition, 1.0)).xyz;\n}\n\nvoid main()\n{\n#ifdef TILE_LIMIT_RECTANGLE\n    if (v_textureCoordinates.x < u_cartographicLimitRectangle.x || u_cartographicLimitRectangle.z < v_textureCoordinates.x ||\n        v_textureCoordinates.y < u_cartographicLimitRectangle.y || u_cartographicLimitRectangle.w < v_textureCoordinates.y)\n        {\n            discard;\n        }\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    float clipDistance = clip(gl_FragCoord, u_clippingPlanes, u_clippingPlanesMatrix);\n#endif\n\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING) || defined(HDR)\n    vec3 normalMC = czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0));   // normalized surface normal in model coordinates\n    vec3 normalEC = czm_normal3D * normalMC;                                         // normalized surface normal in eye coordiantes\n#endif\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    float nightBlend = 1.0 - clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0, 0.0, 1.0);\n#else\n    float nightBlend = 0.0;\n#endif\n\n    // The clamp below works around an apparent bug in Chrome Canary v23.0.1241.0\n    // where the fragment shader sees textures coordinates < 0.0 and > 1.0 for the\n    // fragments on the edges of tiles even though the vertex shader is outputting\n    // coordinates strictly in the 0-1 range.\n    vec4 color = computeDayColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0), nightBlend);\n\n#ifdef SHOW_TILE_BOUNDARIES\n    if (v_textureCoordinates.x < (1.0/256.0) || v_textureCoordinates.x > (255.0/256.0) ||\n        v_textureCoordinates.y < (1.0/256.0) || v_textureCoordinates.y > (255.0/256.0))\n    {\n        color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\n    float cameraDist;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        cameraDist = max(czm_frustumPlanes.x - czm_frustumPlanes.y, czm_frustumPlanes.w - czm_frustumPlanes.z) * 0.5;\n    }\n    else if (czm_sceneMode == czm_sceneModeColumbusView)\n    {\n        cameraDist = -czm_view[3].z;\n    }\n    else\n    {\n        cameraDist = length(czm_view[3]);\n    }\n    float fadeOutDist = u_lightingFadeDistance.x;\n    float fadeInDist = u_lightingFadeDistance.y;\n    if (czm_sceneMode != czm_sceneMode3D) {\n        vec3 radii = czm_ellipsoidRadii;\n        float maxRadii = max(radii.x, max(radii.y, radii.z));\n        fadeOutDist -= maxRadii;\n        fadeInDist -= maxRadii;\n    }\n    float fade = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\n#else\n    float fade = 0.0;\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n    vec2 waterMaskTranslation = u_waterMaskTranslationAndScale.xy;\n    vec2 waterMaskScale = u_waterMaskTranslationAndScale.zw;\n    vec2 waterMaskTextureCoordinates = v_textureCoordinates.xy * waterMaskScale + waterMaskTranslation;\n    waterMaskTextureCoordinates.y = 1.0 - waterMaskTextureCoordinates.y;\n\n    float mask = texture(u_waterMask, waterMaskTextureCoordinates).r;\n\n    if (mask > 0.0)\n    {\n        mat3 enuToEye = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalEC);\n\n        vec2 ellipsoidTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC);\n        vec2 ellipsoidFlippedTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC.zyx);\n\n        vec2 textureCoordinates = mix(ellipsoidTextureCoordinates, ellipsoidFlippedTextureCoordinates, czm_morphTime * smoothstep(0.9, 0.95, normalMC.z));\n\n        color = computeWaterColor(v_positionEC, textureCoordinates, enuToEye, color, mask, fade);\n    }\n#endif\n\n#ifdef APPLY_MATERIAL\n    czm_materialInput materialInput;\n    materialInput.st = v_textureCoordinates.st;\n    materialInput.normalEC = normalize(v_normalEC);\n    materialInput.positionToEyeEC = -v_positionEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalize(v_normalEC));     \n    materialInput.slope = v_slope;\n    materialInput.height = v_height;\n    materialInput.aspect = v_aspect;\n    czm_material material = czm_getMaterial(materialInput);\n    vec4 materialColor = vec4(material.diffuse, material.alpha);\n    color = alphaBlend(materialColor, color);\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalize(v_normalEC)) * u_lambertDiffuseMultiplier + u_vertexShadowDarkness, 0.0, 1.0);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#elif defined(ENABLE_DAYNIGHT_SHADING)\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0 + 0.3, 0.0, 1.0);\n    diffuseIntensity = mix(1.0, diffuseIntensity, fade);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#else\n    vec4 finalColor = color;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = u_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = u_clippingPlanesEdgeStyle.a;\n\n    if (clipDistance < clippingPlanesEdgeWidth)\n    {\n        finalColor = clippingPlanesEdgeColor;\n    }\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\n    finalColor = vec4(mix(finalColor.rgb, u_fillHighlightColor.rgb, u_fillHighlightColor.a), finalColor.a);\n#endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\n    if (!czm_backFacing())\n    {\n        bool dynamicLighting = false;\n        #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n            dynamicLighting = true;     \n        #endif\n\n        vec3 rayleighColor;\n        vec3 mieColor;\n        float opacity;\n\n        vec3 positionWC;\n        vec3 lightDirection;\n\n        // When the camera is far away (camera distance > nightFadeOutDistance), the scattering is computed in the fragment shader.\n        // Otherwise, the scattering is computed in the vertex shader.\n        #ifdef PER_FRAGMENT_GROUND_ATMOSPHERE\n            positionWC = computeEllipsoidPosition();\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            computeAtmosphereScattering(\n                positionWC,\n                lightDirection,\n                rayleighColor,\n                mieColor,\n                opacity\n            );\n        #else\n            positionWC = v_positionMC;\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            rayleighColor = v_atmosphereRayleighColor;\n            mieColor = v_atmosphereMieColor;\n            opacity = v_atmosphereOpacity;\n        #endif\n\n        rayleighColor = colorCorrect(rayleighColor);\n        mieColor = colorCorrect(mieColor);\n\n        vec4 groundAtmosphereColor = computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n        // Fog is applied to tiles selected for fog, close to the Earth.\n        #ifdef FOG\n            vec3 fogColor = groundAtmosphereColor.rgb;\n            \n            // If there is lighting, apply that to the fog.\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float darken = clamp(dot(normalize(czm_viewerPositionWC), atmosphereLightDirection), u_minimumBrightness, 1.0);\n                fogColor *= darken;                \n            #endif\n\n            #ifndef HDR\n                fogColor.rgb = czm_acesTonemapping(fogColor.rgb);\n                fogColor.rgb = czm_inverseGamma(fogColor.rgb);\n            #endif\n            \n            const float modifier = 0.15;\n            finalColor = vec4(czm_fog(v_distance, finalColor.rgb, fogColor.rgb, modifier), finalColor.a);\n\n        #else\n            // The transmittance is based on optical depth i.e. the length of segment of the ray inside the atmosphere.\n            // This value is larger near the \"circumference\", as it is further away from the camera. We use it to\n            // brighten up that area of the ground atmosphere.\n            const float transmittanceModifier = 0.5;\n            float transmittance = transmittanceModifier + clamp(1.0 - groundAtmosphereColor.a, 0.0, 1.0);\n\n            vec3 finalAtmosphereColor = finalColor.rgb + groundAtmosphereColor.rgb * transmittance;\n\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float fadeInDist = u_nightFadeDistance.x;\n                float fadeOutDist = u_nightFadeDistance.y;\n            \n                float sunlitAtmosphereIntensity = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.05, 1.0);\n                float darken = clamp(dot(normalize(positionWC), atmosphereLightDirection), 0.0, 1.0);\n                vec3 darkenendGroundAtmosphereColor = mix(groundAtmosphereColor.rgb, finalAtmosphereColor.rgb, darken);\n\n                finalAtmosphereColor = mix(darkenendGroundAtmosphereColor, finalAtmosphereColor, sunlitAtmosphereIntensity);\n            #endif\n            \n            #ifndef HDR\n                finalAtmosphereColor.rgb = vec3(1.0) - exp(-fExposure * finalAtmosphereColor.rgb);\n            #else\n                finalAtmosphereColor.rgb = czm_saturation(finalAtmosphereColor.rgb, 1.6);\n            #endif\n            \n            finalColor.rgb = mix(finalColor.rgb, finalAtmosphereColor.rgb, fade);\n        #endif\n    }\n#endif\n\n#ifdef UNDERGROUND_COLOR\n    if (czm_backFacing())\n    {\n        float distanceFromEllipsoid = max(czm_eyeHeight, 0.0);\n        float distance = max(v_distance - distanceFromEllipsoid, 0.0);\n        float blendAmount = interpolateByDistance(u_undergroundColorAlphaByDistance, distance);\n        vec4 undergroundColor = vec4(u_undergroundColor.rgb, u_undergroundColor.a * blendAmount);\n        finalColor = alphaBlend(undergroundColor, finalColor);\n    }\n#endif\n\n#ifdef TRANSLUCENT\n    if (inTranslucencyRectangle())\n    {\n      vec4 alphaByDistance = gl_FrontFacing ? u_frontFaceAlphaByDistance : u_backFaceAlphaByDistance;\n      finalColor.a *= interpolateByDistance(alphaByDistance, v_distance);\n    }\n#endif\n    \n    out_FragColor =  finalColor;\n}\n\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n\nfloat waveFade(float edge0, float edge1, float x)\n{\n    float y = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return pow(1.0 - y, 5.0);\n}\n\nfloat linearFade(float edge0, float edge1, float x)\n{\n    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\n\n// Based on water rendering by Jonas Wagner:\n// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog\n\n// low altitude wave settings\nconst float oceanFrequencyLowAltitude = 825000.0;\nconst float oceanAnimationSpeedLowAltitude = 0.004;\nconst float oceanOneOverAmplitudeLowAltitude = 1.0 / 2.0;\nconst float oceanSpecularIntensity = 0.5;\n\n// high altitude wave settings\nconst float oceanFrequencyHighAltitude = 125000.0;\nconst float oceanAnimationSpeedHighAltitude = 0.008;\nconst float oceanOneOverAmplitudeHighAltitude = 1.0 / 2.0;\n\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float maskValue, float fade)\n{\n    vec3 positionToEyeEC = -positionEyeCoordinates;\n    float positionToEyeECLength = length(positionToEyeEC);\n\n    // The double normalize below works around a bug in Firefox on Android devices.\n    vec3 normalizedPositionToEyeEC = normalize(normalize(positionToEyeEC));\n\n    // Fade out the waves as the camera moves far from the surface.\n    float waveIntensity = waveFade(70000.0, 1000000.0, positionToEyeECLength);\n\n#ifdef SHOW_OCEAN_WAVES\n    // high altitude waves\n    float time = czm_frameNumber * oceanAnimationSpeedHighAltitude;\n    vec4 noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyHighAltitude, time, 0.0);\n    vec3 normalTangentSpaceHighAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeHighAltitude);\n\n    // low altitude waves\n    time = czm_frameNumber * oceanAnimationSpeedLowAltitude;\n    noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyLowAltitude, time, 0.0);\n    vec3 normalTangentSpaceLowAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeLowAltitude);\n\n    // blend the 2 wave layers based on distance to surface\n    float highAltitudeFade = linearFade(0.0, 60000.0, positionToEyeECLength);\n    float lowAltitudeFade = 1.0 - linearFade(20000.0, 60000.0, positionToEyeECLength);\n    vec3 normalTangentSpace =\n        (highAltitudeFade * normalTangentSpaceHighAltitude) +\n        (lowAltitudeFade * normalTangentSpaceLowAltitude);\n    normalTangentSpace = normalize(normalTangentSpace);\n\n    // fade out the normal perturbation as we move farther from the water surface\n    normalTangentSpace.xy *= waveIntensity;\n    normalTangentSpace = normalize(normalTangentSpace);\n#else\n    vec3 normalTangentSpace = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 normalEC = enuToEye * normalTangentSpace;\n\n    const vec3 waveHighlightColor = vec3(0.3, 0.45, 0.6);\n\n    // Use diffuse light to highlight the waves\n    float diffuseIntensity = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * maskValue;\n    vec3 diffuseHighlight = waveHighlightColor * diffuseIntensity * (1.0 - fade);\n\n#ifdef SHOW_OCEAN_WAVES\n    // Where diffuse light is low or non-existent, use wave highlights based solely on\n    // the wave bumpiness and no particular light direction.\n    float tsPerturbationRatio = normalTangentSpace.z;\n    vec3 nonDiffuseHighlight = mix(waveHighlightColor * 5.0 * (1.0 - tsPerturbationRatio), vec3(0.0), diffuseIntensity);\n#else\n    vec3 nonDiffuseHighlight = vec3(0.0);\n#endif\n\n    // Add specular highlights in 3D, and in all modes when zoomed in.\n    float specularIntensity = czm_getSpecular(czm_lightDirectionEC, normalizedPositionToEyeEC, normalEC, 10.0);\n    float surfaceReflectance = mix(0.0, mix(u_zoomedOutOceanSpecularIntensity, oceanSpecularIntensity, waveIntensity), maskValue);\n    float specular = specularIntensity * surfaceReflectance;\n\n#ifdef HDR\n    specular *= 1.4;\n\n    float e = 0.2;\n    float d = 3.3;\n    float c = 1.7;\n\n    vec3 color = imageryColor.rgb + (c * (vec3(e) + imageryColor.rgb * d) * (diffuseHighlight + nonDiffuseHighlight + specular));\n#else\n    vec3 color = imageryColor.rgb + diffuseHighlight + nonDiffuseHighlight + specular;\n#endif\n\n    return vec4(color, imageryColor.a);\n}\n\n#endif // #ifdef SHOW_REFLECTIVE_OCEAN\n"},691760:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef QUANTIZATION_BITS12\nin vec4 compressed0;\nin float compressed1;\n#else\nin vec4 position3DAndHeight;\nin vec4 textureCoordAndEncodedNormals;\n#endif\n\n#ifdef GEODETIC_SURFACE_NORMALS\nin vec3 geodeticSurfaceNormal;\n#endif\n\n#ifdef EXAGGERATION\nuniform vec2 u_terrainExaggerationAndRelativeHeight;\n#endif\n\nuniform vec3 u_center3D;\nuniform mat4 u_modifiedModelView;\nuniform mat4 u_modifiedModelViewProjection;\nuniform vec4 u_tileRectangle;\n\n// Uniforms for 2D Mercator projection\nuniform vec2 u_southAndNorthLatitude;\nuniform vec2 u_southMercatorYAndOneOverHeight;\n\nout vec3 v_positionMC;\nout vec3 v_positionEC;\n\nout vec3 v_textureCoordinates;\nout vec3 v_normalMC;\nout vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nout float v_slope;\nout float v_aspect;\nout float v_height;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nout float v_distance;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE)\nout vec3 v_atmosphereRayleighColor;\nout vec3 v_atmosphereMieColor;\nout float v_atmosphereOpacity;\n#endif\n\n// These functions are generated at runtime.\nvec4 getPosition(vec3 position, float height, vec2 textureCoordinates);\nfloat get2DYPositionFraction(vec2 textureCoordinates);\n\nvec4 getPosition3DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return u_modifiedModelViewProjection * vec4(position, 1.0);\n}\n\nfloat get2DMercatorYPositionFraction(vec2 textureCoordinates)\n{\n    // The width of a tile at level 11, in radians and assuming a single root tile, is\n    //   2.0 * czm_pi / pow(2.0, 11.0)\n    // We want to just linearly interpolate the 2D position from the texture coordinates\n    // when we're at this level or higher.  The constant below is the expression\n    // above evaluated and then rounded up at the 4th significant digit.\n    const float maxTileWidth = 0.003068;\n    float positionFraction = textureCoordinates.y;\n    float southLatitude = u_southAndNorthLatitude.x;\n    float northLatitude = u_southAndNorthLatitude.y;\n    if (northLatitude - southLatitude > maxTileWidth)\n    {\n        float southMercatorY = u_southMercatorYAndOneOverHeight.x;\n        float oneOverMercatorHeight = u_southMercatorYAndOneOverHeight.y;\n\n        float currentLatitude = mix(southLatitude, northLatitude, textureCoordinates.y);\n        currentLatitude = clamp(currentLatitude, -czm_webMercatorMaxLatitude, czm_webMercatorMaxLatitude);\n        positionFraction = czm_latitudeToWebMercatorFraction(currentLatitude, southMercatorY, oneOverMercatorHeight);\n    }\n    return positionFraction;\n}\n\nfloat get2DGeographicYPositionFraction(vec2 textureCoordinates)\n{\n    return textureCoordinates.y;\n}\n\nvec4 getPositionPlanarEarth(vec3 position, float height, vec2 textureCoordinates)\n{\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 rtcPosition2D = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    return u_modifiedModelViewProjection * rtcPosition2D;\n}\n\nvec4 getPosition2DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, 0.0, textureCoordinates);\n}\n\nvec4 getPositionColumbusViewMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, height, textureCoordinates);\n}\n\nvec4 getPositionMorphingMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    // We do not do RTC while morphing, so there is potential for jitter.\n    // This is unlikely to be noticeable, though.\n    vec3 position3DWC = position + u_center3D;\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 position2DWC = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    vec4 morphPosition = czm_columbusViewMorph(position2DWC, vec4(position3DWC, 1.0), czm_morphTime);\n    return czm_modelViewProjection * morphPosition;\n}\n\n#ifdef QUANTIZATION_BITS12\nuniform vec2 u_minMaxHeight;\nuniform mat4 u_scaleAndBias;\n#endif\n\nvoid main()\n{\n#ifdef QUANTIZATION_BITS12\n    vec2 xy = czm_decompressTextureCoordinates(compressed0.x);\n    vec2 zh = czm_decompressTextureCoordinates(compressed0.y);\n    vec3 position = vec3(xy, zh.x);\n    float height = zh.y;\n    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressed0.z);\n\n    height = height * (u_minMaxHeight.y - u_minMaxHeight.x) + u_minMaxHeight.x;\n    position = (u_scaleAndBias * vec4(position, 1.0)).xyz;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = compressed1;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = 0.0;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = compressed0.w;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#else\n    // A single float per element\n    vec3 position = position3DAndHeight.xyz;\n    float height = position3DAndHeight.w;\n    vec2 textureCoordinates = textureCoordAndEncodedNormals.xy;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = textureCoordAndEncodedNormals.w;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = textureCoordAndEncodedNormals.z;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = 0.0;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#endif\n\n    vec3 position3DWC = position + u_center3D;\n\n#ifdef GEODETIC_SURFACE_NORMALS\n    vec3 ellipsoidNormal = geodeticSurfaceNormal;\n#else\n    vec3 ellipsoidNormal = normalize(position3DWC);\n#endif\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    float exaggeration = u_terrainExaggerationAndRelativeHeight.x;\n    float relativeHeight = u_terrainExaggerationAndRelativeHeight.y;\n    float newHeight = (height - relativeHeight) * exaggeration + relativeHeight;\n\n    // stop from going through center of earth\n    float minRadius = min(min(czm_ellipsoidRadii.x, czm_ellipsoidRadii.y), czm_ellipsoidRadii.z);\n    newHeight = max(newHeight, -minRadius);\n\n    vec3 offset = ellipsoidNormal * (newHeight - height);\n    position += offset;\n    position3DWC += offset;\n    height = newHeight;\n#endif\n\n    gl_Position = getPosition(position, height, textureCoordinates);\n\n    v_positionEC = (u_modifiedModelView * vec4(position, 1.0)).xyz;\n    v_positionMC = position3DWC;  // position in model coordinates\n\n    v_textureCoordinates = vec3(textureCoordinates, webMercatorT);\n\n#if defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    vec3 normalMC = czm_octDecode(encodedNormal);\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    vec3 projection = dot(normalMC, ellipsoidNormal) * ellipsoidNormal;\n    vec3 rejection = normalMC - projection;\n    normalMC = normalize(projection + rejection * exaggeration);\n#endif\n\n    v_normalMC = normalMC;\n    v_normalEC = czm_normal3D * v_normalMC;\n#endif\n\n#if defined(FOG) || (defined(GROUND_ATMOSPHERE) && !defined(PER_FRAGMENT_GROUND_ATMOSPHERE))\n\n    bool dynamicLighting = false;\n\n    #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n        dynamicLighting = true;\n    #endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n    vec3 lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(position3DWC));\n\n    computeAtmosphereScattering(\n        position3DWC,\n        lightDirection,\n        v_atmosphereRayleighColor,\n        v_atmosphereMieColor,\n        v_atmosphereOpacity\n    );\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\n    v_distance = length((czm_modelView3D * vec4(position3DWC, 1.0)).xyz);\n#endif\n\n#ifdef APPLY_MATERIAL\n    float northPoleZ = czm_ellipsoidRadii.z;\n    vec3 northPolePositionMC = vec3(0.0, 0.0, northPoleZ);\n    vec3 vectorEastMC = normalize(cross(northPolePositionMC - v_positionMC, ellipsoidNormal));\n    float dotProd = abs(dot(ellipsoidNormal, v_normalMC));\n    v_slope = acos(dotProd);\n    vec3 normalRejected = ellipsoidNormal * dotProd;\n    vec3 normalProjected = v_normalMC - normalRejected;\n    vec3 aspectVector = normalize(normalProjected);\n    v_aspect = acos(dot(aspectVector, vectorEastMC));\n    float determ = dot(cross(vectorEastMC, aspectVector), ellipsoidNormal);\n    v_aspect = czm_branchFreeTernary(determ < 0.0, 2.0 * czm_pi - v_aspect, v_aspect);\n    v_height = height;\n#endif\n}\n"},423603:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity) {\n\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n    \n    float atmosphereInnerRadius = length(positionWC);\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n}\n"},759889:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void filterByPassType(vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {   \n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        if(!model_silhouettePass) {\n            discard;\n        }\n        #else\n        discard;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        discard;\n    }\n}\n\nvoid cpuStylingStage(inout czm_modelMaterial material, SelectedFeature feature)\n{\n    vec4 featureColor = feature.color;\n    if (featureColor.a == 0.0)\n    {\n        discard;\n    }\n\n    // If a feature ID vertex attribute is used, the pass type filter is applied in the vertex shader.\n    // So, we only apply in in the fragment shader if the feature ID texture is used.\n    #if defined(HAS_SELECTED_FEATURE_ID_TEXTURE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(featureColor);\n    #endif\n\n    featureColor = czm_gammaCorrect(featureColor);\n\n    // Classification models compute the diffuse differently.\n    #ifdef HAS_CLASSIFICATION\n    material.diffuse = featureColor.rgb * featureColor.a;\n    #else\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(featureColor.rgb, vec3(1.0), highlight);\n    #endif\n    \n    material.alpha *= featureColor.a;\n}\n"},726401:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void filterByPassType(inout vec3 positionMC, vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {\n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        positionMC *= float(model_silhouettePass);\n        #else\n        positionMC *= 0.0;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        positionMC *= 0.0;\n    }\n}\n\nvoid cpuStylingStage(inout vec3 positionMC, inout SelectedFeature feature)\n{\n    float show = ceil(feature.color.a);\n    positionMC *= show;\n\n    #if defined(HAS_SELECTED_FEATURE_ID_ATTRIBUTE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(positionMC, feature.color);\n    #endif\n}\n"},58747:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void customShaderStage(\n    inout czm_modelMaterial material,\n    ProcessedAttributes attributes,\n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass,\n    MetadataStatistics metadataStatistics\n) {\n    // FragmentInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    FragmentInput fsInput;\n    initializeInputStruct(fsInput, attributes);\n    fsInput.featureIds = featureIds;\n    fsInput.metadata = metadata;\n    fsInput.metadataClass = metadataClass;\n    fsInput.metadataStatistics = metadataStatistics;\n    fragmentMain(fsInput, material);\n}\n"},181163:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void customShaderStage(\n    inout czm_modelVertexOutput vsOutput, \n    inout ProcessedAttributes attributes, \n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass,\n    MetadataStatistics metadataStatistics\n) {\n    // VertexInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    VertexInput vsInput;\n    initializeInputStruct(vsInput, attributes);\n    vsInput.featureIds = featureIds;\n    vsInput.metadata = metadata;\n    vsInput.metadataClass = metadataClass;\n    vsInput.metadataStatistics = metadataStatistics;\n    vertexMain(vsInput, vsOutput);\n    attributes.positionMC = vsOutput.positionMC;\n}\n"},625322:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) {\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n}\n"},204410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) \n{\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n  setFeatureIdVaryings();\n}\n"},896077:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void geometryStage(out ProcessedAttributes attributes)\n{\n  attributes.positionMC = v_positionMC;\n  attributes.positionEC = v_positionEC;\n\n  #ifdef COMPUTE_POSITION_WC_CUSTOM_SHADER\n  attributes.positionWC = v_positionWC;\n  #endif\n\n  #ifdef HAS_NORMALS\n  // renormalize after interpolation\n  attributes.normalEC = normalize(v_normalEC);\n  #endif\n\n  #ifdef HAS_TANGENTS\n  attributes.tangentEC = normalize(v_tangentEC);\n  #endif\n\n  #ifdef HAS_BITANGENTS\n  attributes.bitangentEC = normalize(v_bitangentEC);\n  #endif\n\n  // Everything else is dynamically generated in GeometryPipelineStage\n  setDynamicVaryings(attributes);\n}\n"},575581:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="vec4 geometryStage(inout ProcessedAttributes attributes, mat4 modelView, mat3 normal) \n{\n    vec4 computedPosition;\n\n    // Compute positions in different coordinate systems\n    vec3 positionMC = attributes.positionMC;\n    v_positionMC = positionMC;\n    v_positionEC = (modelView * vec4(positionMC, 1.0)).xyz;\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    vec3 position2D = attributes.position2D;\n    vec3 positionEC = (u_modelView2D * vec4(position2D, 1.0)).xyz;\n    computedPosition = czm_projection * vec4(positionEC, 1.0);\n    #else\n    computedPosition = czm_projection * vec4(v_positionEC, 1.0);\n    #endif\n\n    // Sometimes the custom shader and/or style needs this\n    #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE)\n    // Note that this is a 32-bit position which may result in jitter on small\n    // scales.\n    v_positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;\n    #endif\n\n    #ifdef HAS_NORMALS\n    v_normalEC = normalize(normal * attributes.normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    v_tangentEC = normalize(normal * attributes.tangentMC);    \n    #endif\n\n    #ifdef HAS_BITANGENTS\n    v_bitangentEC = normalize(normal * attributes.bitangentMC);\n    #endif\n\n    // All other varyings need to be dynamically generated in\n    // GeometryPipelineStage\n    setDynamicVaryings(attributes);\n    \n    return computedPosition;\n}\n"},490129:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="vec3 proceduralIBL(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n) {\n    vec3 v = -positionEC;\n    vec3 positionWC = vec3(czm_inverseView * vec4(positionEC, 1.0));\n    vec3 vWC = -normalize(positionWC);\n    vec3 l = normalize(lightDirectionEC);\n    vec3 n = normalEC;\n    vec3 r = normalize(czm_inverseViewRotation * normalize(reflect(v, n)));\n\n    float NdotL = clamp(dot(n, l), 0.001, 1.0);\n    float NdotV = abs(dot(n, v)) + 0.001;\n\n    // Figure out if the reflection vector hits the ellipsoid\n    float vertexRadius = length(positionWC);\n    float horizonDotNadir = 1.0 - min(1.0, czm_ellipsoidRadii.x / vertexRadius);\n    float reflectionDotNadir = dot(r, normalize(positionWC));\n    // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that's a rotation about Z.\n    r.x = -r.x;\n    r = -normalize(czm_temeToPseudoFixed * r);\n    r.x = -r.x;\n\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    float roughness = pbrParameters.roughness;\n    vec3 specularColor = pbrParameters.f0;\n\n    float inverseRoughness = 1.04 - roughness;\n    inverseRoughness *= inverseRoughness;\n    vec3 sceneSkyBox = czm_textureCube(czm_environmentMap, r).rgb * inverseRoughness;\n\n    float atmosphereHeight = 0.05;\n    float blendRegionSize = 0.1 * ((1.0 - inverseRoughness) * 8.0 + 1.1 - horizonDotNadir);\n    float blendRegionOffset = roughness * -1.0;\n    float farAboveHorizon = clamp(horizonDotNadir - blendRegionSize * 0.5 + blendRegionOffset, 1.0e-10 - blendRegionSize, 0.99999);\n    float aroundHorizon = clamp(horizonDotNadir + blendRegionSize * 0.5, 1.0e-10 - blendRegionSize, 0.99999);\n    float farBelowHorizon = clamp(horizonDotNadir + blendRegionSize * 1.5, 1.0e-10 - blendRegionSize, 0.99999);\n    float smoothstepHeight = smoothstep(0.0, atmosphereHeight, horizonDotNadir);\n    vec3 belowHorizonColor = mix(vec3(0.1, 0.15, 0.25), vec3(0.4, 0.7, 0.9), smoothstepHeight);\n    vec3 nadirColor = belowHorizonColor * 0.5;\n    vec3 aboveHorizonColor = mix(vec3(0.9, 1.0, 1.2), belowHorizonColor, roughness * 0.5);\n    vec3 blueSkyColor = mix(vec3(0.18, 0.26, 0.48), aboveHorizonColor, reflectionDotNadir * inverseRoughness * 0.5 + 0.75);\n    vec3 zenithColor = mix(blueSkyColor, sceneSkyBox, smoothstepHeight);\n    vec3 blueSkyDiffuseColor = vec3(0.7, 0.85, 0.9); \n    float diffuseIrradianceFromEarth = (1.0 - horizonDotNadir) * (reflectionDotNadir * 0.25 + 0.75) * smoothstepHeight;  \n    float diffuseIrradianceFromSky = (1.0 - smoothstepHeight) * (1.0 - (reflectionDotNadir * 0.25 + 0.25));\n    vec3 diffuseIrradiance = blueSkyDiffuseColor * clamp(diffuseIrradianceFromEarth + diffuseIrradianceFromSky, 0.0, 1.0);\n    float notDistantRough = (1.0 - horizonDotNadir * roughness * 0.8);\n    vec3 specularIrradiance = mix(zenithColor, aboveHorizonColor, smoothstep(farAboveHorizon, aroundHorizon, reflectionDotNadir) * notDistantRough);\n    specularIrradiance = mix(specularIrradiance, belowHorizonColor, smoothstep(aroundHorizon, farBelowHorizon, reflectionDotNadir) * inverseRoughness);\n    specularIrradiance = mix(specularIrradiance, nadirColor, smoothstep(farBelowHorizon, 1.0, reflectionDotNadir) * inverseRoughness);\n\n    // Luminance model from page 40 of http://silviojemma.com/public/papers/lighting/spherical-harmonic-lighting.pdf\n    #ifdef USE_SUN_LUMINANCE \n    // Angle between sun and zenith\n    float LdotZenith = clamp(dot(normalize(czm_inverseViewRotation * l), vWC), 0.001, 1.0);\n    float S = acos(LdotZenith);\n    // Angle between zenith and current pixel\n    float NdotZenith = clamp(dot(normalize(czm_inverseViewRotation * n), vWC), 0.001, 1.0);\n    // Angle between sun and current pixel\n    float gamma = acos(NdotL);\n    float numerator = ((0.91 + 10.0 * exp(-3.0 * gamma) + 0.45 * pow(NdotL, 2.0)) * (1.0 - exp(-0.32 / NdotZenith)));\n    float denominator = (0.91 + 10.0 * exp(-3.0 * S) + 0.45 * pow(LdotZenith,2.0)) * (1.0 - exp(-0.32));\n    float luminance = model_luminanceAtZenith * (numerator / denominator);\n    #endif \n\n    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;\n    vec3 iblColor = (diffuseIrradiance * diffuseColor * model_iblFactor.x) + (specularIrradiance * czm_srgbToLinear(specularColor * brdfLut.x + brdfLut.y) * model_iblFactor.y);\n    float maximumComponent = max(max(lightColorHdr.x, lightColorHdr.y), lightColorHdr.z);\n    vec3 lightColor = lightColorHdr / max(maximumComponent, 1.0);\n    iblColor *= lightColor;\n\n    #ifdef USE_SUN_LUMINANCE \n    iblColor *= luminance;\n    #endif\n\n    return iblColor;\n}\n\n#if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\nvec3 textureIBL(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    czm_pbrParameters pbrParameters\n) {\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    float roughness = pbrParameters.roughness;\n    vec3 specularColor = pbrParameters.f0;\n\n    vec3 v = -positionEC;\n    vec3 n = normalEC;\n    vec3 l = normalize(lightDirectionEC);\n    vec3 h = normalize(v + l);\n\n    float NdotV = abs(dot(n, v)) + 0.001;\n    float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n    const mat3 yUpToZUp = mat3(\n        -1.0, 0.0, 0.0,\n        0.0, 0.0, -1.0, \n        0.0, 1.0, 0.0\n    ); \n    vec3 cubeDir = normalize(yUpToZUp * model_iblReferenceFrameMatrix * normalize(reflect(-v, n))); \n\n    #ifdef DIFFUSE_IBL \n        #ifdef CUSTOM_SPHERICAL_HARMONICS\n        vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, model_sphericalHarmonicCoefficients); \n        #else\n        vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); \n        #endif \n    #else \n    vec3 diffuseIrradiance = vec3(0.0); \n    #endif \n\n    #ifdef SPECULAR_IBL\n    vec3 r0 = specularColor.rgb;\n    float reflectance = max(max(r0.r, r0.g), r0.b);\n    vec3 r90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));\n    vec3 F = fresnelSchlick2(r0, r90, VdotH);\n    \n    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;\n      #ifdef CUSTOM_SPECULAR_IBL \n      vec3 specularIBL = czm_sampleOctahedralProjection(model_specularEnvironmentMaps, model_specularEnvironmentMapsSize, cubeDir, roughness * model_specularEnvironmentMapsMaximumLOD, model_specularEnvironmentMapsMaximumLOD);\n      #else \n      vec3 specularIBL = czm_sampleOctahedralProjection(czm_specularEnvironmentMaps, czm_specularEnvironmentMapSize, cubeDir,  roughness * czm_specularEnvironmentMapsMaximumLOD, czm_specularEnvironmentMapsMaximumLOD);\n      #endif \n    specularIBL *= F * brdfLut.x + brdfLut.y;\n    #else \n    vec3 specularIBL = vec3(0.0); \n    #endif\n\n    return diffuseColor * diffuseIrradiance + specularColor * specularIBL;\n}\n#endif\n\nvec3 imageBasedLightingStage(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n) {\n  #if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\n  // Environment maps were provided, use them for IBL\n  return textureIBL(\n      positionEC,\n      normalEC,\n      lightDirectionEC,\n      pbrParameters\n  );\n  #else\n  // Use the procedural IBL if there are no environment maps\n  return proceduralIBL(\n      positionEC,\n      normalEC,\n      lightDirectionEC,\n      lightColorHdr,\n      pbrParameters\n  );\n  #endif\n}"},75899:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="mat4 getInstancingTransform()\n{\n    mat4 instancingTransform;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform = mat4(\n        a_instancingTransformRow0.x, a_instancingTransformRow1.x, a_instancingTransformRow2.x, 0.0, // Column 1\n        a_instancingTransformRow0.y, a_instancingTransformRow1.y, a_instancingTransformRow2.y, 0.0, // Column 2\n        a_instancingTransformRow0.z, a_instancingTransformRow1.z, a_instancingTransformRow2.z, 0.0, // Column 3\n        a_instancingTransformRow0.w, a_instancingTransformRow1.w, a_instancingTransformRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation = a_instanceTranslation;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation.x, translation.y, translation.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform;\n}\n\n#ifdef USE_2D_INSTANCING\nmat4 getInstancingTransform2D()\n{\n    mat4 instancingTransform2D;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform2D = mat4(\n        a_instancingTransform2DRow0.x, a_instancingTransform2DRow1.x, a_instancingTransform2DRow2.x, 0.0, // Column 1\n        a_instancingTransform2DRow0.y, a_instancingTransform2DRow1.y, a_instancingTransform2DRow2.y, 0.0, // Column 2\n        a_instancingTransform2DRow0.z, a_instancingTransform2DRow1.z, a_instancingTransform2DRow2.z, 0.0, // Column 3\n        a_instancingTransform2DRow0.w, a_instancingTransform2DRow1.w, a_instancingTransform2DRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation2D = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation2D = a_instanceTranslation2D;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform2D = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation2D.x, translation2D.y, translation2D.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform2D;\n}\n#endif\n"},295673:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void instancingStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    \n    mat4 instancingTransform = getInstancingTransform();\n    \n    attributes.positionMC = (instancingTransform * vec4(positionMC, 1.0)).xyz;\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = (instancingTransform * vec4(normalMC, 0.0)).xyz;\n    #endif\n\n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n"},370988:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void legacyInstancingStage(\n    inout ProcessedAttributes attributes,\n    out mat4 instanceModelView,\n    out mat3 instanceModelViewInverseTranspose)\n{\n    vec3 positionMC = attributes.positionMC;\n\n    mat4 instancingTransform = getInstancingTransform();\n \n    mat4 instanceModel = instancingTransform * u_instance_nodeTransform;\n    instanceModelView = u_instance_modifiedModelView;\n    instanceModelViewInverseTranspose = mat3(u_instance_modifiedModelView * instanceModel);\n\n    attributes.positionMC = (instanceModel * vec4(positionMC, 1.0)).xyz;\n    \n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n"},419421:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef LIGHTING_PBR\nvec3 computePbrLighting(czm_modelMaterial inputMaterial, ProcessedAttributes attributes)\n{\n    czm_pbrParameters pbrParameters;\n    pbrParameters.diffuseColor = inputMaterial.diffuse;\n    pbrParameters.f0 = inputMaterial.specular;\n    pbrParameters.roughness = inputMaterial.roughness;\n    \n    #ifdef USE_CUSTOM_LIGHT_COLOR\n    vec3 lightColorHdr = model_lightColorHdr;\n    #else\n    vec3 lightColorHdr = czm_lightColorHdr;\n    #endif\n\n    vec3 color = inputMaterial.diffuse;\n    #ifdef HAS_NORMALS\n    color = czm_pbrLighting(\n        attributes.positionEC,\n        inputMaterial.normalEC,\n        czm_lightDirectionEC,\n        lightColorHdr,\n        pbrParameters\n    );\n\n        #ifdef USE_IBL_LIGHTING\n        color += imageBasedLightingStage(\n            attributes.positionEC,\n            inputMaterial.normalEC,\n            czm_lightDirectionEC,\n            lightColorHdr,\n            pbrParameters\n        );\n        #endif\n    #endif\n\n    color *= inputMaterial.occlusion;\n    color += inputMaterial.emissive;\n\n    // In HDR mode, the frame buffer is in linear color space. The\n    // post-processing stages (see PostProcessStageCollection) will handle\n    // tonemapping. However, if HDR is not enabled, we must tonemap else large\n    // values may be clamped to 1.0\n    #ifndef HDR \n    color = czm_acesTonemapping(color);\n    #endif \n\n    return color;\n}\n#endif\n\nvoid lightingStage(inout czm_modelMaterial material, ProcessedAttributes attributes)\n{\n    // Even though the lighting will only set the diffuse color,\n    // pass all other properties so further stages have access to them.\n    vec3 color = vec3(0.0);\n\n    #ifdef LIGHTING_PBR\n    color = computePbrLighting(material, attributes);\n    #else // unlit\n    color = material.diffuse;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    // The colors resulting from point cloud styles are adjusted differently.\n    color = czm_gammaCorrect(color);\n    #elif !defined(HDR)\n    // If HDR is not enabled, the frame buffer stores sRGB colors rather than\n    // linear colors so the linear value must be converted.\n    color = czm_linearToSrgb(color);\n    #endif\n\n    material.diffuse = color;\n}\n"},563402:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// If the style color is white, it implies the feature has not been styled.\nbool isDefaultStyleColor(vec3 color)\n{\n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3)));\n}\n\nvec3 blend(vec3 sourceColor, vec3 styleColor, float styleColorBlend)\n{\n    vec3 blendColor = mix(sourceColor, styleColor, styleColorBlend);\n    vec3 color = isDefaultStyleColor(styleColor.rgb) ? sourceColor : blendColor;\n    return color;\n}\n\nvec2 computeTextureTransform(vec2 texCoord, mat3 textureTransform)\n{\n    return vec2(textureTransform * vec3(texCoord, 1.0));\n}\n\n#ifdef HAS_NORMALS\nvec3 computeNormal(ProcessedAttributes attributes)\n{\n    // Geometry normal. This is already normalized \n    vec3 ng = attributes.normalEC;\n\n    vec3 normal = ng;\n    #if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)\n    vec2 normalTexCoords = TEXCOORD_NORMAL;\n        #ifdef HAS_NORMAL_TEXTURE_TRANSFORM\n        normalTexCoords = computeTextureTransform(normalTexCoords, u_normalTextureTransform);\n        #endif\n\n        // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set\n        #ifdef HAS_BITANGENTS\n        vec3 t = attributes.tangentEC;\n        vec3 b = attributes.bitangentEC;\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture(u_normalTexture, normalTexCoords).rgb;\n        normal = normalize(tbn * (2.0 * n - 1.0));\n        #elif (__VERSION__ == 300 || defined(GL_OES_standard_derivatives))\n        // If derivatives are available (not IE 10), compute tangents\n        vec3 positionEC = attributes.positionEC;\n        vec3 pos_dx = dFdx(positionEC);\n        vec3 pos_dy = dFdy(positionEC);\n        vec3 tex_dx = dFdx(vec3(normalTexCoords,0.0));\n        vec3 tex_dy = dFdy(vec3(normalTexCoords,0.0));\n        vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n        t = normalize(t - ng * dot(ng, t));\n        vec3 b = normalize(cross(ng, t));\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture(u_normalTexture, normalTexCoords).rgb;\n        normal = normalize(tbn * (2.0 * n - 1.0));\n        #endif\n    #endif\n\n    #ifdef HAS_DOUBLE_SIDED_MATERIAL\n    if (czm_backFacing()) {\n        normal = -normal;\n    }\n    #endif\n\n    return normal;\n}\n#endif\n\nvoid materialStage(inout czm_modelMaterial material, ProcessedAttributes attributes, SelectedFeature feature)\n{\n    #ifdef HAS_NORMALS\n    material.normalEC = computeNormal(attributes);\n    #endif\n\n    vec4 baseColorWithAlpha = vec4(1.0);\n    // Regardless of whether we use PBR, set a base color\n    #ifdef HAS_BASE_COLOR_TEXTURE\n    vec2 baseColorTexCoords = TEXCOORD_BASE_COLOR;\n\n        #ifdef HAS_BASE_COLOR_TEXTURE_TRANSFORM\n        baseColorTexCoords = computeTextureTransform(baseColorTexCoords, u_baseColorTextureTransform);\n        #endif\n\n    baseColorWithAlpha = czm_srgbToLinear(texture(u_baseColorTexture, baseColorTexCoords));\n\n        #ifdef HAS_BASE_COLOR_FACTOR\n        baseColorWithAlpha *= u_baseColorFactor;\n        #endif\n    #elif defined(HAS_BASE_COLOR_FACTOR)\n    baseColorWithAlpha = u_baseColorFactor;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    baseColorWithAlpha = v_pointCloudColor;\n    #elif defined(HAS_COLOR_0)\n    vec4 color = attributes.color_0;\n        // .pnts files store colors in the sRGB color space\n        #ifdef HAS_SRGB_COLOR\n        color = czm_srgbToLinear(color);\n        #endif\n    baseColorWithAlpha *= color;\n    #endif\n\n    material.diffuse = baseColorWithAlpha.rgb;\n    material.alpha = baseColorWithAlpha.a;\n\n    #ifdef USE_CPU_STYLING\n    material.diffuse = blend(material.diffuse, feature.color.rgb, model_colorBlend);\n    #endif\n\n    #ifdef HAS_OCCLUSION_TEXTURE\n    vec2 occlusionTexCoords = TEXCOORD_OCCLUSION;\n        #ifdef HAS_OCCLUSION_TEXTURE_TRANSFORM\n        occlusionTexCoords = computeTextureTransform(occlusionTexCoords, u_occlusionTextureTransform);\n        #endif\n    material.occlusion = texture(u_occlusionTexture, occlusionTexCoords).r;\n    #endif\n\n    #ifdef HAS_EMISSIVE_TEXTURE\n    vec2 emissiveTexCoords = TEXCOORD_EMISSIVE;\n        #ifdef HAS_EMISSIVE_TEXTURE_TRANSFORM\n        emissiveTexCoords = computeTextureTransform(emissiveTexCoords, u_emissiveTextureTransform);\n        #endif\n\n    vec3 emissive = czm_srgbToLinear(texture(u_emissiveTexture, emissiveTexCoords).rgb);\n        #ifdef HAS_EMISSIVE_FACTOR\n        emissive *= u_emissiveFactor;\n        #endif\n    material.emissive = emissive;\n    #elif defined(HAS_EMISSIVE_FACTOR)\n    material.emissive = u_emissiveFactor;\n    #endif\n\n    #if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)\n        #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE\n        vec2 specularGlossinessTexCoords = TEXCOORD_SPECULAR_GLOSSINESS;\n          #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE_TRANSFORM\n          specularGlossinessTexCoords = computeTextureTransform(specularGlossinessTexCoords, u_specularGlossinessTextureTransform);\n          #endif\n\n        vec4 specularGlossiness = czm_srgbToLinear(texture(u_specularGlossinessTexture, specularGlossinessTexCoords));\n        vec3 specular = specularGlossiness.rgb;\n        float glossiness = specularGlossiness.a;\n            #ifdef HAS_SPECULAR_FACTOR\n            specular *= u_specularFactor;\n            #endif\n\n            #ifdef HAS_GLOSSINESS_FACTOR\n            glossiness *= u_glossinessFactor;\n            #endif\n        #else\n            #ifdef HAS_SPECULAR_FACTOR\n            vec3 specular = clamp(u_specularFactor, vec3(0.0), vec3(1.0));\n            #else\n            vec3 specular = vec3(1.0);\n            #endif\n\n            #ifdef HAS_GLOSSINESS_FACTOR\n            float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);\n            #else\n            float glossiness = 1.0;\n            #endif\n        #endif\n\n        #ifdef HAS_DIFFUSE_TEXTURE\n        vec2 diffuseTexCoords = TEXCOORD_DIFFUSE;\n            #ifdef HAS_DIFFUSE_TEXTURE_TRANSFORM\n            diffuseTexCoords = computeTextureTransform(diffuseTexCoords, u_diffuseTextureTransform);\n            #endif\n\n        vec4 diffuse = czm_srgbToLinear(texture(u_diffuseTexture, diffuseTexCoords));\n            #ifdef HAS_DIFFUSE_FACTOR\n            diffuse *= u_diffuseFactor;\n            #endif\n        #elif defined(HAS_DIFFUSE_FACTOR)\n        vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));\n        #else\n        vec4 diffuse = vec4(1.0);\n        #endif\n    czm_pbrParameters parameters = czm_pbrSpecularGlossinessMaterial(\n      diffuse.rgb,\n      specular,\n      glossiness\n    );\n    material.diffuse = parameters.diffuseColor;\n    // the specular glossiness extension's alpha overrides anything set\n    // by the base material.\n    material.alpha = diffuse.a;\n    material.specular = parameters.f0;\n    material.roughness = parameters.roughness;\n    #elif defined(LIGHTING_PBR)\n        #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE\n        vec2 metallicRoughnessTexCoords = TEXCOORD_METALLIC_ROUGHNESS;\n            #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE_TRANSFORM\n            metallicRoughnessTexCoords = computeTextureTransform(metallicRoughnessTexCoords, u_metallicRoughnessTextureTransform);\n            #endif\n\n        vec3 metallicRoughness = texture(u_metallicRoughnessTexture, metallicRoughnessTexCoords).rgb;\n        float metalness = clamp(metallicRoughness.b, 0.0, 1.0);\n        float roughness = clamp(metallicRoughness.g, 0.04, 1.0);\n            #ifdef HAS_METALLIC_FACTOR\n            metalness *= u_metallicFactor;\n            #endif\n\n            #ifdef HAS_ROUGHNESS_FACTOR\n            roughness *= u_roughnessFactor;\n            #endif\n        #else\n            #ifdef HAS_METALLIC_FACTOR\n            float metalness = clamp(u_metallicFactor, 0.0, 1.0);\n            #else\n            float metalness = 1.0;\n            #endif\n\n            #ifdef HAS_ROUGHNESS_FACTOR\n            float roughness = clamp(u_roughnessFactor, 0.04, 1.0);\n            #else\n            float roughness = 1.0;\n            #endif\n        #endif\n    czm_pbrParameters parameters = czm_pbrMetallicRoughnessMaterial(\n      material.diffuse,\n      metalness,\n      roughness\n    );\n    material.diffuse = parameters.diffuseColor;\n    material.specular = parameters.f0;\n    material.roughness = parameters.roughness;\n    #endif\n}\n"},143938:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void metadataStage(\n  out Metadata metadata,\n  out MetadataClass metadataClass,\n  out MetadataStatistics metadataStatistics,\n  ProcessedAttributes attributes\n  )\n{\n  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);\n}\n"},801202:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void metadataStage(\n  out Metadata metadata,\n  out MetadataClass metadataClass,\n  out MetadataStatistics metadataStatistics,\n  ProcessedAttributes attributes\n  )\n{\n  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);\n  setMetadataVaryings();\n}\n"},403139:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef USE_CLIPPING_PLANES_FLOAT_TEXTURE\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int pixY = clippingPlaneNumber / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneNumber - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 plane = texture(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n#else\n// Handle uint8 clipping texture instead\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2; // clipping planes are two pixels each\n    int pixY = clippingPlaneStartIndex / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneStartIndex - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + pixelWidth, v)));\n    return czm_transformPlane(plane, transform);\n}\n#endif\n\nfloat clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix) {\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float pixelWidth = czm_metersPerPixel(position);\n    \n    #ifdef UNION_CLIPPING_REGIONS\n    float clipAmount; // For union planes, we want to get the min distance. So we set the initial value to the first plane distance in the loop below.\n    #else\n    float clipAmount = 0.0;\n    bool clipped = true;\n    #endif\n\n    for (int i = 0; i < CLIPPING_PLANES_LENGTH; ++i) {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        \n        #ifdef UNION_CLIPPING_REGIONS\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0) {\n            discard;\n        }\n        #else\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n        #endif\n    }\n\n    #ifndef UNION_CLIPPING_REGIONS\n    if (clipped) {\n        discard;\n    }\n    #endif\n    \n    return clipAmount;\n}\n\nvoid modelClippingPlanesStage(inout vec4 color)\n{\n    float clipDistance = clip(gl_FragCoord, model_clippingPlanes, model_clippingPlanesMatrix);\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = model_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = model_clippingPlanesEdgeStyle.a;\n    \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) {\n        color = clippingPlanesEdgeColor;\n    }\n}\n"},325161:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void modelColorStage(inout czm_modelMaterial material)\n{\n    material.diffuse = mix(material.diffuse, model_color.rgb, model_colorBlend);\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(model_color.rgb, vec3(1.0), highlight);\n    material.alpha *= model_color.a;\n}"},261126:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="czm_modelMaterial defaultModelMaterial()\n{\n    czm_modelMaterial material;\n    material.diffuse = vec3(0.0);\n    material.specular = vec3(1.0);\n    material.roughness = 1.0;\n    material.occlusion = 1.0;\n    material.normalEC = vec3(0.0, 0.0, 1.0);\n    material.emissive = vec3(0.0);\n    material.alpha = 1.0;\n    return material;\n}\n\nvec4 handleAlpha(vec3 color, float alpha)\n{\n    #ifdef ALPHA_MODE_MASK\n    if (alpha < u_alphaCutoff) {\n        discard;\n    }\n    #endif\n\n    return vec4(color, alpha);\n}\n\nSelectedFeature selectedFeature;\n\nvoid main()\n{\n    #ifdef HAS_MODEL_SPLITTER\n    modelSplitterStage();\n    #endif\n\n    czm_modelMaterial material = defaultModelMaterial();\n\n    ProcessedAttributes attributes;\n    geometryStage(attributes);\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    MetadataStatistics metadataStatistics;\n    metadataStage(metadata, metadataClass, metadataStatistics, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    selectedFeatureIdStage(selectedFeature, featureIds);\n    #endif\n\n    #ifndef CUSTOM_SHADER_REPLACE_MATERIAL\n    materialStage(material, attributes, selectedFeature);\n    #endif\n\n    #ifdef HAS_CUSTOM_FRAGMENT_SHADER\n    customShaderStage(material, attributes, featureIds, metadata, metadataClass, metadataStatistics);\n    #endif\n\n    lightingStage(material, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    cpuStylingStage(material, selectedFeature);\n    #endif\n\n    #ifdef HAS_MODEL_COLOR\n    modelColorStage(material);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage(material);\n    #endif\n\n    vec4 color = handleAlpha(material.diffuse, material.alpha);\n\n    #ifdef HAS_CLIPPING_PLANES\n    modelClippingPlanesStage(color);\n    #endif\n\n    #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS)\n    silhouetteStage(color);\n    #endif\n\n    out_FragColor = color;\n}\n"},221334:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void silhouetteStage(inout vec4 color) {\n    if(model_silhouettePass) {\n        color = czm_gammaCorrect(model_silhouetteColor);\n    }\n}"},980678:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) {\n     #ifdef HAS_NORMALS\n     if(model_silhouettePass) {\n          vec3 normal = normalize(czm_normal3D * attributes.normalMC);\n          normal.x *= czm_projection[0][0];\n          normal.y *= czm_projection[1][1];\n          positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z;\n    }\n    #endif\n}\n"},768601:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void modelSplitterStage()\n{\n    // Don't split when rendering the shadow map, because it is rendered from\n    // the perspective of a totally different camera.\n#ifndef SHADOW_MAP\n    if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n#endif\n}\n"},501782:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="precision highp float;\n\nczm_modelVertexOutput defaultVertexOutput(vec3 positionMC) {\n    czm_modelVertexOutput vsOutput;\n    vsOutput.positionMC = positionMC;\n    vsOutput.pointSize = 1.0;\n    return vsOutput;\n}\n\nvoid main() \n{\n    // Initialize the attributes struct with all\n    // attributes except quantized ones.\n    ProcessedAttributes attributes;\n    initializeAttributes(attributes);\n\n    // Dequantize the quantized ones and add them to the\n    // attributes struct.\n    #ifdef USE_DEQUANTIZATION\n    dequantizationStage(attributes);\n    #endif\n\n    #ifdef HAS_MORPH_TARGETS\n    morphTargetsStage(attributes);\n    #endif\n\n    #ifdef HAS_SKINNING\n    skinningStage(attributes);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage();\n    #endif\n\n    // Compute the bitangent according to the formula in the glTF spec.\n    // Normal and tangents can be affected by morphing and skinning, so\n    // the bitangent should not be computed until their values are finalized.\n    #ifdef HAS_BITANGENTS\n    attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC);\n    #endif\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    SelectedFeature feature;\n    selectedFeatureIdStage(feature, featureIds);\n    // Handle any show properties that come from the style.\n    cpuStylingStage(attributes.positionMC, feature);\n    #endif\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    // The scene mode 2D pipeline stage and instancing stage add a different\n    // model view matrix to accurately project the model to 2D. However, the\n    // output positions and normals should be transformed by the 3D matrices\n    // to keep the data the same for the fragment shader.\n    mat4 modelView = czm_modelView3D;\n    mat3 normal = czm_normal3D;\n    #else\n    // These are used for individual model projection because they will\n    // automatically change based on the scene mode.\n    mat4 modelView = czm_modelView;\n    mat3 normal = czm_normal;\n    #endif\n\n    // Update the position for this instance in place\n    #ifdef HAS_INSTANCING\n\n        // The legacy instance stage is used when rendering i3dm models that \n        // encode instances transforms in world space, as opposed to glTF models\n        // that use EXT_mesh_gpu_instancing, where instance transforms are encoded\n        // in object space.\n        #ifdef USE_LEGACY_INSTANCING\n        mat4 instanceModelView;\n        mat3 instanceModelViewInverseTranspose;\n        \n        legacyInstancingStage(attributes, instanceModelView, instanceModelViewInverseTranspose);\n\n        modelView = instanceModelView;\n        normal = instanceModelViewInverseTranspose;\n        #else\n        instancingStage(attributes);\n        #endif\n\n        #ifdef USE_PICKING\n        v_pickColor = a_pickColor;\n        #endif\n\n    #endif\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    MetadataStatistics metadataStatistics;\n    metadataStage(metadata, metadataClass, metadataStatistics, attributes);\n\n    #ifdef HAS_CUSTOM_VERTEX_SHADER\n    czm_modelVertexOutput vsOutput = defaultVertexOutput(attributes.positionMC);\n    customShaderStage(vsOutput, attributes, featureIds, metadata, metadataClass, metadataStatistics);\n    #endif\n\n    // Compute the final position in each coordinate system needed.\n    // This returns the value that will be assigned to gl_Position.\n    vec4 positionClip = geometryStage(attributes, modelView, normal);    \n\n    #ifdef HAS_SILHOUETTE\n    silhouetteStage(attributes, positionClip);\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_SHOW_STYLE\n    float show = pointCloudShowStylingStage(attributes, metadata);\n    #else\n    float show = 1.0;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\n    show *= pointCloudBackFaceCullingStage();\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    v_pointCloudColor = pointCloudColorStylingStage(attributes, metadata);\n    #endif\n\n    #ifdef PRIMITIVE_TYPE_POINTS\n        #ifdef HAS_CUSTOM_VERTEX_SHADER\n        gl_PointSize = vsOutput.pointSize;\n        #elif defined(HAS_POINT_CLOUD_POINT_SIZE_STYLE) || defined(HAS_POINT_CLOUD_ATTENUATION)\n        gl_PointSize = pointCloudPointSizeStylingStage(attributes, metadata);\n        #else\n        gl_PointSize = 1.0;\n        #endif\n\n        gl_PointSize *= show;\n    #endif\n\n    gl_Position = show * positionClip;\n}\n"},828077:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void morphTargetsStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    attributes.positionMC = getMorphedPosition(positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = getMorphedNormal(normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = getMorphedTangent(tangentMC);\n    #endif\n}"},7562:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="float getPointSizeFromAttenuation(vec3 positionEC) {\n  // Variables are packed into a single vector to minimize gl.uniformXXX() calls\n  float pointSize = model_pointCloudParameters.x;\n  float geometricError = model_pointCloudParameters.y;\n  float depthMultiplier = model_pointCloudParameters.z;\n\n  float depth = -positionEC.z;\n  return min((geometricError / depth) * depthMultiplier, pointSize);\n}\n\n#ifdef HAS_POINT_CLOUD_SHOW_STYLE\nfloat pointCloudShowStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getShowFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_COLOR_STYLE\nvec4 pointCloudColorStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return getColorFromStyle(attributes, metadata, tiles3d_tileset_time);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_POINT_SIZE_STYLE\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getPointSizeFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#elif defined(HAS_POINT_CLOUD_ATTENUATION)\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  return getPointSizeFromAttenuation(v_positionEC);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\nfloat pointCloudBackFaceCullingStage() {\n  #if defined(HAS_NORMALS) && !defined(HAS_DOUBLE_SIDED_MATERIAL)\n  // This needs to be computed in eye coordinates so we can't use attributes.normalMC\n  return step(-v_normalEC.z, 0.0);\n  #else\n  return 1.0;\n  #endif\n}\n#endif"},34274:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void primitiveOutlineStage(inout czm_modelMaterial material) {\n    if (!model_showOutline) {\n        return;\n    }\n\n    float outlineX = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r;\n    float outlineY = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r;\n    float outlineZ = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r;\n    float outlineness = max(outlineX, max(outlineY, outlineZ));\n\n    material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness);\n}\n\n"},494098:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void primitiveOutlineStage() {\n    v_outlineCoordinates = a_outlineCoordinates;\n}\n"},443045:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="vec2 computeSt(float featureId)\n{\n    float stepX = model_textureStep.x;\n    float centerX = model_textureStep.y;\n\n    #ifdef MULTILINE_BATCH_TEXTURE\n    float stepY = model_textureStep.z;\n    float centerY = model_textureStep.w;\n\n    float xId = mod(featureId, model_textureDimensions.x); \n    float yId = floor(featureId / model_textureDimensions.x);\n    \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY));\n    #else\n    return vec2(centerX + (featureId * stepX), 0.5);\n    #endif\n}\n\nvoid selectedFeatureIdStage(out SelectedFeature feature, FeatureIds featureIds)\n{   \n    int featureId = featureIds.SELECTED_FEATURE_ID;\n\n\n    if (featureId < model_featuresLength)\n    {\n        vec2 featureSt = computeSt(float(featureId));\n\n        feature.id = featureId;\n        feature.st = featureSt;\n        feature.color = texture(model_batchTexture, featureSt);\n    }\n    // Floating point comparisons can be unreliable in GLSL, so we\n    // increment the feature ID to make sure it's always greater\n    // then the model_featuresLength - a condition we check for in the\n    // pick ID, to avoid sampling the pick texture if the feature ID is\n    // greater than the number of features.\n    else\n    {\n        feature.id = model_featuresLength + 1;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n\n    #ifdef HAS_NULL_FEATURE_ID\n    if (featureId == model_nullFeatureId) {\n        feature.id = featureId;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n    #endif\n}\n"},40640:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void skinningStage(inout ProcessedAttributes attributes) \n{\n    mat4 skinningMatrix = getSkinningMatrix();\n    mat3 skinningMatrixMat3 = mat3(skinningMatrix);\n\n    vec4 positionMC = vec4(attributes.positionMC, 1.0);\n    attributes.positionMC = vec3(skinningMatrix * positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = skinningMatrixMat3 * normalMC;\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = skinningMatrixMat3 * tangentMC;\n    #endif\n}"},975574:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 v_textureCoordinates;\n\nuniform float originalSize;\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D texture3;\nuniform sampler2D texture4;\nuniform sampler2D texture5;\n\nconst float yMipLevel1 = 1.0 - (1.0 / pow(2.0, 1.0));\nconst float yMipLevel2 = 1.0 - (1.0 / pow(2.0, 2.0));\nconst float yMipLevel3 = 1.0 - (1.0 / pow(2.0, 3.0));\nconst float yMipLevel4 = 1.0 - (1.0 / pow(2.0, 4.0));\n\nvoid main()\n{\n    vec2 uv = v_textureCoordinates;\n    vec2 textureSize = vec2(originalSize * 1.5 + 2.0, originalSize);\n    vec2 pixel = 1.0 / textureSize;\n\n    float mipLevel = 0.0;\n\n    if (uv.x - pixel.x > (textureSize.y / textureSize.x))\n    {\n        mipLevel = 1.0;\n        if (uv.y - pixel.y > yMipLevel1)\n        {\n            mipLevel = 2.0;\n            if (uv.y - pixel.y * 3.0 > yMipLevel2)\n            {\n                mipLevel = 3.0;\n                if (uv.y - pixel.y * 5.0 > yMipLevel3)\n                {\n                    mipLevel = 4.0;\n                    if (uv.y - pixel.y * 7.0 > yMipLevel4)\n                    {\n                        mipLevel = 5.0;\n                    }\n                }\n            }\n        }\n    }\n\n    if (mipLevel > 0.0)\n    {\n        float scale = pow(2.0, mipLevel);\n\n        uv.y -= (pixel.y * (mipLevel - 1.0) * 2.0);\n        uv.x *= ((textureSize.x - 2.0) / textureSize.y);\n\n        uv.x -= 1.0 + pixel.x;\n        uv.y -= (1.0 - (1.0 / pow(2.0, mipLevel - 1.0)));\n        uv *= scale;\n    }\n    else\n    {\n        uv.x *= (textureSize.x / textureSize.y);\n    }\n\n    if(mipLevel == 0.0)\n    {\n        out_FragColor = texture(texture0, uv);\n    }\n    else if(mipLevel == 1.0)\n    {\n        out_FragColor = texture(texture1, uv);\n    }\n    else if(mipLevel == 2.0)\n    {\n        out_FragColor = texture(texture2, uv);\n    }\n    else if(mipLevel == 3.0)\n    {\n        out_FragColor = texture(texture3, uv);\n    }\n    else if(mipLevel == 4.0)\n    {\n        out_FragColor = texture(texture4, uv);\n    }\n    else if(mipLevel == 5.0)\n    {\n        out_FragColor = texture(texture5, uv);\n    }\n    else\n    {\n        out_FragColor = vec4(0.0);\n    }\n}\n"},720979:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_cubeMapCoordinates;\nuniform samplerCube cubeMap;\n\nvoid main()\n{\n    vec4 rgba = czm_textureCube(cubeMap, v_cubeMapCoordinates);\n    #ifdef RGBA_NORMALIZED\n        out_FragColor = vec4(rgba.rgb, 1.0);\n    #else\n        float m = rgba.a * 16.0;\n        vec3 r = rgba.rgb * m;\n        out_FragColor = vec4(r * r, 1.0);\n    #endif\n}\n"},810467:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\nin vec3 cubeMapCoordinates;\n\nout vec3 v_cubeMapCoordinates;\n\nvoid main()\n{\n    gl_Position = position;\n    v_cubeMapCoordinates = cubeMapCoordinates;\n}\n"},57723:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 position2DHigh;\nin vec3 position2DLow;\nin vec3 prevPosition3DHigh;\nin vec3 prevPosition3DLow;\nin vec3 prevPosition2DHigh;\nin vec3 prevPosition2DLow;\nin vec3 nextPosition3DHigh;\nin vec3 nextPosition3DLow;\nin vec3 nextPosition2DHigh;\nin vec3 nextPosition2DLow;\nin vec4 texCoordExpandAndBatchIndex;\n\nout vec2  v_st;\nout float v_width;\nout vec4 v_pickColor;\nout float v_polylineAngle;\n\nvoid main()\n{\n    float texCoord = texCoordExpandAndBatchIndex.x;\n    float expandDir = texCoordExpandAndBatchIndex.y;\n    bool usePrev = texCoordExpandAndBatchIndex.z < 0.0;\n    float batchTableIndex = texCoordExpandAndBatchIndex.w;\n\n    vec2 widthAndShow = batchTable_getWidthAndShow(batchTableIndex);\n    float width = widthAndShow.x + 0.5;\n    float show = widthAndShow.y;\n\n    if (width < 1.0)\n    {\n        show = 0.0;\n    }\n\n    vec4 pickColor = batchTable_getPickColor(batchTableIndex);\n\n    vec4 p, prev, next;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);\n        prev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);\n        next = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);\n        prev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);\n        next = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),\n                czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),\n                czm_morphTime);\n        prev = czm_columbusViewMorph(\n                czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),\n                czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),\n                czm_morphTime);\n        next = czm_columbusViewMorph(\n                czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),\n                czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),\n                czm_morphTime);\n    }\n\n    #ifdef DISTANCE_DISPLAY_CONDITION\n        vec3 centerHigh = batchTable_getCenterHigh(batchTableIndex);\n        vec4 centerLowAndRadius = batchTable_getCenterLowAndRadius(batchTableIndex);\n        vec3 centerLow = centerLowAndRadius.xyz;\n        float radius = centerLowAndRadius.w;\n        vec2 distanceDisplayCondition = batchTable_getDistanceDisplayCondition(batchTableIndex);\n\n        float lengthSq;\n        if (czm_sceneMode == czm_sceneMode2D)\n        {\n            lengthSq = czm_eyeHeight2D.y;\n        }\n        else\n        {\n            vec4 center = czm_translateRelativeToEye(centerHigh.xyz, centerLow.xyz);\n            lengthSq = max(0.0, dot(center.xyz, center.xyz) - radius * radius);\n        }\n\n        float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x;\n        float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y;\n        if (lengthSq < nearSq || lengthSq > farSq)\n        {\n            show = 0.0;\n        }\n    #endif\n\n    float polylineAngle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, polylineAngle);\n    gl_Position = czm_viewportOrthographic * positionWC * show;\n\n    v_st.s = texCoord;\n    v_st.t = czm_writeNonPerspective(clamp(expandDir, 0.0, 1.0), gl_Position.w);\n\n    v_width = width;\n    v_pickColor = pickColor;\n    v_polylineAngle = polylineAngle;\n}\n"},752925:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    color /= texture(autoExposure, vec2(0.5)).r;\n#endif\n    color = czm_acesTonemapping(color);\n    color = czm_inverseGamma(color);\n\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},249550:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D colorTexture2;\n\nuniform vec2 center;\nuniform float radius;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color0 = texture(colorTexture, v_textureCoordinates);\n    vec4 color1 = texture(colorTexture2, v_textureCoordinates);\n\n    float x = length(gl_FragCoord.xy - center) / radius;\n    float t = smoothstep(0.5, 0.8, x);\n    out_FragColor = mix(color0 + color1, color1, t);\n}\n"},365559:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D randomTexture;\nuniform sampler2D depthTexture;\nuniform float intensity;\nuniform float bias;\nuniform float lengthCap;\nuniform float stepSize;\nuniform float frustumLength;\n\nin vec2 v_textureCoordinates;\n\nvec4 clipToEye(vec2 uv, float depth)\n{\n    vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n    vec4 posEC = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posEC = posEC / posEC.w;\n    return posEC;\n}\n\n//Reconstruct Normal Without Edge Removation\nvec3 getNormalXEdge(vec3 posInCamera, float depthU, float depthD, float depthL, float depthR, vec2 pixelSize)\n{\n    vec4 posInCameraUp = clipToEye(v_textureCoordinates - vec2(0.0, pixelSize.y), depthU);\n    vec4 posInCameraDown = clipToEye(v_textureCoordinates + vec2(0.0, pixelSize.y), depthD);\n    vec4 posInCameraLeft = clipToEye(v_textureCoordinates - vec2(pixelSize.x, 0.0), depthL);\n    vec4 posInCameraRight = clipToEye(v_textureCoordinates + vec2(pixelSize.x, 0.0), depthR);\n\n    vec3 up = posInCamera.xyz - posInCameraUp.xyz;\n    vec3 down = posInCameraDown.xyz - posInCamera.xyz;\n    vec3 left = posInCamera.xyz - posInCameraLeft.xyz;\n    vec3 right = posInCameraRight.xyz - posInCamera.xyz;\n\n    vec3 DX = length(left) < length(right) ? left : right;\n    vec3 DY = length(up) < length(down) ? up : down;\n\n    return normalize(cross(DY, DX));\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = clipToEye(v_textureCoordinates, depth);\n\n    if (posInCamera.z > frustumLength)\n    {\n        out_FragColor = vec4(1.0);\n        return;\n    }\n\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    float depthU = czm_readDepth(depthTexture, v_textureCoordinates - vec2(0.0, pixelSize.y));\n    float depthD = czm_readDepth(depthTexture, v_textureCoordinates + vec2(0.0, pixelSize.y));\n    float depthL = czm_readDepth(depthTexture, v_textureCoordinates - vec2(pixelSize.x, 0.0));\n    float depthR = czm_readDepth(depthTexture, v_textureCoordinates + vec2(pixelSize.x, 0.0));\n    vec3 normalInCamera = getNormalXEdge(posInCamera.xyz, depthU, depthD, depthL, depthR, pixelSize);\n\n    float ao = 0.0;\n    vec2 sampleDirection = vec2(1.0, 0.0);\n    float gapAngle = 90.0 * czm_radiansPerDegree;\n\n    // RandomNoise\n    float randomVal = texture(randomTexture, v_textureCoordinates / pixelSize / 255.0).x;\n\n    //Loop for each direction\n    for (int i = 0; i < 4; i++)\n    {\n        float newGapAngle = gapAngle * (float(i) + randomVal);\n        float cosVal = cos(newGapAngle);\n        float sinVal = sin(newGapAngle);\n\n        //Rotate Sampling Direction\n        vec2 rotatedSampleDirection = vec2(cosVal * sampleDirection.x - sinVal * sampleDirection.y, sinVal * sampleDirection.x + cosVal * sampleDirection.y);\n        float localAO = 0.0;\n        float localStepSize = stepSize;\n\n        //Loop for each step\n        for (int j = 0; j < 6; j++)\n        {\n            vec2 newCoords = v_textureCoordinates + rotatedSampleDirection * localStepSize * pixelSize;\n\n            //Exception Handling\n            if(newCoords.x > 1.0 || newCoords.y > 1.0 || newCoords.x < 0.0 || newCoords.y < 0.0)\n            {\n                break;\n            }\n\n            float stepDepthInfo = czm_readDepth(depthTexture, newCoords);\n            vec4 stepPosInCamera = clipToEye(newCoords, stepDepthInfo);\n            vec3 diffVec = stepPosInCamera.xyz - posInCamera.xyz;\n            float len = length(diffVec);\n\n            if (len > lengthCap)\n            {\n                break;\n            }\n\n            float dotVal = clamp(dot(normalInCamera, normalize(diffVec)), 0.0, 1.0 );\n            float weight = len / lengthCap;\n            weight = 1.0 - weight * weight;\n\n            if (dotVal < bias)\n            {\n                dotVal = 0.0;\n            }\n\n            localAO = max(localAO, dotVal * weight);\n            localStepSize += stepSize;\n        }\n        ao += localAO;\n    }\n\n    ao /= 4.0;\n    ao = 1.0 - clamp(ao, 0.0, 1.0);\n    ao = pow(ao, intensity);\n    out_FragColor = vec4(vec3(ao), 1.0);\n}\n"},427139:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D ambientOcclusionTexture;\nuniform bool ambientOcclusionOnly;\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    vec4 ao = texture(ambientOcclusionTexture, v_textureCoordinates);\n    out_FragColor = ambientOcclusionOnly ? ao : ao * color;\n}\n"},844644:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform float gradations;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        out_FragColor = vec4(rgb, 1.0);\n        return;\n    }\n#endif\n    float luminance = czm_luminance(rgb);\n    float darkness = luminance * gradations;\n    darkness = (darkness - fract(darkness)) / gradations;\n    out_FragColor = vec4(vec3(darkness), 1.0);\n}\n"},638943:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D bloomTexture;\nuniform bool glowOnly;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        out_FragColor = color;\n        return;\n    }\n#endif\n\n    vec4 bloom = texture(bloomTexture, v_textureCoordinates);\n    out_FragColor = glowOnly ? bloom : bloom + color;\n}\n"},732156:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='uniform sampler2D colorTexture;\n\nuniform float avgLuminance;\nuniform float threshold;\nuniform float offset;\n\nin vec2 v_textureCoordinates;\n\nfloat key(float avg)\n{\n    float guess = 1.5 - (1.5 / (avg * 0.1 + 1.0));\n    return max(0.0, guess) + 0.1;\n}\n\n// See section 9. "The bright-pass filter" of Realtime HDR Rendering\n// http://www.cg.tuwien.ac.at/research/publications/2007/Luksch_2007_RHR/Luksch_2007_RHR-RealtimeHDR%20.pdf\n\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    vec3 xyz = czm_RGBToXYZ(color.rgb);\n    float luminance = xyz.r;\n\n    float scaledLum = key(avgLuminance) * luminance / avgLuminance;\n    float brightLum = max(scaledLum - threshold, 0.0);\n    float brightness = brightLum / (offset + brightLum);\n\n    xyz.r = brightness;\n    out_FragColor = vec4(czm_XYZToRGB(xyz), 1.0);\n}\n'},377126:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform float brightness;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n    vec3 target = vec3(0.0);\n    out_FragColor = vec4(mix(target, rgb, brightness), 1.0);\n}\n"},279291:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\n#ifdef DEBUG_SHOW_DEPTH\nuniform sampler2D u_packedTranslucentDepth;\n#endif\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n#ifdef DEBUG_SHOW_DEPTH\n    if (v_textureCoordinates.x < 0.5)\n    {\n        out_FragColor.rgb = vec3(czm_unpackDepth(texture(u_packedTranslucentDepth, v_textureCoordinates)));\n        out_FragColor.a = 1.0;\n    }\n#else\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n\n#ifdef PICK\n    if (color == vec4(0.0))\n    {\n        discard;\n    }\n#else\n    // Reverse premultiplication process to get the correct composited result of the classification primitives\n    color.rgb /= color.a;\n#endif\n    out_FragColor = color;\n#endif\n}\n"},547146:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform float contrast;\nuniform float brightness;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 sceneColor = texture(colorTexture, v_textureCoordinates).xyz;\n    sceneColor = czm_RGBToHSB(sceneColor);\n    sceneColor.z += brightness;\n    sceneColor = czm_HSBToRGB(sceneColor);\n\n    float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));\n    sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);\n    out_FragColor = vec4(sceneColor, 1.0);\n}\n"},934993:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D blurTexture;\nuniform sampler2D depthTexture;\nuniform float focalDistance;\n\nin vec2 v_textureCoordinates;\n\nvec4 toEye(vec2 uv, float depth)\n{\n   vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\n\nfloat computeDepthBlur(float depth)\n{\n    float f;\n    if (depth < focalDistance)\n    {\n        f = (focalDistance - depth) / (focalDistance - czm_currentFrustum.x);\n    }\n    else\n    {\n        f = (depth - focalDistance) / (czm_currentFrustum.y - focalDistance);\n        f = pow(f, 0.1);\n    }\n    f *= f;\n    f = clamp(f, 0.0, 1.0);\n    return pow(f, 0.5);\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = toEye(v_textureCoordinates, depth);\n    float d = computeDepthBlur(-posInCamera.z);\n    out_FragColor = mix(texture(colorTexture, v_textureCoordinates), texture(blurTexture, v_textureCoordinates), d);\n}\n"},712957:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    out_FragColor = vec4(vec3(depth), 1.0);\n}\n"},388241:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D depthTexture;\nuniform float length;\nuniform vec4 color;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float directions[3];\n    directions[0] = -1.0;\n    directions[1] = 0.0;\n    directions[2] = 1.0;\n\n    float scalars[3];\n    scalars[0] = 3.0;\n    scalars[1] = 10.0;\n    scalars[2] = 3.0;\n\n    float padx = czm_pixelRatio / czm_viewport.z;\n    float pady = czm_pixelRatio / czm_viewport.w;\n\n#ifdef CZM_SELECTED_FEATURE\n    bool selected = false;\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        selected = selected || czm_selected(vec2(-padx, dir * pady));\n        selected = selected || czm_selected(vec2(padx, dir * pady));\n        selected = selected || czm_selected(vec2(dir * padx, -pady));\n        selected = selected || czm_selected(vec2(dir * padx, pady));\n        if (selected)\n        {\n            break;\n        }\n    }\n    if (!selected)\n    {\n        out_FragColor = vec4(color.rgb, 0.0);\n        return;\n    }\n#endif\n\n    float horizEdge = 0.0;\n    float vertEdge = 0.0;\n\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        float scale = scalars[i];\n\n        horizEdge -= texture(depthTexture, v_textureCoordinates + vec2(-padx, dir * pady)).x * scale;\n        horizEdge += texture(depthTexture, v_textureCoordinates + vec2(padx, dir * pady)).x * scale;\n\n        vertEdge -= texture(depthTexture, v_textureCoordinates + vec2(dir * padx, -pady)).x * scale;\n        vertEdge += texture(depthTexture, v_textureCoordinates + vec2(dir * padx, pady)).x * scale;\n    }\n\n    float len = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\n    out_FragColor = vec4(color.rgb, len > length ? color.a : 0.0);\n}\n"},780953:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 v_textureCoordinates;\n\nuniform sampler2D colorTexture;\n\nconst float fxaaQualitySubpix = 0.5;\nconst float fxaaQualityEdgeThreshold = 0.125;\nconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\nvoid main()\n{\n    vec2 fxaaQualityRcpFrame = vec2(1.0) / czm_viewport.zw;\n    vec4 color = FxaaPixelShader(\n        v_textureCoordinates,\n        colorTexture,\n        fxaaQualityRcpFrame,\n        fxaaQualitySubpix,\n        fxaaQualityEdgeThreshold,\n        fxaaQualityEdgeThresholdMin);\n    float alpha = texture(colorTexture, v_textureCoordinates).a;\n    out_FragColor = vec4(color.rgb, alpha);\n}\n"},347961:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See slides 142 and 143:\n//     http://www.gdcvault.com/play/1012459/Uncharted_2__HDR_Lighting\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n\n\tconst float A = 0.22; // shoulder strength\n\tconst float B = 0.30; // linear strength\n\tconst float C = 0.10; // linear angle\n\tconst float D = 0.20; // toe strength\n\tconst float E = 0.01; // toe numerator\n\tconst float F = 0.30; // toe denominator\n\n\tconst float white = 11.2; // linear white point value\n\n\tvec3 c = ((color * (A * color + C * B) + D * E) / (color * ( A * color + B) + D * F)) - E / F;\n\tfloat w = ((white * (A * white + C * B) + D * E) / (white * ( A * white + B) + D * F)) - E / F;\n\n\tc = czm_inverseGamma(c / w);\n\tout_FragColor = vec4(c, fragmentColor.a);\n}\n"},602142:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#define SAMPLES 8\n\nuniform float delta;\nuniform float sigma;\nuniform float direction; // 0.0 for x direction, 1.0 for y direction\n\nuniform sampler2D colorTexture;\n\n#ifdef USE_STEP_SIZE\nuniform float stepSize;\n#else\nuniform vec2 step;\n#endif\n\nin vec2 v_textureCoordinates;\n\n//  Incremental Computation of the Gaussian:\n//  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch40.html\n\nvoid main()\n{\n    vec2 st = v_textureCoordinates;\n    vec2 dir = vec2(1.0 - direction, direction);\n\n#ifdef USE_STEP_SIZE\n    vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));\n#else\n    vec2 step = step;\n#endif\n\n    vec3 g;\n    g.x = 1.0 / (sqrt(czm_twoPi) * sigma);\n    g.y = exp((-0.5 * delta * delta) / (sigma * sigma));\n    g.z = g.y * g.y;\n\n    vec4 result = texture(colorTexture, st) * g.x;\n    for (int i = 1; i < SAMPLES; ++i)\n    {\n        g.xy *= g.yz;\n\n        vec2 offset = float(i) * dir * step;\n        result += texture(colorTexture, st - offset) * g.x;\n        result += texture(colorTexture, st + offset) * g.x;\n    }\n\n    out_FragColor = result;\n}\n"},947709:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D dirtTexture;\nuniform sampler2D starTexture;\nuniform vec2 dirtTextureDimensions;\nuniform float distortion;\nuniform float ghostDispersal;\nuniform float haloWidth;\nuniform float dirtAmount;\nuniform float earthRadius;\nuniform float intensity;\n\nin vec2 v_textureCoordinates;\n\n// whether it is in space or not\n// 6500000.0 is empirical value\n#define DISTANCE_TO_SPACE 6500000.0\n\n// return ndc from world coordinate biased earthRadius\nvec4 getNDCFromWC(vec3 WC, float earthRadius)\n{\n    vec4 positionEC = czm_view * vec4(WC, 1.0);\n    positionEC = vec4(positionEC.x + earthRadius, positionEC.y, positionEC.z, 1.0);\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    return czm_viewportOrthographic * vec4(positionWC.xy, -positionWC.z, 1.0);\n}\n\n// Check if current pixel is included Earth\n// if then mask it gradually\nfloat isInEarth(vec2 texcoord, vec2 sceneSize)\n{\n    vec2 NDC = texcoord * 2.0 - 1.0;\n    vec4 earthPosSC = getNDCFromWC(vec3(0.0), 0.0);\n    vec4 earthPosSCEdge = getNDCFromWC(vec3(0.0), earthRadius * 1.5);\n    NDC.xy -= earthPosSC.xy;\n\n    float X = abs(NDC.x) * sceneSize.x;\n    float Y = abs(NDC.y) * sceneSize.y;\n\n    return clamp(0.0, 1.0, max(sqrt(X * X + Y * Y) / max(abs(earthPosSCEdge.x * sceneSize.x), 1.0) - 0.8 , 0.0));\n}\n\n// For Chromatic effect\nvec4 textureDistorted(sampler2D tex, vec2 texcoord, vec2 direction, vec3 distortion, bool isSpace)\n{\n    vec2 sceneSize = czm_viewport.zw;\n    vec3 color;\n    if(isSpace)\n    {\n        color.r = isInEarth(texcoord + direction * distortion.r, sceneSize) * texture(tex, texcoord + direction * distortion.r).r;\n        color.g = isInEarth(texcoord + direction * distortion.g, sceneSize) * texture(tex, texcoord + direction * distortion.g).g;\n        color.b = isInEarth(texcoord + direction * distortion.b, sceneSize) * texture(tex, texcoord + direction * distortion.b).b;\n    }\n    else\n    {\n        color.r = texture(tex, texcoord + direction * distortion.r).r;\n        color.g = texture(tex, texcoord + direction * distortion.g).g;\n        color.b = texture(tex, texcoord + direction * distortion.b).b;\n    }\n    return vec4(clamp(color, 0.0, 1.0), 0.0);\n}\n\nvoid main(void)\n{\n    vec4 originalColor = texture(colorTexture, v_textureCoordinates);\n    vec3 rgb = originalColor.rgb;\n    bool isSpace = length(czm_viewerPositionWC.xyz) > DISTANCE_TO_SPACE;\n\n    // Sun position\n    vec4 sunPos = czm_morphTime == 1.0 ? vec4(czm_sunPositionWC, 1.0) : vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    vec4 sunPositionEC = czm_view * sunPos;\n    vec4 sunPositionWC = czm_eyeToWindowCoordinates(sunPositionEC);\n    sunPos = czm_viewportOrthographic * vec4(sunPositionWC.xy, -sunPositionWC.z, 1.0);\n\n    // If sun is not in the screen space, use original color.\n    if(!isSpace || !((sunPos.x >= -1.1 && sunPos.x <= 1.1) && (sunPos.y >= -1.1 && sunPos.y <= 1.1)))\n    {\n        // Lens flare is disabled when not in space until #5932 is fixed.\n        //    https://github.com/CesiumGS/cesium/issues/5932\n        out_FragColor = originalColor;\n        return;\n    }\n\n    vec2 texcoord = vec2(1.0) - v_textureCoordinates;\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    vec2 invPixelSize = 1.0 / pixelSize;\n    vec3 distortionVec = pixelSize.x * vec3(-distortion, 0.0, distortion);\n\n    // ghost vector to image centre:\n    vec2 ghostVec = (vec2(0.5) - texcoord) * ghostDispersal;\n    vec3 direction = normalize(vec3(ghostVec, 0.0));\n\n    // sample ghosts:\n    vec4 result = vec4(0.0);\n    vec4 ghost = vec4(0.0);\n    for (int i = 0; i < 4; ++i)\n    {\n        vec2 offset = fract(texcoord + ghostVec * float(i));\n        // Only bright spots from the centre of the source image\n        ghost += textureDistorted(colorTexture, offset, direction.xy, distortionVec, isSpace);\n    }\n    result += ghost;\n\n    // sample halo\n    vec2 haloVec = normalize(ghostVec) * haloWidth;\n    float weightForHalo = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n    weightForHalo = pow(1.0 - weightForHalo, 5.0);\n\n    result += textureDistorted(colorTexture, texcoord + haloVec, direction.xy, distortionVec, isSpace) * weightForHalo * 1.5;\n\n    // dirt on lens\n    vec2 dirtTexCoords = (v_textureCoordinates * invPixelSize) / dirtTextureDimensions;\n    if (dirtTexCoords.x > 1.0)\n    {\n        dirtTexCoords.x = mod(floor(dirtTexCoords.x), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.x) :  fract(dirtTexCoords.x);\n    }\n    if (dirtTexCoords.y > 1.0)\n    {\n        dirtTexCoords.y = mod(floor(dirtTexCoords.y), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.y) :  fract(dirtTexCoords.y);\n    }\n    result += dirtAmount * texture(dirtTexture, dirtTexCoords);\n\n    // Rotating starburst texture's coordinate\n    // dot(czm_view[0].xyz, vec3(0.0, 0.0, 1.0)) + dot(czm_view[1].xyz, vec3(0.0, 1.0, 0.0))\n    float camrot = czm_view[0].z + czm_view[1].y;\n    float cosValue = cos(camrot);\n    float sinValue = sin(camrot);\n    mat3 rotation = mat3(\n        cosValue, -sinValue, 0.0,\n        sinValue, cosValue, 0.0,\n        0.0, 0.0, 1.0\n    );\n\n    vec3 st1 = vec3(v_textureCoordinates * 2.0 - vec2(1.0), 1.0);\n    vec3 st2 = vec3((rotation * st1).xy, 1.0);\n    vec3 st3 = st2 * 0.5 + vec3(0.5);\n    vec2 lensStarTexcoord = st3.xy;\n    float weightForLensFlare = length(vec3(sunPos.xy, 0.0));\n    float oneMinusWeightForLensFlare = max(1.0 - weightForLensFlare, 0.0);\n\n    if (!isSpace)\n    {\n        result *= oneMinusWeightForLensFlare * intensity * 0.2;\n    }\n    else\n    {\n        result *= oneMinusWeightForLensFlare * intensity;\n        result *= texture(starTexture, lensStarTexcoord) * pow(weightForLensFlare, 1.0) * max((1.0 - length(vec3(st1.xy, 0.0))), 0.0) * 2.0;\n    }\n\n    result += texture(colorTexture, v_textureCoordinates);\n\n    out_FragColor = result;\n}\n"},724355:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform vec3 white;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See equation 4:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n    color = (color * (1.0 + color / white)) / (1.0 + color);\n    color = czm_inverseGamma(color);\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},573311:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy ,vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    float noiseValue = rand(v_textureCoordinates + sin(czm_frameNumber)) * 0.1;\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    out_FragColor = vec4((noiseValue + rgb) * green, 1.0);\n}\n"},90979:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n}\n"},307386:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform highp sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = czm_packDepth(texture(u_depthTexture, v_textureCoordinates).r);\n}\n"},812178:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_pointCloud_colorGBuffer;\nuniform sampler2D u_pointCloud_depthGBuffer;\nuniform vec2 u_distanceAndEdlStrength;\nin vec2 v_textureCoordinates;\n\nvec2 neighborContribution(float log2Depth, vec2 offset)\n{\n    float dist = u_distanceAndEdlStrength.x;\n    vec2 texCoordOrig = v_textureCoordinates + offset * dist;\n    vec2 texCoord0 = v_textureCoordinates + offset * floor(dist);\n    vec2 texCoord1 = v_textureCoordinates + offset * ceil(dist);\n\n    float depthOrLogDepth0 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord0));\n    float depthOrLogDepth1 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord1));\n\n    // ignore depth values that are the clear depth\n    if (depthOrLogDepth0 == 0.0 || depthOrLogDepth1 == 0.0) {\n        return vec2(0.0);\n    }\n\n    // interpolate the two adjacent depth values\n    float depthMix = mix(depthOrLogDepth0, depthOrLogDepth1, fract(dist));\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(texCoordOrig, depthMix);\n    return vec2(max(0.0, log2Depth - log2(-eyeCoordinate.z / eyeCoordinate.w)), 1.0);\n}\n\nvoid main()\n{\n    float depthOrLogDepth = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, v_textureCoordinates));\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depthOrLogDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float log2Depth = log2(-eyeCoordinate.z);\n\n    if (depthOrLogDepth == 0.0) // 0.0 is the clear value for the gbuffer\n    {\n        discard;\n    }\n\n    vec4 color = texture(u_pointCloud_colorGBuffer, v_textureCoordinates);\n\n    // sample from neighbors left, right, down, up\n    vec2 texelSize = 1.0 / czm_viewport.zw;\n\n    vec2 responseAndCount = vec2(0.0);\n\n    responseAndCount += neighborContribution(log2Depth, vec2(-texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(+texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, -texelSize.y));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, +texelSize.y));\n\n    float response = responseAndCount.x / responseAndCount.y;\n    float strength = u_distanceAndEdlStrength.y;\n    float shade = exp(-response * 300.0 * strength);\n    color.rgb *= shade;\n    out_FragColor = vec4(color);\n\n    // Input and output depth are the same.\n    gl_FragDepth = depthOrLogDepth;\n}\n"},951834:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See equation 3:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n    color = color / (1.0 + color);\n    color = czm_inverseGamma(color);\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},382743:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D silhouetteTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 silhouetteColor = texture(silhouetteTexture, v_textureCoordinates);\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    out_FragColor = mix(color, silhouetteColor, silhouetteColor.a);\n}\n"},275058:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_texture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = texture(u_texture, v_textureCoordinates);\n}\n"},208898:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\nin float webMercatorT;\n\nuniform vec2 u_textureDimensions;\n\nout vec2 v_textureCoordinates;\n\nvoid main()\n{\n    v_textureCoordinates = vec2(position.x, webMercatorT);\n    gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));\n}\n"},370298:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="float interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n\nvec3 getLightDirection(vec3 positionWC)\n{\n    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;\n    vec3 lightDirection =\n        positionWC * float(lightEnum == 0.0) +\n        czm_lightDirectionWC * float(lightEnum == 1.0) +\n        czm_sunDirectionWC * float(lightEnum == 2.0);\n    return normalize(lightDirection);\n}\n\nvoid computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity, out float underTranslucentGlobe)\n{\n    float ellipsoidRadiiDifference = czm_ellipsoidRadii.x - czm_ellipsoidRadii.z;\n\n    // Adjustment to the atmosphere radius applied based on the camera height.\n    float distanceAdjustMin = czm_ellipsoidRadii.x / 4.0;\n    float distanceAdjustMax = czm_ellipsoidRadii.x;\n    float distanceAdjustModifier = ellipsoidRadiiDifference / 2.0;\n    float distanceAdjust = distanceAdjustModifier * clamp((czm_eyeHeight - distanceAdjustMin) / (distanceAdjustMax - distanceAdjustMin), 0.0, 1.0);\n\n    // Since atmosphere scattering assumes the atmosphere is a spherical shell, we compute an inner radius of the atmosphere best fit \n    // for the position on the ellipsoid.\n    float radiusAdjust = (ellipsoidRadiiDifference / 4.0) + distanceAdjust;\n    float atmosphereInnerRadius = (length(czm_viewerPositionWC) - czm_eyeHeight) - radiusAdjust;\n\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n\n    underTranslucentGlobe = 0.0;\n\n    // Brighten the sky atmosphere under the Earth's atmosphere when translucency is enabled.\n    #if defined(GLOBE_TRANSLUCENT)\n\n        // Check for intersection with the inner radius of the atmopshere.\n        czm_raySegment primaryRayEarthIntersect = czm_raySphereIntersectionInterval(primaryRay, vec3(0.0), atmosphereInnerRadius + radiusAdjust);\n        if (primaryRayEarthIntersect.start > 0.0 && primaryRayEarthIntersect.stop > 0.0) {\n            \n            // Compute position on globe.\n            vec3 direction = normalize(positionWC);\n            czm_ray ellipsoidRay = czm_ray(positionWC, -direction);\n            czm_raySegment ellipsoidIntersection = czm_rayEllipsoidIntersectionInterval(ellipsoidRay, vec3(0.0), czm_ellipsoidInverseRadii);\n            vec3 onEarth = positionWC - (direction * ellipsoidIntersection.start);\n\n            // Control the color using the camera angle.\n            float angle = dot(normalize(czm_viewerPositionWC), normalize(onEarth));\n\n            // Control the opacity using the distance from Earth.\n            opacity = interpolateByDistance(vec4(0.0, 1.0, czm_ellipsoidRadii.x, 0.0), length(czm_viewerPositionWC - onEarth));\n            vec3 horizonColor = vec3(0.1, 0.2, 0.3);\n            vec3 nearColor = vec3(0.0);\n\n            rayleighColor = mix(nearColor, horizonColor, exp(-angle) * opacity);\n            \n            // Set the traslucent flag to avoid alpha adjustment in computeFinalColor funciton.\n            underTranslucentGlobe = 1.0;\n            return;\n        }\n    #endif\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n\n    // Alter the opacity based on how close the viewer is to the ground.\n    // (0.0 = At edge of atmosphere, 1.0 = On ground)\n    float cameraHeight = czm_eyeHeight + atmosphereInnerRadius;\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n    opacity = clamp((atmosphereOuterRadius - cameraHeight) / (atmosphereOuterRadius - atmosphereInnerRadius), 0.0, 1.0);\n\n    // Alter alpha based on time of day (0.0 = night , 1.0 = day)\n    float nightAlpha = (u_radiiAndDynamicAtmosphereColor.z != 0.0) ? clamp(dot(normalize(positionWC), lightDirection), 0.0, 1.0) : 1.0;\n    opacity *= pow(nightAlpha, 0.5);\n}\n"},692352:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_outerPositionWC;\n\nuniform vec3 u_hsbShift;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nin vec3 v_mieColor;\nin vec3 v_rayleighColor;\nin float v_opacity;\nin float v_translucent;\n#endif\n\nvoid main (void)\n{\n    vec3 lightDirection = getLightDirection(v_outerPositionWC);\n   \n    vec3 mieColor;\n    vec3 rayleighColor;\n    float opacity;\n    float translucent;\n\n    #ifdef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            v_outerPositionWC,\n            lightDirection,\n            rayleighColor,\n            mieColor,\n            opacity,\n            translucent\n        );\n    #else\n        mieColor = v_mieColor;\n        rayleighColor = v_rayleighColor;\n        opacity = v_opacity;\n        translucent = v_translucent;\n    #endif\n\n    vec4 color = computeAtmosphereColor(v_outerPositionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n    #ifndef HDR\n        color.rgb = czm_acesTonemapping(color.rgb);\n        color.rgb = czm_inverseGamma(color.rgb);\n    #endif\n\n    #ifdef COLOR_CORRECT\n        // Convert rgb color to hsb\n        vec3 hsb = czm_RGBToHSB(color.rgb);\n        // Perform hsb shift\n        hsb.x += u_hsbShift.x; // hue\n        hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n        hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n        // Convert shifted hsb back to rgb\n        color.rgb = czm_HSBToRGB(hsb);\n    #endif\n\n    // For the parts of the sky atmosphere that are not behind a translucent globe,\n    // we mix in the default opacity so that the sky atmosphere still appears at distance.\n    // This is needed because the opacity in the sky atmosphere is initially adjusted based\n    // on the camera height.\n    if (translucent == 0.0) {\n        color.a = mix(color.b, 1.0, color.a) * smoothstep(0.0, 1.0, czm_morphTime);\n    }\n\n    out_FragColor = color;\n}\n"},143344:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\n\nout vec3 v_outerPositionWC;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nout vec3 v_mieColor;\nout vec3 v_rayleighColor;\nout float v_opacity;\nout float v_translucent;\n#endif\n\nvoid main(void)\n{\n    vec4 positionWC = czm_model * position;\n    vec3 lightDirection = getLightDirection(positionWC.xyz);\n\n    #ifndef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            positionWC.xyz,\n            lightDirection,\n            v_rayleighColor,\n            v_mieColor,\n            v_opacity,\n            v_translucent\n        );\n    #endif\n    \n    v_outerPositionWC = positionWC.xyz;\n    gl_Position = czm_modelViewProjection * position;\n}\n"},326453:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform samplerCube u_cubeMap;\n\nin vec3 v_texCoord;\n\nvoid main()\n{\n    vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));\n    out_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n}\n"},789221:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\n\nout vec3 v_texCoord;\n\nvoid main()\n{\n    vec3 p = czm_viewRotation * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n    gl_Position = czm_projection * vec4(p, 1.0);\n    v_texCoord = position.xyz;\n}\n"},860139:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_texture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color = texture(u_texture, v_textureCoordinates);\n    out_FragColor = czm_gammaCorrect(color);\n}\n"},40510:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform float u_radiusTS;\n\nin vec2 v_textureCoordinates;\n\nvec2 rotate(vec2 p, vec2 direction)\n{\n    return vec2(p.x * direction.x - p.y * direction.y, p.x * direction.y + p.y * direction.x);\n}\n\nvec4 addBurst(vec2 position, vec2 direction, float lengthScalar)\n{\n    vec2 rotatedPosition = rotate(position, direction) * vec2(25.0, 0.75);\n    float radius = length(rotatedPosition) * lengthScalar;\n    float burst = 1.0 - smoothstep(0.0, 0.55, radius);\n    return vec4(burst);\n}\n\nvoid main()\n{\n    float lengthScalar = 2.0 / sqrt(2.0);\n    vec2 position = v_textureCoordinates - vec2(0.5);\n    float radius = length(position) * lengthScalar;\n    float surface = step(radius, u_radiusTS);\n    vec4 color = vec4(vec2(1.0), surface + 0.2, surface);\n\n    float glow = 1.0 - smoothstep(0.0, 0.55, radius);\n    color.ba += mix(vec2(0.0), vec2(1.0), glow) * 0.75;\n\n    vec4 burst = vec4(0.0);\n\n    // The following loop has been manually unrolled for speed, to\n    // avoid sin() and cos().\n    //\n    //for (float i = 0.4; i < 3.2; i += 1.047) {\n    //    vec2 direction = vec2(sin(i), cos(i));\n    //    burst += 0.4 * addBurst(position, direction, lengthScalar);\n    //\n    //    direction = vec2(sin(i - 0.08), cos(i - 0.08));\n    //    burst += 0.3 * addBurst(position, direction, lengthScalar);\n    //}\n\n    burst += 0.4 * addBurst(position, vec2(0.38942,  0.92106), lengthScalar);  // angle == 0.4\n    burst += 0.4 * addBurst(position, vec2(0.99235,  0.12348), lengthScalar);  // angle == 0.4 + 1.047\n    burst += 0.4 * addBurst(position, vec2(0.60327, -0.79754), lengthScalar);  // angle == 0.4 + 1.047 * 2.0\n\n    burst += 0.3 * addBurst(position, vec2(0.31457,  0.94924), lengthScalar);  // angle == 0.4 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.97931,  0.20239), lengthScalar);  // angle == 0.4 + 1.047 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.66507, -0.74678), lengthScalar);  // angle == 0.4 + 1.047 * 2.0 - 0.08\n\n    // End of manual loop unrolling.\n\n    color += clamp(burst, vec4(0.0), vec4(1.0)) * 0.15;\n\n    out_FragColor = clamp(color, vec4(0.0), vec4(1.0));\n}\n"},752123:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 direction;\n\nuniform float u_size;\n\nout vec2 v_textureCoordinates;\n\nvoid main() \n{\n    vec4 position;\n    if (czm_morphTime == 1.0)\n    {\n        position = vec4(czm_sunPositionWC, 1.0);\n    }\n    else\n    {\n        position = vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    }\n    \n    vec4 positionEC = czm_view * position;\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    \n    vec2 halfSize = vec2(u_size * 0.5);\n    halfSize *= ((direction * 2.0) - 1.0);\n    \n    gl_Position = czm_viewportOrthographic * vec4(positionWC.xy + halfSize, -positionWC.z, 1.0);\n    \n    v_textureCoordinates = direction;\n}\n"},154920:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 v_startPlaneEC;\nin vec4 v_endPlaneEC;\nin vec4 v_rightPlaneEC;\nin float v_halfWidth;\nin vec3 v_volumeUpEC;\n\nuniform vec4 u_highlightColor;\nvoid main()\n{\n    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));\n\n    // Discard for sky\n    if (logDepthOrDepth == 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        out_FragColor = vec4(0.0, 0.0, 1.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate);\n\n    // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction\n    halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC));\n\n    // Check distance of the eye coordinate against the right-facing plane\n    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);\n\n    // Check eye coordinate against the mitering planes\n    float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz);\n    float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz);\n\n    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        out_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n    out_FragColor = u_highlightColor;\n\n    czm_writeDepthClamp();\n}\n"},296312:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='in vec3 startEllipsoidNormal;\nin vec3 endEllipsoidNormal;\nin vec4 startPositionAndHeight;\nin vec4 endPositionAndHeight;\nin vec4 startFaceNormalAndVertexCorner;\nin vec4 endFaceNormalAndHalfWidth;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelView;\nuniform vec2 u_minimumMaximumVectorHeights;\n\nout vec4 v_startPlaneEC;\nout vec4 v_endPlaneEC;\nout vec4 v_rightPlaneEC;\nout float v_halfWidth;\nout vec3 v_volumeUpEC;\n\nvoid main()\n{\n    // vertex corner IDs\n    //          3-----------7\n    //         /|   left   /|\n    //        / | 1       / |\n    //       2-----------6  5  end\n    //       | /         | /\n    // start |/  right   |/\n    //       0-----------4\n    //\n    float isEnd = floor(startFaceNormalAndVertexCorner.w * 0.251); // 0 for front, 1 for end\n    float isTop = floor(startFaceNormalAndVertexCorner.w * mix(0.51, 0.19, isEnd)); // 0 for bottom, 1 for top\n\n    vec3 forward = endPositionAndHeight.xyz - startPositionAndHeight.xyz;\n    vec3 right = normalize(cross(forward, startEllipsoidNormal));\n\n    vec4 position = vec4(startPositionAndHeight.xyz, 1.0);\n    position.xyz += forward * isEnd;\n\n    v_volumeUpEC = czm_normal * normalize(cross(right, forward));\n\n    // Push for volume height\n    float offset;\n    vec3 ellipsoidNormal = mix(startEllipsoidNormal, endEllipsoidNormal, isEnd);\n\n    // offset height to create volume\n    offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd);\n    offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset;\n    position.xyz += offset * ellipsoidNormal;\n\n    // move from RTC to EC\n    position = u_modifiedModelView * position;\n    right = czm_normal * right;\n\n    // Push for width in a direction that is in the start or end plane and in a plane with right\n    // N = normalEC ("right-facing" direction for push)\n    // R = right\n    // p = angle between N and R\n    // w = distance to push along R if R == N\n    // d = distance to push along N\n    //\n    //   N   R\n    //  {  p| }      * cos(p) = dot(N, R) = w / d\n    //  d  |  |w    * d = w / dot(N, R)\n    //    { | }\n    //       o---------- polyline segment ----\x3e\n    //\n    vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd);\n    scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd));\n    vec3 miterPushNormal = czm_normal * normalize(scratchNormal);\n\n    offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC\n    offset = offset / dot(miterPushNormal, right);\n    position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0)));\n\n    gl_Position = czm_depthClamp(czm_projection * position);\n\n    position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0);\n    vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz;\n    v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz));\n    v_rightPlaneEC = vec4(right, -dot(right, position.xyz));\n\n    position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0);\n    vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz;\n    v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz));\n    v_halfWidth = endFaceNormalAndHalfWidth.w;\n}\n'},747776:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 currentPosition;\nin vec4 previousPosition;\nin vec4 nextPosition;\nin vec2 expandAndWidth;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelView;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = u_modifiedModelView * currentPosition;\n    vec4 prev = u_modifiedModelView * previousPosition;\n    vec4 next = u_modifiedModelView * nextPosition;\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinatesEC(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n}\n"},971532:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelViewProjection;\n\nvoid main()\n{\n    gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0));\n}\n"},351014:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\nin vec2 textureCoordinates;\n\nout vec2 v_textureCoordinates;\n\nvoid main() \n{\n    gl_Position = position;\n    v_textureCoordinates = textureCoordinates;\n}\n"},186930:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray and NO_HIT\n// See convertUvToBox.glsl for the definition of convertShapeUvToUvSpace\n\n/* Box defines (set in Scene/VoxelBoxShape.js)\n#define BOX_INTERSECTION_INDEX ### // always 0\n*/\n\nuniform vec3 u_renderMinBounds;\nuniform vec3 u_renderMaxBounds;\n\nstruct Box {\n    vec3 p0;\n    vec3 p1;\n};\n\nBox constructVoxelBox(in ivec4 octreeCoords, in vec3 tileUv)\n{\n    // Find the min/max cornerpoints of the voxel in tile coordinates\n    vec3 tileOrigin = vec3(octreeCoords.xyz);\n    vec3 numSamples = vec3(u_dimensions);\n    vec3 voxelSize = 1.0 / numSamples;\n    vec3 coordP0 = floor(tileUv * numSamples) * voxelSize + tileOrigin;\n    vec3 coordP1 = coordP0 + voxelSize;\n\n    // Transform to the UV coordinates of the scaled tileset\n    float tileSize = 1.0 / pow(2.0, float(octreeCoords.w));\n    vec3 p0 = convertShapeUvToUvSpace(coordP0 * tileSize);\n    vec3 p1 = convertShapeUvToUvSpace(coordP1 * tileSize);\n\n    return Box(p0, p1);\n}\n\nvec3 getBoxNormal(in Box box, in Ray ray, in float t)\n{\n    vec3 hitPoint = ray.pos + t * ray.dir;\n    vec3 lower = step(hitPoint, box.p0);\n    vec3 upper = step(box.p1, hitPoint);\n    return normalize(upper - lower);\n}\n\n// Find the distances along a ray at which the ray intersects an axis-aligned box\n// See https://tavianator.com/2011/ray_box.html\nRayShapeIntersection intersectBox(in Ray ray, in Box box)\n{\n    // Consider the box as the intersection of the space between 3 pairs of parallel planes\n    // Compute the distance along the ray to each plane\n    vec3 t0 = (box.p0 - ray.pos) * ray.dInv;\n    vec3 t1 = (box.p1 - ray.pos) * ray.dInv;\n\n    // Identify candidate entries/exits based on distance from ray.pos\n    vec3 entries = min(t0, t1);\n    vec3 exits = max(t0, t1);\n\n    // The actual box intersection points are the furthest entry and the closest exit\n    float entryT = max(max(entries.x, entries.y), entries.z);\n    float exitT = min(min(exits.x, exits.y), exits.z);\n\n    vec3 entryNormal = getBoxNormal(box, ray, entryT - RAY_SHIFT);\n    vec3 exitNormal = getBoxNormal(box, ray, exitT + RAY_SHIFT);\n\n    if (entryT > exitT) {\n        entryT = NO_HIT;\n        exitT = NO_HIT;\n    }\n\n    return RayShapeIntersection(vec4(entryNormal, entryT), vec4(exitNormal, exitT));\n}\n\nvoid intersectShape(in Ray ray, inout Intersections ix)\n{\n    RayShapeIntersection intersection = intersectBox(ray, Box(u_renderMinBounds, u_renderMaxBounds));\n    setShapeIntersection(ix, BOX_INTERSECTION_INDEX, intersection);\n}\n"},138338:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections, INF_HIT,\n// NO_HIT, setIntersectionPair\n\n/* Clipping plane defines (set in Scene/VoxelRenderResources.js)\n#define CLIPPING_PLANES_UNION\n#define CLIPPING_PLANES_COUNT\n#define CLIPPING_PLANES_INTERSECTION_INDEX\n*/\n\nuniform sampler2D u_clippingPlanesTexture;\nuniform mat4 u_clippingPlanesMatrix;\n\n// Plane is in Hessian Normal Form\nvec4 intersectPlane(in Ray ray, in vec4 plane) {\n    vec3 n = plane.xyz; // normal\n    float w = plane.w; // -dot(pointOnPlane, normal)\n\n    float a = dot(ray.pos, n);\n    float b = dot(ray.dir, n);\n    float t = -(w + a) / b;\n\n    return vec4(n, t);\n}\n\nvoid intersectClippingPlanes(in Ray ray, inout Intersections ix) {\n    vec4 backSide = vec4(-ray.dir, -INF_HIT);\n    vec4 farSide = vec4(ray.dir, +INF_HIT);\n    RayShapeIntersection clippingVolume;\n\n    #if (CLIPPING_PLANES_COUNT == 1)\n        // Union and intersection are the same when there's one clipping plane, and the code\n        // is more simplified.\n        vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, 0, u_clippingPlanesMatrix);\n        vec4 intersection = intersectPlane(ray, planeUv);\n        bool reflects = dot(ray.dir, intersection.xyz) < 0.0;\n        clippingVolume.entry = reflects ? backSide : intersection;\n        clippingVolume.exit = reflects ? intersection : farSide;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX, clippingVolume);\n    #elif defined(CLIPPING_PLANES_UNION)\n        vec4 firstTransmission = vec4(ray.dir, +INF_HIT);\n        vec4 lastReflection = vec4(-ray.dir, -INF_HIT);\n        for (int i = 0; i < CLIPPING_PLANES_COUNT; i++) {\n            vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, i, u_clippingPlanesMatrix);\n            vec4 intersection = intersectPlane(ray, planeUv);\n            if (dot(ray.dir, planeUv.xyz) > 0.0) {\n                firstTransmission = intersection.w <= firstTransmission.w ? intersection : firstTransmission;\n            } else {\n                lastReflection = intersection.w >= lastReflection.w ? intersection : lastReflection;\n            }\n        }\n        clippingVolume.entry = backSide;\n        clippingVolume.exit = lastReflection;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX + 0, clippingVolume);\n        clippingVolume.entry = firstTransmission;\n        clippingVolume.exit = farSide;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX + 1, clippingVolume);\n    #else // intersection\n        vec4 lastTransmission = vec4(ray.dir, -INF_HIT);\n        vec4 firstReflection = vec4(-ray.dir, +INF_HIT);\n        for (int i = 0; i < CLIPPING_PLANES_COUNT; i++) {\n            vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, i, u_clippingPlanesMatrix);\n            vec4 intersection = intersectPlane(ray, planeUv);\n            if (dot(ray.dir, planeUv.xyz) > 0.0) {\n                lastTransmission = intersection.w > lastTransmission.w ? intersection : lastTransmission;\n            } else {\n                firstReflection = intersection.w < firstReflection.w ? intersection: firstReflection;\n            }\n        }\n        if (lastTransmission.w < firstReflection.w) {\n            clippingVolume.entry = lastTransmission;\n            clippingVolume.exit = firstReflection;\n        } else {\n            clippingVolume.entry = vec4(-ray.dir, NO_HIT);\n            clippingVolume.exit = vec4(ray.dir, NO_HIT);\n        }\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX, clippingVolume);\n    #endif\n}\n"},864393:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, setIntersection,\n// setIntersectionPair\n\n/* Cylinder defines (set in Scene/VoxelCylinderShape.js)\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_RENDER_BOUNDS_HEIGHT\n#define CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED\n\n#define CYLINDER_INTERSECTION_INDEX_RADIUS_MAX\n#define CYLINDER_INTERSECTION_INDEX_RADIUS_MIN\n#define CYLINDER_INTERSECTION_INDEX_ANGLE\n*/\n\n// Cylinder uniforms\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX) || defined(CYLINDER_HAS_RENDER_BOUNDS_HEIGHT)\n    uniform vec3 u_cylinderUvToRenderBoundsScale;\n    uniform vec3 u_cylinderUvToRenderBoundsTranslate;\n#endif\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN) && !defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT)\n    uniform float u_cylinderUvToRenderRadiusMin;\n#endif\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE)\n    uniform vec2 u_cylinderRenderAngleMinMax;\n#endif\n\nvec4 intersectHalfPlane(Ray ray, float angle) {\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 planeDirection = vec2(cos(angle), sin(angle));\n    vec2 planeNormal = vec2(planeDirection.y, -planeDirection.x);\n\n    float a = dot(o, planeNormal);\n    float b = dot(d, planeNormal);\n    float t = -a / b;\n\n    vec2 p = o + t * d;\n    bool outside = dot(p, planeDirection) < 0.0;\n    if (outside) return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n\n    return vec4(-INF_HIT, t, t, +INF_HIT);\n}\n\n#define POSITIVE_HIT vec2(t, +INF_HIT);\n#define NEGATIVE_HIT vec2(-INF_HIT, t);\n\nvec2 intersectHalfSpace(Ray ray, float angle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n = vec2(sin(angle), -cos(angle));\n\n    float a = dot(o, n);\n    float b = dot(d, n);\n    float t = -a / b;\n    float s = sign(a);\n\n    // Half space cuts right through the camera, pick the side to intersect\n    if (a == 0.0) {\n        if (b >= 0.0) {\n            return POSITIVE_HIT;\n        } else {\n            return NEGATIVE_HIT;\n        }\n    }\n\n    if (t >= 0.0 != s >= 0.0) {\n        return POSITIVE_HIT;\n    } else {\n        return NEGATIVE_HIT;\n    }\n}\n\nvec2 intersectRegularWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n1 = vec2(sin(minAngle), -cos(minAngle));\n    vec2 n2 = vec2(-sin(maxAngle), cos(maxAngle));\n\n    float a1 = dot(o, n1);\n    float a2 = dot(o, n2);\n    float b1 = dot(d, n1);\n    float b2 = dot(d, n2);\n\n    float t1 = -a1 / b1;\n    float t2 = -a2 / b2;\n    float s1 = sign(a1);\n    float s2 = sign(a2);\n\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    float smin = tmin == t1 ? s1 : s2;\n    float smax = tmin == t1 ? s2 : s1;\n\n    bool e = tmin >= 0.0;\n    bool f = tmax >= 0.0;\n    bool g = smin >= 0.0;\n    bool h = smax >= 0.0;\n\n    if (e != g && f == h) return vec2(tmin, tmax);\n    else if (e == g && f == h) return vec2(-INF_HIT, tmin);\n    else if (e != g && f != h) return vec2(tmax, +INF_HIT);\n    else return vec2(NO_HIT);\n}\n\nvec4 intersectFlippedWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 planeIntersectMin = intersectHalfSpace(ray, minAngle);\n    vec2 planeIntersectMax = intersectHalfSpace(ray, maxAngle + czm_pi);\n    return vec4(planeIntersectMin, planeIntersectMax);\n}\n\nvec2 intersectUnitCylinder(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float a = dot(d.xy, d.xy);\n    float b = dot(o.xy, d.xy);\n    float c = dot(o.xy, o.xy) - 1.0;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float ta = (-b - det) / a;\n    float tb = (-b + det) / a;\n    float t1 = min(ta, tb);\n    float t2 = max(ta, tb);\n\n    float z1 = o.z + t1 * d.z;\n    float z2 = o.z + t2 * d.z;\n\n    if (abs(z1) >= 1.0)\n    {\n        float tCap = (sign(z1) - o.z) / d.z;\n        t1 = abs(b + a * tCap) < det ? tCap : NO_HIT;\n    }\n\n    if (abs(z2) >= 1.0)\n    {\n        float tCap = (sign(z2) - o.z) / d.z;\n        t2 = abs(b + a * tCap) < det ? tCap : NO_HIT;\n    }\n\n    return vec2(t1, t2);\n}\n\nvec2 intersectUnitCircle(Ray ray) {\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float t = -o.z / d.z;\n    vec2 zPlanePos = o.xy + d.xy * t;\n    float distSqr = dot(zPlanePos, zPlanePos);\n\n    if (distSqr > 1.0) {\n        return vec2(NO_HIT);\n    }\n\n    return vec2(t, t);\n}\n\nvec2 intersectInfiniteUnitCylinder(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float a = dot(d.xy, d.xy);\n    float b = dot(o.xy, d.xy);\n    float c = dot(o.xy, o.xy) - 1.0;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = (-b - det) / a;\n    float t2 = (-b + det) / a;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    return vec2(tmin, tmax);\n}\n\nvoid intersectShape(Ray ray, inout Intersections ix)\n{\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MAX) || defined(CYLINDER_HAS_RENDER_BOUNDS_HEIGHT)\n        ray.pos = ray.pos * u_cylinderUvToRenderBoundsScale + u_cylinderUvToRenderBoundsTranslate;\n        ray.dir *= u_cylinderUvToRenderBoundsScale;\n    #else\n        // Position is converted from [0,1] to [-1,+1] because shape intersections assume unit space is [-1,+1].\n        // Direction is scaled as well to be in sync with position.\n        ray.pos = ray.pos * 2.0 - 1.0;\n        ray.dir *= 2.0;\n    #endif\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_HEIGHT_FLAT)\n        vec2 outerIntersect = intersectUnitCircle(ray);\n    #else\n        vec2 outerIntersect = intersectUnitCylinder(ray);\n    #endif\n\n    setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_RADIUS_MAX, outerIntersect);\n\n    if (outerIntersect.x == NO_HIT) {\n        return;\n    }\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT)\n        // When the cylinder is perfectly thin it's necessary to sandwich the\n        // inner cylinder intersection inside the outer cylinder intersection.\n\n        // Without this special case,\n        // [outerMin, outerMax, innerMin, innerMax] will bubble sort to\n        // [outerMin, innerMin, outerMax, innerMax] which will cause the back\n        // side of the cylinder to be invisible because it will think the ray\n        // is still inside the inner (negative) cylinder after exiting the\n        // outer (positive) cylinder.\n\n        // With this special case,\n        // [outerMin, innerMin, innerMax, outerMax] will bubble sort to\n        // [outerMin, innerMin, innerMax, outerMax] which will work correctly.\n\n        // Note: If initializeIntersections() changes its sorting function\n        // from bubble sort to something else, this code may need to change.\n        vec2 innerIntersect = intersectInfiniteUnitCylinder(ray);\n        setIntersection(ix, 0, outerIntersect.x, true, true);   // positive, enter\n        setIntersection(ix, 1, innerIntersect.x, false, true);  // negative, enter\n        setIntersection(ix, 2, innerIntersect.y, false, false); // negative, exit\n        setIntersection(ix, 3, outerIntersect.y, true, false);  // positive, exit\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN)\n        Ray innerRay = Ray(ray.pos * u_cylinderUvToRenderRadiusMin, ray.dir * u_cylinderUvToRenderRadiusMin);\n        vec2 innerIntersect = intersectInfiniteUnitCylinder(innerRay);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_RADIUS_MIN, innerIntersect);\n    #endif\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF)\n        vec2 wedgeIntersect = intersectRegularWedge(ray, u_cylinderRenderAngleMinMax.x, u_cylinderRenderAngleMinMax.y);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE, wedgeIntersect);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF)\n        vec4 wedgeIntersect = intersectFlippedWedge(ray, u_cylinderRenderAngleMinMax.x, u_cylinderRenderAngleMinMax.y);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 1, wedgeIntersect.zw);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_HALF)\n        vec2 wedgeIntersect = intersectHalfSpace(ray, u_cylinderRenderAngleMinMax.x);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE, wedgeIntersect);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO)\n        vec4 wedgeIntersect = intersectHalfPlane(ray, u_cylinderRenderAngleMinMax.x);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 1, wedgeIntersect.zw);\n    #endif\n}\n"},189670:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections,\n// setIntersectionPair, INF_HIT, NO_HIT\n\n/* intersectDepth defines (set in Scene/VoxelRenderResources.js)\n#define DEPTH_INTERSECTION_INDEX ###\n*/\n\nuniform mat4 u_transformPositionViewToUv;\n\nvoid intersectDepth(in vec2 screenCoord, in Ray ray, inout Intersections ix) {\n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, screenCoord));\n    if (logDepthOrDepth != 0.0) {\n        // Calculate how far the ray must travel before it hits the depth buffer.\n        vec4 eyeCoordinateDepth = czm_screenToEyeCoordinates(screenCoord, logDepthOrDepth);\n        eyeCoordinateDepth /= eyeCoordinateDepth.w;\n        vec3 depthPositionUv = vec3(u_transformPositionViewToUv * eyeCoordinateDepth);\n        float t = dot(depthPositionUv - ray.pos, ray.dir);\n        setIntersectionPair(ix, DEPTH_INTERSECTION_INDEX, vec2(t, +INF_HIT));\n    } else {\n        // There's no depth at this location.\n        setIntersectionPair(ix, DEPTH_INTERSECTION_INDEX, vec2(NO_HIT));\n    }\n}\n"},485326:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections,\n// setIntersection, setIntersectionPair, INF_HIT, NO_HIT\n\n/* Ellipsoid defines (set in Scene/VoxelEllipsoidShape.js)\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX\n#define ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN\n#define ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT\n#define ELLIPSOID_INTERSECTION_INDEX_LONGITUDE\n#define ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX\n#define ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN\n#define ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX\n#define ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN\n*/\n\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE)\n    uniform vec2 u_ellipsoidRenderLongitudeMinMax;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF)\n    uniform vec2 u_ellipsoidRenderLatitudeCosSqrHalfMinMax;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX)\n    uniform float u_ellipsoidInverseOuterScaleUv;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN)\n    uniform float u_ellipsoidInverseInnerScaleUv;\n#endif\n\nvec2 intersectZPlane(Ray ray)\n{\n    float o = ray.pos.z;\n    float d = ray.dir.z;\n    float t = -o / d;\n    float s = sign(o);\n\n    if (t >= 0.0 != s >= 0.0) return vec2(t, +INF_HIT);\n    else return vec2(-INF_HIT, t);\n}\n\nvec4 intersectHalfPlane(Ray ray, float angle) {\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 planeDirection = vec2(cos(angle), sin(angle));\n    vec2 planeNormal = vec2(planeDirection.y, -planeDirection.x);\n\n    float a = dot(o, planeNormal);\n    float b = dot(d, planeNormal);\n    float t = -a / b;\n\n    vec2 p = o + t * d;\n    bool outside = dot(p, planeDirection) < 0.0;\n    if (outside) return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n\n    return vec4(-INF_HIT, t, t, +INF_HIT);\n}\n\nvec2 intersectHalfSpace(Ray ray, float angle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n = vec2(sin(angle), -cos(angle));\n\n    float a = dot(o, n);\n    float b = dot(d, n);\n    float t = -a / b;\n    float s = sign(a);\n\n    if (t >= 0.0 != s >= 0.0) return vec2(t, +INF_HIT);\n    else return vec2(-INF_HIT, t);\n}\n\nvec2 intersectRegularWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 o = ray.pos.xy;\n    vec2 d = ray.dir.xy;\n    vec2 n1 = vec2(sin(minAngle), -cos(minAngle));\n    vec2 n2 = vec2(-sin(maxAngle), cos(maxAngle));\n\n    float a1 = dot(o, n1);\n    float a2 = dot(o, n2);\n    float b1 = dot(d, n1);\n    float b2 = dot(d, n2);\n\n    float t1 = -a1 / b1;\n    float t2 = -a2 / b2;\n    float s1 = sign(a1);\n    float s2 = sign(a2);\n\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    float smin = tmin == t1 ? s1 : s2;\n    float smax = tmin == t1 ? s2 : s1;\n\n    bool e = tmin >= 0.0;\n    bool f = tmax >= 0.0;\n    bool g = smin >= 0.0;\n    bool h = smax >= 0.0;\n\n    if (e != g && f == h) return vec2(tmin, tmax);\n    else if (e == g && f == h) return vec2(-INF_HIT, tmin);\n    else if (e != g && f != h) return vec2(tmax, +INF_HIT);\n    else return vec2(NO_HIT);\n}\n\nvec4 intersectFlippedWedge(Ray ray, float minAngle, float maxAngle)\n{\n    vec2 planeIntersectMin = intersectHalfSpace(ray, minAngle);\n    vec2 planeIntersectMax = intersectHalfSpace(ray, maxAngle + czm_pi);\n    return vec4(planeIntersectMin, planeIntersectMax);\n}\n\nvec2 intersectUnitSphere(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float b = dot(d, o);\n    float c = dot(o, o) - 1.0;\n    float det = b * b - c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = -b - det;\n    float t2 = -b + det;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    return vec2(tmin, tmax);\n}\n\nvec2 intersectUnitSphereUnnormalizedDirection(Ray ray)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n\n    float a = dot(d, d);\n    float b = dot(d, o);\n    float c = dot(o, o) - 1.0;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = (-b - det) / a;\n    float t2 = (-b + det) / a;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    return vec2(tmin, tmax);\n}\n\nvec2 intersectDoubleEndedCone(Ray ray, float cosSqrHalfAngle)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float a = d.z * d.z - dot(d, d) * cosSqrHalfAngle;\n    float b = d.z * o.z - dot(o, d) * cosSqrHalfAngle;\n    float c = o.z * o.z - dot(o, o) * cosSqrHalfAngle;\n    float det = b * b - a * c;\n\n    if (det < 0.0) {\n        return vec2(NO_HIT);\n    }\n\n    det = sqrt(det);\n    float t1 = (-b - det) / a;\n    float t2 = (-b + det) / a;\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    return vec2(tmin, tmax);\n}\n\nvec4 intersectFlippedCone(Ray ray, float cosSqrHalfAngle) {\n    vec2 intersect = intersectDoubleEndedCone(ray, cosSqrHalfAngle);\n\n    if (intersect.x == NO_HIT) {\n        return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n    }\n\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float tmin = intersect.x;\n    float tmax = intersect.y;\n    float zmin = o.z + tmin * d.z;\n    float zmax = o.z + tmax * d.z;\n\n    // One interval\n    if (zmin < 0.0 && zmax < 0.0) return vec4(-INF_HIT, +INF_HIT, NO_HIT, NO_HIT);\n    else if (zmin < 0.0) return vec4(-INF_HIT, tmax, NO_HIT, NO_HIT);\n    else if (zmax < 0.0) return vec4(tmin, +INF_HIT, NO_HIT, NO_HIT);\n    // Two intervals\n    else return vec4(-INF_HIT, tmin, tmax, +INF_HIT);\n}\n\nvec2 intersectRegularCone(Ray ray, float cosSqrHalfAngle) {\n    vec2 intersect = intersectDoubleEndedCone(ray, cosSqrHalfAngle);\n\n    if (intersect.x == NO_HIT) {\n        return vec2(NO_HIT);\n    }\n\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float tmin = intersect.x;\n    float tmax = intersect.y;\n    float zmin = o.z + tmin * d.z;\n    float zmax = o.z + tmax * d.z;\n\n    if (zmin < 0.0 && zmax < 0.0) return vec2(NO_HIT);\n    else if (zmin < 0.0) return vec2(tmax, +INF_HIT);\n    else if (zmax < 0.0) return vec2(-INF_HIT, tmin);\n    else return vec2(tmin, tmax);\n}\n\nvoid intersectShape(in Ray ray, inout Intersections ix) {\n    // Position is converted from [0,1] to [-1,+1] because shape intersections assume unit space is [-1,+1].\n    // Direction is scaled as well to be in sync with position.\n    ray.pos = ray.pos * 2.0 - 1.0;\n    ray.dir *= 2.0;\n\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MAX)\n        Ray outerRay = Ray(ray.pos * u_ellipsoidInverseOuterScaleUv, ray.dir * u_ellipsoidInverseOuterScaleUv);\n    #else\n        Ray outerRay = ray;\n    #endif\n\n    // Outer ellipsoid\n    vec2 outerIntersect = intersectUnitSphereUnnormalizedDirection(outerRay);\n    setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX, outerIntersect);\n\n    // Exit early if the outer ellipsoid was missed.\n    if (outerIntersect.x == NO_HIT) {\n        return;\n    }\n\n    // Inner ellipsoid\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_FLAT)\n        // When the ellipsoid is perfectly thin it's necessary to sandwich the\n        // inner ellipsoid intersection inside the outer ellipsoid intersection.\n\n        // Without this special case,\n        // [outerMin, outerMax, innerMin, innerMax] will bubble sort to\n        // [outerMin, innerMin, outerMax, innerMax] which will cause the back\n        // side of the ellipsoid to be invisible because it will think the ray\n        // is still inside the inner (negative) ellipsoid after exiting the\n        // outer (positive) ellipsoid.\n\n        // With this special case,\n        // [outerMin, innerMin, innerMax, outerMax] will bubble sort to\n        // [outerMin, innerMin, innerMax, outerMax] which will work correctly.\n\n        // Note: If initializeIntersections() changes its sorting function\n        // from bubble sort to something else, this code may need to change.\n        setIntersection(ix, 0, outerIntersect.x, true, true);   // positive, enter\n        setIntersection(ix, 1, outerIntersect.x, false, true);  // negative, enter\n        setIntersection(ix, 2, outerIntersect.y, false, false); // negative, exit\n        setIntersection(ix, 3, outerIntersect.y, true, false);  // positive, exit\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_HEIGHT_MIN)\n        Ray innerRay = Ray(ray.pos * u_ellipsoidInverseInnerScaleUv, ray.dir * u_ellipsoidInverseInnerScaleUv);\n        vec2 innerIntersect = intersectUnitSphereUnnormalizedDirection(innerRay);\n\n        if (innerIntersect == vec2(NO_HIT)) {\n            setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN, innerIntersect);\n        } else {\n            // When the ellipsoid is very large and thin it's possible for floating\n            // point math to cause the ray to intersect the inner ellipsoid before\n            // the outer ellipsoid. To prevent this from happening, clamp innerIntersect\n            // to outerIntersect and sandwhich the intersections like described above.\n            //\n            // In theory a similar fix is needed for cylinders, however it's more\n            // complicated to implement because the inner shape is allowed to be\n            // intersected first.\n            innerIntersect.x = max(innerIntersect.x, outerIntersect.x);\n            innerIntersect.y = min(innerIntersect.y, outerIntersect.y);\n            setIntersection(ix, 0, outerIntersect.x, true, true);   // positive, enter\n            setIntersection(ix, 1, innerIntersect.x, false, true);  // negative, enter\n            setIntersection(ix, 2, innerIntersect.y, false, false); // negative, exit\n            setIntersection(ix, 3, outerIntersect.y, true, false);  // positive, exit\n        }\n    #endif\n\n    // Flip the ray because the intersection function expects a cone growing towards +Z.\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF)\n        Ray flippedRay = outerRay;\n        flippedRay.dir.z *= -1.0;\n        flippedRay.pos.z *= -1.0;\n    #endif\n\n    // Bottom cone\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF)\n        vec2 bottomConeIntersection = intersectRegularCone(flippedRay, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN, bottomConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF)\n        vec2 bottomConeIntersection = intersectZPlane(flippedRay);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN, bottomConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF)\n        vec4 bottomConeIntersection = intersectFlippedCone(ray, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN + 0, bottomConeIntersection.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN + 1, bottomConeIntersection.zw);\n    #endif\n\n    // Top cone\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF)\n        vec4 topConeIntersection = intersectFlippedCone(flippedRay, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX + 0, topConeIntersection.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX + 1, topConeIntersection.zw);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF)\n        vec2 topConeIntersection = intersectZPlane(ray);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX, topConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF)\n        vec2 topConeIntersection = intersectRegularCone(ray, u_ellipsoidRenderLatitudeCosSqrHalfMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX, topConeIntersection);\n    #endif\n\n    // Wedge\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO)\n        vec4 wedgeIntersect = intersectHalfPlane(ray, u_ellipsoidRenderLongitudeMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 1, wedgeIntersect.zw);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF)\n        vec2 wedgeIntersect = intersectRegularWedge(ray, u_ellipsoidRenderLongitudeMinMax.x, u_ellipsoidRenderLongitudeMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE, wedgeIntersect);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_HALF)\n        vec2 wedgeIntersect = intersectHalfSpace(ray, u_ellipsoidRenderLongitudeMinMax.x);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE, wedgeIntersect);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF)\n        vec4 wedgeIntersect = intersectFlippedWedge(ray, u_ellipsoidRenderLongitudeMinMax.x, u_ellipsoidRenderLongitudeMinMax.y);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 0, wedgeIntersect.xy);\n        setIntersectionPair(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 1, wedgeIntersect.zw);\n    #endif\n}\n"},741641:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// Main intersection function for Voxel scenes.\n// See IntersectBox.glsl, IntersectCylinder.glsl, or IntersectEllipsoid.glsl\n// for the definition of intersectShape. The appropriate function is selected\n// based on the VoxelPrimitive shape type, and added to the shader in\n// Scene/VoxelRenderResources.js.\n// See also IntersectClippingPlane.glsl and IntersectDepth.glsl.\n// See IntersectionUtils.glsl for the definitions of Ray, NO_HIT,\n// getFirstIntersection, initializeIntersections, nextIntersection.\n\n/* Intersection defines (set in Scene/VoxelRenderResources.js)\n#define INTERSECTION_COUNT ###\n*/\n\nRayShapeIntersection intersectScene(in vec2 screenCoord, in Ray ray, out Intersections ix) {\n    // Do a ray-shape intersection to find the exact starting and ending points.\n    intersectShape(ray, ix);\n\n    // Exit early if the positive shape was completely missed or behind the ray.\n    RayShapeIntersection intersection = getFirstIntersection(ix);\n    if (intersection.entry.w == NO_HIT) {\n        // Positive shape was completely missed - so exit early.\n        return intersection;\n    }\n\n    // Clipping planes\n    #if defined(CLIPPING_PLANES)\n        intersectClippingPlanes(ray, ix);\n    #endif\n\n    // Depth\n    #if defined(DEPTH_TEST)\n        intersectDepth(screenCoord, ray, ix);\n    #endif\n\n    // Find the first intersection that's in front of the ray\n    #if (INTERSECTION_COUNT > 1)\n        initializeIntersections(ix);\n        for (int i = 0; i < INTERSECTION_COUNT; ++i) {\n            intersection = nextIntersection(ix);\n            if (intersection.exit.w > 0.0) {\n                // Set start to 0.0 when ray is inside the shape.\n                intersection.entry.w = max(intersection.entry.w, 0.0);\n                break;\n            }\n        }\n    #else\n        // Set start to 0.0 when ray is inside the shape.\n        intersection.entry.w = max(intersection.entry.w, 0.0);\n    #endif\n\n    return intersection;\n}\n"},418816:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Intersection defines\n#define INTERSECTION_COUNT ###\n*/\n\n#define NO_HIT (-czm_infinity)\n#define INF_HIT (czm_infinity * 0.5)\n#define RAY_SHIFT (0.000003163)\n#define RAY_SCALE (1.003163)\n\nstruct Ray {\n    vec3 pos;\n    vec3 dir;\n#if defined(SHAPE_BOX)\n    vec3 dInv;\n#endif\n};\n\nstruct RayShapeIntersection {\n    vec4 entry;\n    vec4 exit;\n};\n\nstruct Intersections {\n    // Don't access these member variables directly - call the functions instead.\n\n    // Store an array of ray-surface intersections. Each intersection is composed of:\n    //  .xyz for the surface normal at the intersection point\n    //  .w for the T value\n    // The scale of the normal encodes the shape intersection type:\n    //  length(intersection.xyz) = 1: positive shape entry\n    //  length(intersection.xyz) = 2: positive shape exit\n    //  length(intersection.xyz) = 3: negative shape entry\n    //  length(intersection.xyz) = 4: negative shape exit\n    // INTERSECTION_COUNT is the number of ray-*shape* (volume) intersections,\n    // so we need twice as many to track ray-*surface* intersections\n    vec4 intersections[INTERSECTION_COUNT * 2];\n\n    #if (INTERSECTION_COUNT > 1)\n        // Maintain state for future nextIntersection calls\n        int index;\n        int surroundCount;\n        bool surroundIsPositive;\n    #endif\n};\n\nRayShapeIntersection getFirstIntersection(in Intersections ix) \n{\n    return RayShapeIntersection(ix.intersections[0], ix.intersections[1]);\n}\n\nvec4 encodeIntersectionType(vec4 intersection, int index, bool entry)\n{\n    float scale = float(index > 0) * 2.0 + float(!entry) + 1.0;\n    return vec4(intersection.xyz * scale, intersection.w);\n}\n\n// Use defines instead of real functions because WebGL1 cannot access array with non-constant index.\n#define setIntersection(/*inout Intersections*/ ix, /*int*/ index, /*float*/ t, /*bool*/ positive, /*bool*/ enter) (ix).intersections[(index)] = vec4(0.0, float(!positive) * 2.0 + float(!enter) + 1.0, 0.0, (t))\n#define setIntersectionPair(/*inout Intersections*/ ix, /*int*/ index, /*vec2*/ entryExit) (ix).intersections[(index) * 2 + 0] = vec4(0.0, float((index) > 0) * 2.0 + 1.0, 0.0, (entryExit).x); (ix).intersections[(index) * 2 + 1] = vec4(0.0, float((index) > 0) * 2.0 + 2.0, 0.0, (entryExit).y)\n#define setSurfaceIntersection(/*inout Intersections*/ ix, /*int*/ index, /*vec4*/ intersection) (ix).intersections[(index)] = intersection;\n#define setShapeIntersection(/*inout Intersections*/ ix, /*int*/ index, /*RayShapeIntersection*/ intersection) (ix).intersections[(index) * 2 + 0] = encodeIntersectionType((intersection).entry, (index), true); (ix).intersections[(index) * 2 + 1] = encodeIntersectionType((intersection).exit, (index), false)\n\n#if (INTERSECTION_COUNT > 1)\nvoid initializeIntersections(inout Intersections ix) {\n    // Sort the intersections from min T to max T with bubble sort.\n    // Note: If this sorting function changes, some of the intersection test may\n    // need to be updated. Search for \"bubble sort\" to find those areas.\n    const int sortPasses = INTERSECTION_COUNT * 2 - 1;\n    for (int n = sortPasses; n > 0; --n) {\n        for (int i = 0; i < sortPasses; ++i) {\n            // The loop should be: for (i = 0; i < n; ++i) {...} but WebGL1 cannot\n            // loop with non-constant condition, so it has to break early instead\n            if (i >= n) { break; }\n\n            vec4 intersect0 = ix.intersections[i + 0];\n            vec4 intersect1 = ix.intersections[i + 1];\n\n            bool inOrder = intersect0.w <= intersect1.w;\n\n            ix.intersections[i + 0] = inOrder ? intersect0 : intersect1;\n            ix.intersections[i + 1] = inOrder ? intersect1 : intersect0;\n        }\n    }\n\n    // Prepare initial state for nextIntersection\n    ix.index = 0;\n    ix.surroundCount = 0;\n    ix.surroundIsPositive = false;\n}\n#endif\n\n#if (INTERSECTION_COUNT > 1)\nRayShapeIntersection nextIntersection(inout Intersections ix) {\n    vec4 surfaceIntersection = vec4(0.0, 0.0, 0.0, NO_HIT);\n    RayShapeIntersection shapeIntersection = RayShapeIntersection(surfaceIntersection, surfaceIntersection);\n\n    const int passCount = INTERSECTION_COUNT * 2;\n\n    if (ix.index == passCount) {\n        return shapeIntersection;\n    }\n\n    for (int i = 0; i < passCount; ++i) {\n        // The loop should be: for (i = ix.index; i < passCount; ++i) {...} but WebGL1 cannot\n        // loop with non-constant condition, so it has to continue instead.\n        if (i < ix.index) {\n            continue;\n        }\n\n        ix.index = i + 1;\n\n        surfaceIntersection = ix.intersections[i];\n        int intersectionType = int(length(surfaceIntersection.xyz) - 0.5);\n        bool currShapeIsPositive = intersectionType < 2;\n        bool enter = intMod(intersectionType, 2) == 0;\n\n        ix.surroundCount += enter ? +1 : -1;\n        ix.surroundIsPositive = currShapeIsPositive ? enter : ix.surroundIsPositive;\n\n        // entering positive or exiting negative\n        if (ix.surroundCount == 1 && ix.surroundIsPositive && enter == currShapeIsPositive) {\n            shapeIntersection.entry = surfaceIntersection;\n        }\n\n        // exiting positive or entering negative after being inside positive\n        bool exitPositive = !enter && currShapeIsPositive && ix.surroundCount == 0;\n        bool enterNegativeFromPositive = enter && !currShapeIsPositive && ix.surroundCount == 2 && ix.surroundIsPositive;\n        if (exitPositive || enterNegativeFromPositive) {\n            shapeIntersection.exit = surfaceIntersection;\n\n            // entry and exit have been found, so the loop can stop\n            if (exitPositive) {\n                // After exiting positive shape there is nothing left to intersect, so jump to the end index.\n                ix.index = passCount;\n            }\n            break;\n        }\n    }\n\n    return shapeIntersection;\n}\n#endif\n\n// NOTE: initializeIntersections, nextIntersection aren't even declared unless INTERSECTION_COUNT > 1\n"},195987:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See Octree.glsl for the definitions of SampleData and intMod\n\n/* Megatexture defines (set in Scene/VoxelRenderResources.js)\n#define SAMPLE_COUNT ###\n#define NEAREST_SAMPLING\n#define PADDING\n*/\n\nuniform ivec2 u_megatextureSliceDimensions; // number of slices per tile, in two dimensions\nuniform ivec2 u_megatextureTileDimensions; // number of tiles per megatexture, in two dimensions\nuniform vec2 u_megatextureVoxelSizeUv;\nuniform vec2 u_megatextureSliceSizeUv;\nuniform vec2 u_megatextureTileSizeUv;\n\nuniform ivec3 u_dimensions; // does not include padding\n#if defined(PADDING)\n    uniform ivec3 u_paddingBefore;\n    uniform ivec3 u_paddingAfter;\n#endif\n\n// Integer min, max, clamp: For WebGL1 only\nint intMin(int a, int b) {\n    return a <= b ? a : b;\n}\nint intMax(int a, int b) {\n    return a >= b ? a : b;\n}\nint intClamp(int v, int minVal, int maxVal) {\n    return intMin(intMax(v, minVal), maxVal);\n}\n\nvec2 index1DTo2DTexcoord(int index, ivec2 dimensions, vec2 uvScale)\n{\n    int indexX = intMod(index, dimensions.x);\n    int indexY = index / dimensions.x;\n    return vec2(indexX, indexY) * uvScale;\n}\n\n/*\n    How is 3D data stored in a 2D megatexture?\n\n    In this example there is only one loaded tile and it has 2x2x2 voxels (8 voxels total).\n    The data is sliced by Z. The data at Z = 0 is placed in texels (0,0), (0,1), (1,0), (1,1) and\n    the data at Z = 1 is placed in texels (2,0), (2,1), (3,0), (3,1).\n    Note that there could be empty space in the megatexture because it's a power of two.\n\n      0   1   2   3\n    +---+---+---+---+\n    |   |   |   |   | 3\n    +---+---+---+---+\n    |   |   |   |   | 2\n    +-------+-------+\n    |010|110|011|111| 1\n    |--- ---|--- ---|\n    |000|100|001|101| 0\n    +-------+-------+\n\n    When doing linear interpolation the megatexture needs to be sampled twice: once for\n    the Z slice above the voxel coordinate and once for the slice below. The two slices\n    are interpolated with fract(coord.z - 0.5). For example, a Z coordinate of 1.0 is\n    halfway between two Z slices so the interpolation factor is 0.5. Below is a side view\n    of the 3D voxel grid with voxel coordinates on the left side.\n\n    2 +---+\n      |001|\n    1 +-z-+\n      |000|\n    0 +---+\n\n    When doing nearest neighbor the megatexture only needs to be sampled once at the closest Z slice.\n*/\n\nProperties getPropertiesFromMegatexture(in SampleData sampleData) {\n    vec3 tileUv = clamp(sampleData.tileUv, vec3(0.0), vec3(1.0)); // TODO is the clamp necessary?\n    int tileIndex = sampleData.megatextureIndex;\n    vec3 voxelCoord = tileUv * vec3(u_dimensions);\n    ivec3 voxelDimensions = u_dimensions;\n\n    #if defined(PADDING)\n        voxelDimensions += u_paddingBefore + u_paddingAfter;\n        voxelCoord += vec3(u_paddingBefore);\n    #endif\n\n    #if defined(NEAREST_SAMPLING)\n        // Round to the center of the nearest voxel\n        voxelCoord = floor(voxelCoord) + vec3(0.5);\n    #endif\n\n    // Tile location\n    vec2 tileUvOffset = index1DTo2DTexcoord(tileIndex, u_megatextureTileDimensions, u_megatextureTileSizeUv);\n\n    // Slice location\n    float slice = voxelCoord.z - 0.5;\n    int sliceIndex = int(floor(slice));\n    int sliceIndex0 = intClamp(sliceIndex, 0, voxelDimensions.z - 1);\n    vec2 sliceUvOffset0 = index1DTo2DTexcoord(sliceIndex0, u_megatextureSliceDimensions, u_megatextureSliceSizeUv);\n\n    // Voxel location\n    vec2 voxelUvOffset = clamp(voxelCoord.xy, vec2(0.5), vec2(voxelDimensions.xy) - vec2(0.5)) * u_megatextureVoxelSizeUv;\n\n    // Final location in the megatexture\n    vec2 uv0 = tileUvOffset + sliceUvOffset0 + voxelUvOffset;\n\n    #if defined(NEAREST_SAMPLING)\n        return getPropertiesFromMegatextureAtUv(uv0);\n    #else\n        float sliceLerp = fract(slice);\n        int sliceIndex1 = intMin(sliceIndex + 1, voxelDimensions.z - 1);\n        vec2 sliceUvOffset1 = index1DTo2DTexcoord(sliceIndex1, u_megatextureSliceDimensions, u_megatextureSliceSizeUv);\n        vec2 uv1 = tileUvOffset + sliceUvOffset1 + voxelUvOffset;\n        Properties properties0 = getPropertiesFromMegatextureAtUv(uv0);\n        Properties properties1 = getPropertiesFromMegatextureAtUv(uv1);\n        return mixProperties(properties0, properties1, sliceLerp);\n    #endif\n}\n\n// Convert an array of sample datas to a final weighted properties.\nProperties accumulatePropertiesFromMegatexture(in SampleData sampleDatas[SAMPLE_COUNT]) {\n    #if (SAMPLE_COUNT == 1)\n        return getPropertiesFromMegatexture(sampleDatas[0]);\n    #else\n        // When more than one sample is taken the accumulator needs to start at 0\n        Properties properties = clearProperties();\n        for (int i = 0; i < SAMPLE_COUNT; ++i) {\n            float weight = sampleDatas[i].weight;\n\n            // Avoid reading the megatexture when the weight is 0 as it can be costly.\n            if (weight > 0.0) {\n                Properties tempProperties = getPropertiesFromMegatexture(sampleDatas[i]);\n                tempProperties = scaleProperties(tempProperties, weight);\n                properties = sumProperties(properties, tempProperties);\n            }\n        }\n        return properties;\n    #endif\n}\n"},940702:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// These octree flags must be in sync with GpuOctreeFlag in VoxelTraversal.js\n#define OCTREE_FLAG_INTERNAL 0\n#define OCTREE_FLAG_LEAF 1\n#define OCTREE_FLAG_PACKED_LEAF_FROM_PARENT 2\n\n#define OCTREE_MAX_LEVELS 32 // Harcoded value because GLSL doesn't like variable length loops\n\nuniform sampler2D u_octreeInternalNodeTexture;\nuniform vec2 u_octreeInternalNodeTexelSizeUv;\nuniform int u_octreeInternalNodeTilesPerRow;\n#if (SAMPLE_COUNT > 1)\nuniform sampler2D u_octreeLeafNodeTexture;\nuniform vec2 u_octreeLeafNodeTexelSizeUv;\nuniform int u_octreeLeafNodeTilesPerRow;\n#endif\n\nstruct OctreeNodeData {\n    int data;\n    int flag;\n};\n\nstruct TraversalData {\n    ivec4 octreeCoords;\n    int parentOctreeIndex;\n};\n\nstruct SampleData {\n    int megatextureIndex;\n    ivec4 tileCoords;\n    vec3 tileUv;\n    #if (SAMPLE_COUNT > 1)\n        float weight;\n    #endif\n};\n\n// Integer mod: For WebGL1 only\nint intMod(in int a, in int b) {\n    return a - (b * (a / b));\n}\nint normU8_toInt(in float value) {\n    return int(value * 255.0);\n}\nint normU8x2_toInt(in vec2 value) {\n    return int(value.x * 255.0) + 256 * int(value.y * 255.0);\n}\nfloat normU8x2_toFloat(in vec2 value) {\n    return float(normU8x2_toInt(value)) / 65535.0;\n}\n\nOctreeNodeData getOctreeNodeData(in vec2 octreeUv) {\n    vec4 texData = texture(u_octreeInternalNodeTexture, octreeUv);\n\n    OctreeNodeData data;\n    data.data = normU8x2_toInt(texData.xy);\n    data.flag = normU8x2_toInt(texData.zw);\n    return data;\n}\n\nOctreeNodeData getOctreeChildData(in int parentOctreeIndex, in ivec3 childCoord) {\n    int childIndex = childCoord.z * 4 + childCoord.y * 2 + childCoord.x;\n    int octreeCoordX = intMod(parentOctreeIndex, u_octreeInternalNodeTilesPerRow) * 9 + 1 + childIndex;\n    int octreeCoordY = parentOctreeIndex / u_octreeInternalNodeTilesPerRow;\n    vec2 octreeUv = u_octreeInternalNodeTexelSizeUv * vec2(float(octreeCoordX) + 0.5, float(octreeCoordY) + 0.5);\n    return getOctreeNodeData(octreeUv);\n}\n\nint getOctreeParentIndex(in int octreeIndex) {\n    int octreeCoordX = intMod(octreeIndex, u_octreeInternalNodeTilesPerRow) * 9;\n    int octreeCoordY = octreeIndex / u_octreeInternalNodeTilesPerRow;\n    vec2 octreeUv = u_octreeInternalNodeTexelSizeUv * vec2(float(octreeCoordX) + 0.5, float(octreeCoordY) + 0.5);\n    vec4 parentData = texture(u_octreeInternalNodeTexture, octreeUv);\n    int parentOctreeIndex = normU8x2_toInt(parentData.xy);\n    return parentOctreeIndex;\n}\n\n/**\n* Convert a position in the uv-space of the tileset bounding shape\n* into the uv-space of a tile within the tileset\n*/\nvec3 getTileUv(in vec3 shapePosition, in ivec4 octreeCoords) {\n\t// PERFORMANCE_IDEA: use bit-shifting (only in WebGL2)\n    float dimAtLevel = pow(2.0, float(octreeCoords.w));\n    return shapePosition * dimAtLevel - vec3(octreeCoords.xyz);\n}\n\nvoid getOctreeLeafSampleData(in OctreeNodeData data, in ivec4 octreeCoords, out SampleData sampleData) {\n    sampleData.megatextureIndex = data.data;\n    sampleData.tileCoords = (data.flag == OCTREE_FLAG_PACKED_LEAF_FROM_PARENT)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n}\n\n#if (SAMPLE_COUNT > 1)\nvoid getOctreeLeafSampleDatas(in OctreeNodeData data, in ivec4 octreeCoords, out SampleData sampleDatas[SAMPLE_COUNT]) {\n    int leafIndex = data.data;\n    int leafNodeTexelCount = 2;\n    // Adding 0.5 moves to the center of the texel\n    float leafCoordXStart = float(intMod(leafIndex, u_octreeLeafNodeTilesPerRow) * leafNodeTexelCount) + 0.5;\n    float leafCoordY = float(leafIndex / u_octreeLeafNodeTilesPerRow) + 0.5;\n\n    // Get an interpolation weight and a flag to determine whether to read the parent texture\n    vec2 leafUv0 = u_octreeLeafNodeTexelSizeUv * vec2(leafCoordXStart + 0.0, leafCoordY);\n    vec4 leafData0 = texture(u_octreeLeafNodeTexture, leafUv0);\n    float lerp = normU8x2_toFloat(leafData0.xy);\n    sampleDatas[0].weight = 1.0 - lerp;\n    sampleDatas[1].weight = lerp;\n    // TODO: this looks wrong? Should be comparing to OCTREE_FLAG_PACKED_LEAF_FROM_PARENT\n    sampleDatas[0].tileCoords = (normU8_toInt(leafData0.z) == 1)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n    sampleDatas[1].tileCoords = (normU8_toInt(leafData0.w) == 1)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n\n    // Get megatexture indices for both samples\n    vec2 leafUv1 = u_octreeLeafNodeTexelSizeUv * vec2(leafCoordXStart + 1.0, leafCoordY);\n    vec4 leafData1 = texture(u_octreeLeafNodeTexture, leafUv1);\n    sampleDatas[0].megatextureIndex = normU8x2_toInt(leafData1.xy);\n    sampleDatas[1].megatextureIndex = normU8x2_toInt(leafData1.zw);\n}\n#endif\n\nOctreeNodeData traverseOctreeDownwards(in vec3 shapePosition, inout TraversalData traversalData) {\n    float sizeAtLevel = 1.0 / pow(2.0, float(traversalData.octreeCoords.w));\n    vec3 start = vec3(traversalData.octreeCoords.xyz) * sizeAtLevel;\n    vec3 end = start + vec3(sizeAtLevel);\n    OctreeNodeData childData;\n\n    for (int i = 0; i < OCTREE_MAX_LEVELS; ++i) {\n        // Find out which octree child contains the position\n        // 0 if before center, 1 if after\n        vec3 center = 0.5 * (start + end);\n        vec3 childCoord = step(center, shapePosition);\n\n        // Get octree coords for the next level down\n        ivec4 octreeCoords = traversalData.octreeCoords;\n        traversalData.octreeCoords = ivec4(octreeCoords.xyz * 2 + ivec3(childCoord), octreeCoords.w + 1);\n\n        childData = getOctreeChildData(traversalData.parentOctreeIndex, ivec3(childCoord));\n\n        if (childData.flag != OCTREE_FLAG_INTERNAL) {\n            // leaf tile - stop traversing\n            break;\n        }\n\n        // interior tile - keep going deeper\n        start = mix(start, center, childCoord);\n        end = mix(center, end, childCoord);\n        traversalData.parentOctreeIndex = childData.data;\n    }\n\n    return childData;\n}\n\n/**\n* Transform a given position to an octree tile coordinate and a position within that tile,\n* and find the corresponding megatexture index and texture coordinates\n*/\nvoid traverseOctreeFromBeginning(in vec3 shapePosition, out TraversalData traversalData, out SampleData sampleDatas[SAMPLE_COUNT]) {\n    traversalData.octreeCoords = ivec4(0);\n    traversalData.parentOctreeIndex = 0;\n\n    OctreeNodeData nodeData = getOctreeNodeData(vec2(0.0));\n    if (nodeData.flag != OCTREE_FLAG_LEAF) {\n        nodeData = traverseOctreeDownwards(shapePosition, traversalData);\n    }\n\n    #if (SAMPLE_COUNT == 1)\n        getOctreeLeafSampleData(nodeData, traversalData.octreeCoords, sampleDatas[0]);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n    #else\n        getOctreeLeafSampleDatas(nodeData, traversalData.octreeCoords, sampleDatas);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n        sampleDatas[1].tileUv = getTileUv(shapePosition, sampleDatas[1].tileCoords);\n    #endif\n}\n\nbool inRange(in vec3 v, in vec3 minVal, in vec3 maxVal) {\n    return clamp(v, minVal, maxVal) == v;\n}\n\nbool insideTile(in vec3 shapePosition, in ivec4 octreeCoords) {\n    vec3 tileUv = getTileUv(shapePosition, octreeCoords);\n\tbool inside = inRange(tileUv, vec3(0.0), vec3(1.0));\n\t// Assume (!) the position is always inside the root tile.\n\treturn inside || octreeCoords.w == 0;\n}\n\nvoid traverseOctreeFromExisting(in vec3 shapePosition, inout TraversalData traversalData, inout SampleData sampleDatas[SAMPLE_COUNT]) {\n    if (insideTile(shapePosition, traversalData.octreeCoords)) {\n        for (int i = 0; i < SAMPLE_COUNT; i++) {\n            sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n        }\n        return;\n    }\n\n    // Go up tree until we find a parent tile containing shapePosition\n    for (int i = 0; i < OCTREE_MAX_LEVELS; ++i) {\n        traversalData.octreeCoords.xyz /= 2;\n        traversalData.octreeCoords.w -= 1;\n\n        if (insideTile(shapePosition, traversalData.octreeCoords)) {\n            break;\n        }\n\n        traversalData.parentOctreeIndex = getOctreeParentIndex(traversalData.parentOctreeIndex);\n    }\n\n    // Go down tree\n    OctreeNodeData nodeData = traverseOctreeDownwards(shapePosition, traversalData);\n\n    #if (SAMPLE_COUNT == 1)\n        getOctreeLeafSampleData(nodeData, traversalData.octreeCoords, sampleDatas[0]);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n    #else\n        getOctreeLeafSampleDatas(nodeData, traversalData.octreeCoords, sampleDatas);\n        sampleDatas[0].tileUv = getTileUv(shapePosition, sampleDatas[0].tileCoords);\n        sampleDatas[1].tileUv = getTileUv(shapePosition, sampleDatas[1].tileCoords);\n    #endif\n}\n"},791533:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See Intersection.glsl for the definition of intersectScene\n// See IntersectionUtils.glsl for the definition of nextIntersection\n// See convertUvToBox.glsl, convertUvToCylinder.glsl, or convertUvToEllipsoid.glsl\n// for the definition of convertUvToShapeUvSpace. The appropriate function is \n// selected based on the VoxelPrimitive shape type, and added to the shader in\n// Scene/VoxelRenderResources.js.\n// See Octree.glsl for the definitions of TraversalData, SampleData,\n// traverseOctreeFromBeginning, and traverseOctreeFromExisting\n// See Megatexture.glsl for the definition of accumulatePropertiesFromMegatexture\n\n#define STEP_COUNT_MAX 1000 // Harcoded value because GLSL doesn't like variable length loops\n#define ALPHA_ACCUM_MAX 0.98 // Must be > 0.0 and <= 1.0\n\nuniform mat3 u_transformDirectionViewToLocal;\nuniform vec3 u_cameraPositionUv;\nuniform float u_stepSize;\n\n#if defined(PICKING)\n    uniform vec4 u_pickColor;\n#endif\n\n#if defined(JITTER)\nfloat hash(vec2 p)\n{\n    vec3 p3 = fract(vec3(p.xyx) * 50.0); // magic number = hashscale\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n#endif\n\nvec4 getStepSize(in SampleData sampleData, in Ray viewRay, in RayShapeIntersection shapeIntersection) {\n#if defined(SHAPE_BOX)\n    Box voxelBox = constructVoxelBox(sampleData.tileCoords, sampleData.tileUv);\n    RayShapeIntersection voxelIntersection = intersectBox(viewRay, voxelBox);\n    vec4 entry = shapeIntersection.entry.w >= voxelIntersection.entry.w ? shapeIntersection.entry : voxelIntersection.entry;\n    float exit = min(voxelIntersection.exit.w, shapeIntersection.exit.w);\n    float dt = (exit - entry.w) * RAY_SCALE;\n    return vec4(normalize(entry.xyz), dt);\n#else\n    float dimAtLevel = pow(2.0, float(sampleData.tileCoords.w));\n    return vec4(viewRay.dir, u_stepSize / dimAtLevel);\n#endif\n}\n\nvoid main()\n{\n    vec4 fragCoord = gl_FragCoord;\n    vec2 screenCoord = (fragCoord.xy - czm_viewport.xy) / czm_viewport.zw; // [0,1]\n    vec3 eyeDirection = normalize(czm_windowToEyeCoordinates(fragCoord).xyz);\n    vec3 viewDirWorld = normalize(czm_inverseViewRotation * eyeDirection); // normalize again just in case\n    vec3 viewDirUv = normalize(u_transformDirectionViewToLocal * eyeDirection); // normalize again just in case\n    vec3 viewPosUv = u_cameraPositionUv;\n    #if defined(SHAPE_BOX)\n        vec3 dInv = 1.0 / viewDirUv;\n        Ray viewRayUv = Ray(viewPosUv, viewDirUv, dInv);\n    #else\n        Ray viewRayUv = Ray(viewPosUv, viewDirUv);\n    #endif\n\n    Intersections ix;\n    RayShapeIntersection shapeIntersection = intersectScene(screenCoord, viewRayUv, ix);\n\n    // Exit early if the scene was completely missed.\n    if (shapeIntersection.entry.w == NO_HIT) {\n        discard;\n    }\n\n    float currT = shapeIntersection.entry.w * RAY_SCALE;\n    float endT = shapeIntersection.exit.w;\n    vec3 positionUv = viewPosUv + currT * viewDirUv;\n    vec3 positionUvShapeSpace = convertUvToShapeUvSpace(positionUv);\n\n    // Traverse the tree from the start position\n    TraversalData traversalData;\n    SampleData sampleDatas[SAMPLE_COUNT];\n    traverseOctreeFromBeginning(positionUvShapeSpace, traversalData, sampleDatas);\n    vec4 step = getStepSize(sampleDatas[0], viewRayUv, shapeIntersection);\n\n    #if defined(JITTER)\n        float noise = hash(screenCoord); // [0,1]\n        currT += noise * step.w;\n        positionUv += noise * step.w * viewDirUv;\n    #endif\n\n    FragmentInput fragmentInput;\n    #if defined(STATISTICS)\n        setStatistics(fragmentInput.metadata.statistics);\n    #endif\n\n    vec4 colorAccum =vec4(0.0);\n\n    for (int stepCount = 0; stepCount < STEP_COUNT_MAX; ++stepCount) {\n        // Read properties from the megatexture based on the traversal state\n        Properties properties = accumulatePropertiesFromMegatexture(sampleDatas);\n\n        // Prepare the custom shader inputs\n        copyPropertiesToMetadata(properties, fragmentInput.metadata);\n        fragmentInput.voxel.positionUv = positionUv;\n        fragmentInput.voxel.positionShapeUv = positionUvShapeSpace;\n        fragmentInput.voxel.positionUvLocal = sampleDatas[0].tileUv;\n        fragmentInput.voxel.viewDirUv = viewDirUv;\n        fragmentInput.voxel.viewDirWorld = viewDirWorld;\n        fragmentInput.voxel.surfaceNormal = step.xyz;\n        fragmentInput.voxel.travelDistance = step.w;\n\n        // Run the custom shader\n        czm_modelMaterial materialOutput;\n        fragmentMain(fragmentInput, materialOutput);\n\n        // Sanitize the custom shader output\n        vec4 color = vec4(materialOutput.diffuse, materialOutput.alpha);\n        color.rgb = max(color.rgb, vec3(0.0));\n        color.a = clamp(color.a, 0.0, 1.0);\n\n        // Pre-multiplied alpha blend\n        colorAccum += (1.0 - colorAccum.a) * vec4(color.rgb * color.a, color.a);\n\n        // Stop traversing if the alpha has been fully saturated\n        if (colorAccum.a > ALPHA_ACCUM_MAX) {\n            colorAccum.a = ALPHA_ACCUM_MAX;\n            break;\n        }\n\n        if (step.w == 0.0) {\n            // Shape is infinitely thin. The ray may have hit the edge of a\n            // foreground voxel. Step ahead slightly to check for more voxels\n            step.w == 0.00001;\n        }\n\n        // Keep raymarching\n        currT += step.w;\n        positionUv += step.w * viewDirUv;\n\n        // Check if there's more intersections.\n        if (currT > endT) {\n            #if (INTERSECTION_COUNT == 1)\n                break;\n            #else\n                shapeIntersection = nextIntersection(ix);\n                if (shapeIntersection.entry.w == NO_HIT) {\n                    break;\n                } else {\n                    // Found another intersection. Resume raymarching there\n                    currT = shapeIntersection.entry.w * RAY_SCALE;\n                    endT = shapeIntersection.exit.w;\n                    positionUv = viewPosUv + currT * viewDirUv;\n                }\n            #endif\n        }\n\n        // Traverse the tree from the current ray position.\n        // This is similar to traverseOctreeFromBeginning but is faster when the ray is in the same tile as the previous step.\n        positionUvShapeSpace = convertUvToShapeUvSpace(positionUv);\n        traverseOctreeFromExisting(positionUvShapeSpace, traversalData, sampleDatas);\n        step = getStepSize(sampleDatas[0], viewRayUv, shapeIntersection);\n    }\n\n    // Convert the alpha from [0,ALPHA_ACCUM_MAX] to [0,1]\n    colorAccum.a /= ALPHA_ACCUM_MAX;\n\n    #if defined(PICKING)\n        // If alpha is 0.0 there is nothing to pick\n        if (colorAccum.a == 0.0) {\n            discard;\n        }\n        out_FragColor = u_pickColor;\n    #else\n        out_FragColor = colorAccum;\n    #endif\n}\n"},305725:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 position;\n\nuniform vec4 u_ndcSpaceAxisAlignedBoundingBox;\n\nvoid main() {\n    vec2 aabbMin = u_ndcSpaceAxisAlignedBoundingBox.xy;\n    vec2 aabbMax = u_ndcSpaceAxisAlignedBoundingBox.zw;\n    vec2 translation = 0.5 * (aabbMax + aabbMin);\n    vec2 scale = 0.5 * (aabbMax - aabbMin);\n    gl_Position = vec4(position * scale + translation, 0.0, 1.0);\n}\n"},774390:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Box defines (set in Scene/VoxelBoxShape.js)\n#define BOX_HAS_SHAPE_BOUNDS\n*/\n\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    uniform vec3 u_boxUvToShapeUvScale;\n    uniform vec3 u_boxUvToShapeUvTranslate;\n#endif\n\nvec3 convertUvToShapeUvSpace(in vec3 positionUv) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return positionUv * u_boxUvToShapeUvScale + u_boxUvToShapeUvTranslate;\n#else\n    return positionUv;\n#endif\n}\n\nvec3 convertShapeUvToUvSpace(in vec3 shapeUv) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return (shapeUv - u_boxUvToShapeUvTranslate) / u_boxUvToShapeUvScale;\n#else\n    return shapeUv;\n#endif\n}\n"},248877:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Cylinder defines (set in Scene/VoxelCylinderShape.js)\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED\n*/\n\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n    uniform vec2 u_cylinderUvToShapeUvRadius; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n    uniform vec2 u_cylinderUvToShapeUvHeight; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n    uniform vec2 u_cylinderUvToShapeUvAngle; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY)\n    uniform vec2 u_cylinderShapeUvAngleMinMax;\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED)\n    uniform float u_cylinderShapeUvAngleRangeZeroMid;\n#endif\n\nvec3 convertUvToShapeUvSpace(in vec3 positionUv) {\n    vec3 positionLocal = positionUv * 2.0 - 1.0; // [-1,+1]\n\n    // Compute radius\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS_FLAT)\n        float radius = 1.0;\n    #else\n        float radius = length(positionLocal.xy); // [0,1]\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n            radius = radius * u_cylinderUvToShapeUvRadius.x + u_cylinderUvToShapeUvRadius.y; // x = scale, y = offset\n        #endif\n    #endif\n\n    // Compute height\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT_FLAT)\n        float height = 1.0;\n    #else\n        float height = positionUv.z; // [0,1]\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n            height = height * u_cylinderUvToShapeUvHeight.x + u_cylinderUvToShapeUvHeight.y; // x = scale, y = offset\n        #endif\n    #endif\n\n    // Compute angle\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_RANGE_EQUAL_ZERO)\n        float angle = 1.0;\n    #else\n        float angle = (atan(positionLocal.y, positionLocal.x) + czm_pi) / czm_twoPi; // [0,1]\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n            #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED)\n                // Comparing against u_cylinderShapeUvAngleMinMax has precision problems. u_cylinderShapeUvAngleRangeZeroMid is more conservative.\n                angle += float(angle < u_cylinderShapeUvAngleRangeZeroMid);\n            #endif\n\n            // Avoid flickering from reading voxels from both sides of the -pi/+pi discontinuity.\n            #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY)\n                angle = angle > u_cylinderShapeUvAngleRangeZeroMid ? u_cylinderShapeUvAngleMinMax.x : angle;\n            #elif defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY)\n                angle = angle < u_cylinderShapeUvAngleRangeZeroMid ? u_cylinderShapeUvAngleMinMax.y : angle;\n            #endif\n\n            angle = angle * u_cylinderUvToShapeUvAngle.x + u_cylinderUvToShapeUvAngle.y; // x = scale, y = offset\n        #endif\n    #endif\n\n    return vec3(radius, height, angle);\n}\n"},945042:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='/* Ellipsoid defines (set in Scene/VoxelEllipsoidShape.js)\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT\n#define ELLIPSOID_IS_SPHERE\n*/\n\nuniform vec3 u_ellipsoidRadiiUv; // [0,1]\n#if !defined(ELLIPSOID_IS_SPHERE)\n    uniform vec3 u_ellipsoidInverseRadiiSquaredUv;\n#endif\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY) || defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED)\n    uniform vec3 u_ellipsoidShapeUvLongitudeMinMaxMid;\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n    uniform vec2 u_ellipsoidUvToShapeUvLongitude; // x = scale, y = offset\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n    uniform vec2 u_ellipsoidUvToShapeUvLatitude; // x = scale, y = offset\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN) && !defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT)\n    uniform float u_ellipsoidInverseHeightDifferenceUv;\n    uniform vec2 u_ellipseInnerRadiiUv; // [0,1]\n#endif\n\n// robust iterative solution without trig functions\n// https://github.com/0xfaded/ellipse_demo/issues/1\n// https://stackoverflow.com/questions/22959698/distance-from-given-point-to-given-ellipse\n// Pro: Good when radii.x ~= radii.y\n// Con: Breaks at pos.x ~= 0.0, especially inside the ellipse\n// Con: Inaccurate with exterior points and thin ellipses\nfloat ellipseDistanceIterative (vec2 pos, vec2 radii) {\n    vec2 p = abs(pos);\n    vec2 invRadii = 1.0 / radii;\n    vec2 a = vec2(1.0, -1.0) * (radii.x * radii.x - radii.y * radii.y) * invRadii;\n    vec2 t = vec2(0.70710678118); // sqrt(2) / 2\n    vec2 v = radii * t;\n\n    const int iterations = 3;\n    for (int i = 0; i < iterations; ++i) {\n        vec2 e = a * pow(t, vec2(3.0));\n        vec2 q = normalize(p - e) * length(v - e);\n        t = normalize((q + e) * invRadii);\n        v = radii * t;\n    }\n    return length(v * sign(pos) - pos) * sign(p.y - v.y);\n}\n\nvec3 convertUvToShapeUvSpace(in vec3 positionUv) {\n    // Compute position and normal.\n    // Convert positionUv [0,1] to local space [-1,+1] to "normalized" cartesian space [-a,+a] where a = (radii + height) / (max(radii) + height).\n    // A point on the largest ellipsoid axis would be [-1,+1] and everything else would be smaller.\n    vec3 positionLocal = positionUv * 2.0 - 1.0;\n    #if defined(ELLIPSOID_IS_SPHERE)\n        vec3 posEllipsoid = positionLocal * u_ellipsoidRadiiUv.x;\n        vec3 normal = normalize(posEllipsoid);\n    #else\n        vec3 posEllipsoid = positionLocal * u_ellipsoidRadiiUv;\n        vec3 normal = normalize(posEllipsoid * u_ellipsoidInverseRadiiSquaredUv); // geodetic surface normal\n    #endif\n\n    // Compute longitude\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO)\n        float longitude = 1.0;\n    #else\n        float longitude = (atan(normal.y, normal.x) + czm_pi) / czm_twoPi;\n\n        // Correct the angle when max < min\n        // Technically this should compare against min longitude - but it has precision problems so compare against the middle of empty space.\n        #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED)\n            longitude += float(longitude < u_ellipsoidShapeUvLongitudeMinMaxMid.z);\n        #endif\n\n        // Avoid flickering from reading voxels from both sides of the -pi/+pi discontinuity.\n        #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY)\n            longitude = longitude > u_ellipsoidShapeUvLongitudeMinMaxMid.z ? u_ellipsoidShapeUvLongitudeMinMaxMid.x : longitude;\n        #endif\n        #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY)\n            longitude = longitude < u_ellipsoidShapeUvLongitudeMinMaxMid.z ? u_ellipsoidShapeUvLongitudeMinMaxMid.y : longitude;\n        #endif\n\n        #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n            longitude = longitude * u_ellipsoidUvToShapeUvLongitude.x + u_ellipsoidUvToShapeUvLongitude.y;\n        #endif\n    #endif\n\n    // Compute latitude\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE_RANGE_EQUAL_ZERO)\n        float latitude = 1.0;\n    #else\n        float latitude = (asin(normal.z) + czm_piOverTwo) / czm_pi;\n        #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n            latitude = latitude * u_ellipsoidUvToShapeUvLatitude.x + u_ellipsoidUvToShapeUvLatitude.y;\n        #endif\n    #endif\n\n    // Compute height\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_FLAT)\n        // TODO: This breaks down when minBounds == maxBounds. To fix it, this\n        // function would have to know if ray is intersecting the front or back of the shape\n        // and set the shape space position to 1 (front) or 0 (back) accordingly.\n        float height = 1.0;\n    #else\n        #if defined(ELLIPSOID_IS_SPHERE)\n            #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN)\n                float height = (length(posEllipsoid) - u_ellipseInnerRadiiUv.x) * u_ellipsoidInverseHeightDifferenceUv;\n            #else\n                float height = length(posEllipsoid);\n            #endif\n        #else\n            #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_HEIGHT_MIN)\n                // Convert the 3D position to a 2D position relative to the ellipse (radii.x, radii.z) (assuming radii.x == radii.y which is true for WGS84).\n                // This is an optimization so that math can be done with ellipses instead of ellipsoids.\n                vec2 posEllipse = vec2(length(posEllipsoid.xy), posEllipsoid.z);\n                float height = ellipseDistanceIterative(posEllipse, u_ellipseInnerRadiiUv) * u_ellipsoidInverseHeightDifferenceUv;\n            #else\n                // TODO: this is probably not correct\n                float height = length(posEllipsoid);\n            #endif\n        #endif\n    #endif\n\n    return vec3(longitude, latitude, height);\n}\n'},566732:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(303578),o=n(267980),r=n(565801),s=n(419061),a=n(491446),c=n(786101),l=n(677354),u=n(605971),d=n(610750),h=n(520098),A=n(522216),f=n(116112),p=n(897741),m=n(451227),_=n(534095),g=n(464088),y=n(62467),b=n(86881),v=n(988609),T=n(920685),w=n(148784),E=n(874818);function S(e){return(0,i.A)(`Assets/Textures/SkyBox/tycho2t3_80_${e}.jpg`)}function C(e){let t=e._useBrowserRecommendedResolution?1:window.devicePixelRatio;return t*=e._resolutionScale,(0,a.A)(e._scene)&&(e._scene.pixelRatio=t),t}function x(e){const t=e._canvas;let n=t.clientWidth,i=t.clientHeight;const o=C(e);e._canvasClientWidth=n,e._canvasClientHeight=i,n*=o,i*=o,t.width=n,t.height=i,e._canRender=0!==n&&0!==i,e._lastDevicePixelRatio=window.devicePixelRatio}function I(e){const t=e._canvas,n=t.width,i=t.height;if(0!==n&&0!==i){const t=e._scene.camera.frustum;(0,a.A)(t.aspectRatio)?t.aspectRatio=n/i:(t.top=t.right*(i/n),t.bottom=-t.top)}}function P(e,t){if(!(0,a.A)(e))throw new u.A("container is required.");e=(0,f.A)(e),t=(0,s.A)(t,s.A.EMPTY_OBJECT);const n=document.createElement("div");n.className="cesium-widget",e.appendChild(n);const i=document.createElement("canvas"),l=h.A.supportsImageRenderingPixelated();function A(){i!==i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()}this._supportsImageRenderingPixelated=l,l&&(i.style.imageRendering=h.A.imageRenderingValue()),i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},(0,s.A)(t.blurActiveElementOnCanvasFocus,!0)&&(i.addEventListener("mousedown",A),i.addEventListener("pointerdown",A)),n.appendChild(i);const P=document.createElement("div");P.className="cesium-widget-credits";const D=(0,a.A)(t.creditContainer)?(0,f.A)(t.creditContainer):n;D.appendChild(P);const O=(0,a.A)(t.creditViewport)?(0,f.A)(t.creditViewport):n,L=(0,s.A)(t.showRenderLoopErrors,!0),N=(0,s.A)(t.useBrowserRecommendedResolution,!0);this._element=n,this._container=e,this._canvas=i,this._canvasClientWidth=0,this._canvasClientHeight=0,this._lastDevicePixelRatio=0,this._creditViewport=O,this._creditContainer=D,this._innerCreditContainer=P,this._canRender=!1,this._renderLoopRunning=!1,this._showRenderLoopErrors=L,this._resolutionScale=1,this._useBrowserRecommendedResolution=N,this._forceResize=!1,this._clock=(0,a.A)(t.clock)?t.clock:new r.A,x(this);try{const e=new g.A({canvas:i,contextOptions:t.contextOptions,creditContainer:P,creditViewport:O,mapProjection:t.mapProjection,orderIndependentTranslucency:t.orderIndependentTranslucency,scene3DOnly:(0,s.A)(t.scene3DOnly,!1),shadows:t.shadows,mapMode2D:t.mapMode2D,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});this._scene=e,e.camera.constrainedAxis=o.A.UNIT_Z,C(this),I(this);const n=(0,s.A)(e.mapProjection.ellipsoid,d.A.WGS84);let r=t.globe;(0,a.A)(r)||(r=new p.A(n)),!1!==r&&(e.globe=r,e.globe.shadows=(0,s.A)(t.terrainShadows,v.A.RECEIVE_ONLY));let l=t.skyBox;(0,a.A)(l)||(l=new w.A({sources:{positiveX:S("px"),negativeX:S("mx"),positiveY:S("py"),negativeY:S("my"),positiveZ:S("pz"),negativeZ:S("mz")}})),!1!==l&&(e.skyBox=l,e.sun=new E.A,e.moon=new _.A);let h=t.skyAtmosphere;(0,a.A)(h)||(h=new T.A(n)),!1!==h&&(e.skyAtmosphere=h),(0,a.A)(t.imageryProvider)&&(0,c.A)("CesiumWidget options.imageryProvider","options.imageryProvider was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use options.baseLayer instead.");let A=t.baseLayer;if(!1!==t.globe&&!1!==A&&!1!==t.imageryProvider&&((0,a.A)(t.imageryProvider)&&!(0,a.A)(A)&&(A=new m.A(t.imageryProvider)),(0,a.A)(A)||(A=m.A.fromWorldImagery()),e.imageryLayers.add(A)),(0,a.A)(t.terrainProvider)&&!1!==t.globe&&(e.terrainProvider=t.terrainProvider),(0,a.A)(t.terrain)&&!1!==t.globe){if((0,a.A)(t.terrainProvider))throw new u.A("Specify either options.terrainProvider or options.terrain.");e.setTerrain(t.terrain)}this._screenSpaceEventHandler=new b.A(i),(0,a.A)(t.sceneMode)&&(t.sceneMode===y.A.SCENE2D&&this._scene.morphTo2D(0),t.sceneMode===y.A.COLUMBUS_VIEW&&this._scene.morphToColumbusView(0)),this._useDefaultRenderLoop=void 0,this.useDefaultRenderLoop=(0,s.A)(t.useDefaultRenderLoop,!0),this._targetFrameRate=void 0,this.targetFrameRate=t.targetFrameRate;const f=this;this._onRenderError=function(e,t){if(f._useDefaultRenderLoop=!1,f._renderLoopRunning=!1,f._showRenderLoopErrors){const e="An error occurred while rendering.  Rendering has stopped.";f.showErrorPanel(e,void 0,t)}},e.renderError.addEventListener(this._onRenderError)}catch(e){if(L){const t="Error constructing CesiumWidget.",n='Visit <a href="http://get.webgl.org">http://get.webgl.org</a> to verify that your web browser and hardware support WebGL.  Consider trying a different web browser or updating your video drivers.  Detailed error information is below:';this.showErrorPanel(t,n,e)}throw e}}Object.defineProperties(P.prototype,{container:{get:function(){return this._container}},canvas:{get:function(){return this._canvas}},creditContainer:{get:function(){return this._creditContainer}},creditViewport:{get:function(){return this._creditViewport}},scene:{get:function(){return this._scene}},imageryLayers:{get:function(){return this._scene.imageryLayers}},terrainProvider:{get:function(){return this._scene.terrainProvider},set:function(e){this._scene.terrainProvider=e}},creditDisplay:{get:function(){return this._scene.frameState.creditDisplay}},camera:{get:function(){return this._scene.camera}},clock:{get:function(){return this._clock}},screenSpaceEventHandler:{get:function(){return this._screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._targetFrameRate},set:function(e){if(e<=0)throw new u.A("targetFrameRate must be greater than 0, or undefined.");this._targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._useDefaultRenderLoop},set:function(e){this._useDefaultRenderLoop!==e&&(this._useDefaultRenderLoop=e,e&&!this._renderLoopRunning&&function(e){e._renderLoopRunning=!0;let t=0;requestAnimationFrame((function n(i){if(!e.isDestroyed())if(e._useDefaultRenderLoop)try{const o=e._targetFrameRate;if((0,a.A)(o)){const r=1e3/o,s=i-t;s>r&&(e.resize(),e.render(),t=i-s%r),requestAnimationFrame(n)}else e.resize(),e.render(),requestAnimationFrame(n)}catch(t){if(e._useDefaultRenderLoop=!1,e._renderLoopRunning=!1,e._showRenderLoopErrors){const n="An error occurred while rendering.  Rendering has stopped.";e.showErrorPanel(n,void 0,t)}}else e._renderLoopRunning=!1}))}(this))}},resolutionScale:{get:function(){return this._resolutionScale},set:function(e){if(e<=0)throw new u.A("resolutionScale must be greater than 0.");this._resolutionScale!==e&&(this._resolutionScale=e,this._forceResize=!0)}},useBrowserRecommendedResolution:{get:function(){return this._useBrowserRecommendedResolution},set:function(e){this._useBrowserRecommendedResolution!==e&&(this._useBrowserRecommendedResolution=e,this._forceResize=!0)}}}),P.prototype.showErrorPanel=function(e,t,n){const i=this._element,o=document.createElement("div");o.className="cesium-widget-errorPanel";const r=document.createElement("div");r.className="cesium-widget-errorPanel-content",o.appendChild(r);const s=document.createElement("div");s.className="cesium-widget-errorPanel-header",s.appendChild(document.createTextNode(e)),r.appendChild(s);const c=document.createElement("div");function l(){c.style.maxHeight=`${Math.max(Math.round(.9*i.clientHeight-100),30)}px`}c.className="cesium-widget-errorPanel-scroll",r.appendChild(c),l(),(0,a.A)(window.addEventListener)&&window.addEventListener("resize",l,!1);const u=(0,a.A)(t),d=(0,a.A)(n);if(u||d){const i=document.createElement("div");if(i.className="cesium-widget-errorPanel-message",c.appendChild(i),d){let i=(0,A.A)(n);u||("string"==typeof n&&(n=new Error(n)),t=(0,A.A)({name:n.name,message:n.message}),i=n.stack),"undefined"!=typeof console&&console.error(`${e}\n${t}\n${i}`);const o=document.createElement("div");o.className="cesium-widget-errorPanel-message-details collapsed";const s=document.createElement("span");s.className="cesium-widget-errorPanel-more-details",s.appendChild(document.createTextNode("See more...")),o.appendChild(s),o.onclick=function(e){o.removeChild(s),o.appendChild(document.createTextNode(i)),o.className="cesium-widget-errorPanel-message-details",r.className="cesium-widget-errorPanel-content expanded",o.onclick=void 0},c.appendChild(o)}i.innerHTML=`<p>${t}</p>`}const h=document.createElement("div");h.className="cesium-widget-errorPanel-buttonPanel",r.appendChild(h);const f=document.createElement("button");f.setAttribute("type","button"),f.className="cesium-button",f.appendChild(document.createTextNode("OK")),f.onclick=function(){(0,a.A)(l)&&(0,a.A)(window.removeEventListener)&&window.removeEventListener("resize",l,!1),i.removeChild(o)},h.appendChild(f),i.appendChild(o)},P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){(0,a.A)(this._scene)&&(this._scene.renderError.removeEventListener(this._onRenderError),this._scene=this._scene.destroy()),this._container.removeChild(this._element),this._creditContainer.removeChild(this._innerCreditContainer),(0,l.A)(this)},P.prototype.resize=function(){const e=this._canvas;(this._forceResize||this._canvasClientWidth!==e.clientWidth||this._canvasClientHeight!==e.clientHeight||this._lastDevicePixelRatio!==window.devicePixelRatio)&&(this._forceResize=!1,x(this),I(this),this._scene.requestRender())},P.prototype.render=function(){if(this._canRender){this._scene.initializeFrame();const e=this._clock.tick();this._scene.render(e)}else this._clock.tick()};const D=P},338863:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(41476),o=n(677354),r=n(491446),s=n(605971),a=n(116112),c=n(618168);const l="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink";let d;const h=i.A.fromCssColorString("rgba(247,250,255,0.384)"),A=i.A.fromCssColorString("rgba(143,191,255,0.216)"),f=i.A.fromCssColorString("rgba(153,197,255,0.098)"),p=i.A.fromCssColorString("rgba(255,255,255,0.086)"),m=i.A.fromCssColorString("rgba(255,255,255,0.267)"),_=i.A.fromCssColorString("rgba(255,255,255,0)"),g=i.A.fromCssColorString("rgba(66,67,68,0.3)"),y=i.A.fromCssColorString("rgba(0,0,0,0.5)");function b(e){return i.A.fromCssColorString(window.getComputedStyle(e).getPropertyValue("color"))}const v={animation_pathReset:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z"},animation_pathPause:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M13,5.5,7.5,5.5,7.5,25.5,13,25.5zM24.5,5.5,19,5.5,19,25.5,24.5,25.5z"},animation_pathPlay:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathPlayReverse:{tagName:"path",transform:"translate(16,16) scale(-0.85,0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathLoop:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z"},animation_pathClock:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-15.5)",d:"M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z"},animation_pathWingButton:{tagName:"path",d:"m 4.5,0.5 c -2.216,0 -4,1.784 -4,4 l 0,24 c 0,2.216 1.784,4 4,4 l 13.71875,0 C 22.478584,27.272785 27.273681,22.511272 32.5,18.25 l 0,-13.75 c 0,-2.216 -1.784,-4 -4,-4 l -24,0 z"},animation_pathPointer:{tagName:"path",d:"M-15,-65,-15,-55,15,-55,15,-65,0,-95z"},animation_pathSwooshFX:{tagName:"path",d:"m 85,0 c 0,16.617 -4.813944,35.356 -13.131081,48.4508 h 6.099803 c 8.317138,-13.0948 13.13322,-28.5955 13.13322,-45.2124 0,-46.94483 -38.402714,-85.00262 -85.7743869,-85.00262 -1.0218522,0 -2.0373001,0.0241 -3.0506131,0.0589 45.958443,1.59437 82.723058,35.77285 82.723058,81.70532 z"}};function T(e){const t=document.createElementNS(l,e.tagName);for(const n in e)if(e.hasOwnProperty(n)&&"tagName"!==n)if("children"===n){const n=e.children.length;for(let i=0;i<n;++i)t.appendChild(T(e.children[i]))}else 0===n.indexOf("xlink:")?t.setAttributeNS(u,n.substring(6),e[n]):"textContent"===n?t.textContent=e[n]:t.setAttribute(n,e[n]);return t}function w(e,t,n){const i=document.createElementNS(l,"text");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("class","cesium-animation-svgText");const o=document.createElementNS(l,"tspan");return o.textContent=n,i.appendChild(o),i}const E=new i.A;function S(e,t){const n=t.alpha,i=1-n;return E.red=e.red*i+t.red*n,E.green=e.green*i+t.green*n,E.blue=e.blue*i+t.blue*n,E.toCssColorString()}function C(e,t,n){const i=v[n];return T({tagName:"g",class:"cesium-animation-rectButton",transform:`translate(${e},${t})`,children:[{tagName:"rect",class:"cesium-animation-buttonGlow",width:32,height:32,rx:2,ry:2},{tagName:"rect",class:"cesium-animation-buttonMain",width:32,height:32,rx:4,ry:4},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]})}function x(e,t){this._viewModel=t,this.svgElement=e,this._enabled=void 0,this._toggled=void 0;const n=this;this._clickFunction=function(){const e=n._viewModel.command;e.canExecute&&e()},e.addEventListener("click",this._clickFunction,!0),this._subscriptions=[(0,c.A)(t,"toggled",this.setToggled,this),(0,c.A)(t,"tooltip",this.setTooltip,this),(0,c.A)(t.command,"canExecute",this.setEnabled,this)]}function I(e,t){if(!(0,r.A)(e))throw new s.A("container is required.");if(!(0,r.A)(t))throw new s.A("viewModel is required.");e=(0,a.A)(e),this._viewModel=t,this._container=e,this._centerX=0,this._centerY=0,this._defsElement=void 0,this._svgNode=void 0,this._topG=void 0,this._lastHeight=void 0,this._lastWidth=void 0;const n=e.ownerDocument,i=document.createElement("style");i.textContent=".cesium-animation-rectButton .cesium-animation-buttonGlow { filter: url(#animation_blurred); }.cesium-animation-rectButton .cesium-animation-buttonMain { fill: url(#animation_buttonNormal); }.cesium-animation-buttonToggled .cesium-animation-buttonMain { fill: url(#animation_buttonToggled); }.cesium-animation-rectButton:hover .cesium-animation-buttonMain { fill: url(#animation_buttonHovered); }.cesium-animation-buttonDisabled .cesium-animation-buttonMain { fill: url(#animation_buttonDisabled); }.cesium-animation-shuttleRingG .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshGradient); }.cesium-animation-shuttleRingG:hover .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshHovered); }.cesium-animation-shuttleRingPointer { fill: url(#animation_shuttleRingPointerGradient); }.cesium-animation-shuttleRingPausePointer { fill: url(#animation_shuttleRingPointerPaused); }.cesium-animation-knobOuter { fill: url(#animation_knobOuter); }.cesium-animation-knobInner { fill: url(#animation_knobInner); }",n.head.insertBefore(i,n.head.childNodes[0]);const o=document.createElement("div");o.className="cesium-animation-theme",o.innerHTML='<div class="cesium-animation-themeNormal"></div><div class="cesium-animation-themeHover"></div><div class="cesium-animation-themeSelect"></div><div class="cesium-animation-themeDisabled"></div><div class="cesium-animation-themeKnob"></div><div class="cesium-animation-themePointer"></div><div class="cesium-animation-themeSwoosh"></div><div class="cesium-animation-themeSwooshHover"></div>',this._theme=o,this._themeNormal=o.childNodes[0],this._themeHover=o.childNodes[1],this._themeSelect=o.childNodes[2],this._themeDisabled=o.childNodes[3],this._themeKnob=o.childNodes[4],this._themePointer=o.childNodes[5],this._themeSwoosh=o.childNodes[6],this._themeSwooshHover=o.childNodes[7];const h=document.createElementNS(l,"svg:svg");this._svgNode=h,h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",u);const A=document.createElementNS(l,"g");this._topG=A,this._realtimeSVG=new x(function(e,t,n){const i=v[n],o=v.animation_pathWingButton;return T({tagName:"g",class:"cesium-animation-rectButton",transform:"translate(3,4)",children:[{class:"cesium-animation-buttonGlow",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonMain",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]})}(0,0,"animation_pathClock"),t.playRealtimeViewModel),this._playReverseSVG=new x(C(44,99,"animation_pathPlayReverse"),t.playReverseViewModel),this._playForwardSVG=new x(C(124,99,"animation_pathPlay"),t.playForwardViewModel),this._pauseSVG=new x(C(84,99,"animation_pathPause"),t.pauseViewModel);const f=document.createElementNS(l,"g");f.appendChild(this._realtimeSVG.svgElement),f.appendChild(this._playReverseSVG.svgElement),f.appendChild(this._playForwardSVG.svgElement),f.appendChild(this._pauseSVG.svgElement);const p=T({tagName:"circle",class:"cesium-animation-shuttleRingBack",cx:100,cy:100,r:99});this._shuttleRingBackPanel=p;const m=v.animation_pathSwooshFX,_=v.animation_pathPointer,g=T({tagName:"g",class:"cesium-animation-shuttleRingSwoosh",children:[{tagName:m.tagName,transform:"translate(100,97) scale(-1,1)",id:"animation_pathSwooshFX",d:m.d},{tagName:m.tagName,transform:"translate(100,97)",id:"animation_pathSwooshFX",d:m.d},{tagName:"line",x1:100,y1:8,x2:100,y2:22}]});this._shuttleRingSwooshG=g,this._shuttleRingPointer=T({class:"cesium-animation-shuttleRingPointer",id:"animation_pathPointer",tagName:_.tagName,d:_.d});const y=T({tagName:"g",transform:"translate(100,100)"});this._knobOuter=T({tagName:"circle",class:"cesium-animation-knobOuter",cx:0,cy:0,r:71});const b=T({tagName:"circle",class:"cesium-animation-knobInner",cx:0,cy:0,r:61});this._knobDate=w(0,-24,""),this._knobTime=w(0,-7,""),this._knobStatus=w(0,-41,"");const E=T({tagName:"circle",class:"cesium-animation-blank",cx:0,cy:0,r:61}),S=document.createElementNS(l,"g");S.setAttribute("class","cesium-animation-shuttleRingG"),e.appendChild(o),A.appendChild(S),A.appendChild(y),A.appendChild(f),S.appendChild(p),S.appendChild(g),S.appendChild(this._shuttleRingPointer),y.appendChild(this._knobOuter),y.appendChild(b),y.appendChild(this._knobDate),y.appendChild(this._knobTime),y.appendChild(this._knobStatus),y.appendChild(E),h.appendChild(A),e.appendChild(h);const I=this;function P(e){!function(e,t){const n=e._viewModel,i=n.shuttleRingDragging;if(!i||d===e)if("mousedown"===t.type||i&&"mousemove"===t.type||"touchstart"===t.type&&1===t.touches.length||i&&"touchmove"===t.type&&1===t.touches.length){const o=e._centerX,r=e._centerY,s=e._svgNode.getBoundingClientRect();let a,c;if("touchstart"===t.type||"touchmove"===t.type?(a=t.touches[0].clientX,c=t.touches[0].clientY):(a=t.clientX,c=t.clientY),!i&&(a>s.right||a<s.left||c<s.top||c>s.bottom))return;const l=e._shuttleRingPointer.getBoundingClientRect(),u=a-o-s.left,h=c-r-s.top;let A=180*Math.atan2(h,u)/Math.PI+90;A>180&&(A-=360);const f=n.shuttleRingAngle;i||a<l.right&&a>l.left&&c>l.top&&c<l.bottom?(d=e,n.shuttleRingDragging=!0,n.shuttleRingAngle=A):A<f?n.slower():A>f&&n.faster(),t.preventDefault()}else e===d&&(d=void 0),n.shuttleRingDragging=!1}(I,e)}this._mouseCallback=P,p.addEventListener("mousedown",P,!0),p.addEventListener("touchstart",P,!0),g.addEventListener("mousedown",P,!0),g.addEventListener("touchstart",P,!0),n.addEventListener("mousemove",P,!0),n.addEventListener("touchmove",P,!0),n.addEventListener("mouseup",P,!0),n.addEventListener("touchend",P,!0),n.addEventListener("touchcancel",P,!0),this._shuttleRingPointer.addEventListener("mousedown",P,!0),this._shuttleRingPointer.addEventListener("touchstart",P,!0),this._knobOuter.addEventListener("mousedown",P,!0),this._knobOuter.addEventListener("touchstart",P,!0);const D=this._knobTime.childNodes[0],O=this._knobDate.childNodes[0],L=this._knobStatus.childNodes[0];let N;this._subscriptions=[(0,c.A)(t.pauseViewModel,"toggled",(function(e){N!==e&&(N=e,N?I._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPausePointer"):I._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPointer"))})),(0,c.A)(t,"shuttleRingAngle",(function(e){var t,n,i;t=I._shuttleRingPointer,n=I._knobOuter,i=e,t.setAttribute("transform",`translate(100,100) rotate(${i})`),n.setAttribute("transform",`rotate(${i})`)})),(0,c.A)(t,"dateLabel",(function(e){O.textContent!==e&&(O.textContent=e)})),(0,c.A)(t,"timeLabel",(function(e){D.textContent!==e&&(D.textContent=e)})),(0,c.A)(t,"multiplierLabel",(function(e){L.textContent!==e&&(L.textContent=e)}))],this.applyThemeChanges(),this.resize()}x.prototype.destroy=function(){this.svgElement.removeEventListener("click",this._clickFunction,!0);const e=this._subscriptions;for(let t=0,n=e.length;t<n;t++)e[t].dispose();(0,o.A)(this)},x.prototype.isDestroyed=function(){return!1},x.prototype.setEnabled=function(e){if(this._enabled!==e){if(this._enabled=e,!e)return void this.svgElement.setAttribute("class","cesium-animation-buttonDisabled");if(this._toggled)return void this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled");this.svgElement.setAttribute("class","cesium-animation-rectButton")}},x.prototype.setToggled=function(e){this._toggled!==e&&(this._toggled=e,this._enabled&&(e?this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled"):this.svgElement.setAttribute("class","cesium-animation-rectButton")))},x.prototype.setTooltip=function(e){this.svgElement.getElementsByTagName("title")[0].textContent=e},Object.defineProperties(I.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){(0,r.A)(this._observer)&&(this._observer.disconnect(),this._observer=void 0);const e=this._container.ownerDocument,t=this._mouseCallback;this._shuttleRingBackPanel.removeEventListener("mousedown",t,!0),this._shuttleRingBackPanel.removeEventListener("touchstart",t,!0),this._shuttleRingSwooshG.removeEventListener("mousedown",t,!0),this._shuttleRingSwooshG.removeEventListener("touchstart",t,!0),e.removeEventListener("mousemove",t,!0),e.removeEventListener("touchmove",t,!0),e.removeEventListener("mouseup",t,!0),e.removeEventListener("touchend",t,!0),e.removeEventListener("touchcancel",t,!0),this._shuttleRingPointer.removeEventListener("mousedown",t,!0),this._shuttleRingPointer.removeEventListener("touchstart",t,!0),this._knobOuter.removeEventListener("mousedown",t,!0),this._knobOuter.removeEventListener("touchstart",t,!0),this._container.removeChild(this._svgNode),this._container.removeChild(this._theme),this._realtimeSVG.destroy(),this._playReverseSVG.destroy(),this._playForwardSVG.destroy(),this._pauseSVG.destroy();const n=this._subscriptions;for(let e=0,t=n.length;e<t;e++)n[e].dispose();return(0,o.A)(this)},I.prototype.resize=function(){const e=this._container.clientWidth,t=this._container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;const n=this._svgNode,i=200,o=132;let r=e,s=t;0===e&&0===t?(r=i,s=o):0===e?(s=t,r=i*(t/o)):0===t&&(r=e,s=o*(e/i));const a=r/i,c=s/o;n.style.cssText=`width: ${r}px; height: ${s}px; position: absolute; bottom: 0; left: 0; overflow: hidden;`,n.setAttribute("width",r),n.setAttribute("height",s),n.setAttribute("viewBox",`0 0 ${r} ${s}`),this._topG.setAttribute("transform",`scale(${a},${c})`),this._centerX=Math.max(1,100*a),this._centerY=Math.max(1,100*c),this._lastHeight=e,this._lastWidth=t},I.prototype.applyThemeChanges=function(){const e=this._container.ownerDocument;if(!e.body.contains(this._container)){if((0,r.A)(this._observer))return;const t=this;return t._observer=new MutationObserver((function(){e.body.contains(t._container)&&(t._observer.disconnect(),t._observer=void 0,t.applyThemeChanges())})),void t._observer.observe(e,{childList:!0,subtree:!0})}const t=b(this._themeNormal),n=b(this._themeHover),i=b(this._themeSelect),o=b(this._themeDisabled),s=b(this._themeKnob),a=b(this._themePointer),c=b(this._themeSwoosh),l=b(this._themeSwooshHover),u=T({tagName:"defs",children:[{id:"animation_buttonNormal",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":S(t,h)},{tagName:"stop",offset:"12%","stop-color":S(t,A)},{tagName:"stop",offset:"46%","stop-color":S(t,f)},{tagName:"stop",offset:"81%","stop-color":S(t,p)}]},{id:"animation_buttonHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":S(n,h)},{tagName:"stop",offset:"12%","stop-color":S(n,A)},{tagName:"stop",offset:"46%","stop-color":S(n,f)},{tagName:"stop",offset:"81%","stop-color":S(n,p)}]},{id:"animation_buttonToggled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":S(i,h)},{tagName:"stop",offset:"12%","stop-color":S(i,A)},{tagName:"stop",offset:"46%","stop-color":S(i,f)},{tagName:"stop",offset:"81%","stop-color":S(i,p)}]},{id:"animation_buttonDisabled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":S(o,m)},{tagName:"stop",offset:"75%","stop-color":S(o,_)}]},{id:"animation_blurred",tagName:"filter",width:"200%",height:"200%",x:"-50%",y:"-50%",children:[{tagName:"feGaussianBlur",stdDeviation:4,in:"SourceGraphic"}]},{id:"animation_shuttleRingSwooshGradient",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":c.toCssColorString()}]},{id:"animation_shuttleRingSwooshHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":l.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":l.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":l.toCssColorString()}]},{id:"animation_shuttleRingPointerGradient",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":a.toCssColorString()},{tagName:"stop",offset:"40%","stop-color":a.toCssColorString()},{tagName:"stop",offset:"60%","stop-color":S(a,y)},{tagName:"stop",offset:"100%","stop-color":S(a,y)}]},{id:"animation_shuttleRingPointerPaused",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":"#CCC"},{tagName:"stop",offset:"40%","stop-color":"#CCC"},{tagName:"stop",offset:"60%","stop-color":"#555"},{tagName:"stop",offset:"100%","stop-color":"#555"}]},{id:"animation_knobOuter",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":S(s,h)},{tagName:"stop",offset:"60%","stop-color":S(s,g)},{tagName:"stop",offset:"85%","stop-color":S(s,A)}]},{id:"animation_knobInner",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":S(s,g)},{tagName:"stop",offset:"60%","stop-color":S(s,h)},{tagName:"stop",offset:"85%","stop-color":S(s,p)}]}]});(0,r.A)(this._defsElement)?this._svgNode.replaceChild(u,this._defsElement):this._svgNode.appendChild(u),this._defsElement=u};const P=I},806441:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(525490),o=n(945395),r=n(491446),s=n(605971),a=n(687536),c=n(591978),l=n(914684),u=n(277441),d=n(798518);const h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],A=15;function f(e,t){return e-t}function p(e,t){const n=(0,i.A)(t,e,f);return n<0?~n:n}function m(e){if(!(0,r.A)(e))throw new s.A("clockViewModel is required.");const t=this;this._clockViewModel=e,this._allShuttleRingTicks=[],this._dateFormatter=m.defaultDateFormatter,this._timeFormatter=m.defaultTimeFormatter,this.shuttleRingDragging=!1,this.snapToTicks=!1,l.A.track(this,["_allShuttleRingTicks","_dateFormatter","_timeFormatter","shuttleRingDragging","snapToTicks"]),this._sortedFilteredPositiveTicks=[],this.setShuttleRingTicks(m.defaultTicks),this.timeLabel=void 0,l.A.defineProperty(this,"timeLabel",(function(){return t._timeFormatter(t._clockViewModel.currentTime,t)})),this.dateLabel=void 0,l.A.defineProperty(this,"dateLabel",(function(){return t._dateFormatter(t._clockViewModel.currentTime,t)})),this.multiplierLabel=void 0,l.A.defineProperty(this,"multiplierLabel",(function(){const e=t._clockViewModel;if(e.clockStep===o.A.SYSTEM_CLOCK)return"Today";const n=e.multiplier;return n%1==0?`${n.toFixed(0)}x`:`${n.toFixed(3).replace(/0{0,3}$/,"")}x`})),this.shuttleRingAngle=void 0,l.A.defineProperty(this,"shuttleRingAngle",{get:function(){return function(e,t,n){if(n.clockStep===o.A.SYSTEM_CLOCK)return A;if(Math.abs(e)<=1)return e*A;const i=t[t.length-1];let r,s;return e>i?e=i:e<-i&&(e=-i),e>0?(r=Math.log(i),s=(r-0)/90,(Math.log(e)-0)/s+15):(r=Math.log(-t[0]),s=(r-0)/90,-((Math.log(Math.abs(e))-0)/s+15))}(e.multiplier,t._allShuttleRingTicks,e)},set:function(e){e=Math.max(Math.min(e,105),-105);const n=t._allShuttleRingTicks,i=t._clockViewModel;if(i.clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER,105===Math.abs(e))return void(i.multiplier=e>0?n[n.length-1]:n[0]);let r=function(e,t){if(Math.abs(e)<=A)return e/A;let n,i;return e>0?(n=Math.log(t[t.length-1]),i=(n-0)/90,Math.exp(0+i*(e-15))):(n=Math.log(-t[0]),i=(n-0)/90,-Math.exp(0+i*(Math.abs(e)-15)))}(e,n);if(t.snapToTicks)r=n[p(r,n)];else if(0!==r){const e=Math.abs(r);if(e>100){const t=e.toFixed(0).length-2,n=Math.pow(10,t);r=Math.round(r/n)*n|0}else e>A?r=Math.round(r):e>1?r=+r.toFixed(1):e>0&&(r=+r.toFixed(2))}i.multiplier=r}}),this._canAnimate=void 0,l.A.defineProperty(this,"_canAnimate",(function(){const e=t._clockViewModel,n=e.clockRange;if(t.shuttleRingDragging||n===a.A.UNBOUNDED)return!0;const i=e.multiplier,o=e.currentTime,r=e.startTime;let s=!1;if(n===a.A.LOOP_STOP)s=c.A.greaterThan(o,r)||o.equals(r)&&i>0;else{const t=e.stopTime;s=c.A.greaterThan(o,r)&&c.A.lessThan(o,t)||o.equals(r)&&i>0||o.equals(t)&&i<0}return s||(e.shouldAnimate=!1),s})),this._isSystemTimeAvailable=void 0,l.A.defineProperty(this,"_isSystemTimeAvailable",(function(){const e=t._clockViewModel;if(e.clockRange===a.A.UNBOUNDED)return!0;const n=e.systemTime;return c.A.greaterThanOrEquals(n,e.startTime)&&c.A.lessThanOrEquals(n,e.stopTime)})),this._isAnimating=void 0,l.A.defineProperty(this,"_isAnimating",(function(){return t._clockViewModel.shouldAnimate&&(t._canAnimate||t.shuttleRingDragging)}));const n=(0,u.A)((function(){const e=t._clockViewModel;e.shouldAnimate?e.shouldAnimate=!1:t._canAnimate&&(e.shouldAnimate=!0)}));this._pauseViewModel=new d.A(n,{toggled:l.A.computed((function(){return!t._isAnimating})),tooltip:"Pause"});const i=(0,u.A)((function(){const e=t._clockViewModel,n=e.multiplier;n>0&&(e.multiplier=-n),e.shouldAnimate=!0}));this._playReverseViewModel=new d.A(i,{toggled:l.A.computed((function(){return t._isAnimating&&e.multiplier<0})),tooltip:"Play Reverse"});const h=(0,u.A)((function(){const e=t._clockViewModel,n=e.multiplier;n<0&&(e.multiplier=-n),e.shouldAnimate=!0}));this._playForwardViewModel=new d.A(h,{toggled:l.A.computed((function(){return t._isAnimating&&e.multiplier>0&&e.clockStep!==o.A.SYSTEM_CLOCK})),tooltip:"Play Forward"});const f=(0,u.A)((function(){t._clockViewModel.clockStep=o.A.SYSTEM_CLOCK}),l.A.getObservable(this,"_isSystemTimeAvailable"));this._playRealtimeViewModel=new d.A(f,{toggled:l.A.computed((function(){return e.clockStep===o.A.SYSTEM_CLOCK})),tooltip:l.A.computed((function(){return t._isSystemTimeAvailable?"Today (real-time)":"Current time not in range"}))}),this._slower=(0,u.A)((function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=p(e.multiplier,n)-1;i>=0&&(e.multiplier=n[i])})),this._faster=(0,u.A)((function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=p(e.multiplier,n)+1;i<n.length&&(e.multiplier=n[i])}))}m.defaultDateFormatter=function(e,t){const n=c.A.toGregorianDate(e);return`${h[n.month-1]} ${n.day} ${n.year}`},m.defaultTicks=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800],m.defaultTimeFormatter=function(e,t){const n=c.A.toGregorianDate(e),i=Math.round(n.millisecond);return Math.abs(t._clockViewModel.multiplier)<1?`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")}.${i.toString().padStart(3,"0")}`:`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")} UTC`},m.prototype.getShuttleRingTicks=function(){return this._sortedFilteredPositiveTicks.slice(0)},m.prototype.setShuttleRingTicks=function(e){if(!(0,r.A)(e))throw new s.A("positiveTicks is required.");let t,n,i;const o={},a=this._sortedFilteredPositiveTicks;for(a.length=0,t=0,n=e.length;t<n;++t)i=e[t],o.hasOwnProperty(i)||(o[i]=!0,a.push(i));a.sort(f);const c=[];for(n=a.length,t=n-1;t>=0;--t)i=a[t],0!==i&&c.push(-i);Array.prototype.push.apply(c,a),this._allShuttleRingTicks=c},Object.defineProperties(m.prototype,{slower:{get:function(){return this._slower}},faster:{get:function(){return this._faster}},clockViewModel:{get:function(){return this._clockViewModel}},pauseViewModel:{get:function(){return this._pauseViewModel}},playReverseViewModel:{get:function(){return this._playReverseViewModel}},playForwardViewModel:{get:function(){return this._playForwardViewModel}},playRealtimeViewModel:{get:function(){return this._playRealtimeViewModel}},dateFormatter:{get:function(){return this._dateFormatter},set:function(e){if("function"!=typeof e)throw new s.A("dateFormatter must be a function");this._dateFormatter=e}},timeFormatter:{get:function(){return this._timeFormatter},set:function(e){if("function"!=typeof e)throw new s.A("timeFormatter must be a function");this._timeFormatter=e}}}),m._maxShuttleRingAngle=105,m._realtimeShuttleRingAngle=A;const _=m},622463:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(116112),s=n(520098),a=n(677354),c=n(914684),l=n(93017);function u(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e);const n=new l.A(t),a=document.createElement("button");a.type="button",a.className="cesium-button cesium-toolbar-button",a.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),e.appendChild(a);const u=document.createElement("img");u.setAttribute("draggable","false"),u.className="cesium-baseLayerPicker-selected",u.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),a.appendChild(u);const d=document.createElement("div");d.className="cesium-baseLayerPicker-dropDown",d.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),e.appendChild(d);const h=document.createElement("div");h.className="cesium-baseLayerPicker-sectionTitle",h.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),h.innerHTML="Imagery",d.appendChild(h);const A=document.createElement("div");A.className="cesium-baseLayerPicker-section",A.setAttribute("data-bind","foreach: _imageryProviders"),d.appendChild(A);const f=document.createElement("div");f.className="cesium-baseLayerPicker-category",A.appendChild(f);const p=document.createElement("div");p.className="cesium-baseLayerPicker-categoryTitle",p.setAttribute("data-bind","text: name"),f.appendChild(p);const m=document.createElement("div");m.className="cesium-baseLayerPicker-choices",m.setAttribute("data-bind","foreach: providers"),f.appendChild(m);const _=document.createElement("div");_.className="cesium-baseLayerPicker-item",_.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),m.appendChild(_);const g=document.createElement("img");g.className="cesium-baseLayerPicker-itemIcon",g.setAttribute("data-bind","attr: { src: iconUrl }"),g.setAttribute("draggable","false"),_.appendChild(g);const y=document.createElement("div");y.className="cesium-baseLayerPicker-itemLabel",y.setAttribute("data-bind","text: name"),_.appendChild(y);const b=document.createElement("div");b.className="cesium-baseLayerPicker-sectionTitle",b.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),b.innerHTML="Terrain",d.appendChild(b);const v=document.createElement("div");v.className="cesium-baseLayerPicker-section",v.setAttribute("data-bind","foreach: _terrainProviders"),d.appendChild(v);const T=document.createElement("div");T.className="cesium-baseLayerPicker-category",v.appendChild(T);const w=document.createElement("div");w.className="cesium-baseLayerPicker-categoryTitle",w.setAttribute("data-bind","text: name"),T.appendChild(w);const E=document.createElement("div");E.className="cesium-baseLayerPicker-choices",E.setAttribute("data-bind","foreach: providers"),T.appendChild(E);const S=document.createElement("div");S.className="cesium-baseLayerPicker-item",S.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),E.appendChild(S);const C=document.createElement("img");C.className="cesium-baseLayerPicker-itemIcon",C.setAttribute("data-bind","attr: { src: iconUrl }"),C.setAttribute("draggable","false"),S.appendChild(C);const x=document.createElement("div");x.className="cesium-baseLayerPicker-itemLabel",x.setAttribute("data-bind","text: name"),S.appendChild(x),c.A.applyBindings(n,a),c.A.applyBindings(n,d),this._viewModel=n,this._container=e,this._element=a,this._dropPanel=d,this._closeDropDown=function(e){a.contains(e.target)||d.contains(e.target)||(n.dropDownVisible=!1)},s.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return s.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),c.A.cleanNode(this._element),c.A.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),(0,a.A)(this)};const d=u},93017:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(419061),o=n(491446),r=n(605971),s=n(451227),a=n(557417),c=n(149192),l=n(914684),u=n(277441);function d(e){const t=(e=(0,i.A)(e,i.A.EMPTY_OBJECT)).globe,n=(0,i.A)(e.imageryProviderViewModels,[]),d=(0,i.A)(e.terrainProviderViewModels,[]);if(!(0,o.A)(t))throw new r.A("globe is required");this._globe=t,this.imageryProviderViewModels=n.slice(0),this.terrainProviderViewModels=d.slice(0),this.dropDownVisible=!1,l.A.track(this,["imageryProviderViewModels","terrainProviderViewModels","dropDownVisible"]);const h=l.A.getObservable(this,"imageryProviderViewModels"),A=l.A.pureComputed((function(){const e=h(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],r=i.category;(0,o.A)(t[r])?t[r].push(i):t[r]=[i]}const i=Object.keys(t),r=[];for(n=0;n<i.length;n++){const e=i[n];r.push({name:e,providers:t[e]})}return r}));this._imageryProviders=A;const f=l.A.getObservable(this,"terrainProviderViewModels"),p=l.A.pureComputed((function(){const e=f(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],r=i.category;(0,o.A)(t[r])?t[r].push(i):t[r]=[i]}const i=Object.keys(t),r=[];for(n=0;n<i.length;n++){const e=i[n];r.push({name:e,providers:t[e]})}return r}));this._terrainProviders=p,this.buttonTooltip=void 0,l.A.defineProperty(this,"buttonTooltip",(function(){const e=this.selectedImagery,t=this.selectedTerrain,n=(0,o.A)(e)?e.name:void 0,i=(0,o.A)(t)?t.name:void 0;return(0,o.A)(n)&&(0,o.A)(i)?`${n}\n${i}`:(0,o.A)(n)?n:i})),this.buttonImageUrl=void 0,l.A.defineProperty(this,"buttonImageUrl",(function(){const e=this.selectedImagery;if((0,o.A)(e))return e.iconUrl})),this.selectedImagery=void 0;const m=l.A.observable();this._currentImageryLayers=[],l.A.defineProperty(this,"selectedImagery",{get:function(){return m()},set:function(e){if(m()===e)return void(this.dropDownVisible=!1);let t;const n=this._currentImageryLayers,i=n.length,r=this._globe.imageryLayers;let a=!1;for(t=0;t<i;t++){const e=r.length;for(let i=0;i<e;i++){const e=r.get(i);if(e===n[t]){r.remove(e),a=!0;break}}}if((0,o.A)(e)){const n=e.creationCommand();if(Array.isArray(n)){const e=n.length;for(this._currentImageryLayers=[],t=e-1;t>=0;t--){const e=s.A.fromProviderAsync(n[t]);r.add(e,0),this._currentImageryLayers.push(e)}}else{this._currentImageryLayers=[];const t=s.A.fromProviderAsync(n);if(t.name=e.name,a)r.add(t,0);else{const e=r.get(0);(0,o.A)(e)&&r.remove(e),r.add(t,0)}this._currentImageryLayers.push(t)}}m(e),this.dropDownVisible=!1}}),this.selectedTerrain=void 0;const _=l.A.observable();l.A.defineProperty(this,"selectedTerrain",{get:function(){return _()},set:function(e){if(_()===e)return void(this.dropDownVisible=!1);let t;(0,o.A)(e)&&(t=e.creationCommand());let n=!1;const i=this._globe.terrainProviderChanged.addEventListener((()=>{n=!0,i()})),r=new a.A(Promise.resolve(t)).readyEvent.addEventListener((e=>{n||(this._globe.depthTestAgainstTerrain=!(e instanceof c.A),this._globe.terrainProvider=e,r())}));_(e),this.dropDownVisible=!1}});const g=this;this._toggleDropDown=(0,u.A)((function(){g.dropDownVisible=!g.dropDownVisible})),this.selectedImagery=(0,i.A)(e.selectedImageryProviderViewModel,n[0]),this.selectedTerrain=(0,i.A)(e.selectedTerrainProviderViewModel,d[0])}Object.defineProperties(d.prototype,{toggleDropDown:{get:function(){return this._toggleDropDown}},globe:{get:function(){return this._globe}}});const h=d},687194:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(419061),s=n(914684),a=n(277441);function c(e){if(!(0,i.A)(e.name))throw new o.A("options.name is required.");if(!(0,i.A)(e.tooltip))throw new o.A("options.tooltip is required.");if(!(0,i.A)(e.iconUrl))throw new o.A("options.iconUrl is required.");if("function"!=typeof e.creationFunction)throw new o.A("options.creationFunction is required.");let t=e.creationFunction;(0,i.A)(t.canExecute)||(t=(0,a.A)(t)),this._creationCommand=t,this.name=e.name,this.tooltip=e.tooltip,this.iconUrl=e.iconUrl,this._category=(0,r.A)(e.category,""),s.A.track(this,["name","tooltip","iconUrl"])}Object.defineProperties(c.prototype,{creationCommand:{get:function(){return this._creationCommand}},category:{get:function(){return this._category}}});const l=c},714018:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(303578),o=n(655028),r=n(231097),s=n(531573),a=n(418510),c=n(566334),l=n(670549),u=n(829670),d=n(687194);const h=function(){const e=[];return e.push(new d.A({name:"Bing Maps Aerial",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/bingAerial.png"),tooltip:"Bing Maps aerial imagery, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.A)({style:r.A.AERIAL})}})),e.push(new d.A({name:"Bing Maps Aerial with Labels",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/bingAerialLabels.png"),tooltip:"Bing Maps aerial imagery with labels, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.A)({style:r.A.AERIAL_WITH_LABELS})}})),e.push(new d.A({name:"Bing Maps Roads",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/bingRoads.png"),tooltip:"Bing Maps standard road maps, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.A)({style:r.A.ROAD})}})),e.push(new d.A({name:"ArcGIS World Imagery",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldImagery.png"),tooltip:"ArcGIS World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide. The map includes 15m TerraColor imagery at small and mid-scales (~1:591M down to ~1:288k) for the world. The map features Maxar imagery at 0.3m resolution for select metropolitan areas around the world, 0.5m resolution across the United States and parts of Western Europe, and 1m resolution imagery across the rest of the world. In addition to commercial sources, the World Imagery map features high-resolution aerial photography contributed by the GIS User Community. This imagery ranges from 0.3m to 0.03m resolution (down to ~1:280 nin select communities). For more information on this map, including the terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9",category:"Other",creationFunction:function(){return s.A.fromBasemapType(a.A.SATELLITE,{enablePickFeatures:!1})}})),e.push(new d.A({name:"ArcGIS World Hillshade",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldHillshade.png"),tooltip:"ArcGIS World Hillshade map portrays elevation as an artistic hillshade. This map is designed to be used as a backdrop for topographical, soil, hydro, landcover or other outdoor recreational maps. The map was compiled from a variety of sources from several data providers. The basemap has global coverage down to a scale of ~1:72k. In select areas of the United States and Europe, coverage is available down to ~1:9k. For more information on this map, including the terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=1b243539f4514b6ba35e7d995890db1d",category:"Other",creationFunction:function(){return s.A.fromBasemapType(a.A.HILLSHADE,{enablePickFeatures:!1})}})),e.push(new d.A({name:"Esri World Ocean",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldOcean.png"),tooltip:"ArcGIS World Ocean map is designed to be used as a base map by marine GIS professionals and as a reference map by anyone interested in ocean data.  The base map features marine bathymetry. Land features include inland waters and roads overlaid on land cover and shaded relief imagery. The map was compiled from a variety of best available sources from several data providers, including General Bathymetric Chart of the Oceans GEBCO_08 Grid, National Oceanic and Atmospheric Administration (NOAA), and National Geographic, Garmin, HERE, Geonames.org, and Esri, and various other contributors. The base map currently provides coverage for the world down to a scale of ~1:577k, and coverage down to 1:72k in US coastal areas, and various other areas. Coverage down to ~ 1:9k is available limited areas based on regional hydrographic survey data. The base map was designed and developed by Esri. For more information on this map, including our terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=1e126e7520f9466c9ca28b8f28b5e500",category:"Other",creationFunction:function(){return s.A.fromBasemapType(a.A.OCEANS,{enablePickFeatures:!1})}})),e.push(new d.A({name:"OpenStreetMap",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/openStreetMap.png"),tooltip:"OpenStreetMap (OSM) is a collaborative project to create a free editable map of the world.\nhttp://www.openstreetmap.org",category:"Other",creationFunction:function(){return new c.A({url:"https://a.tile.openstreetmap.org/"})}})),e.push(new d.A({name:"Stamen Watercolor",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/stamenWatercolor.png"),tooltip:"Reminiscent of hand drawn maps, Stamen watercolor maps apply raster effect area washes and organic edges over a paper texture to add warm pop to any map.\nhttp://maps.stamen.com",category:"Other",creationFunction:function(){return new c.A({url:"https://stamen-tiles.a.ssl.fastly.net/watercolor/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),e.push(new d.A({name:"Stamen Toner",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/stamenToner.png"),tooltip:"A high contrast black and white map.\nhttp://maps.stamen.com",category:"Other",creationFunction:function(){return new c.A({url:"https://stamen-tiles.a.ssl.fastly.net/toner/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),e.push(new d.A({name:"Sentinel-2",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/sentinel-2.png"),tooltip:"Sentinel-2 cloudless by EOX IT Services GmbH (Contains modified Copernicus Sentinel data 2016 and 2017).",category:"Cesium ion",creationFunction:function(){return l.A.fromAssetId(3954)}})),e.push(new d.A({name:"Blue Marble",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/blueMarble.png"),tooltip:"Blue Marble Next Generation July, 2004 imagery from NASA.",category:"Cesium ion",creationFunction:function(){return l.A.fromAssetId(3845)}})),e.push(new d.A({name:"Earth at night",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/earthAtNight.png"),tooltip:"The Earth at night, also known as The Black Marble, is a 500 meter resolution global composite imagery layer released by NASA.",category:"Cesium ion",creationFunction:function(){return l.A.fromAssetId(3812)}})),e.push(new d.A({name:"Natural EarthII",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/naturalEarthII.png"),tooltip:"Natural Earth II, darkened for contrast.\nhttp://www.naturalearthdata.com/",category:"Cesium ion",creationFunction:function(){return u.A.fromUrl((0,i.A)("Assets/Textures/NaturalEarthII"))}})),e}},177647:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(303578),o=n(149192),r=n(75584),s=n(687194);const a=function(){const e=[];return e.push(new s.A({name:"WGS84 Ellipsoid",iconUrl:(0,i.A)("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84 standard ellipsoid, also known as EPSG:4326",category:"Cesium ion",creationFunction:function(){return new o.A}})),e.push(new s.A({name:"Cesium World Terrain",iconUrl:(0,i.A)("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,r.A)({requestWaterMask:!0,requestVertexNormals:!0})}})),e}},112306:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(565801),r=n(354975),s=n(591978),a=n(677354),c=n(914684);function l(e){(0,i.A)(e)||(e=new o.A),this._clock=e,this._eventHelper=new r.A,this._eventHelper.add(e.onTick,this.synchronize,this),this.systemTime=c.A.observable(s.A.now()),this.systemTime.equalityComparer=s.A.equals,this.startTime=c.A.observable(e.startTime),this.startTime.equalityComparer=s.A.equals,this.startTime.subscribe((function(t){e.startTime=t,this.synchronize()}),this),this.stopTime=c.A.observable(e.stopTime),this.stopTime.equalityComparer=s.A.equals,this.stopTime.subscribe((function(t){e.stopTime=t,this.synchronize()}),this),this.currentTime=c.A.observable(e.currentTime),this.currentTime.equalityComparer=s.A.equals,this.currentTime.subscribe((function(t){e.currentTime=t,this.synchronize()}),this),this.multiplier=c.A.observable(e.multiplier),this.multiplier.subscribe((function(t){e.multiplier=t,this.synchronize()}),this),this.clockStep=c.A.observable(e.clockStep),this.clockStep.subscribe((function(t){e.clockStep=t,this.synchronize()}),this),this.clockRange=c.A.observable(e.clockRange),this.clockRange.subscribe((function(t){e.clockRange=t,this.synchronize()}),this),this.canAnimate=c.A.observable(e.canAnimate),this.canAnimate.subscribe((function(t){e.canAnimate=t,this.synchronize()}),this),this.shouldAnimate=c.A.observable(e.shouldAnimate),this.shouldAnimate.subscribe((function(t){e.shouldAnimate=t,this.synchronize()}),this),c.A.track(this,["systemTime","startTime","stopTime","currentTime","multiplier","clockStep","clockRange","canAnimate","shouldAnimate"])}Object.defineProperties(l.prototype,{clock:{get:function(){return this._clock}}}),l.prototype.synchronize=function(){const e=this._clock;this.systemTime=s.A.now(),this.startTime=e.startTime,this.stopTime=e.stopTime,this.currentTime=e.currentTime,this.multiplier=e.multiplier,this.clockStep=e.clockStep,this.clockRange=e.clockRange,this.canAnimate=e.canAnimate,this.shouldAnimate=e.shouldAnimate},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){this._eventHelper.removeAll(),(0,a.A)(this)};const u=l},877987:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),s=n(677354),a=n(914684),c=n(377909);function l(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e);const n=new c.A(t,e);n._exitFullScreenPath="M 104.34375 17.5625 L 83.5 38.4375 L 83.40625 18.21875 L 76.125 25.5 L 76.09375 51.78125 L 102.3125 51.8125 L 102.3125 51.78125 L 109.625 44.5 L 89.1875 44.40625 L 110.1875 23.40625 L 104.34375 17.5625 z M 23.75 17.59375 L 17.90625 23.4375 L 38.90625 44.4375 L 18.5 44.53125 L 25.78125 51.8125 L 52 51.78125 L 51.96875 25.53125 L 44.6875 18.25 L 44.625 38.46875 L 23.75 17.59375 z M 25.6875 76.03125 L 18.375 83.3125 L 38.78125 83.40625 L 17.8125 104.40625 L 23.625 110.25 L 44.5 89.375 L 44.59375 109.59375 L 51.875 102.3125 L 51.875 76.0625 L 25.6875 76.03125 z M 102.375 76.15625 L 76.15625 76.1875 L 76.1875 102.4375 L 83.46875 109.71875 L 83.5625 89.53125 L 104.40625 110.375 L 110.25 104.53125 L 89.25 83.53125 L 109.6875 83.46875 L 102.375 76.15625 z",n._enterFullScreenPath="M 83.96875 17.5625 L 83.96875 17.59375 L 76.65625 24.875 L 97.09375 24.96875 L 76.09375 45.96875 L 81.9375 51.8125 L 102.78125 30.9375 L 102.875 51.15625 L 110.15625 43.875 L 110.1875 17.59375 L 83.96875 17.5625 z M 44.125 17.59375 L 17.90625 17.625 L 17.9375 43.90625 L 25.21875 51.1875 L 25.3125 30.96875 L 46.15625 51.8125 L 52 45.96875 L 31 25 L 51.4375 24.90625 L 44.125 17.59375 z M 46.0625 76.03125 L 25.1875 96.875 L 25.09375 76.65625 L 17.8125 83.9375 L 17.8125 110.21875 L 44 110.25 L 51.3125 102.9375 L 30.90625 102.84375 L 51.875 81.875 L 46.0625 76.03125 z M 82 76.15625 L 76.15625 82 L 97.15625 103 L 76.71875 103.0625 L 84.03125 110.375 L 110.25 110.34375 L 110.21875 84.0625 L 102.9375 76.8125 L 102.84375 97 L 82 76.15625 z";const s=document.createElement("button");s.type="button",s.className="cesium-button cesium-fullscreenButton",s.setAttribute("data-bind","attr: { title: tooltip },click: command,enable: isFullscreenEnabled,cesiumSvgPath: { path: isFullscreen ? _exitFullScreenPath : _enterFullScreenPath, width: 128, height: 128 }"),e.appendChild(s),a.A.applyBindings(n,s),this._container=e,this._viewModel=n,this._element=s}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._viewModel.destroy(),a.A.cleanNode(this._element),this._container.removeChild(this._element),(0,s.A)(this)};const u=l},377909:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(116112),r=n(263842),s=n(419061),a=n(605971),c=n(677354),l=n(914684),u=n(277441);function d(e,t){(0,i.A)(t)||(t=document.body),t=(0,o.A)(t);const n=this,a=l.A.observable(r.A.fullscreen),c=l.A.observable(r.A.enabled),d=t.ownerDocument;this.isFullscreen=void 0,l.A.defineProperty(this,"isFullscreen",{get:function(){return a()}}),this.isFullscreenEnabled=void 0,l.A.defineProperty(this,"isFullscreenEnabled",{get:function(){return c()},set:function(e){c(e&&r.A.enabled)}}),this.tooltip=void 0,l.A.defineProperty(this,"tooltip",(function(){return this.isFullscreenEnabled?a()?"Exit full screen":"Full screen":"Full screen unavailable"})),this._command=(0,u.A)((function(){r.A.fullscreen?r.A.exitFullscreen():r.A.requestFullscreen(n._fullscreenElement)}),l.A.getObservable(this,"isFullscreenEnabled")),this._fullscreenElement=(0,s.A)((0,o.A)(e),d.body),this._callback=function(){a(r.A.fullscreen)},d.addEventListener(r.A.changeEventName,this._callback)}Object.defineProperties(d.prototype,{fullscreenElement:{get:function(){return this._fullscreenElement},set:function(e){if(!(e instanceof Element))throw new a.A("value must be a valid Element.");this._fullscreenElement=e}},command:{get:function(){return this._command}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){document.removeEventListener(r.A.changeEventName,this._callback),(0,c.A)(this)};const h=d},413369:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(116112),s=n(520098),a=n(677354),c=n(914684),l=n(300347);function u(e){if(!(0,i.A)(e)||!(0,i.A)(e.container))throw new o.A("options.container is required.");if(!(0,i.A)(e.scene))throw new o.A("options.scene is required.");const t=(0,r.A)(e.container),n=new l.A(e);n._startSearchPath="M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",n._stopSearchPath="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z";const a=document.createElement("form");a.setAttribute("data-bind","submit: search");const u=document.createElement("input");u.type="search",u.className="cesium-geocoder-input",u.setAttribute("placeholder","Enter an address or landmark..."),u.setAttribute("data-bind",'textInput: searchText,disable: isSearchInProgress,event: { keyup: handleKeyUp, keydown: handleKeyDown, mouseover: deselectSuggestion },css: { "cesium-geocoder-input-wide" : keepExpanded || searchText.length > 0 },hasFocus: _focusTextbox'),this._onTextBoxFocus=function(){setTimeout((function(){u.select()}),0)},u.addEventListener("focus",this._onTextBoxFocus,!1),a.appendChild(u),this._textBox=u;const d=document.createElement("span");d.className="cesium-geocoder-searchButton",d.setAttribute("data-bind","click: search,cesiumSvgPath: { path: isSearchInProgress ? _stopSearchPath : _startSearchPath, width: 32, height: 32 }"),a.appendChild(d),t.appendChild(a);const h=document.createElement("div");h.className="search-results",h.setAttribute("data-bind","visible: _suggestionsVisible");const A=document.createElement("ul");A.setAttribute("data-bind","foreach: _suggestions");const f=document.createElement("li");A.appendChild(f),f.setAttribute("data-bind","text: $data.displayName, click: $parent.activateSuggestion, event: { mouseover: $parent.handleMouseover}, css: { active: $data === $parent._selectedSuggestion }"),h.appendChild(A),t.appendChild(h),c.A.applyBindings(n,a),c.A.applyBindings(n,h),this._container=t,this._searchSuggestionsContainer=h,this._viewModel=n,this._form=a,this._onInputBegin=function(e){let i=e.target;"function"==typeof e.composedPath&&(i=e.composedPath()[0]),t.contains(i)||(n._focusTextbox=!1,n.hideSuggestions())},this._onInputEnd=function(e){n._focusTextbox=!0,n.showSuggestions()},s.A.supportsPointerEvents()?(document.addEventListener("pointerdown",this._onInputBegin,!0),t.addEventListener("pointerup",this._onInputEnd,!0),t.addEventListener("pointercancel",this._onInputEnd,!0)):(document.addEventListener("mousedown",this._onInputBegin,!0),t.addEventListener("mouseup",this._onInputEnd,!0),document.addEventListener("touchstart",this._onInputBegin,!0),t.addEventListener("touchend",this._onInputEnd,!0),t.addEventListener("touchcancel",this._onInputEnd,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},searchSuggestionsContainer:{get:function(){return this._searchSuggestionsContainer}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){const e=this._container;return s.A.supportsPointerEvents()?(document.removeEventListener("pointerdown",this._onInputBegin,!0),e.removeEventListener("pointerup",this._onInputEnd,!0)):(document.removeEventListener("mousedown",this._onInputBegin,!0),e.removeEventListener("mouseup",this._onInputEnd,!0),document.removeEventListener("touchstart",this._onInputBegin,!0),e.removeEventListener("touchend",this._onInputEnd,!0)),this._viewModel.destroy(),c.A.cleanNode(this._form),c.A.cleanNode(this._searchSuggestionsContainer),e.removeChild(this._form),e.removeChild(this._searchSuggestionsContainer),this._textBox.removeEventListener("focus",this._onTextBoxFocus,!1),(0,a.A)(this)};const d=u},300347:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(491446),o=n(605971),r=n(297241),s=n(5188),a=n(955943),c=n(419061),l=n(123475),u=n(448871),d=n(697422),h=n(367817),A=n(849750),f=n(584164),p=n(675178),m=n(116112),_=n(677354),g=n(914684),y=n(277441);function b(e){if(!(0,i.A)(e)||!(0,i.A)(e.scene))throw new o.A("options.scene is required.");(0,i.A)(e.geocoderServices)?this._geocoderServices=e.geocoderServices:this._geocoderServices=[new r.A,new s.A({scene:e.scene})],this._viewContainer=e.container,this._scene=e.scene,this._flightDuration=e.flightDuration,this._searchText="",this._isSearchInProgress=!1,this._wasGeocodeCancelled=!1,this._previousCredits=[],this._complete=new a.A,this._suggestions=[],this._selectedSuggestion=void 0,this._showSuggestions=!0,this._handleArrowDown=T,this._handleArrowUp=v;const t=this;this._suggestionsVisible=g.A.pureComputed((function(){const e=g.A.getObservable(t,"_suggestions")().length>0,n=g.A.getObservable(t,"_showSuggestions")();return e&&n})),this._searchCommand=(0,y.A)((function(e){return e=(0,c.A)(e,l.A.SEARCH),t._focusTextbox=!1,(0,i.A)(t._selectedSuggestion)?(t.activateSuggestion(t._selectedSuggestion),!1):(t.hideSuggestions(),t.isSearchInProgress?void((n=t)._isSearchInProgress&&(n._isSearchInProgress=!1,n._wasGeocodeCancelled=!0)):async function(e,t,n){const o=e._searchText;if(x(o))return void e.showSuggestions();let r,s;for(e._isSearchInProgress=!0,e._wasGeocodeCancelled=!1,r=0;r<t.length;r++){if(e._wasGeocodeCancelled)return;if(s=await w(t[r],o,n),(0,i.A)(s)&&"fulfilled"===s.state&&s.value.length>0)break}if(e._wasGeocodeCancelled)return;e._isSearchInProgress=!1,C(e);const a=s.value;if("fulfilled"===s.state&&(0,i.A)(a)&&a.length>0){e._searchText=a[0].displayName,e.destinationFound(e,a[0].destination);const n=S(e,p.A.getCreditsFromResult(a[0]));(0,i.A)(n)||E(e,t[r].credit)}else e._searchText=`${o} (not found)`}(t,t._geocoderServices,e));var n})),this.deselectSuggestion=function(){t._selectedSuggestion=void 0},this.handleKeyDown=function(e,t){const n="ArrowDown"===t.key||"Down"===t.key||40===t.keyCode,i="ArrowUp"===t.key||"Up"===t.key||38===t.keyCode;return(n||i)&&t.preventDefault(),!0},this.handleKeyUp=function(e,n){const i="ArrowDown"===n.key||"Down"===n.key||40===n.keyCode,o="ArrowUp"===n.key||"Up"===n.key||38===n.keyCode,r="Enter"===n.key||13===n.keyCode;return o?v(t):i?T(t):r&&t._searchCommand(),!0},this.activateSuggestion=function(e){t.hideSuggestions(),t._searchText=e.displayName;const n=e.destination;I(t),t.destinationFound(t,n)},this.hideSuggestions=function(){t._showSuggestions=!1,t._selectedSuggestion=void 0},this.showSuggestions=function(){t._showSuggestions=!0},this.handleMouseover=function(e,n){e!==t._selectedSuggestion&&(t._selectedSuggestion=e)},this.keepExpanded=!1,this.autoComplete=(0,c.A)(e.autocomplete,!0),this.destinationFound=(0,c.A)(e.destinationFound,b.flyToDestination),this._focusTextbox=!1,g.A.track(this,["_searchText","_isSearchInProgress","keepExpanded","_suggestions","_selectedSuggestion","_showSuggestions","_focusTextbox"]);const n=g.A.getObservable(this,"_searchText");n.extend({rateLimit:{timeout:500}}),this._suggestionSubscription=n.subscribe((function(){b._updateSearchSuggestions(t)})),this.isSearchInProgress=void 0,g.A.defineProperty(this,"isSearchInProgress",{get:function(){return this._isSearchInProgress}}),this.searchText=void 0,g.A.defineProperty(this,"searchText",{get:function(){return this.isSearchInProgress?"Searching...":this._searchText},set:function(e){if("string"!=typeof e)throw new o.A("value must be a valid string.");this._searchText=e}}),this.flightDuration=void 0,g.A.defineProperty(this,"flightDuration",{get:function(){return this._flightDuration},set:function(e){if((0,i.A)(e)&&e<0)throw new o.A("value must be positive.");this._flightDuration=e}})}function v(e){if(0===e._suggestions.length)return;const t=e._suggestions.indexOf(e._selectedSuggestion);if(-1===t||0===t)return void(e._selectedSuggestion=void 0);const n=t-1;e._selectedSuggestion=e._suggestions[n],b._adjustSuggestionsScroll(e,n)}function T(e){if(0===e._suggestions.length)return;const t=e._suggestions.length,n=(e._suggestions.indexOf(e._selectedSuggestion)+1)%t;e._selectedSuggestion=e._suggestions[n],b._adjustSuggestionsScroll(e,n)}async function w(e,t,n){try{return{state:"fulfilled",value:await e.geocode(t,n),credits:e.credit}}catch(e){return{state:"rejected",reason:e}}}function E(e,t){!(0,i.A)(t)||e._scene.isDestroyed()||e._scene.frameState.creditDisplay.isDestroyed()||(e._scene.frameState.creditDisplay.addStaticCredit(t),e._previousCredits.push(t))}function S(e,t){return(0,i.A)(t)&&t.forEach((t=>E(e,t))),t}function C(e){e._scene.isDestroyed()||e._scene.frameState.creditDisplay.isDestroyed()||e._previousCredits.forEach((t=>{e._scene.frameState.creditDisplay.removeStaticCredit(t)})),e._previousCredits.length=0}function x(e){return/^\s*$/.test(e)}function I(e){g.A.getObservable(e,"_suggestions").removeAll()}Object.defineProperties(b.prototype,{complete:{get:function(){return this._complete}},scene:{get:function(){return this._scene}},search:{get:function(){return this._searchCommand}},selectedSuggestion:{get:function(){return this._selectedSuggestion}},suggestions:{get:function(){return this._suggestions}}}),b.prototype.destroy=function(){this._suggestionSubscription.dispose()},b.flyToDestination=function(e,t){const n=e._scene,o=n.mapProjection.ellipsoid,r=n.camera,s=n.terrainProvider;let a,c=t;return t instanceof d.A?h.A.equalsEpsilon(t.south,t.north,h.A.EPSILON7)&&h.A.equalsEpsilon(t.east,t.west,h.A.EPSILON7)?t=d.A.center(t):a=(0,A.A)(t,n):t=o.cartesianToCartographic(t),(0,i.A)(a)||(a=function(e,t){const n=(0,i.A)(t)?t.availability:void 0;return(0,i.A)(n)?(0,u.A)(t,[e]).then((function(t){return(e=t[0]).height+=1e3,e})):(e.height+=1e3,Promise.resolve(e))}(t,s)),a.then((function(e){c=o.cartographicToCartesian(e)})).finally((function(){r.flyTo({destination:c,complete:function(){e._complete.raiseEvent()},duration:e._flightDuration,endTransform:f.A.IDENTITY})}))},b._updateSearchSuggestions=async function(e){if(!e.autoComplete)return;const t=e._searchText;if(I(e),C(e),!x(t))for(const n of e._geocoderServices){const o=await n.geocode(t,l.A.AUTOCOMPLETE);if(e._suggestions=e._suggestions.concat(o),o.length>0){let t=!0;o.forEach((n=>{const o=p.A.getCreditsFromResult(n);t=t&&!(0,i.A)(o),S(e,o)})),t&&E(e,n.credit)}if(e._suggestions.length>=5)return}},b._adjustSuggestionsScroll=function(e,t){const n=(0,m.A)(e._viewContainer),i=n.getElementsByClassName("search-results")[0],o=n.getElementsByTagName("li")[t];if(0===t)return void(i.scrollTop=0);const r=o.offsetTop;r+o.clientHeight>i.clientHeight?i.scrollTop=r+o.clientHeight:r<i.scrollTop&&(i.scrollTop=r)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return C(this),(0,_.A)(this)};const P=b},217263:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),s=n(677354),a=n(914684),c=n(863529);function l(e,t,n){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e);const s=new c.A(t,n);s._svgPath="M14,4l-10,8.75h20l-4.25-3.7188v-4.6562h-2.812v2.1875l-2.938-2.5625zm-7.0938,9.906v10.094h14.094v-10.094h-14.094zm2.1876,2.313h3.3122v4.25h-3.3122v-4.25zm5.8442,1.281h3.406v6.438h-3.406v-6.438z";const l=document.createElement("button");l.type="button",l.className="cesium-button cesium-toolbar-button cesium-home-button",l.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 28, height: 28 }"),e.appendChild(l),a.A.applyBindings(s,l),this._container=e,this._viewModel=s,this._element=l}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return a.A.cleanNode(this._element),this._container.removeChild(this._element),(0,s.A)(this)};const u=l},863529:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(605971),r=n(914684),s=n(277441);function a(e,t){if(!(0,i.A)(e))throw new o.A("scene is required.");this._scene=e,this._duration=t;const n=this;this._command=(0,s.A)((function(){n._scene.camera.flyHome(n._duration)})),this.tooltip="View Home",r.A.track(this,["tooltip"])}Object.defineProperties(a.prototype,{scene:{get:function(){return this._scene}},command:{get:function(){return this._command}},duration:{get:function(){return this._duration},set:function(e){if((0,i.A)(e)&&e<0)throw new o.A("value must be positive.");this._duration=e}}});const c=a},506527:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(116112),r=n(303578),s=n(41476),a=n(491446),c=n(677354),l=n(914684),u=n(618168),d=n(504377);function h(e){i.A.defined("container",e),e=(0,o.A)(e);const t=document.createElement("div");t.className="cesium-infoBox",t.setAttribute("data-bind",'css: { "cesium-infoBox-visible" : showInfo, "cesium-infoBox-bodyless" : _bodyless }'),e.appendChild(t);const n=document.createElement("div");n.className="cesium-infoBox-title",n.setAttribute("data-bind","text: titleText"),t.appendChild(n);const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-infoBox-camera",c.setAttribute("data-bind",'attr: { title: "Focus camera on object" },click: function () { cameraClicked.raiseEvent(this); },enable: enableCamera,cesiumSvgPath: { path: cameraIconPath, width: 32, height: 32 }'),t.appendChild(c);const h=document.createElement("button");h.type="button",h.className="cesium-infoBox-close",h.setAttribute("data-bind","click: function () { closeClicked.raiseEvent(this); }"),h.innerHTML="&times;",t.appendChild(h);const A=document.createElement("iframe");A.className="cesium-infoBox-iframe",A.setAttribute("sandbox","allow-same-origin allow-popups allow-forms"),A.setAttribute("data-bind","style : { maxHeight : maxHeightOffset(40) }"),A.setAttribute("allowfullscreen",!0),t.appendChild(A);const f=new d.A;l.A.applyBindings(f,t),this._container=e,this._element=t,this._frame=A,this._viewModel=f,this._descriptionSubscription=void 0;const p=this;A.addEventListener("load",(function(){const e=A.contentDocument,n=e.createElement("link");n.href=(0,r.A)("Widgets/InfoBox/InfoBoxDescription.css"),n.rel="stylesheet",n.type="text/css";const i=e.createElement("div");i.className="cesium-infoBox-description",e.head.appendChild(n),e.body.appendChild(i),p._descriptionSubscription=(0,u.A)(f,"description",(function(e){A.style.height="5px",i.innerHTML=e;let n=null;const o=i.firstElementChild;if(null!==o&&1===i.childNodes.length){const e=window.getComputedStyle(o);if(null!==e){const t=e["background-color"],i=s.A.fromCssColorString(t);(0,a.A)(i)&&0!==i.alpha&&(n=e["background-color"])}}t.style["background-color"]=n;const r=i.getBoundingClientRect().height;A.style.height=`${r}px`}))})),A.setAttribute("src","about:blank")}Object.defineProperties(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},frame:{get:function(){return this._frame}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){const e=this._container;return l.A.cleanNode(this._element),e.removeChild(this._element),(0,a.A)(this._descriptionSubscription)&&this._descriptionSubscription.dispose(),(0,c.A)(this)};const A=h},504377:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(955943),o=n(491446),r=n(914684);function s(){this._cameraClicked=new i.A,this._closeClicked=new i.A,this.maxHeight=500,this.enableCamera=!1,this.isCameraTracking=!1,this.showInfo=!1,this.titleText="",this.description="",r.A.track(this,["showInfo","titleText","description","maxHeight","enableCamera","isCameraTracking"]),this._loadingIndicatorHtml='<div class="cesium-infoBox-loadingContainer"><span class="cesium-infoBox-loading"></span></div>',this.cameraIconPath=void 0,r.A.defineProperty(this,"cameraIconPath",{get:function(){return!this.enableCamera||this.isCameraTracking?"M 27.34375 1.65625 L 5.28125 27.9375 L 8.09375 30.3125 L 30.15625 4.03125 L 27.34375 1.65625 z M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4724893 20.232036 9.5676108 20.7379 9.75 21.21875 L 21.65625 7.03125 L 13.84375 7.03125 z M 28.21875 7.71875 L 14.53125 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 9.8371439 29.456025 8.4902779 28.21875 7.71875 z":"M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4853444 22.104033 11.423165 24.0625 13.84375 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 8.975298 28.305952 7.03125 25.875 7.03125 L 13.84375 7.03125 z"}}),r.A.defineProperty(this,"_bodyless",{get:function(){return!(0,o.A)(this.description)||0===this.description.length}})}s.prototype.maxHeightOffset=function(e){return this.maxHeight-e+"px"},Object.defineProperties(s.prototype,{cameraClicked:{get:function(){return this._cameraClicked}},closeClicked:{get:function(){return this._closeClicked}}});const a=s},221899:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(605971),r=n(116112),s=n(419061),a=n(303578),c=n(520098),l=n(677354),u=n(914684),d=n(720749);function h(e){if(!(0,i.A)(e)||!(0,i.A)(e.container))throw new o.A("options.container is required.");const t=(0,r.A)(e.container),n=new d.A,l=(0,s.A)(e.instructionsInitiallyVisible,!1);n.showInstructions=l,n._svgPath="M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.328,24.371h-2.707v-2.596h2.707V24.371zM17.328,19.003v0.858h-2.707v-1.057c0-3.19,3.63-3.696,3.63-5.963c0-1.034-0.924-1.826-2.134-1.826c-1.254,0-2.354,0.924-2.354,0.924l-1.541-1.915c0,0,1.519-1.584,4.137-1.584c2.487,0,4.796,1.54,4.796,4.136C21.156,16.208,17.328,16.627,17.328,19.003z";const h=document.createElement("span");h.className="cesium-navigationHelpButton-wrapper",t.appendChild(h);const A=document.createElement("button");A.type="button",A.className="cesium-button cesium-toolbar-button cesium-navigation-help-button",A.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 32, height: 32 }"),h.appendChild(A);const f=document.createElement("div");f.className="cesium-navigation-help",f.setAttribute("data-bind",'css: { "cesium-navigation-help-visible" : showInstructions}'),h.appendChild(f);const p=document.createElement("button");p.type="button",p.className="cesium-navigation-button cesium-navigation-button-left",p.setAttribute("data-bind",'click: showClick, css: {"cesium-navigation-button-selected": !_touch, "cesium-navigation-button-unselected": _touch}');const m=document.createElement("img");m.src=(0,a.A)("Widgets/Images/NavigationHelp/Mouse.svg"),m.className="cesium-navigation-button-icon",m.style.width="25px",m.style.height="25px",p.appendChild(m),p.appendChild(document.createTextNode("Mouse"));const _=document.createElement("button");_.type="button",_.className="cesium-navigation-button cesium-navigation-button-right",_.setAttribute("data-bind",'click: showTouch, css: {"cesium-navigation-button-selected": _touch, "cesium-navigation-button-unselected": !_touch}');const g=document.createElement("img");g.src=(0,a.A)("Widgets/Images/NavigationHelp/Touch.svg"),g.className="cesium-navigation-button-icon",g.style.width="25px",g.style.height="25px",_.appendChild(g),_.appendChild(document.createTextNode("Touch")),f.appendChild(p),f.appendChild(_);const y=document.createElement("div");y.className="cesium-click-navigation-help cesium-navigation-help-instructions",y.setAttribute("data-bind",'css: { "cesium-click-navigation-help-visible" : !_touch}'),y.innerHTML=`            <table>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/MouseLeft.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">Left click + drag</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/MouseRight.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Right click + drag, or</div>                        <div class="cesium-navigation-help-details">Mouse wheel scroll</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/MouseMiddle.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Rotate view</div>                        <div class="cesium-navigation-help-details">Middle click + drag, or</div>                        <div class="cesium-navigation-help-details">CTRL + Left/Right click + drag</div>                    </td>                </tr>            </table>`,f.appendChild(y);const b=document.createElement("div");b.className="cesium-touch-navigation-help cesium-navigation-help-instructions",b.setAttribute("data-bind",'css: { "cesium-touch-navigation-help-visible" : _touch}'),b.innerHTML=`            <table>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchDrag.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">One finger drag</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchZoom.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Two finger pinch</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchTilt.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Tilt view</div>                        <div class="cesium-navigation-help-details">Two finger drag, same direction</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchRotate.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-tilt">Rotate view</div>                        <div class="cesium-navigation-help-details">Two finger drag, opposite direction</div>                    </td>                </tr>            </table>`,f.appendChild(b),u.A.applyBindings(n,h),this._container=t,this._viewModel=n,this._wrapper=h,this._closeInstructions=function(e){h.contains(e.target)||(n.showInstructions=!1)},c.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeInstructions,!0):(document.addEventListener("mousedown",this._closeInstructions,!0),document.addEventListener("touchstart",this._closeInstructions,!0))}Object.defineProperties(h.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return c.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeInstructions,!0):(document.removeEventListener("mousedown",this._closeInstructions,!0),document.removeEventListener("touchstart",this._closeInstructions,!0)),u.A.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,l.A)(this)};const A=h},720749:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(914684),o=n(277441);function r(){this.showInstructions=!1;const e=this;this._command=(0,o.A)((function(){e.showInstructions=!e.showInstructions})),this._showClick=(0,o.A)((function(){e._touch=!1})),this._showTouch=(0,o.A)((function(){e._touch=!0})),this._touch=!1,this.tooltip="Navigation Instructions",i.A.track(this,["tooltip","showInstructions","_touch"])}Object.defineProperties(r.prototype,{command:{get:function(){return this._command}},showClick:{get:function(){return this._showClick}},showTouch:{get:function(){return this._showTouch}}});const s=r},72211:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(116112),s=n(520098),a=n(677354),c=n(914684),l=n(522437);function u(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("scene is required.");e=(0,r.A)(e);const n=new l.A(t);n._perspectivePath="M 28.15625,10.4375 9.125,13.21875 13.75,43.25 41.75,55.09375 50.8125,37 54.5,11.9375 z m 0.125,3 19.976451,0.394265 L 43.03125,16.875 22.6875,14.28125 z M 50.971746,15.705477 47.90625,36.03125 42.53125,46 44.84375,19.3125 z M 12.625,16.03125 l 29.15625,3.6875 -2.65625,31 L 16.4375,41.125 z",n._orthographicPath="m 31.560594,6.5254438 -20.75,12.4687502 0.1875,24.5625 22.28125,11.8125 19.5,-12 0.65625,-0.375 0,-0.75 0.0312,-23.21875 z m 0.0625,3.125 16.65625,9.5000002 -16.125,10.28125 -17.34375,-9.71875 z m 18.96875,11.1875002 0.15625,20.65625 -17.46875,10.59375 0.15625,-20.28125 z m -37.0625,1.25 17.21875,9.625 -0.15625,19.21875 -16.9375,-9 z";const a=document.createElement("span");a.className="cesium-projectionPicker-wrapper cesium-toolbar-button",e.appendChild(a);const u=document.createElement("button");u.type="button",u.className="cesium-button cesium-toolbar-button",u.setAttribute("data-bind",'css: { "cesium-projectionPicker-buttonPerspective": !_orthographic,       "cesium-projectionPicker-buttonOrthographic": _orthographic,       "cesium-button-disabled" : sceneMode === _sceneMode.SCENE2D || _flightInProgress,        "cesium-projectionPicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),u.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64, css: "cesium-projectionPicker-iconPerspective" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64, css: "cesium-projectionPicker-iconOrthographic" } --\x3e\x3c!-- /ko --\x3e',a.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",d.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && _orthographic),       "cesium-projectionPicker-none" : !_orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible },attr: { title: tooltipPerspective },click: switchToPerspective,cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64 }'),a.appendChild(d);const h=document.createElement("button");h.type="button",h.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",h.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && !_orthographic),       "cesium-projectionPicker-none" : _orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible},attr: { title: tooltipOrthographic },click: switchToOrthographic,cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64 }'),a.appendChild(h),c.A.applyBindings(n,a),this._viewModel=n,this._container=e,this._wrapper=a,this._closeDropDown=function(e){a.contains(e.target)||(n.dropDownVisible=!1)},s.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._viewModel.destroy(),s.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),c.A.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,a.A)(this)};const d=u},522437:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(605971),r=n(811203),s=n(62467),a=n(354975),c=n(677354),l=n(914684),u=n(277441);function d(e){if(!(0,i.A)(e))throw new o.A("scene is required.");this._scene=e,this._orthographic=e.camera.frustum instanceof r.A,this._flightInProgress=!1,this.dropDownVisible=!1,this.tooltipPerspective="Perspective Projection",this.tooltipOrthographic="Orthographic Projection",this.selectedTooltip=void 0,this.sceneMode=e.mode,l.A.track(this,["_orthographic","_flightInProgress","sceneMode","dropDownVisible","tooltipPerspective","tooltipOrthographic"]);const t=this;l.A.defineProperty(this,"selectedTooltip",(function(){return t._orthographic?t.tooltipOrthographic:t.tooltipPerspective})),this._toggleDropDown=(0,u.A)((function(){t.sceneMode===s.A.SCENE2D||t._flightInProgress||(t.dropDownVisible=!t.dropDownVisible)})),this._eventHelper=new a.A,this._eventHelper.add(e.morphComplete,(function(e,n,i,o){t.sceneMode=i,t._orthographic=i===s.A.SCENE2D||t._scene.camera.frustum instanceof r.A})),this._eventHelper.add(e.preRender,(function(){t._flightInProgress=(0,i.A)(e.camera._currentFlight)})),this._switchToPerspective=(0,u.A)((function(){t.sceneMode!==s.A.SCENE2D&&(t._scene.camera.switchToPerspectiveFrustum(),t._orthographic=!1,t.dropDownVisible=!1)})),this._switchToOrthographic=(0,u.A)((function(){t.sceneMode!==s.A.SCENE2D&&(t._scene.camera.switchToOrthographicFrustum(),t._orthographic=!0,t.dropDownVisible=!1)})),this._sceneMode=s.A}Object.defineProperties(d.prototype,{scene:{get:function(){return this._scene}},toggleDropDown:{get:function(){return this._toggleDropDown}},switchToPerspective:{get:function(){return this._switchToPerspective}},switchToOrthographic:{get:function(){return this._switchToOrthographic}},isOrthographicProjection:{get:function(){return this._orthographic}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){this._eventHelper.removeAll(),(0,c.A)(this)};const h=d},288823:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(116112),s=n(520098),a=n(677354),c=n(914684),l=n(828033);function u(e,t,n){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("scene is required.");e=(0,r.A)(e);const a=new l.A(t,n);a._globePath="m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z",a._flatMapPath="m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z",a._columbusViewPath="m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z";const u=document.createElement("span");u.className="cesium-sceneModePicker-wrapper cesium-toolbar-button",e.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button",d.setAttribute("data-bind",'css: { "cesium-sceneModePicker-button2D": sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-button3D": sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-buttonColumbusView": sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),d.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _globePath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon3D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon2D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-iconColumbusView" } --\x3e\x3c!-- /ko --\x3e',u.appendChild(d);const h=document.createElement("button");h.type="button",h.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",h.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE3D)) || (!dropDownVisible && (sceneMode === _sceneMode.SCENE3D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip3D },click: morphTo3D,cesiumSvgPath: { path: _globePath, width: 64, height: 64 }'),u.appendChild(h);const A=document.createElement("button");A.type="button",A.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",A.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE2D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip2D },click: morphTo2D,cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64 }'),u.appendChild(A);const f=document.createElement("button");f.type="button",f.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",f.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.COLUMBUS_VIEW)) || (!dropDownVisible && (sceneMode === _sceneMode.COLUMBUS_VIEW)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-hidden" : !dropDownVisible},attr: { title: tooltipColumbusView },click: morphToColumbusView,cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64 }'),u.appendChild(f),c.A.applyBindings(a,u),this._viewModel=a,this._container=e,this._wrapper=u,this._closeDropDown=function(e){u.contains(e.target)||(a.dropDownVisible=!1)},s.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._viewModel.destroy(),s.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),c.A.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,a.A)(this)};const d=u},828033:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(605971),r=n(354975),s=n(419061),a=n(62467),c=n(677354),l=n(914684),u=n(277441);function d(e,t){if(!(0,i.A)(e))throw new o.A("scene is required.");this._scene=e;const n=this;this._eventHelper=new r.A,this._eventHelper.add(e.morphStart,(function(e,t,i,o){n.sceneMode=i,n.dropDownVisible=!1})),this._duration=(0,s.A)(t,2),this.sceneMode=e.mode,this.dropDownVisible=!1,this.tooltip2D="2D",this.tooltip3D="3D",this.tooltipColumbusView="Columbus View",l.A.track(this,["sceneMode","dropDownVisible","tooltip2D","tooltip3D","tooltipColumbusView"]),this.selectedTooltip=void 0,l.A.defineProperty(this,"selectedTooltip",(function(){const e=n.sceneMode;return e===a.A.SCENE2D?n.tooltip2D:e===a.A.SCENE3D?n.tooltip3D:n.tooltipColumbusView})),this._toggleDropDown=(0,u.A)((function(){n.dropDownVisible=!n.dropDownVisible})),this._morphTo2D=(0,u.A)((function(){e.morphTo2D(n._duration)})),this._morphTo3D=(0,u.A)((function(){e.morphTo3D(n._duration)})),this._morphToColumbusView=(0,u.A)((function(){e.morphToColumbusView(n._duration)})),this._sceneMode=a.A}Object.defineProperties(d.prototype,{scene:{get:function(){return this._scene}},duration:{get:function(){return this._duration},set:function(e){if(e<0)throw new o.A("duration value must be positive.");this._duration=e}},toggleDropDown:{get:function(){return this._toggleDropDown}},morphTo2D:{get:function(){return this._morphTo2D}},morphTo3D:{get:function(){return this._morphTo3D}},morphToColumbusView:{get:function(){return this._morphToColumbusView}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){this._eventHelper.removeAll(),(0,c.A)(this)};const h=d},363439:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),s=n(677354),a=n(914684),c=n(956009);function l(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e),this._container=e;const n=document.createElement("div");n.className="cesium-selection-wrapper",n.setAttribute("data-bind",'style: { "top" : _screenPositionY, "left" : _screenPositionX },css: { "cesium-selection-wrapper-visible" : isVisible }'),e.appendChild(n),this._element=n;const s="http://www.w3.org/2000/svg",l=document.createElementNS(s,"svg:svg");l.setAttribute("width",160),l.setAttribute("height",160),l.setAttribute("viewBox","0 0 160 160");const u=document.createElementNS(s,"g");u.setAttribute("transform","translate(80,80)"),l.appendChild(u);const d=document.createElementNS(s,"path");d.setAttribute("data-bind","attr: { transform: _transform }"),d.setAttribute("d","M -34 -34 L -34 -11.25 L -30 -15.25 L -30 -30 L -15.25 -30 L -11.25 -34 L -34 -34 z M 11.25 -34 L 15.25 -30 L 30 -30 L 30 -15.25 L 34 -11.25 L 34 -34 L 11.25 -34 z M -34 11.25 L -34 34 L -11.25 34 L -15.25 30 L -30 30 L -30 15.25 L -34 11.25 z M 34 11.25 L 30 15.25 L 30 30 L 15.25 30 L 11.25 34 L 34 34 L 34 11.25 z"),u.appendChild(d),n.appendChild(l);const h=new c.A(t,this._element,this._container);this._viewModel=h,a.A.applyBindings(this._viewModel,this._element)}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){const e=this._container;return a.A.cleanNode(this._element),e.removeChild(this._element),(0,s.A)(this)};const u=l},956009:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(434067),o=n(491446),r=n(605971),s=n(419061),a=n(78173),c=n(924290),l=n(914684);const u=new i.A,d="-1000px";function h(e,t,n){if(!(0,o.A)(e))throw new r.A("scene is required.");if(!(0,o.A)(t))throw new r.A("selectionIndicatorElement is required.");if(!(0,o.A)(n))throw new r.A("container is required.");this._scene=e,this._screenPositionX=d,this._screenPositionY=d,this._tweens=e.tweens,this._container=(0,s.A)(n,document.body),this._selectionIndicatorElement=t,this._scale=1,this.position=void 0,this.showSelection=!1,l.A.track(this,["position","_screenPositionX","_screenPositionY","_scale","showSelection"]),this.isVisible=void 0,l.A.defineProperty(this,"isVisible",{get:function(){return this.showSelection&&(0,o.A)(this.position)}}),l.A.defineProperty(this,"_transform",{get:function(){return`scale(${this._scale})`}}),this.computeScreenSpacePosition=function(t,n){return a.A.wgs84ToWindowCoordinates(e,t,n)}}h.prototype.update=function(){if(this.showSelection&&(0,o.A)(this.position)){const e=this.computeScreenSpacePosition(this.position,u);if((0,o.A)(e)){const t=this._container,n=t.parentNode.clientWidth,i=t.parentNode.clientHeight,o=this._selectionIndicatorElement.clientWidth,r=.5*o;e.x=Math.min(Math.max(e.x,-o),n+o)-r,e.y=Math.min(Math.max(e.y,-o),i+o)-r,this._screenPositionX=`${Math.floor(e.x+.25)}px`,this._screenPositionY=`${Math.floor(e.y+.25)}px`}else this._screenPositionX=d,this._screenPositionY=d}},h.prototype.animateAppear=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:2,stopValue:1,duration:.8,easingFunction:c.A.EXPONENTIAL_OUT})},h.prototype.animateDepart=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:this._scale,stopValue:1.5,duration:.8,easingFunction:c.A.EXPONENTIAL_OUT})},Object.defineProperties(h.prototype,{container:{get:function(){return this._container}},selectionIndicatorElement:{get:function(){return this._selectionIndicatorElement}},scene:{get:function(){return this._scene}}});const A=h},677854:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i="http://www.w3.org/2000/svg",o="cesium-svgPath-svg",r={register:function(e){e.bindingHandlers.cesiumSvgPath={init:function(t,n){const r=document.createElementNS(i,"svg:svg");r.setAttribute("class",o);const s=document.createElementNS(i,"path");return r.appendChild(s),e.virtualElements.setDomNodeChildren(t,[r]),e.computed({read:function(){const t=e.unwrap(n());s.setAttribute("d",e.unwrap(t.path));const i=e.unwrap(t.width),a=e.unwrap(t.height);r.setAttribute("width",i),r.setAttribute("height",a),r.setAttribute("viewBox",`0 0 ${i} ${a}`),t.css&&r.setAttribute("class",`${o} ${e.unwrap(t.css)}`)},disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.cesiumSvgPath=!0}}},973292:(e,t,n)=>{"use strict";var i;n.d(t,{A:()=>r}),"undefined"!=typeof ko&&(i=ko),function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,o=t.jQuery,r=t.JSON;o||"undefined"==typeof jQuery||(o=jQuery),function(e){e(t.ko={})}((function(s,a){function c(e,t){return(null===e||typeof e in v)&&e===t}function l(t,n){var i;return function(){i||(i=b.a.setTimeout((function(){i=e,t()}),n))}}function u(e,t){var n;return function(){clearTimeout(n),n=b.a.setTimeout(e,t)}}function d(e,t){t&&"change"!==t?"beforeChange"===t?this.pc(e):this.gb(e,t):this.qc(e)}function h(e,t){null!==t&&t.s&&t.s()}function A(e,t){var n=this.qd,i=n[C];i.ra||(this.Qb&&this.mb[t]?(n.uc(t,e,this.mb[t]),this.mb[t]=null,--this.Qb):i.I[t]||n.uc(t,e,i.J?{da:e}:n.$c(e)),e.Ja&&e.gd())}var f,p,m,_,g,y,b=void 0!==s?s:{};b.b=function(e,t){for(var n=e.split("."),i=b,o=0;o<n.length-1;o++)i=i[n[o]];i[n[n.length-1]]=t},b.L=function(e,t,n){e[t]=n},b.version="3.5.1",b.b("version",b.version),b.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},b.a=function(){function s(e,t){for(var n in e)u.call(e,n)&&t(n,e[n])}function a(e,t){if(t)for(var n in t)u.call(t,n)&&(e[n]=t[n]);return e}function c(e,t){return e.__proto__=t,e}function l(e,t,n,i){var o=e[t].match(g)||[];b.a.D(n.match(g),(function(e){b.a.Na(o,e,i)})),e[t]=o.join(" ")}var u=Object.prototype.hasOwnProperty,d={__proto__:[]}instanceof Array,h="function"==typeof Symbol,A={},f={};A[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],A.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),s(A,(function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)f[t[n]]=e}));var p,m={propertychange:!0},_=n&&function(){for(var t=3,i=n.createElement("div"),o=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",o[0];);return 4<t?t:e}(),g=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(e,t,n){for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i,e)},A:"function"==typeof Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Lb:function(t,n,i){for(var o=0,r=t.length;o<r;o++)if(n.call(i,t[o],o,t))return t[o];return e},Pa:function(e,t){var n=b.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},wc:function(e){var t=[];return e&&b.a.D(e,(function(e){0>b.a.A(t,e)&&t.push(e)})),t},Mb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)i.push(t.call(n,e[o],o));return i},jb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)t.call(n,e[o],o)&&i.push(e[o]);return i},Nb:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Na:function(e,t,n){var i=b.a.A(b.a.bc(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},Ba:d,extend:a,setPrototypeOf:c,Ab:d?c:a,P:s,Ga:function(e,t,n){if(!e)return e;var i,o={};for(i in e)u.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o},Tb:function(e){for(;e.firstChild;)b.removeNode(e.firstChild)},Yb:function(e){for(var t=((e=b.a.la(e))[0]&&e[0].ownerDocument||n).createElement("div"),i=0,o=e.length;i<o;i++)t.appendChild(b.oa(e[i]));return t},Ca:function(e,t){for(var n=0,i=e.length,o=[];n<i;n++){var r=e[n].cloneNode(!0);o.push(t?b.oa(r):r)}return o},va:function(e,t){if(b.a.Tb(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},Xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],o=i.parentNode,r=0,s=t.length;r<s;r++)o.insertBefore(t[r],i);for(r=0,s=n.length;r<s;r++)b.removeNode(n[r])}},Ua:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},Zc:function(e,t){7>_?e.setAttribute("selected",t):e.selected=t},Db:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},vd:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(1!==e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return!(16&~t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Sb:function(e){return b.a.vd(e,e.ownerDocument.documentElement)},kd:function(e){return!!b.a.Lb(e,b.a.Sb)},R:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Ac:function(e){return b.onError?function(){try{return e.apply(this,arguments)}catch(e){throw b.onError&&b.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(b.a.Ac(e),t)},Gc:function(e){setTimeout((function(){throw b.onError&&b.onError(e),e}),0)},B:function(e,t,n){var i=b.a.Ac(n);if(n=m[t],b.options.useOnlyNativeEvents||n||!o)if(n||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){i.call(e,t)},s="on"+t;e.attachEvent(s,r),b.a.K.za(e,(function(){e.detachEvent(s,r)}))}else e.addEventListener(t,i,!1);else p||(p="function"==typeof o(e).on?"on":"bind"),o(e)[p](t,i)},Fb:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;if(r=!("input"!==b.a.R(e)||!e.type||"click"!=i.toLowerCase()||"checkbox"!=(r=e.type)&&"radio"!=r),b.options.useOnlyNativeEvents||!o||r)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(r=n.createEvent(f[i]||"HTMLEvents")).initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if(void 0===e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}else o(e).trigger(i)},f:function(e){return b.O(e)?e():e},bc:function(e){return b.O(e)?e.v():e},Eb:function(e,t,n){var i;t&&("object"==typeof e.classList?(i=e.classList[n?"add":"remove"],b.a.D(t.match(g),(function(t){i.call(e.classList,t)}))):"string"==typeof e.className.baseVal?l(e.className,"baseVal",t,n):l(e,"className",t,n))},Bb:function(t,n){var i=b.a.f(n);null!==i&&i!==e||(i="");var o=b.h.firstChild(t);!o||3!=o.nodeType||b.h.nextSibling(o)?b.h.va(t,[t.ownerDocument.createTextNode(i)]):o.data=i,b.a.Ad(t)},Yc:function(e,t){if(e.name=t,7>=_)try{var i=e.name.replace(/[&<>'"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));e.mergeAttributes(n.createElement("<input name='"+i+"'/>"),!1)}catch(e){}},Ad:function(e){9<=_&&(e=1==e.nodeType?e:e.parentNode).style&&(e.style.zoom=e.style.zoom)},wd:function(e){if(_){var t=e.style.width;e.style.width=0,e.style.width=t}},Pd:function(e,t){e=b.a.f(e),t=b.a.f(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},la:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Da:function(e){return h?Symbol(e):e},Zd:6===_,$d:7===_,W:_,Lc:function(e,t){for(var n=b.a.la(e.getElementsByTagName("input")).concat(b.a.la(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=n.length-1;0<=r;r--)i(n[r])&&o.push(n[r]);return o},Nd:function(e){return"string"==typeof e&&(e=b.a.Db(e))?r&&r.parse?r.parse(e):new Function("return "+e)():null},hc:function(e,t,n){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(b.a.f(e),t,n)},Od:function(e,t,i){var o=(i=i||{}).params||{},r=i.includeFields||this.Jc,a=e;if("object"==typeof e&&"form"===b.a.R(e)){a=e.action;for(var c=r.length-1;0<=c;c--)for(var l=b.a.Lc(e,r[c]),u=l.length-1;0<=u;u--)o[l[u].name]=l[u].value}t=b.a.f(t);var d=n.createElement("form");for(var h in d.style.display="none",d.action=a,d.method="post",t)(e=n.createElement("input")).type="hidden",e.name=h,e.value=b.a.hc(b.a.f(t[h])),d.appendChild(e);s(o,(function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,d.appendChild(i)})),n.body.appendChild(d),i.submitter?i.submitter(d):d.submit(),setTimeout((function(){d.parentNode.removeChild(d)}),0)}}}(),b.b("utils",b.a),b.b("utils.arrayForEach",b.a.D),b.b("utils.arrayFirst",b.a.Lb),b.b("utils.arrayFilter",b.a.jb),b.b("utils.arrayGetDistinctValues",b.a.wc),b.b("utils.arrayIndexOf",b.a.A),b.b("utils.arrayMap",b.a.Mb),b.b("utils.arrayPushAll",b.a.Nb),b.b("utils.arrayRemoveItem",b.a.Pa),b.b("utils.cloneNodes",b.a.Ca),b.b("utils.createSymbolOrString",b.a.Da),b.b("utils.extend",b.a.extend),b.b("utils.fieldsIncludedWithJsonPost",b.a.Jc),b.b("utils.getFormFields",b.a.Lc),b.b("utils.objectMap",b.a.Ga),b.b("utils.peekObservable",b.a.bc),b.b("utils.postJson",b.a.Od),b.b("utils.parseJson",b.a.Nd),b.b("utils.registerEventHandler",b.a.B),b.b("utils.stringifyJson",b.a.hc),b.b("utils.range",b.a.Pd),b.b("utils.toggleDomNodeCssClass",b.a.Eb),b.b("utils.triggerEvent",b.a.Fb),b.b("utils.unwrapObservable",b.a.f),b.b("utils.objectForEach",b.a.P),b.b("utils.addOrRemoveItem",b.a.Na),b.b("utils.setTextContent",b.a.Bb),b.b("unwrap",b.a.f),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),b.a.g=new function(){var t,n,i=0,o="__ko__"+(new Date).getTime(),r={};return b.a.W?(t=function(t,n){var s=t[o];if(!s||"null"===s||!r[s]){if(!n)return e;s=t[o]="ko"+i++,r[s]={}}return r[s]},n=function(e){var t=e[o];return!!t&&(delete r[t],e[o]=null,!0)}):(t=function(e,t){var n=e[o];return!n&&t&&(n=e[o]={}),n},n=function(e){return!!e[o]&&(delete e[o],!0)}),{get:function(e,n){var i=t(e,!1);return i&&i[n]},set:function(n,i,o){(n=t(n,o!==e))&&(n[i]=o)},Ub:function(e,n,i){return(e=t(e,!0))[n]||(e[n]=i)},clear:n,Z:function(){return i+++o}}},b.b("utils.domData",b.a.g),b.b("utils.domData.clear",b.a.g.clear),b.a.K=new function(){function t(t,n){var i=b.a.g.get(t,r);return i===e&&n&&(i=[],b.a.g.set(t,r,i)),i}function n(e){if(n=t(e,!1))for(var n=n.slice(0),o=0;o<n.length;o++)n[o](e);b.a.g.clear(e),b.a.K.cleanExternalData(e),a[e.nodeType]&&i(e.childNodes,!0)}function i(e,t){for(var i,o=[],r=0;r<e.length;r++)if((!t||8===e[r].nodeType)&&(n(o[o.length]=i=e[r]),e[r]!==i))for(;r--&&-1==b.a.A(o,e[r]););}var r=b.a.g.Z(),s={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{za:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},yb:function(n,i){var o=t(n,!1);o&&(b.a.Pa(o,i),0==o.length&&b.a.g.set(n,r,e))},oa:function(e){return b.u.G((function(){s[e.nodeType]&&(n(e),a[e.nodeType]&&i(e.getElementsByTagName("*")))})),e},removeNode:function(e){b.oa(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){o&&"function"==typeof o.cleanData&&o.cleanData([e])}}},b.oa=b.a.K.oa,b.removeNode=b.a.K.removeNode,b.b("cleanNode",b.oa),b.b("removeNode",b.removeNode),b.b("utils.domNodeDisposal",b.a.K),b.b("utils.domNodeDisposal.addDisposeCallback",b.a.K.za),b.b("utils.domNodeDisposal.removeDisposeCallback",b.a.K.yb),f=[0,"",""],g={thead:p=[1,"<table>","</table>"],tbody:p,tfoot:p,tr:[2,"<table><tbody>","</tbody></table>"],td:m=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:m,option:_=[1,"<select multiple='multiple'>","</select>"],optgroup:_},y=8>=b.a.W,b.a.ua=function(e,i){var r;if(o){if(o.parseHTML)r=o.parseHTML(e,i)||[];else if((r=o.clean([e],i))&&r[0]){for(var s=r[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(r=i)||(r=n),s=r.parentWindow||r.defaultView||t;var a,c=b.a.Db(e).toLowerCase(),l=r.createElement("div");for(a=(c=c.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&g[c[1]]||f,c=a[0],a="ignored<div>"+a[1]+e+a[2]+"</div>","function"==typeof s.innerShiv?l.appendChild(s.innerShiv(a)):(y&&r.body.appendChild(l),l.innerHTML=a,y&&l.parentNode.removeChild(l));c--;)l=l.lastChild;r=b.a.la(l.lastChild.childNodes)}return r},b.a.Md=function(e,t){var n=b.a.ua(e,t);return n.length&&n[0].parentElement||b.a.Yb(n)},b.a.fc=function(t,n){if(b.a.Tb(t),null!==(n=b.a.f(n))&&n!==e)if("string"!=typeof n&&(n=n.toString()),o)o(t).html(n);else for(var i=b.a.ua(n,t.ownerDocument),r=0;r<i.length;r++)t.appendChild(i[r])},b.b("utils.parseHtmlFragment",b.a.ua),b.b("utils.setHtml",b.a.fc),b.aa=function(){function t(e,n){if(e)if(8==e.nodeType)null!=(i=b.aa.Uc(e.nodeValue))&&n.push({ud:e,Kd:i});else if(1==e.nodeType)for(var i=0,o=e.childNodes,r=o.length;i<r;i++)t(o[i],n)}var n={};return{Xb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},bd:function(t,i){var o=n[t];if(o===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return o.apply(null,i||[]),!0}finally{delete n[t]}},cd:function(e,n){var i=[];t(e,i);for(var o=0,r=i.length;o<r;o++){var s=i[o].ud,a=[s];n&&b.a.Nb(a,n),b.aa.bd(i[o].Kd,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},Uc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),b.b("memoization",b.aa),b.b("memoization.memoize",b.aa.Xb),b.b("memoization.unmemoize",b.aa.bd),b.b("memoization.parseMemoText",b.aa.Uc),b.b("memoization.unmemoizeDomNodeAndDescendants",b.aa.cd),b.na=function(){function e(){if(s)for(var e,t=s,n=0;c<s;)if(e=r[c++]){if(c>t){if(5e3<=++n){c=s,b.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}t=s}try{e()}catch(e){b.a.Gc(e)}}}function i(){e(),c=s=r.length=0}var o,r=[],s=0,a=1,c=0;return o=t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:o,zb:function(e){return s||b.na.scheduler(i),r[s++]=e,a++},cancel:function(e){(e-=a-s)>=c&&e<s&&(r[e]=null)},resetForTesting:function(){var e=s-c;return c=s=r.length=0,e},Sd:e}}(),b.b("tasks",b.na),b.b("tasks.schedule",b.na.zb),b.b("tasks.runEarly",b.na.Sd),b.Ta={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return b.$({read:e,write:function(i){clearTimeout(n),n=b.a.setTimeout((function(){e(i)}),t)}})},rateLimit:function(e,t){var n,i,o;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e.Hb=!1,o="function"==typeof i?i:"notifyWhenChangesStop"==i?u:l,e.ub((function(e){return o(e,n,t)}))},deferred:function(t,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.Hb||(t.Hb=!0,t.ub((function(n){var i,o=!1;return function(){if(!o){b.na.cancel(i),i=b.na.zb(n);try{o=!0,t.notifySubscribers(e,"dirty")}finally{o=!1}}}})))},notify:function(e,t){e.equalityComparer="always"==t?null:c}};var v={undefined:1,boolean:1,number:1,string:1};b.b("extenders",b.Ta),b.ic=function(e,t,n){this.da=e,this.lc=t,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,b.L(this,"dispose",this.s),b.L(this,"disposeWhenNodeIsRemoved",this.l)},b.ic.prototype.s=function(){this.Ib||(this.fb&&b.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},b.ic.prototype.l=function(e){this.Jb=e,b.a.K.za(e,this.fb=this.s.bind(this))},b.T=function(){b.a.Ab(this,T),T.qb(this)};var T={qb:function(e){e.U={change:[]},e.sc=1},subscribe:function(e,t,n){var i=this;n=n||"change";var o=new b.ic(i,t?e.bind(t):e,(function(){b.a.Pa(i.U[n],o),i.hb&&i.hb(n)}));return i.Qa&&i.Qa(n),i.U[n]||(i.U[n]=[]),i.U[n].push(o),o},notifySubscribers:function(e,t){if("change"===(t=t||"change")&&this.Gb(),this.Wa(t)){var n="change"===t&&this.ed||this.U[t].slice(0);try{b.u.xc();for(var i,o=0;i=n[o];++o)i.Ib||i.lc(e)}finally{b.u.end()}}},ob:function(){return this.sc},Dd:function(e){return this.ob()!==e},Gb:function(){++this.sc},ub:function(e){var t,n,i,o,r,s=this,a=b.O(s);s.gb||(s.gb=s.notifySubscribers,s.notifySubscribers=d);var c=e((function(){s.Ja=!1,a&&o===s&&(o=s.nc?s.nc():s());var e=n||r&&s.sb(i,o);r=n=t=!1,e&&s.gb(i=o)}));s.qc=function(e,n){n&&s.Ja||(r=!n),s.ed=s.U.change.slice(0),s.Ja=t=!0,o=e,c()},s.pc=function(e){t||(i=e,s.gb(e,"beforeChange"))},s.rc=function(){r=!0},s.gd=function(){s.sb(i,s.v(!0))&&(n=!0)}},Wa:function(e){return this.U[e]&&this.U[e].length},Bd:function(e){if(e)return this.U[e]&&this.U[e].length||0;var t=0;return b.a.P(this.U,(function(e,n){"dirty"!==e&&(t+=n.length)})),t},sb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},toString:function(){return"[object Object]"},extend:function(e){var t=this;return e&&b.a.P(e,(function(e,n){var i=b.Ta[e];"function"==typeof i&&(t=i(t,n)||t)})),t}};b.L(T,"init",T.qb),b.L(T,"subscribe",T.subscribe),b.L(T,"extend",T.extend),b.L(T,"getSubscriptionsCount",T.Bd),b.a.Ba&&b.a.setPrototypeOf(T,Function.prototype),b.T.fn=T,b.Qc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},b.b("subscribable",b.T),b.b("isSubscribable",b.Qc),b.S=b.u=function(){function e(e){i.push(n),n=e}function t(){n=i.pop()}var n,i=[],o=0;return{xc:e,end:t,cc:function(e){if(n){if(!b.Qc(e))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,e,e.fd||(e.fd=++o))}},G:function(n,i,o){try{return e(),n.apply(i,o||[])}finally{t()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),b.b("computedContext",b.S),b.b("computedContext.getDependenciesCount",b.S.qa),b.b("computedContext.getDependencies",b.S.Va),b.b("computedContext.isInitial",b.S.Ya),b.b("computedContext.registerDependency",b.S.cc),b.b("ignoreDependencies",b.Yd=b.u.G);var w=b.a.Da("_latestValue");b.ta=function(e){function t(){return 0<arguments.length?(t.sb(t[w],arguments[0])&&(t.ya(),t[w]=arguments[0],t.xa()),this):(b.u.cc(t),t[w])}return t[w]=e,b.a.Ba||b.a.extend(t,b.T.fn),b.T.fn.qb(t),b.a.Ab(t,E),b.options.deferUpdates&&b.Ta.deferred(t,!0),t};var E={equalityComparer:c,v:function(){return this[w]},xa:function(){this.notifySubscribers(this[w],"spectate"),this.notifySubscribers(this[w])},ya:function(){this.notifySubscribers(this[w],"beforeChange")}};b.a.Ba&&b.a.setPrototypeOf(E,b.T.fn);var S=b.ta.Ma="__ko_proto__";E[S]=b.ta,b.O=function(e){if((e="function"==typeof e&&e[S])&&e!==E[S]&&e!==b.o.fn[S])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!e},b.Za=function(e){return"function"==typeof e&&(e[S]===E[S]||e[S]===b.o.fn[S]&&e.Nc)},b.b("observable",b.ta),b.b("isObservable",b.O),b.b("isWriteableObservable",b.Za),b.b("isWritableObservable",b.Za),b.b("observable.fn",E),b.L(E,"peek",E.v),b.L(E,"valueHasMutated",E.xa),b.L(E,"valueWillMutate",E.ya),b.Ha=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=b.ta(e),b.a.Ab(e,b.Ha.fn),e.extend({trackArrayChanges:!0})},b.Ha.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||b.O(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];if(i(r)){if(0===n.length&&this.ya(),t[o]!==r)throw Error("Array modified during remove; cannot remove item");n.push(r),t.splice(o,1),o--}}return n.length&&this.xa(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),i}return t?this.remove((function(e){return 0<=b.a.A(t,e)})):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||b.O(e)?function(t){return t===e}:e;this.ya();for(var i=t.length-1;0<=i;i--){var o=t[i];n(o)&&(o._destroy=!0)}this.xa()},destroyAll:function(t){return t===e?this.destroy((function(){return!0})):t?this.destroy((function(e){return 0<=b.a.A(t,e)})):[]},indexOf:function(e){var t=this();return b.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.ya(),this.v()[n]=t,this.xa())},sorted:function(e){var t=this().slice(0);return e?t.sort(e):t.sort()},reversed:function(){return this().slice(0).reverse()}},b.a.Ba&&b.a.setPrototypeOf(b.Ha.fn,b.ta.fn),b.a.D("pop push reverse shift sort splice unshift".split(" "),(function(e){b.Ha.fn[e]=function(){var t=this.v();this.ya(),this.zc(t,e,arguments);var n=t[e].apply(t,arguments);return this.xa(),n===t?this:n}})),b.a.D(["slice"],(function(e){b.Ha.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}})),b.Pc=function(e){return b.O(e)&&"function"==typeof e.remove&&"function"==typeof e.push},b.b("observableArray",b.Ha),b.b("isObservableArray",b.Pc),b.Ta.trackArrayChanges=function(t,n){function i(){function e(){if(l){var e,n=[].concat(t.v()||[]);t.Wa("arrayChange")&&((!c||1<l)&&(c=b.a.Pb(s,n,t.Ob)),e=c),s=n,c=null,l=0,e&&e.length&&t.notifySubscribers(e,"arrayChange")}}a?e():(a=!0,r=t.subscribe((function(){++l}),null,"spectate"),s=[].concat(t.v()||[]),c=null,o=t.subscribe(e))}if(t.Ob={},n&&"object"==typeof n&&b.a.extend(t.Ob,n),t.Ob.sparse=!0,!t.zc){var o,r,s,a=!1,c=null,l=0,u=t.Qa,d=t.hb;t.Qa=function(e){u&&u.call(t,e),"arrayChange"===e&&i()},t.hb=function(n){d&&d.call(t,n),"arrayChange"!==n||t.Wa("arrayChange")||(o&&o.s(),r&&r.s(),r=o=null,a=!1,s=e)},t.zc=function(e,t,n){function i(e,t,n){return o[o.length]={status:e,value:t,index:n}}if(a&&!l){var o=[],r=e.length,s=n.length,u=0;switch(t){case"push":u=r;case"unshift":for(t=0;t<s;t++)i("added",n[t],u+t);break;case"pop":u=r-1;case"shift":r&&i("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>n[0]?r+n[0]:n[0]),r),r=1===s?r:Math.min(t+(n[1]||0),r),s=t+s-2,u=Math.max(r,s);for(var d=[],h=[],A=2;t<u;++t,++A)t<r&&h.push(i("deleted",e[t],t)),t<s&&d.push(i("added",n[A],t));b.a.Kc(h,d);break;default:return}c=o}}}};var C=b.a.Da("_state");b.o=b.$=function(t,n,i){function o(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(s.nb,arguments),this}return s.ra||b.u.cc(o),(s.ka||s.J&&o.Xa())&&o.ha(),s.X}if("object"==typeof t?i=t:(i=i||{},t&&(i.read=t)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var r=i.write,s={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:i.read,nb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Rb:null,I:{},V:0,Ic:null};return o[C]=s,o.Nc="function"==typeof r,b.a.Ba||b.a.extend(o,b.T.fn),b.T.fn.qb(o),b.a.Ab(o,x),i.pure?(s.wb=!0,s.J=!0,b.a.extend(o,I)):i.deferEvaluation&&b.a.extend(o,P),b.options.deferUpdates&&b.Ta.deferred(o,!0),s.l&&(s.jc=!0,s.l.nodeType||(s.l=null)),s.J||i.deferEvaluation||o.ha(),s.l&&o.ja()&&b.a.K.za(s.l,s.Rb=function(){o.s()}),o};var x={equalityComparer:c,qa:function(){return this[C].V},Va:function(){var e=[];return b.a.P(this[C].I,(function(t,n){e[n.Ka]=n.da})),e},Vb:function(e){if(!this[C].V)return!1;var t=this.Va();return-1!==b.a.A(t,e)||!!b.a.Lb(t,(function(t){return t.Vb&&t.Vb(e)}))},uc:function(e,t,n){if(this[C].wb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[C].I[e]=n,n.Ka=this[C].V++,n.La=t.ob()},Xa:function(){var e,t,n=this[C].I;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e],this.Ia&&t.da.Ja||t.da.Dd(t.La)))return!0},Jd:function(){this.Ia&&!this[C].rb&&this.Ia(!1)},ja:function(){var e=this[C];return e.ka||0<e.V},Rd:function(){this.Ja?this[C].ka&&(this[C].sa=!0):this.Hc()},$c:function(e){if(e.Hb){var t=e.subscribe(this.Jd,this,"dirty"),n=e.subscribe(this.Rd,this);return{da:e,s:function(){t.s(),n.s()}}}return e.subscribe(this.Hc,this)},Hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[C].Ic),this[C].Ic=b.a.setTimeout((function(){e.ha(!0)}),t)):e.Ia?e.Ia(!0):e.ha(!0)},ha:function(e){var t=this[C],n=t.Sa,i=!1;if(!t.rb&&!t.ra){if(t.l&&!b.a.Sb(t.l)||n&&n()){if(!t.jc)return void this.s()}else t.jc=!1;t.rb=!0;try{i=this.zd(e)}finally{t.rb=!1}return i}},zd:function(t){var n=this[C],i=!1,o=n.wb?e:!n.V;i={qd:this,mb:n.I,Qb:n.V},b.u.xc({pd:i,od:A,o:this,Ya:o}),n.I={},n.V=0;var r=this.yd(n,i);return n.V?i=this.sb(n.X,r):(this.s(),i=!0),i&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=r,this.notifySubscribers(n.X,"spectate"),!n.J&&t&&this.notifySubscribers(n.X),this.rc&&this.rc()),o&&this.notifySubscribers(n.X,"awake"),i},yd:function(e,t){try{var n=e.Wc;return e.nb?n.call(e.nb):n()}finally{b.u.end(),t.Qb&&!e.J&&b.a.P(t.mb,h),e.sa=e.ka=!1}},v:function(e){var t=this[C];return(t.ka&&(e||!t.V)||t.J&&this.Xa())&&this.ha(),t.X},ub:function(e){b.T.fn.ub.call(this,e),this.nc=function(){return this[C].J||(this[C].sa?this.ha():this[C].ka=!1),this[C].X},this.Ia=function(e){this.pc(this[C].X),this[C].ka=!0,e&&(this[C].sa=!0),this.qc(this,!e)}},s:function(){var t=this[C];!t.J&&t.I&&b.a.P(t.I,(function(e,t){t.s&&t.s()})),t.l&&t.Rb&&b.a.K.yb(t.l,t.Rb),t.I=e,t.V=0,t.ra=!0,t.sa=!1,t.ka=!1,t.J=!1,t.l=e,t.Sa=e,t.Wc=e,this.Nc||(t.nb=e)}},I={Qa:function(e){var t=this,n=t[C];if(!n.ra&&n.J&&"change"==e){if(n.J=!1,n.sa||t.Xa())n.I=null,n.V=0,t.ha()&&t.Gb();else{var i=[];b.a.P(n.I,(function(e,t){i[t.Ka]=e})),b.a.D(i,(function(e,i){var o=n.I[e],r=t.$c(o.da);r.Ka=i,r.La=o.La,n.I[e]=r})),t.Xa()&&t.ha()&&t.Gb()}n.ra||t.notifySubscribers(n.X,"awake")}},hb:function(t){var n=this[C];n.ra||"change"!=t||this.Wa("change")||(b.a.P(n.I,(function(e,t){t.s&&(n.I[e]={da:t.da,Ka:t.Ka,La:t.La},t.s())})),n.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var e=this[C];return e.J&&(e.sa||this.Xa())&&this.ha(),b.T.fn.ob.call(this)}},P={Qa:function(e){"change"!=e&&"beforeChange"!=e||this.v()}};b.a.Ba&&b.a.setPrototypeOf(x,b.T.fn);var D=b.ta.Ma;x[D]=b.o,b.Oc=function(e){return"function"==typeof e&&e[D]===x[D]},b.Fd=function(e){return b.Oc(e)&&e[C]&&e[C].wb},b.b("computed",b.o),b.b("dependentObservable",b.o),b.b("isComputed",b.Oc),b.b("isPureComputed",b.Fd),b.b("computed.fn",x),b.L(x,"peek",x.v),b.L(x,"dispose",x.s),b.L(x,"isActive",x.ja),b.L(x,"getDependenciesCount",x.qa),b.L(x,"getDependencies",x.Va),b.xb=function(e,t){return"function"==typeof e?b.o(e,t,{pure:!0}):((e=b.a.extend({},e)).pure=!0,b.o(e,t))},b.b("pureComputed",b.xb),function(){function t(i,o,r){if(r=r||new n,"object"!=typeof(i=o(i))||null===i||i===e||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var s=i instanceof Array?[]:{};return r.save(i,s),function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}(i,(function(n){var a=o(i[n]);switch(typeof a){case"boolean":case"number":case"string":case"function":s[n]=a;break;case"object":case"undefined":var c=r.get(a);s[n]=c!==e?c:t(a,o,r)}})),s}function n(){this.keys=[],this.values=[]}b.ad=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,(function(e){for(var t=0;b.O(e)&&10>t;t++)e=e();return e}))},b.toJSON=function(e,t,n){return e=b.ad(e),b.a.hc(e,t,n)},n.prototype={constructor:n,save:function(e,t){var n=b.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(t){return 0<=(t=b.a.A(this.keys,t))?this.values[t]:e}}}(),b.b("toJS",b.ad),b.b("toJSON",b.toJSON),b.Wd=function(e,t,n){function i(t){var i=b.xb(e,n).extend({ma:"always"}),o=i.subscribe((function(e){e&&(o.s(),t(e))}));return i.notifySubscribers(i.v()),o}return"function"!=typeof Promise||t?i(t.bind(n)):new Promise(i)},b.b("when",b.Wd),b.w={M:function(t){switch(b.a.R(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?b.a.g.get(t,b.c.options.$b):7>=b.a.W?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?b.w.M(t.options[t.selectedIndex]):e;default:return t.value}},cb:function(t,n,i){switch(b.a.R(t)){case"option":"string"==typeof n?(b.a.g.set(t,b.c.options.$b,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n):(b.a.g.set(t,b.c.options.$b,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=e);for(var o,r=-1,s=0,a=t.options.length;s<a;++s)if((o=b.w.M(t.options[s]))==n||""===o&&n===e){r=s;break}(i||0<=r||n===e&&1<t.size)&&(t.selectedIndex=r,6===b.a.W&&b.a.setTimeout((function(){t.selectedIndex=r}),0));break;default:null!==n&&n!==e||(n=""),t.value=n}}},b.b("selectExtensions",b.w),b.b("selectExtensions.readValue",b.w.M),b.b("selectExtensions.writeValue",b.w.cb),b.m=function(){function e(e){123===(e=b.a.Db(e)).charCodeAt(0)&&(e=e.slice(1,-1));var t,n=[],s=(e+="\n,").match(i),a=[],c=0;if(1<s.length){for(var l,u=0;l=s[u];++u){var d=l.charCodeAt(0);if(44===d){if(0>=c){n.push(t&&a.length?{key:t,value:a.join("")}:{unknown:t||a.join("")}),t=c=0,a=[];continue}}else if(58===d){if(!c&&!t&&1===a.length){t=a.pop();continue}}else{if(47===d&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===d&&u&&1<l.length?(d=s[u-1].match(o))&&!r[d[0]]&&(s=(e=e.substr(e.indexOf(l)+1)).match(i),u=-1,l="/"):40===d||123===d||91===d?++c:41===d||125===d||93===d?--c:t||a.length||34!==d&&39!==d||(l=l.slice(1,-1))}a.push(l)}if(0<c)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),o=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},s={};return{Ra:[],wa:s,ac:e,vb:function(i,o){function r(e,i){var o;if(!u){var d=b.getBindingHandler(e);if(d&&d.preprocess&&!(i=d.preprocess(i,e,r)))return;(d=s[e])&&(o=i,0<=b.a.A(t,o)?o=!1:(d=o.match(n),o=null!==d&&(d[1]?"Object("+d[1]+")"+d[2]:o)),d=o),d&&c.push("'"+("string"==typeof s[e]?s[e]:e)+"':function(_z){"+o+"=_z}")}l&&(i="function(){return "+i+" }"),a.push("'"+e+"':"+i)}var a=[],c=[],l=(o=o||{}).valueAccessors,u=o.bindingParams,d="string"==typeof i?e(i):i;return b.a.D(d,(function(e){r(e.key||e.unknown,e.value)})),c.length&&r("_ko_property_writers","{"+c.join(",")+" }"),a.join(",")},Id:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},eb:function(e,t,n,i,o){e&&b.O(e)?!b.Za(e)||o&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),b.b("expressionRewriting",b.m),b.b("expressionRewriting.bindingRewriteValidators",b.m.Ra),b.b("expressionRewriting.parseObjectLiteral",b.m.ac),b.b("expressionRewriting.preProcessBindings",b.m.vb),b.b("expressionRewriting._twoWayBindings",b.m.wa),b.b("jsonExpressionRewriting",b.m),b.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",b.m.vb),function(){function e(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function i(n,i){for(var o=n,r=1,s=[];o=o.nextSibling;){if(t(o)&&(b.a.g.set(o,l,!0),0==--r))return s;s.push(o),e(o)&&r++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function o(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var r=n&&"\x3c!--test--\x3e"===n.createComment("test").text,s=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,c={ul:!0,ol:!0},l="__ko_matchedEndComment__";b.h={ea:{},childNodes:function(t){return e(t)?i(t):t.childNodes},Ea:function(t){if(e(t))for(var n=0,i=(t=b.h.childNodes(t)).length;n<i;n++)b.removeNode(t[n]);else b.a.Tb(t)},va:function(t,n){if(e(t)){b.h.Ea(t);for(var i=t.nextSibling,o=0,r=n.length;o<r;o++)i.parentNode.insertBefore(n[o],i)}else b.a.va(t,n)},Vc:function(t,n){var i;e(t)?(i=t.nextSibling,t=t.parentNode):i=t.firstChild,i?n!==i&&t.insertBefore(n,i):t.appendChild(n)},Wb:function(t,n,i){i?(i=i.nextSibling,e(t)&&(t=t.parentNode),i?n!==i&&t.insertBefore(n,i):t.appendChild(n)):b.h.Vc(t,n)},firstChild:function(n){if(e(n))return!n.nextSibling||t(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&t(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(e(n)&&(n=o(n)),n.nextSibling&&t(n.nextSibling)){var i=n.nextSibling;if(t(i)&&!b.a.g.get(i,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:e,Vd:function(e){return(e=(r?e.text:e.nodeValue).match(s))?e[1]:null},Sc:function(n){if(c[b.a.R(n)]){var i=n.firstChild;if(i)do{if(1===i.nodeType){var r,s=null;if(r=i.firstChild)do{if(s)s.push(r);else if(e(r)){var a=o(r,!0);a?r=a:s=[r]}else t(r)&&(s=[r])}while(r=r.nextSibling);if(r=s)for(s=i.nextSibling,a=0;a<r.length;a++)s?n.insertBefore(r[a],s):n.appendChild(r[a])}}while(i=i.nextSibling)}}}}(),b.b("virtualElements",b.h),b.b("virtualElements.allowedBindings",b.h.ea),b.b("virtualElements.emptyNode",b.h.Ea),b.b("virtualElements.insertAfter",b.h.Wb),b.b("virtualElements.prepend",b.h.Vc),b.b("virtualElements.setDomNodeChildren",b.h.va),b.ga=function(){this.nd={}},b.a.extend(b.ga.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||b.j.getComponentNameForNode(e);case 8:return b.h.Cd(e);default:return!1}},getBindings:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e):null;return b.j.tc(n,e,t,!1)},getBindingAccessors:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return b.j.tc(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return b.h.Vd(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var o,r=this.nd,s=e+(i&&i.valueAccessors||"");if(!(o=r[s])){var a,c="with($context){with($data||{}){return{"+b.m.vb(e,i)+"}}}";a=new Function("$context","$element",c),o=r[s]=a}return o(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),b.ga.instance=new b.ga,b.b("bindingProvider",b.ga),function(){function i(e){var t=(e=b.a.g.get(e,v))&&e.N;t&&(e.N=null,t.Tc())}function r(e,t,n){this.node=e,this.yc=t,this.kb=[],this.H=!1,t.N||b.a.K.za(e,i),n&&n.N&&(n.N.kb.push(e),this.Kb=n)}function s(e){return function(){return e}}function a(e){return e()}function c(e){return b.a.Ga(b.u.G(e),(function(t,n){return function(){return e()[n]}}))}function l(e,t,n){return"function"==typeof e?c(e.bind(null,t,n)):b.a.Ga(e,s)}function u(e,t){return c(this.getBindings.bind(this,e,t))}function d(e,t){var n=b.h.firstChild(t);if(n){var i,o=b.ga.instance,r=o.preprocessNode;if(r){for(;i=n;)n=b.h.nextSibling(i),r.call(o,i);n=b.h.firstChild(t)}for(;i=n;)n=b.h.nextSibling(i),h(e,i)}b.i.ma(t,b.i.H)}function h(e,t){var n=e,i=1===t.nodeType;i&&b.h.Sc(t),(i||b.ga.instance.nodeHasBindings(t))&&(n=A(t,null,e).bindingContextForDescendants),n&&!g[b.a.R(t)]&&d(n,t)}function A(t,n,i){var o,r=b.a.g.Ub(t,v,{}),s=r.hd;if(!n){if(s)throw Error("You cannot apply bindings multiple times to the same element.");r.hd=!0}if(s||(r.context=i),r.Zb||(r.Zb={}),n&&"function"!=typeof n)o=n;else{var c=b.ga.instance,l=c.getBindingAccessors||u,d=b.$((function(){return(o=n?n(i,t):l.call(c,t,i))&&(i[p]&&i[p](),i[_]&&i[_]()),o}),null,{l:t});o&&d.ja()||(d=null)}var h,A=i;if(o){var f=function(){return b.a.Ga(d?d():o,a)},m=d?function(e){return function(){return a(d()[e])}}:function(e){return o[e]};f.get=function(e){return o[e]&&a(m(e))},f.has=function(e){return e in o},b.i.H in o&&b.i.subscribe(t,b.i.H,(function(){var e=(0,o[b.i.H])();if(e){var n=b.h.childNodes(t);n.length&&e(n,b.Ec(n[0]))}})),b.i.pa in o&&(A=b.i.Cb(t,i),b.i.subscribe(t,b.i.pa,(function(){var e=(0,o[b.i.pa])();e&&b.h.firstChild(t)&&e(t)}))),r=function(e){var t=[],n={},i=[];return b.a.P(e,(function o(r){if(!n[r]){var s=b.getBindingHandler(r);s&&(s.after&&(i.push(r),b.a.D(s.after,(function(t){if(e[t]){if(-1!==b.a.A(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));o(t)}})),i.length--),t.push({key:r,Mc:s})),n[r]=!0}})),t}(o),b.a.D(r,(function(n){var i=n.Mc.init,r=n.Mc.update,s=n.key;if(8===t.nodeType&&!b.h.ea[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof i&&b.u.G((function(){var n=i(t,m(s),f,A.$data,A);if(n&&n.controlsDescendantBindings){if(h!==e)throw Error("Multiple bindings ("+h+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=s}})),"function"==typeof r&&b.$((function(){r(t,m(s),f,A.$data,A)}),null,{l:t})}catch(e){throw e.message='Unable to process binding "'+s+": "+o[s]+'"\nMessage: '+e.message,e}}))}return{shouldBindDescendants:r=h===e,bindingContextForDescendants:r&&A}}function f(t,n){return t&&t instanceof b.fa?t:new b.fa(t,e,e,n)}var p=b.a.Da("_subscribable"),m=b.a.Da("_ancestorBindingInfo"),_=b.a.Da("_dataDependency");b.c={};var g={script:!0,textarea:!0,template:!0};b.getBindingHandler=function(e){return b.c[e]};var y={};b.fa=function(t,n,i,o,r){function s(){var e=d?u():u,t=b.a.f(e);return n?(b.a.extend(c,n),m in n&&(c[m]=n[m])):(c.$parents=[],c.$root=t,c.ko=b),c[p]=a,l?t=c.$data:(c.$rawData=e,c.$data=t),i&&(c[i]=t),o&&o(c,n,t),n&&n[p]&&!b.S.o().Vb(n[p])&&n[p](),h&&(c[_]=h),c.$data}var a,c=this,l=t===y,u=l?e:t,d="function"==typeof u&&!b.O(u),h=r&&r.dataDependency;r&&r.exportDependencies?s():((a=b.xb(s)).v(),a.ja()?a.equalityComparer=null:c[p]=e)},b.fa.prototype.createChildContext=function(e,t,n,i){if(!i&&t&&"object"==typeof t&&(t=(i=t).as,n=i.extend),t&&i&&i.noChildContext){var o="function"==typeof e&&!b.O(e);return new b.fa(y,this,null,(function(i){n&&n(i),i[t]=o?e():e}),i)}return new b.fa(e,this,t,(function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)}),i)},b.fa.prototype.extend=function(e,t){return new b.fa(y,this,null,(function(t){b.a.extend(t,"function"==typeof e?e(t):e)}),t)};var v=b.a.g.Z();r.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},r.prototype.sd=function(e){b.a.Pa(this.kb,e),!this.kb.length&&this.H&&this.Cc()},r.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,b.a.K.yb(this.node,i),b.i.ma(this.node,b.i.pa),this.Tc())},b.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(e,t,n,i,o){var r=b.a.g.Ub(e,v,{});return r.Fa||(r.Fa=new b.T),o&&o.notifyImmediately&&r.Zb[t]&&b.u.G(n,i,[e]),r.Fa.subscribe(n,i,t)},ma:function(t,n){var i=b.a.g.get(t,v);if(i&&(i.Zb[n]=!0,i.Fa&&i.Fa.notifySubscribers(t,n),n==b.i.H))if(i.N)i.N.Cc();else if(i.N===e&&i.Fa&&i.Fa.Wa(b.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(e,t){var n=b.a.g.Ub(e,v,{});return n.N||(n.N=new r(e,n,t[m])),t[m]==n?t:t.extend((function(e){e[m]=n}))}},b.Td=function(e){return(e=b.a.g.get(e,v))&&e.context},b.ib=function(e,t,n){return 1===e.nodeType&&b.h.Sc(e),A(e,t,f(n))},b.ld=function(e,t,n){return n=f(n),b.ib(e,l(t,n,e),n)},b.Oa=function(e,t){1!==t.nodeType&&8!==t.nodeType||d(f(e),t)},b.vc=function(e,i,r){if(!o&&t.jQuery&&(o=t.jQuery),2>arguments.length){if(!(i=n.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!i||1!==i.nodeType&&8!==i.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");h(f(e,r),i)},b.Dc=function(t){return!t||1!==t.nodeType&&8!==t.nodeType?e:b.Td(t)},b.Ec=function(t){return(t=b.Dc(t))?t.$data:e},b.b("bindingHandlers",b.c),b.b("bindingEvent",b.i),b.b("bindingEvent.subscribe",b.i.subscribe),b.b("bindingEvent.startPossiblyAsyncContentBinding",b.i.Cb),b.b("applyBindings",b.vc),b.b("applyBindingsToDescendants",b.Oa),b.b("applyBindingAccessorsToNode",b.ib),b.b("applyBindingsToNode",b.ld),b.b("contextFor",b.Dc),b.b("dataFor",b.Ec)}(),function(e){function t(t,i){var s,a=Object.prototype.hasOwnProperty.call(o,t)?o[t]:e;a?a.subscribe(i):((a=o[t]=new b.T).subscribe(i),n(t,(function(e,n){var i=!(!n||!n.synchronous);r[t]={definition:e,Gd:i},delete o[t],s||i?a.notifySubscribers(e):b.na.zb((function(){a.notifySubscribers(e)}))})),s=!0)}function n(e,t){i("getConfig",[e],(function(n){n?i("loadComponent",[e,n],(function(e){t(e,n)})):t(null,null)}))}function i(t,n,o,r){r||(r=b.j.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var c=!1;if(a.apply(s,n.concat((function(e){c?o(null):null!==e?o(e):i(t,n,o,r)})))!==e&&(c=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,o,r)}else o(null)}var o={},r={};b.j={get:function(n,i){var o=Object.prototype.hasOwnProperty.call(r,n)?r[n]:e;o?o.Gd?b.u.G((function(){i(o.definition)})):b.na.zb((function(){i(o.definition)})):t(n,i)},Bc:function(e){delete r[e]},oc:i},b.j.loaders=[],b.b("components",b.j),b.b("components.get",b.j.get),b.b("components.clearCachedDefinition",b.j.Bc)}(),function(){function e(e,t,n,i){function o(){0==--a&&i(r)}var r={},a=2,c=n.template;n=n.viewModel,c?s(t,c,(function(t){b.j.oc("loadTemplate",[e,t],(function(e){r.template=e,o()}))})):o(),n?s(t,n,(function(t){b.j.oc("loadViewModel",[e,t],(function(e){r[u]=e,o()}))})):o()}function i(e,t,n){if("function"==typeof t)n((function(e){return new t(e)}));else if("function"==typeof t[u])n(t[u]);else if("instance"in t){var o=t.instance;n((function(){return o}))}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function o(e){switch(b.a.R(e)){case"script":return b.a.ua(e.text);case"textarea":return b.a.ua(e.value);case"template":if(r(e.content))return b.a.Ca(e.content.childNodes)}return b.a.Ca(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function s(e,n,i){"string"==typeof n.require?a||t.require?(a||t.require)([n.require],(function(e){e&&"object"==typeof e&&e.Xd&&e.default&&(e=e.default),i(e)})):e("Uses require, but no AMD loader is present"):i(n)}function c(e){return function(t){throw Error("Component '"+e+"': "+t)}}var l={};b.j.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(b.j.tb(e))throw Error("Component "+e+" is already registered");l[e]=t},b.j.tb=function(e){return Object.prototype.hasOwnProperty.call(l,e)},b.j.unregister=function(e){delete l[e],b.j.Bc(e)},b.j.Fc={getConfig:function(e,t){t(b.j.tb(e)?l[e]:null)},loadComponent:function(t,n,i){var o=c(t);s(o,n,(function(n){e(t,o,n,i)}))},loadTemplate:function(e,i,s){if(e=c(e),"string"==typeof i)s(b.a.ua(i));else if(i instanceof Array)s(i);else if(r(i))s(b.a.la(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)s(o(i));else if("string"==typeof i){var a=n.getElementById(i);a?s(o(a)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(c(e),t,n)}};var u="createViewModel";b.b("components.register",b.j.register),b.b("components.isRegistered",b.j.tb),b.b("components.unregister",b.j.unregister),b.b("components.defaultLoader",b.j.Fc),b.j.loaders.push(b.j.Fc),b.j.dd=l}(),function(){function e(e,n){if(i=e.getAttribute("params")){var i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),o=(i=b.a.Ga(i,(function(t){return b.o(t,null,{l:e})})),b.a.Ga(i,(function(t){var n=t.v();return t.ja()?b.o({read:function(){return b.a.f(t())},write:b.Za(n)&&function(e){t()(e)},l:e}):n})));return Object.prototype.hasOwnProperty.call(o,"$raw")||(o.$raw=i),o}return{$raw:{}}}b.j.getComponentNameForNode=function(e){var t=b.a.R(e);if(b.j.tb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=b.a.W&&e.tagName===t))return t},b.j.tc=function(t,n,i,o){if(1===n.nodeType){var r=b.j.getComponentNameForNode(n);if(r){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(n,i)};t.component=o?function(){return s}:s}}return t};var t=new b.ga;9>b.a.W&&(b.j.register=function(e){return function(t){return e.apply(this,arguments)}}(b.j.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),i=b.j.dd;for(t in i);return n}}(n.createDocumentFragment))}(),function(){var e=0;b.c.component={init:function(t,n,i,o,r){function s(){var e=a&&a.dispose;"function"==typeof e&&e.call(a),l&&l.s(),c=a=l=null}var a,c,l,u=b.a.la(b.h.childNodes(t));return b.h.Ea(t),b.a.K.za(t,s),b.o((function(){var i,o,d=b.a.f(n());if("string"==typeof d?i=d:(i=b.a.f(d.name),o=b.a.f(d.params)),!i)throw Error("No component name specified");var h=b.i.Cb(t,r),A=c=++e;b.j.get(i,(function(e){if(c===A){if(s(),!e)throw Error("Unknown component '"+i+"'");!function(e,t,n){if(!(t=t.template))throw Error("Component '"+e+"' has no template");e=b.a.Ca(t),b.h.va(n,e)}(i,e,t);var n=function(e,t,n){var i=e.createViewModel;return i?i.call(e,t,n):t}(e,o,{element:t,templateNodes:u});e=h.createChildContext(n,{extend:function(e){e.$component=n,e.$componentTemplateNodes=u}}),n&&n.koDescendantsComplete&&(l=b.i.subscribe(t,b.i.pa,n.koDescendantsComplete,n)),a=n,b.Oa(e,t)}}))}),null,{l:t}),{controlsDescendantBindings:!0}}},b.h.ea.component=!0}();var O={class:"className",for:"htmlFor"};b.c.attr={update:function(t,n){var i=b.a.f(n())||{};b.a.P(i,(function(n,i){i=b.a.f(i);var o=n.indexOf(":"),r=(o="lookupNamespaceURI"in t&&0<o&&t.lookupNamespaceURI(n.substr(0,o)),!1===i||null===i||i===e);r?o?t.removeAttributeNS(o,n):t.removeAttribute(n):i=i.toString(),8>=b.a.W&&n in O?(n=O[n],r?t.removeAttribute(n):t[n]=i):r||(o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)),"name"===n&&b.a.Yc(t,r?"":i)}))}},b.c.checked={after:["value","attr"],init:function(t,n,i){function o(){var o=t.checked,c=r();if(!b.S.Ya()&&(o||!a&&!b.S.qa())){var d=b.u.G(n);if(l){var A=u?d.v():d,f=h;h=c,f!==c?o&&(b.a.Na(A,c,!0),b.a.Na(A,f,!1)):b.a.Na(A,c,o),u&&b.Za(d)&&d(A)}else s&&(c===e?c=o:o||(c=e)),b.m.eb(d,i,"checked",c,!0)}}var r=b.xb((function(){return i.has("checkedValue")?b.a.f(i.get("checkedValue")):d?i.has("value")?b.a.f(i.get("value")):t.value:void 0})),s="checkbox"==t.type,a="radio"==t.type;if(s||a){var c=n(),l=s&&b.a.f(c)instanceof Array,u=!(l&&c.push&&c.splice),d=a||l,h=l?r():e;a&&!t.name&&b.c.uniqueName.init(t,(function(){return!0})),b.o(o,null,{l:t}),b.a.B(t,"click",o),b.o((function(){var i=b.a.f(n()),o=r();l?(t.checked=0<=b.a.A(i,o),h=o):t.checked=s&&o===e?!!i:r()===i}),null,{l:t}),c=e}}},b.m.wa.checked=!0,b.c.checkedValue={update:function(e,t){e.value=b.a.f(t())}},b.c.class={update:function(e,t){var n=b.a.Db(b.a.f(t()));b.a.Eb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,b.a.Eb(e,n,!0)}},b.c.css={update:function(e,t){var n=b.a.f(t());null!==n&&"object"==typeof n?b.a.P(n,(function(t,n){n=b.a.f(n),b.a.Eb(e,t,n)})):b.c.class.update(e,t)}},b.c.enable={update:function(e,t){var n=b.a.f(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},b.c.disable={update:function(e,t){b.c.enable.update(e,(function(){return!b.a.f(t())}))}},b.c.event={init:function(e,t,n,i,o){var r=t()||{};b.a.P(r,(function(r){"string"==typeof r&&b.a.B(e,r,(function(e){var s,a=t()[r];if(a){try{var c=b.a.la(arguments);i=o.$data,c.unshift(i),s=a.apply(i,c)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}}))}))}},b.c.foreach={Rc:function(e){return function(){var t=e(),n=b.a.bc(t);return n&&"number"!=typeof n.length?(b.a.f(t),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:b.ba.Ma}):{foreach:t,templateEngine:b.ba.Ma}}},init:function(e,t){return b.c.template.init(e,b.c.foreach.Rc(t))},update:function(e,t,n,i,o){return b.c.template.update(e,b.c.foreach.Rc(t),n,i,o)}},b.m.Ra.foreach=!1,b.h.ea.foreach=!0,b.c.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(e){r=o.body}i=r===e}o=t(),b.m.eb(o,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var o=i.bind(null,!0),r=i.bind(null,!1);b.a.B(e,"focus",o),b.a.B(e,"focusin",o),b.a.B(e,"blur",r),b.a.B(e,"focusout",r),e.__ko_hasfocusLastValue=!1},update:function(e,t){var n=!!b.a.f(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),b.u.G(b.a.Fb,null,[e,n?"focusin":"focusout"]))}},b.m.wa.hasfocus=!0,b.c.hasFocus=b.c.hasfocus,b.m.wa.hasFocus="hasfocus",b.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){b.a.fc(e,t())}},function(){function e(e,t,n){b.c[e]={init:function(e,i,o,r,s){var a,c,l,u,d,h={};if(t){r=o.get("as");var A=o.get("noChildContext");h={as:r,noChildContext:A,exportDependencies:d=!(r&&A)}}return u=(l="render"==o.get("completeOn"))||o.has(b.i.pa),b.o((function(){var o,r=b.a.f(i()),A=!n!=!r,f=!c;(d||A!==a)&&(u&&(s=b.i.Cb(e,s)),A&&(t&&!d||(h.dataDependency=b.S.o()),o=t?s.createChildContext("function"==typeof r?r:i,h):b.S.qa()?s.extend(null,h):s),f&&b.S.qa()&&(c=b.a.Ca(b.h.childNodes(e),!0)),A?(f||b.h.va(e,b.a.Ca(c)),b.Oa(o,e)):(b.h.Ea(e),l||b.i.ma(e,b.i.H)),a=A)}),null,{l:e}),{controlsDescendantBindings:!0}}},b.m.Ra[e]=!1,b.h.ea[e]=!0}e("if"),e("ifnot",!1,!0),e("with",!0)}(),b.c.let={init:function(e,t,n,i,o){return t=o.extend(t),b.Oa(t,e),{controlsDescendantBindings:!0}}},b.h.ea.let=!0;var L={};b.c.options={init:function(e){if("select"!==b.a.R(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function o(){return b.a.jb(t.options,(function(e){return e.selected}))}function r(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function s(e,n){if(f&&u)b.i.ma(t,b.i.H);else if(A.length){var i=0<=b.a.A(A,b.w.M(n[0]));b.a.Zc(n[0],i),f&&!i&&b.u.G(b.a.Fb,null,[t,"change"])}}var a=t.multiple,c=0!=t.length&&a?t.scrollTop:null,l=b.a.f(n()),u=i.get("valueAllowUnset")&&i.has("value"),d=i.get("optionsIncludeDestroyed");n={};var h,A=[];u||(a?A=b.a.Mb(o(),b.w.M):0<=t.selectedIndex&&A.push(b.w.M(t.options[t.selectedIndex]))),l&&(void 0===l.length&&(l=[l]),h=b.a.jb(l,(function(t){return d||t===e||null===t||!b.a.f(t._destroy)})),i.has("optionsCaption")&&null!==(l=b.a.f(i.get("optionsCaption")))&&l!==e&&h.unshift(L));var f=!1;n.beforeRemove=function(e){t.removeChild(e)},l=s,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(t,n){s(0,n),b.u.G(i.get("optionsAfterRender"),null,[n[0],t!==L?t:e])}),b.a.ec(t,h,(function(n,o,s){return s.length&&(A=!u&&s[0].selected?[b.w.M(s[0])]:[],f=!0),o=t.ownerDocument.createElement("option"),n===L?(b.a.Bb(o,i.get("optionsCaption")),b.w.cb(o,e)):(s=r(n,i.get("optionsValue"),n),b.w.cb(o,b.a.f(s)),n=r(n,i.get("optionsText"),s),b.a.Bb(o,n)),[o]}),n,l),u||(a?A.length&&o().length<A.length:A.length&&0<=t.selectedIndex?b.w.M(t.options[t.selectedIndex])!==A[0]:A.length||0<=t.selectedIndex)&&b.u.G(b.a.Fb,null,[t,"change"]),(u||b.S.Ya())&&b.i.ma(t,b.i.H),b.a.wd(t),c&&20<Math.abs(c-t.scrollTop)&&(t.scrollTop=c)}},b.c.options.$b=b.a.g.Z(),b.c.selectedOptions={init:function(e,t,n){function i(){var i=t(),o=[];b.a.D(e.getElementsByTagName("option"),(function(e){e.selected&&o.push(b.w.M(e))})),b.m.eb(i,n,"selectedOptions",o)}function o(){var n=b.a.f(t()),i=e.scrollTop;n&&"number"==typeof n.length&&b.a.D(e.getElementsByTagName("option"),(function(e){var t=0<=b.a.A(n,b.w.M(e));e.selected!=t&&b.a.Zc(e,t)})),e.scrollTop=i}if("select"!=b.a.R(e))throw Error("selectedOptions binding applies only to SELECT elements");var r;b.i.subscribe(e,b.i.H,(function(){r?i():(b.a.B(e,"change",i),r=b.o(o,null,{l:e}))}),null,{notifyImmediately:!0})},update:function(){}},b.m.wa.selectedOptions=!0,b.c.style={update:function(t,n){var i=b.a.f(n()||{});b.a.P(i,(function(n,i){if(null!==(i=b.a.f(i))&&i!==e&&!1!==i||(i=""),o)o(t).css(n,i);else if(/^--/.test(n))t.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}));var r=t.style[n];t.style[n]=i,i===r||t.style[n]!=r||isNaN(i)||(t.style[n]=i+"px")}}))}},b.c.submit={init:function(e,t,n,i,o){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");b.a.B(e,"submit",(function(n){var i,r=t();try{i=r.call(o.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}}))}},b.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){b.a.Bb(e,t())}},b.h.ea.text=!0,function(){if(t&&t.navigator){var n,i,o,r,s,a=function(e){if(e)return parseFloat(e[1])},c=t.navigator.userAgent;(n=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(s=a(c.match(/Edge\/([^ ]+)$/)))||a(c.match(/Chrome\/([^ ]+)/))||(i=a(c.match(/Version\/([^ ]+) Safari/)))||(o=a(c.match(/Firefox\/([^ ]+)/)))||(r=b.a.W||a(c.match(/MSIE ([^ ]+)/)))||(r=a(c.match(/rv:([^ )]+)/)))}if(8<=r&&10>r)var l=b.a.g.Z(),u=b.a.g.Z(),d=function(e){var t=this.activeElement;(t=t&&b.a.g.get(t,u))&&t(e)},h=function(e,t){var n=e.ownerDocument;b.a.g.get(n,l)||(b.a.g.set(n,l,!0),b.a.B(n,"selectionchange",d)),b.a.g.set(e,u,t)};b.c.textInput={init:function(t,a,c){function l(e,n){b.a.B(t,e,n)}function u(){A||(f=t.value,A=b.a.setTimeout(d,4))}function d(){clearTimeout(A),f=A=e;var n=t.value;p!==n&&(p=n,b.m.eb(a(),c,"textInput",n))}var A,f,p=t.value,m=9==b.a.W?u:d,_=!1;r&&l("keypress",d),11>r&&l("propertychange",(function(e){_||"value"!==e.propertyName||m(e)})),8==r&&(l("keyup",d),l("keydown",d)),h&&(h(t,m),l("dragend",u)),(!r||9<=r)&&l("input",m),5>i&&"textarea"===b.a.R(t)?(l("keydown",u),l("paste",u),l("cut",u)):11>n?l("keydown",u):4>o?(l("DOMAutoComplete",d),l("dragdrop",d),l("drop",d)):s&&"number"===t.type&&l("keydown",u),l("change",d),l("blur",d),b.o((function n(){var i=b.a.f(a());null!==i&&i!==e||(i=""),f!==e&&i===f?b.a.setTimeout(n,4):t.value!==i&&(_=!0,t.value=i,_=!1,p=t.value)}),null,{l:t})}},b.m.wa.textInput=!0,b.c.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),b.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++b.c.uniqueName.rd;b.a.Yc(e,n)}}},b.c.uniqueName.rd=0,b.c.using={init:function(e,t,n,i,o){var r;return n.has("as")&&(r={as:n.get("as"),noChildContext:n.get("noChildContext")}),t=o.createChildContext(t,r),b.Oa(t,e),{controlsDescendantBindings:!0}}},b.h.ea.using=!0,b.c.value={init:function(t,n,i){var o=b.a.R(t),r="input"==o;if(!r||"checkbox"!=t.type&&"radio"!=t.type){var s=[],a=i.get("valueUpdate"),c=!1,l=null;a&&(s="string"==typeof a?[a]:b.a.wc(a),b.a.Pa(s,"change"));var u,d,h=function(){l=null,c=!1;var e=n(),o=b.w.M(t);b.m.eb(e,i,"value",o)};!b.a.W||!r||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=b.a.A(s,"propertychange")||(b.a.B(t,"propertychange",(function(){c=!0})),b.a.B(t,"focus",(function(){c=!1})),b.a.B(t,"blur",(function(){c&&h()}))),b.a.D(s,(function(e){var n=h;b.a.Ud(e,"after")&&(n=function(){l=b.w.M(t),b.a.setTimeout(h,0)},e=e.substring(5)),b.a.B(t,e,n)})),u=r&&"file"==t.type?function(){var i=b.a.f(n());null===i||i===e||""===i?t.value="":b.u.G(h)}:function(){var r=b.a.f(n()),s=b.w.M(t);null!==l&&r===l?b.a.setTimeout(u,0):r===s&&s!==e||("select"===o?(s=i.get("valueAllowUnset"),b.w.cb(t,r,s),s||r===b.w.M(t)||b.u.G(h)):b.w.cb(t,r))},"select"===o?b.i.subscribe(t,b.i.H,(function(){d?i.get("valueAllowUnset")?u():h():(b.a.B(t,"change",h),d=b.o(u,null,{l:t}))}),null,{notifyImmediately:!0}):(b.a.B(t,"change",h),b.o(u,null,{l:t}))}else b.ib(t,{checkedValue:n})},update:function(){}},b.m.wa.value=!0,b.c.visible={update:function(e,t){var n=b.a.f(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},b.c.hidden={update:function(e,t){b.c.visible.update(e,(function(){return!b.a.f(t())}))}},function(e){b.c[e]={init:function(t,n,i,o,r){return b.c.event.init.call(this,t,(function(){var t={};return t[e]=n(),t}),i,o,r)}}}("click"),b.ca=function(){},b.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},b.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},b.ca.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var i=(t=t||n).getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new b.C.F(i)}if(1==e.nodeType||8==e.nodeType)return new b.C.ia(e);throw Error("Unknown template type: "+e)},b.ca.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n,i)},b.ca.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},b.ca.prototype.rewriteTemplate=function(e,t,n){t=t((e=this.makeTemplateSource(e,n)).text()),e.text(t),e.data("isRewritten",!0)},b.b("templateEngine",b.ca),b.kc=function(){function e(e,t,n,i){e=b.m.ac(e);for(var o=b.m.Ra,r=0;r<e.length;r++){var s=e[r].key;if(Object.prototype.hasOwnProperty.call(o,s)){var a=o[s];if("function"==typeof a){if(s=a(e[r].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+b.m.vb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,(function(e){return b.kc.Ld(e,t)}),n)},Ld:function(i,o){return i.replace(t,(function(t,n,i,r,s){return e(s,n,i,o)})).replace(n,(function(t,n){return e(n,"\x3c!-- ko --\x3e","#comment",o)}))},md:function(e,t){return b.aa.Xb((function(n,i){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&b.ib(o,e,i)}))}}}(),b.b("__tr_ambtns",b.kc.md),function(){b.C={},b.C.F=function(e){if(this.F=e){var t=b.a.R(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},b.C.F.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[e];var t=arguments[0];"innerHTML"===e?b.a.fc(this.F,t):this.F[e]=t};var t=b.a.g.Z()+"_";b.C.F.prototype.data=function(e){if(1===arguments.length)return b.a.g.get(this.F,t+e);b.a.g.set(this.F,t+e,arguments[1])};var n=b.a.g.Z();b.C.F.prototype.nodes=function(){var t=this.F;if(0==arguments.length){var i=b.a.g.get(t,n)||{},o=i.lb||(3===this.ab?t.content:4===this.ab?t:e);if(!o||i.jd){var r=this.text();r&&r!==i.bb&&(o=b.a.Md(r,t.ownerDocument),b.a.g.set(t,n,{lb:o,bb:r,jd:!0}))}return o}i=arguments[0],this.ab!==e&&this.text(""),b.a.g.set(t,n,{lb:i})},b.C.ia=function(e){this.F=e},b.C.ia.prototype=new b.C.F,b.C.ia.prototype.constructor=b.C.ia,b.C.ia.prototype.text=function(){if(0==arguments.length){var t=b.a.g.get(this.F,n)||{};return t.bb===e&&t.lb&&(t.bb=t.lb.innerHTML),t.bb}b.a.g.set(this.F,n,{bb:arguments[0]})},b.b("templateSources",b.C),b.b("templateSources.domElement",b.C.F),b.b("templateSources.anonymousTemplate",b.C.ia)}(),function(){function t(e,t,n){var i;for(t=b.h.nextSibling(t);e&&(i=e)!==t;)n(i,e=b.h.nextSibling(i))}function n(e,n){if(e.length){var i=e[0],o=e[e.length-1],r=i.parentNode,s=b.ga.instance,a=s.preprocessNode;if(a){if(t(i,o,(function(e,t){var n=e.previousSibling,r=a.call(s,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))})),e.length=0,!i)return;i===o?e.push(i):(e.push(i,o),b.a.Ua(e,r))}t(i,o,(function(e){1!==e.nodeType&&8!==e.nodeType||b.vc(n,e)})),t(i,o,(function(e){1!==e.nodeType&&8!==e.nodeType||b.aa.cd(e,[n])})),b.a.Ua(e,r)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function o(e,t,o,r,a){a=a||{};var c=(e&&i(e)||o||{}).ownerDocument,l=a.templateEngine||s;if(b.kc.xd(o,l,c),"number"!=typeof(o=l.renderTemplate(o,r,a,c)).length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(c=!1,t){case"replaceChildren":b.h.va(e,o),c=!0;break;case"replaceNode":b.a.Xc(e,o),c=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return c&&(n(o,r),a.afterRender&&b.u.G(a.afterRender,null,[o,r[a.as||"$data"]]),"replaceChildren"==t&&b.i.ma(e,b.i.H)),o}function r(e,t,n){return b.O(e)?e():"function"==typeof e?e(t,n):e}var s;b.gc=function(t){if(t!=e&&!(t instanceof b.ca))throw Error("templateEngine must inherit from ko.templateEngine");s=t},b.dc=function(t,n,a,c,l){if(((a=a||{}).templateEngine||s)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",c){var u=i(c);return b.$((function(){var e=n&&n instanceof b.fa?n:new b.fa(n,null,null,null,{exportDependencies:!0}),s=r(t,e.$data,e);e=o(c,l,s,e,a),"replaceNode"==l&&(u=i(c=e))}),null,{Sa:function(){return!u||!b.a.Sb(u)},l:u&&"replaceNode"==l?u.parentNode:u})}return b.aa.Xb((function(e){b.dc(t,n,a,e,"replaceNode")}))},b.Qd=function(t,i,s,a,c){function l(e,t){b.u.G(b.a.ec,null,[a,e,d,s,u,t]),b.i.ma(a,b.i.H)}function u(e,t){n(t,h),s.afterRender&&s.afterRender(t,e),h=null}function d(e,n){h=c.createChildContext(e,{as:A,noChildContext:s.noChildContext,extend:function(e){e.$index=n,A&&(e[A+"Index"]=n)}});var i=r(t,e,h);return o(a,"ignoreTargetNode",i,h,s)}var h,A=s.as,f=!1===s.includeDestroyed||b.options.foreachHidesDestroyed&&!s.includeDestroyed;if(f||s.beforeRemove||!b.Pc(i))return b.$((function(){var t=b.a.f(i)||[];void 0===t.length&&(t=[t]),f&&(t=b.a.jb(t,(function(t){return t===e||null===t||!b.a.f(t._destroy)}))),l(t)}),null,{l:a});l(i.v());var p=i.subscribe((function(e){l(i(),e)}),null,"arrayChange");return p.l(a),p};var a=b.a.g.Z(),c=b.a.g.Z();b.c.template={init:function(e,t){var n=b.a.f(t());if("string"==typeof n||"name"in n)b.h.Ea(e);else if("nodes"in n){if(n=n.nodes||[],b.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&b.a.g.get(i,c)||(i=b.a.Yb(n),b.a.g.set(i,c,!0)),new b.C.ia(e).nodes(i)}else{if(!(0<(n=b.h.childNodes(e)).length))throw Error("Anonymous template defined, but no template content was provided");i=b.a.Yb(n),new b.C.ia(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,n,i,o,r){var s=n();i=!0,o=null,"string"==typeof(n=b.a.f(s))?n={}:(s="name"in n?n.name:t,"if"in n&&(i=b.a.f(n.if)),i&&"ifnot"in n&&(i=!b.a.f(n.ifnot)),i&&!s&&(i=!1)),"foreach"in n?o=b.Qd(s,i&&n.foreach||[],n,t,r):i?(i=r,"data"in n&&(i=r.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),o=b.dc(s,i,n,t)):b.h.Ea(t),r=o,(n=b.a.g.get(t,a))&&"function"==typeof n.s&&n.s(),b.a.g.set(t,a,!r||r.ja&&!r.ja()?e:r)}},b.m.Ra.template=function(e){return 1==(e=b.m.ac(e)).length&&e[0].unknown||b.m.Id(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},b.h.ea.template=!0}(),b.b("setTemplateEngine",b.gc),b.b("renderTemplate",b.dc),b.a.Kc=function(e,t,n){var i,o,r,s,a;if(e.length&&t.length)for(i=o=0;(!n||i<n)&&(s=e[o]);++o){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),i=r=0;break}i+=r}},b.a.Pb=function(){function e(e,t,n,i,o){var r,s,a,c,l,u=Math.min,d=Math.max,h=[],A=e.length,f=t.length,p=f-A||1,m=A+f+1;for(r=0;r<=A;r++)for(c=a,h.push(a=[]),l=u(f,r+p),s=d(0,r-1);s<=l;s++)a[s]=s?r?e[r-1]===t[s-1]?c[s-1]:u(c[s]||m,a[s-1]||m)+1:s+1:r+1;for(u=[],d=[],p=[],r=A,s=f;r||s;)f=h[r][s]-1,s&&f===h[r][s-1]?d.push(u[u.length]={status:n,value:t[--s],index:s}):r&&f===h[r-1][s]?p.push(u[u.length]={status:i,value:e[--r],index:r}):(--s,--r,o.sparse||u.push({status:"retained",value:t[s]}));return b.a.Kc(p,d,!o.dontLimitMoves&&10*A),u.reverse()}return function(t,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(t=t||[]).length<n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),b.b("utils.compareArrays",b.a.Pb),function(){function t(t,n,i,o,r){var s=[],a=b.$((function(){var e=n(i,r,b.a.Ua(s,t))||[];0<s.length&&(b.a.Xc(s,e),o&&b.u.G(o,null,[i,e,r])),s.length=0,b.a.Nb(s,e)}),null,{l:t,Sa:function(){return!b.a.kd(s)}});return{Y:s,$:a.ja()?a:e}}var n=b.a.g.Z(),i=b.a.g.Z();b.a.ec=function(o,r,s,a,c,l){function u(e){A={Aa:e,pb:b.ta(T++)},y.push(A),g||x.push(A)}function d(e){A=_[e],T!==A.pb.v()&&C.push(A),A.pb(T++),b.a.Ua(A.Y,o),y.push(A)}function h(e,t){if(e)for(var n=0,i=t.length;n<i;n++)b.a.D(t[n].Y,(function(i){e(i,n,t[n].Aa)}))}void 0===(r=r||[]).length&&(r=[r]),a=a||{};var A,f,p,m,_=b.a.g.get(o,n),g=!_,y=[],v=0,T=0,w=[],E=[],S=[],C=[],x=[],I=0;if(g)b.a.D(r,u);else{if(!l||_&&_._countWaitingForRemove){var P=b.a.Mb(_,(function(e){return e.Aa}));l=b.a.Pb(P,r,{dontLimitMoves:a.dontLimitMoves,sparse:!0})}var D,O,L;for(P=0;D=l[P];P++)switch(O=D.moved,L=D.index,D.status){case"deleted":for(;v<L;)d(v++);O===e&&((A=_[v]).$&&(A.$.s(),A.$=e),b.a.Ua(A.Y,o).length&&(a.beforeRemove&&(y.push(A),I++,A.Aa===i?A=null:S.push(A)),A&&w.push.apply(w,A.Y))),v++;break;case"added":for(;T<L;)d(v++);O!==e?(E.push(y.length),d(O)):u(D.value)}for(;T<r.length;)d(v++);y._countWaitingForRemove=I}b.a.g.set(o,n,y),h(a.beforeMove,C),b.a.D(w,a.beforeRemove?b.oa:b.removeNode);try{m=o.ownerDocument.activeElement}catch(e){}if(E.length)for(;(P=E.shift())!=e;){for(A=y[P],f=e;P;)if((p=y[--P].Y)&&p.length){f=p[p.length-1];break}for(r=0;v=A.Y[r];f=v,r++)b.h.Wb(o,v,f)}for(P=0;A=y[P];P++){for(A.Y||b.a.extend(A,t(o,s,A.Aa,c,A.pb)),r=0;v=A.Y[r];f=v,r++)b.h.Wb(o,v,f);!A.Ed&&c&&(c(A.Aa,A.Y,A.pb),A.Ed=!0,f=A.Y[A.Y.length-1])}for(m&&o.ownerDocument.activeElement!=m&&m.focus(),h(a.beforeRemove,S),P=0;P<S.length;++P)S[P].Aa=i;h(a.afterMove,C),h(a.afterAdd,x)}}(),b.b("utils.setDomNodeChildrenFromArrayMapping",b.a.ec),b.ba=function(){this.allowTemplateRewriting=!1},b.ba.prototype=new b.ca,b.ba.prototype.constructor=b.ba,b.ba.prototype.renderTemplateSource=function(e,t,n,i){return(t=9>b.a.W||!e.nodes?null:e.nodes())?b.a.la(t.cloneNode(!0).childNodes):(e=e.text(),b.a.ua(e,i))},b.ba.Ma=new b.ba,b.gc(b.ba.Ma),b.b("nativeTemplateEngine",b.ba),function(){b.$a=function(){var e=this.Hd=function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,r,s){if(s=s||n,r=r||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var a=t.data("precompiled");return a||(a=t.text()||"",a=o.template(null,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),t.data("precompiled",a)),t=[i.$data],i=o.extend({koBindingContext:i},r.templateOptions),(i=o.tmpl(a,t,i)).appendTo(s.createElement("div")),o.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},b.$a.prototype=new b.ca,b.$a.prototype.constructor=b.$a;var e=new b.$a;0<e.Hd&&b.gc(e),b.b("jqueryTmplTemplateEngine",b.$a)}()}))}();var o=ko;"undefined"!=typeof window?(ko=window.ko,void 0!==i?window.ko=i:delete window.ko):(ko=global.ko,void 0!==i?global.ko=i:delete global.ko);const r=o},595394:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i="__knockoutObservables",o="__knockoutSubscribable";function r(e,t){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var n=this,r=s(e,!0);return(t=t||Object.getOwnPropertyNames(e)).forEach((function(t){if(t!==i&&t!==o&&!(t in r)){var s=e[t],a=s instanceof Array,c=n.isObservable(s)?s:a?n.observableArray(s):n.observable(s);Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:c,set:n.isWriteableObservable(c)?c:void 0}),r[t]=c,a&&function(e,t){var n=null;e.computed((function(){n&&(n.dispose(),n=null);var i=t();i instanceof Array&&(n=function(e,t,n){var i=function(e,t){var n=t[o];if(!n){n=new e.subscribable,Object.defineProperty(t,o,{value:n});var i={};!function(e,t,n){["pop","push","reverse","shift","sort","splice","unshift"].forEach((function(i){var o=e[i];e[i]=function(){var e=o.apply(this,arguments);return!0!==n.pause&&t.notifySubscribers(this),e}}))}(t,n,i),function(e,t,n,i){["remove","removeAll","destroy","destroyAll","replace"].forEach((function(o){Object.defineProperty(t,o,{enumerable:!1,value:function(){var r;i.pause=!0;try{r=e.observableArray.fn[o].apply(e.observableArray(t),arguments)}finally{i.pause=!1}return n.notifySubscribers(t),r}})}))}(e,t,n,i)}return n}(e,n);return i.subscribe(t)}(e,t,i))}))}(n,c)}})),e}function s(e,t){var n=e[i];return!n&&t&&(n={},Object.defineProperty(e,i,{value:n})),n}function a(e,t,n){var i={owner:e,deferEvaluation:!0};if("function"==typeof n)i.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');i.read=n.get,i.write=n.set}return e[t]=this.computed(i),r.call(this,e,[t]),e}function c(e,t){if(!e)return null;var n=s(e,!1);return n&&n[t]||null}function l(e,t){var n=c(e,t);n&&n.valueHasMutated()}const u={attachToKo:function(e){e.track=r,e.getObservable=c,e.valueHasMutated=l,e.defineProperty=a}}},914684:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(973292),o=n(595394),r=n(677854);o.A.attachToKo(i.A),r.A.register(i.A);const s=i.A},544835:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(491446),o=n(605971),r=n(116112),s=n(677354),a=n(591978),c=n(687536),l=n(273578),u=n(249944);let d=1e12;const h=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function f(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("clock is required.");const n=(e=(0,r.A)(e)).ownerDocument;this.container=e;const s=n.createElement("div");var c;s.className="cesium-timeline-main",e.appendChild(s),this._topDiv=s,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=t,this._scrubJulian=t.currentTime,this._mainTicSpan=-1,this._mouseMode=0,this._touchMode=0,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(t.startTime,t.stopTime),this._onMouseDown=(c=this,function(e){4!==c._mouseMode&&(0===e.button?(c._mouseMode=1,c._scrubElement&&(c._scrubElement.style.backgroundPosition="-16px 0"),c._onMouseMove(e)):(c._mouseX=e.clientX,2===e.button?c._mouseMode=3:c._mouseMode=2)),e.preventDefault()}),this._onMouseUp=function(e){return function(t){e._mouseMode=0,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}(this),this._onMouseMove=function(e){return function(t){let n;if(1===e._mouseMode){t.preventDefault();const n=t.clientX-e._topDiv.getBoundingClientRect().left;n<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):n>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(2===e._mouseMode){if(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n){const t=n*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(a.A.addSeconds(e._startJulian,t,new a.A),a.A.addSeconds(e._endJulian,t,new a.A))}}else 3===e._mouseMode&&(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n&&e.zoomFrom(Math.pow(1.01,n)))}}(this),this._onMouseWheel=function(e){return function(t){let n=t.wheelDeltaY||t.wheelDelta||-t.detail;d=Math.max(Math.min(Math.abs(n),d),1),n/=d,e.zoomFrom(Math.pow(1.05,-n))}}(this),this._onTouchStart=function(e){return function(t){const n=t.touches.length;let i,o;const r=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=4,1===n?(i=a.A.secondsDifference(e._scrubJulian,e._startJulian),o=Math.round(i*e._topDiv.clientWidth/e._timeBarSecondsSpan+r),Math.abs(t.touches[0].clientX-o)<50?(e._touchMode=1,e._scrubElement&&(e._scrubElement.style.backgroundPosition=1===n?"-16px 0":"0 0")):(e._touchMode=3,e._touchState.centerX=t.touches[0].clientX-r)):2===n?(e._touchMode=2,e._touchState.centerX=.5*(t.touches[0].clientX+t.touches[1].clientX)-r,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=4}}(this),this._onTouchMove=function(e){return function(t){let n,o,r,s,c,l,u=1;const d=e._topDiv.getBoundingClientRect().left;3===e._touchMode&&(e._touchMode=2),e._mouseMode=4,1===e._touchMode?(t.preventDefault(),1===t.changedTouches.length&&(o=t.changedTouches[0].clientX-d,o>=0&&o<=e._topDiv.clientWidth&&e._setTimeBarTime(o,o*e._timeBarSecondsSpan/e._topDiv.clientWidth))):2===e._touchMode&&(r=t.touches.length,2===r?(s=.5*(t.touches[0].clientX+t.touches[1].clientX)-d,c=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):1===r&&(s=t.touches[0].clientX-d,c=0),(0,i.A)(s)&&(c>0&&e._touchState.spanX>0?(u=e._touchState.spanX/c,l=a.A.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-s*e._timeBarSecondsSpan*u)/e._topDiv.clientWidth,new a.A)):(n=e._touchState.centerX-s,l=a.A.addSeconds(e._startJulian,n*e._timeBarSecondsSpan/e._topDiv.clientWidth,new a.A)),e.zoomTo(l,a.A.addSeconds(l,e._timeBarSecondsSpan*u,new a.A)),e._touchState.centerX=s,e._touchState.spanX=c))}}(this),this._onTouchEnd=function(e){return function(t){const n=t.touches.length,i=e._topDiv.getBoundingClientRect().left;3===e._touchMode?(e._touchMode=1,e._onTouchMove(t)):1===e._touchMode&&e._onTouchMove(t),e._mouseMode=4,1!==n?e._touchMode=n>0?4:0:2===e._touchMode&&(e._touchState.centerX=t.touches[0].clientX-i),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}(this);const l=this._timeBarEle;n.addEventListener("mouseup",this._onMouseUp,!1),n.addEventListener("mousemove",this._onMouseMove,!1),l.addEventListener("mousedown",this._onMouseDown,!1),l.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),l.addEventListener("mousewheel",this._onMouseWheel,!1),l.addEventListener("touchstart",this._onTouchStart,!1),l.addEventListener("touchmove",this._onTouchMove,!1),l.addEventListener("touchend",this._onTouchEnd,!1),l.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},t.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}function p(e){return e<10?`0${e.toString()}`:e.toString()}f.prototype.addEventListener=function(e,t,n){this._topDiv.addEventListener(e,t,n)},f.prototype.removeEventListener=function(e,t,n){this._topDiv.removeEventListener(e,t,n)},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const e=this.container.ownerDocument;e.removeEventListener("mouseup",this._onMouseUp,!1),e.removeEventListener("mousemove",this._onMouseMove,!1);const t=this._timeBarEle;t.removeEventListener("mousedown",this._onMouseDown,!1),t.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),t.removeEventListener("mousewheel",this._onMouseWheel,!1),t.removeEventListener("touchstart",this._onTouchStart,!1),t.removeEventListener("touchmove",this._onTouchMove,!1),t.removeEventListener("touchend",this._onTouchEnd,!1),t.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),(0,s.A)(this)},f.prototype.addHighlightRange=function(e,t,n){const i=new l.A(e,t,n);return this._highlightRanges.push(i),this.resize(),i},f.prototype.addTrack=function(e,t,n,i){const o=new u.A(e,t,n,i);return this._trackList.push(o),this._lastHeight=void 0,this.resize(),o},f.prototype.zoomTo=function(e,t){if(!(0,i.A)(e))throw new o.A("startTime is required.");if(!(0,i.A)(t))throw new o.A("stopTime is required");if(a.A.lessThanOrEquals(t,e))throw new o.A("Start time must come before end time.");if(this._startJulian=e,this._endJulian=t,this._timeBarSecondsSpan=a.A.secondsDifference(t,e),this._clock&&this._clock.clockRange!==c.A.UNBOUNDED){const e=this._clock.startTime,t=this._clock.stopTime,n=a.A.secondsDifference(t,e),i=a.A.secondsDifference(e,this._startJulian),o=a.A.secondsDifference(t,this._endJulian);this._timeBarSecondsSpan>=n?(this._timeBarSecondsSpan=n,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):i>0?(this._endJulian=a.A.addSeconds(this._endJulian,i,new a.A),this._startJulian=e,this._timeBarSecondsSpan=a.A.secondsDifference(this._endJulian,this._startJulian)):o<0&&(this._startJulian=a.A.addSeconds(this._startJulian,o,new a.A),this._endJulian=t,this._timeBarSecondsSpan=a.A.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const n=document.createEvent("Event");n.initEvent("setzoom",!0,!0),n.startJulian=this._startJulian,n.endJulian=this._endJulian,n.epochJulian=this._epochJulian,n.totalSpan=this._timeBarSecondsSpan,n.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(n)},f.prototype.zoomFrom=function(e){let t=a.A.secondsDifference(this._scrubJulian,this._startJulian);e>1||t<0||t>this._timeBarSecondsSpan?t=.5*this._timeBarSecondsSpan:t+=t-.5*this._timeBarSecondsSpan;const n=this._timeBarSecondsSpan-t;this.zoomTo(a.A.addSeconds(this._startJulian,t-t*e,new a.A),a.A.addSeconds(this._endJulian,n*e-n,new a.A))},f.prototype.makeLabel=function(e){const t=a.A.toGregorianDate(e),n=t.millisecond;let i=" UTC";if(n>0&&this._timeBarSecondsSpan<3600){for(i=Math.floor(n).toString();i.length<3;)i=`0${i}`;i=`.${i}`}return`${A[t.month-1]} ${t.day} ${t.year} ${p(t.hour)}:${p(t.minute)}:${p(t.second)}${i}`},f.prototype.smallestTicInPixels=7,f.prototype._makeTics=function(){const e=this._timeBarEle,t=a.A.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan),i=n-8;let o;const r=this;this._needleEle.style.left=`${n.toString()}px`;let s="";const c=.01,l=31536e6,u=1e-10;let d=0,A=this._timeBarSecondsSpan;A<c?(A=c,this._timeBarSecondsSpan=c,this._endJulian=a.A.addSeconds(this._startJulian,c,new a.A)):A>l&&(A=l,this._timeBarSecondsSpan=l,this._endJulian=a.A.addSeconds(this._startJulian,l,new a.A));let f=this._timeBarEle.clientWidth;f<10&&(f=10);const p=this._startJulian,m=Math.min(A/f*1e-5,.4);let _;const g=a.A.toGregorianDate(p);_=A>31536e4?a.A.fromDate(new Date(Date.UTC(100*Math.floor(g.year/100),0))):A>31536e3?a.A.fromDate(new Date(Date.UTC(10*Math.floor(g.year/10),0))):A>86400?a.A.fromDate(new Date(Date.UTC(g.year,0))):a.A.fromDate(new Date(Date.UTC(g.year,g.month,g.day)));const y=a.A.secondsDifference(this._startJulian,a.A.addSeconds(_,m,new a.A));let b=y+A;function v(e){return Math.floor(y/e)*e}function T(e,t){return Math.ceil(e/t+.5)*t}function w(e){return(e-y)/A}function E(e,t){return e-t*Math.round(e/t)}this._epochJulian=_,this._rulerEle.innerHTML=this.makeLabel(a.A.addSeconds(this._endJulian,-.01,new a.A));let S=this._rulerEle.offsetWidth+20;S<30&&(S=180);const C=d;d-=u;const x={startTime:y,startJulian:p,epochJulian:_,duration:A,timeBarWidth:f,getAlpha:w};this._highlightRanges.forEach((function(e){s+=e.render(x)}));let I=0,P=0,D=0,O=S/f;O>1&&(O=1),O*=this._timeBarSecondsSpan;let L=-1,N=-1;const M=h.length;let R;for(R=0;R<M;++R){const e=h[R];if(++L,I=e,e>O&&e>d)break;N<0&&f*(e/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(N=L)}if(L>0){for(;L>0;)if(--L,Math.abs(E(I,h[L]))<1e-5){h[L]>=d&&(P=h[L]);break}if(N>=0)for(;N<L;){if(Math.abs(E(P,h[N]))<1e-5&&h[N]>=d){D=h[N];break}++N}}d=C,d>u&&D<1e-5&&Math.abs(d-I)>u&&(D=d,d<=I+u&&(P=0));let F,B=-999999;if(f*(D/this._timeBarSecondsSpan)>=3)for(o=v(D);o<=b;o=T(o,D))s+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(f*w(o)).toString()}px;"></span>`;if(f*(P/this._timeBarSecondsSpan)>=3)for(o=v(P);o<=b;o=T(o,P))s+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(f*w(o)).toString()}px;"></span>`;if(f*(I/this._timeBarSecondsSpan)>=2){this._mainTicSpan=I,b+=I,o=v(I);const e=a.A.computeTaiMinusUtc(_);for(;o<=b;){let t=a.A.addSeconds(p,o-y,new a.A);if(I>2.1){const n=a.A.computeTaiMinusUtc(t);Math.abs(n-e)>.1&&(o+=n-e,t=a.A.addSeconds(p,o-y,new a.A))}const n=Math.round(f*w(o)),i=this.makeLabel(t);this._rulerEle.innerHTML=i,F=this._rulerEle.offsetWidth,F<10&&(F=S);const r=n-(F/2-1);r>B?(B=r+F+5,s+=`<span class="cesium-timeline-ticMain" style="left: ${n.toString()}px;"></span><span class="cesium-timeline-ticLabel" style="left: ${r.toString()}px;">${i}</span>`):s+=`<span class="cesium-timeline-ticSub" style="left: ${n.toString()}px;"></span>`,o=T(o,I)}}else this._mainTicSpan=-1;s+=`<span class="cesium-timeline-icon16" style="left:${i}px;bottom:0;background-position: 0 0;"></span>`,e.innerHTML=s,this._scrubElement=e.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),x.y=0,this._trackList.forEach((function(e){e.render(r._context,x),x.y+=e.height}))},f.prototype.updateFromClock=function(){this._scrubJulian=this._clock.currentTime;const e=this._scrubElement;if((0,i.A)(this._scrubElement)){const t=a.A.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==n&&(this._lastXPos=n,e.style.left=n-8+"px",this._needleEle.style.left=`${n}px`)}(0,i.A)(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(a.A.addSeconds(this._startJulian,this._timelineDrag,new a.A),a.A.addSeconds(this._endJulian,this._timelineDrag,new a.A)))},f.prototype._setTimeBarTime=function(e,t){if(e=Math.round(e),this._scrubJulian=a.A.addSeconds(this._startJulian,t,new a.A),this._scrubElement){const t=e-8;this._scrubElement.style.left=`${t.toString()}px`,this._needleEle.style.left=`${e.toString()}px`}const n=document.createEvent("Event");n.initEvent("settime",!0,!0),n.clientX=e,n.timeSeconds=t,n.timeJulian=this._scrubJulian,n.clock=this._clock,this._topDiv.dispatchEvent(n)},f.prototype.resize=function(){const e=this.container.clientWidth,t=this.container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;this._trackContainer.style.height=`${t}px`;let n=1;this._trackList.forEach((function(e){n+=e.height})),this._trackListEle.style.height=`${n.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=n,this._makeTics(),this._lastXPos=void 0,this._lastWidth=e,this._lastHeight=t};const m=f},273578:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(419061),o=n(591978);function r(e,t,n){this._color=e,this._height=t,this._base=(0,i.A)(n,0)}r.prototype.getHeight=function(){return this._height},r.prototype.getBase=function(){return this._base},r.prototype.getStartTime=function(){return this._start},r.prototype.getStopTime=function(){return this._stop},r.prototype.setRange=function(e,t){this._start=e,this._stop=t},r.prototype.render=function(e){let t="";if(this._start&&this._stop&&this._color){const n=o.A.secondsDifference(this._start,e.epochJulian);let i=Math.round(e.timeBarWidth*e.getAlpha(n));const r=o.A.secondsDifference(this._stop,e.epochJulian);let s=Math.round(e.timeBarWidth*e.getAlpha(r))-i;i<0&&(s+=i,i=0),i+s>e.timeBarWidth&&(s=e.timeBarWidth-i),s>0&&(t=`<span class="cesium-timeline-highlight" style="left: ${i.toString()}px; width: ${s.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return t};const s=r},249944:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(41476),o=n(591978),r=n(491446);function s(e,t,n,o){this.interval=e,this.height=t,this.color=n||new i.A(.5,.5,.5,1),this.backgroundColor=o||new i.A(0,0,0,0)}s.prototype.render=function(e,t){const n=this.interval.start,i=this.interval.stop,s=t.startJulian,a=o.A.addSeconds(t.startJulian,t.duration,new o.A);if(o.A.lessThan(n,s)&&o.A.greaterThan(i,a))e.fillStyle=this.color.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height);else if(o.A.lessThanOrEquals(n,a)&&o.A.greaterThanOrEquals(i,s)){let s,a,c;for(s=0;s<t.timeBarWidth;++s){const e=o.A.addSeconds(t.startJulian,s/t.timeBarWidth*t.duration,new o.A);!(0,r.A)(a)&&o.A.greaterThanOrEquals(e,n)?a=s:!(0,r.A)(c)&&o.A.greaterThanOrEquals(e,i)&&(c=s)}e.fillStyle=this.backgroundColor.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height),(0,r.A)(a)&&((0,r.A)(c)||(c=t.timeBarWidth),e.fillStyle=this.color.toCssColorString(),e.fillRect(a,t.y,Math.max(c-a,1),this.height))}};const a=s},798518:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(605971),r=n(419061),s=n(914684);function a(e,t){if(!(0,i.A)(e))throw new o.A("command is required.");this._command=e,t=(0,r.A)(t,r.A.EMPTY_OBJECT),this.toggled=(0,r.A)(t.toggled,!1),this.tooltip=(0,r.A)(t.tooltip,""),s.A.track(this,["toggled","tooltip"])}Object.defineProperties(a.prototype,{command:{get:function(){return this._command}}});const c=a},674221:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),s=n(677354),a=n(914684),c=n(316375);function l(e,t,n){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("scene is required.");e=(0,r.A)(e);const s=new c.A(t,n);s._exitVRPath="M 25.770585,2.4552065 C 15.72282,13.962707 10.699956,19.704407 8.1768352,22.580207 c -1.261561,1.4379 -1.902282,2.1427 -2.21875,2.5 -0.141624,0.1599 -0.208984,0.2355 -0.25,0.2813 l 0.6875,0.75 c 10e-5,-10e-5 0.679191,0.727 0.6875,0.7187 0.01662,-0.016 0.02451,-0.024 0.03125,-0.031 0.01348,-0.014 0.04013,-0.038 0.0625,-0.062 0.04474,-0.05 0.120921,-0.1315 0.28125,-0.3126 0.320657,-0.3619 0.956139,-1.0921 2.2187499,-2.5312 2.5252219,-2.8781 7.5454589,-8.6169 17.5937499,-20.1250005 l -1.5,-1.3125 z m -20.5624998,3.9063 c -1.304375,0 -2.34375,1.0391 -2.34375,2.3437 l 0,10.8125005 c 0,1.3043 1.039375,2.375 2.34375,2.375 l 2.25,0 c 1.9518039,-2.2246 7.4710958,-8.5584 13.5624998,-15.5312005 l -15.8124998,0 z m 21.1249998,0 c -1.855467,2.1245 -2.114296,2.4005 -3.59375,4.0936995 1.767282,0.1815 3.15625,1.685301 3.15625,3.500001 0,1.9349 -1.56511,3.5 -3.5,3.5 -1.658043,0 -3.043426,-1.1411 -3.40625,-2.6875 -1.089617,1.2461 -2.647139,2.9988 -3.46875,3.9375 0.191501,-0.062 0.388502,-0.094 0.59375,-0.094 1.373338,0 2.50006,1.4614 2.5625,3.2812 l 8.3125,0 c 1.304375,0 2.34375,-1.0707 2.34375,-2.375 l 0,-10.8125005 c 0,-1.3046 -1.039375,-2.3437 -2.34375,-2.3437 l -0.65625,0 z M 9.5518351,10.423906 c 1.9348899,0 3.4999999,1.596401 3.4999999,3.531301 0,1.9349 -1.56511,3.5 -3.4999999,3.5 -1.9348899,0 -3.4999999,-1.5651 -3.4999999,-3.5 0,-1.9349 1.56511,-3.531301 3.4999999,-3.531301 z m 4.2187499,10.312601 c -0.206517,0.2356 -0.844218,0.9428 -1.03125,1.1562 l 0.8125,0 c 0.01392,-0.4081 0.107026,-0.7968 0.21875,-1.1562 z",s._enterVRPath="M 5.3125 6.375 C 4.008126 6.375 2.96875 7.4141499 2.96875 8.71875 L 2.96875 19.5 C 2.96875 20.8043 4.008126 21.875 5.3125 21.875 L 13.65625 21.875 C 13.71832 20.0547 14.845166 18.59375 16.21875 18.59375 C 17.592088 18.59375 18.71881 20.0552 18.78125 21.875 L 27.09375 21.875 C 28.398125 21.875 29.4375 20.8043 29.4375 19.5 L 29.4375 8.71875 C 29.4375 7.4141499 28.398125 6.375 27.09375 6.375 L 5.3125 6.375 z M 9.625 10.4375 C 11.55989 10.4375 13.125 12.03385 13.125 13.96875 C 13.125 15.90365 11.55989 17.46875 9.625 17.46875 C 7.69011 17.46875 6.125 15.90365 6.125 13.96875 C 6.125 12.03385 7.69011 10.4375 9.625 10.4375 z M 22.46875 10.4375 C 24.40364 10.4375 25.96875 12.03385 25.96875 13.96875 C 25.96875 15.90365 24.40364 17.46875 22.46875 17.46875 C 20.53386 17.46875 18.96875 15.90365 18.96875 13.96875 C 18.96875 12.03385 20.53386 10.4375 22.46875 10.4375 z";const l=document.createElement("button");l.type="button",l.className="cesium-button cesium-vrButton",l.setAttribute("data-bind",'css: { "cesium-button-disabled" : _isOrthographic }, attr: { title: tooltip },click: command,enable: isVREnabled,cesiumSvgPath: { path: isVRMode ? _exitVRPath : _enterVRPath, width: 32, height: 32 }'),e.appendChild(l),a.A.applyBindings(s,l),this._container=e,this._viewModel=s,this._element=l}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._viewModel.destroy(),a.A.cleanNode(this._element),this._container.removeChild(this._element),(0,s.A)(this)};const u=l},316375:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(491446),o=n(263842),r=n(605971),s=n(354975),a=n(811203),c=n(419061),l=n(116112),u=n(677354),d=n(914684),h=n(391651),A=n(277441);function f(){const e=window.screen;(0,i.A)(e)&&((0,i.A)(e.unlockOrientation)?e.unlockOrientation():(0,i.A)(e.mozUnlockOrientation)?e.mozUnlockOrientation():(0,i.A)(e.msUnlockOrientation)?e.msUnlockOrientation():(0,i.A)(e.orientation&&e.orientation.unlock)&&e.orientation.unlock())}function p(e,t){if(!(0,i.A)(e))throw new r.A("scene is required.");const n=this,u=d.A.observable(o.A.enabled),p=d.A.observable(!1);this.isVRMode=void 0,d.A.defineProperty(this,"isVRMode",{get:function(){return p()}}),this.isVREnabled=void 0,d.A.defineProperty(this,"isVREnabled",{get:function(){return u()},set:function(e){u(e&&o.A.enabled)}}),this.tooltip=void 0,d.A.defineProperty(this,"tooltip",(function(){return u()?p()?"Exit VR mode":"Enter VR mode":"VR mode is unavailable"}));const m=d.A.observable(!1);this._isOrthographic=void 0,d.A.defineProperty(this,"_isOrthographic",{get:function(){return m()}}),this._eventHelper=new s.A,this._eventHelper.add(e.preRender,(function(){m(e.camera.frustum instanceof a.A)})),this._locked=!1,this._noSleep=new h,this._command=(0,A.A)((function(){!function(e,t,n,r){r()||(n()?(t.useWebVR=!1,e._locked&&(f(),e._locked=!1),e._noSleep.disable(),o.A.exitFullscreen(),n(!1)):(o.A.fullscreen||o.A.requestFullscreen(e._vrElement),e._noSleep.enable(),e._locked||(e._locked=function(e){let t=!1;const n=window.screen;return(0,i.A)(n)&&((0,i.A)(n.lockOrientation)?t=n.lockOrientation(e):(0,i.A)(n.mozLockOrientation)?t=n.mozLockOrientation(e):(0,i.A)(n.msLockOrientation)?t=n.msLockOrientation(e):(0,i.A)(n.orientation&&n.orientation.lock)&&(t=n.orientation.lock(e))),t}("landscape")),t.useWebVR=!0,n(!0)))}(n,e,p,m)}),d.A.getObservable(this,"isVREnabled")),this._vrElement=(0,c.A)((0,l.A)(t),document.body),this._callback=function(){!o.A.fullscreen&&p()&&(e.useWebVR=!1,n._locked&&(f(),n._locked=!1),n._noSleep.disable(),p(!1))},document.addEventListener(o.A.changeEventName,this._callback)}Object.defineProperties(p.prototype,{vrElement:{get:function(){return this._vrElement},set:function(e){if(!(e instanceof Element))throw new r.A("value must be a valid Element.");this._vrElement=e}},command:{get:function(){return this._command}}}),p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){this._eventHelper.removeAll(),document.removeEventListener(o.A.changeEventName,this._callback),(0,u.A)(this)};const m=p},123905:(e,t,n)=>{"use strict";n.d(t,{A:()=>he});var i=n(660662),o=n(491446),r=n(419061),s=n(426807),a=n(622569),c=n(591978),l=n(367817),u=n(267980),d=n(808938),h=n(605971),A=n(116112),f=n(565801),p=n(566732),m=n(335557),_=n(720567),g=n(354975),y=n(786101),b=n(955943),v=n(46257),T=n(149785),w=n(62467),E=n(584164),S=n(677354),C=n(810600),x=n(451227),I=n(849750),P=n(855927),D=n(972757),O=n(450339),L=n(805746),N=n(336946),M=n(226698),R=n(914684),F=n(338863),B=n(806441),U=n(622463),k=n(714018),V=n(177647),H=n(112306),z=n(877987),G=n(413369),j=n(217263),W=n(506527),q=n(221899),Y=n(72211),X=n(288823),J=n(363439),Q=n(618168),$=n(544835),K=n(674221);const Z=new i.A;function ee(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1}function te(e){const t=e.getPropertyIds();let n="";return t.forEach((function(t){const i=e.getProperty(t);(0,o.A)(i)&&(n+=`<tr><th>${t}</th><td>${i}</td></tr>`)})),n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function ne(e){let t;const n=[],i=e.getPropertyIds();for(t=0;t<i.length;t++){const o=i[t];/^name$/i.test(o)?n[0]=e.getProperty(o):/name/i.test(o)?n[1]=e.getProperty(o):/^title$/i.test(o)?n[2]=e.getProperty(o):/^(id|identifier)$/i.test(o)?n[3]=e.getProperty(o):/element/i.test(o)?n[4]=e.getProperty(o):/(id|identifier)$/i.test(o)&&(n[5]=e.getProperty(o))}const r=n.length;for(t=0;t<r;t++){const e=n[t];if((0,o.A)(e)&&""!==e)return e}return"Unnamed Feature"}function ie(e,t){const n=e.scene.pick(t.position);if((0,o.A)(n)){const e=(0,r.A)(n.id,n.primitive.id);if(e instanceof s.A)return e;if(n instanceof a.A)return new s.A({name:ne(n),description:te(n),feature:n})}if((0,o.A)(e.scene.globe))return function(e,t){const n=e.scene,i=n.camera.getPickRay(t),r=n.imageryLayers.pickImageryLayerFeatures(i,n);if(!(0,o.A)(r))return;const a=new s.A({id:"Loading...",description:"Loading feature information..."});return r.then((function(t){if(e.selectedEntity!==a)return;if(!(0,o.A)(t)||0===t.length)return void(e.selectedEntity=ae());const n=t[0],i=new s.A({id:n.name,description:n.description});if((0,o.A)(n.position)){const t=e.scene.globe.ellipsoid.cartographicToCartesian(n.position,se);i.position=new d.A(t)}e.selectedEntity=i}),(function(){e.selectedEntity===a&&(e.selectedEntity=ae())})),a}(e,t.position)}const oe=new c.A;function re(e,t,n){if((0,o.A)(n)){const i=n.clock;if((0,o.A)(i)&&(i.getValue(t),(0,o.A)(e))){const t=i.startTime;let n=i.stopTime;c.A.equals(t,n)&&(n=c.A.addSeconds(t,l.A.EPSILON2,oe)),e.updateFromClock(),e.zoomTo(t,n)}}}const se=new u.A;function ae(){return new s.A({id:"None",description:"No features found."})}function ce(e,t){if(!(0,o.A)(e))throw new h.A("container is required.");e=(0,A.A)(e),t=(0,r.A)(t,r.A.EMPTY_OBJECT);const n=!((0,o.A)(t.globe)&&!1===t.globe||(0,o.A)(t.baseLayerPicker)&&!1===t.baseLayerPicker);if(!n&&(0,o.A)(t.selectedImageryProviderViewModel))throw new h.A("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.baseLayer instead or set options.baseLayerPicker to true.");if(!n&&(0,o.A)(t.selectedTerrainProviderViewModel))throw new h.A("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");const i=this,s=document.createElement("div");s.className="cesium-viewer",e.appendChild(s);const a=document.createElement("div");a.className="cesium-viewer-cesiumWidgetContainer",s.appendChild(a);const c=document.createElement("div");c.className="cesium-viewer-bottom",s.appendChild(c);const l=(0,r.A)(t.scene3DOnly,!1);let u,d,w=!1;(0,o.A)(t.clockViewModel)?(d=t.clockViewModel,u=d.clock):(u=new f.A,d=new H.A(u),w=!0),(0,o.A)(t.shouldAnimate)&&(u.shouldAnimate=t.shouldAnimate);const E=new p.A(a,{baseLayer:!(n||(0,o.A)(t.baseLayer)||(0,o.A)(t.imageryProvider))&&void 0,clock:u,skyBox:t.skyBox,skyAtmosphere:t.skyAtmosphere,sceneMode:t.sceneMode,mapProjection:t.mapProjection,globe:t.globe,orderIndependentTranslucency:t.orderIndependentTranslucency,contextOptions:t.contextOptions,useDefaultRenderLoop:t.useDefaultRenderLoop,targetFrameRate:t.targetFrameRate,showRenderLoopErrors:t.showRenderLoopErrors,useBrowserRecommendedResolution:t.useBrowserRecommendedResolution,creditContainer:(0,o.A)(t.creditContainer)?t.creditContainer:c,creditViewport:t.creditViewport,scene3DOnly:l,shadows:t.shadows,terrainShadows:t.terrainShadows,mapMode2D:t.mapMode2D,blurActiveElementOnCanvasFocus:t.blurActiveElementOnCanvasFocus,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});let S=t.dataSources,C=!1;(0,o.A)(S)||(S=new m.A,C=!0);const x=E.scene,I=new _.A({scene:x,dataSourceCollection:S}),P=new g.A;let D,O;if(P.add(u.onTick,ce.prototype._onTick,this),P.add(x.morphStart,ce.prototype._clearTrackedObject,this),!(0,o.A)(t.selectionIndicator)||!1!==t.selectionIndicator){const e=document.createElement("div");e.className="cesium-viewer-selectionIndicatorContainer",s.appendChild(e),D=new J.A(e,x)}if(!(0,o.A)(t.infoBox)||!1!==t.infoBox){const e=document.createElement("div");e.className="cesium-viewer-infoBoxContainer",s.appendChild(e),O=new W.A(e);const t=O.viewModel;P.add(t.cameraClicked,ce.prototype._onInfoBoxCameraClicked,this),P.add(t.closeClicked,ce.prototype._onInfoBoxClockClicked,this)}const L=document.createElement("div");let N,M,Z,te,ne,oe,re,se,ae,le,ue,de,he,Ae,fe;if(L.className="cesium-viewer-toolbar",s.appendChild(L),!(0,o.A)(t.geocoder)||!1!==t.geocoder){const e=document.createElement("div");let n;e.className="cesium-viewer-geocoderContainer",L.appendChild(e),(0,o.A)(t.geocoder)&&"boolean"!=typeof t.geocoder&&(n=Array.isArray(t.geocoder)?t.geocoder:[t.geocoder]),N=new G.A({container:e,geocoderServices:n,scene:x}),P.add(N.viewModel.search.beforeExecute,ce.prototype._clearObjects,this)}if((0,o.A)(t.homeButton)&&!1===t.homeButton||(M=new j.A(L,x),(0,o.A)(N)&&P.add(M.viewModel.command.afterExecute,(function(){const e=N.viewModel;e.searchText="",e.isSearchInProgress&&e.search()})),P.add(M.viewModel.command.beforeExecute,ce.prototype._clearTrackedObject,this)),!0===t.sceneModePicker&&l)throw new h.A("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(l||(0,o.A)(t.sceneModePicker)&&!1===t.sceneModePicker||(Z=new X.A(L,x)),t.projectionPicker&&(te=new Y.A(L,x)),n){const e=(0,r.A)(t.imageryProviderViewModels,(0,k.A)()),n=(0,r.A)(t.terrainProviderViewModels,(0,V.A)());ne=new U.A(L,{globe:x.globe,imageryProviderViewModels:e,selectedImageryProviderViewModel:t.selectedImageryProviderViewModel,terrainProviderViewModels:n,selectedTerrainProviderViewModel:t.selectedTerrainProviderViewModel}),oe=L.getElementsByClassName("cesium-baseLayerPicker-dropDown")[0]}if((0,o.A)(t.imageryProvider)&&!1!==t.imageryProvider&&((0,y.A)("Viewer options.imageryProvider","options.imageryProvider was deprecated in CesiumJS 1.104.  It will be in CesiumJS 1.107.  Use options.baseLayer instead."),n&&(ne.viewModel.selectedImagery=void 0),x.imageryLayers.removeAll(),x.imageryLayers.addImageryProvider(t.imageryProvider)),(0,o.A)(t.baseLayer)&&!1!==t.baseLayer&&(n&&(ne.viewModel.selectedImagery=void 0),x.imageryLayers.removeAll(),x.imageryLayers.add(t.baseLayer)),(0,o.A)(t.terrainProvider)&&(n&&(ne.viewModel.selectedTerrain=void 0),x.terrainProvider=t.terrainProvider),(0,o.A)(t.terrain)){if((0,o.A)(t.terrainProvider))throw new h.A("Specify either options.terrainProvider or options.terrain.");n&&(ne.viewModel.selectedTerrain=void 0,x.globe.depthTestAgainstTerrain=!0),x.setTerrain(t.terrain)}if(!(0,o.A)(t.navigationHelpButton)||!1!==t.navigationHelpButton){let e=!0;try{if((0,o.A)(window.localStorage)){const t=window.localStorage.getItem("cesium-hasSeenNavHelp");(0,o.A)(t)&&Boolean(t)?e=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(e){}re=new q.A({container:L,instructionsInitiallyVisible:(0,r.A)(t.navigationInstructionsInitiallyVisible,e)})}if(!(0,o.A)(t.animation)||!1!==t.animation){const e=document.createElement("div");e.className="cesium-viewer-animationContainer",s.appendChild(e),se=new F.A(e,new B.A(d))}if(!(0,o.A)(t.timeline)||!1!==t.timeline){const e=document.createElement("div");e.className="cesium-viewer-timelineContainer",s.appendChild(e),ae=new $.A(e,u),ae.addEventListener("settime",ee,!1),ae.zoomTo(u.startTime,u.stopTime)}if((0,o.A)(t.fullscreenButton)&&!1===t.fullscreenButton||(de=document.createElement("div"),de.className="cesium-viewer-fullscreenContainer",s.appendChild(de),le=new z.A(de,t.fullscreenElement),ue=(0,Q.A)(le.viewModel,"isFullscreenEnabled",(function(e){de.style.display=e?"block":"none",(0,o.A)(ae)&&(ae.container.style.right=`${de.clientWidth}px`,ae.resize())}))),t.vrButton){const e=document.createElement("div");e.className="cesium-viewer-vrContainer",s.appendChild(e),he=new K.A(e,x,t.fullScreenElement),Ae=(0,Q.A)(he.viewModel,"isVREnabled",(function(t){e.style.display=t?"block":"none",(0,o.A)(le)&&(e.style.right=`${de.clientWidth}px`),(0,o.A)(ae)&&(ae.container.style.right=`${e.clientWidth}px`,ae.resize())})),fe=(0,Q.A)(he.viewModel,"isVRMode",(function(e){!function(e,t){const n=e._geocoder,i=e._homeButton,r=e._sceneModePicker,s=e._projectionPicker,a=e._baseLayerPicker,c=e._animation,l=e._timeline,u=e._fullscreenButton,d=e._infoBox,h=e._selectionIndicator,A=t?"hidden":"visible";if((0,o.A)(n)&&(n.container.style.visibility=A),(0,o.A)(i)&&(i.container.style.visibility=A),(0,o.A)(r)&&(r.container.style.visibility=A),(0,o.A)(s)&&(s.container.style.visibility=A),(0,o.A)(a)&&(a.container.style.visibility=A),(0,o.A)(c)&&(c.container.style.visibility=A),(0,o.A)(l)&&(l.container.style.visibility=A),(0,o.A)(u)&&u.viewModel.isFullscreenEnabled&&(u.container.style.visibility=A),(0,o.A)(d)&&(d.container.style.visibility=A),(0,o.A)(h)&&(h.container.style.visibility=A),e._container){const n=t||!(0,o.A)(u)?0:u.container.clientWidth;e._vrButton.container.style.right=`${n}px`,e.forceResize()}}(i,e)}))}this._baseLayerPickerDropDown=oe,this._fullscreenSubscription=ue,this._vrSubscription=Ae,this._vrModeSubscription=fe,this._dataSourceChangedListeners={},this._automaticallyTrackDataSourceClocks=(0,r.A)(t.automaticallyTrackDataSourceClocks,!0),this._container=e,this._bottomContainer=c,this._element=s,this._cesiumWidget=E,this._selectionIndicator=D,this._infoBox=O,this._dataSourceCollection=S,this._destroyDataSourceCollection=C,this._dataSourceDisplay=I,this._clockViewModel=d,this._destroyClockViewModel=w,this._toolbar=L,this._homeButton=M,this._sceneModePicker=Z,this._projectionPicker=te,this._baseLayerPicker=ne,this._navigationHelpButton=re,this._animation=se,this._timeline=ae,this._fullscreenButton=le,this._vrButton=he,this._geocoder=N,this._eventHelper=P,this._lastWidth=0,this._lastHeight=0,this._allowDataSourcesToSuspendAnimation=!0,this._entityView=void 0,this._enableInfoOrSelection=(0,o.A)(O)||(0,o.A)(D),this._clockTrackedDataSource=void 0,this._trackedEntity=void 0,this._needTrackedEntityUpdate=!1,this._selectedEntity=void 0,this._zoomIsFlight=!1,this._zoomTarget=void 0,this._zoomPromise=void 0,this._zoomOptions=void 0,this._selectedEntityChanged=new b.A,this._trackedEntityChanged=new b.A,R.A.track(this,["_trackedEntity","_selectedEntity","_clockTrackedDataSource"]),P.add(S.dataSourceAdded,ce.prototype._onDataSourceAdded,this),P.add(S.dataSourceRemoved,ce.prototype._onDataSourceRemoved,this),P.add(x.postUpdate,ce.prototype.resize,this),P.add(x.postRender,ce.prototype._postRender,this);const pe=S.length;for(let e=0;e<pe;e++)this._dataSourceAdded(S,S.get(e));this._dataSourceAdded(void 0,I.defaultDataSource),P.add(S.dataSourceAdded,ce.prototype._dataSourceAdded,this),P.add(S.dataSourceRemoved,ce.prototype._dataSourceRemoved,this),E.screenSpaceEventHandler.setInputAction((function(e){i.selectedEntity=ie(i,e)}),T.A.LEFT_CLICK),E.screenSpaceEventHandler.setInputAction((function(e){const t=ie(i,e);(0,o.A)(t)?v.A.getValueOrUndefined(t.position,i.clock.currentTime)?i.trackedEntity=t:i.zoomTo(t):(0,o.A)(i.trackedEntity)&&(i.trackedEntity=void 0)}),T.A.LEFT_DOUBLE_CLICK)}function le(e,t,n,i){if(!(0,o.A)(t))throw new h.A("zoomTarget is required.");de(e);const s=new Promise((t=>{e._completeZoom=function(e){t(e)}}));return e._zoomPromise=s,e._zoomIsFlight=i,e._zoomOptions=n,Promise.resolve(t).then((function(t){if(e._zoomPromise===s)if(t instanceof x.A){let n;if((0,o.A)(t.imageryProvider)){let e=Promise.resolve();(0,o.A)(t.imageryProvider._readyPromise)?e=t.imageryProvider._readyPromise:(0,o.A)(t.imageryProvider.readyPromise)&&(e=t.imageryProvider.readyPromise),n=e.then((()=>t.getImageryRectangle()))}else n=new Promise((e=>{const n=t.readyEvent.addEventListener((()=>{n(),e(t.getImageryRectangle())}))}));n.then((function(t){return(0,I.A)(t,e.scene)})).then((function(t){e._zoomPromise===s&&(e._zoomTarget=t)}))}else if(t instanceof P.A||t instanceof D.A||t instanceof O.A)e._zoomTarget=t;else if(t.isLoading&&(0,o.A)(t.loadingEvent)){const n=t.loadingEvent.addEventListener((function(){n(),e._zoomPromise===s&&(e._zoomTarget=t.entities.values.slice(0))}))}else Array.isArray(t)?e._zoomTarget=t.slice(0):(t=(0,r.A)(t.values,t),(0,o.A)(t.entities)&&(t=t.entities.values),Array.isArray(t)?e._zoomTarget=t.slice(0):e._zoomTarget=[t])})),e.scene.requestRender(),s}function ue(e){e._zoomPromise=void 0,e._zoomTarget=void 0,e._zoomOptions=void 0}function de(e){const t=e._zoomPromise;(0,o.A)(t)&&(ue(e),e._completeZoom(!1))}Object.defineProperties(ce.prototype,{container:{get:function(){return this._container}},creditDisplay:{get:function(){return this._cesiumWidget.creditDisplay}},bottomContainer:{get:function(){return this._bottomContainer}},cesiumWidget:{get:function(){return this._cesiumWidget}},selectionIndicator:{get:function(){return this._selectionIndicator}},infoBox:{get:function(){return this._infoBox}},geocoder:{get:function(){return this._geocoder}},homeButton:{get:function(){return this._homeButton}},sceneModePicker:{get:function(){return this._sceneModePicker}},projectionPicker:{get:function(){return this._projectionPicker}},baseLayerPicker:{get:function(){return this._baseLayerPicker}},navigationHelpButton:{get:function(){return this._navigationHelpButton}},animation:{get:function(){return this._animation}},timeline:{get:function(){return this._timeline}},fullscreenButton:{get:function(){return this._fullscreenButton}},vrButton:{get:function(){return this._vrButton}},dataSourceDisplay:{get:function(){return this._dataSourceDisplay}},entities:{get:function(){return this._dataSourceDisplay.defaultDataSource.entities}},dataSources:{get:function(){return this._dataSourceCollection}},canvas:{get:function(){return this._cesiumWidget.canvas}},scene:{get:function(){return this._cesiumWidget.scene}},shadows:{get:function(){return this.scene.shadowMap.enabled},set:function(e){this.scene.shadowMap.enabled=e}},terrainShadows:{get:function(){return this.scene.globe.shadows},set:function(e){this.scene.globe.shadows=e}},shadowMap:{get:function(){return this.scene.shadowMap}},imageryLayers:{get:function(){return this.scene.imageryLayers}},terrainProvider:{get:function(){return this.scene.terrainProvider},set:function(e){this.scene.terrainProvider=e}},camera:{get:function(){return this.scene.camera}},postProcessStages:{get:function(){return this.scene.postProcessStages}},clock:{get:function(){return this._clockViewModel.clock}},clockViewModel:{get:function(){return this._clockViewModel}},screenSpaceEventHandler:{get:function(){return this._cesiumWidget.screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._cesiumWidget.targetFrameRate},set:function(e){this._cesiumWidget.targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._cesiumWidget.useDefaultRenderLoop},set:function(e){this._cesiumWidget.useDefaultRenderLoop=e}},resolutionScale:{get:function(){return this._cesiumWidget.resolutionScale},set:function(e){this._cesiumWidget.resolutionScale=e}},useBrowserRecommendedResolution:{get:function(){return this._cesiumWidget.useBrowserRecommendedResolution},set:function(e){this._cesiumWidget.useBrowserRecommendedResolution=e}},allowDataSourcesToSuspendAnimation:{get:function(){return this._allowDataSourcesToSuspendAnimation},set:function(e){this._allowDataSourcesToSuspendAnimation=e}},trackedEntity:{get:function(){return this._trackedEntity},set:function(e){if(this._trackedEntity!==e){this._trackedEntity=e,de(this);const t=this.scene,n=t.mode;(0,o.A)(e)&&(0,o.A)(e.position)?this._needTrackedEntityUpdate=!0:(this._needTrackedEntityUpdate=!1,n!==w.A.COLUMBUS_VIEW&&n!==w.A.SCENE2D||(t.screenSpaceCameraController.enableTranslate=!0),n!==w.A.COLUMBUS_VIEW&&n!==w.A.SCENE3D||(t.screenSpaceCameraController.enableTilt=!0),this._entityView=void 0,this.camera.lookAtTransform(E.A.IDENTITY)),this._trackedEntityChanged.raiseEvent(e),this.scene.requestRender()}}},selectedEntity:{get:function(){return this._selectedEntity},set:function(e){if(this._selectedEntity!==e){this._selectedEntity=e;const t=(0,o.A)(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;(0,o.A)(e)?(0,o.A)(t)&&t.animateAppear():(0,o.A)(t)&&t.animateDepart(),this._selectedEntityChanged.raiseEvent(e)}}},selectedEntityChanged:{get:function(){return this._selectedEntityChanged}},trackedEntityChanged:{get:function(){return this._trackedEntityChanged}},clockTrackedDataSource:{get:function(){return this._clockTrackedDataSource},set:function(e){this._clockTrackedDataSource!==e&&(this._clockTrackedDataSource=e,re(this._timeline,this.clock,e))}}}),ce.prototype.extend=function(e,t){if(!(0,o.A)(e))throw new h.A("mixin is required.");e(this,t)},ce.prototype.resize=function(){const e=this._cesiumWidget,t=this._container,n=t.clientWidth,i=t.clientHeight,r=(0,o.A)(this._animation),s=(0,o.A)(this._timeline);if(e.resize(),n===this._lastWidth&&i===this._lastHeight)return;const a=i-125,c=this._baseLayerPickerDropDown;(0,o.A)(c)&&(c.style.maxHeight=`${a}px`),(0,o.A)(this._geocoder)&&(this._geocoder.searchSuggestionsContainer.style.maxHeight=`${a}px`),(0,o.A)(this._infoBox)&&(this._infoBox.viewModel.maxHeight=a);const l=this._timeline;let u,d=0,h=0,A=0;if(r&&"hidden"!==window.getComputedStyle(this._animation.container).visibility){const e=this._lastWidth;u=this._animation.container,n>900?(d=169,e<=900&&(u.style.width="169px",u.style.height="112px",this._animation.resize())):n>=600?(d=136,(e<600||e>900)&&(u.style.width="136px",u.style.height="90px",this._animation.resize())):(d=106,(e>600||0===e)&&(u.style.width="106px",u.style.height="70px",this._animation.resize())),h=d+5}if(s&&"hidden"!==window.getComputedStyle(this._timeline.container).visibility){const e=this._fullscreenButton,t=this._vrButton,n=l.container,i=n.style;A=n.clientHeight+3,i.left=`${d}px`;let r=0;(0,o.A)(e)&&(r+=e.container.clientWidth),(0,o.A)(t)&&(r+=t.container.clientWidth),i.right=`${r}px`,l.resize()}this._bottomContainer.style.left=`${h}px`,this._bottomContainer.style.bottom=`${A}px`,this._lastWidth=n,this._lastHeight=i},ce.prototype.forceResize=function(){this._lastWidth=0,this.resize()},ce.prototype.render=function(){this._cesiumWidget.render()},ce.prototype.isDestroyed=function(){return!1},ce.prototype.destroy=function(){let e;this.screenSpaceEventHandler.removeInputAction(T.A.LEFT_CLICK),this.screenSpaceEventHandler.removeInputAction(T.A.LEFT_DOUBLE_CLICK);const t=this.dataSources,n=t.length;for(e=0;e<n;e++)this._dataSourceRemoved(t,t.get(e));return this._dataSourceRemoved(void 0,this._dataSourceDisplay.defaultDataSource),this._container.removeChild(this._element),this._element.removeChild(this._toolbar),this._eventHelper.removeAll(),(0,o.A)(this._geocoder)&&(this._geocoder=this._geocoder.destroy()),(0,o.A)(this._homeButton)&&(this._homeButton=this._homeButton.destroy()),(0,o.A)(this._sceneModePicker)&&(this._sceneModePicker=this._sceneModePicker.destroy()),(0,o.A)(this._projectionPicker)&&(this._projectionPicker=this._projectionPicker.destroy()),(0,o.A)(this._baseLayerPicker)&&(this._baseLayerPicker=this._baseLayerPicker.destroy()),(0,o.A)(this._animation)&&(this._element.removeChild(this._animation.container),this._animation=this._animation.destroy()),(0,o.A)(this._timeline)&&(this._timeline.removeEventListener("settime",ee,!1),this._element.removeChild(this._timeline.container),this._timeline=this._timeline.destroy()),(0,o.A)(this._fullscreenButton)&&(this._fullscreenSubscription.dispose(),this._element.removeChild(this._fullscreenButton.container),this._fullscreenButton=this._fullscreenButton.destroy()),(0,o.A)(this._vrButton)&&(this._vrSubscription.dispose(),this._vrModeSubscription.dispose(),this._element.removeChild(this._vrButton.container),this._vrButton=this._vrButton.destroy()),(0,o.A)(this._infoBox)&&(this._element.removeChild(this._infoBox.container),this._infoBox=this._infoBox.destroy()),(0,o.A)(this._selectionIndicator)&&(this._element.removeChild(this._selectionIndicator.container),this._selectionIndicator=this._selectionIndicator.destroy()),this._destroyClockViewModel&&(this._clockViewModel=this._clockViewModel.destroy()),this._dataSourceDisplay=this._dataSourceDisplay.destroy(),this._cesiumWidget=this._cesiumWidget.destroy(),this._destroyDataSourceCollection&&(this._dataSourceCollection=this._dataSourceCollection.destroy()),(0,S.A)(this)},ce.prototype._dataSourceAdded=function(e,t){t.entities.collectionChanged.addEventListener(ce.prototype._onEntityCollectionChanged,this)},ce.prototype._dataSourceRemoved=function(e,t){const n=t.entities;n.collectionChanged.removeEventListener(ce.prototype._onEntityCollectionChanged,this),(0,o.A)(this.trackedEntity)&&n.getById(this.trackedEntity.id)===this.trackedEntity&&(this.trackedEntity=void 0),(0,o.A)(this.selectedEntity)&&n.getById(this.selectedEntity.id)===this.selectedEntity&&(this.selectedEntity=void 0)},ce.prototype._onTick=function(e){const t=e.currentTime,n=this._dataSourceDisplay.update(t);this._allowDataSourcesToSuspendAnimation&&(this._clockViewModel.canAnimate=n);const i=this._entityView;if((0,o.A)(i)){const e=this._trackedEntity;this._dataSourceDisplay.getBoundingSphere(e,!1,Z)===C.A.DONE&&i.update(t,Z)}let s,a=!1;const c=this.selectedEntity,l=(0,o.A)(c)&&this._enableInfoOrSelection;l&&c.isShowing&&c.isAvailable(t)&&(this._dataSourceDisplay.getBoundingSphere(c,!0,Z)!==C.A.FAILED?s=Z.center:(0,o.A)(c.position)&&(s=c.position.getValue(t,s)),a=(0,o.A)(s));const d=(0,o.A)(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;(0,o.A)(d)&&(d.position=u.A.clone(s,d.position),d.showSelection=l&&a,d.update());const h=(0,o.A)(this._infoBox)?this._infoBox.viewModel:void 0;(0,o.A)(h)&&(h.showInfo=l,h.enableCamera=a,h.isCameraTracking=this.trackedEntity===this.selectedEntity,l?(h.titleText=(0,r.A)(c.name,c.id),h.description=v.A.getValueOrDefault(c.description,t,"")):(h.titleText="",h.description=""))},ce.prototype._onEntityCollectionChanged=function(e,t,n){const i=n.length;for(let e=0;e<i;e++){const t=n[e];this.trackedEntity===t&&(this.trackedEntity=void 0),this.selectedEntity===t&&(this.selectedEntity=void 0)}},ce.prototype._onInfoBoxCameraClicked=function(e){if(e.isCameraTracking&&this.trackedEntity===this.selectedEntity)this.trackedEntity=void 0;else{const e=this.selectedEntity.position;(0,o.A)(e)?this.trackedEntity=this.selectedEntity:this.zoomTo(this.selectedEntity)}},ce.prototype._clearTrackedObject=function(){this.trackedEntity=void 0},ce.prototype._onInfoBoxClockClicked=function(e){this.selectedEntity=void 0},ce.prototype._clearObjects=function(){this.trackedEntity=void 0,this.selectedEntity=void 0},ce.prototype._onDataSourceChanged=function(e){this.clockTrackedDataSource===e&&re(this.timeline,this.clock,e)},ce.prototype._onDataSourceAdded=function(e,t){this._automaticallyTrackDataSourceClocks&&(this.clockTrackedDataSource=t);const n=t.entities.id,i=this._eventHelper.add(t.changedEvent,ce.prototype._onDataSourceChanged,this);this._dataSourceChangedListeners[n]=i},ce.prototype._onDataSourceRemoved=function(e,t){const n=this.clockTrackedDataSource===t,i=t.entities.id;if(this._dataSourceChangedListeners[i](),this._dataSourceChangedListeners[i]=void 0,n){const t=e.length;this._automaticallyTrackDataSourceClocks&&t>0?this.clockTrackedDataSource=e.get(t-1):this.clockTrackedDataSource=void 0}},ce.prototype.zoomTo=function(e,t){return le(this,e,{offset:t},!1)},ce.prototype.flyTo=function(e,t){return le(this,e,t,!0)},ce.prototype._postRender=function(){!function(e){const t=e._zoomTarget;if(!(0,o.A)(t)||e.scene.mode===w.A.MORPHING)return;const n=e.scene,s=n.camera,a=(0,r.A)(e._zoomOptions,{});let c;if(t instanceof P.A||t instanceof O.A)return t._readyPromise.then((function(){const n=t.boundingSphere;(0,o.A)(a.offset)||(a.offset=new L.A(0,-.5,n.radius)),c={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?s.flyToBoundingSphere(t.boundingSphere,c):(s.viewBoundingSphere(n,a.offset),s.lookAtTransform(E.A.IDENTITY),e._completeZoom(!0)),ue(e)})).catch((()=>{de(e)}));if(t instanceof D.A)return t._readyPromise.then((function(){const n=t.boundingSphere;(0,o.A)(a.offset)||(a.offset=new L.A(0,-.5,n.radius)),c={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?s.flyToBoundingSphere(n,c):(s.viewBoundingSphere(n,a.offset),s.lookAtTransform(E.A.IDENTITY),e._completeZoom(!0)),ue(e)}));if(t instanceof N.A)return c={destination:n.mapProjection.ellipsoid.cartographicToCartesian(t),duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?s.flyTo(c):(s.setView(c),e._completeZoom(!0)),void ue(e);const l=t,u=[];for(let t=0,n=l.length;t<n;t++){const n=e._dataSourceDisplay.getBoundingSphere(l[t],!1,Z);if(n===C.A.PENDING)return;n!==C.A.FAILED&&u.push(i.A.clone(Z))}if(0===u.length)return void de(e);e.trackedEntity=void 0;const d=i.A.fromBoundingSpheres(u);e._zoomIsFlight?(ue(e),s.flyToBoundingSphere(d,{duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)},offset:a.offset})):(s.viewBoundingSphere(d,a.offset),s.lookAtTransform(E.A.IDENTITY),ue(e),e._completeZoom(!0))}(this),function(e){if(!e._needTrackedEntityUpdate)return;const t=e._trackedEntity,n=e.clock.currentTime,i=v.A.getValueOrUndefined(t.position,n);if(!(0,o.A)(i))return;const r=e.scene,s=e._dataSourceDisplay.getBoundingSphere(t,!1,Z);if(s===C.A.PENDING)return;const a=r.mode;a!==w.A.COLUMBUS_VIEW&&a!==w.A.SCENE2D||(r.screenSpaceCameraController.enableTranslate=!1),a!==w.A.COLUMBUS_VIEW&&a!==w.A.SCENE3D||(r.screenSpaceCameraController.enableTilt=!1);const c=s!==C.A.FAILED?Z:void 0;e._entityView=new M.A(t,r,r.mapProjection.ellipsoid),e._entityView.update(n,c),e._needTrackedEntityUpdate=!1}(this)};const he=ce},277441:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(605971),r=n(419061),s=n(955943),a=n(914684);const c=function(e,t){if(!(0,i.A)(e))throw new o.A("func is required.");t=(0,r.A)(t,!0);const n=new s.A,c=new s.A;function l(){if(!l.canExecute)throw new o.A("Cannot execute command, canExecute is false.");const t={args:arguments,cancel:!1};let i;return n.raiseEvent(t),t.cancel||(i=e.apply(null,arguments),c.raiseEvent(i)),i}return l.canExecute=t,a.A.track(l,["canExecute"]),Object.defineProperties(l,{beforeExecute:{value:n},afterExecute:{value:c}}),l}},618168:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(914684);const o=function(e,t,n,o,r){return n.call(o,e[t]),i.A.getObservable(e,t).subscribe(n,o,r)}}}]);