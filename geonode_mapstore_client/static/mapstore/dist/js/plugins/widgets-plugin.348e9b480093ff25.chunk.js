/*! For license information please see widgets-plugin.348e9b480093ff25.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[53709],{41150:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>E});var o=n(273517),r=n.n(o),i=n(605556),u=n.n(i),a=n(811668),c=n(801081),l=n(916589),s=n(393149),f=n(131127),d=n(737704),p=n(71665),y=n(325149),g=n(352975),v=n(697950),b=n(639996),m=n(97401);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function w(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,k(o.key),o)}}function O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(O=function(){return!!t})()}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return(e=k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}var I=(0,l.compose)((0,a.connect)((0,c.Mz)(f.fD,d.uT,d.E5,d.Og,d.lo,(function(t){return(0,m.o7)(t,{right:!0})}),(function(t){return t.browser&&t.browser.mobile}),d.Qs,d.ry,(function(t,e,n,o,r,i,u,a,c){return{id:t,widgets:e,layouts:n,maximized:o,dependencies:r,mapLayout:i,isMobileAgent:u,dropdownWidgets:a,recordZoomLoading:c}})),{editWidget:p.Pd,updateWidgetProperty:p.Dr,exportCSV:p.HX,toggleCollapse:p.Ye,toggleCollapseAll:p.rX,toggleMaximize:p.th,deleteWidget:p.uv,onLayoutChange:p.ZJ}),(0,l.compose)((0,v.Ty)({debounceTime:20,closest:!0,querySelector:".fill"}),(0,v.Qy)({overrideWidthProvider:!1}),(0,l.withProps)((function(t){var e,n=t.isMobileAgent,o=t.width,r=t.mapLayout,i=t.singleWidgetLayoutBreakpoint,u=void 0===i?1024:i,a=null!==(e=null==r?void 0:r.right)&&void 0!==e?e:0,c=n||o<=u,l=c?0:500;return{backgroundSelectorOffset:c?n?40:60:0,isSingleWidgetLayout:c,viewWidth:o-(a+55+l),rightOffset:a,leftOffset:l,singleWidgetLayoutBreakpoint:u}})),(0,l.withProps)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.rowHeight,o=t.cols,r=t.height,i=t.maximized,u=t.leftOffset,a=t.viewWidth,c=t.isSingleWidgetLayout,l=t.singleWidgetLayoutMaxHeight,s=void 0===l?300:l,f=t.singleWidgetLayoutMinHeight,d=void 0===f?200:f,p=t.backgroundSelectorOffset,y=c?(r-p-120)/2:r-p-120,g=c?1:4,v=c?y>s?s:y<d?d:s:Math.floor(y/g-20),b=null!=i&&i.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},m=null!=i&&i.widget?{width:e,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{},h=e?{width:a-1}:{},w=c?v:Math.floor((r-100)/(v+10))*(v+10);return x(x({rowHeight:c?v:n||v,className:"on-map",breakpoints:c?{xxs:0}:{md:0},cols:o||{md:6,xxs:1}},h),{},{useDefaultWidthProvider:!1,style:x({left:u+"px",bottom:65+p,height:w,width:a+"px",position:"absolute",zIndex:50},b)},m)}))),(0,l.compose)((0,l.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),(0,y.A)("toolsOptions",{asObject:!0}),(0,l.compose)((0,a.connect)((0,c.Mz)(d.u1,(function(t){return{tray:t}}))),(0,l.withPropsOnChange)(["toolsOptions","tray"],(function(t){var e=t.toolsOptions,n=t.tray;return{toolsOptions:e?x(x({},e),{},{showCollapse:e.showCollapse&&n}):e}}))),(0,l.withPropsOnChange)(["widgets","toolsOptions"],(function(t){var e=t.widgets,n=void 0===e?[]:e,o=t.toolsOptions,r=void 0===o?{}:o;return{widgets:n.filter((function(t){return!t.hide||r.seeHidden}))}})),(0,l.compose)((0,l.withState)("activeWidget","setActiveWidget",!1),(0,l.withHandlers)({toggleCollapse:function(t){return function(e){var n,o=null===(n=t.widgets)||void 0===n?void 0:n.find((function(e){var n;return e.id===(null===(n=t.activeWidget)||void 0===n?void 0:n.id)}));t.isSingleWidgetLayout&&o?t.toggleCollapseAll():t.toggleCollapse(e)}}}),(0,l.withPropsOnChange)(["dropdownWidgets","toolsOptions"],(function(t){var e=t.dropdownWidgets,n=void 0===e?[]:e,o=t.toolsOptions,r=void 0===o?{}:o;return{dropdownWidgets:n.filter((function(t){return!t.hide||r.seeHidden}))}})),(0,l.withPropsOnChange)(["widgets","isSingleWidgetLayout","id"],(function(t){var e=t.widgets,n=t.isSingleWidgetLayout,o=t.activeWidget,r=t.setActiveWidget;e.length&&n&&!o&&r(e[0])})),(0,l.withPropsOnChange)(["activeWidget","isSingleWidgetLayout","widgets"],(function(t){var e,n=t.activeWidget,o=t.dropdownWidgets,r=t.isSingleWidgetLayout,i=t.widgets,u=t.toolsOptions,a=t.layouts,c=t.setActiveWidget;if(n&&r&&i.length){var l,s=x(x({},n),{},{options:x(x({activeWidget:n,dropdownWidgets:o},null!==(l=n.options)&&void 0!==l?l:{}),{},{singleWidget:!0,setActiveWidget:c})});return{canEdit:!1,toolsOptions:x(x({},u),{},{showPin:!1}),layouts:x(x({},a),{},{xxs:(e=a.xxs.map((function(t){return x(x({},t),{},{h:1,w:1,x:0,y:0})})),function(t){if(Array.isArray(t))return j(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),widgets:[s]}}return!1})))))(b.A),C=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=S(e),function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,O()?Reflect.construct(e,n||[],S(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),n=e,(o=[{key:"componentDidMount",value:function(){var t;this.props.onMount(null===(t=this.props.pluginCfg)||void 0===t?void 0:t.defaults)}},{key:"render",value:function(){return this.props.enabled?r().createElement(I,this.props):null}}])&&w(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r().Component);A(C,"propTypes",{enabled:u().bool,enableZoomInTblWidget:u().bool}),A(C,"defaultProps",{enabled:!0,enableZoomInTblWidget:!0});var D=(0,a.connect)(null,{onMount:p.Ts})((0,g.A)(C));const E=(0,s.i1)("WidgetsPlugin",{component:D,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:n(795153).A},epics:n(779956).Ay})},352975:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var o=n(801081),r=n(811668),i=n(97401);const u=(0,r.connect)((0,o.Mz)(i.wd,i.lU,(function(t,e){return{enabled:!t&&!e}})),{})},325149:(t,e,n)=>{"use strict";n.d(e,{A:()=>O});var o=n(916589),r=n(811668),i=n(801081),u=n(131127),a=n(501719),c=n(858156),l=n.n(c),s=n(499084),f=n.n(s),d=n(473916),p=n.n(d),y=n(185015),g=n.n(y),v=n(956449),b=n.n(v);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var h=function(t){var e=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var r=f()(t),i=o;return r.length>1&&"__OR__"===r[0]&&(i=function(t,e){return t||e},r=r.slice(1)),r.map((function(t){var r=t;if(b()(r))return h({accessInfo:e,postProcessValue:n,reduceFun:o})(r);var i=!1;r&&g()(r)&&r.startsWith("!")&&(i=!0,r=r.substr(1));var u=function(t){return i?!t:t},a=g()(r)&&r.split(":");if(a&&a[0]){var c=a[0].split(/\!\=\=?/),s=a[0].split(/\=\=?\=?/);return c.length>1?u(n(l()(e,c[0]),r)!==c[1]):s.length>1?u(n(l()(e,s[0]),r)===s[1]):u(n(l()(e,a[0]),r))}return r})).reduce(i||function(t,e){return t&&e})}};const w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.asObject,r=void 0!==n&&n,i=e.postProcessValue,u=void 0===i?function(t){return t}:i,a=e.reduceFun,c=e.accessInfo,l=void 0===c?"accessInfo":c;return(0,o.withPropsOnChange)([t,l],(function(){var e,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={},n=t,o=r?p()(i[t],h({accessInfo:i[l],postProcessValue:u,reduceFun:a})):h({accessInfo:i[l],postProcessValue:u,reduceFun:a})(i[t]),(n=function(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}))},O=function(){return(0,o.compose)((0,r.connect)((0,i.Mz)(u.fD,u.ii,a.dt,(function(t,e,n){return{accessInfo:{mapId:t,mapInfo:e,user:n}}}))),w.apply(void 0,arguments))}},97401:(t,e,n)=>{"use strict";n.d(e,{MA:()=>P,SU:()=>O,iS:()=>v,lU:()=>h,o:()=>g,o7:()=>b,si:()=>S,tV:()=>w,u$:()=>y,wd:()=>m});var o=n(400912),r=n.n(o),i=n(150104),u=n.n(i),a=n(131127),c=n(6683),l=n(779893);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){return t.maplayout&&t.maplayout.layout||{}},g=function(t){return t.maplayout&&t.maplayout.boundingMapRect||{}},v=function(t){return t.maplayout&&t.maplayout.boundingSidebarRect||{}},b=u()((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=y(t),r=v(t);return o&&Object.keys(o).filter((function(t){return e[t]})).reduce((function(t,e){var i;return d(d({},t),{},p({},e,n&&null!==(i=r[e])&&void 0!==i?i:o[e]))}),{})||{}}),(function(t,e,n){return JSON.stringify(y(t))+JSON.stringify(v(t))+JSON.stringify(e)+(n?"_isDock":"")})),m=function(t){var e;return!(null===(e=y(t))||void 0===e||!e.rightPanel)},h=function(t){var e,n=l.Ay.getConfigProp("mapLayout")||c.OH;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=y(t);return!!r()(e.filter((function(t){return n[t.key]})).map((function(t){return"not"===t.type?n[t.key]!==t.value&&n[t.key]:n[t.key]===t.value})))}(t,[{key:"bottom",value:null!==(e=null==n?void 0:n.bottom.sm)&&void 0!==e?e:0,type:"not"}])},w=function(t){var e=(0,a.mg)(t),n=g(t);return n&&e&&e.size&&{left:(0,c.n_)(n.left,e.size.width),bottom:(0,c.n_)(n.bottom,e.size.height),right:(0,c.n_)(n.right,e.size.width),top:(0,c.n_)(n.top,e.size.height)}},O=function(t){var e,n;return null!==(e=null==t||null===(n=t.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==e?e:{left:[],right:[]}},S=function(t){return b(t,{height:!0,right:!0},!0)},P=function(t){return b(t,{right:!0},!0)}},791936:function(t,e,n){var o,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=/constructor/i.test(t.HTMLElement)||t.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},c=function(t){setTimeout((function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},s=function(e,s,f){f||(e=l(e));var d,p=this,y="application/octet-stream"===e.type,g=function(){!function(t,e){for(var n=(e=[].concat(e)).length;n--;){var o=t["on"+e[n]];if("function"==typeof o)try{o.call(t,t)}catch(t){a(t)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return d=n().createObjectURL(e),void setTimeout((function(){var t,e;o.href=d,o.download=s,t=o,e=new MouseEvent("click"),t.dispatchEvent(e),g(),c(d),p.readyState=p.DONE}));!function(){if((u||y&&i)&&t.FileReader){var o=new FileReader;return o.onloadend=function(){var e=u?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,g()},o.readAsDataURL(e),void(p.readyState=p.INIT)}d||(d=n().createObjectURL(e)),y?t.location.href=d:t.open(d,"_blank")||(t.location.href=d),p.readyState=p.DONE,g(),c(d)}()},f=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,n){return new s(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=r:null!==n.amdD&&null!==n.amdO&&(void 0===(o=function(){return r}.call(e,n,e,t))||(t.exports=o))}}]);