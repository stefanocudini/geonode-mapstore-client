(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[78077],{717140:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>m,Jb:()=>o,Kf:()=>c,Lu:()=>i,Ly:()=>y,Mm:()=>v,Mr:()=>h,Ne:()=>f,Nu:()=>T,Q4:()=>a,S$:()=>d,V9:()=>n,VX:()=>b,ZM:()=>l,d:()=>S,et:()=>g,jx:()=>P,tq:()=>E,uw:()=>I,vK:()=>p,vw:()=>A});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",d="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function p(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function g(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function m(){return{type:l}}function b(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function S(e){return{type:i,currentStyle:e}}var E=function(e){return b("clean","",e,[],{})};function P(){return{type:d}}function I(e){return{type:c,snappingLayer:e}}function A(){return{type:f}}function T(e,t,r){return{type:y,value:e,prop:t,pluginCfg:r}}},653077:(e,t,r)=>{"use strict";r.d(t,{V:()=>P,a:()=>I});var n=r(904059),o=r(375482),i=r(142974),a=r(181817),l=r(995531),u=r(23412),s=r.n(u),c=r(738805),f=r.n(c),d=r(79738);const y={describeCoverage:function(e,t){var r=s().parse((0,d.t)(e),!0),n=s().format(Object.assign({},r,{query:Object.assign({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l.A.get(n).then(function(e){var t;return f().parseString(e.data,{explicitArray:!1},function(e,r){t=r}),t})}};var p=r(112585),g=r(858156),v=r.n(g),m=r(112206);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t,r){return(t=function(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t,r){return function(i){return o.Ay.describeLayer(e,t.name,r).then(function(r){return r&&"WFS"===r.owsType?a.sq(e,r.name).then(function(e){return r.geometryType=(0,m.ud)(e),i((0,n.OK)(t.id,"id",{describeLayer:r,describeFeatureType:e}))}).catch(function(){return i((0,n.OK)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))}):(r&&"WCS"===r.owsType&&y.describeCoverage(e,r.name).then(function(e){var o=v()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map(function(e,t){return t+1+""}),i((0,n.OK)(t.id,"id",{describeLayer:r,describeCoverage:e}))}).catch(function(){return i((0,n.OK)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))}),i((0,n.OK)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))}).catch(function(e){return i((0,n.OK)(t.id,"id",{describeLayer:{error:e.status}}))})}}function I(e){var t=(0,p.wk)(e);return function(r){return r((0,n.OK)(e.id,"id",{capabilitiesLoading:!0})),o.Ay.getCapabilities(t).then(function(t){var a=o.Ay.parseLayerCapabilities(t,e);r(a?(0,n.OK)(e.id,"id",S(S({},(0,i.e9)(a)),{},{capabilitiesLoading:null})):(0,n.OK)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))}).catch(function(t){r((0,n.OK)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))})}}},527097:(e,t,r)=>{"use strict";r.d(t,{N:()=>m});var n=r(185015),o=r.n(n),i=r(269843),a=r.n(i),l=r(45388),u=r(415120),s=r(995531),c=r(764932),f=r(421027);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=i.attachJSON,p=i.itemId,v=void 0===p?null:p,m=(0,u.vg)(r,e,t)?function(t){return(0,u.vg)(r,e,t)}:function(t){return l.Observable.defer(function(){return s.A.get(e,{params:t})})};return d&&!(0,u.kY)(t)?l.Observable.forkJoin(m(t),m(g(g({},t),{},{info_format:null!=r&&null!==(n=r.infoFormats)&&void 0!==n&&n.includes(f.iv)?f.iv:f.xs})).map(function(e){return e.data}).catch(function(){return l.Observable.of({})})).map(function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return g(g({},o),{},{features:i&&i.features&&i.features.filter(function(e){return!!a()(v)||e.id===v}),featuresCrs:i&&i.crs&&(0,c.parseURN)(i.crs)})}):m(t).map(function(e){return e.data}).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:o()(e)?e:g(g({},e),{},{features:e.features&&e.features.filter(function(e){return!v||e.id===v})}),features:e.features&&e.features.filter(function(e){return!v||e.id===v}),featuresCrs:e&&e.crs&&(0,c.parseURN)(e.crs)}})}},267224:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var n=r(273517),o=r.n(n),i=r(8117),a=r(553493),l=r(551783),u=["debounceTime"],s=["fallbackValue"];function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(null,arguments)}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=(0,a.A)("onChange","value")((0,l.A)("placeholder")(function(e){e.debounceTime;var t=y(e,u);return o().createElement(i.MJ,d({},t,{onChange:function(e){return t.onChange(e.target.value)}}))}));const g=function(e){var t,r,i=e.fallbackValue,a=y(e,s),l=c((0,n.useState)(null!==(t=a.value)&&void 0!==t?t:i),2),u=l[0],f=l[1],g=c((0,n.useState)(null!==(r=a.value)&&void 0!==r?r:i),2),v=g[0],m=g[1],b=c((0,n.useState)(0),2),h=b[0],S=b[1],E=(0,n.useRef)(!1),P=(0,n.useRef)();function I(e){var t=!isNaN(parseFloat(e));return t&&void 0!==a.min&&e<a.min?{changed:!0,value:a.min}:t&&void 0!==a.max&&e>a.max?{changed:!0,value:a.max}:{changed:!1,value:t?parseFloat(e):e}}return P.current=u,(0,n.useEffect)(function(){var e;P.current!==a.value&&f(null!==(e=a.value)&&void 0!==e?e:i)},[a.value]),o().createElement(p,d({},a,{key:h,value:u,onChange:function(e){if(E.current){var t=e,r=!0;if("number"===a.type){var n=I(t).changed;(""===t||n)&&(r=!1)}f(t),r&&a.onChange(t)}},onChangeNoDebounce:m,onBlur:function(){if("number"===a.type)if(""===v)a.onChange(void 0),f(i),S(function(e){return e+1});else{var e=I(v).value;a.onChange(e),S(function(e){return e+1}),f(e)}E.current=!1},onFocus:function(){E.current=!0}}))}},209250:(e,t,r)=>{"use strict";r.d(t,{A:()=>F});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),l=r(8117),u=r(348317),s=r(256951),c=r(8571);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function v(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=p(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement(s.A,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:5}},buttons:[{glyph:this.props.checked?"chevron-down":"chevron-left",visible:!0,disabled:this.props.disabled,tooltip:this.props.checked?o().createElement(c.A,{msgId:"collapse"}):o().createElement(c.A,{msgId:"expand"}),onClick:function(){return e.props.onClick(!e.props.checked)}}]})}}])&&d(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);v(b,"propTypes",{checked:a().bool,disabled:a().bool,onClick:a().func}),v(b,"defaultProps",{checked:!1,disabled:!1,onClick:function(){}});const h=b;var S=r(711030),E=r(774177);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function G(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}var C=function(){return o().createElement(S.A,{className:"square-button-sm no-border switch-error"},o().createElement(l.e6,{glyph:"exclamation-mark",className:"text-danger"}))},L=function(){return o().createElement("div",{className:"switch-loading"},o().createElement(E.A,{size:"small"}))},j=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return G(e=function(e,t,r){return t=T(t),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(n=[{key:"renderHeader",value:function(){var e=this,t=this.props.useToolbar?h:u.A;return o().createElement("div",null,o().createElement("div",{className:"pull-left"},this.props.title||this.props.header),o().createElement("div",{className:"pull-right"},this.props.locked?null:o().createElement(t,{disabled:this.props.disabled,checked:this.props.expanded,onClick:function(t){e.props.disabled||e.props.onSwitch(t)}}),this.props.error?o().createElement(C,null):null,this.props.loading?o().createElement(L,null):null,this.props.buttons.length>0&&this.props.expanded&&o().createElement(s.A,{btnDefaultProps:{className:"square-button-sm no-border"},buttons:this.props.buttons})))}},{key:"render",value:function(){return o().createElement(l.Zk,{className:"mapstore-switch-panel",collapsible:!0,expanded:this.props.expanded,defaultExpanded:this.props.defaultExpanded,header:this.renderHeader()},this.props.children)}}])&&I(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);G(j,"propTypes",{header:a().node,title:a().oneOfType([a().string,a().node]),defaultExpanded:a().string,expanded:a().bool,onSwitch:a().func,locked:a().bool,buttons:a().array,loading:a().bool,disabled:a().bool,error:a().any,useToolbar:a().bool}),G(j,"defaultProps",{title:"",disabled:!1,expanded:!1,onSwitch:function(){},locked:!1,buttons:[],useToolbar:!1});const F=j},109351:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(273517),o=r.n(n),i=r(76941),a=r(8571),l=r(711030);const u=function(e){var t=e.title,r=void 0===t?o().createElement(a.A,{msgId:"warning"}):t,n=e.cancelText,u=void 0===n?o().createElement(a.A,{msgId:"no"}):n,s=e.confirmText,c=void 0===s?o().createElement(a.A,{msgId:"yes"}):s,f=e.onClose,d=void 0===f?function(){}:f,y=e.onConfirm,p=void 0===y?function(){}:y,g=e.show,v=e.children,m=e.className,b=void 0===m?"":m,h=e.buttonSize,S=e.running,E=void 0!==S&&S,P=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(l.A,{disabled:E,className:b,key:"confirmButton",bsStyle:"primary",bsSize:h,onClick:function(){p()}},c),o().createElement(l.A,{key:"cancelButton",bsSize:h,disabled:E,onClick:d},u));return o().createElement(i.A,{show:g,onHide:d},o().createElement(i.A.Header,{key:"dialogHeader",closeButton:!0},o().createElement(i.A.Title,null,r)),o().createElement(i.A.Body,null,v),o().createElement(i.A.Footer,null,P))}},545567:(e,t,r)=>{"use strict";r.d(t,{EV:()=>H,Gw:()=>q,o0:()=>_,sq:()=>B});var n=r(23412),o=r.n(n),i=r(956449),a=r.n(i),l=r(499084),u=r.n(l),s=r(269843),c=r.n(s),f=r(223805),d=r.n(f),y=r(45388),p=r.n(y),g=r(738805),v=r(692114),m=r(995531),b=r(102685),h=r(112585),S=r(492312),E=r(193275),P=r(79738),I=r(584153),A=["totalFeatures","features"],T=["sortOptions","propertyName"];function O(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){F(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t,r){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=(0,E.A)({wfsVersion:"1.1.0"}),R=N.getFeature,D=N.query,x=N.sortBy,k=N.propertyName,M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,b.zD)(t,r),a=o().parse((0,P.t)(e),!0),l=d()(a.query)?a.query:{};l.service="WFS",l.outputFormat=n;var u=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:l});return r.layer&&"vector"===r.layer.type?p().Observable.defer(function(){return new Promise(function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,b.Jt)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort(function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i}),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)})}):{data:i,queryString:u}},_=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(o.layer&&"vector"===o.layer.type)return M(e,t,o,i);var a=M(e,t,o,i),l=a.data,u=a.queryString,s=(0,I.WZ)((null===(r=o.layer)||void 0===r||null===(r=r.security)||void 0===r?void 0:r.sourceId)||(null===(n=o.security)||void 0===n?void 0:n.sourceId));return p().Observable.defer(function(){return m.A.post(u,l,{timeout:6e4,responseType:"arraybuffer",headers:j({Accept:"application/xml","Content-Type":"application/xml"},s)})})},W=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return M(e,t,r);var n=M(e,t,r),o=n.data,i=n.queryString;return p().Observable.defer(function(){return m.A.post(i,o,j({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))}).let(S.m9).map(function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=C(e,A),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>t&&i===o+r.length&&t===r.length?j(j({},n),{},{features:r,totalFeatures:i}):j(j({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!c()(e.startIndex)&&!c()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,i=e.security,l=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=s.sortOptions,f=s.propertyName,d=C(s,T);return W(r.url||n,l&&"object"===w(l)?j(j({},l),{},{typeName:o||l.typeName}):R(D(o,[].concat(O(c?[x(c.sortBy,c.sortOrder)]:[]),O(f?[k(f)]:[]),O(l?u()(l):[]))),d),j({security:i},d)).catch(function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!c&&f&&f[0])return W(r.url||n,l&&"object"===w(l)?j(j({},l),{},{typeName:o||l.typeName}):R(D(o,[x(a()(f)?f[0]:f)].concat(O(f?[k(f)]:[]),O(l?u()(l):[]))),d),d);throw e})},B=function(e){var t,r=e.layer,n=(0,I.WZ)(null==r||null===(t=r.security)||void 0===t?void 0:t.sourceId);return p().Observable.defer(function(){return m.A.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=o().parse((0,P.t)(a||n.url||i),!0);return o().format(j(j({},l),{},{search:void 0,query:j(j({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(r),{headers:n})}).let(S.m9)},H=function(e){var t,r=e.layer,n=(0,I.WZ)(null==r||null===(t=r.security)||void 0===t?void 0:t.sourceId);return p().Observable.defer(function(){return m.A.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,h.wk)({name:t,url:n&&n.url||i}),l=o().parse(a,!0);return o().format(j(j({},l),{},{search:void 0,query:j(j({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(r),{headers:n})}).let(S.m9).switchMap(function(e){return p().Observable.bindNodeCallback(function(e,t){return(0,g.parseString)(e,{tagNameProcessors:[v.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)})(e.data)})}},909309:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var n=r(45388),o=r(995531),i=r(492312),a=r(325177),l=function(e,t){return n.Observable.defer(function(){return o.A.get((0,a.Sd)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})}).let(i.m9)}},719441:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>jn});var n={};r.r(n),r.d(n,{LPlongitudinalMapLayoutGPTEpic:()=>In,checkWPSAvailabilityGPTEpic:()=>cn,clickToSelectFeatureGPTEpic:()=>Pn,disableIdentifyGPTEpic:()=>En,getFeatureDataGPTEpic:()=>dn,getFeaturesGPTEpic:()=>fn,getIntersectionFeatureDataGPTEpic:()=>yn,removeHighlightsOnResetGPTEpic:()=>An,resetIntersectHighlightGPTEpic:()=>vn,resetSourceHighlightGPTEpic:()=>gn,runBufferProcessGPTEpic:()=>pn,runIntersectProcessGPTEpic:()=>mn,toggleHighlightLayersGPTEpic:()=>bn,toggleHighlightLayersOnOpenCloseGPTEpic:()=>hn,unRegisterEventListenerOnReset:()=>Sn});var o=r(273517),i=r.n(o),a=r(8117),l=r(8571),u=r(605556),s=r.n(u),c=r(811668),f=r(801081),d=r(154150),y=r(625885),p=r(192016),g=r(907309),v=r.n(g),m=r(962193),b=r.n(m),h="buffer",S="intersection",E="GeoProcessing",P="gpt-layer",I="gpt-layer-intersection",A="intersection_group",T="buffered_group",O="GPT:CHECK_WPS_AVAILABILITY",G="GPT:CHECKING_WPS_AVAILABILITY",w="GPT:CHECKING_WPS_AVAILABILITY_INTERSECTION",C="GPT:GET_FEATURES",L="GPT:ERROR_LOADING_DFT",j="GPT:INIT_PLUGIN",F="GPT:RUNNING_PROCESS",N="GPT:RESET",R="GPT:RUN_PROCESS",D="GPT:SET_BUFFER_DISTANCE",x="GPT:SET_BUFFER_DISTANCE_UOM",k="GPT:SET_BUFFER_QUADRANT_SEGMENTS",M="GPT:SET_BUFFER_CAP_STYLE",_="GPT:SET_FEATURES",W="GPT:SET_FEATURE_SOURCE_LOADING",q="GPT:SET_FEATURE_INTERSECTION_LOADING",B="GPT:SET_INVALID_LAYER",H="GPT:SET_WPS_AVAILABILITY",U="GPT:SET_SELECTED_TOOL",z="GPT:SET_SOURCE_LAYER_ID",V="GPT:SET_SOURCE_FEATURE",K="GPT:SET_SOURCE_FEATURE_ID",X="GPT:SET_INTERSECTION_LAYER_ID",J="GPT:SET_INTERSECTION_FEATURE_ID",Y="GPT:SET_INTERSECTION_FEATURE",$="GPT:SET_INTERSECTION_FIRST_ATTRIBUTE",Z="GPT:SET_INTERSECTION_SECOND_ATTRIBUTE",Q="GPT:SET_INTERSECTION_MODE",ee="GPT:SET_INTERSECTION_PERCENTAGES_ENABLED",te="GPT:SET_INTERSECTION_AREAS_ENABLED",re="GPT:SET_SELECTED_LAYER_TYPE",ne="GPT:TOGGLE_HIGHLIGHT_LAYERS",oe=function(e,t){return{type:O,layerId:e,source:t}},ie=function(e){return{type:G,status:e}},ae=function(e){return{type:w,status:e}},le=function(e,t){return{type:C,layerId:e,source:t,page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},ue=function(e){return{type:F,status:e}},se=function(e){return{type:R,process:e}},ce=function(e,t,r,n,o){return{type:_,layerId:e,source:t,data:r,nextPage:n,geometryProperty:o}},fe=function(e){return{type:W,status:e}},de=function(e){return{type:q,status:e}},ye=function(e,t){return{type:B,status:t,layerId:e}},pe=function(e,t,r){return{type:H,layerId:e,status:t,source:r}},ge=function(e){return{type:K,featureId:e}},ve=function(e){return{type:V,feature:e}},me=function(e){return{type:J,featureId:e}},be=function(e){return{type:Y,feature:e}},he=function(e){return{type:re,source:e}},Se=function(){return{type:ne}},Ee=r(109351),Pe=r(275705),Ie=r(595535),Ae=r(711030),Te=r(168995),Oe=r(628017),Ge=[{id:h,optionItem:{value:h,labelMsgId:"GeoProcessing.bufferTool"},actions:{isRunDisabled:function(e){return e.runningProcess||e.isSourceLayerInvalid||!(e.sourceLayerId&&e.distance&&e.areAllWPSAvailableForSourceLayer)},runProcess:function(e){e.showHighlightLayers&&e.onToggleHighlightLayers(),b()(e.sourceFeature)?e.onShowWarning(!0):e.onRunProcess(h)},runProcessConfirm:function(e){e.onShowWarning(!1),e.onRunProcess(h)}},RunComponent:function(e){return i().createElement("div",{className:"run"},i().createElement(Ae.A,{disabled:e.isRunDisabled(e),onClick:function(){return e.runProcess(e)}},i().createElement(l.A,{msgId:"GeoProcessing.run"}),e.runningProcess?i().createElement(Pe.A,{size:14,style:{margin:"0 auto"}}):null),i().createElement(Te.A,{bsStyle:e.isSourceLayerInvalid?"danger":"info",text:e.isSourceLayerInvalid?(0,Oe.kA)(e.messages,"GeoProcessing.tooltip.invalidLayers"):(0,Oe.kA)(e.messages,"GeoProcessing.tooltip.fillRequiredDataBuffer")}))},ConfirmModal:function(e){return i().createElement(Ee.A,{show:e.showWarning,onClose:e.handleCloseWarningModal,onConfirm:e.handleConfirmRunProcess,title:i().createElement(l.A,{msgId:"GeoProcessing.warningTitle"}),fitContent:!0,confirmText:i().createElement(l.A,{msgId:"GeoProcessing.warningConfirmText"}),cancelText:i().createElement(l.A,{msgId:"GeoProcessing.warningCancel"})},i().createElement("div",{className:"ms-detail-body"},i().createElement(Ie.A,{msgId:"GeoProcessing.warningBody"})))}},{id:S,optionItem:{value:S,labelMsgId:"GeoProcessing.intersectionTool"},actions:{isRunDisabled:function(e){return e.runningProcess||!(e.isIntersectionEnabled&&e.intersectionLayerId&&e.sourceLayerId&&e.areAllWPSAvailableForSourceLayer&&e.areAllWPSAvailableForIntersectionLayer)||e.isIntersectionLayerInvalid||e.isSourceLayerInvalid},runProcess:function(e){e.showHighlightLayers&&e.onToggleHighlightLayers(),b()(e.sourceFeature)||b()(e.intersectionFeature)?e.onShowWarning(!0):e.onRunProcess(S)},runProcessConfirm:function(e){e.onShowWarning(!1),e.onRunProcess(S)}},RunComponent:function(e){return i().createElement("div",{className:"run"},i().createElement(Ae.A,{disabled:e.isRunDisabled(e),onClick:function(){return e.runProcess(e)}},i().createElement(l.A,{msgId:"GeoProcessing.run"}),e.runningProcess?i().createElement(Pe.A,{size:14,style:{margin:"0 auto"}}):null),i().createElement(Te.A,{bsStyle:!e.isIntersectionEnabled||e.isIntersectionLayerInvalid||e.isSourceLayerInvalid?"danger":"info",text:e.isIntersectionEnabled?e.isIntersectionLayerInvalid||e.isSourceLayerInvalid?(0,Oe.kA)(e.messages,"GeoProcessing.tooltip.invalidLayers"):(0,Oe.kA)(e.messages,"GeoProcessing.tooltip.fillRequiredDataIntersection"):(0,Oe.kA)(e.messages,"GeoProcessing.tooltip.pointAndPolygon")}))},ConfirmModal:function(e){return i().createElement(Ee.A,{show:e.showWarning,onClose:e.handleCloseWarningModal,onConfirm:e.handleConfirmRunProcess,title:i().createElement(l.A,{msgId:"GeoProcessing.warningTitle"}),fitContent:!0,confirmText:i().createElement(l.A,{msgId:"GeoProcessing.warningConfirmText"}),cancelText:i().createElement(l.A,{msgId:"GeoProcessing.warningCancel"})},i().createElement("div",{className:"ms-detail-body"},i().createElement(Ie.A,{msgId:"GeoProcessing.warningBody"})))}}],we=r(348317),Ce=r(267224),Le=r(209250),je=r(164045),Fe=r(858156),Ne=r.n(Fe),Re=r(400912),De=r.n(Re),xe=r(150104),ke=r.n(xe),Me=r(131127),_e=r(307679),We=r(112585),qe=r(468090),Be=r.n(qe),He=r(333031),Ue=r.n(He),ze=r(764932);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach(function(t){Je(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Je(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ve(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ve(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye=function(e){switch(e){case"Point":case"MultiPoint":return"point";case"LineString":case"MultiLineString":return"line";case"Polygon":case"MultiPolygon":return"polygon";default:return e}},$e=function(e){return{type:"FeatureCollection",features:e}},Ze=function(e,t){var r=Ue()(null==e?void 0:e.filter(function(e){return e.group===t}),["name"]);return r.length?Number(Be()(r).name.match(/\d/)[0])+1:0},Qe=function(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.geodesic&&"LineString"===e.geometry.type?Xe(Xe({},e),{},{geometry:Xe(Xe({},e.geometry),{},{coordinates:(0,ze.transformLineToArcs)(e.geometry.coordinates)})}):e},et=function(e){var t;if("Circle"===(null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType)){var r=e.properties.center||e.geometry.coordinates,n=(0,ze.getPolygonFromCircle)(r,e.properties.radius||1,"meters");return Xe(Xe({},e),n)}return e};function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach(function(t){ot(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ot(e,t,r){return(t=function(e){var t=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.buffer)||void 0===t?void 0:t.distance)||100},at=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.buffer)||void 0===t?void 0:t.distanceUom)||"m"},lt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.buffer)||void 0===t?void 0:t.quadrantSegments},ut=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.buffer)||void 0===t?void 0:t.capStyle},st=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.layerId},ct=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.feature},ft=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.features)||[]},dt=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.totalCount)||0},yt=function(e){var t,r=st(e);return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||null===(t=t.invalid)||void 0===t||!t[r])},pt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.layerId},gt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.feature},vt=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.features)||[]},mt=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.totalCount)||0},bt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.firstAttributeToRetain},ht=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.secondAttributeToRetain},St=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.intersectionMode},Et=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.percentagesEnabled},Pt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.areasEnabled},It=function(e){var t,r=pt(e);return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||null===(t=t.invalid)||void 0===t||!t[r])},At=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedTool},Tt=function(e){var t,r=st(e);return r?null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||null===(t=t.wpsAvailability)||void 0===t?void 0:t[r]:null},Ot=function(e){var t,r=pt(e);return r?null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||null===(t=t.wpsAvailabilityIntersection)||void 0===t?void 0:t[r]:null},Gt=function(e){var t;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||!t.runningProcess)},wt=function(e){var t;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||!t.showHighlightLayers)},Ct=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedLayerType},Lt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.wpsUrl},jt=ke()(function(e){return(0,_e.Kv)(e).filter(function(e){return"background"!==e.group}).filter(function(e){return(0,We.II)(e)||"vector"===e.type}).map(function(e){var t,r;return null!=e&&null!==(t=e.features)&&void 0!==t&&t.length?nt(nt({},e),{},{features:null==e||null===(r=e.features)||void 0===r?void 0:r.map(Qe).map(et)}):e})},function(e){return JSON.stringify((0,_e.Kv)(e).filter(function(e){return"background"!==e.group}).filter(function(e){return(0,We.II)(e)||"vector"===e.type}))}),Ft=function(e,t){var r,n=De()(jt(e).filter(function(e){return e.id===t}));return nt(nt({},n),{},{features:null==n||null===(r=n.features)||void 0===r?void 0:r.filter(function(e){var t;return!(null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureId)})})},Nt=(0,je.A)(a.MG.Addon),Rt=function(e){var t=e.areAllWPSAvailableForSourceLayer,r=e.checkingWPSAvailability,n=e.runningProcess,u=e.layers,s=e.isSourceLayerInvalid,c=e.sourceFeatureId,f=e.sourceLayerId,d=e.sourceFeatures,y=e.sourceTotalCount,g=e.sourceCurrentPage,v=e.selectedLayerType,m=e.isSourceFeaturesLoading,b=e.onGetFeatures,h=e.onCheckWPSAvailability,S=e.onSetSourceFeatureId,E=e.onSetSourceLayerId,P=e.onSetSelectedLayerType;(0,o.useEffect)(function(){f&&h(f,"source")},[f]);var I=!f||m||r;return i().createElement(i().Fragment,null,i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.sourceLayer"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:n,clearable:!0,value:f,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){var t;(null==e?void 0:e.value)!==f&&E(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:u.map(function(e){return{value:e.id,label:e.title||e.name||e.id}})}),i().createElement(Nt,{tooltipId:f?t&&!s?"GeoProcessing.tooltip.validLayer":"GeoProcessing.tooltip.invalidLayer":"GeoProcessing.tooltip.selectLayer",tooltipPosition:"left",bsStyle:"primary"},r?i().createElement(Pe.A,{size:14,style:{margin:"0 auto"}}):i().createElement(a.e6,{glyph:f?t&&!s?"ok-sign":"exclamation-mark":"question-sign",className:f?t&&!s?"text-success":"text-danger":"text-info"})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.sourceFeature"})),i().createElement(a.MG,{className:"infinite-select-scroll"},i().createElement(p.Ay,{disabled:r||m||n||s,clearable:!0,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedFeature"}),onChange:function(e){var t;(null==e?void 0:e.value)!==c&&S(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:d.map(function(e,t){var r,n;return{value:(0,We.WW)(e).id,label:null!=e&&null!==(r=e.properties)&&void 0!==r&&r.measureType?"".concat(null==e||null===(n=e.properties)||void 0===n?void 0:n.measureType," #").concat(t):(0,We.WW)(e).id}}),value:c,onOpen:function(){"source"!==v&&0===d.length&&b(f,"source",0)},onMenuScrollToBottom:function(){y>d.length&&b(f,"source",g+1)}}),i().createElement(Nt,{tooltipId:c?t?"GeoProcessing.tooltip.validFeature":"GeoProcessing.tooltip.invalidFeature":"GeoProcessing.tooltip.selectFeature",tooltipPosition:"left",bsStyle:"primary"},m?i().createElement(Pe.A,{size:14,style:{margin:"0 auto"}}):i().createElement(a.e6,{glyph:c?s?"exclamation-mark":"ok-sign":"question-sign",className:c?s?"text-danger":"text-success":"text-info"})),i().createElement(Nt,{disabled:I,onClick:function(){I||P("source"===v?"":"source")},tooltipId:"GeoProcessing.tooltip.clickToSelectFeature",tooltipPosition:"left",className:"btn",bsStyle:"source"===v?"success":"primary"},i().createElement(a.e6,{glyph:"map-marker",className:"source"===v?"":"text-info"})))))};Rt.propTypes={areAllWPSAvailableForSourceLayer:s().bool,checkingWPSAvailability:s().bool,layers:s().array,runningProcess:s().bool,sourceFeatureId:s().string,sourceFeatures:s().array,sourceTotalCount:s().number,sourceCurrentPage:s().number,isSourceFeaturesLoading:s().bool,isSourceLayerInvalid:s().bool,selectedLayerType:s().string,sourceLayerId:s().string,onCheckWPSAvailability:s().func,onSetSourceLayerId:s().func,onSetSelectedLayerType:s().func,onGetFeatures:s().func,onSetSourceFeatureId:s().func};var Dt=(0,c.connect)((0,f.Mz)([Tt,Gt,jt,st,function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.featureId},ft,dt,function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.source)||void 0===t?void 0:t.currentPage)||0},function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t?void 0:t.featuresSourceLoading},yt,function(e){var t;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||!t.checkingWPSAvailability)},Ct],function(e,t,r,n,o,i,a,l,u,s,c,f){return{areAllWPSAvailableForSourceLayer:e,runningProcess:t,layers:r,sourceLayerId:n,sourceFeatureId:o,sourceFeatures:i,sourceTotalCount:a,sourceCurrentPage:l,isSourceFeaturesLoading:u,isSourceLayerInvalid:s,checkingWPSAvailability:c,selectedLayerType:f}}),{onCheckWPSAvailability:oe,onSetSourceLayerId:function(e){return{type:z,layerId:e}},onGetFeatures:le,onSetSelectedLayerType:he,onSetSourceFeatureId:ge})(Rt);Dt.displayName="SourceLayer";const xt=Dt;function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kt.apply(null,arguments)}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Wt=(0,je.A)(a.MG.Addon),qt=function(e,t){var r=e.areAllWPSAvailableForSourceLayer,n=e.distance,u=e.distanceUom,s=e.quadrantSegments,c=e.capStyle,f=e.isSourceLayerInvalid,d=e.process,y=e.runningProcess,g=e.showHighlightLayers,v=e.sourceLayerId,m=e.sourceFeature,b=e.onRunProcess,h=e.onSetBufferDistance,S=e.onSetBufferDistanceUom,E=e.onSetBufferQuadrantSegments,P=e.onSetBufferCapStyle,I=e.onToggleHighlightLayers,A=t.messages,T=Mt((0,o.useState)(!1),2),O=T[0],G=T[1],w=Mt((0,o.useState)(!1),2),C=w[0],L=w[1];return i().createElement(i().Fragment,null,i().createElement(xt,null),i().createElement("div",{className:"gpt-distance"},i().createElement("div",{className:"value"},i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.distance"})),i().createElement(a.MG,{className:"distance"},i().createElement(Ce.A,{disabled:y,type:"number",value:n,onChange:function(e){h(e)}}),i().createElement(p.Ay,{clearable:!1,disabled:y,value:u,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){S((null==e?void 0:e.value)||"")},options:[{value:"m",label:i().createElement(l.A,{msgId:"GeoProcessing.m"})},{value:"km",label:i().createElement(l.A,{msgId:"GeoProcessing.km"})}]}))))),i().createElement(Le.A,{disabled:y,useToolbar:!0,title:i().createElement(l.A,{msgId:"GeoProcessing.advancedSettings"}),expanded:O,onSwitch:G},i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.quadrantSegments"})),i().createElement(a.MG,null,i().createElement(Ce.A,{disabled:y,type:"number",value:s,onChange:function(e){E(e)}}),i().createElement(Wt,null,i().createElement(Te.A,{bsStyle:"info",placement:"left",text:(0,Oe.kA)(A,"GeoProcessing.quadrantSegmentsTooltip")})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.capStyle"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:y,clearable:!0,value:c,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedStyle"}),onChange:function(e){P((null==e?void 0:e.value)||"")},options:[{value:"Round",label:i().createElement(l.A,{msgId:"GeoProcessing.round"})},{value:"Flat",label:i().createElement(l.A,{msgId:"GeoProcessing.flat"})},{value:"Square",label:i().createElement(l.A,{msgId:"GeoProcessing.square"})}]}),i().createElement(Wt,null,i().createElement(Te.A,{bsStyle:"info",placement:"left",text:(0,Oe.kA)(A,"GeoProcessing.capStyleTooltip")}))))),i().createElement(a.gE,{className:"highlight"},i().createElement(we.A,{disabled:y,checked:g,onClick:function(){I()}}),i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.highlight"}))),i().createElement(d.RunComponent,kt({areAllWPSAvailableForSourceLayer:r,runningProcess:y,isSourceLayerInvalid:f,sourceLayerId:v,distance:n,showHighlightLayers:g,sourceFeature:m,onRunProcess:b,onToggleHighlightLayers:I,onShowWarning:L,messages:A},d.actions)),i().createElement(d.ConfirmModal,{showWarning:C,handleCloseWarningModal:function(){L(!1)},handleConfirmRunProcess:function(){g&&I(),d.actions.runProcessConfirm({onShowWarning:L,onRunProcess:b})}}))};qt.propTypes={areAllWPSAvailableForSourceLayer:s().bool,distance:s().number,distanceUom:s().string,quadrantSegments:s().number,capStyle:s().string,isSourceLayerInvalid:s().bool,sourceLayerId:s().string,sourceFeature:s().object,process:s().object,runningProcess:s().bool,showHighlightLayers:s().bool,onSetBufferDistance:s().func,onRunProcess:s().func,onSetBufferDistanceUom:s().func,onSetBufferQuadrantSegments:s().func,onSetBufferCapStyle:s().func,onToggleHighlightLayers:s().func};var Bt=(0,c.connect)((0,f.Mz)([Tt,it,at,yt,st,ct,lt,ut,Gt,wt],function(e,t,r,n,o,i,a,l,u,s){return{areAllWPSAvailableForSourceLayer:e,distance:t,distanceUom:r,isSourceLayerInvalid:n,sourceLayerId:o,sourceFeature:i,quadrantSegments:a,capStyle:l,runningProcess:u,showHighlightLayers:s}}),{onSetBufferDistance:function(e){return{type:D,distance:e}},onSetBufferDistanceUom:function(e){return{type:x,uom:e}},onSetBufferQuadrantSegments:function(e){return{type:k,quadrantSegments:e}},onSetBufferCapStyle:function(e){return{type:M,capStyle:e}},onToggleHighlightLayers:Se,onRunProcess:se})(qt);qt.contextTypes={messages:s().object};const Ht=Bt;var Ut=(0,je.A)(a.MG.Addon),zt=function(e){var t=e.areAllWPSAvailableForIntersectionLayer,r=e.checkingWPSAvailabilityIntersection,n=e.layers,u=e.isIntersectionLayerInvalid,s=e.intersectionLayerId,c=e.intersectionFeatureId,f=e.intersectionFeatures,d=e.isIntersectionFeaturesLoading,y=e.runningProcess,g=e.selectedLayerType,v=e.intersectionCurrentPage,m=e.intersectionTotalCount,b=e.onGetFeatures,h=e.onCheckWPSAvailability,S=e.onSetIntersectionLayerId,E=e.onSetIntersectionFeatureId,P=e.onSetSelectedLayerType;(0,o.useEffect)(function(){s&&h(s,"intersection")},[s]);var I=!s||d||r;return i().createElement(i().Fragment,null,i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.intersectionLayer"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:y,clearable:!0,value:s,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){var t;(null==e?void 0:e.value)!==s&&S(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:n.map(function(e){return{value:e.id,label:e.title||e.name||e.id}})}),i().createElement(Ut,{tooltipId:s?t&&!u?"GeoProcessing.tooltip.validLayer":"GeoProcessing.tooltip.invalidLayer":"GeoProcessing.tooltip.selectLayer",tooltipPosition:"left",bsStyle:"primary"},r?i().createElement(Pe.A,{size:14,style:{margin:"0 auto"}}):i().createElement(a.e6,{glyph:s?t&&!u?"ok-sign":"exclamation-mark":"question-sign",className:s?t&&!u?"text-success":"text-danger":"text-info"})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.intersectionFeature"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:r||d||y||u,clearable:!0,value:c,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedFeature"}),onChange:function(e){var t;(null==e?void 0:e.value)!==c&&E(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:f.map(function(e,t){var r,n;return{value:(0,We.WW)(e).id,label:null!=e&&null!==(r=e.properties)&&void 0!==r&&r.measureType?"".concat(null==e||null===(n=e.properties)||void 0===n?void 0:n.measureType," #").concat(t):(0,We.WW)(e).id}}),onOpen:function(){"intersection"!==g&&0===f.length&&b(s,"intersection",0)},onMenuScrollToBottom:function(){m>f.length&&b(s,"intersection",v+1)}}),i().createElement(Ut,{tooltipId:c?t?"GeoProcessing.tooltip.validFeature":"GeoProcessing.tooltip.invalidFeature":"GeoProcessing.tooltip.selectFeature",tooltipPosition:"left",bsStyle:"primary"},d?i().createElement(Pe.A,{size:14,style:{margin:"0 auto"}}):i().createElement(a.e6,{glyph:c?u?"exclamation-mark":"ok-sign":"question-sign",className:c?u?"text-danger":"text-success":"text-info"})),i().createElement(Ut,{disabled:I,onClick:function(){I||P("intersection"===g?"":"intersection")},tooltipId:"GeoProcessing.tooltip.clickToSelectFeature",tooltipPosition:"left",className:"btn",bsStyle:"intersection"===g?"success":"primary"},i().createElement(a.e6,{glyph:"map-marker",className:"intersection"===g?"":"text-info"})))))};zt.propTypes={areAllWPSAvailableForIntersectionLayer:s().bool,checkingWPSAvailabilityIntersection:s().bool,intersectionFeatureId:s().string,intersectionFeatures:s().array,intersectionTotalCount:s().number,intersectionCurrentPage:s().number,intersectionLayerId:s().string,isIntersectionFeaturesLoading:s().bool,layers:s().array,runningProcess:s().bool,isIntersectionLayerInvalid:s().bool,selectedLayerType:s().string,onCheckWPSAvailability:s().func,onSetIntersectionLayerId:s().func,onSetIntersectionFeatureId:s().func,onGetFeatures:s().func,onSetSelectedLayerType:s().func},zt.contextTypes={messages:s().object};var Vt=(0,c.connect)((0,f.Mz)([Ot,jt,function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t?void 0:t.featuresIntersectionLoading},pt,function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.featureId},vt,mt,function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.intersection)||void 0===t?void 0:t.currentPage)||0},Gt,function(e){var t;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||!t.checkingIntersectionWPSAvailability)},It,Ct],function(e,t,r,n,o,i,a,l,u,s,c,f){return{areAllWPSAvailableForIntersectionLayer:e,layers:t,isIntersectionFeaturesLoading:r,intersectionLayerId:n,intersectionFeatureId:o,intersectionFeatures:i,intersectionTotalCount:a,intersectionCurrentPage:l,runningProcess:u,checkingWPSAvailabilityIntersection:s,isIntersectionLayerInvalid:c,selectedLayerType:f}}),{onCheckWPSAvailability:oe,onSetIntersectionLayerId:function(e){return{type:X,layerId:e}},onSetIntersectionFeatureId:me,onGetFeatures:le,onSetSelectedLayerType:he})(zt);const Kt=Vt;function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xt.apply(null,arguments)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $t=(0,je.A)(a.MG.Addon),Zt=function(e,t){var r=e.areAllWPSAvailableForIntersectionLayer,n=e.areAllWPSAvailableForSourceLayer,u=e.areasEnabled,s=e.firstAttributeToRetain,c=e.intersectionFeature,f=e.intersectionLayerId,d=e.intersectionMode,y=e.isIntersectionEnabled,g=e.isIntersectionLayerInvalid,v=e.isSourceLayerInvalid,m=e.percentagesEnabled,b=e.process,h=e.runningProcess,S=e.secondAttributeToRetain,E=e.showHighlightLayers,P=e.sourceFeature,I=e.sourceLayerId,A=e.onSetIntersectionFirstAttribute,T=e.onSetIntersectionSecondAttribute,O=e.onSetIntersectionMode,G=e.onSetIntersectionPercentagesEnabled,w=e.onSetIntersectionAreasEnabled,C=e.onToggleHighlightLayers,L=e.onRunProcess,j=t.messages,F=Jt((0,o.useState)(!1),2),N=F[0],R=F[1],D=Jt((0,o.useState)(!1),2),x=D[0],k=D[1];return i().createElement(i().Fragment,null,i().createElement(xt,null),i().createElement(Kt,null),i().createElement(Le.A,{disabled:h,useToolbar:!0,title:i().createElement(l.A,{msgId:"GeoProcessing.advancedSettings"}),expanded:N,onSwitch:R},i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.firstAttributeToRetain"})),i().createElement(a.MG,null,i().createElement(Ce.A,{disabled:h,type:"text",value:s,onChange:function(e){A(e)}}),i().createElement($t,null,i().createElement(Te.A,{placement:"left",bsStyle:"info",text:(0,Oe.kA)(j,"GeoProcessing.firstAttributeToRetainTooltip")})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.secondAttributeToRetain"})),i().createElement(a.MG,null,i().createElement(Ce.A,{disabled:h,type:"text",value:S,onChange:function(e){T(e)}}),i().createElement($t,null,i().createElement(Te.A,{placement:"left",bsStyle:"info",text:(0,Oe.kA)(j,"GeoProcessing.secondAttributeToRetainTooltip")})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.intersectionMode"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:h,clearable:!0,value:d,noResultsText:i().createElement(l.A,{msgId:"GeoProcessing.noMatchedMode"}),onChange:function(e){O((null==e?void 0:e.value)||"")},options:[{value:"INTERSECTION",label:i().createElement(l.A,{msgId:"GeoProcessing.INTERSECTION"})},{value:"FIRST",label:i().createElement(l.A,{msgId:"GeoProcessing.FIRST"})},{value:"SECOND",label:i().createElement(l.A,{msgId:"GeoProcessing.SECOND"})}]}),i().createElement($t,null,i().createElement(Te.A,{placement:"left",bsStyle:"info",text:(0,Oe.kA)(j,"GeoProcessing.intersectionModeTooltip")})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.percentagesEnabled"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:h,clearable:!1,value:m,onChange:function(e){G((null==e?void 0:e.value)||"")},options:[{value:"true",label:i().createElement(l.A,{msgId:"GeoProcessing.true"})},{value:"false",label:i().createElement(l.A,{msgId:"GeoProcessing.false"})}]}),i().createElement($t,null,i().createElement(Te.A,{placement:"left",bsStyle:"info",text:(0,Oe.kA)(j,"GeoProcessing.percentagesEnabledTooltip")})))),i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.areasEnabled"})),i().createElement(a.MG,null,i().createElement(p.Ay,{disabled:h,clearable:!1,value:u,onChange:function(e){w((null==e?void 0:e.value)||"")},options:[{value:"true",label:i().createElement(l.A,{msgId:"GeoProcessing.true"})},{value:"false",label:i().createElement(l.A,{msgId:"GeoProcessing.false"})}]}),i().createElement($t,null,i().createElement(Te.A,{placement:"left",bsStyle:"info",text:(0,Oe.kA)(j,"GeoProcessing.areasEnabledTooltip")}))))),i().createElement(a.gE,{className:"highlight"},i().createElement(we.A,{disabled:h,checked:E,onClick:function(){C()}}),i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.highlight"}))),i().createElement(b.RunComponent,Xt({areAllWPSAvailableForIntersectionLayer:r,areAllWPSAvailableForSourceLayer:n,intersectionFeature:c,intersectionLayerId:f,isIntersectionLayerInvalid:g,isSourceLayerInvalid:v,onRunProcess:L,onToggleHighlightLayers:C,onShowWarning:k,runningProcess:h,showHighlightLayers:E,sourceFeature:P,sourceLayerId:I,messages:j,isIntersectionEnabled:y},b.actions)),i().createElement(b.ConfirmModal,{showWarning:x,handleCloseWarningModal:function(){k(!1)},handleConfirmRunProcess:function(){E&&C(),b.actions.runProcessConfirm({onShowWarning:k,onRunProcess:L})}}))};Zt.propTypes={areasEnabled:s().string,firstAttributeToRetain:s().string,intersectionMode:s().string,isIntersectionLayerInvalid:s().bool,isSourceLayerInvalid:s().bool,isIntersectionEnabled:s().bool,percentagesEnabled:s().string,runningProcess:s().bool,process:s().object,sourceLayerId:s().string,intersectionLayerId:s().string,secondAttributeToRetain:s().string,showHighlightLayers:s().bool,areAllWPSAvailableForSourceLayer:s().bool,areAllWPSAvailableForIntersectionLayer:s().bool,sourceFeature:s().object,intersectionFeature:s().object,onSetIntersectionFirstAttribute:s().func,onSetIntersectionSecondAttribute:s().func,onSetIntersectionMode:s().func,onSetIntersectionPercentagesEnabled:s().func,onSetIntersectionAreasEnabled:s().func,onToggleHighlightLayers:s().func,onRunProcess:s().func},Zt.contextTypes={messages:s().object};var Qt=(0,c.connect)((0,f.Mz)([Tt,Ot,Gt,bt,ht,St,function(e){var t;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(t=t.flags)||void 0===t||!t.isIntersectionEnabled)},st,pt,It,yt,Et,Pt,wt,ct,gt],function(e,t,r,n,o,i,a,l,u,s,c,f,d,y,p,g){return{areAllWPSAvailableForSourceLayer:e,areAllWPSAvailableForIntersectionLayer:t,runningProcess:r,firstAttributeToRetain:n,secondAttributeToRetain:o,intersectionMode:i,isIntersectionEnabled:a,sourceLayerId:l,intersectionLayerId:u,isIntersectionLayerInvalid:s,isSourceLayerInvalid:c,percentagesEnabled:f,areasEnabled:d,showHighlightLayers:y,sourceFeature:p,intersectionFeature:g}}),{onSetIntersectionFirstAttribute:function(e){return{type:$,firstAttributeToRetain:e}},onSetIntersectionSecondAttribute:function(e){return{type:Z,secondAttributeToRetain:e}},onSetIntersectionMode:function(e){return{type:Q,intersectionMode:e}},onSetIntersectionPercentagesEnabled:function(e){return{type:ee,percentagesEnabled:e}},onSetIntersectionAreasEnabled:function(e){return{type:te,areasEnabled:e}},onToggleHighlightLayers:Se,onRunProcess:se})(Zt);Zt.contextTypes={messages:s().object};const er=Qt;var tr=function(e,t){var r=e.runningProcess,n=e.selectedTool,o=e.onReset,u=e.onSetSelectedTool,s=t.messages,c=function(e){return v()(Ge,function(t){return t.id===e})};return i().createElement(i().Fragment,null,i().createElement("div",{className:"map-templates-all"},i().createElement(a.lV,null,i().createElement(a.gE,null,i().createElement(a.mq,null,i().createElement(l.A,{msgId:"GeoProcessing.tool"}))),i().createElement(a.gE,null,i().createElement(p.Ay,{disabled:r,clearable:!1,value:n,onChange:function(e){u((null==e?void 0:e.value)||""),(null==e?void 0:e.value)!==n&&o()},options:Ge.map(function(e){var t=e.optionItem;return{value:t.value,label:(0,Oe.kA)(s,t.labelMsgId)}})})),n===h?i().createElement(Ht,{process:c(h)}):null,n===S?i().createElement(er,{process:c(S)}):null)))};tr.propTypes={selectedTool:s().string,runningProcess:s().bool,onReset:s().func,onSetSelectedTool:s().func},tr.contextTypes={messages:s().object};var rr=(0,c.connect)((0,f.Mz)([At,Gt],function(e,t){return{selectedTool:e,runningProcess:t}}),{onReset:function(){return{type:N}},onSetSelectedTool:function(e){return{type:U,tool:e}}})(tr);const nr=rr;var or=r(415392),ir=r(130711),ar=r(97401),lr=r(841533),ur=function(e){var t=e.dockStyle,r=e.enabled,n=e.pluginCfg,a=e.onClose,u=e.onMount;return(0,o.useEffect)(function(){u(n)},[]),r?i().createElement(y.A,{containerStyle:t,containerClassName:"dock-container",containerId:"GeoProcessing-root",open:r,size:lr.a0,dock:!0,position:"right",title:i().createElement(l.A,{msgId:"GeoProcessing.title"}),onClose:a,glyph:"globe-settings",style:t},i().createElement(d.A,{key:"gpt-BorderLayout",className:"geo-processing-tool-panel"},i().createElement(nr,null))):null};ur.propTypes={enabled:s().bool,dockStyle:s().object,pluginCfg:s().object,onClose:s().func,onMount:s().func};const sr=(0,c.connect)((0,f.Mz)([ir.dZ,ar.si],function(e,t){return{enabled:e,dockStyle:t}}),{onMount:function(e){return{type:j,cfg:e}},onClose:or.KP.bind(null,"GeoProcessing",null)})(ur);var cr=r(499084),fr=r.n(cr),dr=r(324713),yr=r.n(dr),pr=r(269843),gr=r.n(pr),vr=r(45388),mr=r.n(vr),br=r(541033),hr=r.n(br),Sr=r(738805),Er=r(692114),Pr=r(271020),Ir=r(629987),Ar=r(893279);var Tr=r(593429),Or=r(717140),Gr=r(653077),wr=r(904059),Cr=r(273494),Lr=r(812366),jr=r(883832),Fr=r(545567),Nr=r(325177),Rr=r(264053);function Dr(e){return function(e){if(Array.isArray(e))return xr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var kr=(0,r(193275).A)({wfsVersion:"1.1.0"}),Mr=kr.getFeature,_r=kr.query;const Wr=function(e){var t=e.name,r=e.featureCollection,n=(0,Nr.Nj)("test/xml","http://geoserver/wfs","POST",Mr(_r(t)));return r&&(n=(0,Nr.oW)((0,Nr.Xs)((0,Nr.Gr)(JSON.stringify(r)),"application/json"))),(0,Rr.Yy)("gs:CollectGeometries",[(0,Nr.XH)("features",n)],(0,Nr.mk)((0,Nr.Cs)("result","application/json")))};var qr=r(909309);function Br(e){return function(e){if(Array.isArray(e))return Hr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Hr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ur=r(697150),zr=r(975699),Vr=r(415120),Kr=r(427572),Xr=r(527097),Jr=r(181817),Yr=r(214158),$r=r(433114);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Qr(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||en(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){if(e){if("string"==typeof e)return tn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tn(e,t):void 0}}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rn(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach(function(t){an(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function an(e,t,r){return(t=function(e){var t=function(e){if("object"!=Zr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ln=lr.a0,un=[(0,Or.VX)("stop"),(0,Or.VX)("clean","",E)],sn=[{filter:["==","geomType","polygon"],symbolizers:[{kind:"Fill",outlineWidth:3,outlineColor:"#ffac12",outlineOpacity:1,color:"#ffffff",fillOpacity:.3}]},{filter:["==","geomType","line"],symbolizers:[{kind:"Line",width:3,color:"#ffac12",opacity:.3}]},{filter:["==","geomType","point"],symbolizers:[{kind:"Mark",wellKnownName:"Circle",color:"#ffffff",fillOpacity:.3,strokeColor:"#ffac12",strokeOpacity:1,strokeWidth:3,radius:8}]}],cn=function(e,t){return e.ofType(O).mergeMap(function(r){var n,o=r.layerId,i=r.source,a=t.getState(),l=Ft(a,o),u=Lt(a)||De()(fr()(l.url)),s="source"===i?ie:ae;return"vector"===l.type?mr().Observable.from([pe(o,!0,i),ce(o,i,l,0,(null==l||null===(n=l.features)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.geometry)||void 0===n?void 0:n.type)||""),s(!1)]):(0,qr.l)(u,"geo:buffer,gs:IntersectionFeatureCollection,gs:CollectGeometries").mergeMap(function(e){return mr().Observable.defer(function(){return new Promise(function(t,r){return(0,Sr.parseString)(e.data,{tagNameProcessors:[Er.stripPrefix]},function(e,n){return e?r(e):t(n)})})})}).flatMap(function(t){var r,n,a,c=[null==t||null===(r=t.ProcessDescriptions)||void 0===r||null===(r=r.ProcessDescription)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.Identifier)||void 0===r?void 0:r[0],null==t||null===(n=t.ProcessDescriptions)||void 0===n||null===(n=n.ProcessDescription)||void 0===n||null===(n=n[1])||void 0===n||null===(n=n.Identifier)||void 0===n?void 0:n[0],null==t||null===(a=t.ProcessDescriptions)||void 0===a||null===(a=a.ProcessDescription)||void 0===a||null===(a=a[2])||void 0===a||null===(a=a.Identifier)||void 0===a?void 0:a[0]];return["geo:buffer","gs:IntersectionFeatureCollection","gs:CollectGeometries"].reduce(function(e,t){return e&&yr()(c,function(e){return e===t})>-1},!0)?l.describeFeatureType?mr().Observable.from([pe(o,!0,i),le(o,i,0),s(!1)]):mr().Observable.from([pe(o,!0,i),(0,Gr.V)(u,l,{},i),s(!1)]).merge(mr().Observable.race(e.ofType(wr.rN).filter(function(e){return e.node===o}),mr().Observable.timer(1e4).mapTo("timeout")).switchMap(function(e){return"timeout"===e||null!=e&&e.error?mr().Observable.of(ye(o,i)):mr().Observable.of(le(o,i,0))})):mr().Observable.from([ye(o,i),pe(o,!1,i),s(!1)])}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of(pe(o,!1,i),s(!1))}).startWith(s(!0))})},fn=function(e,t){return e.ofType(C).filter(function(e){var r,n,o=e.source,i=t.getState();return"source"===o?(n=dt(i),r=ft(i)):(r=vt(i),n=mt(i)),0===n||n>r.length}).mergeMap(function(e){var r,n,o=e.layerId,i=e.source,a=e.page,l=t.getState(),u="source"===i?fe:de,s=Ft(l,o);if("vector"===s.type)return mr().Observable.from([ce(o,i,s,0,(null==s||null===(n=s.features)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.geometry)||void 0===n?void 0:n.type)||"")]);var c=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.maxFeatures)||10}(l);if(gr()(null==s?void 0:s.describeFeatureType))return mr().Observable.of(function(e){return{type:L,layerId:e}}(o));var f={propertyName:(0,Yr.Ah)(s.describeFeatureType)[0].name,startIndex:a*c,maxFeatures:c},d=(0,Yr.lr)(s.describeFeatureType);return mr().Observable.merge((0,Fr.Gw)(on(on({},s),{},{name:null==s?void 0:s.name,search:on(on({},null!==(r=null==s?void 0:s.search)&&void 0!==r?r:{}),{},{url:s.url})}),null,f).map(function(e){return ce(o,i,e,a,d)}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of(ce(o,i,e,a,d),(0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFeaturesList",autoDismiss:6,position:"tc",values:{layerName:s.name+" - "+s.title}}))}).startWith(u(!0)).concat(mr().Observable.of(u(!1))))})},dn=function(e,t){return e.ofType(K).filter(function(e){return e.featureId&&""!==e.featureId}).switchMap(function(e){var r=e.featureId,n=t.getState(),o=st(n),i=(0,zr.Oc)(n),a=wt(n),l=Ft(n,o);return mr().Observable.defer(function(){return"vector"===l.type?mr().Observable.of(l):(0,Jr.Tf)(l.search.url,{typeName:l.name,featureID:r,outputFormat:"application/json",srsName:"EPSG:4326"})}).switchMap(function(e){var t=e.features,n=v()(t,function(e){return e.id===r}),o=a?[(0,Cr.jc)((0,ze.getGeoJSONExtent)(n.geometry),"EPSG:4326")]:[];return mr().Observable.from([ve(n),(0,Tr.E)(P,"gpt","overlay",{type:"vector",name:"highlight-gpt-features",visibility:a,features:t.filter(function(e){return e.id===r}).map((0,zr.W4)(i))})].concat(o))}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGetFeature",autoDismiss:6,position:"tc"}))})})},yn=function(e,t){return e.ofType(J).filter(function(e){return""!==e.featureId}).switchMap(function(e){var r=e.featureId,n=t.getState(),o=pt(n),i=(0,zr.Oc)(n),a=wt(n),l=Ft(n,o);return mr().Observable.defer(function(){return"vector"===l.type?mr().Observable.of(l):(0,Jr.Tf)(l.search.url,{typeName:l.name,featureID:r,outputFormat:"application/json",srsName:"EPSG:4326"})}).switchMap(function(e){var t=e.features,n=v()(t,function(e){return e.id===r}),o=a?[(0,Cr.jc)((0,ze.getGeoJSONExtent)(n.geometry),"EPSG:4326")]:[];return mr().Observable.from([be(n),(0,Tr.E)(I,"gpt","overlay",{type:"vector",name:"highlight-gpt-intersection-features",visibility:a,features:t.filter(function(e){return e.id===r}).map((0,zr.W4)(i))})].concat(o))}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGetFeature",autoDismiss:6,position:"tc"}))})})},pn=function(e,t){return e.ofType(R).filter(function(e){return e.process===h}).switchMap(function(e){rn(e);var r=t.getState(),n=st(r),o=Ft(r,n),i=jt(r),a=Lt(r)||De()(fr()(o.url)),l=lt(r),u=ut(r),s={},c=it(r);"km"===at(r)&&(c*=1e3);var f=Ze(i,T),d=[];if(a||d.push(o.name===o.title?o.name:o.name+" - "+o.title),d.length)return mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:d.join(", ")}}));var y=function(e,t){return mr().Observable.defer(function(){return function(e,t){var r=function(e,t){void 0===t&&(t={});var r=0,n=0,o=0;return(0,Ir.Fh)(e,function(e){r+=e[0],n+=e[1],o++},!0),(0,Ar.zx)([r/o,n/o],t.properties)}(t),n=(0,ze.reprojectGeoJson)(r,"EPSG:4326","EPSG:3857"),o=(0,ze.reprojectGeoJson)({type:"Feature",geometry:on(on({},n.geometry),{},{coordinates:[n.geometry.coordinates[0]-1e3,n.geometry.coordinates[1]]})},"EPSG:3857","EPSG:4326"),i=(0,ze.calculateDistance)([r.geometry.coordinates,o.geometry.coordinates]);return c*=1e3/i,(0,Rr.Ay)(a,function(e){var t=e.geometry3857,r=e.distance,n=void 0===r?100:r,o=e.quadrantSegments,i=e.capStyle,a=[(0,Nr.XH)("geom",(0,Nr.oW)((0,Nr.Xs)((0,Nr.Gr)(t),"application/wkt"))),(0,Nr.XH)("distance",(0,Nr.oW)((0,Nr.mC)(n)))].concat(Dr(o?[(0,Nr.XH)("quadrantSegments",(0,Nr.oW)((0,Nr.mC)(o)))]:[]),Dr(i?[(0,Nr.XH)("capStyle",(0,Nr.oW)((0,Nr.mC)(i)))]:[]));return(0,Rr.Yy)("geo:buffer",a,(0,Nr.mk)((0,Nr.Cs)("result","application/json")))}({geometry3857:e,distance:c,quadrantSegments:l,capStyle:u}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}})}(e,t).switchMap(function(e){var t=(0,_e.eK)(r),n=v()(t,function(e){return"Default"===e.id}),o=v()((null==n?void 0:n.nodes)||[],function(e){return e.id===T})||v()(t,function(e){return e.id===T}),i=[(0,ze.reprojectGeoJson)({id:0,geometry:e,type:"Feature"},"EPSG:3857","EPSG:4326")],a=(0,ze.getGeoJSONExtent)({features:i,type:"FeatureCollection"});return(o?mr().Observable.empty():mr().Observable.of((0,wr.$)("Buffered layers",null,{id:T},!0))).concat(mr().Observable.of((0,wr.VE)({id:hr()(),type:"vector",name:"Buffer Layer "+f,title:"Buffer Layer "+f,visibility:!0,group:T,bbox:{crs:"EPSG:4326",bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}},features:i.map(function(e){return on(on({},e),{},{properties:on(on({},e.properties),{},{geomType:Ye(e.geometry.type)})})}),style:{format:"geostyler",body:{name:"",rules:sn}}}),(0,Cr.jc)(a,"EPSG:4326"),(0,jr.kX)({title:"notification.success",message:"GeoProcessing.notifications.successfulBuffer",autoDismiss:6,position:"tc"})))}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorBuffer",autoDismiss:6,position:"tc"}))})})},p=ct(r);if(b()(p))return(0,Rr.Ay)(a,Wr({name:o.name,featureCollection:"vector"===o.type?$e(o.features):null}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of({error:e,layerName:o.name,layerTitle:o.title})}).switchMap(function(e){if(e.error)return e.error.message.includes("Failed to retrieve value for input features")?(console.error("layerName "+e.layerName+" - "+e.layerTitle),mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:e.layerName+" - "+e.layerTitle}}))):mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorBuffer",autoDismiss:6,position:"tc"}));var t={type:"Feature",geometry:e},r=(0,ze.reprojectGeoJson)(t,"EPSG:4326","EPSG:3857"),n=(0,$r.A)(r.geometry);return y(n,t)}).startWith(ue(!0)).concat(mr().Observable.of(ue(!1)));var g=(0,ze.reprojectGeoJson)(p,"EPSG:4326","EPSG:3857"),m=(0,$r.A)(g.geometry);return y(m,p).startWith(ue(!0)).concat(mr().Observable.of(ue(!1)))})},gn=function(e){return e.ofType(z,K).filter(function(e){return e.type===z||""===e.featureId}).switchMap(function(e){return rn(e),mr().Observable.of((0,Tr.v9)({id:P}))})},vn=function(e){return e.ofType(X,J).filter(function(e){return e.type===X||""===e.featureId}).switchMap(function(e){return rn(e),mr().Observable.of((0,Tr.v9)({id:I}))})},mn=function(e,t){return e.ofType(R).filter(function(e){return e.process===S}).switchMap(function(e){rn(e);var r,n,o=t.getState(),i=st(o),a=Ft(o,i),l=jt(o),u=Lt(o)||De()(fr()(a.url)),s=pt(o),c=Ft(o,s),f=Lt(o)||De()(fr()(c.url)),d=ct(o),y={},p=gt(o),g=Ze(l,A),m=[];return u||m.push(a.name===a.title?a.name:a.name+" - "+a.title),f||m.push(c.name===c.title?c.name:c.name+" - "+c.title),m.length?mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:m.join(", ")}})):(r=b()(d)?(0,Rr.Ay)(u,Wr({name:a.name,featureCollection:"vector"===a.type?$e(a.features):null}),y,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of({error:e,layerName:a.name,layerTitle:a.title})}):mr().Observable.of(d.geometry),n=b()(p)?(0,Rr.Ay)(f,Wr({name:c.name,featureCollection:"vector"===c.type?$e(c.features):null}),y,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of({error:e,layerName:c.name,layerTitle:c.title})}):mr().Observable.of(p.geometry),mr().Observable.forkJoin(r,n).switchMap(function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,r)||en(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],l=n[1];if(null!=i&&i.error||null!=l&&l.error){var s,d,p=[];return null!=i&&null!==(s=i.error)&&void 0!==s&&null!==(s=s.message)&&void 0!==s&&s.includes("Failed to retrieve value for input features")&&((0,Kr.vV)(i.error),p.push((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:i.layerName+" - "+i.layerTitle}}))),null!=l&&null!==(d=l.error)&&void 0!==d&&null!==(d=d.message)&&void 0!==d&&d.includes("Failed to retrieve value for input features")&&((0,Kr.vV)(l.error),p.push((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:l.layerName+" - "+l.layerTitle}}))),p.push((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorIntersectGFI",autoDismiss:6,position:"tc"})),mr().Observable.from(p)}var b=bt(o),h=ht(o),S=St(o),E=Et(o),P=Pt(o);return(0,Rr.Ay)(u||f,function(e){var t=e.firstFC,r=e.secondFC,n=e.firstAttributeToRetain,o=void 0===n?"":n,i=e.secondAttributeToRetain,a=void 0===i?"":i,l=e.intersectionMode,u=void 0===l?"INTERSECTION":l,s=e.percentagesEnabled,c=void 0!==s&&s,f=e.areasEnabled,d=void 0!==f&&f;return(0,Rr.Yy)("gs:IntersectionFeatureCollection",[(0,Nr.XH)("first feature collection",(0,Nr.oW)((0,Nr.Xs)((0,Nr.Gr)(JSON.stringify(t)),"application/json"))),(0,Nr.XH)("second feature collection",(0,Nr.oW)((0,Nr.Xs)((0,Nr.Gr)(JSON.stringify(r)),"application/json")))].concat(Br(o?[(0,Nr.XH)("first attributes to retain",(0,Nr.oW)((0,Nr.mC)(o)))]:[]),Br(a?[(0,Nr.XH)("second attributes to retain",(0,Nr.oW)((0,Nr.mC)(a)))]:[]),Br(u?[(0,Nr.XH)("intersectionMode",(0,Nr.oW)((0,Nr.mC)(u)))]:[]),[(0,Nr.XH)("percentagesEnabled",(0,Nr.oW)((0,Nr.mC)(c))),(0,Nr.XH)("areasEnabled",(0,Nr.oW)((0,Nr.mC)(d)))]),(0,Nr.mk)((0,Nr.Cs)("result","application/json")))}({firstFC:{type:"FeatureCollection",features:[{type:"Feature",geometry:i}]},secondFC:{type:"FeatureCollection",features:[{type:"Feature",geometry:l}]},firstAttributeToRetain:b,secondAttributeToRetain:h,intersectionMode:S,percentagesEnabled:E,areasEnabled:P}),y,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).switchMap(function(e){var t=(0,_e.eK)(o);if("string"==typeof e){var r=e.substring(e.indexOf("<ows:ExceptionText>")+19,e.indexOf("</ows:ExceptionText>"));return console.error(e),mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:r,autoDismiss:6,position:"tc"}))}var n=v()(t,function(e){return"Default"===e.id}),i=v()((null==n?void 0:n.nodes)||[],function(e){return e.id===A})||v()(t,function(e){return e.id===A}),a=(0,ze.getGeoJSONExtent)(e);return a.some(function(e){return e===1/0})?mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.emptyIntersection",autoDismiss:6,position:"tc"})):(i?mr().Observable.empty():mr().Observable.of((0,wr.$)("Intersected Layers",null,{id:A},!0))).concat(mr().Observable.of((0,wr.VE)({id:hr()(),type:"vector",name:"Intersection Layer "+g,group:A,title:"Intersection Layer "+g,visibility:!0,features:e.features.map(function(e,t){return on(on({},e),{},{id:"Feature #"+t,properties:on(on({},e.properties),{},{geomType:Ye(e.geometry.type)})})}),bbox:{crs:"EPSG:4326",bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}},style:{format:"geostyler",body:{name:"",rules:sn}}}),(0,Cr.jc)(a,"EPSG:4326"),(0,jr.kX)({title:"notification.success",message:"GeoProcessing.notifications.successfulIntersection",autoDismiss:6,position:"tc"})))}).catch(function(e){return(0,Kr.vV)(e),m=[],u||m.push(a.name+" - "+a.title),f||m.push(c.name+" - "+c.title),m.length?mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:m.join(", ")}})):mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorIntersectGFI",autoDismiss:6,position:"tc"}))})}).startWith(ue(!0)).concat(mr().Observable.of(ue(!1))))})},bn=function(e,t){return e.ofType(ne).switchMap(function(){var e=wt(t.getState());return mr().Observable.of((0,Tr.vD)("gpt",{visibility:e}))})},hn=function(e,t){return e.ofType(or.x7).filter(function(e){return e.control===E}).switchMap(function(){var e,r=t.getState(),n=wt(r),o=(0,ir.dZ)(r);if(At(r)===h){var i,a,l=(0,Ur.d)(r),u=v()(l,function(e){return e.id===P});return null!=u&&u.id?(i=mr().Observable).of.apply(i,[(0,Tr.E)(u.id,u.owner,u.actionType,on(on({},u.options),{},{visibility:!!o&&n})),(0,Cr.nt)("click",E)].concat(Qr(o?[]:[(0,Lr.S$)(!0),he("")]))):(a=mr().Observable).of.apply(a,[(0,Cr.nt)("click",E)].concat(Qr(o?[]:[(0,Lr.S$)(!0),he("")])))}return mr().Observable.of((0,Tr.vD)("gpt",{visibility:!!o&&n})).concat((e=mr().Observable).of.apply(e,[(0,Cr.nt)("click",E)].concat(Qr(o?[]:[(0,Lr.S$)(!0),he("")]))))})},Sn=function(e){return e.ofType(N).switchMap(function(){return mr().Observable.of((0,Cr.nt)("click",E))})},En=function(e,t){var r=t.getState;return e.ofType(re).filter(function(e){return!!e.source}).switchMap(function(e){var t=e.source,n=r();return mr().Observable.from([(0,Lr.gt)(),(0,Lr.bC)()].concat(Qr(Ne()(n,"draw.drawOwner","")===E?un:[]),[(0,Cr.K6)("click",E)],Qr((0,zr.Xw)(n)?[(0,Lr.S$)(!1)]:[(0,Lr.S$)(!t)])))})},Pn=function(e,t){var r=t.getState;return e.ofType(Cr.a2).filter(function(){return e=r(),!!Ne()((0,Me.mg)(e),"eventListeners.click",[]).find(function(e){return e===E});var e}).switchMap(function(e){var t,n=e.point,o=r(),i=(0,Me.mg)(o),a=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedLayerId}(o),l=Ct(o),u="source"===l?ve:be,s="source"===l?ge:me,c=Ft(o,a),f=(0,Vr.Cy)(c,{format:"application/json",map:i,point:n}),d=f.url,y=f.request,p=d,g=on({},y);if(d)return("client"!==d?(0,Xr.N)(p,g,c,{attachJSON:!0}):mr().Observable.defer(function(){var e,t,r;return mr().Observable.of(null!=y&&null!==(e=y.features)&&void 0!==e&&null!==(e=e[0])&&void 0!==e&&null!==(e=e.properties)&&void 0!==e&&null!==(e=e.features)&&void 0!==e&&e.length?null==y||null===(t=y.features)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.properties:null!=y&&null!==(r=y.features)&&void 0!==r&&r.length?y:{features:[]})})).switchMap(function(e){var t=e.features;return null!=t&&t.length?mr().Observable.from([u(t[0]),s(t[0].id),(0,jr.kX)({title:"notification.success",message:"GeoProcessing.notifications.featureFound",autoDismiss:10,position:"tc"})]):mr().Observable.of((0,jr.$e)({title:"notification.warning",message:"GeoProcessing.notifications.noFeatureInPoint",autoDismiss:10,position:"tc"}))}).catch(function(e){return(0,Kr.vV)(e),mr().Observable.of((0,jr.z3)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGFI",autoDismiss:6,position:"tc"}))});var v=(null!==(t=null==n?void 0:n.intersectedFeatures)&&void 0!==t?t:[]).find(function(e){return e.id===c.id}),m=null==v?void 0:v.features[0];return m?mr().Observable.of(u(m),s(m.id)):mr().Observable.of((0,jr.$e)({title:"notification.warning",message:"longitudinalProfile.warnings.noFeatureInPoint",autoDismiss:10,position:"tc"}))})},In=function(e,t){return e.ofType(Pr.a).filter(function(e){var r=e.source;return(0,ir.dZ)(t.getState())&&r!==E}).map(function(e){var t,r,n,o,i=e.layout,a=(0,Pr.Ix)(on(on({},i),{},{right:ln+(null!==(t=null==i||null===(r=i.boundingSidebarRect)||void 0===r?void 0:r.right)&&void 0!==t?t:0),boundingMapRect:on(on({},i.boundingMapRect||{}),{},{right:ln+(null!==(n=null==i||null===(o=i.boundingSidebarRect)||void 0===o?void 0:o.right)&&void 0!==n?n:0)}),rightPanel:!0}));return on(on({},a),{},{source:E})})},An=function(e){return e.ofType(N).switchMap(function(){return mr().Observable.of((0,Tr.v9)({id:P}),(0,Tr.v9)({id:I}))})},Tn=r(980971);function On(e){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(e)}function Gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(r),!0).forEach(function(t){Cn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cn(e,t,r){return(t=function(e){var t=function(e){if("object"!=On(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=On(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==On(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ln={source:{},buffer:{},selectedLayerId:"",selectedLayerType:"",intersection:{intersectionMode:"INTERSECTION"},flags:{showHighlightLayers:!0,isIntersectionEnabled:!0,runningProcess:!1}};const jn=(0,r(393149).i1)("GeoProcessing",{component:sr,containers:{SidebarMenu:{name:"GeoProcessing",position:2100,doNotHide:!0,tooltip:"GeoProcessing.tooltip.siderBarBtn",text:i().createElement(l.A,{msgId:"GeoProcessing.title"}),icon:i().createElement(a.e6,{glyph:"globe-settings"}),action:or.KP.bind(null,"GeoProcessing",null),priority:10,toggle:!0},BurgerMenu:{name:"GeoProcessing",position:2100,doNotHide:!0,tooltip:"GeoProcessing.tooltip.siderBarBtn",text:i().createElement(l.A,{msgId:"GeoProcessing.title"}),icon:i().createElement(a.e6,{glyph:"globe-settings"}),action:or.KP.bind(null,"GeoProcessing",null),priority:12,toggle:!0}},reducers:{geoProcessing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn({selectedTool:h||S},Ln),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{checkingWPSAvailability:t.status})});case w:return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{checkingWPSAvailabilityIntersection:t.status})});case L:return wn(wn({},e),{},{errorLoadingDFT:Cn({},t.layerId,!0)});case j:return wn(wn(wn({},e),t.cfg),{},{cfg:t.cfg,buffer:wn(wn({},e.buffer),t.cfg.buffer||{}),intersection:wn(wn({},e.intersection),t.cfg.intersection||{})});case N:case or.rY:case Tn.LK:return wn(wn(wn({},e),Ln),{},{buffer:wn(wn({},e.cfg.buffer||{}),Ln.buffer),intersection:wn(wn({},e.cfg.intersection||{}),Ln.intersection),source:wn({},Ln.source)});case F:return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{runningProcess:t.status})});case D:return wn(wn({},e),{},{buffer:wn(wn({},e.buffer),{},{distance:Number(t.distance)})});case x:return wn(wn({},e),{},{buffer:wn(wn({},e.buffer),{},{distanceUom:t.uom})});case k:return wn(wn({},e),{},{buffer:wn(wn({},e.buffer),{},{quadrantSegments:Number(t.quadrantSegments)})});case M:return wn(wn({},e),{},{buffer:wn(wn({},e.buffer),{},{capStyle:t.capStyle})});case _:var r;return t.data.features?wn(wn({},e),{},Cn(Cn({},t.source,wn(wn({},e[t.source]),{},{features:(e[t.source].features||[]).concat(t.data.features||[]).filter(function(e){var t;return!(null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureId)}),totalCount:t.data.totalFeatures,currentPage:t.nextPage})),"flags",wn(wn({},e.flags),{},{isIntersectionEnabled:"source"===t.source?!(null!==(r=t.geometryProperty)&&void 0!==r&&null!==(r=r.type)&&void 0!==r&&r.includes("Point")):e.flags.isIntersectionEnabled}))):wn(wn({},e),{},Cn({},t.source,wn(wn({},e[t.source]),{},{error:t.data})));case W:return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{featuresSourceLoading:t.status})});case q:return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{featuresIntersectionLoading:t.status})});case B:return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{invalid:wn(wn({},e.flags.invalid),{},Cn({},t.layerId,t.status))})});case H:return wn(wn({},e),{},{flags:wn(wn({},e.flags),"source"===t.source?{wpsAvailability:wn(wn({},e.flags.wpsAvailability),{},Cn({},t.layerId,t.status))}:{wpsAvailabilityIntersection:wn(wn({},e.flags.wpsAvailabilityIntersection),{},Cn({},t.layerId,t.status))})});case U:return wn(wn({},e),{},{selectedTool:t.tool});case z:var n,o,i,a,l,u,s,c,f,d;return wn(wn({},e),{},{selectedLayerType:t.layerId||"source"!==e.selectedLayerType?e.selectedLayerType:"",selectedLayerId:"source"===e.selectedLayerType?t.layerId:e.selectedLayerId,source:wn(wn({},e.source),{},{layerId:t.layerId,features:t.layerId!==(null===(n=e.source)||void 0===n?void 0:n.layerId)?[]:null==e||null===(o=e.source)||void 0===o?void 0:o.features,totalCount:t.layerId!==(null===(i=e.source)||void 0===i?void 0:i.layerId)?0:null==e||null===(a=e.source)||void 0===a?void 0:a.totalCount,currentPage:t.layerId!==(null===(l=e.source)||void 0===l?void 0:l.layerId)?0:null==e||null===(u=e.source)||void 0===u?void 0:u.currentPage,feature:t.layerId!==(null===(s=e.source)||void 0===s?void 0:s.layerId)||null==e||null===(c=e.source)||void 0===c?void 0:c.feature,featureId:t.layerId!==(null===(f=e.source)||void 0===f?void 0:f.layerId)?"":null==e||null===(d=e.source)||void 0===d?void 0:d.featureId})});case K:var y,p,g;return wn(wn({},e),{},{source:wn(wn({},e.source),{},{featureId:t.featureId,currentPage:""===t.featureId?0:null==e||null===(y=e.source)||void 0===y?void 0:y.currentPage,features:""===t.featureId?[]:null==e||null===(p=e.source)||void 0===p?void 0:p.features,feature:""===t.featureId?{}:null==e||null===(g=e.source)||void 0===g?void 0:g.feature})});case V:return wn(wn({},e),{},{source:wn(wn({},e.source),{},{feature:t.feature,features:v()(e.source.features,function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.feature)||void 0===r?void 0:r.id)})?e.source.features:[t.feature]})});case X:var m,b,E,P,I,A,T,O,C,R;return wn(wn({},e),{},{selectedLayerType:t.layerId||"intersection"!==e.selectedLayerType?e.selectedLayerType:"",selectedLayerId:"intersection"===e.selectedLayerType?t.layerId:e.selectedLayerId,intersection:wn(wn({},e.intersection),{},{layerId:t.layerId,features:t.layerId!==(null===(m=e.intersection)||void 0===m?void 0:m.layerId)?[]:null==e||null===(b=e.intersection)||void 0===b?void 0:b.features,totalCount:t.layerId!==(null===(E=e.intersection)||void 0===E?void 0:E.layerId)?0:null==e||null===(P=e.intersection)||void 0===P?void 0:P.totalCount,currentPage:t.layerId!==(null===(I=e.intersection)||void 0===I?void 0:I.layerId)?0:null==e||null===(A=e.intersection)||void 0===A?void 0:A.currentPage,feature:t.layerId!==(null===(T=e.intersection)||void 0===T?void 0:T.layerId)||null==e||null===(O=e.intersection)||void 0===O?void 0:O.feature,featureId:t.layerId!==(null===(C=e.intersection)||void 0===C?void 0:C.layerId)?"":null==e||null===(R=e.intersection)||void 0===R?void 0:R.featureId})});case J:var oe,ie,ae;return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{featureId:t.featureId,currentPage:""===t.featureId?0:null==e||null===(oe=e.intersection)||void 0===oe?void 0:oe.currentPage,features:""===t.featureId?[]:null==e||null===(ie=e.intersection)||void 0===ie?void 0:ie.features,feature:""===t.featureId?{}:null==e||null===(ae=e.intersection)||void 0===ae?void 0:ae.feature})});case Y:return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{feature:t.feature,features:v()(e.intersection.features,function(e){return e.id===t.feature.id})?e.intersection.features:[t.feature]})});case $:return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{firstAttributeToRetain:t.firstAttributeToRetain})});case Z:return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{secondAttributeToRetain:t.secondAttributeToRetain})});case Q:return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{intersectionMode:t.intersectionMode})});case ee:return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{percentagesEnabled:t.percentagesEnabled})});case te:return wn(wn({},e),{},{intersection:wn(wn({},e.intersection),{},{areasEnabled:t.areasEnabled})});case re:return wn(wn({},e),{},{selectedLayerType:t.source,selectedLayerId:"source"===t.source?e.source.layerId:e.intersection.layerId});case ne:var le;return wn(wn({},e),{},{flags:wn(wn({},e.flags),{},{showHighlightLayers:!(null!=e&&null!==(le=e.flags)&&void 0!==le&&le.showHighlightLayers)})});default:return e}}},epics:n})},913195:e=>{var t=Math.floor,r=Math.random;e.exports=function(e,n){return e+t(r()*(n-e+1))}},258253:(e,t,r)=>{var n=r(913195),o=r(936800),i=r(217400),a=parseFloat,l=Math.min,u=Math.random;e.exports=function(e,t,r){if(r&&"boolean"!=typeof r&&o(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=i(e),void 0===t?(t=e,e=0):t=i(t)),e>t){var s=e;e=t,t=s}if(r||e%1||t%1){var c=u();return l(e+c*(t-e+a("1e-"+((c+"").length-1))),t)}return n(e,t)}}}]);