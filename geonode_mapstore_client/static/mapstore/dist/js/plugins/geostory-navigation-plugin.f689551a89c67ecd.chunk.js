"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8363],{441614:(t,e,n)=>{n.d(e,{A:()=>d});var r=n(273517),o=n(110188);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,c,a=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw o}}return a}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const d=function(t){var e,n=t.direction,i=void 0===n?"horizontal":n,c=t.deltaScroll,d=t.width,p=t.height,v=t.transition,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],y=s((0,r.useState)(0),2),h=y[0],b=y[1],g=s((0,r.useState)(0),2),S=g[0],w=g[1],O=(0,r.useRef)({x:0,y:0}),P=s((0,r.useState)(!1),2),E=P[0],j=P[1],C=s((0,r.useState)("start"),2),T=C[0],I=C[1],k=s((0,r.useState)(),2),A=k[0],D=k[1],x=(0,r.useRef)(),Z=(0,r.useRef)({});function N(t,e){D("move:start");var n=x.current,r=n.parentNode,o=n.getBoundingClientRect(),c=r.getBoundingClientRect();if("horizontal"===i){var a=t+o.width;t<0&&a>c.width?(b(t),O.current.x=t,I("center")):t>=0?(b(0),O.current.x=0,I("start")):a<=c.width&&(b(c.width-o.width),O.current.x=c.width-o.width,I("end"))}if("vertical"===i){var u=e+o.height;e<0&&u>c.height?(w(e),O.current.y=e,I("center")):e>=0?(w(0),O.current.y=0,I("start")):u<=c.height&&(w(c.height-o.height),O.current.y=c.height-o.height,I("end"))}setTimeout((function(){D("move:end")}),v)}function M(){var t=x.current,e=t.parentNode,n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return!("horizontal"===i&&r.width>=n.width||"vertical"===i&&r.height>=n.height)}(0,r.useEffect)((function(){function t(t){t.preventDefault();var e=M();return j(M()),e?N(O.current.x-(t.deltaY>0?c:-c),O.current.y-(t.deltaY>0?c:-c)):null}var e=M();j(e);var n=x.current.parentNode;return e&&N(O.current.x,O.current.y),e&&n&&n.addEventListener&&n.addEventListener("wheel",t),function(){e&&n&&n.removeEventListener&&n.removeEventListener("wheel",t)}}),[d,p].concat(function(t){if(Array.isArray(t))return f(t)}(e=m)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));var R=(0,o.uh)({onSwiping:function(t){t.event.stopPropagation();var e=M();return j(M()),e?N(h-t.deltaX*t.velocity,S-t.deltaY*t.velocity):null},trackTouch:!0,trackMouse:!0});function U(t){var e=Z.current[t];if(e){var n=x.current,r=(n&&n.parentNode).getBoundingClientRect(),o=e.getBoundingClientRect();if("horizontal"===i){var c=r.width,a=r.left,u=o.width,s=o.left,l=a+c,f=s+u;return a<=s&&l>=s||a<=f&&l>=f}}return!1}return{status:A,canSwipe:E,isStartControlActive:E&&("end"===T||"center"===T),isEndControlActive:E&&("start"===T||"center"===T),positionLabel:T,coordinates:{x:h,y:S},containerPropsHandlers:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,e=void 0===t?{}:t;return a(a({},R),{},{style:a({position:"relative",overflow:"hidden",width:"100%",height:"100%"},e)})},contentPropsHandlers:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,e=void 0===t?{}:t;return{ref:x,style:a(a(a(a({position:"absolute",display:"flex"},v&&{transition:"transform ".concat(v,"ms ease 0s")}),{},{flexDirection:"horizontal"===i?"row":"column"},E&&"horizontal"===i&&{transform:"translateX(".concat(h,"px)")}),E&&"vertical"===i&&{transform:"translateY(".concat(S,"px)")}),e)}},itemPropsHandlers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.onClick;return a({key:e,ref:function(t){return t&&function(t,e){Z.current=a(a({},Z.current),{},u({},t,e))}(e,t)}},n?{onClick:n,tabindex:U(e)?0:-1,onKeyDown:function(t){"Enter"===t.key&&n()}}:{tabindex:-1})},updateCoordinates:N,moveItemInViewById:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).margin,n=void 0===e?0:e,r=Z.current[t];if(r){var o=x.current,c=(o&&o.parentNode).getBoundingClientRect(),a=r.getBoundingClientRect();if("horizontal"===i){var u=c.width,s=c.left,l=a.width,f=a.left;s<=f&&s+u>=f+l||N(-(f-o.getBoundingClientRect().left)+n,void 0)}}},moveToDeltaSize:function(t){N(h+t,S+t)}}}},798848:(t,e,n)=>{n.r(e),n.d(e,{default:()=>W});var r=n(273517),o=n.n(r),i=n(811668),c=n(801081),a=n(393149),u=n(276901),s=n(183083),l=n(24812),f=n(537920),d=n(256951),p=n(8117),v=n(738221),m=n.n(v),y=n(441614),h=n(292935),b=n(711030);function g(){return g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g.apply(null,arguments)}var S=function(t){var e=t.tabindex,n=t.text,r=t.selected,i=t.style;return o().createElement(b.A,{tabindex:e,className:"".concat(r?"active":"btn-tray"," btn-xs btn-default"),style:i},n)};const w=(0,h.A)((function(t){var e=t.currentPage,n=t.items,i=t.scrollTo,c=void 0===i?function(){}:i,a=t.width,s=t.height,l=t.deltaSwipeSize,f=void 0===l?200:l,d=t.transition,v=void 0===d?300:d,h=t.updateTimeDebounceTime,w=void 0===h?500:h,O=t.getItemStyle,P=void 0===O?function(){return{}}:O,E=(0,y.A)({direction:"horizontal",width:a,height:s,transition:v,deltaScroll:f}),j=E.isStartControlActive,C=E.isEndControlActive,T=E.containerPropsHandlers,I=E.contentPropsHandlers,k=E.itemPropsHandlers,A=E.moveToDeltaSize,D=E.moveItemInViewById,x=e&&e.columns&&e.sectionId&&e.columns[e.sectionId]||e&&e.sectionId,Z=function(t,n,r){return r===u.Fq.CAROUSEL?e&&e.sectionId===t:n===t},N=(0,r.useRef)(null);return(0,r.useEffect)((function(){return N.current=m()((function(t){D(t,{margin:32})}),w),function(){N.current&&(N.current.cancel(),N.current=null)}}),[]),(0,r.useEffect)((function(){N.current&&(N.current.cancel(),N.current(x))}),[x]),o().createElement("div",g({},T(),{className:"ms-horizontal-menu"}),o().createElement("div",I(),n.map((function(t){var n=t.title,r=t.id,i=t.type,a=k({id:r,onClick:function(){e&&e.sectionId!==r&&c(r)}});return o().createElement("div",g({},a,{className:"ms-menu-item"}),o().createElement(S,{tabindex:"-1",id:r,text:n||"title",selected:Z(r,x,i),style:P(Z(r,x,i))}))}))),j&&o().createElement(b.A,{className:"square-button-md no-border",style:{position:"absolute"},onClick:function(){return A(f)}},o().createElement(p.e6,{glyph:"chevron-left"})),C&&o().createElement(b.A,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:function(){return A(-f)}},o().createElement(p.e6,{glyph:"chevron-right"})))}));var O=n(605556),P=n.n(O),E=n(306840),j=n(8571),C=n(244383),T=n.n(C),I=n(779893),k=n(980971),A=["tooltipPosition","hidden"];function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function x(){return x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x.apply(null,arguments)}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N=function(){return!!t})()}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function U(t,e,n){return(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){var e=function(t){if("object"!=D(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}var L=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return U(t=function(t,e,n){return e=M(e),function(t,e){if(e&&("object"==D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N()?Reflect.construct(e,n||[],M(t).constructor):e.apply(t,n))}(this,e,[].concat(r)),"checkUnsavedChanges",(function(){t.goHome()})),U(t,"goHome",(function(){t.props.goToHomePage()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(e,t),n=e,r=[{key:"render",value:function(){var t=this.props,e=t.tooltipPosition,n=t.hidden,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,A),i=o().createElement(p.m_,{id:"toolbar-home-button"},o().createElement(j.A,{msgId:"gohome"}));return!n&&o().createElement(E.A,{overlay:i,placement:e},o().createElement(b.A,x({id:"home-button",className:"square-button",bsStyle:this.props.bsStyle,onClick:this.checkUnsavedChanges,tooltip:i},T()(r,["disabled","active","block","componentClass","href","children","icon","bsStyle","className"])),o().createElement(p.e6,{glyph:this.props.icon})))}}],r&&Z(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);U(L,"propTypes",{icon:P().string,onCheckMapChanges:P().func,tooltipPosition:P().string,bsStyle:P().string,hidden:P().bool}),U(L,"contextTypes",{router:P().object,messages:P().object}),U(L,"defaultProps",{icon:"home",tooltipPosition:"left",bsStyle:"primary",hidden:!1});const z=(0,i.connect)(null,{goToHomePage:function(){var t=I.Ay.getMiscSetting("homePath","/");return(0,k.VC)(t)}})(L);var B=n(79738),H=n(223805),q=n.n(H);function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){V(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function V(t,e,n){return(e=function(t){var e=function(t){if("object"!=X(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const K=function(t){var e,n=t.settings,r=t.scrollTo,i=void 0===r?function(){}:r,c=t.navigableItems,a=void 0===c?[]:c,u=t.currentPage,s=void 0===u?{}:u,l=t.totalItems,f=void 0===l?1:l,p=t.currentPosition,v=void 0===p?0:p,m=t.router,y=t.buttons,h=void 0===y?[]:y,b=null==n||null===(e=n.theme)||void 0===e?void 0:e.general,g=q()(b)&&b||{},S=g.fontFamily,O=g.borderColor,P=g.color,E=g.backgroundColor,j=n||{},C=j.isTitleEnabled,T=j.isLogoEnabled,I=j.isNavbarEnabled,k=h.length>0,A=m&&m.pathname&&m.search&&"true"===(0,B.vA)(m.search).showHome&&m.pathname.includes("/geostory/shared"),D=I&&(null==a?void 0:a.length)>0,x=C||T||D||k||A;return o().createElement("div",{className:"ms-geostory-navigation-bar",style:Y(Y({color:P,backgroundColor:E},O&&{borderBottom:"1px solid ".concat(O)}),{},{fontFamily:S})},o().createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:O}},o().createElement("div",{className:"progress-percent",style:{width:"".concat((v+1)/f*100,"%"),backgroundColor:P}})),x&&o().createElement("div",{className:"ms-geostory-navigation-tools"},o().createElement("div",{className:"ms-geostory-navigation-toolbar"},o().createElement(d.A,{buttons:h}),A&&o().createElement(z,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),o().createElement("div",{className:"ms-geostory-navigation-elements"},D?o().createElement("div",{className:"ms-geostory-navigation-navigable-items"},o().createElement(w,{items:a,currentPage:s,scrollTo:i,getItemStyle:function(t){return t?{color:E,backgroundColor:P}:{outlineColor:P,borderColor:P}}})):null,o().createElement("div",{className:"ms-geostory-navigation-metadata"},C&&o().createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:n.storyTitleFontSize||"14px"}},n.storyTitle),T&&o().createElement("div",{className:"ms-geostory-navigation-logo"},o().createElement("img",{src:n.thumbnail&&(n.thumbnail.data||n.thumbnail.url)||"",height:32}))))))},W=(0,a.i1)("GeoStoryNavigation",{component:(0,i.connect)((0,c.j8)({mode:s.XU,settings:s.t2,currentPage:s.wF,currentPosition:s.mK,totalItems:s.yZ,navigableItems:(0,s.x4)({includeAlways:!1}),pathname:l.o,search:l.W}))((function(t){var e=t.mode,n=void 0===e?u.dX.VIEW:e,r=t.currentPage,i=t.currentPosition,c=t.totalItems,a=t.settings,s=t.navigableItems,l=void 0===s?[]:s,f=t.pathname,d=t.search,p=t.items,v=(void 0===p?[]:p).filter((function(t){return t.tool})).map((function(t){return{Element:t.tool}}));return n===u.dX.VIEW?o().createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},o().createElement(K,{settings:a,currentPage:r,currentPosition:i,totalItems:c,scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};(0,u.oS)(t,e)},navigableItems:l,router:{pathname:f,search:d},buttons:v})):null})),reducers:{geostory:f.A}})},537920:(t,e,n)=>{n.d(e,{A:()=>x});var r=n(858156),o=n.n(r),i=n(185015),c=n.n(i),a=n(198023),u=n.n(a),s=n(324713),l=n.n(s),f=n(907309),d=n.n(f),p=n(411331),v=n.n(p),m=n(956449),y=n.n(m),h=n(499084),b=n.n(h),g=n(950014),S=n.n(g),w=n(905185),O=n(276901),P=n(958496);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return(e=function(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var A=function(t,e,n){var r=n.contents,o=n.background,i=n.id,c=n.resourceId,a=[],u=e+'{"id": "'.concat(i,'"}]');return c===t?[u]:(o&&o.resourceId===t&&a.push(u+".background"),r?r.reduce((function(e,n){return[].concat(I(e),I(A(t,u+".contents[",n)))}),a):a)},D={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P.gj:var n=e.id,r=e.path,i=e.position,a=e.element,s=(0,O.DS)("currentStory.".concat(r),t),f=o()(t,s,[]),p=function(t,e){var n=t.length,r=0;return e||0===e||(r=n),c()(e)?r=l()(t,{id:e})+1:u()(e)&&(r=Math.min(e,t.length)),r}(f,i),m=f.slice();return m.splice(p,0,C({id:n},a)),(0,w.hZ)(s,m,t);case P.J4:var h=e.id,g=e.mediaType,E=e.data;return(0,w.hZ)("currentStory.resources",S()([{id:h,type:g,data:E}].concat(I(t.currentStory&&t.currentStory.resources||[])),"id"),t);case P.jn:return(0,w.hZ)("mode",e.mode,t);case P.oS:var j=e.id,k=e.mediaType,x=e.data,Z=(0,w.Rd)("currentStory.resources",{id:j,type:k,data:x},{id:j},t);return k===O.mI.MAP&&t.currentStory.sections.filter((function(t){return t.type!==O.Fq.CAROUSEL})).reduce((function(t,e){return[].concat(I(t),I(A(j,"sections[",e)))}),[]).map((function(e){var n=(0,O.DS)("currentStory.".concat(e,".map"),t);Z=(0,w.hZ)(n,void 0,Z)})),Z;case P.s0:var N=e.id,M=e.mediaType,R=(0,w.XB)("currentStory.resources",{id:N},t);return t.currentStory.sections.reduce((function(t,e){return[].concat(I(t),I(A(N,"sections[",e)))}),[]).map((function(e){var n=(0,O.DS)("currentStory.".concat(e,".resourceId"),t);if(R=(0,w.wC)(n,R),M===O.mI.MAP){var r=(0,O.DS)("currentStory.".concat(e,".map"),t);R=(0,w.wC)(r,R)}})),R;case P.ut:return(0,w.hZ)("loading"===e.name?"loading":"loadFlags.".concat(e.name),e.value,(0,w.hZ)("loading",e.value,t));case P.t2:var U=e.path,_=(0,O.DS)("currentStory.".concat(U),t),L=I(_),z=L.pop(),B=o()(t,L);return y()(B)?(c()(z)&&(z=parseInt(z,10)),(0,w.hZ)(L,[].concat(I(B.slice(0,z)),I(B.slice(z+1))),t)):(0,w.wC)(_,t);case P.RJ:var H,q,X=t.defaultSettings||{},F=e.story.settings||X,Y=(null===(H=F)||void 0===H||null===(H=H.theme)||void 0===H?void 0:H.fontFamilies)||[],V=null===(q=t.currentStory)||void 0===q||null===(q=q.settings)||void 0===q||null===(q=q.theme)||void 0===q?void 0:q.fontFamilies;return V&&V.length>0&&(F=(0,w.hZ)("theme.fontFamilies",S()([].concat(I(V),I(Y)),"family"),F)),(0,w.hZ)("currentStory",C(C({},e.story),{},{settings:F}),t);case P.Yp:return(0,w.hZ)("selectedCard",t.selectedCard===e.card?"":e.card,t);case P.Vc:var K=e.control,W=e.value;return(0,w.hZ)("controls.".concat(K),W,t);case P.sb:var J=e.resource,G=t.currentStory&&t.currentStory.settings||{};return(0,w.Zz)((0,w.hZ)("resource",J),(0,w.hZ)("currentStory.settings.storyTitle",G.storyTitle||J.name))(t);case P.MX:case P.NL:return(0,w.wC)("errors.save",t);case P.Jq:return(0,w.hZ)("errors.save",b()(e.error),t);case P.H0:return(0,w.hZ)("isCollapsed",!t.isCollapsed,t);case P.sQ:var Q=o()(t,"currentStory.settings.".concat(e.option));return(0,w.hZ)("currentStory.settings.".concat(e.option),!Q,t);case P.UW:var $=!t.isSettingsEnabled,tt=t.currentStory&&t.currentStory.settings||{};return(0,w.Zz)((0,w.hZ)("isSettingsEnabled",$),(0,w.hZ)("oldSettings",$?tt:{}),(0,w.hZ)("currentStory.settings",$?C({},tt):e.withSave?tt:t.oldSettings))(t);case P.q6:var et=e.path,nt=e.mode,rt=e.options,ot=e.element,it=(0,O.DS)("currentStory.".concat(et),t),ct=o()(t,it);return v()(ct)&&v()(ot)&&"merge"===nt&&(ot=C(C({},ct),ot)),y()(ct)&&y()(ot)&&"merge"===nt&&(ot=null!=rt&&rt.uniqueByKey?S()([].concat(I(ct),I(ot)),rt.uniqueByKey):[].concat(I(ct),I(ot))),(0,w.hZ)(it,ot,t);case P.vG:return(0,w.hZ)("currentStory.settings.".concat(e.prop),e.value,t);case P.Ck:if(e.columnId){var at=d()(t.currentStory.sections,(function(t){return d()(t.contents,{id:e.columnId})}));return at&&d()(at.contents,{id:e.columnId})?(0,w.hZ)("currentPage",C(C({},t.currentPage),{},{columns:C(C({},t.currentPage.columns),{},T({},at.id,e.columnId))}),t):t}return(0,w.hZ)("currentPage",C(C({},t.currentPage),{},{sectionId:e.sectionId}),t);case P.iq:var ut=e.status,st=e.target,lt=e.selector,ft=void 0===lt?"":lt,dt=e.hideContent,pt=void 0!==dt&&dt,vt=e.path,mt=ut?{target:st,selector:ft,hideContent:pt,path:vt}:void 0;return(0,w.hZ)("focusedContent",mt,t);case P.ZW:return(0,w.hZ)("pendingChanges",e.value,t);case P.jx:return(0,w.hZ)("updateUrlOnScroll",e.value,t);case P.Rh:return(0,w.hZ)("mediaEditorSettings",e.mediaEditorSettings,t);case P.HQ:if(e.sectionId){var yt=d()(t.currentStory.sections,(function(t){return d()(t.contents,{id:e.showContentId})}));return yt&&d()(yt.contents,{id:e.showContentId})?(0,w.hZ)("currentStory",C(C({},t.currentStory),{},{sections:(0,O.zK)(t.currentStory.sections,e)}),t):t}return t;case P.DX:return(0,w.hZ)("drawOptions",e.drawOptions,t);case P.T:return D;default:return t}}},110188:(t,e,n)=>{n.d(e,{uh:()=>O});var r=n(273517),o=n.n(r),i=n(605556),c=n.n(i);function a(){return a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(this,arguments)}var u={preventDefaultTouchmoveEvent:!1,delta:10,rotationAngle:0,trackMouse:!1,trackTouch:!0},s={xy:[0,0],swiping:!1,eventData:void 0,start:void 0},l="Left",f="Right",d="Up",p="Down",v="touchstart",m="touchmove",y="touchend",h="mousemove",b="mouseup";function g(t,e){if(0===e)return t;var n=Math.PI/180*e;return[t[0]*Math.cos(n)+t[1]*Math.sin(n),t[1]*Math.cos(n)-t[0]*Math.sin(n)]}function S(t,e){var n=function(e){e.touches&&e.touches.length>1||t((function(t,n){n.trackMouse&&(document.addEventListener(h,r),document.addEventListener(b,i));var o=e.touches?e.touches[0]:e,c=g([o.clientX,o.clientY],n.rotationAngle);return a({},t,s,{eventData:{initial:[].concat(c),first:!0},xy:c,start:e.timeStamp||0})}))},r=function(e){t((function(t,n){if(!t.xy[0]||!t.xy[1]||e.touches&&e.touches.length>1)return t;var r=e.touches?e.touches[0]:e,o=g([r.clientX,r.clientY],n.rotationAngle),i=o[0],c=o[1],u=t.xy[0]-i,s=t.xy[1]-c,v=Math.abs(u),m=Math.abs(s),y=(e.timeStamp||0)-t.start,h=Math.sqrt(v*v+m*m)/(y||1);if(v<n.delta&&m<n.delta&&!t.swiping)return t;var b=function(t,e,n,r){return t>e?n>0?l:f:r>0?d:p}(v,m,u,s),S=a({},t.eventData,{event:e,absX:v,absY:m,deltaX:u,deltaY:s,velocity:h,dir:b});n.onSwiping&&n.onSwiping(S);var w=!1;return(n.onSwiping||n.onSwiped||n["onSwiped"+b])&&(w=!0),w&&n.preventDefaultTouchmoveEvent&&n.trackTouch&&e.cancelable&&e.preventDefault(),a({},t,{eventData:a({},S,{first:!1}),swiping:!0})}))},o=function(e){t((function(t,n){var r;return t.swiping&&(r=a({},t.eventData,{event:e}),n.onSwiped&&n.onSwiped(r),n["onSwiped"+r.dir]&&n["onSwiped"+r.dir](r)),a({},t,s,{eventData:r})}))},i=function(t){document.removeEventListener(h,r),document.removeEventListener(b,i),o(t)},c=function(t){if(t&&t.addEventListener){var e=[[v,n],[m,r],[y,o]];return e.forEach((function(e){var n=e[0],r=e[1];return t.addEventListener(n,r)})),function(){return e.forEach((function(e){var n=e[0],r=e[1];return t.removeEventListener(n,r)}))}}},u={ref:function(e){null!==e&&t((function(t,n){if(t.el===e)return t;var r={};return t.el&&t.el!==e&&t.cleanUpTouch&&(t.cleanUpTouch(),r.cleanUpTouch=null),n.trackTouch&&e&&(r.cleanUpTouch=c(e)),a({},t,{el:e},r)}))}};return e.trackMouse&&(u.onMouseDown=n),[u,c]}function w(t,e,n){var r={};return!e.trackTouch&&t.cleanUpTouch?(t.cleanUpTouch(),r.cleanUpTouch=null):e.trackTouch&&!t.cleanUpTouch&&t.el&&(r.cleanUpTouch=n(t.el)),a({},t,r)}function O(t){var e=t.trackMouse,n=o().useRef(a({},s,{type:"hook"})),r=o().useRef();r.current=a({},u,t);var i=o().useMemo((function(){return S((function(t){return n.current=t(n.current,r.current)}),{trackMouse:e})}),[e]),c=i[0],l=i[1];return n.current=w(n.current,r.current,l),c}var P=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this)._set=function(t){n.transientState=t(n.transientState,n.props)},n.transientState=a({},s,{type:"class"}),n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.render=function(){var t=this.props,e=t.className,n=t.style,r=t.nodeName,i=void 0===r?"div":r,c=t.innerRef,u=t.children,s=t.trackMouse,l=S(this._set,{trackMouse:s}),f=l[0],d=l[1];this.transientState=w(this.transientState,this.props,d);var p=c?function(t){return c(t),f.ref(t)}:f.ref;return o().createElement(i,a({},f,{className:e,style:n,ref:p}),u)},r}(o().PureComponent);P.propTypes={onSwiped:c().func,onSwiping:c().func,onSwipedUp:c().func,onSwipedRight:c().func,onSwipedDown:c().func,onSwipedLeft:c().func,delta:c().number,preventDefaultTouchmoveEvent:c().bool,nodeName:c().string,trackMouse:c().bool,trackTouch:c().bool,innerRef:c().func,rotationAngle:c().number},P.defaultProps=u}}]);