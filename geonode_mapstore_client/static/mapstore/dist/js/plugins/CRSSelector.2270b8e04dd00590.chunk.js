"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[11725],{446176:(e,t,r)=>{r.d(t,{B0:()=>g,EE:()=>y,EZ:()=>p,Fk:()=>a,HD:()=>v,I:()=>c,IL:()=>f,IS:()=>E,NO:()=>h,O8:()=>S,Qn:()=>i,RG:()=>b,TA:()=>O,_G:()=>d,dC:()=>o,eO:()=>m,gl:()=>w,jT:()=>l,ol:()=>j,rC:()=>u,vM:()=>n,xn:()=>s});var n="ANNOTATIONS:EDIT",o="ANNOTATIONS:DOWNLOAD",i="ANNOTATIONS:LOAD_ANNOTATIONS",u="ANNOTATIONS:NEW",c="ANNOTATIONS:CLOSE",l="ANNOTATIONS:CONFIRM_CLOSE",a="ANNOTATIONS:CANCEL_CLOSE",s="ANNOTATIONS:REMOVE",p="ANNOTATIONS:STORE_SESSION",f="ANNOTATIONS:MERGE_FEATURES",y="ANNOTATIONS:SELECT_FEATURE",d=function(e){return{type:n,id:e}},b=function(e){return{type:o,annotations:e}},v=function(e){return{type:i,features:e,override:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},m=function(){return{type:u}},O=function(){return{type:c}},g=function(e){return{type:l,layer:e}},h=function(){return{type:a}},S=function(e){return{type:s,id:e}},j=function(e){return{type:p,session:e}},w=function(e,t){return{type:f,id:e,annotation:t}},E=function(e){return{type:y,id:e}}},516516:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(446176);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.EZ:return u(u({},e),{},{session:t.session});case n.EE:return u(u({},e),{},{featureId:t.id});case n.rC:case n.vM:return u(u({},e),{},{editing:!0,closeId:0});case n.I:return u(u({},e),{},{closeId:(e.closeId||0)+1});case n.jT:return u(u({},e),{},{editing:!1,closeId:0,session:null});case n.Fk:return u(u({},e),{},{closeId:0});default:return e}}},29489:(e,t,r)=>{r.d(t,{Kn:()=>a,_L:()=>p,bd:()=>s,gu:()=>c,kv:()=>l,vC:()=>u});var n=r(801081),o=r(307679),i=r(535273),u=(0,n.Mz)([o.Kv],function(e){return e.find(i.fd)}),c=(0,n.Mz)([o.Kv],function(e){return e.filter(i.fd)}),l=function(e){var t=(0,o.ZT)(e);return t&&(0,i.fd)(t)?t:null},a=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.editing},s=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.session},p=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.featureId}},321127:(e,t,r)=>{r.r(t),r.d(t,{default:()=>X});var n=r(761448),o=r.n(n),i=r(679859),u=r.n(i),c=r(421585),l=r.n(c),a=r(605556),s=r.n(a),p=r(273517),f=r.n(p),y=r(8117),d=r(393149),b=r(801081),v="CHANGE_CRS_INPUT_VALUE",m=r(273494),O=r(883832),g=r(8571),h=r(628017);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function A(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var C=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return A(e=function(e,t,r){return t=E(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"handleChange",function(t){e.props.changeInputValue(t.target.value)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.children;return f().createElement("div",{className:"dropdown-menu",style:{left:"auto",right:0}},f().createElement(y.HU,{className:"ms-prj-header",bsSize:"sm"},f().createElement("div",null,f().createElement(g.A,{msgId:"crsSelectorSelectedCRS"})),f().createElement("div",null,this.props.selected)),f().createElement(y.yq,{style:{maxHeight:150,overflowY:"auto",marginBottom:0}},t.filter(function(t){return!e.props.value.trim()||-1!==t.props.children.indexOf(e.props.value)})),f().createElement(y.MJ,{ref:function(t){e.input=t},type:"text",placeholder:(0,h.kA)(this.context.messages,"crsSelectorFilterPlaceholder"),onChange:this.handleChange,value:this.props.value}))}}])&&j(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(f().Component);A(C,"propTypes",{selected:s().string,value:s().string,changeInputValue:s().func}),A(C,"contextTypes",{messages:s().object}),A(C,"defaultProps",{value:"",changeInputValue:function(){}});const P=C;var R=r(164045);var I=r(516516),_=r(29489),k=r(130711),D=r(401631),L=r(307679),B=r(131127),M=r(97401),x=r(747135),U=r(501719),F=r(764932),G=r(711030);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function q(e,t,r){return(t=J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}var W=(0,R.A)(G.A),Y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return q(e=function(e,t,r){return t=K(t),function(e,t){if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,r||[],K(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{toggled:!1}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=[],r={};for(var n in Object.keys(this.props.availableCRS).length&&(r=(0,F.filterCRSList)(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),r)r.hasOwnProperty(n)&&t.push({value:n});var i=(0,F.normalizeSRS)(this.props.selected,this.props.filterAllowedCRS),c=["EPSG:4326","EPSG:3857","EPSG:900913"],a=["wms","osm","tileprovider","empty"],s=u()(this.props.allowedRoles,"ALL")||u()(this.props.allowedRoles,this.props.currentRole);return this.props.enabled&&s?f().createElement(y.ms,{dropup:!0,className:"ms-prj-selector",onToggle:function(t){return e.setState({toggled:t})}},f().createElement(W,{bsRole:"toggle",bsStyle:"primary",className:"map-footer-btn btn-".concat(this.state.toggled?"success":"primary"),tooltip:f().createElement(g.A,{msgId:"showCrsSelector"}),tooltipPosition:"top"},f().createElement(y.e6,{glyph:"crs"})),f().createElement(P,{bsRole:"menu",value:this.props.value,selected:i,projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,changeInputValue:function(t){return e.props.typeInput(t)}},t.map(function(t){return f().createElement(y.HU,{key:t.value,active:i===t.value,onClick:function(t){return function(t){l()(c,t)>-1||l()(a,e.props.currentBackground.type)>-1||e.props.currentBackground.allowedSRS&&o()(e.props.currentBackground.allowedSRS,t)?e.props.setCrs(t):e.props.onError({title:"error",message:"notification.incompatibleBackgroundAndProjection",action:{label:"close"},position:"tc",uid:"3"})}(t.target.textContent)},eventKey:t.value},t.value)}))):null}}],n&&V(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(f().Component);q(Y,"propTypes",{selected:s().string,value:s().string,projections:s().array,availableCRS:s().object,filterAllowedCRS:s().array,projectionDefs:s().array,additionalCRS:s().object,setCrs:s().func,typeInput:s().func,enabled:s().bool,currentBackground:s().object,onError:s().func,allowedRoles:s().array,currentRole:s().string}),q(Y,"defaultProps",{availableCRS:(0,F.getAvailableCRS)(),setCrs:function(){},typeInput:function(){},enabled:!0,allowedRoles:["ALL"]});var Q=(0,d.Ng)((0,b.Mz)(U.N9,L.vm,B.Bg,B.$5,function(e){return e&&e.crsselector&&e.crsselector.value},D.XU,x.NR,M.lU,k.qt,k.sY,k.vJ,_.Kn,function(e,t,r,n,o,i,u,c,l,a,s,p){return{currentRole:e,currentBackground:t,selected:r,projectionDefs:n,value:o,enabled:!("EDIT"===i||u||c||l||a||s||p)}}),{typeInput:function(e){return{type:v,value:e}},setCrs:m.d6,onError:O.z3})(Y);const X={CRSSelectorPlugin:Object.assign(Q,{disablePluginIf:"{state('mapType') === 'leaflet'}",MapFooter:{name:"crsSelector",position:10,tool:!0,priority:1}}),reducers:{crsselector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{projections:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===v?Object.assign({},e,{value:t.value}):e},annotations:I.A},epics:{}}}}]);