(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86918],{178612:(e,t,r)=>{var n={"./cesium/plugins/index":[460717,9,32129,60348,86881,67468,55394,10041,57378,60717,45706],"./leaflet/plugins/index":[986657,7,53481,55864,86657,80323],"./openlayers/plugins/index":[3032,9,89029,66968,9765,81224,36128,5991,94336,74138,26549,6381,41358,466,26859]};function o(e){if(!r.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],o=t[0];return Promise.all(t.slice(2).map(r.e)).then(()=>r.t(o,16|t[1]))}o.keys=()=>Object.keys(n),o.id=178612,e.exports=o},886181:(e,t,r)=>{var n={"./cesium/index":[659781,32129,60348,86881,67468,34945,57316,59781],"./leaflet/index":[938188,53481,69341,40684,50856,8493,68474,38188],"./openlayers/index":[353858,89029,66968,9765,81224,36128,54620,18048,74138,96845,29132,23739,37811,75761,50856,41358,73998,5308,1709]};function o(e){if(!r.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then(()=>r(o))}o.keys=()=>Object.keys(n),o.id=886181,e.exports=o},759457:(e,t,r)=>{"use strict";r.d(t,{$H:()=>o,$m:()=>i,Q7:()=>n,Uo:()=>a});var n="BOX_END",o="CHANGE_BOX_SELECTION_STATUS";function i(e){return{type:n,boxEndInfo:e}}function a(e){return{type:o,status:e}}},717140:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>g,Jb:()=>o,Kf:()=>c,Lu:()=>i,Ly:()=>y,Mm:()=>b,Mr:()=>O,Ne:()=>p,Nu:()=>E,Q4:()=>a,S$:()=>f,V9:()=>n,VX:()=>v,ZM:()=>u,d:()=>h,et:()=>m,jx:()=>S,tq:()=>j,uw:()=>w,vK:()=>d,vw:()=>P});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",l="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function d(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function m(){return{type:l,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:u}}function v(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function O(e,t){return{type:o,geometry:e,owner:t}}function h(e){return{type:i,currentStyle:e}}var j=function(e){return v("clean","",e,[],{})};function S(){return{type:f}}function w(e){return{type:c,snappingLayer:e}}function P(){return{type:p}}function E(e,t,r){return{type:y,value:e,prop:t,pluginCfg:r}}},256688:(e,t,r)=>{"use strict";r.d(t,{GL:()=>n,KO:()=>i,Ll:()=>u,Xb:()=>a,qv:()=>o});var n="HIGHLIGHT_STATUS",o="UPDATE_HIGHLIGHTED",i="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function a(e){return{type:i,featuresPath:e}}function u(e,t){return{type:o,features:e,status:t}}},244925:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Hv:()=>l,Kj:()=>p,SU:()=>u,bn:()=>f,di:()=>y,eg:()=>c,km:()=>d,r_:()=>s});var u="MAP:ADD_POPUP",l="MAP:REMOVE_POPUP",s="MAP:CLEAN_POPUPS",c="MAP:ENABLE_HIDE_EMPTY_POPUP",p=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{type:u,id:e,popup:i({id:e},t),single:r}},f=function(e){return{type:l,id:e}},y=function(){return{type:s}},d=function(){return{type:c}}},995134:(e,t,r)=>{"use strict";r.d(t,{HH:()=>n,g$:()=>o,k5:()=>i});var n="MAP_TYPE_CHANGED",o="MAP_TYPE:VISUALIZATION_MODE_CHANGED";function i(e){return{type:o,visualizationMode:e}}},437430:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(273517),o=r.n(n),i=r(605556),a=r.n(i),u=r(6683);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){return function(t){var r,i,a,l=(null==t||null===(r=t.map)||void 0===r?void 0:r.projection)||"EPSG:3857",s=(null==t||null===(i=t.map)||void 0===i||null===(i=i.mapOptions)||void 0===i||null===(i=i.view)||void 0===i?void 0:i.DPI)||null,p=null==t||null===(a=t.map)||void 0===a||null===(a=a.mapOptions)||void 0===a||null===(a=a.view)||void 0===a?void 0:a.scales,f=(0,n.useMemo)(function(){return p?(0,u.C$)(p,l,s):null},[p,l,s]),y=f?c(c({},t),{},{map:c(c({},t.map),{},{mapOptions:c(c({},t.map.mapOptions),{},{view:c(c({},t.map.mapOptions.view),{},{resolutions:f})})})}):t;return o().createElement(e,y)}};f.propTypes={Component:a().element};const y=f},952228:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n=r(45388),o=r.n(n),i=r(400912),a=r.n(i),u=r(509095),l=r(415392),s=r(621939),c=r(904059),p=r(307679),f=r(148936),y=r(434164),d=r(142974),m=r(636422),b=r(724188),g=r(486174);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t,r){return(t=function(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w={accessMetadataExplorer:function(e,t){return e.ofType(u.lm).switchMap(function(){return o().Observable.of((0,l.fN)("metadataexplorer","enabled",!0),(0,u.bj)(!1),(0,u.XP)((0,g.Kz)(t.getState())),(0,s.Rt)("default_map_backgrounds"))})},addBackgroundPropertiesEpic:function(e){return e.ofType(u.Nn).switchMap(function(e){var t,r=e.modalParams,n=o().Observable.of((0,u.Gh)(j(j({},r),{},{loading:!1}))),i=!r.editing&&(null==r||null===(t=r.layer)||void 0===t?void 0:t.remoteTileGrids);return r.layer&&"wms"===r.layer.type?o().Observable.of((0,u.Gh)(j(j({},r),{},{loading:!0}))).concat(o().Observable.forkJoin((0,y.aF)(r.layer),i?o().Observable.defer(function(){return(0,m.Q3)((0,b.ez)(r.layer),r.layer.name,r.layer)}).catch(function(){return o().Observable.of(null)}):o().Observable.of(null)).switchMap(function(e){var t,n,i=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1],s=l?(0,d.Pj)(l):{};return o().Observable.of((0,u.Gh)(j(j({},r),{},{layer:j(j({},r.layer),s),loading:!1,capabilities:(0,d.e9)(a)})))}).catch(function(){return n})):n})},backgroundAddedEpic:function(e,t){return e.ofType(u.ct).mergeMap(function(e){var r=e.layerId,n=t.getState(),i=(0,p.pO)(n,r);return i?o().Observable.of((0,c.ju)(i.id,{visibility:!0}),(0,u.Zb)()):o().Observable.empty()})},backgroundEditedEpic:function(e,t){return e.ofType(u.HW).mergeMap(function(e){var r=e.layerId,n=t.getState();return(0,p.pO)(n,r)?o().Observable.of((0,u.Zb)()):o().Observable.empty()})},backgroundRemovedEpic:function(e,t){return e.ofType(u.M_).mergeMap(function(e){var r,n,i=e.backgroundId,u=t.getState(),l=(0,p.pO)(u,i),s="terrain"===l.type,y=(0,f.CD)(u)||[],d=(0,p.BL)(u);return s?(r=a()(d.filter(function(e){return e.visibility}))||a()(d),n=i===r.id?a()(d.filter(function(e){return e.id!==i&&!e.invalid})):r):(r=(0,p.vm)(u)||{},n=i===r.id?a()(y.filter(function(e){return e.id!==i&&!e.invalid})):r),l?o().Observable.of((0,c.bf)(i,"layers"),(0,c.ju)(n.id,{visibility:!0})):o().Observable.empty()})},syncSelectedBackgroundEpic:function(e){return e.ofType(u.bS).take(1).switchMap(function(t){var r=t.id;return e.ofType(c.Cl).filter(function(e){return e.layer.id===r}).switchMap(function(){return o().Observable.of((0,u.vB)(r))}).takeUntil(e.ofType(u.ct))})}}},434164:(e,t,r)=>{"use strict";r.d(t,{Cc:()=>v,aF:()=>g});var n=r(23412),o=r.n(n),i=(r(400912),r(183555)),a=r(45388),u=r(375482),l=r(995531),s=(r(764932),r(112585)),c=r(492312),p=r(584153),f=r(79738);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default;var g=function(e){var t,r=(0,p.WZ)(null==e||null===(t=e.security)||void 0===t?void 0:t.sourceId);return a.Observable.defer(function(){return u.Ay.getCapabilities((0,s.wk)(e),r)}).let(c.m9).map(function(t){return u.Ay.parseLayerCapabilities(t,e)})},v=function(e){return function(e){var t,r=(0,p.WZ)(null==e||null===(t=e.security)||void 0===t?void 0:t.sourceId);return a.Observable.defer(function(){return l.A.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=o().parse((0,f.t)(n.url||i),!0);return o().format(m(m({},a),{},{search:void 0,query:m(m({},a.query),{},{service:"WMS",version:u.j0,layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e),{headers:r})}).let(c.m9)}(e).map(function(e){var t=e.data,r=void 0===t?{}:t;return r&&r.layerDescriptions[0]}).map(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return m(m({},e),{},{params:{},search:t?{type:"wfs",url:(0,p.o_)(t)}:void 0})})}},748250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_t});var n=r(605556),o=r.n(n),i=r(273517),a=r.n(i),u=r(393149),l=r(750042),s=r.n(l),c=r(785072),p=r.n(c),f=r(515601);p()(f.A,{insert:"head",singleton:!1}),f.A.locals;var y=r(8571),d=r(779893),m=r(273494),b=r(185015),g=r.n(b),v=r(131127),O=r(747135),h=r(307679),j=r(858156),S=r.n(j),w=r(801081),P=r(764932);function E(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){return S()(e,e&&e.featuregrid&&e.featuregrid.open&&e.featuregrid.showFilteredObject?"query.filterObj.spatialField":"emptyObject")},L=function(e){return A(e)&&A(e).geometry},D=(0,w.Mz)([function(e){return L(e)&&L(e).coordinates||[]},function(e){return L(e)&&L(e).type||"Polygon"},function(e){return L(e)&&L(e).id||"spatial_object"},function(e){return L(e)&&L(e).projection||"EPSG:3857"}],function(e,t,r,n){var o={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:t,coordinates:e},style:{fillColor:"#FFFFFF",fillOpacity:"0.2",color:"#ffcc33"},id:r}]};return e.length>0&&t?(0,P.reprojectGeoJson)(o,n,"EPSG:4326").features:[]}),C=(0,w.Mz)([D,function(e){return S()(e,e&&e.highlight&&e.highlight.featuresPath||"highlight.emptyFeatures")||[]}],function(e,t){return[].concat(E(t),E(e))}),I=r(501719),M=r(286447),x=r(344297),k=r(588100),_=r(302404),N=r.n(_);const F=(0,k.UU)(N())(v.$5,v.mg,O.GS,h._X,C,function(e){return e.mapInitialConfig&&e.mapInitialConfig.loadingError&&e.mapInitialConfig.loadingError.data},I.xi,v.DE,x.f8,x.xX,M.Bv,v.Bl,function(e,t,r,n,o,i,a,u,l,s,c,p){return{projectionDefs:e,map:t,mapType:r,layers:n,features:o,loadingError:i,securityToken:a,elevationEnabled:u,isLocalizedLayerStylesEnabled:l,localizedLayerStylesName:s,currentLocaleLanguage:c,mapTitle:p}});var G=r(811668),z=r(8117),R=r(192016),H=r(551783),U=r(871543),B=r(628017),W=r(802417);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){K(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K(e,t,r){return(t=function(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=(0,w.Mz)(v.mg,O.GS,O.NR,function(e,t,r){return{map:e,mapType:t,isCesium:r}}),q={updateConfigAction:m._K},V=(0,U.A)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(W.A),Q=function(e,t){var r,n,o,i,u=e.map,l=e.mapType,s=e.isCesium,c=e.updateConfigAction,p=e.mapOptions,f=t.messages,m=(0,H.A)(["placeholder","options"])(R.Ay),b=Y(Y({},p&&p[l]||d.Ay.getConfigProp("defaultMapOptions")&&d.Ay.getConfigProp("defaultMapOptions")[l]||{}),null==u?void 0:u.mapOptions),g=function(e,t){c(K({},t,!e[t]))};return s?a().createElement("form",null,a().createElement(z.gE,null,a().createElement(z.mq,null,a().createElement(y.A,{msgId:"map.settings.title"}))),a().createElement(z.Sc,{checked:b.showSkyAtmosphere,onChange:function(){return g(b,"showSkyAtmosphere")}},a().createElement(y.A,{msgId:"map.settings.skyAtmosphere"})),a().createElement(z.Sc,{checked:b.showGroundAtmosphere,onChange:function(){return g(b,"showGroundAtmosphere")}},a().createElement(y.A,{msgId:"map.settings.groundAtmosphere"})),a().createElement(z.Sc,{checked:b.enableFog,onChange:function(){return g(b,"enableFog")}},a().createElement(y.A,{msgId:"map.settings.fog"})),a().createElement(z.Sc,{checked:b.depthTestAgainstTerrain,onChange:function(){return g(b,"depthTestAgainstTerrain")}},a().createElement(y.A,{msgId:"map.settings.depthTest"})),a().createElement(z.Sc,{checked:void 0===b.enableCollisionDetection||b.enableCollisionDetection,onChange:function(){return g(b,"enableCollisionDetection")}},a().createElement(y.A,{msgId:"map.settings.collisionDetection"})),a().createElement(z.gE,null,a().createElement(z.mq,null,a().createElement(y.A,{msgId:"map.settings.lightings.title"})),a().createElement(m,{options:[{label:"map.settings.lightings.sunlightOption",value:"sunlight"},{label:"map.settings.lightings.flashlightOption",value:"flashlight"},{label:"map.settings.lightings.dateTimeOption",value:"dateTime"}],wrapperStyle:{marginTop:"10px"},value:b&&(null===(r=b.lighting)||void 0===r?void 0:r.value)||"sunlight",clearable:!1,onChange:function(e){c("dateTime"!==e?{lighting:{value:e.value}}:{lighting:{value:e.value,dateTime:(new Date).toISOString()}})},placeholder:"map.settings.lightings.placeholder"}),"dateTime"===(null==b||null===(n=b.lighting)||void 0===n?void 0:n.value)?a().createElement("div",{className:"lighting-dateTime-picker"},a().createElement(V,{value:null!==(o=b.lighting)&&void 0!==o&&o.dateTime?new Date(null===(i=b.lighting)||void 0===i?void 0:i.dateTime):new Date,hideOperator:!0,time:!0,popupPosition:"top",calendar:!0,type:"date-time",onChange:function(e){c({lighting:Y(Y({},b.lighting),{},{dateTime:e})})},placeholder:(0,B.kA)(f,"map.settings.lightings.dateTimePlaceholder")})):null)):null};Q.contextTypes={messages:o().object};const J=(0,G.connect)(X,q)(Q);var ee=r(534198),te=r(570312),re=r(978548),ne=r(759457),oe={status:null};var ie=r(256688);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach(function(t){se(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function se(e,t,r){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce={status:"disabled",layer:"featureselector",features:[],highlighted:0,featuresPath:"highlight.emptyFeatures",emptyFeatures:[]};var pe=r(401502),fe=r(593429),ye=r(400912),de=r.n(ye),me=r(971086),be=r.n(me),ge=r(383488),ve=r.n(ge),Oe=r(223805),he=r.n(Oe),je=r(956449),Se=r.n(je);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach(function(t){Ae(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ae(e,t,r){return(t=function(e){var t=function(e){if("object"!=we(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le=r(45388),De=r.n(Le),Ce=r(904059),Ie=r(538704),Me=r(754364),xe=r(97401),ke=r(415392),_e=r(112585),Ne=r(6683),Fe=r(883832),Ge=r(812366),ze=r(473916),Re=r.n(ze);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach(function(t){We(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function We(e,t,r){return(t=function(e){var t=function(e){if("object"!=He(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==He(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $e={checkMapPermissions:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(Me._x).filter(function(){return(0,v.fD)(n())}).map(function(){var e=(0,v.fD)(n());return(0,Ie.D7)(e)})},handleCreationLayerError:function(e,t){return e.ofType(m.DY).delay(500).switchMap(function(e){var r=(0,O.GS)(t.getState()),n=(0,h.pO)(t.getState(),e.options.id);return n&&(0,_e.eB)(n,r)?De().Observable.from([(0,Ce.ju)(e.options.id,{invalid:!0})]):De().Observable.empty()})},handleCreationBackgroundError:function(e,t){return e.ofType(m.DY).delay(500).filter(function(e){var r=(0,h.qF)(t.getState());return r&&e.options.id===r.id&&"background"===e.options.group}).switchMap(function(e){var r=(0,O.GS)(t.getState()),n=de()((0,h.gT)(t.getState()).filter(function(t){return(0,_e.eB)(t,r)&&t.id!==e.options.id}));return n?De().Observable.from([(0,Ce.ju)(n.id,{visibility:!0}),(0,Fe.$e)({title:"warning",message:"notification.backgroundLayerNotSupported",action:{label:"close"},position:"tc"})]):De().Observable.of((0,Fe.$e)({title:"warning",message:"notification.noBackgroundLayerSupported",action:{label:"close"},position:"tc"}))})},resetMapOnInit:function(e){return e.ofType(m.M8).switchMap(function(){return De().Observable.of((0,fe.Fh)(),(0,ke.YM)(),(0,Ce.Ci)(),(0,Ge._z)())})},resetLimitsOnInit:function(e,t){return e.ofType(Ie.mO,m.v1).switchMap(function(){var e=(0,v._S)(t.getState()),r=(0,v.$z)(t.getState()),n=(0,v.zH)(t.getState());return De().Observable.of((0,m.nP)({restrictedExtent:r,crs:e,minZoom:n}))})},zoomToExtentEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(m.HE).switchMap(function(e){var t=function(e){if(Se()(e))return e.map(function(e){return"string"==typeof e||e instanceof String?Number(e):e});if(he()(e)){var t=Re()(e,function(e){return"string"==typeof e||e instanceof String?Number(e):e});return[t.minx,t.miny,t.maxx,t.maxy]}return null}(e.extent);if(!t)return De().Observable.empty();var r=Ne.Ay.getHook(Ne.Ay.ZOOM_TO_EXTENT_HOOK),o=(0,xe.tV)(n());if(r){var i=e.crs,a=e.maxZoom,u=e.options;return r(t,Be({crs:i,padding:o,maxZoom:a},void 0===u?{}:u)),De().Observable.empty()}return function(e,t){var r=0,n=e.extent,o=void 0===n?[]:n,i=P.default.reprojectBbox(o,e.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(i){var a=P.default.reproject(Ne.Ay.getCenterForExtent(o,e.crs),e.crs,"EPSG:4326");if("EPSG:4326"===e.crs&&o&&o[0]<=-180&&o[1]<=-90&&o[2]>=180&&o[3]>=90)r=1;else{var u=P.default.reprojectBbox(o,e.crs,t.projection||"EPSG:4326");r=Ne.Ay.getZoomForExtent(u,t.size,0,21,null)}e.maxZoom&&r>e.maxZoom&&(r=e.maxZoom);var l={minx:i[0],miny:i[1],maxx:i[2],maxy:i[3]},s=Be(Be({},t.bbox),{},{bounds:l});return De().Observable.of((0,m.AB)(a,r,s,t.size,e.mapStateSource,t.projection,t.viewerOptions))}return De().Observable.empty()}(Be(Be({},e),{},{extent:t}),(0,v.mg)(n()))})}};var Ze=r(244925);function Ye(e){return{type:"CHANGE_SELECTION_STATE",geomType:e.geomType,point:e.point,line:e.line,polygon:e.polygon}}var Ke=r(717140),Xe=r(538359),qe=r(185520);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach(function(t){et(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function et(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ve(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ve(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rt=function(){return a().createElement("span",null)};var nt=r(437430),ot=r(102685),it=r(595535),at=r(711030);const ut=function(e){var t=e.show,r=e.error,n=e.onReload;return t?a().createElement("div",{className:"ms-map-error-panel",style:{position:"absolute",width:"100%",height:"100%",color:"#ffffff",background:"rgba(0, 0, 0, 0.75)",zIndex:100,top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"}},a().createElement("div",{style:{maxWidth:500}},a().createElement("h1",null,a().createElement(it.A,{msgId:"map.renderingErrorTitle"})),a().createElement("p",null,a().createElement(it.A,{msgId:"map.renderingErrorMessage"})),(null==r?void 0:r.message)&&a().createElement(z.Fc,{bsStyle:"danger"},a().createElement("small",null,r.message)),n&&a().createElement(at.A,{bsStyle:"primary",onClick:function(){return n()}},a().createElement(y.A,{msgId:"map.reloadMap"})))):null};var lt=r(2834),st=r(952228),ct=r(229665),pt=r(444003);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}var yt=["features"];function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach(function(t){bt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bt(e,t,r){return(t=function(e){var t=function(e){if("object"!=ft(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ft(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gt="__geometry__type__",vt={format:"geostyler",body:{name:"highlight",rules:[{name:"Default Polygon Style",ruleId:"defaultPolygon",filter:["||",["==",gt,"Polygon"],["==",gt,"MultiPolygon"]],symbolizers:[{kind:"Fill",color:"#f2f2f2",fillOpacity:.3,outlineColor:"#3075e9",outlineOpacity:1,outlineWidth:2}]},{name:"Default Line Style",ruleId:"defaultLine",filter:["||",["==",gt,"LineString"],["==",gt,"MultiLineString"]],symbolizers:[{kind:"Line",color:"#3075e9",opacity:1,width:2}]},{name:"Default Point Style",ruleId:"defaultPoint",filter:["||",["==",gt,"Point"],["==",gt,"MultiPoint"]],symbolizers:[{kind:"Mark",color:"#f2f2f2",fillOpacity:.3,strokeColor:"#3075e9",strokeOpacity:1,strokeWidth:2,radius:10,wellKnownName:"Circle",msBringToFront:!0}]}]}},Ot=["features"],ht=["id"];function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},St.apply(null,arguments)}function wt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach(function(t){Mt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function At(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xt(n.key),n)}}function Dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Dt=function(){return!!e})()}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function It(e,t){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},It(e,t)}function Mt(e,t,r){return(t=xt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(e){var t=function(e){if("object"!=jt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jt(t)?t:t+""}var kt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Mt(e=function(e,t,r){return t=Ct(t),function(e,t){if(t&&("object"==jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dt()?Reflect.construct(t,r||[],Ct(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{}),Mt(e,"getHighlightLayer",function(t,r,n){var o=e.state.plugins,i=function(e){var t=e.features;return mt(mt({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,yt)),{},{visibility:!0,features:null==t?void 0:t.map(function(e){var t;return mt(mt({},e),{},{properties:mt(mt({},(null==e?void 0:e.properties)||{}),{},bt({},gt,null==e||null===(t=e.geometry)||void 0===t?void 0:t.type))})}),style:vt})}({features:e.props.features}),u=i.features,l=At(i,Ot);return a().createElement(o.Layer,{type:"vector",srs:t,position:r,key:"highlight",env:n,options:Tt(Tt({name:"highlight"},l),{},{features:u})},u.map(function(e){return a().createElement(o.Feature,{msId:e.id,properties:e.properties,key:e.id,crs:t,type:e.type,style:e.style||null,geometry:e.geometry})}))}),Mt(e,"getTool",function(t){return g()(t)?{name:t,impl:e.state.plugins.tools[t]}:t[e.props.mapType]||t}),Mt(e,"getConfigMapOptions",function(){return e.props.mapOptions&&e.props.mapOptions[e.props.mapType]||d.Ay.getConfigProp("defaultMapOptions")&&d.Ay.getConfigProp("defaultMapOptions")[e.props.mapType]||{}}),Mt(e,"renderLayers",function(){var t=e.props.map.projection||"EPSG:3857",r=[];e.props.isLocalizedLayerStylesEnabled&&r.push({name:e.props.localizedLayerStylesName,value:e.props.currentLocaleLanguage});var n=e.state.plugins;return[].concat(wt(e.props.layers),wt(e.props.additionalLayers.map(function(e,t){var r=e.id;return Tt(Tt({},At(e,ht)),{},{id:r||"additional-layers-".concat(t)})}))).filter(e.filterLayer).map(function(o,i){return a().createElement(n.Layer,{type:o.type,srs:t,position:i,key:o.id||o.name,options:o,securityToken:e.props.securityToken,env:r},e.renderLayerContent(o,t))}).concat(e.props.features&&e.props.features.length&&e.getHighlightLayer(t,e.props.layers.length,r)||[])}),Mt(e,"renderLayerContent",function(t,r){var n=e.state.plugins;if(t.features){var o=(0,ot.Kb)(t);return t.features.filter(o).map(function(e){return a().createElement(n.Feature,{key:e.id,msId:e.id,type:e.type,crs:r,geometry:e.geometry,features:e.features,featuresCrs:t.featuresCrs||"EPSG:4326",layerStyle:t.style,style:e.style||t.style||null,properties:e.properties})})}return null}),Mt(e,"renderSupportTools",function(){var t=e.props.items.filter(function(e){return!!e.Tool}).map(function(t){var r=t.Tool,n=t.name,o=t.cfg;return a().createElement(r,St({},o,{key:n,mapType:e.props.mapType}))});return e.props.tools.map(function(t){var r=e.getTool(t),n=e.props.toolsOptions[r.name]&&e.props.toolsOptions[r.name][e.props.mapType]||e.props.toolsOptions[r.name]||{};return a().createElement(r.impl,St({key:r.name},n))}).concat(t)}),Mt(e,"filterLayer",function(t){return t.useForElevation?"cesium"===e.props.mapType||e.props.elevationEnabled:"elevation"!==t.type||e.props.elevationEnabled}),Mt(e,"updatePlugins",function(t){e.currentMapType=t.mapType,t.onLoadingMapPlugins(!0),e.setState({plugins:void 0}),e.props.pluginsCreator(t.mapType,t.actions).then(function(r){e._isMounted&&r.mapType===e.currentMapType&&(e.setState({plugins:r}),t.onLoadingMapPlugins(!1,t.mapType),t.onMapTypeLoaded(!0,t.mapType))})}),Mt(e,"isValidMapConfiguration",function(e){return!(null==e||!e.center)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&It(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e;(null===(e=this.props)||void 0===e?void 0:e.mapId)&&(this.oldDocumentTitle=document.title)}},{key:"componentDidUpdate",value:function(){var e,t=null===(e=this.props)||void 0===e?void 0:e.mapId;this.props.mapTitle&&t&&(document.title=this.props.mapTitle)}},{key:"UNSAFE_componentWillMount",value:function(){this.updatePlugins(this.props),this._isMounted=!0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mapType===this.props.mapType&&e.actions===this.props.actions||this.updatePlugins(e)}},{key:"componentWillUnmount",value:function(){var e;this._isMounted=!1,(null===(e=this.props)||void 0===e?void 0:e.mapId)&&(document.title=this.oldDocumentTitle)}},{key:"render",value:function(){if(this.isValidMapConfiguration(this.props.map)&&this.state.plugins){var e=this.props.map.mapOptions,t=void 0===e?{}:e;return a().createElement(this.state.plugins.Map,St({id:"map"},this.props.options,{projectionDefs:this.props.projectionDefs},this.props.map,{mapOptions:Tt(Tt({},this.getConfigMapOptions()),t),zoomControl:this.props.zoomControl,onResolutionsChange:this.props.onResolutionsChange,errorPanel:ut}),this.renderLayers(),this.renderSupportTools())}return this.props.loadingError?a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapErrorMessage"},a().createElement(y.A,{msgId:"map.loadingerror"}),":",this.props.loadingError):a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapLoadingMessage"},this.props.loadingSpinner?a().createElement(s(),{spinnerName:"circle",overrideSpinnerClassName:"spinner"}):null,a().createElement(y.A,{msgId:this.props.mapLoadingMessage}))}}])&&Lt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Mt(kt,"propTypes",{mapType:o().string,map:o().object,layers:o().array,additionalLayers:o().array,zoomControl:o().bool,mapLoadingMessage:o().string,loadingSpinner:o().bool,loadingError:o().string,tools:o().array,options:o().object,mapOptions:o().object,projectionDefs:o().array,toolsOptions:o().object,onResolutionsChange:o().func,actions:o().object,features:o().array,securityToken:o().string,elevationEnabled:o().bool,isLocalizedLayerStylesEnabled:o().bool,localizedLayerStylesName:o().string,currentLocaleLanguage:o().string,items:o().array,onLoadingMapPlugins:o().func,onMapTypeLoaded:o().func,pluginsCreator:o().func,mapTitle:o().string}),Mt(kt,"defaultProps",{mapType:pt.Av.OPENLAYERS,actions:{},zoomControl:!1,mapLoadingMessage:"map.loading",loadingSpinner:!0,tools:["scalebar","draw","highlight","popup","box"],options:{},mapOptions:{},toolsOptions:{measurement:{},locate:{},scalebar:Mt({},pt.Av.LEAFLET,{position:"bottomright"}),overview:{overviewOpt:{position:"bottomright",collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,toggleDisplay:!0},layers:[{type:"osm"}]}},securityToken:"",additionalLayers:[],elevationEnabled:!1,onResolutionsChange:function(){},items:[],onLoadingMapPlugins:function(){},onMapTypeLoaded:function(){},pluginsCreator:function(e,t){return Promise.all([r(886181)("./"+e+"/index"),r(178612)("./"+e+"/plugins/index")]).then(function(r){var n,o,i=(n=r,o=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(n,o)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].default,a=(0,G.connect)(function(e){return{projectionDefs:(0,v.$5)(e),mousePosition:(0,v.O1)(e)}},Object.assign({},{onMapViewChanges:m.AB,onClick:m.gj,onMouseMove:m.tG,onLayerLoading:Ce.wm,onLayerLoad:Ce.u9,onLayerError:Ce.OC,onWarning:Fe.$e,onMouseOut:m.a8},t),function(e,t,r){return Object.assign({},r,e,Object.assign({},t,{onMouseMove:e.mousePosition?t.onMouseMove:function(){}}))})(i.LMap),u=(0,G.connect)(function(e){var t;return Je(Je({},null!==(t=e.draw)&&void 0!==t?t:{}),{},{snappingLayerInstance:(0,Xe.Zp)(e)})},{onChangeDrawingStatus:Ke.VX,onEndDrawing:Ke.Mr,onGeometryChanged:Ke.vK,onSelectFeatures:Ke.et,onDrawingFeatures:Ke.Mm,onDrawStopped:Ke.Ij,setCurrentStyle:Ke.d,toggleSnappingIsLoading:Ke.vw})(i.DrawSupport||rt),l=(0,G.connect)((0,w.Mz)(function(e){return function(e){return e&&e.box&&e.box.status}(e)},function(e){return{status:e}}),{onBoxEnd:ne.$m})(i.BoxSelectionSupport||rt),s=(0,G.connect)(function(e){return e.highlight||{}},{updateHighlighted:ie.Ll})(i.HighlightFeatureSupport||rt),c=(0,G.connect)(function(e){return{selection:e.selection||{}}},{changeSelectionState:Ye})(i.SelectionSupport||rt),p=(0,G.connect)(null,{onWarning:Fe.$e})(i.Layer||rt),f=(0,G.connect)((0,w.Mz)(qe.N,function(e){return{popups:e}}),{onPopupClose:Ze.bn})(i.PopupSupport||rt);return{Map:a,Layer:p,Feature:i.Feature||rt,tools:{overview:i.Overview||rt,scalebar:i.ScaleBar||rt,draw:u,highlight:s,selection:c,popup:f,box:l},mapType:e}})}});const _t=(0,u.i1)("Map",{component:(0,u.Ng)(F,{onResolutionsChange:m.cm,onMapTypeLoaded:m.cO})((0,nt.A)(kt)),reducers:{map:ee.A,layers:te.A,draw:re.A,box:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;return t.type===ne.$H?Object.assign({},e,{status:t.status}):e},highlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie.KO:return Object.assign({},e,{featuresPath:t.featuresPath||"highlight.emptyFeatures"});case ie.GL:return le(le({},e),{},{status:t.status});case ie.qv:return le(le({},e),{},{highlighted:t.features.length,features:t.features,status:t.status||e.status});default:return e}},maptype:pe.A,additionallayers:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case fe.u9:var n=be()({id:r.id,owner:r.owner,actionType:r.actionType,options:r.options},ve()),o=de()(t.filter(function(e){return e.id===n.id}));return o?t.map(function(e){return e.id===n.id?Te(Te({},o),n):Te({},e)}):[].concat(function(e){if(Array.isArray(e))return Pe(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n]);case fe.pv:return t.concat(r.layers);case fe.Ym:return t.map(function(e){return e.owner===r.owner?Te(Te({},e),{},{options:Te(Te({},e.options),r.options)}):e});case fe.at:return t.map(function(e){return e.id===r.id?Te(Te({},e),{},{options:Te(Te({},e.options),r.options)}):e});case fe.Ls:var i=r.options,a=r.owner;return t.map(function(e,t){return e.owner===a?Te(Te({},e),{},{options:he()(i)&&i[e.id]||Se()(i)&&i[t]||{}}):Te({},e)});case fe.VQ:var u=r.id,l=r.owner;return l?t.filter(function(e){return e.owner!==l}):t.filter(function(e){return e.id!==u});case fe.CX:return r.owner?t.filter(function(e){return e.owner!==r.owner}):[];default:return t}}},epics:Tt(Tt(Tt({},$e),st.A),(0,lt.A)(ct.A)),containers:{Settings:function(){return{tool:a().createElement(J,null),position:2}}}})},978548:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(717140);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[],snapping:!1,snappingIsLoading:!1,snappingLayer:!1},s={edge:!0,vertex:!0,pixelTolerance:10,strategy:"bbox"};const c=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n.V9:return Object.assign({},r,{drawStatus:o.status,drawOwner:o.owner,drawMethod:o.method,options:o.options,features:o.features,style:o.style});case n.Lu:return Object.assign({},r,{currentStyle:o.currentStyle});case n.Q4:return Object.assign({},r,{tempFeatures:o.features});case n.ZM:return Object.assign({},r,{tempFeatures:[]});case n.S$:return a(a({},r),{},{snapping:!r.snapping});case n.Kf:return a(a({},r),{},{snappingLayer:o.snappingLayer,snappingIsLoading:!1});case n.Ne:return a(a({},r),{},{snappingIsLoading:!r.snappingIsLoading});case n.Ly:return a(a({},r),{},{snapConfig:a(a(a({},a(a({},s),(null===(e=o.pluginCfg)||void 0===e?void 0:e.snapConfig)||{})),null!==(t=null==r?void 0:r.snapConfig)&&void 0!==t?t:{}),o.prop&&void 0!==o.value?u({},o.prop,o.value):{})});default:return r}}},570312:(e,t,r)=>{"use strict";r.d(t,{A:()=>S});var n=r(904059),o=r(415392),i=r(754364),a=r(541033),u=r.n(a),l=r(185015),s=r.n(l),c=r(679859),p=r.n(c),f=r(499084),y=r.n(f),d=r(112585);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?e.map(function(e){return s()(e)?e:e.id===r?g(g({},e),{},{nodes:n?[t].concat(O(e.nodes)):[].concat(O(e.nodes),[t])}):g(g({},e),{},{nodes:j(e.nodes,t,r,n)})}):n?[t].concat(O(e)):[].concat(O(e),[t])};const S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flat:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.x7:return"RefreshLayers"===t.control?Object.assign({},e,{refreshError:[]}):e;case n.xO:var r=(e.flat||[]).map(function(e){return e.id===t.layerId?Object.assign({},e,{loading:!0}):e});return Object.assign({},e,{flat:r});case n.ZL:var a=(e.flat||[]).map(function(e){return e.id===t.layerId?Object.assign({},e,{loading:!1,previousLoadingError:e.loadingError,loadingError:!!t.error&&"Error"}):e});return Object.assign({},e,{flat:a});case n.dX:var l=t.tilesCount===t.tilesErrorCount,s=(e.flat||[]).map(function(e){return e.id===t.layerId?Object.assign({},e,{previousLoadingError:e.loadingError,loadingError:l?"Error":"Warning"}):e});return Object.assign({},e,{flat:s});case n.Np:return Object.assign({},e,{refreshing:t.layers,refreshError:[]});case n.oq:var c=(e.refreshing||[]).filter(function(e){return 0===t.layers.filter(function(t){return t.layer===e.id}).length}),f=t.layers.map(function(e){return{layer:e.fullLayer.title,error:t.error}});return Object.assign({},e,{refreshing:c,refreshError:[].concat(O(e.refreshError||[]),O(f))});case n.CB:var m=(e.refreshing||[]).filter(function(e){return 0===t.layers.filter(function(t){return t.layer===e.id}).length});return Object.assign({},e,{refreshing:m});case i.if:var b,h=null==e||null===(b=e.flat)||void 0===b?void 0:b.map(function(e){return e.security?g(g({},e),{},{security:g(g({},e.security),{},{rand:u()()})}):e});return g(g({},e),{},{flat:h});case i.Lv:var S,w=null==e||null===(S=e.flat)||void 0===S?void 0:S.map(function(e){var r;return(null==e||null===(r=e.security)||void 0===r?void 0:r.sourceId)===t.protectedId?g(g({},e),{},{security:void 0}):e});return g(g({},e),{},{flat:w});case n.eV:case n.nX:var P,E=e.flat||[],T=E.find(function(e){return e.id===t.layer&&"background"===e.group}),A=!(null==t||null===(P=t.newProperties)||void 0===P||!P.visibility),L=T&&A?E.map(function(e){return"background"===e.group&&("terrain"===T.type&&"terrain"===e.type||"terrain"!==T.type&&"terrain"!==e.type)?g(g({},e),{},{visibility:!1}):e}):E,D=L.map(function(e){return p()(y()(t.layer),e.id)?Object.assign({},e,t.newProperties,t.params?{params:Object.assign({},e.params,t.params)}:{}):Object.assign({},e)});return Object.assign({},e,{flat:D});case n.F9:var C=e.flat.map(function(e){var r=e.group||d.Yw;return r===t.group||0===r.indexOf("".concat(t.group,"."))?Object.assign({},e,t.newProperties):Object.assign({},e)});return Object.assign({},e,{flat:C});case n.iX:var I="layers"===t.nodeType?"flat":"groups",M=e[I]||[],x=(0,d.b)(M,t.node,"expanded",t.status);return Object.assign({},e,v({},I,x));case n.sy:var k=(0,d.Zl)(e.groups||[],t.node),_=k&&k.nodes||t.node===d.$4&&e.groups||null;if(_){var N=t.order.map(function(e){return _[e]}),F=t.node===d.$4?N:(0,d.b)(e.groups,t.node,"nodes",N),G=t.sortLayers?t.sortLayers(F,e.flat):e.flat;return Object.assign({},e,{groups:F,flat:G})}return e;case n.Y:return g(g({},e),{},{layers:t.layers});case n.rN:var z=(0,d.nD)({layers:e.flat,groups:e.groups},{node:t.node,nodeType:t.nodeType,options:t.options});return g(g(g({},e),z.layers&&{flat:z.layers}),z.groups&&{groups:z.groups});case n.fP:var R=(0,d.zp)({groups:e.groups,layers:e.flat},{node:t.node,index:t.index,groupId:t.groupId});return null===R?e:null!==R?g(g({},e),{},{flat:R.layers,groups:R.groups}):e;case n.o0:if("groups"===t.nodeType){var H=(0,d.hR)(e.groups,t.node),U=e.flat.filter(function(e){return!e.group||e.group!==t.node&&0!==e.group.indexOf(t.node+".")});return{selected:(0,d.BL)((null==e?void 0:e.selected)||[],null==t?void 0:t.node,!0),flat:U,groups:H}}if("layers"===t.nodeType){var B=t.removeEmpty?(0,d.I0)((0,d.hR)(e.groups,t.node)):(0,d.hR)(e.groups,t.node),W=e.flat.filter(function(e){return e.id!==t.node});return Object.assign({},e,{flat:W,groups:B,selected:((null==e?void 0:e.selected)||[]).filter(function(e){return e!==t.node})})}return e;case n.Cl:var $=(0,d.jR)(t.layer),Z=(e.flat||[]).concat(),Y=(e.groups||[]).concat(),K=$.id?$:Object.assign({},$,{id:(0,d.h8)($)});Z.push(K);var X=K.group||d.Yw;"background"!==X&&(Y=(0,d.A5)(Y,K.id,X,Z,t.foreground));var q=d.lP?(0,d.lP)(Y,Z):Z;return Object.assign({},e,{flat:q,groups:Y});case n.hh:var V=(0,d.hR)(e.groups,t.layerId),Q=e.flat.filter(function(e){return e.id!==t.layerId});return Object.assign({},e,{flat:Q,groups:V});case n.Qn:var J,ee=u()(),te={id:d.Yw,name:d.Yw,title:d.Yw,expanded:!0,nodes:[]},re=null!==(J=t.parent)&&void 0!==J?J:d.Yw,ne=(e.groups||[]).find(function(e){return e.id===d.Yw})?e.groups:[te].concat(O(e.groups)),oe=j(ne,g({id:re+"."+ee,title:t.group,name:ee,nodes:[],expanded:!0},t.options),re,t.asFirst);return Object.assign({},e,{groups:oe});case n.E9:var ie=Object.assign({},e.settings,{expanded:!0,node:t.node,nodeType:t.nodeType,options:t.options});return Object.assign({},e,{settings:ie,editLayerName:!1,layerNameIsBeingChecked:!1,layerNameChangeError:!1});case n.LM:var ae=Object.assign({},e.settings,{expanded:!1,node:null,nodeType:null,options:{}});return Object.assign({},e,{settings:ae,editLayerName:!1,layerNameIsBeingChecked:!1,layerNameChangeError:!1});case n.E5:var ue=Object.assign({},e.settings&&e.settings.options,t.options),le=Object.assign({},e.settings,{options:ue});return Object.assign({},e,{settings:le});case n.ti:return Object.assign({},e,{flat:[],groups:[],selected:[]});case n.S$:return g(g({},e),{},{selected:(0,d.BL)((null==e?void 0:e.selected)||[],null==t?void 0:t.id,null==t?void 0:t.ctrlKey),settings:{expanded:!1,node:null,nodeType:null,options:{}},layerMetadata:{expanded:!1,metadataRecord:{},maskLoading:!1}});case n.Cd:return Object.assign({},e,{filter:t.text||""});case n.IA:var se=Object.assign({},e.layerMetadata,{metadataRecord:t.metadataRecord,expanded:!0,maskLoading:t.maskLoading});return Object.assign({},e,{layerMetadata:se});case n.zJ:var ce=Object.assign({},e.layerMetadata,{metadataRecord:{},expanded:!1});return Object.assign({},e,{layerMetadata:ce});default:return e}}},534198:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(273494),o=r(980971),i=r(6683),a=r(764932);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l=["type"];function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=function(){var e,t,r,u,c,y,d,m,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventListeners:{}},g=arguments.length>1?arguments[1]:void 0;switch(g.type){case n.e6:g.type;var v=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(g,l);return v.zoom=isNaN(v.zoom)?1:v.zoom,Object.assign({},b,v);case n.X3:return p(p({},b),{},{center:p(p({},b.center),{},{x:b.center.x+1e-13})});case n.$e:return Object.assign({},b,{mousePointer:g.pointer});case o.LK:return"REPLACE"===(null==g||null===(e=g.payload)||void 0===e?void 0:e.action)?b:Object.assign({},{eventListeners:{}});case n.u0:return Object.assign({},b,{zoom:g.zoom,mapStateSource:g.mapStateSource});case n.xi:return Object.assign({},b,{limits:{restrictedExtent:g.restrictedExtent,crs:g.crs,minZoom:g.minZoom}});case n.v1:return Object.assign({},b,{projection:g.crs});case n.ok:if(g.scales){var O=b&&b.mapOptions&&b.mapOptions.view&&b.mapOptions.view.DPI||null,h=i.Ay.getResolutionsForScales(g.scales,b&&b.projection||"EPSG:4326",O);return Object.assign({},b,{mapOptions:Object.assign({},b&&b.mapOptions,{view:Object.assign({},b&&b.mapOptions&&b.mapOptions.view,{resolutions:h,scales:g.scales})})})}if(b&&b.mapOptions&&b.mapOptions.view&&b.mapOptions.view&&b.mapOptions.view.resolutions){var j=Object.assign({},b);return j.mapOptions=Object.assign({},j.mapOptions),j.mapOptions.view=Object.assign({},j.mapOptions.view),delete j.mapOptions.view.resolutions,0===Object.keys(j.mapOptions.view).length&&delete j.mapOptions.view,0===Object.keys(j.mapOptions).length&&delete j.mapOptions,j}return b;case n.Q_:return Object.assign({},b,{resolutions:g.resolutions});case n.H6:return Object.assign({},b,{center:a.default.reproject(g.pos,g.crs,"EPSG:4326"),zoom:g.zoom,mapStateSource:null});case n.gB:var S=a.default.reproject(g.center,g.center.crs||"EPSG:4326","EPSG:4326");return Object.assign({},b,{center:S,mapStateSource:null});case n.g_:return Object.assign({},b,{mapStateSource:g.mapStateSource,style:g.style,resize:b.resize?b.resize+1:1});case n.Y$:return Object.assign({},b,{resize:b.resize?b.resize+1:1});case n.e4:var w=Object.assign({},b.bbox,{rotation:g.rotation});return Object.assign({},b,{bbox:w,mapStateSource:g.mapStateSource});case n.pt:return Object.assign({},b,{version:g.version});case n.QH:return Object.assign({},b,{eventListeners:Object.assign({},b.eventListeners||{},f({},g.eventName,[].concat((m=b.eventListeners&&b.eventListeners[g.eventName]||[],function(e){if(Array.isArray(e))return s(e)}(m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(m)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[g.toolName])))});case n.Fm:var P=b;if(null!=b&&b.eventListeners){var E=(b.eventListeners&&b.eventListeners[g.eventName]||[]).filter(function(e){return e!==g.toolName})||[];P=Object.assign({},b,{eventListeners:Object.assign({},b.eventListeners,f({},g.eventName,E))})}return P;case n.j3:if(g&&g.orientation&&(g.orientation.center||g.orientation.marker)){var T,A,L=(null==g||null===(T=g.orientation)||void 0===T||null===(T=T.center)||void 0===T?void 0:T.split(","))||(null==g||null===(A=g.orientation)||void 0===A||null===(A=A.marker)||void 0===A?void 0:A.split(",")),D=L&&L[0],C=L&&L[1],I=g.orientation.zoom,M=g.orientation.heading,x=g.orientation.pitch,k=g.orientation.roll;return Object.assign({},b,{orientate:{x:D,y:C,z:I,heading:M,pitch:x,roll:k}})}return null;case n.bU:var _=parseFloat(null==g||null===(t=g.data)||void 0===t?void 0:t.heading),N=parseFloat(null==g||null===(r=g.data)||void 0===r?void 0:r.pitch),F=parseFloat(null==g||null===(u=g.data)||void 0===u?void 0:u.roll);return{zoom:parseFloat(null==g||null===(c=g.data)||void 0===c?void 0:c.zoom),center:{x:parseFloat(null==g||null===(y=g.data)||void 0===y?void 0:y.coordinate[0]),y:parseFloat(null==g||null===(d=g.data)||void 0===d?void 0:d.coordinate[1])},viewerOptions:{orientation:{heading:_,pitch:N,roll:F}}};case n.WC:return p(p({},b),{},{mapOptions:p(p({},b.mapOptions),g.configUpdate)});default:return b}}},401502:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(995134),o=r(273494),i=r(538704),a=r(444003);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mapType:(0,a.Jq)()},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case i.mO:var u=null==r||null===(e=r.config)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.visualizationMode;return s(s({},t),{},{mapType:(0,a.Jq)(u)});case n.HH:return s(s({},t),{},{mapType:r.mapType});case n.g$:return s(s({},t),{},{mapType:(0,a.Jq)(r.visualizationMode)});case o.se:return s(s({},t),{},{loaded:s(s({},t.loaded),{},c({},r.mapType,r.loaded))});default:return t}}},538359:(e,t,r)=>{"use strict";r.d(t,{BD:()=>d,IO:()=>g,X0:()=>y,Zp:()=>f,ht:()=>m,uP:()=>b});var n=r(858156),o=r.n(n),i=r(223805),a=r.n(i),u=r(307679),l=r(401631),s=r(588100),c=r(112585),p=r(286447),f=function(e){var t,r;return!(null==e||null===(t=e.draw)||void 0===t||!t.snappingLayer)&&(null!==(r=(0,u.pO)(e,e.draw.snappingLayer))&&void 0!==r?r:(0,u._x)(e,e.draw.snappingLayer))},y=function(e){return o()(e,"draw.snapping",!1)},d=function(e){return o()(e,"draw.snappingIsLoading",!1)},m=function(e){return o()(e,"draw.snapConfig",!1)},b=function(e){return o()(e,"draw.drawOwner","")},g=(0,s.UU)(function(e,t){return e===t||a()(e)&&a()(t)&&(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(null==e?void 0:e.title)===(null==t?void 0:t.title)&&(null==e?void 0:e.visibility)===(null==t?void 0:t.visibility)})([u.Kv,u.d1,l.IT,f,m,p.Pd],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=null==n?void 0:n.id,u=null==r?void 0:r.id,l=t.filter(function(e){var t;return(null!==(t=null==o?void 0:o.additionalLayers)&&void 0!==t?t:[]).includes(e.id)}).map(function(e){return e.options}).concat(e);return(u?[{value:u,label:(0,c.ez)(r,i),active:u===a}]:[]).concat(l.map(function(e){var t;return!(e.id===u||!["wms","wfs","vector"].includes(null==e?void 0:e.type)||"wms"===(null==e?void 0:e.type)&&"wfs"!==(null==e||null===(t=e.search)||void 0===t?void 0:t.type)||"background"===e.group||!e.visibility)&&{value:e.id,label:(0,c.ez)(e,i),active:e.id===a}}).filter(Boolean))})},185520:(e,t,r)=>{"use strict";r.d(t,{N:()=>n,T:()=>o});var n=function(e){var t;return(null==e?void 0:e.mapPopups)&&(null==e||null===(t=e.mapPopups)||void 0===t?void 0:t.popups)||[]},o=function(e){var t;return(null==e?void 0:e.mapPopups)&&(null==e||null===(t=e.mapPopups)||void 0===t?void 0:t.hideEmptyPopupOption)||!1}},515601:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(576314),o=r.n(n)()(function(e){return e[1]});o.push([e.id,".msgapi .mapErrorMessage {\n    font-size: 16px;\n    color: red;\n}\n",""]);const i=o}}]);