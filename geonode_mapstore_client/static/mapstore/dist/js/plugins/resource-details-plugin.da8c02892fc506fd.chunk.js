"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25187],{669906:(e,t,n)=>{n.d(t,{O8:()=>a,j3:()=>o,pn:()=>r});var r="DETAILS:DETAILS_LOADED",a=function(e,t,n){return{type:r,id:e,detailsUri:t,detailsSettings:n}},o=function(){return{type:"DETAILS:OPEN_DETAILS_PANEL"}}},995134:(e,t,n)=>{n.d(t,{HH:()=>r,g$:()=>a,k5:()=>o});var r="MAP_TYPE_CHANGED",a="MAP_TYPE:VISUALIZATION_MODE_CHANGED";function o(e){return{type:a,visualizationMode:e}}},779376:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(980971),a=n(538704),o=n(669906),i=n(995134),l=n(45228),s=n.n(l),c=n(779893),u=n(905185),d=n(112585),p=n(499084),g=n.n(p),m=n(444003);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w=function(){var e,t,n,l,p,f,v,b,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,I=arguments.length>1?arguments[1]:void 0;switch(I.type){case r.LK:var h;return"REPLACE"===(null==I||null===(h=I.payload)||void 0===h?void 0:h.action)?w:y(y({},w),{},{mapInitialConfig:{}});case a.mO:var D=w&&w.map&&w.map.present&&w.map.present.size||w&&w.map&&w.map.size,S=w&&w.map&&w.map.present&&w.map.present.bbox||w&&w.map&&w.map.bbox,x=I.config&&I.config.version>=2,R=I.legacy&&!x?c.Ay.convertFromLegacy(I.config):c.Ay.normalizeConfig(I.config.map),E=y(y({},R),{},{layers:R.layers.map(function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e}).map(d.jR),mapConfigRawData:y({},I.config)}),C=(null==w||null===(e=w.map)||void 0===e?void 0:e.mapId)||(null==w||null===(t=w.map)||void 0===t||null===(t=t.present)||void 0===t?void 0:t.mapId);return C=null!==(n=I.config)&&void 0!==n&&n.fileName&&C?C:I.mapId,E.map=s()({},E.map,{mapId:C,size:D,bbox:S,version:x?I.config.version:1}),s()({},E,{mapInitialConfig:y(y({},E.map),{},{mapId:I.mapId})});case a.Wy:return{loadingError:y(y({},I.error),{},{mapId:I.mapId})};case a.Il:return(b=w&&w.map&&w.map.present?w.map.present:w&&w.map)&&b.mapId===I.mapId?(b=s()({},b,{loadingInfo:!0}),s()({},w,{map:b})):w;case a.EE:return(b=w&&w.map&&w.map.present?w.map.present:w&&w.map)&&b.mapId===I.mapId?(b=s()({},b,{loadingInfoError:I.error,loadingInfo:!1}),s()({},w,{map:b})):w;case a.Aq:return!(b=w&&w.map&&w.map.present?w.map.present:w&&w.map)||"".concat(b.mapId)!=="".concat(I.mapId)&&(b.mapId||I.mapId)?w:(b=s()({},b,{info:I.merge?y(y({},b.info),I.info):I.info,loadingInfo:!1}),s()({},w,{map:b}));case o.pn:var A,O,P,k=null===(l=w.dashboard)||void 0===l?void 0:l.resource;return(b=w&&w.map&&w.map.present?w.map.present:w&&w.map)&&(null===(p=b.mapId)||void 0===p?void 0:p.toString())===I.id.toString()?(b=y(y({},b),{},{info:y(y({},b.info),{},{attributes:y(y({},null===(A=b.info)||void 0===A?void 0:A.attributes),{},{details:I.detailsUri||(null===(O=b.info)||void 0===O||null===(O=O.attributes)||void 0===O?void 0:O.details),detailsSettings:I.detailsSettings||(null===(P=b.info)||void 0===P||null===(P=P.attributes)||void 0===P?void 0:P.detailsSettings)})})}),s()({},w,{map:b})):k&&(null===(f=k.id)||void 0===f?void 0:f.toString())===I.id.toString()?(k=s()({},k,{attributes:s()({},k.attributes,{details:I.detailsUri,detailsSettings:I.detailsSettings})}),s()({},w,{dashboard:y(y({},w.dashboard),{},{resource:k})})):w;case a.QW:return b=w&&w.map&&w.map.present?w.map.present:w&&w.map,b=(0,u.hZ)("mapSaveErrors",g()(I.error),b),s()({},w,{map:b});case a.xg:return b=w&&w.map&&w.map.present?w.map.present:w&&w.map,b=(0,u.wC)("mapSaveErrors",b),s()({},w,{map:b});case a.u1:return b=(null==w||null===(v=w.map)||void 0===v?void 0:v.present)||(null==w?void 0:w.map),b=(0,u.wC)("mapSaveErrors",b),y(y({},w),{},{map:b});case i.g$:case i.HH:b=w&&w.map&&w.map.present?w.map.present:w&&w.map;var j=void 0!==I.mapType?(0,m.RR)(I.mapType):I.visualizationMode||m.Hd._2D;return b=(0,u.hZ)("visualizationMode",j,b),y(y({},w),{},{map:b});default:return w}}},290895:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(273517),a=n.n(r),o=n(393149),i=n(811668),l=n(801081),s=n(605556),c=n.n(s),u=n(66178),d=n(68352),p=n(779376),g=n(930196),m=n(172175),f=n(891543),v=n(496055),y=n(662387),b=n(935897),w=n(592497),I=n(201384),h=n(82725),D=n(51797),S=n(982668),x=n(147628),R=n(836970),E=n(8571),C=["defaultOpen"];function A(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n,o,i=e.tabs,l=void 0===i?[{type:"tab",id:"info",labelId:"gnviewer.info",items:[{type:"text",labelId:"gnviewer.title",value:"{context.get(state('gnResourceData'), 'title')}"},{type:"link",labelId:"gnviewer.owner",href:"{'/people/profile/' + context.get(state('gnResourceData'), 'owner.username')}",value:"{context.getUserResourceName(context.get(state('gnResourceData'), 'owner'))}",disableIf:"{!context.get(state('gnResourceData'), 'owner.username')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"{'gnviewer.'+context.get(state('gnResourceData'), 'date_type').toLowerCase()}",value:"{context.get(state('gnResourceData'), 'date')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.created",value:"{context.get(state('gnResourceData'), 'created')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.lastModified",value:"{context.get(state('gnResourceData'), 'last_updated')}"},{type:"query",labelId:"gnviewer.resourceType",valueId:"{'gnviewer.' + context.get(state('gnResourceData'), 'resource_type')}",pathname:"/",query:{f:"{context.get(state('gnResourceData'), 'resource_type')}"}},{type:"{context.isDocumentExternalSource(state('gnResourceData')) ? 'link' : 'text'}",labelId:"gnviewer.sourceType",value:"{context.get(state('gnResourceData'), 'sourcetype', '').toLowerCase()}",href:"{context.get(state('gnResourceData'), 'href')}"},{type:"query",labelId:"gnviewer.category",value:"{context.get(state('gnResourceData'), 'category.gn_description')}",pathname:"/",query:{"filter{category.identifier.in}":"{context.get(state('gnResourceData'), 'category.identifier')}"}},{type:"link",labelId:"gnviewer.pointOfContact",value:"{context.getUserResourceNames(context.get(state('gnResourceData'), 'poc'))}",disableIf:"{!context.get(state('gnResourceData'), 'poc')}"},{type:"query",labelId:"gnviewer.keywords",value:"{context.get(state('gnResourceData'), 'keywords')}",valueKey:"name",pathname:"/",queryTemplate:{"filter{keywords.slug.in}":"${slug}"}},{type:"query",labelId:"gnviewer.regions",value:"{context.get(state('gnResourceData'), 'regions')}",valueKey:"name",pathname:"/",queryTemplate:{"filter{regions.code.in}":"${code}"}},{type:"text",labelId:"gnviewer.attribution",value:"{context.get(state('gnResourceData'), 'attribution')}"},{type:"text",labelId:"gnviewer.language",value:"{context.get(state('gnResourceData'), 'language')}"},{type:"html",labelId:"gnviewer.supplementalInformation",value:"{context.get(state('gnResourceData'), 'supplemental_information')}"},{type:"date",format:"YYYY-MM-DD HH:mm",labelId:"gnviewer.temporalExtent",value:{start:"{context.get(state('gnResourceData'), 'temporal_extent_start')}",end:"{context.get(state('gnResourceData'), 'temporal_extent_end')}"}},{type:"link",style:"label",labelId:"gnviewer.viewFullMetadata",href:"{context.getMetadataDetailUrl(state('gnResourceData'))}",disableIf:"{!context.getMetadataDetailUrl(state('gnResourceData'))}"}]},{type:"locations",id:"locations",labelId:"gnviewer.locations",items:"{({extent: context.get(state('gnResourceData'), 'extent')})}"},{type:"linked-resources",id:"related",labelId:"gnviewer.linkedResources.label",items:"{context.get(state('gnResourceData'), 'linkedResources')}"},{type:"assets",id:"assets",labelId:"gnviewer.assets",items:"{context.get(state('gnResourceData'), 'assets')}"},{type:"data",id:"data",labelId:"gnviewer.data",disableIf:"{context.get(state('gnResourceData'), 'resource_type') !== 'dataset'}",items:"{context.get(state('gnResourceData'), 'attribute_set')}"},{type:"settings",id:"settings",labelId:"gnviewer.management",disableIf:"{!context.canManageResourceSettings(state('gnResourceData')) && !context.canAccessPermissions(state('gnResourceData'))}",items:[!0]}]:i,s=e.items,c=e.editable,u=void 0===c||c,d=e.canEdit,p=e.targetSelector,g=e.headerNodeSelector,m=void 0===g?"#gn-brand-navbar":g,I=e.navbarNodeSelector,h=void 0===I?"#ms-action-navbar":I,R=e.footerNodeSelector,E=void 0===R?".gn-footer":R,C=e.width,P=e.height,k=e.show,j=e.onShow,_=e.onClose,T=e.enableFilters,M=e.resource,N=e.resourcesGridId,H=e.loading,Y=e.pendingChanges,L=e.enablePreview,G=e.editingOverlay,q=e.closeOnClickOut,U=e.showViewerButton,z=e.onClearResource,F=(n=(0,r.useState)(!1),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(n,o)||A(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),$=F[0],B=F[1],K=d&&u,V=!(null!=M&&M["@ms-detail"]),Z=(0,w.A)({headerNodeSelector:m,navbarNodeSelector:h,footerNodeSelector:E,width:C,height:P,active:!0}),Q=Z.stickyTop,W=Z.stickyBottom;function X(){j(!1),_(null),!V&&z(null)}function J(){Y&&!V?B(!0):X()}(0,r.useEffect)(function(){return function(){J()}},[]);var ee=(0,x.A)({extraNodes:[".ms-popover-overlay"],disabled:!q||!k,onClickOut:function(){J()}}),te=t.loadedPlugins,ne=function(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,f.A)({items:s,loadedPlugins:te},[null==M?void 0:M.pk]).filter(function(e){return"toolbar"===e.target})).sort(function(e,t){return e.position-t.position});return a().createElement(b.A,{targetSelector:p},a().createElement(y.A,{className:"ms-resource-detail shadow-md",top:Q,bottom:W,show:k,enabled:k,editing:G&&Y},a().createElement(S.A,{panelRef:ee,resource:M,loading:H,toolbarItems:ne,onClose:J,editing:K,enableFilters:T,enablePreview:L,tabs:l,tabComponents:v.A,resourcesGridId:N,showViewerButton:U})),a().createElement(D.A,{show:!!$,onCancel:function(){return B(!1)},onConfirm:X,pendingState:!!Y,titleId:"resourcesCatalog.detailsPendingChangesTitle",descriptionId:"resourcesCatalog.detailsPendingChangesDescription",cancelId:"resourcesCatalog.detailsPendingChangesCancel",confirmId:"resourcesCatalog.detailsPendingChangesConfirm",variant:"danger"}))}P.contextTypes={loadedPlugins:c().object,plugins:c().object};var k=(0,i.connect)((0,l.j8)({resource:m.xF,show:I.e_,loading:m.tI,canEdit:m.PA,pendingChanges:m.i9}),{onShow:h.GE,onClose:h.cQ,onClearResource:u.Hc})(function(e){var t,n,o=e.defaultOpen,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,C);return(0,r.useEffect)(function(){var e;null!=i&&null!==(e=i.resource)&&void 0!==e&&e.pk&&o&&i.onShow(!0)},[null==i||null===(t=i.resource)||void 0===t?void 0:t.pk,o]),null!=i&&null!==(n=i.resource)&&void 0!==n&&n.pk&&i.show?a().createElement(P,i):null});const j=(0,o.i1)("ResourceDetails",{component:k,containers:{ActionNavbar:[{name:"ResourceDetailsButton",Component:(0,i.connect)(function(e){return{resource:(0,m.xF)(e)}},{onShow:h.GE})(function(e){var t=e.component,n=e.resourcesGridId,r=e.onShow,o=e.resource;if(null==o||!o.pk)return null;var i=t;return i?a().createElement(i,{onClick:function(){r(!0,n)},glyph:"details",iconType:"glyphicon",square:!0,labelId:"resourcesCatalog.viewResourceProperties"}):null}),priority:1,doNotHide:!0},{name:"ResourceEditPermissions",Component:(0,i.connect)(function(e){return{resource:(0,m.xF)(e)}},{onShow:h.GE,onSelectTab:h.xX})(function(e){var t=e.resourcesGridId,n=e.onShow,r=e.resource,o=e.onSelectTab;return null!=r&&r.pk?a().createElement(R.A,{variant:"default",size:"md",onClick:function(){n(!0,t),o("settings")},labelId:"gnviewer.editPermissions"},a().createElement(E.A,{msgId:"gnviewer.editPermissions"})):null}),priority:1,doNotHide:!0}],ResourcesGrid:{priority:2,target:"card-buttons",position:2,Component:(0,i.connect)((0,l.j8)({selectedResource:m.xF}),{onSelect:u.gu,onShow:h.GE})(function(e){var t=e.resourcesGridId,n=e.resource,r=e.onSelect,o=e.component,i=e.selectedResource,l=e.onShow,s=o;return a().createElement(s,{onClick:function(){i["@ms-detail"]&&(null==i?void 0:i.pk)===(null==n?void 0:n.pk)||r(n,t),l(!0,t)},glyph:"details",iconType:"glyphicon",square:!0,labelId:"resourcesCatalog.viewResourceProperties"})}),doNotHide:!0}},reducers:{gnresource:g.A,controls:d.A,config:p.A}})}}]);