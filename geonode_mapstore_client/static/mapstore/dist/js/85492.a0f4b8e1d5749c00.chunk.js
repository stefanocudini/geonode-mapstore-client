"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[85492],{785492:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(273517),a=n.n(i),o=n(269843),l=n.n(o),s=n(8117),d=n(750042),r=n.n(d),c=n(256951),u=n(8571),m=n(229710),v=n(406250);const p=function(e){var t=e.className,n=e.textContainerClassName,i=e.loading,o=void 0!==i&&i,s=e.detailsText;return a().createElement("div",{className:t},o?a().createElement(r(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):l()(s)?a().createElement("div",{className:n},a().createElement(u.A,{msgId:"maps.feedback.noDetailsAvailable"})):a().createElement("div",{className:n,dangerouslySetInnerHTML:{__html:s||""}}))},f=function(e){var t=e.children,n=e.loading,i=void 0!==n&&n,o=e.show,l=void 0!==o&&o,s=e.readOnly,d=void 0!==s&&s,r=e.title,c=e.detailsText,f=e.bodyClassName,g=e.onClose,h=void 0===g?function(){}:g,w=e.onSave,b=void 0===w?function(){}:w,E=a().createElement(p,{className:"ms-details-preview-container",textContainerClassName:"ms-details-preview",loading:i,detailsText:c});return a().createElement(v.A,null,d?a().createElement(m.A,{size:"lg",bodyClassName:"details-viewer-modal",showFullscreen:!0,fitContent:!0,onClose:function(){return h()},title:a().createElement(u.A,{msgId:"map.details.title",msgParams:{name:r}}),show:l},E):a().createElement(m.A,{show:l,title:a().createElement(u.A,{msgId:"map.details.title",msgParams:{name:r}}),bodyClassName:f,size:"lg",clickOutEnabled:!1,showFullscreen:!0,fullscreenType:"full",onClose:function(){return h()},buttons:[{text:a().createElement(u.A,{msgId:"map.details.back"}),onClick:function(){return h()}},{text:a().createElement(u.A,{msgId:"map.details.save"}),onClick:function(){return b(c)}}]},t))};var g=n(383488),h=n.n(g),w=n(682693);const b={component:function(e){var t=e.modules,n=void 0===t?{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]}:t,i=e.editorState,o=e.onUpdateEditorState,l=void 0===o?function(){}:o;return a().createElement("div",{id:"ms-details-editor"},a().createElement(w.A,{bounds:"#ms-details-editor",value:i||"<p><br></p>",onChange:function(e){l(e)},modules:n}))},detailsTextToEditorState:h(),editorStateToDetailsText:h(),containerBodyClass:"ms-details-quill-editor"};var E=n(916589),S=n(595451),A=n(12816);const C={QuillEditor:b,DraftJSEditor:{component:(0,E.compose)((0,E.withProps)((function(e){var t=e.editorState,n=e.onUpdateEditorState,i=void 0===n?function(){}:n;return{onEditorStateChange:function(e){i(e)},editorState:t,toolbar:{options:["fontFamily","blockType","inline","textAlign","colorPicker","list","link","remove","image"],image:{className:void 0,component:void 0,popupClassName:void 0,urlEnabled:!0,uploadEnabled:!0,alignmentEnabled:!0,uploadCallback:function(e){return new Promise((function(t,n){var i=new FileReader;i.addEventListener("load",(function(){t({data:{link:i.result}})})),e?i.readAsDataURL(e):n()}))},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"auto"}}}}})),S.VI)(),detailsTextToEditorState:A.pn,editorStateToDetailsText:A.v6,containerBodyClass:"ms-details-draftjs-editor"}};function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k.apply(null,arguments)}var T=(0,E.compose)((0,E.withState)("showPreview","setShowPreview",!1),(0,E.withHandlers)({onShowPreview:function(e){var t=e.setShowPreview,n=void 0===t?function(){}:t;return function(){n(!0)}},onHidePreview:function(e){var t=e.setShowPreview,n=void 0===t?function(){}:t;return function(){n(!1)}}}))((function(e){var t=e.loading,n=void 0!==t&&t,i=e.showPreview,o=void 0!==i&&i,d=e.editDetailsDisabled,m=e.detailsText,v=e.settings,p=void 0===v?{}:v,f=e.canUndo,g=void 0!==f&&f,h=e.onShowPreview,w=void 0===h?function(){}:h,b=e.onHidePreview,E=void 0===b?function(){}:b,S=e.onUndo,A=void 0===S?function(){}:S,C=e.onShowDetailsSheet,k=void 0===C?function(){}:C,T=e.onUpdate,y=void 0===T?function(){}:T,N=e.onUpdateResource,D=void 0===N?function(){}:N,I=e.onDelete,x=void 0===I?function(){}:I;return a().createElement("div",{className:"ms-section"+(o?" ms-transition":"")},a().createElement("div",{className:"mapstore-block-width"},a().createElement(s.fI,null,a().createElement(s.fv,{xs:6},a().createElement("div",{className:"m-label"},!n&&l()(m)?a().createElement(u.A,{msgId:"map.details.add"}):a().createElement(u.A,{msgId:"map.details.rowTitle"}))),a().createElement(s.fv,{xs:6},a().createElement("div",{className:"ms-details-sheet"},a().createElement("div",{className:"pull-right"},n?a().createElement(r(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,!n&&a().createElement(c.A,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:o?"eye-open":"eye-close",visible:!!m,onClick:function(){return o?E():w()},disabled:n,tooltipId:o?"map.details.hidePreview":"map.details.showPreview"},{glyph:"undo",tooltipId:"map.details.undo",visible:g,onClick:function(){return A()},disabled:n},{glyph:"pencil-add",tooltipId:"map.details.add",visible:!m,onClick:function(){k(),y()},disabled:n},{glyph:"pencil",tooltipId:"map.details.edit",visible:!!m&&!d,onClick:function(){k(),y(m)},disabled:n},{glyph:"new-window",tooltipId:"map.details.showAsModal",visible:!!m,bsStyle:p.showAsModal?"success":"default",onClick:function(){return D("attributes.detailsSettings.showAsModal",!p.showAsModal)}},{glyph:"pushpin",tooltipId:"map.details.showAtStartup",visible:!!m,bsStyle:p.showAtStartup?"success":"default",onClick:function(){return D("attributes.detailsSettings.showAtStartup",!p.showAtStartup)}},{glyph:"trash",tooltipId:"map.details.delete",visible:!!m,onClick:function(){return x()},disabled:n}]})))))),m&&a().createElement("div",{className:"ms-details-preview-container"},""!==m?a().createElement("div",{className:"ms-details-preview",dangerouslySetInnerHTML:{__html:m}}):a().createElement("div",{className:"ms-details-preview"}," ",a().createElement(u.A,{msgId:"maps.feedback.noDetailsAvailable"}))))}));const y=function(e){var t,n,i=e.loading,o=e.resource,s=void 0===o?{}:o,d=e.editor,r=void 0===d?"DraftJSEditor":d,c=e.editorProps,u=void 0===c?{}:c,m=e.editorState,v=e.savedDetailsText,p=e.detailsBackup,g=e.showDetailsSheet,h=e.setEditorState,w=void 0===h?function(){}:h,b=e.setDetailsBackup,E=void 0===b?function(){}:b,S=e.onUpdateResource,A=void 0===S?function(){}:S,y=e.onUpdateLinkedResource,N=void 0===y?function(){}:y,D=e.onShowDetailsSheet,I=void 0===D?function(){}:D,x=e.onHideDetailsSheet,P=void 0===x?function(){}:x,U=C[r],L=U.component,_=U.editorStateToDetailsText,F=U.detailsTextToEditorState,O=U.containerBodyClass;return a().createElement(a().Fragment,null,a().createElement(T,{loading:i||s.saving,detailsText:v,detailsBackup:p,editDetailsDisabled:!l()(s.canEdit)&&!s.canEdit,settings:null===(t=s.attributes)||void 0===t?void 0:t.detailsSettings,canUndo:!!p,onUndo:function(){N("details",p,"DETAILS"),E()},onUpdate:function(e){return w(F(e))},onUpdateResource:A,onShowDetailsSheet:I,onDelete:function(){E(v),N("details","NODATA","DETAILS"),A("attributes.detailsSettings",{})}}),a().createElement(f,{loading:i,show:g,title:null===(n=s.metadata)||void 0===n?void 0:n.name,detailsText:m,bodyClassName:O,onClose:function(){P()},onSave:function(e){var t=_(e);P(),E(),t&&"<p><br></p>"!==t||(t=v),N("details",t||"NODATA","DETAILS")}},a().createElement(L,k({},u,{editorState:m,onUpdateEditorState:w}))))}},682693:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(273517);const a=(0,n(432060).A)()((0,i.lazy)((function(){return Promise.all([n.e(45708),n.e(42341)]).then(n.bind(n,642341))})))}}]);