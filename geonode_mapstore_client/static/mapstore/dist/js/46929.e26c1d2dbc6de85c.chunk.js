(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[46929],{377026:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(273517),o=r.n(n),i=r(618093),a=r.n(i),l=r(8117),c=r(711030);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,r(164045).A)(c.A);const m=function(e){var t=e.accept,r=e.children,n=e.style,i=e.onRef,c=void 0===i?function(){}:i,s=e.onClose,u=void 0===s?function(){}:s,f=e.onDrop,m=void 0===f?function(){}:f,b=e.onDragEnter,d=void 0===b?function(){}:b,h=e.onDragLeave,v=void 0===h?function(){}:h;return o().createElement(a(),{disableClick:!0,ref:c,id:"DRAGDROP_IMPORT_ZONE",style:p({position:"relative",height:"100%"},n),accept:t,onDrop:m,onDragEnter:d,onDragLeave:v},o().createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:2e3,display:"flex",textAlign:"center"}},o().createElement(y,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return u()}},o().createElement(l.e6,{glyph:"1-close"})),o().createElement("div",{style:{margin:"auto",maxWidth:550}},r)))}},919161:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(273517),o=r.n(n),i=r(275705),a=r(8571);const l=function(){return o().createElement("div",{style:{margin:"auto",maxWidth:550}},o().createElement(i.A,{size:80,color:"#ffffff",style:{margin:"auto"}}),o().createElement("h4",null,o().createElement(a.A,{msgId:"loading"})))}},761086:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(916589);const o=(0,n.compose)((0,n.withHandlers)((function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}})))},711520:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var n=r(45228),o=r.n(n),i=r(605556),a=r.n(i),l=r(273517),c=r.n(l),s=r(321962),u=r.n(s),p=r(750042),f=r.n(p),y=r(8571);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function O(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return O(e=function(e,t,r){return t=g(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?c().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},c().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},c().createElement(y.A,{msgId:"loading"}),c().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),O(e,"renderRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),O(e,"hasRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),O(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=c().createElement("div",{id:this.props.id,style:d({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},c().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),c().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?c().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):c().createElement("span",null)),r=this.props.draggable?c().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?c().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&h(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(c().Component);O(E,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),O(E,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const P=E},715275:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(273517),o=r.n(n),i=r(711520),a=r(8117);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var c=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=function(e){var t=e.show,r=e.style,n=void 0===r?{}:r,l=e.modal,u=e.draggable,f=void 0!==u&&u,y=e.closeGlyph,m=void 0===y?"1-close":y,b=e.closable,d=void 0===b||b,h=e.onClose,v=void 0===h?function(){}:h,g=e.title,S=e.header,O=e.footer,w=e.children,E=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,c);return t?o().createElement(i.A,s({modal:l,onClickOut:d&&l?function(){return v()}:null,style:p(p({},n),{},{display:t?"block":"none"}),draggable:f},E),o().createElement("span",{role:"header"},g||S||o().createElement("span",null,"Â "),d?o().createElement("button",{onClick:function(){return v()},className:"settings-panel-close close"},o().createElement(a.e6,{glyph:m})):null),o().createElement("span",{role:"body"},w),O?o().createElement("span",{role:"footer"},O):null):null}},946929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Yt});var n=r(916589),o=r(801081),i=r(273517),a=r.n(i),l=r(377026),c=r(919161),s=r(8117),u=r(711030),p=r(8571),f=r(595535);const y=function(e){var t=e.openFileDialog;return a().createElement("div",null,a().createElement(f.A,{msgId:"mapImport.dropZone.heading"}),t?a().createElement(u.A,{bsStyle:"primary",onClick:t},a().createElement(p.A,{msgId:"mapImport.dropZone.selectFiles"})):null,a().createElement("br",null),a().createElement("br",null),a().createElement(f.A,{msgId:"mapImport.dropZone.infoSupported"}),a().createElement("hr",null),a().createElement(f.A,{msgId:"mapImport.dropZone.note"}))};var m=["error"],b={FILE_NOT_SUPPORTED:a().createElement(p.A,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:a().createElement(p.A,{msgId:"mapImport.errors.projectionNotSupported"})};const d=(0,n.compose)((0,n.branch)((function(e){return e.loading}),(0,n.renderComponent)(c.A)),(0,n.branch)((function(e){return e.error}),(0,n.renderComponent)((function(e){var t=e.error,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,m);return a().createElement("div",{style:{margin:"auto",maxWidth:550}},a().createElement("div",null,a().createElement(s.e6,{glyph:"exclamation-mark",style:{fontSize:80}})),a().createElement("h5",null,function(e){return e?b[e.message]||b[e]||a().createElement("span",null,a().createElement(p.A,{msgId:"mapImport.errors.unknownError"}),":",a().createElement(s.Fc,{bsStyle:"warning"},e.message)):a().createElement(p.A,{msgId:"mapImport.errors.unknownError"})}(t)),a().createElement(y,r))}))))((function(e){return a().createElement("div",null,a().createElement("div",null,a().createElement(s.e6,{glyph:"upload",style:{fontSize:80}})),a().createElement(y,e))}));var h=r(771710),v=r.n(h),g=r(619747),S=r.n(g),O=r(858156),w=r.n(O),E=r(442426),P=r.n(E),j=r(45388),x=r.n(j),k=r(535273),T=r(779893),C=r(750929),A=r(112585);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return(t=function(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){return new Promise((function(t,r){var n=(0,C.o2)(e.name),o=e.type||C.Db[n];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o||"application/geo+json"===o?t(e):function(e){return(0,C.ue)(e).then((function(e){return(new(v())).loadAsync(e)}))}(e).then((function(){return t(e)})).catch((function(){return r(new Error("FILE_NOT_SUPPORTED"))}))}))};const z=(0,n.compose)((0,n.mapPropsStream)((function(e){var t=(0,n.createEventHandler)(),r=t.handler,o=t.stream,i=(0,n.createEventHandler)(),a=i.handler,l=i.stream;return e.combineLatest(o.switchMap((function(e){return x().Observable.from(e).flatMap(L).flatMap(function(e){return function(t){var r=(0,C.o2)(t.name),n=t.type||C.Db[r],o=T.Ay.getConfigProp("projectionDefs")||[],i=(o.length&&o.map((function(e){return e.code}))||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===n?(0,C.hN)(t).then((function(e){return(0,C.f$)(e)})):"application/gpx+xml"===n?(0,C.hN)(t).then((function(e){return(0,C._r)(e,t.name)})):"application/vnd.google-earth.kmz"===n?(0,C.h)(t).then((function(e){return(0,C.f$)(e)})):"application/x-zip-compressed"===n||"application/zip"===n?(0,C.ue)(t).then((function(r){return(0,C.kZ)(r).then((function(n){n.length>0&&e({type:"warning",filename:t.name,message:"shapefile.error.missingPrj"});var o=(0,C.e3)(r).map((function(e){return D(D({},e),{},{filename:t.name})}));if(P()(o,(function(e){return!!w()(e,"map.projection")}))){var a=o.filter((function(e){return!!w()(e,"map.projection")}));if(S()(a,(function(e){return i.includes(e.map.projection)})))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o}))})):"application/json"===n?(0,C.Vh)(t).then((function(e){var r=w()(e,"map.projection");if(r){if(i.includes(r))return[D(D({},e),{},{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[D(D({},e),{},{fileName:t.name})]})):"application/geo+json"===n?(0,C.Se)(t).then((function(e){var r=w()(e,"geoJSON.map.projection");if(r){if(i.includes(r))return[D(D({},e.geoJSON),{},{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[D(D({},e.geoJSON),{},{fileName:t.name})]})):"application/vnd.wmc"===n?(0,C._1)(t).then((function(e){return[D(D({},e),{},{fileName:t.name})]})):null}}(a)).reduce((function(e,t){return{layers:(e.layers||[]).concat(t.filter((function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)})).map((function(e){return(0,k.Ir)(e)?{name:"Annotations",features:(0,k.no)(e),filename:e.filename}:D(D({},(0,A.mb)(e)),{},{filename:e.filename})}))),maps:(e.maps||[]).concat(t.filter((function(e){return function(e){return e&&e.version&&e.map}(e)})))}}),{}).map((function(e){return{loading:!1,files:e}})).catch((function(e){return x().Observable.of({error:e,loading:!1})})).startWith({loading:!0})})).startWith({}),(function(e,t){return D(D(D({},e),t),{},{onDrop:r})})).combineLatest(l.scan((function(){var e,t=arguments.length>1?arguments[1]:void 0;return[].concat(function(e){if(Array.isArray(e))return _(e)}(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t])}),[]).startWith(void 0),(function(e,t){return D(D({},e),{},{warnings:t})}))})));var R=r(764932);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return(t=function(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const W=(0,n.compose)((0,n.withHandlers)({useFiles:function(e){var t=e.currentMap,r=e.loadMap,n=void 0===r?function(){}:r,o=e.loadMapInfo,i=void 0===o?function(){}:o,a=e.onClose,l=void 0===a?function(){}:a,c=e.setLayers,s=void 0===c?function(){}:c,u=e.annotationsLayer,p=e.loadAnnotations,f=void 0===p?function(){}:p,y=e.warning,m=void 0===y?function(){}:y;return function(e,r){var o=e.layers,a=void 0===o?[]:o,c=e.maps,p=(void 0===c?[]:c)[0];if(p){var y=t.zoom,b=t.center,d=t.mapId,h=p.fileName;n(G(G({},p),{},{map:G(G({},p.map),{},{zoom:p.map.zoom||y,center:p.map.center||b})}),d||null,!p.map.zoom&&(p.map.bbox||{bounds:p.map.maxExtent})),d&&h&&i(d),l()}if(a.length>0){var v=a&&"Annotations"===a[0].name;if(!u&&v)f(a[0].features,!1),l();else{var g=[];a.forEach((function(e){var t;"vector"!==e.type||(0,R.checkIfLayerFitsExtentForProjection)(e)?g.push(e):m({title:"notification.warning",message:"mapImport.errors.fileBeyondBoundaries",autoDismiss:6,position:"tc",values:{filename:null!==(t=e.name)&&void 0!==t?t:" "}})})),s(g,r)}}}}}),(0,n.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("files").filter((function(e){return e.files})).do((function(e){var t=e.files,r=e.useFiles,n=void 0===r?function(){}:r,o=e.warnings;return n(t,void 0===o?[]:o)})).ignoreElements())})));var Z=r(761086),J=["onClose","onDrop","onRef"];const H=(0,n.compose)(z,W,Z.A)((function(e){var t=e.onClose,r=void 0===t?function(){}:t,n=e.onDrop,o=void 0===n?function(){}:n,i=e.onRef,c=void 0===i?function(){}:i,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,J);return a().createElement(l.A,{onClose:r,onDrop:o,onRef:c},a().createElement(d,s))}));var $=r(811668),q=r(605556),K=r.n(q),X=r(129519),V=r(167491),Q=r(957421),Y=r(185015),ee=r.n(Y),te=r(455268),re=r(628017),ne=r(618093),oe=r.n(ne),ie=r(750042),ae=r.n(ie),le=r(786964);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,me(n.key),n)}}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function ye(e,t,r){return(t=me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}var be=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ye(e=function(e,t,r){return t=pe(t),function(e,t){if(t&&("object"==ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ue()?Reflect.construct(t,r||[],pe(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"tryUnzip",(function(e){return(0,C.ue)(e).then((function(e){return(new(v())).loadAsync(e)}))})),ye(e,"checkFileType",(function(t){return new le.Promise((function(r,n){var o=(0,C.o2)(t.name),i=t.type||C.Db[o];"application/x-zip-compressed"===i||"application/zip"===i||"application/vnd.google-earth.kml+xml"===i||"application/vnd.google-earth.kmz"===i||"application/gpx+xml"===i?r():e.tryUnzip(t).then(r).catch(n)}))})),ye(e,"checkfile",(function(t){le.Promise.all(t.map((function(t){return e.checkFileType(t)}))).then((function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)})).catch((function(){var t=(0,re.kA)(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.loading?a().createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",a().createElement(ae(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):a().createElement(oe(),{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},a().createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&se(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);ye(be,"propTypes",{text:K().oneOfType([K().string,K().element]),loading:K().bool,onShapeChoosen:K().func,onShapeError:K().func,error:K().oneOfType([K().string,K().element]),errorMessage:K().string}),ye(be,"contextTypes",{messages:K().object}),ye(be,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"});const de=be;function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ve.apply(null,arguments)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Ee(e,t,r){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}var je=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ee(e=function(e,t,r){return t=Oe(t),function(e,t){if(t&&("object"==he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Se()?Reflect.construct(t,r||[],Oe(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),Ee(e,"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),Ee(e,"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,r){var n=e.getGeometryType(r.geometry);return t?n===t?t:"GeometryCollection":n}),null):null})),Ee(e,"renderError",(function(){return a().createElement(s.fI,null,a().createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},a().createElement(p.A,{msgId:e.props.error})))})),Ee(e,"renderSuccess",(function(){return a().createElement(s.fI,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),Ee(e,"renderStyle",(function(){return e.props.stylers[e.getGeomType(e.props.selected)]})),Ee(e,"renderDefaultStyle",(function(){return e.props.selected?a().createElement(s.fI,null,a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.defaultStyle"}))),a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.zoom"})))):null})),Ee(e,"addShape",(function(t){e.props.shapeLoading(!0);var r=e.props.readFiles(t,e.props.onShapeError);le.Promise.all(r).then((function(t){var r=t.filter((function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type}));r=r.reduce((function(t,r){return r?t.concat(r.map((function(t){return(0,A.mb)(t,e.props.createId(t,r))}))):t}),[]),e.props.onShapeChoosen(r),e.props.shapeLoading(!1)})).catch((function(t){e.props.shapeLoading(!1);var r=t&&t.name||t||"";ee()(r)&&"SyntaxError"===r?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")}))})),Ee(e,"addToMap",(function(){e.props.shapeLoading(!0);var t=e.props.selected;le.Promise.resolve(e.props.addShapeLayer(t)).then((function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+(0,re.kA)(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)})).catch((function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(s.fI,{style:{textAlign:"center"}},this.props.selected?a().createElement(te.DropdownList,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):a().createElement(de,ve({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),a().createElement(s.fI,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?a().createElement(s.fI,null,a().createElement(s.fv,{xsOffset:6,xs:3}," ",a().createElement(u.A,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),a().createElement(s.fv,{xs:3}," ",a().createElement(u.A,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&ge(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Ee(je,"propTypes",{bbox:K().array,layers:K().array,selected:K().object,style:K().object,shapeStyle:K().object,readFiles:K().func,onShapeError:K().func,onShapeSuccess:K().func,onShapeChoosen:K().func,addShapeLayer:K().func,shapeLoading:K().func,onSelectLayer:K().func,onLayerAdded:K().func,onZoomSelected:K().func,updateShapeBBox:K().func,error:K().string,success:K().string,buttonSize:K().string,uploadMessage:K().object,cancelMessage:K().object,addMessage:K().object,stylers:K().object,uploadOptions:K().object,createId:K().func}),Ee(je,"contextTypes",{messages:K().object}),Ee(je,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map((function(e){var r=(0,C.o2)(e.name),n=e.type||C.Db[r];return"application/vnd.google-earth.kml+xml"===n?(0,C.hN)(e).then((function(e){return(0,C.f$)(e)})):"application/gpx+xml"===n?(0,C.hN)(e).then((function(e){return(0,C._r)(e)})):"application/vnd.google-earth.kmz"===n?(0,C.h)(e).then((function(e){return(0,C.f$)(e)})):"application/x-zip-compressed"===n||"application/zip"===n?(0,C.ue)(e).then((function(e){return(0,C.kZ)(e).then((function(r){return r.length>0&&t("shapefile.error.missingPrj"),(0,C.e3)(e)}))})):null}))},stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null});const xe=je;var ke=r(888338),Te=r(910219),Ce=r.n(Te),Ae=r(491281);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ze(n.key),n)}}function Me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Me=function(){return!!e})()}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function Le(e,t,r){return(t=ze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e){var t=function(e){if("object"!=Ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}var Re=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Le(e=function(e,t,r){return t=De(t),function(e,t){if(t&&("object"==Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Me()?Reflect.construct(t,r||[],De(e).constructor):t.apply(e,r))}(this,t,[].concat(o)),"paint",(function(t){t.save(),t.beginPath();var r=e.props.shapeStyle,n=r.color,o=r.fill;switch(t.fillStyle=o?ee()(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=n?ee()(n)?n:"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),Le(e,"drawSymbol",(function(t,n){n.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=r(239277),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{n.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{n.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),Le(e,"paintSymbol",(function(t){(0,Ae.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,Ae.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(r){return e.drawSymbol(r,t)})):e.drawSymbol(null,t)})),Le(e,"paintText",(function(t){var r=e.props,n=r.width,o=r.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,c=i.label,s=i.font,u=void 0===s?"14px Arial":s;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(c||"New",n/2.5,o/2),void t.fillText(c||"New",n/2.5,o/2)):"end"===l?(t.strokeText(c||"New",n/1.5,o/2),void t.fillText(c||"New",n/1.5,o/2)):(t.strokeText(c||"New",n/2,o/2),void t.fillText(c||"New",n/2,o/2))})),Le(e,"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),Le(e,"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),Le(e,"paintPoint",(function(t,r){var n=e.props.shapeStyle.radius,o=n/2;switch(r){case"square":t.rect(50-o,48.5-o,n,n);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*n/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,n,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,n,.23);break;default:t.arc(50,48.5,n,0,2*Math.PI)}t.fill(),t.stroke()})),Le(e,"paintMarker",(function(e){var t=new Image;t.src=Ce();try{e.drawImage(t,42.5,24)}catch(e){return}})),Le(e,"paintStar",(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,c=r,s=Math.PI/n;e.moveTo(t,r-o);for(var u=0;u<n;u++)l=t+Math.cos(a)*o,c=r+Math.sin(a)*o,e.lineTo(l,c),a+=s,l=t+Math.cos(a)*i,c=r+Math.sin(a)*i,e.lineTo(l,c),a+=s;e.lineTo(t,r-o),e.closePath()})),Le(e,"paintCross",(function(e,t,r,n,o){var i=n*o/2,a=n/2;e.moveTo(t-i,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r+i),e.lineTo(t+i,r+i),e.lineTo(t+i,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r-i),e.lineTo(t-i,r-i),e.closePath()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return a().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&_e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(a().Component);Le(Re,"propTypes",{originalStyle:K().object,style:K().object,shapeStyle:K().object,geomType:K().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:K().number,height:K().number}),Le(Re,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const Be=Re;function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,He(n.key),n)}}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ze(e,t)}function Je(e,t,r){return(t=He(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e){var t=function(e){if("object"!=Fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fe(t)?t:t+""}var $e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=We(t),function(e,t){if(t&&("object"==Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ue()?Reflect.construct(t,r||[],We(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(te.DropdownList,{data:[{value:"circle",name:(0,re.kA)(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:(0,re.kA)(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:(0,re.kA)(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:(0,re.kA)(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:(0,re.kA)(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:(0,re.kA)(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&Ge(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Je($e,"propTypes",{markName:K().string,onChange:K().func}),Je($e,"contextTypes",{messages:K().object}),Je($e,"defaultProps",{markName:"circle",onChange:function(){}});const qe=$e;var Ke=r(883085),Xe=r.n(Ke);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=function(e){if("object"!=Ve(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ve(t)?t:t+""}Xe()();var ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=et(t),function(e,t){if(t&&("object"==Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,r||[],et(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{fluid:!0},a().createElement(s.fI,null,a().createElement(s.fv,{xs:4,style:{padding:0}},a().createElement(Be,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),a().createElement(s.fv,{xs:7},this.props.showMarker?a().createElement(s.fI,null,a().createElement(s.fv,{xs:1},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:4},a().createElement("label",null,"Marker"))):null,this.props.showMarkSelector?a().createElement(s.fI,{style:{marginBottom:4}},a().createElement(s.fv,{style:{paddingTop:7},xs:4},a().createElement("label",null,"Mark")),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(qe,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,a().createElement(s.fI,null,a().createElement(s.fv,{xs:4},a().createElement(ke.A,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(te.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){e.props.shapeStyle.width!==t&&e.props.setStyleParameter("width",t)}}))),a().createElement(s.fI,{style:{marginTop:4}},a().createElement(s.fv,{xs:4},a().createElement(ke.A,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(te.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:50,step:1,value:this.props.shapeStyle.radius,onChange:function(t){e.props.shapeStyle.radius!==t&&e.props.setStyleParameter("radius",t)}}))))))}}],n&&Qe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);rt(ot,"propTypes",{shapeStyle:K().object,setStyleParameter:K().func,showMarker:K().bool,showMarkSelector:K().bool}),rt(ot,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}});const it=ot;function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ft(n.key),n)}}function ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ct=function(){return!!e})()}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function pt(e,t,r){return(t=ft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e){var t=function(e){if("object"!=at(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==at(t)?t:t+""}Xe()();var yt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=st(t),function(e,t){if(t&&("object"==at(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ct()?Reflect.construct(t,r||[],st(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{fluid:!0},a().createElement(s.fI,null,a().createElement(s.fv,{xs:4,style:{padding:0}},a().createElement(Be,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),a().createElement(s.fv,{xs:7},a().createElement(s.fI,{style:{marginTop:7}},a().createElement(s.fv,{xs:4},a().createElement(ke.A,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(te.NumberPicker,{min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){t!==e.props.shapeStyle.width&&e.props.setStyleParameter("width",t)}}))),a().createElement(s.fI,{style:{marginTop:4}},a().createElement(s.fv,{xs:6},a().createElement(ke.A,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&lt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);pt(yt,"propTypes",{shapeStyle:K().object,setStyleParameter:K().func}),pt(yt,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const mt=yt;function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ot(n.key),n)}}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}function gt(e,t){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gt(e,t)}function St(e,t,r){return(t=Ot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ot(e){var t=function(e){if("object"!=bt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bt(t)?t:t+""}Xe()();var wt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=vt(t),function(e,t){if(t&&("object"==bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ht()?Reflect.construct(t,r||[],vt(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return a().createElement(s.xA,{fluid:!0},a().createElement(s.fI,null,a().createElement(s.fv,{xs:4,style:{padding:0}},a().createElement(Be,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),a().createElement(s.fv,{xs:7},a().createElement(s.fI,{style:{marginTop:7}},a().createElement(s.fv,{xs:4},a().createElement(ke.A,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),a().createElement(s.fv,{xs:8,style:{paddingRight:0,paddingLeft:30}},a().createElement(te.NumberPicker,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&dt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);St(wt,"propTypes",{shapeStyle:K().object,setStyleParameter:K().func}),St(wt,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const Et=wt;(0,$.connect)((function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}}),{onShapeError:V.DX})(xe);var Pt=(0,$.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:Q.J})(mt),jt=(0,$.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:Q.J})(it),xt=(0,$.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:Q.J})(Et),kt=r(181634),Tt=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!["geostyler"].includes(null==r||null===(e=r.style)||void 0===e?void 0:e.format)||null==r||null===(t=r.style)||void 0===t||!t.body)||!(!r||!r.features.length)&&r.features.reduce((function(e,t){var r=t.style&&Array.isArray(t.style)&&t.style.length||Object.keys(t.style||{}).length;return e||!!r}),!1)};function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function At(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zt(n.key),n)}}function Mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mt=function(){return!!e})()}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}function Nt(e,t){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nt(e,t)}function Lt(e,t,r){return(t=zt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e){var t=function(e){if("object"!=Ct(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:t+""}var Rt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Lt(e=function(e,t,r){return t=Dt(t),function(e,t){if(t&&("object"==Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mt()?Reflect.construct(t,r||[],Dt(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,overrideAnnotation:!1,initialLayers:[]}),Lt(e,"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),Lt(e,"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,r){var n=e.getGeometryType(r.geometry);return t?n===t?t:"GeometryCollection":n}),null):null})),Lt(e,"renderError",(function(){return e.props.errors&&e.props.errors.filter((function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)})).map((function(e){return a().createElement(s.fI,{key:e&&e.name+e.message},a().createElement(s.Fc,{bsStyle:e.type,style:{textAlign:"center"}},a().createElement(p.A,{msgId:e.message})))}))})),Lt(e,"renderSuccess",(function(){return a().createElement(s.fI,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),Lt(e,"renderDisableStyleCustomization",(function(e){return e?a().createElement("div",{className:"alert alert-info mb-2 style-customisation-disabled-container"},a().createElement(p.A,{msgId:"shapefile.styleCustomizationDisabled"})):null})),Lt(e,"findLayerSerialNumber",(function(t){var r=t.name;return e.state.initialLayers.findIndex((function(e){return e.name===r}))+1})),Lt(e,"addToMap",(function(){var t=Tt(e.props.selected),r=(0,k.Ir)(e.props.selected),n=r||e.state.useDefaultStyle||t?e.props.selected:(0,kt.s)(e.props.selected,e.props.shapeStyle);le.Promise.resolve(r?e.props.loadAnnotations(n.features,e.state.overrideAnnotation):e.props.addLayer(n)).then((function(){if(!r){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326"))}e.props.onSuccess(e.props.layers.length>1?r?"Annotation":e.props.layers[0].name+(0,re.kA)(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)})).catch((function(t){e.props.onError({type:"error",name:r?"Annotation":e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})}))})),Lt(e,"annotationOptions",(function(){return a().createElement(a().Fragment,null,a().createElement(s.fv,{xs:2},a().createElement("input",{type:"radio",checked:!e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!1})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.merge"}))),a().createElement(s.fv,{xs:2},a().createElement("input",{type:"radio",checked:e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!0})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.replace"}))))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nt(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){this.setState({initialLayers:At(this.props.layers)})}},{key:"render",value:function(){var e=this,t=Tt(this.props.selected);return a().createElement(s.xA,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(s.fI,null,a().createElement("h4",null,a().createElement("span",{style:{fontWeight:"bold"}},a().createElement(p.A,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),a().createElement(s.fI,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle||t?null:this.props.stylers[this.getGeomType(this.props.selected)]),this.renderDisableStyleCustomization(t),a().createElement(s.fI,{key:"options"},(0,k.Ir)(this.props.selected)?this.annotationOptions():a().createElement(a().Fragment,null,a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",disabled:t,checked:t||this.state.useDefaultStyle,defaultChecked:t||this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.defaultStyle"}))),a().createElement(s.fv,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(s.fv,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(p.A,{msgId:"shapefile.zoom"}))))),a().createElement(s.fI,null,a().createElement(s._O,{style:{display:"flex",justifyContent:"flex-end"}},a().createElement(u.A,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),a().createElement(u.A,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),a().createElement(u.A,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}],n&&_t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Lt(Rt,"propTypes",{bbox:K().array,layers:K().array,selected:K().object,style:K().object,shapeStyle:K().object,onError:K().func,onSuccess:K().func,setLayers:K().func,addLayer:K().func,loadAnnotations:K().func,onSelectLayer:K().func,onLayerAdded:K().func,onLayerSkipped:K().func,onZoomSelected:K().func,updateBBox:K().func,errors:K().array,success:K().string,buttonSize:K().string,cancelMessage:K().object,addMessage:K().object,stylers:K().object,nextMessage:K().object,finishMessage:K().object,skipMessage:K().object}),Lt(Rt,"contextTypes",{messages:K().object}),Lt(Rt,"defaultProps",{buttonSize:"small",setLayers:function(){},addLayer:function(){},loadAnnotations:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null});const Bt=Rt;var Ft=r(715275);function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ut.apply(null,arguments)}function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qt(n.key),n)}}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function $t(e,t,r){return(t=qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){var t=function(e){if("object"!=Gt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gt(t)?t:t+""}var Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=Jt(t),function(e,t){if(t&&("object"==Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zt()?Reflect.construct(t,r||[],Jt(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e={Polygon:a().createElement(Pt,null),MultiPolygon:a().createElement(Pt,null),GeometryCollection:a().createElement(Pt,null),LineString:a().createElement(xt,null),MultiLineString:a().createElement(xt,null),MultiPoint:a().createElement(jt,null),Point:a().createElement(jt,null)},t=a().createElement(Bt,Ut({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:a().createElement(X.A,{msgId:this.props.uploadMessage}),cancelMessage:a().createElement(X.A,{msgId:"shapefile.cancel"}),nextMessage:a().createElement(X.A,{msgId:"shapefile.next"}),finishMessage:a().createElement(X.A,{msgId:"shapefile.finish"}),skipMessage:a().createElement(X.A,{msgId:"shapefile.skip"})}));return this.props.layers?a().createElement(Ft.A,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:a().createElement(X.A,{msgId:"shapefile.title"})},t):t}}])&&Wt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);$t(Kt,"propTypes",{id:K().string,layers:K().array,selected:K().object,style:K().object,shapeStyle:K().object,onError:K().func,setLayers:K().func,addShapeLayer:K().func,onSelectLayer:K().func,onLayerAdded:K().func,error:K().string,mapType:K().string,wrap:K().bool,wrapWithPanel:K().bool,panelStyle:K().object,panelClassName:K().string,visible:K().bool,modal:K().bool,onClose:K().func,closeGlyph:K().string,uploadMessage:K().string,buttonSize:K().string}),$t(Kt,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"});const Xt=Kt;var Vt=r(538704),Qt=r(131127);const Yt=(0,n.compose)((0,n.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.layers;return t&&t.length>0})).exhaustMap((function(){return e.filter((function(e){var t=e.layers;return!t||0===t.length})).take(1).do((function(e){var t=e.onClose,r=void 0===t?function(){}:t;return r&&r()})).ignoreElements()})))})),(0,n.branch)((function(e){return!e.enabled}),n.renderNothing),(0,n.branch)((function(e){var t=e.layers;return!t||0===t.length}),(0,n.compose)((0,$.connect)((0,o.j8)({currentMap:Qt.mg}),{loadMap:Vt.ze,loadMapInfo:Vt.D7}),(0,n.renderComponent)(H))))(Xt)},181634:(e,t,r)=>{"use strict";r.d(t,{d:()=>v,s:()=>g});var n=r(987021),o=r.n(n),i=r(541033),a=r.n(i),l=r(910219),c=r.n(l),s=r(962193),u=r.n(s),p=r(491281);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.marker,r=e.fillColor,n=void 0===r?"#f2f2f2":r,o=e.fillOpacity,i=void 0===o?.3:o,l=e.strokeColor,s=void 0===l?"#3075e9":l,u=e.strokeOpacity,p=void 0===u?1:u,f=e.strokeWidth,y=void 0===f?2:f,m=e.radius,b=void 0===m?10:m,h=e.geometryType,v=void 0===h?"GeometryCollection":h;return{format:"geostyler",metadata:{editorType:"visual"},body:{rules:[].concat(d(t?[{name:"Default Marker Style",ruleId:a()(),symbolizers:[{kind:"Icon",image:c(),opacity:1,size:32,rotate:0,msBringToFront:!0,msHeightReference:"none",symbolizerId:a()()}]}]:[]),d(["GeometryCollection","Point","MultiPoint"].includes(v)&&!t?[{name:"Default Point Style",ruleId:a()(),symbolizers:[{kind:"Mark",color:n,fillOpacity:i,opacity:1,strokeColor:s,strokeOpacity:p,strokeWidth:y,wellKnownName:"Circle",radius:b,msBringToFront:!0,symbolizerId:a()()}]}]:[]),d(["GeometryCollection","LineString","MultiLineString"].includes(v)&&!t?[{name:"Default Line Style",ruleId:a()(),symbolizers:[{kind:"Line",color:s,opacity:p,width:y,symbolizerId:a()()}]}]:[]),d(["GeometryCollection","Polygon","MultiPolygon"].includes(v)&&!t?[{name:"Default Polygon Style",ruleId:a()(),symbolizers:[{kind:"Fill",color:n,fillOpacity:i,outlineColor:s,outlineOpacity:p,outlineWidth:y,symbolizerId:a()()}]}]:[]))}}},g=function(e,t){var r,n,i,a,l,c=(0,p.flattenFeatures)((null==e?void 0:e.features)||[]);if(c.find((function(e){var t;return!u()((null==e?void 0:e.style)||{})&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.id)}))||null!=e&&null!==(r=e.style)&&void 0!==r&&r.format&&!u()(null==e||null===(n=e.style)||void 0===n?void 0:n.body)||(null==e||null===(i=e.style)||void 0===i||!i.format)&&!u()(e.style))return e;var s=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).features,t=((e||[]).find((function(e){var t=e.geometry;return null==t?void 0:t.type}))||{}).geometry;if(!t)return null;var r=t.type.replace("Multi","");return"GeometryCollection"===r||(e||[]).find((function(e){var t,n=e.geometry;return(null==n||null===(t=n.type)||void 0===t?void 0:t.replace("Multi",""))!==r}))?"GeometryCollection":r}({features:c}),f=!(null==t||!t.marker||!["Point","MultiPoint"].includes(s)),y=t&&o()(t.fill).toHexString(),b=null==t||null===(a=t.fill)||void 0===a?void 0:a.a,d=t&&o()(null==t?void 0:t.color).toHexString(),h=null==t||null===(l=t.color)||void 0===l?void 0:l.a,g=null==t?void 0:t.width,S=null==t?void 0:t.radius;return m(m(m({},e),f&&{handleClickOnLayer:!0}),{},{style:v(t?{marker:f,fillColor:y,fillOpacity:b,strokeColor:d,strokeOpacity:h,strokeWidth:g,radius:S,geometryType:s}:{geometryType:s})})}},917277:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},623777:(e,t,r)=>{var n=r(480909);e.exports=function(e,t){var r=!0;return n(e,(function(e,n,o){return r=!!t(e,n,o)})),r}},990916:(e,t,r)=>{var n=r(480909);e.exports=function(e,t){var r;return n(e,(function(e,n,o){return!(r=t(e,n,o))})),!!r}},619747:(e,t,r)=>{var n=r(917277),o=r(623777),i=r(315389),a=r(956449),l=r(936800);e.exports=function(e,t,r){var c=a(e)?n:o;return r&&l(e,t,r)&&(t=void 0),c(e,i(t,3))}},442426:(e,t,r)=>{var n=r(314248),o=r(315389),i=r(990916),a=r(956449),l=r(936800);e.exports=function(e,t,r){var c=a(e)?n:i;return r&&l(e,t,r)&&(t=void 0),c(e,o(t,3))}},239277:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"}}]);