(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[531,35341],{265365:(t,i,e)=>{"use strict";e.r(i),e.d(i,{default:()=>I});var n=e(273517),r=e(336946),o=e(448871),a=e(252544),s=e(491446),l=e(86881),c=e(149785),d=e(493721),u=e(770103),h=e(407350),f=e.n(h),m=e(770260),v=e(457378),p=e(762222),g=e(305493);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function _(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function b(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?_(Object(e),!0).forEach((function(i){w(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function w(t,i,e){return(i=C(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function A(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,a,s=[],l=!0,c=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=o.call(e)).done)&&(s.push(n.value),s.length!==i);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(t,i)||O(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,i){if(t){if("string"==typeof t)return T(t,i);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?T(t,i):void 0}}function T(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=Array(i);e<i;e++)n[e]=t[e];return n}function x(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function C(t){var i=function(t){if("object"!=y(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=y(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(i)?i:i+""}function D(t,i){var e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getObjectsToExcludeOnPick,o=void 0===r?function(){return[]}:r,a=n.pickObjectsLimit,s=void 0===a?Number.MAX_VALUE:a,l=n.depthTestAgainstTerrain,c=o();void 0!==l&&(e=t.scene.globe.depthTestAgainstTerrain,t.scene.globe.depthTestAgainstTerrain=l),c.forEach((function(t){t&&(t.show=!1)})),t.scene.render();var d=(0,m.hm)(t,i,{pickObjectsLimit:s});return void 0!==l&&(t.scene.globe.depthTestAgainstTerrain=e),c.forEach((function(t){t&&(t.show=!0)})),d}function M(t,i,e){var n=e.area,o=e.areaUom,a=e.length,s=e.lengthUom,l=e.height,c=e.heightUom,d=e.terrainCoordinates,u=e.geodesic,h=u&&null!=i&&i[i.length-1]?r.A.fromCartesian(i[i.length-1]).height:void 0;switch(t){case"Point":return{type:"Feature",properties:d?{height:l,heightUom:c,terrainCoordinates:d}:{geodesic:u},geometry:{type:"Point",coordinates:(0,p.Kf)(i[i.length-1],h)}};case"LineString":return{type:"Feature",properties:{length:a,lengthUom:s,geodesic:u},geometry:{type:"LineString",coordinates:i.map((function(t){return(0,p.Kf)(t,h)}))}};case"Polygon":return{type:"Feature",properties:{area:n,areaUom:o,length:a,lengthUom:s,geodesic:u},geometry:{type:"Polygon",coordinates:[i.map((function(t){return(0,p.Kf)(t,h)}))]}};case"Circle":return{type:"Feature",properties:{radius:(0,p.Ht)([i[0],i[1]],u),radiusUom:"m",geodesic:u},geometry:{type:"Point",coordinates:(0,p.Kf)(i[0],h)}};default:return null}}function S(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,e=arguments.length>2?arguments[2]:void 0;return new Promise((function(n){var l=e.map((function(t){return r.A.fromCartesian(t)})).map((function(t){return new r.A(t.longitude,t.latitude,0)}));(t.ready?Promise.resolve(!0):t.readyPromise).then((function(){var e,r,c=null!=t&&t.availability?o.A(t,l):a.A(t,i,l);s.A(c)?null===(e=c.then((function(t){n(t)})))||void 0===e||null===(r=e.catch)||void 0===r||r.call(e,(function(){n()})):n()}))}))}const E=function(){return t=function t(i){var e,n,r,o,a,s=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this._type=null==i?void 0:i.type,this._map=null==i?void 0:i.map,this._coordinatesLength=null==i?void 0:i.coordinatesLength,this._geodesic=null==i?void 0:i.geodesic,this._sampleTerrain=null==i?void 0:i.sampleTerrain,this._getObjectsToExcludeOnPick=function(){return[].concat(P(null!=i&&i.getObjectsToExcludeOnPick?i.getObjectsToExcludeOnPick():[]),[s._dynamicPrimitivesCollection,s._dynamicBillboardCollection])},this._depthTestAgainstTerrain=null==i?void 0:i.depthTestAgainstTerrain,this._getPositionInfo=(null==i?void 0:i.getPositionInfo)||D,this._handler=new l.A(this._map.canvas),this._handler.setInputAction((function(t){s._handleDrawEnd(t,!0)}),c.A.LEFT_DOUBLE_CLICK),this._handler.setInputAction((function(t){s._handleDrawing(t),s._handleDrawStart(t)}),c.A.LEFT_CLICK),this._handler.setInputAction(f()((function(t){s._handleMouseMove(t)}),null!==(e=i.mouseMoveThrottleTime)&&void 0!==e?e:100),c.A.MOUSE_MOVE),this._drawing=!1,this._forcedDrawEnd=!1,this._coordinates=[],this._style=(0,g.zY)(null==i?void 0:i.style),this._dynamicPrimitivesCollection=new d.A({destroyPrimitives:!0}),this._map.scene.primitives.add(this._dynamicPrimitivesCollection),this._dynamicBillboardCollection=new u.A({scene:this._map.scene}),this._map.scene.primitives.add(this._dynamicBillboardCollection),this._cursorImage=(0,v.g7)(2*(null===(n=this._style)||void 0===n||null===(n=n.cursor)||void 0===n?void 0:n.radius),{stroke:"#ffffff",strokeWidth:null===(r=this._style)||void 0===r||null===(r=r.cursor)||void 0===r?void 0:r.width,fill:"rgba(0, 0, 0, 0)"}),this._coordinateNodeImage=(0,v.g7)(2*(null===(o=this._style)||void 0===o||null===(o=o.coordinatesNode)||void 0===o?void 0:o.radius),{stroke:"#ffffff",strokeWidth:null===(a=this._style)||void 0===a||null===(a=a.coordinatesNode)||void 0===a?void 0:a.width,fill:"rgba(0, 0, 0, 0.1)"}),this._onMouseMove=null!=i&&i.onMouseMove?i.onMouseMove:function(){},this._onDrawStart=null!=i&&i.onDrawStart?i.onDrawStart:function(){},this._onDrawing=null!=i&&i.onDrawing?i.onDrawing:function(){},this._onDrawEnd=null!=i&&i.onDrawEnd?i.onDrawEnd:function(){}},(i=[{key:"getCoordinates",value:function(){return this._coordinates}},{key:"remove",value:function(){var t;this._handler&&(this._handler.destroy(),this._handler=null),this._coordinates=[],this._drawing=!1,null!==(t=this._map)&&void 0!==t&&t.isDestroyed&&!this._map.isDestroyed()&&((0,v.IP)(this._map,this._dynamicPrimitivesCollection),this._dynamicPrimitivesCollection=null,(0,v.IP)(this._map,this._dynamicBillboardCollection),this._dynamicBillboardCollection=null)}},{key:"_getCoordinatesLength",value:function(){return"Circle"===this._type?2:this._coordinatesLength}},{key:"_handleMouseMove",value:function(t){var i=this,e=this._getPositionInfo(this._map,t,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(e)if("Point"===this._type&&this._sampleTerrain){var n,o,a;S(null===(n=this._map)||void 0===n?void 0:n.terrainProvider,null!==(o=null===(a=this._map)||void 0===a||null===(a=a.terrainProvider)||void 0===a?void 0:a.sampleTerrainZoomLevel)&&void 0!==o?o:18,[e]).then((function(t){var n;if(t){var o=A(t,1)[0],a=[r.A.toCartesian(o),e];n=(0,p._U)(a)*(0,p.Ht)(a),i._coordinates=a}else i._coordinates=[e];i._onMouseMove(i._drawPrimitives({distance:n,cartesian:e,coordinates:P(i._coordinates)}))}))}else{var s=this._coordinates[this._coordinates.length-1],l=[].concat(P(this._coordinates),[e]),c=(0,p.Vf)(l,void 0),d=(0,p.Ht)(l,this._geodesic);this._onMouseMove(this._drawPrimitives({area:c,distance:d,previousCartesian:s,cartesian:e,coordinates:l}))}}},{key:"_handleDrawStart",value:function(t){var i,e,n=this;if(!(this._drawing||this._forcedDrawEnd||null!==(i=this._handler)&&void 0!==i&&null!==(e=i.isDestroyed)&&void 0!==e&&e.call(i))){var o=P(this._coordinates);this._coordinates=[];var a=this._getPositionInfo(this._map,t,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;a&&(this._coordinates.push(a),"Point"===this._type?((this._sampleTerrain&&2!==o.length?function(){var t,i,e;return S(null===(t=n._map)||void 0===t?void 0:t.terrainProvider,null!==(i=null===(e=n._map)||void 0===e||null===(e=e.terrainProvider)||void 0===e?void 0:e.sampleTerrainZoomLevel)&&void 0!==i?i:18,[a]).then((function(t){if(t){var i=A(t,1)[0];return[r.A.toCartesian(i),a]}return[a]}))}:function(){return Promise.resolve(2===o.length?o:[a])})().then((function(t){n._onDrawStart(n._drawPrimitives({cartesian:t[t.length-1],coordinates:t,geodesicCoordinates:(0,p.qg)(t)})),n._onDrawEnd(n._clearPrimitive({coordinates:t,geodesicCoordinates:(0,p.qg)(t),feature:n._sampleTerrain&&2===t.length?M(n._type,t,{height:(0,p._U)(t)*(0,p.Ht)(t),heightUom:"m",terrainCoordinates:(0,p.Kf)(t[0]),geodesic:n._geodesic}):M(n._type,t,{geodesic:n._geodesic})}))})),this._coordinates=[]):(this._onDrawStart(this._drawPrimitives({cartesian:a,coordinates:P(this._coordinates),geodesicCoordinates:(0,p.qg)(this._coordinates)})),this._drawing=!0))}this._forcedDrawEnd&&(this._forcedDrawEnd=!1)}},{key:"_handleDrawing",value:function(t){if(this._drawing){if(this._coordinates.length+1===this._getCoordinatesLength())return this._forcedDrawEnd=!0,this._handleDrawEnd(t);var i=this._getPositionInfo(this._map,t,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(i){var e=this._coordinates[this._coordinates.length-1];this._coordinates.push(i);var n=P(this._coordinates),r=(0,p.Vf)(n,void 0),o=(0,p.Ht)(n,this._geodesic);this._onDrawing(this._drawPrimitives({area:r,distance:o,previousCartesian:e,cartesian:i,coordinates:P(this._coordinates),geodesicCoordinates:(0,p.qg)(this._coordinates)}))}}return null}},{key:"_handleDrawEnd",value:function(t,i){if(this._drawing){var e=this._getPositionInfo(this._map,t,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(i&&this._coordinates.splice(this._coordinates.length-2,2),this._coordinates.push(e),!function(t,i,e){if(e&&e!==i.length)return!1;switch(t){case"Point":case"LineString":default:return!0;case"Polygon":return i.length>2}}(this._type,P(this._coordinates),this._getCoordinatesLength()))return this._onDrawEnd(this._clearPrimitive({})),this._coordinates=[],this._drawing=!1,null;var n="Polygon"===this._type?[].concat(P(this._coordinates),[this._coordinates[0]]):P(this._coordinates),r=(0,p.Vf)(n,void 0),o=(0,p.Ht)(n,this._geodesic);this._onDrawEnd(this._clearPrimitive({area:r,distance:o,coordinates:n,geodesicCoordinates:(0,p.qg)(n),feature:M(this._type,n,{area:r,areaUom:"sqm",length:o,lengthUom:"m",geodesic:this._geodesic})})),this._coordinates=[],this._drawing=!1}return null}},{key:"_drawPrimitives",value:function(t){return this._style&&this._updateDynamicCoordinates(t.coordinates),t}},{key:"_clearPrimitive",value:function(t){return this._dynamicPrimitivesCollection.removeAll(),this._dynamicBillboardCollection.removeAll(),t}},{key:"_updateDynamicCoordinates",value:function(t){var i,e=this;switch(this._dynamicPrimitivesCollection.removeAll(),this._dynamicBillboardCollection.removeAll(),this._type){case"Point":if(this._geodesic){var n,r,o=(0,p.qg)(t);this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(n=this._style)||void 0===n?void 0:n.wireframe),{},{coordinates:[o[0],t[0]]}))),this._dynamicBillboardCollection.add({position:o[0],image:this._coordinateNodeImage,color:(0,v.Oe)(b({},null===(r=this._style)||void 0===r?void 0:r.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY})}break;case"Circle":if(t.length>1){var a=(0,p.Ht)(t,this._geodesic);if(this._geodesic){var s,l,c,d,u,h,f=(0,p.qg)(t,(function(t){var i;return null===(i=t[t.length-1])||void 0===i?void 0:i.height})),m=(0,p.qg)(t);this._dynamicPrimitivesCollection.add((0,v.wm)(b(b({},null===(s=this._style)||void 0===s?void 0:s.wireframe),{},{coordinates:f[0],radius:a,geodesic:!0}))),this._dynamicPrimitivesCollection.add((0,v.wm)(b(b({},null===(l=this._style)||void 0===l?void 0:l.lineDrawing),{},{coordinates:m[0],radius:a,geodesic:!0}))),this._dynamicBillboardCollection.add({position:t[0],image:this._coordinateNodeImage,color:(0,v.Oe)(b({},null===(c=this._style)||void 0===c?void 0:c.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicBillboardCollection.add({position:f[0],image:this._coordinateNodeImage,color:(0,v.Oe)(b({},null===(d=this._style)||void 0===d?void 0:d.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicBillboardCollection.add({position:m[0],image:this._coordinateNodeImage,color:(0,v.Oe)(b({},null===(u=this._style)||void 0===u?void 0:u.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(h=this._style)||void 0===h?void 0:h.wireframe),{},{geodesic:!0,coordinates:[t[0],m[0],m[1],f[1],f[0]]})))}else{var g,y;this._dynamicPrimitivesCollection.add((0,v.cp)(b(b({},null===(g=this._style)||void 0===g?void 0:g.lineDrawing),{},{coordinates:t[0],radius:a}))),this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(y=this._style)||void 0===y?void 0:y.wireframe),{},{coordinates:P(t)})))}}break;case"LineString":if(t.length>1)if(this._geodesic){var _,w,A=(0,p.qg)(t,(function(t){var i;return null===(i=t[t.length-1])||void 0===i?void 0:i.height})),O=(0,p.qg)(t);this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(_=this._style)||void 0===_?void 0:_.wireframe),{},{geodesic:this._geodesic,coordinates:P(A)}))),this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(w=this._style)||void 0===w?void 0:w.lineDrawing),{},{geodesic:this._geodesic,coordinates:P(O)}))),A.forEach((function(t,i){var n;e._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(n=e._style)||void 0===n?void 0:n.wireframe),{},{geodesic:e._geodesic,coordinates:[O[i],A[i]]})))}))}else{var T;this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(T=this._style)||void 0===T?void 0:T.lineDrawing),{},{coordinates:P(t)})))}break;case"Polygon":if(t.length>1)if(this._geodesic){var x,C,D,M=(0,p.qg)(t,(function(t){var i;return null===(i=t[t.length-1])||void 0===i?void 0:i.height})),S=(0,p.qg)(t);this._dynamicPrimitivesCollection.add((0,v.ge)(b(b({},null===(x=this._style)||void 0===x?void 0:x.areaDrawing),{},{geodesic:this._geodesic,coordinates:[].concat(P(S),[S[0]])}))),this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(C=this._style)||void 0===C?void 0:C.wireframe),{},{geodesic:this._geodesic,coordinates:[].concat(P(M),[M[0]])}))),this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(D=this._style)||void 0===D?void 0:D.lineDrawing),{},{geodesic:this._geodesic,coordinates:[].concat(P(S),[S[0]])}))),M.forEach((function(t,i){var n;e._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(n=e._style)||void 0===n?void 0:n.wireframe),{},{geodesic:e._geodesic,coordinates:[S[i],M[i]]})))}))}else{var E,j;this._dynamicPrimitivesCollection.add((0,v.ge)(b(b({},null===(E=this._style)||void 0===E?void 0:E.areaDrawing),{},{coordinates:P(t)}))),this._dynamicPrimitivesCollection.add((0,v.Qi)(b(b({},null===(j=this._style)||void 0===j?void 0:j.lineDrawing),{},{coordinates:P(t)})))}}t.length>0&&this._dynamicBillboardCollection.add({position:t[t.length-1],image:this._cursorImage,color:(0,v.Oe)(b({},null===(i=this._style)||void 0===i?void 0:i.cursor)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._map.scene.requestRender()}}])&&x(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i}();function j(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=Array(i);e<i;e++)n[e]=t[e];return n}const I=function(t){var i=t.map,e=t.active,r=t.geometryType,o=void 0===r?"LineString":r,a=t.geodesic,s=void 0!==a&&a,l=t.onDrawStart,c=void 0===l?function(){}:l,d=t.onDrawing,u=void 0===d?function(){}:d,h=t.onMouseMove,f=void 0===h?function(){}:h,m=t.onDrawEnd,v=void 0===m?function(){}:m,p=t.onInit,g=void 0===p?function(){}:p,y=t.onDestroy,_=void 0===y?function(){}:y,b=t.getObjectsToExcludeOnPick,w=t.depthTestAgainstTerrain,A=t.sampleTerrain,P=t.coordinatesLength,O=t.getPositionInfo,T=t.style,x=(0,n.useRef)();return(0,n.useEffect)((function(){return null!=i&&i.canvas&&e&&(g(),x.current=new E({map:i,type:o,coordinatesLength:P,getPositionInfo:O,getObjectsToExcludeOnPick:b,depthTestAgainstTerrain:w,style:T,geodesic:s,sampleTerrain:A,onDrawStart:c,onDrawing:u,onMouseMove:f,onDrawEnd:v})),function(){var t;x.current&&(_({coordinates:(t=x.current.getCoordinates(),function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return j(t,i);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),x.current.remove(),x.current=null)}}),[i,e,o,A,P,s]),null}},305493:(t,i,e)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function o(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?r(Object(e),!0).forEach((function(i){a(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function a(t,i,e){return(i=function(t){var i=function(t){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=n(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(i)?i:i+""}(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function s(t){return o({wireframe:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:.5},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#ff0000",width:2,radius:4},coordinatesNode:{color:"#333333",width:2,radius:5}},t)}e.d(i,{Nv:()=>c,Or:()=>d,zY:()=>s});var l=function(t){var i;return null==t||null===(i=t.geometry)||void 0===i?void 0:i.type},c=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).getGeometryType,i=void 0===t?l:t;return function(t){return o(o({},null==t?void 0:t.properties),{},{geometryType:i(t)})}},d=function(t,i){return o(o({},null==i?void 0:i.properties),void 0!==(null==t?void 0:t.radius)&&{radius:t.radius})}},770260:(t,i,e)=>{"use strict";e.d(i,{Ay:()=>l,hm:()=>s});var n=e(336946),r=e(491446),o=e(623e3),a=e(433052);function s(t,i){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).pickObjectsLimit,r=void 0===e?Number.MAX_VALUE:e,s=t.scene,l=t.camera,c=i.position||i.endPosition,d=s.pick(c),u=s.pickPosition(c);if(!((null==d?void 0:d.primitive)instanceof o.A)&&!((null==d?void 0:d.primitive)instanceof a.A)&&d&&u)return{cartesian:u,cartographic:n.A.fromCartesian(u),feature:d};var h,f=l.getPickRay(c),m=s.drillPickFromRay(f,r).find((function(t){var i=t.exclude,e=t.object,n=t.position;return!i&&n&&e}))||null;if(m)return{cartesian:m.position,cartographic:n.A.fromCartesian(m.position),feature:null==m||null===(h=m.object)||void 0===h?void 0:h.primitive};var v=s.globe.pick(f,s);return v?{cartesian:v,cartographic:n.A.fromCartesian(v)}:{}}const l={getMouseXYZ:function(t,i){var e=t.scene,o=i.position||i.endPosition;if(!o)return null;if(t.scene.drillPick(o).find((function(t){var i;return!(!1===(null==t||null===(i=t.id)||void 0===i||null===(i=i.entityCollection)||void 0===i||null===(i=i.owner)||void 0===i?void 0:i.queryable))}))){var a=e.globe.depthTestAgainstTerrain,s=e.pickTranslucentDepth;e.globe.depthTestAgainstTerrain=!0,e.pickTranslucentDepth=!0;var l=e.pickPosition(o);if(e.globe.depthTestAgainstTerrain=a,e.pickTranslucentDepth=s,l)return n.A.fromCartesian(l)}var c=t.camera.getPickRay(o),d=t.scene.globe.pick(c,t.scene),u=e._globe.ellipsoid;if(r.A(d)){var h=u.cartesianToCartographic(d),f=function(t,i){if(null!==i.position){var e=t.scene,n=e._globe.ellipsoid;return e.camera.pickEllipsoid(i.position||i.endPosition,n)}return null}(t,i);return f&&(h.height=e._globe.getHeight(h),h.cartesian=f,h.position=d),h}return null},getMouseTile:function(t,i){var e=t.scene;if(!i.position)return null;var n=t.camera.getPickRay(i.position);return t.scene.globe.pickTile(n,e)}}},762222:(t,i,e)=>{"use strict";e.d(i,{Ht:()=>b,Kf:()=>A,L8:()=>p,Lj:()=>m,Ot:()=>v,Q2:()=>g,TS:()=>f,Vf:()=>y,_U:()=>w,qg:()=>P});var n=e(267980),r=e(367817),o=e(434067),a=e(336946),s=e(602289),l=e(466570),c=e.n(l);function d(t,i){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},d(t,i)}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function h(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=Array(i);e<i;e++)n[e]=t[e];return n}function f(t,i){var e=n.A.subtract(i,t,new n.A),r=n.A.multiplyByScalar(e,.5,new n.A);return n.A.add(t,r,new n.A)}function m(t,i){var e=n.A.normalize(t,new n.A),o=n.A.normalize(i,new n.A),a=n.A.dot(e,o);return r.A.toDegrees(Math.acos(a))}function v(t){return t.map((function(i,e){var r=t[e-1],o=t[e+1];return r&&o?m(n.A.subtract(r,i,new n.A),n.A.subtract(o,i,new n.A)):null})).filter((function(t){return null!==t}))}function p(t){return new n.A((t[0].x+t[1].x+t[2].x)/3,(t[0].y+t[1].y+t[2].y)/3,(t[0].z+t[1].z+t[2].z)/3)}function g(t,i){return t.map((function(e,r){var o=t[r-1],a=t[r+1];if(o&&a){var s=function(t,i){var e=n.A.normalize(t,new n.A),r=n.A.normalize(i,new n.A);return n.A.cross(e,r,new n.A)}(n.A.subtract(o,e,new n.A),n.A.subtract(a,e,new n.A)),l=-Math.sign(n.A.dot(s,n.A.subtract(e,i,new n.A),new n.A));return m(n.A.multiplyByScalar(s,l,new n.A),e)}return null})).filter((function(t){return null!==t}))}function y(t,i){if((null==t?void 0:t.length)<3)return 0;for(var e=o.A.packArray(t),r=c()(e,i,2),a=0,s=0;s<r.length;s+=3){var l=t[r[s]],d=t[r[s+1]],u=t[r[s+2]],h=n.A.subtract(d,l,new n.A),f=n.A.subtract(u,l,new n.A),m=n.A.cross(h,f,new n.A);a+=n.A.magnitude(m)/2}return a}function _(t,i){var e,n=[t,i].map((function(t){return a.A.fromCartesian(t)}));return function(t,i,e){if(u())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,i);var r=new(t.bind.apply(t,n));return e&&d(r,e.prototype),r}(s.A,(e=n.map((function(t){var i=t.longitude,e=t.latitude;return new a.A(i,e,0)})),function(t){if(Array.isArray(t))return h(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,i){if(t){if("string"==typeof t)return h(t,i);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,i):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).surfaceDistance}function b(t,i){return(null==t?void 0:t.length)<2?0:t.reduce((function(e,r,o){return t[o-1]?e+(i?_(r,t[o-1]):n.A.distance(r,t[o-1])):e}),0)}function w(t){return Math.sign(a.A.fromCartesian(t[1]).height-a.A.fromCartesian(t[0]).height)}function A(t,i){var e=a.A.fromCartesian(t),n=e.longitude,o=e.latitude,s=e.height;return[r.A.toDegrees(n),r.A.toDegrees(o),null!=i?i:s]}function P(t,i){var e=t.map((function(t){return a.A.fromCartesian(t)})),n=i?i(e):0;return e.map((function(t){var i=t.longitude,e=t.latitude;return a.A.toCartesian(new a.A(i,e,n))}))}},935341:function(t){t.exports=function(){"use strict";function t(t,n,r,o,a){!function t(e,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,c=Math.log(s),d=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*d*(s-d)/s)*(l-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-l*d/s+u)),Math.min(o,Math.floor(n+(s-l)*d/s+u)),a)}var h=e[n],f=r,m=o;for(i(e,r,n),a(e[o],h)>0&&i(e,r,o);f<m;){for(i(e,f,m),f++,m--;a(e[f],h)<0;)f++;for(;a(e[m],h)>0;)m--}0===a(e[r],h)?i(e,r,m):i(e,++m,o),m<=n&&(r=m+1),n<=m&&(o=m-1)}}(t,n,r||0,o||t.length-1,a||e)}function i(t,i,e){var n=t[i];t[i]=t[e],t[e]=n}function e(t,i){return t<i?-1:t>i?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,i,e){if(!e)return i.indexOf(t);for(var n=0;n<i.length;n++)if(e(t,i[n]))return n;return-1}function o(t,i){a(t,0,t.children.length,i,t)}function a(t,i,e,n,r){r||(r=m(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=i;o<e;o++){var a=t.children[o];s(r,t.leaf?n(a):a)}return r}function s(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function d(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(i,e,n,r,o){for(var a=[e,n];a.length;)if(!((n=a.pop())-(e=a.pop())<=r)){var s=e+Math.ceil((n-e)/r/2)*r;t(i,s,e,n,o),a.push(e,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var i=this.data,e=[];if(!f(t,i))return e;for(var n=this.toBBox,r=[];i;){for(var o=0;o<i.children.length;o++){var a=i.children[o],s=i.leaf?n(a):a;f(t,s)&&(i.leaf?e.push(a):h(t,s)?this._all(a,e):r.push(a))}i=r.pop()}return e},n.prototype.collides=function(t){var i=this.data;if(!f(t,i))return!1;for(var e=[];i;){for(var n=0;n<i.children.length;n++){var r=i.children[n],o=i.leaf?this.toBBox(r):r;if(f(t,o)){if(i.leaf||h(t,o))return!0;e.push(r)}}i=e.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=m([]),this},n.prototype.remove=function(t,i){if(!t)return this;for(var e,n,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],e=c.pop(),o=!0),a.leaf){var d=r(t,a.children,i);if(-1!==d)return a.children.splice(d,1),l.push(a),this._condense(l),this}o||a.leaf||!h(a,s)?n?(e++,a=n.children[e],o=!1):a=null:(l.push(a),c.push(e),e=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,i){return t.minX-i.minX},n.prototype.compareMinY=function(t,i){return t.minY-i.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,i){for(var e=[];t;)t.leaf?i.push.apply(i,t.children):e.push.apply(e,t.children),t=e.pop();return i},n.prototype._build=function(t,i,e,n){var r,a=e-i+1,s=this._maxEntries;if(a<=s)return o(r=m(t.slice(i,e+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(r=m([])).leaf=!1,r.height=n;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));v(t,i,e,c,this.compareMinX);for(var d=i;d<=e;d+=c){var u=Math.min(d+c-1,e);v(t,d,u,l,this.compareMinY);for(var h=d;h<=u;h+=l){var f=Math.min(h+l-1,u);r.children.push(this._build(t,h,f,n-1))}}return o(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,i,e,n){for(;n.push(i),!i.leaf&&n.length-1!==e;){for(var r=1/0,o=1/0,a=void 0,s=0;s<i.children.length;s++){var l=i.children[s],c=d(l),u=(h=t,f=l,(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-c);u<o?(o=u,r=c<r?c:r,a=l):u===o&&c<r&&(r=c,a=l)}i=a||i.children[0]}var h,f;return i},n.prototype._insert=function(t,i,e){var n=e?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,i,r);for(o.children.push(t),s(o,n);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(n,r,i)},n.prototype._split=function(t,i){var e=t[i],n=e.children.length,r=this._minEntries;this._chooseSplitAxis(e,r,n);var a=this._chooseSplitIndex(e,r,n),s=m(e.children.splice(a,e.children.length-a));s.height=e.height,s.leaf=e.leaf,o(e,this.toBBox),o(s,this.toBBox),i?t[i-1].children.push(s):this._splitRoot(e,s)},n.prototype._splitRoot=function(t,i){this.data=m([t,i]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,i,e){for(var n,r,o,s,l,c,u,h=1/0,f=1/0,m=i;m<=e-i;m++){var v=a(t,0,m,this.toBBox),p=a(t,m,e,this.toBBox),g=(r=v,o=p,void 0,void 0,void 0,void 0,s=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),u=Math.min(r.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,u-l)),y=d(v)+d(p);g<h?(h=g,n=m,f=y<f?y:f):g===h&&y<f&&(f=y,n=m)}return n||e-i},n.prototype._chooseSplitAxis=function(t,i,e){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,e,n)<this._allDistMargin(t,i,e,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,i,e,n){t.children.sort(n);for(var r=this.toBBox,o=a(t,0,i,r),l=a(t,e-i,e,r),c=u(o)+u(l),d=i;d<e-i;d++){var h=t.children[d];s(o,t.leaf?r(h):h),c+=u(o)}for(var f=e-i-1;f>=i;f--){var m=t.children[f];s(l,t.leaf?r(m):m),c+=u(l)}return c},n.prototype._adjustParentBBoxes=function(t,i,e){for(var n=e;n>=0;n--)s(i[n],t)},n.prototype._condense=function(t){for(var i=t.length-1,e=void 0;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():o(t[i],this.toBBox)},n}()}}]);