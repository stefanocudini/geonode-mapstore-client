"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[51506],{952228:(e,r,t)=>{t.d(r,{A:()=>k});var n=t(45388),o=t.n(n),i=t(400912),u=t.n(i),a=t(509095),c=t(415392),l=t(621939),f=t(904059),y=t(307679),b=t(148936),p=t(434164),s=t(142974),v=t(636422),d=t(724188),m=t(486174);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,r){if(e){if("string"==typeof e)return S(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,r):void 0}}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){P(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function P(e,r,t){return(r=function(e){var r=function(e){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=g(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const k={accessMetadataExplorer:function(e,r){return e.ofType(a.lm).switchMap((function(){return o().Observable.of((0,c.fN)("metadataexplorer","enabled",!0),(0,a.bj)(!1),(0,a.XP)((0,m.Kz)(r.getState())),(0,l.Rt)("default_map_backgrounds"))}))},addBackgroundPropertiesEpic:function(e){return e.ofType(a.Nn).switchMap((function(e){var r,t=e.modalParams,n=o().Observable.of((0,a.Gh)(w(w({},t),{},{loading:!1}))),i=!t.editing&&(null==t||null===(r=t.layer)||void 0===r?void 0:r.remoteTileGrids);return t.layer&&"wms"===t.layer.type?o().Observable.of((0,a.Gh)(w(w({},t),{},{loading:!0}))).concat(o().Observable.forkJoin((0,p.aF)(t.layer),i?o().Observable.defer((function(){return(0,v.Q3)((0,d.ez)(t.layer),t.layer.name,t.layer)})).catch((function(){return o().Observable.of(null)})):o().Observable.of(null)).switchMap((function(e){var r,n,i=(n=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(r,n)||h(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0],c=i[1],l=c?(0,s.Pj)(c):{};return o().Observable.of((0,a.Gh)(w(w({},t),{},{layer:w(w({},t.layer),l),loading:!1,capabilities:(0,s.e9)(u)})))})).catch((function(){return n}))):n}))},setCurrentBackgroundLayerEpic:function(e,r){return e.ofType(a.kz).switchMap((function(e){var t,n=e.layerId,i=r.getState(),u=(0,y.pO)(i,n);return(t=o().Observable).of.apply(t,O(u&&"background"===u.group?[(0,c.fN)("backgroundSelector","tempLayer",u),(0,c.fN)("backgroundSelector","currentLayer",u)]:[]))}))},updateTempBackgroundLayerEpic:function(e,r){return e.ofType(a.kk).take(1).switchMap((function(t){var n=t.id;return e.ofType(f.rN).switchMap((function(){var e,t=r.getState(),i=(0,y.pO)(t,n);return(0,y.vm)(t).id===i.id?(e=o().Observable).of.apply(e,O(i&&"background"===i.group?[(0,c.fN)("backgroundSelector","tempLayer",i),(0,c.fN)("backgroundSelector","currentLayer",i)]:[])):o().Observable.of((0,c.fN)("backgroundSelector","tempLayer",i))}))}))},backgroundAddedEpic:function(e,r){return e.ofType(a.ct).mergeMap((function(e){var t=e.layerId,n=r.getState(),i=(0,y.pO)(n,t);return i?o().Observable.of((0,f.ju)(i.id,{visibility:!0}),(0,a.F8)(i.id),(0,a.Zb)()):o().Observable.empty()}))},backgroundEditedEpic:function(e,r){return e.ofType(a.HW).mergeMap((function(e){var t=e.layerId,n=r.getState();return(0,y.pO)(n,t)?o().Observable.of((0,a.Zb)()):o().Observable.empty()}))},backgroundRemovedEpic:function(e,r){return e.ofType(a.M_).mergeMap((function(e){var t=e.backgroundId,n=r.getState(),i=(0,y.pO)(n,t),c=(0,b.CD)(n)||[],l=(0,y.vm)(n)||{},p=t===l.id?u()(c.filter((function(e){return e.id!==t&&!e.invalid}))):l;return i?o().Observable.of((0,f.bf)(t,"layers"),(0,f.ju)(p.id,{visibility:!0}),(0,a.F8)(p.id)):o().Observable.empty()}))},syncSelectedBackgroundEpic:function(e){return e.ofType(a.bS).take(1).switchMap((function(r){var t=r.id;return e.ofType(f.Cl).filter((function(e){return e.layer.id===t})).switchMap((function(){return o().Observable.of((0,a.vB)(t))})).takeUntil(e.ofType(a.ct))}))}}},434164:(e,r,t)=>{t.d(r,{Cc:()=>g,aF:()=>m});var n=t(23412),o=t.n(n),i=(t(400912),t(155584)),u=t(45388),a=t(375482),c=t(995531),l=(t(764932),t(112585)),f=t(492312),y=t(584153),b=t(79738);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e,r,t){return(r=function(e){var r=function(e){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=p(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}i.default;var m=function(e){return u.Observable.defer((function(){return a.Ay.getCapabilities((0,l.wk)(e))})).let(f.m9).map((function(r){return a.Ay.parseLayerCapabilities(r,e)}))},g=function(e){return function(e){return u.Observable.defer((function(){return c.A.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.name,t=e.search,n=void 0===t?{}:t,i=e.url,u=o().parse((0,b.t)(n.url||i),!0);return o().format(v(v({},u),{},{search:void 0,query:v(v({},u.query),{},{service:"WMS",version:a.j0,layers:r,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(f.m9)}(e).map((function(e){var r=e.data,t=void 0===r?{}:r;return t&&t.layerDescriptions[0]})).map((function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return v(v({},e),{},{params:{},search:r?{type:"wfs",url:(0,y.o_)(r)}:void 0})}))}},97401:(e,r,t)=>{t.d(r,{MA:()=>w,SU:()=>S,iS:()=>d,lU:()=>O,o:()=>v,o7:()=>m,si:()=>j,tV:()=>h,u$:()=>s,wd:()=>g});var n=t(400912),o=t.n(n),i=t(150104),u=t.n(i),a=t(131127),c=t(6683),l=t(779893);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r,t){return(r=function(e){var r=function(e){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=f(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},v=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},d=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},m=u()((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=s(e),o=d(e);return n&&Object.keys(n).filter((function(e){return r[e]})).reduce((function(e,r){var i;return b(b({},e),{},p({},r,t&&null!==(i=o[r])&&void 0!==i?i:n[r]))}),{})||{}}),(function(e,r,t){return JSON.stringify(s(e))+JSON.stringify(d(e))+JSON.stringify(r)+(t?"_isDock":"")})),g=function(e){var r;return!(null===(r=s(e))||void 0===r||!r.rightPanel)},O=function(e){var r,t=l.Ay.getConfigProp("mapLayout")||c.OH;return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=s(e);return!!o()(r.filter((function(e){return t[e.key]})).map((function(e){return"not"===e.type?t[e.key]!==e.value&&t[e.key]:t[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(r=null==t?void 0:t.bottom.sm)&&void 0!==r?r:0,type:"not"}])},h=function(e){var r=(0,a.mg)(e),t=v(e);return t&&r&&r.size&&{left:(0,c.n_)(t.left,r.size.width),bottom:(0,c.n_)(t.bottom,r.size.height),right:(0,c.n_)(t.right,r.size.width),top:(0,c.n_)(t.top,r.size.height)}},S=function(e){var r,t;return null!==(r=null==e||null===(t=e.maplayout)||void 0===t?void 0:t.dockPanels)&&void 0!==r?r:{left:[],right:[]}},j=function(e){return m(e,{height:!0,right:!0},!0)},w=function(e){return m(e,{right:!0},!0)}}}]);