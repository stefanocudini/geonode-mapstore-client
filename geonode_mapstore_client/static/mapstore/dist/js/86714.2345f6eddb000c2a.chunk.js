/*! For license information please see 86714.2345f6eddb000c2a.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86714],{391651:(e,t,n)=>{const{webm:i,mp4:o}=n(490427),r=()=>"undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,a=()=>"wakeLock"in navigator;e.exports=class{constructor(){if(this.enabled=!1,a()){this._wakeLock=null;const e=()=>{null!==this._wakeLock&&"visible"===document.visibilityState&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else r()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",i),this._addSourceToVideo(this.noSleepVideo,"mp4",o),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,t,n){var i=document.createElement("source");i.src=n,i.type=`video/${t}`,e.appendChild(i)}get isEnabled(){return this.enabled}enable(){return a()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e}):r()?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(e=>(this.enabled=!0,e)).catch(e=>{throw this.enabled=!1,e})}disable(){a()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):r()?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}},490427:e=>{e.exports={webm:"data:video/webm;base64,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",mp4:"data:video/mp4;base64,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"}},794282:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({XTRANSLATE:"xTranslate",YTRANSLATE:"yTranslate",ZTRANSLATE:"zTranslate",XROTATE:"xRotate",YROTATE:"yRotate",ZROTATE:"zRotate",XSCALE:"xScale",YSCALE:"yScale",ZSCALE:"zScale",UNIFORMSCALE:"uniformScale"})},854894:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(660662),o=n(267980),r=n(369031),a=n(571804),s=n(915325),A=n(491446),c=n(605971),l=n(944479),u=n(305439),d=n(46362),h=n(794554),g=n(402330);const f=new o.A;function p(e){const t=(e=e??s.A.EMPTY_OBJECT).minimum,n=e.maximum;if(r.A.typeOf.object("min",t),r.A.typeOf.object("max",n),(0,A.A)(e.offsetAttribute)&&e.offsetAttribute===h.A.TOP)throw new c.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._min=o.A.clone(t),this._max=o.A.clone(n),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}p.fromDimensions=function(e){const t=(e=e??s.A.EMPTY_OBJECT).dimensions;r.A.typeOf.object("dimensions",t),r.A.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),r.A.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),r.A.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=o.A.multiplyByScalar(t,.5,new o.A);return new p({minimum:o.A.negate(n,new o.A),maximum:n,offsetAttribute:e.offsetAttribute})},p.fromAxisAlignedBoundingBox=function(e){return r.A.typeOf.object("boundindBox",e),new p({minimum:e.minimum,maximum:e.maximum})},p.packedLength=2*o.A.packedLength+1,p.pack=function(e,t,n){return r.A.typeOf.object("value",e),r.A.defined("array",t),n=n??0,o.A.pack(e._min,t,n),o.A.pack(e._max,t,n+o.A.packedLength),t[n+2*o.A.packedLength]=e._offsetAttribute??-1,t};const m=new o.A,_=new o.A,I={minimum:m,maximum:_,offsetAttribute:void 0};p.unpack=function(e,t,n){r.A.defined("array",e),t=t??0;const i=o.A.unpack(e,t,m),a=o.A.unpack(e,t+o.A.packedLength,_),s=e[t+2*o.A.packedLength];return(0,A.A)(n)?(n._min=o.A.clone(i,n._min),n._max=o.A.clone(a,n._max),n._offsetAttribute=-1===s?void 0:s,n):(I.offsetAttribute=-1===s?void 0:s,new p(I))},p.createGeometry=function(e){const t=e._min,n=e._max;if(o.A.equals(t,n))return;const r=new d.A,s=new Uint16Array(24),c=new Float64Array(24);c[0]=t.x,c[1]=t.y,c[2]=t.z,c[3]=n.x,c[4]=t.y,c[5]=t.z,c[6]=n.x,c[7]=n.y,c[8]=t.z,c[9]=t.x,c[10]=n.y,c[11]=t.z,c[12]=t.x,c[13]=t.y,c[14]=n.z,c[15]=n.x,c[16]=t.y,c[17]=n.z,c[18]=n.x,c[19]=n.y,c[20]=n.z,c[21]=t.x,c[22]=n.y,c[23]=n.z,r.position=new u.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:c}),s[0]=4,s[1]=5,s[2]=5,s[3]=6,s[4]=6,s[5]=7,s[6]=7,s[7]=4,s[8]=0,s[9]=1,s[10]=1,s[11]=2,s[12]=2,s[13]=3,s[14]=3,s[15]=0,s[16]=0,s[17]=4,s[18]=1,s[19]=5,s[20]=2,s[21]=6,s[22]=3,s[23]=7;const p=o.A.subtract(n,t,f),m=.5*o.A.magnitude(p);if((0,A.A)(e._offsetAttribute)){const t=c.length,n=e._offsetAttribute===h.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);r.applyOffset=new u.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new l.A({attributes:r,indices:s,primitiveType:g.A.LINES,boundingSphere:new i.A(o.A.ZERO,m),offsetAttribute:e._offsetAttribute})};const E=p},564453:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(961645),o=n(660662),r=n(267980),a=n(369031),s=n(672743),A=n(915325),c=n(491446),l=n(610750),u=n(955943),d=n(182348),h=n(41076),g=n(604752),f=n(165755),p=n(874915),m=n(954865),_=n(832698),I=n(589670),E=n(209202),y=n(307898),C=n(744603),b=n(123245),B=n(98055),v=n(862892),w=n(705302);function T(e){this.resource=e.resource,this.version=e.version,this.isHeightmap=e.isHeightmap,this.tileUrlTemplates=e.tileUrlTemplates,this.availability=e.availability,this.hasVertexNormals=e.hasVertexNormals,this.hasWaterMask=e.hasWaterMask,this.hasMetadata=e.hasMetadata,this.availabilityLevels=e.availabilityLevels,this.availabilityTilesLoaded=e.availabilityTilesLoaded,this.littleEndianExtensionSize=e.littleEndianExtensionSize,this.availabilityPromiseCache={}}function S(e){this.requestVertexNormals=e.requestVertexNormals??!1,this.requestWaterMask=e.requestWaterMask??!1,this.requestMetadata=e.requestMetadata??!0,this.ellipsoid=e.ellipsoid??l.A.default,this.heightmapWidth=65,this.heightmapStructure=void 0,this.hasWaterMask=!1,this.hasMetadata=!1,this.hasVertexNormals=!1,this.scheme=void 0,this.lastResource=void 0,this.layerJsonResource=void 0,this.previousError=void 0,this.availability=void 0,this.tilingScheme=void 0,this.levelZeroMaximumGeometricError=void 0,this.heightmapStructure=void 0,this.layers=[],this.attribution="",this.overallAvailability=[],this.overallMaxZoom=0,this.tileCredits=[]}async function x(e,t,n){if(!t.format){const t="The tile format is not specified in the layer.json file.";throw e.previousError=w.A.reportError(e.previousError,n,(0,c.A)(n)?n._errorEvent:void 0,t),new b.A(t)}if(!t.tiles||0===t.tiles.length){const t="The layer.json file does not specify any tile URL templates.";throw e.previousError=w.A.reportError(e.previousError,n,(0,c.A)(n)?n._errorEvent:void 0,t),new b.A(t)}let i=!1,o=!1,r=!1,a=!0,s=!1;if("heightmap-1.0"===t.format)s=!0,(0,c.A)(e.heightmapStructure)||(e.heightmapStructure={heightScale:.2,heightOffset:-1e3,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:65535}),o=!0,e.requestWaterMask=!0;else if(0!==t.format.indexOf("quantized-mesh-1.")){const i=`The tile format "${t.format}" is invalid or not supported.`;throw e.previousError=w.A.reportError(e.previousError,n,(0,c.A)(n)?n._errorEvent:void 0,i),new b.A(i)}const A=t.tiles,l=t.maxzoom;if(e.overallMaxZoom=Math.max(e.overallMaxZoom,l),t.projection&&"EPSG:4326"!==t.projection){if("EPSG:3857"!==t.projection){const i=`The projection "${t.projection}" is invalid or not supported.`;throw e.previousError=w.A.reportError(e.previousError,n,(0,c.A)(n)?n._errorEvent:void 0,i),new b.A(i)}e.tilingScheme=new h.A({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid})}else e.tilingScheme=new d.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});if(e.levelZeroMaximumGeometricError=B.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.heightmapWidth,e.tilingScheme.getNumberOfXTilesAtLevel(0)),t.scheme&&"tms"!==t.scheme&&"slippyMap"!==t.scheme){const i=`The scheme "${t.scheme}" is invalid or not supported.`;throw e.previousError=w.A.reportError(e.previousError,n,(0,c.A)(n)?n._errorEvent:void 0,i),new b.A(i)}let u;e.scheme=t.scheme,(0,c.A)(t.extensions)&&-1!==t.extensions.indexOf("octvertexnormals")?i=!0:(0,c.A)(t.extensions)&&-1!==t.extensions.indexOf("vertexnormals")&&(i=!0,a=!1),(0,c.A)(t.extensions)&&-1!==t.extensions.indexOf("watermask")&&(o=!0),(0,c.A)(t.extensions)&&-1!==t.extensions.indexOf("metadata")&&(r=!0);const g=t.metadataAvailability,f=t.available;let p;if((0,c.A)(f)&&!(0,c.A)(g)){p=new v.A(e.tilingScheme,f.length);for(let t=0;t<f.length;++t){const n=f[t],i=e.tilingScheme.getNumberOfYTilesAtLevel(t);(0,c.A)(e.overallAvailability[t])||(e.overallAvailability[t]=[]);for(let o=0;o<n.length;++o){const r=n[o],a=i-r.endY-1,s=i-r.startY-1;e.overallAvailability[t].push([r.startX,a,r.endX,s]),p.addAvailableTileRange(t,r.startX,a,r.endX,s)}}}else(0,c.A)(g)&&(u=new v.A(e.tilingScheme,l),p=new v.A(e.tilingScheme,l),e.overallAvailability[0]=[[0,0,1,0]],p.addAvailableTileRange(0,0,0,1,0));e.hasWaterMask=e.hasWaterMask||o,e.hasVertexNormals=e.hasVertexNormals||i,e.hasMetadata=e.hasMetadata||r,(0,c.A)(t.attribution)&&(e.attribution.length>0&&(e.attribution+=" "),e.attribution+=t.attribution),e.layers.push(new T({resource:e.lastResource,version:t.version,isHeightmap:s,tileUrlTemplates:A,availability:p,hasVertexNormals:i,hasWaterMask:o,hasMetadata:r,availabilityLevels:g,availabilityTilesLoaded:u,littleEndianExtensionSize:a}));const m=t.parentUrl;return!(0,c.A)(m)||((0,c.A)(p)?(e.lastResource=e.lastResource.getDerivedResource({url:m}),e.lastResource.appendForwardSlash(),e.layerJsonResource=e.lastResource.getDerivedResource({url:"layer.json"}),await D(e),!0):(console.log("A layer.json can't have a parentUrl if it does't have an available array."),!0))}async function D(e,t){try{const n=await e.layerJsonResource.fetchJson();return async function(e,t,n){await x(e,t,n);const i=e.overallAvailability.length;if(i>0){const t=e.availability=new v.A(e.tilingScheme,e.overallMaxZoom);for(let n=0;n<i;++n){const i=e.overallAvailability[n];for(let e=0;e<i.length;++e){const o=i[e];t.addAvailableTileRange(n,o[0],o[1],o[2],o[3])}}}if(e.attribution.length>0){const t=new s.A(e.attribution);e.tileCredits.push(t)}return!0}(e,n,t)}catch(n){return(0,c.A)(n)&&404===n.statusCode?(await x(e,{tilejson:"2.1.0",format:"heightmap-1.0",version:"1.0.0",scheme:"tms",tiles:["{z}/{x}/{y}.terrain?v={version}"]},t),!0):function(e,t,n){let i=`An error occurred while accessing ${e.layerJsonResource.url}.`;if((0,c.A)(t)&&(i+=`\n${t.message}`),e.previousError=w.A.reportError(e.previousError,n,(0,c.A)(n)?n._errorEvent:void 0,i),e.previousError.retry)return D(e,n);throw new b.A(i)}(e,n,t)}}function Q(e){e=e??A.A.EMPTY_OBJECT,this._heightmapWidth=void 0,this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._hasMetadata=!1,this._scheme=void 0,this._ellipsoid=e.ellipsoid,this._requestVertexNormals=e.requestVertexNormals??!1,this._requestWaterMask=e.requestWaterMask??!1,this._requestMetadata=e.requestMetadata??!0,this._errorEvent=new u.A;let t=e.credit;"string"==typeof t&&(t=new s.A(t)),this._credit=t,this._availability=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._layers=void 0,this._tileCredits=void 0}S.prototype.build=function(e){e._heightmapWidth=this.heightmapWidth,e._scheme=this.scheme;const t=(0,c.A)(this.lastResource.credits)?this.lastResource.credits:[];e._tileCredits=t.concat(this.tileCredits),e._availability=this.availability,e._tilingScheme=this.tilingScheme,e._requestWaterMask=this.requestWaterMask,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._heightmapStructure=this.heightmapStructure,e._layers=this.layers,e._hasWaterMask=this.hasWaterMask,e._hasVertexNormals=this.hasVertexNormals,e._hasMetadata=this.hasMetadata};function N(e){return(0,c.A)(e)&&0!==e.length?{Accept:`application/vnd.quantized-mesh;extensions=${e.join("-")},application/octet-stream;q=0.9,*/*;q=0.01`}:{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9,*/*;q=0.01"}}function R(e,t,n,a,s,A){if(!(0,c.A)(s))return Promise.reject(new b.A("Terrain tile doesn't exist"));const l=s.tileUrlTemplates;if(0===l.length)return;let u;u=e._scheme&&"tms"!==e._scheme?n:e._tilingScheme.getNumberOfYTilesAtLevel(a)-n-1;const d=[];let h,m;e._requestVertexNormals&&s.hasVertexNormals&&d.push(s.littleEndianExtensionSize?"octvertexnormals":"vertexnormals"),e._requestWaterMask&&s.hasWaterMask&&d.push("watermask"),e._requestMetadata&&s.hasMetadata&&d.push("metadata");const E=l[(t+u+a)%l.length],y=s.resource;(0,c.A)(y._ionEndpoint)&&!(0,c.A)(y._ionEndpoint.externalType)?(0!==d.length&&(m={extensions:d.join("-")}),h=N(void 0)):h=N(d);const C=y.getDerivedResource({url:E,templateValues:{version:s.version,z:a,x:t,y:u},queryParameters:m,headers:h,request:A}).fetchArrayBuffer();return(0,c.A)(C)?C.then(function(A){return(0,c.A)(A)?(0,c.A)(e._heightmapStructure)?function(e,t){const n=new Uint16Array(t,0,e._heightmapWidth*e._heightmapWidth);return new f.A({buffer:n,childTileMask:new Uint8Array(t,n.byteLength,1)[0],waterMask:new Uint8Array(t,n.byteLength+1,t.byteLength-n.byteLength-1),width:e._heightmapWidth,height:e._heightmapWidth,structure:e._heightmapStructure,credits:e._tileCredits})}(e,A):function(e,t,n,a,s,A){const l=A.littleEndianExtensionSize;let u=0;const d=3*Float64Array.BYTES_PER_ELEMENT,h=4*Float64Array.BYTES_PER_ELEMENT,f=3*Uint16Array.BYTES_PER_ELEMENT;let m=Uint16Array.BYTES_PER_ELEMENT,E=3*m;const y=new DataView(t),C=new r.A(y.getFloat64(u,!0),y.getFloat64(u+8,!0),y.getFloat64(u+16,!0));u+=d;const b=y.getFloat32(u,!0);u+=Float32Array.BYTES_PER_ELEMENT;const B=y.getFloat32(u,!0);u+=Float32Array.BYTES_PER_ELEMENT;const v=new o.A(new r.A(y.getFloat64(u,!0),y.getFloat64(u+8,!0),y.getFloat64(u+16,!0)),y.getFloat64(u+d,!0));u+=h;const w=new r.A(y.getFloat64(u,!0),y.getFloat64(u+8,!0),y.getFloat64(u+16,!0));u+=d;const T=y.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;const S=new Uint16Array(t,u,3*T);u+=T*f,T>65536&&(m=Uint32Array.BYTES_PER_ELEMENT,E=3*m);const x=S.subarray(0,T),D=S.subarray(T,2*T),Q=S.subarray(2*T,3*T);i.A.zigZagDeltaDecode(x,D,Q),u%m!==0&&(u+=m-u%m);const N=y.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;const R=p.A.createTypedArrayFromArrayBuffer(T,t,u,3*N);u+=N*E;let M=0;const L=R.length;for(let e=0;e<L;++e){const t=R[e];R[e]=M-t,0===t&&++M}const P=y.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;const O=p.A.createTypedArrayFromArrayBuffer(T,t,u,P);u+=P*m;const F=y.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;const U=p.A.createTypedArrayFromArrayBuffer(T,t,u,F);u+=F*m;const k=y.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;const G=p.A.createTypedArrayFromArrayBuffer(T,t,u,k);u+=k*m;const H=y.getUint32(u,!0);u+=Uint32Array.BYTES_PER_ELEMENT;const V=p.A.createTypedArrayFromArrayBuffer(T,t,u,H);let z,j;for(u+=H*m;u<y.byteLength;){const i=y.getUint8(u,!0);u+=Uint8Array.BYTES_PER_ELEMENT;const o=y.getUint32(u,l);if(u+=Uint32Array.BYTES_PER_ELEMENT,1===i&&e._requestVertexNormals)z=new Uint8Array(t,u,2*T);else if(2===i&&e._requestWaterMask)j=new Uint8Array(t,u,o);else if(4===i&&e._requestMetadata){const i=y.getUint32(u,!0);if(i>0){const o=(0,g.A)(new Uint8Array(t),u+Uint32Array.BYTES_PER_ELEMENT,i).available;if((0,c.A)(o))for(let t=0;t<o.length;++t){const i=n+t+1,r=o[t],a=e._tilingScheme.getNumberOfYTilesAtLevel(i);for(let t=0;t<r.length;++t){const n=r[t],o=a-n.endY-1,s=a-n.startY-1;e.availability.addAvailableTileRange(i,n.startX,o,n.endX,s),A.availability.addAvailableTileRange(i,n.startX,o,n.endX,s)}}}A.availabilityTilesLoaded.addAvailableTileRange(n,a,s,a,s)}u+=o}const Y=5*e.getLevelMaximumGeometricError(n),q=e._tilingScheme.tileXYToRectangle(a,s,n),W=_.A.fromRectangle(q,b,B,e._tilingScheme.ellipsoid);return new I.A({center:C,minimumHeight:b,maximumHeight:B,boundingSphere:v,orientedBoundingBox:W,horizonOcclusionPoint:w,quantizedVertices:S,encodedNormals:z,indices:R,westIndices:O,southIndices:U,eastIndices:G,northIndices:V,westSkirtHeight:Y,southSkirtHeight:Y,eastSkirtHeight:Y,northSkirtHeight:Y,childTileMask:e.availability.computeChildMaskForTile(n,a,s),waterMask:j,credits:e._tileCredits})}(e,A,a,t,n,s):Promise.reject(new b.A("Mesh buffer doesn't exist."))}):void 0}function M(e,t,n,i){if(0===i)return;const o=e.availabilityLevels,r=i%o===0?i-o:(i/o|0)*o,a=1<<i-r;return{level:r,x:t/a|0,y:n/a|0}}function L(e,t,n,i,o,r){if(!(0,c.A)(o.availabilityLevels))return{result:!1};let a;const s=function(){delete o.availabilityPromiseCache[a]},A=o.availabilityTilesLoaded,l=o.availability;let u=M(o,t,n,i);for(;(0,c.A)(u);){if(l.isTileAvailable(u.level,u.x,u.y)&&!A.isTileAvailable(u.level,u.x,u.y)){let t;if(!r&&(a=`${u.level}-${u.x}-${u.y}`,t=o.availabilityPromiseCache[a],!(0,c.A)(t))){const n=new E.A({throttle:!1,throttleByServer:!0,type:y.A.TERRAIN});t=R(e,u.x,u.y,u.level,o,n),(0,c.A)(t)&&(o.availabilityPromiseCache[a]=t,t.then(s))}return{result:!0,promise:t}}u=M(o,u.x,u.y,u.level)}return{result:!1}}Q.prototype.requestTileGeometry=function(e,t,n,i){const o=this._layers;let r;const a=o.length;let s=!1,A=Promise.resolve();if(1===a)r=o[0];else for(let i=0;i<a;++i){const a=o[i];if(!(0,c.A)(a.availability)||a.availability.isTileAvailable(n,e,t)){r=a;break}const l=L(this,e,t,n,a,0===i);l.result&&(s=!0,A=A.then(()=>l.promise))}return!(0,c.A)(r)&&s?A.then(()=>new Promise(o=>{setTimeout(()=>{const r=this.requestTileGeometry(e,t,n,i);o(r)},0)})):R(this,e,t,n,r,i)},Object.defineProperties(Q.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},hasWaterMask:{get:function(){return this._hasWaterMask&&this._requestWaterMask}},hasVertexNormals:{get:function(){return this._hasVertexNormals&&this._requestVertexNormals}},hasMetadata:{get:function(){return this._hasMetadata&&this._requestMetadata}},requestVertexNormals:{get:function(){return this._requestVertexNormals}},requestWaterMask:{get:function(){return this._requestWaterMask}},requestMetadata:{get:function(){return this._requestMetadata}},availability:{get:function(){return this._availability}}}),Q.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},Q.fromIonAssetId=async function(e,t){a.A.defined("assetId",e);const n=await m.A.fromAssetId(e);return Q.fromUrl(n,t)},Q.fromUrl=async function(e,t){a.A.defined("url",e),t=t??A.A.EMPTY_OBJECT,e=await Promise.resolve(e);const n=C.A.createIfNeeded(e);n.appendForwardSlash();const i=new S(t);i.lastResource=n,i.layerJsonResource=i.lastResource.getDerivedResource({url:"layer.json"}),await D(i);const o=new Q(t);return i.build(o),o},Q.prototype.getTileDataAvailable=function(e,t,n){if(!(0,c.A)(this._availability))return;if(n>this._availability._maximumLevel)return!1;if(this._availability.isTileAvailable(n,e,t))return!0;if(!this._hasMetadata)return!1;const i=this._layers,o=i.length;for(let r=0;r<o;++r)if(L(this,e,t,n,i[r],0===r).result)return;return!1},Q.prototype.loadTileDataAvailability=function(e,t,n){if(!(0,c.A)(this._availability)||n>this._availability._maximumLevel||this._availability.isTileAvailable(n,e,t)||!this._hasMetadata)return;const i=this._layers,o=i.length;for(let r=0;r<o;++r){const o=L(this,e,t,n,i[r],0===r);if((0,c.A)(o.promise))return o.promise}},Q._getAvailabilityTile=M;const P=Q},565801:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(687536),o=n(945395),r=n(915325),a=n(491446),s=n(605971),A=n(955943),c=n(230259),l=n(591978);function u(e){let t=(e=e??r.A.EMPTY_OBJECT).currentTime,n=e.startTime,u=e.stopTime;if(t=(0,a.A)(t)?l.A.clone(t):(0,a.A)(n)?l.A.clone(n):(0,a.A)(u)?l.A.addDays(u,-1,new l.A):l.A.now(),n=(0,a.A)(n)?l.A.clone(n):l.A.clone(t),u=(0,a.A)(u)?l.A.clone(u):l.A.addDays(n,1,new l.A),l.A.greaterThan(n,u))throw new s.A("startTime must come before stopTime.");this.startTime=n,this.stopTime=u,this.clockRange=e.clockRange??i.A.UNBOUNDED,this.canAnimate=e.canAnimate??!0,this.onTick=new A.A,this.onStop=new A.A,this._currentTime=void 0,this._multiplier=void 0,this._clockStep=void 0,this._shouldAnimate=void 0,this._lastSystemTime=(0,c.A)(),this.currentTime=t,this.multiplier=e.multiplier??1,this.shouldAnimate=e.shouldAnimate??!1,this.clockStep=e.clockStep??o.A.SYSTEM_CLOCK_MULTIPLIER}Object.defineProperties(u.prototype,{currentTime:{get:function(){return this._currentTime},set:function(e){l.A.equals(this._currentTime,e)||(this._clockStep===o.A.SYSTEM_CLOCK&&(this._clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER),this._currentTime=e)}},multiplier:{get:function(){return this._multiplier},set:function(e){this._multiplier!==e&&(this._clockStep===o.A.SYSTEM_CLOCK&&(this._clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER),this._multiplier=e)}},clockStep:{get:function(){return this._clockStep},set:function(e){e===o.A.SYSTEM_CLOCK&&(this._multiplier=1,this._shouldAnimate=!0,this._currentTime=l.A.now()),this._clockStep=e}},shouldAnimate:{get:function(){return this._shouldAnimate},set:function(e){this._shouldAnimate!==e&&(this._clockStep===o.A.SYSTEM_CLOCK&&(this._clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER),this._shouldAnimate=e)}}}),u.prototype.tick=function(){const e=(0,c.A)();let t=l.A.clone(this._currentTime);if(this.canAnimate&&this._shouldAnimate){const n=this._clockStep;if(n===o.A.SYSTEM_CLOCK)t=l.A.now(t);else{const r=this._multiplier;if(n===o.A.TICK_DEPENDENT)t=l.A.addSeconds(t,r,t);else{const n=e-this._lastSystemTime;t=l.A.addSeconds(t,r*(n/1e3),t)}const a=this.clockRange,s=this.startTime,A=this.stopTime;if(a===i.A.CLAMPED)l.A.lessThan(t,s)?t=l.A.clone(s,t):l.A.greaterThan(t,A)&&(t=l.A.clone(A,t),this.onStop.raiseEvent(this));else if(a===i.A.LOOP_STOP)for(l.A.lessThan(t,s)&&(t=l.A.clone(s,t));l.A.greaterThan(t,A);)t=l.A.addSeconds(s,l.A.secondsDifference(t,A),t),this.onStop.raiseEvent(this)}}return this._currentTime=t,this._lastSystemTime=e,this.onTick.raiseEvent(this),t};const d=u},687536:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2})},945395:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2})},931806:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(605971),r=n(437266);function a(e){this._value=e,this._valueType=r.A.getPointType(e)}Object.defineProperties(a.prototype,{value:{get:function(){return this._value}}}),a.prototype.findTimeInterval=function(e){throw new o.A("findTimeInterval cannot be called on a ConstantSpline.")},a.prototype.wrapTime=function(e){return i.A.typeOf.number("time",e),0},a.prototype.clampTime=function(e){return i.A.typeOf.number("time",e),0},a.prototype.evaluate=function(e,t){i.A.typeOf.number("time",e);const n=this._value,o=this._valueType;return o===Number?n:o.clone(n,t)};const s=a},594647:(e,t,n)=>{"use strict";n.d(t,{A:()=>Y});var i=n(263604),o=n(647934),r=n(660662),a=n(434067),s=n(267980),A=n(369031),c=n(571804),l=n(246520),u=n(915325),d=n(491446),h=n(610750),g=n(944479),f=n(305439),p=n(46362),m=n(75200),_=n(34233),I=n(874915),E=n(367817),y=n(331185),C=n(71694),b=n(576770),B=n(402330),v=n(99479),w=n(769534);const T=new s.A,S=new o.A,x=new a.A,D=new a.A,Q=new s.A,N=new s.A,R=new s.A,M=new s.A,L=new s.A,P=new s.A,O=new v.A,F=new y.A,U=new y.A,k=new s.A;function G(e,t,n,i,o,r,A,l,u){const h=e.positions;let m=b.A.triangulate(e.positions2D,e.holes);m.length<3&&(m=[0,1,2]);const _=I.A.createTypedArray(h.length,m.length);_.set(m);let C=F;if(0!==i){let e=v.A.fromAxisAngle(A,i,O);if(C=y.A.fromQuaternion(e,C),t.tangent||t.bitangent){e=v.A.fromAxisAngle(A,-i,O);const n=y.A.fromQuaternion(e,U);l=s.A.normalize(y.A.multiplyByVector(n,l,l),l),t.bitangent&&(u=s.A.normalize(s.A.cross(A,l,u),u))}}else C=y.A.clone(y.A.IDENTITY,C);const w=D;t.st&&(w.x=n.x,w.y=n.y);const S=h.length,Q=3*S,N=new Float64Array(Q),R=t.normal?new Float32Array(Q):void 0,M=t.tangent?new Float32Array(Q):void 0,L=t.bitangent?new Float32Array(Q):void 0,P=t.st?new Float32Array(2*S):void 0;let k=0,G=0,H=0,V=0,z=0;for(let e=0;e<S;e++){const i=h[e];if(N[k++]=i.x,N[k++]=i.y,N[k++]=i.z,t.st)if((0,d.A)(o)&&o.positions.length===S)P[z++]=o.positions[e].x,P[z++]=o.positions[e].y;else{const e=r(y.A.multiplyByVector(C,i,T),x);a.A.subtract(e,w,e);const t=E.A.clamp(e.x/n.width,0,1),o=E.A.clamp(e.y/n.height,0,1);P[z++]=t,P[z++]=o}t.normal&&(R[G++]=A.x,R[G++]=A.y,R[G++]=A.z),t.tangent&&(M[V++]=l.x,M[V++]=l.y,M[V++]=l.z),t.bitangent&&(L[H++]=u.x,L[H++]=u.y,L[H++]=u.z)}const j=new p.A;return t.position&&(j.position=new f.A({componentDatatype:c.A.DOUBLE,componentsPerAttribute:3,values:N})),t.normal&&(j.normal=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:R})),t.tangent&&(j.tangent=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:M})),t.bitangent&&(j.bitangent=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:3,values:L})),t.st&&(j.st=new f.A({componentDatatype:c.A.FLOAT,componentsPerAttribute:2,values:P})),new g.A({attributes:j,indices:_,primitiveType:B.A.TRIANGLES})}function H(e){const t=(e=e??u.A.EMPTY_OBJECT).polygonHierarchy,n=e.textureCoordinates;A.A.defined("options.polygonHierarchy",t);const i=e.vertexFormat??w.A.DEFAULT;this._vertexFormat=w.A.clone(i),this._polygonHierarchy=t,this._stRotation=e.stRotation??0,this._ellipsoid=h.A.clone(e.ellipsoid??h.A.default),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=C.A.computeHierarchyPackedLength(t,s.A)+w.A.packedLength+h.A.packedLength+((0,d.A)(n)?C.A.computeHierarchyPackedLength(n,a.A):1)+2}H.fromPositions=function(e){return e=e??u.A.EMPTY_OBJECT,A.A.defined("options.positions",e.positions),new H({polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates})},H.pack=function(e,t,n){return A.A.typeOf.object("value",e),A.A.defined("array",t),n=n??0,n=C.A.packPolygonHierarchy(e._polygonHierarchy,t,n,s.A),h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,w.A.pack(e._vertexFormat,t,n),n+=w.A.packedLength,t[n++]=e._stRotation,(0,d.A)(e._textureCoordinates)?n=C.A.packPolygonHierarchy(e._textureCoordinates,t,n,a.A):t[n++]=-1,t[n++]=e.packedLength,t};const V=h.A.clone(h.A.UNIT_SPHERE),z=new w.A,j={polygonHierarchy:{}};H.unpack=function(e,t,n){A.A.defined("array",e),t=t??0;const i=C.A.unpackPolygonHierarchy(e,t,s.A);t=i.startingIndex,delete i.startingIndex;const o=h.A.unpack(e,t,V);t+=h.A.packedLength;const r=w.A.unpack(e,t,z);t+=w.A.packedLength;const c=e[t++],l=-1===e[t]?void 0:C.A.unpackPolygonHierarchy(e,t,a.A);(0,d.A)(l)?(t=l.startingIndex,delete l.startingIndex):t++;const u=e[t++];return(0,d.A)(n)||(n=new H(j)),n._polygonHierarchy=i,n._ellipsoid=h.A.clone(o,n._ellipsoid),n._vertexFormat=w.A.clone(r,n._vertexFormat),n._stRotation=c,n._textureCoordinates=l,n.packedLength=u,n},H.createGeometry=function(e){const t=e._vertexFormat,n=e._polygonHierarchy,o=e._stRotation,a=e._textureCoordinates,A=(0,d.A)(a);let c=n.positions;if(c=(0,i.A)(c,s.A.equalsEpsilon,!0),c.length<3)return;let u=Q,h=N,f=R,p=L;const y=P;if(!l.A.computeProjectTo2DArguments(c,M,p,y))return;if(u=s.A.cross(p,y,u),u=s.A.normalize(u,u),!s.A.equalsEpsilon(M,s.A.ZERO,E.A.EPSILON6)){const t=e._ellipsoid.geodeticSurfaceNormal(M,k);s.A.dot(u,t)<0&&(u=s.A.negate(u,u),p=s.A.negate(p,p))}const b=l.A.createProjectPointsTo2DFunction(M,p,y),B=l.A.createProjectPointTo2DFunction(M,p,y);t.tangent&&(h=s.A.clone(p,h)),t.bitangent&&(f=s.A.clone(y,f));const v=C.A.polygonsFromHierarchy(n,A,b,!1),w=v.hierarchy,T=v.polygons,x=A?C.A.polygonsFromHierarchy(a,!0,function(e){return e},!1).polygons:void 0;if(0===w.length)return;c=w[0].outerRing;const D=r.A.fromPoints(c),O=C.A.computeBoundingRectangle(u,B,c,o,S),F=[];for(let e=0;e<T.length;e++){const n=new m.A({geometry:G(T[e],t,O,o,A?x[e]:void 0,B,u,h,f)});F.push(n)}const U=_.A.combineInstances(F)[0];U.attributes.position.values=new Float64Array(U.attributes.position.values),U.indices=I.A.createTypedArray(U.attributes.position.values.length/3,U.indices);const H=U.attributes;return t.position||delete H.position,new g.A({attributes:H,indices:U.indices,primitiveType:U.primitiveType,boundingSphere:D})};const Y=H},246520:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(434067),o=n(267980),r=n(369031),a=n(331185),s=n(832698);const A={},c=new o.A,l=new o.A,u=new o.A,d=new o.A,h=new s.A;function g(e,t,n,r,a){const s=o.A.subtract(e,t,c),A=o.A.dot(n,s),l=o.A.dot(r,s);return i.A.fromElements(A,l,a)}A.validOutline=function(e){r.A.defined("positions",e);const t=s.A.fromPoints(e,h).halfAxes,n=a.A.getColumn(t,0,l),i=a.A.getColumn(t,1,u),A=a.A.getColumn(t,2,d),c=o.A.magnitude(n),g=o.A.magnitude(i),f=o.A.magnitude(A);return!(0===c&&(0===g||0===f)||0===g&&0===f)},A.computeProjectTo2DArguments=function(e,t,n,i){r.A.defined("positions",e),r.A.defined("centerResult",t),r.A.defined("planeAxis1Result",n),r.A.defined("planeAxis2Result",i);const A=s.A.fromPoints(e,h),c=A.halfAxes,g=a.A.getColumn(c,0,l),f=a.A.getColumn(c,1,u),p=a.A.getColumn(c,2,d),m=o.A.magnitude(g),_=o.A.magnitude(f),I=o.A.magnitude(p),E=Math.min(m,_,I);if(0===m&&(0===_||0===I)||0===_&&0===I)return!1;let y,C;return E!==_&&E!==I||(y=g),E===m?y=f:E===I&&(C=f),E!==m&&E!==_||(C=p),o.A.normalize(y,n),o.A.normalize(C,i),o.A.clone(A.center,t),!0},A.createProjectPointsTo2DFunction=function(e,t,n){return function(i){const o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=g(i[r],e,t,n);return o}},A.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return g(i,e,t,n,o)}};const f=A},173885:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(263604),o=n(660662),r=n(267980),a=n(369031),s=n(571804),A=n(246520),c=n(915325),l=n(491446),u=n(944479),d=n(305439),h=n(46362),g=n(75200),f=n(34233),p=n(874915),m=n(71694),_=n(402330);function I(e){const t=e.length,n=new Float64Array(3*t),i=p.A.createTypedArray(t,2*t);let o=0,r=0;for(let a=0;a<t;a++){const s=e[a];n[o++]=s.x,n[o++]=s.y,n[o++]=s.z,i[r++]=a,i[r++]=(a+1)%t}const a=new h.A({position:new d.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:n})});return new u.A({attributes:a,indices:i,primitiveType:_.A.LINES})}function E(e){const t=(e=e??c.A.EMPTY_OBJECT).polygonHierarchy;a.A.defined("options.polygonHierarchy",t),this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=m.A.computeHierarchyPackedLength(t,r.A)+1}E.fromPositions=function(e){return e=e??c.A.EMPTY_OBJECT,a.A.defined("options.positions",e.positions),new E({polygonHierarchy:{positions:e.positions}})},E.pack=function(e,t,n){return a.A.typeOf.object("value",e),a.A.defined("array",t),n=n??0,t[n=m.A.packPolygonHierarchy(e._polygonHierarchy,t,n,r.A)]=e.packedLength,t};const y={polygonHierarchy:{}};E.unpack=function(e,t,n){a.A.defined("array",e),t=t??0;const i=m.A.unpackPolygonHierarchy(e,t,r.A);t=i.startingIndex,delete i.startingIndex;const o=e[t];return(0,l.A)(n)||(n=new E(y)),n._polygonHierarchy=i,n.packedLength=o,n},E.createGeometry=function(e){const t=e._polygonHierarchy;let n=t.positions;if(n=(0,i.A)(n,r.A.equalsEpsilon,!0),n.length<3)return;if(!A.A.validOutline(n))return;const a=m.A.polygonOutlinesFromHierarchy(t,!1);if(0===a.length)return;const s=[];for(let e=0;e<a.length;e++){const t=new g.A({geometry:I(a[e])});s.push(t)}const c=f.A.combineInstances(s)[0],l=o.A.fromPoints(t.positions);return new u.A({attributes:c.attributes,indices:c.indices,primitiveType:c.primitiveType,boundingSphere:l})};const C=E},297038:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ROUNDED:0,MITERED:1,BEVELED:2})},374273:(e,t,n)=>{"use strict";n.d(t,{A:()=>J});var i=n(263604),o=n(660662),r=n(267980),a=n(336946),s=n(369031),A=n(571804),c=n(297038),l=n(766242),u=n(915325),d=n(491446),h=n(610750),g=n(944479),f=n(305439),p=n(46362),m=n(794554),_=n(874915),I=n(367817),E=n(576770),y=n(402330),C=n(697422),b=n(769534);const B=new r.A,v=new r.A,w=new r.A,T=new r.A,S=new r.A,x=new r.A,D=new r.A,Q=new r.A;function N(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function R(e,t,n,i,o,a){const s=e.normals,A=e.tangents,c=e.bitangents,u=r.A.normalize(r.A.cross(n,t,D),D);a.normal&&l.A.addAttribute(s,t,i,o),a.tangent&&l.A.addAttribute(A,u,i,o),a.bitangent&&l.A.addAttribute(c,n,i,o)}function M(e,t,n){const i=e.positions,o=e.corners,a=e.endPositions,s=e.lefts,c=e.normals,u=new p.A;let h,g,m,E=0,y=0,C=0;for(g=0;g<i.length;g+=2)m=i[g].length-3,E+=m,C+=2*m,y+=i[g+1].length-3;for(E+=3,y+=3,g=0;g<o.length;g++){h=o[g];const e=o[g].leftPositions;(0,d.A)(e)?(m=e.length,E+=m,C+=m):(m=o[g].rightPositions.length,y+=m,C+=m)}const b=(0,d.A)(a);let S;b&&(S=a[0].length-3,E+=S,y+=S,S/=3,C+=6*S);const N=E+y,M=new Float64Array(N),L={normals:t.normal?new Float32Array(N):void 0,tangents:t.tangent?new Float32Array(N):void 0,bitangents:t.bitangent?new Float32Array(N):void 0};let P,O,F,U,k,G,H=0,V=N-1,z=B,j=v;const Y=S/2,q=_.A.createTypedArray(N/3,C);let W=0;if(b){G=w,k=T;const e=a[0];for(z=r.A.fromArray(c,0,z),j=r.A.fromArray(s,0,j),g=0;g<Y;g++)G=r.A.fromArray(e,3*(Y-1-g),G),k=r.A.fromArray(e,3*(Y+g),k),l.A.addAttribute(M,k,H),l.A.addAttribute(M,G,void 0,V),R(L,z,j,H,V,t),O=H/3,U=O+1,P=(V-2)/3,F=P-1,q[W++]=P,q[W++]=O,q[W++]=F,q[W++]=F,q[W++]=O,q[W++]=U,H+=3,V-=3}let J,K,X=0,Z=0,$=i[X++],ee=i[X++];for(M.set($,H),M.set(ee,V-ee.length+1),j=r.A.fromArray(s,Z,j),m=ee.length-3,g=0;g<m;g+=3)J=n.geodeticSurfaceNormal(r.A.fromArray($,g,D),D),K=n.geodeticSurfaceNormal(r.A.fromArray(ee,m-g,Q),Q),z=r.A.normalize(r.A.add(J,K,z),z),R(L,z,j,H,V,t),O=H/3,U=O+1,P=(V-2)/3,F=P-1,q[W++]=P,q[W++]=O,q[W++]=F,q[W++]=F,q[W++]=O,q[W++]=U,H+=3,V-=3;for(J=n.geodeticSurfaceNormal(r.A.fromArray($,m,D),D),K=n.geodeticSurfaceNormal(r.A.fromArray(ee,m,Q),Q),z=r.A.normalize(r.A.add(J,K,z),z),Z+=3,g=0;g<o.length;g++){let e;h=o[g];const a=h.leftPositions,A=h.rightPositions;let u,f,p=x,_=w,I=T;if(z=r.A.fromArray(c,Z,z),(0,d.A)(a)){for(R(L,z,j,void 0,V,t),V-=3,u=U,f=F,e=0;e<a.length/3;e++)p=r.A.fromArray(a,3*e,p),q[W++]=u,q[W++]=f-e-1,q[W++]=f-e,l.A.addAttribute(M,p,void 0,V),_=r.A.fromArray(M,3*(f-e-1),_),I=r.A.fromArray(M,3*u,I),j=r.A.normalize(r.A.subtract(_,I,j),j),R(L,z,j,void 0,V,t),V-=3;p=r.A.fromArray(M,3*u,p),_=r.A.subtract(r.A.fromArray(M,3*f,_),p,_),I=r.A.subtract(r.A.fromArray(M,3*(f-e),I),p,I),j=r.A.normalize(r.A.add(_,I,j),j),R(L,z,j,H,void 0,t),H+=3}else{for(R(L,z,j,H,void 0,t),H+=3,u=F,f=U,e=0;e<A.length/3;e++)p=r.A.fromArray(A,3*e,p),q[W++]=u,q[W++]=f+e,q[W++]=f+e+1,l.A.addAttribute(M,p,H),_=r.A.fromArray(M,3*u,_),I=r.A.fromArray(M,3*(f+e),I),j=r.A.normalize(r.A.subtract(_,I,j),j),R(L,z,j,H,void 0,t),H+=3;p=r.A.fromArray(M,3*u,p),_=r.A.subtract(r.A.fromArray(M,3*(f+e),_),p,_),I=r.A.subtract(r.A.fromArray(M,3*f,I),p,I),j=r.A.normalize(r.A.negate(r.A.add(I,_,j),j),j),R(L,z,j,void 0,V,t),V-=3}for($=i[X++],ee=i[X++],$.splice(0,3),ee.splice(ee.length-3,3),M.set($,H),M.set(ee,V-ee.length+1),m=ee.length-3,Z+=3,j=r.A.fromArray(s,Z,j),e=0;e<ee.length;e+=3)J=n.geodeticSurfaceNormal(r.A.fromArray($,e,D),D),K=n.geodeticSurfaceNormal(r.A.fromArray(ee,m-e,Q),Q),z=r.A.normalize(r.A.add(J,K,z),z),R(L,z,j,H,V,t),U=H/3,O=U-1,F=(V-2)/3,P=F+1,q[W++]=P,q[W++]=O,q[W++]=F,q[W++]=F,q[W++]=O,q[W++]=U,H+=3,V-=3;H-=3,V+=3}if(z=r.A.fromArray(c,c.length-3,z),R(L,z,j,H,V,t),b){H+=3,V-=3,G=w,k=T;const e=a[1];for(g=0;g<Y;g++)G=r.A.fromArray(e,3*(S-g-1),G),k=r.A.fromArray(e,3*g,k),l.A.addAttribute(M,G,void 0,V),l.A.addAttribute(M,k,H),R(L,z,j,H,V,t),U=H/3,O=U-1,F=(V-2)/3,P=F+1,q[W++]=P,q[W++]=O,q[W++]=F,q[W++]=F,q[W++]=O,q[W++]=U,H+=3,V-=3}if(u.position=new f.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:M}),t.st){const e=new Float32Array(N/3*2);let t,n,i=0;if(b){E/=3,y/=3;const o=Math.PI/(S+1);let r;n=1/(E-S+1),t=1/(y-S+1);const a=S/2;for(g=a+1;g<S+1;g++)r=I.A.PI_OVER_TWO+o*g,e[i++]=t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(g=1;g<y-S+1;g++)e[i++]=g*t,e[i++]=0;for(g=S;g>a;g--)r=I.A.PI_OVER_TWO-g*o,e[i++]=1-t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(g=a;g>0;g--)r=I.A.PI_OVER_TWO-o*g,e[i++]=1-n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(g=E-S;g>0;g--)e[i++]=g*n,e[i++]=1;for(g=1;g<a+1;g++)r=I.A.PI_OVER_TWO+o*g,e[i++]=n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r))}else{for(E/=3,y/=3,n=1/(E-1),t=1/(y-1),g=0;g<y;g++)e[i++]=g*t,e[i++]=0;for(g=E;g>0;g--)e[i++]=(g-1)*n,e[i++]=1}u.st=new f.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:e})}return t.normal&&(u.normal=new f.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:L.normals})),t.tangent&&(u.tangent=new f.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:L.tangents})),t.bitangent&&(u.bitangent=new f.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:L.bitangents})),{attributes:u,indices:q}}function L(e,t,n){n[t++]=e[0],n[t++]=e[1],n[t++]=e[2];for(let i=3;i<e.length;i+=3){const o=e[i],r=e[i+1],a=e[i+2];n[t++]=o,n[t++]=r,n[t++]=a,n[t++]=o,n[t++]=r,n[t++]=a}return n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n}const P=new r.A,O=new r.A,F=new a.A;function U(e,t,n,i,o,a){const s=r.A.subtract(t,e,P);r.A.normalize(s,s);const A=n.geodeticSurfaceNormal(e,O),c=r.A.cross(s,A,P);r.A.multiplyByScalar(c,i,c);let l=o.latitude,u=o.longitude,d=a.latitude,h=a.longitude;r.A.add(e,c,O),n.cartesianToCartographic(O,F);let g=F.latitude,f=F.longitude;l=Math.min(l,g),u=Math.min(u,f),d=Math.max(d,g),h=Math.max(h,f),r.A.subtract(e,c,O),n.cartesianToCartographic(O,F),g=F.latitude,f=F.longitude,l=Math.min(l,g),u=Math.min(u,f),d=Math.max(d,g),h=Math.max(h,f),o.latitude=l,o.longitude=u,a.latitude=d,a.longitude=h}const k=new r.A,G=new r.A,H=new a.A,V=new a.A;function z(e,t,n,o,a){e=N(e,t);const s=(0,i.A)(e,r.A.equalsEpsilon),A=s.length;if(A<2||n<=0)return new C.A;const l=.5*n;let u,h;if(H.latitude=Number.POSITIVE_INFINITY,H.longitude=Number.POSITIVE_INFINITY,V.latitude=Number.NEGATIVE_INFINITY,V.longitude=Number.NEGATIVE_INFINITY,o===c.A.ROUNDED){const e=s[0];r.A.subtract(e,s[1],k),r.A.normalize(k,k),r.A.multiplyByScalar(k,l,k),r.A.add(e,k,G),t.cartesianToCartographic(G,F),u=F.latitude,h=F.longitude,H.latitude=Math.min(H.latitude,u),H.longitude=Math.min(H.longitude,h),V.latitude=Math.max(V.latitude,u),V.longitude=Math.max(V.longitude,h)}for(let e=0;e<A-1;++e)U(s[e],s[e+1],t,l,H,V);const g=s[A-1];r.A.subtract(g,s[A-2],k),r.A.normalize(k,k),r.A.multiplyByScalar(k,l,k),r.A.add(g,k,G),U(g,G,t,l,H,V),o===c.A.ROUNDED&&(t.cartesianToCartographic(G,F),u=F.latitude,h=F.longitude,H.latitude=Math.min(H.latitude,u),H.longitude=Math.min(H.longitude,h),V.latitude=Math.max(V.latitude,u),V.longitude=Math.max(V.longitude,h));const f=(0,d.A)(a)?a:new C.A;return f.north=V.latitude,f.south=H.latitude,f.east=V.longitude,f.west=H.longitude,f}function j(e){const t=(e=e??u.A.EMPTY_OBJECT).positions,n=e.width;s.A.defined("options.positions",t),s.A.defined("options.width",n);const i=e.height??0,o=e.extrudedHeight??i;this._positions=t,this._ellipsoid=h.A.clone(e.ellipsoid??h.A.default),this._vertexFormat=b.A.clone(e.vertexFormat??b.A.DEFAULT),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=e.cornerType??c.A.ROUNDED,this._granularity=e.granularity??I.A.RADIANS_PER_DEGREE,this._shadowVolume=e.shadowVolume??!1,this._workerName="createCorridorGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this.packedLength=1+t.length*r.A.packedLength+h.A.packedLength+b.A.packedLength+7}j.pack=function(e,t,n){s.A.defined("value",e),s.A.defined("array",t),n=n??0;const i=e._positions,o=i.length;t[n++]=o;for(let e=0;e<o;++e,n+=r.A.packedLength)r.A.pack(i[e],t,n);return h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,b.A.pack(e._vertexFormat,t,n),n+=b.A.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n++]=e._shadowVolume?1:0,t[n]=e._offsetAttribute??-1,t};const Y=h.A.clone(h.A.UNIT_SPHERE),q=new b.A,W={positions:void 0,ellipsoid:Y,vertexFormat:q,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};j.unpack=function(e,t,n){s.A.defined("array",e),t=t??0;const i=e[t++],o=new Array(i);for(let n=0;n<i;++n,t+=r.A.packedLength)o[n]=r.A.unpack(e,t);const a=h.A.unpack(e,t,Y);t+=h.A.packedLength;const A=b.A.unpack(e,t,q);t+=b.A.packedLength;const c=e[t++],l=e[t++],u=e[t++],g=e[t++],f=e[t++],p=1===e[t++],m=e[t];return(0,d.A)(n)?(n._positions=o,n._ellipsoid=h.A.clone(a,n._ellipsoid),n._vertexFormat=b.A.clone(A,n._vertexFormat),n._width=c,n._height=l,n._extrudedHeight=u,n._cornerType=g,n._granularity=f,n._shadowVolume=p,n._offsetAttribute=-1===m?void 0:m,n):(W.positions=o,W.width=c,W.height=l,W.extrudedHeight=u,W.cornerType=g,W.granularity=f,W.shadowVolume=p,W.offsetAttribute=-1===m?void 0:m,new j(W))},j.computeRectangle=function(e,t){const n=(e=e??u.A.EMPTY_OBJECT).positions,i=e.width;return s.A.defined("options.positions",n),s.A.defined("options.width",i),z(n,e.ellipsoid??h.A.default,i,e.cornerType??c.A.ROUNDED,t)},j.createGeometry=function(e){let t=e._positions;const n=e._width,a=e._ellipsoid;t=N(t,a);const s=(0,i.A)(t,r.A.equalsEpsilon);if(s.length<2||n<=0)return;const c=e._height,u=e._extrudedHeight,h=!I.A.equalsEpsilon(c,u,0,I.A.EPSILON2),p=e._vertexFormat,C={ellipsoid:a,positions:s,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!0};let D;if(h)C.height=c,C.extrudedHeight=u,C.shadowVolume=e._shadowVolume,C.offsetAttribute=e._offsetAttribute,D=function(e,t){const n=new b.A({position:t.position,normal:t.normal||t.bitangent||e.shadowVolume,tangent:t.tangent,bitangent:t.normal||t.bitangent,st:t.st}),i=e.ellipsoid,o=M(l.A.computePositions(e),n,i),a=e.height,s=e.extrudedHeight;let c=o.attributes;const u=o.indices;let h=c.position.values,g=h.length;const p=new Float64Array(6*g);let I=new Float64Array(g);I.set(h);let y,C=new Float64Array(4*g);h=E.A.scaleToGeodeticHeight(h,a,i),C=L(h,0,C),I=E.A.scaleToGeodeticHeight(I,s,i),C=L(I,2*g,C),p.set(h),p.set(I,g),p.set(C,2*g),c.position.values=p,c=function(e,t){if(!(t.normal||t.tangent||t.bitangent||t.st))return e;const n=e.position.values;let i,o;(t.normal||t.bitangent)&&(i=e.normal.values,o=e.bitangent.values);const a=e.position.values.length/18,s=3*a,A=2*a,c=2*s;let u;if(t.normal||t.bitangent||t.tangent){const a=t.normal?new Float32Array(6*s):void 0,A=t.tangent?new Float32Array(6*s):void 0,d=t.bitangent?new Float32Array(6*s):void 0;let h=B,g=v,f=w,p=T,m=S,_=x,I=c;for(u=0;u<s;u+=3){const e=I+c;h=r.A.fromArray(n,u,h),g=r.A.fromArray(n,u+s,g),f=r.A.fromArray(n,(u+3)%s,f),g=r.A.subtract(g,h,g),f=r.A.subtract(f,h,f),p=r.A.normalize(r.A.cross(g,f,p),p),t.normal&&(l.A.addAttribute(a,p,e),l.A.addAttribute(a,p,e+3),l.A.addAttribute(a,p,I),l.A.addAttribute(a,p,I+3)),(t.tangent||t.bitangent)&&(_=r.A.fromArray(i,u,_),t.bitangent&&(l.A.addAttribute(d,_,e),l.A.addAttribute(d,_,e+3),l.A.addAttribute(d,_,I),l.A.addAttribute(d,_,I+3)),t.tangent&&(m=r.A.normalize(r.A.cross(_,p,m),m),l.A.addAttribute(A,m,e),l.A.addAttribute(A,m,e+3),l.A.addAttribute(A,m,I),l.A.addAttribute(A,m,I+3))),I+=6}if(t.normal){for(a.set(i),u=0;u<s;u+=3)a[u+s]=-i[u],a[u+s+1]=-i[u+1],a[u+s+2]=-i[u+2];e.normal.values=a}else e.normal=void 0;if(t.bitangent?(d.set(o),d.set(o,s),e.bitangent.values=d):e.bitangent=void 0,t.tangent){const t=e.tangent.values;A.set(t),A.set(t,s),e.tangent.values=A}}if(t.st){const t=e.st.values,n=new Float32Array(6*A);n.set(t),n.set(t,A);let i=2*A;for(let e=0;e<2;e++){for(n[i++]=t[0],n[i++]=t[1],u=2;u<A;u+=2){const e=t[u],o=t[u+1];n[i++]=e,n[i++]=o,n[i++]=e,n[i++]=o}n[i++]=t[0],n[i++]=t[1]}e.st.values=n}return e}(c,t);const D=g/3;if(e.shadowVolume){const e=c.normal.values;g=e.length;let n=new Float32Array(6*g);for(y=0;y<g;y++)e[y]=-e[y];n.set(e,g),n=L(e,4*g,n),c.extrudeDirection=new f.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:n}),t.normal||(c.normal=void 0)}if((0,d.A)(e.offsetAttribute)){let t=new Uint8Array(6*D);if(e.offsetAttribute===m.A.TOP)t=t.fill(1,0,D).fill(1,2*D,4*D);else{const n=e.offsetAttribute===m.A.NONE?0:1;t=t.fill(n)}c.applyOffset=new f.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}const Q=u.length,N=D+D,R=_.A.createTypedArray(p.length/3,2*Q+3*N);R.set(u);let P,O,F,U,k=Q;for(y=0;y<Q;y+=3){const e=u[y],t=u[y+1],n=u[y+2];R[k++]=n+D,R[k++]=t+D,R[k++]=e+D}for(y=0;y<N;y+=2)P=y+N,O=P+N,F=P+1,U=O+1,R[k++]=P,R[k++]=O,R[k++]=F,R[k++]=F,R[k++]=O,R[k++]=U;return{attributes:c,indices:R}}(C,p);else if(D=M(l.A.computePositions(C),p,a),D.attributes.position.values=E.A.scaleToGeodeticHeight(D.attributes.position.values,c,a),(0,d.A)(e._offsetAttribute)){const t=e._offsetAttribute===m.A.NONE?0:1,n=D.attributes.position.values.length,i=new Uint8Array(n/3).fill(t);D.attributes.applyOffset=new f.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}const Q=D.attributes,R=o.A.fromVertices(Q.position.values,void 0,3);return p.position||(D.attributes.position.values=void 0),new g.A({attributes:Q,indices:D.indices,primitiveType:y.A.TRIANGLES,boundingSphere:R,offsetAttribute:e._offsetAttribute})},j.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new j({positions:e._positions,width:e._width,cornerType:e._cornerType,ellipsoid:o,granularity:i,extrudedHeight:r,height:a,vertexFormat:b.A.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(j.prototype,{rectangle:{get:function(){return(0,d.A)(this._rectangle)||(this._rectangle=z(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}});const J=j},766242:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(267980),o=n(297038),r=n(491446),a=n(367817),s=n(331185),A=n(870349),c=n(748918),l=n(99479);const u={},d=new i.A,h=new i.A,g=new i.A,f=new i.A,p=[new i.A,new i.A],m=new i.A,_=new i.A,I=new i.A,E=new i.A,y=new i.A,C=new i.A,b=new i.A,B=new i.A,v=new i.A,w=new i.A,T=new l.A,S=new s.A;function x(e,t,n,r,A){const c=i.A.angleBetween(i.A.subtract(t,e,d),i.A.subtract(n,e,h)),u=r===o.A.BEVELED?1:Math.ceil(c/a.A.toRadians(5))+1,g=3*u,f=new Array(g);let p;f[g-3]=n.x,f[g-2]=n.y,f[g-1]=n.z,p=A?s.A.fromQuaternion(l.A.fromAxisAngle(i.A.negate(e,d),c/u,T),S):s.A.fromQuaternion(l.A.fromAxisAngle(e,c/u,T),S);let m=0;t=i.A.clone(t,d);for(let e=0;e<u;e++)t=s.A.multiplyByVector(p,t,t),f[m++]=t.x,f[m++]=t.y,f[m++]=t.z;return f}function D(e,t,n,o){let r=d;return o||(t=i.A.negate(t,t)),r=i.A.add(e,t,r),[r.x,r.y,r.z,n.x,n.y,n.z]}function Q(e,t,n,o){const r=new Array(e.length),a=new Array(e.length),s=i.A.multiplyByScalar(t,n,d),A=i.A.negate(s,h);let c=0,l=e.length-1;for(let t=0;t<e.length;t+=3){const n=i.A.fromArray(e,t,g),o=i.A.add(n,A,f);r[c++]=o.x,r[c++]=o.y,r[c++]=o.z;const u=i.A.add(n,s,f);a[l--]=u.z,a[l--]=u.y,a[l--]=u.x}return o.push(r,a),o}u.addAttribute=function(e,t,n,i){const o=t.x,a=t.y,s=t.z;(0,r.A)(n)&&(e[n]=o,e[n+1]=a,e[n+2]=s),(0,r.A)(i)&&(e[i]=s,e[i-1]=a,e[i-2]=o)};const N=new i.A,R=new i.A;u.computePositions=function(e){const t=e.granularity,n=e.positions,r=e.ellipsoid,s=e.width/2,l=e.cornerType,u=e.saveAttributes;let h=m,g=_,f=I,T=E,S=y,M=C,L=b,P=B,O=v,F=w,U=[];const k=u?[]:void 0,G=u?[]:void 0;let H,V=n[0],z=n[1];g=i.A.normalize(i.A.subtract(z,V,g),g),h=r.geodeticSurfaceNormal(V,h),T=i.A.normalize(i.A.cross(h,g,T),T),u&&(k.push(T.x,T.y,T.z),G.push(h.x,h.y,h.z)),L=i.A.clone(V,L),V=z,f=i.A.negate(g,f);const j=[];let Y;const q=n.length;for(Y=1;Y<q-1;Y++){h=r.geodeticSurfaceNormal(V,h),z=n[Y+1],g=i.A.normalize(i.A.subtract(z,V,g),g);const e=i.A.multiplyByScalar(h,i.A.dot(g,h),N);i.A.subtract(g,e,e),i.A.normalize(e,e);const m=i.A.multiplyByScalar(h,i.A.dot(f,h),R);if(i.A.subtract(f,m,m),i.A.normalize(m,m),!a.A.equalsEpsilon(Math.abs(i.A.dot(e,m)),1,a.A.EPSILON7)){S=i.A.normalize(i.A.add(g,f,S),S),S=i.A.cross(S,h,S),S=i.A.cross(h,S,S),S=i.A.normalize(S,S);const e=s/Math.max(.25,i.A.magnitude(i.A.cross(S,f,d))),n=c.A.angleIsGreaterThanPi(g,f,V,r);S=i.A.multiplyByScalar(S,e,S),n?(P=i.A.add(V,S,P),F=i.A.add(P,i.A.multiplyByScalar(T,s,F),F),O=i.A.add(P,i.A.multiplyByScalar(T,2*s,O),O),p[0]=i.A.clone(L,p[0]),p[1]=i.A.clone(F,p[1]),H=A.A.generateArc({positions:p,granularity:t,ellipsoid:r}),U=Q(H,T,s,U),u&&(k.push(T.x,T.y,T.z),G.push(h.x,h.y,h.z)),M=i.A.clone(O,M),T=i.A.normalize(i.A.cross(h,g,T),T),O=i.A.add(P,i.A.multiplyByScalar(T,2*s,O),O),L=i.A.add(P,i.A.multiplyByScalar(T,s,L),L),l===o.A.ROUNDED||l===o.A.BEVELED?j.push({leftPositions:x(P,M,O,l,n)}):j.push({leftPositions:D(V,i.A.negate(S,S),O,n)})):(O=i.A.add(V,S,O),F=i.A.add(O,i.A.negate(i.A.multiplyByScalar(T,s,F),F),F),P=i.A.add(O,i.A.negate(i.A.multiplyByScalar(T,2*s,P),P),P),p[0]=i.A.clone(L,p[0]),p[1]=i.A.clone(F,p[1]),H=A.A.generateArc({positions:p,granularity:t,ellipsoid:r}),U=Q(H,T,s,U),u&&(k.push(T.x,T.y,T.z),G.push(h.x,h.y,h.z)),M=i.A.clone(P,M),T=i.A.normalize(i.A.cross(h,g,T),T),P=i.A.add(O,i.A.negate(i.A.multiplyByScalar(T,2*s,P),P),P),L=i.A.add(O,i.A.negate(i.A.multiplyByScalar(T,s,L),L),L),l===o.A.ROUNDED||l===o.A.BEVELED?j.push({rightPositions:x(O,M,P,l,n)}):j.push({rightPositions:D(V,S,P,n)})),f=i.A.negate(g,f)}V=z}let W;return h=r.geodeticSurfaceNormal(V,h),p[0]=i.A.clone(L,p[0]),p[1]=i.A.clone(V,p[1]),H=A.A.generateArc({positions:p,granularity:t,ellipsoid:r}),U=Q(H,T,s,U),u&&(k.push(T.x,T.y,T.z),G.push(h.x,h.y,h.z)),l===o.A.ROUNDED&&(W=function(e){let t=m,n=_,r=I,a=e[1];n=i.A.fromArray(e[1],a.length-3,n),r=i.A.fromArray(e[0],0,r),t=i.A.midpoint(n,r,t);const s=x(t,n,r,o.A.ROUNDED,!1),A=e.length-1,c=e[A-1];return a=e[A],n=i.A.fromArray(c,c.length-3,n),r=i.A.fromArray(a,0,r),t=i.A.midpoint(n,r,t),[s,x(t,n,r,o.A.ROUNDED,!1)]}(U)),{positions:U,corners:j,lefts:k,normals:G,endPositions:W}};const M=u},686043:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(263604),o=n(660662),r=n(267980),a=n(369031),s=n(571804),A=n(297038),c=n(766242),l=n(915325),u=n(491446),d=n(610750),h=n(944479),g=n(305439),f=n(46362),p=n(794554),m=n(874915),_=n(367817),I=n(576770),E=n(402330);const y=new r.A,C=new r.A,b=new r.A;function B(e,t){const n=[],i=e.positions,o=e.corners,a=e.endPositions,l=new f.A;let d,h,p,_=0,I=0,E=0;for(h=0;h<i.length;h+=2)p=i[h].length-3,_+=p,E+=p/3*4,I+=i[h+1].length-3;for(_+=3,I+=3,h=0;h<o.length;h++){d=o[h];const e=o[h].leftPositions;(0,u.A)(e)?(p=e.length,_+=p,E+=p/3*2):(p=o[h].rightPositions.length,I+=p,E+=p/3*2)}const B=(0,u.A)(a);let v;B&&(v=a[0].length-3,_+=v,I+=v,v/=3,E+=4*v);const w=_+I,T=new Float64Array(w);let S,x,D,Q,N,R,M=0,L=w-1;const P=v/2,O=m.A.createTypedArray(w/3,E+4);let F=0;if(O[F++]=M/3,O[F++]=(L-2)/3,B){n.push(M/3),R=y,N=C;const e=a[0];for(h=0;h<P;h++)R=r.A.fromArray(e,3*(P-1-h),R),N=r.A.fromArray(e,3*(P+h),N),c.A.addAttribute(T,N,M),c.A.addAttribute(T,R,void 0,L),x=M/3,Q=x+1,S=(L-2)/3,D=S-1,O[F++]=S,O[F++]=D,O[F++]=x,O[F++]=Q,M+=3,L-=3}let U=0,k=i[U++],G=i[U++];for(T.set(k,M),T.set(G,L-G.length+1),p=G.length-3,n.push(M/3,(L-2)/3),h=0;h<p;h+=3)x=M/3,Q=x+1,S=(L-2)/3,D=S-1,O[F++]=S,O[F++]=D,O[F++]=x,O[F++]=Q,M+=3,L-=3;for(h=0;h<o.length;h++){let e;d=o[h];const a=d.leftPositions,s=d.rightPositions;let l,g=b;if((0,u.A)(a)){for(L-=3,l=D,n.push(Q),e=0;e<a.length/3;e++)g=r.A.fromArray(a,3*e,g),O[F++]=l-e-1,O[F++]=l-e,c.A.addAttribute(T,g,void 0,L),L-=3;n.push(l-Math.floor(a.length/6)),t===A.A.BEVELED&&n.push((L-2)/3+1),M+=3}else{for(M+=3,l=Q,n.push(D),e=0;e<s.length/3;e++)g=r.A.fromArray(s,3*e,g),O[F++]=l+e,O[F++]=l+e+1,c.A.addAttribute(T,g,M),M+=3;n.push(l+Math.floor(s.length/6)),t===A.A.BEVELED&&n.push(M/3-1),L-=3}for(k=i[U++],G=i[U++],k.splice(0,3),G.splice(G.length-3,3),T.set(k,M),T.set(G,L-G.length+1),p=G.length-3,e=0;e<G.length;e+=3)Q=M/3,x=Q-1,D=(L-2)/3,S=D+1,O[F++]=S,O[F++]=D,O[F++]=x,O[F++]=Q,M+=3,L-=3;M-=3,L+=3,n.push(M/3,(L-2)/3)}if(B){M+=3,L-=3,R=y,N=C;const e=a[1];for(h=0;h<P;h++)R=r.A.fromArray(e,3*(v-h-1),R),N=r.A.fromArray(e,3*h,N),c.A.addAttribute(T,R,void 0,L),c.A.addAttribute(T,N,M),Q=M/3,x=Q-1,D=(L-2)/3,S=D+1,O[F++]=S,O[F++]=D,O[F++]=x,O[F++]=Q,M+=3,L-=3;n.push(M/3)}else n.push(M/3,(L-2)/3);return O[F++]=M/3,O[F++]=(L-2)/3,l.position=new g.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:T}),{attributes:l,indices:O,wallIndices:n}}function v(e){const t=(e=e??l.A.EMPTY_OBJECT).positions,n=e.width;a.A.typeOf.object("options.positions",t),a.A.typeOf.number("options.width",n);const i=e.height??0,o=e.extrudedHeight??i;this._positions=t,this._ellipsoid=d.A.clone(e.ellipsoid??d.A.default),this._width=n,this._height=Math.max(i,o),this._extrudedHeight=Math.min(i,o),this._cornerType=e.cornerType??A.A.ROUNDED,this._granularity=e.granularity??_.A.RADIANS_PER_DEGREE,this._offsetAttribute=e.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+t.length*r.A.packedLength+d.A.packedLength+6}v.pack=function(e,t,n){a.A.typeOf.object("value",e),a.A.typeOf.object("array",t),n=n??0;const i=e._positions,o=i.length;t[n++]=o;for(let e=0;e<o;++e,n+=r.A.packedLength)r.A.pack(i[e],t,n);return d.A.pack(e._ellipsoid,t,n),n+=d.A.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n]=e._offsetAttribute??-1,t};const w=d.A.clone(d.A.UNIT_SPHERE),T={positions:void 0,ellipsoid:w,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};v.unpack=function(e,t,n){a.A.typeOf.object("array",e),t=t??0;const i=e[t++],o=new Array(i);for(let n=0;n<i;++n,t+=r.A.packedLength)o[n]=r.A.unpack(e,t);const s=d.A.unpack(e,t,w);t+=d.A.packedLength;const A=e[t++],c=e[t++],l=e[t++],h=e[t++],g=e[t++],f=e[t];return(0,u.A)(n)?(n._positions=o,n._ellipsoid=d.A.clone(s,n._ellipsoid),n._width=A,n._height=c,n._extrudedHeight=l,n._cornerType=h,n._granularity=g,n._offsetAttribute=-1===f?void 0:f,n):(T.positions=o,T.width=A,T.height=c,T.extrudedHeight=l,T.cornerType=h,T.granularity=g,T.offsetAttribute=-1===f?void 0:f,new v(T))},v.createGeometry=function(e){let t=e._positions;const n=e._width,a=e._ellipsoid;t=function(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}(t,a);const A=(0,i.A)(t,r.A.equalsEpsilon);if(A.length<2||n<=0)return;const l=e._height,d=e._extrudedHeight,f=!_.A.equalsEpsilon(l,d,0,_.A.EPSILON2),y={ellipsoid:a,positions:A,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!1};let C;if(f)y.height=l,y.extrudedHeight=d,y.offsetAttribute=e._offsetAttribute,C=function(e){const t=e.ellipsoid,n=B(c.A.computePositions(e),e.cornerType),i=n.wallIndices,o=e.height,r=e.extrudedHeight,a=n.attributes,A=n.indices;let l=a.position.values,d=l.length,h=new Float64Array(d);h.set(l);const f=new Float64Array(2*d);if(l=I.A.scaleToGeodeticHeight(l,o,t),h=I.A.scaleToGeodeticHeight(h,r,t),f.set(l),f.set(h,d),a.position.values=f,d/=3,(0,u.A)(e.offsetAttribute)){let t=new Uint8Array(2*d);if(e.offsetAttribute===p.A.TOP)t=t.fill(1,0,d);else{const n=e.offsetAttribute===p.A.NONE?0:1;t=t.fill(n)}a.applyOffset=new g.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let _;const E=A.length,y=m.A.createTypedArray(f.length/3,2*(E+i.length));y.set(A);let C,b,v=E;for(_=0;_<E;_+=2){const e=A[_],t=A[_+1];y[v++]=e+d,y[v++]=t+d}for(_=0;_<i.length;_++)C=i[_],b=C+d,y[v++]=C,y[v++]=b;return{attributes:a,indices:y}}(y);else if(C=B(c.A.computePositions(y),y.cornerType),C.attributes.position.values=I.A.scaleToGeodeticHeight(C.attributes.position.values,l,a),(0,u.A)(e._offsetAttribute)){const t=C.attributes.position.values.length,n=e._offsetAttribute===p.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);C.attributes.applyOffset=new g.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}const b=C.attributes,v=o.A.fromVertices(b.position.values,void 0,3);return new h.A({attributes:b,indices:C.indices,primitiveType:E.A.LINES,boundingSphere:v,offsetAttribute:e._offsetAttribute})};const S=v},672743:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ae});const{entries:i,setPrototypeOf:o,isFrozen:r,getPrototypeOf:a,getOwnPropertyDescriptor:s}=Object;let{freeze:A,seal:c,create:l}=Object,{apply:u,construct:d}="undefined"!=typeof Reflect&&Reflect;A||(A=function(e){return e}),c||(c=function(e){return e}),u||(u=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return e.apply(t,i)}),d||(d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new e(...n)});const h=S(Array.prototype.forEach),g=S(Array.prototype.lastIndexOf),f=S(Array.prototype.pop),p=S(Array.prototype.push),m=S(Array.prototype.splice),_=S(String.prototype.toLowerCase),I=S(String.prototype.toString),E=S(String.prototype.match),y=S(String.prototype.replace),C=S(String.prototype.indexOf),b=S(String.prototype.trim),B=S(Object.prototype.hasOwnProperty),v=S(RegExp.prototype.test),w=(T=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d(T,t)});var T;function S(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return u(e,t,i)}}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;o&&o(e,null);let i=t.length;for(;i--;){let o=t[i];if("string"==typeof o){const e=n(o);e!==o&&(r(t)||(t[i]=e),o=e)}e[o]=!0}return e}function D(e){for(let t=0;t<e.length;t++)B(e,t)||(e[t]=null);return e}function Q(e){const t=l(null);for(const[n,o]of i(e))B(e,n)&&(Array.isArray(o)?t[n]=D(o):o&&"object"==typeof o&&o.constructor===Object?t[n]=Q(o):t[n]=o);return t}function N(e,t){for(;null!==e;){const n=s(e,t);if(n){if(n.get)return S(n.get);if("function"==typeof n.value)return S(n.value)}e=a(e)}return function(){return null}}const R=A(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=A(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=A(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=A(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=A(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),F=A(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),U=A(["#text"]),k=A(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),G=A(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=A(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=A(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j=c(/<%[\w\W]*|[\w\W]*%>/gm),Y=c(/\$\{[\w\W]*/gm),q=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),W=c(/^aria-[\-\w]+$/),J=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=c(/^(?:\w+script|data):/i),X=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z=c(/^html$/i),$=c(/^[a-z][.\w]*(-[.\w]+)+$/i);var ee=Object.freeze({__proto__:null,ARIA_ATTR:W,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:$,DATA_ATTR:q,DOCTYPE_NAME:Z,ERB_EXPR:j,IS_ALLOWED_URI:J,IS_SCRIPT_OR_DATA:K,MUSTACHE_EXPR:z,TMPLIT_EXPR:Y});const te=function(){return"undefined"==typeof window?null:window};var ne=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();const n=t=>e(t);if(n.version="3.2.7",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,a=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:c,Node:u,Element:d,NodeFilter:T,NamedNodeMap:S=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:D,DOMParser:z,trustedTypes:j}=t,Y=d.prototype,q=N(Y,"cloneNode"),W=N(Y,"remove"),K=N(Y,"nextSibling"),X=N(Y,"childNodes"),$=N(Y,"parentNode");if("function"==typeof c){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let ne,ie="";const{implementation:oe,createNodeIterator:re,createDocumentFragment:ae,getElementsByTagName:se}=o,{importNode:Ae}=r;let ce={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof i&&"function"==typeof $&&oe&&void 0!==oe.createHTMLDocument;const{MUSTACHE_EXPR:le,ERB_EXPR:ue,TMPLIT_EXPR:de,DATA_ATTR:he,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:fe,ATTR_WHITESPACE:pe,CUSTOM_ELEMENT:me}=ee;let{IS_ALLOWED_URI:_e}=ee,Ie=null;const Ee=x({},[...R,...M,...L,...O,...U]);let ye=null;const Ce=x({},[...k,...G,...H,...V]);let be=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Be=null,ve=null,we=!0,Te=!0,Se=!1,xe=!0,De=!1,Qe=!0,Ne=!1,Re=!1,Me=!1,Le=!1,Pe=!1,Oe=!1,Fe=!0,Ue=!1,ke=!0,Ge=!1,He={},Ve=null;const ze=x({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let je=null;const Ye=x({},["audio","video","img","source","image","track"]);let qe=null;const We=x({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Ke="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml";let Ze=Xe,$e=!1,et=null;const tt=x({},[Je,Ke,Xe],I);let nt=x({},["mi","mo","mn","ms","mtext"]),it=x({},["annotation-xml"]);const ot=x({},["title","style","font","a","script"]);let rt=null;const at=["application/xhtml+xml","text/html"];let st=null,At=null;const ct=o.createElement("form"),lt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!At||At!==e){if(e&&"object"==typeof e||(e={}),e=Q(e),rt=-1===at.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===rt?I:_,Ie=B(e,"ALLOWED_TAGS")?x({},e.ALLOWED_TAGS,st):Ee,ye=B(e,"ALLOWED_ATTR")?x({},e.ALLOWED_ATTR,st):Ce,et=B(e,"ALLOWED_NAMESPACES")?x({},e.ALLOWED_NAMESPACES,I):tt,qe=B(e,"ADD_URI_SAFE_ATTR")?x(Q(We),e.ADD_URI_SAFE_ATTR,st):We,je=B(e,"ADD_DATA_URI_TAGS")?x(Q(Ye),e.ADD_DATA_URI_TAGS,st):Ye,Ve=B(e,"FORBID_CONTENTS")?x({},e.FORBID_CONTENTS,st):ze,Be=B(e,"FORBID_TAGS")?x({},e.FORBID_TAGS,st):Q({}),ve=B(e,"FORBID_ATTR")?x({},e.FORBID_ATTR,st):Q({}),He=!!B(e,"USE_PROFILES")&&e.USE_PROFILES,we=!1!==e.ALLOW_ARIA_ATTR,Te=!1!==e.ALLOW_DATA_ATTR,Se=e.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,De=e.SAFE_FOR_TEMPLATES||!1,Qe=!1!==e.SAFE_FOR_XML,Ne=e.WHOLE_DOCUMENT||!1,Le=e.RETURN_DOM||!1,Pe=e.RETURN_DOM_FRAGMENT||!1,Oe=e.RETURN_TRUSTED_TYPE||!1,Me=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,Ue=e.SANITIZE_NAMED_PROPS||!1,ke=!1!==e.KEEP_CONTENT,Ge=e.IN_PLACE||!1,_e=e.ALLOWED_URI_REGEXP||J,Ze=e.NAMESPACE||Xe,nt=e.MATHML_TEXT_INTEGRATION_POINTS||nt,it=e.HTML_INTEGRATION_POINTS||it,be=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(be.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&lt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(be.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(be.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(Te=!1),Pe&&(Le=!0),He&&(Ie=x({},U),ye=[],!0===He.html&&(x(Ie,R),x(ye,k)),!0===He.svg&&(x(Ie,M),x(ye,G),x(ye,V)),!0===He.svgFilters&&(x(Ie,L),x(ye,G),x(ye,V)),!0===He.mathMl&&(x(Ie,O),x(ye,H),x(ye,V))),e.ADD_TAGS&&(Ie===Ee&&(Ie=Q(Ie)),x(Ie,e.ADD_TAGS,st)),e.ADD_ATTR&&(ye===Ce&&(ye=Q(ye)),x(ye,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&x(qe,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(Ve===ze&&(Ve=Q(Ve)),x(Ve,e.FORBID_CONTENTS,st)),ke&&(Ie["#text"]=!0),Ne&&x(Ie,["html","head","body"]),Ie.table&&(x(Ie,["tbody"]),delete Be.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,ie=ne.createHTML("")}else void 0===ne&&(ne=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(j,a)),null!==ne&&"string"==typeof ie&&(ie=ne.createHTML(""));A&&A(e),At=e}},dt=x({},[...M,...L,...P]),ht=x({},[...O,...F]),gt=function(e){p(n.removed,{element:e});try{$(e).removeChild(e)}catch(t){W(e)}},ft=function(e,t){try{p(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){p(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Le||Pe)try{gt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},pt=function(e){let t=null,n=null;if(Me)e="<remove></remove>"+e;else{const t=E(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===rt&&Ze===Xe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=ne?ne.createHTML(e):e;if(Ze===Xe)try{t=(new z).parseFromString(i,rt)}catch(e){}if(!t||!t.documentElement){t=oe.createDocument(Ze,"template",null);try{t.documentElement.innerHTML=$e?ie:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),Ze===Xe?se.call(t,Ne?"html":"body")[0]:Ne?t.documentElement:r},mt=function(e){return re.call(e.ownerDocument||e,e,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},_t=function(e){return e instanceof D&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof S)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},It=function(e){return"function"==typeof u&&e instanceof u};function Et(e,t,i){h(e,e=>{e.call(n,t,i,At)})}const yt=function(e){let t=null;if(Et(ce.beforeSanitizeElements,e,null),_t(e))return gt(e),!0;const i=st(e.nodeName);if(Et(ce.uponSanitizeElement,e,{tagName:i,allowedTags:Ie}),Qe&&e.hasChildNodes()&&!It(e.firstElementChild)&&v(/<[/\w!]/g,e.innerHTML)&&v(/<[/\w!]/g,e.textContent))return gt(e),!0;if(7===e.nodeType)return gt(e),!0;if(Qe&&8===e.nodeType&&v(/<[/\w]/g,e.data))return gt(e),!0;if(!Ie[i]||Be[i]){if(!Be[i]&&bt(i)){if(be.tagNameCheck instanceof RegExp&&v(be.tagNameCheck,i))return!1;if(be.tagNameCheck instanceof Function&&be.tagNameCheck(i))return!1}if(ke&&!Ve[i]){const t=$(e)||e.parentNode,n=X(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i){const o=q(n[i],!0);o.__removalCount=(e.__removalCount||0)+1,t.insertBefore(o,K(e))}}return gt(e),!0}return e instanceof d&&!function(e){let t=$(e);t&&t.tagName||(t={namespaceURI:Ze,tagName:"template"});const n=_(e.tagName),i=_(t.tagName);return!!et[e.namespaceURI]&&(e.namespaceURI===Ke?t.namespaceURI===Xe?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===i||nt[i]):Boolean(dt[n]):e.namespaceURI===Je?t.namespaceURI===Xe?"math"===n:t.namespaceURI===Ke?"math"===n&&it[i]:Boolean(ht[n]):e.namespaceURI===Xe?!(t.namespaceURI===Ke&&!it[i])&&!(t.namespaceURI===Je&&!nt[i])&&!ht[n]&&(ot[n]||!dt[n]):!("application/xhtml+xml"!==rt||!et[e.namespaceURI]))}(e)?(gt(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!v(/<\/no(script|embed|frames)/i,e.innerHTML)?(De&&3===e.nodeType&&(t=e.textContent,h([le,ue,de],e=>{t=y(t,e," ")}),e.textContent!==t&&(p(n.removed,{element:e.cloneNode()}),e.textContent=t)),Et(ce.afterSanitizeElements,e,null),!1):(gt(e),!0)},Ct=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in o||n in ct))return!1;if(Te&&!ve[t]&&v(he,t));else if(we&&v(ge,t));else if(!ye[t]||ve[t]){if(!(bt(e)&&(be.tagNameCheck instanceof RegExp&&v(be.tagNameCheck,e)||be.tagNameCheck instanceof Function&&be.tagNameCheck(e))&&(be.attributeNameCheck instanceof RegExp&&v(be.attributeNameCheck,t)||be.attributeNameCheck instanceof Function&&be.attributeNameCheck(t,e))||"is"===t&&be.allowCustomizedBuiltInElements&&(be.tagNameCheck instanceof RegExp&&v(be.tagNameCheck,n)||be.tagNameCheck instanceof Function&&be.tagNameCheck(n))))return!1}else if(qe[t]);else if(v(_e,y(n,pe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==C(n,"data:")||!je[e])if(Se&&!v(fe,y(n,pe,"")));else if(n)return!1;return!0},bt=function(e){return"annotation-xml"!==e&&E(e,me)},Bt=function(e){Et(ce.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||_t(e))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let o=t.length;for(;o--;){const r=t[o],{name:a,namespaceURI:s,value:A}=r,c=st(a),l=A;let u="value"===a?l:b(l);if(i.attrName=c,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,Et(ce.uponSanitizeAttribute,e,i),u=i.attrValue,!Ue||"id"!==c&&"name"!==c||(ft(a,e),u="user-content-"+u),Qe&&v(/((--!?|])>)|<\/(style|title|textarea)/i,u)){ft(a,e);continue}if("attributename"===c&&E(u,"href")){ft(a,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){ft(a,e);continue}if(!xe&&v(/\/>/i,u)){ft(a,e);continue}De&&h([le,ue,de],e=>{u=y(u,e," ")});const d=st(e.nodeName);if(Ct(d,c,u)){if(ne&&"object"==typeof j&&"function"==typeof j.getAttributeType)if(s);else switch(j.getAttributeType(d,c)){case"TrustedHTML":u=ne.createHTML(u);break;case"TrustedScriptURL":u=ne.createScriptURL(u)}if(u!==l)try{s?e.setAttributeNS(s,a,u):e.setAttribute(a,u),_t(e)?gt(e):f(n.removed)}catch(t){ft(a,e)}}else ft(a,e)}Et(ce.afterSanitizeAttributes,e,null)},vt=function e(t){let n=null;const i=mt(t);for(Et(ce.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)Et(ce.uponSanitizeShadowNode,n,null),yt(n),Bt(n),n.content instanceof s&&e(n.content);Et(ce.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,a=null,A=null;if($e=!e,$e&&(e="\x3c!--\x3e"),"string"!=typeof e&&!It(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Re||ut(t),n.removed=[],"string"==typeof e&&(Ge=!1),Ge){if(e.nodeName){const t=st(e.nodeName);if(!Ie[t]||Be[t])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof u)i=pt("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!Le&&!De&&!Ne&&-1===e.indexOf("<"))return ne&&Oe?ne.createHTML(e):e;if(i=pt(e),!i)return Le?null:Oe?ie:""}i&&Me&&gt(i.firstChild);const c=mt(Ge?e:i);for(;a=c.nextNode();)yt(a),Bt(a),a.content instanceof s&&vt(a.content);if(Ge)return e;if(Le){if(Pe)for(A=ae.call(i.ownerDocument);i.firstChild;)A.appendChild(i.firstChild);else A=i;return(ye.shadowroot||ye.shadowrootmode)&&(A=Ae.call(r,A,!0)),A}let l=Ne?i.outerHTML:i.innerHTML;return Ne&&Ie["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&v(Z,i.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+l),De&&h([le,ue,de],e=>{l=y(l,e," ")}),ne&&Oe?ne.createHTML(l):l},n.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Re=!0},n.clearConfig=function(){At=null,Re=!1},n.isValidAttribute=function(e,t,n){At||ut({});const i=st(e),o=st(t);return Ct(i,o,n)},n.addHook=function(e,t){"function"==typeof t&&p(ce[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=g(ce[e],t);return-1===n?void 0:m(ce[e],n,1)[0]}return f(ce[e])},n.removeHooks=function(e){ce[e]=[]},n.removeAllHooks=function(){ce={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}(),ie=n(369031),oe=n(491446);let re=0;const ae={};function se(e,t){let n;ie.A.typeOf.string("html",e);const i=e;(0,oe.A)(ae[i])?n=ae[i]:(n=re++,ae[i]=n),t=t??!1,this._id=n,this._html=e,this._showOnScreen=t,this._element=void 0}Object.defineProperties(se.prototype,{html:{get:function(){return this._html}},id:{get:function(){return this._id}},showOnScreen:{get:function(){return this._showOnScreen},set:function(e){this._showOnScreen=e}},element:{get:function(){if(!(0,oe.A)(this._element)){const e=ne.sanitize(this._html),t=document.createElement("div");t.className="cesium-credit-wrapper",t._creditId=this._id,t.style.display="inline",t.innerHTML=e;const n=t.querySelectorAll("a");for(let e=0;e<n.length;e++)n[e].setAttribute("target","_blank");this._element=t}return this._element}}}),se.equals=function(e,t){return e===t||(0,oe.A)(e)&&(0,oe.A)(t)&&e._id===t._id&&e._showOnScreen===t._showOnScreen},se.prototype.equals=function(e){return se.equals(this,e)},se.prototype.isIon=function(){return-1!==this.html.indexOf("ion-credit.png")},se.getIonCredit=function(e){const t=(0,oe.A)(e.collapsible)&&!e.collapsible;return new se(e.html,t)},se.clone=function(e){if((0,oe.A)(e))return new se(e.html,e.showOnScreen)};const Ae=se},317061:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(660662),o=n(434067),r=n(267980),a=n(571804),s=n(302982),A=n(915325),c=n(491446),l=n(605971),u=n(944479),d=n(305439),h=n(46362),g=n(794554),f=n(874915),p=n(367817),m=n(402330),_=n(769534);const I=new o.A,E=new r.A,y=new r.A,C=new r.A,b=new r.A;function B(e){const t=(e=e??A.A.EMPTY_OBJECT).length,n=e.topRadius,i=e.bottomRadius,o=e.vertexFormat??_.A.DEFAULT,r=e.slices??128;if(!(0,c.A)(t))throw new l.A("options.length must be defined.");if(!(0,c.A)(n))throw new l.A("options.topRadius must be defined.");if(!(0,c.A)(i))throw new l.A("options.bottomRadius must be defined.");if(r<3)throw new l.A("options.slices must be greater than or equal to 3.");if((0,c.A)(e.offsetAttribute)&&e.offsetAttribute===g.A.TOP)throw new l.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=_.A.clone(o),this._slices=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}B.packedLength=_.A.packedLength+5,B.pack=function(e,t,n){if(!(0,c.A)(e))throw new l.A("value is required");if(!(0,c.A)(t))throw new l.A("array is required");return n=n??0,_.A.pack(e._vertexFormat,t,n),n+=_.A.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=e._offsetAttribute??-1,t};const v=new _.A,w={vertexFormat:v,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};let T;B.unpack=function(e,t,n){if(!(0,c.A)(e))throw new l.A("array is required");t=t??0;const i=_.A.unpack(e,t,v);t+=_.A.packedLength;const o=e[t++],r=e[t++],a=e[t++],s=e[t++],A=e[t];return(0,c.A)(n)?(n._vertexFormat=_.A.clone(i,n._vertexFormat),n._length=o,n._topRadius=r,n._bottomRadius=a,n._slices=s,n._offsetAttribute=-1===A?void 0:A,n):(w.length=o,w.topRadius=r,w.bottomRadius=a,w.slices=s,w.offsetAttribute=-1===A?void 0:A,new B(w))},B.createGeometry=function(e){let t=e._length;const n=e._topRadius,A=e._bottomRadius,l=e._vertexFormat,_=e._slices;if(t<=0||n<0||A<0||0===n&&0===A)return;const B=_+_,v=_+B,w=B+B,T=s.A.computePositions(t,n,A,_,!0),S=l.st?new Float32Array(2*w):void 0,x=l.normal?new Float32Array(3*w):void 0,D=l.tangent?new Float32Array(3*w):void 0,Q=l.bitangent?new Float32Array(3*w):void 0;let N;const R=l.normal||l.tangent||l.bitangent;if(R){const e=l.tangent||l.bitangent;let i=0,o=0,a=0;const s=Math.atan2(A-n,t),c=E;c.z=Math.sin(s);const u=Math.cos(s);let d=C,h=y;for(N=0;N<_;N++){const t=N/_*p.A.TWO_PI,n=u*Math.cos(t),s=u*Math.sin(t);R&&(c.x=n,c.y=s,e&&(d=r.A.normalize(r.A.cross(r.A.UNIT_Z,c,d),d)),l.normal&&(x[i++]=c.x,x[i++]=c.y,x[i++]=c.z,x[i++]=c.x,x[i++]=c.y,x[i++]=c.z),l.tangent&&(D[o++]=d.x,D[o++]=d.y,D[o++]=d.z,D[o++]=d.x,D[o++]=d.y,D[o++]=d.z),l.bitangent&&(h=r.A.normalize(r.A.cross(c,d,h),h),Q[a++]=h.x,Q[a++]=h.y,Q[a++]=h.z,Q[a++]=h.x,Q[a++]=h.y,Q[a++]=h.z))}for(N=0;N<_;N++)l.normal&&(x[i++]=0,x[i++]=0,x[i++]=-1),l.tangent&&(D[o++]=1,D[o++]=0,D[o++]=0),l.bitangent&&(Q[a++]=0,Q[a++]=-1,Q[a++]=0);for(N=0;N<_;N++)l.normal&&(x[i++]=0,x[i++]=0,x[i++]=1),l.tangent&&(D[o++]=1,D[o++]=0,D[o++]=0),l.bitangent&&(Q[a++]=0,Q[a++]=1,Q[a++]=0)}const M=12*_-12,L=f.A.createTypedArray(w,M);let P=0,O=0;for(N=0;N<_-1;N++)L[P++]=O,L[P++]=O+2,L[P++]=O+3,L[P++]=O,L[P++]=O+3,L[P++]=O+1,O+=2;for(L[P++]=B-2,L[P++]=0,L[P++]=1,L[P++]=B-2,L[P++]=1,L[P++]=B-1,N=1;N<_-1;N++)L[P++]=B+N+1,L[P++]=B+N,L[P++]=B;for(N=1;N<_-1;N++)L[P++]=v,L[P++]=v+N,L[P++]=v+N+1;let F=0;if(l.st){const e=Math.max(n,A);for(N=0;N<w;N++){const t=r.A.fromArray(T,3*N,b);S[F++]=(t.x+e)/(2*e),S[F++]=(t.y+e)/(2*e)}}const U=new h.A;l.position&&(U.position=new d.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:T})),l.normal&&(U.normal=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:x})),l.tangent&&(U.tangent=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:D})),l.bitangent&&(U.bitangent=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:Q})),l.st&&(U.st=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:2,values:S})),I.x=.5*t,I.y=Math.max(A,n);const k=new i.A(r.A.ZERO,o.A.magnitude(I));if((0,c.A)(e._offsetAttribute)){t=T.length;const n=e._offsetAttribute===g.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);U.applyOffset=new d.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.A({attributes:U,indices:L,primitiveType:m.A.TRIANGLES,boundingSphere:k,offsetAttribute:e._offsetAttribute})},B.getUnitCylinder=function(){return(0,c.A)(T)||(T=B.createGeometry(new B({topRadius:1,bottomRadius:1,length:1,vertexFormat:_.A.POSITION_ONLY}))),T};const S=B},302982:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(367817);const o={computePositions:function(e,t,n,o,r){const a=.5*e,s=-a,A=o+o,c=new Float64Array(3*(r?2*A:A));let l,u=0,d=0;const h=r?3*A:0,g=r?3*(A+o):3*o;for(l=0;l<o;l++){const e=l/o*i.A.TWO_PI,A=Math.cos(e),f=Math.sin(e),p=A*n,m=f*n,_=A*t,I=f*t;c[d+h]=p,c[d+h+1]=m,c[d+h+2]=s,c[d+g]=_,c[d+g+1]=I,c[d+g+2]=a,d+=3,r&&(c[u++]=p,c[u++]=m,c[u++]=s,c[u++]=_,c[u++]=I,c[u++]=a)}return c}}},902503:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(660662),o=n(434067),r=n(267980),a=n(369031),s=n(571804),A=n(302982),c=n(915325),l=n(491446),u=n(605971),d=n(944479),h=n(305439),g=n(46362),f=n(794554),p=n(874915),m=n(402330);const _=new o.A;function I(e){const t=(e=e??c.A.EMPTY_OBJECT).length,n=e.topRadius,i=e.bottomRadius,o=e.slices??128,r=Math.max(e.numberOfVerticalLines??16,0);if(a.A.typeOf.number("options.positions",t),a.A.typeOf.number("options.topRadius",n),a.A.typeOf.number("options.bottomRadius",i),a.A.typeOf.number.greaterThanOrEquals("options.slices",o,3),(0,l.A)(e.offsetAttribute)&&e.offsetAttribute===f.A.TOP)throw new u.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._slices=o,this._numberOfVerticalLines=r,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderOutlineGeometry"}I.packedLength=6,I.pack=function(e,t,n){return a.A.typeOf.object("value",e),a.A.defined("array",t),n=n??0,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n++]=e._numberOfVerticalLines,t[n]=e._offsetAttribute??-1,t};const E={length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};I.unpack=function(e,t,n){a.A.defined("array",e),t=t??0;const i=e[t++],o=e[t++],r=e[t++],s=e[t++],A=e[t++],c=e[t];return(0,l.A)(n)?(n._length=i,n._topRadius=o,n._bottomRadius=r,n._slices=s,n._numberOfVerticalLines=A,n._offsetAttribute=-1===c?void 0:c,n):(E.length=i,E.topRadius=o,E.bottomRadius=r,E.slices=s,E.numberOfVerticalLines=A,E.offsetAttribute=-1===c?void 0:c,new I(E))},I.createGeometry=function(e){let t=e._length;const n=e._topRadius,a=e._bottomRadius,c=e._slices,u=e._numberOfVerticalLines;if(t<=0||n<0||a<0||0===n&&0===a)return;const I=2*c,E=A.A.computePositions(t,n,a,c,!1);let y,C=2*c;if(u>0){const e=Math.min(u,c);y=Math.round(c/e),C+=e}const b=p.A.createTypedArray(I,2*C);let B,v=0;for(B=0;B<c-1;B++)b[v++]=B,b[v++]=B+1,b[v++]=B+c,b[v++]=B+1+c;if(b[v++]=c-1,b[v++]=0,b[v++]=c+c-1,b[v++]=c,u>0)for(B=0;B<c;B+=y)b[v++]=B,b[v++]=B+c;const w=new g.A;w.position=new h.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:E}),_.x=.5*t,_.y=Math.max(a,n);const T=new i.A(r.A.ZERO,o.A.magnitude(_));if((0,l.A)(e._offsetAttribute)){t=E.length;const n=e._offsetAttribute===f.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);w.applyOffset=new h.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new d.A({attributes:w,indices:b,primitiveType:m.A.LINES,boundingSphere:T,offsetAttribute:e._offsetAttribute})};const y=I},330926:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(571804),o=n(491446),r=n(605971);function a(e,t){if(e=e??0,(t=t??Number.MAX_VALUE)<=e)throw new r.A("far distance must be greater than near distance.");this.value=new Float32Array([e,t])}Object.defineProperties(a.prototype,{componentDatatype:{get:function(){return i.A.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}}),a.fromDistanceDisplayCondition=function(e){if(!(0,o.A)(e))throw new r.A("distanceDisplayCondition is required.");if(e.far<=e.near)throw new r.A("distanceDisplayCondition.far distance must be greater than distanceDisplayCondition.near distance.");return new a(e.near,e.far)},a.toValue=function(e,t){if(!(0,o.A)(e))throw new r.A("distanceDisplayCondition is required.");return(0,o.A)(t)?(t[0]=e.near,t[1]=e.far,t):new Float32Array([e.near,e.far])};const s=a},634061:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(367817),o=n(369031),r=n(491446);function a(e){o.A.typeOf.object("options",e),o.A.defined("options.comparator",e.comparator),(0,r.A)(e.maximumLength)&&o.A.typeOf.number.greaterThanOrEquals("options.maximumLength",e.maximumLength,0),this._comparator=e.comparator,this._maximumLength=e.maximumLength,this._array=(0,r.A)(e.maximumLength)?new Array(e.maximumLength):[],this._length=0}function s(e,t,n){const i=e._array,o=i[t];i[t]=i[n],i[n]=o}function A(e,t,n){return e._comparator(e._array[t],e._array[n])<0}function c(e,t,n){return e._comparator(e._array[t],e._array[n])>0}function l(e,t){if(0===t)return;const n=Math.floor(i.A.log2(t+1))%2==0,o=Math.floor((t-1)/2),r=A(e,t,o);for(r!==n&&(s(e,t,o),t=o);t>=3;){const n=Math.floor((t-3)/4);if(A(e,t,n)!==r)break;s(e,t,n),t=n}}function u(e,t){const n=e._length,o=Math.floor(i.A.log2(t+1))%2==0;let r;for(;(r=2*t+1)<n;){let i=r;const a=r+1;if(a<n){A(e,a,i)===o&&(i=a);const t=2*r+1,s=Math.max(Math.min(n-t,4),0);for(let n=0;n<s;n++){const r=t+n;A(e,r,i)===o&&(i=r)}}if(A(e,i,t)===o&&(s(e,i,t),i!==r&&i!==a)){const t=Math.floor((i-1)/2);c(e,i,t)===o&&s(e,i,t)}t=i}}Object.defineProperties(a.prototype,{length:{get:function(){return this._length}},maximumLength:{get:function(){return this._maximumLength},set:function(e){if((0,r.A)(e)){for(o.A.typeOf.number.greaterThanOrEquals("maximumLength",e,0);this._length>e;)this.removeMinimum();this._array.length=e}this._maximumLength=e}},internalArray:{get:function(){return this._array}},comparator:{get:function(){return this._comparator}}}),a.prototype.clone=function(){const e=this._maximumLength,t=this._comparator,n=this._array,i=this._length,o=new a({comparator:t,maximumLength:e});o._length=i;for(let e=0;e<i;e++)o._array[e]=n[e];return o},a.prototype.reset=function(){this._length=0;const e=this._maximumLength;if((0,r.A)(e))for(let t=0;t<e;t++)this._array[t]=void 0;else this._array.length=0},a.prototype.resort=function(){const e=this._length;for(let t=0;t<e;t++)l(this,t)},a.prototype.insert=function(e){let t;const n=this._maximumLength;if((0,r.A)(n)){if(0===n)return;if(this._length===n){const n=this._array[0];if(this._comparator(e,n)<=0)return e;t=this.removeMinimum()}}const i=this._length;return this._array[i]=e,this._length++,l(this,i),t},a.prototype.removeMinimum=function(){const e=this._length;if(0===e)return;this._length--;const t=this._array[0];return e>=2&&(this._array[0]=this._array[e-1],u(this,0)),this._array[e-1]=void 0,t},a.prototype.removeMaximum=function(){const e=this._length;if(0===e)return;let t;if(this._length--,e<=2)t=this._array[e-1];else{const n=c(this,1,2)?1:2;t=this._array[n],this._array[n]=this._array[e-1],e>=4&&u(this,n)}return this._array[e-1]=void 0,t},a.prototype.getMinimum=function(){if(0!==this._length)return this._array[0]},a.prototype.getMaximum=function(){const e=this._length;if(0!==e)return e<=2?this._array[e-1]:this._array[c(this,1,2)?1:2]};const d=a},606707:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446);function o(){this.head=void 0,this.tail=void 0,this._length=0}function r(e,t,n){this.item=e,this.previous=t,this.next=n}function a(e,t){(0,i.A)(t.previous)&&(0,i.A)(t.next)?(t.previous.next=t.next,t.next.previous=t.previous):(0,i.A)(t.previous)?(t.previous.next=void 0,e.tail=t.previous):(0,i.A)(t.next)?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}Object.defineProperties(o.prototype,{length:{get:function(){return this._length}}}),o.prototype.add=function(e){const t=new r(e,this.tail,void 0);return(0,i.A)(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t},o.prototype.remove=function(e){(0,i.A)(e)&&(a(this,e),--this._length)},o.prototype.splice=function(e,t){if(e===t)return;a(this,t);const n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e};const s=o},924290:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(50040);const o={LINEAR_NONE:i.GS.Linear.None,QUADRATIC_IN:i.GS.Quadratic.In,QUADRATIC_OUT:i.GS.Quadratic.Out,QUADRATIC_IN_OUT:i.GS.Quadratic.InOut,CUBIC_IN:i.GS.Cubic.In,CUBIC_OUT:i.GS.Cubic.Out,CUBIC_IN_OUT:i.GS.Cubic.InOut,QUARTIC_IN:i.GS.Quartic.In,QUARTIC_OUT:i.GS.Quartic.Out,QUARTIC_IN_OUT:i.GS.Quartic.InOut,QUINTIC_IN:i.GS.Quintic.In,QUINTIC_OUT:i.GS.Quintic.Out,QUINTIC_IN_OUT:i.GS.Quintic.InOut,SINUSOIDAL_IN:i.GS.Sinusoidal.In,SINUSOIDAL_OUT:i.GS.Sinusoidal.Out,SINUSOIDAL_IN_OUT:i.GS.Sinusoidal.InOut,EXPONENTIAL_IN:i.GS.Exponential.In,EXPONENTIAL_OUT:i.GS.Exponential.Out,EXPONENTIAL_IN_OUT:i.GS.Exponential.InOut,CIRCULAR_IN:i.GS.Circular.In,CIRCULAR_OUT:i.GS.Circular.Out,CIRCULAR_IN_OUT:i.GS.Circular.InOut,ELASTIC_IN:i.GS.Elastic.In,ELASTIC_OUT:i.GS.Elastic.Out,ELASTIC_IN_OUT:i.GS.Elastic.InOut,BACK_IN:i.GS.Back.In,BACK_OUT:i.GS.Back.Out,BACK_IN_OUT:i.GS.Back.InOut,BOUNCE_IN:i.GS.Bounce.In,BOUNCE_OUT:i.GS.Bounce.Out,BOUNCE_IN_OUT:i.GS.Bounce.InOut},r=Object.freeze(o)},602317:(e,t,n)=>{"use strict";n.d(t,{A:()=>ee});var i=n(660662),o=n(434067),r=n(267980),a=n(336946),s=n(369031),A=n(571804),c=n(915325),l=n(491446),u=n(605971),d=n(715726),h=n(610750),g=n(653577),f=n(944479),p=n(305439),m=n(46362),_=n(75200),I=n(794554),E=n(34233),y=n(874915),C=n(367817),b=n(331185),B=n(402330),v=n(99479),w=n(697422),T=n(769534);const S=new r.A,x=new r.A,D=new r.A,Q=new r.A,N=new o.A,R=new b.A,M=new b.A,L=new v.A,P=new r.A,O=new r.A,F=new r.A,U=new a.A,k=new r.A,G=new o.A,H=new o.A;function V(e,t,n){const i=t.vertexFormat,a=t.center,s=t.semiMajorAxis,c=t.semiMinorAxis,u=t.ellipsoid,h=t.stRotation,f=n?e.length/3*2:e.length/3,_=t.shadowVolume,E=i.st?new Float32Array(2*f):void 0,y=i.normal?new Float32Array(3*f):void 0,C=i.tangent?new Float32Array(3*f):void 0,B=i.bitangent?new Float32Array(3*f):void 0,w=_?new Float32Array(3*f):void 0;let T=0,Q=P,V=O,z=F;const j=new g.A(u),Y=j.project(u.cartesianToCartographic(a,U),k),q=u.scaleToGeodeticSurface(a,S);u.geodeticSurfaceNormal(q,q);let W=R,J=M;if(0!==h){let e=v.A.fromAxisAngle(q,h,L);W=b.A.fromQuaternion(e,W),e=v.A.fromAxisAngle(q,-h,L),J=b.A.fromQuaternion(e,J)}else W=b.A.clone(b.A.IDENTITY,W),J=b.A.clone(b.A.IDENTITY,J);const K=o.A.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,G),X=o.A.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,H);let Z=e.length;const $=n?Z:0,ee=$/3*2;for(let t=0;t<Z;t+=3){const o=t+1,a=t+2,A=r.A.fromArray(e,t,S);if(i.st){const e=b.A.multiplyByVector(W,A,x),t=j.project(u.cartesianToCartographic(e,U),D);r.A.subtract(t,Y,t),N.x=(t.x+s)/(2*s),N.y=(t.y+c)/(2*c),K.x=Math.min(N.x,K.x),K.y=Math.min(N.y,K.y),X.x=Math.max(N.x,X.x),X.y=Math.max(N.y,X.y),n&&(E[T+ee]=N.x,E[T+1+ee]=N.y),E[T++]=N.x,E[T++]=N.y}(i.normal||i.tangent||i.bitangent||_)&&(Q=u.geodeticSurfaceNormal(A,Q),_&&(w[t+$]=-Q.x,w[o+$]=-Q.y,w[a+$]=-Q.z),(i.normal||i.tangent||i.bitangent)&&((i.tangent||i.bitangent)&&(V=r.A.normalize(r.A.cross(r.A.UNIT_Z,Q,V),V),b.A.multiplyByVector(J,V,V)),i.normal&&(y[t]=Q.x,y[o]=Q.y,y[a]=Q.z,n&&(y[t+$]=-Q.x,y[o+$]=-Q.y,y[a+$]=-Q.z)),i.tangent&&(C[t]=V.x,C[o]=V.y,C[a]=V.z,n&&(C[t+$]=-V.x,C[o+$]=-V.y,C[a+$]=-V.z)),i.bitangent&&(z=r.A.normalize(r.A.cross(Q,V,z),z),B[t]=z.x,B[o]=z.y,B[a]=z.z,n&&(B[t+$]=z.x,B[o+$]=z.y,B[a+$]=z.z))))}if(i.st){Z=E.length;for(let e=0;e<Z;e+=2)E[e]=(E[e]-K.x)/(X.x-K.x),E[e+1]=(E[e+1]-K.y)/(X.y-K.y)}const te=new m.A;if(i.position){const i=d.A.raisePositionsToHeight(e,t,n);te.position=new p.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:i})}if(i.st&&(te.st=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:E})),i.normal&&(te.normal=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:y})),i.tangent&&(te.tangent=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:C})),i.bitangent&&(te.bitangent=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:B})),_&&(te.extrudeDirection=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:w})),n&&(0,l.A)(t.offsetAttribute)){let e=new Uint8Array(f);if(t.offsetAttribute===I.A.TOP)e=e.fill(1,0,f/2);else{const n=t.offsetAttribute===I.A.NONE?0:1;e=e.fill(n)}te.applyOffset=new p.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return te}function z(e){const t=new Array(e*(e+1)*12-6);let n,i,o,r,a,s=0;for(n=0,o=1,r=0;r<3;r++)t[s++]=o++,t[s++]=n,t[s++]=o;for(r=2;r<e+1;++r){for(o=r*(r+1)-1,n=(r-1)*r-1,t[s++]=o++,t[s++]=n,t[s++]=o,i=2*r,a=0;a<i-1;++a)t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n,t[s++]=o;t[s++]=o++,t[s++]=n,t[s++]=o}for(i=2*e,++o,++n,r=0;r<i-1;++r)t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n,t[s++]=o;for(t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n++,t[s++]=n,++n,r=e-1;r>1;--r){for(t[s++]=n++,t[s++]=n,t[s++]=o,i=2*r,a=0;a<i-1;++a)t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n,t[s++]=o;t[s++]=n++,t[s++]=n++,t[s++]=o++}for(r=0;r<3;r++)t[s++]=n++,t[s++]=n,t[s++]=o;return t}let j=new r.A;const Y=new i.A,q=new i.A;function W(e,t,n,i,o,a,s){const A=d.A.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:o},!1,!0).outerPositions,c=A.length/3,l=new Array(c);for(let e=0;e<c;++e)l[e]=r.A.fromArray(A,3*e);const u=w.A.fromCartesianArray(l,a,s);return u.width>C.A.PI&&(u.north=u.north>0?C.A.PI_OVER_TWO-C.A.EPSILON7:u.north,u.south=u.south<0?C.A.EPSILON7-C.A.PI_OVER_TWO:u.south,u.east=C.A.PI,u.west=-C.A.PI),u}function J(e){const t=(e=e??c.A.EMPTY_OBJECT).center,n=e.ellipsoid??h.A.default,i=e.semiMajorAxis,o=e.semiMinorAxis,a=e.granularity??C.A.RADIANS_PER_DEGREE,A=e.vertexFormat??T.A.DEFAULT;if(s.A.defined("options.center",t),s.A.typeOf.number("options.semiMajorAxis",i),s.A.typeOf.number("options.semiMinorAxis",o),i<o)throw new u.A("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(a<=0)throw new u.A("granularity must be greater than zero.");const l=e.height??0,d=e.extrudedHeight??l;this._center=r.A.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=h.A.clone(n),this._rotation=e.rotation??0,this._stRotation=e.stRotation??0,this._height=Math.max(d,l),this._granularity=a,this._vertexFormat=T.A.clone(A),this._extrudedHeight=Math.min(d,l),this._shadowVolume=e.shadowVolume??!1,this._workerName="createEllipseGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}J.packedLength=r.A.packedLength+h.A.packedLength+T.A.packedLength+9,J.pack=function(e,t,n){return s.A.defined("value",e),s.A.defined("array",t),n=n??0,r.A.pack(e._center,t,n),n+=r.A.packedLength,h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,T.A.pack(e._vertexFormat,t,n),n+=T.A.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=e._offsetAttribute??-1,t};const K=new r.A,X=new h.A,Z=new T.A,$={center:K,ellipsoid:X,vertexFormat:Z,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};J.unpack=function(e,t,n){s.A.defined("array",e),t=t??0;const i=r.A.unpack(e,t,K);t+=r.A.packedLength;const o=h.A.unpack(e,t,X);t+=h.A.packedLength;const a=T.A.unpack(e,t,Z);t+=T.A.packedLength;const A=e[t++],c=e[t++],u=e[t++],d=e[t++],g=e[t++],f=e[t++],p=e[t++],m=1===e[t++],_=e[t];return(0,l.A)(n)?(n._center=r.A.clone(i,n._center),n._ellipsoid=h.A.clone(o,n._ellipsoid),n._vertexFormat=T.A.clone(a,n._vertexFormat),n._semiMajorAxis=A,n._semiMinorAxis=c,n._rotation=u,n._stRotation=d,n._height=g,n._granularity=f,n._extrudedHeight=p,n._shadowVolume=m,n._offsetAttribute=-1===_?void 0:_,n):($.height=g,$.extrudedHeight=p,$.granularity=f,$.stRotation=d,$.rotation=u,$.semiMajorAxis=A,$.semiMinorAxis=c,$.shadowVolume=m,$.offsetAttribute=-1===_?void 0:_,new J($))},J.computeRectangle=function(e,t){const n=(e=e??c.A.EMPTY_OBJECT).center,i=e.ellipsoid??h.A.default,o=e.semiMajorAxis,r=e.semiMinorAxis,a=e.granularity??C.A.RADIANS_PER_DEGREE,A=e.rotation??0;if(s.A.defined("options.center",n),s.A.typeOf.number("options.semiMajorAxis",o),s.A.typeOf.number("options.semiMinorAxis",r),o<r)throw new u.A("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(a<=0)throw new u.A("granularity must be greater than zero.");return W(n,o,r,A,a,i,t)},J.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,a=!C.A.equalsEpsilon(t,n,0,C.A.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const s={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,vertexFormat:e._vertexFormat,stRotation:e._stRotation};let c;if(a)s.extrudedHeight=n,s.shadowVolume=e._shadowVolume,s.offsetAttribute=e._offsetAttribute,c=function(e){const t=e.center,n=e.ellipsoid,a=e.semiMajorAxis;let s=r.A.multiplyByScalar(n.geodeticSurfaceNormal(t,S),e.height,S);Y.center=r.A.add(t,s,Y.center),Y.radius=a,s=r.A.multiplyByScalar(n.geodeticSurfaceNormal(t,s),e.extrudedHeight,s),q.center=r.A.add(t,s,q.center),q.radius=a;const c=d.A.computeEllipsePositions(e,!0,!0),u=c.positions,h=c.numPts,C=c.outerPositions,w=i.A.union(Y,q),T=V(u,e,!0);let M=z(h);const j=M.length;M.length=2*j;const W=u.length/3;for(let e=0;e<j;e+=3)M[e+j]=M[e+2]+W,M[e+1+j]=M[e+1]+W,M[e+2+j]=M[e]+W;const J=y.A.createTypedArray(2*W/3,M),K=new f.A({attributes:T,indices:J,primitiveType:B.A.TRIANGLES}),X=function(e,t){const n=t.vertexFormat,i=t.center,a=t.semiMajorAxis,s=t.semiMinorAxis,c=t.ellipsoid,u=t.height,d=t.extrudedHeight,h=t.stRotation,f=e.length/3*2,_=new Float64Array(3*f),E=n.st?new Float32Array(2*f):void 0,y=n.normal?new Float32Array(3*f):void 0,C=n.tangent?new Float32Array(3*f):void 0,B=n.bitangent?new Float32Array(3*f):void 0,w=t.shadowVolume,T=w?new Float32Array(3*f):void 0;let M=0,V=P,z=O,j=F;const Y=new g.A(c),q=Y.project(c.cartesianToCartographic(i,U),k),W=c.scaleToGeodeticSurface(i,S);c.geodeticSurfaceNormal(W,W);const J=v.A.fromAxisAngle(W,h,L),K=b.A.fromQuaternion(J,R),X=o.A.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,G),Z=o.A.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,H);let $=e.length;const ee=$/3*2;for(let t=0;t<$;t+=3){const i=t+1,o=t+2;let A,l=r.A.fromArray(e,t,S);if(n.st){const e=b.A.multiplyByVector(K,l,x),t=Y.project(c.cartesianToCartographic(e,U),D);r.A.subtract(t,q,t),N.x=(t.x+a)/(2*a),N.y=(t.y+s)/(2*s),X.x=Math.min(N.x,X.x),X.y=Math.min(N.y,X.y),Z.x=Math.max(N.x,Z.x),Z.y=Math.max(N.y,Z.y),E[M+ee]=N.x,E[M+1+ee]=N.y,E[M++]=N.x,E[M++]=N.y}l=c.scaleToGeodeticSurface(l,l),A=r.A.clone(l,x),V=c.geodeticSurfaceNormal(l,V),w&&(T[t+$]=-V.x,T[i+$]=-V.y,T[o+$]=-V.z);let h=r.A.multiplyByScalar(V,u,Q);if(l=r.A.add(l,h,l),h=r.A.multiplyByScalar(V,d,h),A=r.A.add(A,h,A),n.position&&(_[t+$]=A.x,_[i+$]=A.y,_[o+$]=A.z,_[t]=l.x,_[i]=l.y,_[o]=l.z),n.normal||n.tangent||n.bitangent){j=r.A.clone(V,j);const a=r.A.fromArray(e,(t+3)%$,Q);r.A.subtract(a,l,a);const s=r.A.subtract(A,l,D);V=r.A.normalize(r.A.cross(s,a,V),V),n.normal&&(y[t]=V.x,y[i]=V.y,y[o]=V.z,y[t+$]=V.x,y[i+$]=V.y,y[o+$]=V.z),n.tangent&&(z=r.A.normalize(r.A.cross(j,V,z),z),C[t]=z.x,C[i]=z.y,C[o]=z.z,C[t+$]=z.x,C[t+1+$]=z.y,C[t+2+$]=z.z),n.bitangent&&(B[t]=j.x,B[i]=j.y,B[o]=j.z,B[t+$]=j.x,B[i+$]=j.y,B[o+$]=j.z)}}if(n.st){$=E.length;for(let e=0;e<$;e+=2)E[e]=(E[e]-X.x)/(Z.x-X.x),E[e+1]=(E[e+1]-X.y)/(Z.y-X.y)}const te=new m.A;if(n.position&&(te.position=new p.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:_})),n.st&&(te.st=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:E})),n.normal&&(te.normal=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:y})),n.tangent&&(te.tangent=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:C})),n.bitangent&&(te.bitangent=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:B})),w&&(te.extrudeDirection=new p.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:T})),(0,l.A)(t.offsetAttribute)){let e=new Uint8Array(f);if(t.offsetAttribute===I.A.TOP)e=e.fill(1,0,f/2);else{const n=t.offsetAttribute===I.A.NONE?0:1;e=e.fill(n)}te.applyOffset=new p.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return te}(C,e);M=function(e){const t=e.length/3,n=y.A.createTypedArray(t,6*t);let i=0;for(let e=0;e<t;e++){const o=e,r=e+t,a=(o+1)%t,s=a+t;n[i++]=o,n[i++]=r,n[i++]=a,n[i++]=a,n[i++]=r,n[i++]=s}return n}(C);const Z=y.A.createTypedArray(2*C.length/3,M),$=new f.A({attributes:X,indices:Z,primitiveType:B.A.TRIANGLES}),ee=E.A.combineInstances([new _.A({geometry:K}),new _.A({geometry:$})]);return{boundingSphere:w,attributes:ee[0].attributes,indices:ee[0].indices}}(s);else if(c=function(e){const t=e.center;j=r.A.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,j),e.height,j),j=r.A.add(t,j,j);const n=new i.A(j,e.semiMajorAxis),o=d.A.computeEllipsePositions(e,!0,!1),a=o.positions,s=o.numPts,A=V(a,e,!1);let c=z(s);return c=y.A.createTypedArray(a.length/3,c),{boundingSphere:n,attributes:A,indices:c}}(s),(0,l.A)(e._offsetAttribute)){const t=c.attributes.position.values.length,n=e._offsetAttribute===I.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);c.attributes.applyOffset=new p.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new f.A({attributes:c.attributes,indices:c.indices,primitiveType:B.A.TRIANGLES,boundingSphere:c.boundingSphere,offsetAttribute:e._offsetAttribute})},J.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new J({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:o,rotation:e._rotation,stRotation:e._stRotation,granularity:i,extrudedHeight:r,height:a,vertexFormat:T.A.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(J.prototype,{rectangle:{get:function(){return(0,l.A)(this._rectangle)||(this._rectangle=W(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return(0,l.A)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=d.A.computeEllipsePositions({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,rotation:e._rotation,granularity:e._granularity},!1,!0).outerPositions,i=n.length/3,o=new Array(i);for(let e=0;e<i;++e)o[e]=r.A.fromArray(n,3*e);const a=e._ellipsoid,s=e.rectangle;return f.A._textureCoordinateRotationPoints(o,t,a,s)}(this)),this._textureCoordinateRotationPoints}}});const ee=J},715726:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(267980),o=n(367817),r=n(331185),a=n(99479);const s={},A=new i.A,c=new i.A,l=new a.A,u=new r.A;function d(e,t,n,o,s,d,h,g,f,p){const m=e+t;i.A.multiplyByScalar(o,Math.cos(m),A),i.A.multiplyByScalar(n,Math.sin(m),c),i.A.add(A,c,A);let _=Math.cos(e);_*=_;let I=Math.sin(e);I*=I;const E=d/Math.sqrt(h*_+s*I)/g;return a.A.fromAxisAngle(A,E,l),r.A.fromQuaternion(l,u),r.A.multiplyByVector(u,f,p),i.A.normalize(p,p),i.A.multiplyByScalar(p,g,p),p}const h=new i.A,g=new i.A,f=new i.A,p=new i.A;s.raisePositionsToHeight=function(e,t,n){const o=t.ellipsoid,r=t.height,a=t.extrudedHeight,s=n?e.length/3*2:e.length/3,A=new Float64Array(3*s),c=e.length,l=n?c:0;for(let t=0;t<c;t+=3){const s=t+1,c=t+2,u=i.A.fromArray(e,t,h);o.scaleToGeodeticSurface(u,u);const d=i.A.clone(u,g),m=o.geodeticSurfaceNormal(u,p),_=i.A.multiplyByScalar(m,r,f);i.A.add(u,_,u),n&&(i.A.multiplyByScalar(m,a,_),i.A.add(d,_,d),A[t+l]=d.x,A[s+l]=d.y,A[c+l]=d.z),A[t]=u.x,A[s]=u.y,A[c]=u.z}return A};const m=new i.A,_=new i.A,I=new i.A;s.computeEllipsePositions=function(e,t,n){const r=e.semiMinorAxis,a=e.semiMajorAxis,s=e.rotation,A=e.center,c=8*e.granularity,l=r*r,u=a*a,p=a*r,E=i.A.magnitude(A),y=i.A.normalize(A,m);let C=i.A.cross(i.A.UNIT_Z,A,_);C=i.A.normalize(C,C);const b=i.A.cross(y,C,I);let B=1+Math.ceil(o.A.PI_OVER_TWO/c);const v=o.A.PI_OVER_TWO/(B-1);let w=o.A.PI_OVER_TWO-B*v;w<0&&(B-=Math.ceil(Math.abs(w)/v));const T=t?new Array(B*(B+2)*2*3):void 0;let S=0,x=h,D=g;const Q=4*B*3;let N=Q-1,R=0;const M=n?new Array(Q):void 0;let L,P,O,F,U;for(w=o.A.PI_OVER_TWO,x=d(w,s,b,C,l,p,u,E,y,x),t&&(T[S++]=x.x,T[S++]=x.y,T[S++]=x.z),n&&(M[N--]=x.z,M[N--]=x.y,M[N--]=x.x),w=o.A.PI_OVER_TWO-v,L=1;L<B+1;++L){if(x=d(w,s,b,C,l,p,u,E,y,x),D=d(Math.PI-w,s,b,C,l,p,u,E,y,D),t){for(T[S++]=x.x,T[S++]=x.y,T[S++]=x.z,O=2*L+2,P=1;P<O-1;++P)F=P/(O-1),U=i.A.lerp(x,D,F,f),T[S++]=U.x,T[S++]=U.y,T[S++]=U.z;T[S++]=D.x,T[S++]=D.y,T[S++]=D.z}n&&(M[N--]=x.z,M[N--]=x.y,M[N--]=x.x,M[R++]=D.x,M[R++]=D.y,M[R++]=D.z),w=o.A.PI_OVER_TWO-(L+1)*v}for(L=B;L>1;--L){if(w=o.A.PI_OVER_TWO-(L-1)*v,x=d(-w,s,b,C,l,p,u,E,y,x),D=d(w+Math.PI,s,b,C,l,p,u,E,y,D),t){for(T[S++]=x.x,T[S++]=x.y,T[S++]=x.z,O=2*(L-1)+2,P=1;P<O-1;++P)F=P/(O-1),U=i.A.lerp(x,D,F,f),T[S++]=U.x,T[S++]=U.y,T[S++]=U.z;T[S++]=D.x,T[S++]=D.y,T[S++]=D.z}n&&(M[N--]=x.z,M[N--]=x.y,M[N--]=x.x,M[R++]=D.x,M[R++]=D.y,M[R++]=D.z)}w=o.A.PI_OVER_TWO,x=d(-w,s,b,C,l,p,u,E,y,x);const k={};return t&&(T[S++]=x.x,T[S++]=x.y,T[S++]=x.z,k.positions=T,k.numPts=B),n&&(M[N--]=x.z,M[N--]=x.y,M[N--]=x.x,k.outerPositions=M),k};const E=s},692095:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(660662),o=n(267980),r=n(571804),a=n(915325),s=n(491446),A=n(605971),c=n(715726),l=n(610750),u=n(944479),d=n(305439),h=n(46362),g=n(794554),f=n(874915),p=n(367817),m=n(402330);const _=new o.A;let I=new o.A;const E=new i.A,y=new i.A;function C(e){const t=(e=e??a.A.EMPTY_OBJECT).center,n=e.ellipsoid??l.A.default,i=e.semiMajorAxis,r=e.semiMinorAxis,c=e.granularity??p.A.RADIANS_PER_DEGREE;if(!(0,s.A)(t))throw new A.A("center is required.");if(!(0,s.A)(i))throw new A.A("semiMajorAxis is required.");if(!(0,s.A)(r))throw new A.A("semiMinorAxis is required.");if(i<r)throw new A.A("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(c<=0)throw new A.A("granularity must be greater than zero.");const u=e.height??0,d=e.extrudedHeight??u;this._center=o.A.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=r,this._ellipsoid=l.A.clone(n),this._rotation=e.rotation??0,this._height=Math.max(d,u),this._granularity=c,this._extrudedHeight=Math.min(d,u),this._numberOfVerticalLines=Math.max(e.numberOfVerticalLines??16,0),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipseOutlineGeometry"}C.packedLength=o.A.packedLength+l.A.packedLength+8,C.pack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("value is required");if(!(0,s.A)(t))throw new A.A("array is required");return n=n??0,o.A.pack(e._center,t,n),n+=o.A.packedLength,l.A.pack(e._ellipsoid,t,n),n+=l.A.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._numberOfVerticalLines,t[n]=e._offsetAttribute??-1,t};const b=new o.A,B=new l.A,v={center:b,ellipsoid:B,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};C.unpack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("array is required");t=t??0;const i=o.A.unpack(e,t,b);t+=o.A.packedLength;const r=l.A.unpack(e,t,B);t+=l.A.packedLength;const a=e[t++],c=e[t++],u=e[t++],d=e[t++],h=e[t++],g=e[t++],f=e[t++],p=e[t];return(0,s.A)(n)?(n._center=o.A.clone(i,n._center),n._ellipsoid=l.A.clone(r,n._ellipsoid),n._semiMajorAxis=a,n._semiMinorAxis=c,n._rotation=u,n._height=d,n._granularity=h,n._extrudedHeight=g,n._numberOfVerticalLines=f,n._offsetAttribute=-1===p?void 0:p,n):(v.height=d,v.extrudedHeight=g,v.granularity=h,v.rotation=u,v.semiMajorAxis=a,v.semiMinorAxis=c,v.numberOfVerticalLines=f,v.offsetAttribute=-1===p?void 0:p,new C(v))},C.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,a=!p.A.equalsEpsilon(t,n,0,p.A.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const A={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,numberOfVerticalLines:e._numberOfVerticalLines};let l;if(a)A.extrudedHeight=n,A.offsetAttribute=e._offsetAttribute,l=function(e){const t=e.center,n=e.ellipsoid,a=e.semiMajorAxis;let A=o.A.multiplyByScalar(n.geodeticSurfaceNormal(t,_),e.height,_);E.center=o.A.add(t,A,E.center),E.radius=a,A=o.A.multiplyByScalar(n.geodeticSurfaceNormal(t,A),e.extrudedHeight,A),y.center=o.A.add(t,A,y.center),y.radius=a;let l=c.A.computeEllipsePositions(e,!1,!0).outerPositions;const u=new h.A({position:new d.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:c.A.raisePositionsToHeight(l,e,!0)})});l=u.position.values;const m=i.A.union(E,y);let I=l.length/3;if((0,s.A)(e.offsetAttribute)){let t=new Uint8Array(I);if(e.offsetAttribute===g.A.TOP)t=t.fill(1,0,I/2);else{const n=e.offsetAttribute===g.A.NONE?0:1;t=t.fill(n)}u.applyOffset=new d.A({componentDatatype:r.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let C=e.numberOfVerticalLines??16;C=p.A.clamp(C,0,I/2);const b=f.A.createTypedArray(I,2*I+2*C);I/=2;let B,v,w=0;for(B=0;B<I;++B)b[w++]=B,b[w++]=(B+1)%I,b[w++]=B+I,b[w++]=(B+1)%I+I;if(C>0){const e=Math.min(C,I);v=Math.round(I/e);const t=Math.min(v*C,I);for(B=0;B<t;B+=v)b[w++]=B,b[w++]=B+I}return{boundingSphere:m,attributes:u,indices:b}}(A);else if(l=function(e){const t=e.center;I=o.A.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,I),e.height,I),I=o.A.add(t,I,I);const n=new i.A(I,e.semiMajorAxis),a=c.A.computeEllipsePositions(e,!1,!0).outerPositions,s=new h.A({position:new d.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:c.A.raisePositionsToHeight(a,e,!1)})}),A=a.length/3,l=f.A.createTypedArray(A,2*A);let u=0;for(let e=0;e<A;++e)l[u++]=e,l[u++]=(e+1)%A;return{boundingSphere:n,attributes:s,indices:l}}(A),(0,s.A)(e._offsetAttribute)){const t=l.attributes.position.values.length,n=e._offsetAttribute===g.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);l.attributes.applyOffset=new d.A({componentDatatype:r.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.A({attributes:l.attributes,indices:l.indices,primitiveType:m.A.LINES,boundingSphere:l.boundingSphere,offsetAttribute:e._offsetAttribute})};const w=C},87762:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(660662),o=n(434067),r=n(267980),a=n(571804),s=n(915325),A=n(491446),c=n(605971),l=n(610750),u=n(944479),d=n(305439),h=n(46362),g=n(794554),f=n(874915),p=n(367817),m=n(402330),_=n(769534);const I=new r.A,E=new r.A,y=new r.A,C=new r.A,b=new r.A,B=new r.A(1,1,1),v=Math.cos,w=Math.sin;function T(e){const t=(e=e??s.A.EMPTY_OBJECT).radii??B,n=e.innerRadii??t,i=e.minimumClock??0,o=e.maximumClock??p.A.TWO_PI,a=e.minimumCone??0,A=e.maximumCone??p.A.PI,l=Math.round(e.stackPartitions??64),u=Math.round(e.slicePartitions??64),d=e.vertexFormat??_.A.DEFAULT;if(u<3)throw new c.A("options.slicePartitions cannot be less than three.");if(l<3)throw new c.A("options.stackPartitions cannot be less than three.");this._radii=r.A.clone(t),this._innerRadii=r.A.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=a,this._maximumCone=A,this._stackPartitions=l,this._slicePartitions=u,this._vertexFormat=_.A.clone(d),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidGeometry"}T.packedLength=2*r.A.packedLength+_.A.packedLength+7,T.pack=function(e,t,n){if(!(0,A.A)(e))throw new c.A("value is required");if(!(0,A.A)(t))throw new c.A("array is required");return n=n??0,r.A.pack(e._radii,t,n),n+=r.A.packedLength,r.A.pack(e._innerRadii,t,n),n+=r.A.packedLength,_.A.pack(e._vertexFormat,t,n),n+=_.A.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=e._offsetAttribute??-1,t};const S=new r.A,x=new r.A,D=new _.A,Q={radii:S,innerRadii:x,vertexFormat:D,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};let N;T.unpack=function(e,t,n){if(!(0,A.A)(e))throw new c.A("array is required");t=t??0;const i=r.A.unpack(e,t,S);t+=r.A.packedLength;const o=r.A.unpack(e,t,x);t+=r.A.packedLength;const a=_.A.unpack(e,t,D);t+=_.A.packedLength;const s=e[t++],l=e[t++],u=e[t++],d=e[t++],h=e[t++],g=e[t++],f=e[t];return(0,A.A)(n)?(n._radii=r.A.clone(i,n._radii),n._innerRadii=r.A.clone(o,n._innerRadii),n._vertexFormat=_.A.clone(a,n._vertexFormat),n._minimumClock=s,n._maximumClock=l,n._minimumCone=u,n._maximumCone=d,n._stackPartitions=h,n._slicePartitions=g,n._offsetAttribute=-1===f?void 0:f,n):(Q.minimumClock=s,Q.maximumClock=l,Q.minimumCone=u,Q.maximumCone=d,Q.stackPartitions=h,Q.slicePartitions=g,Q.offsetAttribute=-1===f?void 0:f,new T(Q))},T.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const s=e._minimumClock,c=e._maximumClock,_=e._minimumCone,B=e._maximumCone,T=e._vertexFormat;let S,x,D=e._slicePartitions+1,Q=e._stackPartitions+1;D=Math.round(D*Math.abs(c-s)/p.A.TWO_PI),Q=Math.round(Q*Math.abs(B-_)/p.A.PI),D<2&&(D=2),Q<2&&(Q=2);let N=0;const R=[_],M=[s];for(S=0;S<Q;S++)R.push(_+S*(B-_)/(Q-1));for(R.push(B),x=0;x<D;x++)M.push(s+x*(c-s)/(D-1));M.push(c);const L=R.length,P=M.length;let O=0,F=1;const U=n.x!==t.x||n.y!==t.y||n.z!==t.z;let k=!1,G=!1,H=!1;U&&(F=2,_>0&&(k=!0,O+=D-1),B<Math.PI&&(G=!0,O+=D-1),(c-s)%p.A.TWO_PI?(H=!0,O+=2*(Q-1)+1):O+=1);const V=P*L*F,z=new Float64Array(3*V),j=new Array(V).fill(!1),Y=new Array(V).fill(!1),q=D*Q*F,W=6*(q+O+1-(D+Q)*F),J=f.A.createTypedArray(q,W),K=T.normal?new Float32Array(3*V):void 0,X=T.tangent?new Float32Array(3*V):void 0,Z=T.bitangent?new Float32Array(3*V):void 0,$=T.st?new Float32Array(2*V):void 0,ee=new Array(L),te=new Array(L);for(S=0;S<L;S++)ee[S]=w(R[S]),te[S]=v(R[S]);const ne=new Array(P),ie=new Array(P);for(x=0;x<P;x++)ie[x]=v(M[x]),ne[x]=w(M[x]);for(S=0;S<L;S++)for(x=0;x<P;x++)z[N++]=t.x*ee[S]*ie[x],z[N++]=t.y*ee[S]*ne[x],z[N++]=t.z*te[S];let oe,re,ae,se,Ae=V/2;if(U)for(S=0;S<L;S++)for(x=0;x<P;x++)z[N++]=n.x*ee[S]*ie[x],z[N++]=n.y*ee[S]*ne[x],z[N++]=n.z*te[S],j[Ae]=!0,S>0&&S!==L-1&&0!==x&&x!==P-1&&(Y[Ae]=!0),Ae++;for(N=0,S=1;S<L-2;S++)for(oe=S*P,re=(S+1)*P,x=1;x<P-2;x++)J[N++]=re+x,J[N++]=re+x+1,J[N++]=oe+x+1,J[N++]=re+x,J[N++]=oe+x+1,J[N++]=oe+x;if(U){const e=L*P;for(S=1;S<L-2;S++)for(oe=e+S*P,re=e+(S+1)*P,x=1;x<P-2;x++)J[N++]=re+x,J[N++]=oe+x,J[N++]=oe+x+1,J[N++]=re+x,J[N++]=oe+x+1,J[N++]=re+x+1}if(U){if(k)for(se=L*P,S=1;S<P-2;S++)J[N++]=S,J[N++]=S+1,J[N++]=se+S+1,J[N++]=S,J[N++]=se+S+1,J[N++]=se+S;if(G)for(ae=L*P-P,se=L*P*F-P,S=1;S<P-2;S++)J[N++]=ae+S+1,J[N++]=ae+S,J[N++]=se+S,J[N++]=ae+S+1,J[N++]=se+S,J[N++]=se+S+1}if(H){for(S=1;S<L-2;S++)se=P*L+P*S,ae=P*S,J[N++]=se,J[N++]=ae+P,J[N++]=ae,J[N++]=se,J[N++]=se+P,J[N++]=ae+P;for(S=1;S<L-2;S++)se=P*L+P*(S+1)-1,ae=P*(S+1)-1,J[N++]=ae+P,J[N++]=se,J[N++]=ae,J[N++]=ae+P,J[N++]=se+P,J[N++]=se}const ce=new h.A;T.position&&(ce.position=new d.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:z}));let le=0,ue=0,de=0,he=0;const ge=V/2;let fe;const pe=l.A.fromCartesian3(t),me=l.A.fromCartesian3(n);if(T.st||T.normal||T.tangent||T.bitangent){for(S=0;S<V;S++){fe=j[S]?me:pe;const e=r.A.fromArray(z,3*S,I),t=fe.geodeticSurfaceNormal(e,E);if(Y[S]&&r.A.negate(t,t),T.st){const e=o.A.negate(t,b);$[le++]=Math.atan2(e.y,e.x)/p.A.TWO_PI+.5,$[le++]=Math.asin(t.z)/Math.PI+.5}if(T.normal&&(K[ue++]=t.x,K[ue++]=t.y,K[ue++]=t.z),T.tangent||T.bitangent){const e=y;let n,i=0;if(j[S]&&(i=ge),n=!k&&S>=i&&S<i+2*P?r.A.UNIT_X:r.A.UNIT_Z,r.A.cross(n,t,e),r.A.normalize(e,e),T.tangent&&(X[de++]=e.x,X[de++]=e.y,X[de++]=e.z),T.bitangent){const n=r.A.cross(t,e,C);r.A.normalize(n,n),Z[he++]=n.x,Z[he++]=n.y,Z[he++]=n.z}}}T.st&&(ce.st=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:2,values:$})),T.normal&&(ce.normal=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:K})),T.tangent&&(ce.tangent=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:X})),T.bitangent&&(ce.bitangent=new d.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:Z}))}if((0,A.A)(e._offsetAttribute)){const t=z.length,n=e._offsetAttribute===g.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);ce.applyOffset=new d.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new u.A({attributes:ce,indices:J,primitiveType:m.A.TRIANGLES,boundingSphere:i.A.fromEllipsoid(pe),offsetAttribute:e._offsetAttribute})},T.getUnitEllipsoid=function(){return(0,A.A)(N)||(N=T.createGeometry(new T({radii:new r.A(1,1,1),vertexFormat:_.A.POSITION_ONLY}))),N};const R=T},594706:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(660662),o=n(267980),r=n(571804),a=n(915325),s=n(491446),A=n(605971),c=n(610750),l=n(944479),u=n(305439),d=n(46362),h=n(794554),g=n(874915),f=n(367817),p=n(402330);const m=new o.A(1,1,1),_=Math.cos,I=Math.sin;function E(e){const t=(e=e??a.A.EMPTY_OBJECT).radii??m,n=e.innerRadii??t,i=e.minimumClock??0,r=e.maximumClock??f.A.TWO_PI,c=e.minimumCone??0,l=e.maximumCone??f.A.PI,u=Math.round(e.stackPartitions??10),d=Math.round(e.slicePartitions??8),g=Math.round(e.subdivisions??128);if(u<1)throw new A.A("options.stackPartitions cannot be less than 1");if(d<0)throw new A.A("options.slicePartitions cannot be less than 0");if(g<0)throw new A.A("options.subdivisions must be greater than or equal to zero.");if((0,s.A)(e.offsetAttribute)&&e.offsetAttribute===h.A.TOP)throw new A.A("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._radii=o.A.clone(t),this._innerRadii=o.A.clone(n),this._minimumClock=i,this._maximumClock=r,this._minimumCone=c,this._maximumCone=l,this._stackPartitions=u,this._slicePartitions=d,this._subdivisions=g,this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}E.packedLength=2*o.A.packedLength+8,E.pack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("value is required");if(!(0,s.A)(t))throw new A.A("array is required");return n=n??0,o.A.pack(e._radii,t,n),n+=o.A.packedLength,o.A.pack(e._innerRadii,t,n),n+=o.A.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n++]=e._subdivisions,t[n]=e._offsetAttribute??-1,t};const y=new o.A,C=new o.A,b={radii:y,innerRadii:C,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};E.unpack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("array is required");t=t??0;const i=o.A.unpack(e,t,y);t+=o.A.packedLength;const r=o.A.unpack(e,t,C);t+=o.A.packedLength;const a=e[t++],c=e[t++],l=e[t++],u=e[t++],d=e[t++],h=e[t++],g=e[t++],f=e[t];return(0,s.A)(n)?(n._radii=o.A.clone(i,n._radii),n._innerRadii=o.A.clone(r,n._innerRadii),n._minimumClock=a,n._maximumClock=c,n._minimumCone=l,n._maximumCone=u,n._stackPartitions=d,n._slicePartitions=h,n._subdivisions=g,n._offsetAttribute=-1===f?void 0:f,n):(b.minimumClock=a,b.maximumClock=c,b.minimumCone=l,b.maximumCone=u,b.stackPartitions=d,b.slicePartitions=h,b.subdivisions=g,b.offsetAttribute=-1===f?void 0:f,new E(b))},E.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const o=e._minimumClock,a=e._maximumClock,A=e._minimumCone,m=e._maximumCone,E=e._subdivisions,y=c.A.fromCartesian3(t);let C=e._slicePartitions+1,b=e._stackPartitions+1;C=Math.round(C*Math.abs(a-o)/f.A.TWO_PI),b=Math.round(b*Math.abs(m-A)/f.A.PI),C<2&&(C=2),b<2&&(b=2);let B=0,v=1;const w=n.x!==t.x||n.y!==t.y||n.z!==t.z;let T=!1,S=!1;w&&(v=2,A>0&&(T=!0,B+=C),m<Math.PI&&(S=!0,B+=C));const x=E*v*(b+C),D=new Float64Array(3*x),Q=2*(x+B-(C+b)*v),N=g.A.createTypedArray(x,Q);let R,M,L,P,O=0;const F=new Array(b),U=new Array(b);for(R=0;R<b;R++)P=A+R*(m-A)/(b-1),F[R]=I(P),U[R]=_(P);const k=new Array(E),G=new Array(E);for(R=0;R<E;R++)L=o+R*(a-o)/(E-1),k[R]=I(L),G[R]=_(L);for(R=0;R<b;R++)for(M=0;M<E;M++)D[O++]=t.x*F[R]*G[M],D[O++]=t.y*F[R]*k[M],D[O++]=t.z*U[R];if(w)for(R=0;R<b;R++)for(M=0;M<E;M++)D[O++]=n.x*F[R]*G[M],D[O++]=n.y*F[R]*k[M],D[O++]=n.z*U[R];for(F.length=E,U.length=E,R=0;R<E;R++)P=A+R*(m-A)/(E-1),F[R]=I(P),U[R]=_(P);for(k.length=C,G.length=C,R=0;R<C;R++)L=o+R*(a-o)/(C-1),k[R]=I(L),G[R]=_(L);for(R=0;R<E;R++)for(M=0;M<C;M++)D[O++]=t.x*F[R]*G[M],D[O++]=t.y*F[R]*k[M],D[O++]=t.z*U[R];if(w)for(R=0;R<E;R++)for(M=0;M<C;M++)D[O++]=n.x*F[R]*G[M],D[O++]=n.y*F[R]*k[M],D[O++]=n.z*U[R];for(O=0,R=0;R<b*v;R++){const e=R*E;for(M=0;M<E-1;M++)N[O++]=e+M,N[O++]=e+M+1}let H=b*E*v;for(R=0;R<C;R++)for(M=0;M<E-1;M++)N[O++]=H+R+M*C,N[O++]=H+R+(M+1)*C;if(w)for(H=b*E*v+C*E,R=0;R<C;R++)for(M=0;M<E-1;M++)N[O++]=H+R+M*C,N[O++]=H+R+(M+1)*C;if(w){let e=b*E*v,t=e+E*C;if(T)for(R=0;R<C;R++)N[O++]=e+R,N[O++]=t+R;if(S)for(e+=E*C-C,t+=E*C-C,R=0;R<C;R++)N[O++]=e+R,N[O++]=t+R}const V=new d.A({position:new u.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:D})});if((0,s.A)(e._offsetAttribute)){const t=D.length,n=e._offsetAttribute===h.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);V.applyOffset=new u.A({componentDatatype:r.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new l.A({attributes:V,indices:N,primitiveType:p.A.LINES,boundingSphere:i.A.fromEllipsoid(y),offsetAttribute:e._offsetAttribute})};const B=E},149192:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(915325),o=n(491446),r=n(610750),a=n(955943),s=n(182348),A=n(165755),c=n(98055);function l(e){e=e??i.A.EMPTY_OBJECT,this._tilingScheme=e.tilingScheme,(0,o.A)(this._tilingScheme)||(this._tilingScheme=new s.A({ellipsoid:e.ellipsoid??r.A.default})),this._levelZeroMaximumGeometricError=c.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,64,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new a.A}Object.defineProperties(l.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),l.prototype.requestTileGeometry=function(e,t,n,i){return Promise.resolve(new A.A({buffer:new Uint8Array(256),width:16,height:16}))},l.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},l.prototype.getTileDataAvailable=function(e,t,n){},l.prototype.loadTileDataAvailability=function(e,t,n){};const u=l},354975:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(605971);function r(){this._removalFunctions=[]}r.prototype.add=function(e,t,n){if(!(0,i.A)(e))throw new o.A("event is required");const r=e.addEventListener(t,n);this._removalFunctions.push(r);const a=this;return function(){r();const e=a._removalFunctions;e.splice(e.indexOf(r),1)}},r.prototype.removeAll=function(){const e=this._removalFunctions;for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0};const a=r},908077:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,HOLD:1,EXTRAPOLATE:2})},17117:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var i=n(660662),o=n(267980),r=n(626809),a=n(369031),s=n(571804),A=n(491446),c=n(944479),l=n(305439),u=n(46362),d=n(331185),h=n(584164),g=n(811203),f=n(666775),p=n(402330),m=n(99479),_=n(769534);function I(e){a.A.typeOf.object("options",e),a.A.typeOf.object("options.frustum",e.frustum),a.A.typeOf.object("options.origin",e.origin),a.A.typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,i=e.origin,r=e.vertexFormat??_.A.DEFAULT,s=e._drawNearPlane??!0;let A,c;t instanceof f.A?(A=0,c=f.A.packedLength):t instanceof g.A&&(A=1,c=g.A.packedLength),this._frustumType=A,this._frustum=t.clone(),this._origin=o.A.clone(i),this._orientation=m.A.clone(n),this._drawNearPlane=s,this._vertexFormat=r,this._workerName="createFrustumGeometry",this.packedLength=2+c+o.A.packedLength+m.A.packedLength+_.A.packedLength}I.pack=function(e,t,n){a.A.typeOf.object("value",e),a.A.defined("array",t),n=n??0;const i=e._frustumType,r=e._frustum;return t[n++]=i,0===i?(f.A.pack(r,t,n),n+=f.A.packedLength):(g.A.pack(r,t,n),n+=g.A.packedLength),o.A.pack(e._origin,t,n),n+=o.A.packedLength,m.A.pack(e._orientation,t,n),n+=m.A.packedLength,_.A.pack(e._vertexFormat,t,n),t[n+=_.A.packedLength]=e._drawNearPlane?1:0,t};const E=new f.A,y=new g.A,C=new m.A,b=new o.A,B=new _.A;function v(e,t,n,i,o,r,a,s){const c=e/3*2;for(let o=0;o<4;++o)(0,A.A)(t)&&(t[e]=r.x,t[e+1]=r.y,t[e+2]=r.z),(0,A.A)(n)&&(n[e]=a.x,n[e+1]=a.y,n[e+2]=a.z),(0,A.A)(i)&&(i[e]=s.x,i[e+1]=s.y,i[e+2]=s.z),e+=3;o[c]=0,o[c+1]=0,o[c+2]=1,o[c+3]=0,o[c+4]=1,o[c+5]=1,o[c+6]=0,o[c+7]=1}I.unpack=function(e,t,n){a.A.defined("array",e),t=t??0;const i=e[t++];let r;0===i?(r=f.A.unpack(e,t,E),t+=f.A.packedLength):(r=g.A.unpack(e,t,y),t+=g.A.packedLength);const s=o.A.unpack(e,t,b);t+=o.A.packedLength;const c=m.A.unpack(e,t,C);t+=m.A.packedLength;const l=_.A.unpack(e,t,B),u=1===e[t+=_.A.packedLength];if(!(0,A.A)(n))return new I({frustum:r,origin:s,orientation:c,vertexFormat:l,_drawNearPlane:u});const d=i===n._frustumType?n._frustum:void 0;return n._frustum=r.clone(d),n._frustumType=i,n._origin=o.A.clone(s,n._origin),n._orientation=m.A.clone(c,n._orientation),n._vertexFormat=_.A.clone(l,n._vertexFormat),n._drawNearPlane=u,n};const w=new d.A,T=new h.A,S=new h.A,x=new o.A,D=new o.A,Q=new o.A,N=new o.A,R=new o.A,M=new o.A,L=new Array(3),P=new Array(4);P[0]=new r.A(-1,-1,1,1),P[1]=new r.A(1,-1,1,1),P[2]=new r.A(1,1,1,1),P[3]=new r.A(-1,1,1,1);const O=new Array(4);for(let e=0;e<4;++e)O[e]=new r.A;I._computeNearFarPlanes=function(e,t,n,i,a,s,c,l){const u=d.A.fromQuaternion(t,w);let g=s??x,f=c??D,p=l??Q;g=d.A.getColumn(u,0,g),f=d.A.getColumn(u,1,f),p=d.A.getColumn(u,2,p),o.A.normalize(g,g),o.A.normalize(f,f),o.A.normalize(p,p),o.A.negate(g,g);const m=h.A.computeView(e,p,f,g,T);let _,I;const E=i.projectionMatrix;if(0===n){const e=h.A.multiply(E,m,S);I=h.A.inverse(e,S)}else _=h.A.inverseTransformation(m,S);(0,A.A)(I)?(L[0]=i.near,L[1]=i.far):(L[0]=0,L[1]=i.near,L[2]=i.far);for(let t=0;t<2;++t)for(let n=0;n<4;++n){let s=r.A.clone(P[n],O[n]);if((0,A.A)(I)){s=h.A.multiplyByVector(I,s,s);const n=1/s.w;o.A.multiplyByScalar(s,n,s),o.A.subtract(s,e,s),o.A.normalize(s,s);const i=o.A.dot(p,s);o.A.multiplyByScalar(s,L[t]/i,s),o.A.add(s,e,s)}else{const e=i.offCenterFrustum;(0,A.A)(e)&&(i=e);const n=L[t],o=L[t+1];s.x=.5*(s.x*(i.right-i.left)+i.left+i.right),s.y=.5*(s.y*(i.top-i.bottom)+i.bottom+i.top),s.z=.5*(s.z*(n-o)-n-o),s.w=1,h.A.multiplyByVector(_,s,s)}a[12*t+3*n]=s.x,a[12*t+3*n+1]=s.y,a[12*t+3*n+2]=s.z}},I.createGeometry=function(e){const t=e._frustumType,n=e._frustum,r=e._origin,a=e._orientation,d=e._drawNearPlane,h=e._vertexFormat,g=d?6:5;let f=new Float64Array(72);I._computeNearFarPlanes(r,a,t,n,f);let m=24;f[m]=f[12],f[m+1]=f[13],f[m+2]=f[14],f[m+3]=f[0],f[m+4]=f[1],f[m+5]=f[2],f[m+6]=f[9],f[m+7]=f[10],f[m+8]=f[11],f[m+9]=f[21],f[m+10]=f[22],f[m+11]=f[23],m+=12,f[m]=f[15],f[m+1]=f[16],f[m+2]=f[17],f[m+3]=f[3],f[m+4]=f[4],f[m+5]=f[5],f[m+6]=f[0],f[m+7]=f[1],f[m+8]=f[2],f[m+9]=f[12],f[m+10]=f[13],f[m+11]=f[14],m+=12,f[m]=f[3],f[m+1]=f[4],f[m+2]=f[5],f[m+3]=f[15],f[m+4]=f[16],f[m+5]=f[17],f[m+6]=f[18],f[m+7]=f[19],f[m+8]=f[20],f[m+9]=f[6],f[m+10]=f[7],f[m+11]=f[8],m+=12,f[m]=f[6],f[m+1]=f[7],f[m+2]=f[8],f[m+3]=f[18],f[m+4]=f[19],f[m+5]=f[20],f[m+6]=f[21],f[m+7]=f[22],f[m+8]=f[23],f[m+9]=f[9],f[m+10]=f[10],f[m+11]=f[11],d||(f=f.subarray(12));const _=new u.A({position:new l.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:f})});if((0,A.A)(h.normal)||(0,A.A)(h.tangent)||(0,A.A)(h.bitangent)||(0,A.A)(h.st)){const e=(0,A.A)(h.normal)?new Float32Array(12*g):void 0,t=(0,A.A)(h.tangent)?new Float32Array(12*g):void 0,n=(0,A.A)(h.bitangent)?new Float32Array(12*g):void 0,i=(0,A.A)(h.st)?new Float32Array(8*g):void 0,r=x,a=D,c=Q,u=o.A.negate(r,N),f=o.A.negate(a,R),p=o.A.negate(c,M);m=0,d&&(v(m,e,t,n,i,p,r,a),m+=12),v(m,e,t,n,i,c,u,a),m+=12,v(m,e,t,n,i,u,p,a),m+=12,v(m,e,t,n,i,f,p,u),m+=12,v(m,e,t,n,i,r,c,a),m+=12,v(m,e,t,n,i,a,c,u),(0,A.A)(e)&&(_.normal=new l.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:e})),(0,A.A)(t)&&(_.tangent=new l.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:t})),(0,A.A)(n)&&(_.bitangent=new l.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:3,values:n})),(0,A.A)(i)&&(_.st=new l.A({componentDatatype:s.A.FLOAT,componentsPerAttribute:2,values:i}))}const E=new Uint16Array(6*g);for(let e=0;e<g;++e){const t=6*e,n=4*e;E[t]=n,E[t+1]=n+1,E[t+2]=n+2,E[t+3]=n,E[t+4]=n+2,E[t+5]=n+3}return new c.A({attributes:_,indices:E,primitiveType:p.A.TRIANGLES,boundingSphere:i.A.fromVertices(f)})};const F=I},788335:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(660662),o=n(267980),r=n(369031),a=n(571804),s=n(491446),A=n(17117),c=n(944479),l=n(305439),u=n(46362),d=n(811203),h=n(666775),g=n(402330),f=n(99479);function p(e){r.A.typeOf.object("options",e),r.A.typeOf.object("options.frustum",e.frustum),r.A.typeOf.object("options.origin",e.origin),r.A.typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,i=e.origin,a=e._drawNearPlane??!0;let s,A;t instanceof h.A?(s=0,A=h.A.packedLength):t instanceof d.A&&(s=1,A=d.A.packedLength),this._frustumType=s,this._frustum=t.clone(),this._origin=o.A.clone(i),this._orientation=f.A.clone(n),this._drawNearPlane=a,this._workerName="createFrustumOutlineGeometry",this.packedLength=2+A+o.A.packedLength+f.A.packedLength}p.pack=function(e,t,n){r.A.typeOf.object("value",e),r.A.defined("array",t),n=n??0;const i=e._frustumType,a=e._frustum;return t[n++]=i,0===i?(h.A.pack(a,t,n),n+=h.A.packedLength):(d.A.pack(a,t,n),n+=d.A.packedLength),o.A.pack(e._origin,t,n),n+=o.A.packedLength,f.A.pack(e._orientation,t,n),t[n+=f.A.packedLength]=e._drawNearPlane?1:0,t};const m=new h.A,_=new d.A,I=new f.A,E=new o.A;p.unpack=function(e,t,n){r.A.defined("array",e),t=t??0;const i=e[t++];let a;0===i?(a=h.A.unpack(e,t,m),t+=h.A.packedLength):(a=d.A.unpack(e,t,_),t+=d.A.packedLength);const A=o.A.unpack(e,t,E);t+=o.A.packedLength;const c=f.A.unpack(e,t,I),l=1===e[t+=f.A.packedLength];if(!(0,s.A)(n))return new p({frustum:a,origin:A,orientation:c,_drawNearPlane:l});const u=i===n._frustumType?n._frustum:void 0;return n._frustum=a.clone(u),n._frustumType=i,n._origin=o.A.clone(A,n._origin),n._orientation=f.A.clone(c,n._orientation),n._drawNearPlane=l,n},p.createGeometry=function(e){const t=e._frustumType,n=e._frustum,o=e._origin,r=e._orientation,s=e._drawNearPlane,d=new Float64Array(24);A.A._computeNearFarPlanes(o,r,t,n,d);const h=new u.A({position:new l.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:d})});let f,p;const m=s?2:1,_=new Uint16Array(8*(m+1));let I=s?0:1;for(;I<2;++I)f=s?8*I:0,p=4*I,_[f]=p,_[f+1]=p+1,_[f+2]=p+1,_[f+3]=p+2,_[f+4]=p+2,_[f+5]=p+3,_[f+6]=p+3,_[f+7]=p;for(I=0;I<2;++I)f=8*(m+I),p=4*I,_[f]=p,_[f+1]=p+4,_[f+2]=p+1,_[f+3]=p+5,_[f+4]=p+2,_[f+5]=p+6,_[f+6]=p+3,_[f+7]=p+7;return new c.A({attributes:h,indices:_,primitiveType:g.A.LINES,boundingSphere:i.A.fromVertices(d)})};const y=p},123475:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({SEARCH:0,AUTOCOMPLETE:1})},675178:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(672743),o=n(491446),r=n(605971);function a(){r.A.throwInstantiationError()}Object.defineProperties(a.prototype,{credit:{get:r.A.throwInstantiationError}}),a.getCreditsFromResult=function(e){if((0,o.A)(e.attributions))return e.attributions.map(i.A.getIonCredit)},a.prototype.geocode=r.A.throwInstantiationError;const s=a},805746:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446);function o(e,t,n){this.heading=e??0,this.pitch=t??0,this.range=n??0}o.clone=function(e,t){if((0,i.A)(e))return(0,i.A)(t)||(t=new o),t.heading=e.heading,t.pitch=e.pitch,t.range=e.range,t};const r=o},655365:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,LERC:1})},165755:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(660662),o=n(267980),r=n(369031),a=n(915325),s=n(491446),A=n(605971),c=n(653577),l=n(655365),u=n(103882),d=n(367817),h=n(832698),g=n(697422),f=n(971724),p=n(42794),m=n(371267),_=n(255335),I=n(98055);function E(e){if(!(0,s.A)(e)||!(0,s.A)(e.buffer))throw new A.A("options.buffer is required.");if(!(0,s.A)(e.width))throw new A.A("options.width is required.");if(!(0,s.A)(e.height))throw new A.A("options.height is required.");this._buffer=e.buffer,this._width=e.width,this._height=e.height,this._childTileMask=e.childTileMask??15,this._encoding=e.encoding??l.A.NONE;const t=u.A.DEFAULT_STRUCTURE;let n=e.structure;(0,s.A)(n)?n!==t&&(n.heightScale=n.heightScale??t.heightScale,n.heightOffset=n.heightOffset??t.heightOffset,n.elementsPerHeight=n.elementsPerHeight??t.elementsPerHeight,n.stride=n.stride??t.stride,n.elementMultiplier=n.elementMultiplier??t.elementMultiplier,n.isBigEndian=n.isBigEndian??t.isBigEndian):n=t,this._structure=n,this._createdByUpsampling=e.createdByUpsampling??!1,this._waterMask=e.waterMask,this._skirtHeight=void 0,this._bufferType=this._encoding===l.A.LERC?Float32Array:this._buffer.constructor,this._mesh=void 0}Object.defineProperties(E.prototype,{credits:{get:function(){}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}}});const y="createVerticesFromHeightmap",C=new f.A(y),b=new f.A(y,p.A.maximumAsynchronousTasks);function B(e,t,n,i,o,r,a,s,A){const c=(s-o.west)*(r-1)/(o.east-o.west),l=(A-o.south)*(a-1)/(o.north-o.south);let u=0|c,d=u+1;d>=r&&(d=r-1,u=r-2);let h=0|l,g=h+1;g>=a&&(g=a-1,h=a-2);const f=l-h;return h=a-1-h,g=a-1-g,v(c-u,f,(t.decodeHeight(e,h*r+u)-n)/i,(t.decodeHeight(e,h*r+d)-n)/i,(t.decodeHeight(e,g*r+u)-n)/i,(t.decodeHeight(e,g*r+d)-n)/i)}function v(e,t,n,i,o,r){return t<e?n+e*(i-n)+t*(r-i):n+e*(r-o)+t*(o-n)}function w(e,t,n,i,o,r){r*=i;let a,s=0;if(o)for(a=0;a<t;++a)s=s*n+e[r+a];else for(a=t-1;a>=0;--a)s=s*n+e[r+a];return s}function T(e,t,n,i,o,r,a,s){let A;if(a*=o,r)for(A=0;A<t-1;++A)e[a+A]=s/i|0,s-=e[a+A]*i,i/=n;else for(A=t-1;A>0;--A)e[a+A]=s/i|0,s-=e[a+A]*i,i/=n;e[a+A]=s}E.prototype.createMesh=function(e){e=e??a.A.EMPTY_OBJECT,r.A.typeOf.object("options.tilingScheme",e.tilingScheme),r.A.typeOf.number("options.x",e.x),r.A.typeOf.number("options.y",e.y),r.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,A=e.y,l=e.level,u=e.exaggeration??1,d=e.exaggerationRelativeHeight??0,f=e.throttle??!0,p=t.ellipsoid,E=t.tileXYToNativeRectangle(n,A,l),y=t.tileXYToRectangle(n,A,l),B=p.cartographicToCartesian(g.A.center(y)),v=this._structure,w=I.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(p,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<l);this._skirtHeight=Math.min(4*w,1e3);const T=(f?b:C).scheduleTask({heightmap:this._buffer,structure:v,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:E,rectangle:y,relativeToCenter:B,ellipsoid:p,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof c.A,exaggeration:u,exaggerationRelativeHeight:d,encoding:this._encoding});if(!(0,s.A)(T))return;const S=this;return Promise.resolve(T).then(function(e){let t;t=S._skirtHeight>0?I.A.getRegularGridAndSkirtIndicesAndEdgeIndices(e.gridWidth,e.gridHeight):I.A.getRegularGridIndicesAndEdgeIndices(e.gridWidth,e.gridHeight);const n=e.gridWidth*e.gridHeight;return S._mesh=new _.A(B,new Float32Array(e.vertices),t.indices,t.indexCountWithoutSkirts,n,e.minimumHeight,e.maximumHeight,i.A.clone(e.boundingSphere3D),o.A.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,h.A.clone(e.orientedBoundingBox),m.A.clone(e.encoding),t.westIndicesSouthToNorth,t.southIndicesEastToWest,t.eastIndicesNorthToSouth,t.northIndicesWestToEast),S._buffer=void 0,S._mesh})},E.prototype._createMeshSync=function(e){r.A.typeOf.object("options.tilingScheme",e.tilingScheme),r.A.typeOf.number("options.x",e.x),r.A.typeOf.number("options.y",e.y),r.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,i=e.y,o=e.level,a=e.exaggeration??1,s=e.exaggerationRelativeHeight??0,A=t.ellipsoid,l=t.tileXYToNativeRectangle(n,i,o),d=t.tileXYToRectangle(n,i,o),h=A.cartographicToCartesian(g.A.center(d)),f=this._structure,p=I.A.getEstimatedLevelZeroGeometricErrorForAHeightmap(A,this._width,t.getNumberOfXTilesAtLevel(0))/(1<<o);this._skirtHeight=Math.min(4*p,1e3);const m=u.A.computeVertices({heightmap:this._buffer,structure:f,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:l,rectangle:d,relativeToCenter:h,ellipsoid:A,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof c.A,exaggeration:a,exaggerationRelativeHeight:s});let E;this._buffer=void 0,E=this._skirtHeight>0?I.A.getRegularGridAndSkirtIndicesAndEdgeIndices(this._width,this._height):I.A.getRegularGridIndicesAndEdgeIndices(this._width,this._height);const y=m.gridWidth*m.gridHeight;return this._mesh=new _.A(h,m.vertices,E.indices,E.indexCountWithoutSkirts,y,m.minimumHeight,m.maximumHeight,m.boundingSphere3D,m.occludeePointInScaledSpace,m.encoding.stride,m.orientedBoundingBox,m.encoding,E.westIndicesSouthToNorth,E.southIndicesEastToWest,E.eastIndicesNorthToSouth,E.northIndicesWestToEast),this._mesh},E.prototype.interpolateHeight=function(e,t,n){const i=this._width,o=this._height,r=this._structure,a=r.stride,A=r.elementsPerHeight,c=r.elementMultiplier,u=r.isBigEndian,d=r.heightOffset,h=r.heightScale,g=(0,s.A)(this._mesh),f=this._encoding===l.A.LERC;if(!g&&f)return;let p;return g?p=B(this._mesh.vertices,this._mesh.encoding,d,h,e,i,o,t,n):(p=function(e,t,n,i,o,r,a,s,A,c){const l=(A-r.west)*(a-1)/(r.east-r.west),u=(c-r.south)*(s-1)/(r.north-r.south);let d=0|l,h=d+1;h>=a&&(h=a-1,d=a-2);let g=0|u,f=g+1;f>=s&&(f=s-1,g=s-2);const p=u-g;g=s-1-g,f=s-1-f;return v(l-d,p,w(e,t,n,i,o,g*a+d),w(e,t,n,i,o,g*a+h),w(e,t,n,i,o,f*a+d),w(e,t,n,i,o,f*a+h))}(this._buffer,A,c,a,u,e,i,o,t,n),p=p*h+d),p},E.prototype.upsample=function(e,t,n,i,o,r,a){if(!(0,s.A)(e))throw new A.A("tilingScheme is required.");if(!(0,s.A)(t))throw new A.A("thisX is required.");if(!(0,s.A)(n))throw new A.A("thisY is required.");if(!(0,s.A)(i))throw new A.A("thisLevel is required.");if(!(0,s.A)(o))throw new A.A("descendantX is required.");if(!(0,s.A)(r))throw new A.A("descendantY is required.");if(!(0,s.A)(a))throw new A.A("descendantLevel is required.");if(a-i>1)throw new A.A("Upsampling through more than one level at a time is not currently supported.");const c=this._mesh;if(!(0,s.A)(c))return;const l=this._width,u=this._height,h=this._structure,g=h.stride,f=new this._bufferType(l*u*g),p=c.vertices,m=c.encoding,_=e.tileXYToRectangle(t,n,i),I=e.tileXYToRectangle(o,r,a),y=h.heightOffset,C=h.heightScale,b=h.elementsPerHeight,v=h.elementMultiplier,w=h.isBigEndian,S=Math.pow(v,b-1);for(let e=0;e<u;++e){const t=d.A.lerp(I.north,I.south,e/(u-1));for(let n=0;n<l;++n){let i=B(p,m,y,C,_,l,u,d.A.lerp(I.west,I.east,n/(l-1)),t);i=i<h.lowestEncodedHeight?h.lowestEncodedHeight:i,i=i>h.highestEncodedHeight?h.highestEncodedHeight:i,T(f,b,v,S,g,w,e*l+n,i)}}return Promise.resolve(new E({buffer:f,width:l,height:u,childTileMask:0,structure:this._structure,createdByUpsampling:!0}))},E.prototype.isChildAvailable=function(e,t,n,i){if(!(0,s.A)(e))throw new A.A("thisX is required.");if(!(0,s.A)(t))throw new A.A("thisY is required.");if(!(0,s.A)(n))throw new A.A("childX is required.");if(!(0,s.A)(i))throw new A.A("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),!!(this._childTileMask&1<<o)},E.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const S=E},103882:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(807135),o=n(660662),r=n(434067),a=n(267980),s=n(491446),A=n(605971),c=n(610750),l=n(199528),u=n(367817),d=n(584164),h=n(832698),g=n(697422),f=n(371267),p=n(543622),m=n(414305);const _={};_.DEFAULT_STRUCTURE=Object.freeze({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});const I=new a.A,E=new d.A,y=new a.A,C=new a.A;_.computeVertices=function(e){if(!(0,s.A)(e)||!(0,s.A)(e.heightmap))throw new A.A("options.heightmap is required.");if(!(0,s.A)(e.width)||!(0,s.A)(e.height))throw new A.A("options.width and options.height are required.");if(!(0,s.A)(e.nativeRectangle))throw new A.A("options.nativeRectangle is required.");if(!(0,s.A)(e.skirtHeight))throw new A.A("options.skirtHeight is required.");const t=Math.cos,n=Math.sin,b=Math.sqrt,B=Math.atan,v=Math.exp,w=u.A.PI_OVER_TWO,T=u.A.toRadians,S=e.heightmap,x=e.width,D=e.height,Q=e.skirtHeight,N=Q>0,R=e.isGeographic??!0,M=e.ellipsoid??c.A.default,L=1/M.maximumRadius,P=g.A.clone(e.nativeRectangle),O=g.A.clone(e.rectangle);let F,U,k,G;(0,s.A)(O)?(F=O.west,U=O.south,k=O.east,G=O.north):R?(F=T(P.west),U=T(P.south),k=T(P.east),G=T(P.north)):(F=P.west*L,U=w-2*B(v(-P.south*L)),k=P.east*L,G=w-2*B(v(-P.north*L)));let H=e.relativeToCenter;const V=(0,s.A)(H);H=V?H:a.A.ZERO;const z=e.includeWebMercatorT??!1,j=e.exaggeration??1,Y=e.exaggerationRelativeHeight??0,q=1!==j,W=e.structure??_.DEFAULT_STRUCTURE,J=W.heightScale??_.DEFAULT_STRUCTURE.heightScale,K=W.heightOffset??_.DEFAULT_STRUCTURE.heightOffset,X=W.elementsPerHeight??_.DEFAULT_STRUCTURE.elementsPerHeight,Z=W.stride??_.DEFAULT_STRUCTURE.stride,$=W.elementMultiplier??_.DEFAULT_STRUCTURE.elementMultiplier,ee=W.isBigEndian??_.DEFAULT_STRUCTURE.isBigEndian;let te=g.A.computeWidth(P),ne=g.A.computeHeight(P);const ie=te/(x-1),oe=ne/(D-1);R||(te*=L,ne*=L);const re=M.radiiSquared,ae=re.x,se=re.y,Ae=re.z;let ce=65536,le=-65536;const ue=p.A.eastNorthUpToFixedFrame(H,M),de=d.A.inverseTransformation(ue,E);let he,ge;z&&(he=m.A.geodeticLatitudeToMercatorAngle(U),ge=1/(m.A.geodeticLatitudeToMercatorAngle(G)-he));const fe=y;fe.x=Number.POSITIVE_INFINITY,fe.y=Number.POSITIVE_INFINITY,fe.z=Number.POSITIVE_INFINITY;const pe=C;pe.x=Number.NEGATIVE_INFINITY,pe.y=Number.NEGATIVE_INFINITY,pe.z=Number.NEGATIVE_INFINITY;let me=Number.POSITIVE_INFINITY;const _e=x*D,Ie=_e+(Q>0?2*x+2*D:0),Ee=new Array(Ie),ye=new Array(Ie),Ce=new Array(Ie),be=z?new Array(Ie):[],Be=q?new Array(Ie):[];let ve=0,we=D,Te=0,Se=x;N&&(--ve,++we,--Te,++Se);const xe=1e-5;for(let e=ve;e<we;++e){let i=e;i<0&&(i=0),i>=D&&(i=D-1);let o=P.north-oe*i;o=R?T(o):w-2*B(v(-o*L));let s=(o-U)/(G-U);s=u.A.clamp(s,0,1);const A=e===ve,c=e===we-1;Q>0&&(A?o+=xe*ne:c&&(o-=xe*ne));const l=t(o),h=n(o),g=Ae*h;let f;z&&(f=(m.A.geodeticLatitudeToMercatorAngle(o)-he)*ge);for(let e=Te;e<Se;++e){let o=e;o<0&&(o=0),o>=x&&(o=x-1);const p=i*(x*Z)+o*Z;let m;if(1===X)m=S[p];else{let e;if(m=0,ee)for(e=0;e<X;++e)m=m*$+S[p+e];else for(e=X-1;e>=0;--e)m=m*$+S[p+e]}m=m*J+K,le=Math.max(le,m),ce=Math.min(ce,m);let _=P.west+ie*o;R?_=T(_):_*=L;let E=(_-F)/(k-F);E=u.A.clamp(E,0,1);let y=i*x+o;if(Q>0){const t=e===Te,n=e===Se-1,r=A||c||t||n;if((A||c)&&(t||n))continue;r&&(m-=Q,t?(y=_e+(D-i-1),_-=xe*te):c?y=_e+D+(x-o-1):n?(y=_e+D+x+i,_+=xe*te):A&&(y=_e+D+x+D+o))}const C=l*t(_),B=l*n(_),v=ae*C,w=se*B,N=1/b(v*C+w*B+g*h),O=v*N,U=w*N,G=g*N,H=new a.A;H.x=O+C*m,H.y=U+B*m,H.z=G+h*m,d.A.multiplyByPoint(de,H,I),a.A.minimumByComponent(I,fe,fe),a.A.maximumByComponent(I,pe,pe),me=Math.min(me,m),Ee[y]=H,Ce[y]=new r.A(E,s),ye[y]=m,z&&(be[y]=f),q&&(Be[y]=M.geodeticSurfaceNormal(H))}}const De=o.A.fromPoints(Ee);let Qe,Ne;(0,s.A)(O)&&(Qe=h.A.fromRectangle(O,ce,le,M)),V&&(Ne=new l.A(M).computeHorizonCullingPointPossiblyUnderEllipsoid(H,Ee,ce));const Re=new i.A(fe,pe,H),Me=new f.A(H,Re,me,le,ue,!1,z,q,j,Y),Le=new Float32Array(Ie*Me.stride);let Pe=0;for(let e=0;e<Ie;++e)Pe=Me.encode(Le,Pe,Ee[e],Ce[e],ye[e],void 0,be[e],Be[e]);return{vertices:Le,maximumHeight:le,minimumHeight:ce,encoding:Me,boundingSphere3D:De,orientedBoundingBox:Qe,occludeePointInScaledSpace:Ne}};const b=_},961136:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(267980),o=n(626809),r=n(915325),a=n(491446),s=n(605971),A=n(153127),c=n(584164),l=n(437266),u=n(710551);const d=[],h=[],g=[],f=[];function p(e){const t=(e=e??r.A.EMPTY_OBJECT).points,n=e.times,i=e.inTangents,o=e.outTangents;if(!((0,a.A)(t)&&(0,a.A)(n)&&(0,a.A)(i)&&(0,a.A)(o)))throw new s.A("times, points, inTangents, and outTangents are required.");if(t.length<2)throw new s.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new s.A("times.length must be equal to points.length.");if(i.length!==o.length||i.length!==t.length-1)throw new s.A("inTangents and outTangents must have a length equal to points.length - 1.");if(this._times=n,this._points=t,this._pointType=l.A.getPointType(t[0]),this._pointType!==l.A.getPointType(i[0])||this._pointType!==l.A.getPointType(o[0]))throw new s.A("inTangents and outTangents must be of the same type as points.");this._inTangents=i,this._outTangents=o,this._lastTimeIndex=0}Object.defineProperties(p.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}}),p.createC1=function(e){const t=(e=e??r.A.EMPTY_OBJECT).times,n=e.points,i=e.tangents;if(!(0,a.A)(n)||!(0,a.A)(t)||!(0,a.A)(i))throw new s.A("points, times and tangents are required.");if(n.length<2)throw new s.A("points.length must be greater than or equal to 2.");if(t.length!==n.length||t.length!==i.length)throw new s.A("times, points and tangents must have the same length.");const o=i.slice(0,i.length-1);return new p({times:t,points:n,inTangents:i.slice(1,i.length),outTangents:o})},p.createNaturalCubic=function(e){const t=(e=e??r.A.EMPTY_OBJECT).times,n=e.points;if(!(0,a.A)(n)||!(0,a.A)(t))throw new s.A("points and times are required.");if(n.length<2)throw new s.A("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new s.A("times.length must be equal to points.length.");if(n.length<3)return new A.A({points:n,times:t});const o=function(e){const t=d,n=g,o=h,r=f;let s;t.length=n.length=e.length-1,o.length=r.length=e.length,t[0]=n[0]=1,o[0]=2;let A=r[0];for((0,a.A)(A)||(A=r[0]=new i.A),i.A.subtract(e[1],e[0],A),i.A.multiplyByScalar(A,3,A),s=1;s<t.length;++s)t[s]=n[s]=1,o[s]=4,A=r[s],(0,a.A)(A)||(A=r[s]=new i.A),i.A.subtract(e[s+1],e[s-1],A),i.A.multiplyByScalar(A,3,A);return o[s]=2,A=r[s],(0,a.A)(A)||(A=r[s]=new i.A),i.A.subtract(e[s],e[s-1],A),i.A.multiplyByScalar(A,3,A),u.A.solve(t,o,n,r)}(n),c=o.slice(0,o.length-1);return new p({times:t,points:n,inTangents:o.slice(1,o.length),outTangents:c})},p.createClampedCubic=function(e){const t=(e=e??r.A.EMPTY_OBJECT).times,n=e.points,o=e.firstTangent,c=e.lastTangent;if(!((0,a.A)(n)&&(0,a.A)(t)&&(0,a.A)(o)&&(0,a.A)(c)))throw new s.A("points, times, firstTangent and lastTangent are required.");if(n.length<2)throw new s.A("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new s.A("times.length must be equal to points.length.");const m=l.A.getPointType(n[0]);if(m!==l.A.getPointType(o)||m!==l.A.getPointType(c))throw new s.A("firstTangent and lastTangent must be of the same type as points.");if(n.length<3)return new A.A({points:n,times:t});const _=function(e,t,n){const o=d,r=g,s=h,A=f;let c;o.length=r.length=e.length-1,s.length=A.length=e.length,o[0]=s[0]=1,r[0]=0;let l=A[0];for((0,a.A)(l)||(l=A[0]=new i.A),i.A.clone(t,l),c=1;c<o.length-1;++c)o[c]=r[c]=1,s[c]=4,l=A[c],(0,a.A)(l)||(l=A[c]=new i.A),i.A.subtract(e[c+1],e[c-1],l),i.A.multiplyByScalar(l,3,l);return o[c]=0,r[c]=1,s[c]=4,l=A[c],(0,a.A)(l)||(l=A[c]=new i.A),i.A.subtract(e[c+1],e[c-1],l),i.A.multiplyByScalar(l,3,l),s[c+1]=1,l=A[c+1],(0,a.A)(l)||(l=A[c+1]=new i.A),i.A.clone(n,l),u.A.solve(o,s,r,A)}(n,o,c),I=_.slice(0,_.length-1);return new p({times:t,points:n,inTangents:_.slice(1,_.length),outTangents:I})},p.hermiteCoefficientMatrix=new c.A(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0),p.prototype.findTimeInterval=l.A.prototype.findTimeInterval;const m=new o.A,_=new i.A;p.prototype.wrapTime=l.A.prototype.wrapTime,p.prototype.clampTime=l.A.prototype.clampTime,p.prototype.evaluate=function(e,t){const n=this.points,i=this.times,o=this.inTangents,r=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const s=this._lastTimeIndex,A=i[s+1]-i[s],l=(e-i[s])/A,u=m;u.z=l,u.y=l*l,u.x=u.y*l,u.w=1;const d=c.A.multiplyByVector(p.hermiteCoefficientMatrix,u,u);d.z*=A,d.w*=A;const h=this._pointType;return h===Number?n[s]*d.x+n[s+1]*d.y+r[s]*d.z+o[s]*d.w:((0,a.A)(t)||(t=new h),t=h.multiplyByScalar(n[s],d.x,t),h.multiplyByScalar(n[s+1],d.y,_),h.add(t,_,t),h.multiplyByScalar(r[s],d.z,_),h.add(t,_,t),h.multiplyByScalar(o[s],d.w,_),h.add(t,_,t))};const I=p},416721:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(605971);const r={};function a(e,t,n,i){if(0!==i)return;1===n&&(t.x=e-1-t.x,t.y=e-1-t.y);const o=t.x;t.x=t.y,t.y=o}r.encode2D=function(e,t,n){const r=Math.pow(2,e);if(i.A.typeOf.number("level",e),i.A.typeOf.number("x",t),i.A.typeOf.number("y",n),e<1)throw new o.A("Hilbert level cannot be less than 1.");if(t<0||t>=r||n<0||n>=r)throw new o.A("Invalid coordinates for given level.");const s={x:t,y:n};let A,c,l,u=BigInt(0);for(l=r/2;l>0;l/=2)A=(s.x&l)>0?1:0,c=(s.y&l)>0?1:0,u+=BigInt((3*A^c)*l*l),a(r,s,A,c);return u},r.decode2D=function(e,t){if(i.A.typeOf.number("level",e),i.A.typeOf.bigint("index",t),e<1)throw new o.A("Hilbert level cannot be less than 1.");if(t<BigInt(0)||t>=BigInt(Math.pow(4,e)))throw new o.A("Hilbert index exceeds valid maximum for given level.");const n=Math.pow(2,e),r={x:0,y:0};let s,A,c,l;for(c=1,l=t;c<n;c*=2)s=1&Number(l/BigInt(2)),A=1&Number(l^BigInt(s)),a(c,r,s,A),r.x+=c*s,r.y+=c*A,l/=BigInt(4);return[r.x,r.y]};const s=r},941060:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(491446),o=n(300138),r=n(591978),a=n(367817),s=n(711337);const A={},c=-.0529921,l=-.1059842,u=13.0120009,d=13.3407154,h=.9856003,g=26.4057084,f=13.064993,p=.3287146,m=1.7484877,_=-.1589763,I=.0036096,E=.1643573,y=12.9590088;let C=new r.A;A.ComputeMoon=function(e,t){(0,i.A)(e)||(e=r.A.now()),C=r.A.addSeconds(e,32.184,C);const n=r.A.totalDays(C)-2451545,A=n/s.A.DAYS_PER_JULIAN_CENTURY,b=(125.045+c*n)*a.A.RADIANS_PER_DEGREE,B=(250.089+l*n)*a.A.RADIANS_PER_DEGREE,v=(260.008+u*n)*a.A.RADIANS_PER_DEGREE,w=(176.625+d*n)*a.A.RADIANS_PER_DEGREE,T=(357.529+h*n)*a.A.RADIANS_PER_DEGREE,S=(311.589+g*n)*a.A.RADIANS_PER_DEGREE,x=(134.963+f*n)*a.A.RADIANS_PER_DEGREE,D=(276.617+p*n)*a.A.RADIANS_PER_DEGREE,Q=(34.226+m*n)*a.A.RADIANS_PER_DEGREE,N=(15.134+_*n)*a.A.RADIANS_PER_DEGREE,R=(119.743+I*n)*a.A.RADIANS_PER_DEGREE,M=(239.961+E*n)*a.A.RADIANS_PER_DEGREE,L=(25.053+y*n)*a.A.RADIANS_PER_DEGREE,P=Math.sin(b),O=Math.sin(B),F=Math.sin(v),U=Math.sin(w),k=Math.sin(T),G=Math.sin(S),H=Math.sin(x),V=Math.sin(D),z=Math.sin(Q),j=Math.sin(N),Y=Math.sin(R),q=Math.sin(M),W=Math.sin(L),J=Math.cos(b),K=Math.cos(B),X=Math.cos(v),Z=Math.cos(w),$=Math.cos(T),ee=Math.cos(S),te=Math.cos(x),ne=Math.cos(D),ie=Math.cos(Q),oe=Math.cos(N),re=Math.cos(R),ae=Math.cos(M),se=Math.cos(L),Ae=(269.9949+.0031*A-3.8787*P-.1204*O+.07*F-.0172*U+.0072*G-.0052*j+.0043*W)*a.A.RADIANS_PER_DEGREE,ce=(66.5392+.013*A+1.5419*J+.0239*K-.0278*X+.0068*Z-.0029*ee+9e-4*te+8e-4*oe-9e-4*se)*a.A.RADIANS_PER_DEGREE,le=(38.3213+13.17635815*n-14e-13*n*n+3.561*P+.1208*O-.0642*F+.0158*U+.0252*k-.0066*G-.0047*H-.0046*V+.0028*z+.0052*j+.004*Y+.0019*q-.0044*W)*a.A.RADIANS_PER_DEGREE,ue=(13.17635815-2*n*14e-13+3.561*J*c+.1208*K*l-.0642*X*u+.0158*Z*d+.0252*$*h-.0066*ee*g-.0047*te*f-.0046*ne*p+.0028*ie*m+.0052*oe*_+.004*re*I+.0019*ae*E-.0044*se*y)/86400*a.A.RADIANS_PER_DEGREE;return(0,i.A)(t)||(t=new o.A),t.rightAscension=Ae,t.declination=ce,t.rotation=le,t.rotationRate=ue,t};const b=A},220871:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(267980),o=n(491446),r=n(941060),a=n(591978),s=n(367817),A=n(331185),c=n(99479);function l(e){(0,o.A)(e)&&"function"==typeof e||(e=r.A.ComputeMoon),this._computeFunction=e}const u=new i.A,d=new i.A,h=new i.A,g=new A.A,f=new c.A;l.prototype.evaluate=function(e,t){(0,o.A)(e)||(e=a.A.now());const n=this._computeFunction(e),r=function(e,t,n){const r=u;r.x=Math.cos(e+s.A.PI_OVER_TWO),r.y=Math.sin(e+s.A.PI_OVER_TWO),r.z=0;const a=Math.cos(t),c=h;c.x=a*Math.cos(e),c.y=a*Math.sin(e),c.z=Math.sin(t);const l=i.A.cross(c,r,d);return(0,o.A)(n)||(n=new A.A),n[0]=r.x,n[1]=l.x,n[2]=c.x,n[3]=r.y,n[4]=l.y,n[5]=c.y,n[6]=r.z,n[7]=l.z,n[8]=c.z,n}(n.rightAscension,n.declination,t),l=s.A.zeroToTwoPi(n.rotation),p=c.A.fromAxisAngle(i.A.UNIT_Z,l,f),m=A.A.fromQuaternion(c.A.conjugate(p,p),g);return A.A.multiply(m,r,r)};const p=l},300138:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n,i){this.rightAscension=e,this.declination=t,this.rotation=n,this.rotationRate=i}},92457:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({STEP:0,LINEAR:1,CUBICSPLINE:2})},587451:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(434067),o=n(267980),r=n(369031),a=n(491446),s=n(605971);const A={clipTriangleAtAxisAlignedThreshold:function(e,t,n,i,o,r){if(!(0,a.A)(e))throw new s.A("threshold is required.");if(!(0,a.A)(t))throw new s.A("keepAbove is required.");if(!(0,a.A)(n))throw new s.A("u0 is required.");if(!(0,a.A)(i))throw new s.A("u1 is required.");if(!(0,a.A)(o))throw new s.A("u2 is required.");let A,c,l;(0,a.A)(r)?r.length=0:r=[],t?(A=n<e,c=i<e,l=o<e):(A=n>e,c=i>e,l=o>e);const u=A+c+l;let d,h,g,f,p,m;return 1===u?A?(d=(e-n)/(i-n),h=(e-n)/(o-n),r.push(1),r.push(2),1!==h&&(r.push(-1),r.push(0),r.push(2),r.push(h)),1!==d&&(r.push(-1),r.push(0),r.push(1),r.push(d))):c?(g=(e-i)/(o-i),f=(e-i)/(n-i),r.push(2),r.push(0),1!==f&&(r.push(-1),r.push(1),r.push(0),r.push(f)),1!==g&&(r.push(-1),r.push(1),r.push(2),r.push(g))):l&&(p=(e-o)/(n-o),m=(e-o)/(i-o),r.push(0),r.push(1),1!==m&&(r.push(-1),r.push(2),r.push(1),r.push(m)),1!==p&&(r.push(-1),r.push(2),r.push(0),r.push(p))):2===u?A||n===e?c||i===e?l||o===e||(h=(e-n)/(o-n),g=(e-i)/(o-i),r.push(2),r.push(-1),r.push(0),r.push(2),r.push(h),r.push(-1),r.push(1),r.push(2),r.push(g)):(m=(e-o)/(i-o),d=(e-n)/(i-n),r.push(1),r.push(-1),r.push(2),r.push(1),r.push(m),r.push(-1),r.push(0),r.push(1),r.push(d)):(f=(e-i)/(n-i),p=(e-o)/(n-o),r.push(0),r.push(-1),r.push(1),r.push(0),r.push(f),r.push(-1),r.push(2),r.push(0),r.push(p)):3!==u&&(r.push(0),r.push(1),r.push(2)),r},computeBarycentricCoordinates:function(e,t,n,i,r,A,c,l,u){if(!(0,a.A)(e))throw new s.A("x is required.");if(!(0,a.A)(t))throw new s.A("y is required.");if(!(0,a.A)(n))throw new s.A("x1 is required.");if(!(0,a.A)(i))throw new s.A("y1 is required.");if(!(0,a.A)(r))throw new s.A("x2 is required.");if(!(0,a.A)(A))throw new s.A("y2 is required.");if(!(0,a.A)(c))throw new s.A("x3 is required.");if(!(0,a.A)(l))throw new s.A("y3 is required.");const d=n-c,h=c-r,g=A-l,f=i-l,p=1/(g*d+h*f),m=t-l,_=e-c,I=(g*_+h*m)*p,E=(-f*_+d*m)*p,y=1-I-E;return(0,a.A)(u)?(u.x=I,u.y=E,u.z=y,u):new o.A(I,E,y)},computeLineSegmentLineSegmentIntersection:function(e,t,n,o,s,A,c,l,u){r.A.typeOf.number("x00",e),r.A.typeOf.number("y00",t),r.A.typeOf.number("x01",n),r.A.typeOf.number("y01",o),r.A.typeOf.number("x10",s),r.A.typeOf.number("y10",A),r.A.typeOf.number("x11",c),r.A.typeOf.number("y11",l);const d=(l-A)*(n-e)-(c-s)*(o-t);if(0===d)return;const h=((c-s)*(t-A)-(l-A)*(e-s))/d,g=((n-e)*(t-A)-(o-t)*(e-s))/d;return h>=0&&h<=1&&g>=0&&g<=1?((0,a.A)(u)||(u=new i.A),u.x=e+h*(n-e),u.y=t+h*(o-t),u):void 0}}},386009:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(672743),o=n(491446),r=n(744603);let a;const s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2NTEwZTU2Yi0wOGEyLTQyZjgtOTJjNi04Mzc2NGRlNzA4NTkiLCJpZCI6MjU5LCJpYXQiOjE3NTY4NDExOTJ9._Y3MIsYgGKTVTpkEpKPNT0cQSa_hUocY0DdH7h0U-xM",A={};A.defaultAccessToken=s,A.defaultServer=new r.A({url:"https://api.cesium.com/"}),A.getDefaultTokenCredit=function(e){if(e===s){if(!(0,o.A)(a)){const e='<b>             This application is using Cesium\'s default ion access token. Please assign <i>Cesium.Ion.defaultAccessToken</i>             with an access token from your ion account before making any Cesium API calls.             You can sign up for a free ion account at <a href="https://cesium.com">https://cesium.com</a>.</b>';a=new i.A(e,!0)}return a}};const c=A},139152:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({GOOGLE:"GOOGLE",BING:"BING",DEFAULT:"DEFAULT"})},5188:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(369031),o=n(672743),r=n(915325),a=n(491446),s=n(605971),A=n(386009),c=n(139152),l=n(927578),u=n(744603);function d(e){if(!Object.values(c.A).some(t=>t===e))throw new s.A(`Invalid geocodeProviderType: "${e}"`)}const h=Object.freeze({[c.A.GOOGLE]:"google",[c.A.BING]:"bing",[c.A.DEFAULT]:void 0});function g(e){e=e??r.A.EMPTY_OBJECT,i.A.typeOf.object("options.scene",e.scene);const t=e.geocodeProviderType??c.A.DEFAULT;d(t);const n=e.accessToken??A.A.defaultAccessToken,s=u.A.createIfNeeded(e.server??A.A.defaultServer);s.appendForwardSlash();const h=A.A.getDefaultTokenCredit(n);(0,a.A)(h)&&e.scene.frameState.creditDisplay.addStaticCredit(o.A.clone(h));const g=s.getDerivedResource({url:"v1/geocode"});(0,a.A)(n)&&g.appendQueryParameters({access_token:n}),this._accessToken=n,this._server=s,this._pelias=new l.A(g),this.geocodeProviderType=t}Object.defineProperties(g.prototype,{credit:{get:function(){}},geocodeProviderType:{get:function(){return e=this._pelias.url.queryParameters.geocoder,Object.entries(h).find(t=>t[1]===e)[0];var e},set:function(e){d(e);const t={...this._pelias.url.queryParameters,geocoder:(n=e,h[n])};var n;(0,a.A)(t.geocoder)||delete t.geocoder,this._pelias.url.setQueryParameters(t)}}}),g.prototype.geocode=async function(e,t){return this._pelias.geocode(e,t)};const f=g},954865:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(484193),o=n(369031),r=n(672743),a=n(915325),s=n(491446),A=n(386009),c=n(744603),l=n(123245);function u(e,t){let n;o.A.defined("endpoint",e),o.A.defined("endpointResource",t);const r=e.externalType,a=(0,s.A)(r);if(a){if("3DTILES"!==r&&"STK_TERRAIN_SERVER"!==r)throw new l.A("Ion.createResource does not support external imagery assets; use IonImageryProvider instead.");n={url:e.options.url}}else n={url:e.url,retryAttempts:1,retryCallback:h};c.A.call(this,n),this._ionEndpoint=e,this._ionEndpointDomain=a?void 0:new i(e.url).authority(),this._ionEndpointResource=t,this._ionRoot=void 0,this._pendingPromise=void 0,this._credits=void 0,this._isExternal=a}function d(e){(0,s.A)(e.headers)||(e.headers={}),e.headers["X-Cesium-Client"]="CesiumJS","undefined"!=typeof CESIUM_VERSION&&(e.headers["X-Cesium-Client-Version"]=CESIUM_VERSION)}function h(e,t){const n=e._ionRoot??e,i=n._ionEndpointResource,o="undefined"!=typeof Image;return(0,s.A)(t)&&(401===t.statusCode||o&&t.target instanceof Image)?((0,s.A)(n._pendingPromise)||(n._pendingPromise=i.fetchJson().then(function(e){return n._ionEndpoint=e,e}).finally(function(e){return n._pendingPromise=void 0,e})),n._pendingPromise.then(function(t){return e._ionEndpoint=t,!0})):Promise.resolve(!1)}(0,s.A)(Object.create)&&(u.prototype=Object.create(c.A.prototype),u.prototype.constructor=u),u.fromAssetId=function(e,t){const n=u._createEndpointResource(e,t);return n.fetchJson().then(function(e){return new u(e,n)})},Object.defineProperties(u.prototype,{credits:{get:function(){return(0,s.A)(this._ionRoot)?this._ionRoot.credits:((0,s.A)(this._credits)||(this._credits=u.getCreditsFromEndpoint(this._ionEndpoint,this._ionEndpointResource)),this._credits)}}}),u.getCreditsFromEndpoint=function(e,t){const n=e.attributions.map(r.A.getIonCredit),i=A.A.getDefaultTokenCredit(t.queryParameters.access_token);return(0,s.A)(i)&&n.push(r.A.clone(i)),n},u.prototype.clone=function(e){const t=this._ionRoot??this;return(0,s.A)(e)||(e=new u(t._ionEndpoint,t._ionEndpointResource)),(e=c.A.prototype.clone.call(this,e))._ionRoot=t,e._isExternal=this._isExternal,e},u.prototype.fetchImage=function(e){if(!this._isExternal){const t=e;e={preferBlob:!0},(0,s.A)(t)&&(e.flipY=t.flipY,e.preferImageBitmap=t.preferImageBitmap)}return c.A.prototype.fetchImage.call(this,e)},u.prototype._makeRequest=function(e){return this._isExternal||new i(this.url).authority()!==this._ionEndpointDomain||(d(e),e.headers.Authorization=`Bearer ${this._ionEndpoint.accessToken}`),c.A.prototype._makeRequest.call(this,e)},u._createEndpointResource=function(e,t){o.A.defined("assetId",e);let n=(t=t??a.A.EMPTY_OBJECT).server??A.A.defaultServer;const i=t.accessToken??A.A.defaultAccessToken;n=c.A.createIfNeeded(n);const r={url:`v1/assets/${e}/endpoint`};return(0,s.A)(i)&&(r.queryParameters={access_token:i}),d(r),n.getDerivedResource(r)};const g=u},862675:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446),o=n(605971);const r={type:"Linear",getRequiredDataPoints:function(e){return 2},interpolateOrderZero:function(e,t,n,r,a){if(2!==t.length)throw new o.A("The xTable provided to the linear interpolator must have exactly two elements.");if(r<=0)throw new o.A("There must be at least 1 dependent variable for each independent variable.");let s,A,c;(0,i.A)(a)||(a=new Array(r));const l=t[0],u=t[1];if(l===u)throw new o.A("Divide by zero error: xTable[0] and xTable[1] are equal");for(s=0;s<r;s++)A=n[s],c=n[s+r],a[s]=((c-A)*e+u*A-l*c)/(u-l);return a}}},153127:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(267980),o=n(915325),r=n(491446),a=n(605971),s=n(437266);function A(e){const t=(e=e??o.A.EMPTY_OBJECT).points,n=e.times;if(!(0,r.A)(t)||!(0,r.A)(n))throw new a.A("points and times are required.");if(t.length<2)throw new a.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a.A("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=s.A.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(A.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),A.prototype.findTimeInterval=s.A.prototype.findTimeInterval,A.prototype.wrapTime=s.A.prototype.wrapTime,A.prototype.clampTime=s.A.prototype.clampTime,A.prototype.evaluate=function(e,t){const n=this.points,o=this.times,a=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),s=(e-o[a])/(o[a+1]-o[a]);return this._pointType===Number?(1-s)*n[a]+s*n[a+1]:((0,r.A)(t)||(t=new i.A),i.A.lerp(n[a],n[a+1],s,t))};const c=A},981757:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){e=e??0,this._array=new Array(e),this._length=e}Object.defineProperties(o.prototype,{length:{get:function(){return this._length},set:function(e){i.A.typeOf.number.greaterThanOrEquals("length",e,0);const t=this._array,n=this._length;if(e<n)for(let i=e;i<n;++i)t[i]=void 0;else e>t.length&&(t.length=e);this._length=e}},values:{get:function(){return this._array}}}),o.prototype.get=function(e){return i.A.typeOf.number.lessThan("index",e,this._array.length),this._array[e]},o.prototype.set=function(e,t){i.A.typeOf.number("index",e),e>=this._length&&(this.length=e+1),this._array[e]=t},o.prototype.peek=function(){return this._array[this._length-1]},o.prototype.push=function(e){const t=this.length++;this._array[t]=e},o.prototype.pop=function(){if(0===this._length)return;const e=this._array[this._length-1];return--this.length,e},o.prototype.reserve=function(e){i.A.typeOf.number.greaterThanOrEquals("length",e,0),e>this._array.length&&(this._array.length=e)},o.prototype.resize=function(e){i.A.typeOf.number.greaterThanOrEquals("length",e,0),this.length=e},o.prototype.trim=function(e){e=e??this._length,this._array.length=e};const r=o},245226:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(491446),r=n(605971);const a={};function s(e){return 1431655765&((e=858993459&((e=252645135&((e=16711935&(e^e<<8))^e<<4))^e<<2))^e<<1)}function A(e){return 153391689&((e=51130563&((e=50393103&((e=50331903&(e^e<<16))^e<<8))^e<<4))^e<<2)}function c(e){return 65535&((e=16711935&((e=252645135&((e=858993459&((e&=1431655765)^e>>1))^e>>2))^e>>4))^e>>8)}function l(e){return 1023&((e=4278190335&((e=50393103&((e=51130563&((e&=153391689)^e>>2))^e>>4))^e>>8))^e>>16)}a.encode2D=function(e,t){if(i.A.typeOf.number("x",e),i.A.typeOf.number("y",t),e<0||e>65535||t<0||t>65535)throw new r.A("inputs must be 16-bit unsigned integers");return(s(e)|s(t)<<1)>>>0},a.decode2D=function(e,t){if(i.A.typeOf.number("mortonIndex",e),e<0||e>4294967295)throw new r.A("input must be a 32-bit unsigned integer");return(0,o.A)(t)||(t=new Array(2)),t[0]=c(e),t[1]=c(e>>1),t},a.encode3D=function(e,t,n){if(i.A.typeOf.number("x",e),i.A.typeOf.number("y",t),i.A.typeOf.number("z",n),e<0||e>1023||t<0||t>1023||n<0||n>1023)throw new r.A("inputs must be 10-bit unsigned integers");return A(e)|A(t)<<1|A(n)<<2},a.decode3D=function(e,t){if(i.A.typeOf.number("mortonIndex",e),e<0||e>1073741823)throw new r.A("input must be a 30-bit unsigned integer");return(0,o.A)(t)||(t=new Array(3)),t[0]=l(e),t[1]=l(e>>1),t[2]=l(e>>2),t};const u=a},19128:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(660662),o=n(267980),r=n(491446),a=n(605971),s=n(610750),A=n(367817),c=n(697422),l=n(566123);function u(e,t){if(!(0,r.A)(e))throw new a.A("occluderBoundingSphere is required.");if(!(0,r.A)(t))throw new a.A("camera position is required.");this._occluderPosition=o.A.clone(e.center),this._occluderRadius=e.radius,this._horizonDistance=0,this._horizonPlaneNormal=void 0,this._horizonPlanePosition=void 0,this._cameraPosition=void 0,this.cameraPosition=t}const d=new o.A;Object.defineProperties(u.prototype,{position:{get:function(){return this._occluderPosition}},radius:{get:function(){return this._occluderRadius}},cameraPosition:{set:function(e){if(!(0,r.A)(e))throw new a.A("cameraPosition is required.");e=o.A.clone(e,this._cameraPosition);const t=o.A.subtract(this._occluderPosition,e,d);let n=o.A.magnitudeSquared(t);const i=this._occluderRadius*this._occluderRadius;let s,A,c;if(n>i){s=Math.sqrt(n-i),n=1/Math.sqrt(n),A=o.A.multiplyByScalar(t,n,d);const r=s*s*n;c=o.A.add(e,o.A.multiplyByScalar(A,r,d),d)}else s=Number.MAX_VALUE;this._horizonDistance=s,this._horizonPlaneNormal=A,this._horizonPlanePosition=c,this._cameraPosition=e}}}),u.fromBoundingSphere=function(e,t,n){if(!(0,r.A)(e))throw new a.A("occluderBoundingSphere is required.");if(!(0,r.A)(t))throw new a.A("camera position is required.");return(0,r.A)(n)?(o.A.clone(e.center,n._occluderPosition),n._occluderRadius=e.radius,n.cameraPosition=t,n):new u(e,t)};const h=new o.A;u.prototype.isPointVisible=function(e){if(this._horizonDistance!==Number.MAX_VALUE){let t=o.A.subtract(e,this._occluderPosition,h),n=this._occluderRadius;if(n=o.A.magnitudeSquared(t)-n*n,n>0)return n=Math.sqrt(n)+this._horizonDistance,t=o.A.subtract(e,this._cameraPosition,t),n*n>o.A.magnitudeSquared(t)}return!1};const g=new o.A;u.prototype.isBoundingSphereVisible=function(e){const t=o.A.clone(e.center,g),n=e.radius;if(this._horizonDistance!==Number.MAX_VALUE){let e=o.A.subtract(t,this._occluderPosition,h),i=this._occluderRadius-n;if(i=o.A.magnitudeSquared(e)-i*i,n<this._occluderRadius)return i>0&&(i=Math.sqrt(i)+this._horizonDistance,e=o.A.subtract(t,this._cameraPosition,e),i*i+n*n>o.A.magnitudeSquared(e));if(i>0){e=o.A.subtract(t,this._cameraPosition,e);const r=o.A.magnitudeSquared(e),a=this._occluderRadius*this._occluderRadius,s=n*n;return(this._horizonDistance*this._horizonDistance+a)*s>r*a||(i=Math.sqrt(i)+this._horizonDistance,i*i+s>r)}return!0}return!1};const f=new o.A;u.prototype.computeVisibility=function(e){if(!(0,r.A)(e))throw new a.A("occludeeBS is required.");const t=o.A.clone(e.center),n=e.radius;if(n>this._occluderRadius)return l.A.FULL;if(this._horizonDistance!==Number.MAX_VALUE){let e=o.A.subtract(t,this._occluderPosition,f),i=this._occluderRadius-n;const r=o.A.magnitudeSquared(e);if(i=r-i*i,i>0){i=Math.sqrt(i)+this._horizonDistance,e=o.A.subtract(t,this._cameraPosition,e);const a=o.A.magnitudeSquared(e);return i*i+n*n<a?l.A.NONE:(i=this._occluderRadius+n,i=r-i*i,i>0?(i=Math.sqrt(i)+this._horizonDistance,a<i*i+n*n?l.A.FULL:l.A.PARTIAL):(e=o.A.subtract(t,this._horizonPlanePosition,e),o.A.dot(e,this._horizonPlaneNormal)>-n?l.A.PARTIAL:l.A.FULL))}}return l.A.NONE};const p=new o.A;u.computeOccludeePoint=function(e,t,n){if(!(0,r.A)(e))throw new a.A("occluderBoundingSphere is required.");if(!(0,r.A)(n))throw new a.A("positions is required.");if(0===n.length)throw new a.A("positions must contain at least one element");const i=o.A.clone(t),s=o.A.clone(e.center),A=e.radius,c=n.length;if(o.A.equals(s,t))throw new a.A("occludeePosition must be different than occluderBoundingSphere.center");const l=o.A.normalize(o.A.subtract(i,s,p),p),d=-o.A.dot(l,s),h=u._anyRotationVector(s,l,d);let g,f=u._horizonToPlaneNormalDotProduct(e,l,d,h,n[0]);if(!f)return;for(let t=1;t<c;++t){if(g=u._horizonToPlaneNormalDotProduct(e,l,d,h,n[t]),!g)return;g<f&&(f=g)}if(f<.0017453283658983088)return;const m=A/f;return o.A.add(s,o.A.multiplyByScalar(l,m,p),p)};const m=[];u.computeOccludeePointFromRectangle=function(e,t){if(!(0,r.A)(e))throw new a.A("rectangle is required.");t=t??s.A.default;const n=c.A.subsample(e,t,0,m),A=i.A.fromPoints(n),l=o.A.ZERO;if(!o.A.equals(l,A.center))return u.computeOccludeePoint(new i.A(l,t.minimumRadius),A.center,n)};const _=new o.A;u._anyRotationVector=function(e,t,n){const i=o.A.abs(t,_);let r=i.x>i.y?0:1;(0===r&&i.z>i.x||1===r&&i.z>i.y)&&(r=2);const a=new o.A;let s;0===r?(i.x=e.x,i.y=e.y+1,i.z=e.z+1,s=o.A.UNIT_X):1===r?(i.x=e.x+1,i.y=e.y,i.z=e.z+1,s=o.A.UNIT_Y):(i.x=e.x+1,i.y=e.y+1,i.z=e.z,s=o.A.UNIT_Z);const A=(o.A.dot(t,i)+n)/-o.A.dot(t,s);return o.A.normalize(o.A.subtract(o.A.add(i,o.A.multiplyByScalar(s,A,a),i),e,i),i)};const I=new o.A;u._rotationVector=function(e,t,n,i,r){let a=o.A.subtract(i,e,I);if(a=o.A.normalize(a,a),o.A.dot(t,a)<.9999999847691291){const e=o.A.cross(t,a,a);if(o.A.magnitude(e)>A.A.EPSILON13)return o.A.normalize(e,new o.A)}return r};const E=new o.A,y=new o.A,C=new o.A,b=new o.A;u._horizonToPlaneNormalDotProduct=function(e,t,n,i,r){const a=o.A.clone(r,E),s=o.A.clone(e.center,y),A=e.radius;let c=o.A.subtract(s,a,C);const l=o.A.magnitudeSquared(c),u=A*A;if(l<u)return!1;const d=l-u,h=Math.sqrt(d),g=h*(1/Math.sqrt(l))*h;c=o.A.normalize(c,c);const f=o.A.add(a,o.A.multiplyByScalar(c,g,b),b),p=Math.sqrt(d-g*g);let m=this._rotationVector(s,t,n,a,i),_=o.A.fromElements(m.x*m.x*c.x+(m.x*m.y-m.z)*c.y+(m.x*m.z+m.y)*c.z,(m.x*m.y+m.z)*c.x+m.y*m.y*c.y+(m.y*m.z-m.x)*c.z,(m.x*m.z-m.y)*c.x+(m.y*m.z+m.x)*c.y+m.z*m.z*c.z,E);_=o.A.normalize(_,_);const I=o.A.multiplyByScalar(_,p,E);m=o.A.normalize(o.A.subtract(o.A.add(f,I,C),s,C),C);const B=o.A.dot(t,m);m=o.A.normalize(o.A.subtract(o.A.subtract(f,I,m),s,m),m);const v=o.A.dot(t,m);return B<v?B:v};const B=u},927578:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(267980),o=n(369031),r=n(491446),a=n(123475),s=n(697422),A=n(744603);function c(e){o.A.defined("url",e),this._url=A.A.createIfNeeded(e),this._url.appendForwardSlash()}Object.defineProperties(c.prototype,{url:{get:function(){return this._url}},credit:{get:function(){}}}),c.prototype.geocode=async function(e,t){return o.A.typeOf.string("query",e),this._url.getDerivedResource({url:t===a.A.AUTOCOMPLETE?"autocomplete":"search",queryParameters:{text:e}}).fetchJson().then(function(e){return e.features.map(function(t){let n;const o=t.bbox;if((0,r.A)(o))n=s.A.fromDegrees(o[0],o[1],o[2],o[3]);else{const e=t.geometry.coordinates[0],o=t.geometry.coordinates[1];n=i.A.fromDegrees(e,o)}return{displayName:t.properties.label,destination:n,attributions:e.attributions}})})};const l=c},666775:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(915325),r=n(491446),a=n(605971),s=n(367817),A=n(65783);function c(e){e=e??o.A.EMPTY_OBJECT,this._offCenterFrustum=new A.A,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near??1,this._near=this.near,this.far=e.far??5e8,this._far=this.far,this.xOffset=e.xOffset??0,this._xOffset=this.xOffset,this.yOffset=e.yOffset??0,this._yOffset=this.yOffset}function l(e){if(!((0,r.A)(e.fov)&&(0,r.A)(e.aspectRatio)&&(0,r.A)(e.near)&&(0,r.A)(e.far)))throw new a.A("fov, aspectRatio, near, or far parameters are not set.");if(e.fov===e._fov&&e.aspectRatio===e._aspectRatio&&e.near===e._near&&e.far===e._far&&e.xOffset===e._xOffset&&e.yOffset===e._yOffset)return;if(i.A.typeOf.number.greaterThanOrEquals("fov",e.fov,0),i.A.typeOf.number.lessThan("fov",e.fov,Math.PI),i.A.typeOf.number.greaterThanOrEquals("aspectRatio",e.aspectRatio,0),i.A.typeOf.number.greaterThanOrEquals("near",e.near,0),e.near>e.far)throw new a.A("near must be less than far.");e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset;const t=e._offCenterFrustum;t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset}c.packedLength=6,c.pack=function(e,t,n){return i.A.typeOf.object("value",e),i.A.defined("array",t),n=n??0,t[n++]=e.fov,t[n++]=e.aspectRatio,t[n++]=e.near,t[n++]=e.far,t[n++]=e.xOffset,t[n]=e.yOffset,t},c.unpack=function(e,t,n){return i.A.defined("array",e),t=t??0,(0,r.A)(n)||(n=new c),n.fov=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t++],n.xOffset=e[t++],n.yOffset=e[t],n},Object.defineProperties(c.prototype,{projectionMatrix:{get:function(){return l(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return l(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return l(this),this._fovy}},sseDenominator:{get:function(){return l(this),this._sseDenominator}},offCenterFrustum:{get:function(){return l(this),this._offCenterFrustum}}}),c.prototype.computeCullingVolume=function(e,t,n){return l(this),this._offCenterFrustum.computeCullingVolume(e,t,n)},c.prototype.getPixelDimensions=function(e,t,n,i,o){return l(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)},c.prototype.clone=function(e){return(0,r.A)(e)||(e=new c),e.aspectRatio=this.aspectRatio,e.fov=this.fov,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._fov=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},c.prototype.equals=function(e){return!!((0,r.A)(e)&&e instanceof c)&&(l(this),l(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},c.prototype.equalsEpsilon=function(e,t,n){return!!((0,r.A)(e)&&e instanceof c)&&(l(this),l(e),s.A.equalsEpsilon(this.fov,e.fov,t,n)&&s.A.equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};const u=c},65783:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(267980),o=n(626809),r=n(400793),a=n(915325),s=n(491446),A=n(605971),c=n(367817),l=n(584164);function u(e){e=e??a.A.EMPTY_OBJECT,this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near??1,this._near=this.near,this.far=e.far??5e8,this._far=this.far,this._cullingVolume=new r.A,this._perspectiveMatrix=new l.A,this._infinitePerspective=new l.A}function d(e){if(!((0,s.A)(e.right)&&(0,s.A)(e.left)&&(0,s.A)(e.top)&&(0,s.A)(e.bottom)&&(0,s.A)(e.near)&&(0,s.A)(e.far)))throw new A.A("right, left, top, bottom, near, or far parameters are not set.");const{top:t,bottom:n,right:i,left:o,near:r,far:a}=e;if(t!==e._top||n!==e._bottom||o!==e._left||i!==e._right||r!==e._near||a!==e._far){if(e.near<=0||e.near>e.far)throw new A.A("near must be greater than zero and less than far.");e._left=o,e._right=i,e._top=t,e._bottom=n,e._near=r,e._far=a,e._perspectiveMatrix=l.A.computePerspectiveOffCenter(o,i,n,t,r,a,e._perspectiveMatrix),e._infinitePerspective=l.A.computeInfinitePerspectiveOffCenter(o,i,n,t,r,e._infinitePerspective)}}Object.defineProperties(u.prototype,{projectionMatrix:{get:function(){return d(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return d(this),this._infinitePerspective}}});const h=new i.A,g=new i.A,f=new i.A,p=new i.A;u.prototype.computeCullingVolume=function(e,t,n){if(!(0,s.A)(e))throw new A.A("position is required.");if(!(0,s.A)(t))throw new A.A("direction is required.");if(!(0,s.A)(n))throw new A.A("up is required.");const r=this._cullingVolume.planes,a=this.top,c=this.bottom,l=this.right,u=this.left,d=this.near,m=this.far,_=i.A.cross(t,n,h),I=g;i.A.multiplyByScalar(t,d,I),i.A.add(e,I,I);const E=f;i.A.multiplyByScalar(t,m,E),i.A.add(e,E,E);const y=p;i.A.multiplyByScalar(_,u,y),i.A.add(I,y,y),i.A.subtract(y,e,y),i.A.normalize(y,y),i.A.cross(y,n,y),i.A.normalize(y,y);let C=r[0];return(0,s.A)(C)||(C=r[0]=new o.A),C.x=y.x,C.y=y.y,C.z=y.z,C.w=-i.A.dot(y,e),i.A.multiplyByScalar(_,l,y),i.A.add(I,y,y),i.A.subtract(y,e,y),i.A.cross(n,y,y),i.A.normalize(y,y),C=r[1],(0,s.A)(C)||(C=r[1]=new o.A),C.x=y.x,C.y=y.y,C.z=y.z,C.w=-i.A.dot(y,e),i.A.multiplyByScalar(n,c,y),i.A.add(I,y,y),i.A.subtract(y,e,y),i.A.cross(_,y,y),i.A.normalize(y,y),C=r[2],(0,s.A)(C)||(C=r[2]=new o.A),C.x=y.x,C.y=y.y,C.z=y.z,C.w=-i.A.dot(y,e),i.A.multiplyByScalar(n,a,y),i.A.add(I,y,y),i.A.subtract(y,e,y),i.A.cross(y,_,y),i.A.normalize(y,y),C=r[3],(0,s.A)(C)||(C=r[3]=new o.A),C.x=y.x,C.y=y.y,C.z=y.z,C.w=-i.A.dot(y,e),C=r[4],(0,s.A)(C)||(C=r[4]=new o.A),C.x=t.x,C.y=t.y,C.z=t.z,C.w=-i.A.dot(t,I),i.A.negate(t,y),C=r[5],(0,s.A)(C)||(C=r[5]=new o.A),C.x=y.x,C.y=y.y,C.z=y.z,C.w=-i.A.dot(y,E),this._cullingVolume},u.prototype.getPixelDimensions=function(e,t,n,i,o){if(d(this),!(0,s.A)(e)||!(0,s.A)(t))throw new A.A("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new A.A("drawingBufferWidth must be greater than zero.");if(t<=0)throw new A.A("drawingBufferHeight must be greater than zero.");if(!(0,s.A)(n))throw new A.A("distance is required.");if(!(0,s.A)(i))throw new A.A("pixelRatio is required");if(i<=0)throw new A.A("pixelRatio must be greater than zero.");if(!(0,s.A)(o))throw new A.A("A result object is required.");const r=1/this.near;let a=this.top*r;const c=2*i*n*a/t;a=this.right*r;const l=2*i*n*a/e;return o.x=l,o.y=c,o},u.prototype.clone=function(e){return(0,s.A)(e)||(e=new u),e.right=this.right,e.left=this.left,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},u.prototype.equals=function(e){return(0,s.A)(e)&&e instanceof u&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},u.prototype.equalsEpsilon=function(e,t,n){return e===this||(0,s.A)(e)&&e instanceof u&&c.A.equalsEpsilon(this.right,e.right,t,n)&&c.A.equalsEpsilon(this.left,e.left,t,n)&&c.A.equalsEpsilon(this.top,e.top,t,n)&&c.A.equalsEpsilon(this.bottom,e.bottom,t,n)&&c.A.equalsEpsilon(this.near,e.near,t,n)&&c.A.equalsEpsilon(this.far,e.far,t,n)};const m=u},84609:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(660662),o=n(267980),r=n(369031),a=n(571804),s=n(915325),A=n(491446),c=n(944479),l=n(305439),u=n(46362),d=n(402330),h=n(769534);function g(e){const t=(e=e??s.A.EMPTY_OBJECT).vertexFormat??h.A.DEFAULT;this._vertexFormat=t,this._workerName="createPlaneGeometry"}g.packedLength=h.A.packedLength,g.pack=function(e,t,n){return r.A.typeOf.object("value",e),r.A.defined("array",t),n=n??0,h.A.pack(e._vertexFormat,t,n),t};const f=new h.A,p={vertexFormat:f};g.unpack=function(e,t,n){r.A.defined("array",e),t=t??0;const i=h.A.unpack(e,t,f);return(0,A.A)(n)?(n._vertexFormat=h.A.clone(i,n._vertexFormat),n):new g(p)};const m=new o.A(-.5,-.5,0),_=new o.A(.5,.5,0);g.createGeometry=function(e){const t=e._vertexFormat,n=new u.A;let r,s;if(t.position){if(s=new Float64Array(12),s[0]=m.x,s[1]=m.y,s[2]=0,s[3]=_.x,s[4]=m.y,s[5]=0,s[6]=_.x,s[7]=_.y,s[8]=0,s[9]=m.x,s[10]=_.y,s[11]=0,n.position=new l.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:s}),t.normal){const e=new Float32Array(12);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,n.normal=new l.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:e})}if(t.st){const e=new Float32Array(8);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,n.st=new l.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:2,values:e})}if(t.tangent){const e=new Float32Array(12);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,n.tangent=new l.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:e})}if(t.bitangent){const e=new Float32Array(12);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,n.bitangent=new l.A({componentDatatype:a.A.FLOAT,componentsPerAttribute:3,values:e})}r=new Uint16Array(6),r[0]=0,r[1]=1,r[2]=2,r[3]=0,r[4]=2,r[5]=3}return new c.A({attributes:n,indices:r,primitiveType:d.A.TRIANGLES,boundingSphere:new i.A(o.A.ZERO,Math.sqrt(2))})};const I=g},350939:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(660662),o=n(267980),r=n(369031),a=n(571804),s=n(491446),A=n(944479),c=n(305439),l=n(46362),u=n(402330);function d(){this._workerName="createPlaneOutlineGeometry"}d.packedLength=0,d.pack=function(e,t){return r.A.defined("value",e),r.A.defined("array",t),t},d.unpack=function(e,t,n){return r.A.defined("array",e),(0,s.A)(n)?n:new d};const h=new o.A(-.5,-.5,0),g=new o.A(.5,.5,0);d.createGeometry=function(){const e=new l.A,t=new Uint16Array(8),n=new Float64Array(12);return n[0]=h.x,n[1]=h.y,n[2]=h.z,n[3]=g.x,n[4]=h.y,n[5]=h.z,n[6]=g.x,n[7]=g.y,n[8]=h.z,n[9]=h.x,n[10]=g.y,n[11]=h.z,e.position=new c.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new A.A({attributes:e,indices:t,primitiveType:u.A.LINES,boundingSphere:new i.A(o.A.ZERO,Math.sqrt(2))})};const f=d},151949:(e,t,n)=>{"use strict";n.d(t,{A:()=>ge});var i=n(215327),o=n(647934),r=n(660662),a=n(434067),s=n(267980),A=n(336946),c=n(369031),l=n(571804),u=n(915325),d=n(491446),h=n(605971),g=n(610750),f=n(658091),p=n(944479),m=n(305439),_=n(75200),I=n(794554),E=n(34233),y=n(874915),C=n(367817),b=n(331185),B=n(71694),v=n(576770),w=n(99479),T=n(697422),S=n(465159),x=n(769534),D=n(666765);const Q=new A.A,N=new A.A;function R(e,t,n,i){const o=i.cartesianToCartographic(e,Q).height,r=i.cartesianToCartographic(t,N);r.height=o,i.cartographicToCartesian(r,t);const a=i.cartesianToCartographic(n,N);a.height=o-100,i.cartographicToCartesian(a,n)}const M=new o.A,L=new s.A,P=new s.A,O=new s.A,F=new s.A,U=new s.A,k=new s.A;let G=new s.A,H=new s.A,V=new s.A;const z=new a.A,j=new a.A,Y=new s.A,q=new w.A,W=new b.A,J=new b.A;function K(e){const t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,r=(0,d.A)(n.attributes.st)?n.attributes.st.values:void 0;let A=o.length;const c=e.wall,u=e.top||c,h=e.bottom||c;if(t.st||t.normal||t.tangent||t.bitangent||i){const g=e.boundingRectangle,f=e.rotationAxis,p=e.projectTo2d,_=e.ellipsoid,I=e.stRotation,E=e.perPositionHeight,y=z;y.x=g.x,y.y=g.y;const B=t.st?new Float32Array(A/3*2):void 0;let v;t.normal&&(v=E&&u&&!c?n.attributes.normal.values:new Float32Array(A));const T=t.tangent?new Float32Array(A):void 0,S=t.bitangent?new Float32Array(A):void 0,x=i?new Float32Array(A):void 0;let D=0,Q=0,N=P,M=O,K=F,X=!0,Z=W,$=J;if(0!==I){let e=w.A.fromAxisAngle(f,I,q);Z=b.A.fromQuaternion(e,Z),e=w.A.fromAxisAngle(f,-I,q),$=b.A.fromQuaternion(e,$)}else Z=b.A.clone(b.A.IDENTITY,Z),$=b.A.clone(b.A.IDENTITY,$);let ee=0,te=0;u&&h&&(ee=A/2,te=A/3,A/=2);for(let n=0;n<A;n+=3){const l=s.A.fromArray(o,n,Y);if(t.st&&!(0,d.A)(r)){let e=b.A.multiplyByVector(Z,l,L);e=_.scaleToGeodeticSurface(e,e);const t=p([e],j)[0];a.A.subtract(t,y,t);const n=C.A.clamp(t.x/g.width,0,1),i=C.A.clamp(t.y/g.height,0,1);h&&(B[D+te]=n,B[D+1+te]=i),u&&(B[D]=n,B[D+1]=i),D+=2}if(t.normal||t.tangent||t.bitangent||i){const r=Q+1,a=Q+2;if(c){if(n+3<A){const e=s.A.fromArray(o,n+3,U);if(X){const t=s.A.fromArray(o,n+A,k);E&&R(l,e,t,_),s.A.subtract(e,l,e),s.A.subtract(t,l,t),N=s.A.normalize(s.A.cross(t,e,N),N),X=!1}s.A.equalsEpsilon(e,l,C.A.EPSILON10)&&(X=!0)}(t.tangent||t.bitangent)&&(K=_.geodeticSurfaceNormal(l,K),t.tangent&&(M=s.A.normalize(s.A.cross(K,N,M),M)))}else N=_.geodeticSurfaceNormal(l,N),(t.tangent||t.bitangent)&&(E&&(G=s.A.fromArray(v,Q,G),H=s.A.cross(s.A.UNIT_Z,G,H),H=s.A.normalize(b.A.multiplyByVector($,H,H),H),t.bitangent&&(V=s.A.normalize(s.A.cross(G,H,V),V))),M=s.A.cross(s.A.UNIT_Z,N,M),M=s.A.normalize(b.A.multiplyByVector($,M,M),M),t.bitangent&&(K=s.A.normalize(s.A.cross(N,M,K),K)));t.normal&&(e.wall?(v[Q+ee]=N.x,v[r+ee]=N.y,v[a+ee]=N.z):h&&(v[Q+ee]=-N.x,v[r+ee]=-N.y,v[a+ee]=-N.z),(u&&!E||c)&&(v[Q]=N.x,v[r]=N.y,v[a]=N.z)),i&&(c&&(N=_.geodeticSurfaceNormal(l,N)),x[Q+ee]=-N.x,x[r+ee]=-N.y,x[a+ee]=-N.z),t.tangent&&(e.wall?(T[Q+ee]=M.x,T[r+ee]=M.y,T[a+ee]=M.z):h&&(T[Q+ee]=-M.x,T[r+ee]=-M.y,T[a+ee]=-M.z),u&&(E?(T[Q]=H.x,T[r]=H.y,T[a]=H.z):(T[Q]=M.x,T[r]=M.y,T[a]=M.z))),t.bitangent&&(h&&(S[Q+ee]=K.x,S[r+ee]=K.y,S[a+ee]=K.z),u&&(E?(S[Q]=V.x,S[r]=V.y,S[a]=V.z):(S[Q]=K.x,S[r]=K.y,S[a]=K.z))),Q+=3}}t.st&&!(0,d.A)(r)&&(n.attributes.st=new m.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:2,values:B})),t.normal&&(n.attributes.normal=new m.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:v})),t.tangent&&(n.attributes.tangent=new m.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:T})),t.bitangent&&(n.attributes.bitangent=new m.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:S})),i&&(n.attributes.extrudeDirection=new m.A({componentDatatype:l.A.FLOAT,componentsPerAttribute:3,values:x}))}if(e.extrude&&(0,d.A)(e.offsetAttribute)){const t=o.length/3;let i=new Uint8Array(t);if(e.offsetAttribute===I.A.TOP)u&&h||c?i=i.fill(1,0,t/2):u&&(i=i.fill(1));else{const t=e.offsetAttribute===I.A.NONE?0:1;i=i.fill(t)}n.attributes.applyOffset=new m.A({componentDatatype:l.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return n}const X=[];function Z(e,t,n,i,o,r,a,s,A,c){const l={walls:[]};let u;if(a||s){const o=B.A.createGeometryFromPositions(e,t,n,i,r,A,c),h=o.attributes.position.values,g=o.indices;let f,p;if(a&&s){const e=h.concat(h);f=e.length/3,p=y.A.createTypedArray(f,2*g.length),p.set(g);const t=g.length,i=f/2;for(u=0;u<t;u+=3){const e=p[u]+i,n=p[u+1]+i,o=p[u+2]+i;p[u+t]=o,p[u+1+t]=n,p[u+2+t]=e}if(o.attributes.position.values=e,r&&A.normal){const t=o.attributes.normal.values;o.attributes.normal.values=new Float32Array(e.length),o.attributes.normal.values.set(t)}if(A.st&&(0,d.A)(n)){const e=o.attributes.st.values;o.attributes.st.values=new Float32Array(2*f),o.attributes.st.values=e.concat(e)}o.indices=p}else if(s){for(f=h.length/3,p=y.A.createTypedArray(f,g.length),u=0;u<g.length;u+=3)p[u]=g[u+2],p[u+1]=g[u+1],p[u+2]=g[u];o.indices=p}l.topAndBottom=new _.A({geometry:o})}let h=o.outerRing;const g=f.A.fromPoints(h,e);let p=g.projectPointsOntoPlane(h,X),m=v.A.computeWindingOrder2D(p);m===D.A.CLOCKWISE&&(h=h.slice().reverse());let I=B.A.computeWallGeometry(h,n,e,i,r,c);l.walls.push(new _.A({geometry:I}));const E=o.holes;for(u=0;u<E.length;u++){let t=E[u];p=g.projectPointsOntoPlane(t,X),m=v.A.computeWindingOrder2D(p),m===D.A.COUNTER_CLOCKWISE&&(t=t.slice().reverse()),I=B.A.computeWallGeometry(t,n,e,i,r,c),l.walls.push(new _.A({geometry:I}))}return l}function $(e){if(c.A.typeOf.object("options",e),c.A.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),(0,d.A)(e.perPositionHeight)&&e.perPositionHeight&&(0,d.A)(e.height))throw new h.A("Cannot use both options.perPositionHeight and options.height");if((0,d.A)(e.arcType)&&e.arcType!==i.A.GEODESIC&&e.arcType!==i.A.RHUMB)throw new h.A("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=e.vertexFormat??x.A.DEFAULT,o=e.ellipsoid??g.A.default,r=e.granularity??C.A.RADIANS_PER_DEGREE,A=e.stRotation??0,l=e.textureCoordinates,u=e.perPositionHeight??!1,f=u&&(0,d.A)(e.extrudedHeight);let p=e.height??0,m=e.extrudedHeight??p;if(!f){const e=Math.max(p,m);m=Math.min(p,m),p=e}this._vertexFormat=x.A.clone(n),this._ellipsoid=g.A.clone(o),this._granularity=r,this._stRotation=A,this._height=p,this._extrudedHeight=m,this._closeTop=e.closeTop??!0,this._closeBottom=e.closeBottom??!0,this._polygonHierarchy=t,this._perPositionHeight=u,this._perPositionHeightExtrude=f,this._shadowVolume=e.shadowVolume??!1,this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=e.arcType??i.A.GEODESIC,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=l,this.packedLength=B.A.computeHierarchyPackedLength(t,s.A)+g.A.packedLength+x.A.packedLength+(l?B.A.computeHierarchyPackedLength(l,a.A):1)+12}$.fromPositions=function(e){return e=e??u.A.EMPTY_OBJECT,c.A.defined("options.positions",e.positions),new $({polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates})},$.pack=function(e,t,n){return c.A.typeOf.object("value",e),c.A.defined("array",t),n=n??0,n=B.A.packPolygonHierarchy(e._polygonHierarchy,t,n,s.A),g.A.pack(e._ellipsoid,t,n),n+=g.A.packedLength,x.A.pack(e._vertexFormat,t,n),n+=x.A.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=e._offsetAttribute??-1,t[n++]=e._arcType,(0,d.A)(e._textureCoordinates)?n=B.A.packPolygonHierarchy(e._textureCoordinates,t,n,a.A):t[n++]=-1,t[n++]=e.packedLength,t};const ee=g.A.clone(g.A.UNIT_SPHERE),te=new x.A,ne={polygonHierarchy:{}};$.unpack=function(e,t,n){c.A.defined("array",e),t=t??0;const i=B.A.unpackPolygonHierarchy(e,t,s.A);t=i.startingIndex,delete i.startingIndex;const o=g.A.unpack(e,t,ee);t+=g.A.packedLength;const r=x.A.unpack(e,t,te);t+=x.A.packedLength;const A=e[t++],l=e[t++],u=e[t++],h=e[t++],f=1===e[t++],p=1===e[t++],m=1===e[t++],_=1===e[t++],I=1===e[t++],E=e[t++],y=e[t++],C=-1===e[t]?void 0:B.A.unpackPolygonHierarchy(e,t,a.A);(0,d.A)(C)?(t=C.startingIndex,delete C.startingIndex):t++;const b=e[t++];return(0,d.A)(n)||(n=new $(ne)),n._polygonHierarchy=i,n._ellipsoid=g.A.clone(o,n._ellipsoid),n._vertexFormat=x.A.clone(r,n._vertexFormat),n._height=A,n._extrudedHeight=l,n._granularity=u,n._stRotation=h,n._perPositionHeightExtrude=f,n._perPositionHeight=p,n._closeTop=m,n._closeBottom=_,n._shadowVolume=I,n._offsetAttribute=-1===E?void 0:E,n._arcType=y,n._textureCoordinates=C,n.packedLength=b,n};const ie=new a.A,oe=new a.A,re=new S.A;function ae(e,t,n,o,r,s){const A=e.longitude,c=A>=0?A:A+C.A.TWO_PI;r.westOverIdl=Math.min(r.westOverIdl,c),r.eastOverIdl=Math.max(r.eastOverIdl,c),s.west=Math.min(s.west,A),s.east=Math.max(s.east,A);const l=e.getLatitude(n);let u=l;if(s.south=Math.min(s.south,l),s.north=Math.max(s.north,l),o!==i.A.RHUMB){const i=a.A.subtract(t.position,e.position,ie),o=a.A.dot(t.position,i)/a.A.dot(i,i);if(o>0&&o<1){const e=a.A.add(t.position,a.A.multiplyByScalar(i,-o,i),oe),r=S.A.clone(t,re);r.position=e;const A=r.getLatitude(n);s.south=Math.min(s.south,A),s.north=Math.max(s.north,A),Math.abs(l)>Math.abs(A)&&(u=A)}}const d=t.x*e.y-e.x*t.y;let h=Math.sign(d);0!==h&&(h*=a.A.angleBetween(t.position,e.position)),u>=0&&(r.northAngle+=h),u<=0&&(r.southAngle+=h)}const se=new S.A,Ae=new S.A,ce={northAngle:0,southAngle:0,westOverIdl:0,eastOverIdl:0};$.computeRectangleFromPositions=function(e,t,n,i){if(c.A.defined("positions",e),(0,d.A)(i)||(i=new T.A),e.length<3)return i;i.west=Number.POSITIVE_INFINITY,i.east=Number.NEGATIVE_INFINITY,i.south=Number.POSITIVE_INFINITY,i.north=Number.NEGATIVE_INFINITY,ce.northAngle=0,ce.southAngle=0,ce.westOverIdl=Number.POSITIVE_INFINITY,ce.eastOverIdl=Number.NEGATIVE_INFINITY;const o=e.length;let r=S.A.fromCartesian(e[0],Ae);for(let a=1;a<o;a++){const o=S.A.fromCartesian(e[a],se);ae(o,r,t,n,ce,i),r=S.A.clone(o,r)}return ae(S.A.fromCartesian(e[0],se),r,t,n,ce,i),i.east-i.west>ce.eastOverIdl-ce.westOverIdl&&(i.west=ce.westOverIdl,i.east=ce.eastOverIdl,i.east>C.A.PI&&(i.east=i.east-C.A.TWO_PI),i.west>C.A.PI&&(i.west=i.west-C.A.TWO_PI)),C.A.equalsEpsilon(Math.abs(ce.northAngle),C.A.TWO_PI,C.A.EPSILON10)&&(i.north=C.A.PI_OVER_TWO,i.east=C.A.PI,i.west=-C.A.PI),C.A.equalsEpsilon(Math.abs(ce.southAngle),C.A.TWO_PI,C.A.EPSILON10)&&(i.south=-C.A.PI_OVER_TWO,i.east=C.A.PI,i.west=-C.A.PI),i};const le=new S.A;function ue(e,t,n){return e.height>=C.A.PI||e.width>=C.A.PI?S.A.fromCartesian(t[0],le).tangentPlane:f.A.fromPoints(t,n)}const de=new A.A;function he(e,t,n){if(e.height>=C.A.PI||e.width>=C.A.PI)return(t,i)=>{if(e.south<0&&e.north>0){const e=n.cartesianToCartographic(t,de);return(0,d.A)(i)||(i=new a.A),i.x=e.longitude/C.A.PI,i.y=e.latitude/C.A.PI_OVER_TWO,i}return S.A.fromCartesian(t,i)};const i=f.A.fromPoints(t,n);return(e,t)=>i.projectPointsOntoPlane(e,t)}$.createGeometry=function(e){const t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,s=e._stRotation,A=e._polygonHierarchy,c=e._perPositionHeight,u=e._closeTop,h=e._closeBottom,g=e._arcType,b=e._textureCoordinates,w=(0,d.A)(b),T=A.positions;if(T.length<3)return;const x=e.rectangle,D=B.A.polygonsFromHierarchy(A,w,function(e,t,n){return(i,o)=>{if(e.height>=C.A.PI||e.width>=C.A.PI){if(e.south<0&&e.north>0){(0,d.A)(o)||(o=[]);for(let e=0;e<i.length;++e){const t=n.cartesianToCartographic(i[e],de);o[e]=new a.A(t.longitude/C.A.PI,t.latitude/C.A.PI_OVER_TWO)}return o.length=i.length,o}return S.A.fromCartesianArray(i,o)}return f.A.fromPoints(t,n).projectPointsOntoPlane(i,o)}}(x,T,n),!c,n,function(e,t,n,i){return(o,r)=>!i&&(e.height>=C.A.PI_OVER_TWO||e.width>=2*C.A.PI_OVER_THREE)?B.A.splitPolygonsOnEquator(o,t,n,r):o}(x,n,g,c)),Q=D.hierarchy,N=D.polygons,R=w?B.A.polygonsFromHierarchy(b,!0,function(e){return e},!1,n).polygons:void 0;if(0===Q.length)return;const L=Q[0].outerRing,P=function(e,t,n,i){if(t.height>=C.A.PI||t.width>=C.A.PI)return o.A.fromRectangle(t,void 0,M);const r=e,a=f.A.fromPoints(r,n);return B.A.computeBoundingRectangle(a.plane.normal,a.projectPointOntoPlane.bind(a),r,i,M)}(L,x,n,s),O=[],F=e._height,U=e._extrudedHeight,k=e._perPositionHeightExtrude||!C.A.equalsEpsilon(F,U,0,C.A.EPSILON2),G={perPositionHeight:c,vertexFormat:t,geometry:void 0,rotationAxis:ue(x,L,n).plane.normal,projectTo2d:he(x,L,n),boundingRectangle:P,ellipsoid:n,stRotation:s,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:g};let H;if(k)for(G.extrude=!0,G.top=u,G.bottom=h,G.shadowVolume=e._shadowVolume,G.offsetAttribute=e._offsetAttribute,H=0;H<N.length;H++){const e=Z(n,N[H],w?R[H]:void 0,i,Q[H],c,u,h,t,g);let o;u&&h?(o=e.topAndBottom,G.geometry=B.A.scaleToGeodeticHeightExtruded(o.geometry,F,U,n,c)):u?(o=e.topAndBottom,o.geometry.attributes.position.values=v.A.scaleToGeodeticHeight(o.geometry.attributes.position.values,F,n,!c),G.geometry=o.geometry):h&&(o=e.topAndBottom,o.geometry.attributes.position.values=v.A.scaleToGeodeticHeight(o.geometry.attributes.position.values,U,n,!0),G.geometry=o.geometry),(u||h)&&(G.wall=!1,o.geometry=K(G),O.push(o));const r=e.walls;G.wall=!0;for(let e=0;e<r.length;e++){const t=r[e];G.geometry=B.A.scaleToGeodeticHeightExtruded(t.geometry,F,U,n,c),t.geometry=K(G),O.push(t)}}else for(H=0;H<N.length;H++){const o=new _.A({geometry:B.A.createGeometryFromPositions(n,N[H],w?R[H]:void 0,i,c,t,g)});if(o.geometry.attributes.position.values=v.A.scaleToGeodeticHeight(o.geometry.attributes.position.values,F,n,!c),G.geometry=o.geometry,o.geometry=K(G),(0,d.A)(e._offsetAttribute)){const t=o.geometry.attributes.position.values.length,n=e._offsetAttribute===I.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);o.geometry.attributes.applyOffset=new m.A({componentDatatype:l.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}O.push(o)}const V=E.A.combineInstances(O)[0];V.attributes.position.values=new Float64Array(V.attributes.position.values),V.indices=y.A.createTypedArray(V.attributes.position.values.length/3,V.indices);const z=V.attributes,j=r.A.fromVertices(z.position.values);return t.position||delete z.position,new p.A({attributes:z,indices:V.indices,primitiveType:V.primitiveType,boundingSphere:j,offsetAttribute:e._offsetAttribute})},$.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new $({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:a,vertexFormat:x.A.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})},Object.defineProperties($.prototype,{rectangle:{get:function(){if(!(0,d.A)(this._rectangle)){const e=this._polygonHierarchy.positions;this._rectangle=$.computeRectangleFromPositions(e,this._ellipsoid,this._arcType)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return(0,d.A)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return p.A._textureCoordinateRotationPoints(i,t,n,o)}(this)),this._textureCoordinateRotationPoints}}});const ge=$},71694:(e,t,n)=>{"use strict";n.d(t,{A:()=>ee});var i=n(215327),o=n(263604),r=n(434067),a=n(267980),s=n(336946),A=n(571804),c=n(491446),l=n(610750),u=n(551824),d=n(944479),h=n(305439),g=n(46362),f=n(34233),p=n(874915),m=n(150429),_=n(367817),I=n(331185),E=n(257941),y=n(105330),C=n(576770),b=n(402330),B=n(99479),v=n(67988),w=n(666765);const T={computeHierarchyPackedLength:function(e,t){let n=0;const i=[e];for(;i.length>0;){const e=i.pop();if(!(0,c.A)(e))continue;n+=2;const o=e.positions,r=e.holes;if((0,c.A)(o)&&o.length>0&&(n+=o.length*t.packedLength),(0,c.A)(r)){const e=r.length;for(let t=0;t<e;++t)i.push(r[t])}}return n},packPolygonHierarchy:function(e,t,n,i){const o=[e];for(;o.length>0;){const e=o.pop();if(!(0,c.A)(e))continue;const r=e.positions,a=e.holes;if(t[n++]=(0,c.A)(r)?r.length:0,t[n++]=(0,c.A)(a)?a.length:0,(0,c.A)(r)){const e=r.length;for(let o=0;o<e;++o,n+=i.packedLength)i.pack(r[o],t,n)}if((0,c.A)(a)){const e=a.length;for(let t=0;t<e;++t)o.push(a[t])}}return n},unpackPolygonHierarchy:function(e,t,n){const i=e[t++],o=e[t++],r=new Array(i),a=o>0?new Array(o):void 0;for(let o=0;o<i;++o,t+=n.packedLength)r[o]=n.unpack(e,t);for(let i=0;i<o;++i)a[i]=T.unpackPolygonHierarchy(e,t,n),t=a[i].startingIndex,delete a[i].startingIndex;return{positions:r,holes:a,startingIndex:t}}},S=new r.A;function x(e,t,n,i){return r.A.subtract(t,e,S),r.A.multiplyByScalar(S,n/i,S),r.A.add(e,S,S),[S.x,S.y]}const D=new a.A;function Q(e,t,n,i){return a.A.subtract(t,e,D),a.A.multiplyByScalar(D,n/i,D),a.A.add(e,D,D),[D.x,D.y,D.z]}T.subdivideLineCount=function(e,t,n){const i=a.A.distance(e,t)/n,o=Math.max(0,Math.ceil(_.A.log2(i)));return Math.pow(2,o)};const N=new s.A,R=new s.A,M=new s.A,L=new a.A,P=new u.A;T.subdivideRhumbLineCount=function(e,t,n,i){const o=e.cartesianToCartographic(t,N),r=e.cartesianToCartographic(n,R),a=new u.A(o,r,e).surfaceDistance/i,s=Math.max(0,Math.ceil(_.A.log2(a)));return Math.pow(2,s)},T.subdivideTexcoordLine=function(e,t,n,i,o,a){const s=T.subdivideLineCount(n,i,o),A=r.A.distance(e,t),c=A/s,l=a;l.length=2*s;let u=0;for(let n=0;n<s;n++){const i=x(e,t,n*c,A);l[u++]=i[0],l[u++]=i[1]}return l},T.subdivideLine=function(e,t,n,i){const o=T.subdivideLineCount(e,t,n),r=a.A.distance(e,t),s=r/o;(0,c.A)(i)||(i=[]);const A=i;A.length=3*o;let l=0;for(let n=0;n<o;n++){const i=Q(e,t,n*s,r);A[l++]=i[0],A[l++]=i[1],A[l++]=i[2]}return A},T.subdivideTexcoordRhumbLine=function(e,t,n,i,o,a,s){const A=n.cartesianToCartographic(i,N),c=n.cartesianToCartographic(o,R);P.setEndPoints(A,c);const l=P.surfaceDistance/a,u=Math.max(0,Math.ceil(_.A.log2(l))),d=Math.pow(2,u),h=r.A.distance(e,t),g=h/d,f=s;f.length=2*d;let p=0;for(let n=0;n<d;n++){const i=x(e,t,n*g,h);f[p++]=i[0],f[p++]=i[1]}return f},T.subdivideRhumbLine=function(e,t,n,i,o){const r=e.cartesianToCartographic(t,N),a=e.cartesianToCartographic(n,R),s=new u.A(r,a,e);if((0,c.A)(o)||(o=[]),s.surfaceDistance<=i)return o.length=3,o[0]=t.x,o[1]=t.y,o[2]=t.z,o;const A=s.surfaceDistance/i,l=Math.max(0,Math.ceil(_.A.log2(A))),d=Math.pow(2,l),h=s.surfaceDistance/d,g=o;g.length=3*d;let f=0;for(let t=0;t<d;t++){const n=s.interpolateUsingSurfaceDistance(t*h,M),i=e.cartographicToCartesian(n,L);g[f++]=i.x,g[f++]=i.y,g[f++]=i.z}return g};const O=new a.A,F=new a.A,U=new a.A,k=new a.A;T.scaleToGeodeticHeightExtruded=function(e,t,n,i,o){i=i??l.A.default;const r=O;let s=F;const A=U;let u=k;if((0,c.A)(e)&&(0,c.A)(e.attributes)&&(0,c.A)(e.attributes.position)){const c=e.attributes.position.values,l=c.length/2;for(let e=0;e<l;e+=3)a.A.fromArray(c,e,A),i.geodeticSurfaceNormal(A,r),u=i.scaleToGeodeticSurface(A,u),s=a.A.multiplyByScalar(r,n,s),s=a.A.add(u,s,s),c[e+l]=s.x,c[e+1+l]=s.y,c[e+2+l]=s.z,o&&(u=a.A.clone(A,u)),s=a.A.multiplyByScalar(r,t,s),s=a.A.add(u,s,s),c[e]=s.x,c[e+1]=s.y,c[e+2]=s.z}return e},T.polygonOutlinesFromHierarchy=function(e,t,n){const i=[],r=new v.A;let s,A,l;for(r.enqueue(e);0!==r.length;){const e=r.dequeue();let u=e.positions;if(t)for(l=u.length,s=0;s<l;s++)n.scaleToGeodeticSurface(u[s],u[s]);if(u=(0,o.A)(u,a.A.equalsEpsilon,!0),u.length<3)continue;const d=e.holes?e.holes.length:0;for(s=0;s<d;s++){const u=e.holes[s];let d=u.positions;if(t)for(l=d.length,A=0;A<l;++A)n.scaleToGeodeticSurface(d[A],d[A]);if(d=(0,o.A)(d,a.A.equalsEpsilon,!0),d.length<3)continue;i.push(d);let h=0;for((0,c.A)(u.holes)&&(h=u.holes.length),A=0;A<h;A++)r.enqueue(u.holes[A])}i.push(u)}return i};const G=new s.A;function H(e,t,n,o){if(o===i.A.RHUMB)return function(e,t,n){const i=n.cartesianToCartographic(e,N),o=n.cartesianToCartographic(t,R);if(Math.sign(i.latitude)===Math.sign(o.latitude))return;P.setEndPoints(i,o);const r=P.findIntersectionWithLatitude(0,G);if(!(0,c.A)(r))return;let a=Math.min(i.longitude,o.longitude),s=Math.max(i.longitude,o.longitude);if(Math.abs(s-a)>_.A.PI){const e=a;a=s,s=e}return r.longitude<a||r.longitude>s?void 0:n.cartographicToCartesian(r)}(e,t,n);const r=m.A.lineSegmentPlane(e,t,E.A.ORIGIN_XY_PLANE);return(0,c.A)(r)?n.scaleToGeodeticSurface(r,r):void 0}const V=new s.A;function z(e,t,n){const i=[];let o,r,a,s,A,l=0;for(;l<e.length;){o=e[l],r=e[(l+1)%e.length],a=_.A.sign(o.z),s=_.A.sign(r.z);const u=e=>t.cartesianToCartographic(e,V).longitude;if(0===a)i.push({position:l,type:a,visited:!1,next:s,theta:u(o)});else if(0!==s){if(A=H(o,r,t,n),++l,!(0,c.A)(A))continue;e.splice(l,0,A),i.push({position:l,type:a,visited:!1,next:s,theta:u(A)})}++l}return i}function j(e,t,n,i,o,r,a){const s=[];let A=r;const l=e=>t=>t.position===e,u=[];do{const e=n[A];s.push(e);const t=i.findIndex(l(A)),o=i[t];if(!(0,c.A)(o)){++A;continue}const{visited:d,type:h,next:g}=o;if(o.visited=!0,0===h){if(0===g){const e=i[t-(a?1:-1)];if(e?.position!==A+1){++A;continue}e.visited=!0}if(!d&&a&&g>0||r===A&&!a&&g<0){++A;continue}}if(!(a?h>=0:h<=0)){++A;continue}d||u.push(A);const f=i[t+(a?1:-1)];(0,c.A)(f)?A=f.position:++A}while(A<n.length&&A>=0&&A!==r&&s.length<n.length);e.splice(t,o,s);for(const o of u)t=j(e,++t,n,i,0,o,!a);return t}T.splitPolygonsOnEquator=function(e,t,n,i){(0,c.A)(i)||(i=[]),i.splice(0,0,...e),i.length=e.length;let o=0;for(;o<i.length;){const e=i[o],r=e.slice();if(e.length<3){i[o]=r,++o;continue}const a=z(r,t,n);r.length===e.length||a.length<=1?(i[o]=r,++o):(a.sort((e,t)=>e.theta-t.theta),o=j(i,o,r,a,1,0,r[0].z>=0))}return i},T.polygonsFromHierarchy=function(e,t,n,i,r,s){const A=[],l=[],u=new v.A;u.enqueue(e);let d=(0,c.A)(s);for(;0!==u.length;){const e=u.dequeue();let h=e.positions;const g=e.holes;let f,p;if(i)for(p=h.length,f=0;f<p;f++)r.scaleToGeodeticSurface(h[f],h[f]);if(t||(h=(0,o.A)(h,a.A.equalsEpsilon,!0)),h.length<3)continue;let m=n(h);if(!(0,c.A)(m))continue;const _=[];let I=C.A.computeWindingOrder2D(m);if(I===w.A.CLOCKWISE&&(m.reverse(),h=h.slice().reverse()),d){d=!1;let e=[h];if(e=s(e,e),e.length>1){for(const t of e)u.enqueue(new y.A(t,g));continue}}let E=h.slice();const b=(0,c.A)(g)?g.length:0,B=[];let v;for(f=0;f<b;f++){const e=g[f];let s=e.positions;if(i)for(p=s.length,v=0;v<p;++v)r.scaleToGeodeticSurface(s[v],s[v]);if(t||(s=(0,o.A)(s,a.A.equalsEpsilon,!0)),s.length<3)continue;const A=n(s);if(!(0,c.A)(A))continue;I=C.A.computeWindingOrder2D(A),I===w.A.CLOCKWISE&&(A.reverse(),s=s.slice().reverse()),B.push(s),_.push(E.length),E=E.concat(s),m=m.concat(A);let l=0;for((0,c.A)(e.holes)&&(l=e.holes.length),v=0;v<l;v++)u.enqueue(e.holes[v])}A.push({outerRing:h,holes:B}),l.push({positions:E,positions2D:m,holes:_})}return{hierarchy:A,polygons:l}};const Y=new r.A,q=new a.A,W=new B.A,J=new I.A;T.computeBoundingRectangle=function(e,t,n,i,o){const r=B.A.fromAxisAngle(e,i,W),s=I.A.fromQuaternion(r,J);let A=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;const h=n.length;for(let e=0;e<h;++e){const i=a.A.clone(n[e],q);I.A.multiplyByVector(s,i,i);const o=t(i,Y);(0,c.A)(o)&&(A=Math.min(A,o.x),l=Math.max(l,o.x),u=Math.min(u,o.y),d=Math.max(d,o.y))}return o.x=A,o.y=u,o.width=l-A,o.height=d-u,o},T.createGeometryFromPositions=function(e,t,n,o,a,s,l){let u=C.A.triangulate(t.positions2D,t.holes);u.length<3&&(u=[0,1,2]);const g=t.positions,p=(0,c.A)(n),m=p?n.positions:void 0;if(a){const e=g.length,t=new Array(3*e);let n=0;for(let i=0;i<e;i++){const e=g[i];t[n++]=e.x,t[n++]=e.y,t[n++]=e.z}const i={attributes:{position:new h.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:t})},indices:u,primitiveType:b.A.TRIANGLES};p&&(i.attributes.st=new h.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:r.A.packArray(m)}));const o=new d.A(i);return s.normal?f.A.computeNormal(o):o}return l===i.A.GEODESIC?C.A.computeSubdivision(e,g,u,m,o):l===i.A.RHUMB?C.A.computeRhumbLineSubdivision(e,g,u,m,o):void 0};const K=[],X=[],Z=new a.A,$=new a.A;T.computeWallGeometry=function(e,t,n,o,r,s){let l,u,f,m,I,E,y,C,B,v=e.length,w=0,S=0;const x=(0,c.A)(t),D=x?t.positions:void 0;if(r)for(u=3*v*2,l=new Array(2*u),x&&(B=2*v*2,C=new Array(2*B)),f=0;f<v;f++)m=e[f],I=e[(f+1)%v],l[w]=l[w+u]=m.x,++w,l[w]=l[w+u]=m.y,++w,l[w]=l[w+u]=m.z,++w,l[w]=l[w+u]=I.x,++w,l[w]=l[w+u]=I.y,++w,l[w]=l[w+u]=I.z,++w,x&&(E=D[f],y=D[(f+1)%v],C[S]=C[S+B]=E.x,++S,C[S]=C[S+B]=E.y,++S,C[S]=C[S+B]=y.x,++S,C[S]=C[S+B]=y.y,++S);else{const t=_.A.chordLength(o,n.maximumRadius);let r=0;if(s===i.A.GEODESIC)for(f=0;f<v;f++)r+=T.subdivideLineCount(e[f],e[(f+1)%v],t);else if(s===i.A.RHUMB)for(f=0;f<v;f++)r+=T.subdivideRhumbLineCount(n,e[f],e[(f+1)%v],t);for(u=3*(r+v),l=new Array(2*u),x&&(B=2*(r+v),C=new Array(2*B)),f=0;f<v;f++){let o,r;m=e[f],I=e[(f+1)%v],x&&(E=D[f],y=D[(f+1)%v]),s===i.A.GEODESIC?(o=T.subdivideLine(m,I,t,X),x&&(r=T.subdivideTexcoordLine(E,y,m,I,t,K))):s===i.A.RHUMB&&(o=T.subdivideRhumbLine(n,m,I,t,X),x&&(r=T.subdivideTexcoordRhumbLine(E,y,n,m,I,t,K)));const a=o.length;for(let e=0;e<a;++e,++w)l[w]=o[e],l[w+u]=o[e];if(l[w]=I.x,l[w+u]=I.x,++w,l[w]=I.y,l[w+u]=I.y,++w,l[w]=I.z,l[w+u]=I.z,++w,x){const e=r.length;for(let t=0;t<e;++t,++S)C[S]=r[t],C[S+B]=r[t];C[S]=y.x,C[S+B]=y.x,++S,C[S]=y.y,C[S+B]=y.y,++S}}}v=l.length;const Q=p.A.createTypedArray(v/3,v-6*e.length);let N=0;for(v/=6,f=0;f<v;f++){const e=f,t=e+1,n=e+v,i=n+1;m=a.A.fromArray(l,3*e,Z),I=a.A.fromArray(l,3*t,$),a.A.equalsEpsilon(m,I,_.A.EPSILON10,_.A.EPSILON10)||(Q[N++]=e,Q[N++]=n,Q[N++]=t,Q[N++]=t,Q[N++]=n,Q[N++]=i)}const R={attributes:new g.A({position:new h.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:l})}),indices:Q,primitiveType:b.A.TRIANGLES};return x&&(R.attributes.st=new h.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:C})),new d.A(R)};const ee=T},87551:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(215327),o=n(660662),r=n(267980),a=n(369031),s=n(571804),A=n(915325),c=n(491446),l=n(605971),u=n(610750),d=n(658091),h=n(944479),g=n(305439),f=n(46362),p=n(75200),m=n(794554),_=n(34233),I=n(874915),E=n(367817),y=n(71694),C=n(576770),b=n(402330),B=n(666765);const v=[],w=[];function T(e,t,n,o,r){const a=d.A.fromPoints(t,e).projectPointsOntoPlane(t,v);let A,c;C.A.computeWindingOrder2D(a)===B.A.CLOCKWISE&&(a.reverse(),t=t.slice().reverse());let l=t.length,u=0;if(o)for(A=new Float64Array(2*l*3),c=0;c<l;c++){const e=t[c],n=t[(c+1)%l];A[u++]=e.x,A[u++]=e.y,A[u++]=e.z,A[u++]=n.x,A[u++]=n.y,A[u++]=n.z}else{let o=0;if(r===i.A.GEODESIC)for(c=0;c<l;c++)o+=y.A.subdivideLineCount(t[c],t[(c+1)%l],n);else if(r===i.A.RHUMB)for(c=0;c<l;c++)o+=y.A.subdivideRhumbLineCount(e,t[c],t[(c+1)%l],n);for(A=new Float64Array(3*o),c=0;c<l;c++){let o;r===i.A.GEODESIC?o=y.A.subdivideLine(t[c],t[(c+1)%l],n,w):r===i.A.RHUMB&&(o=y.A.subdivideRhumbLine(e,t[c],t[(c+1)%l],n,w));const a=o.length;for(let e=0;e<a;++e)A[u++]=o[e]}}l=A.length/3;const m=2*l,_=I.A.createTypedArray(l,m);for(u=0,c=0;c<l-1;c++)_[u++]=c,_[u++]=c+1;return _[u++]=l-1,_[u++]=0,new p.A({geometry:new h.A({attributes:new f.A({position:new g.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:A})}),indices:_,primitiveType:b.A.LINES})})}function S(e,t,n,o,r){const a=d.A.fromPoints(t,e).projectPointsOntoPlane(t,v);let A,c;C.A.computeWindingOrder2D(a)===B.A.CLOCKWISE&&(a.reverse(),t=t.slice().reverse());let l=t.length;const u=new Array(l);let m=0;if(o)for(A=new Float64Array(2*l*3*2),c=0;c<l;++c){u[c]=m/3;const e=t[c],n=t[(c+1)%l];A[m++]=e.x,A[m++]=e.y,A[m++]=e.z,A[m++]=n.x,A[m++]=n.y,A[m++]=n.z}else{let o=0;if(r===i.A.GEODESIC)for(c=0;c<l;c++)o+=y.A.subdivideLineCount(t[c],t[(c+1)%l],n);else if(r===i.A.RHUMB)for(c=0;c<l;c++)o+=y.A.subdivideRhumbLineCount(e,t[c],t[(c+1)%l],n);for(A=new Float64Array(3*o*2),c=0;c<l;++c){let o;u[c]=m/3,r===i.A.GEODESIC?o=y.A.subdivideLine(t[c],t[(c+1)%l],n,w):r===i.A.RHUMB&&(o=y.A.subdivideRhumbLine(e,t[c],t[(c+1)%l],n,w));const a=o.length;for(let e=0;e<a;++e)A[m++]=o[e]}}l=A.length/6;const _=u.length,E=2*(2*l+_),T=I.A.createTypedArray(l+_,E);for(m=0,c=0;c<l;++c)T[m++]=c,T[m++]=(c+1)%l,T[m++]=c+l,T[m++]=(c+1)%l+l;for(c=0;c<_;c++){const e=u[c];T[m++]=e,T[m++]=e+l}return new p.A({geometry:new h.A({attributes:new f.A({position:new g.A({componentDatatype:s.A.DOUBLE,componentsPerAttribute:3,values:A})}),indices:T,primitiveType:b.A.LINES})})}function x(e){if(a.A.typeOf.object("options",e),a.A.typeOf.object("options.polygonHierarchy",e.polygonHierarchy),e.perPositionHeight&&(0,c.A)(e.height))throw new l.A("Cannot use both options.perPositionHeight and options.height");if((0,c.A)(e.arcType)&&e.arcType!==i.A.GEODESIC&&e.arcType!==i.A.RHUMB)throw new l.A("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=e.ellipsoid??u.A.default,o=e.granularity??E.A.RADIANS_PER_DEGREE,s=e.perPositionHeight??!1,A=s&&(0,c.A)(e.extrudedHeight),d=e.arcType??i.A.GEODESIC;let h=e.height??0,g=e.extrudedHeight??h;if(!A){const e=Math.max(h,g);g=Math.min(h,g),h=e}this._ellipsoid=u.A.clone(n),this._granularity=o,this._height=h,this._extrudedHeight=g,this._arcType=d,this._polygonHierarchy=t,this._perPositionHeight=s,this._perPositionHeightExtrude=A,this._offsetAttribute=e.offsetAttribute,this._workerName="createPolygonOutlineGeometry",this.packedLength=y.A.computeHierarchyPackedLength(t,r.A)+u.A.packedLength+8}x.pack=function(e,t,n){return a.A.typeOf.object("value",e),a.A.defined("array",t),n=n??0,n=y.A.packPolygonHierarchy(e._polygonHierarchy,t,n,r.A),u.A.pack(e._ellipsoid,t,n),n+=u.A.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._arcType,t[n++]=e._offsetAttribute??-1,t[n]=e.packedLength,t};const D=u.A.clone(u.A.UNIT_SPHERE),Q={polygonHierarchy:{}};x.unpack=function(e,t,n){a.A.defined("array",e),t=t??0;const i=y.A.unpackPolygonHierarchy(e,t,r.A);t=i.startingIndex,delete i.startingIndex;const o=u.A.unpack(e,t,D);t+=u.A.packedLength;const s=e[t++],A=e[t++],l=e[t++],d=1===e[t++],h=1===e[t++],g=e[t++],f=e[t++],p=e[t];return(0,c.A)(n)||(n=new x(Q)),n._polygonHierarchy=i,n._ellipsoid=u.A.clone(o,n._ellipsoid),n._height=s,n._extrudedHeight=A,n._granularity=l,n._perPositionHeight=h,n._perPositionHeightExtrude=d,n._arcType=g,n._offsetAttribute=-1===f?void 0:f,n.packedLength=p,n},x.fromPositions=function(e){return e=e??A.A.EMPTY_OBJECT,a.A.defined("options.positions",e.positions),new x({polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,arcType:e.arcType,offsetAttribute:e.offsetAttribute})},x.createGeometry=function(e){const t=e._ellipsoid,n=e._granularity,i=e._polygonHierarchy,r=e._perPositionHeight,a=e._arcType,A=y.A.polygonOutlinesFromHierarchy(i,!r,t);if(0===A.length)return;let l;const u=[],d=E.A.chordLength(n,t.maximumRadius),f=e._height,p=e._extrudedHeight;let I,b;if(e._perPositionHeightExtrude||!E.A.equalsEpsilon(f,p,0,E.A.EPSILON2))for(b=0;b<A.length;b++){if(l=S(t,A[b],d,r,a),l.geometry=y.A.scaleToGeodeticHeightExtruded(l.geometry,f,p,t,r),(0,c.A)(e._offsetAttribute)){const t=l.geometry.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===m.A.TOP?n=n.fill(1,0,t/2):(I=e._offsetAttribute===m.A.NONE?0:1,n=n.fill(I)),l.geometry.attributes.applyOffset=new g.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}u.push(l)}else for(b=0;b<A.length;b++){if(l=T(t,A[b],d,r,a),l.geometry.attributes.position.values=C.A.scaleToGeodeticHeight(l.geometry.attributes.position.values,f,t,!r),(0,c.A)(e._offsetAttribute)){const t=l.geometry.attributes.position.values.length;I=e._offsetAttribute===m.A.NONE?0:1;const n=new Uint8Array(t/3).fill(I);l.geometry.attributes.applyOffset=new g.A({componentDatatype:s.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}u.push(l)}const B=_.A.combineInstances(u)[0],v=o.A.fromVertices(B.attributes.position.values);return new h.A({attributes:B.attributes,indices:B.indices,primitiveType:B.primitiveType,boundingSphere:v,offsetAttribute:e._offsetAttribute})};const N=x},576770:(e,t,n)=>{"use strict";function i(e,t,n,i,o){let r;if(o===function(e,t,n,i){let o=0;for(let r=t,a=n-i;r<n;r+=i)o+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return o}(e,t,n,i)>0)for(let o=t;o<n;o+=i)r=v(o/i|0,e[o],e[o+1],r);else for(let o=n-i;o>=t;o-=i)r=v(o/i|0,e[o],e[o+1],r);return r&&I(r,r.next)&&(w(r),r=r.next),r}function o(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!I(i,i.next)&&0!==_(i.prev,i,i.next))i=i.next;else{if(w(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function r(e,t,n,i,l,u,d){if(!e)return;!d&&u&&function(e,t,n,i){let o=e;do{0===o.z&&(o.z=h(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){let t,n=1;do{let i,o=e;e=null;let r=null;for(t=0;o;){t++;let a=o,s=0;for(let e=0;e<n&&(s++,a=a.nextZ,a);e++);let A=n;for(;s>0||A>0&&a;)0!==s&&(0===A||!a||o.z<=a.z)?(i=o,o=o.nextZ,s--):(i=a,a=a.nextZ,A--),r?r.nextZ=i:e=i,i.prevZ=r,r=i;o=a}r.nextZ=null,n*=2}while(t>1)}(o)}(e,i,l,u);let g=e;for(;e.prev!==e.next;){const h=e.prev,f=e.next;if(u?s(e,i,l,u):a(e))t.push(h.i,e.i,f.i),w(e),e=f.next,g=f.next;else if((e=f)===g){d?1===d?r(e=A(o(e),t),t,n,i,l,u,2):2===d&&c(e,t,n,i,l,u):r(o(e),t,n,i,l,u,1);break}}}function a(e){const t=e.prev,n=e,i=e.next;if(_(t,n,i)>=0)return!1;const o=t.x,r=n.x,a=i.x,s=t.y,A=n.y,c=i.y,l=Math.min(o,r,a),u=Math.min(s,A,c),d=Math.max(o,r,a),h=Math.max(s,A,c);let g=i.next;for(;g!==t;){if(g.x>=l&&g.x<=d&&g.y>=u&&g.y<=h&&p(o,s,r,A,a,c,g.x,g.y)&&_(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(e,t,n,i){const o=e.prev,r=e,a=e.next;if(_(o,r,a)>=0)return!1;const s=o.x,A=r.x,c=a.x,l=o.y,u=r.y,d=a.y,g=Math.min(s,A,c),f=Math.min(l,u,d),m=Math.max(s,A,c),I=Math.max(l,u,d),E=h(g,f,t,n,i),y=h(m,I,t,n,i);let C=e.prevZ,b=e.nextZ;for(;C&&C.z>=E&&b&&b.z<=y;){if(C.x>=g&&C.x<=m&&C.y>=f&&C.y<=I&&C!==o&&C!==a&&p(s,l,A,u,c,d,C.x,C.y)&&_(C.prev,C,C.next)>=0)return!1;if(C=C.prevZ,b.x>=g&&b.x<=m&&b.y>=f&&b.y<=I&&b!==o&&b!==a&&p(s,l,A,u,c,d,b.x,b.y)&&_(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;C&&C.z>=E;){if(C.x>=g&&C.x<=m&&C.y>=f&&C.y<=I&&C!==o&&C!==a&&p(s,l,A,u,c,d,C.x,C.y)&&_(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;b&&b.z<=y;){if(b.x>=g&&b.x<=m&&b.y>=f&&b.y<=I&&b!==o&&b!==a&&p(s,l,A,u,c,d,b.x,b.y)&&_(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function A(e,t){let n=e;do{const i=n.prev,o=n.next.next;!I(i,o)&&E(i,n,n.next,o)&&b(i,o)&&b(o,i)&&(t.push(i.i,n.i,o.i),w(n),w(n.next),n=e=o),n=n.next}while(n!==e);return o(n)}function c(e,t,n,i,a,s){let A=e;do{let e=A.next.next;for(;e!==A.prev;){if(A.i!==e.i&&m(A,e)){let c=B(A,e);return A=o(A,A.next),c=o(c,c.next),r(A,t,n,i,a,s,0),void r(c,t,n,i,a,s,0)}e=e.next}A=A.next}while(A!==e)}function l(e,t){let n=e.x-t.x;return 0===n&&(n=e.y-t.y,0===n)&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function u(e,t){const n=function(e,t){let n=t;const i=e.x,o=e.y;let r,a=-1/0;if(I(e,n))return n;do{if(I(e,n.next))return n.next;if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>a&&(a=e,r=n.x<n.next.x?n:n.next,e===i))return r}n=n.next}while(n!==t);if(!r)return null;const s=r,A=r.x,c=r.y;let l=1/0;n=r;do{if(i>=n.x&&n.x>=A&&i!==n.x&&f(o<c?i:a,o,A,c,o<c?a:i,o,n.x,n.y)){const t=Math.abs(o-n.y)/(i-n.x);b(n,e)&&(t<l||t===l&&(n.x>r.x||n.x===r.x&&d(r,n)))&&(r=n,l=t)}n=n.next}while(n!==s);return r}(e,t);if(!n)return t;const i=B(n,e);return o(i,i.next),o(n,n.next)}function d(e,t){return _(e.prev,e,t.prev)<0&&_(t.next,e,e.next)<0}function h(e,t,n,i,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function g(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function f(e,t,n,i,o,r,a,s){return(o-a)*(t-s)>=(e-a)*(r-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(r-s)>=(o-a)*(i-s)}function p(e,t,n,i,o,r,a,s){return!(e===a&&t===s)&&f(e,t,n,i,o,r,a,s)}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){let n=e,i=!1;const o=(e.x+t.x)/2,r=(e.y+t.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(_(e.prev,e,t.prev)||_(e,t.prev,t))||I(e,t)&&_(e.prev,e,e.next)>0&&_(t.prev,t,t.next)>0)}function _(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function I(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,i){const o=C(_(e,t,n)),r=C(_(e,t,i)),a=C(_(n,i,e)),s=C(_(n,i,t));return o!==r&&a!==s||!(0!==o||!y(e,n,t))||!(0!==r||!y(e,i,t))||!(0!==a||!y(n,e,i))||!(0!==s||!y(n,t,i))}function y(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function C(e){return e>0?1:e<0?-1:0}function b(e,t){return _(e.prev,e,e.next)<0?_(e,t,e.next)>=0&&_(e,e.prev,t)>=0:_(e,t,e.prev)<0||_(e,e.next,t)<0}function B(e,t){const n=T(e.i,e.x,e.y),i=T(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function v(e,t,n,i){const o=T(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function T(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}n.d(t,{A:()=>re});var S=n(434067),x=n(267980),D=n(336946),Q=n(369031),N=n(571804),R=n(491446),M=n(610750),L=n(551824),P=n(944479),O=n(305439),F=n(367817),U=n(402330),k=n(666765);const G=new x.A,H=new x.A,V={computeArea2D:function(e){Q.A.defined("positions",e),Q.A.typeOf.number.greaterThanOrEquals("positions.length",e.length,3);const t=e.length;let n=0;for(let i=t-1,o=0;o<t;i=o++){const t=e[i],r=e[o];n+=t.x*r.y-r.x*t.y}return.5*n},computeWindingOrder2D:function(e){return V.computeArea2D(e)>0?k.A.COUNTER_CLOCKWISE:k.A.CLOCKWISE},triangulate:function(e,t){return Q.A.defined("positions",e),function(e,t,n=2){const o=t&&t.length,a=o?t[0]*n:e.length;let s=i(e,0,a,n,!0);const A=[];if(!s||s.next===s.prev)return A;let c,d,h;if(o&&(s=function(e,t,n,o){const r=[];for(let n=0,a=t.length;n<a;n++){const s=i(e,t[n]*o,n<a-1?t[n+1]*o:e.length,o,!1);s===s.next&&(s.steiner=!0),r.push(g(s))}r.sort(l);for(let e=0;e<r.length;e++)n=u(r[e],n);return n}(e,t,s,n)),e.length>80*n){c=e[0],d=e[1];let t=c,i=d;for(let o=n;o<a;o+=n){const n=e[o],r=e[o+1];n<c&&(c=n),r<d&&(d=r),n>t&&(t=n),r>i&&(i=r)}h=Math.max(t-c,i-d),h=0!==h?32767/h:0}return r(s,A,n,c,d,h,0),A}(S.A.packArray(e),t,2)}},z=new x.A,j=new x.A,Y=new x.A,q=new x.A,W=new x.A,J=new x.A,K=new x.A,X=new S.A,Z=new S.A,$=new S.A,ee=new S.A;V.computeSubdivision=function(e,t,n,i,o){o=o??F.A.RADIANS_PER_DEGREE;const r=(0,R.A)(i);Q.A.typeOf.object("ellipsoid",e),Q.A.defined("positions",t),Q.A.defined("indices",n),Q.A.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),Q.A.typeOf.number.equals("indices.length % 3","0",n.length%3,0),Q.A.typeOf.number.greaterThan("granularity",o,0);const a=n.slice(0);let s;const A=t.length,c=new Array(3*A),l=new Array(2*A);let u=0,d=0;for(s=0;s<A;s++){const e=t[s];if(c[u++]=e.x,c[u++]=e.y,c[u++]=e.z,r){const e=i[s];l[d++]=e.x,l[d++]=e.y}}const h=[],g={},f=e.maximumRadius,p=F.A.chordLength(o,f),m=p*p;for(;a.length>0;){const e=a.pop(),t=a.pop(),n=a.pop(),i=x.A.fromArray(c,3*n,z),o=x.A.fromArray(c,3*t,j),A=x.A.fromArray(c,3*e,Y);let u,d,p;r&&(u=S.A.fromArray(l,2*n,X),d=S.A.fromArray(l,2*t,Z),p=S.A.fromArray(l,2*e,$));const _=x.A.multiplyByScalar(x.A.normalize(i,q),f,q),I=x.A.multiplyByScalar(x.A.normalize(o,W),f,W),E=x.A.multiplyByScalar(x.A.normalize(A,J),f,J),y=x.A.magnitudeSquared(x.A.subtract(_,I,K)),C=x.A.magnitudeSquared(x.A.subtract(I,E,K)),b=x.A.magnitudeSquared(x.A.subtract(E,_,K)),B=Math.max(y,C,b);let v,w,T;B>m?y===B?(v=`${Math.min(n,t)} ${Math.max(n,t)}`,s=g[v],(0,R.A)(s)||(w=x.A.add(i,o,K),x.A.multiplyByScalar(w,.5,w),c.push(w.x,w.y,w.z),s=c.length/3-1,g[v]=s,r&&(T=S.A.add(u,d,ee),S.A.multiplyByScalar(T,.5,T),l.push(T.x,T.y))),a.push(n,s,e),a.push(s,t,e)):C===B?(v=`${Math.min(t,e)} ${Math.max(t,e)}`,s=g[v],(0,R.A)(s)||(w=x.A.add(o,A,K),x.A.multiplyByScalar(w,.5,w),c.push(w.x,w.y,w.z),s=c.length/3-1,g[v]=s,r&&(T=S.A.add(d,p,ee),S.A.multiplyByScalar(T,.5,T),l.push(T.x,T.y))),a.push(t,s,n),a.push(s,e,n)):b===B&&(v=`${Math.min(e,n)} ${Math.max(e,n)}`,s=g[v],(0,R.A)(s)||(w=x.A.add(A,i,K),x.A.multiplyByScalar(w,.5,w),c.push(w.x,w.y,w.z),s=c.length/3-1,g[v]=s,r&&(T=S.A.add(p,u,ee),S.A.multiplyByScalar(T,.5,T),l.push(T.x,T.y))),a.push(e,s,t),a.push(s,n,t)):(h.push(n),h.push(t),h.push(e))}const _={attributes:{position:new O.A({componentDatatype:N.A.DOUBLE,componentsPerAttribute:3,values:c})},indices:h,primitiveType:U.A.TRIANGLES};return r&&(_.attributes.st=new O.A({componentDatatype:N.A.FLOAT,componentsPerAttribute:2,values:l})),new P.A(_)};const te=new D.A,ne=new D.A,ie=new D.A,oe=new D.A;V.computeRhumbLineSubdivision=function(e,t,n,i,o){o=o??F.A.RADIANS_PER_DEGREE;const r=(0,R.A)(i);Q.A.typeOf.object("ellipsoid",e),Q.A.defined("positions",t),Q.A.defined("indices",n),Q.A.typeOf.number.greaterThanOrEquals("indices.length",n.length,3),Q.A.typeOf.number.equals("indices.length % 3","0",n.length%3,0),Q.A.typeOf.number.greaterThan("granularity",o,0);const a=n.slice(0);let s;const A=t.length,c=new Array(3*A),l=new Array(2*A);let u=0,d=0;for(s=0;s<A;s++){const e=t[s];if(c[u++]=e.x,c[u++]=e.y,c[u++]=e.z,r){const e=i[s];l[d++]=e.x,l[d++]=e.y}}const h=[],g={},f=e.maximumRadius,p=F.A.chordLength(o,f),m=new L.A(void 0,void 0,e),_=new L.A(void 0,void 0,e),I=new L.A(void 0,void 0,e);for(;a.length>0;){const t=a.pop(),n=a.pop(),i=a.pop(),o=x.A.fromArray(c,3*i,z),A=x.A.fromArray(c,3*n,j),u=x.A.fromArray(c,3*t,Y);let d,f,E;r&&(d=S.A.fromArray(l,2*i,X),f=S.A.fromArray(l,2*n,Z),E=S.A.fromArray(l,2*t,$));const y=e.cartesianToCartographic(o,te),C=e.cartesianToCartographic(A,ne),b=e.cartesianToCartographic(u,ie);m.setEndPoints(y,C);const B=m.surfaceDistance;_.setEndPoints(C,b);const v=_.surfaceDistance;I.setEndPoints(b,y);const w=I.surfaceDistance,T=Math.max(B,v,w);let D,Q,N,M,L;T>p?B===T?(D=`${Math.min(i,n)} ${Math.max(i,n)}`,s=g[D],(0,R.A)(s)||(Q=m.interpolateUsingFraction(.5,oe),N=.5*(y.height+C.height),M=x.A.fromRadians(Q.longitude,Q.latitude,N,e,K),c.push(M.x,M.y,M.z),s=c.length/3-1,g[D]=s,r&&(L=S.A.add(d,f,ee),S.A.multiplyByScalar(L,.5,L),l.push(L.x,L.y))),a.push(i,s,t),a.push(s,n,t)):v===T?(D=`${Math.min(n,t)} ${Math.max(n,t)}`,s=g[D],(0,R.A)(s)||(Q=_.interpolateUsingFraction(.5,oe),N=.5*(C.height+b.height),M=x.A.fromRadians(Q.longitude,Q.latitude,N,e,K),c.push(M.x,M.y,M.z),s=c.length/3-1,g[D]=s,r&&(L=S.A.add(f,E,ee),S.A.multiplyByScalar(L,.5,L),l.push(L.x,L.y))),a.push(n,s,i),a.push(s,t,i)):w===T&&(D=`${Math.min(t,i)} ${Math.max(t,i)}`,s=g[D],(0,R.A)(s)||(Q=I.interpolateUsingFraction(.5,oe),N=.5*(b.height+y.height),M=x.A.fromRadians(Q.longitude,Q.latitude,N,e,K),c.push(M.x,M.y,M.z),s=c.length/3-1,g[D]=s,r&&(L=S.A.add(E,d,ee),S.A.multiplyByScalar(L,.5,L),l.push(L.x,L.y))),a.push(t,s,n),a.push(s,i,n)):(h.push(i),h.push(n),h.push(t))}const E={attributes:{position:new O.A({componentDatatype:N.A.DOUBLE,componentsPerAttribute:3,values:c})},indices:h,primitiveType:U.A.TRIANGLES};return r&&(E.attributes.st=new O.A({componentDatatype:N.A.FLOAT,componentsPerAttribute:2,values:l})),new P.A(E)},V.scaleToGeodeticHeight=function(e,t,n,i){n=n??M.A.default;let o=G,r=H;if(t=t??0,i=i??!0,(0,R.A)(e)){const a=e.length;for(let s=0;s<a;s+=3)x.A.fromArray(e,s,r),i&&(r=n.scaleToGeodeticSurface(r,r)),0!==t&&(o=n.geodeticSurfaceNormal(r,o),x.A.multiplyByScalar(o,t,o),x.A.add(r,o,r)),e[s]=r.x,e[s+1]=r.y,e[s+2]=r.z}return e};const re=V},977363:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(215327),o=n(263604),r=n(660662),a=n(267980),s=n(41476),A=n(571804),c=n(915325),l=n(491446),u=n(605971),d=n(610750),h=n(944479),g=n(305439),f=n(46362),p=n(597751),m=n(874915),_=n(367817),I=n(870349),E=n(402330),y=n(769534);const C=[];function b(e,t,n,i,o){const r=C;let a;r.length=o;const A=n.red,c=n.green,l=n.blue,u=n.alpha,d=i.red,h=i.green,g=i.blue,f=i.alpha;if(s.A.equals(n,i)){for(a=0;a<o;a++)r[a]=s.A.clone(n);return r}const p=(d-A)/o,m=(h-c)/o,_=(g-l)/o,I=(f-u)/o;for(a=0;a<o;a++)r[a]=new s.A(A+a*p,c+a*m,l+a*_,u+a*I);return r}function B(e){const t=(e=e??c.A.EMPTY_OBJECT).positions,n=e.colors,o=e.width??1,r=e.colorsPerVertex??!1;if(!(0,l.A)(t)||t.length<2)throw new u.A("At least two positions are required.");if("number"!=typeof o)throw new u.A("width must be a number");if((0,l.A)(n)&&(r&&n.length<t.length||!r&&n.length<t.length-1))throw new u.A("colors has an invalid length.");this._positions=t,this._colors=n,this._width=o,this._colorsPerVertex=r,this._vertexFormat=y.A.clone(e.vertexFormat??y.A.DEFAULT),this._arcType=e.arcType??i.A.GEODESIC,this._granularity=e.granularity??_.A.RADIANS_PER_DEGREE,this._ellipsoid=d.A.clone(e.ellipsoid??d.A.default),this._workerName="createPolylineGeometry";let A=1+t.length*a.A.packedLength;A+=(0,l.A)(n)?1+n.length*s.A.packedLength:1,this.packedLength=A+d.A.packedLength+y.A.packedLength+4}B.pack=function(e,t,n){if(!(0,l.A)(e))throw new u.A("value is required");if(!(0,l.A)(t))throw new u.A("array is required");let i;n=n??0;const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=a.A.packedLength)a.A.pack(o[i],t,n);const A=e._colors;for(r=(0,l.A)(A)?A.length:0,t[n++]=r,i=0;i<r;++i,n+=s.A.packedLength)s.A.pack(A[i],t,n);return d.A.pack(e._ellipsoid,t,n),n+=d.A.packedLength,y.A.pack(e._vertexFormat,t,n),n+=y.A.packedLength,t[n++]=e._width,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t};const v=d.A.clone(d.A.UNIT_SPHERE),w=new y.A,T={positions:void 0,colors:void 0,ellipsoid:v,vertexFormat:w,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};B.unpack=function(e,t,n){if(!(0,l.A)(e))throw new u.A("array is required");let i;t=t??0;let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=a.A.packedLength)r[i]=a.A.unpack(e,t);o=e[t++];const A=o>0?new Array(o):void 0;for(i=0;i<o;++i,t+=s.A.packedLength)A[i]=s.A.unpack(e,t);const c=d.A.unpack(e,t,v);t+=d.A.packedLength;const h=y.A.unpack(e,t,w);t+=y.A.packedLength;const g=e[t++],f=1===e[t++],p=e[t++],m=e[t];return(0,l.A)(n)?(n._positions=r,n._colors=A,n._ellipsoid=d.A.clone(c,n._ellipsoid),n._vertexFormat=y.A.clone(h,n._vertexFormat),n._width=g,n._colorsPerVertex=f,n._arcType=p,n._granularity=m,n):(T.positions=r,T.colors=A,T.width=g,T.colorsPerVertex=f,T.arcType=p,T.granularity=m,new B(T))};const S=new a.A,x=new a.A,D=new a.A,Q=new a.A;B.createGeometry=function(e){const t=e._width,n=e._vertexFormat;let c=e._colors;const u=e._colorsPerVertex,d=e._arcType,y=e._granularity,B=e._ellipsoid;let v,w,T;const N=[];let R=(0,o.A)(e._positions,a.A.equalsEpsilon,!1,N);if((0,l.A)(c)&&N.length>0){let e=0,t=N[0];c=c.filter(function(n,i){let o=!1;return o=u?i===t||0===i&&1===t:i+1===t,!o||(e++,t=N[e],!1)})}let M=R.length;if(M<2||t<=0)return;if(d===i.A.GEODESIC||d===i.A.RHUMB){let e,t;d===i.A.GEODESIC?(e=_.A.chordLength(y,B.maximumRadius),t=I.A.numberOfPoints):(e=y,t=I.A.numberOfPointsRhumbLine);const n=I.A.extractHeights(R,B);if((0,l.A)(c)){let n=1;for(v=0;v<M-1;++v)n+=t(R[v],R[v+1],e);const i=new Array(n);let o=0;for(v=0;v<M-1;++v){const r=R[v],a=R[v+1],A=c[v],l=t(r,a,e);if(u&&v<n){const e=b(0,0,A,c[v+1],l),t=e.length;for(w=0;w<t;++w)i[o++]=e[w]}else for(w=0;w<l;++w)i[o++]=s.A.clone(A)}i[o]=s.A.clone(c[c.length-1]),c=i,C.length=0}R=d===i.A.GEODESIC?I.A.generateCartesianArc({positions:R,minDistance:e,ellipsoid:B,height:n}):I.A.generateCartesianRhumbArc({positions:R,granularity:e,ellipsoid:B,height:n})}M=R.length;const L=4*M-4,P=new Float64Array(3*L),O=new Float64Array(3*L),F=new Float64Array(3*L),U=new Float32Array(2*L),k=n.st?new Float32Array(2*L):void 0,G=(0,l.A)(c)?new Uint8Array(4*L):void 0;let H,V=0,z=0,j=0,Y=0;for(w=0;w<M;++w){let e,i;0===w?(H=S,a.A.subtract(R[0],R[1],H),a.A.add(R[0],H,H)):H=R[w-1],a.A.clone(H,D),a.A.clone(R[w],x),w===M-1?(H=S,a.A.subtract(R[M-1],R[M-2],H),a.A.add(R[M-1],H,H)):H=R[w+1],a.A.clone(H,Q),(0,l.A)(G)&&(e=0===w||u?c[w]:c[w-1],w!==M-1&&(i=c[w]));const o=w===M-1?2:4;for(T=0===w?2:0;T<o;++T){a.A.pack(x,P,V),a.A.pack(D,O,V),a.A.pack(Q,F,V),V+=3;const o=T-2<0?-1:1;if(U[z++]=T%2*2-1,U[z++]=o*t,n.st&&(k[j++]=w/(M-1),k[j++]=Math.max(U[z-2],0)),(0,l.A)(G)){const t=T<2?e:i;G[Y++]=s.A.floatToByte(t.red),G[Y++]=s.A.floatToByte(t.green),G[Y++]=s.A.floatToByte(t.blue),G[Y++]=s.A.floatToByte(t.alpha)}}}const q=new f.A;q.position=new g.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:P}),q.prevPosition=new g.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:O}),q.nextPosition=new g.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:F}),q.expandAndWidth=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:U}),n.st&&(q.st=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:k})),(0,l.A)(G)&&(q.color=new g.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:4,values:G,normalize:!0}));const W=m.A.createTypedArray(L,6*M-6);let J=0,K=0;const X=M-1;for(w=0;w<X;++w)W[K++]=J,W[K++]=J+2,W[K++]=J+1,W[K++]=J+1,W[K++]=J+2,W[K++]=J+3,J+=4;return new h.A({attributes:q,indices:W,primitiveType:E.A.TRIANGLES,boundingSphere:r.A.fromPoints(R),geometryType:p.A.POLYLINES})};const N=B},870349:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(267980),o=n(336946),r=n(491446),a=n(605971),s=n(610750),A=n(602289),c=n(551824),l=n(150429),u=n(367817),d=n(584164),h=n(257941);const g={numberOfPoints:function(e,t,n){const o=i.A.distance(e,t);return Math.ceil(o/n)},numberOfPointsRhumbLine:function(e,t,n){const i=Math.pow(e.longitude-t.longitude,2)+Math.pow(e.latitude-t.latitude,2);return Math.max(1,Math.ceil(Math.sqrt(i/(n*n))))}},f=new o.A;g.extractHeights=function(e,t){const n=e.length,i=new Array(n);for(let o=0;o<n;o++){const n=e[o];i[o]=t.cartesianToCartographic(n,f).height}return i};const p=new d.A,m=new i.A,_=new i.A,I=new h.A(i.A.UNIT_X,0),E=new i.A,y=new h.A(i.A.UNIT_X,0),C=new i.A,b=new i.A,B=[];function v(e,t,n){const i=B;let o;if(i.length=e,t===n){for(o=0;o<e;o++)i[o]=t;return i}const r=(n-t)/e;for(o=0;o<e;o++){const e=t+o*r;i[o]=e}return i}const w=new o.A,T=new o.A,S=new i.A,x=new i.A,D=new i.A,Q=new A.A;let N=new c.A;function R(e,t,n,o,r,a,s,A){const c=o.scaleToGeodeticSurface(e,x),l=o.scaleToGeodeticSurface(t,D),u=g.numberOfPoints(e,t,n),d=o.cartesianToCartographic(c,w),h=o.cartesianToCartographic(l,T),f=v(u,r,a);Q.setEndPoints(d,h);const p=Q.surfaceDistance/u;let m=A;d.height=r;let _=o.cartographicToCartesian(d,S);i.A.pack(_,s,m),m+=3;for(let e=1;e<u;e++){const t=Q.interpolateUsingSurfaceDistance(e*p,T);t.height=f[e],_=o.cartographicToCartesian(t,S),i.A.pack(_,s,m),m+=3}return m}function M(e,t,n,o,r,a,s,A){const l=o.cartesianToCartographic(e,w),u=o.cartesianToCartographic(t,T),d=g.numberOfPointsRhumbLine(l,u,n);l.height=0,u.height=0;const h=v(d,r,a);N.ellipsoid.equals(o)||(N=new c.A(void 0,void 0,o)),N.setEndPoints(l,u);const f=N.surfaceDistance/d;let p=A;l.height=r;let m=o.cartographicToCartesian(l,S);i.A.pack(m,s,p),p+=3;for(let e=1;e<d;e++){const t=N.interpolateUsingSurfaceDistance(e*f,T);t.height=h[e],m=o.cartographicToCartesian(t,S),i.A.pack(m,s,p),p+=3}return p}g.wrapLongitude=function(e,t){const n=[],o=[];if((0,r.A)(e)&&e.length>0){t=t??d.A.IDENTITY;const a=d.A.inverseTransformation(t,p),s=d.A.multiplyByPoint(a,i.A.ZERO,m),A=i.A.normalize(d.A.multiplyByPointAsVector(a,i.A.UNIT_Y,_),_),c=h.A.fromPointNormal(s,A,I),u=i.A.normalize(d.A.multiplyByPointAsVector(a,i.A.UNIT_X,E),E),g=h.A.fromPointNormal(s,u,y);let f=1;n.push(i.A.clone(e[0]));let B=n[0];const v=e.length;for(let t=1;t<v;++t){const a=e[t];if(h.A.getPointDistance(g,B)<0||h.A.getPointDistance(g,a)<0){const e=l.A.lineSegmentPlane(B,a,c,C);if((0,r.A)(e)){const t=i.A.multiplyByScalar(A,5e-9,b);h.A.getPointDistance(c,B)<0&&i.A.negate(t,t),n.push(i.A.add(e,t,new i.A)),o.push(f+1),i.A.negate(t,t),n.push(i.A.add(e,t,new i.A)),f=1}}n.push(i.A.clone(e[t])),f++,B=a}o.push(f)}return{positions:n,lengths:o}},g.generateArc=function(e){(0,r.A)(e)||(e={});const t=e.positions;if(!(0,r.A)(t))throw new a.A("options.positions is required.");const n=t.length,o=e.ellipsoid??s.A.default;let A=e.height??0;const c=Array.isArray(A);if(n<1)return[];if(1===n){const e=o.scaleToGeodeticSurface(t[0],x);if(A=c?A[0]:A,0!==A){const t=o.geodeticSurfaceNormal(e,S);i.A.multiplyByScalar(t,A,t),i.A.add(e,t,e)}return[e.x,e.y,e.z]}let l=e.minDistance;if(!(0,r.A)(l)){const t=e.granularity??u.A.RADIANS_PER_DEGREE;l=u.A.chordLength(t,o.maximumRadius)}let d,h=0;for(d=0;d<n-1;d++)h+=g.numberOfPoints(t[d],t[d+1],l);const f=3*(h+1),p=new Array(f);let m=0;for(d=0;d<n-1;d++)m=R(t[d],t[d+1],l,o,c?A[d]:A,c?A[d+1]:A,p,m);B.length=0;const _=t[n-1],I=o.cartesianToCartographic(_,w);I.height=c?A[n-1]:A;const E=o.cartographicToCartesian(I,S);return i.A.pack(E,p,f-3),p};const L=new o.A,P=new o.A;g.generateRhumbArc=function(e){(0,r.A)(e)||(e={});const t=e.positions;if(!(0,r.A)(t))throw new a.A("options.positions is required.");const n=t.length,A=e.ellipsoid??s.A.default;let c=e.height??0;const l=Array.isArray(c);if(n<1)return[];if(1===n){const e=A.scaleToGeodeticSurface(t[0],x);if(c=l?c[0]:c,0!==c){const t=A.geodeticSurfaceNormal(e,S);i.A.multiplyByScalar(t,c,t),i.A.add(e,t,e)}return[e.x,e.y,e.z]}const d=e.granularity??u.A.RADIANS_PER_DEGREE;let h,f,p=0,m=A.cartesianToCartographic(t[0],L);for(h=0;h<n-1;h++)f=A.cartesianToCartographic(t[h+1],P),p+=g.numberOfPointsRhumbLine(m,f,d),m=o.A.clone(f,L);const _=3*(p+1),I=new Array(_);let E=0;for(h=0;h<n-1;h++)E=M(t[h],t[h+1],d,A,l?c[h]:c,l?c[h+1]:c,I,E);B.length=0;const y=t[n-1],C=A.cartesianToCartographic(y,w);C.height=l?c[n-1]:c;const b=A.cartographicToCartesian(C,S);return i.A.pack(b,I,_-3),I},g.generateCartesianArc=function(e){const t=g.generateArc(e),n=t.length/3,o=new Array(n);for(let e=0;e<n;e++)o[e]=i.A.unpack(t,3*e);return o},g.generateCartesianRhumbArc=function(e){const t=g.generateRhumbArc(e),n=t.length/3,o=new Array(n);for(let e=0;e<n;e++)o[e]=i.A.unpack(t,3*e);return o};const O=g},828021:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var i=n(263604),o=n(647934),r=n(660662),a=n(434067),s=n(267980),A=n(571804),c=n(297038),l=n(915325),u=n(491446),d=n(605971),h=n(610750),g=n(944479),f=n(305439),p=n(46362),m=n(34233),_=n(874915),I=n(367817),E=n(983884),y=n(576770),C=n(748918),b=n(402330),B=n(769534),v=n(666765);function w(e){const t=(e=e??l.A.EMPTY_OBJECT).polylinePositions,n=e.shapePositions;if(!(0,u.A)(t))throw new d.A("options.polylinePositions is required.");if(!(0,u.A)(n))throw new d.A("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=h.A.clone(e.ellipsoid??h.A.default),this._cornerType=e.cornerType??c.A.ROUNDED,this._vertexFormat=B.A.clone(e.vertexFormat??B.A.DEFAULT),this._granularity=e.granularity??I.A.RADIANS_PER_DEGREE,this._workerName="createPolylineVolumeGeometry";let i=1+t.length*s.A.packedLength;i+=1+n.length*a.A.packedLength,this.packedLength=i+h.A.packedLength+B.A.packedLength+2}w.pack=function(e,t,n){if(!(0,u.A)(e))throw new d.A("value is required");if(!(0,u.A)(t))throw new d.A("array is required");let i;n=n??0;const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=s.A.packedLength)s.A.pack(o[i],t,n);const A=e._shape;for(r=A.length,t[n++]=r,i=0;i<r;++i,n+=a.A.packedLength)a.A.pack(A[i],t,n);return h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,B.A.pack(e._vertexFormat,t,n),n+=B.A.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const T=h.A.clone(h.A.UNIT_SPHERE),S=new B.A,x={polylinePositions:void 0,shapePositions:void 0,ellipsoid:T,vertexFormat:S,cornerType:void 0,granularity:void 0};w.unpack=function(e,t,n){if(!(0,u.A)(e))throw new d.A("array is required");let i;t=t??0;let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=s.A.packedLength)r[i]=s.A.unpack(e,t);o=e[t++];const A=new Array(o);for(i=0;i<o;++i,t+=a.A.packedLength)A[i]=a.A.unpack(e,t);const c=h.A.unpack(e,t,T);t+=h.A.packedLength;const l=B.A.unpack(e,t,S);t+=B.A.packedLength;const g=e[t++],f=e[t];return(0,u.A)(n)?(n._positions=r,n._shape=A,n._ellipsoid=h.A.clone(c,n._ellipsoid),n._vertexFormat=B.A.clone(l,n._vertexFormat),n._cornerType=g,n._granularity=f,n):(x.polylinePositions=r,x.shapePositions=A,x.cornerType=g,x.granularity=f,new w(x))};const D=new o.A;w.createGeometry=function(e){const t=e._positions,n=(0,i.A)(t,s.A.equalsEpsilon);let a=e._shape;if(a=C.A.removeDuplicatesFromShape(a),n.length<2||a.length<3)return;y.A.computeWindingOrder2D(a)===v.A.CLOCKWISE&&a.reverse();const c=o.A.fromPoints(a,D);return function(e,t,n,i){const o=new p.A;i.position&&(o.position=new f.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:e}));const a=t.length,s=e.length/3,c=(s-2*a)/(2*a),l=y.A.triangulate(t),u=(c-1)*a*6+2*l.length,d=_.A.createTypedArray(s,u);let h,I,C,B,v,w;const T=2*a;let S=0;for(h=0;h<c-1;h++){for(I=0;I<a-1;I++)C=2*I+h*a*2,w=C+T,B=C+1,v=B+T,d[S++]=B,d[S++]=C,d[S++]=v,d[S++]=v,d[S++]=C,d[S++]=w;C=2*a-2+h*a*2,B=C+1,v=B+T,w=C+T,d[S++]=B,d[S++]=C,d[S++]=v,d[S++]=v,d[S++]=C,d[S++]=w}if(i.st||i.tangent||i.bitangent){const e=new Float32Array(2*s),i=1/(c-1),r=1/n.height,l=n.height/2;let u,d,g=0;for(h=0;h<c;h++){for(u=h*i,d=r*(t[0].y+l),e[g++]=u,e[g++]=d,I=1;I<a;I++)d=r*(t[I].y+l),e[g++]=u,e[g++]=d,e[g++]=u,e[g++]=d;d=r*(t[0].y+l),e[g++]=u,e[g++]=d}for(I=0;I<a;I++)u=0,d=r*(t[I].y+l),e[g++]=u,e[g++]=d;for(I=0;I<a;I++)u=(c-1)*i,d=r*(t[I].y+l),e[g++]=u,e[g++]=d;o.st=new f.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:new Float32Array(e)})}const x=s-2*a;for(h=0;h<l.length;h+=3){const e=l[h]+x,t=l[h+1]+x,n=l[h+2]+x;d[S++]=e,d[S++]=t,d[S++]=n,d[S++]=n+a,d[S++]=t+a,d[S++]=e+a}let D=new g.A({attributes:o,indices:d,boundingSphere:r.A.fromVertices(e),primitiveType:b.A.TRIANGLES});if(i.normal&&(D=m.A.computeNormal(D)),i.tangent||i.bitangent){try{D=m.A.computeTangentAndBitangent(D)}catch(e){(0,E.A)("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}i.tangent||(D.attributes.tangent=void 0),i.bitangent||(D.attributes.bitangent=void 0),i.st||(D.attributes.st=void 0)}return D}(C.A.computePositions(n,a,c,e,!0),a,c,e._vertexFormat)};const Q=w},748918:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var i=n(434067),o=n(267980),r=n(626809),a=n(336946),s=n(297038),A=n(658091),c=n(367817),l=n(331185),u=n(584164),d=n(870349),h=n(99479),g=n(543622),f=n(983884);const p=[new o.A,new o.A],m=new o.A,_=new o.A,I=new o.A,E=new o.A,y=new o.A,C=new o.A,b=new o.A,B=new o.A,v=new o.A,w=new o.A,T=new o.A,S={};let x=new a.A;function D(e,t,n,i){const r=e[0],a=e[1],s=o.A.angleBetween(r,a),A=Math.ceil(s/i),c=new Array(A);let l;if(t===n){for(l=0;l<A;l++)c[l]=t;return c.push(n),c}const u=(n-t)/A;for(l=1;l<A;l++){const e=t+l*u;c[l]=e}return c[0]=t,c.push(n),c}const Q=new o.A,N=new o.A,R=new o.A(-1,0,0);let M=new u.A;const L=new u.A;let P=new l.A;const O=l.A.IDENTITY.clone(),F=new o.A,U=new r.A,k=new o.A;function G(e,t,n,r,a,s,c,d){let h=F,f=U;M=g.A.eastNorthUpToFixedFrame(e,a,M),h=u.A.multiplyByPointAsVector(M,R,h),h=o.A.normalize(h,h);const p=function(e,t,n,r){const a=new A.A(n,r),s=a.projectPointOntoPlane(o.A.add(n,e,Q),Q),c=a.projectPointOntoPlane(o.A.add(n,t,N),N),l=i.A.angleBetween(s,c);return c.x*s.y-c.y*s.x>=0?-l:l}(h,t,e,a);P=l.A.fromRotationZ(p,P),k.z=s,M=u.A.multiplyTransformation(M,u.A.fromRotationTranslation(P,k,L),M);const m=O;m[0]=c;for(let e=0;e<d;e++)for(let e=0;e<n.length;e+=3)f=o.A.fromArray(n,e,f),f=l.A.multiplyByVector(m,f,f),f=u.A.multiplyByPoint(M,f,f),r.push(f.x,f.y,f.z);return r}const H=new o.A;function V(e,t,n,i,r,a,s){for(let A=0;A<e.length;A+=3)i=G(o.A.fromArray(e,A,H),t,n,i,r,a[A/3],s,1);return i}function z(e,t){const n=e.length,i=new Array(3*n);let o=0;const r=t.x+t.width/2,a=t.y+t.height/2;for(let t=0;t<n;t++)i[o++]=e[t].x-r,i[o++]=0,i[o++]=e[t].y-a;return i}const j=new h.A,Y=new o.A,q=new l.A;function W(e,t,n,i,r,a,A,u,d,g){const f=o.A.angleBetween(o.A.subtract(t,e,w),o.A.subtract(n,e,T)),p=i===s.A.BEVELED?0:Math.ceil(f/c.A.toRadians(5));let m,_,I;if(m=r?l.A.fromQuaternion(h.A.fromAxisAngle(o.A.negate(e,w),f/(p+1),j),q):l.A.fromQuaternion(h.A.fromAxisAngle(e,f/(p+1),j),q),t=o.A.clone(t,Y),p>0){const n=g?2:1;for(let i=0;i<p;i++)t=l.A.multiplyByVector(m,t,t),_=o.A.subtract(t,e,w),_=o.A.normalize(_,_),r||(_=o.A.negate(_,_)),I=a.scaleToGeodeticSurface(t,T),A=G(I,_,u,A,a,d,1,n)}else _=o.A.subtract(t,e,w),_=o.A.normalize(_,_),r||(_=o.A.negate(_,_)),I=a.scaleToGeodeticSurface(t,T),A=G(I,_,u,A,a,d,1,1),n=o.A.clone(n,Y),_=o.A.subtract(n,e,w),_=o.A.normalize(_,_),r||(_=o.A.negate(_,_)),I=a.scaleToGeodeticSurface(n,T),A=G(I,_,u,A,a,d,1,1);return A}S.removeDuplicatesFromShape=function(e){const t=e.length,n=[];for(let o=t-1,r=0;r<t;o=r++){const t=e[o],a=e[r];i.A.equals(t,a)||n.push(a)}return n},S.angleIsGreaterThanPi=function(e,t,n,i){const r=new A.A(n,i),a=r.projectPointOntoPlane(o.A.add(n,e,Q),Q),s=r.projectPointOntoPlane(o.A.add(n,t,N),N);return s.x*a.y-s.y*a.x>=0};const J=new o.A,K=new o.A;S.computePositions=function(e,t,n,i,r){const a=i._ellipsoid,A=function(e,t){const n=new Array(e.length);for(let i=0;i<e.length;i++){const o=e[i];x=t.cartesianToCartographic(o,x),n[i]=x.height,e[i]=t.scaleToGeodeticSurface(o,o)}return n}(e,a),l=i._granularity,u=i._cornerType,h=r?function(e,t){const n=e.length,i=new Array(6*n);let o=0;const r=t.x+t.width/2,a=t.y+t.height/2;let s=e[0];i[o++]=s.x-r,i[o++]=0,i[o++]=s.y-a;for(let t=1;t<n;t++){s=e[t];const n=s.x-r,A=s.y-a;i[o++]=n,i[o++]=0,i[o++]=A,i[o++]=n,i[o++]=0,i[o++]=A}return s=e[0],i[o++]=s.x-r,i[o++]=0,i[o++]=s.y-a,i}(t,n):z(t,n),g=r?z(t,n):void 0,T=n.height/2,Q=n.width/2;let N=e.length,R=[],M=r?[]:void 0,L=m,P=_,O=I,F=E,U=y,k=C,H=b,j=B,Y=v,q=e[0],X=e[1];F=a.geodeticSurfaceNormal(q,F),L=o.A.subtract(X,q,L),L=o.A.normalize(L,L),j=o.A.cross(F,L,j),j=o.A.normalize(j,j);let Z,$,ee=A[0],te=A[1];r&&(M=G(q,j,g,M,a,ee+T,1,1)),Y=o.A.clone(q,Y),q=X,P=o.A.negate(L,P);for(let t=1;t<N-1;t++){const n=r?2:1;if(X=e[t+1],q.equals(X)){(0,f.A)("Positions are too close and are considered equivalent with rounding error.");continue}L=o.A.subtract(X,q,L),L=o.A.normalize(L,L),F=a.geodeticSurfaceNormal(q,F);const i=o.A.multiplyByScalar(F,o.A.dot(L,F),J);o.A.subtract(L,i,i),o.A.normalize(i,i);const g=o.A.multiplyByScalar(F,o.A.dot(P,F),K);if(o.A.subtract(P,g,g),o.A.normalize(g,g),c.A.equalsEpsilon(Math.abs(o.A.dot(i,g)),1,c.A.EPSILON7))R=G(Y,j,h,R,a,ee+T,1,1),Y=q;else{O=o.A.add(L,P,O),O=o.A.normalize(O,O),O=o.A.cross(O,F,O),O=o.A.cross(F,O,O),O=o.A.normalize(O,O);const e=1/Math.max(.25,o.A.magnitude(o.A.cross(O,P,w))),t=S.angleIsGreaterThanPi(L,P,q,a);t?(U=o.A.add(q,o.A.multiplyByScalar(O,e*Q,O),U),k=o.A.add(U,o.A.multiplyByScalar(j,Q,k),k),p[0]=o.A.clone(Y,p[0]),p[1]=o.A.clone(k,p[1]),Z=D(p,ee+T,te+T,l),$=d.A.generateArc({positions:p,granularity:l,ellipsoid:a}),R=V($,j,h,R,a,Z,1),j=o.A.cross(F,L,j),j=o.A.normalize(j,j),H=o.A.add(U,o.A.multiplyByScalar(j,Q,H),H),u===s.A.ROUNDED||u===s.A.BEVELED?W(U,k,H,u,t,a,R,h,te+T,r):(O=o.A.negate(O,O),R=G(q,O,h,R,a,te+T,e,n)),Y=o.A.clone(H,Y)):(U=o.A.add(q,o.A.multiplyByScalar(O,e*Q,O),U),k=o.A.add(U,o.A.multiplyByScalar(j,-Q,k),k),p[0]=o.A.clone(Y,p[0]),p[1]=o.A.clone(k,p[1]),Z=D(p,ee+T,te+T,l),$=d.A.generateArc({positions:p,granularity:l,ellipsoid:a}),R=V($,j,h,R,a,Z,1),j=o.A.cross(F,L,j),j=o.A.normalize(j,j),H=o.A.add(U,o.A.multiplyByScalar(j,-Q,H),H),u===s.A.ROUNDED||u===s.A.BEVELED?W(U,k,H,u,t,a,R,h,te+T,r):R=G(q,O,h,R,a,te+T,e,n),Y=o.A.clone(H,Y)),P=o.A.negate(L,P)}ee=te,te=A[t+1],q=X}p[0]=o.A.clone(Y,p[0]),p[1]=o.A.clone(q,p[1]),Z=D(p,ee+T,te+T,l),$=d.A.generateArc({positions:p,granularity:l,ellipsoid:a}),R=V($,j,h,R,a,Z,1),r&&(M=G(q,j,g,M,a,te+T,1,1)),N=R.length;const ne=r?N+M.length:N,ie=new Float64Array(ne);return ie.set(R),r&&ie.set(M,N),ie};const X=S},365943:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(263604),o=n(647934),r=n(660662),a=n(434067),s=n(267980),A=n(571804),c=n(297038),l=n(915325),u=n(491446),d=n(605971),h=n(610750),g=n(944479),f=n(305439),p=n(46362),m=n(874915),_=n(367817),I=n(576770),E=n(748918),y=n(402330),C=n(666765);function b(e){const t=(e=e??l.A.EMPTY_OBJECT).polylinePositions,n=e.shapePositions;if(!(0,u.A)(t))throw new d.A("options.polylinePositions is required.");if(!(0,u.A)(n))throw new d.A("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=h.A.clone(e.ellipsoid??h.A.default),this._cornerType=e.cornerType??c.A.ROUNDED,this._granularity=e.granularity??_.A.RADIANS_PER_DEGREE,this._workerName="createPolylineVolumeOutlineGeometry";let i=1+t.length*s.A.packedLength;i+=1+n.length*a.A.packedLength,this.packedLength=i+h.A.packedLength+2}b.pack=function(e,t,n){if(!(0,u.A)(e))throw new d.A("value is required");if(!(0,u.A)(t))throw new d.A("array is required");let i;n=n??0;const o=e._positions;let r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=s.A.packedLength)s.A.pack(o[i],t,n);const A=e._shape;for(r=A.length,t[n++]=r,i=0;i<r;++i,n+=a.A.packedLength)a.A.pack(A[i],t,n);return h.A.pack(e._ellipsoid,t,n),n+=h.A.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const B=h.A.clone(h.A.UNIT_SPHERE),v={polylinePositions:void 0,shapePositions:void 0,ellipsoid:B,height:void 0,cornerType:void 0,granularity:void 0};b.unpack=function(e,t,n){if(!(0,u.A)(e))throw new d.A("array is required");let i;t=t??0;let o=e[t++];const r=new Array(o);for(i=0;i<o;++i,t+=s.A.packedLength)r[i]=s.A.unpack(e,t);o=e[t++];const A=new Array(o);for(i=0;i<o;++i,t+=a.A.packedLength)A[i]=a.A.unpack(e,t);const c=h.A.unpack(e,t,B);t+=h.A.packedLength;const l=e[t++],g=e[t];return(0,u.A)(n)?(n._positions=r,n._shape=A,n._ellipsoid=h.A.clone(c,n._ellipsoid),n._cornerType=l,n._granularity=g,n):(v.polylinePositions=r,v.shapePositions=A,v.cornerType=l,v.granularity=g,new b(v))};const w=new o.A;b.createGeometry=function(e){const t=e._positions,n=(0,i.A)(t,s.A.equalsEpsilon);let a=e._shape;if(a=E.A.removeDuplicatesFromShape(a),n.length<2||a.length<3)return;I.A.computeWindingOrder2D(a)===C.A.CLOCKWISE&&a.reverse();const c=o.A.fromPoints(a,w);return function(e,t){const n=new p.A;n.position=new f.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:e});const i=t.length,o=n.position.values.length/3,a=e.length/3/i,s=m.A.createTypedArray(o,2*i*(a+1));let c,l,u=0;c=0;let d=c*i;for(l=0;l<i-1;l++)s[u++]=l+d,s[u++]=l+d+1;for(s[u++]=i-1+d,s[u++]=d,c=a-1,d=c*i,l=0;l<i-1;l++)s[u++]=l+d,s[u++]=l+d+1;for(s[u++]=i-1+d,s[u++]=d,c=0;c<a-1;c++){const e=i*c,t=e+i;for(l=0;l<i;l++)s[u++]=l+e,s[u++]=l+t}return new g.A({attributes:n,indices:m.A.createTypedArray(o,s),boundingSphere:r.A.fromVertices(e),primitiveType:y.A.LINES})}(E.A.computePositions(n,a,c,e,!1),a)};const T=b},589670:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var i=n(660662),o=n(434067),r=n(267980),a=n(369031),s=n(915325),A=n(491446),c=n(605971),l=n(874915),u=n(587451),d=n(367817),h=n(832698),g=n(971724),f=n(42794),p=n(371267),m=n(255335);function _(e){if(!(0,A.A)(e)||!(0,A.A)(e.quantizedVertices))throw new c.A("options.quantizedVertices is required.");if(!(0,A.A)(e.indices))throw new c.A("options.indices is required.");if(!(0,A.A)(e.minimumHeight))throw new c.A("options.minimumHeight is required.");if(!(0,A.A)(e.maximumHeight))throw new c.A("options.maximumHeight is required.");if(!(0,A.A)(e.maximumHeight))throw new c.A("options.maximumHeight is required.");if(!(0,A.A)(e.boundingSphere))throw new c.A("options.boundingSphere is required.");if(!(0,A.A)(e.horizonOcclusionPoint))throw new c.A("options.horizonOcclusionPoint is required.");if(!(0,A.A)(e.westIndices))throw new c.A("options.westIndices is required.");if(!(0,A.A)(e.southIndices))throw new c.A("options.southIndices is required.");if(!(0,A.A)(e.eastIndices))throw new c.A("options.eastIndices is required.");if(!(0,A.A)(e.northIndices))throw new c.A("options.northIndices is required.");if(!(0,A.A)(e.westSkirtHeight))throw new c.A("options.westSkirtHeight is required.");if(!(0,A.A)(e.southSkirtHeight))throw new c.A("options.southSkirtHeight is required.");if(!(0,A.A)(e.eastSkirtHeight))throw new c.A("options.eastSkirtHeight is required.");if(!(0,A.A)(e.northSkirtHeight))throw new c.A("options.northSkirtHeight is required.");this._quantizedVertices=e.quantizedVertices,this._encodedNormals=e.encodedNormals,this._indices=e.indices,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._boundingSphere=e.boundingSphere,this._orientedBoundingBox=e.orientedBoundingBox,this._horizonOcclusionPoint=e.horizonOcclusionPoint,this._credits=e.credits;const t=this._quantizedVertices.length/3,n=this._uValues=this._quantizedVertices.subarray(0,t),i=this._vValues=this._quantizedVertices.subarray(t,2*t);function o(e,t){return i[e]-i[t]}function r(e,t){return n[e]-n[t]}this._heightValues=this._quantizedVertices.subarray(2*t,3*t),this._westIndices=E(e.westIndices,o,t),this._southIndices=E(e.southIndices,r,t),this._eastIndices=E(e.eastIndices,o,t),this._northIndices=E(e.northIndices,r,t),this._westSkirtHeight=e.westSkirtHeight,this._southSkirtHeight=e.southSkirtHeight,this._eastSkirtHeight=e.eastSkirtHeight,this._northSkirtHeight=e.northSkirtHeight,this._childTileMask=e.childTileMask??15,this._createdByUpsampling=e.createdByUpsampling??!1,this._waterMask=e.waterMask,this._mesh=void 0}Object.defineProperties(_.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}},canUpsample:{get:function(){return(0,A.A)(this._mesh)}}});const I=[];function E(e,t,n){I.length=e.length;let i=!1;for(let n=0,o=e.length;n<o;++n)I[n]=e[n],i=i||n>0&&t(e[n-1],e[n])>0;return i?(I.sort(t),l.A.createTypedArray(n,I)):e}const y="createVerticesFromQuantizedTerrainMesh",C=new g.A(y),b=new g.A(y,f.A.maximumAsynchronousTasks);_.prototype.createMesh=function(e){e=e??s.A.EMPTY_OBJECT,a.A.typeOf.object("options.tilingScheme",e.tilingScheme),a.A.typeOf.number("options.x",e.x),a.A.typeOf.number("options.y",e.y),a.A.typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,i=e.y,o=e.level,c=e.exaggeration??1,u=e.exaggerationRelativeHeight??0,d=e.throttle??!0,h=t.ellipsoid,g=t.tileXYToRectangle(n,i,o),f=(d?b:C).scheduleTask({minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,quantizedVertices:this._quantizedVertices,octEncodedNormals:this._encodedNormals,includeWebMercatorT:!0,indices:this._indices,westIndices:this._westIndices,southIndices:this._southIndices,eastIndices:this._eastIndices,northIndices:this._northIndices,westSkirtHeight:this._westSkirtHeight,southSkirtHeight:this._southSkirtHeight,eastSkirtHeight:this._eastSkirtHeight,northSkirtHeight:this._northSkirtHeight,rectangle:g,relativeToCenter:this._boundingSphere.center,ellipsoid:h,exaggeration:c,exaggerationRelativeHeight:u});if(!(0,A.A)(f))return;const _=this;return Promise.resolve(f).then(function(e){const t=_._quantizedVertices.length/3,n=t+_._westIndices.length+_._southIndices.length+_._eastIndices.length+_._northIndices.length,i=l.A.createTypedArray(n,e.indices),o=new Float32Array(e.vertices),a=e.center,s=e.minimumHeight,A=e.maximumHeight,c=_._boundingSphere,u=_._orientedBoundingBox,d=r.A.clone(e.occludeePointInScaledSpace)??_._horizonOcclusionPoint,h=e.vertexStride,g=p.A.clone(e.encoding);return _._mesh=new m.A(a,o,i,e.indexCountWithoutSkirts,t,s,A,c,d,h,u,g,e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),_._quantizedVertices=void 0,_._encodedNormals=void 0,_._indices=void 0,_._uValues=void 0,_._vValues=void 0,_._heightValues=void 0,_._westIndices=void 0,_._southIndices=void 0,_._eastIndices=void 0,_._northIndices=void 0,_._mesh})};const B=new g.A("upsampleQuantizedTerrainMesh",f.A.maximumAsynchronousTasks);_.prototype.upsample=function(e,t,n,o,a,s,u){if(!(0,A.A)(e))throw new c.A("tilingScheme is required.");if(!(0,A.A)(t))throw new c.A("thisX is required.");if(!(0,A.A)(n))throw new c.A("thisY is required.");if(!(0,A.A)(o))throw new c.A("thisLevel is required.");if(!(0,A.A)(a))throw new c.A("descendantX is required.");if(!(0,A.A)(s))throw new c.A("descendantY is required.");if(!(0,A.A)(u))throw new c.A("descendantLevel is required.");if(u-o>1)throw new c.A("Upsampling through more than one level at a time is not currently supported.");const d=this._mesh;if(!(0,A.A)(this._mesh))return;const g=2*t!==a,f=2*n===s,p=e.ellipsoid,m=e.tileXYToRectangle(a,s,u),I=B.scheduleTask({vertices:d.vertices,vertexCountWithoutSkirts:d.vertexCountWithoutSkirts,indices:d.indices,indexCountWithoutSkirts:d.indexCountWithoutSkirts,encoding:d.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:g,isNorthChild:f,childRectangle:m,ellipsoid:p});if(!(0,A.A)(I))return;let E=Math.min(this._westSkirtHeight,this._eastSkirtHeight);E=Math.min(E,this._southSkirtHeight),E=Math.min(E,this._northSkirtHeight);const y=g?.5*E:this._westSkirtHeight,C=f?.5*E:this._southSkirtHeight,b=g?this._eastSkirtHeight:.5*E,v=f?this._northSkirtHeight:.5*E,w=this._credits;return Promise.resolve(I).then(function(e){const t=new Uint16Array(e.vertices),n=l.A.createTypedArray(t.length/3,e.indices);let o;return(0,A.A)(e.encodedNormals)&&(o=new Uint8Array(e.encodedNormals)),new _({quantizedVertices:t,indices:n,encodedNormals:o,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:i.A.clone(e.boundingSphere),orientedBoundingBox:h.A.clone(e.orientedBoundingBox),horizonOcclusionPoint:r.A.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:y,southSkirtHeight:C,eastSkirtHeight:b,northSkirtHeight:v,childTileMask:0,credits:w,createdByUpsampling:!0})})};const v=32767,w=new r.A;function T(e,t,n,i,o,r,a,s){const A=Math.min(n,o,a),c=Math.max(n,o,a),l=Math.min(i,r,s),u=Math.max(i,r,s);return e>=A&&e<=c&&t>=l&&t<=u}_.prototype.interpolateHeight=function(e,t,n){let i=d.A.clamp((t-e.west)/e.width,0,1);i*=v;let o=d.A.clamp((n-e.south)/e.height,0,1);return o*=v,(0,A.A)(this._mesh)?function(e,t,n){const i=e._mesh,o=i.vertices,r=i.encoding,a=i.indices;for(let e=0,i=a.length;e<i;e+=3){const i=a[e],s=a[e+1],A=a[e+2],c=r.decodeTextureCoordinates(o,i,S),l=r.decodeTextureCoordinates(o,s,x),d=r.decodeTextureCoordinates(o,A,D);if(T(t,n,c.x,c.y,l.x,l.y,d.x,d.y)){const e=u.A.computeBarycentricCoordinates(t,n,c.x,c.y,l.x,l.y,d.x,d.y,w);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const t=r.decodeHeight(o,i),n=r.decodeHeight(o,s),a=r.decodeHeight(o,A);return e.x*t+e.y*n+e.z*a}}}}(this,i,o):function(e,t,n){const i=e._uValues,o=e._vValues,r=e._heightValues,a=e._indices;for(let s=0,A=a.length;s<A;s+=3){const A=a[s],c=a[s+1],l=a[s+2],h=i[A],g=i[c],f=i[l],p=o[A],m=o[c],_=o[l];if(T(t,n,h,p,g,m,f,_)){const i=u.A.computeBarycentricCoordinates(t,n,h,p,g,m,f,_,w);if(i.x>=-1e-15&&i.y>=-1e-15&&i.z>=-1e-15){const t=i.x*r[A]+i.y*r[c]+i.z*r[l];return d.A.lerp(e._minimumHeight,e._maximumHeight,t/v)}}}}(this,i,o)};const S=new o.A,x=new o.A,D=new o.A;_.prototype.isChildAvailable=function(e,t,n,i){if(!(0,A.A)(e))throw new c.A("thisX is required.");if(!(0,A.A)(t))throw new c.A("thisY is required.");if(!(0,A.A)(n))throw new c.A("childX is required.");if(!(0,A.A)(i))throw new c.A("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),!!(this._childTileMask&1<<o)},_.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const Q=_},259690:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(915325),o=n(491446),r=n(605971),a=n(99479),s=n(437266);function A(e){const t=(e=e??i.A.EMPTY_OBJECT).points,n=e.times;if(!(0,o.A)(t)||!(0,o.A)(n))throw new r.A("points and times are required.");if(t.length<2)throw new r.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new r.A("times.length must be equal to points.length.");this._times=n,this._points=t,this._evaluateFunction=function(e){const t=e.points,n=e.times;return function(i,r){(0,o.A)(r)||(r=new a.A);const s=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),A=(i-n[s])/(n[s+1]-n[s]),c=t[s],l=t[s+1];return a.A.fastSlerp(c,l,A,r)}}(this),this._lastTimeIndex=0}Object.defineProperties(A.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),A.prototype.findTimeInterval=s.A.prototype.findTimeInterval,A.prototype.wrapTime=s.A.prototype.wrapTime,A.prototype.clampTime=s.A.prototype.clampTime,A.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};const c=A},67988:(e,t,n)=>{"use strict";function i(){this._array=[],this._offset=0,this._length=0}n.d(t,{A:()=>o}),Object.defineProperties(i.prototype,{length:{get:function(){return this._length}}}),i.prototype.enqueue=function(e){this._array.push(e),this._length++},i.prototype.dequeue=function(){if(0===this._length)return;const e=this._array;let t=this._offset;const n=e[t];return e[t]=void 0,t++,t>10&&2*t>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n},i.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},i.prototype.contains=function(e){return-1!==this._array.indexOf(e)},i.prototype.clear=function(){this._array.length=this._offset=this._length=0},i.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};const o=i},370347:(e,t,n)=>{"use strict";function i(e,t,n=0,a=e.length-1,s=r){for(;a>n;){if(a-n>600){const o=a-n+1,r=t-n+1,A=Math.log(o),c=.5*Math.exp(2*A/3),l=.5*Math.sqrt(A*c*(o-c)/o)*(r-o/2<0?-1:1);i(e,t,Math.max(n,Math.floor(t-r*c/o+l)),Math.min(a,Math.floor(t+(o-r)*c/o+l)),s)}const r=e[t];let A=n,c=a;for(o(e,n,t),s(e[a],r)>0&&o(e,n,a);A<c;){for(o(e,A,c),A++,c--;s(e[A],r)<0;)A++;for(;s(e[c],r)>0;)c--}0===s(e[n],r)?o(e,n,c):(c++,o(e,c,a)),c<=t&&(n=c+1),t<=c&&(a=c-1)}}function o(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function r(e,t){return e<t?-1:e>t?1:0}n.d(t,{A:()=>T});class a{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!_(e,t))return n;const i=this.toBBox,o=[];for(;t;){for(let r=0;r<t.children.length;r++){const a=t.children[r],s=t.leaf?i(a):a;_(e,s)&&(t.leaf?n.push(a):m(e,s)?this._all(a,n):o.push(a))}t=o.pop()}return n}collides(e){let t=this.data;if(!_(e,t))return!1;const n=[];for(;t;){for(let i=0;i<t.children.length;i++){const o=t.children[i],r=t.leaf?this.toBBox(o):o;if(_(e,r)){if(t.leaf||m(e,r))return!0;n.push(o)}}t=n.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let t=0;t<e.length;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=I([]),this}remove(e,t){if(!e)return this;let n=this.data;const i=this.toBBox(e),o=[],r=[];let a,A,c;for(;n||o.length;){if(n||(n=o.pop(),A=o[o.length-1],a=r.pop(),c=!0),n.leaf){const i=s(e,n.children,t);if(-1!==i)return n.children.splice(i,1),o.push(n),this._condense(o),this}c||n.leaf||!m(n,i)?A?(a++,n=A.children[a],c=!1):n=null:(o.push(n),r.push(a),a=0,A=n,n=n.children[0])}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){const o=n-t+1;let r,a=this._maxEntries;if(o<=a)return r=I(e.slice(t,n+1)),A(r,this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),r=I([]),r.leaf=!1,r.height=i;const s=Math.ceil(o/a),c=s*Math.ceil(Math.sqrt(a));E(e,t,n,c,this.compareMinX);for(let o=t;o<=n;o+=c){const t=Math.min(o+c-1,n);E(e,o,t,s,this.compareMinY);for(let n=o;n<=t;n+=s){const o=Math.min(n+s-1,t);r.children.push(this._build(e,n,o,i-1))}}return A(r,this.toBBox),r}_chooseSubtree(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){let n,i=1/0,o=1/0;for(let r=0;r<t.children.length;r++){const a=t.children[r],s=h(a),A=f(e,a)-s;A<o?(o=A,i=s<i?s:i,n=a):A===o&&s<i&&(i=s,n=a)}t=n||t.children[0]}return t}_insert(e,t,n){const i=n?e:this.toBBox(e),o=[],r=this._chooseSubtree(i,this.data,t,o);for(r.children.push(e),l(r,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)}_split(e,t){const n=e[t],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);const r=this._chooseSplitIndex(n,o,i),a=I(n.children.splice(r,n.children.length-r));a.height=n.height,a.leaf=n.leaf,A(n,this.toBBox),A(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=I([e,t]),this.data.height=e.height+1,this.data.leaf=!1,A(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,o=1/0,r=1/0;for(let a=t;a<=n-t;a++){const t=c(e,0,a,this.toBBox),s=c(e,a,n,this.toBBox),A=p(t,s),l=h(t)+h(s);A<o?(o=A,i=a,r=l<r?l:r):A===o&&l<r&&(r=l,i=a)}return i||n-t}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:u,o=e.leaf?this.compareMinY:d;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,o)&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const o=this.toBBox,r=c(e,0,t,o),a=c(e,n-t,n,o);let s=g(r)+g(a);for(let i=t;i<n-t;i++){const t=e.children[i];l(r,e.leaf?o(t):t),s+=g(r)}for(let i=n-t-1;i>=t;i--){const t=e.children[i];l(a,e.leaf?o(t):t),s+=g(a)}return s}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)l(t[i],e)}_condense(e){for(let t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children,t.splice(t.indexOf(e[n]),1)):this.clear():A(e[n],this.toBBox)}}function s(e,t,n){if(!n)return t.indexOf(e);for(let i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function A(e,t){c(e,0,e.children.length,t,e)}function c(e,t,n,i,o){o||(o=I(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let r=t;r<n;r++){const t=e.children[r];l(o,e.leaf?i(t):t)}return o}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function d(e,t){return e.minY-t.minY}function h(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function g(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function p(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),o=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,o-n)*Math.max(0,r-i)}function m(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function _(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function I(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(e,t,n,o,r){const a=[t,n];for(;a.length;){if((n=a.pop())-(t=a.pop())<=o)continue;const s=t+Math.ceil((n-t)/o/2)*o;i(e,s,t,n,r),a.push(t,s,s,n)}}var y=n(369031);function C(){this._tree=new a}function b(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.id=""}function B(e,t){return e.id===t.id}b.fromRectangleAndId=function(e,t,n){return n.minX=t.west,n.minY=t.south,n.maxX=t.east,n.maxY=t.north,n.id=e,n},C.prototype.insert=function(e,t){y.A.typeOf.string("id",e),y.A.typeOf.object("rectangle",t);const n=b.fromRectangleAndId(e,t,new b);this._tree.insert(n)};const v=new b;C.prototype.remove=function(e,t){y.A.typeOf.string("id",e),y.A.typeOf.object("rectangle",t);const n=b.fromRectangleAndId(e,t,v);this._tree.remove(n,B)};const w=new b;C.prototype.collides=function(e){y.A.typeOf.object("rectangle",e);const t=b.fromRectangleAndId("",e,w);return this._tree.collides(t)};const T=C},844610:(e,t,n)=>{"use strict";n.d(t,{A:()=>re});var i=n(660662),o=n(434067),r=n(267980),a=n(336946),s=n(369031),A=n(571804),c=n(915325),l=n(491446),u=n(605971),d=n(610750),h=n(944479),g=n(305439),f=n(46362),p=n(75200),m=n(794554),_=n(34233),I=n(874915),E=n(367817),y=n(463298),C=n(331185),b=n(576770),B=n(402330),v=n(99479),w=n(697422),T=n(512827),S=n(769534);const x=new r.A,D=new r.A,Q=new r.A,N=new r.A,R=new w.A,M=new o.A,L=new i.A,P=new i.A;function O(e,t){const n=new h.A({attributes:new f.A,primitiveType:B.A.TRIANGLES});return n.attributes.position=new g.A({componentDatatype:A.A.DOUBLE,componentsPerAttribute:3,values:t.positions}),e.normal&&(n.attributes.normal=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:t.normals})),e.tangent&&(n.attributes.tangent=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:t.tangents})),e.bitangent&&(n.attributes.bitangent=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:t.bitangents})),n}const F=new r.A,U=new r.A;function k(e,t){const n=e._vertexFormat,i=e._ellipsoid,o=t.height,a=t.width,s=t.northCap,c=t.southCap;let l=0,u=o,d=o,h=0;s&&(l=1,d-=1,h+=1),c&&(u-=1,d-=1,h+=1),h+=a*d;const f=n.position?new Float64Array(3*h):void 0,p=n.st?new Float32Array(2*h):void 0;let m=0,_=0;const E=x,y=M;let b=Number.MAX_VALUE,B=Number.MAX_VALUE,v=-Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let e=l;e<u;++e)for(let o=0;o<a;++o)T.A.computePosition(t,i,n.st,e,o,E,y),f[m++]=E.x,f[m++]=E.y,f[m++]=E.z,n.st&&(p[_++]=y.x,p[_++]=y.y,b=Math.min(b,y.x),B=Math.min(B,y.y),v=Math.max(v,y.x),w=Math.max(w,y.y));if(s&&(T.A.computePosition(t,i,n.st,0,0,E,y),f[m++]=E.x,f[m++]=E.y,f[m++]=E.z,n.st&&(p[_++]=y.x,p[_++]=y.y,b=y.x,B=y.y,v=y.x,w=y.y)),c&&(T.A.computePosition(t,i,n.st,o-1,0,E,y),f[m++]=E.x,f[m++]=E.y,f[m]=E.z,n.st&&(p[_++]=y.x,p[_]=y.y,b=Math.min(b,y.x),B=Math.min(B,y.y),v=Math.max(v,y.x),w=Math.max(w,y.y))),n.st&&(b<0||B<0||v>1||w>1))for(let e=0;e<p.length;e+=2)p[e]=(p[e]-b)/(v-b),p[e+1]=(p[e+1]-B)/(w-B);const S=function(e,t,n,i){const o=e.length,a=t.normal?new Float32Array(o):void 0,s=t.tangent?new Float32Array(o):void 0,A=t.bitangent?new Float32Array(o):void 0;let c=0;const l=N,u=Q;let d=D;if(t.normal||t.tangent||t.bitangent)for(let h=0;h<o;h+=3){const o=r.A.fromArray(e,h,x),g=c+1,f=c+2;d=n.geodeticSurfaceNormal(o,d),(t.tangent||t.bitangent)&&(r.A.cross(r.A.UNIT_Z,d,u),C.A.multiplyByVector(i,u,u),r.A.normalize(u,u),t.bitangent&&r.A.normalize(r.A.cross(d,u,l),l)),t.normal&&(a[c]=d.x,a[g]=d.y,a[f]=d.z),t.tangent&&(s[c]=u.x,s[g]=u.y,s[f]=u.z),t.bitangent&&(A[c]=l.x,A[g]=l.y,A[f]=l.z),c+=3}return O(t,{positions:e,normals:a,tangents:s,bitangents:A})}(f,n,i,t.tangentRotationMatrix);let R=6*(a-1)*(d-1);s&&(R+=3*(a-1)),c&&(R+=3*(a-1));const L=I.A.createTypedArray(h,R);let P,F=0,U=0;for(P=0;P<d-1;++P){for(let e=0;e<a-1;++e){const e=F,t=e+a,n=t+1,i=e+1;L[U++]=e,L[U++]=t,L[U++]=i,L[U++]=i,L[U++]=t,L[U++]=n,++F}++F}if(s||c){let e=h-1;const t=h-1;let n,i;if(s&&c&&(e=h-2),F=0,s)for(P=0;P<a-1;P++)n=F,i=n+1,L[U++]=e,L[U++]=n,L[U++]=i,++F;if(c)for(F=(d-1)*a,P=0;P<a-1;P++)n=F,i=n+1,L[U++]=n,L[U++]=t,L[U++]=i,++F}return S.indices=L,n.st&&(S.attributes.st=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:p})),S}function G(e,t,n,i,o){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n+2],e[t++]=o[n],e[t++]=o[n+1],e[t]=o[n+2],e}function H(e,t,n,i){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n],e[t]=i[n+1],e}const V=new S.A;const z=[new r.A,new r.A,new r.A,new r.A],j=new a.A,Y=new a.A;function q(e,t,n,i,o){if(0===n)return w.A.clone(e,o);const r=T.A.computeOptions(e,t,n,0,R,j),a=r.height,s=r.width,A=z;return T.A.computePosition(r,i,!1,0,0,A[0]),T.A.computePosition(r,i,!1,0,s-1,A[1]),T.A.computePosition(r,i,!1,a-1,0,A[2]),T.A.computePosition(r,i,!1,a-1,s-1,A[3]),w.A.fromCartesianArray(A,i,o)}function W(e){const t=(e=e??c.A.EMPTY_OBJECT).rectangle;if(s.A.typeOf.object("rectangle",t),w.A._validate(t),t.north<t.south)throw new u.A("options.rectangle.north must be greater than or equal to options.rectangle.south");const n=e.height??0,i=e.extrudedHeight??n;this._rectangle=w.A.clone(t),this._granularity=e.granularity??E.A.RADIANS_PER_DEGREE,this._ellipsoid=d.A.clone(e.ellipsoid??d.A.default),this._surfaceHeight=Math.max(n,i),this._rotation=e.rotation??0,this._stRotation=e.stRotation??0,this._vertexFormat=S.A.clone(e.vertexFormat??S.A.DEFAULT),this._extrudedHeight=Math.min(n,i),this._shadowVolume=e.shadowVolume??!1,this._workerName="createRectangleGeometry",this._offsetAttribute=e.offsetAttribute,this._rotatedRectangle=void 0,this._textureCoordinateRotationPoints=void 0}W.packedLength=w.A.packedLength+d.A.packedLength+S.A.packedLength+7,W.pack=function(e,t,n){return s.A.typeOf.object("value",e),s.A.defined("array",t),n=n??0,w.A.pack(e._rectangle,t,n),n+=w.A.packedLength,d.A.pack(e._ellipsoid,t,n),n+=d.A.packedLength,S.A.pack(e._vertexFormat,t,n),n+=S.A.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=e._offsetAttribute??-1,t};const J=new w.A,K=d.A.clone(d.A.UNIT_SPHERE),X={rectangle:J,ellipsoid:K,vertexFormat:V,granularity:void 0,height:void 0,rotation:void 0,stRotation:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};W.unpack=function(e,t,n){s.A.defined("array",e),t=t??0;const i=w.A.unpack(e,t,J);t+=w.A.packedLength;const o=d.A.unpack(e,t,K);t+=d.A.packedLength;const r=S.A.unpack(e,t,V);t+=S.A.packedLength;const a=e[t++],A=e[t++],c=e[t++],u=e[t++],h=e[t++],g=1===e[t++],f=e[t];return(0,l.A)(n)?(n._rectangle=w.A.clone(i,n._rectangle),n._ellipsoid=d.A.clone(o,n._ellipsoid),n._vertexFormat=S.A.clone(r,n._vertexFormat),n._granularity=a,n._surfaceHeight=A,n._rotation=c,n._stRotation=u,n._extrudedHeight=h,n._shadowVolume=g,n._offsetAttribute=-1===f?void 0:f,n):(X.granularity=a,X.height=A,X.rotation=c,X.stRotation=u,X.extrudedHeight=h,X.shadowVolume=g,X.offsetAttribute=-1===f?void 0:f,new W(X))},W.computeRectangle=function(e,t){const n=(e=e??c.A.EMPTY_OBJECT).rectangle;if(s.A.typeOf.object("rectangle",n),w.A._validate(n),n.north<n.south)throw new u.A("options.rectangle.north must be greater than or equal to options.rectangle.south");const i=e.granularity??E.A.RADIANS_PER_DEGREE,o=e.ellipsoid??d.A.default;return q(n,i,e.rotation??0,o,t)};const Z=new C.A,$=new v.A,ee=new a.A;W.createGeometry=function(e){if(E.A.equalsEpsilon(e._rectangle.north,e._rectangle.south,E.A.EPSILON10)||E.A.equalsEpsilon(e._rectangle.east,e._rectangle.west,E.A.EPSILON10))return;let t=e._rectangle;const n=e._ellipsoid,o=e._rotation,a=e._stRotation,s=e._vertexFormat,c=T.A.computeOptions(t,e._granularity,o,a,R,j,Y),u=Z;if(0!==a||0!==o){const e=w.A.center(t,ee),i=n.geodeticSurfaceNormalCartographic(e,F);v.A.fromAxisAngle(i,-a,$),C.A.fromQuaternion($,u)}else C.A.clone(C.A.IDENTITY,u);const d=e._surfaceHeight,f=e._extrudedHeight,y=!E.A.equalsEpsilon(d,f,0,E.A.EPSILON2);let B,M;if(c.lonScalar=1/e._rectangle.width,c.latScalar=1/e._rectangle.height,c.tangentRotationMatrix=u,t=e._rectangle,y){B=function(e,t){const n=e._shadowVolume,i=e._offsetAttribute,o=e._vertexFormat,a=e._extrudedHeight,s=e._surfaceHeight,c=e._ellipsoid,u=t.height,d=t.width;let h;if(n){const t=S.A.clone(o,V);t.normal=!0,e._vertexFormat=t}const f=k(e,t);n&&(e._vertexFormat=o);let y=b.A.scaleToGeodeticHeight(f.attributes.position.values,s,c,!1);y=new Float64Array(y);let C=y.length;const B=2*C,v=new Float64Array(B);v.set(y);const w=b.A.scaleToGeodeticHeight(f.attributes.position.values,a,c);v.set(w,C),f.attributes.position.values=v;const T=o.normal?new Float32Array(B):void 0,R=o.tangent?new Float32Array(B):void 0,M=o.bitangent?new Float32Array(B):void 0,L=o.st?new Float32Array(B/3*2):void 0;let P,z,j;if(o.normal){for(z=f.attributes.normal.values,T.set(z),h=0;h<C;h++)z[h]=-z[h];T.set(z,C),f.attributes.normal.values=T}if(n){z=f.attributes.normal.values,o.normal||(f.attributes.normal=void 0);const e=new Float32Array(B);for(h=0;h<C;h++)z[h]=-z[h];e.set(z,C),f.attributes.extrudeDirection=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:e})}const Y=(0,l.A)(i);if(Y){const e=C/3*2;let t=new Uint8Array(e);i===m.A.TOP?t=t.fill(1,0,e/2):(j=i===m.A.NONE?0:1,t=t.fill(j)),f.attributes.applyOffset=new g.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}if(o.tangent){const e=f.attributes.tangent.values;for(R.set(e),h=0;h<C;h++)e[h]=-e[h];R.set(e,C),f.attributes.tangent.values=R}if(o.bitangent){const e=f.attributes.bitangent.values;M.set(e),M.set(e,C),f.attributes.bitangent.values=M}o.st&&(P=f.attributes.st.values,L.set(P),L.set(P,C/3*2),f.attributes.st.values=L);const q=f.indices,W=q.length,J=C/3,K=I.A.createTypedArray(B/3,2*W);for(K.set(q),h=0;h<W;h+=3)K[h+W]=q[h+2]+J,K[h+1+W]=q[h+1]+J,K[h+2+W]=q[h]+J;f.indices=K;const X=t.northCap,Z=t.southCap;let $=u,ee=2,te=0,ne=4,ie=4;X&&(ee-=1,$-=1,te+=1,ne-=2,ie-=1),Z&&(ee-=1,$-=1,te+=1,ne-=2,ie-=1),te+=ee*d+2*$-ne;const oe=2*(te+ie);let re=new Float64Array(3*oe);const ae=n?new Float32Array(3*oe):void 0;let se=Y?new Uint8Array(oe):void 0,Ae=o.st?new Float32Array(2*oe):void 0;const ce=i===m.A.TOP;Y&&!ce&&(j=i===m.A.ALL?1:0,se=se.fill(j));let le=0,ue=0,de=0,he=0;const ge=d*$;let fe;for(h=0;h<ge;h+=d)fe=3*h,re=G(re,le,fe,y,w),le+=6,o.st&&(Ae=H(Ae,ue,2*h,P),ue+=4),n&&(de+=3,ae[de++]=z[fe],ae[de++]=z[fe+1],ae[de++]=z[fe+2]),ce&&(se[he++]=1,he+=1);if(Z){const e=X?ge+1:ge;for(fe=3*e,h=0;h<2;h++)re=G(re,le,fe,y,w),le+=6,o.st&&(Ae=H(Ae,ue,2*e,P),ue+=4),n&&(de+=3,ae[de++]=z[fe],ae[de++]=z[fe+1],ae[de++]=z[fe+2]),ce&&(se[he++]=1,he+=1)}else for(h=ge-d;h<ge;h++)fe=3*h,re=G(re,le,fe,y,w),le+=6,o.st&&(Ae=H(Ae,ue,2*h,P),ue+=4),n&&(de+=3,ae[de++]=z[fe],ae[de++]=z[fe+1],ae[de++]=z[fe+2]),ce&&(se[he++]=1,he+=1);for(h=ge-1;h>0;h-=d)fe=3*h,re=G(re,le,fe,y,w),le+=6,o.st&&(Ae=H(Ae,ue,2*h,P),ue+=4),n&&(de+=3,ae[de++]=z[fe],ae[de++]=z[fe+1],ae[de++]=z[fe+2]),ce&&(se[he++]=1,he+=1);if(X){const e=ge;for(fe=3*e,h=0;h<2;h++)re=G(re,le,fe,y,w),le+=6,o.st&&(Ae=H(Ae,ue,2*e,P),ue+=4),n&&(de+=3,ae[de++]=z[fe],ae[de++]=z[fe+1],ae[de++]=z[fe+2]),ce&&(se[he++]=1,he+=1)}else for(h=d-1;h>=0;h--)fe=3*h,re=G(re,le,fe,y,w),le+=6,o.st&&(Ae=H(Ae,ue,2*h,P),ue+=4),n&&(de+=3,ae[de++]=z[fe],ae[de++]=z[fe+1],ae[de++]=z[fe+2]),ce&&(se[he++]=1,he+=1);let pe=function(e,t,n){const i=e.length,o=t.normal?new Float32Array(i):void 0,a=t.tangent?new Float32Array(i):void 0,s=t.bitangent?new Float32Array(i):void 0;let A=0,c=0,l=0,u=!0,d=N,h=Q,g=D;if(t.normal||t.tangent||t.bitangent)for(let f=0;f<i;f+=6){const p=r.A.fromArray(e,f,x),m=r.A.fromArray(e,(f+6)%i,F);if(u){const t=r.A.fromArray(e,(f+3)%i,U);r.A.subtract(m,p,m),r.A.subtract(t,p,t),g=r.A.normalize(r.A.cross(t,m,g),g),u=!1}r.A.equalsEpsilon(m,p,E.A.EPSILON10)&&(u=!0),(t.tangent||t.bitangent)&&(d=n.geodeticSurfaceNormal(p,d),t.tangent&&(h=r.A.normalize(r.A.cross(d,g,h),h))),t.normal&&(o[A++]=g.x,o[A++]=g.y,o[A++]=g.z,o[A++]=g.x,o[A++]=g.y,o[A++]=g.z),t.tangent&&(a[c++]=h.x,a[c++]=h.y,a[c++]=h.z,a[c++]=h.x,a[c++]=h.y,a[c++]=h.z),t.bitangent&&(s[l++]=d.x,s[l++]=d.y,s[l++]=d.z,s[l++]=d.x,s[l++]=d.y,s[l++]=d.z)}return O(t,{positions:e,normals:o,tangents:a,bitangents:s})}(re,o,c);o.st&&(pe.attributes.st=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:Ae})),n&&(pe.attributes.extrudeDirection=new g.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:3,values:ae})),Y&&(pe.attributes.applyOffset=new g.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:se}));const me=I.A.createTypedArray(oe,6*te);let _e,Ie,Ee,ye;C=re.length/3;let Ce=0;for(h=0;h<C-1;h+=2){_e=h,ye=(_e+2)%C;const e=r.A.fromArray(re,3*_e,F),t=r.A.fromArray(re,3*ye,U);r.A.equalsEpsilon(e,t,E.A.EPSILON10)||(Ie=(_e+1)%C,Ee=(Ie+2)%C,me[Ce++]=_e,me[Ce++]=Ie,me[Ce++]=ye,me[Ce++]=ye,me[Ce++]=Ie,me[Ce++]=Ee)}return pe.indices=me,pe=_.A.combineInstances([new p.A({geometry:f}),new p.A({geometry:pe})]),pe[0]}(e,c);const o=i.A.fromRectangle3D(t,n,d,P),a=i.A.fromRectangle3D(t,n,f,L);M=i.A.union(o,a)}else{if(B=k(e,c),B.attributes.position.values=b.A.scaleToGeodeticHeight(B.attributes.position.values,d,n,!1),(0,l.A)(e._offsetAttribute)){const t=B.attributes.position.values.length,n=e._offsetAttribute===m.A.NONE?0:1,i=new Uint8Array(t/3).fill(n);B.attributes.applyOffset=new g.A({componentDatatype:A.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}M=i.A.fromRectangle3D(t,n,d)}return s.position||delete B.attributes.position,new h.A({attributes:B.attributes,indices:B.indices,primitiveType:B.primitiveType,boundingSphere:M,offsetAttribute:e._offsetAttribute})},W.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new W({rectangle:e._rectangle,rotation:e._rotation,ellipsoid:o,stRotation:e._stRotation,granularity:i,extrudedHeight:a,height:r,vertexFormat:S.A.POSITION_ONLY,shadowVolume:!0})};const te=new w.A,ne=[new o.A,new o.A,new o.A],ie=new y.A,oe=new a.A;Object.defineProperties(W.prototype,{rectangle:{get:function(){return(0,l.A)(this._rotatedRectangle)||(this._rotatedRectangle=q(this._rectangle,this._granularity,this._rotation,this._ellipsoid)),this._rotatedRectangle}},textureCoordinateRotationPoints:{get:function(){return(0,l.A)(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(e){if(0===e._stRotation)return[0,0,0,1,1,0];const t=w.A.clone(e._rectangle,te),n=e._granularity,i=e._ellipsoid,r=q(t,n,e._rotation-e._stRotation,i,te),a=ne;a[0].x=r.west,a[0].y=r.south,a[1].x=r.west,a[1].y=r.north,a[2].x=r.east,a[2].y=r.south;const s=e.rectangle,A=y.A.fromRotation(e._stRotation,ie),c=w.A.center(s,oe);for(let e=0;e<3;++e){const t=a[e];t.x-=c.longitude,t.y-=c.latitude,y.A.multiplyByVector(A,t,t),t.x+=c.longitude,t.y+=c.latitude,t.x=(t.x-s.west)/s.width,t.y=(t.y-s.south)/s.height}const l=a[0],u=a[1],d=a[2],h=new Array(6);return o.A.pack(l,h),o.A.pack(u,h,2),o.A.pack(d,h,4),h}(this)),this._textureCoordinateRotationPoints}}});const re=W},512827:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(267980),o=n(336946),r=n(491446),a=n(605971),s=n(610750),A=n(653577),c=n(367817),l=n(463298),u=n(697422);const d=Math.cos,h=Math.sin,g=Math.sqrt,f={computePosition:function(e,t,n,i,o,a,s){const A=t.radiiSquared,c=e.nwCorner,l=e.boundingRectangle;let u=c.latitude-e.granYCos*i+o*e.granXSin;const f=d(u),p=h(u),m=A.z*p;let _=c.longitude+i*e.granYSin+o*e.granXCos;const I=f*d(_),E=f*h(_),y=A.x*I,C=A.y*E,b=g(y*I+C*E+m*p);if(a.x=y/b,a.y=C/b,a.z=m/b,n){const t=e.stNwCorner;(0,r.A)(t)?(u=t.latitude-e.stGranYCos*i+o*e.stGranXSin,_=t.longitude+i*e.stGranYSin+o*e.stGranXCos,s.x=(_-e.stWest)*e.lonScalar,s.y=(u-e.stSouth)*e.latScalar):(s.x=(_-l.west)*e.lonScalar,s.y=(u-l.south)*e.latScalar)}}},p=new l.A;let m=new i.A;const _=new o.A;let I=new i.A;const E=new A.A;function y(e,t,n,o,r,a,A){const c=Math.cos(t),u=o*c,d=n*c,h=Math.sin(t),g=o*h,f=n*h;E._ellipsoid=s.A.default,m=E.project(e,m),m=i.A.subtract(m,I,m);const _=l.A.fromRotation(t,p);m=l.A.multiplyByVector(_,m,m),m=i.A.add(m,I,m),a-=1,A-=1;const y=(e=E.unproject(m,e)).latitude,C=y+a*f,b=y-u*A,B=y-u*A+a*f,v=Math.max(y,C,b,B),w=Math.min(y,C,b,B),T=e.longitude,S=T+a*d,x=T+A*g,D=T+A*g+a*d;return{north:v,south:w,east:Math.max(T,S,x,D),west:Math.min(T,S,x,D),granYCos:u,granYSin:g,granXCos:d,granXSin:f,nwCorner:e}}f.computeOptions=function(e,t,n,i,o,r,A){let l,d=e.east,h=e.west,g=e.north,f=e.south,p=!1,m=!1;g===c.A.PI_OVER_TWO&&(p=!0),f===-c.A.PI_OVER_TWO&&(m=!0);const C=g-f;l=h>d?c.A.TWO_PI-h+d:d-h;const b=Math.ceil(l/t)+1,B=Math.ceil(C/t)+1,v=l/(b-1),w=C/(B-1),T=u.A.northwest(e,r),S=u.A.center(e,_);0===n&&0===i||(S.longitude<T.longitude&&(S.longitude+=c.A.TWO_PI),E._ellipsoid=s.A.default,I=E.project(S,I));const x=w,D=v,Q=u.A.clone(e,o),N={granYCos:x,granYSin:0,granXCos:D,granXSin:0,nwCorner:T,boundingRectangle:Q,width:b,height:B,northCap:p,southCap:m};if(0!==n){const e=y(T,n,v,w,0,b,B);if(g=e.north,f=e.south,d=e.east,h=e.west,g<-c.A.PI_OVER_TWO||g>c.A.PI_OVER_TWO||f<-c.A.PI_OVER_TWO||f>c.A.PI_OVER_TWO)throw new a.A("Rotated rectangle is invalid.  It crosses over either the north or south pole.");N.granYCos=e.granYCos,N.granYSin=e.granYSin,N.granXCos=e.granXCos,N.granXSin=e.granXSin,Q.north=g,Q.south=f,Q.east=d,Q.west=h}if(0!==i){n-=i;const e=u.A.northwest(Q,A),t=y(e,n,v,w,0,b,B);N.stGranYCos=t.granYCos,N.stGranXCos=t.granXCos,N.stGranYSin=t.granYSin,N.stGranXSin=t.granXSin,N.stNwCorner=e,N.stWest=t.west,N.stSouth=t.south}return N};const C=f},406882:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var i=n(660662),o=n(267980),r=n(336946),a=n(571804),s=n(915325),A=n(491446),c=n(605971),l=n(610750),u=n(944479),d=n(305439),h=n(46362),g=n(794554),f=n(874915),p=n(367817),m=n(576770),_=n(402330),I=n(697422),E=n(512827);const y=new i.A,C=new i.A,b=new o.A,B=new I.A;function v(e,t){const n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,s=t.southCap;let A=i,c=2,l=0,g=4;r&&(c-=1,A-=1,l+=1,g-=2),s&&(c-=1,A-=1,l+=1,g-=2),l+=c*o+2*A-g;const p=new Float64Array(3*l);let m,I=0,y=0;const C=b;if(r)E.A.computePosition(t,n,!1,y,0,C),p[I++]=C.x,p[I++]=C.y,p[I++]=C.z;else for(m=0;m<o;m++)E.A.computePosition(t,n,!1,y,m,C),p[I++]=C.x,p[I++]=C.y,p[I++]=C.z;for(m=o-1,y=1;y<i;y++)E.A.computePosition(t,n,!1,y,m,C),p[I++]=C.x,p[I++]=C.y,p[I++]=C.z;if(y=i-1,!s)for(m=o-2;m>=0;m--)E.A.computePosition(t,n,!1,y,m,C),p[I++]=C.x,p[I++]=C.y,p[I++]=C.z;for(m=0,y=i-2;y>0;y--)E.A.computePosition(t,n,!1,y,m,C),p[I++]=C.x,p[I++]=C.y,p[I++]=C.z;const B=p.length/3*2,v=f.A.createTypedArray(p.length/3,B);let w=0;for(let e=0;e<p.length/3-1;e++)v[w++]=e,v[w++]=e+1;v[w++]=p.length/3-1,v[w++]=0;const T=new u.A({attributes:new h.A,primitiveType:_.A.LINES});return T.attributes.position=new d.A({componentDatatype:a.A.DOUBLE,componentsPerAttribute:3,values:p}),T.indices=v,T}function w(e){const t=(e=e??s.A.EMPTY_OBJECT).rectangle,n=e.granularity??p.A.RADIANS_PER_DEGREE,i=e.ellipsoid??l.A.default,o=e.rotation??0;if(!(0,A.A)(t))throw new c.A("rectangle is required.");if(I.A._validate(t),t.north<t.south)throw new c.A("options.rectangle.north must be greater than options.rectangle.south");const r=e.height??0,a=e.extrudedHeight??r;this._rectangle=I.A.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(r,a),this._rotation=o,this._extrudedHeight=Math.min(r,a),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}w.packedLength=I.A.packedLength+l.A.packedLength+5,w.pack=function(e,t,n){if(!(0,A.A)(e))throw new c.A("value is required");if(!(0,A.A)(t))throw new c.A("array is required");return n=n??0,I.A.pack(e._rectangle,t,n),n+=I.A.packedLength,l.A.pack(e._ellipsoid,t,n),n+=l.A.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=e._offsetAttribute??-1,t};const T=new I.A,S=l.A.clone(l.A.UNIT_SPHERE),x={rectangle:T,ellipsoid:S,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};w.unpack=function(e,t,n){if(!(0,A.A)(e))throw new c.A("array is required");t=t??0;const i=I.A.unpack(e,t,T);t+=I.A.packedLength;const o=l.A.unpack(e,t,S);t+=l.A.packedLength;const r=e[t++],a=e[t++],s=e[t++],u=e[t++],d=e[t];return(0,A.A)(n)?(n._rectangle=I.A.clone(i,n._rectangle),n._ellipsoid=l.A.clone(o,n._ellipsoid),n._surfaceHeight=a,n._rotation=s,n._extrudedHeight=u,n._offsetAttribute=-1===d?void 0:d,n):(x.granularity=r,x.height=a,x.rotation=s,x.extrudedHeight=u,x.offsetAttribute=-1===d?void 0:d,new w(x))};const D=new r.A;w.createGeometry=function(e){const t=e._rectangle,n=e._ellipsoid,o=E.A.computeOptions(t,e._granularity,e._rotation,0,B,D);let r,s;if(p.A.equalsEpsilon(t.north,t.south,p.A.EPSILON10)||p.A.equalsEpsilon(t.east,t.west,p.A.EPSILON10))return;const c=e._surfaceHeight,l=e._extrudedHeight;let h;if(p.A.equalsEpsilon(c,l,0,p.A.EPSILON2)){if(r=v(e,o),r.attributes.position.values=m.A.scaleToGeodeticHeight(r.attributes.position.values,c,n,!1),(0,A.A)(e._offsetAttribute)){const t=r.attributes.position.values.length;h=e._offsetAttribute===g.A.NONE?0:1;const n=new Uint8Array(t/3).fill(h);r.attributes.applyOffset=new d.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}s=i.A.fromRectangle3D(t,n,c)}else{if(r=function(e,t){const n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=v(e,t),a=t.height,s=t.width,A=m.A.scaleToGeodeticHeight(r.attributes.position.values,n,o,!1);let c=A.length;const l=new Float64Array(2*c);l.set(A);const u=m.A.scaleToGeodeticHeight(r.attributes.position.values,i,o);l.set(u,c),r.attributes.position.values=l;const d=t.northCap,h=t.southCap;let g=4;d&&(g-=1),h&&(g-=1);const p=2*(l.length/3+g),_=f.A.createTypedArray(l.length/3,p);c=l.length/6;let I,E=0;for(let e=0;e<c-1;e++)_[E++]=e,_[E++]=e+1,_[E++]=e+c,_[E++]=e+c+1;if(_[E++]=c-1,_[E++]=0,_[E++]=c+c-1,_[E++]=c,_[E++]=0,_[E++]=c,d)I=a-1;else{const e=s-1;_[E++]=e,_[E++]=e+c,I=s+a-2}if(_[E++]=I,_[E++]=I+c,!h){const e=s+I-1;_[E++]=e,_[E]=e+c}return r.indices=_,r}(e,o),(0,A.A)(e._offsetAttribute)){const t=r.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===g.A.TOP?n=n.fill(1,0,t/2):(h=e._offsetAttribute===g.A.NONE?0:1,n=n.fill(h)),r.attributes.applyOffset=new d.A({componentDatatype:a.A.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}const u=i.A.fromRectangle3D(t,n,c,C),p=i.A.fromRectangle3D(t,n,l,y);s=i.A.union(u,p)}return new u.A({attributes:r.attributes,indices:r.indices,primitiveType:_.A.LINES,boundingSphere:s,offsetAttribute:e._offsetAttribute})};const Q=w},252538:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(267980),o=n(336946),r=n(369031),a=n(491446),s=n(605971),A=n(610750),c=n(520098),l=n(123245);const u=[],d=[],h=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],g=[1,0,0,3];function f(e){if(!c.A.supportsBigInt())throw new l.A("S2 required BigInt support");if(!(0,a.A)(e))throw new s.A("cell ID is required.");if(!f.isValidId(e))throw new s.A("cell ID is invalid.");this._cellId=e,this._level=f.getLevel(e)}function p(e){0===u.length&&(y(0,0,0,0,0,0),y(0,0,0,1,0,1),y(0,0,0,2,0,2),y(0,0,0,3,0,3));const t=Number(e>>BigInt(61));let n=1&t,i=0,o=0;for(let t=7;t>=0;t--){const r=(1<<2*(7===t?2:4))-1;n+=Number(e>>BigInt(2*t*4+1)&BigInt(r))<<2,n=d[n];const a=4*t;i+=n>>6<<a,o+=(n>>2&15)<<a,n&=3}return[t,i,o]}function m(e,t,n){switch(e){case 0:return new i.A(1,t,n);case 1:return new i.A(-t,1,n);case 2:return new i.A(-t,-n,1);case 3:return new i.A(-1,-n,-t);case 4:return new i.A(n,-1,-t);default:return new i.A(n,t,-1)}}function _(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function I(e){return 1/2147483648*e}function E(e){return 1/1073741824*e}function y(e,t,n,i,o,r){if(4===e){const e=(t<<4)+n;u[(e<<2)+i]=(o<<2)+r,d[(o<<2)+i]=(e<<2)+r}else{e++,n<<=1,o<<=2;const a=h[r];y(e,(t<<=1)+(a[0]>>1),n+(1&a[0]),i,o,r^g[0]),y(e,t+(a[1]>>1),n+(1&a[1]),i,o+1,r^g[1]),y(e,t+(a[2]>>1),n+(1&a[2]),i,o+2,r^g[2]),y(e,t+(a[3]>>1),n+(1&a[3]),i,o+3,r^g[3])}}function C(e){return e&~e+BigInt(1)}f.fromToken=function(e){if(r.A.typeOf.string("token",e),!f.isValidToken(e))throw new s.A("token is invalid.");return new f(f.getIdFromToken(e))},f.isValidId=function(e){return r.A.typeOf.bigint("cellId",e),!(e<=0)&&(!(e>>BigInt(61)>5)&&!!(e&~e+BigInt(1)&BigInt("0x1555555555555555")))},f.isValidToken=function(e){return r.A.typeOf.string("token",e),!!/^[0-9a-fA-F]{1,16}$/.test(e)&&f.isValidId(f.getIdFromToken(e))},f.getIdFromToken=function(e){return r.A.typeOf.string("token",e),BigInt("0x"+e+"0".repeat(16-e.length))},f.getTokenFromId=function(e){r.A.typeOf.bigint("cellId",e);const t=Math.floor(b[(-(n=e)&n)%BigInt(67)]/4);var n;const i=e.toString(16).replace(/0*$/,"");return Array(17-t-i.length).join("0")+i},f.getLevel=function(e){if(r.A.typeOf.bigint("cellId",e),!f.isValidId(e))throw new s.A;let t=0;for(;e!==BigInt(0)&&!(e&BigInt(1));)t++,e>>=BigInt(1);return 30-(t>>1)},f.prototype.getChild=function(e){if(r.A.typeOf.number("index",e),e<0||e>3)throw new s.A("child index must be in the range [0-3].");if(30===this._level)throw new s.A("cannot get child of leaf cell.");const t=C(this._cellId)>>BigInt(2);return new f(this._cellId+BigInt(2*e+1-4)*t)},f.prototype.getParent=function(){if(0===this._level)throw new s.A("cannot get parent of root cell.");const e=C(this._cellId)<<BigInt(2);return new f(this._cellId&~e+BigInt(1)|e)},f.prototype.getParentAtLevel=function(e){if(0===this._level||e<0||this._level<e)throw new s.A("cannot get parent at invalid level.");const t=function(e){return BigInt(1)<<BigInt(2*(30-e))}(e);return new f(this._cellId&-t|t)},f.prototype.getCenter=function(e){e=e??A.A.WGS84;let t=function(e,t){const n=function(e,t){const n=p(e),i=n[0],o=n[1],r=n[2],a=30===t,s=!a&&(BigInt(o)^e>>BigInt(2))&BigInt(1),A=a?1:s?2:0;return[i,(o<<1)+A,(r<<1)+A]}(e,t);return function(e,t,n){const i=I(t),o=I(n);return m(e,_(i),_(o))}(n[0],n[1],n[2])}(this._cellId,this._level);t=i.A.normalize(t,t);const n=new o.A.fromCartesian(t,A.A.UNIT_SPHERE);return o.A.toCartesian(n,e,new i.A)},f.prototype.getVertex=function(e,t){if(r.A.typeOf.number("index",e),e<0||e>3)throw new s.A("vertex index must be in the range [0-3].");t=t??A.A.WGS84;let n=function(e,t,n){const i=p(e),o=function(e,t){const n=[[],[]],i=function(e){return 1<<30-e>>>0}(t);for(let t=0;t<2;++t){const o=e[t]&-i,r=o+i;n[t][0]=_(E(o)),n[t][1]=_(E(r))}return n}([i[1],i[2]],t),r=n>>1&1;return m(i[0],o[0][r^1&n],o[1][r])}(this._cellId,this._level,e);n=i.A.normalize(n,n);const a=new o.A.fromCartesian(n,A.A.UNIT_SPHERE);return o.A.toCartesian(a,t,new i.A)},f.fromFacePositionLevel=function(e,t,n){if(r.A.typeOf.bigint("position",t),e<0||e>5)throw new s.A("Invalid S2 Face (must be within 0-5)");if(n<0||n>30)throw new s.A("Invalid level (must be within 0-30)");if(t<0||t>=Math.pow(4,n))throw new s.A("Invalid Hilbert position for level");const i=(e<4?"0":"")+(e<2?"0":"")+e.toString(2),o=t.toString(2),a=Array(2*n-o.length+1).join("0"),A=Array(61-2*n).join("0");return new f(BigInt(`0b${i}${a}${o}1${A}`))};const b=[64,0,1,39,2,15,40,23,3,12,16,59,41,19,24,54,4,64,13,10,17,62,60,28,42,30,20,51,25,44,55,47,5,32,65,38,14,22,11,58,18,53,63,9,61,27,29,50,43,46,31,37,21,57,52,8,26,49,45,36,56,7,48,35,6,34,33,0],B=f},708857:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(571804),o=n(491446),r=n(605971);function a(e){e=e??!0,this.value=a.toValue(e)}Object.defineProperties(a.prototype,{componentDatatype:{get:function(){return i.A.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!1}}}),a.toValue=function(e,t){if(!(0,o.A)(e))throw new r.A("show is required.");return(0,o.A)(t)?(t[0]=e,t):new Uint8Array([e])};const s=a},658542:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(267980),o=n(491446),r=n(605971),a=n(591978),s=n(367817),A=n(331185),c=n(711337),l=n(193387);const u={};function d(e,t){t=a.A.addSeconds(e,32.184,t);const n=a.A.totalDays(t)-2451545;return a.A.addSeconds(t,function(e){const t=6.239996+.0172019696544*e;return.001657*Math.sin(t+.01671*Math.sin(t))}(n),t)}const h=new a.A(2451545,0,l.A.TAI),g=s.A.RADIANS_PER_DEGREE,f=s.A.RADIANS_PER_ARCSECOND,p=new A.A;function m(e,t,n,a,c,l,u){if(n<0&&(n=-n,c+=s.A.PI),n<0||n>s.A.PI)throw new r.A("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");const d=e*(1-t),h=a-c,g=c,f=function(e,t){if(t<0||t>=1)throw new r.A("eccentricity out of range.");const n=function(e,t){if(t<0||t>=1)throw new r.A("eccentricity out of range.");const n=Math.floor(e/s.A.TWO_PI);let i,o=(e-=n*s.A.TWO_PI)+t*Math.sin(e)/(1-Math.sin(e+t)+Math.sin(e)),a=Number.MAX_VALUE;for(i=0;i<_&&Math.abs(a-o)>I;++i)a=o,o=a-(a-t*Math.sin(a)-e)/(1-t*Math.cos(a));if(i>=_)throw new r.A("Kepler equation did not converge");return a=o+n*s.A.TWO_PI,a}(e,t);return function(e,t){if(t<0||t>=1)throw new r.A("eccentricity out of range.");const n=Math.floor(e/s.A.TWO_PI);e-=n*s.A.TWO_PI;const i=Math.cos(e)-t,o=Math.sin(e)*Math.sqrt(1-t*t);let a=Math.atan2(o,i);return a=s.A.zeroToTwoPi(a),e<0&&(a-=s.A.TWO_PI),a+=n*s.A.TWO_PI,a}(n,t)}(l-a,t),m=function(e){if(e<0)throw new r.A("eccentricity cannot be negative.");return e<=0?"Circular":e<1?"Elliptical":e<=1?"Parabolic":"Hyperbolic"}(t);if("Hyperbolic"===m&&Math.abs(s.A.negativePiToPi(f))>=Math.acos(-1/t))throw new r.A("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");!function(e,t,n,i){if(t<0||t>s.A.PI)throw new r.A("inclination out of range");const a=Math.cos(e),c=Math.sin(e),l=Math.cos(t),u=Math.sin(t),d=Math.cos(n),h=Math.sin(n);(0,o.A)(i)?(i[0]=d*a-h*c*l,i[1]=h*a+d*c*l,i[2]=c*u,i[3]=-d*c-h*a*l,i[4]=-h*c+d*a*l,i[5]=a*u,i[6]=h*u,i[7]=-d*u,i[8]=l):i=new A.A(d*a-h*c*l,-d*c-h*a*l,h*u,h*a+d*c*l,-h*c+d*a*l,-d*u,c*u,a*u,l)}(h,n,g,p);const E=d*(1+t),y=Math.cos(f),C=Math.sin(f),b=1+t*y;if(b<=s.A.Epsilon10)throw new r.A("elements cannot be converted to cartesian");const B=E/b;return(0,o.A)(u)?(u.x=B*y,u.y=B*C,u.z=0):u=new i.A(B*y,B*C,0),A.A.multiplyByVector(p,u,u)}const _=50,I=s.A.EPSILON8,E=100.46645683*g,y=1295977422.83429*f,C=1e-7*-79,b=232*1e-7,B=1e-7*-52,v=1e-7*-116,w=new a.A(0,0,l.A.TAI);function T(e,t){d(e,w);const n=(w.dayNumber-h.dayNumber+(w.secondsOfDay-h.secondsOfDay)/c.A.SECONDS_PER_DAY)/c.A.DAYS_PER_JULIAN_CENTURY,i=n*n,o=i*n,r=o*n;let a=383397.7725+.004*n,s=.055545526-16e-9*n;const A=5.15668983*g;let l=-8e-5*n+.02966*i-42e-6*o-13e-8*r;const u=83.35324312*g;let p=14643420.2669*n-38.2702*i-.045047*o+21301e-8*r;const _=125.04455501*g;let I=-6967919.3631*n+6.3602*i+.007625*o-3586e-8*r;const E=218.31664563*g;let y=1732559343.4847*n-6.391*i+.006588*o-3169e-8*r;const C=297.85019547*g+f*(1602961601.209*n-6.3706*i+.006593*o-3169e-8*r),b=134.96340251*g+f*(1717915923.2178*n+31.8792*i+.051635*o-2447e-7*r),B=357.52910918*g+f*(129596581.0481*n-.5532*i+136e-6*o-1149e-8*r),v=310.17137918*g-f*(6967051.436*n+6.2068*i+.007618*o-3219e-8*r),T=2*C,S=4*C,x=6*C,D=2*b,Q=3*b,N=4*b,R=2*(93.27209062*g+f*(1739527262.8478*n-12.7512*i-.001037*o+417e-8*r));a+=3400.4*Math.cos(T)-635.6*Math.cos(T-b)-235.6*Math.cos(b)+218.1*Math.cos(T-B)+181*Math.cos(T+b),s+=.014216*Math.cos(T-b)+.008551*Math.cos(T-D)-.001383*Math.cos(b)+.001356*Math.cos(T+b)-.001147*Math.cos(S-Q)-914e-6*Math.cos(S-D)+869e-6*Math.cos(T-B-b)-627e-6*Math.cos(T)-394e-6*Math.cos(S-N)+282e-6*Math.cos(T-B-D)-279e-6*Math.cos(C-b)-236e-6*Math.cos(D)+231e-6*Math.cos(S)+229e-6*Math.cos(x-N)-201e-6*Math.cos(D-R),l+=486.26*Math.cos(T-R)-40.13*Math.cos(T)+37.51*Math.cos(R)+25.73*Math.cos(D-R)+19.97*Math.cos(T-B-R),p+=-55609*Math.sin(T-b)-34711*Math.sin(T-D)-9792*Math.sin(b)+9385*Math.sin(S-Q)+7505*Math.sin(S-D)+5318*Math.sin(T+b)+3484*Math.sin(S-N)-3417*Math.sin(T-B-b)-2530*Math.sin(x-N)-2376*Math.sin(T)-2075*Math.sin(T-Q)-1883*Math.sin(D)-1736*Math.sin(x-5*b)+1626*Math.sin(B)-1370*Math.sin(x-Q),I+=-5392*Math.sin(T-R)-540*Math.sin(B)-441*Math.sin(T)+423*Math.sin(R)-288*Math.sin(D-R),y+=-3332.9*Math.sin(T)+1197.4*Math.sin(T-b)-662.5*Math.sin(B)+396.3*Math.sin(b)-218*Math.sin(T-B);const M=2*v,L=3*v;l+=46.997*Math.cos(v)*n-.614*Math.cos(T-R+v)*n+.614*Math.cos(T-R-v)*n-.0297*Math.cos(M)*i-.0335*Math.cos(v)*i+.0012*Math.cos(T-R+M)*i-16e-5*Math.cos(v)*o+4e-5*Math.cos(L)*o+4e-5*Math.cos(M)*o;const P=2.116*Math.sin(v)*n-.111*Math.sin(T-R-v)*n-.0015*Math.sin(v)*i;return p+=P,y+=P,I+=-520.77*Math.sin(v)*n+13.66*Math.sin(T-R+v)*n+1.12*Math.sin(T-v)*n-1.06*Math.sin(R-v)*n+.66*Math.sin(M)*i+.371*Math.sin(v)*i-.035*Math.sin(T-R+M)*i-.015*Math.sin(T-R+v)*i+.0014*Math.sin(v)*o-.0011*Math.sin(L)*o-9e-4*Math.sin(M)*o,a*=1e3,m(a,s,A+l*f,u+p*f,_+I*f,E+y*f,t)}const S=new A.A(1.0000000000000002,5619723173785822e-31,4690511510146299e-34,-5154129427414611e-31,.9174820620691819,-.39777715593191376,-223970096136568e-30,.39777715593191376,.9174820620691819);let x=new i.A;u.computeSunPositionInEarthInertialFrame=function(e,t){return(0,o.A)(e)||(e=a.A.now()),(0,o.A)(t)||(t=new i.A),x=function(e,t){d(e,w);const n=(w.dayNumber-h.dayNumber+(w.secondsOfDay-h.secondsOfDay)/c.A.SECONDS_PER_DAY)/(10*c.A.DAYS_PER_JULIAN_CENTURY),i=.3595362*n,o=149598022260.7121+957426.3679999999*Math.cos(16002*i)+-2243968.05*Math.sin(16002*i)+-2273887.624*Math.cos(21863*i)+-688150.202*Math.sin(21863*i)+927506.794*Math.cos(32004*i)+1017265.516*Math.sin(32004*i)+-119678.29599999999*Math.cos(10931*i)+807828.498*Math.sin(10931*i)+478713.18399999995*Math.cos(14529*i)+209437.01799999998*Math.sin(14529*i)+-613351.267*Math.cos(16368*i)+359034.888*Math.sin(16368*i)+284235.953*Math.cos(15318*i)+-418874.03599999996*Math.sin(15318*i)+-164557.657*Math.cos(32794*i)+329115.314*Math.sin(32794*i),r=E+y*n+-325e-7*Math.cos(10*i)+-105e-7*Math.sin(10*i)+-322e-7*Math.cos(16002*i)+-137e-7*Math.sin(16002*i)+C*Math.cos(21863*i)+258e-7*Math.sin(21863*i)+b*Math.cos(10931*i)+35e-7*Math.sin(10931*i)+B*Math.cos(1473*i)+v*Math.sin(1473*i)+97e-7*Math.cos(32004*i)+-88e-7*Math.sin(32004*i)+55e-7*Math.cos(4387*i)+-112e-7*Math.sin(4387*i)+-41e-7*Math.cos(73*i)+-8e-6*Math.sin(73*i);return m(o,.0167086342-.0004203654*n,469.97289*f*n,102.93734808*g+11612.3529*f*n,174.87317577*g-8679.27034*f*n,r,t)}(e,x),t=i.A.negate(x,t),function(e,t){t=T(e,t),i.A.multiplyByScalar(t,-.01215058143522694,t)}(e,x),i.A.subtract(t,x,t),A.A.multiplyByVector(S,t,t),t},u.computeMoonPositionInEarthInertialFrame=function(e,t){return(0,o.A)(e)||(e=a.A.now()),t=T(e,t),A.A.multiplyByVector(S,t,t),t};const D=u},6874:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(267980),o=n(369031),r=n(491446),a=n(594706);function s(e){const t=e.radius??1,n={radii:new i.A(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,subdivisions:e.subdivisions};this._ellipsoidGeometry=new a.A(n),this._workerName="createSphereOutlineGeometry"}s.packedLength=a.A.packedLength,s.pack=function(e,t,n){return o.A.typeOf.object("value",e),a.A.pack(e._ellipsoidGeometry,t,n)};const A=new a.A,c={radius:void 0,radii:new i.A,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0};s.unpack=function(e,t,n){const o=a.A.unpack(e,t,A);return c.stackPartitions=o._stackPartitions,c.slicePartitions=o._slicePartitions,c.subdivisions=o._subdivisions,(0,r.A)(n)?(i.A.clone(o._radii,c.radii),n._ellipsoidGeometry=new a.A(c),n):(c.radius=o._radii.x,new s(c))},s.createGeometry=function(e){return a.A.createGeometry(e._ellipsoidGeometry)};const l=s},437266:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(267980),o=n(369031),r=n(367817),a=n(605971),s=n(99479);function A(){this.times=void 0,this.points=void 0,a.A.throwInstantiationError()}A.getPointType=function(e){if("number"==typeof e)return Number;if(e instanceof i.A)return i.A;if(e instanceof s.A)return s.A;throw new a.A("point must be a Cartesian3, Quaternion, or number.")},A.prototype.evaluate=a.A.throwInstantiationError,A.prototype.findTimeInterval=function(e,t){const n=this.times,i=n.length;if(o.A.typeOf.number("time",e),e<n[0]||e>n[i-1])throw new a.A("time is out of range.");if(e>=n[t=t??0]){if(t+1<i&&e<n[t+1])return t;if(t+2<i&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let r;if(e>n[t])for(r=t;r<i-1&&!(e>=n[r]&&e<n[r+1]);++r);else for(r=t-1;r>=0&&!(e>=n[r]&&e<n[r+1]);--r);return r===i-1&&(r=i-2),r},A.prototype.wrapTime=function(e){o.A.typeOf.number("time",e);const t=this.times,n=t[t.length-1],i=t[0],r=n-i;let a;return e<i&&(a=Math.floor((i-e)/r)+1,e+=a*r),e>n&&(a=Math.floor((e-n)/r)+1,e-=a*r),e},A.prototype.clampTime=function(e){o.A.typeOf.number("time",e);const t=this.times;return r.A.clamp(e,t[0],t[t.length-1])};const c=A},587841:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(915325),o=n(491446),r=n(605971),a=n(437266);function s(e){const t=(e=e??i.A.EMPTY_OBJECT).points,n=e.times;if(!(0,o.A)(t)||!(0,o.A)(n))throw new r.A("points and times are required.");if(t.length<2)throw new r.A("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new r.A("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=a.A.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(s.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),s.prototype.findTimeInterval=a.A.prototype.findTimeInterval,s.prototype.wrapTime=a.A.prototype.wrapTime,s.prototype.clampTime=a.A.prototype.clampTime,s.prototype.evaluate=function(e,t){const n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const i=this._lastTimeIndex,r=this._pointType;return r===Number?n[i]:((0,o.A)(t)||(t=new r),r.clone(n[i],t))};const A=s},465159:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(434067),o=n(267980),r=n(336946),a=n(369031),s=n(491446),A=n(610750),c=n(658091),l=n(150429),u=n(367817),d=n(766067);function h(e,t){this.position=e,(0,s.A)(this.position)||(this.position=new i.A),this.tangentPlane=t,(0,s.A)(this.tangentPlane)||(this.tangentPlane=h.NORTH_POLE_TANGENT_PLANE)}Object.defineProperties(h.prototype,{ellipsoid:{get:function(){return this.tangentPlane.ellipsoid}},x:{get:function(){return this.position.x}},y:{get:function(){return this.position.y}},conformalLatitude:{get:function(){const e=i.A.magnitude(this.position),t=2*this.ellipsoid.maximumRadius;return this.tangentPlane.plane.normal.z*(u.A.PI_OVER_TWO-2*Math.atan2(e,t))}},longitude:{get:function(){let e=u.A.PI_OVER_TWO+Math.atan2(this.y,this.x);return e>Math.PI&&(e-=u.A.TWO_PI),e}}});const g=new r.A,f=new o.A;h.prototype.getLatitude=function(e){(0,s.A)(e)||(e=A.A.default),g.latitude=this.conformalLatitude,g.longitude=this.longitude,g.height=0;const t=this.ellipsoid.cartographicToCartesian(g,f);return e.cartesianToCartographic(t,g),g.latitude};const p=new d.A,m=new o.A,_=new o.A;h.fromCartesian=function(e,t){a.A.defined("cartesian",e);const n=u.A.signNotZero(e.z);let r=h.NORTH_POLE_TANGENT_PLANE,A=h.SOUTH_POLE;n<0&&(r=h.SOUTH_POLE_TANGENT_PLANE,A=h.NORTH_POLE);const c=p;c.origin=r.ellipsoid.scaleToGeocentricSurface(e,c.origin),c.direction=o.A.subtract(c.origin,A,m),o.A.normalize(c.direction,c.direction);const d=l.A.rayPlane(c,r.plane,_),g=o.A.subtract(d,A,d),f=o.A.dot(r.xAxis,g),I=n*o.A.dot(r.yAxis,g);return(0,s.A)(t)?(t.position=new i.A(f,I),t.tangentPlane=r,t):new h(new i.A(f,I),r)},h.fromCartesianArray=function(e,t){a.A.defined("cartesians",e);const n=e.length;(0,s.A)(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=h.fromCartesian(e[i],t[i]);return t},h.clone=function(e,t){if((0,s.A)(e))return(0,s.A)(t)?(t.position=e.position,t.tangentPlane=e.tangentPlane,t):new h(e.position,e.tangentPlane)},h.HALF_UNIT_SPHERE=Object.freeze(new A.A(.5,.5,.5)),h.NORTH_POLE=Object.freeze(new o.A(0,0,.5)),h.SOUTH_POLE=Object.freeze(new o.A(0,0,-.5)),h.NORTH_POLE_TANGENT_PLANE=Object.freeze(new c.A(h.NORTH_POLE,h.HALF_UNIT_SPHERE)),h.SOUTH_POLE_TANGENT_PLANE=Object.freeze(new c.A(h.SOUTH_POLE,h.HALF_UNIT_SPHERE));const I=h},42794:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(605971);function o(){i.A.throwInstantiationError()}Object.defineProperties(o.prototype,{credits:{get:i.A.throwInstantiationError},waterMask:{get:i.A.throwInstantiationError}}),o.prototype.interpolateHeight=i.A.throwInstantiationError,o.prototype.isChildAvailable=i.A.throwInstantiationError,o.prototype.createMesh=i.A.throwInstantiationError,o.prototype.upsample=i.A.throwInstantiationError,o.prototype.wasCreatedByUpsampling=i.A.throwInstantiationError,o.maximumAsynchronousTasks=5;const r=o},371267:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(961645),o=n(434067),r=n(267980),a=n(571804),s=n(491446),A=n(367817),c=n(584164),l=n(717339),u=n(66415);const d=new r.A,h=new r.A,g=new o.A,f=new c.A,p=new c.A,m=Math.pow(2,12);function _(e,t,n,i,o,a,A,l,g,_){let I,E,y=u.A.NONE;if((0,s.A)(t)&&(0,s.A)(n)&&(0,s.A)(i)&&(0,s.A)(o)){const e=t.minimum,a=t.maximum,s=r.A.subtract(a,e,h),A=i-n;y=Math.max(r.A.maximumComponent(s),A)<m-1?u.A.BITS12:u.A.NONE,I=c.A.inverseTransformation(o,new c.A);const l=r.A.negate(e,d);c.A.multiply(c.A.fromTranslation(l,f),I,I);const g=d;g.x=1/s.x,g.y=1/s.y,g.z=1/s.z,c.A.multiply(c.A.fromScale(g,f),I,I),E=c.A.clone(o),c.A.setTranslation(E,r.A.ZERO,E),o=c.A.clone(o,new c.A);const _=c.A.fromTranslation(e,f),C=c.A.fromScale(s,p),b=c.A.multiply(_,C,f);c.A.multiply(o,b,o),c.A.multiply(E,b,E)}this.quantization=y,this.minimumHeight=n,this.maximumHeight=i,this.center=r.A.clone(e),this.toScaledENU=I,this.fromScaledENU=o,this.matrix=E,this.hasVertexNormals=a,this.hasWebMercatorT=A??!1,this.hasGeodeticSurfaceNormals=l??!1,this.exaggeration=g??1,this.exaggerationRelativeHeight=_??0,this.stride=0,this._offsetGeodeticSurfaceNormal=0,this._offsetVertexNormal=0,this._calculateStrideAndOffsets()}_.prototype.encode=function(e,t,n,a,s,l,h,f){const p=a.x,m=a.y;if(this.quantization===u.A.BITS12){(n=c.A.multiplyByPoint(this.toScaledENU,n,d)).x=A.A.clamp(n.x,0,1),n.y=A.A.clamp(n.y,0,1),n.z=A.A.clamp(n.z,0,1);const r=this.maximumHeight-this.minimumHeight,a=A.A.clamp((s-this.minimumHeight)/r,0,1);o.A.fromElements(n.x,n.y,g);const l=i.A.compressTextureCoordinates(g);o.A.fromElements(n.z,a,g);const u=i.A.compressTextureCoordinates(g);o.A.fromElements(p,m,g);const f=i.A.compressTextureCoordinates(g);if(e[t++]=l,e[t++]=u,e[t++]=f,this.hasWebMercatorT){o.A.fromElements(h,0,g);const n=i.A.compressTextureCoordinates(g);e[t++]=n}}else r.A.subtract(n,this.center,d),e[t++]=d.x,e[t++]=d.y,e[t++]=d.z,e[t++]=s,e[t++]=p,e[t++]=m,this.hasWebMercatorT&&(e[t++]=h);return this.hasVertexNormals&&(e[t++]=i.A.octPackFloat(l)),this.hasGeodeticSurfaceNormals&&(e[t++]=f.x,e[t++]=f.y,e[t++]=f.z),t};const I=new r.A,E=new r.A;_.prototype.addGeodeticSurfaceNormals=function(e,t,n){if(this.hasGeodeticSurfaceNormals)return;const i=this.stride,o=e.length/i;this.hasGeodeticSurfaceNormals=!0,this._calculateStrideAndOffsets();const r=this.stride;for(let a=0;a<o;a++){for(let n=0;n<i;n++){const o=a*i+n;t[a*r+n]=e[o]}const o=this.decodePosition(t,a,I),s=n.geodeticSurfaceNormal(o,E),A=a*r+this._offsetGeodeticSurfaceNormal;t[A]=s.x,t[A+1]=s.y,t[A+2]=s.z}},_.prototype.removeGeodeticSurfaceNormals=function(e,t){if(!this.hasGeodeticSurfaceNormals)return;const n=this.stride,i=e.length/n;this.hasGeodeticSurfaceNormals=!1,this._calculateStrideAndOffsets();const o=this.stride;for(let r=0;r<i;r++)for(let i=0;i<o;i++){const a=r*n+i;t[r*o+i]=e[a]}},_.prototype.decodePosition=function(e,t,n){if((0,s.A)(n)||(n=new r.A),t*=this.stride,this.quantization===u.A.BITS12){const o=i.A.decompressTextureCoordinates(e[t],g);n.x=o.x,n.y=o.y;const r=i.A.decompressTextureCoordinates(e[t+1],g);return n.z=r.x,c.A.multiplyByPoint(this.fromScaledENU,n,n)}return n.x=e[t],n.y=e[t+1],n.z=e[t+2],r.A.add(n,this.center,n)},_.prototype.getExaggeratedPosition=function(e,t,n){n=this.decodePosition(e,t,n);const i=this.exaggeration,o=this.exaggerationRelativeHeight;if(1!==i&&this.hasGeodeticSurfaceNormals){const r=this.decodeGeodeticSurfaceNormal(e,t,E),a=this.decodeHeight(e,t),s=l.A.getHeight(a,i,o)-a;n.x+=r.x*s,n.y+=r.y*s,n.z+=r.z*s}return n},_.prototype.decodeTextureCoordinates=function(e,t,n){return(0,s.A)(n)||(n=new o.A),t*=this.stride,this.quantization===u.A.BITS12?i.A.decompressTextureCoordinates(e[t+2],n):o.A.fromElements(e[t+4],e[t+5],n)},_.prototype.decodeHeight=function(e,t){return t*=this.stride,this.quantization===u.A.BITS12?i.A.decompressTextureCoordinates(e[t+1],g).y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight:e[t+3]},_.prototype.decodeWebMercatorT=function(e,t){return t*=this.stride,this.quantization===u.A.BITS12?i.A.decompressTextureCoordinates(e[t+3],g).x:e[t+6]},_.prototype.getOctEncodedNormal=function(e,t,n){const i=e[t=t*this.stride+this._offsetVertexNormal]/256,r=Math.floor(i),a=256*(i-r);return o.A.fromElements(r,a,n)},_.prototype.decodeGeodeticSurfaceNormal=function(e,t,n){return t=t*this.stride+this._offsetGeodeticSurfaceNormal,n.x=e[t],n.y=e[t+1],n.z=e[t+2],n},_.prototype._calculateStrideAndOffsets=function(){let e=0;this.quantization===u.A.BITS12?e+=3:e+=6,this.hasWebMercatorT&&(e+=1),this.hasVertexNormals&&(this._offsetVertexNormal=e,e+=1),this.hasGeodeticSurfaceNormals&&(this._offsetGeodeticSurfaceNormal=e,e+=3),this.stride=e};const y={position3DAndHeight:0,textureCoordAndEncodedNormals:1,geodeticSurfaceNormal:2},C={compressed0:0,compressed1:1,geodeticSurfaceNormal:2};_.prototype.getAttributes=function(e){const t=a.A.FLOAT,n=a.A.getSizeInBytes(t),i=this.stride*n;let o=0;const r=[];function s(a,s){r.push({index:a,vertexBuffer:e,componentDatatype:t,componentsPerAttribute:s,offsetInBytes:o,strideInBytes:i}),o+=s*n}if(this.quantization===u.A.NONE){s(y.position3DAndHeight,4);let e=2;e+=this.hasWebMercatorT?1:0,e+=this.hasVertexNormals?1:0,s(y.textureCoordAndEncodedNormals,e),this.hasGeodeticSurfaceNormals&&s(y.geodeticSurfaceNormal,3)}else{const e=this.hasWebMercatorT||this.hasVertexNormals,t=this.hasWebMercatorT&&this.hasVertexNormals;s(C.compressed0,e?4:3),t&&s(C.compressed1,1),this.hasGeodeticSurfaceNormals&&s(C.geodeticSurfaceNormal,3)}return r},_.prototype.getAttributeLocations=function(){return this.quantization===u.A.NONE?y:C},_.clone=function(e,t){if((0,s.A)(e))return(0,s.A)(t)||(t=new _),t.quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=r.A.clone(e.center),t.toScaledENU=c.A.clone(e.toScaledENU),t.fromScaledENU=c.A.clone(e.fromScaledENU),t.matrix=c.A.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t.hasGeodeticSurfaceNormals=e.hasGeodeticSurfaceNormals,t.exaggeration=e.exaggeration,t.exaggerationRelativeHeight=e.exaggerationRelativeHeight,t._calculateStrideAndOffsets(),t};const b=_},255335:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n,i,o,r,a,s,A,c,l,u,d,h,g,f){this.center=e,this.vertices=t,this.stride=c??6,this.indices=n,this.indexCountWithoutSkirts=i,this.vertexCountWithoutSkirts=o,this.minimumHeight=r,this.maximumHeight=a,this.boundingSphere3D=s,this.occludeePointInScaledSpace=A,this.orientedBoundingBox=l,this.encoding=u,this.westIndicesSouthToNorth=d,this.southIndicesEastToWest=h,this.eastIndicesNorthToSouth=g,this.northIndicesWestToEast=f}},98055:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(491446),o=n(605971),r=n(874915),a=n(367817);function s(){o.A.throwInstantiationError()}Object.defineProperties(s.prototype,{errorEvent:{get:o.A.throwInstantiationError},credit:{get:o.A.throwInstantiationError},tilingScheme:{get:o.A.throwInstantiationError},hasWaterMask:{get:o.A.throwInstantiationError},hasVertexNormals:{get:o.A.throwInstantiationError},availability:{get:o.A.throwInstantiationError}});const A=[];s.getRegularGridIndices=function(e,t){if(e*t>=a.A.FOUR_GIGABYTES)throw new o.A("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=A[e];(0,i.A)(n)||(A[e]=n=[]);let r=n[t];return(0,i.A)(r)||(r=e*t<a.A.SIXTY_FOUR_KILOBYTES?n[t]=new Uint16Array((e-1)*(t-1)*6):n[t]=new Uint32Array((e-1)*(t-1)*6),d(e,t,r,0)),r};const c=[];s.getRegularGridIndicesAndEdgeIndices=function(e,t){if(e*t>=a.A.FOUR_GIGABYTES)throw new o.A("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=c[e];(0,i.A)(n)||(c[e]=n=[]);let r=n[t];if(!(0,i.A)(r)){const i=s.getRegularGridIndices(e,t),o=u(e,t),a=o.westIndicesSouthToNorth,A=o.southIndicesEastToWest,c=o.eastIndicesNorthToSouth,l=o.northIndicesWestToEast;r=n[t]={indices:i,westIndicesSouthToNorth:a,southIndicesEastToWest:A,eastIndicesNorthToSouth:c,northIndicesWestToEast:l}}return r};const l=[];function u(e,t){const n=new Array(t),i=new Array(e),o=new Array(t),r=new Array(e);let a;for(a=0;a<e;++a)r[a]=a,i[a]=e*t-1-a;for(a=0;a<t;++a)o[a]=(a+1)*e-1,n[a]=(t-a-1)*e;return{westIndicesSouthToNorth:n,southIndicesEastToWest:i,eastIndicesNorthToSouth:o,northIndicesWestToEast:r}}function d(e,t,n,i){let o=0;for(let r=0;r<t-1;++r){for(let t=0;t<e-1;++t){const t=o,r=t+e,a=r+1,s=t+1;n[i++]=t,n[i++]=r,n[i++]=s,n[i++]=s,n[i++]=r,n[i++]=a,++o}++o}}function h(e,t,n,i){let o=e[0];const r=e.length;for(let a=1;a<r;++a){const r=e[a];n[i++]=o,n[i++]=r,n[i++]=t,n[i++]=t,n[i++]=r,n[i++]=t+1,o=r,++t}return i}s.getRegularGridAndSkirtIndicesAndEdgeIndices=function(e,t){if(e*t>=a.A.FOUR_GIGABYTES)throw new o.A("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=l[e];(0,i.A)(n)||(l[e]=n=[]);let A=n[t];if(!(0,i.A)(A)){const i=e*t,o=(e-1)*(t-1)*6,a=2*e+2*t,c=i+a,l=o+6*Math.max(0,a-4),h=u(e,t),g=h.westIndicesSouthToNorth,f=h.southIndicesEastToWest,p=h.eastIndicesNorthToSouth,m=h.northIndicesWestToEast,_=r.A.createTypedArray(c,l);d(e,t,_,0),s.addSkirtIndices(g,f,p,m,i,_,o),A=n[t]={indices:_,westIndicesSouthToNorth:g,southIndicesEastToWest:f,eastIndicesNorthToSouth:p,northIndicesWestToEast:m,indexCountWithoutSkirts:o}}return A},s.addSkirtIndices=function(e,t,n,i,o,r,a){let s=o;a=h(e,s,r,a),s+=e.length,a=h(t,s,r,a),s+=t.length,a=h(n,s,r,a),s+=n.length,h(i,s,r,a)},s.heightmapTerrainQuality=.25,s.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(e,t,n){return 2*e.maximumRadius*Math.PI*s.heightmapTerrainQuality/(t*n)},s.prototype.requestTileGeometry=o.A.throwInstantiationError,s.prototype.getLevelMaximumGeometricError=o.A.throwInstantiationError,s.prototype.getTileDataAvailable=o.A.throwInstantiationError,s.prototype.loadTileDataAvailability=o.A.throwInstantiationError;const g=s},66415:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,BITS12:1})},862892:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(525490),o=n(336946),r=n(491446),a=n(697422);function s(e,t){this._tilingScheme=e,this._maximumLevel=t,this._rootNodes=[]}const A=new a.A;function c(e,t,n,i){const o=i.length;for(let r=0;r<o;++r){const o=i[r];if(o.x===t&&o.y===n&&o.level===e)return!0}return!1}s.prototype.addAvailableTileRange=function(e,t,n,i,o){const r=this._tilingScheme,a=this._rootNodes;if(0===e)for(let s=n;s<=o;++s)for(let n=t;n<=i;++n)c(e,n,s,a)||a.push(new f(r,void 0,0,n,s));r.tileXYToRectangle(t,n,e,A);const s=A.west,l=A.north;r.tileXYToRectangle(i,o,e,A);const u=A.east,d=new p(e,s,A.south,u,l);for(let e=0;e<a.length;++e){const t=a[e];m(t.extent,d)&&_(this._maximumLevel,t,d)}},s.prototype.computeMaximumLevelAtPosition=function(e){let t;for(let n=0;n<this._rootNodes.length;++n){const i=this._rootNodes[n];if(y(i.extent,e)){t=i;break}}return(0,r.A)(t)?C(void 0,t,e):-1};const l=[],u=[],d=new a.A,h=new a.A;s.prototype.computeBestAvailableLevelOverRectangle=function(e){const t=l;t.length=0,e.east<e.west?(t.push(a.A.fromRadians(-Math.PI,e.south,e.east,e.north,d)),t.push(a.A.fromRadians(e.west,e.south,Math.PI,e.north,h))):t.push(e);const n=u;let i;for(n.length=0,i=0;i<this._rootNodes.length;++i)b(n,this._rootNodes[i],t);for(i=n.length-1;i>=0;--i)if((0,r.A)(n[i])&&0===n[i].length)return i;return 0};const g=new o.A;function f(e,t,n,i,o){this.tilingScheme=e,this.parent=t,this.level=n,this.x=i,this.y=o,this.extent=e.tileXYToRectangle(i,o,n),this.rectangles=[],this._sw=void 0,this._se=void 0,this._nw=void 0,this._ne=void 0}function p(e,t,n,i,o){this.level=e,this.west=t,this.south=n,this.east=i,this.north=o}function m(e,t){const n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east);return i<Math.min(e.north,t.north)&&n<o}function _(e,t,n){for(;t.level<e;)if(E(t.nw.extent,n))t=t.nw;else if(E(t.ne.extent,n))t=t.ne;else if(E(t.sw.extent,n))t=t.sw;else{if(!E(t.se.extent,n))break;t=t.se}if(0===t.rectangles.length||t.rectangles[t.rectangles.length-1].level<=n.level)t.rectangles.push(n);else{let e=(0,i.A)(t.rectangles,n.level,I);e<0&&(e=~e),t.rectangles.splice(e,0,n)}}function I(e,t){return e.level-t}function E(e,t){return t.west>=e.west&&t.east<=e.east&&t.south>=e.south&&t.north<=e.north}function y(e,t){return t.longitude>=e.west&&t.longitude<=e.east&&t.latitude>=e.south&&t.latitude<=e.north}function C(e,t,n){let i=0,o=!1;for(;!o;){const e=t._nw&&y(t._nw.extent,n),r=t._ne&&y(t._ne.extent,n),a=t._sw&&y(t._sw.extent,n),s=t._se&&y(t._se.extent,n);if(e+r+a+s>1){e&&(i=Math.max(i,C(t,t._nw,n))),r&&(i=Math.max(i,C(t,t._ne,n))),a&&(i=Math.max(i,C(t,t._sw,n))),s&&(i=Math.max(i,C(t,t._se,n)));break}e?t=t._nw:r?t=t._ne:a?t=t._sw:s?t=t._se:o=!0}for(;t!==e;){const e=t.rectangles;for(let t=e.length-1;t>=0&&e[t].level>i;--t){const o=e[t];y(o,n)&&(i=o.level)}t=t.parent}return i}function b(e,t,n){if(!t)return;let i,o=!1;for(i=0;i<n.length;++i)o=o||m(t.extent,n[i]);if(!o)return;const r=t.rectangles;for(i=0;i<r.length;++i){const t=r[i];e[t.level]||(e[t.level]=n),e[t.level]=B(e[t.level],t)}b(e,t._nw,n),b(e,t._ne,n),b(e,t._sw,n),b(e,t._se,n)}function B(e,t){const n=[];for(let i=0;i<e.length;++i){const o=e[i];m(o,t)?(o.west<t.west&&n.push(new a.A(o.west,o.south,t.west,o.north)),o.east>t.east&&n.push(new a.A(t.east,o.south,o.east,o.north)),o.south<t.south&&n.push(new a.A(Math.max(t.west,o.west),o.south,Math.min(t.east,o.east),t.south)),o.north>t.north&&n.push(new a.A(Math.max(t.west,o.west),t.north,Math.min(t.east,o.east),o.north))):n.push(o)}return n}s.prototype.isTileAvailable=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(t,n,e,A);return a.A.center(i,g),this.computeMaximumLevelAtPosition(g)>=e},s.prototype.computeChildMaskForTile=function(e,t,n){const i=e+1;if(i>=this._maximumLevel)return 0;let o=0;return o|=this.isTileAvailable(i,2*t,2*n+1)?1:0,o|=this.isTileAvailable(i,2*t+1,2*n+1)?2:0,o|=this.isTileAvailable(i,2*t,2*n)?4:0,o|=this.isTileAvailable(i,2*t+1,2*n)?8:0,o},Object.defineProperties(f.prototype,{nw:{get:function(){return this._nw||(this._nw=new f(this.tilingScheme,this,this.level+1,2*this.x,2*this.y)),this._nw}},ne:{get:function(){return this._ne||(this._ne=new f(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y)),this._ne}},sw:{get:function(){return this._sw||(this._sw=new f(this.tilingScheme,this,this.level+1,2*this.x,2*this.y+1)),this._sw}},se:{get:function(){return this._se||(this._se=new f(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y+1)),this._se}}});const v=s},36138:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={WEST:0,NORTH:1,EAST:2,SOUTH:3,NORTHWEST:4,NORTHEAST:5,SOUTHWEST:6,SOUTHEAST:7}},705302:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(522216);function r(e,t,n,i,o,r,a){this.provider=e,this.message=t,this.x=n,this.y=i,this.level=o,this.timesRetried=r??0,this.retry=!1,this.error=a}r.reportError=function(e,t,n,a,s,A,c,l){let u=e;return(0,i.A)(e)?(u.provider=t,u.message=a,u.x=s,u.y=A,u.level=c,u.retry=!1,u.error=l,++u.timesRetried):u=new r(t,a,s,A,c,0,l),(0,i.A)(n)&&n.numberOfListeners>0?n.raiseEvent(u):(0,i.A)(t)&&console.log(`An error occurred in "${t.constructor.name}": ${(0,o.A)(a)}`),u},r.reportSuccess=function(e){(0,i.A)(e)&&(e.timesRetried=-1)};const a=r},224847:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(525490),o=n(915325),r=n(491446),a=n(605971),s=n(955943),A=n(658919),c=n(734780),l=n(32655),u=n(591978),d=n(93467);function h(e,t){return u.A.compare(e.start,t.start)}function g(e){if(this._intervals=[],this._changedEvent=new s.A,(0,r.A)(e)){const t=e.length;for(let n=0;n<t;n++)this.addInterval(e[n])}}Object.defineProperties(g.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){const e=this._intervals;return 0===e.length?void 0:e[0].start}},isStartIncluded:{get:function(){const e=this._intervals;return 0!==e.length&&e[0].isStartIncluded}},stop:{get:function(){const e=this._intervals,t=e.length;return 0===t?void 0:e[t-1].stop}},isStopIncluded:{get:function(){const e=this._intervals,t=e.length;return 0!==t&&e[t-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return 0===this._intervals.length}}}),g.prototype.equals=function(e,t){if(this===e)return!0;if(!(e instanceof g))return!1;const n=this._intervals,i=e._intervals,o=n.length;if(o!==i.length)return!1;for(let e=0;e<o;e++)if(!d.A.equals(n[e],i[e],t))return!1;return!0},g.prototype.get=function(e){if(!(0,r.A)(e))throw new a.A("index is required.");return this._intervals[e]},g.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))},g.prototype.findIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t]:void 0},g.prototype.findDataForIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t].data:void 0},g.prototype.contains=function(e){return this.indexOf(e)>=0};const f=new d.A;g.prototype.indexOf=function(e){if(!(0,r.A)(e))throw new a.A("date is required");const t=this._intervals;f.start=e,f.stop=e;let n=(0,i.A)(t,f,h);return n>=0?t[n].isStartIncluded?n:n>0&&t[n-1].stop.equals(e)&&t[n-1].isStopIncluded?n-1:~n:(n=~n,n>0&&n-1<t.length&&d.A.contains(t[n-1],e)?n-1:~n)},g.prototype.findInterval=function(e){const t=(e=e??o.A.EMPTY_OBJECT).start,n=e.stop,i=e.isStartIncluded,a=e.isStopIncluded,s=this._intervals;for(let e=0,o=s.length;e<o;e++){const o=s[e];if((!(0,r.A)(t)||o.start.equals(t))&&(!(0,r.A)(n)||o.stop.equals(n))&&(!(0,r.A)(i)||o.isStartIncluded===i)&&(!(0,r.A)(a)||o.isStopIncluded===a))return s[e]}},g.prototype.addInterval=function(e,t){if(!(0,r.A)(e))throw new a.A("interval is required");if(e.isEmpty)return;const n=this._intervals;if(0===n.length||u.A.greaterThan(e.start,n[n.length-1].stop))return n.push(e),void this._changedEvent.raiseEvent(this);let o,s=(0,i.A)(n,e,h);for(s<0?s=~s:s>0&&e.isStartIncluded&&n[s-1].isStartIncluded&&n[s-1].start.equals(e.start)?--s:s<n.length&&!e.isStartIncluded&&n[s].isStartIncluded&&n[s].start.equals(e.start)&&++s,s>0&&(o=u.A.compare(n[s-1].stop,e.start),(o>0||0===o&&(n[s-1].isStopIncluded||e.isStartIncluded))&&(((0,r.A)(t)?t(n[s-1].data,e.data):n[s-1].data===e.data)?(e=u.A.greaterThan(e.stop,n[s-1].stop)?new d.A({start:n[s-1].start,stop:e.stop,isStartIncluded:n[s-1].isStartIncluded,isStopIncluded:e.isStopIncluded,data:e.data}):new d.A({start:n[s-1].start,stop:n[s-1].stop,isStartIncluded:n[s-1].isStartIncluded,isStopIncluded:n[s-1].isStopIncluded||e.stop.equals(n[s-1].stop)&&e.isStopIncluded,data:e.data}),n.splice(s-1,1),--s):(o=u.A.compare(n[s-1].stop,e.stop),(o>0||0===o&&n[s-1].isStopIncluded&&!e.isStopIncluded)&&n.splice(s,0,new d.A({start:e.stop,stop:n[s-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[s-1].isStopIncluded,data:n[s-1].data})),n[s-1]=new d.A({start:n[s-1].start,stop:e.start,isStartIncluded:n[s-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:n[s-1].data}))));s<n.length&&(o=u.A.compare(e.stop,n[s].start),o>0||0===o&&(e.isStopIncluded||n[s].isStartIncluded));)if((0,r.A)(t)?t(n[s].data,e.data):n[s].data===e.data)e=new d.A({start:e.start,stop:u.A.greaterThan(n[s].stop,e.stop)?n[s].stop:e.stop,isStartIncluded:e.isStartIncluded,isStopIncluded:u.A.greaterThan(n[s].stop,e.stop)?n[s].isStopIncluded:e.isStopIncluded,data:e.data}),n.splice(s,1);else{if(n[s]=new d.A({start:e.stop,stop:n[s].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[s].isStopIncluded,data:n[s].data}),!n[s].isEmpty)break;n.splice(s,1)}n.splice(s,0,e),this._changedEvent.raiseEvent(this)},g.prototype.removeInterval=function(e){if(!(0,r.A)(e))throw new a.A("interval is required");if(e.isEmpty)return!1;const t=this._intervals;let n=(0,i.A)(t,e,h);n<0&&(n=~n);let o=!1;for(n>0&&(u.A.greaterThan(t[n-1].stop,e.start)||t[n-1].stop.equals(e.start)&&t[n-1].isStopIncluded&&e.isStartIncluded)&&(o=!0,(u.A.greaterThan(t[n-1].stop,e.stop)||t[n-1].isStopIncluded&&!e.isStopIncluded&&t[n-1].stop.equals(e.stop))&&t.splice(n,0,new d.A({start:e.stop,stop:t[n-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n-1].isStopIncluded,data:t[n-1].data})),t[n-1]=new d.A({start:t[n-1].start,stop:e.start,isStartIncluded:t[n-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:t[n-1].data})),n<t.length&&!e.isStartIncluded&&t[n].isStartIncluded&&e.start.equals(t[n].start)&&(o=!0,t.splice(n,0,new d.A({start:t[n].start,stop:t[n].start,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data})),++n);n<t.length&&u.A.greaterThan(e.stop,t[n].stop);)o=!0,t.splice(n,1);return n<t.length&&e.stop.equals(t[n].stop)&&(o=!0,!e.isStopIncluded&&t[n].isStopIncluded?n+1<t.length&&t[n+1].start.equals(e.stop)&&t[n].data===t[n+1].data?(t.splice(n,1),t[n]=new d.A({start:t[n].start,stop:t[n].stop,isStartIncluded:!0,isStopIncluded:t[n].isStopIncluded,data:t[n].data})):t[n]=new d.A({start:e.stop,stop:e.stop,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data}):t.splice(n,1)),n<t.length&&(u.A.greaterThan(e.stop,t[n].start)||e.stop.equals(t[n].start)&&e.isStopIncluded&&t[n].isStartIncluded)&&(o=!0,t[n]=new d.A({start:e.stop,stop:t[n].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n].isStopIncluded,data:t[n].data})),o&&this._changedEvent.raiseEvent(this),o},g.prototype.intersect=function(e,t,n){if(!(0,r.A)(e))throw new a.A("other is required.");const i=new g;let o=0,s=0;const A=this._intervals,c=e._intervals;for(;o<A.length&&s<c.length;){const e=A[o],a=c[s];if(u.A.lessThan(e.stop,a.start))++o;else if(u.A.lessThan(a.stop,e.start))++s;else{if((0,r.A)(n)||(0,r.A)(t)&&t(e.data,a.data)||!(0,r.A)(t)&&a.data===e.data){const o=d.A.intersect(e,a,new d.A,n);o.isEmpty||i.addInterval(o,t)}u.A.lessThan(e.stop,a.stop)||e.stop.equals(a.stop)&&!e.isStopIncluded&&a.isStopIncluded?++o:++s}}return i},g.fromJulianDateArray=function(e,t){if(!(0,r.A)(e))throw new a.A("options is required.");if(!(0,r.A)(e.julianDates))throw new a.A("options.iso8601Array is required.");(0,r.A)(t)||(t=new g);const n=e.julianDates,i=n.length,o=e.dataCallback,s=e.isStartIncluded??!0,A=e.isStopIncluded??!0,c=e.leadingInterval??!1,u=e.trailingInterval??!1;let h,f=0;c&&(++f,h=new d.A({start:l.A.MINIMUM_VALUE,stop:n[0],isStartIncluded:!0,isStopIncluded:!s}),h.data=(0,r.A)(o)?o(h,t.length):t.length,t.addInterval(h));for(let e=0;e<i-1;++e){let a=n[e];const c=n[e+1];h=new d.A({start:a,stop:c,isStartIncluded:t.length!==f||s,isStopIncluded:e===i-2&&A}),h.data=(0,r.A)(o)?o(h,t.length):t.length,t.addInterval(h),a=c}return u&&(h=new d.A({start:n[i-1],stop:l.A.MAXIMUM_VALUE,isStartIncluded:!A,isStopIncluded:!0}),h.data=(0,r.A)(o)?o(h,t.length):t.length,t.addInterval(h)),t};const p=new A.A,m=[0,31,28,31,30,31,30,31,31,30,31,30,31];function _(e,t,n){(0,r.A)(n)||(n=new u.A),u.A.toGregorianDate(e,p);let i=p.millisecond+t.millisecond,o=p.second+t.second,a=p.minute+t.minute,s=p.hour+t.hour,A=p.day+t.day,l=p.month+t.month,d=p.year+t.year;for(i>=1e3&&(o+=Math.floor(i/1e3),i%=1e3),o>=60&&(a+=Math.floor(o/60),o%=60),a>=60&&(s+=Math.floor(a/60),a%=60),s>=24&&(A+=Math.floor(s/24),s%=24),m[2]=(0,c.A)(d)?29:28;A>m[l]||l>=13;)A>m[l]&&(A-=m[l],++l),l>=13&&(--l,d+=Math.floor(l/12),l%=12,++l),m[2]=(0,c.A)(d)?29:28;return p.millisecond=i,p.second=o,p.minute=a,p.hour=s,p.day=A,p.month=l,p.year=d,u.A.fromGregorianDate(p,n)}const I=new u.A,E=/P(?:([\d.,]+)Y)?(?:([\d.,]+)M)?(?:([\d.,]+)W)?(?:([\d.,]+)D)?(?:T(?:([\d.,]+)H)?(?:([\d.,]+)M)?(?:([\d.,]+)S)?)?/;function y(e,t){if(!(0,r.A)(e)||0===e.length)return!1;if(t.year=0,t.month=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.millisecond=0,"P"===e[0]){const n=e.match(E);if(!(0,r.A)(n))return!1;if((0,r.A)(n[1])&&(t.year=Number(n[1].replace(",","."))),(0,r.A)(n[2])&&(t.month=Number(n[2].replace(",","."))),(0,r.A)(n[3])&&(t.day=7*Number(n[3].replace(",","."))),(0,r.A)(n[4])&&(t.day+=Number(n[4].replace(",","."))),(0,r.A)(n[5])&&(t.hour=Number(n[5].replace(",","."))),(0,r.A)(n[6])&&(t.minute=Number(n[6].replace(",","."))),(0,r.A)(n[7])){const e=Number(n[7].replace(",","."));t.second=Math.floor(e),t.millisecond=e%1*1e3}}else"Z"!==e[e.length-1]&&(e+="Z"),u.A.toGregorianDate(u.A.fromIso8601(e,I),t);return t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond}const C=new A.A;g.fromIso8601=function(e,t){if(!(0,r.A)(e))throw new a.A("options is required.");if(!(0,r.A)(e.iso8601))throw new a.A("options.iso8601 is required.");const n=e.iso8601.split("/"),i=u.A.fromIso8601(n[0]),o=u.A.fromIso8601(n[1]),s=[];if(y(n[2],C)){let e=u.A.clone(i);for(s.push(e);u.A.compare(e,o)<0;)e=_(e,C),u.A.compare(o,e)<=0&&u.A.clone(o,e),s.push(e)}else s.push(i,o);return g.fromJulianDateArray({julianDates:s,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},g.fromIso8601DateArray=function(e,t){if(!(0,r.A)(e))throw new a.A("options is required.");if(!(0,r.A)(e.iso8601Dates))throw new a.A("options.iso8601Dates is required.");return g.fromJulianDateArray({julianDates:e.iso8601Dates.map(function(e){return u.A.fromIso8601(e)}),isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},g.fromIso8601DurationArray=function(e,t){if(!(0,r.A)(e))throw new a.A("options is required.");if(!(0,r.A)(e.epoch))throw new a.A("options.epoch is required.");if(!(0,r.A)(e.iso8601Durations))throw new a.A("options.iso8601Durations is required.");const n=e.epoch,i=e.iso8601Durations,o=e.relativeToPrevious??!1,s=[];let A,c;const l=i.length;for(let e=0;e<l;++e)(y(i[e],C)||0===e)&&(A=o&&(0,r.A)(c)?_(c,C):_(n,C),s.push(A),c=A);return g.fromJulianDateArray({julianDates:s,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};const b=g},710551:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(267980),o=n(491446),r=n(605971);const a={solve:function(e,t,n,a){if(!((0,o.A)(e)&&e instanceof Array))throw new r.A("The array lower is required.");if(!((0,o.A)(t)&&t instanceof Array))throw new r.A("The array diagonal is required.");if(!((0,o.A)(n)&&n instanceof Array))throw new r.A("The array upper is required.");if(!((0,o.A)(a)&&a instanceof Array))throw new r.A("The array right is required.");if(t.length!==a.length)throw new r.A("diagonal and right must have the same lengths.");if(e.length!==n.length)throw new r.A("lower and upper must have the same lengths.");if(e.length!==t.length-1)throw new r.A("lower and upper must be one less than the length of diagonal.");const s=new Array(n.length),A=new Array(a.length),c=new Array(a.length);let l,u;for(l=0;l<A.length;l++)A[l]=new i.A,c[l]=new i.A;for(s[0]=n[0]/t[0],A[0]=i.A.multiplyByScalar(a[0],1/t[0],A[0]),l=1;l<s.length;++l)u=1/(t[l]-s[l-1]*e[l-1]),s[l]=n[l]*u,A[l]=i.A.subtract(a[l],i.A.multiplyByScalar(A[l-1],e[l-1],A[l]),A[l]),A[l]=i.A.multiplyByScalar(A[l],u,A[l]);for(u=1/(t[l]-s[l-1]*e[l-1]),A[l]=i.A.subtract(a[l],i.A.multiplyByScalar(A[l-1],e[l-1],A[l]),A[l]),A[l]=i.A.multiplyByScalar(A[l],u,A[l]),c[c.length-1]=A[A.length-1],l=c.length-2;l>=0;--l)c[l]=i.A.subtract(A[l],i.A.multiplyByScalar(c[l+1],s[l],c[l]),c[l]);return c}}},566123:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:-1,PARTIAL:0,FULL:1})},660419:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(660662),o=n(267980),r=n(571804),a=n(915325),s=n(491446),A=n(605971),c=n(610750),l=n(944479),u=n(305439),d=n(46362),h=n(874915),g=n(367817),f=n(402330),p=n(769534),m=n(266180);const _=new o.A,I=new o.A,E=new o.A,y=new o.A,C=new o.A,b=new o.A,B=new o.A;function v(e){const t=(e=e??a.A.EMPTY_OBJECT).positions,n=e.maximumHeights,i=e.minimumHeights;if(!(0,s.A)(t))throw new A.A("options.positions is required.");if((0,s.A)(n)&&n.length!==t.length)throw new A.A("options.positions and options.maximumHeights must have the same length.");if((0,s.A)(i)&&i.length!==t.length)throw new A.A("options.positions and options.minimumHeights must have the same length.");const r=e.vertexFormat??p.A.DEFAULT,l=e.granularity??g.A.RADIANS_PER_DEGREE,u=e.ellipsoid??c.A.default;this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._vertexFormat=p.A.clone(r),this._granularity=l,this._ellipsoid=c.A.clone(u),this._workerName="createWallGeometry";let d=1+t.length*o.A.packedLength+2;(0,s.A)(i)&&(d+=i.length),(0,s.A)(n)&&(d+=n.length),this.packedLength=d+c.A.packedLength+p.A.packedLength+1}v.pack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("value is required");if(!(0,s.A)(t))throw new A.A("array is required");let i;n=n??0;const r=e._positions;let a=r.length;for(t[n++]=a,i=0;i<a;++i,n+=o.A.packedLength)o.A.pack(r[i],t,n);const l=e._minimumHeights;if(a=(0,s.A)(l)?l.length:0,t[n++]=a,(0,s.A)(l))for(i=0;i<a;++i)t[n++]=l[i];const u=e._maximumHeights;if(a=(0,s.A)(u)?u.length:0,t[n++]=a,(0,s.A)(u))for(i=0;i<a;++i)t[n++]=u[i];return c.A.pack(e._ellipsoid,t,n),n+=c.A.packedLength,p.A.pack(e._vertexFormat,t,n),t[n+=p.A.packedLength]=e._granularity,t};const w=c.A.clone(c.A.UNIT_SPHERE),T=new p.A,S={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:w,vertexFormat:T,granularity:void 0};v.unpack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("array is required");let i;t=t??0;let r=e[t++];const a=new Array(r);for(i=0;i<r;++i,t+=o.A.packedLength)a[i]=o.A.unpack(e,t);let l,u;if(r=e[t++],r>0)for(l=new Array(r),i=0;i<r;++i)l[i]=e[t++];if(r=e[t++],r>0)for(u=new Array(r),i=0;i<r;++i)u[i]=e[t++];const d=c.A.unpack(e,t,w);t+=c.A.packedLength;const h=p.A.unpack(e,t,T),g=e[t+=p.A.packedLength];return(0,s.A)(n)?(n._positions=a,n._minimumHeights=l,n._maximumHeights=u,n._ellipsoid=c.A.clone(d,n._ellipsoid),n._vertexFormat=p.A.clone(h,n._vertexFormat),n._granularity=g,n):(S.positions=a,S.minimumHeights=l,S.maximumHeights=u,S.granularity=g,new v(S))},v.fromConstantHeights=function(e){const t=(e=e??a.A.EMPTY_OBJECT).positions;if(!(0,s.A)(t))throw new A.A("options.positions is required.");let n,i;const o=e.minimumHeight,r=e.maximumHeight,c=(0,s.A)(o),l=(0,s.A)(r);if(c||l){const e=t.length;n=c?new Array(e):void 0,i=l?new Array(e):void 0;for(let t=0;t<e;++t)c&&(n[t]=o),l&&(i[t]=r)}return new v({positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid,vertexFormat:e.vertexFormat})},v.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,a=e._maximumHeights,A=e._vertexFormat,c=e._granularity,p=e._ellipsoid,v=m.A.computePositions(p,t,a,n,c,!0);if(!(0,s.A)(v))return;const w=v.bottomPositions,T=v.topPositions,S=v.numCorners;let x=T.length,D=2*x;const Q=A.position?new Float64Array(D):void 0,N=A.normal?new Float32Array(D):void 0,R=A.tangent?new Float32Array(D):void 0,M=A.bitangent?new Float32Array(D):void 0,L=A.st?new Float32Array(D/3*2):void 0;let P,O=0,F=0,U=0,k=0,G=0,H=B,V=b,z=C,j=!0;x/=3;let Y=0;const q=1/(x-S-1);for(P=0;P<x;++P){const e=3*P,t=o.A.fromArray(T,e,_),n=o.A.fromArray(w,e,I);if(A.position&&(Q[O++]=n.x,Q[O++]=n.y,Q[O++]=n.z,Q[O++]=t.x,Q[O++]=t.y,Q[O++]=t.z),A.st&&(L[G++]=Y,L[G++]=0,L[G++]=Y,L[G++]=1),A.normal||A.tangent||A.bitangent){let n=o.A.clone(o.A.ZERO,y);const i=o.A.subtract(t,p.geodeticSurfaceNormal(t,I),I);if(P+1<x&&(n=o.A.fromArray(T,e+3,y)),j){const e=o.A.subtract(n,t,E),r=o.A.subtract(i,t,_);H=o.A.normalize(o.A.cross(r,e,H),H),j=!1}o.A.equalsEpsilon(t,n,g.A.EPSILON10)?j=!0:(Y+=q,A.tangent&&(V=o.A.normalize(o.A.subtract(n,t,V),V)),A.bitangent&&(z=o.A.normalize(o.A.cross(H,V,z),z))),A.normal&&(N[F++]=H.x,N[F++]=H.y,N[F++]=H.z,N[F++]=H.x,N[F++]=H.y,N[F++]=H.z),A.tangent&&(R[k++]=V.x,R[k++]=V.y,R[k++]=V.z,R[k++]=V.x,R[k++]=V.y,R[k++]=V.z),A.bitangent&&(M[U++]=z.x,M[U++]=z.y,M[U++]=z.z,M[U++]=z.x,M[U++]=z.y,M[U++]=z.z)}}const W=new d.A;A.position&&(W.position=new u.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:Q})),A.normal&&(W.normal=new u.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:N})),A.tangent&&(W.tangent=new u.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:R})),A.bitangent&&(W.bitangent=new u.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:M})),A.st&&(W.st=new u.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:2,values:L}));const J=D/3;D-=6*(S+1);const K=h.A.createTypedArray(J,D);let X=0;for(P=0;P<J-2;P+=2){const e=P,t=P+2,n=o.A.fromArray(Q,3*e,_),i=o.A.fromArray(Q,3*t,I);if(o.A.equalsEpsilon(n,i,g.A.EPSILON10))continue;const r=P+1,a=P+3;K[X++]=r,K[X++]=e,K[X++]=a,K[X++]=a,K[X++]=e,K[X++]=t}return new l.A({attributes:W,indices:K,primitiveType:f.A.TRIANGLES,boundingSphere:new i.A.fromVertices(Q)})};const x=v},266180:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(263604),o=n(267980),r=n(336946),a=n(491446),s=n(367817),A=n(870349);const c={};function l(e,t){return s.A.equalsEpsilon(e.latitude,t.latitude,s.A.EPSILON10)&&s.A.equalsEpsilon(e.longitude,t.longitude,s.A.EPSILON10)}const u=new r.A,d=new r.A,h=new Array(2),g=new Array(2),f={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};c.computePositions=function(e,t,n,c,p,m){const _=function(e,t,n,s){const A=(t=(0,i.A)(t,o.A.equalsEpsilon)).length;if(A<2)return;const c=(0,a.A)(s),h=(0,a.A)(n),g=new Array(A),f=new Array(A),p=new Array(A),m=t[0];g[0]=m;const _=e.cartesianToCartographic(m,u);h&&(_.height=n[0]),f[0]=_.height,p[0]=c?s[0]:0;let I=f[0]===p[0],E=1;for(let i=1;i<A;++i){const o=t[i],a=e.cartesianToCartographic(o,d);h&&(a.height=n[i]),I=I&&0===a.height,l(_,a)?_.height<a.height&&(f[E-1]=a.height):(g[E]=o,f[E]=a.height,p[E]=c?s[i]:0,I=I&&f[E]===p[E],r.A.clone(a,_),++E)}return I||E<2?void 0:(g.length=E,f.length=E,p.length=E,{positions:g,topHeights:f,bottomHeights:p})}(e,t,n,c);if(!(0,a.A)(_))return;t=_.positions,n=_.topHeights,c=_.bottomHeights;const I=t.length,E=I-2;let y,C;const b=s.A.chordLength(p,e.maximumRadius),B=f;if(B.minDistance=b,B.ellipsoid=e,m){let e,i=0;for(e=0;e<I-1;e++)i+=A.A.numberOfPoints(t[e],t[e+1],b)+1;y=new Float64Array(3*i),C=new Float64Array(3*i);const o=h,r=g;B.positions=o,B.height=r;let a=0;for(e=0;e<I-1;e++){o[0]=t[e],o[1]=t[e+1],r[0]=n[e],r[1]=n[e+1];const i=A.A.generateArc(B);y.set(i,a),r[0]=c[e],r[1]=c[e+1],C.set(A.A.generateArc(B),a),a+=i.length}}else B.positions=t,B.height=n,y=new Float64Array(A.A.generateArc(B)),B.height=c,C=new Float64Array(A.A.generateArc(B));return{bottomPositions:C,topPositions:y,numCorners:E}};const p=c},903473:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(660662),o=n(267980),r=n(571804),a=n(915325),s=n(491446),A=n(605971),c=n(610750),l=n(944479),u=n(305439),d=n(46362),h=n(874915),g=n(367817),f=n(402330),p=n(266180);const m=new o.A,_=new o.A;function I(e){const t=(e=e??a.A.EMPTY_OBJECT).positions,n=e.maximumHeights,i=e.minimumHeights;if(!(0,s.A)(t))throw new A.A("options.positions is required.");if((0,s.A)(n)&&n.length!==t.length)throw new A.A("options.positions and options.maximumHeights must have the same length.");if((0,s.A)(i)&&i.length!==t.length)throw new A.A("options.positions and options.minimumHeights must have the same length.");const r=e.granularity??g.A.RADIANS_PER_DEGREE,l=e.ellipsoid??c.A.default;this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._granularity=r,this._ellipsoid=c.A.clone(l),this._workerName="createWallOutlineGeometry";let u=1+t.length*o.A.packedLength+2;(0,s.A)(i)&&(u+=i.length),(0,s.A)(n)&&(u+=n.length),this.packedLength=u+c.A.packedLength+1}I.pack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("value is required");if(!(0,s.A)(t))throw new A.A("array is required");let i;n=n??0;const r=e._positions;let a=r.length;for(t[n++]=a,i=0;i<a;++i,n+=o.A.packedLength)o.A.pack(r[i],t,n);const l=e._minimumHeights;if(a=(0,s.A)(l)?l.length:0,t[n++]=a,(0,s.A)(l))for(i=0;i<a;++i)t[n++]=l[i];const u=e._maximumHeights;if(a=(0,s.A)(u)?u.length:0,t[n++]=a,(0,s.A)(u))for(i=0;i<a;++i)t[n++]=u[i];return c.A.pack(e._ellipsoid,t,n),t[n+=c.A.packedLength]=e._granularity,t};const E=c.A.clone(c.A.UNIT_SPHERE),y={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:E,granularity:void 0};I.unpack=function(e,t,n){if(!(0,s.A)(e))throw new A.A("array is required");let i;t=t??0;let r=e[t++];const a=new Array(r);for(i=0;i<r;++i,t+=o.A.packedLength)a[i]=o.A.unpack(e,t);let l,u;if(r=e[t++],r>0)for(l=new Array(r),i=0;i<r;++i)l[i]=e[t++];if(r=e[t++],r>0)for(u=new Array(r),i=0;i<r;++i)u[i]=e[t++];const d=c.A.unpack(e,t,E),h=e[t+=c.A.packedLength];return(0,s.A)(n)?(n._positions=a,n._minimumHeights=l,n._maximumHeights=u,n._ellipsoid=c.A.clone(d,n._ellipsoid),n._granularity=h,n):(y.positions=a,y.minimumHeights=l,y.maximumHeights=u,y.granularity=h,new I(y))},I.fromConstantHeights=function(e){const t=(e=e??a.A.EMPTY_OBJECT).positions;if(!(0,s.A)(t))throw new A.A("options.positions is required.");let n,i;const o=e.minimumHeight,r=e.maximumHeight,c=(0,s.A)(o),l=(0,s.A)(r);if(c||l){const e=t.length;n=c?new Array(e):void 0,i=l?new Array(e):void 0;for(let t=0;t<e;++t)c&&(n[t]=o),l&&(i[t]=r)}return new I({positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid})},I.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,a=e._maximumHeights,A=e._granularity,c=e._ellipsoid,I=p.A.computePositions(c,t,a,n,A,!1);if(!(0,s.A)(I))return;const E=I.bottomPositions,y=I.topPositions;let C=y.length,b=2*C;const B=new Float64Array(b);let v,w=0;for(C/=3,v=0;v<C;++v){const e=3*v,t=o.A.fromArray(y,e,m),n=o.A.fromArray(E,e,_);B[w++]=n.x,B[w++]=n.y,B[w++]=n.z,B[w++]=t.x,B[w++]=t.y,B[w++]=t.z}const T=new d.A({position:new u.A({componentDatatype:r.A.DOUBLE,componentsPerAttribute:3,values:B})}),S=b/3;b=2*S-4+S;const x=h.A.createTypedArray(S,b);let D=0;for(v=0;v<S-2;v+=2){const e=v,t=v+2,n=o.A.fromArray(B,3*e,m),i=o.A.fromArray(B,3*t,_);if(o.A.equalsEpsilon(n,i,g.A.EPSILON10))continue;const r=v+1,a=v+3;x[D++]=r,x[D++]=e,x[D++]=r,x[D++]=a,x[D++]=e,x[D++]=t}return x[D++]=S-2,x[D++]=S-1,new l.A({attributes:T,indices:x,primitiveType:f.A.LINES,boundingSphere:new i.A.fromVertices(B)})};const C=I},41076:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(434067),o=n(915325),r=n(491446),a=n(610750),s=n(697422),A=n(414305);function c(e){if(e=e??o.A.EMPTY_OBJECT,this._ellipsoid=e.ellipsoid??a.A.default,this._numberOfLevelZeroTilesX=e.numberOfLevelZeroTilesX??1,this._numberOfLevelZeroTilesY=e.numberOfLevelZeroTilesY??1,this._projection=new A.A(this._ellipsoid),(0,r.A)(e.rectangleSouthwestInMeters)&&(0,r.A)(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{const e=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new i.A(-e,-e),this._rectangleNortheastInMeters=new i.A(e,e)}const t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new s.A(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),c.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},c.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},c.prototype.rectangleToNativeRectangle=function(e,t){const n=this._projection,i=n.project(s.A.southwest(e)),o=n.project(s.A.northeast(e));return(0,r.A)(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new s.A(i.x,i.y,o.x,o.y)},c.prototype.tileXYToNativeRectangle=function(e,t,n,i){const o=this.getNumberOfXTilesAtLevel(n),a=this.getNumberOfYTilesAtLevel(n),A=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,c=this._rectangleSouthwestInMeters.x+e*A,l=this._rectangleSouthwestInMeters.x+(e+1)*A,u=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/a,d=this._rectangleNortheastInMeters.y-t*u,h=this._rectangleNortheastInMeters.y-(t+1)*u;return(0,r.A)(i)?(i.west=c,i.south=h,i.east=l,i.north=d,i):new s.A(c,h,l,d)},c.prototype.tileXYToRectangle=function(e,t,n,o){const r=this.tileXYToNativeRectangle(e,t,n,o),a=this._projection,s=a.unproject(new i.A(r.west,r.south)),A=a.unproject(new i.A(r.east,r.north));return r.west=s.longitude,r.south=s.latitude,r.east=A.longitude,r.north=A.latitude,r},c.prototype.positionToTileXY=function(e,t,n){const o=this._rectangle;if(!s.A.contains(o,e))return;const a=this.getNumberOfXTilesAtLevel(t),A=this.getNumberOfYTilesAtLevel(t),c=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/a,l=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/A,u=this._projection.project(e);let d=(u.x-this._rectangleSouthwestInMeters.x)/c|0;d>=a&&(d=a-1);let h=(this._rectangleNortheastInMeters.y-u.y)/l|0;return h>=A&&(h=A-1),(0,r.A)(n)?(n.x=d,n.y=h,n):new i.A(d,h)};const l=c},635692:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(874915),r=n(402330);const a={createWireframeIndices:function(e,t,n){const a=(0,i.A)(n);return e===r.A.TRIANGLES?a?function(e,t){const n=t.length,i=o.A.createTypedArray(e,2*n);let r=0;for(let e=0;e<n;e+=3){const n=t[e],o=t[e+1],a=t[e+2];i[r++]=n,i[r++]=o,i[r++]=o,i[r++]=a,i[r++]=a,i[r++]=n}return i}(t,n):function(e){const t=o.A.createTypedArray(e,2*e),n=e;let i=0;for(let e=0;e<n;e+=3)t[i++]=e,t[i++]=e+1,t[i++]=e+1,t[i++]=e+2,t[i++]=e+2,t[i++]=e;return t}(t):e===r.A.TRIANGLE_STRIP?a?function(e,t){const n=t.length-2,i=2+4*n,r=o.A.createTypedArray(e,i);let a=0;r[a++]=t[0],r[a++]=t[1];for(let e=0;e<n;e++){const n=t[e],i=t[e+1],o=t[e+2];r[a++]=i,r[a++]=o,r[a++]=o,r[a++]=n}return r}(t,n):function(e){const t=e-2,n=2+4*t,i=o.A.createTypedArray(e,n);let r=0;i[r++]=0,i[r++]=1;for(let e=0;e<t;e++)i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=e;return i}(t):e===r.A.TRIANGLE_FAN?a?function(e,t){const n=t.length-2,i=2+4*n,r=o.A.createTypedArray(e,i);let a=0;const s=t[0];r[a++]=s,r[a++]=t[1];for(let e=0;e<n;e++){const n=t[e+1],i=t[e+2];r[a++]=n,r[a++]=i,r[a++]=i,r[a++]=s}return r}(t,n):function(e){const t=e-2,n=2+4*t,i=o.A.createTypedArray(e,n);let r=0;i[r++]=0,i[r++]=1;for(let e=0;e<t;e++)i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=0;return i}(t):void 0},getWireframeIndicesCount:function(e,t){return e===r.A.TRIANGLES?2*t:e===r.A.TRIANGLE_STRIP||e===r.A.TRIANGLE_FAN?2+4*(t-2):t}},s=a},702247:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){if(!(0,i.A)(t))return;const n=t.length;if(0===n)return;const o=e.length;e.length+=n;for(let i=0;i<n;i++)e[o+i]=t[i]}},394290:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(564453),o=n(915325);const r=function(e){return e=e??o.A.EMPTY_OBJECT,i.A.fromIonAssetId(2426648,{requestVertexNormals:e.requestVertexNormals??!1})}},75584:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(564453),o=n(915325),r=n(610750);const a=function(e){return e=e??o.A.EMPTY_OBJECT,i.A.fromIonAssetId(1,{requestVertexNormals:e.requestVertexNormals??!1,requestWaterMask:e.requestWaterMask??!1,ellipsoid:r.A.WGS84})}},223460:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(961645),o=n(267980),r=n(336946),a=n(367817);const s=32767,A=new r.A,c=new o.A,l=function(e,t,n,l,u){const d=e.length/3,h=e.subarray(0,d),g=e.subarray(d,2*d),f=e.subarray(2*d,3*d);i.A.zigZagDeltaDecode(h,g,f);const p=new Float64Array(e.length);for(let e=0;e<d;++e){const i=h[e],d=g[e],m=f[e],_=a.A.lerp(t.west,t.east,i/s),I=a.A.lerp(t.south,t.north,d/s),E=a.A.lerp(n,l,m/s),y=r.A.fromRadians(_,I,E,A),C=u.cartographicToCartesian(y,c);o.A.pack(C,p,3*e)}return p}},786101:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(605971),r=n(983884);const a=function(e,t){if(!(0,i.A)(e)||!(0,i.A)(t))throw new o.A("identifier and message are required.");(0,r.A)(e,t)}},522216:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e){let t;const n=e.name,o=e.message;t=(0,i.A)(n)&&(0,i.A)(o)?`${n}: ${o}`:e.toString();const r=e.stack;return(0,i.A)(r)&&(t+=`\n${r}`),t}},869467:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n){const i=new Uint8ClampedArray(e.buffer),o=new ImageData(i,t,n),r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").putImageData(o,0,0),r}},604752:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(241839);const o=function(e,t,n){return JSON.parse((0,i.A)(e,t,n))}},452684:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(241839);const o=function(e,t){return t=t??0,(0,i.A)(e,t,Math.min(4,e.length))}},241839:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(605971),r=n(123245);function a(e,t,n){if(!(0,i.A)(e))throw new o.A("uint8Array is required.");if(t<0)throw new o.A("byteOffset cannot be negative.");if(n<0)throw new o.A("byteLength cannot be negative.");if(t+n>e.byteLength)throw new o.A("sub-region exceeds array bounds.");return t=t??0,n=n??e.byteLength-t,e=e.subarray(t,t+n),a.decode(e)}function s(e,t,n){return t<=e&&e<=n}a.decodeWithTextDecoder=function(e){return new TextDecoder("utf-8").decode(e)},a.decodeWithFromCharCode=function(e){let t="";const n=function(e){let t=0,n=0,i=0,o=128,a=191;const A=[],c=e.length;for(let l=0;l<c;++l){const c=e[l];if(0===i){if(s(c,0,127)){A.push(c);continue}if(s(c,194,223)){i=1,t=31&c;continue}if(s(c,224,239)){224===c&&(o=160),237===c&&(a=159),i=2,t=15&c;continue}if(s(c,240,244)){240===c&&(o=144),244===c&&(a=143),i=3,t=7&c;continue}throw new r.A("String decoding failed.")}s(c,o,a)?(o=128,a=191,t=t<<6|63&c,++n,n===i&&(A.push(t),t=i=n=0)):(t=i=n=0,o=128,a=191,--l)}return A}(e),i=n.length;for(let e=0;e<i;++e){let i=n[e];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return t},"undefined"!=typeof TextDecoder?a.decode=a.decodeWithTextDecoder:a.decode=a.decodeWithFromCharCode;const A=a},404547:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(491446),r=n(744603);const a=function(e){const t=e.uint8Array,n=e.format,a=e.request,s=e.flipY??!1,A=e.skipColorSpaceConversion??!1;i.A.typeOf.object("uint8Array",t),i.A.typeOf.string("format",n);const c=new Blob([t],{type:n});let l;return r.A.supportsImageBitmapOptions().then(function(e){return e?Promise.resolve(r.A.createImageBitmapFromBlob(c,{flipY:s,premultiplyAlpha:!1,skipColorSpaceConversion:A})):(l=window.URL.createObjectURL(c),new r.A({url:l,request:a}).fetchImage({flipY:s,skipColorSpaceConversion:A}))}).then(function(e){return(0,o.A)(l)&&window.URL.revokeObjectURL(l),e}).catch(function(e){return(0,o.A)(l)&&window.URL.revokeObjectURL(l),Promise.reject(e)})}},108303:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(605971);const r=[],a=[];function s(e,t,n,i,o){if(i>=o)return;const A=Math.floor(.5*(i+o));s(e,t,n,i,A),s(e,t,n,A+1,o),function(e,t,n,i,o,s){const A=o-i+1,c=s-o,l=r,u=a;let d,h;for(d=0;d<A;++d)l[d]=e[i+d];for(h=0;h<c;++h)u[h]=e[o+h+1];d=0,h=0;for(let o=i;o<=s;++o){const i=l[d],r=u[h];d<A&&(h>=c||t(i,r,n)<=0)?(e[o]=i,++d):h<c&&(e[o]=r,++h)}}(e,t,n,i,A,o)}const A=function(e,t,n){if(!(0,i.A)(e))throw new o.A("array is required.");if(!(0,i.A)(t))throw new o.A("comparator is required.");const A=e.length,c=Math.ceil(.5*A);r.length=c,a.length=c,s(e,t,n,0,A-1),r.length=0,a.length=0}},983884:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(605971);const r={};function a(e,t){if(!(0,i.A)(e))throw new o.A("identifier is required.");(0,i.A)(r[e])||(r[e]=!0,console.warn(t??e))}a.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.",a.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored",a.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored",a.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";const s=a},271868:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(367817);const o=function(e){const t=document.createElement("canvas");return t.width=i.A.nextPowerOfTwo(e.width),t.height=i.A.nextPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}},252544:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(491446);function r(e,t,n){return e.length?function(e,t,n){const i=e[0],o=i.terrainProvider.requestTileGeometry(i.x,i.y,i.level);if(!o)return!1;let r;return r=n?o.then(s(i)):o.then(s(i)).catch(function(e){const t=e.positions;return function(){for(let e=0;e<t.length;++e)t[e].height=void 0}}(i)),e.shift(),t.push(r),!0}(e,t,n)?r(e,t,n):new Promise(function(e){setTimeout(e,100)}).then(()=>r(e,t,n)):Promise.resolve()}function a(e,t,n){const i=t.interpolateHeight(n,e.longitude,e.latitude);return void 0!==i&&(e.height=i,!0)}function s(e){const t=e.positions,n=e.tilingScheme.tileXYToRectangle(e.x,e.y,e.level);return function(i){let o=!1;for(let e=0;e<t.length;++e)if(!a(t[e],i,n)){o=!0;break}return o?i.createMesh({tilingScheme:e.tilingScheme,x:e.x,y:e.y,level:e.level,throttle:!1}).then(function(){for(let e=0;e<t.length;++e)a(t[e],i,n)}):Promise.resolve()}}const A=async function(e,t,n,a){return(0,o.A)(a)||(a=!1),i.A.typeOf.object("terrainProvider",e),i.A.typeOf.number("level",t),i.A.typeOf.bool("rejectOnTileFail",a),i.A.defined("positions",n),function(e,t,n,i){const a=e.tilingScheme;let s;const A=[],c={};for(s=0;s<n.length;++s){const i=a.positionToTileXY(n[s],t);if(!(0,o.A)(i))continue;const r=i.toString();if(!c.hasOwnProperty(r)){const n={x:i.x,y:i.y,level:t,tilingScheme:a,terrainProvider:e,positions:[]};c[r]=n,A.push(n)}c[r].positions.push(n[s])}const l=[];return r(A,l,i).then(function(){return Promise.all(l).then(function(){return n})})}(e,t,n,a)}},448871:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(434067),o=n(491446),r=n(605971),a=n(252544);const s=new i.A,A=async function e(t,n,i){if((0,o.A)(i)||(i=!1),!(0,o.A)(t))throw new r.A("terrainProvider is required.");if(!(0,o.A)(n))throw new r.A("positions is required.");const A=[],c=[],l=t.availability;if(!(0,o.A)(l))throw new r.A("sampleTerrainMostDetailed requires a terrain provider that has tile availability.");const u=[];for(let e=0;e<n.length;++e){const i=n[e],r=l.computeMaximumLevelAtPosition(i);if(c[e]=r,0===r){t.tilingScheme.positionToTileXY(i,1,s);const e=t.loadTileDataAvailability(s.x,s.y,1);(0,o.A)(e)&&u.push(e)}let a=A[r];(0,o.A)(a)||(A[r]=a=[]),a.push(i)}await Promise.all(u),await Promise.all(A.map(function(e,n){if((0,o.A)(e))return(0,a.A)(t,n,e,i)}));const d=[];for(let e=0;e<n.length;++e){const t=n[e];l.computeMaximumLevelAtPosition(t)!==c[e]&&d.push(t)}return d.length>0&&await e(t,d,i),n}},798777:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(288787),o=n(647934),r=n(434067),a=n(267980),s=n(41476),A=n(491446),c=n(677354),l=n(605971),u=n(853331),d=n(290176),h=n(63316),g=n(337632),f=n(742558),p=n(810600),m=n(46257),_=n(913419);const I=s.A.WHITE,E=a.A.ZERO,y=h.Ay.NONE,C=r.A.ZERO,b=a.A.ZERO,B=g.A.CENTER,v=f.A.CENTER,w=_.A.NONE,T=new a.A,S=new s.A,x=new a.A,D=new r.A,Q=new d.A,N=new d.A,R=new d.A,M=new o.A,L=new u.A;function P(e){this.entity=e,this.billboard=void 0,this.textureValue=void 0}function O(e,t){if(!(0,A.A)(e))throw new l.A("entityCluster is required.");if(!(0,A.A)(t))throw new l.A("entityCollection is required.");t.collectionChanged.addEventListener(O.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}function F(e,t,n){(0,A.A)(e)&&(e.billboard=void 0,n.removeBillboard(t))}O.prototype.update=function(e){if(!(0,A.A)(e))throw new l.A("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],r=o.entity,a=r._billboard;let s,c,l=o.billboard,u=r.isShowing&&r.isAvailable(e)&&m.A.getValueOrDefault(a._show,e,!0);if(u&&(c=m.A.getValueOrUndefined(r._position,e,T),s=m.A.getValueOrUndefined(a._image,e),u=(0,A.A)(c)&&(0,A.A)(s)),!u){F(o,r,n);continue}m.A.isConstant(r._position)||(n._clusterDirty=!0),(0,A.A)(l)||(l=n.getBillboard(r),l.id=r,o.billboard=l,o.textureValue=void 0),l.show=u,o.textureValue!==s&&(l.image=s,o.textureValue=s),l.position=c,l.color=m.A.getValueOrDefault(a._color,e,I,S),l.eyeOffset=m.A.getValueOrDefault(a._eyeOffset,e,E,x),l.heightReference=m.A.getValueOrDefault(a._heightReference,e,y),l.pixelOffset=m.A.getValueOrDefault(a._pixelOffset,e,C,D),l.scale=m.A.getValueOrDefault(a._scale,e,1),l.rotation=m.A.getValueOrDefault(a._rotation,e,0),l.alignedAxis=m.A.getValueOrDefault(a._alignedAxis,e,b),l.horizontalOrigin=m.A.getValueOrDefault(a._horizontalOrigin,e,B),l.verticalOrigin=m.A.getValueOrDefault(a._verticalOrigin,e,v),l.width=m.A.getValueOrUndefined(a._width,e),l.height=m.A.getValueOrUndefined(a._height,e),l.scaleByDistance=m.A.getValueOrUndefined(a._scaleByDistance,e,Q),l.translucencyByDistance=m.A.getValueOrUndefined(a._translucencyByDistance,e,N),l.pixelOffsetScaleByDistance=m.A.getValueOrUndefined(a._pixelOffsetScaleByDistance,e,R),l.sizeInMeters=m.A.getValueOrDefault(a._sizeInMeters,e,!1),l.distanceDisplayCondition=m.A.getValueOrUndefined(a._distanceDisplayCondition,e,L),l.disableDepthTestDistance=m.A.getValueOrUndefined(a._disableDepthTestDistance,e),l.splitDirection=m.A.getValueOrDefault(a._splitDirection,e,w);const d=m.A.getValueOrUndefined(a._imageSubRegion,e,M);(0,A.A)(d)&&l.setImageSubRegion(l.image,d)}return!0},O.prototype.getBoundingSphere=function(e,t){if(!(0,A.A)(e))throw new l.A("entity is required.");if(!(0,A.A)(t))throw new l.A("result is required.");const n=this._items.get(e.id);if(!(0,A.A)(n)||!(0,A.A)(n.billboard))return p.A.FAILED;const i=n.billboard;if(i.heightReference===h.Ay.NONE)t.center=a.A.clone(i.position,t.center);else{if(!(0,A.A)(i._clampedPosition))return p.A.PENDING;t.center=a.A.clone(i._clampedPosition,t.center)}return t.radius=0,p.A.DONE},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(O.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeBillboard(e[t]);return(0,c.A)(this)},O.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const a=this._items,s=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,A.A)(r._billboard)&&(0,A.A)(r._position)&&a.set(r.id,new P(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,A.A)(r._billboard)&&(0,A.A)(r._position)?a.contains(r.id)||a.set(r.id,new P(r)):(F(a.get(r.id),r,s),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],F(a.get(r.id),r,s),a.remove(r.id)};const U=O},810600:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({DONE:0,PENDING:1,FAILED:2})},467466:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(554630),o=n(854894),r=n(267980),a=n(369031),s=n(41476),A=n(433235),c=n(491446),l=n(605971),u=n(330926),d=n(75200),h=n(794554),g=n(32655),f=n(852575),p=n(708857),m=n(63316),_=n(551549),I=n(612123),E=n(312421),y=n(799086),C=n(286299),b=n(764729),B=n(46257);const v=r.A.ZERO,w=new r.A,T=new r.A,S=new s.A;function x(e){this.id=e,this.vertexFormat=void 0,this.dimensions=void 0,this.offsetAttribute=void 0}function D(e,t){C.A.call(this,{entity:e,scene:t,geometryOptions:new x(e),geometryPropertyName:"box",observedPropertyNames:["availability","position","orientation","box"]}),this._onEntityPropertyChanged(e,"box",e.box,void 0)}function Q(e,t,n){y.A.call(this,e,t,n)}(0,c.A)(Object.create)&&(D.prototype=Object.create(C.A.prototype),D.prototype.constructor=D),Object.defineProperties(D.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),D.prototype.createFillGeometryInstance=function(e){if(a.A.defined("time",e),!this._fillEnabled)throw new l.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o=new p.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),r=this._distanceDisplayConditionProperty.getValue(e),h={show:o,distanceDisplayCondition:u.A.fromDistanceDisplayCondition(r),color:void 0,offset:void 0};if(this._materialProperty instanceof E.A){let t;(0,c.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,S)),(0,c.A)(t)||(t=s.A.WHITE),h.color=A.A.fromColor(t)}return(0,c.A)(this._options.offsetAttribute)&&(h.offset=f.A.fromCartesian3(B.A.getValueOrDefault(this._terrainOffsetProperty,e,v,w))),new d.A({id:t,geometry:i.A.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.ellipsoid),attributes:h})},D.prototype.createOutlineGeometryInstance=function(e){if(a.A.defined("time",e),!this._outlineEnabled)throw new l.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=B.A.getValueOrDefault(this._outlineColorProperty,e,s.A.BLACK,S),r=this._distanceDisplayConditionProperty.getValue(e),h={show:new p.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:A.A.fromColor(i),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(r),offset:void 0};return(0,c.A)(this._options.offsetAttribute)&&(h.offset=f.A.fromCartesian3(B.A.getValueOrDefault(this._terrainOffsetProperty,e,v,w))),new d.A({id:t,geometry:o.A.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.ellipsoid),attributes:h})},D.prototype._computeCenter=function(e,t){return B.A.getValueOrUndefined(this._entity.position,e,t)},D.prototype._isHidden=function(e,t){return!(0,c.A)(t.dimensions)||!(0,c.A)(e.position)||C.A.prototype._isHidden.call(this,e,t)},D.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&B.A.isConstant(e.orientation)&&t.dimensions.isConstant&&B.A.isConstant(t.outlineWidth))},D.prototype._setStaticOptions=function(e,t){const n=B.A.getValueOrDefault(t.heightReference,g.A.MINIMUM_VALUE,m.Ay.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof E.A?I.A.VERTEX_FORMAT:_.A.MaterialSupport.TEXTURED.vertexFormat,i.dimensions=t.dimensions.getValue(g.A.MINIMUM_VALUE,i.dimensions),i.offsetAttribute=n!==m.Ay.NONE?h.A.ALL:void 0},D.prototype._onEntityPropertyChanged=b.A,D.DynamicGeometryUpdater=Q,(0,c.A)(Object.create)&&(Q.prototype=Object.create(y.A.prototype),Q.prototype.constructor=Q),Q.prototype._isHidden=function(e,t,n){const i=B.A.getValueOrUndefined(e.position,n,T),o=this._options.dimensions;return!(0,c.A)(i)||!(0,c.A)(o)||y.A.prototype._isHidden.call(this,e,t,n)},Q.prototype._setOptions=function(e,t,n){const i=B.A.getValueOrDefault(t.heightReference,n,m.Ay.NONE),o=this._options;o.dimensions=B.A.getValueOrUndefined(t.dimensions,n,o.dimensions),o.offsetAttribute=i!==m.Ay.NONE?h.A.ALL:void 0};const N=D},602941:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(955943),a=n(591978),s=n(886033),A=n(759078);function c(e,t,n){this._callback=void 0,this._isConstant=void 0,this._referenceFrame=n??s.A.FIXED,this._definitionChanged=new r.A,this.setCallback(e,t)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});const l=new a.A;c.prototype.getValue=function(e,t){return(0,i.A)(e)||(e=a.A.now(l)),this.getValueInReferenceFrame(e,s.A.FIXED,t)},c.prototype.setCallback=function(e,t){if(!(0,i.A)(e))throw new o.A("callback is required.");if(!(0,i.A)(t))throw new o.A("isConstant is required.");const n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)},c.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,i.A)(e))throw new o.A("time is required.");if(!(0,i.A)(t))throw new o.A("referenceFrame is required.");const r=this._callback(e,n);return A.A.convertToReferenceFrame(e,r,this._referenceFrame,t,n)},c.prototype.equals=function(e){return this===e||e instanceof c&&this._callback===e._callback&&this._isConstant===e._isConstant&&this._referenceFrame===e._referenceFrame};const u=c},10082:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(605971),r=n(955943),a=n(591978);function s(e,t){this._callback=void 0,this._isConstant=void 0,this._definitionChanged=new r.A,this.setCallback(e,t)}Object.defineProperties(s.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}});const A=new a.A;s.prototype.getValue=function(e,t){return(0,i.A)(e)||(e=a.A.now(A)),this._callback(e,t)},s.prototype.setCallback=function(e,t){if(!(0,i.A)(e))throw new o.A("callback is required.");if(!(0,i.A)(t))throw new o.A("isConstant is required.");const n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)},s.prototype.equals=function(e){return this===e||e instanceof s&&this._callback===e._callback&&this._isConstant===e._isConstant};const c=s},592493:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(288787),o=n(660662),r=n(491446),a=n(677354),s=n(605971),A=n(584164),c=n(744603),l=n(855927),u=n(810600),d=n(46257);const h=new A.A;function g(e,t){if(!(0,r.A)(e))throw new s.A("scene is required.");if(!(0,r.A)(t))throw new s.A("entityCollection is required.");t.collectionChanged.addEventListener(g.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._tilesetHash={},this._entitiesToVisualize=new i.A,this._onCollectionChanged(t,t.values,[],[])}function f(e,t,n,i){const o=n[t.id];(0,r.A)(o)&&((0,r.A)(o.tilesetPrimitive)&&i.removeAndDestroy(o.tilesetPrimitive),delete n[t.id])}async function p(e,t,n,i){t[n.id]={url:e.url,loadFail:!1};try{const o=await l.A.fromUrl(e);if(o.id=n,i.add(o),!(0,r.A)(t[n.id]))return;t[n.id].tilesetPrimitive=o}catch(e){console.error(e),t[n.id].loadFail=!0}}g.prototype.update=function(e){if(!(0,r.A)(e))throw new s.A("time is required.");const t=this._entitiesToVisualize.values,n=this._tilesetHash,i=this._primitives;for(let o=0,a=t.length;o<a;o++){const a=t[o],s=a._tileset;let A;const l=n[a.id],u=a.isShowing&&a.isAvailable(e)&&d.A.getValueOrDefault(s._show,e,!0);let g;u&&(g=a.computeModelMatrix(e,h),A=c.A.createIfNeeded(d.A.getValueOrUndefined(s._uri,e)));const f=(0,r.A)(l)?l.tilesetPrimitive:void 0;u?((0,r.A)(l)&&A.url===l.url||((0,r.A)(f)&&i.removeAndDestroy(f),delete n[a.id],p(A,n,a,i)),(0,r.A)(f)&&(f.show=!0,(0,r.A)(g)&&(f.modelMatrix=g),f.maximumScreenSpaceError=d.A.getValueOrDefault(s.maximumScreenSpaceError,e,f.maximumScreenSpaceError))):(0,r.A)(f)&&(f.show=!1)}return!0},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(g.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._tilesetHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)f(0,e[i],t,n);return(0,a.A)(this)},g.prototype.getBoundingSphere=function(e,t){if(!(0,r.A)(e))throw new s.A("entity is required.");if(!(0,r.A)(t))throw new s.A("result is required.");const n=this._tilesetHash[e.id];if(!(0,r.A)(n)||n.loadFail)return u.A.FAILED;const i=n.tilesetPrimitive;return(0,r.A)(i)?i.show?(o.A.clone(i.boundingSphere,t),u.A.DONE):u.A.FAILED:u.A.PENDING},g.prototype._onCollectionChanged=function(e,t,n,i){let o,a;const s=this._entitiesToVisualize,A=this._tilesetHash,c=this._primitives;for(o=t.length-1;o>-1;o--)a=t[o],(0,r.A)(a._tileset)&&s.set(a.id,a);for(o=i.length-1;o>-1;o--)a=i[o],(0,r.A)(a._tileset)?s.set(a.id,a):(f(0,a,A,c),s.remove(a.id));for(o=n.length-1;o>-1;o--)a=n[o],f(0,a,A,c),s.remove(a.id)};const m=g},403911:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(955943),a=n(591978),s=n(886033),A=n(98348),c=n(46257);function l(e){this._referenceFrame=e??s.A.FIXED,this._definitionChanged=new r.A,this._composite=new A.A,this._composite.definitionChanged.addEventListener(l.prototype._raiseDefinitionChanged,this)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(e){this._referenceFrame=e}}});const u=new a.A;l.prototype.getValue=function(e,t){return(0,i.A)(e)||(e=a.A.now(u)),this.getValueInReferenceFrame(e,s.A.FIXED,t)},l.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,i.A)(e))throw new o.A("time is required.");if(!(0,i.A)(t))throw new o.A("referenceFrame is required.");const r=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,i.A)(r))return r.getValueInReferenceFrame(e,t,n)},l.prototype.equals=function(e){return this===e||e instanceof l&&this._referenceFrame===e._referenceFrame&&this._composite.equals(e._composite,c.A.equals)},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const d=l},98348:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(955943),r=n(354975),a=n(591978),s=n(224847),A=n(46257);function c(){this._eventHelper=new r.A,this._definitionChanged=new o.A,this._intervals=new s.A,this._intervals.changedEvent.addEventListener(c.prototype._intervalsChanged,this)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}});const l=new a.A;c.prototype.getValue=function(e,t){(0,i.A)(e)||(e=a.A.now(l));const n=this._intervals.findDataForIntervalContainingDate(e);if((0,i.A)(n))return n.getValue(e,t)},c.prototype.equals=function(e){return this===e||e instanceof c&&this._intervals.equals(e._intervals,A.A.equals)},c.prototype._intervalsChanged=function(){!function(e,t,n,o){function r(){n.raiseEvent(e)}const a=[];t.removeAll();const s=o.length;for(let e=0;e<s;e++){const n=o.get(e);(0,i.A)(n.data)&&-1===a.indexOf(n.data)&&t.add(n.data.definitionChanged,r)}}(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)};const u=c},490869:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(564886),o=n(267980),r=n(369031),a=n(41476),s=n(433235),A=n(374273),c=n(686043),l=n(491446),u=n(605971),d=n(330926),h=n(75200),g=n(32655),f=n(852575),p=n(697422),m=n(708857),_=n(63316),I=n(551549),E=n(612123),y=n(312421),C=n(799086),b=n(286299),B=n(817634),v=n(46257);const w=new a.A,T=o.A.ZERO,S=new o.A,x=new p.A;function D(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.cornerType=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.offsetAttribute=void 0}function Q(e,t){B.A.call(this,{entity:e,scene:t,geometryOptions:new D(e),geometryPropertyName:"corridor",observedPropertyNames:["availability","corridor"]}),this._onEntityPropertyChanged(e,"corridor",e.corridor,void 0)}function N(e,t,n){C.A.call(this,e,t,n)}(0,l.A)(Object.create)&&(Q.prototype=Object.create(B.A.prototype),Q.prototype.constructor=Q),Q.prototype.createFillGeometryInstance=function(e){if(r.A.defined("time",e),!this._fillEnabled)throw new u.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:d.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof y.A){let t;(0,l.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,w)),(0,l.A)(t)||(t=a.A.WHITE),i.color=s.A.fromColor(t)}return(0,l.A)(this._options.offsetAttribute)&&(i.offset=f.A.fromCartesian3(v.A.getValueOrDefault(this._terrainOffsetProperty,e,T,S))),new h.A({id:t,geometry:new A.A(this._options),attributes:i})},Q.prototype.createOutlineGeometryInstance=function(e){if(r.A.defined("time",e),!this._outlineEnabled)throw new u.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=v.A.getValueOrDefault(this._outlineColorProperty,e,a.A.BLACK,w),o={show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.A.fromColor(i),distanceDisplayCondition:d.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0};return(0,l.A)(this._options.offsetAttribute)&&(o.offset=f.A.fromCartesian3(v.A.getValueOrDefault(this._terrainOffsetProperty,e,T,S))),new h.A({id:t,geometry:new c.A(this._options),attributes:o})},Q.prototype._computeCenter=function(e,t){const n=v.A.getValueOrUndefined(this._entity.corridor.positions,e);if((0,l.A)(n)&&0!==n.length)return o.A.clone(n[Math.floor(n.length/2)],t)},Q.prototype._isHidden=function(e,t){return!(0,l.A)(t.positions)||!(0,l.A)(t.width)||b.A.prototype._isHidden.call(this,e,t)},Q.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!v.A.isConstant(t.height)||!v.A.isConstant(t.extrudedHeight)||!v.A.isConstant(t.granularity)||!v.A.isConstant(t.width)||!v.A.isConstant(t.outlineWidth)||!v.A.isConstant(t.cornerType)||!v.A.isConstant(t.zIndex)||this._onTerrain&&!v.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof y.A)},Q.prototype._setStaticOptions=function(e,t){let n=v.A.getValueOrUndefined(t.height,g.A.MINIMUM_VALUE);const o=v.A.getValueOrDefault(t.heightReference,g.A.MINIMUM_VALUE,_.Ay.NONE);let r=v.A.getValueOrUndefined(t.extrudedHeight,g.A.MINIMUM_VALUE);const a=v.A.getValueOrDefault(t.extrudedHeightReference,g.A.MINIMUM_VALUE,_.Ay.NONE);(0,l.A)(r)&&!(0,l.A)(n)&&(n=0);const s=this._options;s.vertexFormat=this._materialProperty instanceof y.A?E.A.VERTEX_FORMAT:I.A.MaterialSupport.TEXTURED.vertexFormat,s.positions=t.positions.getValue(g.A.MINIMUM_VALUE,s.positions),s.width=t.width.getValue(g.A.MINIMUM_VALUE),s.granularity=v.A.getValueOrUndefined(t.granularity,g.A.MINIMUM_VALUE),s.cornerType=v.A.getValueOrUndefined(t.cornerType,g.A.MINIMUM_VALUE),s.offsetAttribute=B.A.computeGeometryOffsetAttribute(n,o,r,a),s.height=B.A.getGeometryHeight(n,o),r=B.A.getGeometryExtrudedHeight(r,a),r===B.A.CLAMP_TO_GROUND&&(r=i.A.getMinimumMaximumHeights(A.A.computeRectangle(s,x)).minimumTerrainHeight),s.extrudedHeight=r},Q.DynamicGeometryUpdater=N,(0,l.A)(Object.create)&&(N.prototype=Object.create(C.A.prototype),N.prototype.constructor=N),N.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,l.A)(i.positions)||!(0,l.A)(i.width)||C.A.prototype._isHidden.call(this,e,t,n)},N.prototype._setOptions=function(e,t,n){const o=this._options;let r=v.A.getValueOrUndefined(t.height,n);const a=v.A.getValueOrDefault(t.heightReference,n,_.Ay.NONE);let s=v.A.getValueOrUndefined(t.extrudedHeight,n);const c=v.A.getValueOrDefault(t.extrudedHeightReference,n,_.Ay.NONE);(0,l.A)(s)&&!(0,l.A)(r)&&(r=0),o.positions=v.A.getValueOrUndefined(t.positions,n),o.width=v.A.getValueOrUndefined(t.width,n),o.granularity=v.A.getValueOrUndefined(t.granularity,n),o.cornerType=v.A.getValueOrUndefined(t.cornerType,n),o.offsetAttribute=B.A.computeGeometryOffsetAttribute(r,a,s,c),o.height=B.A.getGeometryHeight(r,a),s=B.A.getGeometryExtrudedHeight(s,c),s===B.A.CLAMP_TO_GROUND&&(s=i.A.getMinimumMaximumHeights(A.A.computeRectangle(o,x)).minimumTerrainHeight),o.extrudedHeight=s};const R=Q},581225:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(267980),o=n(369031),r=n(41476),a=n(433235),s=n(317061),A=n(902503),c=n(491446),l=n(605971),u=n(330926),d=n(75200),h=n(794554),g=n(32655),f=n(852575),p=n(708857),m=n(63316),_=n(551549),I=n(612123),E=n(312421),y=n(799086),C=n(286299),b=n(764729),B=n(46257);const v=i.A.ZERO,w=new i.A,T=new i.A,S=new r.A;function x(e){this.id=e,this.vertexFormat=void 0,this.length=void 0,this.topRadius=void 0,this.bottomRadius=void 0,this.slices=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function D(e,t){C.A.call(this,{entity:e,scene:t,geometryOptions:new x(e),geometryPropertyName:"cylinder",observedPropertyNames:["availability","position","orientation","cylinder"]}),this._onEntityPropertyChanged(e,"cylinder",e.cylinder,void 0)}function Q(e,t,n){y.A.call(this,e,t,n)}(0,c.A)(Object.create)&&(D.prototype=Object.create(C.A.prototype),D.prototype.constructor=D),Object.defineProperties(D.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),D.prototype.createFillGeometryInstance=function(e){if(o.A.defined("time",e),!this._fillEnabled)throw new l.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new p.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),A=this._distanceDisplayConditionProperty.getValue(e),h={show:i,distanceDisplayCondition:u.A.fromDistanceDisplayCondition(A),color:void 0,offset:void 0};if(this._materialProperty instanceof E.A){let t;(0,c.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,S)),(0,c.A)(t)||(t=r.A.WHITE),h.color=a.A.fromColor(t)}return(0,c.A)(this._options.offsetAttribute)&&(h.offset=f.A.fromCartesian3(B.A.getValueOrDefault(this._terrainOffsetProperty,e,v,w))),new d.A({id:t,geometry:new s.A(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.ellipsoid),attributes:h})},D.prototype.createOutlineGeometryInstance=function(e){if(o.A.defined("time",e),!this._outlineEnabled)throw new l.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=B.A.getValueOrDefault(this._outlineColorProperty,e,r.A.BLACK,S),s=this._distanceDisplayConditionProperty.getValue(e),h={show:new p.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.A.fromColor(i),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(s),offset:void 0};return(0,c.A)(this._options.offsetAttribute)&&(h.offset=f.A.fromCartesian3(B.A.getValueOrDefault(this._terrainOffsetProperty,e,v,w))),new d.A({id:t,geometry:new A.A(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.ellipsoid),attributes:h})},D.prototype._computeCenter=function(e,t){return B.A.getValueOrUndefined(this._entity.position,e,t)},D.prototype._isHidden=function(e,t){return!(0,c.A)(e.position)||!(0,c.A)(t.length)||!(0,c.A)(t.topRadius)||!(0,c.A)(t.bottomRadius)||C.A.prototype._isHidden.call(this,e,t)},D.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&B.A.isConstant(e.orientation)&&t.length.isConstant&&t.topRadius.isConstant&&t.bottomRadius.isConstant&&B.A.isConstant(t.slices)&&B.A.isConstant(t.outlineWidth)&&B.A.isConstant(t.numberOfVerticalLines))},D.prototype._setStaticOptions=function(e,t){const n=B.A.getValueOrDefault(t.heightReference,g.A.MINIMUM_VALUE,m.Ay.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof E.A?I.A.VERTEX_FORMAT:_.A.MaterialSupport.TEXTURED.vertexFormat,i.length=t.length.getValue(g.A.MINIMUM_VALUE),i.topRadius=t.topRadius.getValue(g.A.MINIMUM_VALUE),i.bottomRadius=t.bottomRadius.getValue(g.A.MINIMUM_VALUE),i.slices=B.A.getValueOrUndefined(t.slices,g.A.MINIMUM_VALUE),i.numberOfVerticalLines=B.A.getValueOrUndefined(t.numberOfVerticalLines,g.A.MINIMUM_VALUE),i.offsetAttribute=n!==m.Ay.NONE?h.A.ALL:void 0},D.prototype._onEntityPropertyChanged=b.A,D.DynamicGeometryUpdater=Q,(0,c.A)(Object.create)&&(Q.prototype=Object.create(y.A.prototype),Q.prototype.constructor=Q),Q.prototype._isHidden=function(e,t,n){const i=this._options,o=B.A.getValueOrUndefined(e.position,n,T);return!(0,c.A)(o)||!(0,c.A)(i.length)||!(0,c.A)(i.topRadius)||!(0,c.A)(i.bottomRadius)||y.A.prototype._isHidden.call(this,e,t,n)},Q.prototype._setOptions=function(e,t,n){const i=B.A.getValueOrDefault(t.heightReference,n,m.Ay.NONE),o=this._options;o.length=B.A.getValueOrUndefined(t.length,n),o.topRadius=B.A.getValueOrUndefined(t.topRadius,n),o.bottomRadius=B.A.getValueOrUndefined(t.bottomRadius,n),o.slices=B.A.getValueOrUndefined(t.slices,n),o.numberOfVerticalLines=B.A.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=i!==m.Ay.NONE?h.A.ALL:void 0};const N=D},335557:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(677354),r=n(605971),a=n(955943),s=n(367817);function A(){this._dataSources=[],this._dataSourceAdded=new a.A,this._dataSourceRemoved=new a.A,this._dataSourceMoved=new a.A}function c(e,t){if(!(0,i.A)(t))throw new r.A("dataSource is required.");const n=e.indexOf(t);if(-1===n)throw new r.A("dataSource is not in this collection.");return n}function l(e,t,n){const i=e._dataSources,o=i.length-1;if((t=s.A.clamp(t,0,o))===(n=s.A.clamp(n,0,o)))return;const r=i[t];i[t]=i[n],i[n]=r,e.dataSourceMoved.raiseEvent(r,n,t)}Object.defineProperties(A.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}}),A.prototype.add=function(e){if(!(0,i.A)(e))throw new r.A("dataSource is required.");const t=this,n=this._dataSources;return Promise.resolve(e).then(function(e){return n===t._dataSources&&(t._dataSources.push(e),t._dataSourceAdded.raiseEvent(t,e)),e})},A.prototype.remove=function(e,t){t=t??!1;const n=this._dataSources.indexOf(e);return-1!==n&&(this._dataSources.splice(n,1),this._dataSourceRemoved.raiseEvent(this,e),t&&"function"==typeof e.destroy&&e.destroy(),!0)},A.prototype.removeAll=function(e){e=e??!1;const t=this._dataSources;for(let n=0,i=t.length;n<i;++n){const i=t[n];this._dataSourceRemoved.raiseEvent(this,i),e&&"function"==typeof i.destroy&&i.destroy()}this._dataSources=[]},A.prototype.contains=function(e){return-1!==this.indexOf(e)},A.prototype.indexOf=function(e){return this._dataSources.indexOf(e)},A.prototype.get=function(e){if(!(0,i.A)(e))throw new r.A("index is required.");return this._dataSources[e]},A.prototype.getByName=function(e){if(!(0,i.A)(e))throw new r.A("name is required.");return this._dataSources.filter(function(t){return t.name===e})},A.prototype.raise=function(e){const t=c(this._dataSources,e);l(this,t,t+1)},A.prototype.lower=function(e){const t=c(this._dataSources,e);l(this,t,t-1)},A.prototype.raiseToTop=function(e){const t=c(this._dataSources,e);t!==this._dataSources.length-1&&(this._dataSources.splice(t,1),this._dataSources.push(e),this.dataSourceMoved.raiseEvent(e,this._dataSources.length-1,t))},A.prototype.lowerToBottom=function(e){const t=c(this._dataSources,e);0!==t&&(this._dataSources.splice(t,1),this._dataSources.splice(0,0,e),this.dataSourceMoved.raiseEvent(e,0,t))},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this.removeAll(!0),(0,o.A)(this)};const u=A},720567:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(564886),o=n(660662),r=n(369031),a=n(491446),s=n(677354),A=n(354975),c=n(433052),l=n(623e3),u=n(736125),d=n(493721),h=n(798777),g=n(810600),f=n(755394),p=n(253560),m=n(417496),_=n(963503),I=n(592493),E=n(563051),y=n(364360),C=n(302656);function b(e){r.A.typeOf.object("options",e),r.A.typeOf.object("options.scene",e.scene),r.A.typeOf.object("options.dataSourceCollection",e.dataSourceCollection),l.A.initializeTerrainHeights(),c.A.initializeTerrainHeights();const t=e.scene,n=e.dataSourceCollection;this._eventHelper=new A.A,this._eventHelper.add(n.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(n.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(n.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(t.postRender,this._postRender,this),this._dataSourceCollection=n,this._scene=t,this._visualizersCallback=e.visualizersCallback??b.defaultVisualizersCallback;let i=!1;const o=new d.A,a=new d.A;n.length>0&&(t.primitives.add(o),t.groundPrimitives.add(a),i=!0),this._primitives=o,this._groundPrimitives=a;for(let e=0,t=n.length;e<t;e++)this._onDataSourceAdded(n,n.get(e));const s=new f.A;let u,h;if(this._onDataSourceAdded(void 0,s),this._defaultDataSource=s,!i){const e=this,i=function(){t.primitives.add(o),t.groundPrimitives.add(a),u(),h(),e._removeDefaultDataSourceListener=void 0,e._removeDataSourceCollectionListener=void 0};u=s.entities.collectionChanged.addEventListener(i),h=n.dataSourceAdded.addEventListener(i)}this._removeDefaultDataSourceListener=u,this._removeDataSourceCollectionListener=h,this._ready=!1}const B=[];b.registerVisualizer=function(e){B.includes(e)||B.push(e)},b.unregisterVisualizer=function(e){if(B.includes(e)){const t=B.indexOf(e);B.splice(t,1)}},b.defaultVisualizersCallback=function(e,t,n){const i=n.entities;return[new h.A(t,i),new p.A(e,i,n._primitives,n._groundPrimitives),new m.A(t,i),new _.A(e,i),new I.A(e,i),new y.A(t,i),new E.A(e,i),new C.A(e,i,n._primitives,n._groundPrimitives),...B.map(t=>new t(e,i))]},Object.defineProperties(b.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){this._eventHelper.removeAll();const e=this._dataSourceCollection;for(let t=0,n=e.length;t<n;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),(0,a.A)(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),(0,s.A)(this)},b.prototype.update=function(e){if(r.A.defined("time",e),!i.A.initialized)return this._ready=!1,!1;let t,n,o,s,A=!0;const c=this._dataSourceCollection,l=c.length;for(t=0;t<l;t++){const i=c.get(t);for((0,a.A)(i.update)&&(A=i.update(e)&&A),o=i._visualizers,s=o.length,n=0;n<s;n++)A=o[n].update(e)&&A}for(o=this._defaultDataSource._visualizers,s=o.length,n=0;n<s;n++)A=o[n].update(e)&&A;return!this._ready&&A&&this._scene.requestRender(),this._ready=this._ready||A,A},b.prototype._postRender=function(){const e=this._scene.frameState,t=this._dataSourceCollection,n=t.length;for(let i=0;i<n;i++){const n=t.get(i),o=n.credit;(0,a.A)(o)&&e.creditDisplay.addCreditToNextFrame(o);const r=n._resourceCredits;if((0,a.A)(r)){const t=r.length;for(let n=0;n<t;n++)e.creditDisplay.addCreditToNextFrame(r[n])}}};const v=[],w=new o.A;b.prototype.getBoundingSphere=function(e,t,n){if(r.A.defined("entity",e),r.A.typeOf.bool("allowPartial",t),r.A.defined("result",n),!this._ready)return g.A.PENDING;let i,s,A=this._defaultDataSource;if(!A.entities.contains(e)){A=void 0;const t=this._dataSourceCollection;for(s=t.length,i=0;i<s;i++){const n=t.get(i);if(n.entities.contains(e)){A=n;break}}}if(!(0,a.A)(A))return g.A.FAILED;const c=v,l=w;let u=0,d=g.A.DONE;const h=A._visualizers,f=h.length;for(i=0;i<f;i++){const n=h[i];if((0,a.A)(n.getBoundingSphere)){if(d=h[i].getBoundingSphere(e,l),!t&&d===g.A.PENDING)return g.A.PENDING;d===g.A.DONE&&(c[u]=o.A.clone(l,c[u]),u++)}}return 0===u?g.A.FAILED:(c.length=u,o.A.fromBoundingSpheres(c,n),g.A.DONE)},b.prototype._onDataSourceAdded=function(e,t){const n=this._scene,i=this._primitives,o=this._groundPrimitives,r=i.add(new d.A),a=o.add(new u.A);t._primitives=r,t._groundPrimitives=a;const s=t.clustering;s._initialize(n),r.add(s),t._visualizers=this._visualizersCallback(n,s,t)},b.prototype._onDataSourceRemoved=function(e,t){const n=this._primitives,i=this._groundPrimitives,o=t._primitives,r=t._groundPrimitives,a=t.clustering;o.remove(a);const s=t._visualizers,A=s.length;for(let e=0;e<A;e++)s[e].destroy();n.remove(o),i.remove(r),t._visualizers=void 0},b.prototype._onDataSourceMoved=function(e,t,n){const i=this._primitives,o=this._groundPrimitives,r=e._primitives,a=e._groundPrimitives;t===n+1?(i.raise(r),o.raise(a)):t===n-1?(i.lower(r),o.lower(a)):0===t?(i.lowerToBottom(r),o.lowerToBottom(a),i.raise(r),o.raise(a)):(i.raiseToTop(r),o.raiseToTop(a))};const T=b},345747:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(288787),o=n(491446),r=n(810600);function a(e,t){this._primitives=e,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new i.A}a.prototype.add=function(e,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},a.prototype.remove=function(e){const t=e.id,n=this._dynamicUpdaters.get(t);(0,o.A)(n)&&(this._dynamicUpdaters.remove(t),n.destroy())},a.prototype.update=function(e){const t=this._dynamicUpdaters.values;for(let n=0,i=t.length;n<i;n++)t[n].update(e);return!0},a.prototype.removeAllPrimitives=function(){const e=this._dynamicUpdaters.values;for(let t=0,n=e.length;t<n;t++)e[t].destroy();this._dynamicUpdaters.removeAll()},a.prototype.getBoundingSphere=function(e,t){return e=this._dynamicUpdaters.get(e.id),(0,o.A)(e)&&(0,o.A)(e.getBoundingSphere)?e.getBoundingSphere(t):r.A.FAILED};const s=a},799086:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(660662),o=n(369031),r=n(491446),a=n(677354),s=n(605971),A=n(623e3),c=n(551549),l=n(612123),u=n(842153),d=n(810600),h=n(312421),g=n(644736),f=n(46257);function p(e,t,n){o.A.defined("geometryUpdater",e),o.A.defined("primitives",t),o.A.defined("orderedGroundPrimitives",n),this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}p.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!f.A.getValueOrDefault(t.show,n,!0)},p.prototype._setOptions=s.A.throwInstantiationError,p.prototype.update=function(e){o.A.defined("time",e);const t=this._geometryUpdater,n=t._onTerrain,i=this._primitives,a=this._orderedGroundPrimitives;n?a.remove(this._primitive):(i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;const s=this._entity,d=s[this._geometryUpdater._geometryPropertyName];if(this._setOptions(s,d,e),this._isHidden(s,d,e))return;const p=this._geometryUpdater.shadowsProperty.getValue(e),m=this._options;if(!(0,r.A)(d.fill)||d.fill.getValue(e)){const o=t.fillMaterialProperty,r=o instanceof h.A;let s;const d=t._getIsClosed(m);if(r)s=new l.A({closed:d,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{const t=g.A.getValue(e,o,this._material);this._material=t,s=new c.A({material:t,translucent:t.isTranslucent(),closed:d})}if(n)m.vertexFormat=l.A.VERTEX_FORMAT,this._primitive=a.add(new A.A({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:s,asynchronous:!1,shadows:p,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),f.A.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{m.vertexFormat=s.vertexFormat;const t=this._geometryUpdater.createFillGeometryInstance(e);r&&(s.translucent=255!==t.attributes.color.value[3]),this._primitive=i.add(new u.A({geometryInstances:t,appearance:s,asynchronous:!1,shadows:p}))}}if(!n&&(0,r.A)(d.outline)&&d.outline.getValue(e)){const n=this._geometryUpdater.createOutlineGeometryInstance(e),o=f.A.getValueOrDefault(d.outlineWidth,e,1);this._outlinePrimitive=i.add(new u.A({geometryInstances:n,appearance:new l.A({flat:!0,translucent:255!==n.attributes.color.value[3],renderState:{lineWidth:t._scene.clampLineWidth(o)}}),asynchronous:!1,shadows:p}))}},p.prototype.getBoundingSphere=function(e){if(!(0,r.A)(e))throw new s.A("result is required.");const t=this._entity,n=this._primitive,o=this._outlinePrimitive;let a;return(0,r.A)(n)&&n.show&&n.ready&&(a=n.getGeometryInstanceAttributes(t),(0,r.A)(a)&&(0,r.A)(a.boundingSphere))||(0,r.A)(o)&&o.show&&o.ready&&(a=o.getGeometryInstanceAttributes(t),(0,r.A)(a)&&(0,r.A)(a.boundingSphere))?(i.A.clone(a.boundingSphere,e),d.A.DONE):(0,r.A)(n)&&!n.ready||(0,r.A)(o)&&!o.ready?d.A.PENDING:d.A.FAILED},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){const e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),(0,a.A)(this)};const m=p},584295:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(564886),o=n(267980),r=n(369031),a=n(41476),s=n(433235),A=n(491446),c=n(605971),l=n(330926),u=n(602317),d=n(692095),h=n(75200),g=n(32655),f=n(852575),p=n(697422),m=n(708857),_=n(63316),I=n(551549),E=n(612123),y=n(312421),C=n(799086),b=n(286299),B=n(817634),v=n(46257);const w=new a.A,T=o.A.ZERO,S=new o.A,x=new p.A;function D(e){this.id=e,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function Q(e,t){B.A.call(this,{entity:e,scene:t,geometryOptions:new D(e),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(e,"ellipse",e.ellipse,void 0)}function N(e,t,n){C.A.call(this,e,t,n)}(0,A.A)(Object.create)&&(Q.prototype=Object.create(B.A.prototype),Q.prototype.constructor=Q),Q.prototype.createFillGeometryInstance=function(e){if(r.A.defined("time",e),!this._fillEnabled)throw new c.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:l.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof y.A){let t;(0,A.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,w)),(0,A.A)(t)||(t=a.A.WHITE),i.color=s.A.fromColor(t)}return(0,A.A)(this._options.offsetAttribute)&&(i.offset=f.A.fromCartesian3(v.A.getValueOrDefault(this._terrainOffsetProperty,e,T,S))),new h.A({id:t,geometry:new u.A(this._options),attributes:i})},Q.prototype.createOutlineGeometryInstance=function(e){if(r.A.defined("time",e),!this._outlineEnabled)throw new c.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=v.A.getValueOrDefault(this._outlineColorProperty,e,a.A.BLACK,w),o=this._distanceDisplayConditionProperty.getValue(e),u={show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:s.A.fromColor(i),distanceDisplayCondition:l.A.fromDistanceDisplayCondition(o),offset:void 0};return(0,A.A)(this._options.offsetAttribute)&&(u.offset=f.A.fromCartesian3(v.A.getValueOrDefault(this._terrainOffsetProperty,e,T,S))),new h.A({id:t,geometry:new d.A(this._options),attributes:u})},Q.prototype._computeCenter=function(e,t){return v.A.getValueOrUndefined(this._entity.position,e,t)},Q.prototype._isHidden=function(e,t){const n=e.position;return!(0,A.A)(n)||!(0,A.A)(t.semiMajorAxis)||!(0,A.A)(t.semiMinorAxis)||b.A.prototype._isHidden.call(this,e,t)},Q.prototype._isDynamic=function(e,t){return!e.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!v.A.isConstant(t.rotation)||!v.A.isConstant(t.height)||!v.A.isConstant(t.extrudedHeight)||!v.A.isConstant(t.granularity)||!v.A.isConstant(t.stRotation)||!v.A.isConstant(t.outlineWidth)||!v.A.isConstant(t.numberOfVerticalLines)||!v.A.isConstant(t.zIndex)||this._onTerrain&&!v.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof y.A)},Q.prototype._setStaticOptions=function(e,t){let n=v.A.getValueOrUndefined(t.height,g.A.MINIMUM_VALUE);const o=v.A.getValueOrDefault(t.heightReference,g.A.MINIMUM_VALUE,_.Ay.NONE);let r=v.A.getValueOrUndefined(t.extrudedHeight,g.A.MINIMUM_VALUE);const a=v.A.getValueOrDefault(t.extrudedHeightReference,g.A.MINIMUM_VALUE,_.Ay.NONE);(0,A.A)(r)&&!(0,A.A)(n)&&(n=0);const s=this._options;s.vertexFormat=this._materialProperty instanceof y.A?E.A.VERTEX_FORMAT:I.A.MaterialSupport.TEXTURED.vertexFormat,s.center=e.position.getValue(g.A.MINIMUM_VALUE,s.center),s.semiMajorAxis=t.semiMajorAxis.getValue(g.A.MINIMUM_VALUE,s.semiMajorAxis),s.semiMinorAxis=t.semiMinorAxis.getValue(g.A.MINIMUM_VALUE,s.semiMinorAxis),s.rotation=v.A.getValueOrUndefined(t.rotation,g.A.MINIMUM_VALUE),s.granularity=v.A.getValueOrUndefined(t.granularity,g.A.MINIMUM_VALUE),s.stRotation=v.A.getValueOrUndefined(t.stRotation,g.A.MINIMUM_VALUE),s.numberOfVerticalLines=v.A.getValueOrUndefined(t.numberOfVerticalLines,g.A.MINIMUM_VALUE),s.offsetAttribute=B.A.computeGeometryOffsetAttribute(n,o,r,a),s.height=B.A.getGeometryHeight(n,o),r=B.A.getGeometryExtrudedHeight(r,a),r===B.A.CLAMP_TO_GROUND&&(r=i.A.getMinimumMaximumHeights(u.A.computeRectangle(s,x)).minimumTerrainHeight),s.extrudedHeight=r},Q.DynamicGeometryUpdater=N,(0,A.A)(Object.create)&&(N.prototype=Object.create(C.A.prototype),N.prototype.constructor=N),N.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,A.A)(i.center)||!(0,A.A)(i.semiMajorAxis)||!(0,A.A)(i.semiMinorAxis)||C.A.prototype._isHidden.call(this,e,t,n)},N.prototype._setOptions=function(e,t,n){const o=this._options;let r=v.A.getValueOrUndefined(t.height,n);const a=v.A.getValueOrDefault(t.heightReference,n,_.Ay.NONE);let s=v.A.getValueOrUndefined(t.extrudedHeight,n);const c=v.A.getValueOrDefault(t.extrudedHeightReference,n,_.Ay.NONE);(0,A.A)(s)&&!(0,A.A)(r)&&(r=0),o.center=v.A.getValueOrUndefined(e.position,n,o.center),o.semiMajorAxis=v.A.getValueOrUndefined(t.semiMajorAxis,n),o.semiMinorAxis=v.A.getValueOrUndefined(t.semiMinorAxis,n),o.rotation=v.A.getValueOrUndefined(t.rotation,n),o.granularity=v.A.getValueOrUndefined(t.granularity,n),o.stRotation=v.A.getValueOrUndefined(t.stRotation,n),o.numberOfVerticalLines=v.A.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=B.A.computeGeometryOffsetAttribute(r,a,s,c),o.height=B.A.getGeometryHeight(r,a),s=B.A.getGeometryExtrudedHeight(s,c),s===B.A.CLAMP_TO_GROUND&&(s=i.A.getMinimumMaximumHeights(u.A.computeRectangle(o,x)).minimumTerrainHeight),o.extrudedHeight=s};const R=Q},754462:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(267980),o=n(369031),r=n(41476),a=n(433235),s=n(491446),A=n(853331),c=n(330926),l=n(87762),u=n(594706),d=n(75200),h=n(794554),g=n(32655),f=n(584164),p=n(852575),m=n(708857),_=n(63316),I=n(551549),E=n(612123),y=n(842153),C=n(62467),b=n(312421),B=n(799086),v=n(286299),w=n(764729),T=n(644736),S=n(46257);const x=new b.A(r.A.WHITE),D=i.A.ZERO,Q=new i.A,N=new i.A,R=new i.A,M=new r.A,L=new i.A(1,1,1);function P(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function O(e,t){v.A.call(this,{entity:e,scene:t,geometryOptions:new P(e),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(e,"ellipsoid",e.ellipsoid,void 0)}function F(e,t,n){B.A.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new f.A,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new i.A,this._material={}}(0,s.A)(Object.create)&&(O.prototype=Object.create(v.A.prototype),O.prototype.constructor=O),Object.defineProperties(O.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),O.prototype.createFillGeometryInstance=function(e,t,n){o.A.defined("time",e);const i=this._entity,A=i.isAvailable(e);let u;const h=new m.A(A&&i.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),g=this._distanceDisplayConditionProperty.getValue(e),f={show:h,distanceDisplayCondition:c.A.fromDistanceDisplayCondition(g),color:void 0,offset:void 0};if(this._materialProperty instanceof b.A){let t;(0,s.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||A)&&(t=this._materialProperty.color.getValue(e,M)),(0,s.A)(t)||(t=r.A.WHITE),u=a.A.fromColor(t),f.color=u}return(0,s.A)(this._options.offsetAttribute)&&(f.offset=p.A.fromCartesian3(S.A.getValueOrDefault(this._terrainOffsetProperty,e,D,Q))),new d.A({id:i,geometry:new l.A(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.ellipsoid,n),attributes:f})},O.prototype.createOutlineGeometryInstance=function(e,t,n){o.A.defined("time",e);const i=this._entity,A=i.isAvailable(e),l=S.A.getValueOrDefault(this._outlineColorProperty,e,r.A.BLACK,M),h=this._distanceDisplayConditionProperty.getValue(e),g={show:new m.A(A&&i.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.A.fromColor(l),distanceDisplayCondition:c.A.fromDistanceDisplayCondition(h),offset:void 0};return(0,s.A)(this._options.offsetAttribute)&&(g.offset=p.A.fromCartesian3(S.A.getValueOrDefault(this._terrainOffsetProperty,e,D,Q))),new d.A({id:i,geometry:new u.A(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.ellipsoid,n),attributes:g})},O.prototype._computeCenter=function(e,t){return S.A.getValueOrUndefined(this._entity.position,e,t)},O.prototype._isHidden=function(e,t){return!(0,s.A)(e.position)||!(0,s.A)(t.radii)||v.A.prototype._isHidden.call(this,e,t)},O.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&S.A.isConstant(e.orientation)&&t.radii.isConstant&&S.A.isConstant(t.innerRadii)&&S.A.isConstant(t.stackPartitions)&&S.A.isConstant(t.slicePartitions)&&S.A.isConstant(t.outlineWidth)&&S.A.isConstant(t.minimumClock)&&S.A.isConstant(t.maximumClock)&&S.A.isConstant(t.minimumCone)&&S.A.isConstant(t.maximumCone)&&S.A.isConstant(t.subdivisions))},O.prototype._setStaticOptions=function(e,t){const n=S.A.getValueOrDefault(t.heightReference,g.A.MINIMUM_VALUE,_.Ay.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof b.A?E.A.VERTEX_FORMAT:I.A.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(g.A.MINIMUM_VALUE,i.radii),i.innerRadii=S.A.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=S.A.getValueOrUndefined(t.minimumClock,g.A.MINIMUM_VALUE),i.maximumClock=S.A.getValueOrUndefined(t.maximumClock,g.A.MINIMUM_VALUE),i.minimumCone=S.A.getValueOrUndefined(t.minimumCone,g.A.MINIMUM_VALUE),i.maximumCone=S.A.getValueOrUndefined(t.maximumCone,g.A.MINIMUM_VALUE),i.stackPartitions=S.A.getValueOrUndefined(t.stackPartitions,g.A.MINIMUM_VALUE),i.slicePartitions=S.A.getValueOrUndefined(t.slicePartitions,g.A.MINIMUM_VALUE),i.subdivisions=S.A.getValueOrUndefined(t.subdivisions,g.A.MINIMUM_VALUE),i.offsetAttribute=n!==_.Ay.NONE?h.A.ALL:void 0},O.prototype._onEntityPropertyChanged=w.A,O.DynamicGeometryUpdater=F,(0,s.A)(Object.create)&&(F.prototype=Object.create(B.A.prototype),F.prototype.constructor=F),F.prototype.update=function(e){o.A.defined("time",e);const t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!S.A.getValueOrDefault(n.show,e,!0))return(0,s.A)(this._primitive)&&(this._primitive.show=!1),void((0,s.A)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const l=S.A.getValueOrUndefined(n.radii,e,N);let u=(0,s.A)(l)?t.computeModelMatrixForHeightReference(e,n.heightReference,.5*l.z,this._scene.ellipsoid,this._modelMatrix):void 0;if(!(0,s.A)(u)||!(0,s.A)(l))return(0,s.A)(this._primitive)&&(this._primitive.show=!1),void((0,s.A)(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const d=S.A.getValueOrDefault(n.fill,e,!0),g=S.A.getValueOrDefault(n.outline,e,!1),b=S.A.getValueOrClonedDefault(n.outlineColor,e,r.A.BLACK,M),B=T.A.getValue(e,n.material??x,this._material),v=S.A.getValueOrUndefined(n.innerRadii,e,R),w=S.A.getValueOrUndefined(n.minimumClock,e),P=S.A.getValueOrUndefined(n.maximumClock,e),O=S.A.getValueOrUndefined(n.minimumCone,e),F=S.A.getValueOrUndefined(n.maximumCone,e),U=S.A.getValueOrUndefined(n.stackPartitions,e),k=S.A.getValueOrUndefined(n.slicePartitions,e),G=S.A.getValueOrUndefined(n.subdivisions,e),H=S.A.getValueOrDefault(n.outlineWidth,e,1),V=S.A.getValueOrDefault(n.heightReference,e,_.Ay.NONE),z=V!==_.Ay.NONE?h.A.ALL:void 0,j=this._scene.mode,Y=j===C.A.SCENE3D&&V===_.Ay.NONE,q=this._options,W=this._geometryUpdater.shadowsProperty.getValue(e),J=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),K=S.A.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,D,Q);if(!Y||this._lastSceneMode!==j||!(0,s.A)(this._primitive)||q.stackPartitions!==U||q.slicePartitions!==k||(0,s.A)(v)&&!i.A.equals(q.innerRadii!==v)||q.minimumClock!==w||q.maximumClock!==P||q.minimumCone!==O||q.maximumCone!==F||q.subdivisions!==G||this._lastOutlineWidth!==H||q.offsetAttribute!==z){const t=this._primitives;t.removeAndDestroy(this._primitive),t.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=j,this._lastOutlineWidth=H,q.stackPartitions=U,q.slicePartitions=k,q.subdivisions=G,q.offsetAttribute=z,q.radii=i.A.clone(Y?L:l,q.radii),(0,s.A)(v)?q.innerRadii=Y?i.A.fromElements(v.x/l.x,v.y/l.y,v.z/l.z,q.innerRadii):i.A.clone(v,q.innerRadii):q.innerRadii=void 0,q.minimumClock=w,q.maximumClock=P,q.minimumCone=O,q.maximumCone=F;const n=new I.A({material:B,translucent:B.isTranslucent(),closed:!0});q.vertexFormat=n.vertexFormat;const o=this._geometryUpdater.createFillGeometryInstance(e,Y,this._modelMatrix);this._primitive=t.add(new y.A({geometryInstances:o,appearance:n,asynchronous:!1,shadows:W}));const a=this._geometryUpdater.createOutlineGeometryInstance(e,Y,this._modelMatrix);this._outlinePrimitive=t.add(new y.A({geometryInstances:a,appearance:new E.A({flat:!0,translucent:255!==a.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(H)}}),asynchronous:!1,shadows:W})),this._lastShow=d,this._lastOutlineShow=g,this._lastOutlineColor=r.A.clone(b,this._lastOutlineColor),this._lastDistanceDisplayCondition=J,this._lastOffset=i.A.clone(K,this._lastOffset)}else if(this._primitive.ready){const e=this._primitive,n=this._outlinePrimitive;e.show=!0,n.show=!0,e.appearance.material=B;let o=this._attributes;(0,s.A)(o)||(o=e.getGeometryInstanceAttributes(t),this._attributes=o),d!==this._lastShow&&(o.show=m.A.toValue(d,o.show),this._lastShow=d);let l=this._outlineAttributes;(0,s.A)(l)||(l=n.getGeometryInstanceAttributes(t),this._outlineAttributes=l),g!==this._lastOutlineShow&&(l.show=m.A.toValue(g,l.show),this._lastOutlineShow=g),r.A.equals(b,this._lastOutlineColor)||(l.color=a.A.toValue(b,l.color),r.A.clone(b,this._lastOutlineColor)),A.A.equals(J,this._lastDistanceDisplayCondition)||(o.distanceDisplayCondition=c.A.toValue(J,o.distanceDisplayCondition),l.distanceDisplayCondition=c.A.toValue(J,l.distanceDisplayCondition),A.A.clone(J,this._lastDistanceDisplayCondition)),i.A.equals(K,this._lastOffset)||(o.offset=p.A.toValue(K,o.offset),l.offset=p.A.toValue(K,o.offset),i.A.clone(K,this._lastOffset))}Y&&(l.x=Math.max(l.x,.001),l.y=Math.max(l.y,.001),l.z=Math.max(l.z,.001),u=f.A.multiplyByScale(u,l,u),this._primitive.modelMatrix=u,this._outlinePrimitive.modelMatrix=u)};const U=O},226698:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(267980),o=n(369031),r=n(491446),a=n(610750),s=n(805746),A=n(591978),c=n(367817),l=n(331185),u=n(584164),d=n(99479),h=n(73772),g=n(543622),f=n(62467),p=n(781745);const m=new l.A,_=new l.A,I=new l.A,E=new u.A,y=new i.A,C=new i.A,b=new i.A,B=new i.A,v=new i.A,w=new i.A,T=new d.A,S=new i.A,x=new l.A,D=new A.A;function Q(e,t,n){o.A.defined("entity",e),o.A.defined("scene",t),this.entity=e,this.scene=t,this.ellipsoid=n??a.A.default,this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new i.A,this._defaultOffset3D=void 0,this._velocityProperty=new p.A(e.position,!0),this._offset3D=new i.A}Object.defineProperties(Q,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(e){this._defaultOffset3D=i.A.clone(e,new i.A)}}}),Q.defaultOffset3D=new i.A(-14e3,3500,3500);const N=new s.A,R=new i.A;Q.prototype.update=function(e,t){o.A.defined("time",e);const n=this.scene,a=this.ellipsoid,s=n.mode;if(s===f.A.MORPHING)return;const d=this.entity,p=d.trackingReferenceFrame,M=d.position;if(!(0,r.A)(M))return;const L=this._velocityProperty,P=d.orientation,O=d!==this._lastEntity,F=s!==this._mode,U=n.camera;let k=O||F,G=!0;if(O){const n=d.viewFrom,o=(0,r.A)(n);if(!o&&(0,r.A)(t)){N.pitch=-c.A.PI_OVER_FOUR,N.range=0;const n=M.getValue(e,R);if((0,r.A)(n)){const e=2-1/Math.max(1,i.A.magnitude(n)/a.maximumRadius);N.pitch*=e}U.viewBoundingSphere(t,N),this.boundingSphere=t,k=!1,G=!1}else o&&(0,r.A)(n.getValue(e,this._offset3D))||i.A.clone(Q._defaultOffset3D,this._offset3D)}else F||this._mode===f.A.SCENE2D||i.A.clone(U.position,this._offset3D);this._lastEntity=d,this._mode=s,function(e,t,n,o,a,s,d,p,Q,N){const R=e.scene.mode;let M=a.getValue(Q,e._lastCartesian);if((0,r.A)(M)){let n,L,P,O,F,U,k=!1,G=!1;if(R===f.A.SCENE3D){A.A.addSeconds(Q,.001,D);let e=a.getValue(D,y);if((0,r.A)(e)||(A.A.addSeconds(Q,-.001,D),e=a.getValue(D,y),G=!0),(0,r.A)(e)){let t,o=g.A.computeFixedToIcrfMatrix(Q,m),a=g.A.computeFixedToIcrfMatrix(D,_);(0,r.A)(o)&&(0,r.A)(a)?t=l.A.transpose(o,I):(t=g.A.computeTemeToPseudoFixedMatrix(Q,I),o=l.A.transpose(t,m),a=g.A.computeTemeToPseudoFixedMatrix(D,_),l.A.transpose(a,a));const s=l.A.multiplyByVector(o,M,v),A=l.A.multiplyByVector(a,e,w);i.A.subtract(s,A,B);const u=1e3*i.A.magnitude(B),d=c.A.GRAVITATIONALPARAMETER,h=-d/(u*u-2*d/i.A.magnitude(s));h<0||h>1.25*N.maximumRadius?(n=C,i.A.normalize(M,n),i.A.negate(n,n),P=i.A.clone(i.A.UNIT_Z,b),L=i.A.cross(P,n,y),i.A.magnitude(L)>c.A.EPSILON7&&(i.A.normalize(n,n),i.A.normalize(L,L),P=i.A.cross(n,L,b),i.A.normalize(P,P),k=!0)):i.A.equalsEpsilon(M,e,c.A.EPSILON7)||(P=C,i.A.normalize(s,P),i.A.normalize(A,A),L=i.A.cross(P,A,b),G&&(L=i.A.multiplyByScalar(L,-1,L)),i.A.equalsEpsilon(L,i.A.ZERO,c.A.EPSILON7)||(n=i.A.cross(L,P,y),l.A.multiplyByVector(t,n,n),l.A.multiplyByVector(t,L,L),l.A.multiplyByVector(t,P,P),i.A.normalize(n,n),i.A.normalize(L,L),i.A.normalize(P,P),k=!0))}}(0,r.A)(e.boundingSphere)&&(M=e.boundingSphere.center),o&&(O=i.A.clone(t.position,B),F=i.A.clone(t.direction,v),U=i.A.clone(t.up,w));const H=E;let V;(0,r.A)(d)&&(V=d.getValue(Q,T));const z=s.getValue(Q,S);if(p===h.A.INERTIAL&&(0,r.A)(V))u.A.fromTranslationQuaternionRotationScale(M,V,i.A.ONE,H);else if(p===h.A.VELOCITY&&(0,r.A)(z)){const e=g.A.rotationMatrixFromPositionVelocity(M,z,N,x);u.A.fromRotationTranslation(e,M,H)}else p!==h.A.ENU&&k?(H[0]=n.x,H[1]=n.y,H[2]=n.z,H[3]=0,H[4]=L.x,H[5]=L.y,H[6]=L.z,H[7]=0,H[8]=P.x,H[9]=P.y,H[10]=P.z,H[11]=0,H[12]=M.x,H[13]=M.y,H[14]=M.z,H[15]=0):g.A.eastNorthUpToFixedFrame(M,N,H);t._setTransform(H),o&&(i.A.clone(O,t.position),i.A.clone(F,t.direction),i.A.clone(U,t.up),i.A.cross(F,U,t.right))}if(n){const n=R===f.A.SCENE2D||i.A.equals(e._offset3D,i.A.ZERO)?void 0:e._offset3D;t.lookAtTransform(t.transform,n)}}(this,U,k,G,M,L,P,p,e,a)};const M=Q},286299:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(369031),o=n(41476),r=n(491446),a=n(677354),s=n(605971),A=n(853331),c=n(955943),l=n(32655),u=n(983884),d=n(71578),h=n(988609),g=n(312421),f=n(969077),p=n(426807),m=n(46257);const _=new g.A(o.A.WHITE),I=new f.A(!0),E=new f.A(!0),y=new f.A(!1),C=new f.A(o.A.BLACK),b=new f.A(h.A.DISABLED),B=new f.A(new A.A),v=new f.A(d.A.BOTH);function w(e){i.A.defined("options.entity",e.entity),i.A.defined("options.scene",e.scene),i.A.defined("options.geometryOptions",e.geometryOptions),i.A.defined("options.geometryPropertyName",e.geometryPropertyName),i.A.defined("options.observedPropertyNames",e.observedPropertyNames);const t=e.entity,n=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new c.A,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=n,this._id=`${n}-${t.id}`,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=p.A.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(w.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,r.A)(this._entity.availability)&&m.A.isConstant(this._showProperty)&&m.A.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!(0,r.A)(this._entity.availability)&&m.A.isConstant(this._showProperty)&&m.A.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),w.prototype.isOutlineVisible=function(e){const t=this._entity;return(this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e))??!1},w.prototype.isFilled=function(e){const t=this._entity;return(this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e))??!1},w.prototype.createFillGeometryInstance=s.A.throwInstantiationError,w.prototype.createOutlineGeometryInstance=s.A.throwInstantiationError,w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){(0,a.A)(this)},w.prototype._isHidden=function(e,t){const n=t.show;return(0,r.A)(n)&&n.isConstant&&!n.getValue(l.A.MINIMUM_VALUE)},w.prototype._isOnTerrain=function(e,t){return!1},w.prototype._getIsClosed=function(e){return!0},w.prototype._isDynamic=s.A.throwInstantiationError,w.prototype._setStaticOptions=s.A.throwInstantiationError,w.prototype._onEntityPropertyChanged=function(e,t,n,i){if(-1===this._observedPropertyNames.indexOf(t))return;const o=this._entity[this._geometryPropertyName];if(!(0,r.A)(o))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const a=o.fill,s=!(0,r.A)(a)||!a.isConstant||a.getValue(l.A.MINIMUM_VALUE),A=o.outline;let c=(0,r.A)(A);if(c&&A.isConstant&&(c=A.getValue(l.A.MINIMUM_VALUE)),!s&&!c)return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const d=o.show;if(this._isHidden(e,o))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));this._materialProperty=o.material??_,this._fillProperty=a??E,this._showProperty=d??I,this._showOutlineProperty=o.outline??y,this._outlineColorProperty=c?o.outlineColor??C:void 0,this._shadowsProperty=o.shadows??b,this._distanceDisplayConditionProperty=o.distanceDisplayCondition??B,this._classificationTypeProperty=o.classificationType??v,this._fillEnabled=s;const h=this._isOnTerrain(e,o)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof g.A);if(c&&h&&((0,u.A)(u.A.geometryOutlines),c=!1),this._onTerrain=h,this._outlineEnabled=c,this._isDynamic(e,o))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,o),this._isClosed=this._getIsClosed(this._options);const t=o.outlineWidth;this._outlineWidth=(0,r.A)(t)?t.getValue(l.A.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}},w.prototype.createDynamicUpdater=function(e,t){if(i.A.defined("primitives",e),i.A.defined("groundPrimitives",t),!this._dynamic)throw new s.A("This instance does not represent dynamic geometry.");return new this.constructor.DynamicGeometryUpdater(this,e,t)};const T=w},867211:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(677354),o=n(955943),r=n(354975),a=n(467466),s=n(490869),A=n(581225),c=n(584295),l=n(754462),u=n(379843),d=n(570667),h=n(412605),g=n(459022),f=n(146511);const p=[a.A,A.A,s.A,c.A,l.A,u.A,d.A,h.A,g.A,f.A];function m(e,t){this.entity=e,this.scene=t;const n=new Array(p.length),i=new o.A,a=new r.A;for(let o=0;o<n.length;o++){const r=new p[o](e,t);a.add(r.geometryChanged,e=>{i.raiseEvent(e)}),n[o]=r}this.updaters=n,this.geometryChanged=i,this.eventHelper=a,this._removeEntitySubscription=e.definitionChanged.addEventListener(m.prototype._onEntityPropertyChanged,this)}m.prototype._onEntityPropertyChanged=function(e,t,n,i){const o=this.updaters;for(let r=0;r<o.length;r++)o[r]._onEntityPropertyChanged(e,t,n,i)},m.prototype.forEach=function(e){const t=this.updaters;for(let n=0;n<t.length;n++)e(t[n])},m.prototype.destroy=function(){this.eventHelper.removeAll();const e=this.updaters;for(let t=0;t<e.length;t++)e[t].destroy();this._removeEntitySubscription(),(0,i.A)(this)},m.registerUpdater=function(e){p.includes(e)||p.push(e)},m.unregisterUpdater=function(e){if(p.includes(e)){const t=p.indexOf(e);p.splice(t,1)}};const _=m},253560:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(288787),o=n(660662),r=n(369031),a=n(491446),s=n(677354),A=n(71578),c=n(551549),l=n(612123),u=n(988609),d=n(810600),h=n(312421),g=n(345747),f=n(426807),p=n(867211),m=n(724883),_=n(279436),I=n(692296),E=n(759059),y=n(174068);const C=[];function b(e,t,n,o){r.A.defined("scene",e),r.A.defined("entityCollection",t),n=n??e.primitives,o=o??e.groundPrimitives,this._scene=e,this._primitives=n,this._groundPrimitives=o,this._entityCollection=void 0,this._addedObjects=new i.A,this._removedObjects=new i.A,this._changedObjects=new i.A;const a=u.A.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);const s=f.A.supportsMaterialsforEntitiesOnTerrain(e);let d;for(this._supportsMaterialsforEntitiesOnTerrain=s,d=0;d<a;++d)this._outlineBatches[d]=new y.A(n,e,d,!1),this._outlineBatches[a+d]=new y.A(n,e,d,!0),this._closedColorBatches[d]=new m.A(n,l.A,void 0,!0,d,!0),this._closedColorBatches[a+d]=new m.A(n,l.A,void 0,!0,d,!1),this._closedMaterialBatches[d]=new _.A(n,c.A,void 0,!0,d,!0),this._closedMaterialBatches[a+d]=new _.A(n,c.A,void 0,!0,d,!1),this._openColorBatches[d]=new m.A(n,l.A,void 0,!1,d,!0),this._openColorBatches[a+d]=new m.A(n,l.A,void 0,!1,d,!1),this._openMaterialBatches[d]=new _.A(n,c.A,void 0,!1,d,!0),this._openMaterialBatches[a+d]=new _.A(n,c.A,void 0,!1,d,!1);const h=A.A.NUMBER_OF_CLASSIFICATION_TYPES,p=new Array(h),B=[];if(s)for(d=0;d<h;++d)B.push(new E.A(o,d,c.A)),p[d]=new I.A(o,d);else for(d=0;d<h;++d)p[d]=new I.A(o,d);this._groundColorBatches=p,this._groundMaterialBatches=B,this._dynamicBatch=new g.A(n,o),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new i.A,this._updaterSets=new i.A,this._entityCollection=t,t.collectionChanged.addEventListener(b.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,C)}b.registerUpdater=function(e){p.A.registerUpdater(e)},b.unregisterUpdater=function(e){p.A.unregisterUpdater(e)},b.prototype.update=function(e){r.A.defined("time",e);const t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,a=this._changedObjects,s=a.values;let A,c,l,u;const d=this;for(A=s.length-1;A>-1;A--)c=s[A],l=c.id,u=this._updaterSets.get(l),u.entity===c?u.forEach(function(t){d._removeUpdater(t),d._insertUpdaterIntoBatch(e,t)}):(o.push(c),n.push(c));for(A=o.length-1;A>-1;A--)c=o[A],l=c.id,u=this._updaterSets.get(l),u.forEach(this._removeUpdater.bind(this)),u.destroy(),this._updaterSets.remove(l),this._subscriptions.get(l)(),this._subscriptions.remove(l);for(A=n.length-1;A>-1;A--)c=n[A],l=c.id,u=new p.A(c,this._scene),this._updaterSets.set(l,u),u.forEach(function(t){d._insertUpdaterIntoBatch(e,t)}),this._subscriptions.set(l,u.geometryChanged.addEventListener(b._onGeometryChanged,this));t.removeAll(),i.removeAll(),a.removeAll();let h=!0;const g=this._batches,f=g.length;for(A=0;A<f;A++)h=g[A].update(e)&&h;return h};const B=[],v=new o.A;b.prototype.getBoundingSphere=function(e,t){r.A.defined("entity",e),r.A.defined("result",t);const n=B,i=v;let a=0,s=d.A.DONE;const A=this._batches,c=A.length,l=e.id,u=this._updaterSets.get(l).updaters;for(let e=0;e<u.length;e++){const t=u[e];for(let e=0;e<c;e++){if(s=A[e].getBoundingSphere(t,i),s===d.A.PENDING)return d.A.PENDING;s===d.A.DONE&&(n[a]=o.A.clone(i,n[a]),a++)}}return 0===a?d.A.FAILED:(n.length=a,o.A.fromBoundingSpheres(n,t),d.A.DONE)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(b.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();this._subscriptions.removeAll();const o=this._updaterSets.values;for(n=o.length,e=0;e<n;e++)o[e].destroy();return this._updaterSets.removeAll(),(0,s.A)(this)},b.prototype._removeUpdater=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;i++)t[i].remove(e)},b.prototype._insertUpdaterIntoBatch=function(e,t){if(t.isDynamic)return void this._dynamicBatch.add(e,t);let n;(t.outlineEnabled||t.fillEnabled)&&(n=t.shadowsProperty.getValue(e));const i=u.A.NUMBER_OF_SHADOW_MODES;if(t.outlineEnabled&&((0,a.A)(t.terrainOffsetProperty)?this._outlineBatches[i+n].add(e,t):this._outlineBatches[n].add(e,t)),t.fillEnabled)if(t.onTerrain){const n=t.classificationTypeProperty.getValue(e);t.fillMaterialProperty instanceof h.A?this._groundColorBatches[n].add(e,t):this._groundMaterialBatches[n].add(e,t)}else t.isClosed?t.fillMaterialProperty instanceof h.A?(0,a.A)(t.terrainOffsetProperty)?this._closedColorBatches[i+n].add(e,t):this._closedColorBatches[n].add(e,t):(0,a.A)(t.terrainOffsetProperty)?this._closedMaterialBatches[i+n].add(e,t):this._closedMaterialBatches[n].add(e,t):t.fillMaterialProperty instanceof h.A?(0,a.A)(t.terrainOffsetProperty)?this._openColorBatches[i+n].add(e,t):this._openColorBatches[n].add(e,t):(0,a.A)(t.terrainOffsetProperty)?this._openMaterialBatches[i+n].add(e,t):this._openMaterialBatches[n].add(e,t)},b._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;(0,a.A)(t.get(o))||(0,a.A)(n.get(o))||n.set(o,i)},b.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let a,s,A;for(a=n.length-1;a>-1;a--)A=n[a],s=A.id,i.remove(s)||(o.set(s,A),r.remove(s));for(a=t.length-1;a>-1;a--)A=t[a],s=A.id,o.remove(s)?r.set(s,A):i.set(s,A)};const w=b},817634:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(369031),o=n(491446),r=n(605971),a=n(794554),s=n(983884),A=n(623e3),c=n(63316),l=n(10082),u=n(969077),d=n(286299),h=n(307509);const g=new u.A(0);function f(e){d.A.call(this,e),this._zIndex=0,this._terrainOffsetProperty=void 0}(0,o.A)(Object.create)&&(f.prototype=Object.create(d.A.prototype),f.prototype.constructor=f),Object.defineProperties(f.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),f.prototype._isOnTerrain=function(e,t){return this._fillEnabled&&!(0,o.A)(t.height)&&!(0,o.A)(t.extrudedHeight)&&A.A.isSupported(this._scene)},f.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight;return 0===t||(0,o.A)(n)&&n!==t},f.prototype._computeCenter=r.A.throwInstantiationError,f.prototype._onEntityPropertyChanged=function(e,t,n,i){if(d.A.prototype._onEntityPropertyChanged.call(this,e,t,n,i),-1===this._observedPropertyNames.indexOf(t))return;const r=this._entity[this._geometryPropertyName];if(!(0,o.A)(r))return;(0,o.A)(r.zIndex)&&((0,o.A)(r.height)||(0,o.A)(r.extrudedHeight))&&(0,s.A)(s.A.geometryZIndex),this._zIndex=r.zIndex??g,(0,o.A)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const a=r.heightReference,A=r.extrudedHeightReference;if((0,o.A)(a)||(0,o.A)(A)){const e=new l.A(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new h.A(this._scene,e,a,A)}},f.prototype.destroy=function(){(0,o.A)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),d.A.prototype.destroy.call(this)},f.getGeometryHeight=function(e,t){if(i.A.defined("heightReference",t),(0,o.A)(e))return(0,c.w_)(t)?0:e;t!==c.Ay.NONE&&(0,s.A)(s.A.geometryHeightReference)},f.getGeometryExtrudedHeight=function(e,t){if(i.A.defined("extrudedHeightReference",t),(0,o.A)(e))return(0,c.w_)(t)?f.CLAMP_TO_GROUND:e;t!==c.Ay.NONE&&(0,s.A)(s.A.geometryExtrudedHeightReference)},f.CLAMP_TO_GROUND="clamp",f.computeGeometryOffsetAttribute=function(e,t,n,i){(0,o.A)(e)&&(0,o.A)(t)||(t=c.Ay.NONE),(0,o.A)(n)&&(0,o.A)(i)||(i=c.Ay.NONE);let r=0;return t!==c.Ay.NONE&&r++,i===c.Ay.RELATIVE_TO_GROUND&&r++,2===r?a.A.ALL:1===r?a.A.TOP:void 0};const p=f},417496:(e,t,n)=>{"use strict";n.d(t,{A:()=>H});var i=n(288787),o=n(434067),r=n(267980),a=n(41476),s=n(491446),A=n(677354),c=n(605971),l=n(853331),u=n(290176),d=n(63316),h=n(337632),g=n(15817),f=n(742558),p=n(810600),m=n(46257);const _=g.A.FILL,I=a.A.WHITE,E=a.A.BLACK,y=new a.A(.165,.165,.165,.8),C=new o.A(7,5),b=o.A.ZERO,B=r.A.ZERO,v=d.Ay.NONE,w=h.A.CENTER,T=f.A.CENTER,S=new r.A,x=new a.A,D=new a.A,Q=new a.A,N=new o.A,R=new r.A,M=new o.A,L=new u.A,P=new u.A,O=new u.A,F=new l.A;function U(e){this.entity=e,this.label=void 0,this.index=void 0}function k(e,t){if(!(0,s.A)(e))throw new c.A("entityCluster is required.");if(!(0,s.A)(t))throw new c.A("entityCollection is required.");t.collectionChanged.addEventListener(k.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}function G(e,t,n){(0,s.A)(e)&&(e.label=void 0,n.removeLabel(t))}k.prototype.update=function(e){if(!(0,s.A)(e))throw new c.A("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.entity,A=a._label;let c,l,u=o.label,d=a.isShowing&&a.isAvailable(e)&&m.A.getValueOrDefault(A._show,e,!0);if(d&&(l=m.A.getValueOrUndefined(a._position,e,S),c=m.A.getValueOrUndefined(A._text,e),d=(0,s.A)(l)&&(0,s.A)(c)),!d){G(o,a,n);continue}m.A.isConstant(a._position)||(n._clusterDirty=!0);let h=!1;const g=m.A.getValueOrDefault(A._heightReference,e,v);(0,s.A)(u)||(u=n.getLabel(a),u.id=a,o.label=u,h=r.A.equals(u.position,l)&&u.heightReference===g),u.show=!0,u.position=l,u.text=c,u.scale=m.A.getValueOrDefault(A._scale,e,1),u.font=m.A.getValueOrDefault(A._font,e,"30px sans-serif"),u.style=m.A.getValueOrDefault(A._style,e,_),u.fillColor=m.A.getValueOrDefault(A._fillColor,e,I,x),u.outlineColor=m.A.getValueOrDefault(A._outlineColor,e,E,D),u.outlineWidth=m.A.getValueOrDefault(A._outlineWidth,e,1),u.showBackground=m.A.getValueOrDefault(A._showBackground,e,!1),u.backgroundColor=m.A.getValueOrDefault(A._backgroundColor,e,y,Q),u.backgroundPadding=m.A.getValueOrDefault(A._backgroundPadding,e,C,N),u.pixelOffset=m.A.getValueOrDefault(A._pixelOffset,e,b,M),u.eyeOffset=m.A.getValueOrDefault(A._eyeOffset,e,B,R),u.heightReference=g,u.horizontalOrigin=m.A.getValueOrDefault(A._horizontalOrigin,e,w),u.verticalOrigin=m.A.getValueOrDefault(A._verticalOrigin,e,T),u.translucencyByDistance=m.A.getValueOrUndefined(A._translucencyByDistance,e,L),u.pixelOffsetScaleByDistance=m.A.getValueOrUndefined(A._pixelOffsetScaleByDistance,e,P),u.scaleByDistance=m.A.getValueOrUndefined(A._scaleByDistance,e,O),u.distanceDisplayCondition=m.A.getValueOrUndefined(A._distanceDisplayCondition,e,F),u.disableDepthTestDistance=m.A.getValueOrUndefined(A._disableDepthTestDistance,e),h&&u._updateClamping()}return!0},k.prototype.getBoundingSphere=function(e,t){if(!(0,s.A)(e))throw new c.A("entity is required.");if(!(0,s.A)(t))throw new c.A("result is required.");const n=this._items.get(e.id);if(!(0,s.A)(n)||!(0,s.A)(n.label))return p.A.FAILED;const i=n.label;return t.center=r.A.clone(i._clampedPosition??i.position,t.center),t.radius=0,p.A.DONE},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(k.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeLabel(e[t]);return(0,A.A)(this)},k.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const a=this._items,A=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,s.A)(r._label)&&(0,s.A)(r._position)&&a.set(r.id,new U(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,s.A)(r._label)&&(0,s.A)(r._position)?a.contains(r.id)||a.set(r.id,new U(r)):(G(a.get(r.id),r,A),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],G(a.get(r.id),r,A),a.remove(r.id)};const H=k},644736:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(41476),o=n(491446),r=n(605971),a=n(591978),s=n(608191);function A(){r.A.throwInstantiationError()}Object.defineProperties(A.prototype,{isConstant:{get:r.A.throwInstantiationError},definitionChanged:{get:r.A.throwInstantiationError}}),A.prototype.getType=r.A.throwInstantiationError,A.prototype.getValue=r.A.throwInstantiationError,A.prototype.equals=r.A.throwInstantiationError;const c=new a.A;A.getValue=function(e,t,n){let r;return(0,o.A)(e)||(e=a.A.now(c)),(0,o.A)(t)&&(r=t.getType(e),(0,o.A)(r))?((0,o.A)(n)&&n.type===r||(n=s.A.fromType(r)),t.getValue(e,n.uniforms),n):((0,o.A)(n)&&n.type===s.A.ColorType||(n=s.A.fromType(s.A.ColorType)),i.A.clone(i.A.WHITE,n.uniforms.color),n)};const l=A},963503:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(288787),o=n(660662),r=n(434067),a=n(267980),s=n(369031),A=n(41476),c=n(491446),l=n(677354),u=n(605971),d=n(610750),h=n(584164),g=n(744603),f=n(428027),p=n(63316),m=n(623379),_=n(598361),I=n(988609),E=n(810600),y=n(46257),C=n(336946);const b=I.A.ENABLED,B=p.Ay.NONE,v=A.A.RED,w=A.A.WHITE,T=f.A.HIGHLIGHT,S=new r.A(1,1),x={maximumPositionEpsilon:Number.POSITIVE_INFINITY},D=new h.A,Q=new h.A,N=new A.A,R=new Array(4),M=new a.A;function L(e,t){s.A.typeOf.object("scene",e),s.A.typeOf.object("entityCollection",t),t.collectionChanged.addEventListener(L.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._modelHash={},this._entitiesToVisualize=new i.A,this._onCollectionChanged(t,t.values,[],[])}async function P(e,t,n,i,o){const r=e._primitives,a=e._modelHash;try{const s=await m.A.fromGltfAsync({url:n,incrementallyLoadTextures:i,scene:e._scene,environmentMapOptions:o});if(e.isDestroyed()||!(0,c.A)(a[t.id]))return;s.id=t,r.add(s),a[t.id].modelPrimitive=s,s.errorEvent.addEventListener(e=>{(0,c.A)(a[t.id])&&(console.log(e),"TextureError"!==e.name&&s.incrementallyLoadTextures&&(a[t.id].loadFailed=!0))})}catch(n){if(e.isDestroyed()||!(0,c.A)(a[t.id]))return;console.log(n),a[t.id].loadFailed=!0}}L.prototype.update=function(e){if(!(0,c.A)(e))throw new u.A("time is required.");const t=this._entitiesToVisualize.values,n=this._modelHash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r._model;let l,u,d=n[r.id],f=r.isShowing&&r.isAvailable(e)&&y.A.getValueOrDefault(s._show,e,!0);if(f&&(u=r.computeModelMatrix(e,D),l=g.A.createIfNeeded(y.A.getValueOrUndefined(s._uri,e)),f=(0,c.A)(u)&&(0,c.A)(l)),!f){(0,c.A)(d)&&d.modelPrimitive&&(d.modelPrimitive.show=!1);continue}(0,c.A)(d)&&l.url===d.url||((0,c.A)(d?.modelPrimitive)&&(i.removeAndDestroy(d.modelPrimitive),delete n[r.id]),d={modelPrimitive:void 0,url:l.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFailed:!1,modelUpdated:!1,environmentMapOptionsScratch:{...x}},n[r.id]=d,P(this,r,l,y.A.getValueOrDefault(s._incrementallyLoadTextures,e,!0),y.A.getValueOrDefault(s._environmentMapOptions,e,x,d.environmentMapOptionsScratch)));const p=d.modelPrimitive;if(!(0,c.A)(p))continue;p.show=!0,p.scale=y.A.getValueOrDefault(s._scale,e,1),p.enableVerticalExaggeration=y.A.getValueOrDefault(s._enableVerticalExaggeration,e,!0),p.minimumPixelSize=y.A.getValueOrDefault(s._minimumPixelSize,e,0),p.maximumScale=y.A.getValueOrUndefined(s._maximumScale,e),p.modelMatrix=h.A.clone(u,p.modelMatrix),p.shadows=y.A.getValueOrDefault(s._shadows,e,b),p.heightReference=y.A.getValueOrDefault(s._heightReference,e,B),p.distanceDisplayCondition=y.A.getValueOrUndefined(s._distanceDisplayCondition,e),p.silhouetteColor=y.A.getValueOrDefault(s._silhouetteColor,e,v,N),p.silhouetteSize=y.A.getValueOrDefault(s._silhouetteSize,e,0),p.color=y.A.getValueOrDefault(s._color,e,w,N),p.colorBlendMode=y.A.getValueOrDefault(s._colorBlendMode,e,T),p.colorBlendAmount=y.A.getValueOrDefault(s._colorBlendAmount,e,.5),p.clippingPlanes=y.A.getValueOrUndefined(s._clippingPlanes,e),p.clampAnimations=y.A.getValueOrDefault(s._clampAnimations,e,!0),p.imageBasedLighting.imageBasedLightingFactor=y.A.getValueOrDefault(s._imageBasedLightingFactor,e,S);let m=y.A.getValueOrUndefined(s._lightColor,e);if((0,c.A)(m)&&(A.A.pack(m,R,0),m=a.A.unpack(R,0,M)),p.lightColor=m,p.customShader=y.A.getValueOrUndefined(s._customShader,e),n[r.id].modelUpdated=!0,p.ready){const t=y.A.getValueOrDefault(s._runAnimations,e,!0);d.animationsRunning!==t&&(t?p.activeAnimations.addAll({loop:_.A.REPEAT}):p.activeAnimations.removeAll(),d.animationsRunning=t);const n=y.A.getValueOrUndefined(s._nodeTransformations,e,d.nodeTransformationsScratch);if((0,c.A)(n)){const e=Object.keys(n);for(let t=0,i=e.length;t<i;++t){const i=e[t],o=n[i];if(!(0,c.A)(o))continue;const r=p.getNode(i);if(!(0,c.A)(r))continue;const a=h.A.fromTranslationRotationScale(o,Q);r.matrix=h.A.multiply(r.originalMatrix,a,a)}}let i=!1;const o=y.A.getValueOrUndefined(s._articulations,e,d.articulationsScratch);if((0,c.A)(o)){const e=Object.keys(o);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=o[n];(0,c.A)(r)&&(i=!0,p.setArticulationStage(n,r))}}i&&p.applyArticulations()}}return!0},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(L.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._modelHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)U(0,e[i],t,n);return(0,l.A)(this)};const O=new a.A,F=new C.A;function U(e,t,n,i){const o=n[t.id];(0,c.A)(o)&&(i.removeAndDestroy(o.modelPrimitive),delete n[t.id])}function k(e,t){const n=t[e.id];(0,c.A)(n)&&(n.nodeTransformationsScratch={},n.articulationsScratch={})}L.prototype.getBoundingSphere=function(e,t){if(!(0,c.A)(e))throw new u.A("entity is required.");if(!(0,c.A)(t))throw new u.A("result is required.");const n=this._modelHash[e.id];if(!(0,c.A)(n))return E.A.FAILED;if(n.loadFailed)return E.A.FAILED;const i=n.modelPrimitive;if(!(0,c.A)(i)||!i.show)return E.A.PENDING;if(!i.ready||!n.modelUpdated)return E.A.PENDING;const r=this._scene,a=r.ellipsoid??d.A.default;if(i.heightReference!==p.Ay.NONE){const e=i.modelMatrix;O.x=e[12],O.y=e[13],O.z=e[14];const n=a.cartesianToCartographic(O,F),s=r.getHeight(n,i.heightReference);return(0,c.A)(s)&&((0,p.w_)(i.heightReference)?n.height=s:n.height+=s),o.A.clone(i.boundingSphere,t),t.center=a.cartographicToCartesian(n),E.A.DONE}return o.A.clone(i.boundingSphere,t),E.A.DONE},L.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const a=this._entitiesToVisualize,s=this._modelHash,A=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],(0,c.A)(r._model)&&(0,c.A)(r._position)&&a.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],(0,c.A)(r._model)&&(0,c.A)(r._position)?(k(r,s),a.set(r.id,r)):(U(0,r,s,A),a.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],U(0,r,s,A),a.remove(r.id)};const G=L},563051:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(288787),o=n(267980),r=n(491446),a=n(677354),s=n(605971),A=n(591978),c=n(331185),l=n(584164),u=n(886033),d=n(93467),h=n(543622),g=n(891674),f=n(62467),p=n(602941),m=n(403911),_=n(808938),I=n(644736),E=n(46257),y=n(857870),C=n(841802),b=n(347768),B=n(13346);const v=new d.A,w=new d.A,T=new d.A;function S(e){this.entity=e,this.polyline=void 0,this.index=void 0,this.updater=void 0}function x(e,t,n,i,o,a,s,c){for(;e instanceof y.A;)e=e.resolvedProperty;return s=e instanceof C.A?function(e,t,n,i,o,a,s,c,l){let u,d=c;u=e.getValueInReferenceFrame(t,a,l[d]),(0,r.A)(u)&&(l[d++]=u);let h=!(0,r.A)(o)||A.A.lessThanOrEquals(o,t)||A.A.greaterThanOrEquals(o,n),g=0;const f=i.length;let p=i[g];const m=n;let _,I,E,y=!1;for(;g<f;){if(!h&&A.A.greaterThanOrEquals(p,o)&&(u=e.getValueInReferenceFrame(o,a,l[d]),(0,r.A)(u)&&(l[d++]=u),h=!0),A.A.greaterThan(p,t)&&A.A.lessThan(p,m)&&!p.equals(o)&&(u=e.getValueInReferenceFrame(p,a,l[d]),(0,r.A)(u)&&(l[d++]=u)),g<f-1){if(s>0&&!y){const e=i[g+1],t=A.A.secondsDifference(e,p);y=t>s,y&&(_=Math.ceil(t/s),I=0,E=t/Math.max(_,2),_=Math.max(_-1,1))}if(y&&I<_){p=A.A.addSeconds(p,E,new A.A),I++;continue}}y=!1,g++,p=i[g]}return u=e.getValueInReferenceFrame(n,a,l[d]),(0,r.A)(u)&&(l[d++]=u),d}(e,t,n,e._property._times,i,o,a,s,c):e instanceof p.A?function(e,t,n,i,o,a,s,c){let l,u=0,d=s,h=t,g=!(0,r.A)(i)||A.A.lessThanOrEquals(i,t)||A.A.greaterThanOrEquals(i,n);for(;A.A.lessThan(h,n);)!g&&A.A.greaterThanOrEquals(h,i)&&(g=!0,l=e.getValueInReferenceFrame(i,o,c[d]),(0,r.A)(l)&&(c[d]=l,d++)),l=e.getValueInReferenceFrame(h,o,c[d]),(0,r.A)(l)&&(c[d]=l,d++),u++,h=A.A.addSeconds(t,a*u,new A.A);return l=e.getValueInReferenceFrame(n,o,c[d]),(0,r.A)(l)&&(c[d]=l,d++),d}(e,t,n,i,o,a,s,c):e instanceof m.A?function(e,t,n,i,o,r,a,s){w.start=t,w.stop=n;let c=a;const l=e.intervals;for(let e=0;e<l.length;e++){const a=l.get(e);if(!d.A.intersect(a,w,v).isEmpty){const e=a.start,l=a.stop;let u=t;A.A.greaterThan(e,u)&&(u=e);let d=n;A.A.lessThan(l,d)&&(d=l),c=x(a.data,u,d,i,o,r,c,s)}}return c}(e,t,n,i,o,a,s,c):e instanceof B.A?function(e,t,n,i,o,a,s,c){T.start=t,T.stop=n;let l=s;const u=e.intervals;for(let t=0;t<u.length;t++){const n=u.get(t);if(!d.A.intersect(n,T,v).isEmpty){let t=n.start;n.isStartIncluded||(t=n.isStopIncluded?n.stop:A.A.addSeconds(n.start,A.A.secondsDifference(n.stop,n.start)/2,new A.A));const i=e.getValueInReferenceFrame(t,o,c[l]);(0,r.A)(i)&&(c[l]=i,l++)}}return l}(e,t,n,0,o,0,s,c):e instanceof _.A||e instanceof b.A&&E.A.isConstant(e)?function(e,t,n,i,o,a,s,A){const c=e.getValueInReferenceFrame(t,o,A[s]);return(0,r.A)(c)&&(A[s++]=c),s}(e,t,0,0,o,0,s,c):function(e,t,n,i,o,a,s,c){let l,u=0,d=s,h=t;const g=Math.max(a,60);let f=!(0,r.A)(i)||A.A.lessThanOrEquals(i,t)||A.A.greaterThanOrEquals(i,n);for(;A.A.lessThan(h,n);)!f&&A.A.greaterThanOrEquals(h,i)&&(f=!0,l=e.getValueInReferenceFrame(i,o,c[d]),(0,r.A)(l)&&(c[d]=l,d++)),l=e.getValueInReferenceFrame(h,o,c[d]),(0,r.A)(l)&&(c[d]=l,d++),u++,h=A.A.addSeconds(t,g*u,new A.A);return l=e.getValueInReferenceFrame(n,o,c[d]),(0,r.A)(l)&&(c[d]=l,d++),d}(e,t,n,i,o,a,s,c),s}function D(e,t,n,i,o,a,s){(0,r.A)(s)||(s=[]);const A=x(e,t,n,i,o,a,0,s);return s.length=A,s}const Q=new c.A;function N(e,t){this._unusedIndexes=[],this._polylineCollection=new g.A,this._scene=e,this._referenceFrame=t,e.primitives.add(this._polylineCollection)}function R(e,t){if(!(0,r.A)(e))throw new s.A("scene is required.");if(!(0,r.A)(t))throw new s.A("entityCollection is required.");t.collectionChanged.addEventListener(R.prototype._onCollectionChanged,this),this._scene=e,this._updaters={},this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}N.prototype.update=function(e){if(this._referenceFrame===u.A.INERTIAL){const t=h.A.computeIcrfToCentralBodyFixedMatrix(e,Q);l.A.fromRotationTranslation(t,o.A.ZERO,this._polylineCollection.modelMatrix)}},N.prototype.updateObject=function(e,t){const n=t.entity,i=n._path,o=n._position;let a,s;const c=i._show;let l=t.polyline,u=n.isShowing&&n.isAvailable(e)&&(!(0,r.A)(c)||c.getValue(e));if(u){const t=E.A.getValueOrUndefined(i._leadTime,e),o=E.A.getValueOrUndefined(i._trailTime,e),c=n._availability,l=(0,r.A)(c),d=(0,r.A)(t),h=(0,r.A)(o);if(u=l||d&&h,u){if(h&&(a=A.A.addSeconds(e,-o,new A.A)),d&&(s=A.A.addSeconds(e,t,new A.A)),l){const e=c.start,t=c.stop;h&&!A.A.greaterThan(e,a)||(a=e),d&&!A.A.lessThan(t,s)||(s=t)}u=A.A.lessThan(a,s)}}if(!u)return void((0,r.A)(l)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,l.show=!1,t.index=void 0));if(!(0,r.A)(l)){const e=this._unusedIndexes;if(e.length>0){const n=e.pop();l=this._polylineCollection.get(n),t.index=n}else t.index=this._polylineCollection.length,l=this._polylineCollection.add();l.id=n,t.polyline=l}const d=E.A.getValueOrDefault(i._resolution,e,60);l.show=!0,l.positions=D(o,a,s,e,this._referenceFrame,d,l.positions.slice()),l.material=I.A.getValue(e,i._material,l.material),l.width=E.A.getValueOrDefault(i._width,e,1),l.distanceDisplayCondition=E.A.getValueOrUndefined(i._distanceDisplayCondition,e,l.distanceDisplayCondition)},N.prototype.removeObject=function(e){const t=e.polyline;(0,r.A)(t)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,t.show=!1,t.id=void 0,e.index=void 0)},N.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),(0,a.A)(this)},R.prototype.update=function(e){if(!(0,r.A)(e))throw new s.A("time is required.");const t=this._updaters;for(const n in t)t.hasOwnProperty(n)&&t[n].update(e);const n=this._items.values;if(0===n.length&&(0,r.A)(this._updaters)&&Object.keys(this._updaters).length>0){for(const e in t)t.hasOwnProperty(e)&&t[e].destroy();this._updaters={}}for(let t=0,i=n.length;t<i;t++){const i=n[t],o=i.entity._position,a=i.updater;let s=u.A.FIXED;this._scene.mode===f.A.SCENE3D&&(s=o.referenceFrame);let A=this._updaters[s];a===A&&(0,r.A)(A)?A.updateObject(e,i):((0,r.A)(a)&&a.removeObject(i),(0,r.A)(A)||(A=new N(this._scene,s),A.update(e),this._updaters[s]=A),i.updater=A,(0,r.A)(A)&&A.updateObject(e,i))}return!0},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(R.prototype._onCollectionChanged,this);const e=this._updaters;for(const t in e)e.hasOwnProperty(t)&&e[t].destroy();return(0,a.A)(this)},R.prototype._onCollectionChanged=function(e,t,n,i){let o,a,s;const A=this._items;for(o=t.length-1;o>-1;o--)a=t[o],(0,r.A)(a._path)&&(0,r.A)(a._position)&&A.set(a.id,new S(a));for(o=i.length-1;o>-1;o--)a=i[o],(0,r.A)(a._path)&&(0,r.A)(a._position)?A.contains(a.id)||A.set(a.id,new S(a)):(s=A.get(a.id),(0,r.A)(s)&&((0,r.A)(s.updater)&&s.updater.removeObject(s),A.remove(a.id)));for(o=n.length-1;o>-1;o--)a=n[o],s=A.get(a.id),(0,r.A)(s)&&((0,r.A)(s.updater)&&s.updater.removeObject(s),A.remove(a.id))},R._subSample=D;const M=R},379843:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(267980),o=n(369031),r=n(41476),a=n(433235),s=n(491446),A=n(605971),c=n(330926),l=n(75200),u=n(32655),d=n(367817),h=n(331185),g=n(584164),f=n(84609),p=n(350939),m=n(708857),_=n(551549),I=n(612123),E=n(312421),y=n(799086),C=n(286299),b=n(46257);const B=new i.A,v=new r.A;function w(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function T(e,t){C.A.call(this,{entity:e,scene:t,geometryOptions:new w(e),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(e,"plane",e.plane,void 0)}function S(e,t,n){y.A.call(this,e,t,n)}(0,s.A)(Object.create)&&(T.prototype=Object.create(C.A.prototype),T.prototype.constructor=T),T.prototype.createFillGeometryInstance=function(e){if(o.A.defined("time",e),!this._fillEnabled)throw new A.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let i,u;const d=new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),h=this._distanceDisplayConditionProperty.getValue(e),g=c.A.fromDistanceDisplayCondition(h);if(this._materialProperty instanceof E.A){let t;(0,s.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,v)),(0,s.A)(t)||(t=r.A.WHITE),u=a.A.fromColor(t),i={show:d,distanceDisplayCondition:g,color:u}}else i={show:d,distanceDisplayCondition:g};const p=t.plane,_=this._options;let I=t.computeModelMatrix(e);const y=b.A.getValueOrDefault(p.plane,e,_.plane),C=b.A.getValueOrUndefined(p.dimensions,e,_.dimensions);return _.plane=y,_.dimensions=C,I=P(y,C,I,I),new l.A({id:t,geometry:new f.A(this._options),modelMatrix:I,attributes:i})},T.prototype.createOutlineGeometryInstance=function(e){if(o.A.defined("time",e),!this._outlineEnabled)throw new A.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=b.A.getValueOrDefault(this._outlineColorProperty,e,r.A.BLACK,v),s=this._distanceDisplayConditionProperty.getValue(e),u=t.plane,d=this._options;let h=t.computeModelMatrix(e);const g=b.A.getValueOrDefault(u.plane,e,d.plane),f=b.A.getValueOrUndefined(u.dimensions,e,d.dimensions);return d.plane=g,d.dimensions=f,h=P(g,f,h,h),new l.A({id:t,geometry:new p.A,modelMatrix:h,attributes:{show:new m.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:a.A.fromColor(i),distanceDisplayCondition:c.A.fromDistanceDisplayCondition(s)}})},T.prototype._isHidden=function(e,t){return!(0,s.A)(t.plane)||!(0,s.A)(t.dimensions)||!(0,s.A)(e.position)||C.A.prototype._isHidden.call(this,e,t)},T.prototype._getIsClosed=function(e){return!1},T.prototype._isDynamic=function(e,t){return!(e.position.isConstant&&b.A.isConstant(e.orientation)&&t.plane.isConstant&&t.dimensions.isConstant&&b.A.isConstant(t.outlineWidth))},T.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof E.A,i=this._options;i.vertexFormat=n?I.A.VERTEX_FORMAT:_.A.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(u.A.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(u.A.MINIMUM_VALUE,i.dimensions)},T.DynamicGeometryUpdater=S,(0,s.A)(Object.create)&&(S.prototype=Object.create(y.A.prototype),S.prototype.constructor=S),S.prototype._isHidden=function(e,t,n){const i=this._options,o=b.A.getValueOrUndefined(e.position,n,B);return!(0,s.A)(o)||!(0,s.A)(i.plane)||!(0,s.A)(i.dimensions)||y.A.prototype._isHidden.call(this,e,t,n)},S.prototype._setOptions=function(e,t,n){const i=this._options;i.plane=b.A.getValueOrDefault(t.plane,n,i.plane),i.dimensions=b.A.getValueOrUndefined(t.dimensions,n,i.dimensions)};const x=new i.A,D=new i.A,Q=new i.A,N=new i.A,R=new h.A,M=new h.A,L=new g.A;function P(e,t,n,o){const r=e.normal,a=e.distance,s=i.A.multiplyByScalar(r,-a,Q);let A=i.A.clone(i.A.UNIT_Z,D);d.A.equalsEpsilon(Math.abs(i.A.dot(A,r)),1,d.A.EPSILON8)&&(A=i.A.clone(i.A.UNIT_Y,A));const c=i.A.cross(A,r,x);A=i.A.cross(r,c,A),i.A.normalize(c,c),i.A.normalize(A,A);const l=R;h.A.setColumn(l,0,c,l),h.A.setColumn(l,1,A,l),h.A.setColumn(l,2,r,l);const u=i.A.fromElements(t.x,t.y,1,N),f=h.A.multiplyByScale(l,u,M),p=g.A.fromRotationTranslation(f,s,L);return g.A.multiplyTransformation(n,p,o)}T.createPrimitiveMatrix=P;const O=T},364360:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(288787),o=n(267980),r=n(41476),a=n(491446),s=n(677354),A=n(605971),c=n(853331),l=n(290176),u=n(883734),d=n(63316),h=n(810600),g=n(46257),f=n(913419);const p=r.A.WHITE,m=r.A.BLACK,_=f.A.NONE,I=new r.A,E=new o.A,y=new r.A,C=new l.A,b=new l.A,B=new c.A;function v(e){this.entity=e,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function w(e,t){if(!(0,a.A)(e))throw new A.A("entityCluster is required.");if(!(0,a.A)(t))throw new A.A("entityCollection is required.");t.collectionChanged.addEventListener(w.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new i.A,this._onCollectionChanged(t,t.values,[],[])}function T(e,t,n){if((0,a.A)(e)){const i=e.pointPrimitive;if((0,a.A)(i))return e.pointPrimitive=void 0,void n.removePoint(t);const o=e.billboard;(0,a.A)(o)&&(e.billboard=void 0,n.removeBillboard(t))}}w.prototype.update=function(e){if(!(0,a.A)(e))throw new A.A("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,s=t.length;i<s;i++){const s=t[i],A=s.entity,c=A._point;let l=s.pointPrimitive,h=s.billboard;const f=g.A.getValueOrDefault(c._heightReference,e,d.Ay.NONE);let v,w=A.isShowing&&A.isAvailable(e)&&g.A.getValueOrDefault(c._show,e,!0);if(w&&(v=g.A.getValueOrUndefined(A._position,e,E),w=(0,a.A)(v)),!w){T(s,A,n);continue}g.A.isConstant(A._position)||(n._clusterDirty=!0);let S=!1,x=!1;if(f===d.Ay.NONE||(0,a.A)(h)?f!==d.Ay.NONE||(0,a.A)(l)||((0,a.A)(h)&&(T(s,A,n),h=void 0),l=n.getPoint(A),l.id=A,s.pointPrimitive=l):((0,a.A)(l)&&(T(s,A,n),l=void 0),h=n.getBillboard(A),h.id=A,h.image=void 0,s.billboard=h,S=!0,x=o.A.equals(h.position,v)&&h.heightReference===f),(0,a.A)(l))l.show=!0,l.position=v,l.scaleByDistance=g.A.getValueOrUndefined(c._scaleByDistance,e,C),l.translucencyByDistance=g.A.getValueOrUndefined(c._translucencyByDistance,e,b),l.color=g.A.getValueOrDefault(c._color,e,p,I),l.outlineColor=g.A.getValueOrDefault(c._outlineColor,e,m,y),l.outlineWidth=g.A.getValueOrDefault(c._outlineWidth,e,0),l.pixelSize=g.A.getValueOrDefault(c._pixelSize,e,1),l.distanceDisplayCondition=g.A.getValueOrUndefined(c._distanceDisplayCondition,e,B),l.disableDepthTestDistance=g.A.getValueOrDefault(c._disableDepthTestDistance,e,0),l.splitDirection=g.A.getValueOrDefault(c._splitDirection,e,_);else if((0,a.A)(h)){h.show=!0,h.position=v,h.scaleByDistance=g.A.getValueOrUndefined(c._scaleByDistance,e,C),h.translucencyByDistance=g.A.getValueOrUndefined(c._translucencyByDistance,e,b),h.distanceDisplayCondition=g.A.getValueOrUndefined(c._distanceDisplayCondition,e,B),h.disableDepthTestDistance=g.A.getValueOrDefault(c._disableDepthTestDistance,e,0),h.splitDirection=g.A.getValueOrDefault(c._splitDirection,e,_),h.heightReference=f;const t=g.A.getValueOrDefault(c._color,e,p,I),n=g.A.getValueOrDefault(c._outlineColor,e,m,y),i=Math.round(g.A.getValueOrDefault(c._outlineWidth,e,0));let o=Math.max(1,Math.round(g.A.getValueOrDefault(c._pixelSize,e,1)));if(i>0?(h.scale=1,S=S||i!==s.outlineWidth||o!==s.pixelSize||!r.A.equals(t,s.color)||!r.A.equals(n,s.outlineColor)):(h.scale=o/50,o=50,S=S||i!==s.outlineWidth||!r.A.equals(t,s.color)||!r.A.equals(n,s.outlineColor)),S){s.color=r.A.clone(t,s.color),s.outlineColor=r.A.clone(n,s.outlineColor),s.pixelSize=o,s.outlineWidth=i;const e=t.alpha,a=t.toCssColorString(),A=n.toCssColorString(),c=JSON.stringify([a,o,A,i]);h.setImage(c,(0,u.A)(e,a,A,i,o))}x&&h._updateClamping()}}return!0},w.prototype.getBoundingSphere=function(e,t){if(!(0,a.A)(e))throw new A.A("entity is required.");if(!(0,a.A)(t))throw new A.A("result is required.");const n=this._items.get(e.id);if(!(0,a.A)(n)||!(0,a.A)(n.pointPrimitive)&&!(0,a.A)(n.billboard))return h.A.FAILED;if((0,a.A)(n.pointPrimitive))t.center=o.A.clone(n.pointPrimitive.position,t.center);else{const e=n.billboard;if(!(0,a.A)(e._clampedPosition))return h.A.PENDING;t.center=o.A.clone(e._clampedPosition,t.center)}return t.radius=0,h.A.DONE},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(w.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removePoint(e[t]);return(0,s.A)(this)},w.prototype._onCollectionChanged=function(e,t,n,i){let o,r;const s=this._items,A=this._cluster;for(o=t.length-1;o>-1;o--)r=t[o],(0,a.A)(r._point)&&(0,a.A)(r._position)&&s.set(r.id,new v(r));for(o=i.length-1;o>-1;o--)r=i[o],(0,a.A)(r._point)&&(0,a.A)(r._position)?s.contains(r.id)||s.set(r.id,new v(r)):(T(s.get(r.id),r,A),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],T(s.get(r.id),r,A),s.remove(r.id)};const S=w},570667:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(564886),o=n(215327),r=n(434067),a=n(267980),s=n(369031),A=n(41476),c=n(433235),l=n(594647),u=n(173885),d=n(491446),h=n(605971),g=n(330926),f=n(658091),p=n(75200),m=n(32655),_=n(852575),I=n(983884),E=n(151949),y=n(87551),C=n(697422),b=n(708857),B=n(63316),v=n(551549),w=n(612123),T=n(312421),S=n(799086),x=n(286299),D=n(817634),Q=n(46257);const N="Entity polygons cannot have both height and perPositionHeight.  height will be ignored",R="heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored",M=new A.A,L=a.A.ZERO,P=new a.A,O=new C.A,F=[],U=new r.A;function k(e){this.id=e,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function G(e,t){D.A.call(this,{entity:e,scene:t,geometryOptions:new k(e),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(e,"polygon",e.polygon,void 0)}function H(e,t,n){S.A.call(this,e,t,n)}(0,d.A)(Object.create)&&(G.prototype=Object.create(D.A.prototype),G.prototype.constructor=G),G.prototype.createFillGeometryInstance=function(e){if(s.A.defined("time",e),!this._fillEnabled)throw new h.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=this._options,o={show:new b.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:g.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof T.A){let t;(0,d.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,M)),(0,d.A)(t)||(t=A.A.WHITE),o.color=c.A.fromColor(t)}let r;return(0,d.A)(i.offsetAttribute)&&(o.offset=_.A.fromCartesian3(Q.A.getValueOrDefault(this._terrainOffsetProperty,e,L,P))),r=i.perPositionHeight&&!(0,d.A)(i.extrudedHeight)?new l.A(i):new E.A(i),new p.A({id:t,geometry:r,attributes:o})},G.prototype.createOutlineGeometryInstance=function(e){if(s.A.defined("time",e),!this._outlineEnabled)throw new h.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=this._options,o=Q.A.getValueOrDefault(this._outlineColorProperty,e,A.A.BLACK,M),r=this._distanceDisplayConditionProperty.getValue(e),a={show:new b.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:c.A.fromColor(o),distanceDisplayCondition:g.A.fromDistanceDisplayCondition(r),offset:void 0};let l;return(0,d.A)(i.offsetAttribute)&&(a.offset=_.A.fromCartesian3(Q.A.getValueOrDefault(this._terrainOffsetProperty,e,L,P))),l=i.perPositionHeight&&!(0,d.A)(i.extrudedHeight)?new u.A(i):new y.A(i),new p.A({id:t,geometry:l,attributes:a})},G.prototype._computeCenter=function(e,t){const n=Q.A.getValueOrUndefined(this._entity.polygon.hierarchy,e);if(!(0,d.A)(n))return;const i=n.positions;if(0===i.length)return;const o=this._scene.ellipsoid,a=f.A.fromPoints(i,o),s=a.projectPointsOntoPlane(i,F),A=s.length;let c=0,l=A-1,u=new r.A;for(let e=0;e<A;l=e++){const t=s[e],n=s[l],i=t.x*n.y-n.x*t.y;let o=r.A.add(t,n,U);o=r.A.multiplyByScalar(o,i,o),u=r.A.add(u,o,u),c+=i}const h=1/(3*c);return u=r.A.multiplyByScalar(u,h,u),a.projectPointOntoEllipsoid(u,t)},G.prototype._isHidden=function(e,t){return!(0,d.A)(t.hierarchy)||x.A.prototype._isHidden.call(this,e,t)},G.prototype._isOnTerrain=function(e,t){const n=D.A.prototype._isOnTerrain.call(this,e,t),i=t.perPositionHeight,o=(0,d.A)(i)&&(!i.isConstant||i.getValue(m.A.MINIMUM_VALUE));return n&&!o},G.prototype._isDynamic=function(e,t){return!t.hierarchy.isConstant||!Q.A.isConstant(t.height)||!Q.A.isConstant(t.extrudedHeight)||!Q.A.isConstant(t.granularity)||!Q.A.isConstant(t.stRotation)||!Q.A.isConstant(t.textureCoordinates)||!Q.A.isConstant(t.outlineWidth)||!Q.A.isConstant(t.perPositionHeight)||!Q.A.isConstant(t.closeTop)||!Q.A.isConstant(t.closeBottom)||!Q.A.isConstant(t.zIndex)||!Q.A.isConstant(t.arcType)||this._onTerrain&&!Q.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof T.A)},G.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof T.A,r=this._options;r.vertexFormat=n?w.A.VERTEX_FORMAT:v.A.MaterialSupport.TEXTURED.vertexFormat;const a=t.hierarchy.getValue(m.A.MINIMUM_VALUE);let s=Q.A.getValueOrUndefined(t.height,m.A.MINIMUM_VALUE);const A=Q.A.getValueOrDefault(t.heightReference,m.A.MINIMUM_VALUE,B.Ay.NONE);let c=Q.A.getValueOrUndefined(t.extrudedHeight,m.A.MINIMUM_VALUE);const l=Q.A.getValueOrDefault(t.extrudedHeightReference,m.A.MINIMUM_VALUE,B.Ay.NONE),u=Q.A.getValueOrDefault(t.perPositionHeight,m.A.MINIMUM_VALUE,!1);let h;if(s=D.A.getGeometryHeight(s,A),u?((0,d.A)(s)&&(s=void 0,(0,I.A)(N)),A!==B.Ay.NONE&&u&&(s=void 0,(0,I.A)(R))):((0,d.A)(c)&&!(0,d.A)(s)&&(s=0),h=D.A.computeGeometryOffsetAttribute(s,A,c,l)),r.polygonHierarchy=a,r.granularity=Q.A.getValueOrUndefined(t.granularity,m.A.MINIMUM_VALUE),r.stRotation=Q.A.getValueOrUndefined(t.stRotation,m.A.MINIMUM_VALUE),r.perPositionHeight=u,r.closeTop=Q.A.getValueOrDefault(t.closeTop,m.A.MINIMUM_VALUE,!0),r.closeBottom=Q.A.getValueOrDefault(t.closeBottom,m.A.MINIMUM_VALUE,!0),r.offsetAttribute=h,r.height=s,r.arcType=Q.A.getValueOrDefault(t.arcType,m.A.MINIMUM_VALUE,o.A.GEODESIC),r.textureCoordinates=Q.A.getValueOrUndefined(t.textureCoordinates,m.A.MINIMUM_VALUE),c=D.A.getGeometryExtrudedHeight(c,l),c===D.A.CLAMP_TO_GROUND){const e=E.A.computeRectangleFromPositions(r.polygonHierarchy.positions,r.ellipsoid,r.arcType,O);c=i.A.getMinimumMaximumHeights(e).minimumTerrainHeight}r.extrudedHeight=c},G.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight,i=(0,d.A)(n)&&n!==t;return!e.perPositionHeight&&(!i&&0===t||i&&e.closeTop&&e.closeBottom)},G.DynamicGeometryUpdater=H,(0,d.A)(Object.create)&&(H.prototype=Object.create(S.A.prototype),H.prototype.constructor=H),H.prototype._isHidden=function(e,t,n){return!(0,d.A)(this._options.polygonHierarchy)||S.A.prototype._isHidden.call(this,e,t,n)},H.prototype._setOptions=function(e,t,n){const r=this._options;r.polygonHierarchy=Q.A.getValueOrUndefined(t.hierarchy,n);let a=Q.A.getValueOrUndefined(t.height,n);const s=Q.A.getValueOrDefault(t.heightReference,n,B.Ay.NONE),A=Q.A.getValueOrDefault(t.extrudedHeightReference,n,B.Ay.NONE);let c=Q.A.getValueOrUndefined(t.extrudedHeight,n);const l=Q.A.getValueOrUndefined(t.perPositionHeight,n);let u;if(a=D.A.getGeometryHeight(a,A),l?((0,d.A)(a)&&(a=void 0,(0,I.A)(N)),s!==B.Ay.NONE&&l&&(a=void 0,(0,I.A)(R))):((0,d.A)(c)&&!(0,d.A)(a)&&(a=0),u=D.A.computeGeometryOffsetAttribute(a,s,c,A)),r.granularity=Q.A.getValueOrUndefined(t.granularity,n),r.stRotation=Q.A.getValueOrUndefined(t.stRotation,n),r.textureCoordinates=Q.A.getValueOrUndefined(t.textureCoordinates,n),r.perPositionHeight=Q.A.getValueOrUndefined(t.perPositionHeight,n),r.closeTop=Q.A.getValueOrDefault(t.closeTop,n,!0),r.closeBottom=Q.A.getValueOrDefault(t.closeBottom,n,!0),r.offsetAttribute=u,r.height=a,r.arcType=Q.A.getValueOrDefault(t.arcType,n,o.A.GEODESIC),c=D.A.getGeometryExtrudedHeight(c,A),c===D.A.CLAMP_TO_GROUND){const e=E.A.computeRectangleFromPositions(r.polygonHierarchy.positions,r.ellipsoid,r.arcType,O);c=i.A.getMinimumMaximumHeights(e).minimumTerrainHeight}r.extrudedHeight=c};const V=G},372891:(e,t,n)=>{"use strict";n.d(t,{A:()=>q});var i=n(215327),o=n(660662),r=n(369031),a=n(41476),s=n(433235),A=n(491446),c=n(677354),l=n(605971),u=n(853331),d=n(330926),h=n(955943),g=n(75200),f=n(974904),p=n(32655),m=n(983884),_=n(977363),I=n(870349),E=n(708857),y=n(426807),C=n(71578),b=n(433052),B=n(891674),v=n(234957),w=n(920757),T=n(988609),S=n(810600),x=n(312421),D=n(969077),Q=n(644736),N=n(46257);const R=new D.A(0),M={},L=new a.A,P=new x.A(a.A.WHITE),O=new D.A(!0),F=new D.A(T.A.DISABLED),U=new D.A(new u.A),k=new D.A(C.A.BOTH);function G(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function H(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function V(e,t){if(!(0,A.A)(e))throw new l.A("entity is required");if(!(0,A.A)(t))throw new l.A("scene is required");this._entity=e,this._scene=t,this._entitySubscription=e.definitionChanged.addEventListener(V.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new h.A,this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new G,this._groundGeometryOptions=new H,this._id=`polyline-${e.id}`,this._clampToGround=!1,this._supportsPolylinesOnTerrain=y.A.supportsPolylinesOnTerrain(t),this._zIndex=0,this._onEntityPropertyChanged(e,"polyline",e.polyline,void 0)}Object.defineProperties(V.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,A.A)(this._entity.availability)&&N.A.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}}),V.prototype.isOutlineVisible=function(e){return!1},V.prototype.isFilled=function(e){const t=this._entity;return(this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e))??!1},V.prototype.createFillGeometryInstance=function(e){if(!(0,A.A)(e))throw new l.A("time is required.");if(!this._fillEnabled)throw new l.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new E.A(n&&t.isShowing&&this._showProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),r={show:i,distanceDisplayCondition:d.A.fromDistanceDisplayCondition(o)};let c;return this._materialProperty instanceof x.A&&((0,A.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(c=this._materialProperty.color.getValue(e,L)),(0,A.A)(c)||(c=a.A.WHITE),r.color=s.A.fromColor(c)),this.clampToGround?new g.A({id:t,geometry:new f.A(this._groundGeometryOptions),attributes:r}):((0,A.A)(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof x.A&&((0,A.A)(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||n)&&(c=this._depthFailMaterialProperty.color.getValue(e,L)),(0,A.A)(c)||(c=a.A.WHITE),r.depthFailColor=s.A.fromColor(c)),new g.A({id:t,geometry:new _.A(this._geometryOptions),attributes:r}))},V.prototype.createOutlineGeometryInstance=function(e){throw new l.A("This instance does not represent an outlined geometry.")},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){this._entitySubscription(),(0,c.A)(this)},V.prototype._onEntityPropertyChanged=function(e,t,n,i){if("availability"!==t&&"polyline"!==t)return;const o=this._entity.polyline;if(!(0,A.A)(o))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const r=o.positions,a=o.show;if((0,A.A)(a)&&a.isConstant&&!a.getValue(p.A.MINIMUM_VALUE)||!(0,A.A)(r))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const s=o.zIndex,c=o.material??P,l=c instanceof x.A;this._materialProperty=c,this._depthFailMaterialProperty=o.depthFailMaterial,this._showProperty=a??O,this._shadowsProperty=o.shadows??F,this._distanceDisplayConditionProperty=o.distanceDisplayCondition??U,this._classificationTypeProperty=o.classificationType??k,this._fillEnabled=!0,this._zIndex=s??R;const u=o.width,d=o.arcType,h=o.clampToGround,g=o.granularity;if(r.isConstant&&N.A.isConstant(u)&&N.A.isConstant(d)&&N.A.isConstant(g)&&N.A.isConstant(h)&&N.A.isConstant(s)){const e=this._geometryOptions,t=r.getValue(p.A.MINIMUM_VALUE,e.positions);if(!(0,A.A)(t)||t.length<2)return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));let n;n=l&&(!(0,A.A)(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof x.A)?v.A.VERTEX_FORMAT:w.A.VERTEX_FORMAT,e.vertexFormat=n,e.positions=t,e.width=(0,A.A)(u)?u.getValue(p.A.MINIMUM_VALUE):void 0,e.arcType=(0,A.A)(d)?d.getValue(p.A.MINIMUM_VALUE):void 0,e.granularity=(0,A.A)(g)?g.getValue(p.A.MINIMUM_VALUE):void 0;const i=this._groundGeometryOptions;i.positions=t,i.width=e.width,i.arcType=e.arcType,i.granularity=e.granularity,this._clampToGround=!!(0,A.A)(h)&&h.getValue(p.A.MINIMUM_VALUE),!this._clampToGround&&(0,A.A)(s)&&(0,m.A)("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))},V.prototype.createDynamicUpdater=function(e,t){if(r.A.defined("primitives",e),r.A.defined("groundPrimitives",t),!this._dynamic)throw new l.A("This instance does not represent dynamic geometry.");return new j(e,t,this)};const z={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function j(e,t,n){this._line=void 0,this._primitives=e,this._groundPrimitives=t,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=n,this._positions=[]}function Y(e){if((0,A.A)(e._line))return e._line;const t=e._primitives,n=e._geometryUpdater._scene.id+t._guid;let i=M[n];!(0,A.A)(i)||i.isDestroyed()?(i=new B.A,M[n]=i,t.add(i)):t.contains(i)||t.add(i);const o=i.add();return o.id=e._geometryUpdater._entity,e._line=o,o}j.prototype.update=function(e){const t=this._geometryUpdater,n=t._entity,o=n.polyline,r=o.positions;let a=N.A.getValueOrUndefined(r,e,this._positions);t._clampToGround=N.A.getValueOrDefault(o._clampToGround,e,!1),t._groundGeometryOptions.positions=a,t._groundGeometryOptions.width=N.A.getValueOrDefault(o._width,e,1),t._groundGeometryOptions.arcType=N.A.getValueOrDefault(o._arcType,e,i.A.GEODESIC),t._groundGeometryOptions.granularity=N.A.getValueOrDefault(o._granularity,e,9999);const s=this._groundPrimitives;if((0,A.A)(this._groundPolylinePrimitive)&&(s.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),t.clampToGround){if(!n.isShowing||!n.isAvailable(e)||!N.A.getValueOrDefault(o._show,e,!0))return;if(!(0,A.A)(a)||a.length<2)return;const i=t.fillMaterialProperty;let r;if(i instanceof x.A)r=new v.A;else{const t=Q.A.getValue(e,i,this._material);r=new w.A({material:t,translucent:t.isTranslucent()}),this._material=t}return this._groundPolylinePrimitive=s.add(new b.A({geometryInstances:t.createFillGeometryInstance(e),appearance:r,classificationType:t.classificationTypeProperty.getValue(e),asynchronous:!1}),N.A.getValueOrUndefined(t.zIndex,e)),void((0,A.A)(this._line)&&(this._line.show=!1))}const c=Y(this);if(!n.isShowing||!n.isAvailable(e)||!N.A.getValueOrDefault(o._show,e,!0))return void(c.show=!1);if(!(0,A.A)(a)||a.length<2)return void(c.show=!1);let l=i.A.GEODESIC;l=N.A.getValueOrDefault(o._arcType,e,l);const u=t._scene.globe,d=t._scene.ellipsoid;l!==i.A.NONE&&(0,A.A)(u)&&(z.ellipsoid=d,z.positions=a,z.granularity=N.A.getValueOrUndefined(o._granularity,e),z.height=I.A.extractHeights(a,d),a=l===i.A.GEODESIC?I.A.generateCartesianArc(z):I.A.generateCartesianRhumbArc(z)),c.show=!0,c.positions=a.slice(),c.material=Q.A.getValue(e,t.fillMaterialProperty,c.material),c.width=N.A.getValueOrDefault(o._width,e,1),c.distanceDisplayCondition=N.A.getValueOrUndefined(o._distanceDisplayCondition,e,c.distanceDisplayCondition)},j.prototype.getBoundingSphere=function(e){if(r.A.defined("result",e),this._geometryUpdater.clampToGround){const t=this._groundPolylinePrimitive;if((0,A.A)(t)&&t.show&&t.ready){const n=t.getGeometryInstanceAttributes(this._geometryUpdater._entity);if((0,A.A)(n)&&(0,A.A)(n.boundingSphere))return o.A.clone(n.boundingSphere,e),S.A.DONE}return(0,A.A)(t)&&!t.ready?S.A.PENDING:S.A.DONE}{const t=Y(this);if(t.show&&t.positions.length>0)return o.A.fromPoints(t.positions,e),S.A.DONE}return S.A.FAILED},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){const e=this._geometryUpdater._scene.id+this._primitives._guid,t=M[e];(0,A.A)(t)&&(t.remove(this._line),0===t.length&&(this._primitives.removeAndDestroy(t),delete M[e])),(0,A.A)(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),(0,c.A)(this)};const q=V},302656:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(288787),o=n(660662),r=n(369031),a=n(491446),s=n(677354),A=n(71578),c=n(234957),l=n(920757),u=n(988609),d=n(810600),h=n(312421),g=n(345747),f=n(372891),p=n(724883),m=n(279436),_=n(282323);const I=[];function E(e,t){const n=e._batches,i=n.length;for(let e=0;e<i;e++)n[e].remove(t)}function y(e,t,n){if(n.isDynamic)return void e._dynamicBatch.add(t,n);if(n.clampToGround&&n.fillEnabled){const i=n.classificationTypeProperty.getValue(t);return void e._groundBatches[i].add(t,n)}let i;n.fillEnabled&&(i=n.shadowsProperty.getValue(t));let o,r=0;(0,a.A)(n.depthFailMaterialProperty)&&(r=n.depthFailMaterialProperty instanceof h.A?1:2),(0,a.A)(i)&&(o=i+r*u.A.NUMBER_OF_SHADOW_MODES),n.fillEnabled&&(n.fillMaterialProperty instanceof h.A?e._colorBatches[o].add(t,n):e._materialBatches[o].add(t,n))}function C(e,t,n,o){let a;r.A.defined("scene",e),r.A.defined("entityCollection",t),o=o??e.groundPrimitives,n=n??e.primitives,this._scene=e,this._primitives=n,this._entityCollection=void 0,this._addedObjects=new i.A,this._removedObjects=new i.A,this._changedObjects=new i.A;const s=u.A.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(3*s),this._materialBatches=new Array(3*s),a=0;a<s;++a)this._colorBatches[a]=new p.A(n,c.A,void 0,!1,a),this._materialBatches[a]=new m.A(n,l.A,void 0,!1,a),this._colorBatches[a+s]=new p.A(n,c.A,c.A,!1,a),this._materialBatches[a+s]=new m.A(n,l.A,c.A,!1,a),this._colorBatches[a+2*s]=new p.A(n,c.A,l.A,!1,a),this._materialBatches[a+2*s]=new m.A(n,l.A,l.A,!1,a);this._dynamicBatch=new g.A(n,o);const d=A.A.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(d),a=0;a<d;++a)this._groundBatches[a]=new _.A(o,a);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new i.A,this._updaters=new i.A,this._entityCollection=t,t.collectionChanged.addEventListener(C.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,I)}C.prototype.update=function(e){r.A.defined("time",e);const t=this._addedObjects,n=t.values,i=this._removedObjects,o=i.values,a=this._changedObjects,s=a.values;let A,c,l,u;for(A=s.length-1;A>-1;A--)c=s[A],l=c.id,u=this._updaters.get(l),u.entity===c?(E(this,u),y(this,e,u)):(o.push(c),n.push(c));for(A=o.length-1;A>-1;A--)c=o[A],l=c.id,u=this._updaters.get(l),E(this,u),u.destroy(),this._updaters.remove(l),this._subscriptions.get(l)(),this._subscriptions.remove(l);for(A=n.length-1;A>-1;A--)c=n[A],l=c.id,u=new f.A(c,this._scene),this._updaters.set(l,u),y(this,e,u),this._subscriptions.set(l,u.geometryChanged.addEventListener(C._onGeometryChanged,this));t.removeAll(),i.removeAll(),a.removeAll();let d=!0;const h=this._batches,g=h.length;for(A=0;A<g;A++)d=h[A].update(e)&&d;return d};const b=[],B=new o.A;C.prototype.getBoundingSphere=function(e,t){r.A.defined("entity",e),r.A.defined("result",t);const n=b,i=B;let a=0,s=d.A.DONE;const A=this._batches,c=A.length,l=this._updaters.get(e.id);for(let e=0;e<c;e++){if(s=A[e].getBoundingSphere(l,i),s===d.A.PENDING)return d.A.PENDING;s===d.A.DONE&&(n[a]=o.A.clone(i,n[a]),a++)}return 0===a?d.A.FAILED:(n.length=a,o.A.fromBoundingSpheres(n,t),d.A.DONE)},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(C.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();return this._subscriptions.removeAll(),(0,s.A)(this)},C._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;(0,a.A)(t.get(o))||(0,a.A)(n.get(o))||n.set(o,i)},C.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let a,s,A;for(a=n.length-1;a>-1;a--)A=n[a],s=A.id,i.remove(s)||(o.set(s,A),r.remove(s));for(a=t.length-1;a>-1;a--)A=t[a],s=A.id,o.remove(s)?r.set(s,A):i.set(s,A)};const v=C},412605:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(369031),o=n(41476),r=n(433235),a=n(491446),s=n(605971),A=n(330926),c=n(75200),l=n(32655),u=n(828021),d=n(365943),h=n(708857),g=n(551549),f=n(612123),p=n(312421),m=n(799086),_=n(286299),I=n(46257);const E=new o.A;function y(e){this.id=e,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function C(e,t){_.A.call(this,{entity:e,scene:t,geometryOptions:new y(e),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(e,"polylineVolume",e.polylineVolume,void 0)}function b(e,t,n){m.A.call(this,e,t,n)}(0,a.A)(Object.create)&&(C.prototype=Object.create(_.A.prototype),C.prototype.constructor=C),C.prototype.createFillGeometryInstance=function(e){if(i.A.defined("time",e),!this._fillEnabled)throw new s.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let l,d;const g=new h.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),f=this._distanceDisplayConditionProperty.getValue(e),m=A.A.fromDistanceDisplayCondition(f);if(this._materialProperty instanceof p.A){let t;(0,a.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,E)),(0,a.A)(t)||(t=o.A.WHITE),d=r.A.fromColor(t),l={show:g,distanceDisplayCondition:m,color:d}}else l={show:g,distanceDisplayCondition:m};return new c.A({id:t,geometry:new u.A(this._options),attributes:l})},C.prototype.createOutlineGeometryInstance=function(e){if(i.A.defined("time",e),!this._outlineEnabled)throw new s.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),a=I.A.getValueOrDefault(this._outlineColorProperty,e,o.A.BLACK,E),l=this._distanceDisplayConditionProperty.getValue(e);return new c.A({id:t,geometry:new d.A(this._options),attributes:{show:new h.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:r.A.fromColor(a),distanceDisplayCondition:A.A.fromDistanceDisplayCondition(l)}})},C.prototype._isHidden=function(e,t){return!(0,a.A)(t.positions)||!(0,a.A)(t.shape)||_.A.prototype._isHidden.call(this,e,t)},C.prototype._isDynamic=function(e,t){return!(t.positions.isConstant&&t.shape.isConstant&&I.A.isConstant(t.granularity)&&I.A.isConstant(t.outlineWidth)&&I.A.isConstant(t.cornerType))},C.prototype._setStaticOptions=function(e,t){const n=t.granularity,i=t.cornerType,o=this._options,r=this._materialProperty instanceof p.A;o.vertexFormat=r?f.A.VERTEX_FORMAT:g.A.MaterialSupport.TEXTURED.vertexFormat,o.polylinePositions=t.positions.getValue(l.A.MINIMUM_VALUE,o.polylinePositions),o.shapePositions=t.shape.getValue(l.A.MINIMUM_VALUE,o.shape),o.granularity=(0,a.A)(n)?n.getValue(l.A.MINIMUM_VALUE):void 0,o.cornerType=(0,a.A)(i)?i.getValue(l.A.MINIMUM_VALUE):void 0},C.DynamicGeometryUpdater=b,(0,a.A)(Object.create)&&(b.prototype=Object.create(m.A.prototype),b.prototype.constructor=b),b.prototype._isHidden=function(e,t,n){const i=this._options;return!(0,a.A)(i.polylinePositions)||!(0,a.A)(i.shapePositions)||m.A.prototype._isHidden.call(this,e,t,n)},b.prototype._setOptions=function(e,t,n){const i=this._options;i.polylinePositions=I.A.getValueOrUndefined(t.positions,n,i.polylinePositions),i.shapePositions=I.A.getValueOrUndefined(t.shape,n),i.granularity=I.A.getValueOrUndefined(t.granularity,n),i.cornerType=I.A.getValueOrUndefined(t.cornerType,n)};const B=C},459022:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(564886),o=n(267980),r=n(336946),a=n(369031),s=n(41476),A=n(433235),c=n(491446),l=n(605971),u=n(330926),d=n(610750),h=n(75200),g=n(32655),f=n(852575),p=n(697422),m=n(844610),_=n(406882),I=n(708857),E=n(63316),y=n(551549),C=n(612123),b=n(312421),B=n(799086),v=n(286299),w=n(817634),T=n(46257);const S=new s.A,x=o.A.ZERO,D=new o.A,Q=new p.A,N=new p.A,R=new r.A;function M(e){this.id=e,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function L(e,t){w.A.call(this,{entity:e,scene:t,geometryOptions:new M(e),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(e,"rectangle",e.rectangle,void 0)}function P(e,t,n){B.A.call(this,e,t,n)}(0,c.A)(Object.create)&&(L.prototype=Object.create(w.A.prototype),L.prototype.constructor=L),L.prototype.createFillGeometryInstance=function(e){if(a.A.defined("time",e),!this._fillEnabled)throw new l.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i={show:new I.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof b.A){let t;(0,c.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,S)),(0,c.A)(t)||(t=s.A.WHITE),i.color=A.A.fromColor(t)}return(0,c.A)(this._options.offsetAttribute)&&(i.offset=f.A.fromCartesian3(T.A.getValueOrDefault(this._terrainOffsetProperty,e,x,D))),new h.A({id:t,geometry:new m.A(this._options),attributes:i})},L.prototype.createOutlineGeometryInstance=function(e){if(a.A.defined("time",e),!this._outlineEnabled)throw new l.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),i=T.A.getValueOrDefault(this._outlineColorProperty,e,s.A.BLACK,S),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new I.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:A.A.fromColor(i),distanceDisplayCondition:u.A.fromDistanceDisplayCondition(o),offset:void 0};return(0,c.A)(this._options.offsetAttribute)&&(r.offset=f.A.fromCartesian3(T.A.getValueOrDefault(this._terrainOffsetProperty,e,x,D))),new h.A({id:t,geometry:new _.A(this._options),attributes:r})},L.prototype._computeCenter=function(e,t){const n=T.A.getValueOrUndefined(this._entity.rectangle.coordinates,e,N);if(!(0,c.A)(n))return;const i=p.A.center(n,R);return r.A.toCartesian(i,d.A.default,t)},L.prototype._isHidden=function(e,t){return!(0,c.A)(t.coordinates)||v.A.prototype._isHidden.call(this,e,t)},L.prototype._isDynamic=function(e,t){return!t.coordinates.isConstant||!T.A.isConstant(t.height)||!T.A.isConstant(t.extrudedHeight)||!T.A.isConstant(t.granularity)||!T.A.isConstant(t.stRotation)||!T.A.isConstant(t.rotation)||!T.A.isConstant(t.outlineWidth)||!T.A.isConstant(t.zIndex)||this._onTerrain&&!T.A.isConstant(this._materialProperty)&&!(this._materialProperty instanceof b.A)},L.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof b.A;let o=T.A.getValueOrUndefined(t.height,g.A.MINIMUM_VALUE);const r=T.A.getValueOrDefault(t.heightReference,g.A.MINIMUM_VALUE,E.Ay.NONE);let a=T.A.getValueOrUndefined(t.extrudedHeight,g.A.MINIMUM_VALUE);const s=T.A.getValueOrDefault(t.extrudedHeightReference,g.A.MINIMUM_VALUE,E.Ay.NONE);(0,c.A)(a)&&!(0,c.A)(o)&&(o=0);const A=this._options;A.vertexFormat=n?C.A.VERTEX_FORMAT:y.A.MaterialSupport.TEXTURED.vertexFormat,A.rectangle=t.coordinates.getValue(g.A.MINIMUM_VALUE,A.rectangle),A.granularity=T.A.getValueOrUndefined(t.granularity,g.A.MINIMUM_VALUE),A.stRotation=T.A.getValueOrUndefined(t.stRotation,g.A.MINIMUM_VALUE),A.rotation=T.A.getValueOrUndefined(t.rotation,g.A.MINIMUM_VALUE),A.offsetAttribute=w.A.computeGeometryOffsetAttribute(o,r,a,s),A.height=w.A.getGeometryHeight(o,r),a=w.A.getGeometryExtrudedHeight(a,s),a===w.A.CLAMP_TO_GROUND&&(a=i.A.getMinimumMaximumHeights(m.A.computeRectangle(A,Q)).minimumTerrainHeight),A.extrudedHeight=a},L.DynamicGeometryUpdater=P,(0,c.A)(Object.create)&&(P.prototype=Object.create(B.A.prototype),P.prototype.constructor=P),P.prototype._isHidden=function(e,t,n){return!(0,c.A)(this._options.rectangle)||B.A.prototype._isHidden.call(this,e,t,n)},P.prototype._setOptions=function(e,t,n){const o=this._options;let r=T.A.getValueOrUndefined(t.height,n);const a=T.A.getValueOrDefault(t.heightReference,n,E.Ay.NONE);let s=T.A.getValueOrUndefined(t.extrudedHeight,n);const A=T.A.getValueOrDefault(t.extrudedHeightReference,n,E.Ay.NONE);(0,c.A)(s)&&!(0,c.A)(r)&&(r=0),o.rectangle=T.A.getValueOrUndefined(t.coordinates,n,o.rectangle),o.granularity=T.A.getValueOrUndefined(t.granularity,n),o.stRotation=T.A.getValueOrUndefined(t.stRotation,n),o.rotation=T.A.getValueOrUndefined(t.rotation,n),o.offsetAttribute=w.A.computeGeometryOffsetAttribute(r,a,s,A),o.height=w.A.getGeometryHeight(r,a),s=w.A.getGeometryExtrudedHeight(s,A),s===w.A.CLAMP_TO_GROUND&&(s=i.A.getMinimumMaximumHeights(m.A.computeRectangle(o,Q)).minimumTerrainHeight),o.extrudedHeight=s};const O=L},857870:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(955943),a=n(591978),s=n(46257);function A(e){let t=e._targetProperty;if(!(0,i.A)(t)){let n=e._targetEntity;if(!(0,i.A)(n)){if(n=e._targetCollection.getById(e._targetId),!(0,i.A)(n))return void(e._targetEntity=e._targetProperty=void 0);n.definitionChanged.addEventListener(c.prototype._onTargetEntityDefinitionChanged,e),e._targetEntity=n}const o=e._targetPropertyNames;t=e._targetEntity;for(let e=0,n=o.length;e<n&&(0,i.A)(t);++e)t=t[o[e]];e._targetProperty=t}return t}function c(e,t,n){if(!(0,i.A)(e))throw new o.A("targetCollection is required.");if(!(0,i.A)(t)||""===t)throw new o.A("targetId is required.");if(!(0,i.A)(n)||0===n.length)throw new o.A("targetPropertyNames is required.");for(let e=0;e<n.length;e++){const t=n[e];if(!(0,i.A)(t)||""===t)throw new o.A("reference contains invalid properties.")}this._targetCollection=e,this._targetId=t,this._targetPropertyNames=n,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new r.A,e.collectionChanged.addEventListener(c.prototype._onCollectionChanged,this)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return s.A.isConstant(A(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){const e=A(this);return(0,i.A)(e)?e.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return A(this)}}}),c.fromString=function(e,t){if(!(0,i.A)(e))throw new o.A("targetCollection is required.");if(!(0,i.A)(t))throw new o.A("referenceString is required.");let n;const r=[];let a=!0,s=!1,A="";for(let e=0;e<t.length;++e){const i=t.charAt(e);s?(A+=i,s=!1):"\\"===i?s=!0:a&&"#"===i?(n=A,a=!1,A=""):a||"."!==i?A+=i:(r.push(A),A="")}return r.push(A),new c(e,n,r)};const l=new a.A;c.prototype.getValue=function(e,t){const n=A(this);return(0,i.A)(e)||(e=a.A.now(l)),(0,i.A)(n)?n.getValue(e,t):void 0},c.prototype.getValueInReferenceFrame=function(e,t,n){const o=A(this);return(0,i.A)(o)?o.getValueInReferenceFrame(e,t,n):void 0},c.prototype.getType=function(e){const t=A(this);return(0,i.A)(t)?t.getType(e):void 0},c.prototype.equals=function(e){if(this===e)return!0;const t=this._targetPropertyNames,n=e._targetPropertyNames;if(this._targetCollection!==e._targetCollection||this._targetId!==e._targetId||t.length!==n.length)return!1;const i=this._targetPropertyNames.length;for(let e=0;e<i;e++)if(t[e]!==n[e])return!1;return!0},c.prototype._onTargetEntityDefinitionChanged=function(e,t,n,o){(0,i.A)(this._targetProperty)&&this._targetPropertyNames[0]===t&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))},c.prototype._onCollectionChanged=function(e,t,n){let o=this._targetEntity;(0,i.A)(o)&&-1!==n.indexOf(o)?(o.definitionChanged.removeEventListener(c.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):(0,i.A)(o)||(o=A(this),(0,i.A)(o)&&this._definitionChanged.raiseEvent(this))};const u=c},841802:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(267980),o=n(369031),r=n(491446),a=n(605971),s=n(955943),A=n(591978),c=n(886033),l=n(759078),u=n(46257),d=n(94805);function h(e,t){let n;if((t=t??0)>0){n=new Array(t);for(let e=0;e<t;e++)n[e]=i.A}this._numberOfDerivatives=t,this._property=new d.A(i.A,n),this._definitionChanged=new s.A,this._referenceFrame=e??c.A.FIXED,this._property._definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this)},this)}Object.defineProperties(h.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(e){this._property.forwardExtrapolationType=e}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(e){this._property.forwardExtrapolationDuration=e}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(e){this._property.backwardExtrapolationType=e}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(e){this._property.backwardExtrapolationDuration=e}}});const g=new A.A;h.prototype.getValue=function(e,t){return(0,r.A)(e)||(e=A.A.now(g)),this.getValueInReferenceFrame(e,c.A.FIXED,t)},h.prototype.getValueInReferenceFrame=function(e,t,n){if(o.A.defined("time",e),o.A.defined("referenceFrame",t),n=this._property.getValue(e,n),(0,r.A)(n))return l.A.convertToReferenceFrame(e,n,this._referenceFrame,t,n)},h.prototype.setInterpolationOptions=function(e){this._property.setInterpolationOptions(e)},h.prototype.addSample=function(e,t,n){const i=this._numberOfDerivatives;if(i>0&&(!(0,r.A)(n)||n.length!==i))throw new a.A("derivatives length must be equal to the number of derivatives.");this._property.addSample(e,t,n)},h.prototype.addSamples=function(e,t,n){this._property.addSamples(e,t,n)},h.prototype.addSamplesPackedArray=function(e,t){this._property.addSamplesPackedArray(e,t)},h.prototype.removeSample=function(e){return this._property.removeSample(e)},h.prototype.removeSamples=function(e){this._property.removeSamples(e)},h.prototype.equals=function(e){return this===e||e instanceof h&&u.A.equals(this._property,e._property)&&this._referenceFrame===e._referenceFrame};const f=h},94805:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(525490),o=n(369031),r=n(491446),a=n(605971),s=n(955943),A=n(908077),c=n(591978),l=n(862675);const u={packedLength:1,pack:function(e,t,n){t[n=n??0]=e},unpack:function(e,t,n){return e[t=t??0]}};function d(e,t,n){let i;const o=e.length,r=n.length,a=o+r;if(e.length=a,o!==t){let n=o-1;for(i=a-1;i>=t;i--)e[i]=e[n--]}for(i=0;i<r;i++)e[t++]=n[i]}function h(e,t){return e instanceof c.A?e:"string"==typeof e?c.A.fromIso8601(e):c.A.addSeconds(t,e,new c.A)}const g=[],f=[];function p(e,t,n,o,a){let s,A,l,u,p,m,_=0;for(;_<o.length;){p=h(o[_],e),l=(0,i.A)(t,p,c.A.compare);let I=0,E=0;if(l<0){for(l=~l,u=l*a,A=void 0,m=t[l];_<o.length&&(p=h(o[_],e),!((0,r.A)(A)&&c.A.compare(A,p)>=0||(0,r.A)(m)&&c.A.compare(p,m)>=0));){for(g[I++]=p,_+=1,s=0;s<a;s++)f[E++]=o[_],_+=1;A=p}I>0&&(f.length=E,d(n,u,f),g.length=I,d(t,l,g))}else{for(s=0;s<a;s++)_++,n[l*a+s]=o[_];_++}}}function m(e,t){o.A.defined("type",e);let n=e;n===Number&&(n=u);let i,a=n.packedLength,c=n.packedInterpolationLength??a,d=0;if((0,r.A)(t)){const e=t.length;i=new Array(e);for(let n=0;n<e;n++){let e=t[n];e===Number&&(e=u);const o=e.packedLength;a+=o,c+=e.packedInterpolationLength??o,i[n]=e}d=e}this._type=e,this._innerType=n,this._interpolationDegree=1,this._interpolationAlgorithm=l.A,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=a,this._packedInterpolationLength=c,this._updateTableLength=!0,this._interpolationResult=new Array(c),this._definitionChanged=new s.A,this._derivativeTypes=t,this._innerDerivativeTypes=i,this._inputOrder=d,this._forwardExtrapolationType=A.A.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=A.A.NONE,this._backwardExtrapolationDuration=0}Object.defineProperties(m.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(e){this._forwardExtrapolationType!==e&&(this._forwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(e){this._forwardExtrapolationDuration!==e&&(this._forwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(e){this._backwardExtrapolationType!==e&&(this._backwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(e){this._backwardExtrapolationDuration!==e&&(this._backwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}}});const _=new c.A;function I(e,t,n){const i=e._packedLength;e._times.splice(t,n),e._values.splice(t*i,n*i),e._updateTableLength=!0,e._definitionChanged.raiseEvent(e)}m.prototype.getValue=function(e,t){(0,r.A)(e)||(e=c.A.now(_));const n=this._times,o=n.length;if(0===o)return;let a;const s=this._innerType,l=this._values;let u=(0,i.A)(n,e,c.A.compare);if(u<0){if(u=~u,0===u){const i=n[u];if(a=this._backwardExtrapolationDuration,this._backwardExtrapolationType===A.A.NONE||0!==a&&c.A.secondsDifference(i,e)>a)return;if(this._backwardExtrapolationType===A.A.HOLD)return s.unpack(l,0,t)}if(u>=o){u=o-1;const i=n[u];if(a=this._forwardExtrapolationDuration,this._forwardExtrapolationType===A.A.NONE||0!==a&&c.A.secondsDifference(e,i)>a)return;if(this._forwardExtrapolationType===A.A.HOLD)return u=o-1,s.unpack(l,u*s.packedLength,t)}const i=this._xTable,d=this._yTable,h=this._interpolationAlgorithm,g=this._packedInterpolationLength,f=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;const e=Math.min(h.getRequiredDataPoints(this._interpolationDegree,f),o);e!==this._numberOfPoints&&(this._numberOfPoints=e,i.length=e,d.length=e*g)}const p=this._numberOfPoints-1;if(p<1)return;let m=0,_=o-1;if(_-m+1>=p+1){let e=u-(p/2|0)-1;e<m&&(e=m);let t=e+p;t>_&&(t=_,e=t-p,e<m&&(e=m)),m=e,_=t}const I=_-m+1;for(let e=0;e<I;++e)i[e]=c.A.secondsDifference(n[m+e],n[_]);if((0,r.A)(s.convertPackedArrayForInterpolation))s.convertPackedArrayForInterpolation(l,m,_,d);else{let e=0;const t=this._packedLength;let n=m*t;const i=(_+1)*t;for(;n<i;)d[e]=l[n],n++,e++}const E=c.A.secondsDifference(e,n[_]);let y;if(0!==f&&(0,r.A)(h.interpolate)){const e=Math.floor(g/(f+1));y=h.interpolate(E,i,d,e,f,f,this._interpolationResult)}else y=h.interpolateOrderZero(E,i,d,g,this._interpolationResult);return(0,r.A)(s.unpackInterpolationResult)?s.unpackInterpolationResult(y,l,m,_,t):s.unpack(y,0,t)}return s.unpack(l,u*this._packedLength,t)},m.prototype.setInterpolationOptions=function(e){if(!(0,r.A)(e))return;let t=!1;const n=e.interpolationAlgorithm,i=e.interpolationDegree;(0,r.A)(n)&&this._interpolationAlgorithm!==n&&(this._interpolationAlgorithm=n,t=!0),(0,r.A)(i)&&this._interpolationDegree!==i&&(this._interpolationDegree=i,t=!0),t&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))},m.prototype.addSample=function(e,t,n){const i=this._innerDerivativeTypes,a=(0,r.A)(i);o.A.defined("time",e),o.A.defined("value",t),a&&o.A.defined("derivatives",n);const s=this._innerType,A=[];if(A.push(e),s.pack(t,A,A.length),a){const e=i.length;for(let t=0;t<e;t++)i[t].pack(n[t],A,A.length)}p(void 0,this._times,this._values,A,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},m.prototype.addSamples=function(e,t,n){const i=this._innerDerivativeTypes,s=(0,r.A)(i);if(o.A.defined("times",e),o.A.defined("values",t),e.length!==t.length)throw new a.A("times and values must be the same length.");if(s&&(!(0,r.A)(n)||n.length!==e.length))throw new a.A("times and derivativeValues must be the same length.");const A=this._innerType,c=e.length,l=[];for(let o=0;o<c;o++)if(l.push(e[o]),A.pack(t[o],l,l.length),s){const e=n[o],t=i.length;for(let n=0;n<t;n++)i[n].pack(e[n],l,l.length)}p(void 0,this._times,this._values,l,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},m.prototype.getSample=function(e){o.A.typeOf.number("index",e);const t=this._times,n=t.length;if((0,r.A)(n))return e<0&&(e+=n),t[e]},m.prototype.addSamplesPackedArray=function(e,t){o.A.defined("packedSamples",e),p(t,this._times,this._values,e,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},m.prototype.removeSample=function(e){o.A.defined("time",e);const t=(0,i.A)(this._times,e,c.A.compare);return!(t<0||(I(this,t,1),0))},m.prototype.removeSamples=function(e){o.A.defined("timeInterval",e);const t=this._times;let n=(0,i.A)(t,e.start,c.A.compare);n<0?n=~n:e.isStartIncluded||++n;let r=(0,i.A)(t,e.stop,c.A.compare);r<0?r=~r:e.isStopIncluded&&++r,I(this,n,r-n)},m.prototype.equals=function(e){if(this===e)return!0;if(!(0,r.A)(e))return!1;if(this._type!==e._type||this._interpolationDegree!==e._interpolationDegree||this._interpolationAlgorithm!==e._interpolationAlgorithm)return!1;const t=this._derivativeTypes,n=(0,r.A)(t),i=e._derivativeTypes;if(n!==(0,r.A)(i))return!1;let o,a;if(n){if(a=t.length,a!==i.length)return!1;for(o=0;o<a;o++)if(t[o]!==i[o])return!1}const s=this._times,A=e._times;if(a=s.length,a!==A.length)return!1;for(o=0;o<a;o++)if(!c.A.equals(s[o],A[o]))return!1;const l=this._values,u=e._values;for(a=l.length,o=0;o<a;o++)if(l[o]!==u[o])return!1;return!0},m._mergeNewSamples=p;const E=m},347768:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(610750),a=n(955943),s=n(591978),A=n(886033),c=n(46257);function l(e){this._definitionChanged=new a.A,this._value=void 0,this._removeSubscription=void 0,this.setValue(e)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return c.A.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return(0,i.A)(this._value)?this._value.referenceFrame:A.A.FIXED}}});const u=new s.A;l.prototype.getValue=function(e,t){return(0,i.A)(e)||(e=s.A.now(u)),this.getValueInReferenceFrame(e,A.A.FIXED,t)},l.prototype.setValue=function(e){this._value!==e&&(this._value=e,(0,i.A)(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),(0,i.A)(e)&&(this._removeSubscription=e.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},l.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,i.A)(e))throw new o.A("time is required.");if(!(0,i.A)(t))throw new o.A("referenceFrame is required.");if((0,i.A)(this._value))return n=this._value.getValueInReferenceFrame(e,t,n),(0,i.A)(n)?r.A.default.scaleToGeodeticSurface(n,n):void 0},l.prototype.equals=function(e){return this===e||e instanceof l&&this._value===e._value},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const d=l},724883:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(288787),o=n(267980),r=n(41476),a=n(433235),s=n(491446),A=n(853331),c=n(330926),l=n(852575),u=n(708857),d=n(842153),h=n(810600),g=n(312421),f=n(644736),p=n(46257);const m=new r.A,_=new A.A,I=new A.A,E=o.A.ZERO,y=new o.A;function C(e,t,n,o,r,a,A){let c;this.translucent=t,this.appearanceType=n,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=r,this.depthFailMaterial=void 0,this.closed=a,this.shadows=A,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.updaters=new i.A,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.subscriptions=new i.A,this.showsUpdated=new i.A,this.itemsToRemove=[],this.invalidated=!1,(0,s.A)(r)&&(c=r.definitionChanged.addEventListener(C.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=c}function b(e,t,n,i,o){this._solidItems=[],this._translucentItems=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}function B(e,t){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.remove(t))return 0===i.updaters.length&&(e.splice(n,1),i.destroy()),!0}return!1}function v(e,t,n){let i=!1;const o=t.length;for(let r=0;r<o;++r){const o=t[r],a=o.itemsToRemove,s=a.length;if(s>0)for(r=0;r<s;r++){const t=a[r];o.remove(t),e.add(n,t),i=!0}}return i}function w(e,t,n,i){let o,r=t.length;for(o=r-1;o>=0;o--){const i=t[o];if(i.invalidated){t.splice(o,1);const r=i.updaters.values,a=r.length;for(let t=0;t<a;t++)e.add(n,r[t]);i.destroy()}}for(r=t.length,o=0;o<r;++o)i=t[o].update(n)&&i;return i}function T(e,t,n){const i=e.length;for(let o=0;o<i;o++){const i=e[o];if(i.contains(t))return i.getBoundingSphere(t,n)}return h.A.FAILED}function S(e){const t=e.length;for(let n=0;n<t;n++)e[n].destroy();e.length=0}C.prototype.onMaterialChanged=function(){this.invalidated=!0},C.prototype.isMaterial=function(e){const t=this.depthFailMaterialProperty,n=e.depthFailMaterialProperty;return n===t||!!(0,s.A)(t)&&t.equals(n)},C.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&p.A.isConstant(e.distanceDisplayConditionProperty)&&p.A.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener(function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)}))}else this.updatersWithAttributes.set(n,e)},C.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,s.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},C.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const h=this.primitives;let C;if(this.createPrimitive){const n=this.geometry.values;if(n.length>0){let o;(0,s.A)(i)&&((0,s.A)(this.oldPrimitive)?h.remove(i):this.oldPrimitive=i),(0,s.A)(this.depthFailAppearanceType)&&((0,s.A)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=f.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial)),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),i=new d.A({show:!1,asynchronous:!0,geometryInstances:n.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),h.add(i),t=!1}else{(0,s.A)(i)&&(h.remove(i),i=void 0);const e=this.oldPrimitive;(0,s.A)(e)&&(h.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,s.A)(i)&&i.ready){i.show=!0,(0,s.A)(this.oldPrimitive)&&(h.remove(this.oldPrimitive),this.oldPrimitive=void 0),!(0,s.A)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof g.A||(this.depthFailMaterial=f.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,d=t.length,b=this.waitingOnCreate;for(C=0;C<d;C++){const d=t[C],h=this.geometry.get(d.id);let f=this.attributes.get(h.id.id);if((0,s.A)(f)||(f=i.getGeometryInstanceAttributes(h.id),this.attributes.set(h.id.id,f)),!d.fillMaterialProperty.isConstant||b){const t=d.fillMaterialProperty.color,i=p.A.getValueOrDefault(t,e,r.A.WHITE,m);r.A.equals(f._lastColor,i)||(f._lastColor=r.A.clone(i,f._lastColor),f.color=a.A.toValue(i,f.color),(this.translucent&&255===f.color[3]||!this.translucent&&255!==f.color[3])&&(this.itemsToRemove[n++]=d))}if((0,s.A)(this.depthFailAppearanceType)&&d.depthFailMaterialProperty instanceof g.A&&(!d.depthFailMaterialProperty.isConstant||b)){const t=d.depthFailMaterialProperty.color,n=p.A.getValueOrDefault(t,e,r.A.WHITE,m);r.A.equals(f._lastDepthFailColor,n)||(f._lastDepthFailColor=r.A.clone(n,f._lastDepthFailColor),f.depthFailColor=a.A.toValue(n,f.depthFailColor))}const B=d.entity.isShowing&&(d.hasConstantFill||d.isFilled(e));B!==(1===f.show[0])&&(f.show=u.A.toValue(B,f.show));const v=d.distanceDisplayConditionProperty;if(!p.A.isConstant(v)){const t=p.A.getValueOrDefault(v,e,I,_);A.A.equals(t,f._lastDistanceDisplayCondition)||(f._lastDistanceDisplayCondition=A.A.clone(t,f._lastDistanceDisplayCondition),f.distanceDisplayCondition=c.A.toValue(t,f.distanceDisplayCondition))}const w=d.terrainOffsetProperty;if(!p.A.isConstant(w)){const t=p.A.getValueOrDefault(w,e,E,y);o.A.equals(t,f._lastOffset)||(f._lastOffset=o.A.clone(t,f._lastOffset),f.offset=l.A.toValue(t,f.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else(0,s.A)(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},C.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,s.A)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const a=n.entity.isShowing;a!==(1===r.show[0])&&(r.show=u.A.toValue(a,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},C.prototype.contains=function(e){return this.updaters.contains(e.id)},C.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return h.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,s.A)(i)||!(0,s.A)(i.boundingSphere)||(0,s.A)(i.show)&&0===i.show[0]?h.A.FAILED:(i.boundingSphere.clone(t),h.A.DONE)},C.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,s.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,s.A)(n)&&t.remove(n),(0,s.A)(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},b.prototype.add=function(e,t){let n,i;const o=t.createFillGeometryInstance(e);255===o.attributes.color.value[3]?(n=this._solidItems,i=!1):(n=this._translucentItems,i=!0);const r=n.length;for(let e=0;e<r;e++){const i=n[e];if(i.isMaterial(t))return void i.add(t,o)}const a=new C(this._primitives,i,this._appearanceType,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);a.add(t,o),n.push(a)},b.prototype.remove=function(e){B(this._solidItems,e)||B(this._translucentItems,e)},b.prototype.update=function(e){let t=w(this,this._solidItems,e,!0);t=w(this,this._translucentItems,e,t)&&t;const n=v(this,this._solidItems,e),i=v(this,this._translucentItems,e);return(n||i)&&(t=w(this,this._solidItems,e,t)&&t,t=w(this,this._translucentItems,e,t)&&t),t},b.prototype.getBoundingSphere=function(e,t){const n=T(this._solidItems,e,t);return n===h.A.FAILED?T(this._translucentItems,e,t):n},b.prototype.removeAllPrimitives=function(){S(this._solidItems),S(this._translucentItems)};const x=b},279436:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(288787),o=n(267980),r=n(41476),a=n(433235),s=n(491446),A=n(853331),c=n(330926),l=n(852575),u=n(708857),d=n(842153),h=n(810600),g=n(312421),f=n(644736),p=n(46257);const m=new A.A,_=new A.A,I=o.A.ZERO,E=new o.A;function y(e,t,n,o,r,a,s){this.primitives=e,this.appearanceType=t,this.materialProperty=n,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=r,this.closed=a,this.shadows=s,this.updaters=new i.A,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(y.prototype.onMaterialChanged,this),this.subscriptions=new i.A,this.showsUpdated=new i.A}y.prototype.onMaterialChanged=function(){this.invalidated=!0},y.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty,i=this.depthFailMaterialProperty,o=e.depthFailMaterialProperty;if(n===t&&o===i)return!0;let r=(0,s.A)(t)&&t.equals(n);return r=(!(0,s.A)(i)&&!(0,s.A)(o)||(0,s.A)(i)&&i.equals(o))&&r,r},y.prototype.add=function(e,t){const n=t.id;if(this.updaters.set(n,t),this.geometry.set(n,t.createFillGeometryInstance(e)),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&p.A.isConstant(t.distanceDisplayConditionProperty)&&p.A.isConstant(t.terrainOffsetProperty)){const e=this;this.subscriptions.set(n,t.entity.definitionChanged.addEventListener(function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)}))}else this.updatersWithAttributes.set(n,t);this.createPrimitive=!0},y.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,s.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};const C=new r.A;function b(e,t,n,i,o){this._items=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}y.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,h=this.geometry.values;let y;if(this.createPrimitive){if(h.length>0){let o;(0,s.A)(n)&&((0,s.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=f.A.getValue(e,this.materialProperty,this.material),(0,s.A)(this.depthFailMaterialProperty)&&(this.depthFailMaterial=f.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),n=new d.A({show:!1,asynchronous:!0,geometryInstances:h.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),i.add(n),t=!1}else{(0,s.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,s.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,s.A)(n)&&n.ready){n.show=!0,(0,s.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=f.A.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!(0,s.A)(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof g.A||(this.depthFailMaterial=f.A.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,d=t.length;for(y=0;y<d;y++){const i=t[y],d=i.entity,h=this.geometry.get(i.id);let f=this.attributes.get(h.id.id);if((0,s.A)(f)||(f=n.getGeometryInstanceAttributes(h.id),this.attributes.set(h.id.id,f)),(0,s.A)(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof g.A&&!i.depthFailMaterialProperty.isConstant){const t=i.depthFailMaterialProperty.color,n=p.A.getValueOrDefault(t,e,r.A.WHITE,C);r.A.equals(f._lastDepthFailColor,n)||(f._lastDepthFailColor=r.A.clone(n,f._lastDepthFailColor),f.depthFailColor=a.A.toValue(n,f.depthFailColor))}const b=d.isShowing&&(i.hasConstantFill||i.isFilled(e));b!==(1===f.show[0])&&(f.show=u.A.toValue(b,f.show));const B=i.distanceDisplayConditionProperty;if(!p.A.isConstant(B)){const t=p.A.getValueOrDefault(B,e,_,m);A.A.equals(t,f._lastDistanceDisplayCondition)||(f._lastDistanceDisplayCondition=A.A.clone(t,f._lastDistanceDisplayCondition),f.distanceDisplayCondition=c.A.toValue(t,f.distanceDisplayCondition))}const v=i.terrainOffsetProperty;if(!p.A.isConstant(v)){const t=p.A.getValueOrDefault(v,e,I,E);o.A.equals(t,f._lastOffset)||(f._lastOffset=o.A.clone(t,f._lastOffset),f.offset=l.A.toValue(t,f.offset))}}this.updateShows(n)}else(0,s.A)(n)&&!n.ready&&(t=!1);return t},y.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,r=this.geometry.get(n.id);let a=this.attributes.get(r.id.id);(0,s.A)(a)||(a=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,a));const A=o.isShowing;A!==(1===a.show[0])&&(a.show=u.A.toValue(A,a.show),r.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},y.prototype.contains=function(e){return this.updaters.contains(e.id)},y.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return h.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,s.A)(i)||!(0,s.A)(i.boundingSphere)||(0,s.A)(i.show)&&0===i.show[0]?h.A.FAILED:(i.boundingSphere.clone(t),h.A.DONE)},y.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,s.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,s.A)(n)&&t.remove(n),this.removeMaterialSubscription()},b.prototype.add=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.isMaterial(t))return void i.add(e,t)}const o=new y(this._primitives,this._appearanceType,t.fillMaterialProperty,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);o.add(e,t),n.push(o)},b.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},b.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},b.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return h.A.FAILED},b.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const B=b},692296:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(288787),o=n(41476),r=n(433235),a=n(491446),s=n(853331),A=n(330926),c=n(708857),l=n(623e3),u=n(810600),d=n(46257),h=n(370347);const g=new o.A,f=new s.A,p=new s.A;function m(e,t,n,o){this.primitives=e,this.zIndex=o,this.classificationType=t,this.color=n,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.updaters=new i.A,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.subscriptions=new i.A,this.showsUpdated=new i.A,this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new h.A}function _(e,t){this._batches=[],this._primitives=e,this._classificationType=t}m.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},m.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),this.rectangleCollisionCheck.insert(n,t.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&d.A.isConstant(e.distanceDisplayConditionProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener(function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)}))}else this.updatersWithAttributes.set(n,e)},m.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},m.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives;let u;if(this.createPrimitive){const e=this.geometry.values;if(e.length>0)(0,a.A)(n)&&((0,a.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new l.A({show:!1,asynchronous:!0,geometryInstances:e.slice(),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{(0,a.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,a.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,a.A)(n)&&n.ready){n.show=!0,(0,a.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,l=t.length,h=this.waitingOnCreate;for(u=0;u<l;u++){const i=t[u],l=this.geometry.get(i.id);let m=this.attributes.get(l.id.id);if((0,a.A)(m)||(m=n.getGeometryInstanceAttributes(l.id),this.attributes.set(l.id.id,m)),!i.fillMaterialProperty.isConstant||h){const t=i.fillMaterialProperty.color,n=d.A.getValueOrDefault(t,e,o.A.WHITE,g);o.A.equals(m._lastColor,n)||(m._lastColor=o.A.clone(n,m._lastColor),m.color=r.A.toValue(n,m.color))}const _=i.entity.isShowing&&(i.hasConstantFill||i.isFilled(e));_!==(1===m.show[0])&&(m.show=c.A.toValue(_,m.show));const I=i.distanceDisplayConditionProperty;if(!d.A.isConstant(I)){const t=d.A.getValueOrDefault(I,e,p,f);s.A.equals(t,m._lastDistanceDisplayCondition)||(m._lastDistanceDisplayCondition=s.A.clone(t,m._lastDistanceDisplayCondition),m.distanceDisplayCondition=A.A.toValue(t,m.distanceDisplayCondition))}}this.updateShows(n),this.waitingOnCreate=!1}else(0,a.A)(n)&&!n.ready&&(t=!1);return this.itemsToRemove.length=0,t},m.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,a.A)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const s=n.entity.isShowing;s!==(1===r.show[0])&&(r.show=c.A.toValue(s,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},m.prototype.contains=function(e){return this.updaters.contains(e.id)},m.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return u.A.PENDING;const i=n.getBoundingSphere(e.entity);return(0,a.A)(i)?(i.clone(t),u.A.DONE):u.A.FAILED},m.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;(0,a.A)(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;(0,a.A)(n)&&(e.remove(n),this.oldPrimitive=void 0)},_.prototype.add=function(e,t){const n=t.createFillGeometryInstance(e),i=this._batches,o=d.A.getValueOrDefault(t.zIndex,0);let r;const s=i.length;for(let e=0;e<s;++e){const t=i[e];if(t.zIndex===o&&!t.overlapping(n.geometry.rectangle)){r=t;break}}return(0,a.A)(r)||(r=new m(this._primitives,this._classificationType,n.attributes.color.value,o),i.push(r)),r.add(t,n),r},_.prototype.remove=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;++i)if(t[i].remove(e))return},_.prototype.update=function(e){let t,n,i=!0;const o=this._batches,r=o.length;for(t=0;t<r;++t)i=o[t].update(e)&&i;for(t=0;t<r;++t){const i=o[t],r=i.itemsToRemove,a=r.length;for(let t=0;t<a;t++){n=r[t],i.remove(n);const o=this.add(e,n);i.isDirty=!0,o.isDirty=!0}}for(t=r-1;t>=0;--t){const n=o[t];n.isDirty&&(i=o[t].update(e)&&i,n.isDirty=!1),0===n.geometry.length&&o.splice(t,1)}return i},_.prototype.getBoundingSphere=function(e,t){const n=this._batches,i=n.length;for(let o=0;o<i;++o){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return u.A.FAILED},_.prototype.removeAllPrimitives=function(){const e=this._batches,t=e.length;for(let n=0;n<t;++n)e[n].removeAllPrimitives()};const I=_},759059:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(288787),o=n(491446),r=n(853331),a=n(330926),s=n(370347),A=n(708857),c=n(623e3),l=n(395250),u=n(810600),d=n(312421),h=n(644736),g=n(46257);const f=new r.A,p=new r.A;function m(e,t,n,o,r,a){this.primitives=e,this.classificationType=t,this.appearanceType=n,this.materialProperty=o,this.updaters=new i.A,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.material=void 0,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.subscriptions=new i.A,this.showsUpdated=new i.A,this.usingSphericalTextureCoordinates=r,this.zIndex=a,this.rectangleCollisionCheck=new s.A}function _(e,t,n){this._items=[],this._primitives=e,this._classificationType=t,this._appearanceType=n}m.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},m.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof d.A&&t instanceof d.A||(0,o.A)(t)&&t.equals(n)},m.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),this.rectangleCollisionCheck.insert(i,n.geometry.rectangle),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&g.A.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)}))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},m.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,o.A)(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},m.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,s=this.geometry.values;let l;if(this.createPrimitive){if(s.length>0)(0,o.A)(n)&&((0,o.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=h.A.getValue(e,this.materialProperty,this.material),n=new c.A({show:!1,asynchronous:!0,geometryInstances:s.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{(0,o.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,o.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,o.A)(n)&&n.ready){n.show=!0,(0,o.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=h.A.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material;const t=this.updatersWithAttributes.values,s=t.length;for(l=0;l<s;l++){const i=t[l],s=i.entity,c=this.geometry.get(i.id);let u=this.attributes.get(c.id.id);(0,o.A)(u)||(u=n.getGeometryInstanceAttributes(c.id),this.attributes.set(c.id.id,u));const d=s.isShowing&&(i.hasConstantFill||i.isFilled(e));d!==(1===u.show[0])&&(u.show=A.A.toValue(d,u.show));const h=i.distanceDisplayConditionProperty;if(!g.A.isConstant(h)){const t=g.A.getValueOrDefault(h,e,p,f);r.A.equals(t,u._lastDistanceDisplayCondition)||(u._lastDistanceDisplayCondition=r.A.clone(t,u._lastDistanceDisplayCondition),u.distanceDisplayCondition=a.A.toValue(t,u.distanceDisplayCondition))}}this.updateShows(n)}else(0,o.A)(n)&&!n.ready&&(t=!1);return t},m.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],r=n.entity,a=this.geometry.get(n.id);let s=this.attributes.get(a.id.id);(0,o.A)(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));const c=r.isShowing;c!==(1===s.show[0])&&(s.show=A.A.toValue(c,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},m.prototype.contains=function(e){return this.updaters.contains(e.id)},m.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return u.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,o.A)(i)||!(0,o.A)(i.boundingSphere)||(0,o.A)(i.show)&&0===i.show[0]?u.A.FAILED:(i.boundingSphere.clone(t),u.A.DONE)},m.prototype.destroy=function(){const e=this.primitive,t=this.primitives;(0,o.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,o.A)(n)&&t.remove(n)},_.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=l.A.shouldUseSphericalCoordinates(o.geometry.rectangle),a=g.A.getValueOrDefault(t.zIndex,0);for(let s=0;s<i;++s){const i=n[s];if(i.isMaterial(t)&&i.usingSphericalTextureCoordinates===r&&i.zIndex===a&&!i.overlapping(o.geometry.rectangle))return void i.add(e,t,o)}const s=new m(this._primitives,this._classificationType,this._appearanceType,t.fillMaterialProperty,r,a);s.add(e,t,o),n.push(s)},_.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0&&!t[n].remove(e);n--);},_.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const e=n[t];0===e.updaters.length&&(n.splice(t,1),e.destroy())}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},_.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return u.A.FAILED},_.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const I=_},282323:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(288787),o=n(41476),r=n(433235),a=n(491446),s=n(853331),A=n(330926),c=n(708857),l=n(433052),u=n(234957),d=n(920757),h=n(810600),g=n(312421),f=n(644736),p=n(46257);const m=new o.A,_=new s.A,I=new s.A;function E(e,t,n,o,r){let a;a=n instanceof g.A?u.A:d.A,this.orderedGroundPrimitives=e,this.classificationType=t,this.appearanceType=a,this.materialProperty=n,this.updaters=new i.A,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.material=void 0,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(E.prototype.onMaterialChanged,this),this.subscriptions=new i.A,this.showsUpdated=new i.A,this.zIndex=o,this._asynchronous=r}function y(e,t,n){this._items=[],this._orderedGroundPrimitives=e,this._classificationType=t,this._asynchronous=n??!0}E.prototype.onMaterialChanged=function(){this.invalidated=!0},E.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof g.A&&t instanceof g.A||(0,a.A)(t)&&t.equals(n)},E.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&p.A.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)}))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},E.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,a.A)(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},E.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.orderedGroundPrimitives,u=this.geometry.values;let h;if(this.createPrimitive){if(u.length>0)(0,a.A)(n)&&((0,a.A)(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new l.A({show:!1,asynchronous:this._asynchronous,geometryInstances:u.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===d.A&&(this.material=f.A.getValue(e,this.materialProperty,this.material),n.appearance.material=this.material),i.add(n,this.zIndex),t=!1;else{(0,a.A)(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;(0,a.A)(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if((0,a.A)(n)&&n.ready){n.show=!0,(0,a.A)(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===d.A&&(this.material=f.A.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material);const t=this.updatersWithAttributes.values,l=t.length;for(h=0;h<l;h++){const i=t[h],l=i.entity,u=this.geometry.get(i.id);let d=this.attributes.get(u.id.id);if((0,a.A)(d)||(d=n.getGeometryInstanceAttributes(u.id),this.attributes.set(u.id.id,d)),!i.fillMaterialProperty.isConstant){const t=i.fillMaterialProperty.color,n=p.A.getValueOrDefault(t,e,o.A.WHITE,m);o.A.equals(d._lastColor,n)||(d._lastColor=o.A.clone(n,d._lastColor),d.color=r.A.toValue(n,d.color))}const g=l.isShowing&&(i.hasConstantFill||i.isFilled(e));g!==(1===d.show[0])&&(d.show=c.A.toValue(g,d.show));const f=i.distanceDisplayConditionProperty;if(!p.A.isConstant(f)){const t=p.A.getValueOrDefault(f,e,I,_);s.A.equals(t,d._lastDistanceDisplayCondition)||(d._lastDistanceDisplayCondition=s.A.clone(t,d._lastDistanceDisplayCondition),d.distanceDisplayCondition=A.A.toValue(t,d.distanceDisplayCondition))}}this.updateShows(n)}else(0,a.A)(n)&&!n.ready&&(t=!1);return t},E.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,r=this.geometry.get(n.id);let s=this.attributes.get(r.id.id);(0,a.A)(s)||(s=e.getGeometryInstanceAttributes(r.id),this.attributes.set(r.id.id,s));const A=o.isShowing;A!==(1===s.show[0])&&(s.show=c.A.toValue(A,s.show),r.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},E.prototype.contains=function(e){return this.updaters.contains(e.id)},E.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return h.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,a.A)(i)||!(0,a.A)(i.boundingSphere)||(0,a.A)(i.show)&&0===i.show[0]?h.A.FAILED:(i.boundingSphere.clone(t),h.A.DONE)},E.prototype.destroy=function(){const e=this.primitive,t=this.orderedGroundPrimitives;(0,a.A)(e)&&t.remove(e);const n=this.oldPrimitive;(0,a.A)(n)&&t.remove(n),this.removeMaterialSubscription()},y.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=p.A.getValueOrDefault(t.zIndex,0);for(let a=0;a<i;++a){const i=n[a];if(i.isMaterial(t)&&i.zIndex===r)return void i.add(e,t,o)}const a=new E(this._orderedGroundPrimitives,this._classificationType,t.fillMaterialProperty,r,this._asynchronous);a.add(e,t,o),n.push(a)},y.prototype.remove=function(e){const t=this._items;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.remove(e)){0===i.updaters.length&&(t.splice(n,1),i.destroy());break}}},y.prototype.update=function(e){let t;const n=this._items;for(t=n.length-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let i=!0;for(t=0;t<n.length;t++)i=n[t].update(e)&&i;return i},y.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return h.A.FAILED},y.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};const C=y},174068:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(288787),o=n(267980),r=n(41476),a=n(433235),s=n(491446),A=n(853331),c=n(330926),l=n(852575),u=n(708857),d=n(612123),h=n(842153),g=n(810600),f=n(46257);const p=new r.A,m=new A.A,_=new A.A,I=o.A.ZERO,E=new o.A;function y(e,t,n,o){this.translucent=t,this.width=n,this.shadows=o,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new i.A,this.updaters=new i.A,this.updatersWithAttributes=new i.A,this.attributes=new i.A,this.itemsToRemove=[],this.subscriptions=new i.A,this.showsUpdated=new i.A}function C(e,t,n){this._primitives=e,this._scene=t,this._shadows=n,this._solidBatches=new i.A,this._translucentBatches=new i.A}y.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantOutline&&e.outlineColorProperty.isConstant&&f.A.isConstant(e.distanceDisplayConditionProperty)&&f.A.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener(function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)}))}else this.updatersWithAttributes.set(n,e)},y.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return(0,s.A)(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},y.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const g=this.primitives;let y;if(this.createPrimitive){const e=this.geometry.values;if(e.length>0)(0,s.A)(i)&&((0,s.A)(this.oldPrimitive)?g.remove(i):this.oldPrimitive=i),i=new h.A({show:!1,asynchronous:!0,geometryInstances:e.slice(),appearance:new d.A({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),g.add(i),t=!1;else{(0,s.A)(i)&&(g.remove(i),i=void 0);const e=this.oldPrimitive;(0,s.A)(e)&&(g.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if((0,s.A)(i)&&i.ready){i.show=!0,(0,s.A)(this.oldPrimitive)&&(g.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,d=t.length,h=this.waitingOnCreate;for(y=0;y<d;y++){const d=t[y],g=this.geometry.get(d.id);let C=this.attributes.get(g.id.id);if((0,s.A)(C)||(C=i.getGeometryInstanceAttributes(g.id),this.attributes.set(g.id.id,C)),!d.outlineColorProperty.isConstant||h){const t=d.outlineColorProperty,i=f.A.getValueOrDefault(t,e,r.A.WHITE,p);r.A.equals(C._lastColor,i)||(C._lastColor=r.A.clone(i,C._lastColor),C.color=a.A.toValue(i,C.color),(this.translucent&&255===C.color[3]||!this.translucent&&255!==C.color[3])&&(this.itemsToRemove[n++]=d))}const b=d.entity.isShowing&&(d.hasConstantOutline||d.isOutlineVisible(e));b!==(1===C.show[0])&&(C.show=u.A.toValue(b,C.show));const B=d.distanceDisplayConditionProperty;if(!f.A.isConstant(B)){const t=f.A.getValueOrDefault(B,e,_,m);A.A.equals(t,C._lastDistanceDisplayCondition)||(C._lastDistanceDisplayCondition=A.A.clone(t,C._lastDistanceDisplayCondition),C.distanceDisplayCondition=c.A.toValue(t,C.distanceDisplayCondition))}const v=d.terrainOffsetProperty;if(!f.A.isConstant(v)){const t=f.A.getValueOrDefault(v,e,I,E);o.A.equals(t,C._lastOffset)||(C._lastOffset=o.A.clone(t,C._lastOffset),C.offset=l.A.toValue(t,C.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else(0,s.A)(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},y.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let r=this.attributes.get(o.id.id);(0,s.A)(r)||(r=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,r));const a=n.entity.isShowing;a!==(1===r.show[0])&&(r.show=u.A.toValue(a,r.show),o.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},y.prototype.contains=function(e){return this.updaters.contains(e.id)},y.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return g.A.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!(0,s.A)(i)||!(0,s.A)(i.boundingSphere)||(0,s.A)(i.show)&&0===i.show[0]?g.A.FAILED:(i.boundingSphere.clone(t),g.A.DONE)},y.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;(0,s.A)(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;(0,s.A)(n)&&(e.remove(n),this.oldPrimitive=void 0)},C.prototype.add=function(e,t){const n=t.createOutlineGeometryInstance(e),i=this._scene.clampLineWidth(t.outlineWidth);let o,r;255===n.attributes.color.value[3]?(o=this._solidBatches,r=o.get(i),(0,s.A)(r)||(r=new y(this._primitives,!1,i,this._shadows),o.set(i,r)),r.add(t,n)):(o=this._translucentBatches,r=o.get(i),(0,s.A)(r)||(r=new y(this._primitives,!0,i,this._shadows),o.set(i,r)),r.add(t,n))},C.prototype.remove=function(e){let t;const n=this._solidBatches.values,i=n.length;for(t=0;t<i;t++)if(n[t].remove(e))return;const o=this._translucentBatches.values,r=o.length;for(t=0;t<r;t++)if(o[t].remove(e))return},C.prototype.update=function(e){let t,n,i,o;const r=this._solidBatches.values,a=r.length,s=this._translucentBatches.values,A=s.length;let c,l=!0,u=!1;do{for(u=!1,n=0;n<a;n++){o=r[n],l=o.update(e),c=o.itemsToRemove;const a=c.length;if(a>0)for(u=!0,t=0;t<a;t++)i=c[t],o.remove(i),this.add(e,i)}for(n=0;n<A;n++){o=s[n],l=o.update(e),c=o.itemsToRemove;const r=c.length;if(r>0)for(u=!0,t=0;t<r;t++)i=c[t],o.remove(i),this.add(e,i)}}while(u);return l},C.prototype.getBoundingSphere=function(e,t){let n;const i=this._solidBatches.values,o=i.length;for(n=0;n<o;n++){const o=i[n];if(o.contains(e))return o.getBoundingSphere(e,t)}const r=this._translucentBatches.values,a=r.length;for(n=0;n<a;n++){const i=r[n];if(i.contains(e))return i.getBoundingSphere(e,t)}return g.A.FAILED},C.prototype.removeAllPrimitives=function(){let e;const t=this._solidBatches.values,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._translucentBatches.values,o=i.length;for(e=0;e<o;e++)i[e].removeAllPrimitives()};const b=C},307509:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(267980),o=n(336946),r=n(369031),a=n(491446),s=n(677354),A=n(955943),c=n(32655),l=n(591978),u=n(367817),d=n(63316),h=n(46257);const g=new i.A;function f(e,t,n,s){r.A.defined("scene",e),r.A.defined("positionProperty",t),this._scene=e,this._heightReference=n,this._extrudedHeightReference=s,this._positionProperty=t,this._position=new i.A,this._cartographicPosition=new o.A,this._normal=new i.A,this._definitionChanged=new A.A,this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;const l=this;if((0,a.A)(e.globe)&&(this._removeEventListener=e.terrainProviderChanged.addEventListener(function(){l._updateClamping()}),this._removeModeListener=e.morphComplete.addEventListener(function(){l._updateClamping()})),t.isConstant){const n=t.getValue(c.A.MINIMUM_VALUE,g);if(!(0,a.A)(n)||i.A.equals(n,i.A.ZERO)||!(0,a.A)(e.globe))return;this._position=i.A.clone(n,this._position),this._updateClamping(),this._normal=e.ellipsoid.geodeticSurfaceNormal(n,this._normal)}}Object.defineProperties(f.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),f.prototype._updateClamping=function(){(0,a.A)(this._removeCallbackFunc)&&this._removeCallbackFunc();const e=this._scene,t=this._position;if(i.A.equals(t,i.A.ZERO))return void(this._terrainHeight=0);const n=e.ellipsoid.cartesianToCartographic(t,this._cartographicPosition),o=e.getHeight(n,this._heightReference);(0,a.A)(o)?this._terrainHeight=o:this._terrainHeight=0,this._removeCallbackFunc=e.updateHeight(n,e=>{this._terrainHeight=e.height,this.definitionChanged.raiseEvent()},this._heightReference)};const p=new l.A;f.prototype.getValue=function(e,t){(0,a.A)(e)||(e=l.A.now(p));const n=h.A.getValueOrDefault(this._heightReference,e,d.Ay.NONE),o=h.A.getValueOrDefault(this._extrudedHeightReference,e,d.Ay.NONE);if(n===d.Ay.NONE&&!(0,d.Lq)(o))return this._position=i.A.clone(i.A.ZERO,this._position),i.A.clone(i.A.ZERO,t);if(this._positionProperty.isConstant)return i.A.multiplyByScalar(this._normal,this._terrainHeight,t);const r=this._scene,s=this._positionProperty.getValue(e,g);if(!(0,a.A)(s)||i.A.equals(s,i.A.ZERO)||!(0,a.A)(r.globe))return i.A.clone(i.A.ZERO,t);if(i.A.equalsEpsilon(this._position,s,u.A.EPSILON10))return i.A.multiplyByScalar(this._normal,this._terrainHeight,t);this._position=i.A.clone(s,this._position),this._updateClamping();const A=r.ellipsoid.geodeticSurfaceNormal(s,this._normal);return i.A.multiplyByScalar(A,this._terrainHeight,t)},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return(0,a.A)(this._removeEventListener)&&this._removeEventListener(),(0,a.A)(this._removeModeListener)&&this._removeModeListener(),(0,a.A)(this._removeCallbackFunc)&&this._removeCallbackFunc(),(0,s.A)(this)};const m=f},13346:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(605971),r=n(955943),a=n(591978),s=n(886033),A=n(224847),c=n(759078),l=n(46257);function u(e){this._definitionChanged=new r.A,this._intervals=new A.A,this._intervals.changedEvent.addEventListener(u.prototype._intervalsChanged,this),this._referenceFrame=e??s.A.FIXED}Object.defineProperties(u.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}});const d=new a.A;u.prototype.getValue=function(e,t){return(0,i.A)(e)||(e=a.A.now(d)),this.getValueInReferenceFrame(e,s.A.FIXED,t)},u.prototype.getValueInReferenceFrame=function(e,t,n){if(!(0,i.A)(e))throw new o.A("time is required.");if(!(0,i.A)(t))throw new o.A("referenceFrame is required.");const r=this._intervals.findDataForIntervalContainingDate(e);if((0,i.A)(r))return c.A.convertToReferenceFrame(e,r,this._referenceFrame,t,n)},u.prototype.equals=function(e){return this===e||e instanceof u&&this._intervals.equals(e._intervals,l.A.equals)&&this._referenceFrame===e._referenceFrame},u.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};const h=u},781745:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(267980),o=n(491446),r=n(955943),a=n(591978),s=n(46257);function A(e,t){this._position=void 0,this._subscription=void 0,this._definitionChanged=new r.A,this._normalize=t??!0,this.position=e}Object.defineProperties(A.prototype,{isConstant:{get:function(){return s.A.isConstant(this._position)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._position},set:function(e){const t=this._position;t!==e&&((0,o.A)(t)&&this._subscription(),this._position=e,(0,o.A)(e)&&(this._subscription=e._definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this)},this)),this._definitionChanged.raiseEvent(this))}},normalize:{get:function(){return this._normalize},set:function(e){this._normalize!==e&&(this._normalize=e,this._definitionChanged.raiseEvent(this))}}});const c=new i.A,l=new i.A,u=new a.A,d=new a.A,h=1/60;A.prototype.getValue=function(e,t){return this._getValue(e,t)},A.prototype._getValue=function(e,t,n){(0,o.A)(e)||(e=a.A.now(d)),(0,o.A)(t)||(t=new i.A);const r=this._position;if(s.A.isConstant(r))return this._normalize?void 0:i.A.clone(i.A.ZERO,t);let A=r.getValue(e,c),g=r.getValue(a.A.addSeconds(e,h,u),l);if(!(0,o.A)(A))return;if(!(0,o.A)(g)&&(g=A,A=r.getValue(a.A.addSeconds(e,-h,u),l),!(0,o.A)(A)))return;if(i.A.equals(A,g))return this._normalize?void 0:i.A.clone(i.A.ZERO,t);(0,o.A)(n)&&A.clone(n);const f=i.A.subtract(g,A,t);return this._normalize?i.A.normalize(f,t):i.A.divideByScalar(f,h,t)},A.prototype.equals=function(e){return this===e||e instanceof A&&s.A.equals(this._position,e._position)};const g=A},146511:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(369031),o=n(41476),r=n(433235),a=n(491446),s=n(605971),A=n(330926),c=n(75200),l=n(32655),u=n(708857),d=n(660419),h=n(903473),g=n(551549),f=n(612123),p=n(312421),m=n(799086),_=n(286299),I=n(46257);const E=new o.A;function y(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function C(e,t){_.A.call(this,{entity:e,scene:t,geometryOptions:new y(e),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(e,"wall",e.wall,void 0)}function b(e,t,n){m.A.call(this,e,t,n)}(0,a.A)(Object.create)&&(C.prototype=Object.create(_.A.prototype),C.prototype.constructor=C),C.prototype.createFillGeometryInstance=function(e){if(i.A.defined("time",e),!this._fillEnabled)throw new s.A("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let l,h;const g=new u.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),f=this._distanceDisplayConditionProperty.getValue(e),m=A.A.fromDistanceDisplayCondition(f);if(this._materialProperty instanceof p.A){let t;(0,a.A)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,E)),(0,a.A)(t)||(t=o.A.WHITE),h=r.A.fromColor(t),l={show:g,distanceDisplayCondition:m,color:h}}else l={show:g,distanceDisplayCondition:m};return new c.A({id:t,geometry:new d.A(this._options),attributes:l})},C.prototype.createOutlineGeometryInstance=function(e){if(i.A.defined("time",e),!this._outlineEnabled)throw new s.A("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),a=I.A.getValueOrDefault(this._outlineColorProperty,e,o.A.BLACK,E),l=this._distanceDisplayConditionProperty.getValue(e);return new c.A({id:t,geometry:new h.A(this._options),attributes:{show:new u.A(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:r.A.fromColor(a),distanceDisplayCondition:A.A.fromDistanceDisplayCondition(l)}})},C.prototype._isHidden=function(e,t){return!(0,a.A)(t.positions)||_.A.prototype._isHidden.call(this,e,t)},C.prototype._getIsClosed=function(e){return!1},C.prototype._isDynamic=function(e,t){return!(t.positions.isConstant&&I.A.isConstant(t.minimumHeights)&&I.A.isConstant(t.maximumHeights)&&I.A.isConstant(t.outlineWidth)&&I.A.isConstant(t.granularity))},C.prototype._setStaticOptions=function(e,t){const n=t.minimumHeights,i=t.maximumHeights,o=t.granularity,r=this._materialProperty instanceof p.A,s=this._options;s.vertexFormat=r?f.A.VERTEX_FORMAT:g.A.MaterialSupport.TEXTURED.vertexFormat,s.positions=t.positions.getValue(l.A.MINIMUM_VALUE,s.positions),s.minimumHeights=(0,a.A)(n)?n.getValue(l.A.MINIMUM_VALUE,s.minimumHeights):void 0,s.maximumHeights=(0,a.A)(i)?i.getValue(l.A.MINIMUM_VALUE,s.maximumHeights):void 0,s.granularity=(0,a.A)(o)?o.getValue(l.A.MINIMUM_VALUE):void 0},C.DynamicGeometryUpdater=b,(0,a.A)(Object.create)&&(b.prototype=Object.create(m.A.prototype),b.prototype.constructor=b),b.prototype._isHidden=function(e,t,n){return!(0,a.A)(this._options.positions)||m.A.prototype._isHidden.call(this,e,t,n)},b.prototype._setOptions=function(e,t,n){const i=this._options;i.positions=I.A.getValueOrUndefined(t.positions,n,i.positions),i.minimumHeights=I.A.getValueOrUndefined(t.minimumHeights,n,i.minimumHeights),i.maximumHeights=I.A.getValueOrUndefined(t.maximumHeights,n,i.maximumHeights),i.granularity=I.A.getValueOrUndefined(t.granularity,n)};const B=C},116112:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(605971);const o=function(e){if("string"==typeof e){const t=document.getElementById(e);if(null===t)throw new i.A(`Element with id "${e}" does not exist in the document.`);e=t}return e}},764729:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(10082),r=n(286299),a=n(307509);const s=function(e,t,n,s){if(r.A.prototype._onEntityPropertyChanged.call(this,e,t,n,s),-1===this._observedPropertyNames.indexOf(t))return;const A=this._entity[this._geometryPropertyName];if(!(0,i.A)(A))return;(0,i.A)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const c=A.heightReference;if((0,i.A)(c)){const e=new o.A(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new a.A(this._scene,e,c)}}},769493:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(41476),o=n(915325);function r(e){e=e??o.A.EMPTY_OBJECT,this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}r.ALL=Object.freeze(new r({color:new i.A(0,0,0,0),depth:1,stencil:0})),r.prototype.execute=function(e,t){e.clear(this,t)};const a=r},718289:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(915325),o=n(760866);function r(e){e=e??i.A.EMPTY_OBJECT,this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=e.persists??!1,this.pass=o.A.COMPUTE,this.owner=e.owner}r.prototype.execute=function(e){e.execute(this)};const a=r},494156:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(647934),o=n(369031),r=n(41476),a=n(491446),s=n(677354),A=n(605971),c=n(402330),l=n(351014),u=n(769493),d=n(377496),h=n(483128),g=n(40118),f=n(302836);function p(e){this._context=e}let m;const _=new d.A({primitiveType:c.A.TRIANGLES}),I=new u.A({color:new r.A(0,0,0,0)});p.prototype.execute=function(e){if(o.A.defined("computeCommand",e),(0,a.A)(e.preExecute)&&e.preExecute(e),!(0,a.A)(e.fragmentShaderSource)&&!(0,a.A)(e.shaderProgram))throw new A.A("computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.");o.A.defined("computeCommand.outputTexture",e.outputTexture);const t=e.outputTexture,n=t.width,r=t.height,s=this._context,c=(0,a.A)(e.vertexArray)?e.vertexArray:s.getViewportQuadVertexArray(),u=(0,a.A)(e.shaderProgram)?e.shaderProgram:function(e,t){return f.A.fromCache({context:e,vertexShaderSource:l.A,fragmentShaderSource:t,attributeLocations:{position:0,textureCoordinates:1}})}(s,e.fragmentShaderSource),d=function(e,t){return new h.A({context:e,colorTextures:[t],destroyAttachments:!1})}(s,t),p=function(e,t){return(0,a.A)(m)&&m.viewport.width===e&&m.viewport.height===t||(m=g.A.fromCache({viewport:new i.A(0,0,e,t)})),m}(n,r),E=e.uniformMap,y=I;y.framebuffer=d,y.renderState=p,y.execute(s);const C=_;C.vertexArray=c,C.renderState=p,C.shaderProgram=u,C.uniformMap=E,C.framebuffer=d,C.execute(s),d.destroy(),e.persists||(u.destroy(),(0,a.A)(e.vertexArray)&&c.destroy()),(0,a.A)(e.postExecute)&&e.postExecute(t)},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return(0,s.A)(this)};const E=p},681480:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var i=n(369031),o=n(41476),r=n(571804),a=n(673874),s=n(915325),A=n(491446),c=n(677354),l=n(605971),u=n(944479),d=n(305439),h=n(471874),g=n(584164),f=n(276904),p=n(402330),m=n(123245),_=n(352581),I=n(351014),E=n(442790),y=n(769493),C=n(430332),b=n(346154),B=n(377496),v=n(326429),w=n(57775),T=n(40118),S=n(389994),x=n(302836),D=n(616e3),Q=n(16012),N=n(492718),R=n(508380);function M(e,t){i.A.defined("canvas",e);const{getWebGLStub:n,requestWebgl1:r,webgl:s={},allowTextureFilterAnisotropic:c=!0}=t??{};s.alpha=s.alpha??!1,s.stencil=s.stencil??!0,s.powerPreference=s.powerPreference??"high-performance";const l=(0,A.A)(n)?n(e,s):function(e,t,n){if("undefined"==typeof WebGLRenderingContext)throw new m.A("The browser does not support WebGL.  Visit http://get.webgl.org.");const i="undefined"!=typeof WebGL2RenderingContext;n||i||(n=!0);const o=n?"webgl":"webgl2",r=e.getContext(o,t);if(!(0,A.A)(r))throw new m.A("The browser supports WebGL, but initialization failed.");return r}(e,s,r),u="undefined"!=typeof WebGL2RenderingContext&&l instanceof WebGL2RenderingContext;this._canvas=e,this._originalGLContext=l,this._gl=l,this._webgl2=u,this._id=(0,a.A)(),this.validateFramebuffer=!1,this.validateShaderProgram=!1,this.logShaderCompilation=!1,this._throwOnWebGLError=!1,this._shaderCache=new S.A(this),this._textureCache=new Q.A;const d=l;this._stencilBits=d.getParameter(d.STENCIL_BITS),C.A._maximumCombinedTextureImageUnits=d.getParameter(d.MAX_COMBINED_TEXTURE_IMAGE_UNITS),C.A._maximumCubeMapSize=d.getParameter(d.MAX_CUBE_MAP_TEXTURE_SIZE),C.A._maximumFragmentUniformVectors=d.getParameter(d.MAX_FRAGMENT_UNIFORM_VECTORS),C.A._maximumTextureImageUnits=d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS),C.A._maximumRenderbufferSize=d.getParameter(d.MAX_RENDERBUFFER_SIZE),C.A._maximumTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE),C.A._maximumVaryingVectors=d.getParameter(d.MAX_VARYING_VECTORS),C.A._maximumVertexAttributes=d.getParameter(d.MAX_VERTEX_ATTRIBS),C.A._maximumVertexTextureImageUnits=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C.A._maximumVertexUniformVectors=d.getParameter(d.MAX_VERTEX_UNIFORM_VECTORS),C.A._maximumSamples=this._webgl2?d.getParameter(d.MAX_SAMPLES):0;const g=d.getParameter(d.ALIASED_LINE_WIDTH_RANGE);C.A._minimumAliasedLineWidth=g[0],C.A._maximumAliasedLineWidth=g[1];const f=d.getParameter(d.ALIASED_POINT_SIZE_RANGE);C.A._minimumAliasedPointSize=f[0],C.A._maximumAliasedPointSize=f[1];const p=d.getParameter(d.MAX_VIEWPORT_DIMS);C.A._maximumViewportWidth=p[0],C.A._maximumViewportHeight=p[1];const I=d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT);C.A._highpFloatSupported=0!==I.precision;const E=d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_INT);C.A._highpIntSupported=0!==E.rangeMax,this._antialias=d.getContextAttributes().antialias,this._standardDerivatives=!!O(d,["OES_standard_derivatives"]),this._blendMinmax=!!O(d,["EXT_blend_minmax"]),this._elementIndexUint=!!O(d,["OES_element_index_uint"]),this._depthTexture=!!O(d,["WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),this._fragDepth=!!O(d,["EXT_frag_depth"]),this._debugShaders=O(d,["WEBGL_debug_shaders"]),this._textureFloat=!!O(d,["OES_texture_float"]),this._textureHalfFloat=!!O(d,["OES_texture_half_float"]),this._textureFloatLinear=!!O(d,["OES_texture_float_linear"]),this._textureHalfFloatLinear=!!O(d,["OES_texture_half_float_linear"]),this._supportsTextureLod=!!O(d,["EXT_shader_texture_lod"]),this._colorBufferFloat=!!O(d,["EXT_color_buffer_float","WEBGL_color_buffer_float"]),this._floatBlend=!!O(d,["EXT_float_blend"]),this._colorBufferHalfFloat=!!O(d,["EXT_color_buffer_half_float"]),this._s3tc=!!O(d,["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"]),this._pvrtc=!!O(d,["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"]),this._astc=!!O(d,["WEBGL_compressed_texture_astc"]),this._etc=!!O(d,["WEBG_compressed_texture_etc"]),this._etc1=!!O(d,["WEBGL_compressed_texture_etc1"]),this._bc7=!!O(d,["EXT_texture_compression_bptc"]),h.A.setKTX2SupportedFormats(this._s3tc,this._pvrtc,this._astc,this._etc,this._etc1,this._bc7);const y=c?O(d,["EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"]):void 0;let b,B,w,x,D,R,M,L,P,F;if(this._textureFilterAnisotropic=y,C.A._maximumTextureFilterAnisotropy=(0,A.A)(y)?d.getParameter(y.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,u){const e=this;b=function(){return e._gl.createVertexArray()},B=function(t){e._gl.bindVertexArray(t)},w=function(t){e._gl.deleteVertexArray(t)},x=function(e,t,n,i,o){d.drawElementsInstanced(e,t,n,i,o)},D=function(e,t,n,i){d.drawArraysInstanced(e,t,n,i)},R=function(e,t){d.vertexAttribDivisor(e,t)},M=function(e){d.drawBuffers(e)}}else L=O(d,["OES_vertex_array_object"]),(0,A.A)(L)&&(b=function(){return L.createVertexArrayOES()},B=function(e){L.bindVertexArrayOES(e)},w=function(e){L.deleteVertexArrayOES(e)}),P=O(d,["ANGLE_instanced_arrays"]),(0,A.A)(P)&&(x=function(e,t,n,i,o){P.drawElementsInstancedANGLE(e,t,n,i,o)},D=function(e,t,n,i){P.drawArraysInstancedANGLE(e,t,n,i)},R=function(e,t){P.vertexAttribDivisorANGLE(e,t)}),F=O(d,["WEBGL_draw_buffers"]),(0,A.A)(F)&&(M=function(e){F.drawBuffersWEBGL(e)});this.glCreateVertexArray=b,this.glBindVertexArray=B,this.glDeleteVertexArray=w,this.glDrawElementsInstanced=x,this.glDrawArraysInstanced=D,this.glVertexAttribDivisor=R,this.glDrawBuffers=M,this._vertexArrayObject=!!L,this._instancedArrays=!!P,this._drawBuffers=!!F,C.A._maximumDrawBuffers=this.drawBuffers?d.getParameter(_.A.MAX_DRAW_BUFFERS):1,C.A._maximumColorAttachments=this.drawBuffers?d.getParameter(_.A.MAX_COLOR_ATTACHMENTS):1,this._clearColor=new o.A(0,0,0,0),this._clearDepth=1,this._clearStencil=0;const U=new N.A,k=new v.A(this),G=T.A.fromCache();this._defaultPassState=k,this._defaultRenderState=G,this._defaultTexture=void 0,this._defaultEmissiveTexture=void 0,this._defaultNormalTexture=void 0,this._defaultCubeMap=void 0,this._us=U,this._currentRenderState=G,this._currentPassState=k,this._currentFramebuffer=void 0,this._maxFrameTextureUnitIndex=0,this._vertexAttribDivisors=[],this._previousDrawInstanced=!1;for(let e=0;e<C.A._maximumVertexAttributes;e++)this._vertexAttribDivisors.push(0);this._pickObjects={},this._nextPickColor=new Uint32Array(1),this.options={getWebGLStub:n,requestWebgl1:r,webgl:s,allowTextureFilterAnisotropic:c},this.cache={},T.A.apply(d,G,k)}function L(e,t,n){const i=e.getError();if(i!==e.NO_ERROR)throw new m.A(function(e,t,n,i){let o=`${function(e,t){let n="WebGL Error:  ";switch(t){case e.INVALID_ENUM:n+="INVALID_ENUM";break;case e.INVALID_VALUE:n+="INVALID_VALUE";break;case e.INVALID_OPERATION:n+="INVALID_OPERATION";break;case e.OUT_OF_MEMORY:n+="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:n+="CONTEXT_LOST_WEBGL lost";break;default:n+=`Unknown (${t})`}return n}(e,i)}: ${t.name}(`;for(let e=0;e<n.length;++e)0!==e&&(o+=", "),o+=n[e];return o+=");",o}(e,t,n,i))}function P(e,t,n){return{get:function(){const i=e[t];return n(e,`get: ${t}`,i),e[t]},set:function(i){e[t]=i,n(e,`set: ${t}`,i)}}}function O(e,t){const n=t.length;for(let i=0;i<n;++i){const n=e.getExtension(t[i]);if(n)return n}}const F={};function U(e,t,n,i){const o=e._currentRenderState,r=e._currentPassState;e._currentRenderState=t,e._currentPassState=n,T.A.partialApply(e._gl,o,t,r,n,i)}let k;function G(e,t){if(t!==e._currentFramebuffer){e._currentFramebuffer=t;let n=k;if((0,A.A)(t))t._bind(),function(e){if(e.validateFramebuffer){const t=e._gl,n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE){let e;switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:e="Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.";break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:e="Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.";break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:e="Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.";break;case t.FRAMEBUFFER_UNSUPPORTED:e="Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions."}throw new l.A(e)}}}(e),n=t._getActiveColorAttachments();else{const t=e._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}e.drawBuffers&&e.glDrawBuffers(n)}}Object.defineProperties(M.prototype,{id:{get:function(){return this._id}},webgl2:{get:function(){return this._webgl2}},canvas:{get:function(){return this._canvas}},shaderCache:{get:function(){return this._shaderCache}},textureCache:{get:function(){return this._textureCache}},uniformState:{get:function(){return this._us}},stencilBits:{get:function(){return this._stencilBits}},stencilBuffer:{get:function(){return this._stencilBits>=8}},antialias:{get:function(){return this._antialias}},msaa:{get:function(){return this._webgl2}},standardDerivatives:{get:function(){return this._standardDerivatives||this._webgl2}},floatBlend:{get:function(){return this._floatBlend}},blendMinmax:{get:function(){return this._blendMinmax||this._webgl2}},elementIndexUint:{get:function(){return this._elementIndexUint||this._webgl2}},depthTexture:{get:function(){return this._depthTexture||this._webgl2}},floatingPointTexture:{get:function(){return this._webgl2||this._textureFloat}},halfFloatingPointTexture:{get:function(){return this._webgl2||this._textureHalfFloat}},textureFloatLinear:{get:function(){return this._textureFloatLinear}},textureHalfFloatLinear:{get:function(){return this._webgl2&&this._textureFloatLinear||!this._webgl2&&this._textureHalfFloatLinear}},supportsTextureLod:{get:function(){return this._webgl2||this._supportsTextureLod}},textureFilterAnisotropic:{get:function(){return!!this._textureFilterAnisotropic}},s3tc:{get:function(){return this._s3tc}},pvrtc:{get:function(){return this._pvrtc}},astc:{get:function(){return this._astc}},etc:{get:function(){return this._etc}},etc1:{get:function(){return this._etc1}},bc7:{get:function(){return this._bc7}},supportsBasis:{get:function(){return this._s3tc||this._pvrtc||this._astc||this._etc||this._etc1||this._bc7}},vertexArrayObject:{get:function(){return this._vertexArrayObject||this._webgl2}},fragmentDepth:{get:function(){return this._fragDepth||this._webgl2}},instancedArrays:{get:function(){return this._instancedArrays||this._webgl2}},colorBufferFloat:{get:function(){return this._colorBufferFloat}},colorBufferHalfFloat:{get:function(){return this._webgl2&&this._colorBufferFloat||!this._webgl2&&this._colorBufferHalfFloat}},drawBuffers:{get:function(){return this._drawBuffers||this._webgl2}},debugShaders:{get:function(){return this._debugShaders}},throwOnWebGLError:{get:function(){return this._throwOnWebGLError},set:function(e){this._throwOnWebGLError=e,this._gl=function(e,t){if(!(0,A.A)(t))return e;function n(n){return function(){const i=n.apply(e,arguments);return t(e,n,arguments),i}}const i={};for(const o in e){const r=e[o];r instanceof Function?i[o]=n(r):Object.defineProperty(i,o,P(e,o,t))}return i}(this._originalGLContext,e?L:void 0)}},defaultTexture:{get:function(){return void 0===this._defaultTexture&&(this._defaultTexture=new D.A({context:this,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:!1})),this._defaultTexture}},defaultEmissiveTexture:{get:function(){return void 0===this._defaultEmissiveTexture&&(this._defaultEmissiveTexture=new D.A({context:this,pixelFormat:f.A.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0])},flipY:!1})),this._defaultEmissiveTexture}},defaultNormalTexture:{get:function(){return void 0===this._defaultNormalTexture&&(this._defaultNormalTexture=new D.A({context:this,pixelFormat:f.A.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([128,128,255])},flipY:!1})),this._defaultNormalTexture}},defaultCubeMap:{get:function(){if(void 0===this._defaultCubeMap){const e={width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])};this._defaultCubeMap=new b.A({context:this,source:{positiveX:e,negativeX:e,positiveY:e,negativeY:e,positiveZ:e,negativeZ:e},flipY:!1})}return this._defaultCubeMap}},drawingBufferHeight:{get:function(){return this._gl.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._gl.drawingBufferWidth}},defaultFramebuffer:{get:function(){return F}}}),"undefined"!=typeof WebGLRenderingContext&&(k=[_.A.BACK]);const H=new y.A;M.prototype.clear=function(e,t){e=e??H,t=t??this._defaultPassState;const n=this._gl;let i=0;const r=e.color,a=e.depth,s=e.stencil;(0,A.A)(r)&&(o.A.equals(this._clearColor,r)||(o.A.clone(r,this._clearColor),n.clearColor(r.red,r.green,r.blue,r.alpha)),i|=n.COLOR_BUFFER_BIT),(0,A.A)(a)&&(a!==this._clearDepth&&(this._clearDepth=a,n.clearDepth(a)),i|=n.DEPTH_BUFFER_BIT),(0,A.A)(s)&&(s!==this._clearStencil&&(this._clearStencil=s,n.clearStencil(s)),i|=n.STENCIL_BUFFER_BIT),U(this,e.renderState??this._defaultRenderState,t,!0),G(this,e.framebuffer??t.framebuffer),n.clear(i)},M.prototype.draw=function(e,t,n,o){i.A.defined("drawCommand",e),i.A.defined("drawCommand.shaderProgram",e._shaderProgram),t=t??this._defaultPassState;const r=e._framebuffer??t.framebuffer,a=e._renderState??this._defaultRenderState;n=n??e._shaderProgram,o=o??e._uniformMap,function(e,t,n,i,o){if((0,A.A)(t)&&o.depthTest&&o.depthTest.enabled&&!t.hasDepthAttachment)throw new l.A("The depth test can not be enabled (drawCommand.renderState.depthTest.enabled) because the framebuffer (drawCommand.framebuffer) does not have a depth or depth-stencil renderbuffer.");G(e,t),U(e,o,n,!1),i._bind(),e._maxFrameTextureUnitIndex=Math.max(e._maxFrameTextureUnitIndex,i.maximumTextureUnitIndex)}(this,r,t,n,a),function(e,t,n,o){const r=t._primitiveType,a=t._vertexArray;let s=t._offset,c=t._count;const u=t.instanceCount;if(!p.A.validate(r))throw new l.A("drawCommand.primitiveType is required and must be valid.");if(i.A.defined("drawCommand.vertexArray",a),i.A.typeOf.number.greaterThanOrEquals("drawCommand.offset",s,0),(0,A.A)(c)&&i.A.typeOf.number.greaterThanOrEquals("drawCommand.count",c,0),i.A.typeOf.number.greaterThanOrEquals("drawCommand.instanceCount",u,0),u>0&&!e.instancedArrays)throw new l.A("Instanced arrays extension is not supported");e._us.model=t._modelMatrix??g.A.IDENTITY,n._setUniforms(o,e._us,e.validateShaderProgram),a._bind();const d=a.indexBuffer;(0,A.A)(d)?(s*=d.bytesPerIndex,c=(0,A.A)(c)?Math.min(c,d.numberOfIndices):d.numberOfIndices,0===u?e._gl.drawElements(r,c,d.indexDatatype,s):e.glDrawElementsInstanced(r,c,d.indexDatatype,s,u)):(c=(0,A.A)(c)?Math.min(c,a.numberOfVertices):a.numberOfVertices,0===u?e._gl.drawArrays(r,s,c):e.glDrawArraysInstanced(r,s,c,u)),a._unBind()}(this,e,n,o)},M.prototype.beginFrame=function(){},M.prototype.endFrame=function(){const e=this._gl;e.useProgram(null),this._currentFramebuffer=void 0,e.bindFramebuffer(e.FRAMEBUFFER,null);const t=k;this.drawBuffers&&this.glDrawBuffers(t);const n=this._maxFrameTextureUnitIndex;this._maxFrameTextureUnitIndex=0;for(let t=0;t<n;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null)},M.prototype.readPixels=function(e){const t=this._gl;e=e??s.A.EMPTY_OBJECT;const n=Math.max(e.x??0,0),o=Math.max(e.y??0,0),r=e.width??this.drawingBufferWidth,a=e.height??this.drawingBufferHeight,c=e.framebuffer;i.A.typeOf.number.greaterThan("readState.width",r,0),i.A.typeOf.number.greaterThan("readState.height",a,0);let l=w.A.UNSIGNED_BYTE;(0,A.A)(c)&&c.numberOfColorAttachments>0&&(l=c.getColorTexture(0).pixelDatatype);const u=f.A.createTypedArray(f.A.RGBA,l,r,a);return G(this,c),t.readPixels(n,o,r,a,f.A.RGBA,w.A.toWebGLConstant(l,this),u),u};const V={position:0,textureCoordinates:1};function z(e,t,n){this._pickObjects=e,this.key=t,this.color=n}M.prototype.getViewportQuadVertexArray=function(){let e=this.cache.viewportQuad_vertexArray;if(!(0,A.A)(e)){const t=new u.A({attributes:{position:new d.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1]}),textureCoordinates:new d.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:2,values:[0,0,1,0,1,1,0,1]})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:p.A.TRIANGLES});e=R.A.fromGeometry({context:this,geometry:t,attributeLocations:V,bufferUsage:E.A.STATIC_DRAW,interleave:!0}),this.cache.viewportQuad_vertexArray=e}return e},M.prototype.createViewportQuadCommand=function(e,t){return t=t??s.A.EMPTY_OBJECT,new B.A({vertexArray:this.getViewportQuadVertexArray(),primitiveType:p.A.TRIANGLES,renderState:t.renderState,shaderProgram:x.A.fromCache({context:this,vertexShaderSource:I.A,fragmentShaderSource:e,attributeLocations:V}),uniformMap:t.uniformMap,owner:t.owner,framebuffer:t.framebuffer,pass:t.pass})},M.prototype.getObjectByPickColor=function(e){return i.A.defined("pickColor",e),this._pickObjects[e.toRgba()]},Object.defineProperties(z.prototype,{object:{get:function(){return this._pickObjects[this.key]},set:function(e){this._pickObjects[this.key]=e}}}),z.prototype.destroy=function(){delete this._pickObjects[this.key]},M.prototype.createPickId=function(e){i.A.defined("object",e),++this._nextPickColor[0];const t=this._nextPickColor[0];if(0===t)throw new m.A("Out of unique Pick IDs.");return this._pickObjects[t]=e,new z(this._pickObjects,t,o.A.fromRgba(t))},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){const e=this.cache;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];(0,A.A)(n.destroy)&&n.destroy()}return this._shaderCache=this._shaderCache.destroy(),this._textureCache=this._textureCache.destroy(),this._defaultTexture=this._defaultTexture&&this._defaultTexture.destroy(),this._defaultEmissiveTexture=this._defaultEmissiveTexture&&this._defaultEmissiveTexture.destroy(),this._defaultNormalTexture=this._defaultNormalTexture&&this._defaultNormalTexture.destroy(),this._defaultCubeMap=this._defaultCubeMap&&this._defaultCubeMap.destroy(),(0,c.A)(this)};const j=M},804701:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(483128),o=n(915777),r=n(57775),a=n(557053),s=n(100482),A=n(654799),c=n(616e3),l=n(915325),u=n(491446),d=n(605971),h=n(276904);function g(e){if(e=e??l.A.EMPTY_OBJECT,this._numSamples=e.numSamples??1,this._colorAttachmentsLength=e.colorAttachmentsLength??1,this._color=e.color??!0,this._depth=e.depth??!1,this._depthStencil=e.depthStencil??!1,this._supportsDepthTexture=e.supportsDepthTexture??!1,!this._color&&!this._depth&&!this._depthStencil)throw new d.A("Must enable at least one type of framebuffer attachment.");if(this._depth&&this._depthStencil)throw new d.A("Cannot have both a depth and depth-stencil attachment.");this._createColorAttachments=e.createColorAttachments??!0,this._createDepthAttachments=e.createDepthAttachments??!0,this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(g.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}}),g.prototype.isDirty=function(e,t,n,i,o){n=n??1;const r=this._width!==e||this._height!==t,a=this._numSamples!==n,s=(0,u.A)(i)&&this._pixelDatatype!==i||(0,u.A)(o)&&this._pixelFormat!==o,A=1===n?(0,u.A)(this._framebuffer):(0,u.A)(this._multisampleFramebuffer);return this._attachmentsDirty||r||a||s||!A||this._color&&!(0,u.A)(this._colorTextures[0])},g.prototype.update=function(e,t,n,l,g,f){if(!(0,u.A)(t)||!(0,u.A)(n))throw new d.A("width and height must be defined.");if(l=e.msaa?l??1:1,g=g??(this._color?this._pixelDatatype??r.A.UNSIGNED_BYTE:void 0),f=f??(this._color?this._pixelFormat??h.A.RGBA:void 0),this.isDirty(t,n,l,g,f)){if(this.destroy(),this._width=t,this._height=n,this._numSamples=l,this._pixelDatatype=g,this._pixelFormat=f,this._attachmentsDirty=!1,this._color&&this._createColorAttachments)for(let i=0;i<this._colorAttachmentsLength;++i)if(this._colorTextures[i]=new c.A({context:e,width:t,height:n,pixelFormat:f,pixelDatatype:g,sampler:A.A.NEAREST}),this._numSamples>1){const o=s.A.getColorFormat(g);this._colorRenderbuffers[i]=new a.A({context:e,width:t,height:n,format:o,numSamples:this._numSamples})}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new c.A({context:e,width:t,height:n,pixelFormat:h.A.DEPTH_STENCIL,pixelDatatype:r.A.UNSIGNED_INT_24_8,sampler:A.A.NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new a.A({context:e,width:t,height:n,format:s.A.DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new a.A({context:e,width:t,height:n,format:s.A.DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new c.A({context:e,width:t,height:n,pixelFormat:h.A.DEPTH_COMPONENT,pixelDatatype:r.A.UNSIGNED_INT,sampler:A.A.NEAREST}):this._depthRenderbuffer=new a.A({context:e,width:t,height:n,format:s.A.DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new o.A({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new i.A({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}},g.prototype.getColorTexture=function(e){if((e=e??0)>=this._colorAttachmentsLength)throw new d.A("index must be smaller than total number of color attachments.");return this._colorTextures[e]},g.prototype.setColorTexture=function(e,t){if(t=t??0,this._createColorAttachments)throw new d.A("createColorAttachments must be false if setColorTexture is called.");if(t>=this._colorAttachmentsLength)throw new d.A("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e},g.prototype.getColorRenderbuffer=function(e){if((e=e??0)>=this._colorAttachmentsLength)throw new d.A("index must be smaller than total number of color attachments.");return this._colorRenderbuffers[e]},g.prototype.setColorRenderbuffer=function(e,t){if(t=t??0,this._createColorAttachments)throw new d.A("createColorAttachments must be false if setColorRenderbuffer is called.");if(t>=this._colorAttachmentsLength)throw new d.A("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e},g.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer},g.prototype.setDepthRenderbuffer=function(e){if(this._createDepthAttachments)throw new d.A("createDepthAttachments must be false if setDepthRenderbuffer is called.");this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e},g.prototype.getDepthTexture=function(){return this._depthTexture},g.prototype.setDepthTexture=function(e){if(this._createDepthAttachments)throw new d.A("createDepthAttachments must be false if setDepthTexture is called.");this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e},g.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer},g.prototype.setDepthStencilRenderbuffer=function(e){if(this._createDepthAttachments)throw new d.A("createDepthAttachments must be false if setDepthStencilRenderbuffer is called.");this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e},g.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture},g.prototype.setDepthStencilTexture=function(e){if(this._createDepthAttachments)throw new d.A("createDepthAttachments must be false if setDepthStencilTexture is called.");this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e},g.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)},g.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,n),t.framebuffer=i},g.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()},g.prototype.destroy=function(){if(this._color){const e=this._colorTextures,t=this._colorRenderbuffers;for(let n=0;n<e.length;++n){const i=e[n];this._createColorAttachments&&(0,u.A)(i)&&!i.isDestroyed()&&i.destroy(),(0,u.A)(i)&&i.isDestroyed()&&(e[n]=void 0);const o=t[n];this._createColorAttachments&&(0,u.A)(o)&&!o.isDestroyed()&&o.destroy(),(0,u.A)(o)&&o.isDestroyed()&&(t[n]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),(0,u.A)(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),(0,u.A)(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),(0,u.A)(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),(0,u.A)(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()};const f=g},915777:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(915325),r=n(491446),a=n(677354),s=n(605971),A=n(483128);function c(e){e=e??o.A.EMPTY_OBJECT;const{context:t,width:n,height:a,colorRenderbuffers:c,colorTextures:l,depthStencilRenderbuffer:u,depthStencilTexture:d,destroyAttachments:h}=e;if(i.A.defined("options.context",t),i.A.defined("options.width",n),i.A.defined("options.height",a),this._width=n,this._height=a,(0,r.A)(c)!==(0,r.A)(l))throw new s.A("Both color renderbuffer and texture attachments must be provided.");if((0,r.A)(u)!==(0,r.A)(d))throw new s.A("Both depth-stencil renderbuffer and texture attachments must be provided.");this._renderFramebuffer=new A.A({context:t,colorRenderbuffers:c,depthStencilRenderbuffer:u,destroyAttachments:h}),this._colorFramebuffer=new A.A({context:t,colorTextures:l,depthStencilTexture:d,destroyAttachments:h})}c.prototype.getRenderFramebuffer=function(){return this._renderFramebuffer},c.prototype.getColorFramebuffer=function(){return this._colorFramebuffer},c.prototype.blitFramebuffers=function(e,t){this._renderFramebuffer.bindRead(),this._colorFramebuffer.bindDraw();const n=e._gl;let i=0;this._colorFramebuffer._colorTextures.length>0&&(i|=n.COLOR_BUFFER_BIT),(0,r.A)(this._colorFramebuffer.depthStencilTexture)&&(i|=n.DEPTH_BUFFER_BIT|(t?n.STENCIL_BUFFER_BIT:0)),n.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,i,n.NEAREST),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._renderFramebuffer.destroy(),this._colorFramebuffer.destroy(),(0,a.A)(this)};const l=c},326429:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e){this.context=e,this.framebuffer=void 0,this.blendingEnabled=void 0,this.scissorTest=void 0,this.viewport=void 0}},557053:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(915325),r=n(491446),a=n(677354),s=n(605971),A=n(430332),c=n(100482);function l(e){e=e??o.A.EMPTY_OBJECT,i.A.defined("options.context",e.context);const t=e.context,n=t._gl,a=A.A.maximumRenderbufferSize,l=e.format??c.A.RGBA4,u=(0,r.A)(e.width)?e.width:t.drawingBufferWidth,d=(0,r.A)(e.height)?e.height:t.drawingBufferHeight,h=e.numSamples??1;if(!c.A.validate(l))throw new s.A("Invalid format.");if(i.A.typeOf.number.greaterThan("width",u,0),u>a)throw new s.A(`Width must be less than or equal to the maximum renderbuffer size (${a}).  Check maximumRenderbufferSize.`);if(i.A.typeOf.number.greaterThan("height",d,0),d>a)throw new s.A(`Height must be less than or equal to the maximum renderbuffer size (${a}).  Check maximumRenderbufferSize.`);this._gl=n,this._format=l,this._width=u,this._height=d,this._renderbuffer=this._gl.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this._renderbuffer),h>1?n.renderbufferStorageMultisample(n.RENDERBUFFER,h,l,u,d):n.renderbufferStorage(n.RENDERBUFFER,l,u,d),n.bindRenderbuffer(n.RENDERBUFFER,null)}Object.defineProperties(l.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),l.prototype._getRenderbuffer=function(){return this._renderbuffer},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),(0,a.A)(this)};const u=l},100482:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(352581);const o={RGBA4:i.A.RGBA4,RGBA8:i.A.RGBA8,RGBA16F:i.A.RGBA16F,RGBA32F:i.A.RGBA32F,RGB5_A1:i.A.RGB5_A1,RGB565:i.A.RGB565,DEPTH_COMPONENT16:i.A.DEPTH_COMPONENT16,STENCIL_INDEX8:i.A.STENCIL_INDEX8,DEPTH_STENCIL:i.A.DEPTH_STENCIL,DEPTH24_STENCIL8:i.A.DEPTH24_STENCIL8,validate:function(e){return e===o.RGBA4||e===o.RGBA8||e===o.RGBA16F||e===o.RGBA32F||e===o.RGB5_A1||e===o.RGB565||e===o.DEPTH_COMPONENT16||e===o.STENCIL_INDEX8||e===o.DEPTH_STENCIL||e===o.DEPTH24_STENCIL8},getColorFormat:function(e){return e===i.A.FLOAT?o.RGBA32F:e===i.A.HALF_FLOAT_OES?o.RGBA16F:o.RGBA8}},r=Object.freeze(o)},469635:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(376758),r=n(491446),a=n(605971),s=n(624512),A=n(302836),c=n(342875),l=n(693299),u=n(539846),d=n(702247);function h(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}Object.defineProperties(h.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}}),h.prototype.addDefine=function(e,t,n){i.A.typeOf.string("identifier",e),n=n??s.A.BOTH;let o=e;(0,r.A)(t)&&(o+=` ${t.toString()}`),s.A.includesVertexShader(n)&&this._vertexShaderParts.defineLines.push(o),s.A.includesFragmentShader(n)&&this._fragmentShaderParts.defineLines.push(o)},h.prototype.addStruct=function(e,t,n){i.A.typeOf.string("structId",e),i.A.typeOf.string("structName",t),i.A.typeOf.number("destination",n),this._structs[e]=new l.A(t),s.A.includesVertexShader(n)&&this._vertexShaderParts.structIds.push(e),s.A.includesFragmentShader(n)&&this._fragmentShaderParts.structIds.push(e)},h.prototype.addStructField=function(e,t,n){i.A.typeOf.string("structId",e),i.A.typeOf.string("type",t),i.A.typeOf.string("identifier",n),this._structs[e].addField(t,n)},h.prototype.addFunction=function(e,t,n){i.A.typeOf.string("functionName",e),i.A.typeOf.string("signature",t),i.A.typeOf.number("destination",n),this._functions[e]=new u.A(t),s.A.includesVertexShader(n)&&this._vertexShaderParts.functionIds.push(e),s.A.includesFragmentShader(n)&&this._fragmentShaderParts.functionIds.push(e)},h.prototype.addFunctionLines=function(e,t){if(i.A.typeOf.string("functionName",e),"string"!=typeof t&&!Array.isArray(t))throw new a.A(`Expected lines to be a string or an array of strings, actual value was ${t}`);this._functions[e].addLines(t)},h.prototype.addUniform=function(e,t,n){i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t),n=n??s.A.BOTH;const o=`uniform ${e} ${t};`;s.A.includesVertexShader(n)&&this._vertexShaderParts.uniformLines.push(o),s.A.includesFragmentShader(n)&&this._fragmentShaderParts.uniformLines.push(o)},h.prototype.setPositionAttribute=function(e,t){if(i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t),(0,r.A)(this._positionAttributeLine))throw new a.A("setPositionAttribute() must be called exactly once for the attribute used for gl_Position. For other attributes, use addAttribute()");return this._positionAttributeLine=`in ${e} ${t};`,this._attributeLocations[t]=0,0},h.prototype.addAttribute=function(e,t){i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t);const n=`in ${e} ${t};`;this._attributeLines.push(n);const o=this._nextAttributeLocation;return this._attributeLocations[t]=o,this._nextAttributeLocation+=function(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}(e),o},h.prototype.addVarying=function(e,t,n){i.A.typeOf.string("type",e),i.A.typeOf.string("identifier",t),n=(0,r.A)(n)?`${n} `:"";const o=`${e} ${t};`;this._vertexShaderParts.varyingLines.push(`${n}out ${o}`),this._fragmentShaderParts.varyingLines.push(`${n}in ${o}`)},h.prototype.addVertexLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new a.A(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._vertexShaderParts.shaderLines;Array.isArray(e)?(0,d.A)(t,e):t.push(e)},h.prototype.addFragmentLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new a.A(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._fragmentShaderParts.shaderLines;Array.isArray(e)?(0,d.A)(t,e):t.push(e)},h.prototype.buildShaderProgram=function(e){i.A.typeOf.object("context",e);const t=(0,r.A)(this._positionAttributeLine)?[this._positionAttributeLine]:[],n=function(e){const t=[],n=[];let i,o,r,a,s=e._vertexShaderParts.structIds;for(i=0;i<s.length;i++)o=s[i],r=e._structs[o],a=r.generateGlslLines(),(0,d.A)(t,a);for(s=e._fragmentShaderParts.structIds,i=0;i<s.length;i++)o=s[i],r=e._structs[o],a=r.generateGlslLines(),(0,d.A)(n,a);return{vertexLines:t,fragmentLines:n}}(this),o=function(e){const t=[],n=[];let i,o,r,a,s=e._vertexShaderParts.functionIds;for(i=0;i<s.length;i++)o=s[i],r=e._functions[o],a=r.generateGlslLines(),(0,d.A)(t,a);for(s=e._fragmentShaderParts.functionIds,i=0;i<s.length;i++)o=s[i],r=e._functions[o],a=r.generateGlslLines(),(0,d.A)(n,a);return{vertexLines:t,fragmentLines:n}}(this),a=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,n.vertexLines,o.vertexLines,this._vertexShaderParts.shaderLines).join("\n"),s=new c.A({defines:this._vertexShaderParts.defineLines,sources:[a]}),l=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,n.fragmentLines,o.fragmentLines,this._fragmentShaderParts.shaderLines).join("\n"),u=new c.A({defines:this._fragmentShaderParts.defineLines,sources:[l]});return A.A.fromCache({context:e,vertexShaderSource:s,fragmentShaderSource:u,attributeLocations:this._attributeLocations})},h.prototype.clone=function(){return(0,o.A)(this,!0)};const g=h},389994:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(677354),r=n(302836),a=n(342875);function s(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function A(e,t){const n=t.derivedKeywords,i=n.length;for(let o=0;o<i;++o){const i=n[o]+t.keyword;A(e,e._shaders[i])}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(s.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),s.prototype.replaceShaderProgram=function(e){return(0,i.A)(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},s.prototype.getShaderProgram=function(e){let t=e.vertexShaderSource,n=e.fragmentShaderSource;const o=e.attributeLocations;"string"==typeof t&&(t=new a.A({sources:[t]})),"string"==typeof n&&(n=new a.A({sources:[n]}));const s=`${t.getCacheKey()}:${n.getCacheKey()}:${(0,i.A)(o)?function(e){const t=Object.keys(e).sort();return JSON.stringify(e,t)}(o):""}`;let A;if((0,i.A)(this._shaders[s]))A=this._shaders[s],delete this._shadersToRelease[s];else{const e=this._context,i=t.createCombinedVertexShader(e),a=n.createCombinedFragmentShader(e),c=new r.A({gl:e._gl,logShaderCompilation:e.logShaderCompilation,debugShaders:e.debugShaders,vertexShaderSource:t,vertexShaderText:i,fragmentShaderSource:n,fragmentShaderText:a,attributeLocations:o});A={cache:this,shaderProgram:c,keyword:s,derivedKeywords:[],count:0},c._cachedShader=A,this._shaders[s]=A,++this._numberOfShaders}return++A.count,A.shaderProgram},s.prototype.replaceDerivedShaderProgram=function(e,t,n){const o=e._cachedShader,r=t+o.keyword,a=this._shaders[r];if((0,i.A)(a)){A(this,a);const e=o.derivedKeywords.indexOf(t);e>-1&&o.derivedKeywords.splice(e,1)}return this.createDerivedShaderProgram(e,t,n)},s.prototype.getDerivedShaderProgram=function(e,t){const n=t+e._cachedShader.keyword,o=this._shaders[n];if((0,i.A)(o))return o.shaderProgram},s.prototype.createDerivedShaderProgram=function(e,t,n){const i=e._cachedShader,o=t+i.keyword;let s=n.vertexShaderSource,A=n.fragmentShaderSource;const c=n.attributeLocations;"string"==typeof s&&(s=new a.A({sources:[s]})),"string"==typeof A&&(A=new a.A({sources:[A]}));const l=this._context,u=s.createCombinedVertexShader(l),d=A.createCombinedFragmentShader(l),h=new r.A({gl:l._gl,logShaderCompilation:l.logShaderCompilation,debugShaders:l.debugShaders,vertexShaderSource:s,vertexShaderText:u,fragmentShaderSource:A,fragmentShaderText:d,attributeLocations:c}),g={cache:this,shaderProgram:h,keyword:o,derivedKeywords:[],count:0};return i.derivedKeywords.push(t),h._cachedShader=g,this._shaders[o]=g,h},s.prototype.destroyReleasedShaderPrograms=function(){const e=this._shadersToRelease;for(const t in e)e.hasOwnProperty(t)&&(A(this,e[t]),--this._numberOfShaders);this._shadersToRelease={}},s.prototype.releaseShaderProgram=function(e){if((0,i.A)(e)){const t=e._cachedShader;t&&0===--t.count&&(this._shadersToRelease[t.keyword]=t)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){const e=this._shaders;for(const t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return(0,o.A)(this)};const c=s},624512:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);const o={VERTEX:0,FRAGMENT:1,BOTH:2,includesVertexShader:function(e){return i.A.typeOf.number("destination",e),e===o.VERTEX||e===o.BOTH},includesFragmentShader:function(e){return i.A.typeOf.number("destination",e),e===o.FRAGMENT||e===o.BOTH}},r=Object.freeze(o)},539846:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(605971);function o(e){this.signature=e,this.body=[]}o.prototype.addLines=function(e){if("string"!=typeof e&&!Array.isArray(e))throw new i.A(`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this.body;if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;i++)t.push(`    ${e[i]}`)}else t.push(`    ${e}`)},o.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")};const r=o},693299:(e,t,n)=>{"use strict";function i(e){this.name=e,this.fields=[]}n.d(t,{A:()=>o}),i.prototype.addField=function(e,t){const n=`    ${e} ${t};`;this.fields.push(n)},i.prototype.generateGlslLines=function(){let e=this.fields;return 0===e.length&&(e=["    float _empty;"]),[].concat(`struct ${this.name}`,"{",e,"};")};const o=i},160619:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(376758),o=n(677354),r=n(605971),a=n(681480);function s(e){this._autoDestroy=e?.autoDestroy??!0,this._canvas=document.createElement("canvas"),this._context=new a.A(this._canvas,(0,i.A)(e?.contextOptions)),this._canvases=[]}s.prototype.createSceneContext=function(e){const t=e.getContext("2d",{alpha:!0});if(!t)throw new r.A("canvas used with SharedContext must provide a 2d context");if(this._canvases.includes(e))throw new r.A("canvas is already associated with a scene");const n=this;n._canvases.push(e);let i=!1;const o=function(){i=!0;const t=n._canvases.indexOf(e);-1!==t&&(n._canvases.splice(t,1),n._autoDestroy&&0===n._canvases.length&&n.destroy())},a=function(){const e=n._context.canvas,t=this.drawingBufferWidth;e.width<t&&(e.width=t);const i=this.drawingBufferHeight;e.height<i&&(e.height=i)},s=function(){const e=this.drawingBufferWidth,i=this.drawingBufferHeight,o=n._context.canvas.height-i;t.drawImage(n._context.canvas,0,o,e,i,0,0,e,i),n._context.endFrame()};return new Proxy(this._context,{get(t,n,A){if("isDestroyed"===n)return function(){return i};if(i)throw new r.A("This object was destroyed, i.e., destroy() was called.");switch(n){case"_canvas":return e;case"destroy":return o;case"drawingBufferWidth":return e.width;case"drawingBufferHeight":return e.height;case"beginFrame":return a;case"endFrame":return s;default:return Reflect.get(t,n,A)}}})},s.prototype.destroy=function(){this._context.destroy(),(0,o.A)(this)},s.prototype.isDestroyed=function(){return!1};const A=s},16012:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(677354);function r(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(r.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),r.prototype.getTexture=function(e){const t=this._textures[e];if((0,i.A)(t))return delete this._texturesToRelease[e],++t.count,t.texture},r.prototype.addTexture=function(e,t){const n={texture:t,count:1};t.finalDestroy=t.destroy;const i=this;t.destroy=function(){0===--n.count&&(i._texturesToRelease[e]=n)},this._textures[e]=n,++this._numberOfTextures},r.prototype.destroyReleasedTextures=function(){const e=this._texturesToRelease;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];delete this._textures[t],n.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){const e=this._textures;for(const t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return(0,o.A)(this)};const a=r},492718:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(647934),o=n(434067),r=n(267980),a=n(626809),s=n(336946),A=n(41476),c=n(491446),l=n(610750),u=n(816422),d=n(367817),h=n(331185),g=n(584164),f=n(811203),p=n(658542),m=n(543622),_=n(62467),I=n(205672);function E(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new i.A,this._viewportCartesian4=new a.A,this._viewportDirty=!1,this._viewportOrthographicMatrix=g.A.clone(g.A.IDENTITY),this._viewportTransformation=g.A.clone(g.A.IDENTITY),this._model=g.A.clone(g.A.IDENTITY),this._view=g.A.clone(g.A.IDENTITY),this._inverseView=g.A.clone(g.A.IDENTITY),this._projection=g.A.clone(g.A.IDENTITY),this._infiniteProjection=g.A.clone(g.A.IDENTITY),this._entireFrustum=new o.A,this._currentFrustum=new o.A,this._frustumPlanes=new a.A,this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=h.A.clone(g.A.IDENTITY),this._view3DDirty=!0,this._view3D=new g.A,this._inverseView3DDirty=!0,this._inverseView3D=new g.A,this._inverseModelDirty=!0,this._inverseModel=new g.A,this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new h.A,this._viewRotation=new h.A,this._inverseViewRotation=new h.A,this._viewRotation3D=new h.A,this._inverseViewRotation3D=new h.A,this._inverseProjectionDirty=!0,this._inverseProjection=new g.A,this._modelViewDirty=!0,this._modelView=new g.A,this._modelView3DDirty=!0,this._modelView3D=new g.A,this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new g.A,this._inverseModelViewDirty=!0,this._inverseModelView=new g.A,this._inverseModelView3DDirty=!0,this._inverseModelView3D=new g.A,this._viewProjectionDirty=!0,this._viewProjection=new g.A,this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new g.A,this._modelViewProjectionDirty=!0,this._modelViewProjection=new g.A,this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new g.A,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new g.A,this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new g.A,this._normalDirty=!0,this._normal=new h.A,this._normal3DDirty=!0,this._normal3D=new h.A,this._inverseNormalDirty=!0,this._inverseNormal=new h.A,this._inverseNormal3DDirty=!0,this._inverseNormal3D=new h.A,this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new u.A,this._cameraPosition=new r.A,this._sunPositionWC=new r.A,this._sunPositionColumbusView=new r.A,this._sunDirectionWC=new r.A,this._sunDirectionEC=new r.A,this._moonDirectionEC=new r.A,this._lightDirectionWC=new r.A,this._lightDirectionEC=new r.A,this._lightColor=new r.A,this._lightColorHdr=new r.A,this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new r.A,this._cameraRight=new r.A,this._cameraUp=new r.A,this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new o.A,this._eyeEllipsoidNormalEC=new r.A,this._eyeEllipsoidCurvature=new o.A,this._modelToEnu=new g.A,this._enuToModel=new g.A,this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new A.A,this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._fogVisualDensityScalar=void 0,this._fogMinimumBrightness=void 0,this._atmosphereHsbShift=void 0,this._atmosphereLightIntensity=void 0,this._atmosphereRayleighCoefficient=new r.A,this._atmosphereRayleighScaleHeight=new r.A,this._atmosphereMieCoefficient=new r.A,this._atmosphereMieScaleHeight=void 0,this._atmosphereMieAnisotropy=void 0,this._atmosphereDynamicLighting=void 0,this._invertClassificationColor=void 0,this._splitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}Object.defineProperties(E.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!i.A.equals(e,this._viewport)){i.A.clone(e,this._viewport);const t=this._viewport,n=this._viewportCartesian4;n.x=t.x,n.y=t.y,n.z=t.width,n.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return T(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return T(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){g.A.clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,g.A.inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){const e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,g.A.getMatrix3(this.inverseModel,e),h.A.transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return O(this),this._view3D}},viewRotation:{get:function(){return O(this),this._viewRotation}},viewRotation3D:{get:function(){return O(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return F(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return F(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){var e;return(e=this)._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===_.A.SCENE2D||e._mode===_.A.MORPHING||e._orthographicIn3D?g.A.clone(g.A.ZERO,e._inverseProjection):g.A.inverse(e._projection,e._inverseProjection)),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){var e;return(e=this)._modelViewDirty&&(e._modelViewDirty=!1,g.A.multiplyTransformation(e._view,e._model,e._modelView)),this._modelView}},modelView3D:{get:function(){var e;return(e=this)._modelView3DDirty&&(e._modelView3DDirty=!1,g.A.multiplyTransformation(e.view3D,e._model,e._modelView3D)),this._modelView3D}},modelViewRelativeToEye:{get:function(){return function(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;const t=e.modelView,n=e._modelViewRelativeToEye;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=0,n[13]=0,n[14]=0,n[15]=t[15]}}(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){var e;return(e=this)._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,g.A.inverse(e.modelView,e._inverseModelView)),this._inverseModelView}},inverseModelView3D:{get:function(){var e;return(e=this)._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,g.A.inverse(e.modelView3D,e._inverseModelView3D)),this._inverseModelView3D}},viewProjection:{get:function(){var e;return(e=this)._viewProjectionDirty&&(e._viewProjectionDirty=!1,g.A.multiply(e._projection,e._view,e._viewProjection)),this._viewProjection}},inverseViewProjection:{get:function(){var e;return(e=this)._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,g.A.inverse(e.viewProjection,e._inverseViewProjection)),this._inverseViewProjection}},modelViewProjection:{get:function(){var e;return(e=this)._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,g.A.multiply(e._projection,e.modelView,e._modelViewProjection)),this._modelViewProjection}},inverseModelViewProjection:{get:function(){var e;return(e=this)._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,g.A.inverse(e.modelViewProjection,e._inverseModelViewProjection)),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){var e;return(e=this)._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,g.A.multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye)),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){var e;return(e=this)._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,g.A.multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection)),this._modelViewInfiniteProjection}},normal:{get:function(){return function(e){if(e._normalDirty){e._normalDirty=!1;const t=e._normal;g.A.getMatrix3(e.inverseModelView,t),h.A.transpose(t,t)}}(this),this._normal}},normal3D:{get:function(){return function(e){if(e._normal3DDirty){e._normal3DDirty=!1;const t=e._normal3D;g.A.getMatrix3(e.inverseModelView3D,t),h.A.transpose(t,t)}}(this),this._normal3D}},inverseNormal:{get:function(){return function(e){if(e._inverseNormalDirty){e._inverseNormalDirty=!1;const t=e._inverseNormal;g.A.getMatrix3(e.modelView,t),h.A.transpose(t,t)}}(this),this._inverseNormal}},inverseNormal3D:{get:function(){return function(e){if(e._inverseNormal3DDirty){e._inverseNormal3DDirty=!1;const t=e._inverseNormal3D;g.A.getMatrix3(e.modelView3D,t),h.A.transpose(t,t)}}(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},eyeEllipsoidNormalEC:{get:function(){return this._eyeEllipsoidNormalEC}},eyeEllipsoidCurvature:{get:function(){return this._eyeEllipsoidCurvature}},modelToEnu:{get:function(){return this._modelToEnu}},enuToModel:{get:function(){return this._enuToModel}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return x(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return x(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},fogVisualDensityScalar:{get:function(){return this._fogVisualDensityScalar}},fogMinimumBrightness:{get:function(){return this._fogMinimumBrightness}},atmosphereHsbShift:{get:function(){return this._atmosphereHsbShift}},atmosphereLightIntensity:{get:function(){return this._atmosphereLightIntensity}},atmosphereRayleighCoefficient:{get:function(){return this._atmosphereRayleighCoefficient}},atmosphereRayleighScaleHeight:{get:function(){return this._atmosphereRayleighScaleHeight}},atmosphereMieCoefficient:{get:function(){return this._atmosphereMieCoefficient}},atmosphereMieScaleHeight:{get:function(){return this._atmosphereMieScaleHeight}},atmosphereMieAnisotropy:{get:function(){return this._atmosphereMieAnisotropy}},atmosphereDynamicLighting:{get:function(){return this._atmosphereDynamicLighting}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},splitPosition:{get:function(){return this._splitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return this._ellipsoid??l.A.default}}});const y=new r.A,C=new g.A,b=new h.A,B=new s.A;E.prototype.updateCamera=function(e){var t,n;t=this,n=e.viewMatrix,g.A.clone(n,t._view),g.A.getMatrix3(n,t._viewRotation),t._view3DDirty=!0,t._inverseView3DDirty=!0,t._modelViewDirty=!0,t._modelView3DDirty=!0,t._modelViewRelativeToEyeDirty=!0,t._inverseModelViewDirty=!0,t._inverseModelView3DDirty=!0,t._viewProjectionDirty=!0,t._inverseViewProjectionDirty=!0,t._modelViewProjectionDirty=!0,t._modelViewProjectionRelativeToEyeDirty=!0,t._modelViewInfiniteProjectionDirty=!0,t._normalDirty=!0,t._inverseNormalDirty=!0,t._normal3DDirty=!0,t._inverseNormal3DDirty=!0,function(e,t){g.A.clone(t,e._inverseView),g.A.getMatrix3(t,e._inverseViewRotation)}(this,e.inverseViewMatrix),function(e,t){r.A.clone(t.positionWC,e._cameraPosition),r.A.clone(t.directionWC,e._cameraDirection),r.A.clone(t.rightWC,e._cameraRight),r.A.clone(t.upWC,e._cameraUp);const n=e._ellipsoid;let i;const o=t.positionCartographic;if((0,c.A)(o)?(e._eyeHeight=o.height,e._eyeEllipsoidNormalEC=n.geodeticSurfaceNormalCartographic(o,e._eyeEllipsoidNormalEC),i=r.A.fromRadians(o.longitude,o.latitude,0,n,y)):(e._eyeHeight=-n.maximumRadius,r.A.magnitude(t.positionWC)>0&&(e._eyeEllipsoidNormalEC=r.A.normalize(t.positionWC,e._eyeEllipsoidNormalEC)),i=n.scaleToGeodeticSurface(t.positionWC,y)),e._encodedCameraPositionMCDirty=!0,!(0,c.A)(i))return;e._eyeEllipsoidNormalEC=h.A.multiplyByVector(e._viewRotation,e._eyeEllipsoidNormalEC,e._eyeEllipsoidNormalEC);const a=m.A.eastNorthUpToFixedFrame(i,n,C);e._enuToModel=g.A.multiplyTransformation(e.inverseModel,a,e._enuToModel),e._modelToEnu=g.A.inverseTransformation(e._enuToModel,e._modelToEnu),d.A.equalsEpsilon(n._radii.x,n._radii.y,d.A.EPSILON15)&&(e._eyeEllipsoidCurvature=n.getLocalCurvature(i,e._eyeEllipsoidCurvature))}(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==_.A.SCENE2D&&e.frustum instanceof f.A},E.prototype.updateFrustum=function(e){var t,n;t=this,n=e.projectionMatrix,g.A.clone(n,t._projection),t._inverseProjectionDirty=!0,t._viewProjectionDirty=!0,t._inverseViewProjectionDirty=!0,t._modelViewProjectionDirty=!0,t._modelViewProjectionRelativeToEyeDirty=!0,(0,c.A)(e.infiniteProjectionMatrix)&&function(e,t){g.A.clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=d.A.log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne;const i=e.offCenterFrustum;(0,c.A)(i)&&(e=i),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},E.prototype.updatePass=function(e){this._pass=e};const v=[],w=new I.A;function T(e){if(e._viewportDirty){const t=e._viewport;g.A.computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),g.A.computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}E.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;const t=e.camera;this.updateCamera(t),e.mode===_.A.SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),function(e,t){m.A.computeIcrfToCentralBodyFixedMatrix(t.time,b);let n=p.A.computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);h.A.multiplyByVector(b,n,n),r.A.normalize(n,e._sunDirectionWC),n=h.A.multiplyByVector(e.viewRotation3D,n,e._sunDirectionEC),r.A.normalize(n,n),n=p.A.computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),h.A.multiplyByVector(b,n,n),h.A.multiplyByVector(e.viewRotation3D,n,n),r.A.normalize(n,n);const i=t.mapProjection,o=i.ellipsoid.cartesianToCartographic(e._sunPositionWC,B);i.project(o,e._sunPositionColumbusView)}(this,e);const n=e.light??w;n instanceof I.A?(this._lightDirectionWC=r.A.clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=r.A.clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=r.A.normalize(r.A.negate(n.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=h.A.multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));const i=n.color;let o=r.A.fromElements(i.red,i.green,i.blue,this._lightColorHdr);o=r.A.multiplyByScalar(o,n.intensity,o);const a=r.A.maximumComponent(o);a>1?r.A.divideByScalar(o,a,this._lightColor):r.A.clone(o,this._lightColor);const s=e.brdfLutGenerator,l=(0,c.A)(s)?s.colorTexture:void 0;this._brdfLut=l,this._environmentMap=e.environmentMap??e.context.defaultCubeMap,this._sphericalHarmonicCoefficients=e.sphericalHarmonicCoefficients??v,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,this._fogDensity=e.fog.density,this._fogVisualDensityScalar=e.fog.visualDensityScalar,this._fogMinimumBrightness=e.fog.minimumBrightness;const u=e.atmosphere;(0,c.A)(u)&&(this._atmosphereHsbShift=r.A.fromElements(u.hueShift,u.saturationShift,u.brightnessShift,this._atmosphereHsbShift),this._atmosphereLightIntensity=u.lightIntensity,this._atmosphereRayleighCoefficient=r.A.clone(u.rayleighCoefficient,this._atmosphereRayleighCoefficient),this._atmosphereRayleighScaleHeight=u.rayleighScaleHeight,this._atmosphereMieCoefficient=r.A.clone(u.mieCoefficient,this._atmosphereMieCoefficient),this._atmosphereMieScaleHeight=u.mieScaleHeight,this._atmosphereMieAnisotropy=u.mieAnisotropy,this._atmosphereDynamicLighting=u.dynamicLighting),this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=m.A.computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._splitPosition=e.splitPosition*e.context.drawingBufferWidth;const d=t.frustum.fov,g=this._viewport;let f;f=(0,c.A)(d)?g.height>g.width?2*Math.tan(.5*d)/g.height:2*Math.tan(.5*d)/g.width:1/Math.max(g.width,g.height),this._geometricToleranceOverMeter=f*e.maximumScreenSpaceError,A.A.clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};const S=new r.A;function x(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,g.A.multiplyByPoint(e.inverseModel,e._cameraPosition,S),u.A.fromCartesian(S,e._encodedCameraPositionMC))}const D=new r.A,Q=new r.A,N=new r.A,R=new r.A,M=new s.A,L=new r.A,P=new g.A;function O(e){e._view3DDirty&&(e._mode===_.A.SCENE3D?g.A.clone(e._view,e._view3D):function(e,t,n,i,o,a,s,A){const l=D;l.x=e.y,l.y=e.z,l.z=e.x;const u=Q;u.x=n.y,u.y=n.z,u.z=n.x;const h=N;h.x=i.y,h.y=i.z,h.z=i.x;const f=R;f.x=t.y,f.y=t.z,f.z=t.x,a===_.A.SCENE2D&&(l.z=.5*o);const p=s.unproject(l,M);p.longitude=d.A.clamp(p.longitude,-Math.PI,Math.PI),p.latitude=d.A.clamp(p.latitude,-d.A.PI_OVER_TWO,d.A.PI_OVER_TWO);const I=s.ellipsoid,E=I.cartographicToCartesian(p,L),y=m.A.eastNorthUpToFixedFrame(E,I,P);g.A.multiplyByPointAsVector(y,u,u),g.A.multiplyByPointAsVector(y,h,h),g.A.multiplyByPointAsVector(y,f,f),(0,c.A)(A)||(A=new g.A),A[0]=u.x,A[1]=h.x,A[2]=-f.x,A[3]=0,A[4]=u.y,A[5]=h.y,A[6]=-f.y,A[7]=0,A[8]=u.z,A[9]=h.z,A[10]=-f.z,A[11]=0,A[12]=-r.A.dot(u,E),A[13]=-r.A.dot(h,E),A[14]=r.A.dot(f,E),A[15]=1}(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),g.A.getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function F(e){e._inverseView3DDirty&&(g.A.inverseTransformation(e.view3D,e._inverseView3D),g.A.getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}const U=E},454214:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(491446),r=n(605971),a=n(744603),s=n(346154);const A=function(e,t,n){if(i.A.defined("context",e),i.A.defined("urls",t),Object.values(s.A.FaceName).some(e=>!(0,o.A)(t[e])))throw new r.A("urls must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");const A={flipY:!0,skipColorSpaceConversion:n,preferImageBitmap:!0},c=[a.A.createIfNeeded(t.positiveX).fetchImage(A),a.A.createIfNeeded(t.negativeX).fetchImage(A),a.A.createIfNeeded(t.positiveY).fetchImage(A),a.A.createIfNeeded(t.negativeY).fetchImage(A),a.A.createIfNeeded(t.positiveZ).fetchImage(A),a.A.createIfNeeded(t.negativeZ).fetchImage(A)];return Promise.all(c).then(function(t){return new s.A({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}})})}},953019:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"})},418510:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({SATELLITE:1,OCEANS:2,HILLSHADE:3})},531573:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(434067),o=n(267980),r=n(336946),a=n(369031),s=n(672743),A=n(915325),c=n(491446),l=n(955943),u=n(653577),d=n(182348),h=n(367817),g=n(697422),f=n(744603),p=n(123245),m=n(414305),_=n(41076),I=n(95146),E=n(836721),y=n(789989),C=n(553909),b=n(418510),B=n(605971);function v(e){this.useTiles=e.usePreCachedTilesIfAvailable??!0;const t=e.ellipsoid;this.tilingScheme=e.tilingScheme??new d.A({ellipsoid:t}),this.rectangle=e.rectangle??this.tilingScheme.rectangle,this.ellipsoid=t;let n=e.credit;"string"==typeof n&&(n=new s.A(n)),this.credit=n,this.tileCredits=void 0,this.tileDiscardPolicy=e.tileDiscardPolicy,this.tileWidth=e.tileWidth??256,this.tileHeight=e.tileHeight??256,this.maximumLevel=e.maximumLevel}function w(e){e=e??A.A.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new d.A({ellipsoid:e.ellipsoid}),this._useTiles=e.usePreCachedTilesIfAvailable??!0,this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._layers=e.layers,this._credit=e.credit,this._tileCredits=void 0;let t=e.credit;"string"==typeof t&&(t=new s.A(t)),this.enablePickFeatures=e.enablePickFeatures??!0,this._errorEvent=new l.A}function T(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{const a=e._tilingScheme.tileXYToNativeRectangle(t,n,i),s={bbox:`${a.west},${a.south},${a.east},${a.north}`,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof u.A?(s.bboxSR=4326,s.imageSR=4326):(s.bboxSR=3857,s.imageSR=3857),e.layers&&(s.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:"export",request:o,queryParameters:s})}return r}v.prototype.build=function(e){e._useTiles=this.useTiles,e._tilingScheme=this.tilingScheme,e._rectangle=this.rectangle,e._credit=this.credit,e._tileCredits=this.tileCredits,e._tileDiscardPolicy=this.tileDiscardPolicy,e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,this.useTiles&&!(0,c.A)(this.tileDiscardPolicy)&&(e._tileDiscardPolicy=new E.A({missingImageUrl:T(e,0,0,this.maximumLevel).url,pixelsToCheck:[new i.A(0,0),new i.A(200,20),new i.A(20,200),new i.A(80,110),new i.A(160,130)],disableCheckIfAllPixelsAreTransparent:!0}))},w.fromBasemapType=async function(e,t){let n,i,o;switch(a.A.defined("style",e),t=t??A.A.EMPTY_OBJECT,e){case b.A.SATELLITE:{n=t.token??I.A.defaultAccessToken,i=f.A.createIfNeeded(I.A.defaultWorldImageryServer),i.appendForwardSlash();const e=I.A.getDefaultTokenCredit(n);(0,c.A)(e)&&(o=s.A.clone(e))}break;case b.A.OCEANS:{n=t.token??I.A.defaultAccessToken,i=f.A.createIfNeeded(I.A.defaultWorldOceanServer),i.appendForwardSlash();const e=I.A.getDefaultTokenCredit(n);(0,c.A)(e)&&(o=s.A.clone(e))}break;case b.A.HILLSHADE:{n=t.token??I.A.defaultAccessToken,i=f.A.createIfNeeded(I.A.defaultWorldHillshadeServer),i.appendForwardSlash();const e=I.A.getDefaultTokenCredit(n);(0,c.A)(e)&&(o=s.A.clone(e))}break;default:throw new B.A(`Unsupported basemap type: ${e}`)}return w.fromUrl(i,{...t,token:n,credit:o,usePreCachedTilesIfAvailable:!0})},Object.defineProperties(w.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}}),w.fromUrl=async function(e,t){a.A.defined("url",e),t=t??A.A.EMPTY_OBJECT;const n=f.A.createIfNeeded(e);n.appendForwardSlash(),(0,c.A)(t.token)&&n.setQueryParameters({token:t.token});const i=new w(t);i._resource=n;const r=new v(t);return(t.usePreCachedTilesIfAvailable??!0)&&await async function(e,t){const n=e.getDerivedResource({queryParameters:{f:"json"}});try{!function(e,t){const n=e.tileInfo;if((0,c.A)(n)){if(t.tileWidth=n.rows,t.tileHeight=n.cols,102100===n.spatialReference.wkid||102113===n.spatialReference.wkid)t.tilingScheme=new _.A({ellipsoid:t.ellipsoid});else{if(4326!==e.tileInfo.spatialReference.wkid){const t=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;throw new p.A(t)}t.tilingScheme=new d.A({ellipsoid:t.ellipsoid})}if(t.maximumLevel=e.tileInfo.lods.length-1,(0,c.A)(e.fullExtent)){if((0,c.A)(e.fullExtent.spatialReference)&&(0,c.A)(e.fullExtent.spatialReference.wkid))if(102100===e.fullExtent.spatialReference.wkid||102113===e.fullExtent.spatialReference.wkid){const n=new m.A,i=e.fullExtent,r=n.unproject(new o.A(Math.max(i.xmin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(i.ymin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),a=n.unproject(new o.A(Math.min(i.xmax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(i.ymax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0));t.rectangle=new g.A(r.longitude,r.latitude,a.longitude,a.latitude)}else{if(4326!==e.fullExtent.spatialReference.wkid){const t=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;throw new p.A(t)}t.rectangle=g.A.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax)}}else t.rectangle=t.tilingScheme.rectangle;t.useTiles=!0}else t.useTiles=!1;(0,c.A)(e.copyrightText)&&e.copyrightText.length>0&&((0,c.A)(t.credit)?t.tileCredits=[new s.A(e.copyrightText)]:t.credit=new s.A(e.copyrightText))}(await n.fetchJson(),t)}catch(t){!function(e,t){let n=`An error occurred while accessing ${e.url}`;throw(0,c.A)(t)&&(0,c.A)(t.message)&&(n+=`: ${t.message}`),new p.A(n)}(e,t)}}(n,r),r.build(i),i},w.prototype.getTileCredits=function(e,t,n){return this._tileCredits},w.prototype.requestImage=function(e,t,n,i){return C.A.loadImage(this,T(this,e,t,n,i))},w.prototype.pickFeatures=function(e,t,n,i,a){if(!this.enablePickFeatures)return;const s=this._tilingScheme.tileXYToNativeRectangle(e,t,n);let A,l,d;if(this._tilingScheme.projection instanceof u.A)A=h.A.toDegrees(i),l=h.A.toDegrees(a),d="4326";else{const e=this._tilingScheme.projection.project(new r.A(i,a,0));A=e.x,l=e.y,d="3857"}let g="visible";(0,c.A)(this._layers)&&(g+=`:${this._layers}`);const f={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${A},${l}`,mapExtent:`${s.west},${s.south},${s.east},${s.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:d,layers:g};return this._resource.getDerivedResource({url:"identify",queryParameters:f}).fetchJson().then(function(e){const t=[],n=e.results;if(!(0,c.A)(n))return t;for(let e=0;e<n.length;++e){const i=n[e],a=new y.A;if(a.data=i,a.name=i.value,a.properties=i.attributes,a.configureDescriptionFromProperties(i.attributes),"esriGeometryPoint"===i.geometryType&&i.geometry){const e=i.geometry.spatialReference&&i.geometry.spatialReference.wkid?i.geometry.spatialReference.wkid:4326;if(4326===e||4283===e)a.position=r.A.fromDegrees(i.geometry.x,i.geometry.y,i.geometry.z);else if(102100===e||900913===e||3857===e){const e=new m.A;a.position=e.unproject(new o.A(i.geometry.x,i.geometry.y,i.geometry.z))}}t.push(a)}return t})},w._metadataCache={};const S=w},95146:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(672743),o=n(491446),r=n(744603);let a;const s="AAPTxy8BH1VEsoebNVZXo8HurEOF051kAEKlhkOhBEc9BmRXcPUeuOd6ZTh-Z86vRv6teqZdBYLUWIxB6HTYajPhFtAlXhMdqTg07UwlBQ59KbiReC5wCeOF4LzLTW4oaSPp-t4pEcJHnFePlnFcIPXM7R565gTy6f6fMuZAXPvUEuZSMf8dvTqHyV9-Zd9eZGWokDzKC4uEtHME7OeAk3oyZ7vzkjEo8fpuIfFw0sH8vQU.AT1_PLgWE6Lc",A={};A.defaultAccessToken=s,A.defaultWorldImageryServer=new r.A({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}),A.defaultWorldHillshadeServer=new r.A({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}),A.defaultWorldOceanServer=new r.A({url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"}),A.getDefaultTokenCredit=function(e){if(e===s){if(!(0,o.A)(a)){const e='<b>             This application is using a default ArcGIS access token. Please assign <i>Cesium.ArcGisMapService.defaultAccessToken</i>             with an API key from your ArcGIS Developer account before using the ArcGIS tile services.             You can sign up for a free ArcGIS Developer account at <a href="https://developers.arcgis.com/">https://developers.arcgis.com/</a>.</b>';a=new i.A(e,!0)}return a}};const c=A},153662:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(267980),o=n(367817),r=n(226381);function a(){this.lightIntensity=10,this.rayleighCoefficient=new i.A(55e-7,13e-6,284e-7),this.mieCoefficient=new i.A(21e-6,21e-6,21e-6),this.rayleighScaleHeight=1e4,this.mieScaleHeight=3200,this.mieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.dynamicLighting=r.A.NONE}a.requiresColorCorrect=function(e){return!(o.A.equalsEpsilon(e.hueShift,0,o.A.EPSILON7)&&o.A.equalsEpsilon(e.saturationShift,0,o.A.EPSILON7)&&o.A.equalsEpsilon(e.brightnessShift,0,o.A.EPSILON7))};const s=a},355540:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(434067),o=n(41476),r=n(491446),a=n(677354),s=n(769493),A=n(804701),c=n(57775);function l(){this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._ready=!1,this._name="czm_autoexposure",this._logDepthChanged=void 0,this._useLogDepth=void 0,this._framebuffers=void 0,this._previousLuminance=new A.A,this._commands=void 0,this._clearCommand=void 0,this._minMaxLuminance=new i.A,this.enabled=!0,this._enabled=!0,this.minimumLuminance=.1,this.maximumLuminance=10}function u(e){const t=e._framebuffers;if(!(0,r.A)(t))return;const n=t.length;for(let e=0;e<n;++e)t[e].destroy();e._framebuffers=void 0,e._previousLuminance.destroy(),e._previousLuminance=void 0}function d(e){const t=e._commands;if(!(0,r.A)(t))return;const n=t.length;for(let e=0;e<n;++e)t[e].shaderProgram.destroy();e._commands=void 0}function h(e,t){let n;if(0===t)n={colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions}};else{const i=e._framebuffers[t-1].getColorTexture(0);n={colorTexture:function(){return i},colorTextureDimensions:function(){return i.dimensions}}}return n.minMaxLuminance=function(){return e._minMaxLuminance},n.previousLuminance=function(){return e._previousLuminance.getColorTexture(0)},n}function g(e,t){let n="uniform sampler2D colorTexture; \nin vec2 v_textureCoordinates; \nfloat sampleTexture(vec2 offset) { \n";return n+=0===e?"    vec4 color = texture(colorTexture, v_textureCoordinates + offset); \n    return czm_luminance(color.rgb); \n":"    return texture(colorTexture, v_textureCoordinates + offset).r; \n",n+="}\n\n",n+="uniform vec2 colorTextureDimensions; \nuniform vec2 minMaxLuminance; \nuniform sampler2D previousLuminance; \nvoid main() { \n    float color = 0.0; \n    float xStep = 1.0 / colorTextureDimensions.x; \n    float yStep = 1.0 / colorTextureDimensions.y; \n    int count = 0; \n    for (int i = 0; i < 3; ++i) { \n        for (int j = 0; j < 3; ++j) { \n            vec2 offset; \n            offset.x = -xStep + float(i) * xStep; \n            offset.y = -yStep + float(j) * yStep; \n            if (offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0) { \n                continue; \n            } \n            color += sampleTexture(offset); \n            ++count; \n        } \n    } \n    if (count > 0) { \n        color /= float(count); \n    } \n",e===t-1&&(n+="    float previous = texture(previousLuminance, vec2(0.5)).r; \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n    color = previous + (color - previous) / (60.0 * 1.5); \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n"),n+="    out_FragColor = vec4(color); \n} \n",n}Object.defineProperties(l.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},outputTexture:{get:function(){const e=this._framebuffers;if((0,r.A)(e))return e[e.length-1].getColorTexture(0)}}}),l.prototype.clear=function(e){const t=this._framebuffers;if(!(0,r.A)(t))return;let n=this._clearCommand;(0,r.A)(n)||(n=this._clearCommand=new s.A({color:new o.A(0,0,0,0),framebuffer:void 0}));const i=t.length;for(let o=0;o<i;++o)t[o].clear(e,n)},l.prototype.update=function(e){const t=e.drawingBufferWidth,n=e.drawingBufferHeight;t===this._width&&n===this._height||(this._width=t,this._height=n,function(e,t){u(e);let n=e._width,i=e._height;const o=t.halfFloatingPointTexture?c.A.HALF_FLOAT:c.A.FLOAT,r=Math.ceil(Math.log(Math.max(n,i))/Math.log(3)),a=new Array(r);for(let e=0;e<r;++e)n=Math.max(Math.ceil(n/3),1),i=Math.max(Math.ceil(i/3),1),a[e]=new A.A,a[e].update(t,n,i,1,o);const s=a[r-1].getColorTexture(0);e._previousLuminance.update(t,s.width,s.height,1,o),e._framebuffers=a}(this,e),function(e,t){d(e);const n=e._framebuffers,i=n.length,o=new Array(i);for(let r=0;r<i;++r)o[r]=t.createViewportQuadCommand(g(r,i),{framebuffer:n[r].framebuffer,uniformMap:h(e,r)});e._commands=o}(this,e),this._ready||(this._ready=!0)),this._minMaxLuminance.x=this.minimumLuminance,this._minMaxLuminance.y=this.maximumLuminance;const i=this._framebuffers,o=i[i.length-1];i[i.length-1]=this._previousLuminance,this._commands[this._commands.length-1].framebuffer=this._previousLuminance.framebuffer,this._previousLuminance=o},l.prototype.execute=function(e,t){this._colorTexture=t;const n=this._commands;if(!(0,r.A)(n))return;const i=n.length;for(let t=0;t<i;++t)n[t].execute(e)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return u(this),d(this),(0,a.A)(this)};const f=l},320475:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(331185),r=n(584164);const a={X:0,Y:1,Z:2};a.Y_UP_TO_Z_UP=r.A.fromRotationTranslation(o.A.fromArray([1,0,0,0,0,1,0,-1,0])),a.Z_UP_TO_Y_UP=r.A.fromRotationTranslation(o.A.fromArray([1,0,0,0,0,-1,0,1,0])),a.X_UP_TO_Z_UP=r.A.fromRotationTranslation(o.A.fromArray([0,0,1,0,1,0,-1,0,0])),a.Z_UP_TO_X_UP=r.A.fromRotationTranslation(o.A.fromArray([0,0,-1,0,1,0,1,0,0])),a.X_UP_TO_Y_UP=r.A.fromRotationTranslation(o.A.fromArray([0,1,0,-1,0,0,0,0,1])),a.Y_UP_TO_X_UP=r.A.fromRotationTranslation(o.A.fromArray([0,-1,0,1,0,0,0,0,1])),a.fromName=function(e){return i.A.typeOf.string("name",e),a[e]};const s=Object.freeze(a)},511517:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(786101),r=n(604752),a=n(123245);const s={};s._deprecationWarning=o.A;const A=Uint32Array.BYTES_PER_ELEMENT;s.parse=function(e,t){const n=t??0;i.A.defined("arrayBuffer",e),t=n;const o=new Uint8Array(e),c=new DataView(e);t+=A;const l=c.getUint32(t,!0);if(1!==l)throw new a.A(`Only Batched 3D Model version 1 is supported.  Version ${l} is not.`);t+=A;const u=c.getUint32(t,!0);t+=A;let d=c.getUint32(t,!0);t+=A;let h=c.getUint32(t,!0);t+=A;let g=c.getUint32(t,!0);t+=A;let f,p,m=c.getUint32(t,!0);t+=A,g>=570425344?(t-=2*A,f=d,g=h,m=0,d=0,h=0,s._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):m>=570425344&&(t-=A,f=g,g=d,m=h,d=0,h=0,s._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")),0===d?p={BATCH_LENGTH:f??0}:(p=(0,r.A)(o,t,d),t+=d);const _=new Uint8Array(e,t,h);let I,E;t+=h,g>0&&(I=(0,r.A)(o,t,g),t+=g,m>0&&(E=new Uint8Array(e,t,m),E=new Uint8Array(E),t+=m));const y=n+u-t;if(0===y)throw new a.A("glTF byte length must be greater than 0.");let C;return t%4==0?C=new Uint8Array(e,t,y):(s._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),C=new Uint8Array(o.subarray(t,t+y))),{batchLength:f,featureTableJson:p,featureTableBinary:_,batchTableJson:I,batchTableBinary:E,gltf:C}};const c=s},744671:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(730839),o=n(369031),r=n(376758),a=n(430346),s=n(571804),A=n(491446),c=n(605971),l=n(351554),u=n(123245);function d(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,this._byteLength=0,o.A.typeOf.object("options.extension",e.extension),function(e,t,n){let o,r,c;const u=t.instancesLength,d=t.classes;let f,p=t.classIds,m=t.parentCounts,_=t.parentIds,I=u,E=0;if((0,A.A)(p.byteOffset)&&(p.componentType=p.componentType??s.A.UNSIGNED_SHORT,p.type=i.A.SCALAR,c=(0,l.A)(p),p=c.createArrayBufferView(n.buffer,n.byteOffset+p.byteOffset,u),E+=p.byteLength),(0,A.A)(m)){for((0,A.A)(m.byteOffset)&&(m.componentType=m.componentType??s.A.UNSIGNED_SHORT,m.type=i.A.SCALAR,c=(0,l.A)(m),m=c.createArrayBufferView(n.buffer,n.byteOffset+m.byteOffset,u),E+=m.byteLength),f=new Uint16Array(u),I=0,o=0;o<u;++o)f[o]=I,I+=m[o];E+=f.byteLength}(0,A.A)(_)&&(0,A.A)(_.byteOffset)&&(_.componentType=_.componentType??s.A.UNSIGNED_SHORT,_.type=i.A.SCALAR,c=(0,l.A)(_),_=c.createArrayBufferView(n.buffer,n.byteOffset+_.byteOffset,I),E+=_.byteLength);const y=d.length;for(o=0;o<y;++o){const e=d[o].length,t=d[o].instances,i=h(e,t,n);E+=g(i),d[o].instances=(0,a.A)(i,t)}const C=new Array(y).fill(0),b=new Uint16Array(u);for(o=0;o<u;++o)r=p[o],b[o]=C[r],++C[r];E+=b.byteLength,e._classes=d,e._classIds=p,e._classIndexes=b,e._parentCounts=m,e._parentIndexes=f,e._parentIds=_,e._byteLength=E}(this,e.extension,e.binaryBody),function(e){const t=f;t.length=0;const n=e._classIds.length;for(let i=0;i<n;++i)p(e,i,t)}(this)}function h(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const r=t[o],a=r.byteOffset;if((0,A.A)(a)){const t=r.componentType,s=r.type;if(!(0,A.A)(t))throw new u.A("componentType is required.");if(!(0,A.A)(s))throw new u.A("type is required.");if(!(0,A.A)(n))throw new u.A(`Property ${o} requires a batch table binary.`);const c=(0,l.A)(r),d=c.componentsPerAttribute,h=c.classType,g=c.createArrayBufferView(n.buffer,n.byteOffset+a,e);(0,A.A)(i)||(i={}),i[o]={typedArray:g,componentCount:d,type:h}}}return i}function g(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}Object.defineProperties(d.prototype,{byteLength:{get:function(){return this._byteLength}}});const f=[];function p(e,t,n){const i=e._parentCounts,o=e._parentIds,r=e._parentIndexes,a=e._classIds.length;if(!(0,A.A)(o))return;if(t>=a)throw new c.A(`Parent index ${t} exceeds the total number of instances: ${a}`);if(n.indexOf(t)>-1)throw new c.A("Circular dependency detected in the batch table hierarchy.");n.push(t);const s=(0,A.A)(i)?i[t]:1,l=(0,A.A)(i)?r[t]:t;for(let i=0;i<s;++i){const r=o[l+i];r!==t&&p(e,r,n)}n.pop(t)}const m=[],_=[];let I=0;function E(e,t,n){const i=e._parentCounts,o=e._parentIds;return(0,A.A)(o)?(0,A.A)(i)?function(e,t,n){const i=e._classIds,o=e._parentCounts,r=e._parentIds,a=e._parentIndexes,s=i.length,c=m;c.length=Math.max(c.length,s);const l=++I,u=_;for(u.length=0,u.push(t);u.length>0;){if(c[t=u.pop()]===l)continue;c[t]=l;const i=n(e,t);if((0,A.A)(i))return i;const s=o[t],d=a[t];for(let e=0;e<s;++e){const n=r[d+e];n!==t&&u.push(n)}}}(e,t,n):function(e,t,n){let i=!0;for(;i;){const o=n(e,t);if((0,A.A)(o))return o;const r=e._parentIds[t];i=r!==t,t=r}}(e,t,n):n(e,t)}d.prototype.hasProperty=function(e,t){const n=E(this,e,function(e,n){const i=e._classIds[n],o=e._classes[i].instances;if((0,A.A)(o[t]))return!0});return(0,A.A)(n)},d.prototype.propertyExists=function(e){const t=this._classes,n=t.length;for(let i=0;i<n;++i){const n=t[i].instances;if((0,A.A)(n[e]))return!0}return!1},d.prototype.getPropertyIds=function(e,t){return(t=(0,A.A)(t)?t:[]).length=0,E(this,e,function(e,n){const i=e._classIds[n],o=e._classes[i].instances;for(const e in o)o.hasOwnProperty(e)&&-1===t.indexOf(e)&&t.push(e)}),t},d.prototype.getProperty=function(e,t){return E(this,e,function(e,n){const i=e._classIds[n],o=e._classes[i],a=e._classIndexes[n],s=o.instances[t];if((0,A.A)(s))return(0,A.A)(s.typedArray)?function(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}(s,a):(0,r.A)(s[a],!0)})},d.prototype.setProperty=function(e,t,n){const i=E(this,e,function(i,o){const a=i._classIds[o],s=i._classes[a],l=i._classIndexes[o],u=s.instances[t];if((0,A.A)(u)){if(o!==e)throw new c.A(`Inherited property "${t}" is read-only.`);return(0,A.A)(u.typedArray)?function(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}(u,l,n):u[l]=(0,r.A)(n,!0),!0}});return(0,A.A)(i)},d.prototype.isClass=function(e,t){const n=E(this,e,function(e,n){const i=e._classIds[n];if(e._classes[i].name===t)return!0});return(0,A.A)(n)},d.prototype.getClassName=function(e){const t=this._classIds[e];return this._classes[t].name};const y=d},653565:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(434067),o=n(626809),r=n(369031),a=n(41476),s=n(673874),A=n(491446),c=n(677354),l=n(605971),u=n(276904),d=n(430332),h=n(57775),g=n(654799),f=n(616e3);function p(e){r.A.typeOf.number("options.featuresLength",e.featuresLength),r.A.typeOf.object("options.owner",e.owner),this._id=(0,s.A)();const t=e.featuresLength;let n,a;if(this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],t>0){const e=Math.min(t,d.A.maximumTextureSize),r=Math.ceil(t/d.A.maximumTextureSize),s=1/e,A=.5*s,c=1/r,l=.5*c;n=new i.A(e,r),a=new o.A(s,A,c,l)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=a,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}function m(e){const t=e._textureDimensions;return t.x*t.y*4}function _(e){if(!(0,A.A)(e._batchValues)){const t=m(e),n=new Uint8Array(t).fill(255);e._batchValues=n}return e._batchValues}function I(e){if(!(0,A.A)(e._showAlphaProperties)){const t=2*e._featuresLength,n=new Uint8Array(t).fill(255);e._showAlphaProperties=n}return e._showAlphaProperties}function E(e,t){if(!(0,A.A)(e)||e<0||e>=t)throw new l.A(`batchId is required and between zero and featuresLength - 1 (${t}`-NaN)}Object.defineProperties(p.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},byteLength:{get:function(){let e=0;return(0,A.A)(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),(0,A.A)(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}}),p.DEFAULT_COLOR_VALUE=a.A.WHITE,p.DEFAULT_SHOW_VALUE=!0,p.prototype.setShow=function(e,t){if(E(e,this._featuresLength),r.A.typeOf.bool("show",t),t&&!(0,A.A)(this._showAlphaProperties))return;const n=I(this),i=2*e,o=t?255:0;n[i]!==o&&(n[i]=o,_(this)[4*e+3]=t?n[i+1]:0,this._batchValuesDirty=!0)},p.prototype.setAllShow=function(e){r.A.typeOf.bool("show",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)},p.prototype.getShow=function(e){if(E(e,this._featuresLength),!(0,A.A)(this._showAlphaProperties))return!0;const t=2*e;return 255===this._showAlphaProperties[t]};const y=new Array(4);function C(e,t,n){const i=e._textureDimensions;return new f.A({context:t,pixelFormat:u.A.RGBA,pixelDatatype:h.A.UNSIGNED_BYTE,source:{width:i.x,height:i.y,arrayBufferView:n},flipY:!1,sampler:g.A.NEAREST})}p.prototype.setColor=function(e,t){if(E(e,this._featuresLength),r.A.typeOf.object("color",t),a.A.equals(t,p.DEFAULT_COLOR_VALUE)&&!(0,A.A)(this._batchValues))return;const n=t.toBytes(y),i=n[3],o=_(this),s=4*e,c=I(this),l=2*e;if(o[s]!==n[0]||o[s+1]!==n[1]||o[s+2]!==n[2]||c[l+1]!==i){o[s]=n[0],o[s+1]=n[1],o[s+2]=n[2];const r=255!==c[l+1],a=0!==c[l];o[s+3]=a?i:0,c[l+1]=i;const u=255!==i;u&&!r?++this._translucentFeaturesLength:!u&&r&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,(0,A.A)(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}},p.prototype.setAllColor=function(e){r.A.typeOf.object("color",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)},p.prototype.getColor=function(e,t){if(E(e,this._featuresLength),r.A.typeOf.object("result",t),!(0,A.A)(this._batchValues))return a.A.clone(p.DEFAULT_COLOR_VALUE,t);const n=this._batchValues,i=4*e,o=this._showAlphaProperties,s=2*e;return a.A.fromBytes(n[i],n[i+1],n[i+2],o[s+1],t)},p.prototype.getPickColor=function(e){return E(e,this._featuresLength),this._pickIds[e]},p.prototype.update=function(e,t){const n=t.context;this._defaultTexture=n.defaultTexture;const i=t.passes;(i.pick||i.postProcess)&&function(e,t){const n=e._featuresLength;if(!(0,A.A)(e._pickTexture)&&n>0){const i=e._pickIds,o=m(e),r=new Uint8Array(o),s=e._owner,c=e._statistics;for(let e=0;e<n;++e){const n=t.createPickId(s.getFeature(e));i.push(n);const o=n.color,A=4*e;r[A]=a.A.floatToByte(o.red),r[A+1]=a.A.floatToByte(o.green),r[A+2]=a.A.floatToByte(o.blue),r[A+3]=a.A.floatToByte(o.alpha)}e._pickTexture=C(e,t,r),(0,A.A)(c)&&(c.batchTableByteLength+=e._pickTexture.sizeInBytes)}}(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,(0,A.A)(this._batchTexture)||(this._batchTexture=C(this,n,this._batchValues),(0,A.A)(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),function(e){const t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}(this))},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();const e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,c.A)(this)};const b=p},886626:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(303578),o=n(369031),r=n(672743),a=n(915325),s=n(491446),A=n(955943),c=n(367817),l=n(697422),u=n(744603),d=n(123245),h=n(705302),g=n(41076),f=n(74006),p=n(253478),m=n(553909);function _(e){this.tileWidth=void 0,this.tileHeight=void 0,this.maximumLevel=void 0,this.imageUrlSubdomains=void 0,this.imageUrlTemplate=void 0,this.attributionList=void 0}function I(e){e=e??a.A.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._mapStyle=e.mapStyle??f.A.AERIAL,this._mapLayer=e.mapLayer,this._culture=e.culture??"",this._key=e.key,this._tileDiscardPolicy=e.tileDiscardPolicy,(0,s.A)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new p.A),this._proxy=e.proxy,this._credit=new r.A(`<a href="https://www.microsoft.com/en-us/maps/bing-maps/product"><img src="${I.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new g.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._attributionList=void 0,this._errorEvent=new A.A}_.prototype.build=function(e){e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,e._imageUrlSubdomains=this.imageUrlSubdomains,e._imageUrlTemplate=this.imageUrlTemplate;let t=e._attributionList=this.attributionList;t||(t=[]),e._attributionList=t;for(let e=0,n=t.length;e<n;++e){const n=t[e];if(n.credit instanceof r.A)break;n.credit=new r.A(n.attribution);const i=n.coverageAreas;for(let e=0,t=n.coverageAreas.length;e<t;++e){const t=i[e],n=t.bbox;t.bbox=new l.A(c.A.toRadians(n[1]),c.A.toRadians(n[0]),c.A.toRadians(n[3]),c.A.toRadians(n[2]))}}},Object.defineProperties(I.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},mapLayer:{get:function(){return this._mapLayer}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return(0,s.A)(this.mapLayer)}}}),I.fromUrl=async function(e,t){t=t??a.A.EMPTY_OBJECT,o.A.defined("url",e),o.A.defined("options.key",t.key);let n=t.tileProtocol;(0,s.A)(n)?n.length>0&&":"===n[n.length-1]&&(n=n.substr(0,n.length-1)):n="http:"===document.location.protocol?"http":"https";const i=t.mapStyle??f.A.AERIAL,r=u.A.createIfNeeded(e);r.appendForwardSlash();const A={incl:"ImageryProviders",key:t.key,uriScheme:n};(0,s.A)(t.mapLayer)&&(A.mapLayer=t.mapLayer),(0,s.A)(t.culture)&&(A.culture=t.culture);const c=r.getDerivedResource({url:`REST/v1/Imagery/Metadata/${i}`,queryParameters:A}),l=new I(t);l._resource=r;const g=new _(t);return await async function(e,t,n){const i=e.url;let o=I._metadataCache[i];(0,s.A)(o)||(o=e.fetchJson(),I._metadataCache[i]=o);try{return function(e,t){if(1!==e.resourceSets.length)throw new d.A("metadata does not specify one resource in resourceSets");const n=e.resourceSets[0].resources[0];t.tileWidth=n.imageWidth,t.tileHeight=n.imageHeight,t.maximumLevel=n.zoomMax-1,t.imageUrlSubdomains=n.imageUrlSubdomains,t.imageUrlTemplate=n.imageUrl;let i=n.imageryProviders;(0,s.A)(n.imageryProviders)&&(i=n.imageryProviders.filter(e=>e.coverageAreas?.some(e=>(0,s.A)(e.bbox)))),t.attributionList=i}(await o,t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw(0,s.A)(t)&&(0,s.A)(t.message)&&(i+=`: ${t.message}`),h.A.reportError(void 0,n,(0,s.A)(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new d.A(i)}(e,t,n)}}(c,g),g.build(l),l};const E=new l.A;I.prototype.getTileCredits=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(e,t,n,E),o=function(e,t,n){++t;const i=[];for(let o=0,r=e.length;o<r;++o){const r=e[o],a=r.coverageAreas;let A=!1;for(let e=0,i=r.coverageAreas.length;!A&&e<i;++e){const i=a[e];if(t>=i.zoomMin&&t<=i.zoomMax){const e=l.A.intersection(n,i.bbox,y);(0,s.A)(e)&&(A=!0)}}A&&i.push(r.credit)}return i}(this._attributionList,n,i);return o},I.prototype.requestImage=function(e,t,n,i){const o=m.A.loadImage(this,function(e,t,n,i,o){const r=e._imageUrlTemplate,a=e._imageUrlSubdomains,s=(t+n+i)%a.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:I.tileXYToQuadKey(t,n,i),subdomain:a[s],culture:e._culture},queryParameters:{n:"z"}})}(this,e,t,n,i));if((0,s.A)(o))return o.catch(function(e){return(0,s.A)(e.blob)&&0===e.blob.size?p.A.EMPTY_IMAGE:Promise.reject(e)})},I.prototype.pickFeatures=function(e,t,n,i,o){},I.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){const n=1<<o;let r=0;0!==(e&n)&&(r|=1),0!==(t&n)&&(r|=2),i+=r}return i},I.quadKeyToTileXY=function(e){let t=0,n=0;const i=e.length-1;for(let o=i;o>=0;--o){const r=1<<o,a=+e[i-o];1&a&&(t|=r),2&a&&(n|=r)}return{x:t,y:n,level:i}},I._logoUrl=void 0,Object.defineProperties(I,{logoUrl:{get:function(){return(0,s.A)(I._logoUrl)||(I._logoUrl=(0,i.A)("Assets/Images/bing_maps_credit.png")),I._logoUrl},set:function(e){o.A.defined("value",e),I._logoUrl=e}}});const y=new l.A;I._metadataCache={};const C=I},74006:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"})},655979:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(491446),r=n(605971);const a={parseAllBoundingVolumeSemantics:function(e){return i.A.typeOf.object("tileMetadata",e),{tile:{boundingVolume:a.parseBoundingVolumeSemantic("TILE",e),minimumHeight:a._parseMinimumHeight("TILE",e),maximumHeight:a._parseMaximumHeight("TILE",e)},content:{boundingVolume:a.parseBoundingVolumeSemantic("CONTENT",e),minimumHeight:a._parseMinimumHeight("CONTENT",e),maximumHeight:a._parseMaximumHeight("CONTENT",e)}}},parseBoundingVolumeSemantic:function(e,t){if(i.A.typeOf.string("prefix",e),"TILE"!==e&&"CONTENT"!==e)throw new r.A("prefix must be either 'TILE' or 'CONTENT'");i.A.typeOf.object("tileMetadata",t);const n=`${e}_BOUNDING_BOX`,a=t.getPropertyBySemantic(n);if((0,o.A)(a))return{box:a};const s=`${e}_BOUNDING_REGION`,A=t.getPropertyBySemantic(s);if((0,o.A)(A))return{region:A};const c=`${e}_BOUNDING_SPHERE`,l=t.getPropertyBySemantic(c);return(0,o.A)(l)?{sphere:l}:void 0},_parseMinimumHeight:function(e,t){if(i.A.typeOf.string("prefix",e),"TILE"!==e&&"CONTENT"!==e)throw new r.A("prefix must be either 'TILE' or 'CONTENT'");i.A.typeOf.object("tileMetadata",t);const n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)},_parseMaximumHeight:function(e,t){if(i.A.typeOf.string("prefix",e),"TILE"!==e&&"CONTENT"!==e)throw new r.A("prefix must be either 'TILE' or 'CONTENT'");i.A.typeOf.object("tileMetadata",t);const n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}},s=a},691302:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(647934),o=n(491446),r=n(677354),a=n(276904),s=n(483128),A=n(57775),c=n(40118),l=n(654799),u=n(616e3),d=n(562523);function h(){this._colorTexture=void 0,this._drawCommand=void 0}Object.defineProperties(h.prototype,{colorTexture:{get:function(){return this._colorTexture}}}),h.prototype.update=function(e){if(!(0,o.A)(this._colorTexture)){const t=e.context,n=new u.A({context:t,width:256,height:256,pixelFormat:a.A.RGBA,pixelDatatype:A.A.UNSIGNED_BYTE,sampler:l.A.NEAREST});this._colorTexture=n;const o=new s.A({context:t,colorTextures:[n],destroyAttachments:!1});!function(e,t,n){const o=t.createViewportQuadCommand(d.A,{framebuffer:n,renderState:c.A.fromCache({viewport:new i.A(0,0,256,256)})});e._drawCommand=o}(this,t,o),this._drawCommand.execute(t),o.destroy(),this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()}},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this._colorTexture=this._colorTexture&&this._colorTexture.destroy(),(0,r.A)(this)};const g=h},452663:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(915325),o=n(491446),r=n(605971),a=n(569445),s=n(48660);function A(e){const t=(e=e??i.A.EMPTY_OBJECT).typedArray,n=e.resource,a=e.cacheKey;if((0,o.A)(t)===(0,o.A)(n))throw new r.A("One of options.typedArray and options.resource must be defined.");this._typedArray=t,this._resource=n,this._cacheKey=a,this._state=s.A.UNLOADED,this._promise=void 0}(0,o.A)(Object.create)&&(A.prototype=Object.create(a.A.prototype),A.prototype.constructor=A),Object.defineProperties(A.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),A.prototype.load=async function(){return(0,o.A)(this._promise)?this._promise:(0,o.A)(this._typedArray)?(this._promise=Promise.resolve(this),this._promise):(this._promise=async function(e){const t=e._resource;e._state=s.A.LOADING;try{const n=await A._fetchArrayBuffer(t);if(e.isDestroyed())return;return e._typedArray=new Uint8Array(n),e._state=s.A.READY,e}catch(n){if(e.isDestroyed())return;e._state=s.A.FAILED;const i=`Failed to load external buffer: ${t.url}`;throw e.getError(i,n)}}(this),this._promise)},A._fetchArrayBuffer=function(e){return e.fetchArrayBuffer()},A.prototype.unload=function(){this._typedArray=void 0};const c=A},635577:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ot});var i=n(660662),o=n(434067),r=n(267980),a=n(626809),s=n(336946),A=n(915325),c=n(491446),l=n(605971),u=n(924290),d=n(610750),h=n(602289),g=n(955943),f=n(230259),p=n(805746),m=n(953612),_=n(647326),I=n(150429),E=n(367817),y=n(331185),C=n(584164),b=n(811203),B=n(65891),v=n(666775),w=n(99479),T=n(766067),S=n(697422),x=n(543622),D=n(625224),Q=n(77879),N=n(62467);function R(e){if(!(0,c.A)(e))throw new l.A("scene is required.");this._scene=e,this._transform=C.A.clone(C.A.IDENTITY),this._invTransform=C.A.clone(C.A.IDENTITY),this._actualTransform=C.A.clone(C.A.IDENTITY),this._actualInvTransform=C.A.clone(C.A.IDENTITY),this._transformChanged=!1,this.position=new r.A,this._position=new r.A,this._positionWC=new r.A,this._positionCartographic=new s.A,this._oldPositionWC=void 0,this.positionWCDeltaMagnitude=0,this.positionWCDeltaMagnitudeLastFrame=0,this.timeSinceMoved=0,this._lastMovedTimestamp=0,this.direction=new r.A,this._direction=new r.A,this._directionWC=new r.A,this.up=new r.A,this._up=new r.A,this._upWC=new r.A,this.right=new r.A,this._right=new r.A,this._rightWC=new r.A,this.frustum=new v.A,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=E.A.toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumZoomFactor=1.5,this._moveStart=new g.A,this._moveEnd=new g.A,this._changed=new g.A,this._changedPosition=void 0,this._changedDirection=void 0,this._changedFrustum=void 0,this._changedHeading=void 0,this._changedRoll=void 0,this.percentageChanged=.5,this._viewMatrix=new C.A,this._invViewMatrix=new C.A,M(this),this._mode=N.A.SCENE3D,this._modeChanged=!0;const t=e.mapProjection;this._projection=t,this._maxCoord=t.project(new s.A(Math.PI,E.A.PI_OVER_TWO)),this._max2Dfrustum=void 0,Ke(this,R.DEFAULT_VIEW_RECTANGLE,this.position,!0);let n=r.A.magnitude(this.position);n+=n*R.DEFAULT_VIEW_FACTOR,r.A.normalize(this.position,this.position),r.A.multiplyByScalar(this.position,n,this.position)}function M(e){C.A.computeView(e._position,e._direction,e._up,e._right,e._viewMatrix),C.A.multiply(e._viewMatrix,e._actualInvTransform,e._viewMatrix),C.A.inverseTransformation(e._viewMatrix,e._invViewMatrix)}R.TRANSFORM_2D=new C.A(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),R.TRANSFORM_2D_INVERSE=C.A.inverseTransformation(R.TRANSFORM_2D,new C.A),R.DEFAULT_VIEW_RECTANGLE=S.A.fromDegrees(-95,-20,-70,90),R.DEFAULT_VIEW_FACTOR=.5,R.DEFAULT_OFFSET=new p.A(0,-E.A.PI_OVER_FOUR,0),R.prototype.canPreloadFlight=function(){return(0,c.A)(this._currentFlight)&&this._mode!==N.A.SCENE2D},R.prototype._updateCameraChanged=function(){const e=this;if(function(e){if((0,c.A)(e._oldPositionWC)){e.positionWCDeltaMagnitudeLastFrame=e.positionWCDeltaMagnitude;const t=r.A.subtract(e.positionWC,e._oldPositionWC,e._oldPositionWC);e.positionWCDeltaMagnitude=r.A.magnitude(t),e._oldPositionWC=r.A.clone(e.positionWC,e._oldPositionWC),e.positionWCDeltaMagnitude>0?(e.timeSinceMoved=0,e._lastMovedTimestamp=(0,f.A)()):e.timeSinceMoved=Math.max((0,f.A)()-e._lastMovedTimestamp,0)/1e3}else e._oldPositionWC=r.A.clone(e.positionWC,e._oldPositionWC)}(e),0===e._changed.numberOfListeners)return;const t=e.percentageChanged,n=e.heading;(0,c.A)(e._changedHeading)||(e._changedHeading=n);let i=Math.abs(e._changedHeading-n)%E.A.TWO_PI;i=i>E.A.PI?E.A.TWO_PI-i:i;const o=i/Math.PI;o>t&&(e._changedHeading=n);const a=e.roll;(0,c.A)(e._changedRoll)||(e._changedRoll=a);let s=Math.abs(e._changedRoll-a)%E.A.TWO_PI;s=s>E.A.PI?E.A.TWO_PI-s:s;const A=s/Math.PI;if(A>t&&(e._changedRoll=a),(A>t||o>t)&&e._changed.raiseEvent(Math.max(A,o)),e._mode===N.A.SCENE2D){if(!(0,c.A)(e._changedFrustum))return e._changedPosition=r.A.clone(e.position,e._changedPosition),void(e._changedFrustum=e.frustum.clone());const n=e.position,i=e._changedPosition,o=e.frustum,a=e._changedFrustum,s=n.x+o.left,A=n.x+o.right,l=i.x+a.left,u=i.x+a.right,d=n.y+o.bottom,h=n.y+o.top,g=i.y+a.bottom,f=i.y+a.top,p=Math.max(s,l),m=Math.min(A,u),_=Math.max(d,g),I=Math.min(h,f);let E;if(p>=m||_>=h)E=1;else{let e=a;s<l&&A>u&&d<g&&h>f&&(e=o),E=1-(m-p)*(I-_)/((e.right-e.left)*(e.top-e.bottom))}return void(E>t&&(e._changed.raiseEvent(E),e._changedPosition=r.A.clone(e.position,e._changedPosition),e._changedFrustum=e.frustum.clone(e._changedFrustum)))}if(!(0,c.A)(e._changedDirection))return e._changedPosition=r.A.clone(e.positionWC,e._changedPosition),void(e._changedDirection=r.A.clone(e.directionWC,e._changedDirection));const l=E.A.acosClamped(r.A.dot(e.directionWC,e._changedDirection));let u;u=(0,c.A)(e.frustum.fovy)?l/(.5*e.frustum.fovy):l;const d=r.A.distance(e.positionWC,e._changedPosition)/e.positionCartographic.height;(u>t||d>t)&&(e._changed.raiseEvent(Math.max(u,d)),e._changedPosition=r.A.clone(e.positionWC,e._changedPosition),e._changedDirection=r.A.clone(e.directionWC,e._changedDirection))};const L=new s.A,P=new r.A,O=new r.A,F=new a.A,U=new a.A,k=new a.A,G=new a.A,H=new a.A,V=new r.A;function z(e){const t=e._mode;let n=!1,i=0;t===N.A.SCENE2D&&(i=e.frustum.right-e.frustum.left,n=i!==e._positionCartographic.height);let o=e._position;const s=!r.A.equals(o,e.position)||n;s&&(o=r.A.clone(e.position,e._position));let A=e._direction;const c=!r.A.equals(A,e.direction);c&&(r.A.normalize(e.direction,e.direction),A=r.A.clone(e.direction,e._direction));let l=e._up;const u=!r.A.equals(l,e.up);u&&(r.A.normalize(e.up,e.up),l=r.A.clone(e.up,e._up));let d=e._right;const h=!r.A.equals(d,e.right);h&&(r.A.normalize(e.right,e.right),d=r.A.clone(e.right,e._right));const g=e._transformChanged||e._modeChanged;e._transformChanged=!1,g&&(C.A.inverseTransformation(e._transform,e._invTransform),e._mode===N.A.COLUMBUS_VIEW||e._mode===N.A.SCENE2D?C.A.equals(C.A.IDENTITY,e._transform)?C.A.clone(R.TRANSFORM_2D,e._actualTransform):e._mode===N.A.COLUMBUS_VIEW?function(e){x.A.basisTo2D(e._projection,e._transform,e._actualTransform)}(e):function(e){const t=e._projection,n=t.ellipsoid,i=C.A.getColumn(e._transform,3,F),o=n.cartesianToCartographic(i,L),s=t.project(o,P),A=U;A.x=s.z,A.y=s.x,A.z=s.y,A.w=1;const c=a.A.clone(a.A.UNIT_X,H),l=a.A.add(C.A.getColumn(e._transform,0,O),i,O);n.cartesianToCartographic(l,o),t.project(o,s);const u=k;u.x=s.z,u.y=s.x,u.z=s.y,u.w=0,r.A.subtract(u,A,u),u.x=0;const d=G;if(r.A.magnitudeSquared(u)>E.A.EPSILON10)r.A.cross(c,u,d);else{const c=a.A.add(C.A.getColumn(e._transform,1,O),i,O);n.cartesianToCartographic(c,o),t.project(o,s),d.x=s.z,d.y=s.x,d.z=s.y,d.w=0,r.A.subtract(d,A,d),d.x=0,r.A.magnitudeSquared(d)<E.A.EPSILON10&&(a.A.clone(a.A.UNIT_Y,u),a.A.clone(a.A.UNIT_Z,d))}r.A.cross(d,c,u),r.A.normalize(u,u),r.A.cross(c,u,d),r.A.normalize(d,d),C.A.setColumn(e._actualTransform,0,u,e._actualTransform),C.A.setColumn(e._actualTransform,1,d,e._actualTransform),C.A.setColumn(e._actualTransform,2,c,e._actualTransform),C.A.setColumn(e._actualTransform,3,A,e._actualTransform)}(e):C.A.clone(e._transform,e._actualTransform),C.A.inverseTransformation(e._actualTransform,e._actualInvTransform),e._modeChanged=!1);const f=e._actualTransform;if(s||g)if(e._positionWC=C.A.multiplyByPoint(f,o,e._positionWC),t===N.A.SCENE3D||t===N.A.MORPHING)e._positionCartographic=e._projection.ellipsoid.cartesianToCartographic(e._positionWC,e._positionCartographic);else{const n=V;n.x=e._positionWC.y,n.y=e._positionWC.z,n.z=e._positionWC.x,t===N.A.SCENE2D&&(n.z=i),e._projection.unproject(n,e._positionCartographic)}if(c||u||h){const t=r.A.dot(A,r.A.cross(l,d,V));if(Math.abs(1-t)>E.A.EPSILON2){const t=1/r.A.magnitudeSquared(l),n=r.A.dot(l,A)*t,i=r.A.multiplyByScalar(A,n,V);l=r.A.normalize(r.A.subtract(l,i,e._up),e._up),r.A.clone(l,e.up),d=r.A.cross(A,l,e._right),r.A.clone(d,e.right)}}(c||g)&&(e._directionWC=C.A.multiplyByPointAsVector(f,A,e._directionWC),r.A.normalize(e._directionWC,e._directionWC)),(u||g)&&(e._upWC=C.A.multiplyByPointAsVector(f,l,e._upWC),r.A.normalize(e._upWC,e._upWC)),(h||g)&&(e._rightWC=C.A.multiplyByPointAsVector(f,d,e._rightWC),r.A.normalize(e._rightWC,e._rightWC)),(s||c||u||h||g)&&M(e)}function j(e,t){let n;return n=E.A.equalsEpsilon(Math.abs(e.z),1,E.A.EPSILON3)?Math.atan2(t.y,t.x)-E.A.PI_OVER_TWO:Math.atan2(e.y,e.x)-E.A.PI_OVER_TWO,E.A.TWO_PI-E.A.zeroToTwoPi(n)}function Y(e){return E.A.PI_OVER_TWO-E.A.acosClamped(e.z)}function q(e,t,n){let i=0;return E.A.equalsEpsilon(Math.abs(e.z),1,E.A.EPSILON3)||(i=Math.atan2(-n.z,t.z),i=E.A.zeroToTwoPi(i+E.A.TWO_PI)),i}const W=new C.A,J=new C.A;Object.defineProperties(R.prototype,{transform:{get:function(){return this._transform}},inverseTransform:{get:function(){return z(this),this._invTransform}},viewMatrix:{get:function(){return z(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return z(this),this._invViewMatrix}},positionCartographic:{get:function(){return z(this),this._positionCartographic}},positionWC:{get:function(){return z(this),this._positionWC}},directionWC:{get:function(){return z(this),this._directionWC}},upWC:{get:function(){return z(this),this._upWC}},rightWC:{get:function(){return z(this),this._rightWC}},heading:{get:function(){if(this._mode!==N.A.MORPHING){const e=this._projection.ellipsoid,t=C.A.clone(this._transform,W),n=x.A.eastNorthUpToFixedFrame(this.positionWC,e,J);this._setTransform(n);const i=j(this.direction,this.up);return this._setTransform(t),i}}},pitch:{get:function(){if(this._mode!==N.A.MORPHING){const e=this._projection.ellipsoid,t=C.A.clone(this._transform,W),n=x.A.eastNorthUpToFixedFrame(this.positionWC,e,J);this._setTransform(n);const i=Y(this.direction);return this._setTransform(t),i}}},roll:{get:function(){if(this._mode!==N.A.MORPHING){const e=this._projection.ellipsoid,t=C.A.clone(this._transform,W),n=x.A.eastNorthUpToFixedFrame(this.positionWC,e,J);this._setTransform(n);const i=q(this.direction,this.up,this.right);return this._setTransform(t),i}}},moveStart:{get:function(){return this._moveStart}},moveEnd:{get:function(){return this._moveEnd}},changed:{get:function(){return this._changed}}}),R.prototype.update=function(e){if(!(0,c.A)(e))throw new l.A("mode is required.");if(e===N.A.SCENE2D&&!(this.frustum instanceof B.A))throw new l.A("An OrthographicOffCenterFrustum is required in 2D.");if(!(e!==N.A.SCENE3D&&e!==N.A.COLUMBUS_VIEW||this.frustum instanceof v.A||this.frustum instanceof b.A))throw new l.A("A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view");let t=!1;if(e!==this._mode&&(this._mode=e,this._modeChanged=e!==N.A.MORPHING,t=this._mode===N.A.SCENE2D),t){const e=this._max2Dfrustum=this.frustum.clone();if(!(e instanceof B.A))throw new l.A("The camera frustum is expected to be orthographic for 2D camera control.");const t=2,n=e.top/e.right;e.right=this._maxCoord.x*t,e.left=-e.right,e.top=n*e.right,e.bottom=-e.top}this._mode===N.A.SCENE2D&&me(this,this.position)};const K=new r.A,X=new r.A,Z=new r.A;R.prototype._setTransform=function(e){const t=r.A.clone(this.positionWC,K),n=r.A.clone(this.upWC,X),i=r.A.clone(this.directionWC,Z);C.A.clone(e,this._transform),this._transformChanged=!0,z(this);const o=this._actualInvTransform;C.A.multiplyByPoint(o,t,this.position),C.A.multiplyByPointAsVector(o,i,this.direction),C.A.multiplyByPointAsVector(o,n,this.up),r.A.cross(this.direction,this.up,this.right),z(this)};const $=new o.A,ee=new T.A,te=new r.A,ne=new r.A;function ie(e){if(!C.A.equals(C.A.IDENTITY,e.transform))return r.A.magnitude(e.position);const t=e._scene,n=t.globe,i=$;let o,a,s;if(i.x=t.drawingBufferWidth/t.pixelRatio/2,i.y=t.drawingBufferHeight/t.pixelRatio/2,(0,c.A)(n)){const r=e.getPickRay(i,ee);o=n.pickWorldCoordinates(r,t,!0,te)}if(t.pickPositionSupported&&(a=t.pickPositionWorldCoordinates(i,ne)),(0,c.A)(o)||(0,c.A)(a)){const t=(0,c.A)(a)?r.A.distance(a,e.positionWC):Number.POSITIVE_INFINITY,n=(0,c.A)(o)?r.A.distance(o,e.positionWC):Number.POSITIVE_INFINITY;s=Math.min(t,n)}else s=Math.max(e.positionCartographic.height,0);return s}R.prototype._adjustOrthographicFrustum=function(e){this.frustum instanceof b.A&&(!e&&this._positionCartographic.height<15e4||(this.frustum.width=ie(this)))};const oe=new r.A,re=new C.A,ae=new C.A,se=new w.A,Ae=new y.A,ce=new s.A,le=new r.A,ue=new r.A,de=new r.A;function he(e,t,n,i){const o=r.A.clone(n.direction,le),a=r.A.clone(n.up,ue);if(e._scene.mode===N.A.SCENE3D){const n=e._projection.ellipsoid,i=x.A.eastNorthUpToFixedFrame(t,n,W),r=C.A.inverseTransformation(i,J);C.A.multiplyByPointAsVector(r,o,o),C.A.multiplyByPointAsVector(r,a,a)}const s=r.A.cross(o,a,de);return i.heading=j(o,a),i.pitch=Y(o),i.roll=q(o,a,s),i}const ge={destination:void 0,orientation:{direction:void 0,up:void 0,heading:void 0,pitch:void 0,roll:void 0},convert:void 0,endTransform:void 0},fe=new m.A;R.prototype.setView=function(e){let t=(e=e??A.A.EMPTY_OBJECT).orientation??A.A.EMPTY_OBJECT;const n=this._mode;if(n===N.A.MORPHING)return;(0,c.A)(e.endTransform)&&this._setTransform(e.endTransform);let i=e.convert??!0,a=e.destination??r.A.clone(this.positionWC,oe);if((0,c.A)(a)&&(0,c.A)(a.west)){if(a=this.getRectangleCameraCoordinates(a,oe),isNaN(a.x)||isNaN(a.y))throw new l.A("destination has a NaN component");i=!1}(0,c.A)(t.direction)&&(t=he(this,a,t,ge.orientation)),fe.heading=t.heading??0,fe.pitch=t.pitch??-E.A.PI_OVER_TWO,fe.roll=t.roll??0,n===N.A.SCENE3D?function(e,t,n){if(isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new l.A("position has a NaN component");const i=C.A.clone(e.transform,re),o=x.A.eastNorthUpToFixedFrame(t,e._projection.ellipsoid,ae);e._setTransform(o),r.A.clone(r.A.ZERO,e.position),n.heading=n.heading-E.A.PI_OVER_TWO;const a=w.A.fromHeadingPitchRoll(n,se),s=y.A.fromQuaternion(a,Ae);y.A.getColumn(s,0,e.direction),y.A.getColumn(s,2,e.up),r.A.cross(e.direction,e.up,e.right),e._setTransform(i),e._adjustOrthographicFrustum(!0)}(this,a,fe):n===N.A.SCENE2D?function(e,t,n,i){const a=C.A.clone(e.transform,re);if(e._setTransform(C.A.IDENTITY),!r.A.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,ce);t=n.project(i,oe)}o.A.clone(t,e.position);const n=.5*-t.z,r=-n,a=e.frustum;if(r>n){const e=a.top/a.right;a.right=r,a.left=n,a.top=a.right*e,a.bottom=-a.top}}if(e._scene.mapMode2D===Q.A.ROTATE){n.heading=n.heading-E.A.PI_OVER_TWO,n.pitch=-E.A.PI_OVER_TWO,n.roll=0;const t=w.A.fromHeadingPitchRoll(n,se),i=y.A.fromQuaternion(t,Ae);y.A.getColumn(i,2,e.up),r.A.cross(e.direction,e.up,e.right)}e._setTransform(a)}(this,a,fe,i):function(e,t,n,i){const o=C.A.clone(e.transform,re);if(e._setTransform(C.A.IDENTITY),!r.A.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,ce);t=n.project(i,oe)}r.A.clone(t,e.position)}n.heading=n.heading-E.A.PI_OVER_TWO;const a=w.A.fromHeadingPitchRoll(n,se),s=y.A.fromQuaternion(a,Ae);y.A.getColumn(s,0,e.direction),y.A.getColumn(s,2,e.up),r.A.cross(e.direction,e.up,e.right),e._setTransform(o),e._adjustOrthographicFrustum(!0)}(this,a,fe,i)};const pe=new r.A;function me(e,t){const n=e._scene.mapMode2D===Q.A.ROTATE,i=e._maxCoord.x,o=e._maxCoord.y;let r,a;n?(a=i,r=-a):(a=t.x-2*i,r=t.x+2*i),t.x>i&&(t.x=a),t.x<-i&&(t.x=r),t.y>o&&(t.y=o),t.y<-o&&(t.y=-o)}R.prototype.flyHome=function(e){const t=this._mode;if(t===N.A.MORPHING&&this._scene.completeMorph(),t===N.A.SCENE2D)this.flyTo({destination:R.DEFAULT_VIEW_RECTANGLE,duration:e,endTransform:C.A.IDENTITY});else if(t===N.A.SCENE3D){const t=this.getRectangleCameraCoordinates(R.DEFAULT_VIEW_RECTANGLE);let n=r.A.magnitude(t);n+=n*R.DEFAULT_VIEW_FACTOR,r.A.normalize(t,t),r.A.multiplyByScalar(t,n,t),this.flyTo({destination:t,duration:e,endTransform:C.A.IDENTITY})}else if(t===N.A.COLUMBUS_VIEW){const t=this._projection.ellipsoid.maximumRadius;let n=new r.A(0,-1,1);n=r.A.multiplyByScalar(r.A.normalize(n,n),5*t,n),this.flyTo({destination:n,duration:e,orientation:{heading:0,pitch:-Math.acos(r.A.normalize(n,pe).z),roll:0},endTransform:C.A.IDENTITY,convert:!1})}},R.prototype.worldToCameraCoordinates=function(e,t){if(!(0,c.A)(e))throw new l.A("cartesian is required.");return(0,c.A)(t)||(t=new a.A),z(this),C.A.multiplyByVector(this._actualInvTransform,e,t)},R.prototype.worldToCameraCoordinatesPoint=function(e,t){if(!(0,c.A)(e))throw new l.A("cartesian is required.");return(0,c.A)(t)||(t=new r.A),z(this),C.A.multiplyByPoint(this._actualInvTransform,e,t)},R.prototype.worldToCameraCoordinatesVector=function(e,t){if(!(0,c.A)(e))throw new l.A("cartesian is required.");return(0,c.A)(t)||(t=new r.A),z(this),C.A.multiplyByPointAsVector(this._actualInvTransform,e,t)},R.prototype.cameraToWorldCoordinates=function(e,t){if(!(0,c.A)(e))throw new l.A("cartesian is required.");return(0,c.A)(t)||(t=new a.A),z(this),C.A.multiplyByVector(this._actualTransform,e,t)},R.prototype.cameraToWorldCoordinatesPoint=function(e,t){if(!(0,c.A)(e))throw new l.A("cartesian is required.");return(0,c.A)(t)||(t=new r.A),z(this),C.A.multiplyByPoint(this._actualTransform,e,t)},R.prototype.cameraToWorldCoordinatesVector=function(e,t){if(!(0,c.A)(e))throw new l.A("cartesian is required.");return(0,c.A)(t)||(t=new r.A),z(this),C.A.multiplyByPointAsVector(this._actualTransform,e,t)};const _e=new r.A;R.prototype.move=function(e,t){if(!(0,c.A)(e))throw new l.A("direction is required.");const n=this.position;r.A.multiplyByScalar(e,t,_e),r.A.add(n,_e,n),this._mode===N.A.SCENE2D&&me(this,n),this._adjustOrthographicFrustum(!0)},R.prototype.moveForward=function(e){e=e??this.defaultMoveAmount,this._mode===N.A.SCENE2D?xe(this,e):this.move(this.direction,e)},R.prototype.moveBackward=function(e){e=e??this.defaultMoveAmount,this._mode===N.A.SCENE2D?xe(this,-e):this.move(this.direction,-e)},R.prototype.moveUp=function(e){e=e??this.defaultMoveAmount,this.move(this.up,e)},R.prototype.moveDown=function(e){e=e??this.defaultMoveAmount,this.move(this.up,-e)},R.prototype.moveRight=function(e){e=e??this.defaultMoveAmount,this.move(this.right,e)},R.prototype.moveLeft=function(e){e=e??this.defaultMoveAmount,this.move(this.right,-e)},R.prototype.lookLeft=function(e){e=e??this.defaultLookAmount,this._mode!==N.A.SCENE2D&&this.look(this.up,-e)},R.prototype.lookRight=function(e){e=e??this.defaultLookAmount,this._mode!==N.A.SCENE2D&&this.look(this.up,e)},R.prototype.lookUp=function(e){e=e??this.defaultLookAmount,this._mode!==N.A.SCENE2D&&this.look(this.right,-e)},R.prototype.lookDown=function(e){e=e??this.defaultLookAmount,this._mode!==N.A.SCENE2D&&this.look(this.right,e)};const Ie=new w.A,Ee=new y.A;R.prototype.look=function(e,t){if(!(0,c.A)(e))throw new l.A("axis is required.");const n=t??this.defaultLookAmount,i=w.A.fromAxisAngle(e,-n,Ie),o=y.A.fromQuaternion(i,Ee),r=this.direction,a=this.up,s=this.right;y.A.multiplyByVector(o,r,r),y.A.multiplyByVector(o,a,a),y.A.multiplyByVector(o,s,s)},R.prototype.twistLeft=function(e){e=e??this.defaultLookAmount,this.look(this.direction,e)},R.prototype.twistRight=function(e){e=e??this.defaultLookAmount,this.look(this.direction,-e)};const ye=new w.A,Ce=new y.A;R.prototype.rotate=function(e,t){if(!(0,c.A)(e))throw new l.A("axis is required.");const n=t??this.defaultRotateAmount,i=w.A.fromAxisAngle(e,-n,ye),o=y.A.fromQuaternion(i,Ce);y.A.multiplyByVector(o,this.position,this.position),y.A.multiplyByVector(o,this.direction,this.direction),y.A.multiplyByVector(o,this.up,this.up),r.A.cross(this.direction,this.up,this.right),r.A.cross(this.right,this.direction,this.up),this._adjustOrthographicFrustum(!1)},R.prototype.rotateDown=function(e){Te(this,e=e??this.defaultRotateAmount)},R.prototype.rotateUp=function(e){Te(this,-(e=e??this.defaultRotateAmount))};const be=new r.A,Be=new r.A,ve=new r.A,we=new r.A;function Te(e,t){const n=e.position;if((0,c.A)(e.constrainedAxis)&&!r.A.equalsEpsilon(e.position,r.A.ZERO,E.A.EPSILON2)){const i=r.A.normalize(n,be),o=r.A.equalsEpsilon(i,e.constrainedAxis,E.A.EPSILON2),a=r.A.equalsEpsilon(i,r.A.negate(e.constrainedAxis,we),E.A.EPSILON2);if(o||a)(o&&t<0||a&&t>0)&&e.rotate(e.right,t);else{const n=r.A.normalize(e.constrainedAxis,Be);let o=r.A.dot(i,n),a=E.A.acosClamped(o);t>0&&t>a&&(t=a-E.A.EPSILON4),o=r.A.dot(i,r.A.negate(n,we)),a=E.A.acosClamped(o),t<0&&-t>a&&(t=-a+E.A.EPSILON4);const s=r.A.cross(n,i,ve);e.rotate(s,t)}}else e.rotate(e.right,t)}function Se(e,t){(0,c.A)(e.constrainedAxis)?e.rotate(e.constrainedAxis,t):e.rotate(e.up,t)}function xe(e,t){const n=e.frustum;if(!(n instanceof B.A&&(0,c.A)(n.left)&&(0,c.A)(n.right)&&(0,c.A)(n.bottom)&&(0,c.A)(n.top)))throw new l.A("The camera frustum is expected to be orthographic for 2D camera control.");let i;if(t*=.5,Math.abs(n.top)+Math.abs(n.bottom)>Math.abs(n.left)+Math.abs(n.right)){let o=n.top-t,r=n.bottom+t,a=e._maxCoord.y;e._scene.mapMode2D===Q.A.ROTATE&&(a*=e.maximumZoomFactor),r>a&&(r=a,o=-a),o<=r&&(o=1,r=-1),i=n.right/n.top,n.top=o,n.bottom=r,n.right=n.top*i,n.left=-n.right}else{let o=n.right-t,r=n.left+t,a=e._maxCoord.x;e._scene.mapMode2D===Q.A.ROTATE&&(a*=e.maximumZoomFactor),o>a&&(o=a,r=-a),o<=r&&(o=1,r=-1),i=n.top/n.right,n.right=o,n.left=r,n.top=n.right*i,n.bottom=-n.top}}function De(e,t){e.move(e.direction,t)}R.prototype.rotateRight=function(e){Se(this,-(e=e??this.defaultRotateAmount))},R.prototype.rotateLeft=function(e){Se(this,e=e??this.defaultRotateAmount)},R.prototype.zoomIn=function(e){e=e??this.defaultZoomAmount,this._mode===N.A.SCENE2D?xe(this,e):De(this,e)},R.prototype.zoomOut=function(e){e=e??this.defaultZoomAmount,this._mode===N.A.SCENE2D?xe(this,-e):De(this,-e)},R.prototype.getMagnitude=function(){return this._mode===N.A.SCENE3D?r.A.magnitude(this.position):this._mode===N.A.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===N.A.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0};const Qe=new C.A;R.prototype.lookAt=function(e,t){if(!(0,c.A)(e))throw new l.A("target is required");if(!(0,c.A)(t))throw new l.A("offset is required");if(this._mode===N.A.MORPHING)throw new l.A("lookAt is not supported while morphing.");const n=this._scene.ellipsoid??d.A.default,i=x.A.eastNorthUpToFixedFrame(e,n,Qe);this.lookAtTransform(i,t)};const Ne=new r.A,Re=new w.A,Me=new w.A,Le=new y.A;function Pe(e,t,n){t=E.A.clamp(t,-E.A.PI_OVER_TWO,E.A.PI_OVER_TWO),e=E.A.zeroToTwoPi(e)-E.A.PI_OVER_TWO;const i=w.A.fromAxisAngle(r.A.UNIT_Y,-t,Re),o=w.A.fromAxisAngle(r.A.UNIT_Z,-e,Me),a=w.A.multiply(o,i,o),s=y.A.fromQuaternion(a,Le),A=r.A.clone(r.A.UNIT_X,Ne);return y.A.multiplyByVector(s,A,A),r.A.negate(A,A),r.A.multiplyByScalar(A,n,A),A}R.prototype.lookAtTransform=function(e,t){if(!(0,c.A)(e))throw new l.A("transform is required");if(this._mode===N.A.MORPHING)throw new l.A("lookAtTransform is not supported while morphing.");if(this._setTransform(e),!(0,c.A)(t))return;let n;if(n=(0,c.A)(t.heading)?Pe(t.heading,t.pitch,t.range):t,this._mode===N.A.SCENE2D){o.A.clone(o.A.ZERO,this.position),r.A.negate(n,this.up),this.up.z=0,r.A.magnitudeSquared(this.up)<E.A.EPSILON10&&r.A.clone(r.A.UNIT_Y,this.up),r.A.normalize(this.up,this.up),this._setTransform(C.A.IDENTITY),r.A.negate(r.A.UNIT_Z,this.direction),r.A.cross(this.direction,this.up,this.right),r.A.normalize(this.right,this.right);const t=this.frustum,i=t.top/t.right;return t.right=.5*r.A.magnitude(n),t.left=-t.right,t.top=i*t.right,t.bottom=-t.top,void this._setTransform(e)}r.A.clone(n,this.position),r.A.negate(this.position,this.direction),r.A.normalize(this.direction,this.direction),r.A.cross(this.direction,r.A.UNIT_Z,this.right),r.A.magnitudeSquared(this.right)<E.A.EPSILON10&&r.A.clone(r.A.UNIT_X,this.right),r.A.normalize(this.right,this.right),r.A.cross(this.right,this.direction,this.up),r.A.normalize(this.up,this.up),this._adjustOrthographicFrustum(!0)};const Oe=new s.A,Fe=new s.A,Ue=new r.A,ke=new r.A,Ge=new r.A,He=new r.A,Ve=new r.A,ze=new r.A,je=new r.A,Ye=new r.A,qe={direction:new r.A,right:new r.A,up:new r.A};let We;function Je(e,t,n,i){return Math.abs(r.A.dot(t,n))/i-r.A.dot(e,n)}function Ke(e,t,n,i){const o=e._projection.ellipsoid,a=i?e:qe,{north:s,south:A,west:l}=t;let{east:u}=t;l>u&&(u+=E.A.TWO_PI);const d=.5*(l+u);let g;if(A<-E.A.PI_OVER_TWO+E.A.RADIANS_PER_DEGREE&&s>E.A.PI_OVER_TWO-E.A.RADIANS_PER_DEGREE)g=0;else{const e=Oe;e.longitude=d,e.latitude=s,e.height=0;const t=Fe;t.longitude=d,t.latitude=A,t.height=0;let n=We;(0,c.A)(n)&&n.ellipsoid===o||(We=n=new h.A(void 0,void 0,o)),n.setEndPoints(e,t),g=n.interpolateUsingFraction(.5,Oe).latitude}const f=Oe;f.longitude=d,f.latitude=g,f.height=0;const p=o.cartographicToCartesian(f,je),m=Oe;m.longitude=u,m.latitude=s;const _=o.cartographicToCartesian(m,Ue);m.longitude=l;const I=o.cartographicToCartesian(m,Ge);m.longitude=d;const y=o.cartographicToCartesian(m,Ve);m.latitude=A;const C=o.cartographicToCartesian(m,ze);m.longitude=u;const B=o.cartographicToCartesian(m,He);m.longitude=l;const v=o.cartographicToCartesian(m,ke);r.A.subtract(I,p,I),r.A.subtract(B,p,B),r.A.subtract(_,p,_),r.A.subtract(v,p,v),r.A.subtract(y,p,y),r.A.subtract(C,p,C);const w=o.geodeticSurfaceNormal(p,a.direction);r.A.negate(w,w);const T=r.A.cross(w,r.A.UNIT_Z,a.right);r.A.normalize(T,T);const S=r.A.cross(T,w,a.up);let x;if(e.frustum instanceof b.A){const t=Math.max(r.A.distance(_,I),r.A.distance(B,v)),n=Math.max(r.A.distance(_,B),r.A.distance(I,v));let i,o;const a=e.frustum._offCenterFrustum,s=a.right/a.top,A=n*s;t>A?(i=t,o=i/s):(o=n,i=A),x=Math.max(i,o)}else{const t=Math.tan(.5*e.frustum.fovy),n=e.frustum.aspectRatio*t;if(x=Math.max(Je(w,S,I,t),Je(w,S,B,t),Je(w,S,_,t),Je(w,S,v,t),Je(w,S,y,t),Je(w,S,C,t),Je(w,T,I,n),Je(w,T,B,n),Je(w,T,_,n),Je(w,T,v,n),Je(w,T,y,n),Je(w,T,C,n)),A<0&&s>0){const e=Oe;e.longitude=l,e.latitude=0,e.height=0;let i=o.cartographicToCartesian(e,Ye);r.A.subtract(i,p,i),x=Math.max(x,Je(w,S,i,t),Je(w,T,i,n)),e.longitude=u,i=o.cartographicToCartesian(e,Ye),r.A.subtract(i,p,i),x=Math.max(x,Je(w,S,i,t),Je(w,T,i,n))}}return r.A.add(p,r.A.multiplyByScalar(w,-x,Ye),n)}const Xe=new s.A,Ze=new r.A,$e=new r.A,et=new s.A,tt=new r.A,nt=new r.A;R.prototype.getRectangleCameraCoordinates=function(e,t){if(!(0,c.A)(e))throw new l.A("rectangle is required");const n=this._mode;return(0,c.A)(t)||(t=new r.A),n===N.A.SCENE3D?Ke(this,e,t):n===N.A.COLUMBUS_VIEW?function(e,t,n){const i=e._projection;t.west>t.east&&(t=S.A.MAX_VALUE);const o=e._actualTransform,r=e._actualInvTransform,a=Xe;a.longitude=t.east,a.latitude=t.north;const s=i.project(a,Ze);C.A.multiplyByPoint(o,s,s),C.A.multiplyByPoint(r,s,s),a.longitude=t.west,a.latitude=t.south;const A=i.project(a,$e);if(C.A.multiplyByPoint(o,A,A),C.A.multiplyByPoint(r,A,A),n.x=.5*(s.x-A.x)+A.x,n.y=.5*(s.y-A.y)+A.y,(0,c.A)(e.frustum.fovy)){const t=Math.tan(.5*e.frustum.fovy),i=e.frustum.aspectRatio*t;n.z=.5*Math.max((s.x-A.x)/i,(s.y-A.y)/t)}else{const e=s.x-A.x,t=s.y-A.y;n.z=Math.max(e,t)}return n}(this,e,t):n===N.A.SCENE2D?function(e,t,n){const i=e._projection;let o=t.east;t.west>t.east&&(e._scene.mapMode2D===Q.A.INFINITE_SCROLL?o+=E.A.TWO_PI:o=(t=S.A.MAX_VALUE).east);let r=et;r.longitude=o,r.latitude=t.north;const a=i.project(r,tt);r.longitude=t.west,r.latitude=t.south;const s=i.project(r,nt),A=.5*Math.abs(a.x-s.x);let c,l,u=.5*Math.abs(a.y-s.y);const d=e.frustum.right/e.frustum.top,h=u*d;return A>h?(c=A,l=c/d):(l=u,c=h),u=Math.max(2*c,2*l),n.x=.5*(a.x-s.x)+s.x,n.y=.5*(a.y-s.y)+s.y,r=i.unproject(n,r),r.height=u,i.project(r,n)}(this,e,t):void 0};const it=new T.A,ot=new T.A,rt=new T.A;R.prototype.pickEllipsoid=function(e,t,n){if(!(0,c.A)(e))throw new l.A("windowPosition is required.");const i=this._scene.canvas;if(0!==i.clientWidth&&0!==i.clientHeight){if((0,c.A)(n)||(n=new r.A),t=t??d.A.default,this._mode===N.A.SCENE3D)n=function(e,t,n,i){n=n??d.A.default;const o=e.getPickRay(t,it),r=I.A.rayEllipsoid(o,n);if(!r)return;const a=r.start>0?r.start:r.stop;return T.A.getPoint(o,a,i)}(this,e,t,n);else if(this._mode===N.A.SCENE2D)n=function(e,t,n,i){let o=e.getPickRay(t,ot).origin;o=r.A.fromElements(o.y,o.z,0,o);const a=n.unproject(o);if(!(a.latitude<-E.A.PI_OVER_TWO||a.latitude>E.A.PI_OVER_TWO))return n.ellipsoid.cartographicToCartesian(a,i)}(this,e,this._projection,n);else{if(this._mode!==N.A.COLUMBUS_VIEW)return;n=function(e,t,n,i){const o=e.getPickRay(t,rt),a=-o.origin.x/o.direction.x;T.A.getPoint(o,a,i);const s=n.unproject(new r.A(i.y,i.z,0));if(!(s.latitude<-E.A.PI_OVER_TWO||s.latitude>E.A.PI_OVER_TWO||s.longitude<-Math.PI||s.longitude>Math.PI))return n.ellipsoid.cartographicToCartesian(s,i)}(this,e,this._projection,n)}return n}};const at=new r.A,st=new r.A,At=new r.A,ct=new r.A;R.prototype.getPickRay=function(e,t){if(!(0,c.A)(e))throw new l.A("windowPosition is required.");(0,c.A)(t)||(t=new T.A);const n=this._scene.canvas;if(n.clientWidth<=0||n.clientHeight<=0)return;const i=this.frustum;return(0,c.A)(i.aspectRatio)&&(0,c.A)(i.fov)&&(0,c.A)(i.near)?function(e,t,n){const i=e._scene.canvas,o=i.clientWidth,a=i.clientHeight,s=Math.tan(.5*e.frustum.fovy),A=e.frustum.aspectRatio*s,c=e.frustum.near,l=2/o*t.x-1,u=2/a*(a-t.y)-1,d=e.positionWC;r.A.clone(d,n.origin);const h=r.A.multiplyByScalar(e.directionWC,c,at);r.A.add(d,h,h);const g=r.A.multiplyByScalar(e.rightWC,l*c*A,st),f=r.A.multiplyByScalar(e.upWC,u*c*s,At),p=r.A.add(h,g,n.direction);return r.A.add(p,f,p),r.A.subtract(p,d,p),r.A.normalize(p,p),n}(this,e,t):function(e,t,n){const i=e._scene.canvas,o=i.clientWidth,a=i.clientHeight;let s=e.frustum;const A=s.offCenterFrustum;(0,c.A)(A)&&(s=A);let l=2/o*t.x-1;l*=.5*(s.right-s.left);let u=2/a*(a-t.y)-1;u*=.5*(s.top-s.bottom);const d=n.origin;return r.A.clone(e.positionWC,d),r.A.multiplyByScalar(e.rightWC,l,ct),r.A.add(ct,d,d),r.A.multiplyByScalar(e.upWC,u,ct),r.A.add(ct,d,d),r.A.clone(e.directionWC,n.direction),n}(this,e,t)};const lt=new r.A,ut=new r.A;R.prototype.distanceToBoundingSphere=function(e){if(!(0,c.A)(e))throw new l.A("boundingSphere is required.");const t=r.A.subtract(this.positionWC,e.center,lt),n=r.A.multiplyByScalar(this.directionWC,r.A.dot(t,this.directionWC),ut);return Math.max(0,r.A.magnitude(n)-e.radius)};const dt=new o.A;R.prototype.getPixelSize=function(e,t,n){if(!(0,c.A)(e))throw new l.A("boundingSphere is required.");if(!(0,c.A)(t))throw new l.A("drawingBufferWidth is required.");if(!(0,c.A)(n))throw new l.A("drawingBufferHeight is required.");const i=this.distanceToBoundingSphere(e),o=this.frustum.getPixelDimensions(t,n,i,this._scene.pixelRatio,dt);return Math.max(o.x,o.y)};const ht=new r.A,gt=new r.A,ft=new r.A,pt=new r.A;R.prototype.createCorrectPositionTween=function(e){if(!(0,c.A)(e))throw new l.A("duration is required.");if(this._mode===N.A.COLUMBUS_VIEW)return function(e,t){let n=e.position;const i=e.direction,o=e.worldToCameraCoordinatesVector(r.A.UNIT_X,ht),a=-r.A.dot(o,n)/r.A.dot(o,i),s=r.A.add(n,r.A.multiplyByScalar(i,a,gt),gt);e.cameraToWorldCoordinatesPoint(s,s),n=e.cameraToWorldCoordinatesPoint(e.position,ft);const A=Math.tan(.5*e.frustum.fovy),c=e.frustum.aspectRatio*A,l=r.A.magnitude(r.A.subtract(n,s,pt)),d=c*l,h=A*l,g=e._maxCoord.x,f=e._maxCoord.y,p=Math.max(d-g,g),m=Math.max(h-f,f);if(n.z<-p||n.z>p||n.y<-m||n.y>m){const i=s.y<-p||s.y>p,o=s.z<-m||s.z>m;if(i||o)return function(e,t,n,i,o,a){const s=r.A.clone(t);return n.y>i?s.y-=n.y-i:n.y<-i&&(s.y+=-i-n.y),n.z>o?s.z-=n.z-o:n.z<-o&&(s.z+=-o-n.z),{easingFunction:u.A.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:a,update:function(n){const i=r.A.lerp(t,s,n.time,new r.A);e.worldToCameraCoordinatesPoint(i,e.position)}}}(e,n,s,p,m,t)}}(this,e)};const mt=new r.A,_t={destination:void 0,heading:void 0,pitch:void 0,roll:void 0,duration:void 0,complete:void 0,cancel:void 0,endTransform:void 0,maximumHeight:void 0,easingFunction:void 0};function It(e,t,n){n=p.A.clone((0,c.A)(n)?n:R.DEFAULT_OFFSET);const i=e._scene.screenSpaceCameraController.minimumZoomDistance,o=e._scene.screenSpaceCameraController.maximumZoomDistance,r=n.range;if(!(0,c.A)(r)||0===r){const r=t.radius;0===r?n.range=100:e.frustum instanceof b.A||e._mode===N.A.SCENE2D?n.range=function(e,t){let n=e.frustum;const i=n.offCenterFrustum;let o,r;(0,c.A)(i)&&(n=i);const a=n.right/n.top,s=t*a;return t>s?(o=t,r=o/a):(r=t,o=s),1.5*Math.max(o,r)}(e,r):n.range=function(e,t){const n=e.frustum,i=Math.tan(.5*n.fovy),o=n.aspectRatio*i;return Math.max(t/o,t/i)}(e,r),n.range=E.A.clamp(n.range,i,o)}return n}R.prototype.cancelFlight=function(){(0,c.A)(this._currentFlight)&&(this._currentFlight.cancelTween(),this._currentFlight=void 0)},R.prototype.completeFlight=function(){if((0,c.A)(this._currentFlight)){this._currentFlight.cancelTween();const e={destination:void 0,orientation:{heading:void 0,pitch:void 0,roll:void 0}};e.destination=_t.destination,e.orientation.heading=_t.heading,e.orientation.pitch=_t.pitch,e.orientation.roll=_t.roll,this.setView(e),(0,c.A)(this._currentFlight.complete)&&this._currentFlight.complete(),this._currentFlight=void 0}},R.prototype.flyTo=function(e){let t=(e=e??A.A.EMPTY_OBJECT).destination;if(!(0,c.A)(t))throw new l.A("destination is required.");if(this._mode===N.A.MORPHING)return;this.cancelFlight();const n=t instanceof S.A;n&&(t=this.getRectangleCameraCoordinates(t,mt));let i=e.orientation??A.A.EMPTY_OBJECT;if((0,c.A)(i.direction)&&(i=he(this,t,i,ge.orientation)),(0,c.A)(e.duration)&&e.duration<=0){const t=ge;return t.destination=e.destination,t.orientation.heading=i.heading,t.orientation.pitch=i.pitch,t.orientation.roll=i.roll,t.convert=e.convert,t.endTransform=e.endTransform,this.setView(t),void("function"==typeof e.complete&&e.complete())}const o=this;let r;_t.destination=t,_t.heading=i.heading,_t.pitch=i.pitch,_t.roll=i.roll,_t.duration=e.duration,_t.complete=function(){r===o._currentFlight&&(o._currentFlight=void 0),(0,c.A)(e.complete)&&e.complete()},_t.cancel=e.cancel,_t.endTransform=e.endTransform,_t.convert=!n&&e.convert,_t.maximumHeight=e.maximumHeight,_t.pitchAdjustHeight=e.pitchAdjustHeight,_t.flyOverLongitude=e.flyOverLongitude,_t.flyOverLongitudeWeight=e.flyOverLongitudeWeight,_t.easingFunction=e.easingFunction;const a=this._scene,s=D.A.createTween(a,_t);if(0===s.duration)return void("function"==typeof s.complete&&s.complete());r=a.tweens.add(s),this._currentFlight=r;let u=this._scene.preloadFlightCamera;this._mode!==N.A.SCENE2D&&((0,c.A)(u)||(u=R.clone(this)),u.setView({destination:t,orientation:i}),this._scene.preloadFlightCullingVolume=u.frustum.computeCullingVolume(u.positionWC,u.directionWC,u.upWC))},R.prototype.viewBoundingSphere=function(e,t){if(!(0,c.A)(e))throw new l.A("boundingSphere is required.");if(this._mode===N.A.MORPHING)throw new l.A("viewBoundingSphere is not supported while morphing.");t=It(this,e,t),this.lookAt(e.center,t)};const Et=new C.A,yt=new r.A,Ct=new r.A,bt=new r.A,Bt=new r.A,vt=new a.A,wt=new w.A,Tt=new y.A;R.prototype.flyToBoundingSphere=function(e,t){if(!(0,c.A)(e))throw new l.A("boundingSphere is required.");t=t??A.A.EMPTY_OBJECT;const n=this._mode===N.A.SCENE2D||this._mode===N.A.COLUMBUS_VIEW;this._setTransform(C.A.IDENTITY);const i=It(this,e,t.offset);let o;o=n?r.A.multiplyByScalar(r.A.UNIT_Z,i.range,yt):Pe(i.heading,i.pitch,i.range);const a=this._scene.ellipsoid??d.A.default,s=x.A.eastNorthUpToFixedFrame(e.center,a,Et);let u,h;if(C.A.multiplyByPoint(s,o,o),!n){if(u=r.A.subtract(e.center,o,Ct),r.A.normalize(u,u),h=C.A.multiplyByPointAsVector(s,r.A.UNIT_Z,bt),1-Math.abs(r.A.dot(u,h))<E.A.EPSILON6){const e=w.A.fromAxisAngle(u,i.heading,wt),t=y.A.fromQuaternion(e,Tt);r.A.fromCartesian4(C.A.getColumn(s,1,vt),h),y.A.multiplyByVector(t,h,h)}const t=r.A.cross(u,h,Bt);r.A.cross(t,u,h),r.A.normalize(h,h)}this.flyTo({destination:o,orientation:{direction:u,up:h},duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:t.endTransform,maximumHeight:t.maximumHeight,easingFunction:t.easingFunction,flyOverLongitude:t.flyOverLongitude,flyOverLongitudeWeight:t.flyOverLongitudeWeight,pitchAdjustHeight:t.pitchAdjustHeight})};const St=new r.A,xt=new r.A,Dt=new r.A,Qt=new r.A,Nt=[new r.A,new r.A,new r.A,new r.A],Rt=new o.A,Mt=new r.A,Lt=[new s.A,new s.A,new s.A,new s.A];function Pt(e,t,n,i,o,r){Rt.x=e,Rt.y=t;const a=i.pickEllipsoid(Rt,o,Mt);return(0,c.A)(a)?(Lt[n]=o.cartesianToCartographic(a,Lt[n]),1):(Lt[n]=o.cartesianToCartographic(r[n],Lt[n]),0)}R.prototype.computeViewRectangle=function(e,t){e=e??d.A.default;const n=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),o=new i.A(r.A.ZERO,e.maximumRadius);if(n.computeVisibility(o)===_.A.OUTSIDE)return;const a=this._scene.canvas,s=a.clientWidth,A=a.clientHeight;let c=0;const l=function(e,t){const n=t.radii,i=e.positionWC,o=r.A.multiplyComponents(t.oneOverRadii,i,St),a=r.A.magnitude(o),s=r.A.normalize(o,xt);let A,c;r.A.equalsEpsilon(s,r.A.UNIT_Z,E.A.EPSILON10)?(A=new r.A(0,1,0),c=new r.A(0,0,1)):(A=r.A.normalize(r.A.cross(r.A.UNIT_Z,s,Dt),Dt),c=r.A.normalize(r.A.cross(s,A,Qt),Qt));const l=Math.sqrt(r.A.magnitudeSquared(o)-1),u=r.A.multiplyByScalar(s,1/a,St),d=l/a,h=r.A.multiplyByScalar(A,d,xt),g=r.A.multiplyByScalar(c,d,Dt),f=r.A.add(u,g,Nt[0]);r.A.subtract(f,h,f),r.A.multiplyComponents(n,f,f);const p=r.A.subtract(u,g,Nt[1]);r.A.subtract(p,h,p),r.A.multiplyComponents(n,p,p);const m=r.A.subtract(u,g,Nt[2]);r.A.add(m,h,m),r.A.multiplyComponents(n,m,m);const _=r.A.add(u,g,Nt[3]);return r.A.add(_,h,_),r.A.multiplyComponents(n,_,_),Nt}(this,e);if(c+=Pt(0,0,0,this,e,l),c+=Pt(0,A,1,this,e,l),c+=Pt(s,A,2,this,e,l),c+=Pt(s,0,3,this,e,l),c<2)return S.A.MAX_VALUE;t=S.A.fromCartographicArray(Lt,t);let u=0,h=Lt[3].longitude;for(let e=0;e<4;++e){const t=Lt[e].longitude,n=Math.abs(t-h);n>E.A.PI?u+=E.A.TWO_PI-n:u+=n,h=t}return E.A.equalsEpsilon(Math.abs(u),E.A.TWO_PI,E.A.EPSILON9)&&(t.west=-E.A.PI,t.east=E.A.PI,Lt[0].latitude>=0?t.north=E.A.PI_OVER_TWO:t.south=-E.A.PI_OVER_TWO),t},R.prototype.switchToPerspectiveFrustum=function(){if(this._mode===N.A.SCENE2D||this.frustum instanceof v.A)return;const e=this._scene;this.frustum=new v.A,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=E.A.toRadians(60)},R.prototype.switchToOrthographicFrustum=function(){if(this._mode===N.A.SCENE2D||this.frustum instanceof b.A)return;const e=ie(this),t=this._scene;this.frustum=new b.A,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.width=e},R.clone=function(e,t){return(0,c.A)(t)||(t=new R(e._scene)),r.A.clone(e.position,t.position),r.A.clone(e.direction,t.direction),r.A.clone(e.up,t.up),r.A.clone(e.right,t.right),C.A.clone(e._transform,t.transform),t._transformChanged=!0,t.frustum=e.frustum.clone(),t};const Ot=R},985888:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(434067),o=n(491446),r=n(677354),a=n(605971),s=n(267465),A=n(367817),c=n(86881),l=n(149785),u=n(927181);function d(e,t){let n=`${e}`;return(0,o.A)(t)&&(n+=`+${t}`),n}function h(e,t,n){const r=d(u.A.PINCH,t),a=e._update,s=e._isDown,A=e._eventStartPosition,c=e._pressTime,h=e._releaseTime;a[r]=!0,s[r]=!1,A[r]=new i.A;let g=e._movement[r];(0,o.A)(g)||(g=e._movement[r]={}),g.distance={startPosition:new i.A,endPosition:new i.A},g.angleAndHeight={startPosition:new i.A,endPosition:new i.A},g.prevAngle=0,e._eventHandler.setInputAction(function(t){e._buttonsDown++,s[r]=!0,c[r]=new Date,i.A.lerp(t.position1,t.position2,.5,A[r])},l.A.PINCH_START,t),e._eventHandler.setInputAction(function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),s[r]=!1,h[r]=new Date},l.A.PINCH_END,t),e._eventHandler.setInputAction(function(e){if(s[r]){a[r]?(t=e,o=g,i.A.clone(t.distance.startPosition,o.distance.startPosition),i.A.clone(t.distance.endPosition,o.distance.endPosition),i.A.clone(t.angleAndHeight.startPosition,o.angleAndHeight.startPosition),i.A.clone(t.angleAndHeight.endPosition,o.angleAndHeight.endPosition),a[r]=!1,g.prevAngle=g.angleAndHeight.startPosition.x):(i.A.clone(e.distance.endPosition,g.distance.endPosition),i.A.clone(e.angleAndHeight.endPosition,g.angleAndHeight.endPosition));let s=g.angleAndHeight.endPosition.x;const A=g.prevAngle,c=2*Math.PI;for(;s>=A+Math.PI;)s-=c;for(;s<A-Math.PI;)s+=c;g.angleAndHeight.endPosition.x=-s*n.clientWidth/12,g.angleAndHeight.startPosition.x=-A*n.clientWidth/12}var t,o},l.A.PINCH_MOVE,t)}function g(e,t){const n=d(u.A.WHEEL,t),r=e._pressTime,a=e._releaseTime,s=e._update;s[n]=!0;let c=e._movement[n];(0,o.A)(c)||(c=e._movement[n]={});let h=e._lastMovement[n];(0,o.A)(h)||(h=e._lastMovement[n]={startPosition:new i.A,endPosition:new i.A,valid:!1}),c.startPosition=new i.A,i.A.clone(i.A.ZERO,c.startPosition),c.endPosition=new i.A,e._eventHandler.setInputAction(function(e){const t=7.5*A.A.toRadians(e);r[n]=a[n]=new Date,c.endPosition.x=0,c.endPosition.y=t,i.A.clone(c.endPosition,h.endPosition),h.valid=!0,s[n]=!1},l.A.WHEEL,t)}function f(e,t,n){const r=d(n,t),a=e._isDown,A=e._eventStartPosition,c=e._pressTime;a[r]=!1,A[r]=new i.A;let h,g,f=e._lastMovement[r];(0,o.A)(f)||(f=e._lastMovement[r]={startPosition:new i.A,endPosition:new i.A,valid:!1}),n===u.A.LEFT_DRAG?(h=l.A.LEFT_DOWN,g=l.A.LEFT_UP):n===u.A.RIGHT_DRAG?(h=l.A.RIGHT_DOWN,g=l.A.RIGHT_UP):n===u.A.MIDDLE_DRAG&&(h=l.A.MIDDLE_DOWN,g=l.A.MIDDLE_UP),e._eventHandler.setInputAction(function(t){e._buttonsDown++,f.valid=!1,a[r]=!0,c[r]=new Date,i.A.clone(t.position,A[r])},h,t),e._eventHandler.setInputAction(function(){p(d(n,void 0),e);for(const t of Object.values(s.A))p(d(n,t),e)},g,t)}function p(e,t){const n=t._releaseTime,i=t._isDown;i[e]&&(t._buttonsDown=Math.max(t._buttonsDown-1,0)),i[e]=!1,n[e]=new Date}function m(e,t){i.A.clone(e.startPosition,t.startPosition),i.A.clone(e.endPosition,t.endPosition)}function _(e,t,n){const r=n._isDown;let a=!1;const s=d(e,t);for(const[t,i]of Object.entries(r))t.startsWith(e)&&i&&t!==s&&(a=!0,p(t,n));if(!a)return;const A=n._pressTime;let c=n._lastMovement[s];(0,o.A)(c)||(c=n._lastMovement[s]={startPosition:new i.A,endPosition:new i.A,valid:!1}),n._buttonsDown++,c.valid=!1,r[s]=!0,A[s]=new Date}function I(e,t){const n=e._update,r=e._movement,a=e._lastMovement,s=e._isDown;for(const r in u.A)if(u.A.hasOwnProperty(r)){const a=u.A[r];if((0,o.A)(a)){const r=d(a,t);n[r]=!0,(0,o.A)(e._lastMovement[r])||(e._lastMovement[r]={startPosition:new i.A,endPosition:new i.A,valid:!1}),(0,o.A)(e._movement[r])||(e._movement[r]={startPosition:new i.A,endPosition:new i.A})}}e._eventHandler.setInputAction(function(A){for(const c in u.A)if(u.A.hasOwnProperty(c)){const l=u.A[c];if((0,o.A)(l)){const o=d(l,t);_(l,t,e),s[o]&&(n[o]?(m(r[o],a[o]),a[o].valid=!0,m(A,r[o]),n[o]=!1):i.A.clone(A.endPosition,r[o].endPosition))}}i.A.clone(A.endPosition,e._currentMousePosition)},l.A.MOUSE_MOVE,t)}function E(e){if(!(0,o.A)(e))throw new a.A("canvas is required.");this._eventHandler=new c.A(e),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new i.A,g(this,void 0),h(this,void 0,e),f(this,void 0,u.A.LEFT_DRAG),f(this,void 0,u.A.RIGHT_DRAG),f(this,void 0,u.A.MIDDLE_DRAG),I(this,void 0);for(const t in s.A)if(s.A.hasOwnProperty(t)){const n=s.A[t];(0,o.A)(n)&&(g(this,n),h(this,n,e),f(this,n,u.A.LEFT_DRAG),f(this,n,u.A.RIGHT_DRAG),f(this,n,u.A.MIDDLE_DRAG),I(this,n))}}Object.defineProperties(E.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){const e=!(this._update[d(u.A.WHEEL)]&&this._update[d(u.A.WHEEL,s.A.SHIFT)]&&this._update[d(u.A.WHEEL,s.A.CTRL)]&&this._update[d(u.A.WHEEL,s.A.ALT)]);return this._buttonsDown>0||e}}}),E.prototype.isMoving=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");const n=d(e,t);return!this._update[n]},E.prototype.getMovement=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");const n=d(e,t);return this._movement[n]},E.prototype.getLastMovement=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");const n=d(e,t),i=this._lastMovement[n];if(i.valid)return i},E.prototype.isButtonDown=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");const n=d(e,t);return this._isDown[n]},E.prototype.getStartMousePosition=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");if(e===u.A.WHEEL)return this._currentMousePosition;const n=d(e,t);return this._eventStartPosition[n]},E.prototype.getButtonPressTime=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");const n=d(e,t);return this._pressTime[n]},E.prototype.getButtonReleaseTime=function(e,t){if(!(0,o.A)(e))throw new a.A("type is required.");const n=d(e,t);return this._releaseTime[n]},E.prototype.reset=function(){for(const e in this._update)this._update.hasOwnProperty(e)&&(this._update[e]=!0)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),(0,r.A)(this)};const y=E},927181:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4})},625224:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(434067),o=n(267980),r=n(336946),a=n(915325),s=n(491446),A=n(605971),c=n(924290),l=n(367817),u=n(666775),d=n(65783),h=n(62467);const g={},f=new o.A,p=new o.A;function m(e,t,n,i){if((0,s.A)(i)&&n(.5)>i){const i=n(0),o=n(1),r=n(.5),a=r-i,s=r-o;return function(r){const A=n(r);if(r<=.5){const t=(A-i)/a;return l.A.lerp(e,-l.A.PI_OVER_TWO,t)}const c=(A-o)/s;return l.A.lerp(-l.A.PI_OVER_TWO,t,1-c)}}return function(n){return l.A.lerp(e,t,n)}}function _(e,t,n,i,r){let a=r;const A=Math.max(n,i);if(!(0,s.A)(a)){const n=e.position,i=t,r=e.up,s=e.right,A=e.frustum,c=o.A.subtract(n,i,f),l=o.A.magnitude(o.A.multiplyByScalar(r,o.A.dot(c,r),p)),h=o.A.magnitude(o.A.multiplyByScalar(s,o.A.dot(c,s),p));a=Math.min(.2*function(e,t,n){let i,o,r;if(e instanceof u.A){const a=Math.tan(.5*e.fovy);return i=e.near,o=e.near*a,r=e.aspectRatio*o,Math.max(t*i/r,n*i/o)}return e instanceof d.A?(i=e.near,o=e.top,r=e.right,Math.max(t*i/r,n*i/o)):Math.max(t,n)}(A,l,h),1e9)}if(A<a){const e=8,t=1e6,o=-Math.pow((a-n)*t,1/e),r=Math.pow((a-i)*t,1/e);return function(n){const i=n*(r-o)+o;return-Math.pow(i,e)/t+a}}return function(e){return l.A.lerp(n,i,e)}}function I(e,t){return l.A.equalsEpsilon(e,l.A.TWO_PI,l.A.EPSILON11)&&(e=0),t>e+Math.PI?e+=l.A.TWO_PI:t<e-Math.PI&&(e-=l.A.TWO_PI),e}const E=new o.A;function y(e,t,n,r,a,s,A,c){const u=e.camera,d=o.A.clone(u.position,E),h=u.pitch,g=I(u.heading,r),f=I(u.roll,s),p=_(u,n,d.z,n.z,A),y=m(h,a,p,c);return function(e){const o=e.time/t;u.setView({orientation:{heading:l.A.lerp(g,r,o),pitch:y(o),roll:l.A.lerp(f,s,o)}}),i.A.lerp(d,n,o,u.position),u.position.z=p(o)}}const C=new r.A,b=new r.A;function B(e,t,n,i,a,A,c,u,d,h){const g=e.camera,f=e.mapProjection.ellipsoid,p=r.A.clone(g.positionCartographic,C),E=g.pitch,y=I(g.heading,i),B=I(g.roll,A),v=f.cartesianToCartographic(n,b);p.longitude=l.A.zeroToTwoPi(p.longitude),v.longitude=l.A.zeroToTwoPi(v.longitude);let w=!1;if((0,s.A)(u)){const e=l.A.zeroToTwoPi(u),t=Math.min(p.longitude,v.longitude),n=Math.max(p.longitude,v.longitude),i=e>=t&&e<=n;if((0,s.A)(d)){const e=Math.abs(p.longitude-v.longitude),t=l.A.TWO_PI-e;(i?e:t)<(i?t:e)*d&&!i&&(w=!0)}else i||(w=!0)}w?function(e,t){e.longitude<t.longitude?e.longitude+=l.A.TWO_PI:t.longitude+=l.A.TWO_PI}(p,v):function(e,t){const n=e.longitude-t.longitude;n<-l.A.PI?e.longitude+=l.A.TWO_PI:n>l.A.PI&&(t.longitude+=l.A.TWO_PI)}(p,v);const T=_(g,n,p.height,v.height,c),S=m(E,a,T,h);return function(){const e=p.longitude,n=v.longitude,r=p.latitude,a=v.latitude;return function(s){const c=s.time/t,u=o.A.fromRadians(l.A.lerp(e,n,c),l.A.lerp(r,a,c),T(c),f);g.setView({destination:u,orientation:{heading:l.A.lerp(y,i,c),pitch:S(c),roll:l.A.lerp(B,A,c)}})}}()}function v(e,t,n,r,a,s,A){const c=e.camera,u=o.A.clone(c.position,E),d=I(c.heading,r),h=c.frustum.right-c.frustum.left,g=_(c,n,h,n.z,A);return function(e){const o=e.time/t;c.setView({orientation:{heading:l.A.lerp(d,r,o)}}),i.A.lerp(u,n,o,c.position);const a=g(o),s=c.frustum,A=s.top/s.right,h=.5*(a-(s.right-s.left));s.right+=h,s.left-=h,s.top=A*s.right,s.bottom=-s.top}}const w=new r.A,T=new o.A;function S(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function x(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}g.createTween=function(e,t){let n=(t=t??a.A.EMPTY_OBJECT).destination;if(!(0,s.A)(e))throw new A.A("scene is required.");if(!(0,s.A)(n))throw new A.A("destination is required.");const r=e.mode;if(r===h.A.MORPHING)return S();const u=t.convert??!0,d=e.mapProjection,g=d.ellipsoid,f=t.maximumHeight,p=t.flyOverLongitude,m=t.flyOverLongitudeWeight,_=t.pitchAdjustHeight;let I=t.easingFunction;u&&r!==h.A.SCENE3D&&(g.cartesianToCartographic(n,w),n=d.project(w,T));const E=e.camera,C=t.endTransform;(0,s.A)(C)&&E._setTransform(C);let b=t.duration;(0,s.A)(b)||(b=Math.ceil(o.A.distance(E.position,n)/1e6)+2,b=Math.min(b,3));const D=t.heading??0,Q=t.pitch??-l.A.PI_OVER_TWO,N=t.roll??0,R=e.screenSpaceCameraController;R.enableInputs=!1;const M=x(R,t.complete),L=x(R,t.cancel),P=E.frustum;let O=e.mode===h.A.SCENE2D;if(O=O&&i.A.equalsEpsilon(E.position,n,l.A.EPSILON6),O=O&&l.A.equalsEpsilon(Math.max(P.right-P.left,P.top-P.bottom),n.z,l.A.EPSILON6),O=O||e.mode!==h.A.SCENE2D&&o.A.equalsEpsilon(n,E.position,l.A.EPSILON10),O=O&&l.A.equalsEpsilon(l.A.negativePiToPi(D),l.A.negativePiToPi(E.heading),l.A.EPSILON10)&&l.A.equalsEpsilon(l.A.negativePiToPi(Q),l.A.negativePiToPi(E.pitch),l.A.EPSILON10)&&l.A.equalsEpsilon(l.A.negativePiToPi(N),l.A.negativePiToPi(E.roll),l.A.EPSILON10),O)return S(M,L);const F=new Array(4);if(F[h.A.SCENE2D]=v,F[h.A.SCENE3D]=B,F[h.A.COLUMBUS_VIEW]=y,b<=0)return S(function(){F[r](e,1,n,D,Q,N,f,p,m,_)({time:1}),"function"==typeof M&&M()},L);const U=F[r](e,b,n,D,Q,N,f,p,m,_);if(!(0,s.A)(I)){const e=E.positionCartographic.height;I=e>(r===h.A.SCENE3D?g.cartesianToCartographic(n).height:n.z)&&e>11500?c.A.CUBIC_OUT:c.A.QUINTIC_IN_OUT}return{duration:b,easingFunction:I,startObject:{time:0},stopObject:{time:b},update:U,complete:M,cancel:L}};const D=g},308695:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(915325);function r(e){e=e??o.A.EMPTY_OBJECT,i.A.typeOf.object("options.metadata",e.metadata),this._metadata=e.metadata}Object.defineProperties(r.prototype,{metadata:{get:function(){return this._metadata}}});const a=r},474751:(e,t,n)=>{"use strict";n.d(t,{A:()=>ge});var i=n(660662),o=n(267980),r=n(41476),a=n(433235),s=n(400793),A=n(491446),c=n(786101),l=n(677354),u=n(610750),d=n(647326),h=n(591978),g=n(367817),f=n(331185),p=n(584164),m=n(832698),_=n(811203),I=n(697422),E=n(209202),y=n(866569),C=n(83181),b=n(307898),B=n(744603),v=n(123245),w=n(308695),T=n(891846),S=n(621065),x=n(223702),D=n(45679),Q=n(581010),N=n(661314),R=n(84269),M=n(635649),L=n(217543),P=n(961624),O=n(800859),F=n(409816),U=n(655979),k=n(192518),G=n(62467),H=n(413690),V=n(224159),z=n(315747),j=n(11745),Y=n(760866),q=n(717339);function W(e,t,n,i){this._tileset=e,this._header=n;const o=(0,A.A)(n.contents),a=o&&n.contents.length>1||(0,O.A)(n,"3DTILES_multiple_contents"),s=o&&!a?n.contents[0]:n.content;this._contentHeader=s,this.transform=(0,A.A)(n.transform)?p.A.unpack(n.transform):p.A.clone(p.A.IDENTITY);const c=(0,A.A)(i)?i.computedTransform:e.modelMatrix,l=p.A.multiply(c,this.transform,new p.A),u=(0,A.A)(i)?i._initialTransform:p.A.IDENTITY;let d,g,f,m;this._initialTransform=p.A.multiply(u,this.transform,new p.A),this.computedTransform=l,this.metadata=(0,P.A)(e,n),this._verticalExaggeration=1,this._verticalExaggerationRelativeHeight=0,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,l),this._boundingVolume2D=void 0,(0,A.A)(s)&&(0,A.A)(s.boundingVolume)&&(d=this.createBoundingVolume(s.boundingVolume,l)),this._contentBoundingVolume=d,this._contentBoundingVolume2D=void 0,(0,A.A)(n.viewerRequestVolume)&&(g=this.createBoundingVolume(n.viewerRequestVolume,l)),this._viewerRequestVolume=g,this.geometricError=n.geometricError,this._geometricError=n.geometricError,(0,A.A)(this._geometricError)||(this._geometricError=(0,A.A)(i)?i._geometricError:e._geometricError,W._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),(0,A.A)(n.refine)?("replace"!==n.refine&&"add"!==n.refine||W._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),f="REPLACE"===n.refine.toUpperCase()?N.A.REPLACE:N.A.ADD):f=(0,A.A)(i)?i.refine:N.A.REPLACE,this.refine=f,this.children=[],this.parent=i;let _,I,E,C=!1;if(t=B.A.createIfNeeded(t),a)_=S.A.UNLOADED,I=t.clone();else if((0,A.A)(s)){let n=s.uri;(0,A.A)(s.url)&&(W._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),n=s.url),""===n?(W._deprecationWarning("contentUriEmpty","content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead"),m=new R.A(e,this),C=!0,_=S.A.READY):(_=S.A.UNLOADED,I=t.getDerivedResource({url:n}),E=y.A.getServerKey(I.getUrlComponent()))}else m=new R.A(e,this),C=!0,_=S.A.READY;this._content=m,this._contentResource=I,this._contentState=_,this._expiredContent=void 0,this._serverKey=E,this.hasEmptyContent=C,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasRenderableContent=!C,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=a,this.cacheNode=void 0;const b=n.expire;let v,w;(0,A.A)(b)&&(v=b.duration,(0,A.A)(b.date)&&(w=h.A.fromIso8601(b.date))),this.expireDuration=v,this.expireDate=w,this.lastStyleTime=0,this._optimChildrenWithinParent=D.A.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.clippingPolygonsDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._wasSelectedLastFrame=!1,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._isClippedByPolygon=!1,this._clippingPlanesState=0,this._clippingPolygonsState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=r.A.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new h.A,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}W._deprecationWarning=c.A,Object.defineProperties(W.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return this._contentBoundingVolume??this._boundingVolume}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},isVisible:{get:function(){return this._visible&&this._inRequestVolume}},extras:{get:function(){return this._header.extras}},color:{get:function(){return(0,A.A)(this._color)||(this._color=new r.A),r.A.clone(this._color)},set:function(e){this._color=r.A.clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&this.hasRenderableContent||(0,A.A)(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===S.A.READY}},contentUnloaded:{get:function(){return this._contentState===S.A.UNLOADED}},hasUnloadedRenderableContent:{get:function(){return this.hasRenderableContent&&this.contentUnloaded}},contentExpired:{get:function(){return this._contentState===S.A.EXPIRED}},contentFailed:{get:function(){return this._contentState===S.A.FAILED}},commandsLength:{get:function(){return this._commandsLength}}});const J=new o.A,K=new h.A;function X(e){return function(){return e._priority}}W.prototype.getScreenSpaceError=function(e,t,n){const i=this._tileset,o=n??1,r=(0,A.A)(this.parent)?this.parent.geometricError:i._scaledGeometricError,a=t?r:this.geometricError;if(0===a)return 0;const{camera:s,context:c}=e;let l=s.frustum;const u=c.drawingBufferWidth,d=c.drawingBufferHeight*o;let h;if(e.mode===G.A.SCENE2D||l instanceof _.A){const e=l.offCenterFrustum;(0,A.A)(e)&&(l=e),h=a/(Math.max(l.top-l.bottom,l.right-l.left)/Math.max(u,d))}else{const e=Math.max(this._distanceToCamera,g.A.EPSILON7);if(h=a*d/(e*l.sseDenominator),i.dynamicScreenSpaceError){const t=i._dynamicScreenSpaceErrorComputedDensity,n=i.dynamicScreenSpaceErrorFactor;h-=g.A.fog(e,t)*n}}return h/=e.pixelRatio,h},W.prototype.updateVisibility=function(e){const{parent:t,tileset:n}=this;if(this._updatedVisibilityFrame===n._updatedVisibilityFrame)return;const i=(0,A.A)(t)?t.computedTransform:n.modelMatrix,r=(0,A.A)(t)?t._visibilityPlaneMask:s.A.MASK_INDETERMINATE;this.updateTransform(i,e),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,r),this._visible=this._visibilityPlaneMask!==s.A.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=function(e,t){const n=t.parent,i=(0,A.A)(n)&&(!e.isSkippingLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent||n.hasImplicitContent)?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-i}(n,this),this._priorityProgressiveResolution=function(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;const n=e.memoryAdjustedScreenSpaceError;let i=t._screenSpaceErrorProgressiveResolution>n;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const o=t.parent,r=t._screenSpaceErrorProgressiveResolution<=n,a=(0,A.A)(o)&&o._screenSpaceErrorProgressiveResolution>n;return r&&a&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}(n,this),this.priorityDeferred=function(e,t){const{tileset:n,boundingSphere:i}=e,{radius:r,center:a}=i,{camera:s}=t,c=o.A.multiplyByScalar(s.directionWC,e._centerZDepth,J),l=o.A.add(s.positionWC,c,J),u=o.A.subtract(l,a,J);if(o.A.magnitude(u)>r){const t=o.A.normalize(u,J),n=o.A.multiplyByScalar(t,r,J),i=o.A.add(a,n,J),A=o.A.subtract(i,s.positionWC,J),c=o.A.normalize(A,J);e._foveatedFactor=1-Math.abs(o.A.dot(s.directionWC,c))}else e._foveatedFactor=0;const d=e.refine===N.A.REPLACE,h=n.isSkippingLevelOfDetail;if(d&&!h||!n.foveatedScreenSpaceError||1===n.foveatedConeSize||e._priorityProgressiveResolution&&d&&h||n._pass===Q.A.PRELOAD_FLIGHT||n._pass===Q.A.PRELOAD)return!1;const f=1-Math.cos(.5*s.frustum.fov),p=n.foveatedConeSize*f;if(e._foveatedFactor<=p)return!1;const m=f-p,_=g.A.clamp((e._foveatedFactor-p)/m,0,1),I=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.memoryAdjustedScreenSpaceError,_),E=0===e._screenSpaceError&&(0,A.A)(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return n.memoryAdjustedScreenSpaceError-I<=E}(this,e),this._updatedVisibilityFrame=n._updatedVisibilityFrame},W.prototype.updateExpiration=function(){if((0,A.A)(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const e=h.A.now(K);h.A.lessThan(this.expireDate,e)&&(this._contentState=S.A.EXPIRED,this._expiredContent=this._content)}},W.prototype.requestContent=function(){if(!this.hasEmptyContent)return this.hasMultipleContents?function(e){let t=e._content;const n=e._tileset;if(!(0,A.A)(t)){const i=(0,O.A)(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new F.A(n,e,e._contentResource.clone(),i),e._content=t}const i=t.requestInnerContents();if((0,A.A)(i))return e._contentState=S.A.LOADING,i.then(n=>{if(!e.isDestroyed()&&(0,A.A)(n))return e._contentState=S.A.PROCESSING,t}).catch(t=>{if(!e.isDestroyed())throw e._contentState=S.A.FAILED,t})}(this):function(e){const t=e._contentResource.clone(),n=e.contentExpired;n&&t.setQueryParameters({expired:e.expireDate.toString()});const i=new E.A({throttle:!0,throttleByServer:!0,type:b.A.TILES3D,priorityFunction:X(e),serverKey:e._serverKey});e._request=i,t.request=i;const o=e._tileset,r=t.fetchArrayBuffer();if((0,A.A)(r))return async function(e,t,n,i,o){const r=e._contentState;let a;e._contentState=S.A.LOADING,++t.statistics.numberOfPendingRequests;try{a=await o}catch(i){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;if(n.cancelled||n.state===C.A.CANCELLED)return e._contentState=r,void++t.statistics.numberOfAttemptedRequests;throw e._contentState=S.A.FAILED,i}if(e.isDestroyed())--t.statistics.numberOfPendingRequests;else{if(n.cancelled||n.state===C.A.CANCELLED)return e._contentState=r,--t.statistics.numberOfPendingRequests,void++t.statistics.numberOfAttemptedRequests;try{const n=await async function(e,t){const n=(0,k.A)(t),i=e._tileset;let o;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===x.A.GEOMETRY||n.contentType===x.A.VECTOR,(n.contentType===x.A.IMPLICIT_SUBTREE||n.contentType===x.A.IMPLICIT_SUBTREE_JSON)&&(e.hasImplicitContent=!0,e.hasRenderableContent=!1),n.contentType===x.A.EXTERNAL_TILESET&&(e.hasTilesetContent=!0,e.hasRenderableContent=!1);const r=T.A[n.contentType];if(e.isDestroyed())return;o=(0,A.A)(n.binaryPayload)?await Promise.resolve(r(i,e,e._contentResource,n.binaryPayload.buffer,0)):await Promise.resolve(r(i,e,e._contentResource,n.jsonPayload));const a=e._contentHeader;if(e.hasImplicitContentMetadata){const t=e.implicitSubtree,n=e.implicitCoordinates;o.metadata=t.getContentMetadataView(n,0)}else e.hasImplicitContent||(o.metadata=(0,M.A)(i,a));const s=(0,L.A)(i,a);return(0,A.A)(s)&&(o.group=new w.A({metadata:s})),o}(e,a);if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;return i&&(e.expireDate=void 0),e._content=n,e._contentState=S.A.PROCESSING,n}catch(n){if(--t.statistics.numberOfPendingRequests,e.isDestroyed())return;throw e._contentState=S.A.FAILED,n}}}(e,o,i,n,r);++o.statistics.numberOfAttemptedRequests}(this)},W.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},W.prototype.unloadContent=function(){this.hasRenderableContent&&(this._content=this._content&&this._content.destroy(),this._contentState=S.A.UNLOADED,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this.clippingPolygonsDirty=0===this._clippingPolygonsState,this._clippingPolygonsState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const Z=new i.A;function $(e,t){if(t.mode!==G.A.SCENE3D&&!(0,A.A)(e._boundingVolume2D)){const n=e._boundingVolume.boundingSphere,o=i.A.projectTo2D(n,t.mapProjection,Z);e._boundingVolume2D=new z.A(o.center,o.radius)}return t.mode!==G.A.SCENE3D?e._boundingVolume2D:e._boundingVolume}W.prototype.visibility=function(e,t){const n=e.cullingVolume,i=$(this,e),o=this._tileset,r=o.clippingPlanes;if((0,A.A)(r)&&r.enabled){const e=r.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==d.A.INSIDE,e===d.A.OUTSIDE)return s.A.MASK_OUTSIDE}const a=o.clippingPolygons;if((0,A.A)(a)&&a.enabled){const e=a.computeIntersectionWithBoundingVolume(i);this._isClippedByPolygon=e!==d.A.OUTSIDE}return n.computeVisibilityWithPlaneMask(i,t)},W.prototype.contentVisibility=function(e){if(!(0,A.A)(this._contentBoundingVolume))return d.A.INSIDE;if(this._visibilityPlaneMask===s.A.MASK_INSIDE)return d.A.INSIDE;const t=e.cullingVolume,n=function(e,t){if(t.mode!==G.A.SCENE3D&&!(0,A.A)(e._contentBoundingVolume2D)){const n=e._contentBoundingVolume.boundingSphere,o=i.A.projectTo2D(n,t.mapProjection,Z);e._contentBoundingVolume2D=new z.A(o.center,o.radius)}return t.mode!==G.A.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}(this,e),o=this._tileset,r=o.clippingPlanes;if((0,A.A)(r)&&r.enabled){const e=r.computeIntersectionWithBoundingVolume(n,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==d.A.INSIDE,e===d.A.OUTSIDE)return d.A.OUTSIDE}const a=o.clippingPolygons;if((0,A.A)(a)&&a.enabled){const e=a.computeIntersectionWithBoundingVolume(n);if(this._isClippedByPolygon=e!==d.A.OUTSIDE,e===d.A.INSIDE)return d.A.OUTSIDE}return t.computeVisibility(n)},W.prototype.distanceToTile=function(e){return $(this,e).distanceToCamera(e)};const ee=new o.A;W.prototype.distanceToTileCenter=function(e){const t=$(this,e).boundingVolume,n=o.A.subtract(t.center,e.camera.positionWC,ee);return o.A.dot(e.camera.directionWC,n)},W.prototype.insideViewerRequestVolume=function(e){const t=this._viewerRequestVolume;return!(0,A.A)(t)||0===t.distanceToCamera(e)};const te=new f.A,ne=new o.A,ie=new f.A,oe=new o.A,re=new I.A,ae=new m.A,se=new p.A;function Ae(e,t,n,i){const o=I.A.unpack(e,0,re),r=e[4],a=e[5],s=m.A.fromRectangle(o,r,a,u.A.WGS84,ae);let c=s.center,l=s.halfAxes;t=p.A.multiplyTransformation(t,p.A.inverseTransformation(n,se),se),c=p.A.multiplyByPoint(t,c,c);const d=p.A.getMatrix3(t,te);return l=f.A.multiply(d,l,l),(0,A.A)(i)&&i instanceof j.A?(i.update(c,l),i):new j.A(c,l)}W.prototype.createBoundingVolume=function(e,t,n){const i=this.metadata;let r;if((0,A.A)(i)&&(r=U.A.parseBoundingVolumeSemantic("TILE",i)),(0,A.A)(r)&&(e=r),!(0,A.A)(e))throw new v.A("boundingVolume must be defined");if((0,O.A)(e,"3DTILES_bounding_volume_S2"))return new V.A(e.extensions["3DTILES_bounding_volume_S2"]);const{box:a,region:s,sphere:c}=e;if((0,A.A)(a)){const e=function(e,t,n){let i=o.A.fromElements(e[0],e[1],e[2],oe),r=f.A.fromArray(e,3,ie);i=p.A.multiplyByPoint(t,i,i);const a=p.A.getMatrix3(t,te);return r=f.A.multiply(a,r,r),(0,A.A)(n)?(n.update(i,r),n):new j.A(i,r)}(a,t,n);return 1!==this._verticalExaggeration&&le(e,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),e}if((0,A.A)(s)){const e=function(e,t,n,i){if(!p.A.equalsEpsilon(t,n,g.A.EPSILON8))return i instanceof j.A?Ae(e,t,n,i):Ae(e,t,n,void 0);const o=I.A.unpack(e,0,re);return i instanceof H.A?(i.rectangle=I.A.clone(o,i.rectangle),i.minimumHeight=e[4],i.maximumHeight=e[5],i.computeBoundingVolumes(u.A.WGS84),i):new H.A({rectangle:o,minimumHeight:e[4],maximumHeight:e[5]})}(s,t,this._initialTransform,n);return 1===this._verticalExaggeration||(e instanceof j.A?le(e,this._verticalExaggeration,this._verticalExaggerationRelativeHeight):(e.minimumHeight=q.A.getHeight(e.minimumHeight,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),e.maximumHeight=q.A.getHeight(e.maximumHeight,this._verticalExaggeration,this._verticalExaggerationRelativeHeight),e.computeBoundingVolumes(u.A.WGS84))),e}if((0,A.A)(c)){const e=function(e,t,n){let i=o.A.fromElements(e[0],e[1],e[2],oe),r=e[3];i=p.A.multiplyByPoint(t,i,i);const a=p.A.getScale(t,ne);return r*=o.A.maximumComponent(a),(0,A.A)(n)?(n.update(i,r),n):new z.A(i,r)}(c,t,n);if(1!==this._verticalExaggeration){const t=q.A.getPosition(e.center,u.A.WGS84,this._verticalExaggeration,this._verticalExaggerationRelativeHeight,oe),n=e.radius*this._verticalExaggeration;e.update(t,n)}return e}throw new v.A("boundingVolume must contain a sphere, region, or box")};const ce=o.A.unpackArray(new Array(24).fill(0));function le(e,t,n){const i=e.boundingVolume.computeCorners(ce).map(e=>q.A.getPosition(e,u.A.WGS84,t,n,e)),o=m.A.fromPoints(i,ae);e.update(o.center,o.halfAxes)}W.prototype.updateTransform=function(e,t){e=e??p.A.IDENTITY;const n=p.A.multiplyTransformation(e,this.transform,se),i=!p.A.equals(n,this.computedTransform),o=(0,A.A)(t)&&(this._verticalExaggeration!==t.verticalExaggeration||this._verticalExaggerationRelativeHeight!==t.verticalExaggerationRelativeHeight);if(!i&&!o)return;i&&p.A.clone(n,this.computedTransform),o&&(this._verticalExaggeration=t.verticalExaggeration,this._verticalExaggerationRelativeHeight=t.verticalExaggerationRelativeHeight);const r=this._header,a=this._contentHeader;this._boundingVolume=this.createBoundingVolume(r.boundingVolume,this.computedTransform,this._boundingVolume),(0,A.A)(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(a.boundingVolume,this.computedTransform,this._contentBoundingVolume)),(0,A.A)(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(r.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},W.prototype.updateGeometricErrorScale=function(){const e=p.A.getScale(this.computedTransform,ne),t=o.A.maximumComponent(e);if(this.geometricError=this._geometricError*t,!(0,A.A)(this.parent)){const e=this._tileset;e._scaledGeometricError=e._geometricError*t}},W.prototype.update=function(e,t,n){const{commandList:i}=t,o=i.length;!function(e,t){const n=t.clippingPlanes;let i=0;(0,A.A)(n)&&e._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==e._clippingPlanesState&&(e._clippingPlanesState=i,e.clippingPlanesDirty=!0)}(this,e),function(e,t){const n=t.clippingPolygons;let i=0;(0,A.A)(n)&&e._isClippedByPolygon&&n.enabled&&(i=n.clippingPolygonsState),i!==e._clippingPolygonsState&&(e._clippingPolygonsState=i,e.clippingPolygonsDirty=!0)}(this,e),function(e,t,n,i){if(!i.isRender)return;const o=(0,A.A)(e._contentHeader)&&(0,A.A)(e._contentHeader.boundingVolume),s=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!o;if(s){let t;t=e._finalResolution?e.hasRenderableContent?r.A.WHITE:r.A.DARKGRAY:r.A.YELLOW,(0,A.A)(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(t)),e._debugBoundingVolume.update(n);const i=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");i.color=a.A.toValue(t,i.color)}else!s&&(0,A.A)(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&o?((0,A.A)(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(r.A.BLUE)),e._debugContentBoundingVolume.update(n)):!t.debugShowContentBoundingVolume&&(0,A.A)(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&(0,A.A)(e._viewerRequestVolume)?((0,A.A)(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(r.A.YELLOW)),e._debugViewerRequestVolume.update(n)):!t.debugShowViewerRequestVolume&&(0,A.A)(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());const c=t.debugColorizeTiles&&!e._debugColorizeTiles||(0,A.A)(t._heatmap.tilePropertyName),l=!t.debugColorizeTiles&&e._debugColorizeTiles;c?(t._heatmap.colorize(e,n),e._debugColorizeTiles=!0,e.color=e._debugColor):l&&(e._debugColorizeTiles=!1,e.color=r.A.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),l&&t.makeStyleDirty()}(this,e,t,n),function(e,t,n){const i=e._expiredContent;if(!e.hasMultipleContents&&(0,A.A)(i)){if(!e.contentReady){try{i.update(t,n)}catch(e){}return}e._expiredContent.destroy(),e._expiredContent=void 0}if((0,A.A)(e.content))try{e.content.update(t,n)}catch(t){throw e._contentState=S.A.FAILED,t}}(this,e,t);const s=i.length;this._commandsLength=s-o;for(let e=o;e<s;++e){const t=i[e],n=t.pass===Y.A.TRANSLUCENT;t.depthForTranslucentClassification=n}this.clippingPlanesDirty=!1,this.clippingPolygonsDirty=!1};const ue=[];function de(e,t,n){const i=e*Math.pow(10,t);return parseInt(i)*Math.pow(10,n)}function he(e,t,n){return Math.max(g.A.normalize(e,t,n)-g.A.EPSILON7,0)}W.prototype.process=function(e,t){this.contentExpired||this.contentReady||!this._content.ready||(function(e){if(!(0,A.A)(e.expireDuration))return;const t=h.A.now(K);h.A.addSeconds(t,e.expireDuration,t),(0,A.A)(e.expireDate)?h.A.lessThan(e.expireDate,t)&&h.A.clone(t,e.expireDate):e.expireDate=h.A.clone(t)}(this),this._selectedFrame=0,this.lastStyleTime=0,h.A.now(this._loadTimestamp),this._contentState=S.A.READY,this.hasTilesetContent||this.hasImplicitContent||(e._statistics.incrementLoadCounts(this.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(this)));const n=t.commandList;t.commandList=ue;try{this._content.update(e,t)}catch(e){throw this._contentState=S.A.FAILED,e}ue.length=0,t.commandList=n},W.prototype.updatePriority=function(){const e=this.tileset,t=e.preferLeaves,n=e._minimumPriority,i=e._maximumPriority,o=Math.pow(10,8),r=Math.pow(10,9),a=Math.pow(10,10);let s=he(this._depth,n.depth,i.depth);s=t?1-s:s;const A=de(e.isSkippingLevelOfDetail||this.refine!==N.A.REPLACE?he(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError):he(this._priorityHolder._distanceToCamera,n.distance,i.distance),4,0),c=this._priorityProgressiveResolution?0:o,l=de(he(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),4,4),u=this.priorityDeferred?r:0,d=e._pass===Q.A.PRELOAD_FLIGHT?0:a;this._priority=s+A+c+l+u+d},W.prototype.isDestroyed=function(){return!1},W.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),(0,l.A)(this)};const ge=W},184483:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(434067),o=n(369031),r=n(376758),a=n(41476),s=n(430346),A=n(491446),c=n(786101),l=n(677354),u=n(605971),d=n(367817),h=n(123245),g=n(430332),f=n(377496),p=n(760866),m=n(40118),_=n(342875),I=n(653565),E=n(744671),y=n(200646),C=n(716750),b=n(527083),B=n(351554),v=n(938987),w=n(896464),T=n(138151),S=n(702247);const x=I.A.DEFAULT_COLOR_VALUE,D=I.A.DEFAULT_SHOW_VALUE;function Q(e,t,n,i,o){let a;this.featuresLength=t,(0,A.A)(n)&&(a=n.extensions),this._extensions=a??{};const s=function(e){const t={};if(!(0,A.A)(e))return t;for(const n in e)e.hasOwnProperty(n)&&"HIERARCHY"!==n&&"extensions"!==n&&"extras"!==n&&(t[n]=(0,r.A)(e[n],!0));return t}(n);this._properties=s,this._batchTableHierarchy=function(e,t,n){if(!(0,A.A)(t))return;let i=e._extensions["3DTILES_batch_table_hierarchy"];const o=t.HIERARCHY;return(0,A.A)(o)&&(Q._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),(0,A.A)(i)?new E.A({extension:i,binaryBody:n}):void 0}(this,n,i);const c=N(t,s,i);this._binaryPropertiesByteLength=function(e){if(!(0,A.A)(e))return 0;let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}(c),this._batchTableBinaryProperties=c,this._content=e,this._batchTexture=new I.A({featuresLength:t,colorChangedCallback:o,owner:e,statistics:e.tileset.statistics})}function N(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const r=t[o],a=r.byteOffset;if((0,A.A)(a)){const t=r.componentType,s=r.type;if(!(0,A.A)(t))throw new h.A("componentType is required.");if(!(0,A.A)(s))throw new h.A("type is required.");if(!(0,A.A)(n))throw new h.A(`Property ${o} requires a batch table binary.`);const c=(0,B.A)(r),l=c.componentsPerAttribute,u=c.classType,d=c.createArrayBufferView(n.buffer,n.byteOffset+a,e);(0,A.A)(i)||(i={}),i[o]={typedArray:d,componentCount:l,type:u}}}return i}Q._deprecationWarning=c.A,Object.defineProperties(Q.prototype,{batchTableByteLength:{get:function(){let e=this._binaryPropertiesByteLength;return(0,A.A)(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e+=this._batchTexture.byteLength,e}}}),Q.getBinaryProperties=function(e,t,n){return N(e,t,n)},Q.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},Q.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},Q.prototype.getShow=function(e){return this._batchTexture.getShow(e)},Q.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},Q.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},Q.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},Q.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};const R=new a.A;function M(e,t){if(!(0,A.A)(e)||e<0||e>=t)throw new u.A(`batchId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}function L(e,t){return e=_.A.replaceMain(e,"tile_main"),t?`${e}uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    out_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n`:`${e}void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n`}function P(e,t,n){if(!(0,A.A)(t))return L(e,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${t};`);const o=e.match(i);if(!(0,A.A)(o))return L(e,n);const r=o[0],a=o[2];let s;if(e=(e=_.A.replaceMain(e,"tile_main")).replace(r,""),"vec3"===a||"vec4"===a){const n="vec3"===a?`vec4(${t}, 1.0)`:t,o="vec3"===a?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(t,"g"),e=e.replace(i,o),s=`    vec4 source = ${n}; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n`}else"sampler2D"===a&&(e=function(e,t){const n=`texture(${t}`;let i,o=0,r=e.indexOf(n,o);for(;r>-1;){let t=0;for(let n=r;n<e.length;++n){const o=e.charAt(n);if("("===o)++t;else if(")"===o&&(--t,0===t)){i=n+1;break}}const a=`tile_diffuse_final(${e.slice(r,i)}, tile_diffuse)`;e=e.slice(0,r)+a+e.slice(i),o=r+a.length,r=e.indexOf(n,o)}return e}(e,t),s="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return e=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \nbool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n${r}\n${e}\nvoid tile_color(vec4 tile_featureColor) \n{ \n${s}`,n&&(e+="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    out_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    out_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n"),e+"} \n"}Q.prototype.applyStyle=function(e){if(!(0,A.A)(e))return this.setAllColor(x),void this.setAllShow(D);const t=this._content,n=this.featuresLength;for(let i=0;i<n;++i){const n=t.getFeature(i),o=(0,A.A)(e.color)?e.color.evaluateColor(n,R)??x:x,r=(0,A.A)(e.show)?e.show.evaluate(n)??D:D;this.setColor(i,o),this.setShow(i,r)}},Q.prototype.isClass=function(e,t){M(e,this.featuresLength),o.A.typeOf.string("className",t);const n=this._batchTableHierarchy;return!!(0,A.A)(n)&&n.isClass(e,t)},Q.prototype.isExactClass=function(e,t){return o.A.typeOf.string("className",t),this.getExactClassName(e)===t},Q.prototype.getExactClassName=function(e){M(e,this.featuresLength);const t=this._batchTableHierarchy;if((0,A.A)(t))return t.getClassName(e)},Q.prototype.hasProperty=function(e,t){return M(e,this.featuresLength),o.A.typeOf.string("name",t),(0,A.A)(this._properties[t])||(0,A.A)(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)},Q.prototype.hasPropertyBySemantic=function(){return!1},Q.prototype.getPropertyIds=function(e,t){M(e,this.featuresLength),(t=(0,A.A)(t)?t:[]).length=0;const n=Object.keys(this._properties);if((0,S.A)(t,n),(0,A.A)(this._batchTableHierarchy)){const i=this._batchTableHierarchy.getPropertyIds(e,n);(0,S.A)(t,i)}return t},Q.prototype.getPropertyBySemantic=function(e,t){},Q.prototype.getProperty=function(e,t){if(M(e,this.featuresLength),o.A.typeOf.string("name",t),(0,A.A)(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[t];if((0,A.A)(n))return function(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}(n,e)}const n=this._properties[t];if((0,A.A)(n))return(0,r.A)(n[e],!0);if((0,A.A)(this._batchTableHierarchy)){const n=this._batchTableHierarchy.getProperty(e,t);if((0,A.A)(n))return n}},Q.prototype.setProperty=function(e,t,n){const i=this.featuresLength;if(M(e,i),o.A.typeOf.string("name",t),(0,A.A)(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[t];if((0,A.A)(i))return void function(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}(i,e,n)}if((0,A.A)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))return;let a=this._properties[t];(0,A.A)(a)||(this._properties[t]=new Array(i),a=this._properties[t]),a[e]=(0,r.A)(n,!0)},Q.prototype.getVertexShaderCallback=function(e,t,n){if(0===this.featuresLength)return;const i=this;return function(o){const r=P(o,n,!1);let a;return g.A.maximumVertexTextureImageUnits>0?(a="",e&&(a+="uniform bool tile_translucentCommand; \n"),a+=`uniform sampler2D tile_batchTexture; \nout vec4 tile_featureColor; \nout vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${t}); \n    vec4 featureProperties = texture(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n`,e&&(a+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),a+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):a=`out vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${t}); \n}`,`${r}\n${s=i,1===s._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}${a}`;var s}},Q.prototype.getFragmentShaderCallback=function(e,t,n){if(0!==this.featuresLength)return function(i){return i=P(i,t,!0),g.A.maximumVertexTextureImageUnits>0?(i+="uniform sampler2D tile_pickTexture; \nin vec2 tile_featureSt; \nin vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",n&&(i+="    out_FragColor.rgb *= out_FragColor.a; \n"),i+="}"):(e&&(i+="uniform bool tile_translucentCommand; \n"),i+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nin vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",e&&(i+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),i+="    tile_color(featureProperties); \n",n&&(i+="    out_FragColor.rgb *= out_FragColor.a; \n"),i+="} \n"),i}},Q.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const e=this;return function(t){const n={tile_batchTexture:function(){return e._batchTexture.batchTexture??e._batchTexture.defaultTexture},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return function(e){const t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===C.A.HIGHLIGHT)return 0;if(n===C.A.REPLACE)return 1;if(n===C.A.MIX)return d.A.clamp(i,d.A.EPSILON4,1);throw new u.A(`Invalid color blend mode "${n}".`)}(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}};return(0,s.A)(t,n)}},Q.prototype.getPickId=function(){return"texture(tile_pickTexture, tile_featureSt)"};function O(e){const t=f.A.shallowClone(e),n=t.pass===p.A.TRANSLUCENT;return t.uniformMap=(0,A.A)(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function F(e){const t=f.A.shallowClone(e);return t.pass=p.A.TRANSLUCENT,t.renderState=function(e){const t=(0,r.A)(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=y.A.ALPHA_BLEND,t.stencilTest=v.A.setCesium3DTileBit(),t.stencilMask=v.A.CESIUM_3D_TILE_MASK,m.A.fromCache(t)}(e.renderState),t}function U(e){const t=f.A.shallowClone(e);return t.renderState=function(e){const t=(0,r.A)(e,!0);return t.stencilTest=v.A.setCesium3DTileBit(),t.stencilMask=v.A.CESIUM_3D_TILE_MASK,m.A.fromCache(t)}(e.renderState),t}function k(e,t){const n=f.A.shallowClone(t),o=(0,r.A)(n.renderState,!0);o.cull.enabled=!0,o.cull.face=b.A.FRONT,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o.polygonOffset={enabled:!0,factor:5,units:5},o.stencilTest=v.A.setCesium3DTileBit(),o.stencilMask=v.A.CESIUM_3D_TILE_MASK,n.renderState=m.A.fromCache(o),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=(0,r.A)(t.uniformMap);const a=new i.A(5,5);return n.uniformMap.u_polygonOffset=function(){return a},n.shaderProgram=function(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!(0,A.A)(n)){const i=t.fragmentShaderSource.clone();i.defines=(0,A.A)(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),n=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}(e,t.shaderProgram),n}function G(e,t){const n=f.A.shallowClone(e),i=(0,r.A)(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=v.A.SKIP_LOD_MASK,i.stencilTest.reference=v.A.CESIUM_3D_TILE_MASK|t<<v.A.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=w.A.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=T.A.REPLACE,i.stencilTest.backFunction=w.A.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=T.A.REPLACE,i.stencilMask=v.A.CESIUM_3D_TILE_MASK|v.A.SKIP_LOD_MASK,n.renderState=m.A.fromCache(i),n}function H(e){return(e.renderState.stencilTest.reference&v.A.SKIP_LOD_MASK)>>>v.A.SKIP_LOD_BIT_SHIFT}Q.prototype.addDerivedCommands=function(e,t){const n=e.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,a=o.tileset,s=a.isSkippingLevelOfDetail&&a.hasMixedContent&&e.context.stencilBuffer,c=function(e){const t=e._batchTexture.translucentFeaturesLength;return 0===t?0:t===e.featuresLength?1:2}(this);for(let l=t;l<i;++l){const t=n[l];if(t.pass===p.A.COMPUTE)continue;let i=t.derivedCommands.tileset;(0,A.A)(i)&&!t.dirty||(i={},t.derivedCommands.tileset=i,i.originalCommand=O(t),t.dirty=!1);const u=i.originalCommand;0!==c&&t.pass!==p.A.TRANSLUCENT&&((0,A.A)(i.translucent)||(i.translucent=F(u))),1!==c&&t.pass!==p.A.TRANSLUCENT&&((0,A.A)(i.opaque)||(i.opaque=U(u)),s&&(r||((0,A.A)(i.zback)||(i.zback=k(e.context,u)),a._backfaceCommands.push(i.zback)),(0,A.A)(i.stencil)&&o._selectionDepth===H(i.stencil)||(t.renderState.depthMask?i.stencil=G(u,o._selectionDepth):i.stencil=i.opaque)));const d=s?i.stencil:i.opaque,h=i.translucent;t.pass!==p.A.TRANSLUCENT?(0===c&&(n[l]=d),1===c&&(n[l]=h),2===c&&(n[l]=d,n.push(h))):n[l]=u}},Q.prototype.update=function(e,t){this._batchTexture.update(e,t)},Q.prototype.isDestroyed=function(){return!1},Q.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,l.A)(this)};const V=Q},716750:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({HIGHLIGHT:0,REPLACE:1,MIX:2})},891846:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(583511),o=n(823064),r=n(961965),a=n(224975),s=n(323314),A=n(868897),c=n(271845),l=n(123245);const u={b3dm:function(e,t,n,i,o){return a.A.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return a.A.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return a.A.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,o,r){return i.A.fromTileType(e,t,n,o,r,u)},externalTileset:function(e,t,n,i){return s.A.fromJson(e,t,n,i)},geom:function(e,t,n,i,r){return new o.A(e,t,n,i,r)},vctr:function(e,t,n,i,o){return new A.A(e,t,n,i,o)},subt:function(e,t,n,i,o){return r.A.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return r.A.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new l.A("Invalid glb content");const r=new DataView(i,o).getUint32(8,!0),s=new Uint8Array(i,o,r);return c.A.tilesetRequiresGaussianSplattingExt(e)?c.A.fromGltf(e,t,n,s):a.A.fromGltf(e,t,n,s)},gltf:function(e,t,n,i){return c.A.tilesetRequiresGaussianSplattingExt(e)?c.A.fromGltf(e,t,n,i):a.A.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return a.A.fromGeoJson(e,t,n,i)}},d=u},621065:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5})},223702:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",VOXEL_BINARY:"voxl",VOXEL_JSON:"voxelJson",isBinaryFormat:function(e){switch(e){case i.BATCHED_3D_MODEL:case i.INSTANCED_3D_MODEL:case i.COMPOSITE:case i.POINT_CLOUD:case i.VECTOR:case i.GEOMETRY:case i.IMPLICIT_SUBTREE:case i.VOXEL_BINARY:case i.GLTF_BINARY:return!0;default:return!1}}},o=Object.freeze(i)},622569:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(41476),o=n(491446);function r(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return(0,o.A)(this._color)||(this._color=new i.A),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if((0,o.A)(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),r.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},r.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},r.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},r.getPropertyInherited=function(e,t,n){const i=e.batchTable;if((0,o.A)(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}const r=e.metadata;if((0,o.A)(r)){if(r.hasPropertyBySemantic(n))return r.getPropertyBySemantic(n);if(r.hasProperty(n))return r.getProperty(n)}const a=e.tile,s=a.metadata;if((0,o.A)(s)){if(s.hasPropertyBySemantic(n))return s.getPropertyBySemantic(n);if(s.hasProperty(n))return s.getProperty(n)}let A;if((0,o.A)(a.implicitSubtree)&&(A=a.implicitSubtree.metadata),(0,o.A)(A)){if(A.hasPropertyBySemantic(n))return A.getPropertyBySemantic(n);if(A.hasProperty(n))return A.getProperty(n)}const c=(0,o.A)(e.group)?e.group.metadata:void 0;if((0,o.A)(c)){if(c.hasPropertyBySemantic(n))return c.getPropertyBySemantic(n);if(c.hasProperty(n))return c.getProperty(n)}const l=e.tileset.metadata;if((0,o.A)(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}},r.prototype.getPropertyInherited=function(e){return r.getPropertyInherited(this._content,this._batchId,e)},r.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},r.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const a=r},468741:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(571804),o=n(491446);function r(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function a(e,t,n,r,a,s){const A=e._cachedTypedArrays;let c=A[t];return(0,o.A)(c)||(c=i.A.createArrayBufferView(n,e.buffer.buffer,e.buffer.byteOffset+s,a*r),A[t]=c),c}r.prototype.getGlobalProperty=function(e,t,n){const r=this.json[e];if((0,o.A)(r))return(0,o.A)(r.byteOffset)?a(this,e,t=t??i.A.UNSIGNED_INT,n=n??1,1,r.byteOffset):r},r.prototype.hasProperty=function(e){return(0,o.A)(this.json[e])},r.prototype.getPropertyArray=function(e,t,n){const r=this.json[e];if((0,o.A)(r))return(0,o.A)(r.byteOffset)?((0,o.A)(r.componentType)&&(t=i.A.fromName(r.componentType)),a(this,e,t,n,this.featuresLength,r.byteOffset)):function(e,t,n,r){const a=e._cachedTypedArrays;let s=a[t];return(0,o.A)(s)||(s=i.A.createTypedArray(n,r),a[t]=s),s}(this,e,t,r)},r.prototype.getProperty=function(e,t,n,i,r){const a=this.json[e];if(!(0,o.A)(a))return;const s=this.getPropertyArray(e,t,n);if(1===n)return s[i];for(let e=0;e<n;++e)r[e]=s[n*i+e];return r};const s=r},45679:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0})},649413:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(267980),o=n(369031),r=n(45679),a=n(413690),s=n(11745);const A={},c=new i.A;A.checkChildrenWithinParent=function(e){o.A.typeOf.object("tile",e);const t=e.children,n=t.length,A=e.boundingVolume;if(A instanceof s.A||A instanceof a.A){const o=A._orientedBoundingBox;e._optimChildrenWithinParent=r.A.USE_OPTIMIZATION;for(let A=0;A<n;++A){const n=t[A].boundingVolume;if(!(n instanceof s.A||n instanceof a.A)){e._optimChildrenWithinParent=r.A.SKIP_OPTIMIZATION;break}const l=n._orientedBoundingBox,u=i.A.subtract(l.center,o.center,c),d=i.A.magnitude(u);if(i.A.divideByScalar(u,d,u),Math.abs(o.halfAxes[0]*u.x)+Math.abs(o.halfAxes[1]*u.y)+Math.abs(o.halfAxes[2]*u.z)+Math.abs(o.halfAxes[3]*u.x)+Math.abs(o.halfAxes[4]*u.y)+Math.abs(o.halfAxes[5]*u.z)+Math.abs(o.halfAxes[6]*u.x)+Math.abs(o.halfAxes[7]*u.y)+Math.abs(o.halfAxes[8]*u.z)<=Math.abs(l.halfAxes[0]*u.x)+Math.abs(l.halfAxes[1]*u.y)+Math.abs(l.halfAxes[2]*u.z)+Math.abs(l.halfAxes[3]*u.x)+Math.abs(l.halfAxes[4]*u.y)+Math.abs(l.halfAxes[5]*u.z)+Math.abs(l.halfAxes[6]*u.x)+Math.abs(l.halfAxes[7]*u.y)+Math.abs(l.halfAxes[8]*u.z)+d){e._optimChildrenWithinParent=r.A.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===r.A.USE_OPTIMIZATION};const l=A},581010:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},o=new Array(i.NUMBER_OF_PASSES);o[i.RENDER]=Object.freeze({pass:i.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1}),o[i.PICK]=Object.freeze({pass:i.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1}),o[i.SHADOW]=Object.freeze({pass:i.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1}),o[i.PRELOAD]=Object.freeze({pass:i.PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.PRELOAD_FLIGHT]=Object.freeze({pass:i.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:i.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.MOST_DETAILED_PRELOAD]=Object.freeze({pass:i.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0}),o[i.MOST_DETAILED_PICK]=Object.freeze({pass:i.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1}),i.getPassOptions=function(e){return o[e]};const r=Object.freeze(i)},953677:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(369031);const o=function(e){i.A.typeOf.object("options",e),i.A.typeOf.number("options.pass",e.pass),this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}},294023:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(336946),o=n(41476),r=n(491446),a=n(622569),s=n(883734);function A(e,t,n,i,o){this._content=e,this._billboard=n,this._label=i,this._polyline=o,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),l(this)}const c=new i.A;function l(e){const t=e._billboard;if((0,r.A)(e._billboardImage)&&e._billboardImage!==t.image)return void(t.image=e._billboardImage);if((0,r.A)(e._billboardImage))return;const n=e._color??A.defaultColor,i=e._pointOutlineColor??A.defaultPointOutlineColor,a=e._pointOutlineWidth??A.defaultPointOutlineWidth,c=e._pointSize??A.defaultPointSize,l=e._billboardColor,u=e._billboardOutlineColor,d=e._billboardOutlineWidth,h=e._billboardSize;if(o.A.equals(n,l)&&o.A.equals(i,u)&&a===d&&c===h)return;e._billboardColor=o.A.clone(n,e._billboardColor),e._billboardOutlineColor=o.A.clone(i,e._billboardOutlineColor),e._billboardOutlineWidth=a,e._billboardSize=c;const g=n.alpha,f=n.toCssColorString(),p=i.toCssColorString(),m=JSON.stringify([f,c,p,a]);t.setImage(m,(0,s.A)(g,f,p,a,c))}Object.defineProperties(A.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=o.A.clone(e,this._color),l(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,l(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=o.A.clone(e,this._pointOutlineColor),l(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,l(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){(0,r.A)(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){const t=this._heightOffset??0,n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,c);i.height=i.height-t+e;const o=n.cartographicToCartesian(i);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=o.A.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){const t=this._billboardImage!==e;this._billboardImage=e,t&&l(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}}),A.defaultColor=o.A.WHITE,A.defaultPointOutlineColor=o.A.BLACK,A.defaultPointOutlineWidth=0,A.defaultPointSize=8,A.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},A.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},A.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},A.prototype.getPropertyInherited=function(e){return a.A.getPropertyInherited(this._content,this._batchId,e)},A.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},A.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},A.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},A.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const u=A},661314:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ADD:0,REPLACE:1})},816968:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446);function o(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(o.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}}),o.prototype.makeDirty=function(){this._styleDirty=!0},o.prototype.resetDirty=function(){this._styleDirty=!1},o.prototype.applyStyle=function(e){if(!(0,i.A)(e.root))return;if((0,i.A)(this._style)&&!this._style._ready)return;const t=this._styleDirty;t&&++this._lastStyleTime;const n=this._lastStyleTime,o=e._statistics,r=t?e._selectedTiles:e._selectedTilesToStyle,a=r.length;for(let e=0;e<a;++e){const t=r[e];if(t.lastStyleTime!==n){const e=t.content;t.lastStyleTime=n,e.applyStyle(this._style),o.numberOfFeaturesStyled+=e.featuresLength,++o.numberOfTilesStyled}}};const r=o},855927:(e,t,n)=>{"use strict";n.d(t,{A:()=>je});var i=n(564886),o=n(660662),r=n(434067),a=n(267980),s=n(336946),A=n(369031),c=n(376758),l=n(41476),u=n(672743),d=n(915325),h=n(491446),g=n(786101),f=n(677354),p=n(610750),m=n(955943),_=n(208198),I=n(33914),E=n(150429),y=n(954865),C=n(591978),b=n(981757),B=n(367817),v=n(331185),w=n(584164),T=n(744603),S=n(123245),x=n(543622),D=n(769493),Q=n(760866),N=n(40118),R=n(320475),M=n(474751),L=n(716750),P=n(621065),O=n(979830),F=n(649413),U=n(581010),k=n(661314),G=n(648117),H=n(529755),V=n(485760),z=n(816968),j=n(711284),Y=n(348460),q=n(800859),W=n(834957),J=n(410974),K=n(465674),X=n(983884),Z=n(534135),$=n(929771),ee=n(872182),te=n(62467),ne=n(988609),ie=n(913419),oe=n(938987),re=n(413690),ae=n(315747),se=n(11745),Ae=n(741740),ce=n(329554),le=n(724812),ue=n(766067),de=n(615557),he=n(869327);function ge(e){e=e??d.A.EMPTY_OBJECT,this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._scaledGeometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new G.A,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=e.showCreditsOnScreen??!1,this._cullWithChildrenBounds=e.cullWithChildrenBounds??!0,this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new b.A,this._maximumScreenSpaceError=e.maximumScreenSpaceError??16,this._memoryAdjustedScreenSpaceError=this._maximumScreenSpaceError,this._cacheBytes=e.cacheBytes??536870912,A.A.typeOf.number.greaterThanOrEquals("cacheBytes",this._cacheBytes,0);const t=e.maximumCacheOverflowBytes??536870912;A.A.typeOf.number.greaterThanOrEquals("maximumCacheOverflowBytes",t,0),this._maximumCacheOverflowBytes=t,this._styleEngine=new z.A,this._styleApplied=!1,this._modelMatrix=(0,h.A)(e.modelMatrix)?w.A.clone(e.modelMatrix):w.A.clone(w.A.IDENTITY),this._addHeightCallbacks=[],this._statistics=new V.A,this._statisticsLast=new V.A,this._statisticsPerPass=new Array(U.A.NUMBER_OF_PASSES);for(let e=0;e<U.A.NUMBER_OF_PASSES;++e)this._statisticsPerPass[e]=new V.A;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new H.A(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=e.cullRequestsWhileMoving??!0,this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=e.cullRequestsWhileMovingMultiplier??60,this.progressiveResolutionHeightFraction=B.A.clamp(e.progressiveResolutionHeightFraction??.3,0,.5),this.preferLeaves=e.preferLeaves??!1,this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._heightReference=e.heightReference,this._scene=e.scene,this._ellipsoid=e.ellipsoid??p.A.WGS84,this._initialClippingPlanesOriginMatrix=w.A.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=e.vectorClassificationOnly??!1,this._vectorKeepDecodedPositions=e.vectorKeepDecodedPositions??!1,this._imageryLayers=new he.A(this),this._imageryLayersModificationCounter=0,this._imageryLayersListener=()=>{this._imageryLayersModificationCounter++},this.imageryLayers.layerAdded.addEventListener(this._imageryLayersListener),this.imageryLayers.layerRemoved.addEventListener(this._imageryLayersListener),this.imageryLayers.layerMoved.addEventListener(this._imageryLayersListener),this.imageryLayers.layerShownOrHidden.addEventListener(this._imageryLayersListener),this._asynchronouslyLoadImagery=e.asynchronouslyLoadImagery??!1,this.preloadWhenHidden=e.preloadWhenHidden??!1,this.preloadFlightDestinations=e.preloadFlightDestinations??!0,this._pass=void 0,this.dynamicScreenSpaceError=e.dynamicScreenSpaceError??!0,this.foveatedScreenSpaceError=e.foveatedScreenSpaceError??!0,this._foveatedConeSize=e.foveatedConeSize??.1,this._foveatedMinimumScreenSpaceErrorRelaxation=e.foveatedMinimumScreenSpaceErrorRelaxation??0,this.foveatedInterpolationCallback=e.foveatedInterpolationCallback??B.A.lerp,this.foveatedTimeDelay=e.foveatedTimeDelay??.2,this.dynamicScreenSpaceErrorDensity=e.dynamicScreenSpaceErrorDensity??2e-4,this.dynamicScreenSpaceErrorFactor=e.dynamicScreenSpaceErrorFactor??24,this.dynamicScreenSpaceErrorHeightFalloff=e.dynamicScreenSpaceErrorHeightFalloff??.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=e.shadows??ne.A.ENABLED,this.show=e.show??!0,this.colorBlendMode=L.A.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new $.A(e.pointCloudShading),this._pointCloudEyeDomeLighting=new Z.A,this.loadProgress=new m.A,this.allTilesLoaded=new m.A,this.initialTilesLoaded=new m.A,this.tileLoad=new m.A,this.tileUnload=new m.A,this.tileFailed=new m.A,this.tileVisible=new m.A,this.skipLevelOfDetail=e.skipLevelOfDetail??!1,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=e.baseScreenSpaceError??1024,this.skipScreenSpaceErrorFactor=e.skipScreenSpaceErrorFactor??16,this.skipLevels=e.skipLevels??1,this.immediatelyLoadDesiredLevelOfDetail=e.immediatelyLoadDesiredLevelOfDetail??!1,this.loadSiblings=e.loadSiblings??!1,this._clippingPlanes=void 0,(0,h.A)(e.clippingPlanes)&&j.A.setOwner(e.clippingPlanes,this,"_clippingPlanes"),this._clippingPolygons=void 0,(0,h.A)(e.clippingPolygons)&&Y.A.setOwner(e.clippingPolygons,this,"_clippingPolygons"),(0,h.A)(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new _.A,this._shouldDestroyImageBasedLighting=!0),this._environmentMapManager=new de.A(e.environmentMapOptions),this.lightColor=e.lightColor,this.backFaceCulling=e.backFaceCulling??!0,this._enableShowOutline=e.enableShowOutline??!0,this.showOutline=e.showOutline??!0,this.outlineColor=e.outlineColor??l.A.BLACK,this.splitDirection=e.splitDirection??ie.A.NONE,this.enableCollision=e.enableCollision??!1,this._projectTo2D=e.projectTo2D??!1,this._enablePick=e.enablePick??!1,this.debugFreezeFrame=e.debugFreezeFrame??!1,this.debugColorizeTiles=e.debugColorizeTiles??!1,this._enableDebugWireframe=e.enableDebugWireframe??!1,this.debugWireframe=e.debugWireframe??!1,!0===this.debugWireframe&&!1===this._enableDebugWireframe&&(0,X.A)("tileset-debug-wireframe-ignored","enableDebugWireframe must be set to true in the Cesium3DTileset constructor, otherwise debugWireframe will be ignored."),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.debugShowContentBoundingVolume=e.debugShowContentBoundingVolume??!1,this.debugShowViewerRequestVolume=e.debugShowViewerRequestVolume??!1,this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=e.debugShowGeometricError??!1,this.debugShowRenderingStatistics=e.debugShowRenderingStatistics??!1,this.debugShowMemoryUsage=e.debugShowMemoryUsage??!1,this.debugShowUrl=e.debugShowUrl??!1,this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader;let n=e.featureIdLabel??"featureId_0";"number"==typeof n&&(n=`featureId_${n}`),this._featureIdLabel=n;let i=e.instanceFeatureIdLabel??"instanceFeatureId_0";"number"==typeof i&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i}function fe(e,t,n,i){if(!(0,h.A)(n.implicitTiling)&&!(0,q.A)(n,"3DTILES_implicit_tiling"))return new M.A(e,t,n,i);const o=e.schema,r=new W.A(t,n,o),a=new J.A({subdivisionScheme:r.subdivisionScheme,subtreeLevels:r.subtreeLevels,level:0,x:0,y:0,z:0}),s=r.subtreeUriTemplate.getDerivedResource({templateValues:a.getTemplateValues()}).url,A=(0,c.A)(n,!0);A.contents=[{uri:s}],delete A.content,delete A.extensions;const l=new M.A(e,t,A,i);return l.implicitTileset=r,l.implicitCoordinates=a,l}Object.defineProperties(ge.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){j.A.setOwner(e,this,"_clippingPlanes")}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){Y.A.setOwner(e,this,"_clippingPolygons")}},imageryLayers:{get:function(){return this._imageryLayers}},imageryLayersModificationCounter:{get:function(){return this._imageryLayersModificationCounter}},asynchronouslyLoadImagery:{get:function(){return this._asynchronouslyLoadImagery}},properties:{get:function(){return this._properties}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return(0,g.A)("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},hasMixedContent:{get:function(){return this._hasMixedContent},set:function(e){A.A.typeOf.bool("value",e),this._hasMixedContent=e}},isSkippingLevelOfDetail:{get:function(){return this.skipLevelOfDetail&&!(0,h.A)(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if((0,h.A)(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if((0,h.A)(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){A.A.typeOf.number.greaterThanOrEquals("maximumScreenSpaceError",e,0),this._maximumScreenSpaceError=e,this._memoryAdjustedScreenSpaceError=e}},cacheBytes:{get:function(){return this._cacheBytes},set:function(e){A.A.typeOf.number.greaterThanOrEquals("value",e,0),this._cacheBytes=e}},maximumCacheOverflowBytes:{get:function(){return this._maximumCacheOverflowBytes},set:function(e){A.A.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumCacheOverflowBytes=e}},memoryAdjustedScreenSpaceError:{get:function(){return this._memoryAdjustedScreenSpaceError}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){A.A.defined("pointCloudShading",e),this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=w.A.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return(0,h.A)(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(w.A.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):w.A.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},heightReference:{get:function(){return this._heightReference}},scene:{get:function(){return this._scene}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){A.A.typeOf.number.greaterThanOrEquals("foveatedConeSize",e,0),A.A.typeOf.number.lessThanOrEquals("foveatedConeSize",e,1),this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){A.A.typeOf.number.greaterThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,0),A.A.typeOf.number.lessThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,this.maximumScreenSpaceError),this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){A.A.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},environmentMapManager:{get:function(){return this._environmentMapManager}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e,Ue(this)}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),A.A.typeOf.string("value",e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),A.A.typeOf.string("value",e),this._instanceFeatureIdLabel=e}}}),ge.fromIonAssetId=async function(e,t){A.A.defined("assetId",e);const n=await y.A.fromAssetId(e);return ge.fromUrl(n,t)},ge.fromUrl=async function(e,t){A.A.defined("url",e),t=t??d.A.EMPTY_OBJECT;const n=T.A.createIfNeeded(e);let o;"json"===n.extension?o=n.getBaseUri(!0):n.isDataUri&&(o="");const r=await ge.loadJson(n),a=await async function(e,t){const n=(0,q.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let i;if((0,h.A)(n.schemaUri))e=e.getDerivedResource({url:n.schemaUri}),i=ee.A.getSchemaLoader({resource:e});else{if(!(0,h.A)(n.schema))return;i=ee.A.getSchemaLoader({schema:n.schema})}await i.load();const o=new O.A({schema:i.schema,metadataJson:n});return ee.A.unload(i),o}(n,r),s=new ge(t);s._resource=n,s._url=n.url,s._basePath=o,s._metadataExtension=a,s._geometricError=r.geometricError,s._scaledGeometricError=r.geometricError;const c=r.asset;s._asset=c,s._extras=r.extras,Ue(s);const l=(0,h.A)(r.asset.gltfUpAxis)?R.A.fromName(r.asset.gltfUpAxis):R.A.Y,u=t.modelUpAxis??l,g=t.modelForwardAxis??R.A.X;s._properties=r.properties,s._extensionsUsed=r.extensionsUsed,s._extensions=r.extensions,s._modelUpAxis=u,s._modelForwardAxis=g,s._root=s.loadTileset(n,r);const f=s._root.createBoundingVolume(r.root.boundingVolume,w.A.IDENTITY).boundingSphere.center,p=s._ellipsoid.cartesianToCartographic(f);return(0,h.A)(p)&&p.height>i.A._defaultMinTerrainHeight&&(s._initialClippingPlanesOriginMatrix=x.A.eastNorthUpToFixedFrame(f)),s._clippingPlanesOriginMatrix=w.A.clone(s._initialClippingPlanesOriginMatrix),s},ge.loadJson=function(e){return T.A.createIfNeeded(e).fetchJson()},ge.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},ge.prototype.loadTileset=function(e,t,n){const i=t.asset;if(!(0,h.A)(i))throw new S.A("Tileset must have an asset property.");if("0.0"!==i.version&&"1.0"!==i.version&&"1.1"!==i.version)throw new S.A("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");(0,h.A)(t.extensionsRequired)&&ge.checkSupportedExtensions(t.extensionsRequired);const o=this._statistics,r=i.tilesetVersion;(0,h.A)(r)&&(this._basePath+=`?v=${r}`,(e=e.clone()).setQueryParameters({v:r}));const a=fe(this,e,t.root,n);(0,h.A)(n)&&(n.children.push(a),a._depth=n._depth+1);const s=[];for(s.push(a);s.length>0;){const t=s.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===k.A.ADD;const n=t._header.children;if((0,h.A)(n))for(let i=0;i<n.length;++i){const o=fe(this,e,n[i],t);t.children.push(o),o._depth=t._depth+1,s.push(o)}this._cullWithChildrenBounds&&F.A.checkChildrenWithinParent(t)}return a};const pe=new a.A,me=new s.A,_e=new w.A,Ie=new a.A,Ee=new a.A,ye=new a.A,Ce=new a.A;function be(e,t){if(t.hasEmptyContent)return;const{statistics:n}=e,i=t.contentExpired,o=t.requestContent();(0,h.A)(o)&&(o.then(i=>{!(0,h.A)(i)||t.isDestroyed()||e.isDestroyed()||(e._processingQueue.push(t),++n.numberOfTilesProcessing)}).catch(n=>{ve(n,e,t)}),i&&(t.hasTilesetContent||t.hasImplicitContent?function(e,t){const n=t,i=Le;for(i.push(t);i.length>0;){const o=(t=i.pop()).children;for(let e=0;e<o.length;++e)i.push(o[e]);t!==n&&(Oe(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t))}function Be(e,t){return e._priority-t._priority}function ve(e,t,n){if(t.isDestroyed())return;let i;n.isDestroyed()||(i=n._contentResource.url);const o=(0,h.A)(e.message)?e.message:e.toString();t.tileFailed.numberOfListeners>0?t.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`),console.log(e.stack))}ge.prototype.postPassesUpdate=function(e){(0,h.A)(this._root)&&(function(e,t){const n=e._requestedTilesInFlight;let i=0;for(let e=0;e<n.length;++e){const o=n[e],r=t.frameNumber-o._touchedFrame>=1;o._contentState===P.A.LOADING?r?(o.cancelRequests(),++i):i>0&&(n[e-i]=o):++i}n.length-=i}(this,e),function(e,t){const n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,a=i.numberOfPendingRequests,s=i.numberOfTilesProcessing;V.A.clone(n,i);const A=o!==a||r!==s;A&&t.afterRender.push(function(){return e.loadProgress.raiseEvent(o,r),!0}),e._tilesLoaded=0===n.numberOfPendingRequests&&0===n.numberOfTilesProcessing&&0===n.numberOfAttemptedRequests,A&&e._tilesLoaded&&(t.afterRender.push(function(){return e.allTilesLoaded.raiseEvent(),!0}),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push(function(){return e.initialTilesLoaded.raiseEvent(),!0})))}(this,e),this._cache.unloadTiles(this,Pe),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)},ge.prototype.prePassesUpdate=function(e){if(!(0,h.A)(this._root))return;!function(e,t){!function(e){const t=e._processingQueue;let n=0;for(let e=0;e<t.length;++e){const i=t[e];i.isDestroyed()||i._contentState!==P.A.PROCESSING?++n:n>0&&(t[e-n]=i)}t.length-=n}(e);const n=e._processingQueue,{cacheBytes:i,maximumCacheOverflowBytes:o,statistics:r}=e,a=i+o;let s=!1;for(let i=0;i<n.length;++i){if(e.totalMemoryUsageInBytes>a){s=!0;break}const o=n[i];try{o.process(e,t),o.contentReady&&(--r.numberOfTilesProcessing,e.tileLoad.raiseEvent(o))}catch(t){--r.numberOfTilesProcessing,ve(t,e,o)}}e.totalMemoryUsageInBytes<i?function(e){e._memoryAdjustedScreenSpaceError=Math.max(e.memoryAdjustedScreenSpaceError/1.02,e.maximumScreenSpaceError)}(e):s&&n.length>0&&function(e){(0,X.A)("increase-screenSpaceError","The tiles needed to meet maximumScreenSpaceError would use more memory than allocated for this tileset.\n    The tileset will be rendered with a larger screen space error (see memoryAdjustedScreenSpaceError).\n    Consider using larger values for cacheBytes and maximumCacheOverflowBytes."),e._memoryAdjustedScreenSpaceError*=1.02;const t=e._processingQueue;for(let e=0;e<t.length;++e)t[e].updatePriority();t.sort(Be)}(e)}(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,(0,h.A)(t)&&t.enabled&&t.update(e);const n=this._clippingPolygons;(0,h.A)(n)&&n.enabled&&n.update(e),(0,h.A)(this._loadTimestamp)||(this._loadTimestamp=C.A.clone(e.time)),this._timeSinceLoad=Math.max(1e3*C.A.secondsDifference(e.time,this._loadTimestamp),0),this.dynamicScreenSpaceError&&function(e,t){let n,i,o,r,A;const c=t.camera,l=e._root,u=l.contentBoundingVolume;if(u instanceof re.A)n=a.A.normalize(c.positionWC,pe),i=c.directionWC,o=c.positionCartographic.height,r=u.minimumHeight,A=u.maximumHeight;else{const e=w.A.inverseTransformation(l.computedTransform,_e),d=t.mapProjection.ellipsoid,h=u.boundingVolume,g=w.A.multiplyByPoint(e,h.center,Ie);if(a.A.magnitude(g)>d.minimumRadius){const e=s.A.fromCartesian(g,d,me);n=a.A.normalize(c.positionWC,pe),i=c.directionWC,o=c.positionCartographic.height,r=0,A=2*e.height}else{const t=w.A.multiplyByPoint(e,c.positionWC,Ee);if(n=a.A.UNIT_Z,i=w.A.multiplyByPointAsVector(e,c.directionWC,ye),i=a.A.normalize(i,i),o=t.z,u instanceof se.A){const e=v.A.getColumn(h.halfAxes,2,Ce),t=a.A.magnitude(e);r=g.z-t,A=g.z+t}else if(u instanceof ae.A){const e=h.radius;r=g.z-e,A=g.z+e}}}const d=r+(A-r)*e.dynamicScreenSpaceErrorHeightFalloff,h=A,g=B.A.clamp((o-d)/(h-d),0,1);let f=1-Math.abs(a.A.dot(i,n));f*=1-g,e._dynamicScreenSpaceErrorComputedDensity=e.dynamicScreenSpaceErrorDensity*f}(this,e),e.newFrame&&this._cache.reset()};const we=new s.A,Te=new s.A,Se=new a.A;function xe(e,t,n){if(!e.enableCollision||!e.show)return;const i=e._addHeightCallbacks,o=t.boundingSphere;for(const e of i){if(e.invoked||t._wasSelectedLastFrame)continue;const i=e.ellipsoid,r=s.A.clone(e.positionCartographic,we),A=s.A.fromCartesian(o.center,i,Te);(0,h.A)(A)&&(r.height=A.height);const c=s.A.toCartesian(r,i,Se);a.A.distance(c,o.center)<=o.radius&&(e.invoked=!0,n.afterRender.push(()=>{(0,h.A)(e.callback)&&e.callback(),e.invoked=!1}))}}const De=new a.A,Qe={maximumFractionDigits:3};function Ne(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,Qe):Math.round(t).toLocaleString()}function Re(e){const{halfAxes:t,radius:n,center:i}=e.boundingVolume.boundingVolume;let o=a.A.clone(i,De);if((0,h.A)(t))o.x+=.75*(t[0]+t[3]+t[6]),o.y+=.75*(t[1]+t[4]+t[7]),o.z+=.75*(t[2]+t[5]+t[8]);else if((0,h.A)(n)){let e=a.A.normalize(i,De);e=a.A.multiplyByScalar(e,.75*n,De),o=a.A.add(e,i,De)}return o}function Me(e,t,n){let i="",o=0;if(t.debugShowGeometricError&&(i+=`\nGeometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics&&(i+=`\nCommands: ${e.commandsLength}`,o++,e.content.pointsLength>0&&(i+=`\nPoints: ${e.content.pointsLength}`,o++),e.content.trianglesLength>0&&(i+=`\nTriangles: ${e.content.trianglesLength}`,o++),i+=`\nFeatures: ${e.content.featuresLength}`,o++),t.debugShowMemoryUsage&&(i+=`\nTexture Memory: ${Ne(e.content.texturesByteLength)}`,i+=`\nGeometry Memory: ${Ne(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)i+=`\n- ${t[e]}`;o+=t.length}else i+=`\nUrl: ${e._contentHeader.uri}`,o++;const r={text:i.substring(1),position:n,font:19-o+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}const Le=[];function Pe(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function Oe(e,t){e._cache.unloadTile(e,t,Pe),t.destroy()}function Fe(e,t,n,i){if(t.mode===te.A.MORPHING)return!1;if(!(0,h.A)(e._root))return!1;const o=e._statistics;o.clear(),++e._updatedVisibilityFrame,function(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}(e),function(e,t){t.frameNumber===e._updatedModelMatrixFrame&&(0,h.A)(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!w.A.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=w.A.clone(e.modelMatrix,e._previousModelMatrix)))}(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const a=e.getTraversal(i).selectTiles(e,t);if(i.requestTiles&&function(e){const t=e._requestedTiles;t.sort(Be);for(let n=0;n<t.length;++n)be(e,t[n])}(e),function(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;const{commandList:i,context:o}=t,a=i.length,s=e._selectedTiles,A=e.isSkippingLevelOfDetail&&e._hasMixedContent&&o.stencilBuffer&&s.length>0;e._backfaceCommands.length=0,A&&((0,h.A)(e._stencilClearCommand)||(e._stencilClearCommand=new D.A({stencil:0,pass:Q.A.CESIUM_3D_TILE,renderState:N.A.fromCache({stencilMask:oe.A.SKIP_LOD_MASK})})),i.push(e._stencilClearCommand));const{statistics:c,tileVisible:l}=e,u=n.isRender,d=i.length;for(let i=0;i<s.length;++i){const o=s[i];u&&l.raiseEvent(o),xe(e,o,t),o.update(e,t,n),c.incrementSelectionCounts(o.content),++c.selected}const g=e._emptyTiles;for(let i=0;i<g.length;++i)g[i].update(e,t,n);let f=i.length-d;if(e._backfaceCommands.trim(),A){const t=e._backfaceCommands.values,n=t.length;i.length+=n;for(let e=f-1;e>=0;--e)i[d+n+e]=i[d+e];for(let e=0;e<n;++e)i[d+e]=t[e]}f=i.length-a,c.numberOfCommands=f,u&&(e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&f>0&&e._pointCloudEyeDomeLighting.update(t,a,e.pointCloudShading,e.boundingSphere),e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?((0,h.A)(e._tileDebugLabels)||(e._tileDebugLabels=new K.A),function(e,t){const n=e._selectedTiles,i=n.length,o=e._emptyTiles,a=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if((0,h.A)(e.debugPickedTile)){const t=(0,h.A)(e.debugPickPosition)?e.debugPickPosition:Re(e.debugPickedTile);Me(e.debugPickedTile,e,t).pixelOffset=new r.A(15,-15)}}else{for(let t=0;t<i;++t){const i=n[t];Me(i,e,Re(i))}for(let t=0;t<a;++t){const n=o[t];(n.hasTilesetContent||n.hasImplicitContent)&&Me(n,e,Re(n))}}e._tileDebugLabels.update(t)}(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}(e,t,i),V.A.clone(o,n),i.isRender){const n=e._credits;if((0,h.A)(n)&&0!==o.selected)for(let e=0;e<n.length;++e){const i=n[e];t.creditDisplay.addCreditToNextFrame(i)}}return a}function Ue(e){let t=e._credits;(0,h.A)(t)||(t=[]),t.length=0,(0,h.A)(e.resource.credits)&&e.resource.credits.forEach(e=>{t.push(u.A.clone(e))});const n=e.asset.extras;if((0,h.A)(n)&&(0,h.A)(n.cesium)&&(0,h.A)(n.cesium.credits)){const e=n.cesium.credits;for(let n=0;n<e.length;++n){const i=e[n];t.push(new u.A(i.html))}}t.forEach(t=>t.showOnScreen=t.showOnScreen||e._showCreditsOnScreen),e._credits=t}ge.prototype.trimLoadedTiles=function(){this._cache.trim()},ge.prototype.getTraversal=function(e){const{pass:t}=e;return t===U.A.MOST_DETAILED_PRELOAD||t===U.A.MOST_DETAILED_PICK?Ae.A:this.isSkippingLevelOfDetail?le.A:ce.A},ge.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},ge.prototype.updateForPass=function(e,t){A.A.typeOf.object("frameState",e),A.A.typeOf.object("tilesetPassState",t),this.imageryLayers._update();const n=t.pass;if(n===U.A.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===U.A.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===U.A.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const i=e.commandList,o=e.camera,r=e.cullingVolume;t.ready=!1;const a=U.A.getPassOptions(n),s=a.ignoreCommands,c=t.commandList??i,l=c.length;if(e.commandList=c,e.camera=t.camera??o,e.cullingVolume=t.cullingVolume??r,a.isRender){const t=this._environmentMapManager;(0,h.A)(this._root)&&(t.position=this.boundingSphere.center),t.update(e)}const u=this._clippingPolygons;(0,h.A)(u)&&u.enabled&&u.queueCommands(e);const d=this._statisticsPerPass[n];(this.show||s)&&(this._pass=n,t.ready=Fe(this,e,d,a)),s&&(c.length=l),e.commandList=i,e.camera=o,e.cullingVolume=r},ge.prototype.hasExtension=function(e){return!!(0,h.A)(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},ge.prototype.isDestroyed=function(){return!1},ge.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._clippingPolygons=this._clippingPolygons&&this._clippingPolygons.destroy(),(0,h.A)(this._root)){const e=Le;for(e.push(this._root);e.length>0;){const t=e.pop();t.destroy();const n=t.children;for(let t=0;t<n.length;++t)e.push(n[t])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,this._environmentMapManager.isDestroyed()||this._environmentMapManager.destroy(),this._environmentMapManager=void 0,this._imageryLayers.isDestroyed()||(this.imageryLayers.layerAdded.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerRemoved.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerMoved.removeEventListener(this._imageryLayersListener),this.imageryLayers.layerShownOrHidden.removeEventListener(this._imageryLayersListener),this._imageryLayers.destroy()),this._imageryLayers=void 0,(0,f.A)(this)},ge.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0},ge.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!ge.supportedExtensions[e[t]])throw new S.A(`Unsupported 3D Tiles Extension: ${e[t]}`)};const ke=new ue.A,Ge=new a.A,He=new s.A;ge.prototype.getHeight=function(e,t){A.A.typeOf.object("cartographic",e),A.A.typeOf.object("scene",t);let n=t.ellipsoid;(0,h.A)(n)||(n=p.A.WGS84);const i=ke,o=n.cartographicToCartesian(e,i.direction);a.A.normalize(i.direction,i.direction),i.direction=a.A.normalize(o,i.direction),i.direction=a.A.negate(o,i.direction),i.origin=a.A.multiplyByScalar(i.direction,-2*n.maximumRadius,i.origin);const r=this.pick(i,t.frameState,Ge);if((0,h.A)(r))return n.cartesianToCartographic(r,He)?.height},ge.prototype.updateHeight=function(e,t,n){const i={positionCartographic:e,ellipsoid:n=n??p.A.WGS84,callback:t,invoked:!1};return this._addHeightCallbacks.push(i),()=>{const e=this._addHeightCallbacks,t=e.length;for(let n=0;n<t;++n)if(e[n]===i){e.splice(n,1);break}i.callback&&(i.callback=void 0)}};const Ve=new I.A,ze=new a.A;ge.prototype.pick=function(e,t,n){if(!t.context.webgl2&&!this._enablePick)return;const i=this._selectedTiles,r=i.length,s=[];for(let t=0;t<r;++t){const n=i[t],o=E.A.raySphere(e,n.contentBoundingVolume.boundingSphere,Ve);(0,h.A)(o)&&(0,h.A)(n.content)&&s.push(n)}const A=s.length;let c;s.sort((t,n)=>o.A.distanceSquaredTo(t.contentBoundingVolume.boundingSphere,e.origin)-o.A.distanceSquaredTo(n.contentBoundingVolume.boundingSphere,e.origin));for(let i=0;i<A;++i){const o=s[i].content.pick(e,t,ze);if((0,h.A)(o))return c=a.A.clone(o,n),c}},ge.prototype.isGltfExtensionUsed=function(e){if(this.hasExtension("3DTILES_content_gltf")){if(!(0,h.A)(this.extensions))return!1;const t=this.extensions["3DTILES_content_gltf"]?.extensionsUsed;return!!(0,h.A)(t)&&t.indexOf(e)>-1}return!1},ge.prototype.isGltfExtensionRequired=function(e){if(this.isGltfExtensionUsed(e)){const t=this.extensions["3DTILES_content_gltf"].extensionsRequired;return!!(0,h.A)(t)&&t.indexOf(e)>-1}return!1};const je=ge},329554:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(981757),r=n(661314),a=n(727541);function s(){}const A={stack:new o.A,stackMaximumLength:0},c={stack:new o.A,stackMaximumLength:0};function l(e,t){e.contentAvailable&&a.A.selectTile(e,t)}function u(e,t,n){const i=e.refine===r.A.REPLACE,{tileset:o,children:s}=e,{updateTile:A,loadTile:c,touchTile:l}=a.A;for(let e=0;e<s.length;++e)A(s[e],n);s.sort(a.A.sortChildrenByDistanceToCamera);const u=i&&e.hasRenderableContent;let h=!0,g=!1,f=-1,p=Number.MAX_VALUE;for(let e=0;e<s.length;++e){const i=s[e];if(i.isVisible?(t.push(i),i._foveatedFactor<p&&(f=e,p=i._foveatedFactor),g=!0):(u||o.loadSiblings)&&(i._foveatedFactor<p&&(f=e,p=i._foveatedFactor),c(i,n),l(i,n)),u){let e;e=!!i._inRequestVolume&&(i.hasRenderableContent?i.contentAvailable:d(i,n)),h=h&&e}}if(g||(h=!1),-1!==f&&i){const t=s[f];t._wasMinPriorityChild=!0;const n=(e._wasMinPriorityChild||e===o.root)&&p<=e._priorityHolder._foveatedFactor?e._priorityHolder:e;n._foveatedFactor=Math.min(t._foveatedFactor,n._foveatedFactor),n._distanceToCamera=Math.min(t._distanceToCamera,n._distanceToCamera);for(let e=0;e<s.length;++e)s[e]._priorityHolder=n}return h}function d(e,t){const{canTraverse:n,updateTile:i,loadTile:o,touchTile:r}=a.A;let s=!0;const A=c.stack;for(A.push(e);A.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,A.length);const e=A.pop(),a=e.children,l=a.length,u=!e.hasRenderableContent&&n(e);if(u||e.contentAvailable||(s=!1),i(e,t),e.isVisible||(o(e,t),r(e,t)),u)for(let e=0;e<l;++e){const t=a[e];A.push(t)}}return e.hasEmptyContent||s}s.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;const n=e.root;if(a.A.updateTile(n,t),!n.isVisible)return;if(n.getScreenSpaceError(t,!0)<=e.memoryAdjustedScreenSpaceError)return;!function(e,t){const{tileset:n}=e,{canTraverse:o,loadTile:s,visitTile:c,touchTile:d}=a.A,h=A.stack;for(h.push(e);h.length>0;){A.stackMaximumLength=Math.max(A.stackMaximumLength,h.length);const e=h.pop(),a=e.parent,g=!(0,i.A)(a)||a._refines;e._refines=!!o(e)&&u(e,h,t)&&g;const f=!e._refines&&g;e.hasRenderableContent?e.refine===r.A.ADD?(l(e,t),s(e,t)):e.refine===r.A.REPLACE&&(s(e,t),f&&l(e,t)):(n._emptyTiles.push(e),s(e,t),f&&l(e,t)),c(e,t),d(e,t)}}(n,t),A.stack.trim(A.stackMaximumLength),c.stack.trim(c.stackMaximumLength);const o=e._requestedTiles;for(let e=0;e<o.length;++e)o[e].updatePriority()};const h=s},648117:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(606707);function r(){this._list=new o.A,this._sentinel=this._list.add(),this._trimTiles=!1}r.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},r.prototype.touch=function(e){const t=e.cacheNode;(0,i.A)(t)&&this._list.splice(this._sentinel,t)},r.prototype.add=function(e){(0,i.A)(e.cacheNode)||(e.cacheNode=this._list.add(e))},r.prototype.unloadTile=function(e,t,n){const o=t.cacheNode;(0,i.A)(o)&&(this._list.remove(o),t.cacheNode=void 0,n(e,t))},r.prototype.unloadTiles=function(e,t){const n=this._trimTiles;this._trimTiles=!1;const i=this._list,o=this._sentinel;let r=i.head;for(;r!==o&&(e.totalMemoryUsageInBytes>e.cacheBytes||n);){const n=r.item;r=r.next,this.unloadTile(e,n,t)}},r.prototype.trim=function(){this._trimTiles=!0};const a=r},529755:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(41476),o=n(491446),r=n(591978),a=n(367817);function s(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function A(e,t){let n;return n="_loadTimestamp"===t?r.A.toDate(e).getTime():e,n}s.prototype.setReferenceMinimumMaximum=function(e,t,n){this._referenceMinimum[n]=A(e,n),this._referenceMaximum[n]=A(t,n)};const c=[new i.A(.1,.1,.1,1),new i.A(.153,.278,.878,1),new i.A(.827,.231,.49,1),new i.A(.827,.188,.22,1),new i.A(1,.592,.259,1),new i.A(1,.843,0,1)];s.prototype.colorize=function(e,t){const n=this.tilePropertyName;if(!(0,o.A)(n)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const r=function(e,t){const n=e.tilePropertyName;if((0,o.A)(n)){const i=A(t[n],n);return(0,o.A)(i)?(e._maximum=Math.max(i,e._maximum),e._minimum=Math.min(i,e._minimum),i):(e.tilePropertyName=void 0,i)}}(this,e),s=this._previousMinimum,l=this._previousMaximum;if(s===Number.MAX_VALUE||l===-Number.MAX_VALUE)return;const u=l-s+a.A.EPSILON7,d=a.A.clamp(r-s,0,u)/u*(c.length-1),h=Math.floor(d),g=Math.ceil(d),f=d-h,p=c[h],m=c[g],_=i.A.clone(i.A.WHITE);_.red=a.A.lerp(p.red,m.red,f),_.green=a.A.lerp(p.green,m.green,f),_.blue=a.A.lerp(p.blue,m.blue,f),e._debugColor=_},s.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if((0,o.A)(e)){const t=this._referenceMinimum[e],n=this._referenceMaximum[e],i=(0,o.A)(t)&&(0,o.A)(n);this._previousMinimum=i?t:this._minimum,this._previousMaximum=i?n:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};const l=s},979830:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(915325),r=n(491446),a=n(834298),s=n(751069);function A(e){const t=(e=e??o.A.EMPTY_OBJECT).metadataJson,n=e.schema;i.A.typeOf.object("options.metadataJson",t),i.A.typeOf.object("options.schema",n);const A=t.metadata??t.tileset;let c;(0,r.A)(A)&&(c=new s.A({tileset:A,class:n.classes[A.class]}));let l=[];const u=[],d=t.groups;if(Array.isArray(d)){const e=d.length;for(let t=0;t<e;t++){const e=d[t];u.push(new a.A({group:e,class:n.classes[e.class]}))}}else if((0,r.A)(d)){l=Object.keys(d).sort();const e=l.length;for(let t=0;t<e;t++){const e=l[t];if(d.hasOwnProperty(e)){const t=d[e];u.push(new a.A({id:e,group:d[e],class:n.classes[t.class]}))}}}this._schema=n,this._groups=u,this._groupIds=l,this._tileset=c,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(A.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const c=A},741740:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(647326),o=n(981757),r=n(661314),a=n(727541);function s(){}const A={stack:new o.A,stackMaximumLength:0};function c(e){return 0!==e.children.length&&(e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:(e.hasEmptyContent,!0))}function l(e,t,n){const{children:i}=e;for(let e=0;e<i.length;++e){const o=i[e];o.updateVisibility(n),o.isVisible&&t.push(o)}}function u(e,t){(t.hasUnloadedRenderableContent||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function d(e,t){e.contentAvailable&&e.contentVisibility(t)!==i.A.OUTSIDE&&e.tileset._selectedTiles.push(e)}s.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e.hasMixedContent=!1;let n=!0;const i=e.root;if(i.updateVisibility(t),!i.isVisible)return n;const{touchTile:o,visitTile:s}=a.A,h=A.stack;for(h.push(i);h.length>0;){A.stackMaximumLength=Math.max(A.stackMaximumLength,h.length);const i=h.pop(),a=i.refine===r.A.ADD,g=i.refine===r.A.REPLACE,f=c(i);f&&l(i,h,t),(a||g&&!f)&&(u(e,i),o(i,t),d(i,t),i.hasRenderableContent&&!i.contentAvailable&&(n=!1)),s(i,t)}return A.stack.trim(A.stackMaximumLength),n};const h=s},724812:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(491446),o=n(981757),r=n(661314),a=n(727541);function s(){}const A={stack:new o.A,stackMaximumLength:0},c={stack:new o.A,stackMaximumLength:0},l={stack:new o.A,stackMaximumLength:0,ancestorStack:new o.A,ancestorStackMaximumLength:0};function u(e,t){const n=e.contentAvailable?e:e._ancestorWithContentAvailable;(0,i.A)(n)?n._shouldSelect=!0:function(e,t){const{updateTile:n,touchTile:i,selectTile:o}=a.A,r=c.stack;for(r.push(e);r.length>0;){c.stackMaximumLength=Math.max(c.stackMaximumLength,r.length);const a=r.pop().children;for(let s=0;s<a.length;++s){const A=a[s];A.isVisible&&(A.contentAvailable?(n(A,t),i(A,t),o(A,t)):A._depth-e._depth<2&&r.push(A))}}}(e,t)}function d(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const{parent:n}=e;if(!(0,i.A)(n))return;const o=!n.hasUnloadedRenderableContent||n._requestedFrame===t.frameNumber;e._ancestorWithContent=o?n:n._ancestorWithContent,e._ancestorWithContentAvailable=n.contentAvailable?n:n._ancestorWithContentAvailable}function h(e,t){const n=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||(0,i.A)(n)&&t._screenSpaceError<n._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>n._depth+e.skipLevels)}function g(e,t,n){const{tileset:i,children:o}=e,{updateTile:r,loadTile:s,touchTile:A}=a.A;for(let e=0;e<o.length;++e)r(o[e],n);o.sort(a.A.sortChildrenByDistanceToCamera);let c=!1;for(let e=0;e<o.length;++e){const r=o[e];r.isVisible?(t.push(r),c=!0):i.loadSiblings&&(s(r,n),A(r,n))}return c}function f(e,t){const{tileset:n}=e;return!n.immediatelyLoadDesiredLevelOfDetail&&(!(0,i.A)(e._ancestorWithContent)||(0===e._screenSpaceError?e.parent._screenSpaceError>t:e._screenSpaceError>t))}s.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e.hasMixedContent=!1;const n=e.root;if(a.A.updateTile(n,t),!n.isVisible)return;if(n.getScreenSpaceError(t,!0)<=e.memoryAdjustedScreenSpaceError)return;!function(e,t){const{tileset:n}=e,o=n.immediatelyLoadDesiredLevelOfDetail?Number.MAX_VALUE:Math.max(n.baseScreenSpaceError,n.memoryAdjustedScreenSpaceError),{canTraverse:s,loadTile:c,visitTile:l,touchTile:p}=a.A,m=A.stack;for(m.push(e);m.length>0;){A.stackMaximumLength=Math.max(A.stackMaximumLength,m.length);const e=m.pop();d(e,t);const a=e.parent,_=!(0,i.A)(a)||a._refines;e._refines=!!s(e)&&g(e,m,t)&&_;const I=!e._refines&&_;e.hasRenderableContent?e.refine===r.A.ADD?(u(e,t),c(e,t)):e.refine===r.A.REPLACE&&(f(e,o)?(c(e,t),I&&u(e,t)):I?(u(e,t),c(e,t)):h(n,e)&&c(e,t)):(n._emptyTiles.push(e),c(e,t),I&&u(e,t)),l(e,t),p(e,t)}}(n,t),function(e,t){const{selectTile:n,canTraverse:o}=a.A,{stack:s,ancestorStack:A}=l;let c;for(s.push(e);s.length>0||A.length>0;){if(l.stackMaximumLength=Math.max(l.stackMaximumLength,s.length),l.ancestorStackMaximumLength=Math.max(l.ancestorStackMaximumLength,A.length),A.length>0){const e=A.peek();if(e._stackLength===s.length){A.pop(),e!==c&&(e._finalResolution=!1),n(e,t);continue}}const e=s.pop();if(!(0,i.A)(e))continue;const a=o(e);if(e._shouldSelect)if(e.refine===r.A.ADD)n(e,t);else{if(e._selectionDepth=A.length,e._selectionDepth>0&&(e.tileset.hasMixedContent=!0),c=e,!a){n(e,t);continue}A.push(e),e._stackLength=s.length}if(a){const t=e.children;for(let e=0;e<t.length;++e){const n=t[e];n.isVisible&&s.push(n)}}}}(n,t),A.stack.trim(A.stackMaximumLength),c.stack.trim(c.stackMaximumLength),l.stack.trim(l.stackMaximumLength),l.ancestorStack.trim(l.ancestorStackMaximumLength);const o=e._requestedTiles;for(let e=0;e<o.length;++e)o[e].updatePriority()};const p=s},485760:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(224975);function r(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.texturesReferenceCounterById={},this.batchTableByteLength=0}r.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},r.prototype.incrementSelectionCounts=function(e){this.numberOfFeaturesSelected+=e.featuresLength,this.numberOfPointsSelected+=e.pointsLength,this.numberOfTrianglesSelected+=e.trianglesLength;const t=e.innerContents;if((0,i.A)(t)){const e=t.length;for(let n=0;n<e;++n)this.incrementSelectionCounts(t[n])}},r.prototype.incrementLoadCounts=function(e){if(this.numberOfFeaturesLoaded+=e.featuresLength,this.numberOfPointsLoaded+=e.pointsLength,this.geometryByteLength+=e.geometryByteLength,this.batchTableByteLength+=e.batchTableByteLength,e instanceof o.A){const t=e.getTextureIds();for(const n of t){const t=this.texturesReferenceCounterById[n]??0;if(0===t){const t=e.getTextureByteLengthById(n);this.texturesByteLength+=t}this.texturesReferenceCounterById[n]=t+1}}else this.texturesByteLength+=e.texturesByteLength;const t=e.innerContents;if((0,i.A)(t)){const e=t.length;for(let n=0;n<e;++n)this.incrementLoadCounts(t[n])}},r.prototype.decrementLoadCounts=function(e){if(this.numberOfFeaturesLoaded-=e.featuresLength,this.numberOfPointsLoaded-=e.pointsLength,this.geometryByteLength-=e.geometryByteLength,this.batchTableByteLength-=e.batchTableByteLength,e instanceof o.A){const t=e.getTextureIds();for(const n of t){const t=this.texturesReferenceCounterById[n];if(1===t){delete this.texturesReferenceCounterById[n];const t=e.getTextureByteLengthById(n);this.texturesByteLength-=t}else this.texturesReferenceCounterById[n]=t-1}}else this.texturesByteLength-=e.texturesByteLength;const t=e.innerContents;if((0,i.A)(t)){const e=t.length;for(let n=0;n<e;++n)this.decrementLoadCounts(t[n])}},r.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.texturesReferenceCounterById={...e.texturesReferenceCounterById},t.batchTableByteLength=e.batchTableByteLength};const a=r},727541:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(647326),a=n(45679),s=n(661314);function A(){}function c(e,t){if(e.updateVisibility(t),!e.isVisible)return;const n=e.children.length>0;if((e.hasTilesetContent||e.hasImplicitContent)&&n){const n=e.children[0];return c(n,t),void(e._visible=n._visible)}if(function(e,t){const{parent:n,tileset:o}=e;return!(!(0,i.A)(n)||n.hasTilesetContent||n.hasImplicitContent||n.refine!==s.A.ADD)&&e.getScreenSpaceError(t,!0)<=o.memoryAdjustedScreenSpaceError}(e,t))return void(e._visible=!1);const o=e.refine===s.A.REPLACE,r=e._optimChildrenWithinParent===a.A.USE_OPTIMIZATION;return o&&r&&n&&!function(e,t){let n=!1;const i=e.children;for(let e=0;e<i.length;++e){const o=i[e];o.updateVisibility(t),n=n||o.isVisible}return n}(e,t)?(++e.tileset._statistics.numberOfTilesCulledWithChildrenUnion,void(e._visible=!1)):void 0}A.selectTiles=function(e,t){o.A.throwInstantiationError()},A.sortChildrenByDistanceToCamera=function(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera},A.canTraverse=function(e){return 0!==e.children.length&&(e.hasTilesetContent||e.hasImplicitContent?!e.contentExpired:e._screenSpaceError>e.tileset.memoryAdjustedScreenSpaceError)},A.selectTile=function(e,t){if(e.contentVisibility(t)===r.A.OUTSIDE)return;e._wasSelectedLastFrame=!0;const{content:n,tileset:i}=e;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,e.lastStyleTime=0,i._selectedTilesToStyle.push(e)):e._selectedFrame<t.frameNumber-1&&(i._selectedTilesToStyle.push(e),e._wasSelectedLastFrame=!1),e._selectedFrame=t.frameNumber,i._selectedTiles.push(e)},A.visitTile=function(e,t){++e.tileset._statistics.visited,e._visitedFrame=t.frameNumber},A.touchTile=function(e,t){e._touchedFrame!==t.frameNumber&&(e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber)},A.loadTile=function(e,t){const{tileset:n}=e;if(e._requestedFrame===t.frameNumber||!e.hasUnloadedRenderableContent&&!e.contentExpired)return;if(!function(e,t){const{tileset:n}=e;if(!n._cullRequestsWhileMoving)return!0;const{positionWCDeltaMagnitude:i,positionWCDeltaMagnitudeLastFrame:o}=t.camera,r=0!==i?i:o,a=Math.max(2*e.boundingSphere.radius,1);return n.cullRequestsWhileMovingMultiplier*r/a<1}(e,t))return;const i=t.camera.timeSinceMoved<n.foveatedTimeDelay;e.priorityDeferred&&i||(e._requestedFrame=t.frameNumber,n._requestedTiles.push(e))},A.updateTile=function(e,t){c(e,t),e.updateExpiration(),e._wasMinPriorityChild=!1,e._priorityHolder=e,function(e){const t=e.tileset._minimumPriority,n=e.tileset._maximumPriority,i=e._priorityHolder;n.distance=Math.max(i._distanceToCamera,n.distance),t.distance=Math.min(i._distanceToCamera,t.distance),n.depth=Math.max(e._depth,n.depth),t.depth=Math.min(e._depth,t.depth),n.foveatedFactor=Math.max(i._foveatedFactor,n.foveatedFactor),t.foveatedFactor=Math.min(i._foveatedFactor,t.foveatedFactor),n.reverseScreenSpaceError=Math.max(e._priorityReverseScreenSpaceError,n.reverseScreenSpaceError),t.reverseScreenSpaceError=Math.min(e._priorityReverseScreenSpaceError,t.reverseScreenSpaceError)}(e),e._shouldSelect=!1,e._finalResolution=!0};const l=A},23708:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(267980),o=n(369031),r=n(491446);function a(e,t){o.A.typeOf.object("normal",e),o.A.typeOf.number("distance",t),this._distance=t,this._normal=new s(e,this),this.onChangeCallback=void 0,this.index=-1}function s(e,t){this._clippingPlane=t,this._cartesian3=i.A.clone(e)}Object.defineProperties(a.prototype,{distance:{get:function(){return this._distance},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){o.A.typeOf.object("value",e),(0,r.A)(this.onChangeCallback)&&!i.A.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),i.A.clone(e,this._normal._cartesian3)}}}),a.fromPlane=function(e,t){return o.A.typeOf.object("plane",e),(0,r.A)(t)?(t.normal=e.normal,t.distance=e.distance):t=new a(e.normal,e.distance),t},a.clone=function(e,t){return(0,r.A)(t)?(t.normal=e.normal,t.distance=e.distance,t):new a(e.normal,e.distance)},Object.defineProperties(s.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){o.A.typeOf.number("value",e),(0,r.A)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});const A=a},711284:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(961645),o=n(434067),r=n(267980),a=n(626809),s=n(369031),A=n(41476),c=n(915325),l=n(491446),u=n(677354),d=n(605971),h=n(955943),g=n(647326),f=n(584164),p=n(276904),m=n(257941),_=n(430332),I=n(57775),E=n(654799),y=n(616e3),C=n(23708);function b(e){e=e??c.A.EMPTY_OBJECT,this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=e.enabled??!0,this.modelMatrix=f.A.clone(e.modelMatrix??f.A.IDENTITY),this.edgeColor=A.A.clone(e.edgeColor??A.A.WHITE),this.edgeWidth=e.edgeWidth??0,this.planeAdded=new h.A,this.planeRemoved=new h.A,this._owner=void 0;const t=e.unionClippingRegions??!1;this._unionClippingRegions=t,this._testIntersection=t?B:v,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;const n=e.planes;if((0,l.A)(n)){const e=n.length;for(let t=0;t<e;++t)this.add(n[t])}}function B(e){return e===g.A.OUTSIDE}function v(e){return e===g.A.INSIDE}function w(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||-1!==e._dirtyIndex&&e._dirtyIndex!==t,e._dirtyIndex=t}function T(e,t){const n=e.length;for(let i=0;i<n;++i)if(m.A.equals(e[i],t))return i;return-1}Object.defineProperties(b.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?B:v)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}}),b.prototype.add=function(e){const t=this._planes.length,n=this;e.onChangeCallback=function(e){w(n,e)},e.index=t,w(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)},b.prototype.get=function(e){return s.A.typeOf.number("index",e),this._planes[e]},b.prototype.contains=function(e){return-1!==T(this._planes,e)},b.prototype.remove=function(e){const t=this._planes,n=T(t,e);if(-1===n)return!1;e instanceof C.A&&(e.onChangeCallback=void 0,e.index=-1);const i=t.length-1;for(let e=n;e<i;++e){const n=t[e+1];t[e]=n,n instanceof C.A&&(n.index=e)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0},b.prototype.removeAll=function(){const e=this._planes,t=e.length;for(let n=0;n<t;++n){const t=e[n];t instanceof C.A&&(t.onChangeCallback=void 0,t.index=-1),this.planeRemoved.raiseEvent(t,n)}this._multipleDirtyPlanes=!0,this._planes=[]};const S=new a.A,x=new a.A;function D(e,t,n){const o=e._uint8View,r=e._planes;let s=0;for(let e=t;e<n;++e){const t=r[e],n=i.A.octEncodeToCartesian4(t.normal,x);o[s]=n.x,o[s+1]=n.y,o[s+2]=n.z,o[s+3]=n.w;const A=a.A.packFloat(t.distance,S);o[s+4]=A.x,o[s+5]=A.y,o[s+6]=A.z,o[s+7]=A.w,s+=8}}function Q(e,t,n){const i=e._float32View,o=e._planes;let r=0;for(let e=t;e<n;++e){const t=o[e],n=t.normal;i[r]=n.x,i[r+1]=n.y,i[r+2]=n.z,i[r+3]=t.distance,r+=4}}function N(e,t){const n=_.A.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}const R=new o.A;b.prototype.update=function(e){let t=this._clippingPlanesTexture;const n=e.context,i=b.useFloatTexture(n),o=i?this.length:2*this.length;if((0,l.A)(t)){const e=t.width*t.height;(e<o||o<.25*e)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(0===this.length)return;if(!(0,l.A)(t)){const e=N(o,R);e.y*=2,i?(t=new y.A({context:n,width:e.x,height:e.y,pixelFormat:p.A.RGBA,pixelDatatype:I.A.FLOAT,sampler:E.A.NEAREST,flipY:!1}),this._float32View=new Float32Array(e.x*e.y*4)):(t=new y.A({context:n,width:e.x,height:e.y,pixelFormat:p.A.RGBA,pixelDatatype:I.A.UNSIGNED_BYTE,sampler:E.A.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(e.x*e.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}const r=this._dirtyIndex;if(this._multipleDirtyPlanes||-1!==r){if(this._multipleDirtyPlanes)i?(Q(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(D(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let e=0,n=0;i?(n=Math.floor(r/t.width),e=Math.floor(r-n*t.width),Q(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:e,yOffset:n})):(n=Math.floor(2*r/t.width),e=Math.floor(2*r-n*t.width),D(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:e,yOffset:n}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};const M=new f.A,L=new m.A(r.A.UNIT_X,0);b.prototype.computeIntersectionWithBoundingVolume=function(e,t){const n=this._planes,i=n.length;let o=this.modelMatrix;(0,l.A)(t)&&(o=f.A.multiply(t,o,M));let r=g.A.INSIDE;!this.unionClippingRegions&&i>0&&(r=g.A.OUTSIDE);for(let t=0;t<i;++t){const i=n[t];m.A.transform(i,o,L);const a=e.intersectPlane(L);if(a===g.A.INTERSECTING)r=a;else if(this._testIntersection(a))return a}return r},b.setOwner=function(e,t,n){if(e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),(0,l.A)(e))){if((0,l.A)(e._owner))throw new d.A("ClippingPlaneCollection should only be assigned to one object");e._owner=t,t[n]=e}},b.useFloatTexture=function(e){return e.floatingPointTexture},b.getTextureResolution=function(e,t,n){const i=e.texture;if((0,l.A)(i))return n.x=i.width,n.y=i.height,n;const o=N(b.useFloatTexture(t)?e.length:2*e.length,n);return o.y*=2,o},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),(0,u.A)(this)};const P=b},506964:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(267980),r=n(336946),a=n(491446),s=n(610750),A=n(367817),c=n(151949),l=n(697422);function u(e){i.A.typeOf.object("options",e),i.A.typeOf.object("options.positions",e.positions),i.A.typeOf.number.greaterThanOrEquals("options.positions.length",e.positions.length,3),this._ellipsoid=e.ellipsoid??s.A.default,this._positions=[...e.positions]}Object.defineProperties(u.prototype,{length:{get:function(){return this._positions.length}},positions:{get:function(){return this._positions}},ellipsoid:{get:function(){return this._ellipsoid}}}),u.clone=function(e,t){return i.A.typeOf.object("polygon",e),(0,a.A)(t)?(t._ellipsoid=e.ellipsoid,t._positions.length=0,t._positions.push(...e.positions),t):new u({positions:e.positions,ellipsoid:e.ellipsoid})},u.equals=function(e,t){return i.A.typeOf.object("left",e),i.A.typeOf.object("right",t),e.ellipsoid.equals(t.ellipsoid)&&e.positions===t.positions},u.prototype.computeRectangle=function(e){return c.A.computeRectangleFromPositions(this.positions,this.ellipsoid,void 0,e)};const d=new l.A,h=new o.A;u.prototype.computeSphericalExtents=function(e){(0,a.A)(e)||(e=new l.A);const t=this.computeRectangle(d);let n=r.A.toCartesian(l.A.southwest(t),this.ellipsoid,h),i=Math.sqrt(n.x*n.x+n.y*n.y),o=A.A.fastApproximateAtan2(i,n.z),s=A.A.fastApproximateAtan2(n.x,n.y);return e.south=o,e.west=s,n=r.A.toCartesian(l.A.northeast(t),this.ellipsoid,h),i=Math.sqrt(n.x*n.x+n.y*n.y),o=A.A.fastApproximateAtan2(i,n.z),s=A.A.fastApproximateAtan2(n.x,n.y),e.north=o,e.east=s,e};const g=u},348460:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(434067),o=n(367817),r=n(369031),a=n(915325),s=n(491446),A=n(677354),c=n(605971),l=n(955943),u=n(647326),d=n(276904),h=n(697422),g=n(430332),f=n(57775),p=n(123245),m=n(654799),_=n(616e3),I=n(957233),E=n(78078),y=n(557448),C=n(506964),b=n(718289),B=n(291848);function v(e){e=e??a.A.EMPTY_OBJECT,this._polygons=[],this._totalPositions=0,this.enabled=e.enabled??!0,this.inverse=e.inverse??!1,this.polygonAdded=new l.A,this.polygonRemoved=new l.A,this._owner=void 0,this._float32View=void 0,this._extentsFloat32View=void 0,this._extentsCount=0,this._polygonsTexture=void 0,this._extentsTexture=void 0,this._signedDistanceTexture=void 0,this._signedDistanceComputeCommand=void 0;const t=e.polygons;if((0,s.A)(t)){const e=t.length;for(let n=0;n<e;++n)this._polygons.push(t[n])}}Object.defineProperties(v.prototype,{length:{get:function(){return this._polygons.length}},totalPositions:{get:function(){return this._totalPositions}},extentsTexture:{get:function(){return this._extentsTexture}},extentsCount:{get:function(){return this._extentsCount}},pixelsNeededForExtents:{get:function(){return this.length}},pixelsNeededForPolygonPositions:{get:function(){return this.totalPositions+this.length}},clippingTexture:{get:function(){return this._signedDistanceTexture}},owner:{get:function(){return this._owner}},clippingPolygonsState:{get:function(){return this.inverse?-this.extentsCount:this.extentsCount}}}),v.prototype.add=function(e){r.A.typeOf.object("polygon",e);const t=this._polygons.length;return this._polygons.push(e),this.polygonAdded.raiseEvent(e,t),e},v.prototype.get=function(e){return r.A.typeOf.number("index",e),this._polygons[e]},v.prototype.contains=function(e){return r.A.typeOf.object("polygon",e),this._polygons.some(t=>C.A.equals(t,e))},v.prototype.remove=function(e){r.A.typeOf.object("polygon",e);const t=this._polygons,n=t.findIndex(t=>C.A.equals(t,e));return-1!==n&&(t.splice(n,1),this.polygonRemoved.raiseEvent(e,n),!0)};const w=new h.A;v.prototype.removeAll=function(){const e=this._polygons,t=e.length;for(let n=0;n<t;++n){const t=e[n];this.polygonRemoved.raiseEvent(t,n)}this._polygons=[]};const T=new i.A;v.prototype.update=function(e){const t=e.context;if(!v.isSupported(e))throw new p.A("ClippingPolygonCollections are only supported for WebGL 2.");const n=this._polygons.reduce((e,t)=>e+t.length,0);if(n===this.totalPositions)return;if(this._totalPositions=n,0===this.length)return;(0,s.A)(this._signedDistanceComputeCommand)&&(this._signedDistanceComputeCommand.canceled=!0,this._signedDistanceComputeCommand=void 0);let i=this._polygonsTexture,r=this._extentsTexture,a=this._signedDistanceTexture;if((0,s.A)(i)){const e=i.width*i.height;(e<this.pixelsNeededForPolygonPositions||this.pixelsNeededForPolygonPositions<.25*e)&&(i.destroy(),i=void 0,this._polygonsTexture=void 0)}if(!(0,s.A)(i)){const e=v.getTextureResolution(i,this.pixelsNeededForPolygonPositions,T);i=new _.A({context:t,width:e.x,height:e.y,pixelFormat:d.A.RG,pixelDatatype:f.A.FLOAT,sampler:m.A.NEAREST,flipY:!1}),this._float32View=new Float32Array(e.x*e.y*2),this._polygonsTexture=i}if((0,s.A)(r)){const e=r.width*r.height;(e<this.pixelsNeededForExtents||this.pixelsNeededForExtents<.25*e)&&(r.destroy(),r=void 0,this._extentsTexture=void 0)}if(!(0,s.A)(r)){const e=v.getTextureResolution(r,this.pixelsNeededForExtents,T);r=new _.A({context:t,width:e.x,height:e.y,pixelFormat:d.A.RGBA,pixelDatatype:f.A.FLOAT,sampler:m.A.NEAREST,flipY:!1}),this._extentsFloat32View=new Float32Array(e.x*e.y*4),this._extentsTexture=r}if(function(e){const t=e._float32View,n=e._extentsFloat32View,i=e._polygons,{extentsList:r,extentsIndexByPolygon:a}=function(e){const t=[],n=[],i=e.length;for(let o=0;o<i;++o){const i=e[o].computeSphericalExtents();let r=Math.max(2.5*i.height,.001),a=Math.max(2.5*i.width,.001),A=h.A.clone(i);A.south-=r,A.west-=a,A.north+=r,A.east+=a,A.south=Math.max(A.south,-Math.PI),A.west=Math.max(A.west,-Math.PI),A.north=Math.min(A.north,Math.PI),A.east=Math.min(A.east,Math.PI);const c=[o];for(let o=0;o<t.length;++o){const l=t[o];if((0,s.A)(l)&&(0,s.A)(h.A.simpleIntersection(l,A))&&!h.A.equals(l,A)){const s=n[o];c.push(...s),s.reduce((t,n)=>h.A.union(e[n].computeSphericalExtents(w),t,t),i),t[o]=void 0,n[o]=void 0,r=Math.max(2.5*i.height,.001),a=Math.max(2.5*i.width,.001),A=h.A.clone(i,A),A.south-=r,A.west-=a,A.north+=r,A.east+=a,A.south=Math.max(A.south,-Math.PI),A.west=Math.max(A.west,-Math.PI),A.north=Math.min(A.north,Math.PI),A.east=Math.min(A.east,Math.PI),o=-1}}t.push(A),n.push(c)}const o=new Map;return n.filter(s.A).forEach((e,t)=>e.forEach(e=>o.set(e,t))),{extentsList:t.filter(s.A),extentsIndexByPolygon:o}}(i);let A=0;for(const[e,n]of i.entries()){const i=n.length;t[A++]=i,t[A++]=a.get(e);for(let e=0;e<i;++e){const i=n.positions[e],r=Math.hypot(i.x,i.y),a=o.A.fastApproximateAtan2(r,i.z),s=o.A.fastApproximateAtan2(i.x,i.y);t[A++]=a,t[A++]=s}}let c=0;for(const e of r){const t=1/(e.east-e.west),i=1/(e.north-e.south);n[c++]=e.south,n[c++]=e.west,n[c++]=i,n[c++]=t}e._extentsCount=r.length}(this),r.copyFrom({source:{width:r.width,height:r.height,arrayBufferView:this._extentsFloat32View}}),i.copyFrom({source:{width:i.width,height:i.height,arrayBufferView:this._float32View}}),!(0,s.A)(a)){const e=v.getClippingDistanceTextureResolution(this,T);a=new _.A({context:t,width:e.x,height:e.y,pixelFormat:t.webgl2?d.A.RED:d.A.LUMINANCE,pixelDatatype:f.A.FLOAT,sampler:new m.A({wrapS:y.A.CLAMP_TO_EDGE,wrapT:y.A.CLAMP_TO_EDGE,minificationFilter:E.A.LINEAR,magnificationFilter:I.A.LINEAR}),flipY:!1}),this._signedDistanceTexture=a}this._signedDistanceComputeCommand=function(e){const t=e._polygonsTexture,n=e._extentsTexture;return new b.A({fragmentShaderSource:B.A,outputTexture:e._signedDistanceTexture,uniformMap:{u_polygonsLength:function(){return e.length},u_extentsLength:function(){return e.extentsCount},u_extentsTexture:function(){return n},u_polygonTexture:function(){return t}},persists:!1,owner:e,postExecute:()=>{e._signedDistanceComputeCommand=void 0}})}(this)},v.prototype.queueCommands=function(e){(0,s.A)(this._signedDistanceComputeCommand)&&e.commandList.push(this._signedDistanceComputeCommand)};const S=new h.A,x=new h.A;v.prototype.computeIntersectionWithBoundingVolume=function(e,t){const n=this._polygons,i=n.length;let o=u.A.OUTSIDE;this.inverse&&(o=u.A.INSIDE);for(let r=0;r<i;++r){const i=n[r].computeRectangle();let a=e.rectangle;if(!(0,s.A)(a)&&(0,s.A)(e.boundingVolume?.computeCorners)){const n=e.boundingVolume.computeCorners();a=h.A.fromCartesianArray(n,t,S)}(0,s.A)(a)||(a=h.A.fromBoundingSphere(e.boundingSphere,t,S));const A=h.A.simpleIntersection(a,i,x);(0,s.A)(A)&&(o=u.A.INTERSECTING)}return o},v.setOwner=function(e,t,n){if(e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),(0,s.A)(e))){if((0,s.A)(e._owner))throw new c.A("ClippingPolygonCollection should only be assigned to one object");e._owner=t,t[n]=e}},v.isSupported=function(e){return e?.context.webgl2},v.getTextureResolution=function(e,t,n){if((0,s.A)(e))return n.x=e.width,n.y=e.height,n;const i=g.A.maximumTextureSize;return n.x=Math.min(t,i),n.y=Math.ceil(t/n.x),n.y*=2,n},v.getClippingDistanceTextureResolution=function(e,t){const n=e.signedDistanceTexture;return(0,s.A)(n)?(t.x=n.width,t.y=n.height,t):(t.x=Math.min(g.A.maximumTextureSize,4096),t.y=Math.min(g.A.maximumTextureSize,4096),t)},v.getClippingExtentsTextureResolution=function(e,t){const n=e.extentsTexture;return(0,s.A)(n)?(t.x=n.width,t.y=n.height,t):v.getTextureResolution(n,e.pixelsNeededForExtents,t)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return(0,s.A)(this._signedDistanceComputeCommand)&&(this._signedDistanceComputeCommand.canceled=!0),this._polygonsTexture=this._polygonsTexture&&this._polygonsTexture.destroy(),this._extentsTexture=this._extentsTexture&&this._extentsTexture.destroy(),this._signedDistanceTexture=this._signedDistanceTexture&&this._signedDistanceTexture.destroy(),(0,A.A)(this)};const D=v},428027:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(367817);const o={HIGHLIGHT:0,REPLACE:1,MIX:2,getColorBlend:function(e,t){return e===o.HIGHLIGHT?0:e===o.REPLACE?1:e===o.MIX?i.A.clamp(t,i.A.EPSILON4,1):void 0}},r=Object.freeze(o)},583511:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(267980),o=n(491446),r=n(677354),a=n(452684),s=n(123245);function A(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,(0,o.A)(i)||(i=[]),this._contents=i,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(A.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].group=e}}});const c=Uint32Array.BYTES_PER_ELEMENT;A.fromTileType=async function(e,t,n,i,r,l){r=r??0;const u=new Uint8Array(i),d=new DataView(i);r+=c;const h=d.getUint32(r,!0);if(1!==h)throw new s.A(`Only Composite Tile version 1 is supported. Version ${h} is not.`);r+=c,r+=c;const g=d.getUint32(r,!0);r+=c;let f=n.queryParameters.compositeIndex;f=(0,o.A)(f)?`${f}_`:"";const p=[];p.length=g;for(let A=0;A<g;++A){const h=(0,a.A)(u,r),g=d.getUint32(r+2*c,!0),m=l[h],_=`${f}${A}`,I=n.getDerivedResource({queryParameters:{compositeIndex:_}});if(!(0,o.A)(m))throw new s.A(`Unknown tile content type, ${h}, inside Composite tile`);p[A]=Promise.resolve(m(e,t,I,i,r)),r+=g}return new A(e,t,n,await Promise.all(p))},A.prototype.hasProperty=function(e,t){return!1},A.prototype.getFeature=function(e){},A.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},A.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},A.prototype.update=function(e,t){const n=this._contents,i=n.length;let o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)},A.prototype.pick=function(e,t,n){if(!this._ready)return;let r,a=Number.POSITIVE_INFINITY;const s=this._contents,A=s.length;for(let c=0;c<A;++c){const A=s[c].pick(e,t,n);if(!(0,o.A)(A))continue;const l=i.A.distance(e.origin,A);l<a&&(r=A,a=l)}return(0,o.A)(r)?n:void 0},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,r.A)(this)};const l=A},35204:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(915325),r=n(965976);function a(e){const t=(e=e??o.A.EMPTY_OBJECT).content,n=e.class;i.A.typeOf.object("options.content",t),i.A.typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return r.A.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return r.A.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return r.A.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return r.A.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return r.A.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return r.A.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return r.A.setPropertyBySemantic(e,t,this._properties,this._class)};const s=a},937069:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(288787),o=n(303578),r=n(369031),a=n(672743),s=n(491446),A=n(677354),c=n(484193);const l="#ffffff",u="#48b";function d(e,t){this.credit=e,this.count=t??1}const h="cesium-credit-delimiter";function g(e){const t=document.createElement("span");return t.textContent=e,t.className=h,t}function f(e,t){if((0,s.A)(t)){const n=document.createElement(t);n._creditId=e._creditId,n.appendChild(e),e=n}return e}function p(e,t,n,i){const o=e.childNodes;let r=-1;t.sort(function(e,t){return t.count-e.count});for(let a=0;a<t.length;++a){const A=t[a].credit;if((0,s.A)(A)){if(r=a,(0,s.A)(n)&&(r*=2,a>0)){const t=r-1;if(o.length<=t)e.appendChild(g(n));else{const i=o[t];i.className!==h&&e.replaceChild(g(n),i)}}const t=A.element;if(o.length<=r)e.appendChild(f(t,i));else{const n=o[r];n._creditId!==A._id&&e.replaceChild(f(t,i),n)}}}for(++r;r<o.length;)e.removeChild(o[r])}function m(e,t,n){r.A.defined("container",e);const o=this;n=n??document.body;const s=document.createElement("div");s.className="cesium-credit-lightbox-overlay",n.appendChild(s);const A=document.createElement("div");function c(e){A.contains(e.target)||o.hideLightbox()}A.className="cesium-credit-lightbox",s.appendChild(A),s.addEventListener("click",c,!1);const d=document.createElement("div");d.className="cesium-credit-lightbox-title",d.textContent="Data provided by:",A.appendChild(d);const h=document.createElement("a");h.onclick=this.hideLightbox.bind(this),h.innerHTML="&times;",h.className="cesium-credit-lightbox-close",A.appendChild(h);const g=document.createElement("ul");A.appendChild(g);const f=document.createElement("div");f.className="cesium-credit-logoContainer",f.style.display="inline",e.appendChild(f);const p=document.createElement("div");p.className="cesium-credit-textContainer",p.style.display="inline",e.appendChild(p);const _=document.createElement("a");_.className="cesium-credit-expand-link",_.onclick=this.showLightbox.bind(this),_.textContent="Data attribution",e.appendChild(_),function(e){const t=`\n.cesium-credit-lightbox-overlay {\n  display: none;\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(80, 80, 80, 0.8);\n}\n\n.cesium-credit-lightbox {\n  background-color: #303336;\n  color: ${l};\n  position: relative;\n  min-height: 100px;\n  margin: auto;\n}\n.cesium-credit-lightbox > ul > li a,\n.cesium-credit-lightbox > ul > li a:visited,\n.cesium-credit-wrapper a,\n.cesium-credit-wrapper a:visited {\n  color: ${l};\n}\n.cesium-credit-lightbox > ul > li a:hover {\n  color: ${u};\n}\n.cesium-credit-lightbox.cesium-credit-lightbox-expanded {\n  border: 1px solid #444;\n  border-radius: 5px;\n  max-width: 370px;\n}\n.cesium-credit-lightbox.cesium-credit-lightbox-mobile {\n  height: 100%;\n  width: 100%;\n}\n.cesium-credit-lightbox-title {\n  padding: 20px 20px 0 20px;\n}\n.cesium-credit-lightbox-close {\n  font-size: 18pt;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  right: 6px;\n  color: ${l};\n}\n.cesium-credit-lightbox-close:hover {\n  color: ${u};\n}\n.cesium-credit-lightbox > ul {\n  margin: 0;\n  padding: 12px 20px 12px 40px;\n  font-size: 13px;\n}\n.cesium-credit-lightbox > ul > li {\n  padding-bottom: 6px;\n}\n.cesium-credit-lightbox > ul > li * {\n  padding: 0;\n  margin: 0;\n}\n\n.cesium-credit-expand-link {\n  padding-left: 5px;\n  cursor: pointer;\n  text-decoration: underline;\n  color: ${l};\n}\n.cesium-credit-expand-link:hover {\n  color: ${u};\n}\n\n.cesium-credit-text {\n  color: ${l};\n}\n\n.cesium-credit-delimiter {\n  padding: 0 5px;\n}\n\n.cesium-credit-textContainer *,\n.cesium-credit-logoContainer * {\n  display: inline;\n}\n\n.cesium-credit-textContainer a:hover {\n  color: ${u}\n}\n\n.cesium-credit-textContainer .cesium-credit-wrapper:first-of-type {\n  padding-left: 5px;\n}\n`,n=function(e){if(e.shadowRoot)return e.shadowRoot;if(e.getRootNode){const t=e.getRootNode();if(t instanceof ShadowRoot)return t}}(e)??document.head,i=document.createElement("style");i.innerHTML=t,n.appendChild(i)}(e);const I=a.A.clone(m.cesiumCredit);this._delimiter=t??"",this._screenContainer=p,this._cesiumCreditContainer=f,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=A,this._creditList=g,this._lightbox=s,this._hideLightbox=c,this._expandLink=_,this._expanded=!1,this._staticCredits=[],this._cesiumCredit=I,this._previousCesiumCredit=void 0,this._currentCesiumCredit=I,this._creditDisplayElementPool=[],this._creditDisplayElementIndex=0,this._currentFrameCredits={screenCredits:new i.A,lightboxCredits:new i.A},this._defaultCredit=void 0,this.viewport=n,this.container=e}function _(e,t,n,i){i=i??1;let o=t.get(n.id);if((0,s.A)(o))o.count<Number.MAX_VALUE&&(o.count+=i);else{const r=e._creditDisplayElementPool,a=e._creditDisplayElementPoolIndex;a<r.length?(o=r[a],o.credit=n,o.count=i):(o=new d(n,i),r.push(o)),++e._creditDisplayElementPoolIndex,t.set(n.id,o)}}let I;function E(){if(!(0,s.A)(I)){let e=(0,o.A)("Assets/Images/ion-credit.png");0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("data:")&&(e=new c(e).path()),I=new a.A(`<a href="https://cesium.com/" target="_blank"><img src="${e}" style="vertical-align: -7px" title="Cesium ion"/></a>`,!0)}return m._cesiumCreditInitialized||(m._cesiumCredit=I,m._cesiumCreditInitialized=!0),I}m.prototype.addCreditToNextFrame=function(e){if(r.A.defined("credit",e),e.isIon())return(0,s.A)(this._defaultCredit)||(this._defaultCredit=a.A.clone(E())),void(this._currentCesiumCredit=this._defaultCredit);let t;t=e.showOnScreen?this._currentFrameCredits.screenCredits:this._currentFrameCredits.lightboxCredits,_(this,t,e)},m.prototype.addStaticCredit=function(e){r.A.defined("credit",e);const t=this._staticCredits;(function(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(a.A.equals(n,t))return!0}return!1})(t,e)||t.push(e)},m.prototype.removeStaticCredit=function(e){r.A.defined("credit",e);const t=this._staticCredits,n=t.indexOf(e);-1!==n&&t.splice(n,1)},m.prototype.showLightbox=function(){this._lightbox.style.display="block",this._expanded=!0},m.prototype.hideLightbox=function(){this._lightbox.style.display="none",this._expanded=!1},m.prototype.update=function(){this._expanded&&function(e){const t=e._lightboxCredits,n=e.viewport.clientWidth,i=e.viewport.clientHeight;n!==e._lastViewportWidth&&(n<576?(t.className="cesium-credit-lightbox cesium-credit-lightbox-mobile",t.style.marginTop="0"):(t.className="cesium-credit-lightbox cesium-credit-lightbox-expanded",t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`),e._lastViewportWidth=n),n>=576&&i!==e._lastViewportHeight&&(t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`,e._lastViewportHeight=i)}(this)},m.prototype.beginFrame=function(){const e=this._currentFrameCredits;this._creditDisplayElementPoolIndex=0;const t=e.screenCredits,n=e.lightboxCredits;t.removeAll(),n.removeAll();const i=this._staticCredits;for(let e=0;e<i.length;++e){const o=i[e],r=o.showOnScreen?t:n;o.isIon()&&a.A.equals(m.cesiumCredit,this._cesiumCredit)||_(this,r,o,Number.MAX_VALUE)}a.A.equals(m.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=a.A.clone(m.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit},m.prototype.endFrame=function(){const e=this._currentFrameCredits.screenCredits.values;p(this._screenContainer,e,this._delimiter,void 0);const t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?"inline":"none",p(this._creditList,t,void 0,"li"),function(e){const t=e._previousCesiumCredit,n=e._currentCesiumCredit;a.A.equals(n,t)||((0,s.A)(t)&&e._cesiumCreditContainer.removeChild(t.element),(0,s.A)(n)&&e._cesiumCreditContainer.appendChild(n.element),e._previousCesiumCredit=n)}(this)},m.prototype.destroy=function(){return this._lightbox.removeEventListener("click",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),(0,A.A)(this)},m.prototype.isDestroyed=function(){return!1},m._cesiumCredit=void 0,m._cesiumCreditInitialized=!1,Object.defineProperties(m,{cesiumCredit:{get:function(){return E(),m._cesiumCredit},set:function(e){m._cesiumCredit=e,m._cesiumCreditInitialized=!0}}}),m.CreditDisplayElement=d;const y=m},199744:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var i=n(267980),o=n(41476),r=n(433235),a=n(915325),s=n(491446),A=n(677354),c=n(605971),l=n(17117),u=n(788335),d=n(75200),h=n(331185),g=n(811203),f=n(65891),p=n(666775),m=n(65783),_=n(99479),I=n(612123),E=n(842153);function y(e){if(e=e??a.A.EMPTY_OBJECT,!(0,s.A)(e.camera))throw new c.A("options.camera is required.");this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=e.color??o.A.CYAN,this._updateOnChange=e.updateOnChange??!0,this.show=e.show??!0,this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const C=new i.A,b=new h.A,B=new _.A,v=new p.A,w=new m.A,T=new g.A,S=new f.A,x=new o.A,D=[1,1e5];y.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,n=this._outlinePrimitives;let a,A;if(this._updateOnChange){for(A=t.length,a=0;a<A;++a)n[a]=n[a]&&n[a].destroy(),t[a]=t[a]&&t[a].destroy();t.length=0,n.length=0}if(0===t.length){const e=this._camera,A=e.frustum;let c,f;c=A instanceof p.A?v:A instanceof m.A?w:A instanceof g.A?T:S,c=A.clone(c);let y=this._frustumSplits;!(0,s.A)(y)||y.length<=1?(y=D,y[0]=this._camera.frustum.near,y[1]=this._camera.frustum.far,f=1):f=y.length-1;const Q=e.positionWC,N=e.directionWC,R=e.upWC;let M=e.rightWC;M=i.A.negate(M,C);const L=b;h.A.setColumn(L,0,M,L),h.A.setColumn(L,1,R,L),h.A.setColumn(L,2,N,L);const P=_.A.fromRotationMatrix(L,B);for(t.length=n.length=f,a=0;a<f;++a)c.near=y[a],c.far=y[a+1],t[a]=new E.A({geometryInstances:new d.A({geometry:new l.A({origin:Q,orientation:P,frustum:c,_drawNearPlane:0===a}),attributes:{color:r.A.fromColor(o.A.fromAlpha(this._color,.1,x))},id:this.id,pickPrimitive:this}),appearance:new I.A({translucent:!0,flat:!0}),asynchronous:!1}),n[a]=new E.A({geometryInstances:new d.A({geometry:new u.A({origin:Q,orientation:P,frustum:c,_drawNearPlane:0===a}),attributes:{color:r.A.fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new I.A({translucent:!1,flat:!0}),asynchronous:!1})}for(A=t.length,a=0;a<A;++a)n[a].update(e),t[a].update(e)},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return(0,A.A)(this)};const Q=y},809418:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(41476),o=n(377496),r=n(342875),a=n(302836),s=n(491446);function A(){this._cachedShowFrustumsShaders={}}const c=new i.A,l=new o.A;A.prototype.executeDebugShowFrustumsCommand=function(e,t,n){const A=t.shaderProgram.id;let u=this._cachedShowFrustumsShaders[A];(0,s.A)(u)||(u=function(e,t){const n=e.context,i=t,o=i.fragmentShaderSource.clone(),s=[];o.sources=o.sources.map(function(e){e=r.A.replaceMain(e,"czm_Debug_main");const t=/out_FragData_(\d+)/g;let n;for(;null!==(n=t.exec(e));)-1===s.indexOf(n[1])&&s.push(n[1]);return e});const A=s.length;let c,l="";if(l+="uniform vec3 debugShowCommandsColor;\n",l+="uniform vec3 debugShowFrustumsColor;\n",l+="void main() \n{ \n    czm_Debug_main(); \n",A>0)for(c=0;c<A;++c)l+=`    out_FragData_${s[c]}.rgb *= debugShowCommandsColor;\n`,l+=`    out_FragData_${s[c]}.rgb *= debugShowFrustumsColor;\n`;else l+="    out_FragColor.rgb *= debugShowCommandsColor;\n",l+="    out_FragColor.rgb *= debugShowFrustumsColor;\n";l+="}",o.sources.push(l);const u=function(e){const t={},n=e.vertexAttributes;for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e].index);return t}(i);return a.A.fromCache({context:n,vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:o,attributeLocations:u})}(e,t.shaderProgram),this._cachedShowFrustumsShaders[A]=u);const d=o.A.shallowClone(t,l);d.shaderProgram=u,d.uniformMap=function(e,t){let n;return n=(0,s.A)(t.uniformMap)?t.uniformMap:{},(0,s.A)(n.debugShowCommandsColor)||(0,s.A)(n.debugShowFrustumsColor)||(n.debugShowCommandsColor=function(){return e.debugShowCommands?((0,s.A)(t._debugColor)||(t._debugColor=i.A.fromRandom()),t._debugColor):i.A.WHITE},n.debugShowFrustumsColor=function(){return e.debugShowFrustums?(c.red=1&t.debugOverlappingFrustums?1:0,c.green=2&t.debugOverlappingFrustums?1:0,c.blue=4&t.debugOverlappingFrustums?1:0,c.alpha=1,c):i.A.WHITE}),n}(e,t),d.execute(e.context,n)};const u=A},626355:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var i=n(660662),o=n(267980),r=n(571804),a=n(491446),s=n(520098),A=n(944479),c=n(305439),l=n(811203),u=n(402330),d=n(442790),h=n(377496),g=n(760866),f=n(40118),p=n(302836),m=n(342875),_=n(508380),I=n(710434),E=n(77202),y=n(62467),C=n(610750);function b(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=e??0}const B=s.A.supportsTypedArrays()?new Float32Array(12):[],v=new o.A,w=new o.A,T=new o.A,S=new o.A,x=new o.A;b.prototype.update=function(e){if(this._mode=e.mode,e.mode!==y.A.SCENE3D)return;const t=e.context,n=e.mapProjection.ellipsoid.radii,s=new C.A(n.x+this._ellipsoidOffset,n.y+this._ellipsoidOffset,n.z+this._ellipsoidOffset),b=e.useLogDepth;if((0,a.A)(this._command)||(this._rs=f.A.fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new h.A({renderState:this._rs,boundingVolume:new i.A(o.A.ZERO,s.maximumRadius),pass:g.A.OPAQUE,owner:this})),!(0,a.A)(this._sp)||this._useLogDepth!==b){this._useLogDepth=b;const e=new m.A({sources:[E.A]}),n=new m.A({sources:[I.A]});b&&(n.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")),this._sp=p.A.replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const D=function(e,t){const n=e.radii,i=t.camera;let r,a,s;if(i.frustum instanceof l.A)r=o.A.ZERO,a=i.rightWC,s=i.upWC;else{const t=i.positionWC,n=o.A.multiplyComponents(e.oneOverRadii,t,v),A=o.A.normalize(n,w),c=o.A.normalize(o.A.cross(o.A.UNIT_Z,n,T),T),l=o.A.normalize(o.A.cross(A,c,S),S),u=o.A.magnitude(n),d=Math.sqrt(u*u-1);r=o.A.multiplyByScalar(A,1/u,v);const h=d/u;a=o.A.multiplyByScalar(c,h,w),s=o.A.multiplyByScalar(l,h,T)}const A=o.A.add(r,s,x);o.A.subtract(A,a,A),o.A.multiplyComponents(n,A,A),o.A.pack(A,B,0);const c=o.A.subtract(r,s,x);o.A.subtract(c,a,c),o.A.multiplyComponents(n,c,c),o.A.pack(c,B,3);const u=o.A.add(r,s,x);o.A.add(u,a,u),o.A.multiplyComponents(n,u,u),o.A.pack(u,B,6);const d=o.A.subtract(r,s,x);return o.A.add(d,a,d),o.A.multiplyComponents(n,d,d),o.A.pack(d,B,9),B}(s,e);if((0,a.A)(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(D);else{const e=new A.A({attributes:{position:new c.A({componentDatatype:r.A.FLOAT,componentsPerAttribute:3,values:D})},indices:[0,1,2,2,1,3],primitiveType:u.A.TRIANGLES});this._va=_.A.fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:d.A.DYNAMIC_DRAW}),this._command.vertexArray=this._va}},b.prototype.execute=function(e,t){this._mode===y.A.SCENE3D&&this._command.execute(e,t)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()};const D=b},384292:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(568748),o=n(491446),r=n(377496),a=n(40118),s=n(342875),A=n(374607),c=n(963564);function l(){}const u=/\bgl_FragDepth\b/,d=/\bdiscard\b/;l.createDepthOnlyDerivedCommand=function(e,t,n,i){(0,o.A)(i)||(i={});const A=i.depthOnlyCommand?.shaderProgram,c=i.depthOnlyCommand?.renderState;return i.depthOnlyCommand=r.A.shallowClone(t,i.depthOnlyCommand),(0,o.A)(A)&&i.shaderProgramId===t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=A,i.depthOnlyCommand.renderState=c):(i.depthOnlyCommand.shaderProgram=function(e,t){const n=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if((0,o.A)(n))return n;let i=t.fragmentShaderSource,r=!1;const a=i.sources;for(let e=0;e<a.length;++e)if(u.test(a[e])||d.test(a[e])){r=!0;break}const A=i.defines.indexOf("LOG_DEPTH")>=0;if(r||A){if(!r&&A){const e="void main()\n{\n    out_FragColor = vec4(1.0);\n    czm_writeLogDepth();\n}\n";i=new s.A({defines:["LOG_DEPTH"],sources:[e]})}}else{const e="void main()\n{\n    out_FragColor = vec4(1.0);\n}\n";i=new s.A({sources:[e]})}return e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}(n,t.shaderProgram),i.depthOnlyCommand.renderState=function(e,t){const n=e._depthOnlyRenderStateCache,i=n[t.id];if((0,o.A)(i))return i;const r=a.A.getState(t);r.depthMask=!0,r.colorMask={red:!1,green:!1,blue:!1,alpha:!1};const s=a.A.fromCache(r);return n[t.id]=s,s}(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i};const h=/\s+czm_writeLogDepth\(/,g=/\s+czm_vertexLogDepth\(/;function f(e,t){const n=e.picking.pickRenderStateCache,i=n[t.id];if((0,o.A)(i))return i;const r=a.A.getState(t);r.blending.enabled=!1,r.depthMask=!0;const s=a.A.fromCache(r);return n[t.id]=s,s}function p(e,t,n){const i=e.length;for(let o=0;o<i;o++)e[o].trimStart().split(/\s+/)[0]===t&&(e[o]=`${t} ${n}`)}function m(e){return e.isArray?e.arrayLength:A.A.getComponentCount(e.type)}function _(e,t,n){return`((${e} - float(${t})) / float(${n}))`}function I(e,t){return`(${e}) / float(${i.A.getMaximum(t)})`}function E(e,t,n){let i=`float(value.${n})`;return t.hasValueTransform&&(i=_(i,t.offset[n],t.scale[n])),e.normalized||(i=I(i,e.componentType)),i}l.createLogDepthCommand=function(e,t,n){(0,o.A)(n)||(n={});const i=n.command?.shaderProgram;return n.command=r.A.shallowClone(e,n.command),(0,o.A)(i)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=i:(n.command.shaderProgram=function(e,t){if(t.fragmentShaderSource.defines.indexOf("LOG_DEPTH_READ_ONLY")>=0)return t;const n=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if((0,o.A)(n))return n;const i=t._attributeLocations,r=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();r.defines=(0,o.A)(r.defines)?r.defines.slice(0):[],r.defines.push("LOG_DEPTH"),a.defines=(0,o.A)(a.defines)?a.defines.slice(0):[],a.defines.push("LOG_DEPTH");let A=!1,c=r.sources;for(let e=0;e<c.length;++e)if(g.test(c[e])){A=!0;break}if(!A){for(let e=0;e<c.length;++e)c[e]=s.A.replaceMain(c[e],"czm_log_depth_main");const e="\n\nvoid main()\n{\n    czm_log_depth_main();\n    czm_vertexLogDepth();\n}\n";c.push(e)}c=a.sources,A=!1;for(let e=0;e<c.length;++e)h.test(c[e])&&(A=!0);-1!==a.defines.indexOf("LOG_DEPTH_WRITE")&&(A=!0);let l="";if(!A){for(let e=0;e<c.length;e++)c[e]=s.A.replaceMain(c[e],"czm_log_depth_main");l="\nvoid main()\n{\n    czm_log_depth_main();\n    czm_writeLogDepth();\n}\n"}return c.push(l),e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i})}(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n},l.createPickDerivedCommand=function(e,t,n,i){(0,o.A)(i)||(i={});const a=i.pickCommand?.shaderProgram,A=i.pickCommand?.renderState;return i.pickCommand=r.A.shallowClone(t,i.pickCommand),(0,o.A)(a)&&i.shaderProgramId===t.shaderProgram.id?(i.pickCommand.shaderProgram=a,i.pickCommand.renderState=A):(i.pickCommand.shaderProgram=function(e,t,n){const i=e.shaderCache.getDerivedShaderProgram(t,"pick");if((0,o.A)(i))return i;const r=t._attributeLocations,{sources:a,defines:A}=t.fragmentShaderSource,c=a.some(e=>e.includes("out_FragData"))?"out_FragData_0":"out_FragColor",l=`void main () \n{ \n    czm_non_pick_main(); \n    if (${c}.a == 0.0) { \n        discard; \n    } \n    ${c} = ${n}; \n} `,u=a.length,d=new Array(u+1);for(let e=0;e<u;++e)d[e]=s.A.replaceMain(a[e],"czm_non_pick_main");d[u]=l;const h=new s.A({sources:d,defines:A});return e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:h,attributeLocations:r})}(n,t.shaderProgram,t.pickId),i.pickCommand.renderState=f(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i},l.createPickMetadataDerivedCommand=function(e,t,n,i){return(0,o.A)(i)||(i={}),i.pickMetadataCommand=r.A.shallowClone(t,i.pickMetadataCommand),i.pickMetadataCommand.shaderProgram=function(e,t,n){const i=n.schemaId,r=n.className,a=n.propertyName,A=`pickMetadata-${i}-${r}-${a}`,l=e.shaderCache.getDerivedShaderProgram(t,A);if((0,o.A)(l))return l;const u=n.metadataProperty,d=n.classProperty,h=function(e){const t=m(e);return e.normalized?1===t?"float":`vec${t}`:1===t?"int":`ivec${t}`}(d),g=["0.0","0.0","0.0","0.0"],f=m(d);if(1===f)g[0]=function(e,t){let n="float(value)";return t.hasValueTransform&&(n=_(n,t.offset,t.scale)),e.normalized||(n=I(n,e.componentType)),n}(d,u);else{const e=["x","y","z","w"];for(let t=0;t<f;t++)g[t]=E(d,u,e[t])}const y=t.fragmentShaderSource.defines.slice();y.push(c.A.METADATA_PICKING_ENABLED),p(y,c.A.METADATA_PICKING_VALUE_TYPE,h),p(y,c.A.METADATA_PICKING_VALUE_STRING,`metadata.${a}`),p(y,c.A.METADATA_PICKING_VALUE_COMPONENT_X,g[0]),p(y,c.A.METADATA_PICKING_VALUE_COMPONENT_Y,g[1]),p(y,c.A.METADATA_PICKING_VALUE_COMPONENT_Z,g[2]),p(y,c.A.METADATA_PICKING_VALUE_COMPONENT_W,g[3]);const C=new s.A({sources:t.fragmentShaderSource.sources,defines:y});return e.shaderCache.createDerivedShaderProgram(t,A,{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:C,attributeLocations:t._attributeLocations})}(n,t.shaderProgram,t.pickedMetadataInfo),i.pickMetadataCommand.renderState=f(e,t.renderState),i.shaderProgramId=t.shaderProgram.id,i},l.createHdrCommand=function(e,t,n){(0,o.A)(n)||(n={});const i=n.command?.shaderProgram;return n.command=r.A.shallowClone(e,n.command),(0,o.A)(i)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=i:(n.command.shaderProgram=function(e,t){const n=e.shaderCache.getDerivedShaderProgram(t,"HDR");if((0,o.A)(n))return n;const i=t._attributeLocations,r=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();return r.defines=(0,o.A)(r.defines)?r.defines.slice(0):[],r.defines.push("HDR"),a.defines=(0,o.A)(a.defines)?a.defines.slice(0):[],a.defines.push("HDR"),e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i})}(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n};const y=l},77191:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(677354),r=n(605971),a=n(367817),s=n(331185),A=n(99479);function c(e){if(!(0,i.A)(e))throw new r.A("scene is required.");this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function n(e){const n=e.alpha;if(!(0,i.A)(n))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=a.A.toRadians(n),t._beta=a.A.toRadians(e.beta),t._gamma=a.A.toRadians(e.gamma)}window.addEventListener("deviceorientation",n,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",n,!1)}}const l=new A.A,u=new A.A,d=new s.A;c.prototype.update=function(){if(!(0,i.A)(this._alpha))return;(0,i.A)(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,n=this._lastGamma-this._gamma;!function(e,t,n,i){const o=e.direction,r=e.right,a=e.up,c=A.A.fromAxisAngle(o,n,u),h=A.A.fromAxisAngle(r,i,l),g=A.A.multiply(h,c,h),f=A.A.fromAxisAngle(a,t,u);A.A.multiply(f,g,g);const p=s.A.fromQuaternion(g,d);s.A.multiplyByVector(p,r,r),s.A.multiplyByVector(p,a,a),s.A.multiplyByVector(p,o,o)}(this._scene.camera,-e,t,n),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._removeListener(),(0,o.A)(this)};const h=c},489970:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(267980),o=n(369031),r=n(41476),a=n(605971);const s=function(e){if(o.A.typeOf.object("options",e),o.A.typeOf.object("options.direction",e.direction),i.A.equals(e.direction,i.A.ZERO))throw new a.A("options.direction cannot be zero-length");this.direction=i.A.clone(e.direction),this.color=r.A.clone(e.color??r.A.WHITE),this.intensity=e.intensity??1}},253478:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446);function o(e){}let r;o.prototype.isReady=function(){return!0},o.prototype.shouldDiscardImage=function(e){return o.EMPTY_IMAGE===e},Object.defineProperties(o,{EMPTY_IMAGE:{get:function(){return(0,i.A)(r)||(r=new Image,r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),r}}});const a=o},836721:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(915325),o=n(491446),r=n(605971),a=n(85935),s=n(744603);function A(e){if(e=e??i.A.EMPTY_OBJECT,!(0,o.A)(e.missingImageUrl))throw new r.A("options.missingImageUrl is required.");if(!(0,o.A)(e.pixelsToCheck))throw new r.A("options.pixelsToCheck is required.");this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=s.A.createIfNeeded(e.missingImageUrl),n=this;t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(function(t){(0,o.A)(t.blob)&&(n._missingImageByteLength=t.blob.size);let i=(0,a.A)(t);if(e.disableCheckIfAllPixelsAreTransparent){let n=!0;const o=t.width,r=e.pixelsToCheck;for(let e=0,t=r.length;n&&e<t;++e){const t=r[e];i[4*t.x+t.y*o+3]>0&&(n=!1)}n&&(i=void 0)}n._missingImagePixels=i,n._isReady=!0}).catch(function(){n._missingImagePixels=void 0,n._isReady=!0})}A.prototype.isReady=function(){return this._isReady},A.prototype.shouldDiscardImage=function(e){if(!this._isReady)throw new r.A("shouldDiscardImage must not be called before the discard policy is ready.");const t=this._pixelsToCheck,n=this._missingImagePixels;if(!(0,o.A)(n))return!1;if((0,o.A)(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const i=(0,a.A)(e),s=e.width;for(let e=0,o=t.length;e<o;++e){const o=t[e],r=4*o.x+o.y*s;for(let e=0;e<4;++e){const t=r+e;if(i[t]!==n[t])return!1}}return!0};const c=A},445848:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(520098),r=n(123245),a=n(971724);function s(){}s._maxDecodingConcurrency=Math.max(o.A.hardwareConcurrency-1,1),s._decoderTaskProcessor=void 0,s._taskProcessorReady=!1,s._error=void 0,s._getDecoderTaskProcessor=function(){if(!(0,i.A)(s._decoderTaskProcessor)){const e=new a.A("decodeDraco",s._maxDecodingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then(function(e){e?s._taskProcessorReady=!0:s._error=new r.A("Draco decoder could not be initialized.")}).catch(e=>{s._error=e}),s._decoderTaskProcessor=e}return s._decoderTaskProcessor},s.decodePointCloud=function(e){const t=s._getDecoderTaskProcessor();if((0,i.A)(s._error))throw s._error;if(s._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},s.decodeBufferView=function(e){const t=s._getDecoderTaskProcessor();if((0,i.A)(s._error))throw s._error;if(s._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])};const A=s},226381:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={NONE:0,SCENE_LIGHT:1,SUNLIGHT:2,fromGlobeFlags:function(e){return e.enableLighting&&e.dynamicAtmosphereLighting?e.dynamicAtmosphereLightingFromSun?i.SUNLIGHT:i.SCENE_LIGHT:i.NONE}},o=Object.freeze(i)},615557:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(434067),o=n(267980),r=n(626809),a=n(41476),s=n(915325),A=n(491446),c=n(677354),l=n(605971),u=n(591978),d=n(584164),h=n(276904),g=n(62467),f=n(543622),p=n(718289),m=n(430332),_=n(346154),I=n(483128),E=n(616e3),y=n(57775),C=n(654799),b=n(302836),B=n(342875),v=n(78078),w=n(153662),T=n(226381),S=n(468649),x=n(635582),D=n(198709),Q=n(722856),N=n(864248);function R(e){this._position=void 0,this._radianceMapDirty=!1,this._radianceCommandsDirty=!1,this._convolutionsCommandsDirty=!1,this._irradianceCommandDirty=!1,this._irradianceTextureDirty=!1,this._sphericalHarmonicCoefficientsDirty=!1,this._shouldRegenerateShaders=!1,this._shouldReset=!1,e=e??s.A.EMPTY_OBJECT;const t=Math.min(e.mipmapLevels??7,Math.log2(m.A.maximumCubeMapSize));this._mipmapLevels=t,this._radianceMapComputeCommands=new Array(6),this._convolutionComputeCommands=new Array(6*(t-1)),this._irradianceComputeCommand=void 0,this._radianceMapFS=void 0,this._irradianceMapFS=void 0,this._convolveSP=void 0,this._va=void 0,this._radianceMapTextures=new Array(6),this._specularMapTextures=new Array(6*(t-1)),this._radianceCubeMap=void 0,this._irradianceMapTexture=void 0,this._sphericalHarmonicCoefficients=R.DEFAULT_SPHERICAL_HARMONIC_COEFFICIENTS.slice(),this._lastTime=new u.A;const n=Math.pow(2,t-1);this._textureDimensions=new i.A(n,n),this._radiiAndDynamicAtmosphereColor=new o.A,this._sceneEnvironmentMap=void 0,this._backgroundColor=void 0,this._owner=void 0,this.enabled=e.enabled??!0,this.shouldUpdate=!0,this.maximumSecondsDifference=e.maximumSecondsDifference??3600,this.maximumPositionEpsilon=e.maximumPositionEpsilon??1e3,this.atmosphereScatteringIntensity=e.atmosphereScatteringIntensity??2,this.gamma=e.gamma??1,this.brightness=e.brightness??1,this.saturation=e.saturation??1,this.groundColor=e.groundColor??R.AVERAGE_EARTH_GROUND_COLOR,this.groundAlbedo=e.groundAlbedo??.31}Object.defineProperties(R.prototype,{owner:{get:function(){return this._owner}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},position:{get:function(){return this._position},set:function(e){o.A.equalsEpsilon(e,this._position,0,this.maximumPositionEpsilon)||(this._position=o.A.clone(e,this._position),this._shouldReset=!0)}},radianceCubeMap:{get:function(){return this._radianceCubeMap}},maximumMipmapLevel:{get:function(){return this._mipmapLevels}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}}}),R._maximumComputeCommandCount=8,R._activeComputeCommandCount=0,R._nextFrameCommandQueue=[],R._queueCommand=(e,t)=>{R._activeComputeCommandCount>=R._maximumComputeCommandCount?R._nextFrameCommandQueue.push(e):(t.commandList.push(e),R._activeComputeCommandCount++)},R._updateCommandQueue=e=>{if(R._maximumComputeCommandCount=Math.log2(m.A.maximumCubeMapSize),R._nextFrameCommandQueue.length>0&&R._activeComputeCommandCount<R._maximumComputeCommandCount){let t=R._nextFrameCommandQueue.shift();for(;(0,A.A)(t)&&R._activeComputeCommandCount<R._maximumComputeCommandCount;)t.owner.isDestroyed()||t.canceled||(e.commandList.push(t),R._activeComputeCommandCount++),t=R._nextFrameCommandQueue.shift();(0,A.A)(t)&&R._nextFrameCommandQueue.push(t)}},R.setOwner=function(e,t,n){if(e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),(0,A.A)(e))){if((0,A.A)(e._owner))throw new l.A("DynamicEnvironmentMapManager should only be assigned to one object");e._owner=t,t[n]=e}},R.prototype.reset=function(){let e=this._radianceMapComputeCommands.length;for(let t=0;t<e;++t)(0,A.A)(this._radianceMapComputeCommands[t])&&(this._radianceMapComputeCommands[t].canceled=!0),this._radianceMapComputeCommands[t]=void 0;e=this._convolutionComputeCommands.length;for(let t=0;t<e;++t)(0,A.A)(this._convolutionComputeCommands[t])&&(this._convolutionComputeCommands[t].canceled=!0),this._convolutionComputeCommands[t]=void 0;(0,A.A)(this._irradianceComputeCommand)&&(this._irradianceComputeCommand.canceled=!0,this._irradianceComputeCommand=void 0),this._radianceMapDirty=!0,this._radianceCommandsDirty=!0,this._convolutionsCommandsDirty=!1,this._irradianceCommandDirty=!1};const M=new o.A,L=new o.A,P=new o.A,O=new d.A,F=new r.A,U=new a.A,k=new i.A(3,3);R.prototype.update=function(e){const t=e.mode;if(!(R.isDynamicUpdateSupported(e)&&this.enabled&&this.shouldUpdate&&(0,A.A)(this._position)&&t!==g.A.MORPHING))return void(this._shouldRegenerateShaders=!1);R._updateCommandQueue(e);const n=e.atmosphere.dynamicLighting,i=function(e,t){const n=e._position,i=t.atmosphere,r=t.mapProjection.ellipsoid,a=r.scaleToGeodeticSurface(n,L),s=M,c=(0,A.A)(a)?o.A.magnitude(a):r.maximumRadius;return s.x=1.025*c,s.y=c,s.z=i.dynamicLighting,!(o.A.equalsEpsilon(e._radiiAndDynamicAtmosphereColor,s)&&t.environmentMap===e._sceneEnvironmentMap&&t.backgroundColor===e._backgroundColor||(o.A.clone(s,e._radiiAndDynamicAtmosphereColor),e._sceneEnvironmentMap=t.environmentMap,e._backgroundColor=t.backgroundColor,0))}(this,e)||n===T.A.SUNLIGHT&&!u.A.equalsEpsilon(e.time,this._lastTime,this.maximumSecondsDifference);return this._shouldReset||i?(this.reset(),this._shouldReset=!1,void(this._lastTime=u.A.clone(e.time,this._lastTime))):(this._radianceMapDirty&&(function(e,t){const n=t.context,i=e._textureDimensions;if((0,A.A)(e._radianceCubeMap)||(e._radianceCubeMap=new _.A({context:n,width:i.x,height:i.y,pixelDatatype:y.A.UNSIGNED_BYTE,pixelFormat:h.A.RGBA})),e._radianceCommandsDirty){let o=e._radianceMapFS;(0,A.A)(o)||(o=new B.A({sources:[S.A,D.A]}),e._radianceMapFS=o),w.A.requiresColorCorrect(t.atmosphere)&&o.defines.push("ATMOSPHERE_COLOR_CORRECT");const r=e._position,a=e._radiiAndDynamicAtmosphereColor,s=t.mapProjection.ellipsoid,c=f.A.eastNorthUpToFixedFrame(r,s,O),l=F;l.x=e.brightness,l.y=e.saturation,l.z=e.gamma,l.w=e.atmosphereScatteringIntensity,1===e.brightness&&1===e.saturation&&1===e.gamma||o.defines.push("ENVIRONMENT_COLOR_CORRECT");let u=0;for(const s of _.A.faceNames()){let d=e._radianceMapTextures[u];(0,A.A)(d)&&!d.isDestroyed()&&d.destroy(),d=new E.A({context:n,width:i.x,height:i.y,pixelDatatype:y.A.UNSIGNED_BYTE,pixelFormat:h.A.RGBA}),e._radianceMapTextures[u]=d;const g=u,f=new p.A({fragmentShaderSource:o,outputTexture:d,uniformMap:{u_radiiAndDynamicAtmosphereColor:()=>a,u_enuToFixedFrame:()=>c,u_faceDirection:()=>_.A.getDirection(s,P),u_positionWC:()=>r,u_brightnessSaturationGammaIntensity:()=>l,u_groundColor:()=>e.groundColor.withAlpha(e.groundAlbedo,U)},owner:e});f.postExecute=()=>{if(e.isDestroyed()||f.canceled)return void R._activeComputeCommandCount--;const t=e._radianceMapComputeCommands;t[g]=void 0;const i=new I.A({context:n,colorTextures:[e._radianceMapTextures[g]]});i._bind(),e._radianceCubeMap[s].copyFromFramebuffer(),i._unBind(),i.destroy(),R._activeComputeCommandCount--,t.some(A.A)||(e._convolutionsCommandsDirty=!0,e._shouldRegenerateShaders=!0)},e._radianceMapComputeCommands[u]=f,R._queueCommand(f,t),u++}e._radianceCommandsDirty=!1}}(this,e),this._radianceMapDirty=!1),this._convolutionsCommandsDirty&&(function(e,t){const n=e._radianceCubeMap;n.generateMipmap();const i=e._mipmapLevels,o=e._textureDimensions;let r=o.x/2,a=o.y/2;const s=t.context;let c=0;const l=(i,o,r,a,s)=>()=>{if(e.isDestroyed()||i.canceled)return void R._activeComputeCommandCount--;e._convolutionComputeCommands[o]=void 0,n.copyFace(t,r,a,s),c++,R._activeComputeCommandCount--,r.destroy(),e._specularMapTextures[o]=void 0;const A=e._specularMapTextures.length;c>=A&&(e._irradianceCommandDirty=!0,n.sampler=new C.A({minificationFilter:v.A.LINEAR_MIPMAP_LINEAR}),e._shouldRegenerateShaders=!0,e._va.destroy(),e._va=void 0,e._convolveSP.destroy(),e._convolveSP=void 0)};let u=0;for(let o=1;o<i;++o){for(const c of _.A.faceNames()){(0,A.A)(e._specularMapTextures[u])&&e._specularMapTextures[u].destroy();const d=e._specularMapTextures[u]=new E.A({context:s,width:r,height:a,pixelDatatype:y.A.UNSIGNED_BYTE,pixelFormat:h.A.RGBA});let g=e._va;(0,A.A)(g)||(g=_.A.createVertexArray(s,c),e._va=g);let f=e._convolveSP;(0,A.A)(f)||(f=b.A.fromCache({context:s,vertexShaderSource:N.A,fragmentShaderSource:Q.A,attributeLocations:{positions:0}}),e._convolveSP=f);const m=new p.A({shaderProgram:f,vertexArray:g,outputTexture:d,persists:!0,owner:e,uniformMap:{u_roughness:()=>o/(i-1),u_radianceTexture:()=>n??s.defaultTexture,u_faceDirection:()=>_.A.getDirection(c,P)}});m.postExecute=l(m,u,d,c,o),e._convolutionComputeCommands[u]=m,R._queueCommand(m,t),++u}r/=2,a/=2}}(this,e),this._convolutionsCommandsDirty=!1),this._irradianceCommandDirty&&(function(e,t){const n=t.context,i=k;let o=e._irradianceMapTexture;(0,A.A)(o)&&!o.isDestroyed()&&o.destroy(),o=new E.A({context:n,width:i.x,height:i.y,pixelDatatype:y.A.FLOAT,pixelFormat:h.A.RGBA}),e._irradianceMapTexture=o;let r=e._irradianceMapFS;(0,A.A)(r)||(r=new B.A({sources:[x.A]}),e._irradianceMapFS=r);const a=new p.A({fragmentShaderSource:r,outputTexture:o,owner:e,uniformMap:{u_radianceMap:()=>e._radianceCubeMap??n.defaultTexture}});a.postExecute=()=>{e.isDestroyed()||a.canceled||(e._irradianceTextureDirty=!1,e._irradianceComputeCommand=void 0,e._sphericalHarmonicCoefficientsDirty=!0,e._irradianceMapFS=void 0),R._activeComputeCommandCount--},e._irradianceComputeCommand=a,R._queueCommand(a,t),e._irradianceTextureDirty=!0}(this,e),this._irradianceCommandDirty=!1),this._irradianceTextureDirty?void(this._shouldRegenerateShaders=!1):this._sphericalHarmonicCoefficientsDirty?(function(e,t){const n=t.context;if(!(0,A.A)(e._irradianceMapTexture))return;const i=new I.A({context:n,colorTextures:[e._irradianceMapTexture],destroyAttachments:!1}),r=k,a=n.readPixels({x:0,y:0,width:r.x,height:r.y,framebuffer:i});for(let t=0;t<9;++t)e._sphericalHarmonicCoefficients[t]=o.A.unpack(a,4*t),o.A.multiplyByScalar(e._sphericalHarmonicCoefficients[t],e.atmosphereScatteringIntensity,e._sphericalHarmonicCoefficients[t]);i.destroy(),e._irradianceMapTexture.destroy(),e._irradianceMapTexture=void 0,e._shouldRegenerateShaders=!0}(this,e),void(this._sphericalHarmonicCoefficientsDirty=!1)):void(this._shouldRegenerateShaders=!1))},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){let e=this._radianceMapComputeCommands.length;for(let t=0;t<e;++t)this._radianceMapComputeCommands[t]=void 0;e=this._convolutionComputeCommands.length;for(let t=0;t<e;++t)this._convolutionComputeCommands[t]=void 0;this._irradianceMapComputeCommand=void 0,e=this._radianceMapTextures.length;for(let t=0;t<e;++t)this._radianceMapTextures[t]=this._radianceMapTextures[t]&&!this._radianceMapTextures[t].isDestroyed()&&this._radianceMapTextures[t].destroy();e=this._specularMapTextures.length;for(let t=0;t<e;++t)this._specularMapTextures[t]=this._specularMapTextures[t]&&!this._specularMapTextures[t].isDestroyed()&&this._specularMapTextures[t].destroy();return this._radianceCubeMap=this._radianceCubeMap&&this._radianceCubeMap.destroy(),this._irradianceMapTexture=this._irradianceMapTexture&&!this._irradianceMapTexture.isDestroyed()&&this._irradianceMapTexture.destroy(),(0,A.A)(this._va)&&this._va.destroy(),(0,A.A)(this._convolveSP)&&this._convolveSP.destroy(),(0,c.A)(this)},R.isDynamicUpdateSupported=function(e){const t=e.context;return t.halfFloatingPointTexture||t.colorBufferFloat},R.AVERAGE_EARTH_GROUND_COLOR=Object.freeze(a.A.fromCssColorString("#717145")),R.DEFAULT_SPHERICAL_HARMONIC_COEFFICIENTS=Object.freeze([Object.freeze(new o.A(.35449,.35449,.35449)),o.A.ZERO,o.A.ZERO,o.A.ZERO,o.A.ZERO,o.A.ZERO,o.A.ZERO,o.A.ZERO,o.A.ZERO]);const G=R},168976:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(660662),o=n(554630),r=n(267980),a=n(430346),s=n(915325),A=n(491446),c=n(677354),l=n(605971),u=n(584164),d=n(769534),h=n(442790),g=n(377496),f=n(760866),p=n(40118),m=n(302836),_=n(342875),I=n(508380),E=n(559352),y=n(437736),C=n(200646),b=n(527083),B=n(608191),v=n(62467);const w={position:0};function T(e){e=e??s.A.EMPTY_OBJECT,this.center=r.A.clone(e.center??r.A.ZERO),this._center=new r.A,this.radii=r.A.clone(e.radii),this._radii=new r.A,this._oneOverEllipsoidRadiiSquared=new r.A,this._boundingSphere=new i.A,this.modelMatrix=u.A.clone(e.modelMatrix??u.A.IDENTITY),this._modelMatrix=new u.A,this._computedModelMatrix=new u.A,this.show=e.show??!0,this.material=e.material??B.A.fromType(B.A.ColorType),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.onlySunLighting=e.onlySunLighting??!1,this._onlySunLighting=!1,this._depthTestEnabled=e.depthTestEnabled??!0,this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new g.A({owner:e._owner??this}),this._pickCommand=new g.A({owner:e._owner??this,pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}T.prototype.update=function(e){if(!this.show||e.mode!==v.A.SCENE3D||!(0,A.A)(this.center)||!(0,A.A)(this.radii))return;if(!(0,A.A)(this.material))throw new l.A("this.material must be defined.");const t=e.context,n=this.material.isTranslucent(),s=this._translucent!==n;(0,A.A)(this._rs)&&!s||(this._translucent=n,this._rs=p.A.fromCache({cull:{enabled:!0,face:b.A.FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!n&&t.fragmentDepth,blending:n?C.A.ALPHA_BLEND:void 0})),(0,A.A)(this._va)||(this._va=function(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if((0,A.A)(t))return t;const n=o.A.createGeometry(o.A.fromDimensions({dimensions:new r.A(2,2,2),vertexFormat:d.A.POSITION_ONLY}));return t=I.A.fromGeometry({context:e,geometry:n,attributeLocations:w,bufferUsage:h.A.STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}(t));let c=!1;const g=this.radii;if(!r.A.equals(this._radii,g)){r.A.clone(g,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(g.x*g.x),e.y=1/(g.y*g.y),e.z=1/(g.z*g.z),c=!0}u.A.equals(this.modelMatrix,this._modelMatrix)&&r.A.equals(this.center,this._center)||(u.A.clone(this.modelMatrix,this._modelMatrix),r.A.clone(this.center,this._center),u.A.multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),c=!0),c&&(r.A.clone(r.A.ZERO,this._boundingSphere.center),this._boundingSphere.radius=r.A.maximumComponent(g),i.A.transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const B=this._material!==this.material;this._material=this.material,this._material.update(t);const T=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const S=e.useLogDepth,x=this._useLogDepth!==S;this._useLogDepth=S;const D=this._colorCommand;let Q,N;(B||T||s||x)&&(Q=new _.A({sources:[y.A]}),N=new _.A({sources:[this.material.shaderSource,E.A]}),this.onlySunLighting&&N.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&N.defines.push("WRITE_DEPTH"),this._useLogDepth&&(Q.defines.push("LOG_DEPTH"),N.defines.push("LOG_DEPTH")),this._sp=m.A.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:Q,fragmentShaderSource:N,attributeLocations:w}),D.vertexArray=this._va,D.renderState=this._rs,D.shaderProgram=this._sp,D.uniformMap=(0,a.A)(this._uniforms,this.material._uniforms),D.executeInClosestFrustum=n);const R=e.commandList,M=e.passes;if(M.render&&(D.boundingVolume=this._boundingSphere,D.debugShowBoundingVolume=this.debugShowBoundingVolume,D.modelMatrix=this._computedModelMatrix,D.pass=n?f.A.TRANSLUCENT:f.A.OPAQUE,R.push(D)),M.pick){const e=this._pickCommand;(0,A.A)(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(B||T||!(0,A.A)(this._pickSP)||x)&&(Q=new _.A({sources:[y.A]}),N=new _.A({sources:[this.material.shaderSource,E.A],pickColorQualifier:"uniform"}),this.onlySunLighting&&N.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&N.defines.push("WRITE_DEPTH"),this._useLogDepth&&(Q.defines.push("LOG_DEPTH"),N.defines.push("LOG_DEPTH")),this._pickSP=m.A.replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:Q,fragmentShaderSource:N,attributeLocations:w}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=(0,a.A)((0,a.A)(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=n),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=n?f.A.TRANSLUCENT:f.A.OPAQUE,R.push(e)}},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,c.A)(this)};const S=T},84269:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(677354),o=n(605971);function r(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(r.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){throw new o.A("Empty3DTileContent cannot have content metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){throw new o.A("Empty3DTileContent cannot have group metadata")}}}),r.prototype.hasProperty=function(e,t){return!1},r.prototype.getFeature=function(e){},r.prototype.applyDebugSettings=function(e,t){},r.prototype.applyStyle=function(e){},r.prototype.update=function(e,t){},r.prototype.pick=function(e,t,n){},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return(0,i.A)(this)};const a=r},470622:(e,t,n)=>{"use strict";n.d(t,{A:()=>Y});var i=n(434067),o=n(267980),r=n(626809),a=n(369031),s=n(41476),A=n(491446),c=n(605971),l=n(367817),u=n(123245);class d{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+d.version}static addUnaryOp(e){return d.max_unop_len=Math.max(e.length,d.max_unop_len),d.unary_ops[e]=1,d}static addBinaryOp(e,t,n){return d.max_binop_len=Math.max(e.length,d.max_binop_len),d.binary_ops[e]=t,n?d.right_associative.add(e):d.right_associative.delete(e),d}static addIdentifierChar(e){return d.additional_identifier_chars.add(e),d}static addLiteral(e,t){return d.literals[e]=t,d}static removeUnaryOp(e){return delete d.unary_ops[e],e.length===d.max_unop_len&&(d.max_unop_len=d.getMaxKeyLen(d.unary_ops)),d}static removeAllUnaryOps(){return d.unary_ops={},d.max_unop_len=0,d}static removeIdentifierChar(e){return d.additional_identifier_chars.delete(e),d}static removeBinaryOp(e){return delete d.binary_ops[e],e.length===d.max_binop_len&&(d.max_binop_len=d.getMaxKeyLen(d.binary_ops)),d.right_associative.delete(e),d}static removeAllBinaryOps(){return d.binary_ops={},d.max_binop_len=0,d}static removeLiteral(e){return delete d.literals[e],d}static removeAllLiterals(){return d.literals={},d}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new d(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(e=>e.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return d.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!d.binary_ops[String.fromCharCode(e)]||d.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return d.isIdentifierStart(e)||d.isDecimalDigit(e)}throwError(e){const t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(d.hooks[e]){const n={context:this,node:t};return d.hooks.run(e,n),n.node}return t}searchHook(e){if(d.hooks[e]){const t={context:this};return d.hooks[e].find(function(e){return e.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===d.SPACE_CODE||e===d.TAB_CODE||e===d.LF_CODE||e===d.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),t=1===e.length?e[0]:{type:d.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t,n,i=[];for(;this.index<this.expr.length;)if(t=this.code,t===d.SEMCOL_CODE||t===d.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())i.push(n);else if(this.index<this.expr.length){if(t===e)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,d.max_binop_len),t=e.length;for(;t>0;){if(d.binary_ops.hasOwnProperty(e)&&(!d.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!d.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,n,i,o,r,a,s,A;if(r=this.gobbleToken(),!r)return r;if(t=this.gobbleBinaryOp(),!t)return r;for(o={value:t,prec:d.binaryPrecedence(t),right_a:d.right_associative.has(t)},a=this.gobbleToken(),a||this.throwError("Expected expression after "+t),i=[r,o,a];t=this.gobbleBinaryOp();){if(n=d.binaryPrecedence(t),0===n){this.index-=t.length;break}o={value:t,prec:n,right_a:d.right_associative.has(t)},A=t;const s=e=>o.right_a&&e.right_a?n>e.prec:n<=e.prec;for(;i.length>2&&s(i[i.length-2]);)a=i.pop(),t=i.pop().value,r=i.pop(),e={type:d.BINARY_EXP,operator:t,left:r,right:a},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+A),i.push(o,e)}for(s=i.length-1,e=i[s];s>1;)e={type:d.BINARY_EXP,operator:i[s-1].value,left:i[s-2],right:e},s-=2;return e}gobbleToken(){let e,t,n,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,d.isDecimalDigit(e)||e===d.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===d.SQUOTE_CODE||e===d.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===d.OBRACK_CODE)i=this.gobbleArray();else{for(t=this.expr.substr(this.index,d.max_unop_len),n=t.length;n>0;){if(d.unary_ops.hasOwnProperty(t)&&(!d.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!d.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=n;const e=this.gobbleToken();return e||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:d.UNARY_EXP,operator:t,argument:e,prefix:!0})}t=t.substr(0,--n)}d.isIdentifierStart(e)?(i=this.gobbleIdentifier(),d.literals.hasOwnProperty(i.name)?i={type:d.LITERAL,value:d.literals[i.name],raw:i.name}:i.name===d.this_str&&(i={type:d.THIS_EXP})):e===d.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===d.PERIOD_CODE||t===d.OBRACK_CODE||t===d.OPAREN_CODE||t===d.QUMARK_CODE;){let n;if(t===d.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==d.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===d.OBRACK_CODE?((e={type:d.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),t=this.code,t!==d.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===d.OPAREN_CODE?e={type:d.CALL_EXP,arguments:this.gobbleArguments(d.CPAREN_CODE),callee:e}:(t===d.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:d.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e,t,n="";for(;d.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(this.code===d.PERIOD_CODE)for(n+=this.expr.charAt(this.index++);d.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(e=this.char,"e"===e||"E"===e){for(n+=this.expr.charAt(this.index++),e=this.char,"+"!==e&&"-"!==e||(n+=this.expr.charAt(this.index++));d.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);d.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+n+this.char+")")}return t=this.code,d.isIdentifierStart(t)?this.throwError("Variable names cannot start with a number ("+n+this.char+")"):(t===d.PERIOD_CODE||1===n.length&&n.charCodeAt(0)===d.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:d.LITERAL,value:parseFloat(n),raw:n}}gobbleStringLiteral(){let e="";const t=this.index,n=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let t=this.expr.charAt(this.index++);if(t===n){i=!0;break}if("\\"===t)switch(t=this.expr.charAt(this.index++),t){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:d.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(d.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,d.isIdentifierPart(e));)this.index++;return{type:d.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){const t=[];let n=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===e){n=!0,this.index++,e===d.CPAREN_CODE&&i&&i>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}if(o===d.COMMA_CODE){if(this.index++,i++,i!==t.length)if(e===d.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===d.CBRACK_CODE)for(let e=t.length;e<i;e++)t.push(null)}else if(t.length!==i&&0!==i)this.throwError("Expected comma");else{const e=this.gobbleExpression();e&&e.type!==d.COMPOUND||this.throwError("Expected comma"),t.push(e)}}return n||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(d.CPAREN_CODE);if(this.code===d.CPAREN_CODE)return this.index++,1===e.length?e[0]:!!e.length&&{type:d.SEQUENCE_EXP,expressions:e};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:d.ARRAY_EXP,elements:this.gobbleArguments(d.CBRACK_CODE)}}}const h=new class{add(e,t,n){if("string"!=typeof arguments[0])for(let e in arguments[0])this.add(e,arguments[0][e],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],t&&this[e][n?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(e){e.call(t&&t.context?t.context:t,t)})}};Object.assign(d,{hooks:h,plugins:new class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(e=>{if("object"!=typeof e||!e.name||!e.init)throw new Error("Invalid JSEP plugin format");this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)})}}(d),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),d.max_unop_len=d.getMaxKeyLen(d.unary_ops),d.max_binop_len=d.getMaxKeyLen(d.binary_ops);const g=e=>new d(e).parse(),f=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(d).filter(e=>!f.includes(e)&&void 0===g[e]).forEach(e=>{g[e]=d[e]}),g.Jsep=d;var p={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;const n=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),t.node={type:"ConditionalExpression",test:n,consequent:i,alternate:o},n.operator&&e.binary_ops[n.operator]<=.9){let i=n;for(;i.right.operator&&e.binary_ops[i.right.operator]<=.9;)i=i.right;t.node.test=i.right,i.right=t.node,t.node=n}}else this.throwError("Expected :")}})}};g.plugins.register(p);var m=n(203576);function _(e,t){let n;a.A.typeOf.string("expression",e),this._expression=e,e=function(e,t){if(!(0,A.A)(t))return e;for(const n in t)if(t.hasOwnProperty(n)){const i=new RegExp(`\\$\\{${n}\\}`,"g"),o=`(${t[n]})`;(0,A.A)(o)&&(e=e.replace(i,o))}return e}(e,t),e=function(e){let t=e,n="",i=t.indexOf("${");for(;i>=0;){const e=t.indexOf("'"),o=t.indexOf('"');let r;if(e>=0&&e<i)r=t.indexOf("'",e+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else if(o>=0&&o<i)r=t.indexOf('"',o+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else{n+=t.substr(0,i);const e=t.indexOf("}");if(e<0)throw new u.A("Unmatched {.");n+=`czm_${t.substr(i+2,e-(i+2))}`,t=t.substr(e+1),i=t.indexOf("${")}}return n+=t,n}(function(e){return e.replace(b,B)}(e)),g.addBinaryOp("=~",0),g.addBinaryOp("!~",0);try{n=g(e)}catch(e){throw new u.A(e)}this._runtimeAst=P(this,n)}Object.defineProperties(_.prototype,{expression:{get:function(){return this._expression}}});const I={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new i.A],cartesian3Array:[new o.A],cartesian4Array:[new r.A],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new i.A),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new o.A),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new r.A),this.cartesian4Array[this.cartesian4Index++]}};_.prototype.evaluate=function(e,t){I.reset();const n=this._runtimeAst.evaluate(e);return t instanceof s.A&&n instanceof r.A?s.A.fromCartesian4(n,t):n instanceof i.A||n instanceof o.A||n instanceof r.A?n.clone(t):n},_.prototype.evaluateColor=function(e,t){I.reset();const n=this._runtimeAst.evaluate(e);return s.A.fromCartesian4(n,t)},_.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e}\n{\n    return ${o};\n}\n`,o},_.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},_.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter(function(e,t,n){return n.indexOf(e)===t}),e};const E=["!","-","+"],y=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],C=/\${(.*?)}/g,b=/\\/g,B="@#%",v=/@#%/g,w=new s.A,T={abs:D(Math.abs),sqrt:D(Math.sqrt),cos:D(Math.cos),sin:D(Math.sin),tan:D(Math.tan),acos:D(Math.acos),asin:D(Math.asin),atan:D(Math.atan),radians:D(l.A.toRadians),degrees:D(l.A.toDegrees),sign:D(l.A.sign),floor:D(Math.floor),ceil:D(Math.ceil),round:D(Math.round),exp:D(Math.exp),exp2:D(function(e){return Math.pow(2,e)}),log:D(Math.log),log2:D(function(e){return l.A.log2(e)}),fract:D(function(e){return e-Math.floor(e)}),length:function(e,t){if("number"==typeof t)return Math.abs(t);if(t instanceof i.A)return i.A.magnitude(t);if(t instanceof o.A)return o.A.magnitude(t);if(t instanceof r.A)return r.A.magnitude(t);throw new u.A(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)},normalize:function(e,t){if("number"==typeof t)return 1;if(t instanceof i.A)return i.A.normalize(t,I.getCartesian2());if(t instanceof o.A)return o.A.normalize(t,I.getCartesian3());if(t instanceof r.A)return r.A.normalize(t,I.getCartesian4());throw new u.A(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}},S={atan2:Q(Math.atan2,!1),pow:Q(Math.pow,!1),min:Q(Math.min,!0),max:Q(Math.max,!0),distance:function(e,t,n){if("number"==typeof t&&"number"==typeof n)return Math.abs(t-n);if(t instanceof i.A&&n instanceof i.A)return i.A.distance(t,n);if(t instanceof o.A&&n instanceof o.A)return o.A.distance(t,n);if(t instanceof r.A&&n instanceof r.A)return r.A.distance(t,n);throw new u.A(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},dot:function(e,t,n){if("number"==typeof t&&"number"==typeof n)return t*n;if(t instanceof i.A&&n instanceof i.A)return i.A.dot(t,n);if(t instanceof o.A&&n instanceof o.A)return o.A.dot(t,n);if(t instanceof r.A&&n instanceof r.A)return r.A.dot(t,n);throw new u.A(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},cross:function(e,t,n){if(t instanceof o.A&&n instanceof o.A)return o.A.cross(t,n,I.getCartesian3());throw new u.A(`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${n}.`)}},x={clamp:N(l.A.clamp,!0),mix:N(l.A.lerp,!0)};function D(e){return function(t,n){if("number"==typeof n)return e(n);if(n instanceof i.A)return i.A.fromElements(e(n.x),e(n.y),I.getCartesian2());if(n instanceof o.A)return o.A.fromElements(e(n.x),e(n.y),e(n.z),I.getCartesian3());if(n instanceof r.A)return r.A.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),I.getCartesian4());throw new u.A(`Function "${t}" requires a vector or number argument. Argument is ${n}.`)}}function Q(e,t){return function(n,a,s){if(t&&"number"==typeof s){if("number"==typeof a)return e(a,s);if(a instanceof i.A)return i.A.fromElements(e(a.x,s),e(a.y,s),I.getCartesian2());if(a instanceof o.A)return o.A.fromElements(e(a.x,s),e(a.y,s),e(a.z,s),I.getCartesian3());if(a instanceof r.A)return r.A.fromElements(e(a.x,s),e(a.y,s),e(a.z,s),e(a.w,s),I.getCartesian4())}if("number"==typeof a&&"number"==typeof s)return e(a,s);if(a instanceof i.A&&s instanceof i.A)return i.A.fromElements(e(a.x,s.x),e(a.y,s.y),I.getCartesian2());if(a instanceof o.A&&s instanceof o.A)return o.A.fromElements(e(a.x,s.x),e(a.y,s.y),e(a.z,s.z),I.getCartesian3());if(a instanceof r.A&&s instanceof r.A)return r.A.fromElements(e(a.x,s.x),e(a.y,s.y),e(a.z,s.z),e(a.w,s.w),I.getCartesian4());throw new u.A(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${a} and ${s}.`)}}function N(e,t){return function(n,a,s,A){if(t&&"number"==typeof A){if("number"==typeof a&&"number"==typeof s)return e(a,s,A);if(a instanceof i.A&&s instanceof i.A)return i.A.fromElements(e(a.x,s.x,A),e(a.y,s.y,A),I.getCartesian2());if(a instanceof o.A&&s instanceof o.A)return o.A.fromElements(e(a.x,s.x,A),e(a.y,s.y,A),e(a.z,s.z,A),I.getCartesian3());if(a instanceof r.A&&s instanceof r.A)return r.A.fromElements(e(a.x,s.x,A),e(a.y,s.y,A),e(a.z,s.z,A),e(a.w,s.w,A),I.getCartesian4())}if("number"==typeof a&&"number"==typeof s&&"number"==typeof A)return e(a,s,A);if(a instanceof i.A&&s instanceof i.A&&A instanceof i.A)return i.A.fromElements(e(a.x,s.x,A.x),e(a.y,s.y,A.y),I.getCartesian2());if(a instanceof o.A&&s instanceof o.A&&A instanceof o.A)return o.A.fromElements(e(a.x,s.x,A.x),e(a.y,s.y,A.y),e(a.z,s.z,A.z),I.getCartesian3());if(a instanceof r.A&&s instanceof r.A&&A instanceof r.A)return r.A.fromElements(e(a.x,s.x,A.x),e(a.y,s.y,A.y),e(a.z,s.z,A.z),e(a.w,s.w,A.w),I.getCartesian4());throw new u.A(`Function "${n}" requires vector or number arguments of matching types. Arguments are ${a}, ${s}, and ${A}.`)}}function R(e,t,n,i,o){var r;this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,(r=this)._type===m.A.CONDITIONAL?r.evaluate=r._evaluateConditional:r._type===m.A.FUNCTION_CALL?"test"===r._value?r.evaluate=r._evaluateRegExpTest:"exec"===r._value?r.evaluate=r._evaluateRegExpExec:"toString"===r._value&&(r.evaluate=r._evaluateToString):r._type===m.A.UNARY?"!"===r._value?r.evaluate=r._evaluateNot:"-"===r._value?r.evaluate=r._evaluateNegative:"+"===r._value?r.evaluate=r._evaluatePositive:"isNaN"===r._value?r.evaluate=r._evaluateNaN:"isFinite"===r._value?r.evaluate=r._evaluateIsFinite:"isExactClass"===r._value?r.evaluate=r._evaluateIsExactClass:"isClass"===r._value?r.evaluate=r._evaluateIsClass:"getExactClassName"===r._value?r.evaluate=r._evaluateGetExactClassName:"Boolean"===r._value?r.evaluate=r._evaluateBooleanConversion:"Number"===r._value?r.evaluate=r._evaluateNumberConversion:"String"===r._value?r.evaluate=r._evaluateStringConversion:(0,A.A)(T[r._value])&&(r.evaluate=function(e){const t=T[e];return function(n){const i=this._left.evaluate(n);return t(e,i)}}(r._value)):r._type===m.A.BINARY?"+"===r._value?r.evaluate=r._evaluatePlus:"-"===r._value?r.evaluate=r._evaluateMinus:"*"===r._value?r.evaluate=r._evaluateTimes:"/"===r._value?r.evaluate=r._evaluateDivide:"%"===r._value?r.evaluate=r._evaluateMod:"==="===r._value?r.evaluate=r._evaluateEqualsStrict:"!=="===r._value?r.evaluate=r._evaluateNotEqualsStrict:"<"===r._value?r.evaluate=r._evaluateLessThan:"<="===r._value?r.evaluate=r._evaluateLessThanOrEquals:">"===r._value?r.evaluate=r._evaluateGreaterThan:">="===r._value?r.evaluate=r._evaluateGreaterThanOrEquals:"&&"===r._value?r.evaluate=r._evaluateAnd:"||"===r._value?r.evaluate=r._evaluateOr:"=~"===r._value?r.evaluate=r._evaluateRegExpMatch:"!~"===r._value?r.evaluate=r._evaluateRegExpNotMatch:(0,A.A)(S[r._value])&&(r.evaluate=function(e){const t=S[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n);return t(e,i,o)}}(r._value)):r._type===m.A.TERNARY?r.evaluate=function(e){const t=x[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n),r=this._test.evaluate(n);return t(e,i,o,r)}}(r._value):r._type===m.A.MEMBER?"brackets"===r._value?r.evaluate=r._evaluateMemberBrackets:r.evaluate=r._evaluateMemberDot:r._type===m.A.ARRAY?r.evaluate=r._evaluateArray:r._type===m.A.VARIABLE?r.evaluate=r._evaluateVariable:r._type===m.A.VARIABLE_IN_STRING?r.evaluate=r._evaluateVariableString:r._type===m.A.LITERAL_COLOR?r.evaluate=r._evaluateLiteralColor:r._type===m.A.LITERAL_VECTOR?r.evaluate=r._evaluateLiteralVector:r._type===m.A.LITERAL_STRING?r.evaluate=r._evaluateLiteralString:r._type===m.A.REGEX?r.evaluate=r._evaluateRegExp:r._type===m.A.BUILTIN_VARIABLE?"tiles3d_tileset_time"===r._value&&(r.evaluate=O):r.evaluate=r._evaluateLiteral}function M(e){return e.replace(v,"\\")}function L(e){return e._type>=m.A.LITERAL_NULL}function P(e,t){let n,i,o,r;if("Literal"===t.type)n=function(e){const t=typeof e.value;return null===e.value?new R(m.A.LITERAL_NULL,null):"boolean"===t?new R(m.A.LITERAL_BOOLEAN,e.value):"number"===t?new R(m.A.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new R(m.A.VARIABLE_IN_STRING,e.value):new R(m.A.LITERAL_STRING,M(e.value)):void 0}(t);else if("CallExpression"===t.type)n=function(e,t){const n=t.arguments,i=n.length;let o,r,a,s;if("MemberExpression"===t.callee.type){o=t.callee.property.name;const c=t.callee.object;if("test"===o||"exec"===o){if(!(0,A.A)(c.callee)||"regExp"!==c.callee.name)throw new u.A(`${o} is not a function.`);return 0===i?"test"===o?new R(m.A.LITERAL_BOOLEAN,!1):new R(m.A.LITERAL_NULL,null):(a=P(e,c),s=P(e,n[0]),new R(m.A.FUNCTION_CALL,o,a,s))}if("toString"===o)return r=P(e,c),new R(m.A.FUNCTION_CALL,o,r);throw new u.A(`Unexpected function call "${o}".`)}if(o=t.callee.name,"color"===o){if(0===i)return new R(m.A.LITERAL_COLOR,o);if(r=P(e,n[0]),(0,A.A)(n[1])){const t=P(e,n[1]);return new R(m.A.LITERAL_COLOR,o,[r,t])}return new R(m.A.LITERAL_COLOR,o,[r])}if("rgb"===o||"hsl"===o){if(i<3)throw new u.A(`${o} requires three arguments.`);return r=[P(e,n[0]),P(e,n[1]),P(e,n[2])],new R(m.A.LITERAL_COLOR,o,r)}if("rgba"===o||"hsla"===o){if(i<4)throw new u.A(`${o} requires four arguments.`);return r=[P(e,n[0]),P(e,n[1]),P(e,n[2]),P(e,n[3])],new R(m.A.LITERAL_COLOR,o,r)}if("vec2"===o||"vec3"===o||"vec4"===o){r=new Array(i);for(let t=0;t<i;++t)r[t]=P(e,n[t]);return new R(m.A.LITERAL_VECTOR,o,r)}if("isNaN"===o||"isFinite"===o)return 0===i?new R(m.A.LITERAL_BOOLEAN,"isNaN"===o):(r=P(e,n[0]),new R(m.A.UNARY,o,r));if("isExactClass"===o||"isClass"===o){if(i<1||i>1)throw new u.A(`${o} requires exactly one argument.`);return r=P(e,n[0]),new R(m.A.UNARY,o,r)}if("getExactClassName"===o){if(i>0)throw new u.A(`${o} does not take any argument.`);return new R(m.A.UNARY,o)}if((0,A.A)(T[o])){if(1!==i)throw new u.A(`${o} requires exactly one argument.`);return r=P(e,n[0]),new R(m.A.UNARY,o,r)}if((0,A.A)(S[o])){if(2!==i)throw new u.A(`${o} requires exactly two arguments.`);return a=P(e,n[0]),s=P(e,n[1]),new R(m.A.BINARY,o,a,s)}if((0,A.A)(x[o])){if(3!==i)throw new u.A(`${o} requires exactly three arguments.`);a=P(e,n[0]),s=P(e,n[1]);const t=P(e,n[2]);return new R(m.A.TERNARY,o,a,s,t)}if("Boolean"===o)return 0===i?new R(m.A.LITERAL_BOOLEAN,!1):(r=P(e,n[0]),new R(m.A.UNARY,o,r));if("Number"===o)return 0===i?new R(m.A.LITERAL_NUMBER,0):(r=P(e,n[0]),new R(m.A.UNARY,o,r));if("String"===o)return 0===i?new R(m.A.LITERAL_STRING,""):(r=P(e,n[0]),new R(m.A.UNARY,o,r));if("regExp"===o)return function(e,t){const n=t.arguments;if(0===n.length)return new R(m.A.LITERAL_REGEX,new RegExp);const i=P(e,n[0]);let o;if(n.length>1){const t=P(e,n[1]);if(L(i)&&L(t)){try{o=new RegExp(M(String(i._value)),t._value)}catch(e){throw new u.A(e)}return new R(m.A.LITERAL_REGEX,o)}return new R(m.A.REGEX,i,t)}if(L(i)){try{o=new RegExp(M(String(i._value)))}catch(e){throw new u.A(e)}return new R(m.A.LITERAL_REGEX,o)}return new R(m.A.REGEX,i)}(e,t);throw new u.A(`Unexpected function call "${o}".`)}(e,t);else if("Identifier"===t.type)n=function(e){if("czm_"===e.name.substr(0,4)){const t=e.name.substr(4);return"tiles3d_"===t.substr(0,8)?new R(m.A.BUILTIN_VARIABLE,t):new R(m.A.VARIABLE,t)}if("NaN"===e.name)return new R(m.A.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new R(m.A.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new R(m.A.LITERAL_UNDEFINED,void 0);throw new u.A(`${e.name} is not defined.`)}(t);else if("UnaryExpression"===t.type){i=t.operator;const o=P(e,t.argument);if(!(E.indexOf(i)>-1))throw new u.A(`Unexpected operator "${i}".`);n=new R(m.A.UNARY,i,o)}else if("BinaryExpression"===t.type){if(i=t.operator,o=P(e,t.left),r=P(e,t.right),!(y.indexOf(i)>-1))throw new u.A(`Unexpected operator "${i}".`);n=new R(m.A.BINARY,i,o,r)}else if("LogicalExpression"===t.type)i=t.operator,o=P(e,t.left),r=P(e,t.right),y.indexOf(i)>-1&&(n=new R(m.A.BINARY,i,o,r));else if("ConditionalExpression"===t.type){const i=P(e,t.test);o=P(e,t.consequent),r=P(e,t.alternate),n=new R(m.A.CONDITIONAL,"?",o,r,i)}else if("MemberExpression"===t.type)n=function(e,t){if("Math"===t.object.name)return function(e){const t=e.property.name;return"PI"===t?new R(m.A.LITERAL_NUMBER,Math.PI):"E"===t?new R(m.A.LITERAL_NUMBER,Math.E):void 0}(t);if("Number"===t.object.name)return function(e){if("POSITIVE_INFINITY"===e.property.name)return new R(m.A.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}(t);let n;const i=P(e,t.object);return t.computed?(n=P(e,t.property),new R(m.A.MEMBER,"brackets",i,n)):(n=new R(m.A.LITERAL_STRING,t.property.name),new R(m.A.MEMBER,"dot",i,n))}(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new u.A("Provide exactly one expression."):new u.A("Cannot parse expression.");{const i=[];for(let n=0;n<t.elements.length;n++)i[n]=P(e,t.elements[n]);n=new R(m.A.ARRAY,i)}}return n}function O(e){return(0,A.A)(e)?e.content.tileset.timeSinceLoad:0}function F(e,t){if((0,A.A)(e))return e.getPropertyInherited(t)}function U(e){return"feature"===e._value}function k(e){const t=e._left,n=t.length;for(let e=0;e<n;++e)if(t[e]._type!==m.A.LITERAL_NUMBER)return;const i=t[0]._value,o=t[1]._value,r=t[2]._value,a=4===n?t[3]._value:1;return s.A.fromHsl(i,o,r,a,w)}function G(e){const t=e._left,n=t.length;for(let e=0;e<n;++e)if(t[e]._type!==m.A.LITERAL_NUMBER)return;const i=w;return i.red=t[0]._value/255,i.green=t[1]._value/255,i.blue=t[2]._value/255,i.alpha=4===n?t[3]._value:1,i}function H(e){return e%1==0?e.toFixed(1):e.toString()}function V(e){return`vec4(${H(e.red)}, ${H(e.green)}, ${H(e.blue)}, ${H(e.alpha)})`}function z(e,t,n,i){const o=e.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=e[a].getShaderExpression(t,n,i);return r}function j(e,t){return(0,A.A)(t[e])?t[e]:_.NULL_SENTINEL}R.prototype._evaluateLiteral=function(){return this._value},R.prototype._evaluateLiteralColor=function(e){const t=w,n=this._left;if("color"===this._value)(0,A.A)(n)?n.length>1?(s.A.fromCssColorString(n[0].evaluate(e),t),t.alpha=n[1].evaluate(e)):s.A.fromCssColorString(n[0].evaluate(e),t):s.A.fromBytes(255,255,255,255,t);else if("rgb"===this._value)s.A.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),255,t);else if("rgba"===this._value){const i=255*n[3].evaluate(e);s.A.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),i,t)}else"hsl"===this._value?s.A.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),1,t):"hsla"===this._value&&s.A.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),n[3].evaluate(e),t);return r.A.fromColor(t,I.getCartesian4())},R.prototype._evaluateLiteralVector=function(e){const t=I.getArray(),n=this._value,a=this._left,s=a.length;for(let A=0;A<s;++A){const s=a[A].evaluate(e);if("number"==typeof s)t.push(s);else if(s instanceof i.A)t.push(s.x,s.y);else if(s instanceof o.A)t.push(s.x,s.y,s.z);else{if(!(s instanceof r.A))throw new u.A(`${n} argument must be a vector or number. Argument is ${s}.`);t.push(s.x,s.y,s.z,s.w)}}const A=t.length,c=parseInt(n.charAt(3));if(0===A)throw new u.A(`Invalid ${n} constructor. No valid arguments.`);if(A<c&&A>1)throw new u.A(`Invalid ${n} constructor. Not enough arguments.`);if(A>c&&s>1)throw new u.A(`Invalid ${n} constructor. Too many arguments.`);if(1===A){const e=t[0];t.push(e,e,e)}return"vec2"===n?i.A.fromArray(t,0,I.getCartesian2()):"vec3"===n?o.A.fromArray(t,0,I.getCartesian3()):"vec4"===n?r.A.fromArray(t,0,I.getCartesian4()):void 0},R.prototype._evaluateLiteralString=function(){return this._value},R.prototype._evaluateVariableString=function(e){let t=this._value,n=C.exec(t);for(;null!==n;){const i=n[0];let o=F(e,n[1]);(0,A.A)(o)||(o=""),t=t.replace(i,o),C.lastIndex+=o.length-i.length,n=C.exec(t)}return t},R.prototype._evaluateVariable=function(e){return F(e,this._value)},R.prototype._evaluateMemberDot=function(e){if(U(this._left))return F(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,A.A)(t))return;const n=this._right.evaluate(e);if(t instanceof i.A||t instanceof o.A||t instanceof r.A){if("r"===n)return t.x;if("g"===n)return t.y;if("b"===n)return t.z;if("a"===n)return t.w}return t[n]},R.prototype._evaluateMemberBrackets=function(e){if(U(this._left))return F(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,A.A)(t))return;const n=this._right.evaluate(e);if(t instanceof i.A||t instanceof o.A||t instanceof r.A){if(0===n||"r"===n)return t.x;if(1===n||"g"===n)return t.y;if(2===n||"b"===n)return t.z;if(3===n||"a"===n)return t.w}return t[n]},R.prototype._evaluateArray=function(e){const t=[];for(let n=0;n<this._value.length;n++)t[n]=this._value[n].evaluate(e);return t},R.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new u.A(`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},R.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof i.A)return i.A.negate(t,I.getCartesian2());if(t instanceof o.A)return o.A.negate(t,I.getCartesian3());if(t instanceof r.A)return r.A.negate(t,I.getCartesian4());if("number"==typeof t)return-t;throw new u.A(`Operator "-" requires a vector or number argument. Argument is ${t}.`)},R.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof i.A||t instanceof o.A||t instanceof r.A||"number"==typeof t))throw new u.A(`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},R.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new u.A(`Operator "<" requires number arguments. Arguments are ${t} and ${n}.`);return t<n},R.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new u.A(`Operator "<=" requires number arguments. Arguments are ${t} and ${n}.`);return t<=n},R.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new u.A(`Operator ">" requires number arguments. Arguments are ${t} and ${n}.`);return t>n},R.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof n)throw new u.A(`Operator ">=" requires number arguments. Arguments are ${t} and ${n}.`);return t>=n},R.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new u.A(`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const n=this._right.evaluate(e);if("boolean"!=typeof n)throw new u.A(`Operator "||" requires boolean arguments. Second argument is ${n}.`);return t||n},R.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new u.A(`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const n=this._right.evaluate(e);if("boolean"!=typeof n)throw new u.A(`Operator "&&" requires boolean arguments. Second argument is ${n}.`);return t&&n},R.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.add(t,n,I.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.add(t,n,I.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.add(t,n,I.getCartesian4());if("string"==typeof t||"string"==typeof n)return t+n;if("number"==typeof t&&"number"==typeof n)return t+n;throw new u.A(`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${n}.`)},R.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.subtract(t,n,I.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.subtract(t,n,I.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.subtract(t,n,I.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t-n;throw new u.A(`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},R.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.multiplyComponents(t,n,I.getCartesian2());if(n instanceof i.A&&"number"==typeof t)return i.A.multiplyByScalar(n,t,I.getCartesian2());if(t instanceof i.A&&"number"==typeof n)return i.A.multiplyByScalar(t,n,I.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.multiplyComponents(t,n,I.getCartesian3());if(n instanceof o.A&&"number"==typeof t)return o.A.multiplyByScalar(n,t,I.getCartesian3());if(t instanceof o.A&&"number"==typeof n)return o.A.multiplyByScalar(t,n,I.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.multiplyComponents(t,n,I.getCartesian4());if(n instanceof r.A&&"number"==typeof t)return r.A.multiplyByScalar(n,t,I.getCartesian4());if(t instanceof r.A&&"number"==typeof n)return r.A.multiplyByScalar(t,n,I.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t*n;throw new u.A(`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${n}.`)},R.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.divideComponents(t,n,I.getCartesian2());if(t instanceof i.A&&"number"==typeof n)return i.A.divideByScalar(t,n,I.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.divideComponents(t,n,I.getCartesian3());if(t instanceof o.A&&"number"==typeof n)return o.A.divideByScalar(t,n,I.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.divideComponents(t,n,I.getCartesian4());if(t instanceof r.A&&"number"==typeof n)return r.A.divideByScalar(t,n,I.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t/n;throw new u.A(`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${n}.`)},R.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof i.A&&t instanceof i.A)return i.A.fromElements(t.x%n.x,t.y%n.y,I.getCartesian2());if(n instanceof o.A&&t instanceof o.A)return o.A.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,I.getCartesian3());if(n instanceof r.A&&t instanceof r.A)return r.A.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,t.w%n.w,I.getCartesian4());if("number"==typeof t&&"number"==typeof n)return t%n;throw new u.A(`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},R.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof i.A&&t instanceof i.A||n instanceof o.A&&t instanceof o.A||n instanceof r.A&&t instanceof r.A?t.equals(n):t===n},R.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof i.A&&t instanceof i.A||n instanceof o.A&&t instanceof o.A||n instanceof r.A&&t instanceof r.A?!t.equals(n):t!==n},R.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!=typeof t)throw new u.A(`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},R.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},R.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},R.prototype._evaluateIsExactClass=function(e){return!!(0,A.A)(e)&&e.isExactClass(this._left.evaluate(e))},R.prototype._evaluateIsClass=function(e){return!!(0,A.A)(e)&&e.isClass(this._left.evaluate(e))},R.prototype._evaluateGetExactClassName=function(e){if((0,A.A)(e))return e.getExactClassName()},R.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},R.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},R.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},R.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let n,i="";(0,A.A)(this._left)&&(i=this._left.evaluate(e));try{n=new RegExp(t,i)}catch(e){throw new u.A(e)}return n},R.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof n))throw new u.A(`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);return t.test(n)},R.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof n)return t.test(n);if(n instanceof RegExp&&"string"==typeof t)return n.test(t);throw new u.A(`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},R.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof n)return!t.test(n);if(n instanceof RegExp&&"string"==typeof t)return!n.test(t);throw new u.A(`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},R.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof n))throw new u.A(`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);const i=t.exec(n);return(0,A.A)(i)?i[1]:null},R.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof i.A||t instanceof o.A||t instanceof r.A)return String(t);throw new u.A(`Unexpected function call "${this._value}".`)},_.NULL_SENTINEL="czm_infinity",R.prototype.getShaderExpression=function(e,t,n){let i,o,r,a;const l=this._type;let d,h,g,f=this._value;switch((0,A.A)(this._left)&&(o=Array.isArray(this._left)?z(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),(0,A.A)(this._right)&&(r=this._right.getShaderExpression(e,t,this)),(0,A.A)(this._test)&&(a=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(f=z(this._value,e,t,this)),l){case m.A.VARIABLE:if(U(this))return;return j(f,e);case m.A.UNARY:if("Boolean"===f)return`bool(${o})`;if("Number"===f)return`float(${o})`;if("round"===f)return`floor(${o} + 0.5)`;if((0,A.A)(T[f]))return`${f}(${o})`;if("isNaN"===f)return`(${o} != ${o})`;if("isFinite"===f)return`(abs(${o}) < czm_infinity)`;if("String"===f||"isExactClass"===f||"isClass"===f||"getExactClassName"===f)throw new u.A(`Error generating style shader: "${f}" is not supported.`);return f+o;case m.A.BINARY:return"%"===f?`mod(${o}, ${r})`:"==="===f?`(${o} == ${r})`:"!=="===f?`(${o} != ${r})`:"atan2"===f?`atan(${o}, ${r})`:(0,A.A)(S[f])?`${f}(${o}, ${r})`:`(${o} ${f} ${r})`;case m.A.TERNARY:if((0,A.A)(x[f]))return`${f}(${o}, ${r}, ${a})`;break;case m.A.CONDITIONAL:return`(${a} ? ${o} : ${r})`;case m.A.MEMBER:return U(this._left)?j(r,e):"r"===r||"x"===r||"0.0"===r?`${o}[0]`:"g"===r||"y"===r||"1.0"===r?`${o}[1]`:"b"===r||"z"===r||"2.0"===r?`${o}[2]`:"a"===r||"w"===r||"3.0"===r?`${o}[3]`:`${o}[int(${r})]`;case m.A.FUNCTION_CALL:throw new u.A(`Error generating style shader: "${f}" is not supported.`);case m.A.ARRAY:if(4===f.length)return`vec4(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`;if(3===f.length)return`vec3(${f[0]}, ${f[1]}, ${f[2]})`;if(2===f.length)return`vec2(${f[0]}, ${f[1]})`;throw new u.A("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case m.A.REGEX:throw new u.A("Error generating style shader: Regular expressions are not supported.");case m.A.VARIABLE_IN_STRING:throw new u.A("Error generating style shader: Converting a variable to a string is not supported.");case m.A.LITERAL_NULL:return _.NULL_SENTINEL;case m.A.LITERAL_BOOLEAN:return f?"true":"false";case m.A.LITERAL_NUMBER:return H(f);case m.A.LITERAL_STRING:if((0,A.A)(n)&&n._type===m.A.MEMBER&&("r"===f||"g"===f||"b"===f||"a"===f||"x"===f||"y"===f||"z"===f||"w"===f||U(n._left)))return f;if(i=s.A.fromCssColorString(f,w),(0,A.A)(i))return function(e){return`vec3(${H(e.red)}, ${H(e.green)}, ${H(e.blue)})`}(i);throw new u.A("Error generating style shader: String literals are not supported.");case m.A.LITERAL_COLOR:if(d=o,"color"===f){if(!(0,A.A)(d))return"vec4(1.0)";if(d.length>1){const e=d[0],n=d[1];return"1.0"!==n&&(t.translucent=!0),`vec4(${e}, ${n})`}return`vec4(${d[0]}, 1.0)`}if("rgb"===f)return i=G(this),(0,A.A)(i)?V(i):`vec4(${d[0]} / 255.0, ${d[1]} / 255.0, ${d[2]} / 255.0, 1.0)`;if("rgba"===f)return"1.0"!==d[3]&&(t.translucent=!0),i=G(this),(0,A.A)(i)?V(i):`vec4(${d[0]} / 255.0, ${d[1]} / 255.0, ${d[2]} / 255.0, ${d[3]})`;if("hsl"===f)return i=k(this),(0,A.A)(i)?V(i):`vec4(czm_HSLToRGB(vec3(${d[0]}, ${d[1]}, ${d[2]})), 1.0)`;if("hsla"===f)return i=k(this),(0,A.A)(i)?(1!==i.alpha&&(t.translucent=!0),V(i)):("1.0"!==d[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${d[0]}, ${d[1]}, ${d[2]})), ${d[3]})`);break;case m.A.LITERAL_VECTOR:if(!(0,A.A)(o))throw new c.A("left should always be defined for type ExpressionNodeType.LITERAL_VECTOR");h=o.length,g=`${f}(`;for(let e=0;e<h;++e)g+=o[e],e<h-1&&(g+=", ");return g+=")",g;case m.A.LITERAL_REGEX:throw new u.A("Error generating style shader: Regular expressions are not supported.");case m.A.LITERAL_UNDEFINED:return _.NULL_SENTINEL;case m.A.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===f)return f}},R.prototype.getVariables=function(e,t){let n,i,o;const r=this._type,a=this._value;if((0,A.A)(this._left))if(Array.isArray(this._left))for(n=this._left,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);else this._left.getVariables(e,this);if((0,A.A)(this._right)&&this._right.getVariables(e,this),(0,A.A)(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(n=this._value,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);let s;switch(r){case m.A.VARIABLE:U(this)||e.push(a);break;case m.A.VARIABLE_IN_STRING:for(s=C.exec(a);null!==s;)e.push(s[1]),s=C.exec(a);break;case m.A.LITERAL_STRING:(0,A.A)(t)&&t._type===m.A.MEMBER&&U(t._left)&&e.push(a)}};const Y=_},203576:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18})},5244:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(267980),o=n(491446),r=n(605971),a=n(367817),s=n(62467);function A(){this.enabled=!0,this.renderable=!0,this.density=6e-4,this.heightScalar=.001,this._heightFalloff=.59,this.maxHeight=8e5,this.visualDensityScalar=.15,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}Object.defineProperties(A.prototype,{heightFalloff:{get:function(){return this._heightFalloff},set:function(e){if((0,o.A)(e)&&e<0)throw new r.A("value must be positive.");this._heightFalloff=e}}});const c=new i.A;A.prototype.update=function(e){if(!(e.fog.enabled=this.enabled))return;e.fog.renderable=this.renderable;const t=e.camera,n=t.positionCartographic;if(!(0,o.A)(n)||n.height>this.maxHeight||e.mode!==s.A.SCENE3D)return e.fog.enabled=!1,void(e.fog.density=0);const r=n.height;let A=this.density*this.heightScalar*Math.pow(Math.max(r/this.maxHeight,a.A.EPSILON4),-Math.max(this._heightFalloff,0));const l=i.A.normalize(t.positionWC,c);A*=1-Math.abs(i.A.dot(t.directionWC,l)),e.fog.density=A,e.fog.visualDensityScalar=this.visualDensityScalar,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness};const l=A},346400:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(62467);const o=function(e,t,n){this.context=e,this.commandList=[],this.shadowMaps=[],this.brdfLutGenerator=void 0,this.environmentMap=void 0,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this.specularEnvironmentMapsMaximumLOD=void 0,this.mode=i.A.SCENE3D,this.morphTime=i.A.getMorphTime(i.A.SCENE3D),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.jobScheduler=n,this.mapProjection=void 0,this.camera=void 0,this.cameraUnderground=!1,this.globeTranslucencyState=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.maximumScreenSpaceError=void 0,this.pixelRatio=1,this.passes={render:!1,pick:!1,pickVoxel:!1,depth:!1,postProcess:!1,offscreen:!1},this.creditDisplay=t,this.afterRender=[],this.scene3DOnly=!1,this.fog={enabled:!1,renderable:!1,density:void 0,visualDensityScalar:void 0,sse:void 0,minimumBrightness:void 0},this.atmosphere=void 0,this.verticalExaggeration=1,this.verticalExaggerationRelativeHeight=0,this.shadowState={shadowsEnabled:!0,shadowMaps:[],lightShadowMaps:[],nearPlane:1,farPlane:5e3,closestObjectSize:1e3,lastDirtyTime:0,outOfView:!0},this.splitPosition=0,this.frustumSplits=[],this.backgroundColor=void 0,this.light=void 0,this.minimumDisableDepthTestDistance=void 0,this.invertClassification=!1,this.invertClassificationColor=void 0,this.useLogDepth=!1,this.tilesetPassState=void 0,this.minimumTerrainHeight=0,this.pickingMetadata=!1,this.pickedMetadataInfo=void 0}},311664:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(760866);const o=function(e,t){this.near=e??0,this.far=t??0;const n=i.A.NUMBER_OF_PASSES,o=new Array(n),r=new Array(n);for(let e=0;e<n;++e)o[e]=[],r[e]=0;this.commands=o,this.indices=r}},271845:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(491446),o=n(744603),r=n(982504),a=n(123245),s=n(320475),A=n(472360),c=n(677354),l=n(471147),u=n(595826),d=n(786101);function h(e,t,n,o){this._tileset=t,this._tile=n,this._resource=o,this._loader=e,(0,i.A)(this._tileset.gaussianSplatPrimitive)||(this._tileset.gaussianSplatPrimitive=new A.A({tileset:this._tileset})),this._originalPositions=void 0,this._originalRotations=void 0,this._originalScales=void 0,this.gltfPrimitive=void 0,this.worldTransform=void 0,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1,this._transformed=!1,this._sphericalHarmonicsDegree=0,this._sphericalHarmonicsCoefficientCount=0,this._packedSphericalHarmonicsData=void 0}h.tilesetRequiresGaussianSplattingExt=function(e){let t=!1,n=!1;return e.isGltfExtensionRequired instanceof Function&&(t=e.isGltfExtensionRequired("KHR_gaussian_splatting")&&e.isGltfExtensionRequired("KHR_gaussian_splatting_compression_spz_2"),n=e.isGltfExtensionRequired("KHR_spz_gaussian_splats_compression")),n&&(0,d.A)("KHR_spz_gaussian_splats_compression","Support for the original KHR_spz_gaussian_splats_compression extension has been deprecated in favor of the up to date KHR_gaussian_splatting and KHR_gaussian_splatting_compression_spz_2 extensions and will be removed in CesiumJS 1.135.\n\nPlease retile your tileset with the KHR_gaussian_splatting and KHR_gaussian_splatting_compression_spz_2 extensions."),t||n},Object.defineProperties(h.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return this.gltfPrimitive.attributes[0].count}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return this.gltfPrimitive.attributes.reduce((e,t)=>e+t.byteLength,0)}},texturesByteLength:{get:function(){const e=this._tileset.gaussianSplatPrimitive.gaussianSplatTexture,t=this._tileset.gaussianSplatPrimitive.selectedTileLength;return(0,i.A)(e)&&0!==t?e.sizeInBytes/t:0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},transformed:{get:function(){return this._transformed}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}},sphericalHarmonicsCoefficientCount:{get:function(){return this._sphericalHarmonicsCoefficientCount}},sphericalHarmonicsDegree:{get:function(){return this._sphericalHarmonicsDegree}},packedSphericalHarmonicsData:{get:function(){return this._packedSphericalHarmonicsData}}});const g=new ArrayBuffer(4),f=new Float32Array(g),p=new Uint32Array(g);function m(e){f[0]=e;const t=p[0],n=t>>31&1,i=t>>23&255,o=8388607&t;let r;if(255===i)r=n<<15|31744|(o?512:0);else if(0===i)r=n<<15;else{const e=i-127+15;r=e>=31?n<<15|31744:e<=0?n<<15:n<<15|e<<10|o>>>13}return r}function _(e){const t=function(e){return(e.startsWith("KHR_gaussian_splatting:")?"KHR_gaussian_splatting:":"_")+"SH_DEGREE_"}(e),n=t.length,i=e.indexOf("_COEF_",n);return{l:parseInt(e.slice(n,i),10),n:parseInt(e.slice(i+6),10)}}h.fromGltf=async function(e,t,n,A){const c=n,l=o.A.createIfNeeded(c),u={releaseGltfJson:!1,upAxis:s.A.Y,forwardAxis:s.A.Z};(0,i.A)(A.asset)?(u.gltfJson=A,u.baseResource=l,u.gltfResource=l):A instanceof Uint8Array?(u.typedArray=A,u.baseResource=l,u.gltfResource=l):u.gltfResource=o.A.createIfNeeded(A);const d=new r.A(u);try{await d.load()}catch(e){throw d.destroy(),new a.A(`Failed to load glTF: ${e.message}`)}return new h(d,e,t,n)},h.prototype.update=function(e,t){const n=this._loader;if(this._ready)!this._transformed&&e.root.content.ready&&(A.A.transformTile(this._tile),this._transformed=!0);else if(t.afterRender.push(()=>!0),(0,i.A)(n)){if(this._resourcesLoaded){this.gltfPrimitive=n.components.scene.nodes[0].primitives[0],this.worldTransform=n.components.scene.nodes[0].matrix,this._ready=!0,this._originalPositions=new Float32Array(l.A.getAttributeBySemantic(this.gltfPrimitive,u.A.POSITION).typedArray),this._originalRotations=new Float32Array(l.A.getAttributeBySemantic(this.gltfPrimitive,u.A.ROTATION).typedArray),this._originalScales=new Float32Array(l.A.getAttributeBySemantic(this.gltfPrimitive,u.A.SCALE).typedArray);const{l:e,n:t}=function(e){switch(e.filter(e=>e.name.includes("SH_DEGREE_")).length){default:case 0:return{l:0,n:0};case 3:return{l:1,n:9};case 8:return{l:2,n:24};case 15:return{l:3,n:45}}}(this.gltfPrimitive.attributes);return this._sphericalHarmonicsDegree=e,this._sphericalHarmonicsCoefficientCount=t,void(this._packedSphericalHarmonicsData=function(e){const t=e.sphericalHarmonicsDegree,n=e.sphericalHarmonicsCoefficientCount,i=e.pointsLength*(n*(2/3)),o=new Uint32Array(i),r=e.gltfPrimitive.attributes.filter(e=>e.name.includes("SH_DEGREE_"));let a=0;const s=[0,9,24];switch(t){case 1:a=9;break;case 2:a=24;break;case 3:a=45}r.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);const A=a*(2/3);for(let t=0;t<r.length;t++){const{l:n,n:i}=_(r[t].name);for(let a=0;a<e.pointsLength;a++){const e=a*A+2*s[n-1]/3+2*i,c=3*a;o[e]=m(r[t].typedArray[c])|m(r[t].typedArray[c+1])<<16,o[e+1]=m(r[t].typedArray[c+2])}}return o}(this))}this._resourcesLoaded=n.process(t)}else this._ready=!0},h.prototype.hasProperty=function(e,t){return!1},h.prototype.getFeature=function(e){},h.prototype.applyDebugSettings=function(e,t){},h.prototype.applyStyle=function(e){},h.prototype.pick=function(e,t,n){},h.prototype.isDestroyed=function(){return this.isDestroyed},h.prototype.destroy=function(){return this.splatPrimitive=void 0,(0,i.A)(this._tileset.gaussianSplatPrimitive)&&!this._tileset.gaussianSplatPrimitive.isDestroyed()&&this._tileset.gaussianSplatPrimitive.destroy(),this._tileset.gaussianSplatPrimitive=void 0,this._tile=void 0,this._tileset=void 0,this._resource=void 0,this._ready=!1,this._group=void 0,this._metadata=void 0,this._resourcesLoaded=!1,(0,i.A)(this._loader)&&(this._loader.destroy(),this._loader=void 0),(0,c.A)(this)};const I=h},472360:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(915325),o=n(584164),r=n(471147),a=n(44706),s=n(257601),A=n(571804),c=n(57775),l=n(276904),u=n(654799),d=n(616e3),h=n(873536),g=n(200646),f=n(760866),p=n(624512),m=n(988617),_=n(814617),I=n(402330),E=n(377496),y=n(944479),C=n(305439),b=n(508380),B=n(442790),v=n(40118),w=n(376758),T=n(491446),S=n(595826),x=n(730839),D=n(995537),Q=n(320475),N=n(267980),R=n(99479),M=n(913419),L=n(677354),P=n(430332);const O=new o.A,F=new o.A,U=new o.A,k=new o.A;function G(e,t){return new d.A({context:e,source:{width:t.width,height:t.height,arrayBufferView:t.data},preMultiplyAlpha:!1,skipColorSpaceConversion:!0,pixelFormat:l.A.RGBA_INTEGER,pixelDatatype:c.A.UNSIGNED_INT,flipY:!1,sampler:u.A.NEAREST})}function H(e){e=e??i.A.EMPTY_OBJECT,this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,this._numSplats=0,this._needsGaussianSplatTexture=!0,this._prevViewMatrix=new o.A,this._debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.gaussianSplatTexture=void 0,this.sphericalHarmonicsTexture=void 0,this._lastTextureWidth=0,this._lastTextureHeight=0,this._vertexArray=void 0,this._vertexArrayLen=-1,this._splitDirection=M.A.NONE,this._dirty=!1,this._tileset=e.tileset,this._baseTilesetUpdate=this._tileset.update,this._tileset.update=this._wrappedUpdate.bind(this),this._tileset.tileLoad.addEventListener(this.onTileLoad,this),this._tileset.tileVisible.addEventListener(this.onTileVisible,this),this.selectedTileLength=0,this._ready=!1,this._hasGaussianSplatTexture=!1,this._gaussianSplatTexturePending=!1,this._drawCommand=void 0,this._rootTransform=void 0,this._axisCorrectionMatrix=r.A.getAxisCorrectionMatrix(Q.A.Y,Q.A.X,new o.A),this._isDestroyed=!1,this._sorterState=0,this._sorterPromise=void 0,this._sorterError=void 0}Object.defineProperties(H.prototype,{ready:{get:function(){return this._ready}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&(this._splitDirection=e,this._dirty=!0)}}}),H.prototype._wrappedUpdate=function(e){this._baseTilesetUpdate.call(this._tileset,e),this.update(e)},H.prototype.destroy=function(){this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,(0,T.A)(this.gaussianSplatTexture)&&(this.gaussianSplatTexture.destroy(),this.gaussianSplatTexture=void 0);const e=this._drawCommand;return(0,T.A)(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),(0,T.A)(this._vertexArray)&&(this._vertexArray.destroy(),this._vertexArray=void 0),this._tileset.update=this._baseTilesetUpdate.bind(this._tileset),(0,L.A)(this)},H.prototype.isDestroyed=function(){return this._isDestroyed},H.prototype.onTileLoad=function(e){this._dirty=!0},H.prototype.onTileVisible=function(e){},H.transformTile=function(e){const t=e.computedTransform,n=e.content.gltfPrimitive,i=e.tileset.gaussianSplatPrimitive,a=o.A.multiplyTransformation(t,i._axisCorrectionMatrix,O);o.A.multiplyTransformation(a,e.content.worldTransform,a);const s=o.A.multiply(e.tileset.modelMatrix,o.A.fromArray(e.tileset.root.transform),F),A=o.A.inverse(s,U),c=o.A.multiplyTransformation(A,a,O),l=e.content._originalPositions,u=e.content._originalRotations,d=e.content._originalScales,h=r.A.getAttributeBySemantic(n,S.A.POSITION).typedArray,g=r.A.getAttributeBySemantic(n,S.A.ROTATION).typedArray,f=r.A.getAttributeBySemantic(n,S.A.SCALE).typedArray,p=new N.A,m=new R.A,_=new N.A;for(let e=0;e<l.length/3;++e)p.x=l[3*e],p.y=l[3*e+1],p.z=l[3*e+2],m.x=u[4*e],m.y=u[4*e+1],m.z=u[4*e+2],m.w=u[4*e+3],_.x=d[3*e],_.y=d[3*e+1],_.z=d[3*e+2],o.A.fromTranslationQuaternionRotationScale(p,m,_,U),o.A.multiplyTransformation(c,U,U),o.A.getTranslation(U,p),o.A.getRotation(U,m),o.A.getScale(U,_),h[3*e]=p.x,h[3*e+1]=p.y,h[3*e+2]=p.z,g[4*e]=m.x,g[4*e+1]=m.y,g[4*e+2]=m.z,g[4*e+3]=m.w,f[3*e]=_.x,f[3*e+1]=_.y,f[3*e+2]=_.z},H.generateSplatTexture=function(e,t){e._gaussianSplatTexturePending=!0;const n=s.A.generateFromAttributes({attributes:{positions:new Float32Array(e._positions),scales:new Float32Array(e._scales),rotations:new Float32Array(e._rotations),colors:new Uint8Array(e._colors)},count:e._numSplats});(0,T.A)(n)?n.then(n=>{if(e._gaussianSplatTexture)if(e._lastTextureHeight!==n.height||e._lastTextureWidth!==n.width){const i=e.gaussianSplatTexture;e._gaussianSplatTexture=G(t.context,n),i.destroy()}else e.gaussianSplatTexture.copyFrom({source:{width:n.width,height:n.height,arrayBufferView:n.data}});else e.gaussianSplatTexture=G(t.context,n);e._lastTextureHeight=n.height,e._lastTextureWidth=n.width,e._hasGaussianSplatTexture=!0,e._needsGaussianSplatTexture=!1,e._gaussianSplatTexturePending=!1,(!(0,T.A)(e._indexes)||e._indexes.length<e._numSplats)&&(e._indexes=new Uint32Array(e._numSplats));for(let t=0;t<e._numSplats;++t)e._indexes[t]=t}).catch(t=>{console.error("Error generating Gaussian splat texture:",t),e._gaussianSplatTexturePending=!1}):e._gaussianSplatTexturePending=!1},H.buildGSplatDrawCommand=function(e,t){const n=e._tileset,i=new h.A(e),{shaderBuilder:a}=i,s=i.renderStateOptions;s.cull.enabled=!1,s.depthMask=!1,s.depthTest.enabled=!0,s.blending=g.A.PRE_MULTIPLIED_ALPHA_BLEND,i.alphaOptions.pass=f.A.GAUSSIAN_SPLATS,a.addAttribute("vec2","a_screenQuadPosition"),a.addAttribute("float","a_splatIndex"),a.addVarying("vec4","v_splatColor"),a.addVarying("vec2","v_vertPos"),a.addUniform("float","u_splitDirection",p.A.VERTEX),a.addVarying("float","v_splitDirection"),a.addUniform("highp usampler2D","u_splatAttributeTexture",p.A.VERTEX),a.addUniform("float","u_sphericalHarmonicsDegree",p.A.VERTEX),a.addUniform("float","u_splatScale",p.A.VERTEX),a.addUniform("vec3","u_cameraPositionWC",p.A.VERTEX),a.addUniform("mat3","u_inverseModelRotation",p.A.VERTEX);const c=i.uniformMap;c.u_splatAttributeTexture=function(){return e.gaussianSplatTexture},e._sphericalHarmonicsDegree>0&&(a.addDefine("HAS_SPHERICAL_HARMONICS","1",p.A.VERTEX),a.addUniform("highp usampler2D","u_sphericalHarmonicsTexture",p.A.VERTEX),c.u_sphericalHarmonicsTexture=function(){return e.sphericalHarmonicsTexture}),c.u_sphericalHarmonicsDegree=function(){return e._sphericalHarmonicsDegree},c.u_cameraPositionWC=function(){return N.A.clone(t.camera.positionWC)},c.u_inverseModelRotation=function(){const t=e._tileset,n=o.A.multiply(t.modelMatrix,o.A.fromArray(t.root.transform),O);return o.A.getRotation(o.A.inverse(n,U),k)},c.u_splitDirection=function(){return e.splitDirection},i.instanceCount=e._numSplats,i.count=4,i.primitiveType=I.A.TRIANGLE_STRIP,a.addVertexLines(m.A),a.addFragmentLines(_.A);const l=a.buildShaderProgram(t.context);let u=(0,w.A)(v.A.fromCache(i.renderStateOptions),!0);u.cull.face=r.A.getCullFace(n.modelMatrix,I.A.TRIANGLE_STRIP),u=v.A.fromCache(u);const d={screenQuadPosition:0,splatIndex:2},S=new D.A.Attribute;if(S.name="_SPLAT_INDEXES",S.typedArray=e._indexes,S.componentDatatype=A.A.UNSIGNED_INT,S.type=x.A.SCALAR,S.normalized=!1,S.count=i.instanceCount,S.constant=0,S.instanceDivisor=1,!(0,T.A)(e._vertexArray)||e._indexes.length>e._vertexArrayLen){const n=new y.A({attributes:{screenQuadPosition:new C.A({componentDatatype:A.A.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1],name:"_SCREEN_QUAD_POS",variableName:"screenQuadPosition"}),splatIndex:{...S,variableName:"splatIndex"}},primitiveType:I.A.TRIANGLE_STRIP});e._vertexArray=b.A.fromGeometry({context:t.context,geometry:n,attributeLocations:d,bufferUsage:B.A.DYNAMIC_DRAW,interleave:!1})}else e._vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(e._indexes);e._vertexArrayLen=e._indexes.length;const Q=o.A.multiply(n.modelMatrix,o.A.fromArray(n.root.transform),F),R=new E.A({boundingVolume:n.boundingSphere,modelMatrix:Q,uniformMap:c,renderState:u,vertexArray:e._vertexArray,shaderProgram:l,cull:s.cull.enabled,pass:f.A.GAUSSIAN_SPLATS,count:i.count,owner:this,instanceCount:i.instanceCount,primitiveType:I.A.TRIANGLE_STRIP,debugShowBoundingVolume:n.debugShowBoundingVolume,castShadows:!1,receiveShadows:!1});e._drawCommand=R},H.prototype.update=function(e){const t=this._tileset;if((0,T.A)(this._rootTransform)||(this._rootTransform=t.root.computedTransform),t.show&&0!==t._selectedTiles.length)if(this._drawCommand&&e.commandList.push(this._drawCommand),t._modelMatrixChanged)this._dirty=!0;else if(!0!==e.passes.pick){if(this.splitDirection!==t.splitDirection&&(this.splitDirection=t.splitDirection),0===this._sorterState){if(!this._dirty&&o.A.equals(e.camera.viewMatrix,this._prevViewMatrix))return;if(0!==t._selectedTiles.length&&t._selectedTiles.length!==this.selectedTileLength){this._numSplats=0,this._positions=void 0,this._rotations=void 0,this._scales=void 0,this._colors=void 0,this._indexes=void 0,this._shData=void 0,this._needsGaussianSplatTexture=!0,this._gaussianSplatTexturePending=!1;const e=t._selectedTiles,n=e.reduce((e,t)=>e+t.content.pointsLength,0),i=(t,i)=>{let o,r=0;for(const a of e){const e=i(a.content.gltfPrimitive);(0,T.A)(o)||(o=A.A.createTypedArray(t,n*x.A.getNumberOfComponents(e.type))),o.set(e.typedArray,r),r+=e.typedArray.length}return o},o=()=>{let t=0;for(const i of e){const e=i.content.packedSphericalHarmonicsData;if(i.content.sphericalHarmonicsDegree>0){if(!(0,T.A)(this._shData)){let e;switch(i.content.sphericalHarmonicsDegree){case 1:e=9;break;case 2:e=24;break;case 3:e=45}this._shData=new Uint32Array(n*(e*(2/3)))}this._shData.set(e,t),t+=e.length}}};this._positions=i(A.A.FLOAT,e=>r.A.getAttributeBySemantic(e,S.A.POSITION)),this._scales=i(A.A.FLOAT,e=>r.A.getAttributeBySemantic(e,S.A.SCALE)),this._rotations=i(A.A.FLOAT,e=>r.A.getAttributeBySemantic(e,S.A.ROTATION)),this._colors=i(A.A.UNSIGNED_BYTE,e=>r.A.getAttributeBySemantic(e,S.A.COLOR)),o(),this._sphericalHarmonicsDegree=e[0].content.sphericalHarmonicsDegree,this._numSplats=n,this.selectedTileLength=t._selectedTiles.length}if(0===this._numSplats)return;if(this._needsGaussianSplatTexture){if(!this._gaussianSplatTexturePending&&(H.generateSplatTexture(this,e),(0,T.A)(this._shData))){const o=this.sphericalHarmonicsTexture,r=P.A.maximumTextureSize,a=t._selectedTiles[0].content.sphericalHarmonicsCoefficientCount/3,s=Math.floor(r/a),A=s*(2*a),h=new Uint32Array(r*Math.ceil(this._numSplats/s)*2);let g=0;for(let e=0;g<this._shData.length;e+=2*r)h.set(this._shData.subarray(g,g+A),e),g+=A;this.sphericalHarmonicsTexture=(n=e.context,i={data:h,width:r,height:Math.ceil(this._numSplats/s)},new d.A({context:n,source:{width:i.width,height:i.height,arrayBufferView:i.data},preMultiplyAlpha:!1,skipColorSpaceConversion:!0,pixelFormat:l.A.RG_INTEGER,pixelDatatype:c.A.UNSIGNED_INT,flipY:!1,sampler:u.A.NEAREST})),(0,T.A)(o)&&o.destroy()}return}if(o.A.clone(e.camera.viewMatrix,this._prevViewMatrix),o.A.multiply(e.camera.viewMatrix,this._rootTransform,O),(0,T.A)(this._sorterPromise)||(this._sorterPromise=a.A.radixSortIndexes({primitive:{positions:new Float32Array(this._positions),modelView:Float32Array.from(O),count:this._numSplats},sortType:"Index"})),!(0,T.A)(this._sorterPromise))return void(this._sorterState=1);this._sorterPromise.catch(e=>{this._sorterState=4,this._sorterError=e}),this._sorterPromise.then(e=>{this._indexes=e,this._sorterState=3})}else if(1===this._sorterState){if((0,T.A)(this._sorterPromise)||(this._sorterPromise=a.A.radixSortIndexes({primitive:{positions:new Float32Array(this._positions),modelView:Float32Array.from(O),count:this._numSplats},sortType:"Index"})),!(0,T.A)(this._sorterPromise))return void(this._sorterState=1);this._sorterPromise.catch(e=>{this._sorterState=4,this._sorterError=e}),this._sorterPromise.then(e=>{this._indexes=e,this._sorterState=3}),this._sorterState=2}else{if(2===this._sorterState)return;if(3===this._sorterState)H.buildGSplatDrawCommand(this,e),this._sorterState=0,this._dirty=!1,this._sorterPromise=void 0;else if(4===this._sorterState)throw this._sorterError}var n,i;this._dirty=!1}};const V=H},873536:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(469635),o=n(40118),r=n(523721),a=n(56241),s=n(624512);const A=function(e){const t=new i.A;this.shaderBuilder=t,this.uniformMap={},this.renderStateOptions=o.A.getState(o.A.fromCache({depthTest:{enabled:!0,func:r.A.LESS_OR_EQUAL}})),this.alphaOptions=new a.A,this.hasSkipLevelOfDetail=!1,e._useLogDepth&&t.addDefine("LOG_DEPTH_READ_ONLY",void 0,s.A.FRAGMENT)}},44706:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(520098),r=n(123245),a=n(971724);function s(){}s._maxSortingConcurrency=Math.max(o.A.hardwareConcurrency-1,1),s._sorterTaskProcessor=void 0,s._taskProcessorReady=!1,s._error=void 0,s._getSorterTaskProcessor=function(){if(!(0,i.A)(s._sorterTaskProcessor)){const e=new a.A("gaussianSplatSorter",s._maxSortingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/wasm_splats_bg.wasm"}).then(function(e){e?s._taskProcessorReady=!0:s._error=new r.A("Gaussian splat sorter could not be initialized.")}).catch(e=>{s._error=e}),s._sorterTaskProcessor=e}return s._sorterTaskProcessor},s.radixSortIndexes=function(e){const t=s._getSorterTaskProcessor();if((0,i.A)(s._error))throw s._error;if(s._taskProcessorReady)return t.scheduleTask(e,[e.primitive.positions.buffer])};const A=s},257601:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(520098),r=n(123245),a=n(971724);function s(){}s._maxSortingConcurrency=Math.max(o.A.hardwareConcurrency-1,1),s._textureTaskProcessor=void 0,s._taskProcessorReady=!1,s._error=void 0,s._getTextureTaskProcessor=function(){if(!(0,i.A)(s._textureTaskProcessor)){const e=new a.A("gaussianSplatTextureGenerator",s._maxSortingConcurrency);e.initWebAssemblyModule({wasmBinaryFile:"ThirdParty/wasm_splats_bg.wasm"}).then(function(e){e?s._taskProcessorReady=!0:s._error=new r.A("Gaussian splat sorter could not be initialized.")}).catch(e=>{s._error=e}),s._textureTaskProcessor=e}return s._textureTaskProcessor},s.generateFromAttributes=function(e){const t=s._getTextureTaskProcessor();if((0,i.A)(s._error))throw s._error;if(!s._taskProcessorReady)return;const{attributes:n}=e;return t.scheduleTask(e,[n.positions.buffer,n.scales.buffer,n.rotations.buffer,n.colors.buffer])};const A=s},823064:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(267980),o=n(491446),r=n(677354),a=n(605971),s=n(604752),A=n(584164),c=n(123245),l=n(184483),u=n(301350);function d(e,t,n,r,a){this._tileset=e,this._tile=t,this._resource=n,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,function(e,t,n){n=n??0;const r=new Uint8Array(t),a=new DataView(t);n+=h;const d=a.getUint32(n,!0);if(1!==d)throw new c.A(`Only Geometry tile version 1 is supported.  Version ${d} is not.`);n+=h;const g=a.getUint32(n,!0);if(n+=h,0===g)return void(e._ready=!0);const f=a.getUint32(n,!0);if(n+=h,0===f)throw new c.A("Feature table must have a byte length greater than zero");const p=a.getUint32(n,!0);n+=h;const m=a.getUint32(n,!0);n+=h;const _=a.getUint32(n,!0);n+=h;const I=(0,s.A)(r,n,f);n+=f;const E=new Uint8Array(t,n,p);let y,C;n+=p,m>0&&(y=(0,s.A)(r,n,m),n+=m,_>0&&(C=new Uint8Array(t,n,_),C=new Uint8Array(C)));const b=I.BOXES_LENGTH??0,B=I.CYLINDERS_LENGTH??0,v=I.ELLIPSOIDS_LENGTH??0,w=I.SPHERES_LENGTH??0,T=b+B+v+w,S=new l.A(e,T,y,C,function(e){return function(t,n){(0,o.A)(e._geometries)&&e._geometries.updateCommands(t,n)}}(e));if(e._batchTable=S,0===T)return;const x=e.tile.computedTransform;let D;(0,o.A)(I.RTC_CENTER)&&(D=i.A.unpack(I.RTC_CENTER),A.A.multiplyByPoint(x,D,D));const Q=function(e,t){let n,i,r,a,s;const A=e.BOXES_LENGTH??0,l=e.CYLINDERS_LENGTH??0,u=e.ELLIPSOIDS_LENGTH??0,d=e.SPHERES_LENGTH??0;if(A>0&&(0,o.A)(e.BOX_BATCH_IDS)){const i=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,A)}if(l>0&&(0,o.A)(e.CYLINDER_BATCH_IDS)){const n=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,l)}if(u>0&&(0,o.A)(e.ELLIPSOID_BATCH_IDS)){const n=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;r=new Uint16Array(t.buffer,n,u)}if(d>0&&(0,o.A)(e.SPHERE_BATCH_IDS)){const n=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,n,d)}const h=(0,o.A)(n)||(0,o.A)(i)||(0,o.A)(r)||(0,o.A)(a),g=A>0&&!(0,o.A)(n)||l>0&&!(0,o.A)(i)||u>0&&!(0,o.A)(r)||d>0&&!(0,o.A)(a);if(h&&g)throw new c.A("If one group of batch ids is defined, then all batch ids must be defined");if(!((0,o.A)(n)||(0,o.A)(i)||(0,o.A)(r)||(0,o.A)(a))){let e=0;if(!(0,o.A)(n)&&A>0)for(n=new Uint16Array(A),s=0;s<A;++s)n[s]=e++;if(!(0,o.A)(i)&&l>0)for(i=new Uint16Array(l),s=0;s<l;++s)i[s]=e++;if(!(0,o.A)(r)&&u>0)for(r=new Uint16Array(u),s=0;s<u;++s)r[s]=e++;if(!(0,o.A)(a)&&d>0)for(a=new Uint16Array(d),s=0;s<d;++s)a[s]=e++}return{boxes:n,cylinders:i,ellipsoids:r,spheres:a}}(I,E);if(b>0||B>0||v>0||w>0){let t,n,i,o;if(b>0){const e=E.byteOffset+I.BOXES.byteOffset;t=new Float32Array(E.buffer,e,u.A.packedBoxLength*b)}if(B>0){const e=E.byteOffset+I.CYLINDERS.byteOffset;n=new Float32Array(E.buffer,e,u.A.packedCylinderLength*B)}if(v>0){const e=E.byteOffset+I.ELLIPSOIDS.byteOffset;i=new Float32Array(E.buffer,e,u.A.packedEllipsoidLength*v)}if(w>0){const e=E.byteOffset+I.SPHERES.byteOffset;o=new Float32Array(E.buffer,e,u.A.packedSphereLength*w)}return e._geometries=new u.A({boxes:t,boxBatchIds:Q.boxes,cylinders:n,cylinderBatchIds:Q.cylinders,ellipsoids:i,ellipsoidBatchIds:Q.ellipsoids,spheres:o,sphereBatchIds:Q.spheres,center:D,modelMatrix:x,batchTable:S,boundingVolume:e.tile.boundingVolume.boundingVolume}),e}Promise.resolve(e)}(this,r,a)}Object.defineProperties(d.prototype,{featuresLength:{get:function(){return(0,o.A)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return(0,o.A)(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return(0,o.A)(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return(0,o.A)(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const h=Uint32Array.BYTES_PER_ELEMENT;function g(e){const t=e.featuresLength;if(!(0,o.A)(e._features)&&t>0){const n=new Array(t);(0,o.A)(e._geometries)&&e._geometries.createFeatures(e,n),e._features=n}}d.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},d.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,o.A)(e)||e<0||e>=t)throw new a.A(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return g(this),this._features[e]},d.prototype.applyDebugSettings=function(e,t){(0,o.A)(this._geometries)&&this._geometries.applyDebugSettings(e,t)},d.prototype.applyStyle=function(e){g(this),(0,o.A)(this._geometries)&&this._geometries.applyStyle(e,this._features)},d.prototype.update=function(e,t){(0,o.A)(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),(0,o.A)(this._batchTable)&&this._geometries.ready&&(this._batchTable.update(e,t),this._ready=!0)},d.prototype.pick=function(e,t,n){},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,r.A)(this)};const f=d},463823:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(336946),o=n(491446),r=n(605971),a=n(123245),s=n(789989);function A(e){const t=[],n=e.features;for(let e=0;e<n.length;++e){const r=n[e],a=new s.A;if(a.data=r,a.properties=r.properties,a.configureNameFromProperties(r.properties),a.configureDescriptionFromProperties(r.properties),(0,o.A)(r.geometry)&&"Point"===r.geometry.type){const e=r.geometry.coordinates[0],t=r.geometry.coordinates[1];a.position=i.A.fromDegrees(e,t)}t.push(a)}return t}const c="http://www.mapinfo.com/mxp";function l(e){const t=e.documentElement;if("MultiFeatureCollection"===t.localName&&t.namespaceURI===c)return function(e){const t=[],n=e.documentElement.getElementsByTagNameNS(c,"Feature");for(let e=0;e<n.length;++e){const i=n[e],o={},r=i.getElementsByTagNameNS(c,"Val");for(let e=0;e<r.length;++e){const t=r[e];if(t.hasAttribute("ref")){const e=t.getAttribute("ref"),n=t.textContent.trim();o[e]=n}}const a=new s.A;a.data=i,a.properties=o,a.configureNameFromProperties(o),a.configureDescriptionFromProperties(o),t.push(a)}return t}(e);if("FeatureInfoResponse"===t.localName&&"http://www.esri.com/wms"===t.namespaceURI)return function(e){const t=e.documentElement,n=[];let i;const o=t.getElementsByTagNameNS("*","FIELDS");if(o.length>0)for(let e=0;e<o.length;++e){const t=o[e];i={};const r=t.attributes;for(let e=0;e<r.length;++e){const t=r[e];i[t.name]=t.value}n.push(d(t,i))}else{const e=t.getElementsByTagNameNS("*","FeatureInfo");for(let t=0;t<e.length;++t){const o=e[t];i={};const r=o.childNodes;for(let e=0;e<r.length;++e){const t=r[e];t.nodeType===Node.ELEMENT_NODE&&(i[t.localName]=t.textContent)}n.push(d(o,i))}}return n}(e);if("FeatureCollection"===t.localName&&"http://www.opengis.net/wfs"===t.namespaceURI)return function(e){const t=[],n=e.documentElement.getElementsByTagNameNS("http://www.opengis.net/gml","featureMember");for(let e=0;e<n.length;++e){const i=n[e],o={};u(i,o),t.push(d(i,o))}return t}(e);if("ServiceExceptionReport"===t.localName)throw new a.A((new XMLSerializer).serializeToString(t));return"msGMLOutput"===t.localName?function(e){const t=[];let n;const i=e.documentElement.childNodes;for(let e=0;e<i.length;e++)if(i[e].nodeType===Node.ELEMENT_NODE){n=i[e];break}if(!(0,o.A)(n))throw new a.A("Unable to find first child of the feature info xml document");const r=n.childNodes;for(let e=0;e<r.length;++e){const n=r[e];if(n.nodeType===Node.ELEMENT_NODE){const e={};u(n,e),t.push(d(n,e))}}return t}(e):function(e){const t=(new XMLSerializer).serializeToString(e),n=document.createElement("div"),i=document.createElement("pre");i.textContent=t,n.appendChild(i);const o=new s.A;return o.data=e,o.description=n.innerHTML,[o]}(e)}function u(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){const o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),"Point"!==o.localName&&"LineString"!==o.localName&&"Polygon"!==o.localName&&"boundedBy"!==o.localName&&o.hasChildNodes()&&u(o,t)&&(t[o.localName]=o.textContent)}return n}function d(e,t){const n=new s.A;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}const h=/<body>\s*<\/body>/im,g=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,f=/<title>([\s\S]*)<\/title>/im;function p(e){if(h.test(e))return;if(g.test(e))return;let t;const n=f.exec(e);n&&n.length>1&&(t=n[1]);const i=new s.A;return i.name=t,i.description=e,i.data=e,[i]}const m=function(e,t,n){if(!(0,o.A)(e))throw new r.A("type is required.");if(this.type=e,!(0,o.A)(t))if("json"===e)t="application/json";else if("xml"===e)t="text/xml";else if("html"===e)t="text/html";else{if("text"!==e)throw new r.A('format is required when type is not "json", "xml", "html", or "text".');t="text/plain"}if(this.format=t,!(0,o.A)(n))if("json"===e)n=A;else if("xml"===e)n=l;else if("html"===e)n=p;else{if("text"!==e)throw new r.A('callback is required when type is not "json", "xml", "html", or "text".');n=p}this.callback=n}},897741:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(660662),o=n(303578),r=n(267980),a=n(336946),s=n(41476),A=n(491446),c=n(677354),l=n(605971),u=n(610750),d=n(149192),h=n(955943),g=n(150429),f=n(290176),p=n(766067),m=n(697422),_=n(744603),I=n(342875),E=n(616e3),y=n(805696),C=n(691760),b=n(468649),B=n(423603),v=n(38867),w=n(301947),T=n(208375),S=n(869327),x=n(798732),D=n(62467),Q=n(988609),N=n(367817);function R(e){e=e??u.A.default;const t=new d.A({ellipsoid:e}),n=new S.A;this._ellipsoid=e,this._imageryLayerCollection=n,this._surfaceShaderSet=new v.A,this._material=void 0,this._surface=new x.A({tileProvider:new w.A({terrainProvider:t,imageryLayers:n,surfaceShaderSet:this._surfaceShaderSet})}),this._terrainProvider=t,this._terrainProviderChanged=new h.A,this._undergroundColor=s.A.clone(s.A.BLACK),this._undergroundColorAlphaByDistance=new f.A(e.maximumRadius/1e3,0,e.maximumRadius/5,1),this._translucency=new T.A,M(this),this.show=!0,this._oceanNormalMapResourceDirty=!0,this._oceanNormalMapResource=new _.A({url:(0,o.A)("Assets/Textures/waterNormalsSmall.jpg")}),this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this.fillHighlightColor=void 0,this.enableLighting=!1,this.lambertDiffuseMultiplier=.9,this.dynamicAtmosphereLighting=!0,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=u.A.WGS84.equals(e),this.atmosphereLightIntensity=10,this.atmosphereRayleighCoefficient=new r.A(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new r.A(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.lightingFadeOutDistance=N.A.PI_OVER_TWO*e.minimumRadius,this.lightingFadeInDistance=N.A.PI*e.minimumRadius,this.nightFadeOutDistance=N.A.PI_OVER_TWO*e.minimumRadius,this.nightFadeInDistance=5*N.A.PI_OVER_TWO*e.minimumRadius,this.showWaterEffect=!0,this.depthTestAgainstTerrain=!1,this.shadows=Q.A.RECEIVE_ONLY,this.atmosphereHueShift=0,this.atmosphereSaturationShift=0,this.atmosphereBrightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=void 0,this.vertexShadowDarkness=.3}function M(e){const t=[],n=(0,A.A)(e._material)&&((0,A.A)(e._material.shaderSource.match(/slope/))||(0,A.A)(e._material.shaderSource.match("normalEC"))),i=[b.A,B.A];!(0,A.A)(e._material)||n&&!e._terrainProvider.requestVertexNormals?e._surface._tileProvider.materialUniformMap=void 0:(i.push(e._material.shaderSource),t.push("APPLY_MATERIAL"),e._surface._tileProvider.materialUniformMap=e._material._uniforms),i.push(y.A),e._surfaceShaderSet.baseVertexShaderSource=new I.A({sources:[b.A,B.A,C.A],defines:t}),e._surfaceShaderSet.baseFragmentShaderSource=new I.A({sources:i,defines:t}),e._surfaceShaderSet.material=e._material}Object.defineProperties(R.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},imageryLayersUpdatedEvent:{get:function(){return this._surface.tileProvider.imageryLayersUpdatedEvent}},tilesLoaded:{get:function(){return!(0,A.A)(this._surface)||0===this._surface._tileLoadQueueHigh.length&&0===this._surface._tileLoadQueueMedium.length&&0===this._surface._tileLoadQueueLow.length}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(e){this._surface.tileProvider.baseColor=e}},clippingPlanes:{get:function(){return this._surface.tileProvider.clippingPlanes},set:function(e){this._surface.tileProvider.clippingPlanes=e}},clippingPolygons:{get:function(){return this._surface.tileProvider.clippingPolygons},set:function(e){this._surface.tileProvider.clippingPolygons=e}},cartographicLimitRectangle:{get:function(){return this._surface.tileProvider.cartographicLimitRectangle},set:function(e){(0,A.A)(e)||(e=m.A.clone(m.A.MAX_VALUE)),this._surface.tileProvider.cartographicLimitRectangle=e}},oceanNormalMapUrl:{get:function(){return this._oceanNormalMapResource.url},set:function(e){this._oceanNormalMapResource.url=e,this._oceanNormalMapResourceDirty=!0}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){e!==this._terrainProvider&&(this._terrainProvider=e,this._terrainProviderChanged.raiseEvent(e),(0,A.A)(this._material)&&M(this))}},terrainProviderChanged:{get:function(){return this._terrainProviderChanged}},tileLoadProgressEvent:{get:function(){return this._surface.tileLoadProgressEvent}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,M(this))}},undergroundColor:{get:function(){return this._undergroundColor},set:function(e){this._undergroundColor=s.A.clone(e,this._undergroundColor)}},undergroundColorAlphaByDistance:{get:function(){return this._undergroundColorAlphaByDistance},set:function(e){if((0,A.A)(e)&&e.far<e.near)throw new l.A("far distance must be greater than near distance.");this._undergroundColorAlphaByDistance=f.A.clone(e,this._undergroundColorAlphaByDistance)}},translucency:{get:function(){return this._translucency}}});const L=[],P={start:0,stop:0};R.prototype.pickWorldCoordinates=function(e,t,n,o){if(!(0,A.A)(e))throw new l.A("ray is required");if(!(0,A.A)(t))throw new l.A("scene is required");n=n??!0;const a=t.mode,s=t.mapProjection,c=L;c.length=0;const u=this._surface._tilesToRender;let d,h,f=u.length;for(h=0;h<f;++h){d=u[h];const t=d.data;if(!(0,A.A)(t))continue;let n=t.pickBoundingSphere;if(a!==D.A.SCENE3D)t.pickBoundingSphere=n=i.A.fromRectangleWithHeights2D(d.rectangle,s,t.tileBoundingRegion.minimumHeight,t.tileBoundingRegion.maximumHeight,n),r.A.fromElements(n.center.z,n.center.x,n.center.y,n.center);else{if(!(0,A.A)(t.renderedMesh))continue;i.A.clone(t.tileBoundingRegion.boundingSphere,n)}const o=g.A.raySphere(e,n,P);(0,A.A)(o)&&c.push(t)}var p;let m;for(c.sort((p=e.origin,function(e,t){return i.A.distanceSquaredTo(e.pickBoundingSphere,p)-i.A.distanceSquaredTo(t.pickBoundingSphere,p)})),f=c.length,h=0;h<f&&(m=c[h].pick(e,t.mode,t.mapProjection,n,o),!(0,A.A)(m));++h);return m};const O=new a.A;R.prototype.pick=function(e,t,n){if(n=this.pickWorldCoordinates(e,t,!0,n),(0,A.A)(n)&&t.mode!==D.A.SCENE3D){n=r.A.fromElements(n.y,n.z,n.x,n);const e=t.mapProjection.unproject(n,O);n=this._ellipsoid.cartographicToCartesian(e,n)}return n};const F=new r.A,U=new r.A,k=new a.A,G=new p.A;function H(e,t){return(0,A.A)(e)&&m.A.contains(e.rectangle,t)?e:void 0}R.prototype.getHeight=function(e){if(!(0,A.A)(e))throw new l.A("cartographic is required");const t=this._surface._levelZeroTiles;if(!(0,A.A)(t))return;let n,i;const o=t.length;for(i=0;i<o&&(n=t[i],!m.A.contains(n.rectangle,e));++i);if(i>=o)return;let a=n;for(;(0,A.A)(n);)n=H(n._southwestChild,e)||H(n._southeastChild,e)||H(n._northwestChild,e)||n._northeastChild,(0,A.A)(n)&&(0,A.A)(n.data)&&(0,A.A)(n.data.renderedMesh)&&(a=n);if(n=a,!(0,A.A)(n)||!(0,A.A)(n.data)||!(0,A.A)(n.data.renderedMesh))return;const s=this._surface._tileProvider.tilingScheme.projection,c=this._surface._tileProvider.tilingScheme.ellipsoid,u=r.A.fromRadians(e.longitude,e.latitude,0,c,F),d=G,h=c.geodeticSurfaceNormal(u,d.direction),g=c.getSurfaceNormalIntersectionWithZAxis(u,11500,d.origin);if(!(0,A.A)(g)){let e;(0,A.A)(n.data.tileBoundingRegion)&&(e=n.data.tileBoundingRegion.minimumHeight);const t=Math.min(e??0,-11500),i=r.A.multiplyByScalar(h,Math.abs(t)+1,U);r.A.subtract(u,i,d.origin)}const f=n.data.pick(d,void 0,s,!1,U);return(0,A.A)(f)?c.cartesianToCartographic(f,k).height:void 0},R.prototype.update=function(e){this.show&&e.passes.render&&this._surface.update(e)},R.prototype.beginFrame=function(e){const t=this._surface,n=t.tileProvider,i=this.terrainProvider,o=(0,A.A)(i)&&i.hasWaterMask&&i.hasWaterMask;if(o&&this._oceanNormalMapResourceDirty){this._oceanNormalMapResourceDirty=!1;const t=this._oceanNormalMapResource,n=t.url;if((0,A.A)(n)){const i=this;t.fetchImage().then(function(t){n===i._oceanNormalMapResource.url&&(i._oceanNormalMap=i._oceanNormalMap&&i._oceanNormalMap.destroy(),i._oceanNormalMap=new E.A({context:e.context,source:t}))})}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}const r=e.passes,a=e.mode;r.render&&(this.showGroundAtmosphere?this._zoomedOutOceanSpecularIntensity=.4:this._zoomedOutOceanSpecularIntensity=.5,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t.tileCacheSize=this.tileCacheSize,t.loadingDescendantLimit=this.loadingDescendantLimit,t.preloadAncestors=this.preloadAncestors,t.preloadSiblings=this.preloadSiblings,n.terrainProvider=this.terrainProvider,n.lightingFadeOutDistance=this.lightingFadeOutDistance,n.lightingFadeInDistance=this.lightingFadeInDistance,n.nightFadeOutDistance=this.nightFadeOutDistance,n.nightFadeInDistance=this.nightFadeInDistance,n.zoomedOutOceanSpecularIntensity=a===D.A.SCENE3D?this._zoomedOutOceanSpecularIntensity:0,n.hasWaterMask=o,n.showWaterEffect=this.showWaterEffect,n.oceanNormalMap=this._oceanNormalMap,n.enableLighting=this.enableLighting,n.dynamicAtmosphereLighting=this.dynamicAtmosphereLighting,n.dynamicAtmosphereLightingFromSun=this.dynamicAtmosphereLightingFromSun,n.showGroundAtmosphere=this.showGroundAtmosphere,n.atmosphereLightIntensity=this.atmosphereLightIntensity,n.atmosphereRayleighCoefficient=this.atmosphereRayleighCoefficient,n.atmosphereMieCoefficient=this.atmosphereMieCoefficient,n.atmosphereRayleighScaleHeight=this.atmosphereRayleighScaleHeight,n.atmosphereMieScaleHeight=this.atmosphereMieScaleHeight,n.atmosphereMieAnisotropy=this.atmosphereMieAnisotropy,n.shadows=this.shadows,n.hueShift=this.atmosphereHueShift,n.saturationShift=this.atmosphereSaturationShift,n.brightnessShift=this.atmosphereBrightnessShift,n.fillHighlightColor=this.fillHighlightColor,n.showSkirts=this.showSkirts,n.backFaceCulling=this.backFaceCulling,n.vertexShadowDarkness=this.vertexShadowDarkness,n.undergroundColor=this._undergroundColor,n.undergroundColorAlphaByDistance=this._undergroundColorAlphaByDistance,n.lambertDiffuseMultiplier=this.lambertDiffuseMultiplier,t.beginFrame(e))},R.prototype.render=function(e){this.show&&((0,A.A)(this._material)&&this._material.update(e.context),this._surface.render(e))},R.prototype.endFrame=function(e){this.show&&e.passes.render&&this._surface.endFrame(e)},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){return this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),(0,c.A)(this)};const V=R},545880:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(647934),o=n(41476),r=n(491446),a=n(677354),s=n(769493),A=n(804701),c=n(57775),l=n(40118),u=n(90979),d=n(307386),h=n(200646),g=n(938987),f=n(896464),p=n(138151);function m(){this._picking=!1,this._numSamples=1,this._tempCopyDepthTexture=void 0,this._pickColorFramebuffer=new A.A({depthStencil:!0,supportsDepthTexture:!0}),this._outputFramebuffer=new A.A({depthStencil:!0,supportsDepthTexture:!0}),this._copyDepthFramebuffer=new A.A,this._tempCopyDepthFramebuffer=new A.A,this._updateDepthFramebuffer=new A.A({createColorAttachments:!1,createDepthAttachments:!1,depthStencil:!0}),this._clearGlobeColorCommand=void 0,this._copyColorCommand=void 0,this._copyDepthCommand=void 0,this._tempCopyDepthCommand=void 0,this._updateDepthCommand=void 0,this._viewport=new i.A,this._rs=void 0,this._rsBlend=void 0,this._rsUpdate=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0,this._clearGlobeDepth=void 0}function _(e,t,n,a,A){const c=e._viewport;c.width=n,c.height=a;const m=!i.A.equals(c,A.viewport);let _=m!==e._useScissorTest;e._useScissorTest=m,i.A.equals(e._scissorRectangle,A.viewport)||(e._scissorRectangle=i.A.clone(A.viewport,e._scissorRectangle),_=!0),(0,r.A)(e._rs)&&i.A.equals(c,e._rs.viewport)&&!_||(e._rs=l.A.fromCache({viewport:c,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}}),e._rsBlend=l.A.fromCache({viewport:c,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:h.A.ALPHA_BLEND}),e._rsUpdate=l.A.fromCache({viewport:c,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:f.A.EQUAL,frontOperation:{fail:p.A.KEEP,zFail:p.A.KEEP,zPass:p.A.KEEP},backFunction:f.A.NEVER,reference:g.A.CESIUM_3D_TILE_MASK,mask:g.A.CESIUM_3D_TILE_MASK}})),(0,r.A)(e._copyDepthCommand)||(e._copyDepthCommand=t.createViewportQuadCommand(d.A,{uniformMap:{u_depthTexture:function(){return e.colorFramebufferManager.getDepthStencilTexture()}},owner:e})),e._copyDepthCommand.framebuffer=e._copyDepthFramebuffer.framebuffer,e._copyDepthCommand.renderState=e._rs,(0,r.A)(e._copyColorCommand)||(e._copyColorCommand=t.createViewportQuadCommand(u.A,{uniformMap:{colorTexture:function(){return e.colorFramebufferManager.getColorTexture()}},owner:e})),e._copyColorCommand.renderState=e._rs,(0,r.A)(e._tempCopyDepthCommand)||(e._tempCopyDepthCommand=t.createViewportQuadCommand(d.A,{uniformMap:{u_depthTexture:function(){return e._tempCopyDepthTexture}},owner:e})),e._tempCopyDepthCommand.framebuffer=e._tempCopyDepthFramebuffer.framebuffer,e._tempCopyDepthCommand.renderState=e._rs,(0,r.A)(e._updateDepthCommand)||(e._updateDepthCommand=t.createViewportQuadCommand(u.A,{uniformMap:{colorTexture:function(){return e._tempCopyDepthFramebuffer.getColorTexture()}},owner:e})),e._updateDepthCommand.framebuffer=e._updateDepthFramebuffer.framebuffer,e._updateDepthCommand.renderState=e._rsUpdate,(0,r.A)(e._clearGlobeColorCommand)||(e._clearGlobeColorCommand=new s.A({color:new o.A(0,0,0,0),stencil:0,owner:e})),e._clearGlobeColorCommand.framebuffer=e.framebuffer}Object.defineProperties(m.prototype,{colorFramebufferManager:{get:function(){return this._picking?this._pickColorFramebuffer:this._outputFramebuffer}},framebuffer:{get:function(){return this.colorFramebufferManager.framebuffer}},depthStencilTexture:{get:function(){return this.colorFramebufferManager.getDepthStencilTexture()}},picking:{get:function(){return this._picking},set:function(e){this._picking=e}}}),m.prototype.update=function(e,t,n,i,o,r){const{width:a,height:s}=n,A=o?e.halfFloatingPointTexture?c.A.HALF_FLOAT:c.A.FLOAT:c.A.UNSIGNED_BYTE;this._numSamples=i,this.picking?this._pickColorFramebuffer.update(e,a,s):this._outputFramebuffer.update(e,a,s,i,A),this._copyDepthFramebuffer.update(e,a,s),_(this,e,a,s,t),e.uniformState.globeDepthTexture=void 0,this._clearGlobeDepth=r},m.prototype.prepareColorTextures=function(e,t){!this.picking&&this._numSamples>1&&this._outputFramebuffer.prepareTextures(e,t)},m.prototype.executeCopyDepth=function(e,t){(0,r.A)(this._copyDepthCommand)&&(this.prepareColorTextures(e),this._copyDepthCommand.execute(e,t),e.uniformState.globeDepthTexture=this._copyDepthFramebuffer.getColorTexture())},m.prototype.executeUpdateDepth=function(e,t,n){const i=(0,r.A)(n)?n:t.framebuffer.depthStencilTexture;if(!this._clearGlobeDepth&&i===this.colorFramebufferManager.getDepthStencilTexture())return void((0,r.A)(this._copyDepthCommand)&&this._copyDepthCommand.execute(e,t));if(!(0,r.A)(this._updateDepthCommand))return;const o=this._updateDepthFramebuffer;if(!(0,r.A)(o.framebuffer)||o.getDepthStencilTexture()!==i||o.getColorTexture()!==this._copyDepthFramebuffer.getColorTexture()){const n=this._copyDepthFramebuffer.getColorTexture(),{width:r,height:a}=n;this._tempCopyDepthFramebuffer.destroy(),this._tempCopyDepthFramebuffer.update(e,r,a),o.setColorTexture(n,0),o.setDepthStencilTexture(i),o.update(e,r,a),_(this,e,r,a,t)}this._tempCopyDepthTexture=i,this._tempCopyDepthCommand.execute(e,t),this._updateDepthCommand.execute(e,t)},m.prototype.executeCopyColor=function(e,t){(0,r.A)(this._copyColorCommand)&&this._copyColorCommand.execute(e,t)},m.prototype.clear=function(e,t,n){const i=this._clearGlobeColorCommand;(0,r.A)(i)&&(o.A.clone(n,i.color),this.colorFramebufferManager.clear(e,i,t))},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._pickColorFramebuffer.destroy(),this._outputFramebuffer.destroy(),this._copyDepthFramebuffer.destroy(),this._tempCopyDepthFramebuffer.destroy(),this._updateDepthFramebuffer.destroy(),(0,r.A)(this._copyColorCommand)&&(this._copyColorCommand.shaderProgram=this._copyColorCommand.shaderProgram.destroy()),(0,r.A)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=this._copyDepthCommand.shaderProgram.destroy()),(0,r.A)(this._tempCopyDepthCommand)&&(this._tempCopyDepthCommand.shaderProgram=this._tempCopyDepthCommand.shaderProgram.destroy()),(0,r.A)(this._updateDepthCommand)&&(this._updateDepthCommand.shaderProgram=this._updateDepthCommand.shaderProgram.destroy()),(0,a.A)(this)};const I=m},38867:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(677354),r=n(66415),a=n(302836),s=n(796170),A=n(62467);function c(e,t,n,i,o,r){this.numberOfDayTextures=e,this.flags=t,this.material=n,this.shaderProgram=i,this.clippingShaderState=o,this.clippingPolygonShaderState=r}function l(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}l.prototype.getShaderProgram=function(e){const t=e.frameState,n=e.surfaceTile,o=e.numberOfDayTextures,l=e.applyBrightness,u=e.applyContrast,d=e.applyHue,h=e.applySaturation,g=e.applyGamma,f=e.applyAlpha,p=e.applyDayNightAlpha,m=e.applySplit,_=e.hasWaterMask,I=e.showReflectiveOcean,E=e.showOceanWaves,y=e.enableLighting,C=e.dynamicAtmosphereLighting,b=e.dynamicAtmosphereLightingFromSun,B=e.showGroundAtmosphere,v=e.perFragmentGroundAtmosphere,w=e.hasVertexNormals,T=e.useWebMercatorProjection,S=e.enableFog,x=e.enableClippingPlanes,D=e.clippingPlanes,Q=e.enableClippingPolygons,N=e.clippingPolygons,R=e.clippedByBoundaries,M=e.hasImageryLayerCutout,L=e.colorCorrect,P=e.highlightFillTile,O=e.colorToAlpha,F=e.hasGeodeticSurfaceNormals,U=e.hasExaggeration,k=e.showUndergroundColor,G=e.translucent;let H=0,V="";const z=n.renderedMesh.encoding;z.quantization===r.A.BITS12&&(H=1,V="QUANTIZATION_BITS12");let j=0,Y="";R&&(j=1,Y="TILE_LIMIT_RECTANGLE");let q=0,W="";M&&(q=1,W="APPLY_IMAGERY_CUTOUT");const J=t.mode,K=J|l<<2|u<<3|d<<4|h<<5|g<<6|f<<7|_<<8|I<<9|E<<10|y<<11|C<<12|b<<13|B<<14|v<<15|w<<16|T<<17|S<<18|H<<19|m<<20|x<<21|Q<<22|j<<23|q<<24|L<<25|P<<26|O<<27|F<<28|U<<29|k<<30|G<<31|p<<32;let X=0;(0,i.A)(D)&&D.length>0&&(X=x?D.clippingPlanesState:0);let Z=0;(0,i.A)(N)&&N.length>0&&(Z=Q?N.clippingPolygonsState:0);let $=n.surfaceShader;if((0,i.A)($)&&$.numberOfDayTextures===o&&$.flags===K&&$.material===this.material&&$.clippingShaderState===X&&$.clippingPolygonShaderState===Z)return $.shaderProgram;let ee=this._shadersByTexturesFlags[o];if((0,i.A)(ee)||(ee=this._shadersByTexturesFlags[o]=[]),$=ee[K],!(0,i.A)($)||$.material!==this.material||$.clippingShaderState!==X||$.clippingPolygonShaderState!==Z){const e=this.baseVertexShaderSource.clone(),n=this.baseFragmentShaderSource.clone();0!==X&&n.sources.unshift((0,s.A)(D,t.context)),0!==Z&&(n.sources.unshift(t.context.webgl2?"void clipPolygons(highp sampler2D clippingDistance, int regionsLength, vec2 clippingPosition, int regionIndex) {\n    czm_clipPolygons(clippingDistance, regionsLength, clippingPosition, regionIndex);\n  }":"void clipPolygons(highp sampler2D clippingDistance, int regionsLength, vec2 clippingPosition, int regionIndex) {\n    }"),e.sources.unshift(t.context.webgl2?"vec4 unpackClippingExtents(highp sampler2D extentsTexture, int index) {\n    return czm_unpackClippingExtents(extentsTexture, index);\n  }":"vec4 unpackClippingExtents(highp sampler2D extentsTexture, int index) {\n      return vec4();\n    }")),e.defines.push(V),n.defines.push(`TEXTURE_UNITS ${o}`,Y,W),l&&n.defines.push("APPLY_BRIGHTNESS"),u&&n.defines.push("APPLY_CONTRAST"),d&&n.defines.push("APPLY_HUE"),h&&n.defines.push("APPLY_SATURATION"),g&&n.defines.push("APPLY_GAMMA"),f&&n.defines.push("APPLY_ALPHA"),p&&n.defines.push("APPLY_DAY_NIGHT_ALPHA"),_&&n.defines.push("HAS_WATER_MASK"),I&&(n.defines.push("SHOW_REFLECTIVE_OCEAN"),e.defines.push("SHOW_REFLECTIVE_OCEAN")),E&&n.defines.push("SHOW_OCEAN_WAVES"),O&&n.defines.push("APPLY_COLOR_TO_ALPHA"),k&&(e.defines.push("UNDERGROUND_COLOR"),n.defines.push("UNDERGROUND_COLOR")),G&&(e.defines.push("TRANSLUCENT"),n.defines.push("TRANSLUCENT")),y&&(w?(e.defines.push("ENABLE_VERTEX_LIGHTING"),n.defines.push("ENABLE_VERTEX_LIGHTING")):(e.defines.push("ENABLE_DAYNIGHT_SHADING"),n.defines.push("ENABLE_DAYNIGHT_SHADING"))),C&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),b&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"))),B&&(e.defines.push("GROUND_ATMOSPHERE"),n.defines.push("GROUND_ATMOSPHERE"),v&&(e.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"),n.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"))),e.defines.push("INCLUDE_WEB_MERCATOR_Y"),n.defines.push("INCLUDE_WEB_MERCATOR_Y"),S&&(e.defines.push("FOG"),n.defines.push("FOG")),m&&n.defines.push("APPLY_SPLIT"),x&&n.defines.push("ENABLE_CLIPPING_PLANES"),Q&&(n.defines.push("ENABLE_CLIPPING_POLYGONS"),e.defines.push("ENABLE_CLIPPING_POLYGONS"),N.inverse&&n.defines.push("CLIPPING_INVERSE"),n.defines.push(`CLIPPING_POLYGON_REGIONS_LENGTH ${N.extentsCount}`),e.defines.push(`CLIPPING_POLYGON_REGIONS_LENGTH ${N.extentsCount}`)),L&&n.defines.push("COLOR_CORRECT"),P&&n.defines.push("HIGHLIGHT_FILL_TILE"),F&&e.defines.push("GEODETIC_SURFACE_NORMALS"),U&&e.defines.push("EXAGGERATION");let i="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend)\n    {\n        vec4 color = initialColor;\n";M&&(i+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(let e=0;e<o;++e)i+=M?`        cutoutAndColorResult = u_dayTextureCutoutRectangles[${e}];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n`:"        color = sampleAndBlend(\n",i+=`            color,\n            u_dayTextures[${e}],\n            u_dayTextureUseWebMercatorT[${e}] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle[${e}],\n            u_dayTextureTranslationAndScale[${e}],\n            ${f?`u_dayTextureAlpha[${e}]`:"1.0"},\n            ${p?`u_dayTextureNightAlpha[${e}]`:"1.0"},\n            ${p?`u_dayTextureDayAlpha[${e}]`:"1.0"},\n            ${l?`u_dayTextureBrightness[${e}]`:"0.0"},\n            ${u?`u_dayTextureContrast[${e}]`:"0.0"},\n            ${d?`u_dayTextureHue[${e}]`:"0.0"},\n            ${h?`u_dayTextureSaturation[${e}]`:"0.0"},\n            ${g?`u_dayTextureOneOverGamma[${e}]`:"0.0"},\n            ${m?`u_dayTextureSplit[${e}]`:"0.0"},\n            ${O?`u_colorsToAlpha[${e}]`:"vec4(0.0)"},\n            nightBlend);\n`,M&&(i+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");i+="        return color;\n    }",n.sources.push(i),e.sources.push(function(e){let t;switch(e){case A.A.SCENE3D:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }";break;case A.A.SCENE2D:case A.A.COLUMBUS_VIEW:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }";break;case A.A.MORPHING:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }"}return t}(J)),e.sources.push(function(e){return e?"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }":"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }"}(T));const r=a.A.fromCache({context:t.context,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:z.getAttributeLocations()});$=ee[K]=new c(o,K,this.material,r,X,Z)}return n.surfaceShader=$,$.shaderProgram},l.prototype.destroy=function(){let e,t;const n=this._shadersByTexturesFlags;for(const o in n)if(n.hasOwnProperty(o)){const r=n[o];if(!(0,i.A)(r))continue;for(e in r)r.hasOwnProperty(e)&&(t=r[e],(0,i.A)(t)&&t.shaderProgram.destroy())}return(0,o.A)(this)};const u=l},295550:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var i=n(660662),o=n(267980),r=n(626809),a=n(336946),s=n(491446),A=n(874915),c=n(150429),l=n(276904),u=n(766067),d=n(209202),h=n(83181),g=n(307898),f=n(371267),p=n(705302),m=n(641613),_=n(442790),I=n(57775),E=n(654799),y=n(616e3),C=n(957233),b=n(78078),B=n(557448),v=n(508380),w=n(921243),T=n(980840),S=n(62467),x=n(71160);function D(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new r.A(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new o.A,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=x.A.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new i.A,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(D.prototype,{eligibleForUnloading:{get:function(){const e=this.terrainState;let t=!(e===x.A.RECEIVING||e===x.A.TRANSFORMING);const n=this.imagery;for(let e=0,i=n.length;t&&e<i;++e){const i=n[e];t=!(0,s.A)(i.loadingImagery)||i.loadingImagery.state!==w.A.TRANSITIONING}return t}},renderedMesh:{get:function(){return(0,s.A)(this.vertexArray)?this.mesh:(0,s.A)(this.fill)?this.fill.mesh:void 0}}});const Q=new a.A;function N(e,t,n,i,r,a){let A=e.getExaggeratedPosition(i,r,a);if((0,s.A)(t)&&t!==S.A.SCENE3D){const e=n.ellipsoid.cartesianToCartographic(A,Q);A=n.project(e,a),A=o.A.fromElements(A.z,A.x,A.y,a)}return A}const R=new o.A,M=new o.A,L=new o.A;function P(e,t,n,i){const o=e.renderedMesh,r=o.vertices,a=o.encoding,s=r.length/a.stride;let A=f.A.clone(a);A.hasGeodeticSurfaceNormals=t,A=f.A.clone(A);const c=A.stride,l=new Float32Array(s*c);t?a.addGeodeticSurfaceNormals(r,l,n):a.removeGeodeticSurfaceNormals(r,l),o.vertices=l,o.stride=c,o!==e.mesh?(D._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=D._createVertexArrayForMesh(i.context,o)):(D._freeVertexArray(e.vertexArray),e.vertexArray=D._createVertexArrayForMesh(i.context,o)),D._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}D.prototype.pick=function(e,t,n,i,o){const r=this.renderedMesh;if(!(0,s.A)(r))return;const a=r.vertices,A=r.indices,l=r.encoding,d=A.length;let h=Number.MAX_VALUE;for(let o=0;o<d;o+=3){const r=A[o],u=A[o+1],d=A[o+2],g=N(l,t,n,a,r,R),f=N(l,t,n,a,u,M),p=N(l,t,n,a,d,L),m=c.A.rayTriangleParametric(e,g,f,p,i);(0,s.A)(m)&&m<h&&m>=0&&(h=m)}return h!==Number.MAX_VALUE?u.A.getPoint(e,h,o):void 0},D.prototype.freeResources=function(){(0,s.A)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=x.A.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();const e=this.imagery;for(let t=0,n=e.length;t<n;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},D.prototype.freeVertexArray=function(){D._freeVertexArray(this.vertexArray),this.vertexArray=void 0,D._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},D.initialize=function(e,t,n){let i=e.data;(0,s.A)(i)||(i=e.data=new D),e.state===T.A.START&&(function(e,t,n){let i=t.getTileDataAvailable(e.x,e.y,e.level);if(!(0,s.A)(i)&&(0,s.A)(e.parent)){const t=e.parent,n=t.data;(0,s.A)(n)&&(0,s.A)(n.terrainData)&&(i=n.terrainData.isChildAvailable(t.x,t.y,e.x,e.y))}!1===i&&(e.data.terrainState=x.A.FAILED);for(let i=0,o=n.length;i<o;++i){const o=n.get(i);o.show&&o._createTileImagerySkeletons(e,t)}}(e,t,n),e.state=T.A.LOADING)},D.processStateMachine=function(e,t,n,i,o,a,A){D.initialize(e,n,i);const c=e.data;if(e.state===T.A.LOADING&&function(e,t,n,i,o,a){const A=e.data,c=e.parent;if(A.terrainState===x.A.FAILED&&void 0!==c&&(void 0!==c.data&&void 0!==c.data.terrainData&&!1!==c.data.terrainData.canUpsample||D.processStateMachine(c,t,n,i,o,a,!0)),A.terrainState===x.A.FAILED&&function(e,t,n,i,o,r,a){const A=t.parent;if(!A)return void(t.state=T.A.FAILED);const c=A.data.terrainData,l=A.x,u=A.y,d=A.level;if(!(0,s.A)(c))return;const h=c.upsample(i.tilingScheme,l,u,d,o,r,a);(0,s.A)(h)&&(e.terrainState=x.A.RECEIVING,Promise.resolve(h).then(function(t){(0,s.A)(t)&&(e.terrainData=t,e.terrainState=x.A.RECEIVED)}).catch(function(){e.terrainState=x.A.FAILED}))}(A,e,0,n,e.x,e.y,e.level),A.terrainState===x.A.UNLOADED&&function(e,t,n,i,o){function r(){const a=new d.A({throttle:!1,throttleByServer:!0,type:g.A.TERRAIN});e.request=a;const A=t.requestTileGeometry(n,i,o,a);(0,s.A)(A)?(e.terrainState=x.A.RECEIVING,Promise.resolve(A).then(function(t){!function(t){if(!(0,s.A)(t))return e.terrainState=x.A.UNLOADED,void(e.request=void 0);e.terrainData=t,e.terrainState=x.A.RECEIVED,e.request=void 0}(t)}).catch(function(a){!function(a){if(e.request.state===h.A.CANCELLED)return e.terrainData=void 0,e.terrainState=x.A.UNLOADED,void(e.request=void 0);e.terrainState=x.A.FAILED,e.request=void 0;const s=`Failed to obtain terrain tile X: ${n} Y: ${i} Level: ${o}. Error message: "${a}"`;t._requestError=p.A.reportError(t._requestError,t,t.errorEvent,s,n,i,o),t._requestError.retry&&r()}(a)})):(e.terrainState=x.A.UNLOADED,e.request=void 0)}r()}(A,n,e.x,e.y,e.level),A.terrainState===x.A.RECEIVED&&function(e,t,n,i,o,r){const a=n.tilingScheme,A=O;A.tilingScheme=a,A.x=i,A.y=o,A.level=r,A.exaggeration=t.verticalExaggeration,A.exaggerationRelativeHeight=t.verticalExaggerationRelativeHeight,A.throttle=!0;const c=e.terrainData.createMesh(A);(0,s.A)(c)&&(e.terrainState=x.A.TRANSFORMING,Promise.resolve(c).then(function(t){e.mesh=t,e.terrainState=x.A.TRANSFORMED}).catch(function(){e.terrainState=x.A.FAILED}))}(A,t,n,e.x,e.y,e.level),A.terrainState===x.A.TRANSFORMED&&(function(e,t,n,i,o,r,a){e.vertexArray=D._createVertexArrayForMesh(t,e.mesh),e.terrainState=x.A.READY,e.fill=e.fill&&e.fill.destroy(a)}(A,t.context,0,e.x,e.y,e.level,a),A.updateExaggeration(e,t,o)),A.terrainState>=x.A.RECEIVED&&void 0===A.waterMaskTexture&&n.hasWaterMask)if(void 0!==A.terrainData.waterMask)!function(e,t){const n=t.terrainData.waterMask,i=function(e){let t=e.cache.tile_waterMaskData;if(!(0,s.A)(t)){const n=y.A.create({context:e,pixelFormat:l.A.LUMINANCE,pixelDatatype:I.A.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});n.referenceCount=1,t={allWaterTexture:n,sampler:new E.A({wrapS:B.A.CLAMP_TO_EDGE,wrapT:B.A.CLAMP_TO_EDGE,minificationFilter:b.A.LINEAR,magnificationFilter:C.A.LINEAR}),destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}(e);let o;const a=n.length;if(1===a){if(0===n[0])return;o=i.allWaterTexture}else{const t=Math.sqrt(a);o=y.A.create({context:e,pixelFormat:l.A.LUMINANCE,pixelDatatype:I.A.UNSIGNED_BYTE,source:{width:t,height:t,arrayBufferView:n},sampler:i.sampler,flipY:!1}),o.referenceCount=0}++o.referenceCount,t.waterMaskTexture=o,r.A.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}(t.context,A);else{const t=A._findAncestorTileWithTerrainData(e);(0,s.A)(t)&&(0,s.A)(t.data.waterMaskTexture)&&(A.waterMaskTexture=t.data.waterMaskTexture,++A.waterMaskTexture.referenceCount,A._computeWaterMaskTranslationAndScale(e,t,A.waterMaskTranslationAndScale))}}(e,t,n,i,o,a),A)return;const u=e.renderable;e.renderable=(0,s.A)(c.vertexArray);const f=c.terrainState===x.A.READY;e.upsampledFromParent=(0,s.A)(c.terrainData)&&c.terrainData.wasCreatedByUpsampling();const m=c.processImagery(e,n,t);if(f&&m){const t=e._loadedCallbacks,n={};for(const i in t)t.hasOwnProperty(i)&&(t[i](e)||(n[i]=t[i]));e._loadedCallbacks=n,e.state=T.A.DONE}u&&(e.renderable=!0)},D.prototype.processImagery=function(e,t,n,i){const o=e.data;let r=e.upsampledFromParent,a=!1,A=!0;const c=o.imagery;let l,u;for(l=0,u=c.length;l<u;++l){const o=c[l];if(!(0,s.A)(o.loadingImagery)){r=!1;continue}if(o.loadingImagery.state===w.A.PLACEHOLDER){const n=o.loadingImagery.imageryLayer;if(n.ready){o.freeResources(),c.splice(l,1),n._createTileImagerySkeletons(e,t,l),--l,u=c.length;continue}r=!1}const d=o.processStateMachine(e,n,i);A=A&&d,a=a||d||(0,s.A)(o.readyImagery),r=r&&(0,s.A)(o.loadingImagery)&&(o.loadingImagery.state===w.A.FAILED||o.loadingImagery.state===w.A.INVALID)}return e.upsampledFromParent=r,e.renderable=e.renderable&&(a||A),A},D.prototype.addGeodeticSurfaceNormals=function(e,t){P(this,!0,e,t)},D.prototype.removeGeodeticSurfaceNormals=function(e){P(this,!1,void 0,e)},D.prototype.updateExaggeration=function(e,t,n){const i=this,o=i.renderedMesh;if(void 0===o)return;const r=t.verticalExaggeration,a=t.verticalExaggerationRelativeHeight,s=1!==r,A=o.encoding,c=A.exaggeration!==r,l=A.exaggerationRelativeHeight!==a;if(c||l){if(c)if(s&&!A.hasGeodeticSurfaceNormals){const n=e.tilingScheme.ellipsoid;i.addGeodeticSurfaceNormals(n,t)}else!s&&A.hasGeodeticSurfaceNormals&&i.removeGeodeticSurfaceNormals(t);if(A.exaggeration=r,A.exaggerationRelativeHeight=a,void 0!==n){n._tileToUpdateHeights.push(e);const t=e.customData,i=t.length;for(let e=0;e<i;e++)t[e].level=-1}}};const O={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};D._createVertexArrayForMesh=function(e,t){const n=t.vertices,i=m.A.createVertexBuffer({context:e,typedArray:n,usage:_.A.STATIC_DRAW}),o=t.encoding.getAttributes(i),r=t.indices.indexBuffers||{};let a=r[e.id];if(!(0,s.A)(a)||a.isDestroyed()){const n=t.indices;a=m.A.createIndexBuffer({context:e,typedArray:n,usage:_.A.STATIC_DRAW,indexDatatype:A.A.fromSizeInBytes(n.BYTES_PER_ELEMENT)}),a.vertexArrayDestroyable=!1,a.referenceCount=1,r[e.id]=a,t.indices.indexBuffers=r}else++a.referenceCount;return new v.A({context:e,attributes:o,indexBuffer:a})},D._freeVertexArray=function(e){if((0,s.A)(e)){const t=e.indexBuffer;e.isDestroyed()||e.destroy(),(0,s.A)(t)&&!t.isDestroyed()&&(0,s.A)(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},D.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;for(;(0,s.A)(t)&&(!(0,s.A)(t.data)||!(0,s.A)(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling());)t=t.parent;return t},D.prototype._computeWaterMaskTranslationAndScale=function(e,t,n){const i=t.rectangle,o=e.rectangle,r=o.width,a=o.height,s=r/i.width,A=a/i.height;return n.x=s*(o.west-i.west)/r,n.y=A*(o.south-i.south)/a,n.z=s,n.w=A,n};const F=D},301947:(e,t,n)=>{"use strict";n.d(t,{A:()=>Oe});var i=n(660662),o=n(854894),r=n(434067),a=n(267980),s=n(626809),A=n(336946),c=n(376758),l=n(41476),u=n(433235),d=n(430346),h=n(491446),g=n(677354),f=n(605971),p=n(955943),m=n(75200),_=n(34233),I=n(874915),E=n(647326),y=n(367817),C=n(584164),b=n(290176),B=n(832698),v=n(811203),w=n(402330),T=n(697422),S=n(6874),x=n(717339),D=n(66415),Q=n(566123),N=n(414305),R=n(641613),M=n(442790),L=n(430332),P=n(377496),O=n(760866),F=n(40118),U=n(508380),k=n(200646),G=n(711284),H=n(348460),V=n(523721),z=n(295550),j=n(451227),Y=n(921243),q=n(612123),W=n(842153),J=n(980840),K=n(62467),X=n(988609),Z=n(640809),$=n(71160),ee=n(413690),te=n(960847);function ne(e){if(!(0,h.A)(e))throw new f.A("options is required.");if(!(0,h.A)(e.terrainProvider))throw new f.A("options.terrainProvider is required.");if(!(0,h.A)(e.imageryLayers))throw new f.A("options.imageryLayers is required.");if(!(0,h.A)(e.surfaceShaderSet))throw new f.A("options.surfaceShaderSet is required.");this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.showWaterEffect=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=X.A.RECEIVE_ONLY,this.vertexShadowDarkness=.3,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this.undergroundColor=void 0,this.undergroundColorAlphaByDistance=void 0,this.lambertDiffuseMultiplier=0,this.materialUniformMap=void 0,this._materialUniformMap=void 0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new p.A,this._removeLayerAddedListener=this._imageryLayers.layerAdded.addEventListener(ne.prototype._onLayerAdded,this),this._removeLayerRemovedListener=this._imageryLayers.layerRemoved.addEventListener(ne.prototype._onLayerRemoved,this),this._removeLayerMovedListener=this._imageryLayers.layerMoved.addEventListener(ne.prototype._onLayerMoved,this),this._removeLayerShownListener=this._imageryLayers.layerShownOrHidden.addEventListener(ne.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new p.A,this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new l.A(0,0,.5,1),this._clippingPlanes=void 0,this._clippingPolygons=void 0,this.cartographicLimitRectangle=T.A.clone(T.A.MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1,this._oldVerticalExaggeration=void 0,this._oldVerticalExaggerationRelativeHeight=void 0}function ie(e,t){let n=e.loadingImagery;(0,h.A)(n)||(n=e.readyImagery);let i=t.loadingImagery;return(0,h.A)(i)||(i=t.readyImagery),n.imageryLayer._layerIndex-i.imageryLayer._layerIndex}function oe(e,t){const n=t.globeTranslucencyState;if(n.translucent){const i=e.renderState.blending.enabled;n.pushDerivedCommands(e,i,t)}else t.commandList.push(e)}Object.defineProperties(ne.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){if(!(0,h.A)(e))throw new f.A("value is required.");this._baseColor=e,this._firstPassInitialColor=s.A.fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){if(!(0,h.A)(e))throw new f.A("value is required.");this._quadtree=e}},tilingScheme:{get:function(){if((0,h.A)(this._terrainProvider))return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){this._terrainProvider!==e&&(this._terrainProvider=e,(0,h.A)(this._quadtree)&&this._quadtree.invalidateAllTiles())}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){G.A.setOwner(e,this,"_clippingPlanes")}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){H.A.setOwner(e,this,"_clippingPolygons")}}}),ne.prototype.update=function(e){this._imageryLayers._update()},ne.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile(function(e){e.data.imagery.sort(ie)})),function(e,t){const n=t.creditDisplay,i=e._terrainProvider;(0,h.A)(i)&&(0,h.A)(i.credit)&&n.addCreditToNextFrame(i.credit);const o=e._imageryLayers;for(let e=0,t=o.length;e<t;++e){const t=o.get(e);t.ready&&t.show&&(0,h.A)(t.imageryProvider.credit)&&n.addCreditToNextFrame(t.imageryProvider.credit)}}(this,e);const t=this._vertexArraysToDestroy,n=t.length;for(let e=0;e<n;++e)z.A._freeVertexArray(t[e]);t.length=0},ne.prototype.beginUpdate=function(e){const t=this._tilesToRenderByTextureCount;for(let e=0,n=t.length;e<n;++e){const n=t[e];(0,h.A)(n)&&(n.length=0)}const n=this._clippingPlanes;(0,h.A)(n)&&n.enabled&&n.update(e);const i=this._clippingPolygons;(0,h.A)(i)&&i.enabled&&(i.update(e),i.queueCommands(e)),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},ne.prototype.endUpdate=function(e){if(!(0,h.A)(this._renderState)){this._renderState=F.A.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:V.A.LESS}}),this._blendRenderState=F.A.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:V.A.LESS_OR_EQUAL},blending:k.A.ALPHA_BLEND});let e=(0,c.A)(this._renderState,!0);e.cull.enabled=!1,this._disableCullingRenderState=F.A.fromCache(e),e=(0,c.A)(this._blendRenderState,!0),e.cull.enabled=!1,this._disableCullingBlendRenderState=F.A.fromCache(e)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&Z.A.updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);const t=this.quadtree,n=e.verticalExaggeration,i=e.verticalExaggerationRelativeHeight,o=this._oldVerticalExaggeration!==n||this._oldVerticalExaggerationRelativeHeight!==i;this._oldVerticalExaggeration=n,this._oldVerticalExaggerationRelativeHeight=i,o&&t.forEachLoadedTile(function(n){n.data.updateExaggeration(n,e,t)});const r=this._tilesToRenderByTextureCount;for(let t=0,n=r.length;t<n;++t){const n=r[t];if((0,h.A)(n))for(let t=0,i=n.length;t<i;++t){const i=n[t],o=i.data.tileBoundingRegion;Pe(this,i,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,o.minimumHeight)}}},ne.prototype.updateForPick=function(e){const t=this._drawCommands;for(let n=0,i=this._usedDrawCommands;n<i;++n)oe(t[n],e)},ne.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},ne.prototype.getLevelMaximumGeometricError=function(e){return(0,h.A)(this._terrainProvider)?this._terrainProvider.getLevelMaximumGeometricError(e):0},ne.prototype.loadTile=function(e,t){let n,i=t.data,o=!0;(0,h.A)(i)&&(o=i.boundingVolumeSourceTile!==t||t._lastSelectionResult===te.A.CULLED_BUT_NEEDED,n=i.terrainState),z.A.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o),i=t.data,o&&n!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==Q.A.NONE&&i.boundingVolumeSourceTile===t&&(o=!1,z.A.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o))};const re=new i.A,ae=new T.A,se=new T.A,Ae=new A.A;function ce(e,t){if(t.west<t.east)return t;const n=T.A.clone(t,se);return T.A.center(e,Ae).longitude>0?n.east=y.A.PI:n.west=-y.A.PI,n}function le(e,t){if(t.cameraUnderground)return!0;if(t.globeTranslucencyState.translucent)return!0;if(e.backFaceCulling)return!1;const n=e._clippingPlanes;if((0,h.A)(n)&&n.enabled)return!0;const i=e._clippingPolygons;return!(!(0,h.A)(i)||!i.enabled)||!T.A.equals(e.cartographicLimitRectangle,T.A.MAX_VALUE)}ne.prototype.computeTileVisibility=function(e,t,n){const o=this.computeDistanceToTile(e,t);e._distance=o;const r=le(this,t);if(t.fog.enabled&&!r&&y.A.fog(o,t.fog.density)>=1)return Q.A.NONE;const s=e.data,A=s.tileBoundingRegion;if(void 0===s.boundingVolumeSourceTile)return Q.A.PARTIAL;const c=t.cullingVolume;let l=A.boundingVolume;(0,h.A)(l)||(l=A.boundingSphere),s.clippedByBoundaries=!1;const u=ce(e.rectangle,this.cartographicLimitRectangle),d=T.A.simpleIntersection(u,e.rectangle,ae);if(!(0,h.A)(d))return Q.A.NONE;if(T.A.equals(d,e.rectangle)||(s.clippedByBoundaries=!0),t.mode!==K.A.SCENE3D&&(l=re,i.A.fromRectangleWithHeights2D(e.rectangle,t.mapProjection,A.minimumHeight,A.maximumHeight,l),a.A.fromElements(l.center.z,l.center.x,l.center.y,l.center),t.mode===K.A.MORPHING&&(0,h.A)(s.renderedMesh)&&(l=i.A.union(A.boundingSphere,l,l))),!(0,h.A)(l))return Q.A.PARTIAL;const g=this._clippingPlanes;if((0,h.A)(g)&&g.enabled){const t=g.computeIntersectionWithBoundingVolume(l);if(e.isClipped=t!==E.A.INSIDE,t===E.A.OUTSIDE)return Q.A.NONE}const f=this._clippingPolygons;if((0,h.A)(f)&&f.enabled){const t=f.computeIntersectionWithBoundingVolume(A);e.isClipped=t!==E.A.OUTSIDE}let p;const m=c.computeVisibility(l);if(m===E.A.OUTSIDE?p=Q.A.NONE:m===E.A.INTERSECTING?p=Q.A.PARTIAL:m===E.A.INSIDE&&(p=Q.A.FULL),p===Q.A.NONE)return p;const _=t.mode===K.A.SCENE3D&&t.camera.frustum instanceof v.A;if(t.mode===K.A.SCENE3D&&!_&&(0,h.A)(n)&&!r){const e=s.occludeePointInScaledSpace;return(0,h.A)(e)?n.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(e,A.minimumHeight)?p:Q.A.NONE:p}return p},ne.prototype.canRefine=function(e){return!!(0,h.A)(e.data.terrainData)||void 0!==this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1)};const ue=[],de=[];ne.prototype.canRenderWithoutLosingDetail=function(e,t){const n=e.data,i=ue;i.length=this._imageryLayers.length;let o,r,a,s=!1,A=!1;for((0,h.A)(n)&&(s=n.terrainState===$.A.READY,A=!0,o=n.imagery),r=0,a=i.length;r<a;++r)i[r]=A;if((0,h.A)(o))for(r=0,a=o.length;r<a;++r){const e=o[r],t=e.loadingImagery,n=!(0,h.A)(t)||t.state===Y.A.FAILED||t.state===Y.A.INVALID,a=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;i[a]=n&&i[a]}const c=this.quadtree._lastSelectionFrameNumber,l=de;for(l.length=0,l.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);l.length>0;){const e=l.pop(),t=e._lastSelectionResultFrame===c?e._lastSelectionResult:te.A.NONE;if(t===te.A.RENDERED){const t=e.data;if(!(0,h.A)(t))continue;if(!s&&e.data.terrainState===$.A.READY)return!1;const n=e.data.imagery;for(r=0,a=n.length;r<a;++r){const e=n[r],t=e.loadingImagery,o=!(0,h.A)(t)||t.state===Y.A.FAILED||t.state===Y.A.INVALID,a=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;if(o&&!i[a])return!1}}else t===te.A.REFINED&&l.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild)}return!0};const he=new a.A;ne.prototype.computeTileLoadPriority=function(e,t){const n=e.data;if(void 0===n)return 0;const i=n.tileBoundingRegion.boundingVolume;if(void 0===i)return 0;const o=t.camera.positionWC,r=t.camera.directionWC,s=a.A.subtract(i.center,o,he),A=a.A.magnitude(s);return A<y.A.EPSILON5?0:(a.A.divideByScalar(s,A,s),(1-a.A.dot(s,r))*e._distance)};const ge=new C.A,fe=new C.A,pe=new s.A,me=new s.A,_e=new s.A,Ie=new a.A,Ee=new a.A,ye=new a.A,Ce=new a.A;ne.prototype.showTileThisFrame=function(e,t){let n=0;const i=e.data.imagery;for(let e=0,t=i.length;e<t;++e){const t=i[e];(0,h.A)(t.readyImagery)&&0!==t.readyImagery.imageryLayer.alpha&&++n}let o=this._tilesToRenderByTextureCount[n];(0,h.A)(o)||(o=[],this._tilesToRenderByTextureCount[n]=o),o.push(e);const r=e.data;(0,h.A)(r.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;const a=this._debug;++a.tilesRendered,a.texturesRendered+=n};const be=[new a.A,new a.A,new a.A,new a.A];function Be(e,t,n,i,o,r){const s=e.quadtree._occluders.ellipsoid,A=s.ellipsoid,c=be;return a.A.fromRadians(n.west,n.south,o,A,c[0]),a.A.fromRadians(n.east,n.south,o,A,c[1]),a.A.fromRadians(n.west,n.north,o,A,c[2]),a.A.fromRadians(n.east,n.north,o,A,c[3]),s.computeHorizonCullingPointPossiblyUnderEllipsoid(t,c,i,r)}ne.prototype.computeDistanceToTile=function(e,t){!function(e,t,n){let o=e.data;void 0===o&&(o=e.data=new z.A);const r=e.tilingScheme.ellipsoid;void 0===o.tileBoundingRegion&&(o.tileBoundingRegion=new ee.A({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:r,minimumHeight:0,maximumHeight:0}));const s=o.tileBoundingRegion,A=s.minimumHeight,c=s.maximumHeight;let l=!1,u=e;const d=o.mesh,g=o.terrainData;if(void 0!==d&&void 0!==d.minimumHeight&&void 0!==d.maximumHeight)s.minimumHeight=d.minimumHeight,s.maximumHeight=d.maximumHeight,l=!0;else if(void 0!==g&&void 0!==g._minimumHeight&&void 0!==g._maximumHeight)s.minimumHeight=g._minimumHeight,s.maximumHeight=g._maximumHeight;else{s.minimumHeight=Number.NaN,s.maximumHeight=Number.NaN;let t=e.parent;for(;void 0!==t;){const e=t.data;if(void 0!==e){const t=e.mesh,n=e.terrainData;if(void 0!==t&&void 0!==t.minimumHeight&&void 0!==t.maximumHeight){s.minimumHeight=t.minimumHeight,s.maximumHeight=t.maximumHeight;break}if(void 0!==n&&void 0!==n._minimumHeight&&void 0!==n._maximumHeight){s.minimumHeight=n._minimumHeight,s.maximumHeight=n._maximumHeight;break}}t=t.parent}u=t}if(void 0!==u){const g=n.verticalExaggeration,f=n.verticalExaggerationRelativeHeight;if(1!==g&&(l=!1,s.minimumHeight=x.A.getHeight(s.minimumHeight,g,f),s.maximumHeight=x.A.getHeight(s.maximumHeight,g,f)),l)o.boundingVolumeIsFromMesh||(s._orientedBoundingBox=B.A.clone(d.orientedBoundingBox,s._orientedBoundingBox),s._boundingSphere=i.A.clone(d.boundingSphere3D,s._boundingSphere),o.occludeePointInScaledSpace=a.A.clone(d.occludeePointInScaledSpace,o.occludeePointInScaledSpace),(0,h.A)(o.occludeePointInScaledSpace)||(o.occludeePointInScaledSpace=Be(t,s._orientedBoundingBox.center,e.rectangle,s.minimumHeight,s.maximumHeight,o.occludeePointInScaledSpace)));else{const n=void 0===s._orientedBoundingBox||void 0===s._boundingSphere;(s.minimumHeight!==A||s.maximumHeight!==c||n)&&(s.computeBoundingVolumes(r),o.occludeePointInScaledSpace=Be(t,s._orientedBoundingBox.center,e.rectangle,s.minimumHeight,s.maximumHeight,o.occludeePointInScaledSpace))}o.boundingVolumeSourceTile=u,o.boundingVolumeIsFromMesh=l}else o.boundingVolumeSourceTile=void 0,o.boundingVolumeIsFromMesh=!1}(e,this,t);const n=e.data;if(void 0===n.boundingVolumeSourceTile)return 9999999999;const o=n.tileBoundingRegion,r=o.minimumHeight,s=o.maximumHeight;if(n.boundingVolumeSourceTile!==e){const e=t.camera.positionCartographic.height;Math.abs(e-r)>Math.abs(e-s)?(o.minimumHeight=r,o.maximumHeight=r):(o.minimumHeight=s,o.maximumHeight=s)}const A=o.distanceToCamera(t);return o.minimumHeight=r,o.maximumHeight=s,A},ne.prototype.isDestroyed=function(){return!1},ne.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._clippingPolygons=this._clippingPolygons&&this._clippingPolygons.destroy(),this._removeLayerAddedListener=this._removeLayerAddedListener&&this._removeLayerAddedListener(),this._removeLayerRemovedListener=this._removeLayerRemovedListener&&this._removeLayerRemovedListener(),this._removeLayerMovedListener=this._removeLayerMovedListener&&this._removeLayerMovedListener(),this._removeLayerShownListener=this._removeLayerShownListener&&this._removeLayerShownListener(),(0,g.A)(this)},ne.prototype._onLayerAdded=function(e,t){if(!this.isDestroyed()&&e.show){const t=this._terrainProvider,n=this,i=this._imageryLayersUpdatedEvent,o=function(){e._imageryCache={},n._quadtree.forEachLoadedTile(function(n){if((0,h.A)(n._loadedCallbacks[e._layerIndex]))return;let i;const o=n.data.imagery,r=o.length;let a=-1,s=0;for(i=0;i<r;++i){const t=o[i];if((t.readyImagery??t.loadingImagery).imageryLayer===e)-1===a&&(a=i),++s;else if(-1!==a)break}if(-1===a)return;const A=a+s;e._createTileImagerySkeletons(n,t,A)&&(n._loadedCallbacks[e._layerIndex]=function(e,t,n){return function(i){let o,r,a=-1;const s=i.data.imagery,A=s.length;let c;for(c=0;c<A;++c)if(o=s[c],r=o.readyImagery??o.loadingImagery,r.imageryLayer===t){a=c;break}if(-1!==a){const A=a+e;if(o=s[A],r=(0,h.A)(o)?o.readyImagery??o.loadingImagery:void 0,!(0,h.A)(r)||r.imageryLayer!==t)return!t._createTileImagerySkeletons(i,n,A);for(c=a;c<A;++c)s[c].freeResources();s.splice(a,e)}return!0}}(s,e,t),n.state=J.A.LOADING)})};e.ready&&(e.imageryProvider._reload=o),this._quadtree.forEachLoadedTile(function(i){e._createTileImagerySkeletons(i,t)&&(i.state=J.A.LOADING,0===i.level||i._lastSelectionResultFrame===n.quadtree._lastSelectionFrameNumber&&i._lastSelectionResult===te.A.RENDERED||(i.renderable=!1))}),this._layerOrderChanged=!0,i.raiseEvent()}},ne.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile(function(t){const n=t.data.imagery;let i=-1,o=0;for(let t=0,r=n.length;t<r;++t){const r=n[t];let a=r.loadingImagery;if((0,h.A)(a)||(a=r.readyImagery),a.imageryLayer===e)-1===i&&(i=t),r.freeResources(),++o;else if(-1!==i)break}-1!==i&&n.splice(i,o)}),(0,h.A)(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},ne.prototype._onLayerMoved=function(e,t,n){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},ne.prototype._onLayerShownOrHidden=function(e,t,n){n?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};const ve=new C.A,we=new C.A;function Te(e,t){const n={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_atmosphereLightIntensity:function(){return this.properties.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return this.properties.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return this.properties.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return this.properties.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return this.properties.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return this.properties.atmosphereMieAnisotropy},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_verticalExaggerationAndRelativeHeight:function(){return this.properties.verticalExaggerationAndRelativeHeight},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){const t=e.context.uniformState.view,n=C.A.multiplyByPoint(t,this.properties.rtc,Ee);return C.A.setTranslation(t,n,ge),ge},u_modifiedModelViewProjection:function(){const t=e.context.uniformState.view,n=e.context.uniformState.projection,i=C.A.multiplyByPoint(t,this.properties.rtc,Ee);return C.A.setTranslation(t,i,fe),C.A.multiply(n,fe,fe),fe},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureNightAlpha:function(){return this.properties.dayTextureNightAlpha},u_dayTextureDayAlpha:function(){return this.properties.dayTextureDayAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){const n=t._clippingPlanes;return(0,h.A)(n)&&(0,h.A)(n.texture)?n.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){const n=t._clippingPlanes,i=(0,h.A)(n)?C.A.multiply(e.context.uniformState.view,n.modelMatrix,ve):C.A.IDENTITY;return C.A.inverseTranspose(i,we)},u_clippingPlanesEdgeStyle:function(){const e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_clippingDistance:function(){const n=t._clippingPolygons.clippingTexture;return(0,h.A)(n)?n:e.context.defaultTexture},u_clippingExtents:function(){const n=t._clippingPolygons.extentsTexture;return(0,h.A)(n)?n:e.context.defaultTexture},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},u_frontFaceAlphaByDistance:function(){return this.properties.frontFaceAlphaByDistance},u_backFaceAlphaByDistance:function(){return this.properties.backFaceAlphaByDistance},u_translucencyRectangle:function(){return this.properties.localizedTranslucencyRectangle},u_undergroundColor:function(){return this.properties.undergroundColor},u_undergroundColorAlphaByDistance:function(){return this.properties.undergroundColorAlphaByDistance},u_lambertDiffuseMultiplier:function(){return this.properties.lambertDiffuseMultiplier},u_vertexShadowDarkness:function(){return this.properties.vertexShadowDarkness},properties:{initialColor:new s.A(0,0,.5,1),fillHighlightColor:new l.A(0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new r.A(65e5,9e6),nightFadeDistance:new r.A(1e7,4e7),atmosphereLightIntensity:10,atmosphereRayleighCoefficient:new a.A(55e-7,13e-6,284e-7),atmosphereMieCoefficient:new a.A(21e-6,21e-6,21e-6),atmosphereRayleighScaleHeight:1e4,atmosphereMieScaleHeight:3200,atmosphereMieAnisotropy:.9,hsbShift:new a.A,center3D:void 0,rtc:new a.A,modifiedModelView:new C.A,tileRectangle:new s.A,verticalExaggerationAndRelativeHeight:new r.A(1,0),dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureNightAlpha:[],dayTextureDayAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new r.A,southMercatorYAndOneOverHeight:new r.A,waterMask:void 0,waterMaskTranslationAndScale:new s.A,minMaxHeight:new r.A,scaleAndBias:new C.A,clippingPlanesEdgeColor:l.A.clone(l.A.WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new s.A,frontFaceAlphaByDistance:new s.A,backFaceAlphaByDistance:new s.A,localizedTranslucencyRectangle:new s.A,undergroundColor:l.A.clone(l.A.TRANSPARENT),undergroundColorAlphaByDistance:new s.A,lambertDiffuseMultiplier:0,vertexShadowDarkness:0}};return(0,h.A)(t.materialUniformMap)?(0,d.A)(n,t.materialUniformMap):n}function Se(e,t,n){const i=n.data;let o,r;if((0,h.A)(i.vertexArray)?(o=i.mesh,r=i.vertexArray):(0,h.A)(i.fill)&&(0,h.A)(i.fill.vertexArray)&&(o=i.fill.mesh,r=i.fill.vertexArray),(0,h.A)(o)&&(0,h.A)(r)){if((0,h.A)(i.wireframeVertexArray)){if(i.wireframeVertexArray.mesh===o)return;i.wireframeVertexArray.destroy(),i.wireframeVertexArray=void 0}i.wireframeVertexArray=function(e,t,n){const i={indices:n.indices,primitiveType:w.A.TRIANGLES};_.A.toWireframe(i);const o=i.indices,r=R.A.createIndexBuffer({context:e,typedArray:o,usage:M.A.STATIC_DRAW,indexDatatype:I.A.fromSizeInBytes(o.BYTES_PER_ELEMENT)});return new U.A({context:e,attributes:t._attributes,indexBuffer:r})}(e,r,o),i.wireframeVertexArray.mesh=o}}let xe,De,Qe;!function(){const e=new m.A({geometry:o.A.fromDimensions({dimensions:new a.A(2,2,2)})}),t=new m.A({geometry:new S.A({radius:1})});let n,i,r=new C.A;function s(e){return new W.A({geometryInstances:e,appearance:new q.A({translucent:!1,flat:!0}),asynchronous:!1})}xe=function(t,o){return t===n||(Qe(),n=t,r=C.A.fromRotationTranslation(t.halfAxes,t.center,r),e.modelMatrix=r,e.attributes.color=u.A.fromColor(o),i=s(e)),i},De=function(e,o){return e===n||(Qe(),n=e,r=C.A.fromTranslation(e.center,r),r=C.A.multiplyByUniformScale(r,e.radius,r),t.modelMatrix=r,t.attributes.color=u.A.fromColor(o),i=s(t)),i},Qe=function(){(0,h.A)(i)&&(i.destroy(),i=void 0,n=void 0)}}();const Ne=new s.A(0,0,0,0),Re={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applyDayNightAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,enableClippingPolygons:void 0,clippingPolygons:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0,hasGeodeticSurfaceNormals:void 0,hasExaggeration:void 0},Me=l.A.TRANSPARENT,Le=new b.A;function Pe(e,t,n){const o=t.data;(0,h.A)(o.vertexArray)||(void 0===o.fill&&(o.fill=new Z.A(t)),o.fill.update(e,n));const r=n.creditDisplay,A=o.terrainData;if((0,h.A)(A)&&(0,h.A)(A.credits)){const e=A.credits;for(let t=0,n=e.length;t<n;++t)r.addCreditToNextFrame(e[t])}let c=L.A.maximumTextureImageUnits,u=o.waterMaskTexture,d=o.waterMaskTranslationAndScale;!(0,h.A)(u)&&(0,h.A)(o.fill)&&(u=o.fill.waterMaskTexture,d=o.fill.waterMaskTranslationAndScale);const g=n.cameraUnderground,p=n.globeTranslucencyState,m=p.translucent,_=p.frontFaceAlphaByDistance,I=p.backFaceAlphaByDistance,E=p.rectangle,b=e.undergroundColor??Me,v=e.undergroundColorAlphaByDistance??Le,S=le(e,n)&&n.mode===K.A.SCENE3D&&b.alpha>0&&(v.nearValue>0||v.farValue>0),x=e.lambertDiffuseMultiplier,Q=e.vertexShadowDarkness,R=e.hasWaterMask&&(0,h.A)(u),M=R&&e.showWaterEffect,F=e.oceanNormalMap,U=M&&(0,h.A)(F),k=e.terrainProvider,G=(0,h.A)(k)&&e.terrainProvider.hasVertexNormals,H=n.fog.enabled&&n.fog.renderable&&!g,V=e.showGroundAtmosphere&&n.mode===K.A.SCENE3D,z=X.A.castShadows(e.shadows)&&!m,Y=X.A.receiveShadows(e.shadows)&&!m,q=e.hueShift,W=e.saturationShift,J=e.brightnessShift;let $=!(y.A.equalsEpsilon(q,0,y.A.EPSILON7)&&y.A.equalsEpsilon(W,0,y.A.EPSILON7)&&y.A.equalsEpsilon(J,0,y.A.EPSILON7)),ee=!1;V&&(ee=a.A.magnitude(n.camera.positionWC)>e.nightFadeOutDistance),R&&--c,U&&--c,(0,h.A)(n.shadowState)&&n.shadowState.shadowsEnabled&&--c,(0,h.A)(e.clippingPlanes)&&e.clippingPlanes.enabled&&--c,(0,h.A)(e.clippingPolygons)&&e.clippingPolygons.enabled&&(--c,--c),c-=p.numberOfTextureUniforms;const te=o.renderedMesh;let ne=te.center;const ie=te.encoding,re=o.tileBoundingRegion,se=n.verticalExaggeration,Ae=n.verticalExaggerationRelativeHeight,ue=1!==se,de=ie.hasGeodeticSurfaceNormals,he=pe;let ge=0,fe=0,Ee=0,be=0,Be=!1;if(n.mode!==K.A.SCENE3D){const e=n.mapProjection,i=e.project(T.A.southwest(t.rectangle),ye),o=e.project(T.A.northeast(t.rectangle),Ce);if(he.x=i.x,he.y=i.y,he.z=o.x,he.w=o.y,n.mode!==K.A.MORPHING&&(ne=Ie,ne.x=0,ne.y=.5*(he.z+he.x),ne.z=.5*(he.w+he.y),he.x-=ne.y,he.y-=ne.z,he.z-=ne.y,he.w-=ne.z),n.mode===K.A.SCENE2D&&ie.quantization===D.A.BITS12){const e=1/(Math.pow(2,12)-1)*.5,t=(he.z-he.x)*e,n=(he.w-he.y)*e;he.x-=t,he.y-=n,he.z+=t,he.w+=n}e instanceof N.A&&(ge=t.rectangle.south,fe=t.rectangle.north,Ee=N.A.geodeticLatitudeToMercatorAngle(ge),be=1/(N.A.geodeticLatitudeToMercatorAngle(fe)-Ee),Be=!0)}const ve=Re;ve.frameState=n,ve.surfaceTile=o,ve.hasWaterMask=R,ve.showReflectiveOcean=M,ve.showOceanWaves=U,ve.enableLighting=e.enableLighting,ve.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,ve.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,ve.showGroundAtmosphere=V,ve.atmosphereLightIntensity=e.atmosphereLightIntensity,ve.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,ve.atmosphereMieCoefficient=e.atmosphereMieCoefficient,ve.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,ve.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,ve.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,ve.perFragmentGroundAtmosphere=ee,ve.hasVertexNormals=G,ve.useWebMercatorProjection=Be,ve.clippedByBoundaries=o.clippedByBoundaries,ve.hasGeodeticSurfaceNormals=de,ve.hasExaggeration=ue;const we=o.imagery;let Pe=0;const Oe=we.length,Fe=e.showSkirts&&!g&&!m,Ue=e.backFaceCulling&&!g&&!m,ke=Ue?e._renderState:e._disableCullingRenderState,Ge=Ue?e._blendRenderState:e._disableCullingBlendRenderState;let He=ke,Ve=e._firstPassInitialColor;const ze=n.context;if((0,h.A)(e._debug.boundingSphereTile)||Qe(),e._materialUniformMap!==e.materialUniformMap){e._materialUniformMap=e.materialUniformMap;const t=e._drawCommands.length;for(let i=0;i<t;++i)e._uniformMaps[i]=Te(n,e)}do{let A,D,N=0;if(e._drawCommands.length<=e._usedDrawCommands?(A=new P.A,A.owner=t,A.cull=!1,A.boundingVolume=new i.A,A.orientedBoundingBox=void 0,D=Te(n,e),e._drawCommands.push(A),e._uniformMaps.push(D)):(A=e._drawCommands[e._usedDrawCommands],D=e._uniformMaps[e._usedDrawCommands]),A.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){const e=re.boundingVolume,t=re.boundingSphere;(0,h.A)(e)?xe(e,l.A.RED).update(n):(0,h.A)(t)&&De(t,l.A.RED).update(n)}const R=D.properties;s.A.clone(Ve,R.initialColor),R.oceanNormalMap=F,R.lightingFadeDistance.x=e.lightingFadeOutDistance,R.lightingFadeDistance.y=e.lightingFadeInDistance,R.nightFadeDistance.x=e.nightFadeOutDistance,R.nightFadeDistance.y=e.nightFadeInDistance,R.atmosphereLightIntensity=e.atmosphereLightIntensity,R.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,R.atmosphereMieCoefficient=e.atmosphereMieCoefficient,R.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,R.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,R.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,R.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;const M=g?I:_,L=g?_:I;(0,h.A)(M)&&(s.A.fromElements(M.near,M.nearValue,M.far,M.farValue,R.frontFaceAlphaByDistance),s.A.fromElements(L.near,L.nearValue,L.far,L.farValue,R.backFaceAlphaByDistance)),s.A.fromElements(v.near,v.nearValue,v.far,v.farValue,R.undergroundColorAlphaByDistance),l.A.clone(b,R.undergroundColor),R.lambertDiffuseMultiplier=x,R.vertexShadowDarkness=Q;const U=!(0,h.A)(o.vertexArray)&&(0,h.A)(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;U&&l.A.clone(e.fillHighlightColor,R.fillHighlightColor),R.verticalExaggerationAndRelativeHeight.x=se,R.verticalExaggerationAndRelativeHeight.y=Ae,R.center3D=te.center,a.A.clone(ne,R.rtc),s.A.clone(he,R.tileRectangle),R.southAndNorthLatitude.x=ge,R.southAndNorthLatitude.y=fe,R.southMercatorYAndOneOverHeight.x=Ee,R.southMercatorYAndOneOverHeight.y=be;const k=me,G=ce(t.rectangle,e.cartographicLimitRectangle),X=_e,Z=ce(t.rectangle,E);a.A.fromElements(q,W,J,R.hsbShift);const ee=t.rectangle,le=1/ee.width,ue=1/ee.height;k.x=(G.west-ee.west)*le,k.y=(G.south-ee.south)*ue,k.z=(G.east-ee.west)*le,k.w=(G.north-ee.south)*ue,s.A.clone(k,R.localizedCartographicLimitRectangle),X.x=(Z.west-ee.west)*le,X.y=(Z.south-ee.south)*ue,X.z=(Z.east-ee.west)*le,X.w=(Z.north-ee.south)*ue,s.A.clone(X,R.localizedTranslucencyRectangle);const de=H&&y.A.fog(t._distance,n.fog.density)>y.A.EPSILON3;$=$&&(de||V);let pe=!1,Ie=!1,ye=!1,Ce=!1,Be=!1,Qe=!1,Re=!1,Me=!1,Le=!1,Ue=!1;for(;N<c&&Pe<Oe;){const e=we[Pe],n=e.readyImagery;if(++Pe,!(0,h.A)(n)||0===n.imageryLayer.alpha)continue;const i=e.useWebMercatorT?n.textureWebMercator:n.texture;if(!(0,h.A)(i))throw new f.A("readyImagery is not actually ready!");const o=n.imageryLayer;(0,h.A)(e.textureTranslationAndScale)||(e.textureTranslationAndScale=o._calculateTextureTranslationAndScale(t,e)),R.dayTextures[N]=i,R.dayTextureTranslationAndScale[N]=e.textureTranslationAndScale,R.dayTextureTexCoordsRectangle[N]=e.textureCoordinateRectangle,R.dayTextureUseWebMercatorT[N]=e.useWebMercatorT,R.dayTextureAlpha[N]=o.alpha,Qe=Qe||1!==R.dayTextureAlpha[N],R.dayTextureNightAlpha[N]=o.nightAlpha,Re=Re||1!==R.dayTextureNightAlpha[N],R.dayTextureDayAlpha[N]=o.dayAlpha,Re=Re||1!==R.dayTextureDayAlpha[N],R.dayTextureBrightness[N]=o.brightness,pe=pe||R.dayTextureBrightness[N]!==j.A.DEFAULT_BRIGHTNESS,R.dayTextureContrast[N]=o.contrast,Ie=Ie||R.dayTextureContrast[N]!==j.A.DEFAULT_CONTRAST,R.dayTextureHue[N]=o.hue,ye=ye||R.dayTextureHue[N]!==j.A.DEFAULT_HUE,R.dayTextureSaturation[N]=o.saturation,Ce=Ce||R.dayTextureSaturation[N]!==j.A.DEFAULT_SATURATION,R.dayTextureOneOverGamma[N]=1/o.gamma,Be=Be||R.dayTextureOneOverGamma[N]!==1/j.A.DEFAULT_GAMMA,R.dayTextureSplit[N]=o.splitDirection,Me=Me||0!==R.dayTextureSplit[N];let a=R.dayTextureCutoutRectangles[N];if((0,h.A)(a)||(a=R.dayTextureCutoutRectangles[N]=new s.A),s.A.clone(s.A.ZERO,a),(0,h.A)(o.cutoutRectangle)){const e=ce(ee,o.cutoutRectangle),t=T.A.simpleIntersection(e,ee,ae);Le=(0,h.A)(t)||Le,a.x=(e.west-ee.west)*le,a.y=(e.south-ee.south)*ue,a.z=(e.east-ee.west)*le,a.w=(e.north-ee.south)*ue}let A=R.colorsToAlpha[N];(0,h.A)(A)||(A=R.colorsToAlpha[N]=new s.A);const c=(0,h.A)(o.colorToAlpha)&&o.colorToAlphaThreshold>0;if(Ue=Ue||c,c){const e=o.colorToAlpha;A.x=e.red,A.y=e.green,A.z=e.blue,A.w=o.colorToAlphaThreshold}else A.w=-1;if((0,h.A)(n.credits)){const e=n.credits;for(let t=0,n=e.length;t<n;++t)r.addCreditToNextFrame(e[t])}++N}R.dayTextures.length=N,R.waterMask=u,s.A.clone(d,R.waterMaskTranslationAndScale),R.minMaxHeight.x=ie.minimumHeight,R.minMaxHeight.y=ie.maximumHeight,C.A.clone(ie.matrix,R.scaleAndBias);const ke=e._clippingPlanes,je=(0,h.A)(ke)&&ke.enabled&&t.isClipped;je&&(R.clippingPlanesEdgeColor=l.A.clone(ke.edgeColor,R.clippingPlanesEdgeColor),R.clippingPlanesEdgeWidth=ke.edgeWidth);const Ye=e._clippingPolygons,qe=(0,h.A)(Ye)&&Ye.enabled&&t.isClipped;ve.numberOfDayTextures=N,ve.applyBrightness=pe,ve.applyContrast=Ie,ve.applyHue=ye,ve.applySaturation=Ce,ve.applyGamma=Be,ve.applyAlpha=Qe,ve.applyDayNightAlpha=Re,ve.applySplit=Me,ve.enableFog=de,ve.enableClippingPlanes=je,ve.clippingPlanes=ke,ve.enableClippingPolygons=qe,ve.clippingPolygons=Ye,ve.hasImageryLayerCutout=Le,ve.colorCorrect=$,ve.highlightFillTile=U,ve.colorToAlpha=Ue,ve.showUndergroundColor=S,ve.translucent=m;let We=o.renderedMesh.indices.length;Fe||(We=o.renderedMesh.indexCountWithoutSkirts),A.shaderProgram=e._surfaceShaderSet.getShaderProgram(ve),A.castShadows=z,A.receiveShadows=Y,A.renderState=He,A.primitiveType=w.A.TRIANGLES,A.vertexArray=o.vertexArray||o.fill.vertexArray,A.count=We,A.uniformMap=D,A.pass=O.A.GLOBE,e._debug.wireframe&&(Se(ze,0,t),(0,h.A)(o.wireframeVertexArray)&&(A.vertexArray=o.wireframeVertexArray,A.primitiveType=w.A.LINES,A.count=2*We));let Je=A.boundingVolume;const Ke=A.orientedBoundingBox;n.mode!==K.A.SCENE3D?(i.A.fromRectangleWithHeights2D(t.rectangle,n.mapProjection,re.minimumHeight,re.maximumHeight,Je),a.A.fromElements(Je.center.z,Je.center.x,Je.center.y,Je.center),n.mode===K.A.MORPHING&&(Je=i.A.union(re.boundingSphere,Je,Je))):(A.boundingVolume=i.A.clone(re.boundingSphere,Je),A.orientedBoundingBox=B.A.clone(re.boundingVolume,Ke)),A.dirty=!0,m&&p.updateDerivedCommands(A,n),oe(A,n),He=Ge,Ve=Ne}while(Pe<Oe)}const Oe=ne},208375:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(491446),r=n(605971),a=n(290176),s=n(697422);function A(){this._enabled=!1,this._frontFaceAlpha=1,this._frontFaceAlphaByDistance=void 0,this._backFaceAlpha=1,this._backFaceAlphaByDistance=void 0,this._rectangle=s.A.clone(s.A.MAX_VALUE)}Object.defineProperties(A.prototype,{enabled:{get:function(){return this._enabled},set:function(e){i.A.typeOf.bool("enabled",e),this._enabled=e}},frontFaceAlpha:{get:function(){return this._frontFaceAlpha},set:function(e){i.A.typeOf.number.greaterThanOrEquals("frontFaceAlpha",e,0),i.A.typeOf.number.lessThanOrEquals("frontFaceAlpha",e,1),this._frontFaceAlpha=e}},frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance},set:function(e){if((0,o.A)(e)&&e.far<e.near)throw new r.A("far distance must be greater than near distance.");this._frontFaceAlphaByDistance=a.A.clone(e,this._frontFaceAlphaByDistance)}},backFaceAlpha:{get:function(){return this._backFaceAlpha},set:function(e){i.A.typeOf.number.greaterThanOrEquals("backFaceAlpha",e,0),i.A.typeOf.number.lessThanOrEquals("backFaceAlpha",e,1),this._backFaceAlpha=e}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance},set:function(e){if((0,o.A)(e)&&e.far<e.near)throw new r.A("far distance must be greater than near distance.");this._backFaceAlphaByDistance=a.A.clone(e,this._backFaceAlphaByDistance)}},rectangle:{get:function(){return this._rectangle},set:function(e){(0,o.A)(e)||(e=s.A.clone(s.A.MAX_VALUE)),s.A.clone(e,this._rectangle)}}});const c=A},5105:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(647934),o=n(41476),r=n(491446),a=n(677354),s=n(769493),A=n(804701),c=n(57775),l=n(40118),u=n(307386);function d(){this._framebuffer=new A.A({depthStencil:!0,supportsDepthTexture:!0}),this._packedDepthFramebuffer=new A.A,this._renderState=void 0,this._packedDepthCommand=void 0,this._clearCommand=void 0,this._viewport=new i.A,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0}Object.defineProperties(d.prototype,{classificationTexture:{get:function(){return this._framebuffer.getColorTexture()}},classificationFramebuffer:{get:function(){return this._framebuffer.framebuffer}},packedDepthFramebuffer:{get:function(){return this._packedDepthFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._framebuffer.getDepthStencilTexture()}},depthStencilRenderbuffer:{get:function(){return this._framebuffer.getDepthStencilRenderbuffer()}},packedDepthTexture:{get:function(){return this._packedDepthFramebuffer.getColorTexture()}}}),d.prototype.updateAndClear=function(e,t,n,a){const A=t.width,d=t.height;!function(e,t,n,i,o){const r=o?t.halfFloatingPointTexture?c.A.HALF_FLOAT:c.A.FLOAT:c.A.UNSIGNED_BYTE;e._framebuffer.update(t,n,i,1,r),e._packedDepthFramebuffer.update(t,n,i)}(this,n,A,d,e),function(e,t,n,a,A){e._viewport.width=n,e._viewport.height=a;const c=!i.A.equals(e._viewport,A.viewport);let d=c!==e._useScissorTest;e._useScissorTest=c,i.A.equals(e._scissorRectangle,A.viewport)||(e._scissorRectangle=i.A.clone(A.viewport,e._scissorRectangle),d=!0),(0,r.A)(e._renderState)&&i.A.equals(e._viewport,e._renderState.viewport)&&!d||(e._renderState=l.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,r.A)(e._packedDepthCommand)||(e._packedDepthCommand=t.createViewportQuadCommand(u.A,{uniformMap:{u_depthTexture:function(){return e.depthStencilTexture}},owner:e})),(0,r.A)(e._clearCommand)||(e._clearCommand=new s.A({color:new o.A(0,0,0,0),depth:1,stencil:0,owner:e})),e._packedDepthCommand.framebuffer=e._packedDepthFramebuffer.framebuffer,e._packedDepthCommand.renderState=e._renderState,e._clearCommand.framebuffer=e.classificationFramebuffer,e._clearCommand.renderState=e._renderState}(this,n,A,d,a),this._useHdr=e},d.prototype.clearClassification=function(e,t){this._clearCommand.execute(e,t)},d.prototype.packDepth=function(e,t){return this._packedDepthCommand.execute(e,t),this.packedDepthTexture},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._packedDepthFramebuffer.destroy(),(0,a.A)(this)};const h=d},738375:(e,t,n)=>{"use strict";n.d(t,{A:()=>K});var i=n(430346),o=n(491446),r=n(290176),a=n(697422),s=n(377496),A=n(760866),c=n(40118),l=n(342875),u=n(200646),d=n(527083),h=n(62467);const g=11,f=["opaqueFrontFaceCommand","opaqueBackFaceCommand","depthOnlyFrontFaceCommand","depthOnlyBackFaceCommand","depthOnlyFrontAndBackFaceCommand","translucentFrontFaceCommand","translucentBackFaceCommand","translucentFrontFaceManualDepthTestCommand","translucentBackFaceManualDepthTestCommand","pickFrontFaceCommand","pickBackFaceCommand"];function p(){this._frontFaceAlphaByDistance=new r.A(0,1,0,1),this._backFaceAlphaByDistance=new r.A(0,1,0,1),this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._requiresManualDepthTest=!1,this._sunVisibleThroughGlobe=!1,this._environmentVisible=!1,this._useDepthPlane=!1,this._numberOfTextureUniforms=0,this._globeTranslucencyFramebuffer=void 0,this._rectangle=a.A.clone(a.A.MAX_VALUE),this._derivedCommandKey=0,this._derivedCommandsDirty=!1,this._derivedCommandPacks=void 0,this._derivedCommandTypes=new Array(g),this._derivedBlendCommandTypes=new Array(g),this._derivedPickCommandTypes=new Array(g),this._derivedCommandTypesToUpdate=new Array(g),this._derivedCommandsLength=0,this._derivedBlendCommandsLength=0,this._derivedPickCommandsLength=0,this._derivedCommandsToUpdateLength=0}function m(e,t,n,i){return e?(0,o.A)(n)?(r.A.clone(n,i),i.nearValue*=t,i.farValue*=t,i):(i.nearValue=t,i.farValue=t,i):(i.nearValue=1,i.farValue=1,i)}function _(e,t,n){return e&&(n.baseColor.alpha<1||t.nearValue<1||t.farValue<1)}function I(e,t,n,i,o){let r=0;const a=e._frontFaceTranslucent,s=e._backFaceTranslucent;if(!a)return r;const A=t.cameraUnderground,c=e._requiresManualDepthTest,l=i?9:c?7:5,u=i?10:c?8:6;return t.mode===h.A.SCENE2D?(o[r++]=2,o[r++]=l,r):(s?(n||(o[r++]=4),A?(o[r++]=l,o[r++]=u):(o[r++]=u,o[r++]=l)):A?(n||(o[r++]=3),o[r++]=0,o[r++]=u):(n||(o[r++]=2),o[r++]=1,o[r++]=l),r)}function E(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function y(e,t){return e.indexOf(t)>-1}function C(e,t){E(e.defines,"TRANSLUCENT"),E(t.defines,"TRANSLUCENT")}function b(e,t){E(e.defines,"GROUND_ATMOSPHERE"),E(t.defines,"GROUND_ATMOSPHERE"),E(e.defines,"FOG"),E(t.defines,"FOG"),E(e.defines,"TRANSLUCENT"),E(t.defines,"TRANSLUCENT")}function B(e,t){y(t.defines,"TILE_LIMIT_RECTANGLE")||y(t.defines,"ENABLE_CLIPPING_PLANES")||(t.sources=["void main() \n{ \n    out_FragColor = vec4(1.0); \n} \n"])}function v(e,t){const n=t.sources,i=n.length;for(let e=0;e<i;++e)n[e]=l.A.replaceMain(n[e],"czm_globe_translucency_main");n.push("\n\nuniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n#ifdef MANUAL_DEPTH_TEST \n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st)); \n    if (logDepthOrDepth != 0.0) \n    { \n        vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); \n        float depthEC = eyeCoordinate.z / eyeCoordinate.w; \n        if (v_positionEC.z < depthEC) \n        { \n            discard; \n        } \n    } \n#endif \n    czm_globe_translucency_main(); \n    vec4 classificationColor = texture(u_classificationTexture, st); \n    if (classificationColor.a > 0.0) \n    { \n        // Reverse premultiplication process to get the correct composited result of the classification primitives \n        classificationColor.rgb /= classificationColor.a; \n    } \n    out_FragColor = classificationColor * vec4(classificationColor.aaa, 1.0) + out_FragColor * (1.0 - classificationColor.a); \n} \n")}function w(e,t){v(0,t),E(e.defines,"GROUND_ATMOSPHERE"),E(t.defines,"GROUND_ATMOSPHERE"),E(e.defines,"FOG"),E(t.defines,"FOG")}function T(e,t){v(0,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function S(e,t){w(e,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function x(e,t){t.sources=["uniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n    vec4 pickColor = texture(u_classificationTexture, st); \n    if (pickColor == vec4(0.0)) \n    { \n        discard; \n    } \n    out_FragColor = pickColor; \n} \n"]}function D(e,t,n,i,r,a){if(!(0,o.A)(r))return t;if(!i&&(0,o.A)(n))return n;let s=e.shaderCache.getDerivedShaderProgram(t,a);if(!(0,o.A)(s)){const n=t._attributeLocations,i=t.vertexShaderSource.clone(),A=t.fragmentShaderSource.clone();i.defines=(0,o.A)(i.defines)?i.defines.slice(0):[],A.defines=(0,o.A)(A.defines)?A.defines.slice(0):[],r(i,A),s=e.shaderCache.createDerivedShaderProgram(t,a,{vertexShaderSource:i,fragmentShaderSource:A,attributeLocations:n})}return s}function Q(e){e.cull.face=d.A.BACK,e.cull.enabled=!0}function N(e){e.cull.face=d.A.FRONT,e.cull.enabled=!0}function R(e){e.cull.face=d.A.BACK,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function M(e){e.cull.face=d.A.FRONT,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function L(e){e.cull.enabled=!1,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function P(e){e.cull.face=d.A.BACK,e.cull.enabled=!0,e.depthMask=!1,e.blending=u.A.ALPHA_BLEND}function O(e){e.cull.face=d.A.FRONT,e.cull.enabled=!0,e.depthMask=!1,e.blending=u.A.ALPHA_BLEND}function F(e){e.cull.face=d.A.BACK,e.cull.enabled=!0,e.blending.enabled=!1}function U(e){e.cull.face=d.A.FRONT,e.cull.enabled=!0,e.blending.enabled=!1}function k(e,t,n,i,r){if(!(0,o.A)(i))return e;if(!n&&(0,o.A)(t))return t;let a=r[e.id];if(!(0,o.A)(a)){const t=c.A.getState(e);i(t),a=c.A.fromCache(t),r[e.id]=a}return a}function G(e){return{u_classificationTexture:function(){return e._globeTranslucencyFramebuffer.classificationTexture}}}function H(e,t,n,r,a){return(0,o.A)(a)?!r&&(0,o.A)(n)?n:(0,i.A)(t,a(e),!1):t}function V(e){this.pass=e.pass,this.pickOnly=e.pickOnly,this.getShaderProgramFunction=e.getShaderProgramFunction,this.getRenderStateFunction=e.getRenderStateFunction,this.getUniformMapFunction=e.getUniformMapFunction,this.renderStateCache={}}Object.defineProperties(p.prototype,{frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance}},translucent:{get:function(){return this._frontFaceTranslucent}},sunVisibleThroughGlobe:{get:function(){return this._sunVisibleThroughGlobe}},environmentVisible:{get:function(){return this._environmentVisible}},useDepthPlane:{get:function(){return this._useDepthPlane}},numberOfTextureUniforms:{get:function(){return this._numberOfTextureUniforms}},rectangle:{get:function(){return this._rectangle}}}),p.prototype.update=function(e){const t=e.globe;if(!(0,o.A)(t)||!t.show)return this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._sunVisibleThroughGlobe=!0,this._environmentVisible=!0,void(this._useDepthPlane=!1);this._frontFaceAlphaByDistance=m(t.translucency.enabled,t.translucency.frontFaceAlpha,t.translucency.frontFaceAlphaByDistance,this._frontFaceAlphaByDistance),this._backFaceAlphaByDistance=m(t.translucency.enabled,t.translucency.backFaceAlpha,t.translucency.backFaceAlphaByDistance,this._backFaceAlphaByDistance),this._frontFaceTranslucent=_(t.translucency.enabled,this._frontFaceAlphaByDistance,t),this._backFaceTranslucent=_(t.translucency.enabled,this._backFaceAlphaByDistance,t),this._requiresManualDepthTest=function(e,t,n){return e._frontFaceTranslucent&&!e._backFaceTranslucent&&!n.depthTestAgainstTerrain&&t.mode!==h.A.SCENE2D&&t.context.depthTexture}(this,e,t),this._sunVisibleThroughGlobe=function(e,t){const n=e._frontFaceTranslucent,i=e._backFaceTranslucent;return n&&(t.cameraUnderground||i)}(this,e),this._environmentVisible=function(e,t){return!t.cameraUnderground||e._frontFaceTranslucent}(this,e),this._useDepthPlane=function(e,t){return!t.cameraUnderground&&!e._frontFaceTranslucent}(this,e),this._numberOfTextureUniforms=function(e){let t=0;return e._frontFaceTranslucent&&++t,e._requiresManualDepthTest&&++t,t}(this),this._rectangle=a.A.clone(t.translucency.rectangle,this._rectangle),function(e,t){let n;e._derivedCommandsLength=I(e,t,!1,!1,e._derivedCommandTypes),e._derivedBlendCommandsLength=I(e,t,!0,!1,e._derivedBlendCommandTypes),e._derivedPickCommandsLength=I(e,t,!1,!0,e._derivedPickCommandTypes);let i=0;for(n=0;n<e._derivedCommandsLength;++n)i|=1<<e._derivedCommandTypes[n];for(n=0;n<e._derivedBlendCommandsLength;++n)i|=1<<e._derivedBlendCommandTypes[n];for(n=0;n<e._derivedPickCommandsLength;++n)i|=1<<e._derivedPickCommandTypes[n];let r=0;for(n=0;n<g;++n)(i&1<<n)>0&&(e._derivedCommandTypesToUpdate[r++]=n);e._derivedCommandsToUpdateLength=r;const a=i!==e._derivedCommandKey;e._derivedCommandKey=i,e._derivedCommandsDirty=a,!(0,o.A)(e._derivedCommandPacks)&&e._frontFaceTranslucent&&(e._derivedCommandPacks=[new V({pass:A.A.GLOBE,pickOnly:!1,getShaderProgramFunction:C,getRenderStateFunction:Q,getUniformMapFunction:void 0}),new V({pass:A.A.GLOBE,pickOnly:!1,getShaderProgramFunction:b,getRenderStateFunction:N,getUniformMapFunction:void 0}),new V({pass:A.A.GLOBE,pickOnly:!1,getShaderProgramFunction:B,getRenderStateFunction:R,getUniformMapFunction:void 0}),new V({pass:A.A.GLOBE,pickOnly:!1,getShaderProgramFunction:B,getRenderStateFunction:M,getUniformMapFunction:void 0}),new V({pass:A.A.GLOBE,pickOnly:!1,getShaderProgramFunction:B,getRenderStateFunction:L,getUniformMapFunction:void 0}),new V({pass:A.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:v,getRenderStateFunction:P,getUniformMapFunction:G}),new V({pass:A.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:w,getRenderStateFunction:O,getUniformMapFunction:G}),new V({pass:A.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:T,getRenderStateFunction:P,getUniformMapFunction:G}),new V({pass:A.A.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:S,getRenderStateFunction:O,getUniformMapFunction:G}),new V({pass:A.A.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:x,getRenderStateFunction:F,getUniformMapFunction:G}),new V({pass:A.A.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:x,getRenderStateFunction:U,getUniformMapFunction:G})])}(this,e)};const z=new Array(g),j=new Array(g);function Y(e,t,n,i,r,a){for(let s=0;s<t;++s){const t=e[s],A=t.derivedCommands.type;(!(0,o.A)(a)||a.indexOf(A)>-1)&&n(t,i,r)}}function q(e,t,n,i,o){for(let r=0;r<t;++r)n(e[r],i,o)}p.prototype.updateDerivedCommands=function(e,t){const n=this._derivedCommandTypesToUpdate,i=this._derivedCommandsToUpdateLength;if(0!==i){for(let e=0;e<i;++e)j[e]=this._derivedCommandPacks[n[e]],z[e]=f[n[e]];!function(e,t,n,i,r,a,A){let c=t.derivedCommands.globeTranslucency;const l=e._derivedCommandsDirty;if(t.dirty||!(0,o.A)(c)||l){t.dirty=!1,(0,o.A)(c)||(c={},t.derivedCommands.globeTranslucency=c);const l=A.frameNumber,u=c.uniformMapDirtyFrame??0,d=c.shaderProgramDirtyFrame??0,h=c.renderStateDirtyFrame??0,g=c.uniformMap!==t.uniformMap,f=c.shaderProgramId!==t.shaderProgram.id,p=c.renderStateId!==t.renderState.id;g&&(c.uniformMapDirtyFrame=l),f&&(c.shaderProgramDirtyFrame=l),p&&(c.renderStateDirtyFrame=l),c.uniformMap=t.uniformMap,c.shaderProgramId=t.shaderProgram.id,c.renderStateId=t.renderState.id;for(let m=0;m<n;++m){const n=a[m],_=i[m],I=r[m];let E,y,C,b=c[I];(0,o.A)(b)?(E=b.uniformMap,y=b.shaderProgram,C=b.renderState):(E=void 0,y=void 0,C=void 0),b=s.A.shallowClone(t,b),c[I]=b;const B=b.derivedCommands.uniformMapDirtyFrame??0,v=b.derivedCommands.shaderProgramDirtyFrame??0,w=b.derivedCommands.renderStateDirtyFrame??0,T=g||B<u,S=f||v<d,x=p||w<h;T&&(b.derivedCommands.uniformMapDirtyFrame=l),S&&(b.derivedCommands.shaderProgramDirtyFrame=l),x&&(b.derivedCommands.renderStateDirtyFrame=l),b.derivedCommands.type=_,b.pass=n.pass,b.pickOnly=n.pickOnly,b.uniformMap=H(e,t.uniformMap,E,T,n.getUniformMapFunction),b.shaderProgram=D(A.context,t.shaderProgram,y,S,n.getShaderProgramFunction,I),b.renderState=k(t.renderState,C,x,n.getRenderStateFunction,n.renderStateCache)}}}(this,e,i,n,z,j,t)}},p.prototype.pushDerivedCommands=function(e,t,n){const i=n.passes.pick||n.passes.pickVoxel;if(i&&t)return;let o=this._derivedCommandTypes,r=this._derivedCommandsLength;if(i?(o=this._derivedPickCommandTypes,r=this._derivedPickCommandsLength):t&&(o=this._derivedBlendCommandTypes,r=this._derivedBlendCommandsLength),0===r)return void n.commandList.push(e);const a=e.derivedCommands.globeTranslucency;for(let e=0;e<r;++e){const t=f[o[e]];n.commandList.push(a[t])}};const W=[0,1],J=[2,3,4];p.prototype.executeGlobeCommands=function(e,t,n,i,o){const r=i.context,a=e.commands[A.A.GLOBE],s=e.indices[A.A.GLOBE];0!==s&&(this._globeTranslucencyFramebuffer=n,n.clearClassification(r,o),Y(a,s,t,i,o,W))},p.prototype.executeGlobeClassificationCommands=function(e,t,n,i,o){const{context:r}=i,{uniformState:a}=r,s=e.commands[A.A.GLOBE],c=e.indices[A.A.GLOBE],l=e.commands[A.A.TERRAIN_CLASSIFICATION],u=e.indices[A.A.TERRAIN_CLASSIFICATION];if(0===c||0===u)return;const d=this._frontFaceTranslucent,h=this._backFaceTranslucent;if(d&&h||q(l,u,t,i,o),!d&&!h)return;this._globeTranslucencyFramebuffer=n;const g=a.globeDepthTexture,f=o.framebuffer;if(o.framebuffer=n.classificationFramebuffer,Y(s,c,t,i,o,J),r.depthTexture){const e=n.packDepth(r,o);a.globeDepthTexture=e}q(l,u,t,i,o),a.globeDepthTexture=g,o.framebuffer=f};const K=p},494820:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(915325),r=n(491446),a=n(800859),s=(function(){var e,t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(e){for(var n=new Uint8Array(16613),i=0;i<16613;++i){var o=e.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<16613;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79Tebbbe9ok9Geueu9Geub9Gbb9Gruuuuuuueu9Gvuuuuueu9Gduueu9Gluuuueu9Gvuuuuub9Gouuuuuub9Gluuuub9GiuuueuiE8AdilveoveovrrwrrrDDoDrbqqbelve9Weiiviebeoweuec;G:Qdkr:PlCo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9mW4W2be8A9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWVbd8F9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949c919M9MWV9c9V919U9KbiE9TW79O9V9Wt9FW9U9J9V9KW9wWVtW949wWV79P9V9UblY9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWVbv8E9TW79O9V9Wt9FW9U9J9V9KW69U9KW949c919M9MWV9c9V919U9Kbo8A9TW79O9V9Wt9FW9U9J9V9KW69U9KW949wWV79P9V9UbrE9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JWbwa9TW79O9V9Wt9FW9U9J9V9KW69U9KW949tWG91W9U9JW9c9V919U9KbDL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9p9JtbqK9TW79O9V9Wt9FW9U9J9V9KWS9P2tWV9r919HtbkL9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVT949WbxY9TW79O9V9Wt9FW9U9J9V9KWS9P2tWVJ9V29VVbmE9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OWbza9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94J9H9J9OW9ttV9P9WbHa9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbOK9TW79O9V9Wt9F79W9Ht9P9H29t9VVt9sW9T9H9WbAl79IV9RbXDwebcekdKYq;i28Adbk:Bhdhud9:8Jjjjjbc;qw9Rgr8KjjjjbcbhwdnaeTmbabcbyd;C:kjjbaoaocb9iEgDc:GeV86bbarc;adfcbcjdz:xjjjb8AdnaiTmbarc;adfadalz:wjjjb8Akarc;abfalfcbcbcjdal9RalcFe0Ez:xjjjb8Aarc;abfarc;adfalz:wjjjb8AarcUf9cb83ibarc8Wf9cb83ibarcyf9cb83ibarcaf9cb83ibarcKf9cb83ibarczf9cb83ibar9cb83iwar9cb83ibcj;abal9Uc;WFbGcjdalca0Ehqdnaicd6mbavcd9imbaDTmbadcefhkaqci2gxal2hmarc;alfclfhParc;qlfceVhsarc;qofclVhzarc;qofcKfhHarc;qofczfhOcbhAincdhCcbhodnavci6mbaH9cb83ibaO9cb83ibar9cb83i;yoar9cb83i;qoadaAfgoybbhXcbhQincbhwcbhLdninaoalfhKaoybbgYaX7aLVhLawcP0meaKhoaYhXawcefgwaQfai6mbkkcbhXarc;qofhwincwh8AcwhEdnaLaX93gocFeGg3cs0mbclhEa3ci0mba3cb9hcethEkdnaocw4cFeGg3cs0mbclh8Aa3ci0mba3cb9hceth8Aka8AaEfh3awydbh5cwh8AcwhEdnaocz4cFeGg8Ecs0mbclhEa8Eci0mba8Ecb9hcethEka3a5fh3dnaocFFFFb0mbclh8AaocFFF8F0mbaocFFFr0ceth8Akawa3aEfa8AfBdbawclfhwaXcefgXcw9hmbkaKhoaYhXaQczfgQai6mbkcbhocehwazhLinawaoaLydbarc;qofaocdtfydb6EhoaLclfhLawcefgwcw9hmbkcihCkcbh3arc;qlfcbcjdz:xjjjb8Aarc;alfcwfcbBdbar9cb83i;alaoclth8Fadhaaqhhakh5inarc;qlfadcba3cufgoaoa30Eal2falz:wjjjb8Aaiahaiah6Ehgdnaqaia39Ra3aqfai6EgYcsfc9WGgoaY9nmbarc;qofaYfcbaoaY9Rz:xjjjb8Akada3al2fh8Jcbh8Kina8Ka8FVcl4hQarc;alfa8Kcdtfh8LaAh8Mcbh8Nina8NaAfhwdndndndndndna8KPldebidkasa8Mc98GgLfhoa5aLfh8Aarc;qlfawc98GgLfRbbhXcwhwinaoRbbawtaXVhXaocefhoawcwfgwca9hmbkaYTmla8Ncith8Ea8JaLfhEcbhKinaERbbhLcwhoa8AhwinawRbbaotaLVhLawcefhwaocwfgoca9hmbkarc;qofaKfaLaX7aQ93a8E486bba8Aalfh8AaEalfhEaLhXaKcefgKaY9hmbxlkkaYTmia8Mc9:Ghoa8NcitcwGhEarc;qlfawceVfRbbcwtarc;qlfawc9:GfRbbVhLarc;qofhwaghXinawa5aofRbbcwtaaaofRbbVg8AaL9RgLcetaLcztcz91cs47cFFiGaE486bbaoalfhoawcefhwa8AhLa3aXcufgX9hmbxikkaYTmda8Jawfhoarc;qlfawfRbbhLarc;qofhwaghXinawaoRbbg8AaL9RgLcetaLcKtcK91cr4786bbawcefhwaoalfhoa8AhLa3aXcufgX9hmbxdkkaYTmeka8LydbhEcbhKarc;qofhoincdhLcbhwinaLaoawfRbbcb9hfhLawcefgwcz9hmbkclhXcbhwinaXaoawfRbbcd0fhXawcefgwcz9hmbkcwh8Acbhwina8AaoawfRbbcP0fh8Aawcefgwcz9hmbkaLaXaLaX6Egwa8Aawa8A6Egwczawcz6EaEfhEaoczfhoaKczfgKaY6mbka8LaEBdbka8Mcefh8Ma8Ncefg8Ncl9hmbka8Kcefg8KaC9hmbkaaamfhaahaxfhha5amfh5a3axfg3ai6mbkcbhocehwaPhLinawaoaLydbarc;alfaocdtfydb6EhoaLclfhLawcefgXhwaCaX9hmbkaraAcd4fa8FcdVaoaocdSE86bbaAclfgAal6mbkkabaefh8Kabcefhoalcd4gecbaDEhkadcefhOarc;abfceVhHcbhmdndninaiam9nmearc;qofcbcjdz:xjjjb8Aa8Kao9Rak6mdadamal2gwfhxcbh8JaOawfhzaocbakz:xjjjbghakfh5aqaiam9Ramaqfai6Egscsfgocl4cifcd4hCaoc9WGg8LThPindndndndndndndndndndnaDTmbara8Jcd4fRbbgLciGPlbedlbkasTmdaxa8Jfhoarc;abfa8JfRbbhLarc;qofhwashXinawaoRbbg8AaL9RgLcetaLcKtcK91cr4786bbawcefhwaoalfhoa8AhLaXcufgXmbxikkasTmia8JcitcwGhEarc;abfa8JceVfRbbcwtarc;abfa8Jc9:GgofRbbVhLaxaofhoarc;qofhwashXinawao8Vbbg8AaL9RgLcetaLcztcz91cs47cFFiGaE486bbawcefhwaoalfhoa8AhLaXcufgXmbxdkkaHa8Jc98GgEfhoazaEfh8Aarc;abfaEfRbbhXcwhwinaoRbbawtaXVhXaocefhoawcwfgwca9hmbkasTmbaLcl4hYa8JcitcKGh3axaEfhEcbhKinaERbbhLcwhoa8AhwinawRbbaotaLVhLawcefhwaocwfgoca9hmbkarc;qofaKfaLaX7aY93a3486bba8Aalfh8AaEalfhEaLhXaKcefgKas9hmbkkaDmbcbhoxlka8LTmbcbhodninarc;qofaofgwcwf8Pibaw8Pib:e9qTmeaoczfgoa8L9pmdxbkkdnavmbcehoxikcbhEaChKaChYinarc;qofaEfgocwf8Pibhyao8Pibh8PcdhLcbhwinaLaoawfRbbcb9hfhLawcefgwcz9hmbkclhXcbhwinaXaoawfRbbcd0fhXawcefgwcz9hmbkcwh8Acbhwina8AaoawfRbbcP0fh8Aawcefgwcz9hmbkaLaXaLaX6Egoa8Aaoa8A6Egoczaocz6EaYfhYaocucbaya8P:e9cb9sEgwaoaw6EaKfhKaEczfgEa8L9pmdxbkkaha8Jcd4fgoaoRbbcda8JcetcoGtV86bbxikdnaKas6mbaYas6mbaha8Jcd4fgoaoRbbcia8JcetcoGtV86bba8Ka59Ras6mra5arc;qofasz:wjjjbasfh5xikaKaY9phokaha8Jcd4fgwawRbbaoa8JcetcoGtV86bbka8Ka59RaC6mla5cbaCz:xjjjbgAaCfhYdndna8LmbaPhoxekdna8KaY9RcK9pmbaPhoxekaocdtc:q1jjbfcj1jjbaDEg5ydxggcetc;:FFFeGh8Fcuh3cuagtcu7cFeGhacbh8Marc;qofhLinarc;qofa8MfhQczhEdndndnagPDbeeeeeeedekcucbaQcwf8PibaQ8Pib:e9cb9sEhExekcbhoa8FhEinaEaaaLaofRbb9nfhEaocefgocz9hmbkkcih8Ecbh8Ainczhwdndndna5a8AcdtfydbgKPDbeeeeeeedekcucbaQcwf8PibaQ8Pib:e9cb9sEhwxekaKcetc;:FFFeGhwcuaKtcu7cFeGhXcbhoinawaXaLaofRbb9nfhwaocefgocz9hmbkkdndnawaE6mbaKa39hmeawaE9hmea5a8EcdtfydbcwSmeka8Ah8EawhEka8Acefg8Aci9hmbkaAa8Mco4fgoaoRbba8Ea8Mci4coGtV86bbdndndna5a8Ecdtfydbg3PDdbbbbbbbebkdncwa39Tg8ETmbcua3tcu7hwdndna3ceSmbcbh8NaLhQinaQhoa8Eh8AcbhXinaoRbbgEawcFeGgKaEaK6EaXa3tVhXaocefhoa8Acufg8AmbkaYaX86bbaQa8EfhQaYcefhYa8Na8Efg8Ncz6mbxdkkcbh8NaLhQinaQhoa8Eh8AcbhXinaoRbbgEawcFeGgKaEaK6EaXcetVhXaocefhoa8Acufg8AmbkaYaX:T9cFe:d9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:9ca188bbaQa8EfhQaYcefhYa8Na8Efg8Ncz6mbkkcbhoinaYaLaofRbbgX86bbaYaXawcFeG9pfhYaocefgocz9hmbxikkdna3ceSmbinaYcb86bbaYcefhYxbkkinaYcb86bbaYcefhYxbkkaYaQ8Pbb83bbaYcwfaQcwf8Pbb83bbaYczfhYka8Mczfg8Ma8L9pgomeaLczfhLa8KaY9RcK9pmbkkaoTmlaYh5aYTmlka8Jcefg8Jal9hmbkarc;abfaxascufal2falz:wjjjb8Aasamfhma5hoa5mbkcbhwxdkdna8Kao9RakalfgwcKcaaDEgLawaL0EgX9pmbcbhwxdkdnawaL9pmbaocbaXaw9Rgwz:xjjjbawfhokaoarc;adfalz:wjjjbalfhodnaDTmbaoaraez:wjjjbaefhokaoab9Rhwxekcbhwkarc;qwf8Kjjjjbawk5babaeadaialcdcbyd;C:kjjbz:bjjjbk9reduaecd4gdaefgicaaica0Eabcj;abae9Uc;WFbGcjdaeca0Egifcufai9Uae2aiadfaicl4cifcd4f2fcefkmbcbabBd;C:kjjbk:Ese5u8Jjjjjbc;ae9Rgl8Kjjjjbcbhvdnaici9UgocHfae0mbabcbyd;m:kjjbgrc;GeV86bbalc;abfcFecjez:xjjjb8AalcUfgw9cu83ibalc8WfgD9cu83ibalcyfgq9cu83ibalcafgk9cu83ibalcKfgx9cu83ibalczfgm9cu83ibal9cu83iwal9cu83ibabaefc9WfhPabcefgsaofhednaiTmbcmcsarcb9kgzEhHcbhOcbhAcbhCcbhXcbhQindnaeaP9nmbcbhvxikaQcufhvadaCcdtfgLydbhKaLcwfydbhYaLclfydbh8AcbhEdndndninalc;abfavcsGcitfgoydlh3dndndnaoydbgoaK9hmba3a8ASmekdnaoa8A9hmba3aY9hmbaEcefhExekaoaY9hmea3aK9hmeaEcdfhEkaEc870mdaXcufhvaLaEciGcx2goc;i1jjbfydbcdtfydbh3aLaoc;e1jjbfydbcdtfydbh8AaLaoc;a1jjbfydbcdtfydbhKcbhodnindnalavcsGcdtfydba39hmbaohYxdkcuhYavcufhvaocefgocz9hmbkkaOa3aOSgvaYce9iaYaH9oVgoGfhOdndndncbcsavEaYaoEgvcs9hmbarce9imba3a3aAa3cefaASgvEgAcefSmecmcsavEhvkasavaEcdtc;WeGV86bbavcs9hmea3aA9Rgvcetavc8F917hvinaeavcFb0crtavcFbGV86bbaecefheavcje6hoavcr4hvaoTmbka3hAxvkcPhvasaEcdtcPV86bba3hAkavTmiavaH9omicdhocehEaQhYxlkavcufhvaEclfgEc;ab9hmbkkdnaLceaYaOSceta8AaOSEcx2gvc;a1jjbfydbcdtfydbgKTaLavc;e1jjbfydbcdtfydbg8AceSGaLavc;i1jjbfydbcdtfydbg3cdSGaOcb9hGazGg5ce9hmbaw9cu83ibaD9cu83ibaq9cu83ibak9cu83ibax9cu83ibam9cu83ibal9cu83iwal9cu83ibcbhOkcbhEaXcufgvhodnindnalaocsGcdtfydba8A9hmbaEhYxdkcuhYaocufhoaEcefgEcz9hmbkkcbhodnindnalavcsGcdtfydba39hmbaohExdkcuhEavcufhvaocefgocz9hmbkkaOaKaOSg8EfhLdndnaYcm0mbaYcefhYxekcbcsa8AaLSgvEhYaLavfhLkdndnaEcm0mbaEcefhExekcbcsa3aLSgvEhEaLavfhLkc9:cua8EEh8FcbhvaEaYcltVgacFeGhodndndninavc:W1jjbfRbbaoSmeavcefgvcz9hmbxdkka5aKaO9havcm0VVmbasavc;WeV86bbxekasa8F86bbaeaa86bbaecefhekdna8EmbaKaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombkaKhAkdnaYcs9hmba8AaA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka8AhAkdnaEcs9hmba3aA9Rgvcetavc8F917hvinaeavcFb0gocrtavcFbGV86bbavcr4hvaecefheaombka3hAkalaXcdtfaKBdbaXcefcsGhvdndnaYPzbeeeeeeeeeeeeeebekalavcdtfa8ABdbaXcdfcsGhvkdndnaEPzbeeeeeeeeeeeeeebekalavcdtfa3BdbavcefcsGhvkcihoalc;abfaQcitfgEaKBdlaEa8ABdbaQcefcsGhYcdhEavhXaLhOxekcdhoalaXcdtfa3BdbcehEaXcefcsGhXaQhYkalc;abfaYcitfgva8ABdlava3Bdbalc;abfaQaEfcsGcitfgva3BdlavaKBdbascefhsaQaofcsGhQaCcifgCai6mbkkdnaeaP9nmbcbhvxekcbhvinaeavfavc:W1jjbfRbb86bbavcefgvcz9hmbkaeab9Ravfhvkalc;aef8KjjjjbavkZeeucbhddninadcefgdc8F0meceadtae6mbkkadcrfcFeGcr9Uci2cdfabci9U2cHfkmbcbabBd;m:kjjbk:Adewu8Jjjjjbcz9Rhlcbhvdnaicvfae0mbcbhvabcbRb;m:kjjbc;qeV86bbal9cb83iwabcefhoabaefc98fhrdnaiTmbcbhwcbhDindnaoar6mbcbskadaDcdtfydbgqalcwfawaqav9Rgvavc8F91gv7av9Rc507gwcdtfgkydb9Rgvc8E91c9:Gavcdt7awVhvinaoavcFb0gecrtavcFbGV86bbavcr4hvaocefhoaembkakaqBdbaqhvaDcefgDai9hmbkkdnaoar9nmbcbskaocbBbbaoab9RclfhvkavkBeeucbhddninadcefgdc8F0meceadtae6mbkkadcwfcFeGcr9Uab2cvfk:bvli99dui99ludnaeTmbcuadcetcuftcu7:Zhvdndncuaicuftcu7:ZgoJbbbZMgr:lJbbb9p9DTmbar:Ohwxekcjjjj94hwkcbhicbhDinalclfIdbgrJbbbbJbbjZalIdbgq:lar:lMalcwfIdbgk:lMgr:varJbbbb9BEgrNhxaqarNhrdndnakJbbbb9GTmbaxhqxekJbbjZar:l:tgqaq:maxJbbbb9GEhqJbbjZax:l:tgxax:marJbbbb9GEhrkdndnalcxfIdbgxJbbj:;axJbbj:;9GEgkJbbjZakJbbjZ9FEavNJbbbZJbbb:;axJbbbb9GEMgx:lJbbb9p9DTmbax:Ohmxekcjjjj94hmkdndnaqJbbj:;aqJbbj:;9GEgxJbbjZaxJbbjZ9FEaoNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:OhPxekcjjjj94hPkdndnarJbbj:;arJbbj:;9GEgqJbbjZaqJbbjZ9FEaoNJbbbZJbbb:;arJbbbb9GEMgr:lJbbb9p9DTmbar:Ohsxekcjjjj94hskdndnadcl9hmbabaifgzas86bbazcifam86bbazcdfaw86bbazcefaP86bbxekabaDfgzas87ebazcofam87ebazclfaw87ebazcdfaP87ebkalczfhlaiclfhiaDcwfhDaecufgembkkk;hlld99eud99eudnaeTmbdndncuaicuftcu7:ZgvJbbbZMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikaic;8FiGhrinabcofcicdalclfIdb:lalIdb:l9EgialcwfIdb:lalaicdtfIdb:l9EEgialcxfIdb:lalaicdtfIdb:l9EEgiarV87ebdndnJbbj:;JbbjZalaicdtfIdbJbbbb9DEgoalaicd7cdtfIdbJ;Zl:1ZNNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabcdfaq87ebdndnalaicefciGcdtfIdbJ;Zl:1ZNaoNgwJbbj:;awJbbj:;9GEgDJbbjZaDJbbjZ9FEavNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohqxekcjjjj94hqkabaq87ebdndnaoalaicufciGcdtfIdbJ;Zl:1ZNNgoJbbj:;aoJbbj:;9GEgwJbbjZawJbbjZ9FEavNJbbbZJbbb:;aoJbbbb9GEMgo:lJbbb9p9DTmbao:Ohixekcjjjj94hikabclfai87ebabcwfhbalczfhlaecufgembkkk;3viDue99eu8Jjjjjbcjd9Rgo8Kjjjjbadcd4hrdndndndnavcd9hmbadcl6meaohwarhDinawc:CuBdbawclfhwaDcufgDmbkaeTmiadcl6mdarcdthqalhkcbhxinaohwakhDarhminawawydbgPcbaDIdbgs:8cL4cFeGc:cufasJbbbb9BEgzaPaz9kEBdbaDclfhDawclfhwamcufgmmbkakaqfhkaxcefgxaeSmixbkkaeTmdxekaeTmekarcdthkavce9hhqadcl6hdcbhxindndndnaqmbadmdc:CuhDalhwarhminaDcbawIdbgs:8cL4cFeGc:cufasJbbbb9BEgPaDaP9kEhDawclfhwamcufgmmbxdkkc:CuhDdndnavPleddbdkadmdaohwalhmarhPinawcbamIdbgs:8cL4cFeGgzc;:bazc;:b0Ec:cufasJbbbb9BEBdbamclfhmawclfhwaPcufgPmbxdkkadmecbhwarhminaoawfcbalawfIdbgs:8cL4cFeGgPc8AaPc8A0Ec:cufasJbbbb9BEBdbawclfhwamcufgmmbkkadmbcbhwarhPinaDhmdnavceSmbaoawfydbhmkdndnalawfIdbgscjjj;8iamai9RcefgmcLt9R::NJbbbZJbbb:;asJbbbb9GEMgs:lJbbb9p9DTmbas:Ohzxekcjjjj94hzkabawfazcFFFrGamcKtVBdbawclfhwaPcufgPmbkkabakfhbalakfhlaxcefgxae9hmbkkaocjdf8Kjjjjbk:Ylvdud99due99iudnaeTmbceaicufgvthocuaitcu7:Zhrcuavtcu7:Zhwcbhvadcl9hhDcbhqindndnalcwfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikdndnalIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohdxekcjjjj94hdkadai9Rcd9TgxaifhidndnalclfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEarNJbbbZMgk:lJbbb9p9DTmbak:Ohdxekcjjjj94hdkadai9Rcd9ThddndnalcxfIdbgkJbbbbakJbbbb9GEgkJbbjZakJbbjZ9FEawNJbbbZMgk:lJbbb9p9DTmbak:Ohmxekcjjjj94hmkadaifhiaoamVhmdndnaDmbabavfgPai86bbaPcifam86bbaPcdfad86bbaPcefax86bbxekabaqfgPai87ebaPcofam87ebaPclfad87ebaPcdfax87ebkalczfhlavclfhvaqcwfhqaecufgembkkk;YqdXui998Jjjjjbc:qd9Rgv8Kjjjjbavc:Sefcbc;Kbz:xjjjb8AcbhodnadTmbcbhoaiTmbdndnabaeSmbaehrxekavcuadcdtgwadcFFFFi0Ecbyd;q:kjjbHjjjjbbgrBd:SeavceBd:mdaraeawz:wjjjb8Akavc:GefcwfcbBdbav9cb83i:Geavc:Gefaradaiavc:Sefz:pjjjbavyd:GehDadci9Ugqcbyd;q:kjjbHjjjjbbheavc:Sefavyd:mdgkcdtfaeBdbavakcefgwBd:mdaecbaqz:xjjjbhxavc:SefawcdtfcuaicdtaicFFFFi0Ecbyd;q:kjjbHjjjjbbgmBdbavakcdfgPBd:mdalc;ebfhsaDheamhwinawalIdbasaeydbgzcwazcw6EcdtfIdbMUdbaeclfheawclfhwaicufgimbkavc:SefaPcdtfcuaqcdtadcFFFF970Ecbyd;q:kjjbHjjjjbbgPBdbdnadci6mbarheaPhwaqhiinawamaeydbcdtfIdbamaeclfydbcdtfIdbMamaecwfydbcdtfIdbMUdbaecxfheawclfhwaicufgimbkkakcifhoalc;ebfhHavc;qbfhOavheavyd:KehAavyd:OehCcbhzcbhwcbhXcehQinaehLcihkarawci2gKcdtfgeydbhsaeclfydbhdabaXcx2fgicwfaecwfydbgYBdbaiclfadBdbaiasBdbaxawfce86bbaOaYBdwaOadBdlaOasBdbaPawcdtfcbBdbdnazTmbcihkaLhiinaOakcdtfaiydbgeBdbakaeaY9haeas9haead9hGGfhkaiclfhiazcufgzmbkkaXcefhXcbhzinaCaAarazaKfcdtfydbcdtgifydbcdtfgYheaDaifgdydbgshidnasTmbdninaeydbawSmeaeclfheaicufgiTmdxbkkaeaYascdtfc98fydbBdbadadydbcufBdbkazcefgzci9hmbkdndnakTmbcuhwJbbbbh8Acbhdavyd:KehYavyd:OehKindndnaDaOadcdtfydbcdtgzfydbgembadcefhdxekadcs0hiamazfgsIdbhEasalcbadcefgdaiEcdtfIdbaHaecwaecw6EcdtfIdbMg3Udba3aE:th3aecdthiaKaYazfydbcdtfheinaPaeydbgzcdtfgsa3asIdbMgEUdbaEa8Aa8AaE9DgsEh8AazawasEhwaeclfheaic98fgimbkkadak9hmbkawcu9hmekaQaq9pmdindnaxaQfRbbmbaQhwxdkaqaQcefgQ9hmbxikkakczakcz6EhzaOheaLhOawcu9hmbkkaocdtavc:Seffc98fhedninaoTmeaeydbcbyd;u:kjjbH:bjjjbbaec98fheaocufhoxbkkavc:qdf8Kjjjjbk;IlevucuaicdtgvaicFFFFi0Egocbyd;q:kjjbHjjjjbbhralalyd9GgwcdtfarBdbalawcefBd9GabarBdbaocbyd;q:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdlcuadcdtadcFFFFi0Ecbyd;q:kjjbHjjjjbbhralalyd9GgocdtfarBdbalaocefBd9GabarBdwabydbcbavz:xjjjb8Aadci9UhDdnadTmbabydbhoaehladhrinaoalydbcdtfgvavydbcefBdbalclfhlarcufgrmbkkdnaiTmbabydbhlabydlhrcbhvaihoinaravBdbarclfhralydbavfhvalclfhlaocufgombkkdnadci6mbabydlhrabydwhvcbhlinaecwfydbhoaeclfydbhdaraeydbcdtfgwawydbgwcefBdbavawcdtfalBdbaradcdtfgdadydbgdcefBdbavadcdtfalBdbaraocdtfgoaoydbgocefBdbavaocdtfalBdbaecxfheaDalcefgl9hmbkkdnaiTmbabydlheabydbhlinaeaeydbalydb9RBdbalclfhlaeclfheaicufgimbkkkQbabaeadaic;K1jjbz:ojjjbkQbabaeadaic;m:jjjbz:ojjjbk9DeeuabcFeaicdtz:xjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk:Vvioud9:du8Jjjjjbc;Wa9Rgl8Kjjjjbcbhvalcxfcbc;Kbz:xjjjb8AalcuadcitgoadcFFFFe0Ecbyd;q:kjjbHjjjjbbgrBdxalceBd2araeadaicezNjjjbalcuaoadcjjjjoGEcbyd;q:kjjbHjjjjbbgwBdzadcdthednadTmbabhiinaiavBdbaiclfhiadavcefgv9hmbkkawaefhDalabBdwalawBdl9cbhqindnadTmbaq9cq9:hkarhvaDhiadheinaiav8Pibak1:NcFrG87ebavcwfhvaicdfhiaecufgembkkalclfaq:NceGcdtfydbhxalclfaq9ce98gq:NceGcdtfydbhmalc;Wbfcbcjaz:xjjjb8AaDhvadhidnadTmbinalc;Wbfav8VebcdtfgeaeydbcefBdbavcdfhvaicufgimbkkcbhvcbhiinalc;WbfavfgeydbhoaeaiBdbaoaifhiavclfgvcja9hmbkadhvdndnadTmbinalc;WbfaDamydbgicetf8VebcdtfgeaeydbgecefBdbaxaecdtfaiBdbamclfhmavcufgvmbkaq9cv9smdcbhvinabawydbcdtfavBdbawclfhwadavcefgv9hmbxdkkaq9cv9smekkclhvdninavc98Smealcxfavfydbcbyd;u:kjjbH:bjjjbbavc98fhvxbkkalc;Waf8Kjjjjbk:Jwliuo99iud9:cbhv8Jjjjjbca9Rgoczfcwfcbyd:8:kjjbBdbaocb8Pd:0:kjjb83izaocwfcbyd;i:kjjbBdbaocb8Pd;a:kjjb83ibaicd4hrdndnadmbJFFuFhwJFFuuhDJFFuuhqJFFuFhkJFFuuhxJFFuFhmxekarcdthPaehsincbhiinaoczfaifgzasaifIdbgwazIdbgDaDaw9EEUdbaoaifgzawazIdbgDaDaw9DEUdbaiclfgicx9hmbkasaPfhsavcefgvad9hmbkaoIdKhDaoIdwhwaoIdChqaoIdlhkaoIdzhxaoIdbhmkdnadTmbJbbbbJbFu9hJbbbbamax:tgmamJbbbb9DEgmakaq:tgkakam9DEgkawaD:tgwawak9DEgw:vawJbbbb9BEhwdnalmbarcdthoindndnaeclfIdbaq:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:S9cC:ghHdndnaeIdbax:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikaHai:S:ehHdndnaecwfIdbaD:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabaHai:T9cy:g:e83ibaeaofheabcwfhbadcufgdmbxdkkarcdthoindndnaeIdbax:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cv9:9c;j:KM;j:KM;j:Kd:dhOdndnaeclfIdbaq:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cq9:9cM;j:KM;j:KM;jl:daO:ehOdndnaecwfIdbaD:tawNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabaOai:SgH9ca:gaH9cz:g9cjjj;4s:d:eaH9cFe:d:e9cF:bj;4:pj;ar:d9c:bd9:9c:p;G:d;4j:E;ar:d9cH9:9c;d;H:W:y:m:g;d;Hb:d9cC9:9c:KM;j:KM;j:KMD:d:e83ibaeaofheabcwfhbadcufgdmbkkk9teiucbcbyd;y:kjjbgeabcifc98GfgbBd;y:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;y:kjjbgeabcrfc94GfgbBd;y:kjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;y:kjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;y:kjjbfgdBd;y:kjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk;Qddbcjwk;mdbbbbdbbblbbbwbbbbbbbebbbdbbblbbbwbbbbbbbbbbbbbbbb4:h9w9N94:P:gW:j9O:ye9Pbbbbbbebbbdbbbebbbdbbbbbbbdbbbbbbbebbbbbbb:l29hZ;69:9kZ;N;76Z;rg97Z;z;o9xZ8J;B85Z;:;u9yZ;b;k9HZ:2;Z9DZ9e:l9mZ59A8KZ:r;T3Z:A:zYZ79OHZ;j4::8::Y:D9V8:bbbb9s:49:Z8R:hBZ9M9M;M8:L;z;o8:;8:PG89q;x:J878R:hQ8::M:B;e87bbbbbbjZbbjZbbjZ:E;V;N8::Y:DsZ9i;H;68:xd;R8:;h0838:;W:NoZbbbb:WV9O8:uf888:9i;H;68:9c9G;L89;n;m9m89;D8Ko8:bbbbf:8tZ9m836ZS:2AZL;zPZZ818EZ9e:lxZ;U98F8:819E;68:FFuuFFuuFFuuFFuFFFuFFFuFbc;mqkzebbbebbbdbbb9G:vbb"),{}).then(function(t){(e=t.instance).exports.__wasm_call_ctors(),e.exports.meshopt_encodeVertexVersion(0),e.exports.meshopt_encodeIndexVersion(1)})}(),function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var n,i=WebAssembly.validate(e)?r("b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuixkbbebeeddddilve9Weeeviebeoweuec:q:6dkr;Neqo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949WbwY9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVJ9V29VVbDl79IV9Rbqq;Ctklbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk:183lYud97dur978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnalTmbcuhoaiRbbgrc;WeGc:Ge9hmbarcsGgwce0mbc9:hoalcufadcd4cbawEgDadfgrcKcaawEgqaraq0Egk6mbaicefhxavaialfgmar9Rgoad;8qbbcj;abad9Uc;WFbGcjdadca0EhPdndndnadTmbaoadfhscbhzinaeaz9nmdamax9RaD6miabazad2fhHaxaDfhOaPaeaz9RazaPfae6EgAcsfgocl4cifcd4hCavcj;cbfaoc9WGgXcetfhQavcj;cbfaXci2fhLavcj;cbfaXfhKcbhYaoc;ab6h8AincbhodnawTmbaxaYcd4fRbbhokaocFeGhEcbh3avcj;cbfh5indndndndnaEa3cet4ciGgoc9:fPdebdkamaO9RaX6mwavcj;cbfa3aX2faOaX;8qbbaOaAfhOxdkavcj;cbfa3aX2fcbaX;8kbxekamaO9RaC6moaoclVcbawEhraOaCfhocbhidna8Ambamao9Rc;Gb6mbcbhlina5alfhidndndndndndnaOalco4fRbbgqciGarfPDbedibledibkaipxbbbbbbbbbbbbbbbbpklbxlkaiaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaiaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaiaopbbbpklbaoczfhoxekaiaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqcd4ciGarfPDbedibledibkaiczfpxbbbbbbbbbbbbbbbbpklbxlkaiczfaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaiczfaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaiczfaopbbbpklbaoczfhoxekaiczfaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqcl4ciGarfPDbedibledibkaicafpxbbbbbbbbbbbbbbbbpklbxlkaicafaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaoclffahc:q:yjjbfRbbfhoxikaicafaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaaaocwffahc:q:yjjbfRbbfhoxdkaicafaopbbbpklbaoczfhoxekaicafaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaaaocdffahc:q:yjjbfRbbfhokdndndndndndnaqco4arfPDbedibledibkaic8Wfpxbbbbbbbbbbbbbbbbpklbxlkaic8Wfaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngicitc:q1jjbfpbibaic:q:yjjbfRbbgipsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Ngqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaiaoclffaqc:q:yjjbfRbbfhoxikaic8Wfaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngicitc:q1jjbfpbibaic:q:yjjbfRbbgipsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Ngqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spklbaiaocwffaqc:q:yjjbfRbbfhoxdkaic8Wfaopbbbpklbaoczfhoxekaic8WfaopbbdaoRbbgicitc:q1jjbfpbibaic:q:yjjbfRbbgipsaoRbegqcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpklbaiaocdffaqc:q:yjjbfRbbfhokalc;abfhialcjefaX0meaihlamao9Rc;Fb0mbkkdnaiaX9pmbaici4hlinamao9RcK6mwa5aifhqdndndndndndnaOaico4fRbbalcoG4ciGarfPDbedibledibkaqpxbbbbbbbbbbbbbbbbpkbbxlkaqaopbblaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLg8Ecdp:mea8EpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9og8Fpxiiiiiiiiiiiiiiiip8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spkbbaaaoclffahc:q:yjjbfRbbfhoxikaqaopbbwaopbbbg8Eclp:mea8EpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9og8Fpxssssssssssssssssp8Jg8Ep5b9cjF;8;4;W;G;ab9:9cU1:Ngacitc:q1jjbfpbibaac:q:yjjbfRbbgapsa8Ep5e9cjF;8;4;W;G;ab9:9cU1:Nghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPa8Fa8Ep9spkbbaaaocwffahc:q:yjjbfRbbfhoxdkaqaopbbbpkbbaoczfhoxekaqaopbbdaoRbbgacitc:q1jjbfpbibaac:q:yjjbfRbbgapsaoRbeghcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPpkbbaaaocdffahc:q:yjjbfRbbfhokalcdfhlaiczfgiaX6mbkkaohOaoTmoka5aXfh5a3cefg3cl9hmbkdndndndnawTmbasaYcd4fRbbglciGPlbedwbkaXTmdavcjdfaYfhlavaYfpbdbhgcbhoinalavcj;cbfaofpblbg8JaKaofpblbg8KpmbzeHdOiAlCvXoQrLg8LaQaofpblbg8MaLaofpblbg8NpmbzeHdOiAlCvXoQrLgypmbezHdiOAlvCXorQLg8Ecep9Ta8Epxeeeeeeeeeeeeeeeeg8Fp9op9Hp9rg8Eagp9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8LaypmwDKYqk8AExm35Ps8E8Fg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8Ja8KpmwKDYq8AkEx3m5P8Es8Fg8Ja8Ma8NpmwKDYq8AkEx3m5P8Es8Fg8KpmbezHdiOAlvCXorQLg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Uggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp9Uggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp9Uggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9Abbbaladfglaga8Ja8KpmwDKYqk8AExm35Ps8E8Fg8Ecep9Ta8Ea8Fp9op9Hp9rg8Ep9Ug8Fp9Abbbaladfgla8Fa8Ea8Epmlvorlvorlvorlvorp9Ug8Fp9Abbbaladfgla8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9Ug8Fp9Abbbaladfgla8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9Uggp9AbbbaladfhlaoczfgoaX6mbxikkaXTmeavcjdfaYfhlavaYfpbdbhgcbhoinalavcj;cbfaofpblbg8JaKaofpblbg8KpmbzeHdOiAlCvXoQrLg8LaQaofpblbg8MaLaofpblbg8NpmbzeHdOiAlCvXoQrLgypmbezHdiOAlvCXorQLg8Ecep:nea8Epxebebebebebebebebg8Fp9op:bep9rg8Eagp:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8LaypmwDKYqk8AExm35Ps8E8Fg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8Ja8KpmwKDYq8AkEx3m5P8Es8Fg8Ja8Ma8NpmwKDYq8AkEx3m5P8Es8Fg8KpmbezHdiOAlvCXorQLg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeggp9Abbbaladfglaga8Ea8Epmlvorlvorlvorlvorp:oeggp9Abbbaladfglaga8Ea8EpmwDqkwDqkwDqkwDqkp:oeggp9Abbbaladfglaga8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9Abbbaladfglaga8Ja8KpmwDKYqk8AExm35Ps8E8Fg8Ecep:nea8Ea8Fp9op:bep9rg8Ep:oeg8Fp9Abbbaladfgla8Fa8Ea8Epmlvorlvorlvorlvorp:oeg8Fp9Abbbaladfgla8Fa8Ea8EpmwDqkwDqkwDqkwDqkp:oeg8Fp9Abbbaladfgla8Fa8Ea8EpmxmPsxmPsxmPsxmPsp:oeggp9AbbbaladfhlaoczfgoaX6mbxdkkaXTmbcbhocbalcl4gl9Rc8FGhiavcjdfaYfhravaYfpbdbh8Finaravcj;cbfaofpblbggaKaofpblbg8JpmbzeHdOiAlCvXoQrLg8KaQaofpblbg8LaLaofpblbg8MpmbzeHdOiAlCvXoQrLg8NpmbezHdiOAlvCXorQLg8Eaip:Rea8Ealp:Sep9qg8Ea8Fp9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Fa8Ka8NpmwDKYqk8AExm35Ps8E8Fg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Faga8JpmwKDYq8AkEx3m5P8Es8Fgga8La8MpmwKDYq8AkEx3m5P8Es8Fg8JpmbezHdiOAlvCXorQLg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9Abbbaradfgra8Faga8JpmwDKYqk8AExm35Ps8E8Fg8Eaip:Rea8Ealp:Sep9qg8Ep9rg8Fp9Abbbaradfgra8Fa8Ea8Epmlvorlvorlvorlvorp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmwDqkwDqkwDqkwDqkp9rg8Fp9Abbbaradfgra8Fa8Ea8EpmxmPsxmPsxmPsxmPsp9rg8Fp9AbbbaradfhraoczfgoaX6mbkkaYclfgYad6mbkaHavcjdfaAad2;8qbbavavcjdfaAcufad2fad;8qbbaAazfhzc9:hoaOhxaOmbxlkkaeTmbaDalfhrcbhocuhlinaralaD9RglfaD6mdaPaeao9RaoaPfae6Eaofgoae6mbkaial9Rhxkcbc99amax9RakSEhoxekc9:hokavcj;kbf8Kjjjjbaokwbz:bjjjbk:TseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhldnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhoindnalaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfaoaDcu7gPcl4fcsGcitfgsydlhzasydbhHdndnaDcsGgsak9pmbavaiaPfcsGcdtfydbaxasEhDaxasTgOfhxxekdndnascsSmbcehOasc987asamffcefhDxekalcefhDal8SbbgscFeGhPdndnascu9mmbaDhlxekalcvfhlaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhlkcehOaPce4cbaPceG9R7amfhDkaDhmkavc;abfaocitfgsaDBdbasazBdlavaicdtfaDBdbavc;abfaocefcsGcitfgsaHBdbasaDBdlaocdfhoaOaifhidnadcd9hmbabarcetfgsaH87ebasclfaD87ebascdfaz87ebxdkabarcdtfgsaHBdbascwfaDBdbasclfazBdbxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHclfas87ebaHcdfaD87ebxekabarcdtfgHaxBdbaHcwfasBdbaHclfaDBdbkavaicdtfaxBdbavc;abfaocitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfaocefcsGcitfgHasBdbaHaDBdlavaiaPfgicsGcdtfasBdbavc;abfaocdfcsGcitfgDaxBdbaDasBdlaocifhoaiaOfhiazaOfhxxekaxcbalRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbalcefhDxekalcdfhDal8SbegPcFeGhsdnaPcu9kmbalcofhAascFbGhscrhldninaD8SbbgPcFbGaltasVhsaPcu9kmeaDcefhDalcrfglc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbglcFeGhPdnalcu9kmbaDcvfhzaPcFbGhPcrhldninas8SbbgDcFbGaltaPVhPaDcu9kmeascefhsalcrfglc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashlxekascefhlas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninal8SbbgscFbGaDtaPVhPascu9kmealcefhlaDcrfgDc8J9hmbkaOhlxekalcefhlkaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDclfaO87ebaDcdfaz87ebxekabarcdtfgDaABdbaDcwfaOBdbaDclfazBdbkavc;abfaocitfgDazBdbaDaABdlavaicdtfaABdbavc;abfaocefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfaocdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhiaocifhokawcefhwaocsGhoaicsGhiarcifgrae6mbkkcbc99alaqSEhokavc;aef8Kjjjjbaok:clevu8Jjjjjbcz9Rhvdnaecvfal9nmbc9:skdnaiRbbc;:eGc;qeSmbcuskav9cb83iwaicefhoaialfc98fhrdnaeTmbdnadcdSmbcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcdtfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgiBdbalaiBdbawcefgwae9hmbxdkkcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcetfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgi87ebalaiBdbawcefgwae9hmbkkcbc99aoarSEk:2Pliur97eue978Jjjjjbc8W9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalaeSmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskaipxFubbFubbFubbFubbgxpklbdnalTmbcbhvabhdinadczfgmampbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraipblbaDaopmlvorxmPsCXQL358E8Fp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgPp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;MeawaqawaPp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oaoarpmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalaeSmbaiczfpxbbbbbbbbbbbbbbbbgopklbaiaopklbaiabalcitfgdaeciGglcitgv;8qbbaiaxpkladnalTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraipblaaDaopmlvorxmPsCXQL358E8Fp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgPp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;MeawaqawaPp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oaoarpmbezHdiOAlvCXorQLp9qpklbkadaiav;8qbbkk;Iwllue97euo978Jjjjjbca9Rhidnaec98GglTmbcbhvabhoinaocKfpxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81ZaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkpxibbbibbbibbbibbbp9qp;6ep;NegxaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meaxarczp:Sep;6ep;Megmamp;Meaxaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgxp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgPp9oamaxp;Mearp;Keczp:Rep9qgmaDaxp;Mearp;KeaPp9oaqaxp;Mearp;Keczp:Rep9qgrpmwDKYqk8AExm35Ps8E8FgDp5eakclp:RegxpEi:T:j83ibawaDp5baxpEd:T:j83ibaocwfamarpmbezHdiOAlvCXorQLgrp5eaxpEe:T:j83ibaoarp5baxpEb:T:j83ibaocafhoavclfgval6mbkkdnalaeSmbaiczfpxbbbbbbbbbbbbbbbbgxpklbaiaxpklbaiabalcitfgoaeciGgvcitgw;8qbbdnavTmbaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81ZaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkpxibbbibbbibbbibbbp9qp;6ep;NegxaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meaxarczp:Sep;6ep;Megmamp;Meaxaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgxp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgPp9oamaxp;Mearp;Keczp:Rep9qgmaDaxp;Mearp;KeaPp9oaqaxp;Mearp;Keczp:Rep9qgrpmwDKYqk8AExm35Ps8E8FgDp5eakclp:RegxpEi:T:j83iKaiaDp5baxpEd:T:j83izaiamarpmbezHdiOAlvCXorQLgrp5eaxpEe:T:j83iwaiarp5baxpEb:T:j83ibkaoaiaw;8qbbkk;uddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepkbbadczfhdaeclfgeav6mbkkdnavalSmbaic8WfpxbbbbbbbbbbbbbbbbgopklbaicafaopklbaiczfaopklbaiaopklbaiabavcdtfgdalciGgecdtgv;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepklbkadaiav;8qbbkk:CPvdue97euw97eu8Jjjjjbc8W9Rhiaec98Ghldndnadcl9hmbaipxbbbbbbbbbbbbbbbbgvpklbdnalTmbcbhoabhdinadpbbbhradpxbbuJbbuJbbuJbbuJaipblbarcKp:Tep9qgwcep:Seawp9qgDcdp:SeaDp9qgDclp:SeaDp9qgqp;6ep;NegDarcwp:RecKp:SegkarpxFbbbFbbbFbbbFbbbgxp9ogmp:Uep;6ep;Mepxbbn0bbn0bbn0bbn0gPp;Kecwp:RepxbFbbbFbbbFbbbFbbp9oaDamakp:Xearczp:RecKp:Segrp:Uep;6ep;MeaPp;Keaxp9op9qaDamakarp:Uep:Xep;6ep;MeaPp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qaDaqawcep:Rep9oawpxebbbebbbebbbebbbp9op9qp;6ep;MeaPp;KecKp:Rep9qpkbbadczfhdaoclfgoal6mbkkalaeSmeaiavpklaaicafabalcdtfgdaeciGglcdtgo;8qbbaiavpklbdnalTmbaipblahraipxbbuJbbuJbbuJbbuJaipblbarcKp:Tep9qgwcep:Seawp9qgDcdp:SeaDp9qgDclp:SeaDp9qgqp;6ep;NegDarcwp:RecKp:SegkarpxFbbbFbbbFbbbFbbbgxp9ogmp:Uep;6ep;Mepxbbn0bbn0bbn0bbn0gPp;Kecwp:RepxbFbbbFbbbFbbbFbbp9oaDamakp:Xearczp:RecKp:Segrp:Uep;6ep;MeaPp;Keaxp9op9qaDamakarp:Uep:Xep;6ep;MeaPp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qaDaqawcep:Rep9oawpxebbbebbbebbbebbbp9op9qp;6ep;MeaPp;KecKp:Rep9qpklakadaicafao;8qbbskaipxbbbbbbbbbbbbbbbbgvpklbdnalTmbcbhoabhdinadczfgspxbFu9hbFu9hbFu9hbFu9hadpbbbgDaspbbbgPpmlvorxmPsCXQL358E8Fgmczp:Teaipblbp9qgrcep:Searp9qgwcdp:Seawp9qgwclp:Seawp9qgwcwp:Seawp9qgqp;6ep;NegwaDaPpmbediwDqkzHOAKY8AEgDpxFFbbFFbbFFbbFFbbgPp9ogkaDczp:Segxp:Ueamczp:Reczp:Segmp:Xep;6ep;Mepxbbn0bbn0bbn0bbn0gDp;KeaPp9oawakaxamp:Uep:Xep;6ep;MeaDp;Keczp:Rep9qgxawaqarcep:Rep9oarpxebbbebbbebbbebbbp9op9qp;6ep;MeaDp;Keczp:Reawamakp:Uep;6ep;MeaDp;KeaPp9op9qgrpmwDKYqk8AExm35Ps8E8FpkbbadaxarpmbezHdiOAlvCXorQLpkbbadcafhdaoclfgoal6mbkkalaeSmbaiczfpxbbbbbbbbbbbbbbbbgrpklbaiarpklbaiabalcitfgdaeciGglcitgo;8qbbaiavpkladnalTmbaipxbFu9hbFu9hbFu9hbFu9haipblbgDaipblzgPpmlvorxmPsCXQL358E8Fgmczp:Teaipblap9qgrcep:Searp9qgwcdp:Seawp9qgwclp:Seawp9qgwcwp:Seawp9qgqp;6ep;NegwaDaPpmbediwDqkzHOAKY8AEgDpxFFbbFFbbFFbbFFbbgPp9ogkaDczp:Segxp:Ueamczp:Reczp:Segmp:Xep;6ep;Mepxbbn0bbn0bbn0bbn0gDp;KeaPp9oawakaxamp:Uep:Xep;6ep;MeaDp;Keczp:Rep9qgxawaqarcep:Rep9oarpxebbbebbbebbbebbbp9op9qp;6ep;MeaDp;Keczp:Reawamakp:Uep;6ep;MeaDp;KeaPp9op9qgrpmwDKYqk8AExm35Ps8E8FpklzaiaxarpmbezHdiOAlvCXorQLpklbkadaiao;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz:Dbb"):r("b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuixkbeeeddddillviebeoweuec:W:Odkr;Neqo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949WboY9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVJ9V29VVbrl79IV9Rbwq;BZkdbk;jYi5ud9:du8Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnalTmbcuhoaiRbbgrc;WeGc:Ge9hmbarcsGgwce0mbc9:hoalcufadcd4cbawEgDadfgrcKcaawEgqaraq0Egk6mbaicefhxcj;abad9Uc;WFbGcjdadca0EhmaialfgPar9Rgoadfhsavaoadz:jjjjbgzceVhHcbhOdndninaeaO9nmeaPax9RaD6mdamaeaO9RaOamfgoae6EgAcsfglc9WGhCabaOad2fhXaAcethQaxaDfhiaOaeaoaeao6E9RhLalcl4cifcd4hKazcj;cbfaAfhYcbh8AazcjdfhEaHh3incbhodnawTmbaxa8Acd4fRbbhokaocFeGh5cbh8Eazcj;cbfhqinaih8Fdndndndna5a8Ecet4ciGgoc9:fPdebdkaPa8F9RaA6mrazcj;cbfa8EaA2fa8FaAz:jjjjb8Aa8FaAfhixdkazcj;cbfa8EaA2fcbaAz:kjjjb8Aa8FhixekaPa8F9RaK6mva8FaKfhidnaCTmbaPai9RcK6mbaocdtc:q1jjbfcj1jjbawEhaczhrcbhlinargoc9Wfghaqfhrdndndndndndnaaa8Fahco4fRbbalcoG4ciGcdtfydbPDbedvivvvlvkar9cb83bbarcwf9cb83bbxlkarcbaiRbdai8Xbb9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:gg9cjjjjjz:dg8J9qE86bbaqaofgrcGfag9c8F1:NghcKtc8F91aicdfa8J9c8N1:Nfg8KRbbG86bbarcVfcba8KahcjeGcr4fghRbbag9cjjjjjl:dg8J9qE86bbarc7fcbaha8J9c8L1:NfghRbbag9cjjjjjd:dg8J9qE86bbarctfcbaha8J9c8K1:NfghRbbag9cjjjjje:dg8J9qE86bbarc91fcbaha8J9c8J1:NfghRbbag9cjjjj;ab:dg8J9qE86bbarc4fcbaha8J9cg1:NfghRbbag9cjjjja:dg8J9qE86bbarc93fcbaha8J9ch1:NfghRbbag9cjjjjz:dgg9qE86bbarc94fcbahag9ca1:NfghRbbai8Xbe9c:c:qj:bw9:9c:q;c1:I1e:d9c:b:c:e1z9:gg9cjjjjjz:dg8J9qE86bbarc95fag9c8F1:NgicKtc8F91aha8J9c8N1:NfghRbbG86bbarc96fcbahaicjeGcr4fgiRbbag9cjjjjjl:dg8J9qE86bbarc97fcbaia8J9c8L1:NfgiRbbag9cjjjjjd:dg8J9qE86bbarc98fcbaia8J9c8K1:NfgiRbbag9cjjjjje:dg8J9qE86bbarc99fcbaia8J9c8J1:NfgiRbbag9cjjjj;ab:dg8J9qE86bbarc9:fcbaia8J9cg1:NfgiRbbag9cjjjja:dg8J9qE86bbarcufcbaia8J9ch1:NfgiRbbag9cjjjjz:dgg9qE86bbaiag9ca1:NfhixikaraiRblaiRbbghco4g8Ka8KciSg8KE86bbaqaofgrcGfaiclfa8Kfg8KRbbahcl4ciGg8La8LciSg8LE86bbarcVfa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc7fa8Ka8Lfg8KRbbahciGghahciSghE86bbarctfa8Kahfg8KRbbaiRbeghco4g8La8LciSg8LE86bbarc91fa8Ka8Lfg8KRbbahcl4ciGg8La8LciSg8LE86bbarc4fa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc93fa8Ka8Lfg8KRbbahciGghahciSghE86bbarc94fa8Kahfg8KRbbaiRbdghco4g8La8LciSg8LE86bbarc95fa8Ka8Lfg8KRbbahcl4ciGg8La8LciSg8LE86bbarc96fa8Ka8Lfg8KRbbahcd4ciGg8La8LciSg8LE86bbarc97fa8Ka8Lfg8KRbbahciGghahciSghE86bbarc98fa8KahfghRbbaiRbigico4g8Ka8KciSg8KE86bbarc99faha8KfghRbbaicl4ciGg8Ka8KciSg8KE86bbarc9:faha8KfghRbbaicd4ciGg8Ka8KciSg8KE86bbarcufaha8KfgrRbbaiciGgiaiciSgiE86bbaraifhixdkaraiRbwaiRbbghcl4g8Ka8KcsSg8KE86bbaqaofgrcGfaicwfa8Kfg8KRbbahcsGghahcsSghE86bbarcVfa8KahfghRbbaiRbeg8Kcl4g8La8LcsSg8LE86bbarc7faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarctfaha8KfghRbbaiRbdg8Kcl4g8La8LcsSg8LE86bbarc91faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc4faha8KfghRbbaiRbig8Kcl4g8La8LcsSg8LE86bbarc93faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc94faha8KfghRbbaiRblg8Kcl4g8La8LcsSg8LE86bbarc95faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc96faha8KfghRbbaiRbvg8Kcl4g8La8LcsSg8LE86bbarc97faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc98faha8KfghRbbaiRbog8Kcl4g8La8LcsSg8LE86bbarc99faha8LfghRbba8KcsGg8Ka8KcsSg8KE86bbarc9:faha8KfghRbbaiRbrgicl4g8Ka8KcsSg8KE86bbarcufaha8KfgrRbbaicsGgiaicsSgiE86bbaraifhixekarai8Pbb83bbarcwfaicwf8Pbb83bbaiczfhikdnaoaC9pmbalcdfhlaoczfhraPai9RcL0mekkaoaC6moaimexokaCmva8FTmvkaqaAfhqa8Ecefg8Ecl9hmbkdndndndnawTmbasa8Acd4fRbbgociGPlbedrbkaATmdaza8Afh8Fazcj;cbfhhcbh8EaEhaina8FRbbhraahocbhlinaoahalfRbbgqce4cbaqceG9R7arfgr86bbaoadfhoaAalcefgl9hmbkaacefhaa8Fcefh8FahaAfhha8Ecefg8Ecl9hmbxikkaATmeaza8Afhaazcj;cbfhhcbhoceh8EaYh8FinaEaofhlaa8Vbbhrcbhoinala8FaofRbbcwtahaofRbbgqVc;:FiGce4cbaqceG9R7arfgr87bbaladfhlaLaocefgofmbka8FaQfh8FcdhoaacdfhaahaQfhha8EceGhlcbh8EalmbxdkkaATmbcbaocl49Rh8Eaza8AfRbbhqcwhoa3hlinalRbbaotaqVhqalcefhlaocwfgoca9hmbkcbhhaEh8FaYhainazcj;cbfahfRbbhrcwhoaahlinalRbbaotarVhralaAfhlaocwfgoca9hmbkara8E93aq7hqcbhoa8Fhlinalaqao486bbalcefhlaocwfgoca9hmbka8Fadfh8FaacefhaahcefghaA9hmbkkaEclfhEa3clfh3a8Aclfg8Aad6mbkaXazcjdfaAad2z:jjjjb8AazazcjdfaAcufad2fadz:jjjjb8AaAaOfhOaihxaimbkc9:hoxdkcbc99aPax9RakSEhoxekc9:hokavcj;kbf8Kjjjjbaok:XseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:kjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhldnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhoindnalaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfaoaDcu7gPcl4fcsGcitfgsydlhzasydbhHdndnaDcsGgsak9pmbavaiaPfcsGcdtfydbaxasEhDaxasTgOfhxxekdndnascsSmbcehOasc987asamffcefhDxekalcefhDal8SbbgscFeGhPdndnascu9mmbaDhlxekalcvfhlaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhlkcehOaPce4cbaPceG9R7amfhDkaDhmkavc;abfaocitfgsaDBdbasazBdlavaicdtfaDBdbavc;abfaocefcsGcitfgsaHBdbasaDBdlaocdfhoaOaifhidnadcd9hmbabarcetfgsaH87ebasclfaD87ebascdfaz87ebxdkabarcdtfgsaHBdbascwfaDBdbasclfazBdbxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHclfas87ebaHcdfaD87ebxekabarcdtfgHaxBdbaHcwfasBdbaHclfaDBdbkavaicdtfaxBdbavc;abfaocitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfaocefcsGcitfgHasBdbaHaDBdlavaiaPfgicsGcdtfasBdbavc;abfaocdfcsGcitfgDaxBdbaDasBdlaocifhoaiaOfhiazaOfhxxekaxcbalRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbalcefhDxekalcdfhDal8SbegPcFeGhsdnaPcu9kmbalcofhAascFbGhscrhldninaD8SbbgPcFbGaltasVhsaPcu9kmeaDcefhDalcrfglc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbglcFeGhPdnalcu9kmbaDcvfhzaPcFbGhPcrhldninas8SbbgDcFbGaltaPVhPaDcu9kmeascefhsalcrfglc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashlxekascefhlas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninal8SbbgscFbGaDtaPVhPascu9kmealcefhlaDcrfgDc8J9hmbkaOhlxekalcefhlkaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDclfaO87ebaDcdfaz87ebxekabarcdtfgDaABdbaDcwfaOBdbaDclfazBdbkavc;abfaocitfgDazBdbaDaABdlavaicdtfaABdbavc;abfaocefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfaocdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhiaocifhokawcefhwaocsGhoaicsGhiarcifgrae6mbkkcbc99alaqSEhokavc;aef8Kjjjjbaok:clevu8Jjjjjbcz9Rhvdnaecvfal9nmbc9:skdnaiRbbc;:eGc;qeSmbcuskav9cb83iwaicefhoaialfc98fhrdnaeTmbdnadcdSmbcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcdtfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgiBdbalaiBdbawcefgwae9hmbxdkkcbhwindnaoar6mbc9:skaocefhlao8SbbgicFeGhddndnaicu9mmbalhoxekaocvfhoadcFbGhdcrhidninal8SbbgDcFbGaitadVhdaDcu9kmealcefhlaicrfgic8J9hmbxdkkalcefhokabawcetfadc8Etc8F91adcd47avcwfadceGcdtVglydbfgi87ebalaiBdbawcefgwae9hmbkkcbc99aoarSEk:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;oiliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabaiavcefciGfcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavciGfgkcd7cetfaD87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavcufciGfcetfaD87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohvxekcjjjj94hvkabakcetfav87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj98Gcjjj;8if::NUdbabclfhbadcufgdmbkkk:Tvirud99eudndnadcl9hmbaeTmeindndnabRbbgiabcefgl8Sbbgvabcdfgo8Sbbgrf9R:YJbbuJabcifgwRbbgdce4adVgDcd4aDVgDcl4aDVgD:Z:vgqNJbbbZMgk:lJbbb9p9DTmbak:Ohxxekcjjjj94hxkaoax86bbdndnaraif:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohoxekcjjjj94hokalao86bbdndnavaifar9R:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabai86bbdndnaDadcetGadceGV:ZaqNJbbbZMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkawad86bbabclfhbaecufgembxdkkaeTmbindndnab8Vebgiabcdfgl8Uebgvabclfgo8Uebgrf9R:YJbFu9habcofgw8Vebgdce4adVgDcd4aDVgDcl4aDVgDcw4aDVgD:Z:vgqNJbbbZMgk:lJbbb9p9DTmbak:Ohxxekcjjjj94hxkaoax87ebdndnaraif:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohoxekcjjjj94hokalao87ebdndnavaifar9R:YaqNJbbbZMgk:lJbbb9p9DTmbak:Ohixekcjjjj94hikabai87ebdndnaDadcetGadceGV:ZaqNJbbbZMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkawad87ebabcwfhbaecufgembkkk9teiucbcbyd:K1jjbgeabcifc98GfgbBd:K1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkk81dbcjwk8Kbbbbdbbblbbbwbbbbbbbebbbdbbblbbbwbbbbc:Kwkl8WNbb"),o=WebAssembly.instantiate(i,{}).then(function(e){(n=e.instance).exports.__wasm_call_ctors()});function r(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var o=e.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}function a(e,t,n,i,o,r,a){var s=e.exports.sbrk,A=i+3&-4,c=s(A*o),l=s(r.length),u=new Uint8Array(e.exports.memory.buffer);u.set(r,l);var d=t(c,i,o,l,r.length);if(0==d&&a&&a(c,A,o),n.set(u.subarray(c,c+i*o)),s(c-s(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var s={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp",COLOR:"meshopt_decodeFilterColor"},A={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},c=[],l=0;function u(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var n=e.data;t.pending-=n.count,t.requests[n.id][n.action](n.value),delete t.requests[n.id]},t}function d(e){var t=e.data;if(!t.id)return self.close();self.ready.then(function(e){try{var n=new Uint8Array(t.count*t.size);a(e,e.exports[t.mode],n,t.count,t.size,t.source,e.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:n},[n.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}})}return{ready:o,supported:!0,useWorkers:function(e){!function(e){for(var t="self.ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(i)+"]), {}).then(function(result) { result.instance.exports.__wasm_call_ctors(); return result.instance; });self.onmessage = "+d.name+";"+a.toString()+d.toString(),n=new Blob([t],{type:"text/javascript"}),o=URL.createObjectURL(n),r=c.length;r<e;++r)c[r]=u(o);for(r=e;r<c.length;++r)c[r].object.postMessage({});c.length=e,URL.revokeObjectURL(o)}(e)},decodeVertexBuffer:function(e,t,i,o,r){a(n,n.exports.meshopt_decodeVertexBuffer,e,t,i,o,n.exports[s[r]])},decodeIndexBuffer:function(e,t,i,o){a(n,n.exports.meshopt_decodeIndexBuffer,e,t,i,o)},decodeIndexSequence:function(e,t,i,o){a(n,n.exports.meshopt_decodeIndexSequence,e,t,i,o)},decodeGltfBuffer:function(e,t,i,o,r,c){a(n,n.exports[A[r]],e,t,i,o,n.exports[s[c]])},decodeGltfBufferAsync:function(e,t,i,r,u){return c.length>0?function(e,t,n,i,o){for(var r=c[0],a=1;a<c.length;++a)c[a].pending<r.pending&&(r=c[a]);return new Promise(function(a,s){var A=new Uint8Array(n),c=++l;r.pending+=e,r.requests[c]={resolve:a,reject:s},r.object.postMessage({id:c,count:e,size:t,source:A,mode:i,filter:o},[A.buffer])})}(e,t,i,A[r],s[u]):o.then(function(){var o=new Uint8Array(e*t);return a(n,n.exports[A[r]],o,e,t,i,n.exports[s[u]]),o})}}}()),A=(function(){var e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(t){for(var n=new Uint8Array(33148),i=0;i<33148;++i){var o=t.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<33148;++i)n[r++]=n[i]<60?e[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79Tebbbe:Gez9Geueu9Geub9Gbb9Gsuuuuuuuuuuuu99uueu9Gvuuuuub9Gruuuuuuub9Gouuuuuue999Gvuuuuueu9Gquuuuuuu99uueu9GPuuuuuuuuuuu99uueu9Gquuuuuuuu99ueu9Gruuuuuu99eu9Gwuuuuuu99ueu9Giuuue999Gluuuueu9GiuuueuiXCdilvorlwiDqkxmPbssbelve9Weiiviebeoweuec:G:Pdkr;7eko9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bbz9TW79O9V9Wt9F79P9T9W29P9M95br8E9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9OcttV9P9I91tW7bw8A9TW79O9V9Wt9F79P9T9W29P9M959x9Pt9O9v9W9K9HtWbDQ9TW79O9V9Wt9F79P9T9W29P9M959t29V9W9W95bqX9TW79O9V9Wt9F79P9T9W29P9M959qV919UWbkQ9TW79O9V9Wt9F79P9T9W29P9M959q9V9P9Ut7bxX9TW79O9V9Wt9F79P9T9W29P9M959t9J9H2Wbma9TW79O9V9Wt9F9V9Wt9P9T9P96W9wWVtW94SWt9J9O9sW9T9H9WbPl79IV9RbsDwebcekdOAq:d;OeCdbk:J1eo3ue99euE99Cue9:8Jjjjjbcj;sb9Rgs8Kjjjjbcbhzasc:Cefcbc;Kbz:rjjjb8AdnabaeSmbabaeadcdtz:qjjjb8AkdnamcdGTmbalcrfci4gHcbyd1:jjjbHjjjjbbheasc:Cefasyd;8egOcdtfaeBdbasaOcefBd;8eaecbaHz:rjjjbhAcbhlcbhednadTmbcbhlabheadhHinaAaeydbgOci4fgCaCRbbgCceaOcrGgOtV86bbaCcu7aO4ceGalfhlaeclfheaHcufgHmbkcualcdtalcFFFFi0Ehekaecbyd1:jjjbHjjjjbbhzasc:Cefasyd;8egecdtfazBdbasaecefBd;8ealcd4alfhOcehHinaHgecethHaeaO6mbkcbhXcuaecdtgOaecFFFFi0Ecbyd1:jjjbHjjjjbbhHasc:Cefasyd;8egCcdtfaHBdbasaCcefBd;8eaHcFeaOz:rjjjbhQdnadTmbaecufhLcbhKindndnaQabaXcdtfgYydbgCc:v;t;h;Ev2aLGgOcdtfgAydbgHcuSmbceheinazaHcdtfydbaCSmdaOaefhHaecefheaQaHaLGgOcdtfgAydbgHcu9hmbkkazaKcdtfaCBdbaAaKBdbaKhHaKcefhKkaYaHBdbaXcefgXad9hmbkkaQcbyd:m:jjjbH:bjjjbbasasyd;8ecufBd;8ekcbh8AcualcefgecdtaecFFFFi0Ecbyd1:jjjbHjjjjbbhKasc:Cefasyd;8egecdtfaKBdbasaKBdNeasaecefBd;8ecuadcitadcFFFFe0Ecbyd1:jjjbHjjjjbbhEasc:Cefasyd;8egecdtfaEBdbasaEBd:yeasaecefBd;8eascNefabadalcbz:cjjjbcualcdtgealcFFFFi0Eg3cbyd1:jjjbHjjjjbbhCasc:Cefasyd;8egHcdtfaCBdbasaHcefBd;8ea3cbyd1:jjjbHjjjjbbhYasc:Cefasyd;8egHcdtfaYBdbasaHcefBd;8eaCaYaialavazasc:Cefz:djjjbalcbyd1:jjjbHjjjjbbh5asc:Cefasyd;8egHcdtfa5BdbasaHcefBd;8ea3cbyd1:jjjbHjjjjbbhHasc:Cefasyd;8egOcdtfaHBdbasaOcefBd;8ea3cbyd1:jjjbHjjjjbbhOasc:Cefasyd;8egAcdtfaOBdbasaAcefBd;8eaHcFeaez:rjjjbh8EaOcFeaez:rjjjbh8FdnalTmbaEcwfhaindnaKa8AgOcefg8AcdtfydbgAaKaOcdtgefydbgHSmbaAaH9RhhaEaHcitfhga8Faefh8Ja8Eaefh8KcbhQindndnagaQcitfydbgLaO9hmba8KaOBdba8JaOBdbxekdnaKaLcdtg8LfgeclfydbgHaeydbgeSmbaEaecitgAfydbaOSmeaHae9Rh8Maecu7aHfhXaaaAfhHcbheinaXaeSmeaecefheaHydbhAaHcwfhHaAaO9hmbkaea8M6meka8Fa8LfgeaOaLaeydbcuSEBdba8KaLaOa8KydbcuSEBdbkaQcefgQah9hmbkka8Aal9hmbkaChHaYhOa8FhAa8EhQcbheindndnaeaHydbgL9hmbdnaeaOydbgL9hmbaQydbhLdnaAydbgXcu9hmbaLcu9hmba5aefcb86bbxikdnaXcuSmbaLcuSmbaeaXSmbaCaXcdtfydbaCaLcdtfydb9hmba5aefcd86bbxika5aefh8KdnaeaXSmbaeaLSmba8Kce86bbxika8Kcl86bbxdkdnaeaYaLcdtgXfydb9hmbdnaAydbg8KcuSmbaea8KSmbaQydbghcuSmbaeahSmba8FaXfydbggcuSmbagaLSmba8EaXfydbgXcuSmbaXaLSmbdnaCa8KcdtfydbgLaCaXcdtfydb9hmbaLaCahcdtfydbgXSmbaXaCagcdtfydb9hmba5aefcd86bbxlka5aefcl86bbxika5aefcl86bbxdka5aefcl86bbxeka5aefa5aLfRbb86bbkaHclfhHaOclfhOaAclfhAaQclfhQalaecefge9hmbkdnamcaGTmbaEcwfh8Jcbh8Nindndna5a8NfgyRbbg8Pc9:fPibebekdndndnaCa8Ncdtfydbgea8N9hmbdnaqmbcbhgxdkdnazTmbcbhga8NheinagaqazaecdtgefydbfRbbcdGce4VhgaYaefydbgea8N9hmbxikkcbhga8NheinagaqaefRbbcdGce4VhgaYaecdtfydbgea8N9hmbxdkka5aefRbbhexeka8NheindnaKaecdtgafgeclfydbgHaeydbgeSmbaHae9Rh8AaEaecitfh8MaCaafh8Lcbh8Kina8Ma8KcitfydbgXhednindnaKaecdtgLfgeclfydbgHaeydbgeSmbdnaCaEaecitgOfydbcdtfydba8LydbgQ9hmbcehexikaHae9Rhhaecu7aHfhAa8JaOfhHcbheinaAaeSmeaecefheaHydbhOaHcwfhHaCaOcdtfydbaQ9hmbkaeah6hexdkaYaLfydbgeaX9hmbkcbhekagaece7Vhga8Kcefg8Ka8A9hmbkkaYaafydbgea8N9hmbka8PciagceGEhekayae86bbka8Ncefg8Nal9hmbkkdnaqTmbdndnazTmbazheaChHalhOindnaqaeydbfRbbceGTmba5aHydbfcl86bbkaeclfheaHclfhHaOcufgOmbxdkkaChealhHindnaqRbbceGTmba5aeydbfcl86bbkaqcefhqaeclfheaHcufgHmbkkaChealhOa5hHindna5aeydbfRbbcl9hmbaHcl86bbkaeclfheaHcefhHaOcufgOmbkkamceGTmba5healhHindnaeRbbce9hmbaecl86bbkaecefheaHcufgHmbkkcbhIcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbhaasc:Cefasyd;8egecdtfaaBdbasaecefBd;8easc:qefcbBdbas9cb83i1eaaaialavazasc1efz:ejjjbh8RdndnaDmbcbh8Scbh8Lxekcbh8LawhecbhHindnaeIdbJbbbb9ETmbasa8LcdtfaHBdba8Lcefh8LkaeclfheaDaHcefgH9hmbkcua8Lal2gecdtaecFFFFi0Ecbyd1:jjjbHjjjjbbh8Sasc:Cefasyd;8egecdtfa8SBdbasaecefBd;8ealTmbdna8Lmbcbh8Lxekarcd4hXdnazTmba8Lcdth8KcbhLa8ShKinaoazaLcdtfydbaX2cdtfhQasheaKhHa8LhOinaHaQaeydbcdtgAfIdbawaAfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKa8KfhKaLcefgLal9hmbxdkka8Lcdth8KcbhLa8ShKinaoaLaX2cdtfhQasheaKhHa8LhOinaHaQaeydbcdtgAfIdbawaAfIdbNUdbaeclfheaHclfhHaOcufgOmbkaKa8KfhKaLcefgLal9hmbkkcualc8S2gHalc;D;O;f8U0EgAcbyd1:jjjbHjjjjbbheasc:Cefasyd;8egOcdtfaeBdbasaOcefBd;8eaecbaHz:rjjjbhycbhqcbh8Ndna8LTmbcbhIaAcbyd1:jjjbHjjjjbbh8Nasc:Cefasyd;8egecdtfa8NBdbasaecefBd;8ea8NcbaHz:rjjjb8Acua8Lal2gecltgHaecFFFFb0Ecbyd1:jjjbHjjjjbbhqasc:Cefasyd;8egecdtfaqBdbasaecefBd;8eaqcbaHz:rjjjb8AamcjjjjdGTmbcualcltgealcFFFFb0Ecbyd1:jjjbHjjjjbbhIasc:Cefasyd;8egHcdtfaIBdbasaHcefBd;8eaIcbaez:rjjjb8AkdnadTmbcbhQabhHinaaaHclfydbgLcx2fgeIdbaaaHydbgKcx2fgOIdbgR:tg8UaaaHcwfydbgXcx2fgAIdlaOIdlg8V:tg8WNaAIdbaR:tg8XaeIdla8V:tg8YN:tg8Zh80aeIdwaOIdwg81:tgBa8XNaAIdwa81:tg83a8UN:tgUh8Xa8Ya83Na8WaBN:tg8Yh8Udna8Za8ZNa8Ya8YNaUaUNMM:rgBJbbbb9EgOTmba8ZaB:vh80aUaB:vh8Xa8YaB:vh8UkayaCaKcdtfydbgAc8S2fgea8UaB:rg8Wa8UNNg85aeIdbMUdbaea8Xa8Wa8XNg86Ng87aeIdlMUdlaea80a8Wa80Ng83Ng88aeIdwMUdwaea86a8UNg86aeIdxMUdxaea83a8UNg89aeIdzMUdzaea83a8XNg8:aeIdCMUdCaea8Ua8Wa80a81Na8UaRNa8Va8XNMM:mgZNg83Ng8UaeIdKMUdKaea8Xa83Ng8XaeId3MUd3aea80a83Ng80aeIdaMUdaaea83aZNg83aeId8KMUd8Kaea8WaeIdyMUdyayaCaLcdtfydbgLc8S2fgea85aeIdbMUdbaea87aeIdlMUdlaea88aeIdwMUdwaea86aeIdxMUdxaea89aeIdzMUdzaea8:aeIdCMUdCaea8UaeIdKMUdKaea8XaeId3MUd3aea80aeIdaMUdaaea83aeId8KMUd8Kaea8WaeIdyMUdyayaCaXcdtfydbgKc8S2fgea85aeIdbMUdbaea87aeIdlMUdlaea88aeIdwMUdwaea86aeIdxMUdxaea89aeIdzMUdzaea8:aeIdCMUdCaea8UaeIdKMUdKaea8XaeId3MUd3aea80aeIdaMUdaaea83aeId8KMUd8Kaea8WaeIdyMUdydnaITmbdnaOTmba8ZaB:vh8ZaUaB:vhUa8YaB:vh8YkaIaAcltfgeaBJbbbZNg8UaUNg8WaeIdlMUdlaea8Ua8ZNg8XaeIdwMUdwaea8Ua8YNg80aeIdbMUdbaea8UaR:ma8YNaUa8VN:ta81a8ZN:tNg8UaeIdxMUdxaIaLcltfgea8WaeIdlMUdlaea8XaeIdwMUdwaea80aeIdbMUdbaea8UaeIdxMUdxaIaKcltfgea8WaeIdlMUdlaea8XaeIdwMUdwaea80aeIdbMUdbaea8UaeIdxMUdxkaHcxfhHaQcifgQad6mbkkdnalTmbJ;n;m;m89J:v:;;w8ZamczGEh8YcbhOaChAaahHayheindnaOaAydb9hmbaecxfgQaQIdbJbbbbMUdbaeczfgQaQIdbJbbbbMUdbaecCfgQaQIdbJbbbbMUdbaea8YaecyfgQIdbg8ZNg8UaeIdbMUdbaeclfgLa8UaLIdbMUdbaecwfgLa8UaLIdbMUdbaecKfgLaLIdbaHIdbg8Xa8UN:tUdbaHcwfIdbh8Waec3fgLaLIdba8UaHclfIdbg80N:tUdbaecafgLaLIdba8Ua8WN:tUdbaec8KfgLIdbhUaQa8Za8UMUdbaLaUa8Ua8Wa8WNa8Xa8XNa80a80NMMNMUdbkaAclfhAaHcxfhHaec8SfhealaOcefgO9hmbkkdnadTmbcbhXabhKinabaXcdtfhLcbhHina5aLaHc:G1jjbfydbcdtfydbgOfRbbhedndna5aKaHfydbgAfRbbgQc99fcFeGcpe0mbaec99fcFeGc;:e6mekdnaQcufcFeGce0mba8EaAcdtfydbaO9hmekdnaecufcFeGce0mba8FaOcdtfydbaA9hmekJbbacJbbacJbbbZaecFeGceSEaQcFeGceSEh88aaaOcx2fgeIdwaaaAcx2fgQIdwgB:tg80:mh86aeIdlaQIdlg83:tg8Z:mh89aeIdbaQIdbgR:tgU:mh8:dnaaaLaHc:K1jjbfydbcdtfydbcx2fgeIdwaB:tg8Va80a80NaUaUNa8Za8ZNMMg8YNa8Va80NaeIdbaR:tg81aUNa8ZaeIdla83:tg85NMMg8Wa80N:tg8Xa8XNa81a8YNa8WaUN:tg8Ua8UNa85a8YNa8Wa8ZN:tg8Wa8WNMM:rg87Jbbbb9ETmba8Xa87:vh8Xa8Wa87:vh8Wa8Ua87:vh8Uka88a8Y:rNg8Ya8XaBNa8UaRNa83a8WNMM:mgZNg87aZNhZa8Xa87Nhna8Wa87Nhca8Ua87Nh9ca8Ya8XNg87a8WNhJa87a8UNh9ea8Ya8WNgTa8UNhSa8Xa87Nh87a8WaTNhTa8Ua8Ya8UNNh9hdnaUa85Na81a89NMg8Xa8XNa8Za8VNa85a86NMg8Ua8UNa80a81Na8Va8:NMg8Wa8WNMM:rg80Jbbbb9ETmba8Xa80:vh8Xa8Wa80:vh8Wa8Ua80:vh8UkayaCaAcdtfydbc8S2fgeaeIdba9ha8Ua88a80:rNg80a8UNNMgUMUdbaeaTa8Wa80a8WNg8VNMg81aeIdlMUdlaea87a8Xa80a8XNg8ZNMg85aeIdwMUdwaeaSa8Va8UNMg8VaeIdxMUdxaea9ea8Za8UNMg87aeIdzMUdzaeaJa8Za8WNMg8ZaeIdCMUdCaea9ca8Ua80a8XaBNa8UaRNa83a8WNMMgB:mNg80NMg8UaeIdKMUdKaeaca8Wa80NMg8WaeId3MUd3aeana8Xa80NMg8XaeIdaMUdaaeaZaBa80N:tg80aeId8KMUd8Kaea8YJbbbbMg8YaeIdyMUdyayaCaOcdtfydbc8S2fgeaUaeIdbMUdbaea81aeIdlMUdlaea85aeIdwMUdwaea8VaeIdxMUdxaea87aeIdzMUdzaea8ZaeIdCMUdCaea8UaeIdKMUdKaea8WaeId3MUd3aea8XaeIdaMUdaaea80aeId8KMUd8Kaea8YaeIdyMUdykaHclfgHcx9hmbkaKcxfhKaXcifgXad6mbka8LTmbcbhKinJbbbbh8YaaabaKcdtfgeclfydbgXcx2fgHIdwaaaeydbg8Kcx2fgOIdwg81:tg8Wa8WNaHIdbaOIdbg85:tg8Xa8XNaHIdlaOIdlg87:tg80a80NMMgRaaaecwfydbghcx2fgeIdwa81:tg8ZNa8Wa8Wa8ZNa8XaeIdba85:tgUNa80aeIdla87:tgBNMMg8UN:tJbbbbJbbjZaRa8Za8ZNaUaUNaBaBNMMg8VNa8Ua8UN:tg83:va83Jbbbb9BEg83Nh89a8Va8WNa8Za8UN:ta83Nh8:aRaBNa80a8UN:ta83NhZa8Va80NaBa8UN:ta83NhnaRaUNa8Xa8UN:ta83Nhca8Va8XNaUa8UN:ta83Nh9ca8XaBNaUa80N:tg8Ua8UNa80a8ZNaBa8WN:tg8Ua8UNa8WaUNa8Za8XN:tg8Ua8UNMM:rJbbbZNh8Ua8Sa8Ka8L2ggcdtfhHa8Saha8L2gEcdtfhOa8SaXa8L2g8JcdtfhAa81:mhJa87:mh9ea85:mhTcbhQa8LhLJbbbbhBJbbbbh83JbbbbhRJbbbbh8VJbbbbh81Jbbbbh85Jbbbbh87Jbbbbh88Jbbbbh86inascjdfaQfgecwfa8Ua8:aAIdbaHIdbg8Z:tg80Na89aOIdba8Z:tgUNMg8WNUdbaeclfa8Uana80NaZaUNMg8XNUdbaea8Ua9ca80NacaUNMg80NUdbaecxfa8UaJa8WNa9ea8XNa8ZaTa80NMMMg8ZNUdba8Ua8Wa8XNNa8VMh8Va8Ua8Wa80NNa81Mh81a8Ua8Xa80NNa85Mh85a8Ua8Za8ZNNa8YMh8Ya8Ua8Wa8ZNNaBMhBa8Ua8Xa8ZNNa83Mh83a8Ua80a8ZNNaRMhRa8Ua8Wa8WNNa87Mh87a8Ua8Xa8XNNa88Mh88a8Ua80a80NNa86Mh86aHclfhHaAclfhAaOclfhOaQczfhQaLcufgLmbka8Na8Kc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdya8NaXc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdya8Nahc8S2fgea86aeIdbMUdbaea88aeIdlMUdlaea87aeIdwMUdwaea85aeIdxMUdxaea81aeIdzMUdzaea8VaeIdCMUdCaeaRaeIdKMUdKaea83aeId3MUd3aeaBaeIdaMUdaaea8YaeId8KMUd8Kaea8UaeIdyMUdyaqagcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaqa8JcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaqaEcltfhLcbhHa8LhAinaLaHfgeascjdfaHfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkaKcifgKad6mbkkcbhOdndnamcwGg9imbJbbbbh85cbh6cbh9kcbh0xekcbh6a3cbyd1:jjjbHjjjjbbh0asc:Cefasyd;8egecdtfa0BdbasaecefBd;8ecua0alabadaCz:fjjjbgAcltaAcjjjjiGEcbyd1:jjjbHjjjjbbh9kasc:Cefasyd;8egecdtfa9kBdbasaecefBd;8ea9kaAa0aaalz:gjjjbJFFuuh85aATmba9kheaAhHinaeIdbg8Ua85a85a8U9EEh85aeclfheaHcufgHmbkaAh6kasydNeh9mdnalTmba9mclfhea9mydbhAa5hHalhQcbhOincbaeydbgLaA9RaHRbbcpeGEaOfhOaHcefhHaeclfheaLhAaQcufgQmbkaOce4hOkcuadaO9Rcifg9ncx2a9nc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbh8Pasc:Cefasyd;8egecdtfa8PBdbasaecefBd;8ecua9ncdta9ncFFFFi0Ecbyd1:jjjbHjjjjbbh9oasc:Cefasyd;8egecdtfa9oBdbasaecefBd;8ea3cbyd1:jjjbHjjjjbbhDasc:Cefasyd;8egecdtfaDBdbasaecefBd;8ealcbyd1:jjjbHjjjjbbh9pasc:Cefasyd;8egecdtfa9pBdbasaecefBd;8eaxaxNa8RJbbjZamclGEgnanN:vh88Jbbbbh86dnadak9nmbdna9nci6mbasyd:yeh9qa8Lclth9ra8Pcwfh9sJbbbbh87Jbbbbh86inascNefabadalaCz:cjjjbabh8Kcbh8Mcbh3inaba3cdtfhgcbheindnaCa8KaefydbgOcdtgXfydbgAaCagaec:W1jjbfydbcdtfydbgHcdtghfydbgQSmba5aHfRbbgKcv2a5aOfRbbgLfc;a1jjbfRbbg8JaLcv2aKfgEc;a1jjbfRbbg8AVcFeGTmbdnaQaA9nmbaEc;G1jjbfRbbcFeGmekdnaLcufcFeGce0mbaKTmba8EaXfydbaH9hmekdnaLTmbaKcufcFeGce0mba8FahfydbaO9hmeka8Pa8Mcx2fgAaHaOa8AcFeGgQEBdlaAaOaHaQEBdbaAaQa8JGcb9hBdwa8Mcefh8Mkaeclfgecx9hmbkdna3cifg3ad9pmba8Kcxfh8Ka8Mcifa9n9nmekka8MTmdcbhhinayaCa8Pahcx2fgKydbgQcdtgAfydbc8S2fgeIdwaaaKydlgLcx2fgHIdwg8XNaeIdzaHIdbg80NaeIdaMg8Ua8UMMa8XNaeIdlaHIdlg8ZNaeIdCa8XNaeId3Mg8Ua8UMMa8ZNaeIdba80NaeIdxa8ZNaeIdKMg8Ua8UMMa80NaeId8KMMM:lh8UJbbbbJbbjZaeIdyg8W:va8WJbbbb9BEh8WdndnaKydwg8KmbJFFuuh81xekJbbbbJbbjZayaCaLcdtfydbc8S2fgeIdygU:vaUJbbbb9BEaeIdwaaaQcx2fgHIdwgUNaeIdzaHIdbg8YNaeIdaMgBaBMMaUNaeIdlaHIdlgBNaeIdCaUNaeId3MgUaUMMaBNaeIdba8YNaeIdxaBNaeIdKMgUaUMMa8YNaeId8KMMM:lNh81ka8Wa8UNh8Vdna8LTmba8NaQc8S2fgHIdwa8XNaHIdza80NaHIdaMg8Ua8UMMa8XNaHIdla8ZNaHIdCa8XNaHId3Mg8Ua8UMMa8ZNaHIdba80NaHIdxa8ZNaHIdKMg8Ua8UMMa80NaHId8KMMMh8UaqaQa8L2ggcltfheaHIdyhUa8SaLa8L2gEcdtfgXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbkdndna8KmbJbbbbh8Wxeka8NaLc8S2fgOIdwaaaQcx2fgeIdwg8YNaOIdzaeIdbgBNaOIdaMg8Wa8WMMa8YNaOIdlaeIdlg83NaOIdCa8YNaOId3Mg8Wa8WMMa83NaOIdbaBNaOIdxa83NaOIdKMg8Wa8WMMaBNaOId8KMMMh8Wa8SagcdtfhHaqaEcltfheaOIdyhRa8LhOinaHIdbgUaUaRNaecxfIdba8YaecwfIdbNaBaeIdbNa83aeclfIdbNMMMgUaUM:tNa8WMh8WaHclfhHaeczfheaOcufgOmbka8W:lh8Wka8Va8U:lMh8Va81a8WMh81dndndna5aQfRbbc9:fPdbedkdna8Fa8Ea8EaAfydbaLSEaYaAfydbgXcdtfydbgAcu9hmbaYaLcdtfydbhAka8NaXc8S2fgOIdwaaaAcx2fgeIdwg8XNaOIdzaeIdbg80NaOIdaMg8Ua8UMMa8XNaOIdlaeIdlg8ZNaOIdCa8XNaOId3Mg8Ua8UMMa8ZNaOIdba80NaOIdxa8ZNaOIdKMg8Ua8UMMa80NaOId8KMMMh8Ua8SaAa8L2ggcdtfhHaqaXa8L2gEcltfheaOIdyhUa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbkdndna8KmbJbbbbh8Wxeka8NaAc8S2fgOIdwaaaXcx2fgeIdwg80NaOIdzaeIdbg8ZNaOIdaMg8Wa8WMMa80NaOIdlaeIdlgUNaOIdCa80NaOId3Mg8Wa8WMMaUNaOIdba8ZNaOIdxaUNaOIdKMg8Wa8WMMa8ZNaOId8KMMMh8Wa8SaEcdtfhHaqagcltfheaOIdyh8Ya8LhOinaHIdbg8Xa8Xa8YNaecxfIdba80aecwfIdbNa8ZaeIdbNaUaeclfIdbNMMMg8Xa8XM:tNa8WMh8WaHclfhHaeczfheaOcufgOmbka8W:lh8Wka8Va8U:lMh8Va81a8WMh81xdkaYaAfydbgAaQSmbina8NaAc8S2fgHIdwa8XNaHIdza80NaHIdaMg8Ua8UMMa8XNaHIdla8ZNaHIdCa8XNaHId3Mg8Ua8UMMa8ZNaHIdba80NaHIdxa8ZNaHIdKMg8Ua8UMMa80NaHId8KMMMh8UaqaAa8L2cltfheaHIdyhUaXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba8XaecwfIdbNa80aeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbka8Va8U:lMh8VaYaAcdtfydbgAaQ9hmbkka5aLfRbbci9hmba8KTmbaYaLcdtfydbgAaLSmba8SagcdtfhXaaaQcx2fgeIdbh8XaeIdwh80aeIdlh8Zina8NaAc8S2fgHIdwa80NaHIdza8XNaHIdaMg8Ua8UMMa80NaHIdla8ZNaHIdCa80NaHId3Mg8Ua8UMMa8ZNaHIdba8XNaHIdxa8ZNaHIdKMg8Ua8UMMa8XNaHId8KMMMh8UaqaAa8L2cltfheaHIdyhUaXhHa8LhOinaHIdbg8Wa8WaUNaecxfIdba80aecwfIdbNa8XaeIdbNa8ZaeclfIdbNMMMg8Wa8WM:tNa8UMh8UaHclfhHaeczfheaOcufgOmbka81a8U:lMh81aYaAcdtfydbgAaL9hmbkkaKa81a8Va81a8V9DgeEUdwaKaQaLaea8Kcb9hGgeEBdlaKaLaQaeEBdbahcefgha8M9hmbkascjdfcbcj;qbz:rjjjb8Aa9shea8MhHinascjdfaeydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbcefBdbaecxfheaHcufgHmbkcbhecbhHinascjdfaefgOydbhAaOaHBdbaAaHfhHaeclfgecj;qb9hmbkcbhea9shHinascjdfaHydbcA4cF8FGgOcFAaOcFA6EcdtfgOaOydbgOcefBdba9oaOcdtfaeBdbaHcxfhHa8Maecefge9hmbkadak9RgOci9Uh9tdnalTmbcbheaDhHinaHaeBdbaHclfhHalaecefge9hmbkkcbh9ua9pcbalz:rjjjbh3aOcO9Uh9va9tce4h9wcbh8Acbh8Jdnina8Pa9oa8Jcdtfydbcx2fgEIdwg8Ua889Emea8Aa9t9pmeJFFuuh8Wdna9wa8M9pmba8Pa9oa9wcdtfydbcx2fIdwJbb;aZNh8Wkdna8Ua8W9ETmba8Ua869ETmba8Aa9v0mdkdna3aCaEydlghcdtg9xfydbgAfg9yRbba3aCaEydbg8Kcdtg9zfydbgefg9ARbbVmba5a8KfRbbh9Bdna9maecdtfgHclfydbgOaHydbgHSmbaOaH9RhQaaaAcx2fhKaaaecx2fhXa9qaHcitfhecbhHcehgdnindnaDaeydbcdtfydbgOaASmbaDaeclfydbcdtfydbgLaASmbaOaLSmbaaaLcx2fgLIdbaaaOcx2fgOIdbg8X:tg8UaXIdlaOIdlg80:tg8YNaXIdba8X:tgBaLIdla80:tg8WN:tg8Za8UaKIdla80:tg83NaKIdba8X:tgRa8WN:tg80Na8WaXIdwaOIdwgU:tg8VNa8YaLIdwaU:tg8XN:tg8Ya8WaKIdwaU:tg81Na83a8XN:tg8WNa8XaBNa8Va8UN:tgUa8XaRNa81a8UN:tg8UNMMa8Za8ZNa8Ya8YNaUaUNMMa80a80Na8Wa8WNa8Ua8UNMMN:rJbbj8:N9FmdkaecwfheaHcefgHaQ6hgaQaH9hmbkkagceGTmba9wcefh9wxekdndndndna9Bc9:fPdebdka8KheinaDaecdtgefahBdbaYaefydbgea8K9hmbxikkdna8Fa8Ea8Ea9zfydbahSEaYa9zfydbg8Kcdtfydbgecu9hmbaYa9xfydbhekaDa9zfahBdbaehhkaDa8KcdtfahBdbka9Ace86bba9yce86bbaEIdwg8Ua86a86a8U9DEh86a9ucefh9ucecda9BceSEa8Afh8Aka8Jcefg8Ja8M9hmbkka9uTmddnalTmbcbhLcbhXindnaDaXcdtgefydbgOaXSmbaCaOcdtfydbh8KdnaXaCaefydb9hghmbaya8Kc8S2fgeayaXc8S2fgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdyaITmbaIa8KcltfgeaIaXcltfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxka8LTmba8NaOc8S2fgea8NaXc8S2ggfgHIdbaeIdbMUdbaeaHIdlaeIdlMUdlaeaHIdwaeIdwMUdwaeaHIdxaeIdxMUdxaeaHIdzaeIdzMUdzaeaHIdCaeIdCMUdCaeaHIdKaeIdKMUdKaeaHId3aeId3MUd3aeaHIdaaeIdaMUdaaeaHId8KaeId8KMUd8KaeaHIdyaeIdyMUdya9raO2hKaqhHa8LhAinaHaKfgeaHaLfgOIdbaeIdbMUdbaeclfgQaOclfIdbaQIdbMUdbaecwfgQaOcwfIdbaQIdbMUdbaecxfgeaOcxfIdbaeIdbMUdbaHczfhHaAcufgAmbkahmbJbbbbJbbjZayagfgeIdyg8U:va8UJbbbb9BEaeIdwaaa8Kcx2fgHIdwg8UNaeIdzaHIdbg8WNaeIdaMg8Xa8XMMa8UNaeIdlaHIdlg8XNaeIdCa8UNaeId3Mg8Ua8UMMa8XNaeIdba8WNaeIdxa8XNaeIdKMg8Ua8UMMa8WNaeId8KMMM:lNg8Ua87a87a8U9DEh87kaLa9rfhLaXcefgXal9hmbkcbhHa8EheindnaeydbgOcuSmbdnaHaDaOcdtgAfydbgO9hmbcuhOa8EaAfydbgAcuSmbaDaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkcbhHa8FheindnaeydbgOcuSmbdnaHaDaOcdtgAfydbgO9hmbcuhOa8FaAfydbgAcuSmbaDaAcdtfydbhOkaeaOBdbkaeclfhealaHcefgH9hmbkka87a86a8LEh87cbhHabhecbhOindnaCaDaeydbcdtfydbgLcdtfydbgAaCaDaeclfydbcdtfydbgKcdtfydbgQSmbaAaCaDaecwfydbcdtfydbg8KcdtfydbgXSmbaQaXSmbabaHcdtfgAaLBdbaAcwfa8KBdbaAclfaKBdbaHcifhHkaecxfheaOcifgOad6mbkdndna9imbaHhdxekdnaHak0mbaHhdxekdna85a879FmbaHhdxekJFFuuh85cbhdabhecbhOindna9ka0aeydbgAcdtfydbcdtfIdbg8Ua879ETmbaeclf8Pdbh9CabadcdtfgQaABdbaQclfa9C83dba8Ua85a85a8U9EEh85adcifhdkaecxfheaOcifgOaH6mbkkadak0mbxdkkascNefabadalaCz:cjjjbkdndnadak0mbadhOxekdna9imbadhOxekdna85a889FmbadhOxekcehLina85Jbb;aZNg8Ua88a8Ua889DEh8XJbbbbh8Udna6Tmba9khea6hHinaeIdbg8Wa8Ua8Wa8X9FEa8Ua8Wa8U9EEh8UaeclfheaHcufgHmbkkJFFuuh85cbhOabhecbhHindna9ka0aeydbgAcdtfydbcdtfIdbg8Wa8X9ETmbaeclf8Pdbh9CabaOcdtfgQaABdbaQclfa9C83dba8Wa85a85a8W9EEh85aOcifhOkaecxfheaHcifgHad6mbkdnaLaOad9hVceGmbadhOxdka8Ua86a86a8U9DEh86aOak9nmecbhLaOhda85a889FmbkkdnamcjjjjdGTmba9pcbalz:rjjjbhLdnaOTmbabheaOhHinaLaeydbgAfa5aAfRbbcl9h86bbaeclfheaHcufgHmbkkascNefabaOalaCz:cjjjbalTmbcbhQasyd:yehgindnaLaQfRbbTmbdna5aQfRbbgecl0mbceaetcQGmekdnaCaQcdtgKfydbgeaQSmbaaaQcx2fgHaaaecx2fge8Pdb83dbaHcwfaecwfydbBdbxekayaQc8S2fgeIdyg8Ua8UJL:3;rUNg8UMh88aeIdwa8UMhRaeIdla8UMh8VaeIdba8UMhUaeIdaa8UaaaQcx2fg8KIdwg89N:th81aeId3a8Ua8KIdlg8:N:th85aeIdKa8KIdbgZa8UN:th8YJbbbbhcaeIdCJbbbbMh87aeIdzJbbbbMhBaeIdxJbbbbMh83dndna8LTmbaQhAinJbbbba88a8NaAc8S2fgHIdyg8U:va8UJbbbb9BEh8UaqaAa8L2cltfheaHIdaa88Na81Mh81aHId3a88Na85Mh85aHIdKa88Na8YMh8YaHIdCa88Na87Mh87aHIdza88NaBMhBaHIdxa88Na83Mh83aHIdwa88NaRMhRaHIdla88Na8VMh8VaHIdba88NaUMhUa8LhHina81aecxfIdbg8ZaecwfIdbg8WNa8UN:th81a85a8ZaeclfIdbg8XNa8UN:th85a87a8Wa8XNa8UN:th87aUaeIdbg80a80Na8UN:thUa8Ya8Za80Na8UN:th8YaBa8Wa80Na8UN:thBa83a8Xa80Na8UN:th83aRa8Wa8WNa8UN:thRa8Va8Xa8XNa8UN:th8VaeczfheaHcufgHmbkaYaAcdtfydbgAaQ9hmbkaITmbaIaQcltfgeIdxhTaeIdwh9caeIdlhJaeIdbh8UxekJbbbbhTJbbbbh9cJbbbbhJJbbbbh8UkaBaU:vg8Xa8YNa81:ta87aBa83aU:vg8WN:tg81a8Va83a8WN:tg8Z:vg80a8Wa8YNa85:tg8VN:th85a9ca8Ua8XN:taJa8Ua8WN:tg83a80N:tg87aRaBa8XN:ta81a80N:tgB:vgR:mh81a83a8Z:vg9c:mhJdnJbbbba8Ua8UaU:vg9eN:ta83a9cN:ta87aRN:tg83:la88J:983:g81Ng8U9ETmba81a85NaJa8VNa9ea8YNaT:tMMa83:vhckaU:la8U9ETmba8Z:la8U9ETmbaB:la8U9ETmba9e:macNa8X:ma81acNa85aB:vMg85Na8W:maJacNa80:ma85Na8Va8Z:vMMg87Na8Y:maU:vMMMh88a9maKfgeclfydbgHaeydbge9RhXagaecitfhKJbbbbh8UdnaHaeSghmbJbbbbh8UaKheaXhAinaaaeclfydbcx2fgHIdwa89:tg8Wa8WNaHIdbaZ:tg8Wa8WNaHIdla8::tg8Wa8WNMMg8Waaaeydbcx2fgHIdwa89:tg8Xa8XNaHIdbaZ:tg8Xa8XNaHIdla8::tg8Xa8XNMMg8Xa8Ua8Ua8X9DEg8Ua8Ua8W9DEh8UaecwfheaAcufgAmbkka85a89:tg8Wa8WNa88aZ:tg8Wa8WNa87a8::tg8Wa8WNMMa8U:rg8Ua8UN9EmbdnahmbcbhAcehhdninaaaKclfydbcx2fgeIdbaaaKydbcx2fgHIdbg8X:tg8Ua8:aHIdlg80:tg8YNaZa8X:tgBaeIdla80:tg8WN:tg8Za8Ua87a80:tg83Na88a8X:tgRa8WN:tg80Na8Wa89aHIdwgU:tg8VNa8YaeIdwaU:tg8XN:tg8Ya8Wa85aU:tg81Na83a8XN:tg8WNa8XaBNa8Va8UN:tgUa8XaRNa81a8UN:tg8UNMMa8Za8ZNa8Ya8YNaUaUNMMa80a80Na8Wa8WNa8Ua8UNMMN:rJbbj8:N9FmeaKcwfhKaAcefgAaX6hhaXaA9hmbkkahceGmeka8Ka85Udwa8Ka87Udla8Ka88UdbkaQcefgQal9hmbkdndna8LTmba8LclthYa8Lcdth8KcbhKa8ShXindnaLaKfRbbTmba5aKfRbbclSmbJbbbbJbbjZa8NaKc8S2fIdyg8U:va8UJbbbb9BEh8UaaaCaKcdtfydbcx2fhHaqheaXhAa8LhQinaAa8UaecwfIdbaHIdwNaeIdbaHIdbNaeclfIdbaHIdlNMMaecxfIdbMNUdbaeczfheaAclfhAaQcufgQmbkkaqaYfhqaXa8KfhXaKcefgKal9hmbkarcd4hXavcd4hYasId:qeh8UasId:meh8WasId1eh8XazTmea8Lcdth8KcbhKindnaLaKfRbbTmbaiazaKcdtfydbgCaY2cdtfgeaaaKcx2fgHIdba8RNa8XMUdbaeaHIdla8RNa8WMUdlaeaHIdwa8RNa8UMUdwaoaCaX2cdtfhQashea8ShHa8LhCinaQaeydbcdtgAfaHIdbawaAfIdb:vUdbaeclfheaHclfhHaCcufgCmbkka8Sa8Kfh8SaKcefgKal9hmbxikkavcd4hCasId:qeh8UasId:meh8WasId1eh8XdnazTmbazheindna9pRbbTmbaiaeydbaC2cdtfgHaaIdba8RNa8XMUdbaHaaclfIdba8RNa8WMUdlaHaacwfIdba8RNa8UMUdwka9pcefh9paeclfheaacxfhaalcufglmbxikkaCcdtheindna9pRbbTmbaiaaIdba8RNa8XMUdbaiclfaaclfIdba8RNa8WMUdbaicwfaacwfIdba8RNa8UMUdbka9pcefh9paacxfhaaiaefhialcufglmbxdkka8Lcdth8KcbhKindnaLaKfRbbTmbaiaKaY2cdtfgeaaaKcx2fgHIdba8RNa8XMUdbaeaHIdla8RNa8WMUdlaeaHIdwa8RNa8UMUdwaoaKaX2cdtfhQashea8ShHa8LhCinaQaeydbcdtgAfaHIdbawaAfIdb:vUdbaeclfheaHclfhHaCcufgCmbkka8Sa8Kfh8SaKcefgKal9hmbkkdnamcjjjjlGTmbazmbaOTmbcbhLabheina5aeydbgAfRbbc3thKaecwfgXydbhHdndna8EaAcdtg8KfydbaeclfgYydbgCSmbcbhQa8FaCcdtfydbaA9hmekcjjjj94hQkaeaKaQVaAVBdba5aCfRbbc3thKdndna8EaCcdtfydbaHSmbcbhQa8FaHcdtfydbaC9hmekcjjjj94hQkaYaKaQVaCVBdba5aHfRbbc3thQdndna8EaHcdtfydbaASmbcbhCa8Fa8KfydbaH9hmekcjjjj94hCkaXaQaCVaHVBdbaecxfheaLcifgLaO6mbkkdnazTmbaOTmbaOheinabazabydbcdtfydbBdbabclfhbaecufgembkkdnaPTmbaPana86:rNUdbkasyd;8egecdtasc:Ceffc98fhHdninaeTmeaHydbcbyd:m:jjjbH:bjjjbbaHc98fhHaecufhexbkkascj;sbf8KjjjjbaOk;Yieouabydlhvabydbclfcbaicdtz:rjjjbhoadci9UhrdnadTmbdnalTmbaehwadhDinaoalawydbcdtfydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbxdkkaehwadhDinaoawydbcdtfgqaqydbcefBdbawclfhwaDcufgDmbkkdnaiTmbcbhDaohwinawydbhqawaDBdbawclfhwaqaDfhDaicufgimbkkdnadci6mbinaecwfydbhwaeclfydbhDaeydbhidnalTmbalawcdtfydbhwalaDcdtfydbhDalaicdtfydbhikavaoaicdtfgqydbcitfaDBdbavaqydbcitfawBdlaqaqydbcefBdbavaoaDcdtfgqydbcitfawBdbavaqydbcitfaiBdlaqaqydbcefBdbavaoawcdtfgwydbcitfaiBdbavawydbcitfaDBdlawawydbcefBdbaecxfhearcufgrmbkkabydbcbBdbk:todDue99aicd4aifhrcehwinawgDcethwaDar6mbkcuaDcdtgraDcFFFFi0Ecbyd1:jjjbHjjjjbbhwaoaoyd9GgqcefBd9GaoaqcdtfawBdbawcFearz:rjjjbhkdnaiTmbalcd4hlaDcufhxcbhminamhDdnavTmbavamcdtfydbhDkcbadaDal2cdtfgDydlgwawcjjjj94SEgwcH4aw7c:F:b:DD2cbaDydbgwawcjjjj94SEgwcH4aw7c;D;O:B8J27cbaDydwgDaDcjjjj94SEgDcH4aD7c:3F;N8N27axGhwamcdthPdndndnavTmbakawcdtfgrydbgDcuSmeadavaPfydbal2cdtfgsIdbhzcehqinaqhrdnadavaDcdtfydbal2cdtfgqIdbaz9CmbaqIdlasIdl9CmbaqIdwasIdw9BmlkarcefhqakawarfaxGgwcdtfgrydbgDcu9hmbxdkkakawcdtfgrydbgDcuSmbadamal2cdtfgsIdbhzcehqinaqhrdnadaDal2cdtfgqIdbaz9CmbaqIdlasIdl9CmbaqIdwasIdw9BmikarcefhqakawarfaxGgwcdtfgrydbgDcu9hmbkkaramBdbamhDkabaPfaDBdbamcefgmai9hmbkkakcbyd:m:jjjbH:bjjjbbaoaoyd9GcufBd9GdnaeTmbaiTmbcbhDaehwinawaDBdbawclfhwaiaDcefgD9hmbkcbhDaehwindnaDabydbgrSmbawaearcdtfgrydbBdbaraDBdbkawclfhwabclfhbaiaDcefgD9hmbkkk:hrdvuv998Jjjjjbca9Rgoczfcwfcbyd11jjbBdbaocb8Pdj1jjb83izaocwfcbydN1jjbBdbaocb8Pd:m1jjb83ibdnadTmbaicd4hrdnabmbdnalTmbcbhwinaealawcdtfydbar2cdtfhDcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkawcefgwad9hmbxikkarcdthwcbhDincbhiinaoczfaifgqaeaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkaeawfheaDcefgDad9hmbxdkkdnalTmbcbhwinabawcx2fgiaealawcdtfydbar2cdtfgDIdbUdbaiaDIdlUdlaiaDIdwUdwcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkawcefgwad9hmbxdkkarcdthlcbhwaehDinabawcx2fgiaeawar2cdtfgqIdbUdbaiaqIdlUdlaiaqIdwUdwcbhiinaoczfaifgqaDaifIdbgkaqIdbgxaxak9EEUdbaoaifgqakaqIdbgxaxak9DEUdbaiclfgicx9hmbkaDalfhDawcefgwad9hmbkkJbbbbaoIdbaoIdzgx:tgkakJbbbb9DEgkaoIdlaoIdCgm:tgPaPak9DEgkaoIdwaoIdKgP:tgsasak9DEhsdnabTmbadTmbJbbbbJbbjZas:vasJbbbb9BEhkinabakabIdbax:tNUdbabclfgoakaoIdbam:tNUdbabcwfgoakaoIdbaP:tNUdbabcxfhbadcufgdmbkkdnavTmbavaPUdwavamUdlavaxUdbkask:ZlewudnaeTmbcbhvabhoinaoavBdbaoclfhoaeavcefgv9hmbkkdnaiTmbcbhrinadarcdtfhwcbhDinalawaDcdtgvc:G1jjbfydbcdtfydbcdtfydbhodnabalawavfydbcdtfydbgqcdtfgkydbgvaqSmbinakabavgqcdtfgxydbgvBdbaxhkaqav9hmbkkdnabaocdtfgkydbgvaoSmbinakabavgocdtfgxydbgvBdbaxhkaoav9hmbkkdnaqaoSmbabaqaoaqao0Ecdtfaqaoaqao6EBdbkaDcefgDci9hmbkarcifgrai6mbkkdnaembcbskcbhxindnalaxcdtgvfydbax9hmbaxhodnabavfgDydbgvaxSmbaDhqinaqabavgocdtfgkydbgvBdbakhqaoav9hmbkkaDaoBdbkaxcefgxae9hmbkcbhvabhocbhkindndnavalydbgq9hmbdnavaoydbgq9hmbaoakBdbakcefhkxdkaoabaqcdtfydbBdbxekaoabaqcdtfydbBdbkaoclfhoalclfhlaeavcefgv9hmbkakk;Jiilud99duabcbaecltz:rjjjbhvdnalTmbadhoaihralhwinarcwfIdbhDarclfIdbhqavaoydbcltfgkarIdbakIdbMUdbakclfgxaqaxIdbMUdbakcwfgxaDaxIdbMUdbakcxfgkakIdbJbbjZMUdbaoclfhoarcxfhrawcufgwmbkkdnaeTmbavhraehkinarcxfgoIdbhDaocbBdbararIdbJbbbbJbbjZaD:vaDJbbbb9BEgDNUdbarclfgoaDaoIdbNUdbarcwfgoaDaoIdbNUdbarczfhrakcufgkmbkkdnalTmbinavadydbcltfgrcxfgkaicwfIdbarcwfIdb:tgDaDNaiIdbarIdb:tgDaDNaiclfIdbarclfIdb:tgDaDNMMgDakIdbgqaqaD9DEUdbadclfhdaicxfhialcufglmbkkdnaeTmbavcxfhrinabarIdbUdbarczfhrabclfhbaecufgembkkk8MbabaeadaialavcbcbcbcbcbaoarawaDz:bjjjbk8MbabaeadaialavaoarawaDaqakaxamaPz:bjjjbkRbababaeadaialavaoarawaDaqakaxcjjjjdVamz:bjjjbk:p8Koque99due99iuq998Jjjjjbc;Wb9Rgq8Kjjjjbcbhkaqcxfcbc;Kbz:rjjjb8Aaqcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbgxBdxaqceBd2axaialavcbcbz:ejjjb8AaqcualcdtalcFFFFi0Egmcbyd1:jjjbHjjjjbbgiBdzaqcdBd2dndnJFF959eJbbjZawJbbjZawJbbjZ9DE:vawJ9VO:d869DEgw:lJbbb9p9DTmbaw:OhPxekcjjjj94hPkadci9Uhsarco9UhzdndnaombaPcd9imekdnalTmbaPcuf:YhwdnaoTmbcbhvaihHaxhOindndnaoavfRbbceGTmbavcjjjjlVhAxekdndnaOclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcqthAdndnaOcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaAaXVhAdndnaOIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaAaXcCtVhAkaHaABdbaHclfhHaOcxfhOalavcefgv9hmbxdkkaxhvaihOalhHindndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcCthAdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaXcqtaAVhAdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhXxekcjjjj94hXkaOaAaXVBdbavcxfhvaOclfhOaHcufgHmbkkadTmbcbhkaehvcbhOinakaiavclfydbcdtfydbgHaiavcwfydbcdtfydbgA9haiavydbcdtfydbgXaH9haXaA9hGGfhkavcxfhvaOcifgOad6mbkkarci9UhQdndnaz:Z:rJbbbZMgw:lJbbb9p9DTmbaw:Ohvxekcjjjj94hvkaQ:ZhLcbhKc:bwhHdndninashYaHhXaPhrakg8AaQ9pmeaXar9Rcd9imeavaXcufavaX9iEarcefavar9kEhzdnalTmbazcuf:YhwdnaoTmbcbhOaihPaxhvindndnaoaOfRbbceGTmbaOcjjjjlVhHxekdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhHxekcjjjj94hHkaHcqthHdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaHasVhHdndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaHascCtVhHkaPaHBdbaPclfhPavcxfhvalaOcefgO9hmbxdkkaxhvaihOalhPindndnavIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhHxekcjjjj94hHkaHcCthHdndnavclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascqtaHVhHdndnavcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskaOaHasVBdbavcxfhvaOclfhOaPcufgPmbkkcbhOdnadTmbaehvcbhPinaOaiavclfydbcdtfydbgHaiavcwfydbcdtfydbgs9haiavydbcdtfydbgAaH9haAas9hGGfhOavcxfhvaPcifgPad6mbkkaYhsaOhkaXhHazhPdnaOaQ9nmbaOhsa8AhkazhHarhPkdndnaKcl0mbdnaY:Zgwa8A:ZgC:taz:YgEar:Y:tg3aEaX:Y:tg5aO:Zg8EaL:tNNNawaL:ta5NaCa8E:tNaCaL:ta3Na8Eaw:tNM:vaEMJbbbZMgw:lJbbb9p9DTmbaw:Ohvxdkcjjjj94hvxekaPaHfcd9ThvkaKcefgKcs9hmbxdkka8AhkarhPkdndndnakmbJbbjZhwcbhicdhvaDmexdkalcd4alfhHcehOinaOgvcethOavaH6mbkcbhOaqcuavcdtgravcFFFFi0Ecbyd1:jjjbHjjjjbbgzBdCaqciBd2aqamcbyd1:jjjbHjjjjbbgXBdKaqclBd2dndndndnalTmbaPcuf:YhwaoTmecbhOaihHaxhPindndnaoaOfRbbceGTmbaOcjjjjlVhsxekdndnaPclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascqthsdndnaPcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkasaAVhsdndnaPIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkasaAcCtVhskaHasBdbaHclfhHaPcxfhPalaOcefgO9hmbxikkazcFearz:rjjjb8AcbhrcbhvxdkaxhOaihPalhHindndnaOIdbawNJbbbZMgC:lJbbb9p9DTmbaC:Ohsxekcjjjj94hskascCthsdndnaOclfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaAcqtasVhsdndnaOcwfIdbawNJbbbZMgC:lJbbb9p9DTmbaC:OhAxekcjjjj94hAkaPasaAVBdbaOcxfhOaPclfhPaHcufgHmbkkazcFearz:rjjjbhAavcufhocbhrcbhzindndndnaAaiazcdtgKfydbgHcm4aH7c:v;t;h;Ev2gvcs4av7aoGgPcdtfgsydbgOcuSmbcehvinaiaOcdtgOfydbaHSmdaPavfhOavcefhvaAaOaoGgPcdtfgsydbgOcu9hmbkkasazBdbarhvarcefhrxekaXaOfydbhvkaXaKfavBdbazcefgzal9hmbkcuarc8S2gOarc;D;O;f8U0EhvkcbhAaqavcbyd1:jjjbHjjjjbbgvBd3aqcvBd2avcbaOz:rjjjbhOdnadTmbaehiinJbbnnJbbjZaXaiydbgHcdtfydbgvaXaiclfydbgPcdtfydbgzSavaXaicwfydbgscdtfydbgKSGgoEh8FdnaxaPcx2fgPIdbaxaHcx2fgHIdbg8E:tgCaxascx2fgsIdlaHIdlg3:tgwNasIdba8E:tgEaPIdla3:tgaN:tgLaLNaaasIdwaHIdwg5:tghNawaPIdwa5:tgaN:tgwawNaaaENahaCN:tgCaCNMM:rgEJbbbb9ETmbaLaE:vhLaCaE:vhCawaE:vhwkaOavc8S2fgvavIdbawa8FaE:rNgEawNNgaMUdbavaCaEaCNghNggavIdlMUdlavaLaEaLNg8FNg8JavIdwMUdwavahawNghavIdxMUdxava8FawNg8KavIdzMUdzava8FaCNg8FavIdCMUdCavawaEaLa5Nawa8ENa3aCNMM:mg3Ng8ENgwavIdKMUdKavaCa8ENgCavId3MUd3avaLa8ENgLavIdaMUdaava8Ea3Ng8EavId8KMUd8KavaEavIdyMUdydnaombaOazc8S2fgvaaavIdbMUdbavagavIdlMUdlava8JavIdwMUdwavahavIdxMUdxava8KavIdzMUdzava8FavIdCMUdCavawavIdKMUdKavaCavId3MUd3avaLavIdaMUdaava8EavId8KMUd8KavaEavIdyMUdyaOaKc8S2fgvaaavIdbMUdbavagavIdlMUdlava8JavIdwMUdwavahavIdxMUdxava8KavIdzMUdzava8FavIdCMUdCavawavIdKMUdKavaCavId3MUd3avaLavIdaMUdaava8EavId8KMUd8KavaEavIdyMUdykaicxfhiaAcifgAad6mbkkcbhHaqcuarcdtgvarcFFFFi0Egicbyd1:jjjbHjjjjbbgPBdaaqcoBd2aqaicbyd1:jjjbHjjjjbbgiBd8KaqcrBd2aPcFeavz:rjjjbhzdnalTmbaXhPinJbbbbJbbjZaOaPydbgsc8S2fgvIdygw:vawJbbbb9BEavIdwaxcwfIdbgwNavIdzaxIdbgCNavIdaMgLaLMMawNavIdlaxclfIdbgLNavIdCawNavId3MgwawMMaLNavIdbaCNavIdxaLNavIdKMgwawMMaCNavId8KMMM:lNhwdndnazascdtgvfgsydbcuSmbaiavfIdbaw9ETmekasaHBdbaiavfawUdbkaPclfhPaxcxfhxalaHcefgH9hmbkkJbbbbhwdnarTmbinaiIdbgCawawaC9DEhwaiclfhiarcufgrmbkkakcd4akfhOcehiinaigvcethiavaO6mbkcbhiaqcuavcdtgOavcFFFFi0Ecbyd1:jjjbHjjjjbbgPBdyaPcFeaOz:rjjjbhsdnadTmbavcufhAcbhrcbhxindnaXaeaxcdtfgvydbcdtfydbgiaXavclfydbcdtfydbgOSmbaiaXavcwfydbcdtfydbgvSmbaOavSmbazavcdtfydbhHdndnazaOcdtfydbgvazaicdtfydbgi9pmbavaH9pmbaHhlaihoavhHxekdnaHai9pmbaHav9pmbaihlavhoxekavhlaHhoaihHkabarcx2fgvaHBdbavcwfaoBdbavclfalBdbdnasaoc:3F;N8N2alc:F:b:DD27aHc;D;O:B8J27aAGgOcdtfgvydbgicuSmbcehPinaPhvdnabaicx2fgiydbaH9hmbaiydlal9hmbaiydwaoSmikavcefhPasaOavfaAGgOcdtfgvydbgicu9hmbkkavarBdbarcefhrkaxcifgxad6mbkarci2hikdnaDmbcwhvxdkaw:rhwcwhvkaDawUdbkavcdthvdninavTmeavc98fgvaqcxffydbcbyd:m:jjjbH:bjjjbbxbkkaqc;Wbf8Kjjjjbaik:2ldwue9:8Jjjjjbc;Wb9Rgr8Kjjjjbcbhwarcxfcbc;Kbz:rjjjb8AdnabaeSmbabaeadcdtz:qjjjb8AkarcualcdtalcFFFFi0EgDcbyd1:jjjbHjjjjbbgqBdxarceBd2aqcbaialavcbarcxfz:djjjbcualcx2alc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbhkarcxfaryd2gxcdtgmfakBdbaraxcefgPBd2akaialavcbcbz:ejjjb8AarcxfaPcdtfaDcbyd1:jjjbHjjjjbbgvBdbaraxcdfgiBd2arcxfaicdtfcuavalaeadaqz:fjjjbgecltaecjjjjiGEcbyd1:jjjbHjjjjbbgiBdbaiaeavakalz:gjjjbdnadTmbaoaoNhocbhwabhlcbhkindnaiavalydbgecdtfydbcdtfIdbao9ETmbalclf8PdbhsabawcdtfgqaeBdbaqclfas83dbawcifhwkalcxfhlakcifgkad6mbkkaxcifhlamarcxffcwfhkdninalTmeakydbcbyd:m:jjjbH:bjjjbbakc98fhkalcufhlxbkkarc;Wbf8Kjjjjbawk:FCoDud99rue99iul998Jjjjjbc;Wb9Rgw8KjjjjbdndnarmbcbhDxekawcxfcbc;Kbz:rjjjb8Aawcuadcx2adc;v:Q;v:Qe0Ecbyd1:jjjbHjjjjbbgqBdxawceBd2aqaeadaicbcbz:ejjjb8AawcuadcdtadcFFFFi0Egkcbyd1:jjjbHjjjjbbgxBdzawcdBd2adcd4adfhmceheinaegicetheaiam6mbkcbhPawcuaicdtgsaicFFFFi0Ecbyd1:jjjbHjjjjbbgzBdCawciBd2dndnar:ZgH:rJbbbZMgO:lJbbb9p9DTmbaO:Ohexekcjjjj94hekaicufhAc:bwhmcbhCadhXcbhQinaChLaeamgKcufaeaK9iEaPgDcefaeaD9kEhYdndnadTmbaYcuf:YhOaqhiaxheadhmindndnaiIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdbaONJbbbZMg8A:lJbbb9p9DTmba8A:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:rjjjbh3cbh5cbhPindna3axaPcdtfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbaeaCSmbcehiina3amaifaAGgmcdtfgEydbgecuSmeaicefhiaeaC9hmbkkaEaCBdba5aecuSfh5aPcefgPad9hmbxdkkazcFeasz:rjjjb8Acbh5kaDaYa5ar0giEhPaLa5aiEhCdna5arSmbaYaKaiEgmaP9Rcd9imbdndnaQcl0mbdnaX:ZgOaL:Zg8A:taY:Yg8EaD:Y:tg8Fa8EaK:Y:tgaa5:ZghaH:tNNNaOaH:taaNa8Aah:tNa8AaH:ta8FNahaO:tNM:va8EMJbbbZMgO:lJbbb9p9DTmbaO:Ohexdkcjjjj94hexekaPamfcd9Theka5aXaiEhXaQcefgQcs9hmekkdndnaCmbcihicbhDxekcbhiawakcbyd1:jjjbHjjjjbbg5BdKawclBd2aPcuf:Yh8AdndnadTmbaqhiaxheadhmindndnaiIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhCxekcjjjj94hCkaCcCthCdndnaiclfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaEcqtaCVhCdndnaicwfIdba8ANJbbbZMgO:lJbbb9p9DTmbaO:OhExekcjjjj94hEkaeaCaEVBdbaicxfhiaeclfheamcufgmmbkazcFeasz:rjjjbh3cbhDcbhYindndndna3axaYcdtgKfydbgCcm4aC7c:v;t;h;Ev2gics4ai7aAGgmcdtfgEydbgecuSmbcehiinaxaecdtgefydbaCSmdamaifheaicefhia3aeaAGgmcdtfgEydbgecu9hmbkkaEaYBdbaDhiaDcefhDxeka5aefydbhika5aKfaiBdbaYcefgYad9hmbkcuaDc32giaDc;j:KM;jb0EhexekazcFeasz:rjjjb8AcbhDcbhekawaecbyd1:jjjbHjjjjbbgeBd3awcvBd2aecbaiz:rjjjbhEavcd4hKdnadTmbdnalTmbaKcdth3a5hCaqhealhmadhAinaEaCydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiamIdbaiIdxMUdxaiamclfIdbaiIdzMUdzaiamcwfIdbaiIdCMUdCaiaiIdKJbbjZMUdKaCclfhCaecxfheama3fhmaAcufgAmbxdkka5hmaqheadhCinaEamydbc32fgiaeIdbaiIdbMUdbaiaeclfIdbaiIdlMUdlaiaecwfIdbaiIdwMUdwaiaiIdxJbbbbMUdxaiaiIdzJbbbbMUdzaiaiIdCJbbbbMUdCaiaiIdKJbbjZMUdKamclfhmaecxfheaCcufgCmbkkdnaDTmbaEhiaDheinaiaiIdbJbbbbJbbjZaicKfIdbgO:vaOJbbbb9BEgONUdbaiclfgmaOamIdbNUdbaicwfgmaOamIdbNUdbaicxfgmaOamIdbNUdbaiczfgmaOamIdbNUdbaicCfgmaOamIdbNUdbaic3fhiaecufgembkkcbhCawcuaDcdtgYaDcFFFFi0Egicbyd1:jjjbHjjjjbbgeBdaawcoBd2awaicbyd1:jjjbHjjjjbbg3Bd8KaecFeaYz:rjjjbhxdnadTmbJbbjZJbbjZa8A:vaPceSEaoNgOaONh8AaKcdthPalheina8Aaec;81jjbalEgmIdwaEa5ydbgAc32fgiIdC:tgOaONamIdbaiIdx:tgOaONamIdlaiIdz:tgOaONMMNaqcwfIdbaiIdw:tgOaONaqIdbaiIdb:tgOaONaqclfIdbaiIdl:tgOaONMMMhOdndnaxaAcdtgifgmydbcuSmba3aifIdbaO9ETmekamaCBdba3aifaOUdbka5clfh5aqcxfhqaeaPfheadaCcefgC9hmbkkabaxaYz:qjjjb8AcrhikaicdthiinaiTmeaic98fgiawcxffydbcbyd:m:jjjbH:bjjjbbxbkkawc;Wbf8KjjjjbaDk:Ydidui99ducbhi8Jjjjjbca9Rglczfcwfcbyd11jjbBdbalcb8Pdj1jjb83izalcwfcbydN1jjbBdbalcb8Pd:m1jjb83ibdndnaembJbbjFhvJbbjFhoJbbjFhrxekadcd4cdthwincbhdinalczfadfgDabadfIdbgvaDIdbgoaoav9EEUdbaladfgDavaDIdbgoaoav9DEUdbadclfgdcx9hmbkabawfhbaicefgiae9hmbkalIdwalIdK:thralIdlalIdC:thoalIdbalIdz:thvkJbbbbavavJbbbb9DEgvaoaoav9DEgvararav9DEk9DeeuabcFeaicdtz:rjjjbhlcbhbdnadTmbindnalaeydbcdtfgiydbcu9hmbaiabBdbabcefhbkaeclfheadcufgdmbkkabk9teiucbcbyd:q:jjjbgeabcifc98GfgbBd:q:jjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd:q:jjjbgeabcrfc94GfgbBd:q:jjjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd:q:jjjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd:q:jjjbfgdBd:q:jjjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akkk:Iedbcjwk1eFFuuFFuuFFuuFFuFFFuFFFuFbbbbbbbbebbbdbbbbbbbebbbebbbdbbbbbbbbbbbeeeeebebbebbebebbbeebbbbbbbbbbbbeeeeeebebbeeebeebbbbebebbbbbbbbbbbbbbbbbbc1Dkxebbbdbbb:GNbb"),{}).then(function(e){e.instance.exports.__wasm_call_ctors()})}(),function(){var e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};WebAssembly.instantiate(function(t){for(var n=new Uint8Array(13400),i=0;i<13400;++i){var o=t.charCodeAt(i);n[i]=o>96?o-97:o>64?o-39:o+4}var r=0;for(i=0;i<13400;++i)n[r++]=n[i]<60?e[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}("b9H79TebbbeVx9Geueu9Geub9Gbb9Giuuueu9Gmuuuuuuuuuuu9999eu9Gvuuuuueu9Gwuuuuuuuub9Gxuuuuuuuuuuuueu9Gkuuuuuuuuuu99eu9Gouuuuuub9Gruuuuuuub9GluuuubiAOdilvorwDqqDkbiibeilve9Weiiviebeoweuec;G:Odkr;qeDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9I919P29K9nW79O2Wt79c9V919U9KbeX9TW79O9V9Wt9F9I919P29K9nW79O2Wt7bo39TW79O9V9Wt9F9J9V9T9W91tWJ2917tWV9c9V919U9K7br39TW79O9V9Wt9F9J9V9T9W91tW9nW79O2Wt9c9V919U9K7bDE9TW79O9V9Wt9F9J9V9T9W91tW9t9W9OWVW9c9V919U9K7bqL9TW79O9V9Wt9F9V9Wt9P9T9P96W9nW79O2Wtbkl79IV9RbxDwebcekdszq:x9DOdbkIbabaec9:fgefcufae9Ugeabci9Uadfcufad9Ugbaeab0Ek:w8KDPue99eux99dui99euo99iu8Jjjjjbc:WD9Rgm8KjjjjbdndnalmbcbhPxekamc:Cwfcbc;Kbz:ojjjb8Adndnalcb9imbaoal9nmbamcuaocdtaocFFFFi0Egscbyd;u1jjbHjjjjbbgzBd:CwamceBd;8wamascbyd;u1jjbHjjjjbbgHBd:GwamcdBd;8wamcualcdtalcFFFFi0Ecbyd;u1jjbHjjjjbbgOBd:KwamciBd;8waihsalhAinazasydbcdtfcbBdbasclfhsaAcufgAmbkaihsalhAinazasydbcdtfgCaCydbcefBdbasclfhsaAcufgAmbkaihsalhCcbhXindnazasydbcdtgQfgAydbcb9imbaHaQfaXBdbaAaAydbgQcjjjj94VBdbaQaXfhXkasclfhsaCcufgCmbkalci9UhLdnalci6mbcbhsaihAinaAcwfydbhCaAclfydbhXaHaAydbcdtfgQaQydbgQcefBdbaOaQcdtfasBdbaHaXcdtfgXaXydbgXcefBdbaOaXcdtfasBdbaHaCcdtfgCaCydbgCcefBdbaOaCcdtfasBdbaAcxfhAaLascefgs9hmbkkaihsalhAindnazasydbcdtgCfgXydbgQcu9kmbaXaQcFFFFrGgQBdbaHaCfgCaCydbaQ9RBdbkasclfhsaAcufgAmbxdkkamcuaocdtgsaocFFFFi0EgAcbyd;u1jjbHjjjjbbgzBd:CwamceBd;8wamaAcbyd;u1jjbHjjjjbbgHBd:GwamcdBd;8wamcualcdtalcFFFFi0Ecbyd;u1jjbHjjjjbbgOBd:KwamciBd;8wazcbasz:ojjjbhXalci9UhLaihsalhAinaXasydbcdtfgCaCydbcefBdbasclfhsaAcufgAmbkdnaoTmbcbhsaHhAaXhCaohQinaAasBdbaAclfhAaCydbasfhsaCclfhCaQcufgQmbkkdnalci6mbcbhsaihAinaAcwfydbhCaAclfydbhQaHaAydbcdtfgKaKydbgKcefBdbaOaKcdtfasBdbaHaQcdtfgQaQydbgQcefBdbaOaQcdtfasBdbaHaCcdtfgCaCydbgCcefBdbaOaCcdtfasBdbaAcxfhAaLascefgs9hmbkkaoTmbcbhsaohAinaHasfgCaCydbaXasfydb9RBdbasclfhsaAcufgAmbkkamaLcbyd;u1jjbHjjjjbbgsBd:OwamclBd;8wascbaLz:ojjjbhYamcuaLcK2alcjjjjd0Ecbyd;u1jjbHjjjjbbg8ABd:SwamcvBd;8wJbbbbhEdnalci6g3mbarcd4hKaihAa8AhsaLhrJbbbbh5inavaAclfydbaK2cdtfgCIdlh8EavaAydbaK2cdtfgXIdlhEavaAcwfydbaK2cdtfgQIdlh8FaCIdwhaaXIdwhhaQIdwhgasaCIdbg8JaXIdbg8KMaQIdbg8LMJbbnn:vUdbasclfaXIdlaCIdlMaQIdlMJbbnn:vUdbaQIdwh8MaCIdwh8NaXIdwhyascxfa8EaE:tg8Eagah:tggNa8FaE:tg8Faaah:tgaN:tgEJbbbbJbbjZa8Ja8K:tg8Ja8FNa8La8K:tg8Ka8EN:tghahNaEaENaaa8KNaga8JN:tgEaENMM:rg8K:va8KJbbbb9BEg8ENUdbasczfaEa8ENUdbascCfaha8ENUdbascwfa8Maya8NMMJbbnn:vUdba5a8KMh5aAcxfhAascKfhsarcufgrmbka5aL:Z:vJbbbZNhEkamcuaLcdtalcFFFF970Ecbyd;u1jjbHjjjjbbgCBd:WwamcoBd;8waEaq:ZNhEdna3mbcbhsaChAinaAasBdbaAclfhAaLascefgs9hmbkkaE:rhhcuh8PamcuaLcltalcFFFFd0Ecbyd;u1jjbHjjjjbbgIBd:0wamcrBd;8wcbaIa8AaCaLz:djjjb8AJFFuuhyJFFuuh8RJFFuuh8Sdnalci6gXmbJFFuuh8Sa8AhsaLhAJFFuuh8RJFFuuhyinascwfIdbgEayayaE9EEhyasclfIdbgEa8Ra8RaE9EEh8RasIdbgEa8Sa8SaE9EEh8SascKfhsaAcufgAmbkkahJbbbZNhgamaocetgscuaocu9kEcbyd;u1jjbHjjjjbbgABd:4waAcFeasz:ojjjbhCdnaXmbcbhAJFFuuhEa8Ahscuh8PinascwfIdbay:tghahNasIdba8S:tghahNasclfIdba8R:tghahNMM:rghaEa8PcuSahaE9DVgXEhEaAa8PaXEh8PascKfhsaLaAcefgA9hmbkkamczfcbcjwz:ojjjb8Aamcwf9cb83ibam9cb83ibagaxNhRJbbjZak:th8Ncbh8UJbbbbh8VJbbbbh8WJbbbbh8XJbbbbh8YJbbbbh8ZJbbbbh80cbh81cbhPinJbbbbhEdna8UTmbJbbjZa8U:Z:vhEkJbbbbhhdna80a80Na8Ya8YNa8Za8ZNMMg8KJbbbb9BmbJbbjZa8K:r:vhhka8XaENh5a8WaENh8Fa8VaENhaa8PhQdndndndndna8UaPVTmbamydwgBTmea80ahNh8Ja8ZahNh8La8YahNh8Maeamydbcdtfh83cbh3JFFuuhEcvhXcuhQindnaza83a3cdtfydbcdtgsfydbgvTmbaOaHasfydbcdtfhAindndnaCaiaAydbgKcx2fgsclfydbgrcetf8Vebcs4aCasydbgLcetf8Vebcs4faCascwfydbglcetf8Vebcs4fgombcbhsxekcehsazaLcdtfydbgLceSmbcehsazarcdtfydbgrceSmbcehsazalcdtfydbglceSmbdnarcdSaLcdSfalcdSfcd6mbaocefhsxekaocdfhskdnasaX9kmba8AaKcK2fgLIdwa5:thhaLIdla8F:th8KaLIdbaa:th8EdndnakJbbbb9DTmba8E:lg8Ea8K:lg8Ka8Ea8K9EEg8Kah:lgha8Kah9EEag:vJbbjZMhhxekahahNa8Ea8ENa8Ka8KNMM:rag:va8NNJbbjZMJ9VO:d86JbbjZaLIdCa8JNaLIdxa8MNa8LaLIdzNMMakN:tghahJ9VO:d869DENhhkaKaQasaX6ahaE9DVgLEhQasaXaLEhXahaEaLEhEkaAclfhAavcufgvmbkka3cefg3aB9hmbkkaQcu9hmekama5Ud:ODama8FUd:KDamaaUd:GDamcuBd:qDamcFFF;7rBdjDaIcba8AaYamc:GDfakJbbbb9Damc:qDfamcjDfz:ejjjbamyd:qDhQdndnaxJbbbb9ETmba8UaD6mbaQcuSmeceh3amIdjDaR9EmixdkaQcu9hmekdna8UTmbdnamydlgza8Uci2fgsciGTmbadasfcba8Uazcu7fciGcefz:ojjjb8AkabaPcltfgzam8Pib83dbazcwfamcwf8Pib83dbaPcefhPkc3hzinazc98Smvamc:Cwfazfydbcbyd;y1jjbH:bjjjbbazc98fhzxbkkcbh3a8Uaq9pmbamydwaCaiaQcx2fgsydbcetf8Vebcs4aCascwfydbcetf8Vebcs4faCasclfydbcetf8Vebcs4ffaw9nmekcbhscbhAdna81TmbcbhAamczfhXinamczfaAcdtfaXydbgLBdbaXclfhXaAaYaLfRbbTfhAa81cufg81mbkkamydwhlamydbhXam9cu83i:GDam9cu83i:ODam9cu83i:qDam9cu83i:yDaAc;8eaAclfc:bd6Eh81inamcjDfasfcFFF;7rBdbasclfgscz9hmbka81cdthBdnalTmbaeaXcdtfhocbhrindnazaoarcdtfydbcdtgsfydbgvTmbaOaHasfydbcdtfhAcuhLcuhsinazaiaAydbgKcx2fgXclfydbcdtfydbazaXydbcdtfydbfazaXcwfydbcdtfydbfgXasaXas6gXEhsaKaLaXEhLaAclfhAavcufgvmbkaLcuSmba8AaLcK2fgAIdway:tgEaENaAIdba8S:tgEaENaAIdla8R:tgEaENMM:rhEcbhAindndnasamc:qDfaAfgvydbgX6mbasaX9hmeaEamcjDfaAfIdb9FTmekavasBdbamc:GDfaAfaLBdbamcjDfaAfaEUdbxdkaAclfgAcz9hmbkkarcefgral9hmbkkamczfaBfhLcbhscbhAindnamc:GDfasfydbgXcuSmbaLaAcdtfaXBdbaAcefhAkasclfgscz9hmbkaAa81fg81TmbJFFuuhhcuhKamczfhsa81hvcuhLina8AasydbgXcK2fgAIdway:tgEaENaAIdba8S:tgEaENaAIdla8R:tgEaENMM:rhEdndnazaiaXcx2fgAclfydbcdtfydbazaAydbcdtfydbfazaAcwfydbcdtfydbfgAaL6mbaAaL9hmeaEah9DTmekaEhhaAhLaXhKkasclfhsavcufgvmbkaKcuSmbaKhQkdnamaiaQcx2fgrydbarclfydbarcwfydbaCabaeadaPawaqa3z:fjjjbTmbaPcefhPJbbbbh8VJbbbbh8WJbbbbh8XJbbbbh8YJbbbbh8ZJbbbbh80kcbhXinaOaHaraXcdtfydbcdtgAfydbcdtfgKhsazaAfgvydbgLhAdnaLTmbdninasydbaQSmeasclfhsaAcufgATmdxbkkasaKaLcdtfc98fydbBdbavavydbcufBdbkaXcefgXci9hmbka8AaQcK2fgsIdbhEasIdlhhasIdwh8KasIdxh8EasIdzh5asIdCh8FaYaQfce86bba80a8FMh80a8Za5Mh8Za8Ya8EMh8Ya8Xa8KMh8Xa8WahMh8Wa8VaEMh8Vamydxh8Uxbkkamc:WDf8KjjjjbaPk;Vvivuv99lu8Jjjjjbca9Rgv8Kjjjjbdndnalcw0mbaiydbhoaeabcitfgralcdtcufBdlaraoBdbdnalcd6mbaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkkalabfhrxekcbhDavczfcwfcbBdbav9cb83izavcwfcbBdbav9cb83ibJbbjZhqJbbjZhkinadaiaDcdtfydbcK2fhwcbhrinavczfarfgoawarfIdbgxaoIdbgm:tgPakNamMgmUdbavarfgoaPaxam:tNaoIdbMUdbarclfgrcx9hmbkJbbjZaqJbbjZMgq:vhkaDcefgDal9hmbkcbhoadcbcecdavIdlgxavIdwgm9GEgravIdbgPam9GEaraPax9GEgscdtgrfhzavczfarfIdbhxaihralhwinaiaocdtfgDydbhHaDarydbgOBdbaraHBdbarclfhraoazaOcK2fIdbax9Dfhoawcufgwmbkaeabcitfhrdndnaocv6mbaoalc98f6mekaraiydbBdbaralcdtcufBdlaiclfhoalcufhwarcxfhrinaoydbhDarcuBdbarc98faDBdbarcwfhraoclfhoawcufgwmbkalabfhrxekaraxUdbararydlc98GasVBdlabcefaeadaiaoz:djjjbhwararydlciGawabcu7fcdtVBdlawaeadaiaocdtfalao9Rz:djjjbhrkavcaf8Kjjjjbark:;idiud99dndnabaecitfgwydlgDciGgqciSmbinabcbaDcd4gDalaqcdtfIdbawIdb:tgkJbbbb9FEgwaecefgefadaialavaoarz:ejjjbak:larIdb9FTmdabawaD7aefgecitfgwydlgDciGgqci9hmbkkabaecitfgeclfhbdnavmbcuhwindnaiaeydbgDfRbbmbadaDcK2fgqIdwalIdw:tgkakNaqIdbalIdb:tgkakNaqIdlalIdl:tgkakNMM:rgkarIdb9DTmbarakUdbaoaDBdbkaecwfheawcefgwabydbcd46mbxdkkcuhwindnaiaeydbgDfRbbmbadaDcK2fgqIdbalIdb:t:lgkaqIdlalIdl:t:lgxakax9EEgkaqIdwalIdw:t:lgxakax9EEgkarIdb9DTmbarakUdbaoaDBdbkaecwfheawcefgwabydbcd46mbkkk;llevudnabydwgxaladcetfgm8Vebcs4alaecetfgP8Vebgscs4falaicetfgz8Vebcs4ffaD0abydxaq9pVakVgDce9hmbavawcltfgxab8Pdb83dbaxcwfabcwfgx8Pdb83dbdnaxydbgqTmbaoabydbcdtfhxaqhsinalaxydbcetfcFFi87ebaxclfhxascufgsmbkkdnabydxglci2gsabydlgxfgkciGTmbarakfcbalaxcu7fciGcefz:ojjjb8Aabydxci2hsabydlhxabydwhqkab9cb83dwababydbaqfBdbabascifc98GaxfBdlaP8Vebhscbhxkdnascztcz91cu9kmbabaxcefBdwaPax87ebaoabydbcdtfaxcdtfaeBdbkdnam8Uebcu9kmbababydwgxcefBdwamax87ebaoabydbcdtfaxcdtfadBdbkdnaz8Uebcu9kmbababydwgxcefBdwazax87ebaoabydbcdtfaxcdtfaiBdbkarabydlfabydxci2faPRbb86bbarabydlfabydxci2fcefamRbb86bbarabydlfabydxci2fcdfazRbb86bbababydxcefBdxaDk8LbabaeadaialavaoarawaDaDaqJbbbbz:cjjjbk;Nkovud99euv99eul998Jjjjjbc:W;ae9Rgo8KjjjjbdndnadTmbavcd4hrcbhwcbhDindnaiaeclfydbar2cdtfgvIdbaiaeydbar2cdtfgqIdbgk:tgxaiaecwfydbar2cdtfgmIdlaqIdlgP:tgsNamIdbak:tgzavIdlaP:tgPN:tgkakNaPamIdwaqIdwgH:tgONasavIdwaH:tgHN:tgPaPNaHazNaOaxN:tgxaxNMM:rgsJbbbb9Bmbaoc:W:qefawcx2fgAakas:vUdwaAaxas:vUdlaAaPas:vUdbaoc8Wfawc8K2fgAaq8Pdb83dbaAav8Pdb83dxaAam8Pdb83dKaAcwfaqcwfydbBdbaAcCfavcwfydbBdbaAcafamcwfydbBdbawcefhwkaecxfheaDcifgDad6mbkab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbawTmeaocbBd8Sao9cb83iKao9cb83izaoczfaoc8Wfawci2cxaoc8Sfcbcrz1jjjbaoIdKhCaoIdChXaoIdzhQao9cb83iwao9cb83ibaoaoc:W:qefawcxaoc8Sfcbciz1jjjbJbbjZhkaoIdwgPJbbbbJbbjZaPaPNaoIdbgPaPNaoIdlgsasNMM:rgx:vaxJbbbb9BEgzNhxasazNhsaPazNhzaoc:W:qefheawhvinaecwfIdbaxNaeIdbazNasaeclfIdbNMMgPakaPak9DEhkaecxfheavcufgvmbkabaCUdwabaXUdlabaQUdbabaoId3UdxdndnakJ;n;m;m899FmbJbbbbhPaoc:W:qefheaoc8WfhvinaCavcwfIdb:taecwfIdbgHNaQavIdb:taeIdbgONaXavclfIdb:taeclfIdbgLNMMaxaHNazaONasaLNMM:vgHaPaHaP9EEhPavc8KfhvaecxfheawcufgwmbkabaxUd8KabasUdaabazUd3abaCaxaPN:tUdKabaXasaPN:tUdCabaQazaPN:tUdzabJbbjZakakN:t:rgkUdydndnaxJbbj:;axJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;axJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohexekcjjjj94hekabae86b8UdndnasJbbj:;asJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;asJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohvxekcjjjj94hvkabav86bRdndnazJbbj:;azJbbj:;9GEgPJbbjZaPJbbjZ9FEJbb;:9cNJbbbZJbbb:;azJbbbb9GEMgP:lJbbb9p9DTmbaP:Ohqxekcjjjj94hqkabaq86b8SdndnaecKtcK91:YJbb;:9c:vax:t:lavcKtcK91:YJbb;:9c:vas:t:laqcKtcK91:YJbb;:9c:vaz:t:lakMMMJbb;:9cNJbbjZMgk:lJbbb9p9DTmbak:Ohexekcjjjj94hekaecFbaecFb9iEhexekabcjjj;8iBdycFbhekabae86b8Vxekab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbkaoc:W;aef8Kjjjjbk;Iwwvul99iud99eue99eul998Jjjjjbcje9Rgr8Kjjjjbavcd4hwaicd4hDdndnaoTmbarc;abfcbaocdtgvz:ojjjb8Aarc;Gbfcbavz:ojjjb8AarhvarcafhiaohqinavcFFF97BdbaicFFF;7rBdbaiclfhiavclfhvaqcufgqmbkdnadTmbcbhkinaeakaD2cdtfgvIdwhxavIdlhmavIdbhPalakaw2cdtfIdbhsarc;abfhzarhiarc;GbfhHarcafhqcj1jjbhvaohOinasavcwfIdbaxNavIdbaPNavclfIdbamNMMgAMhCakhXdnaAas:tgAaqIdbgQ9DgLmbaHydbhXkaHaXBdbakhXdnaCaiIdbgK9EmbazydbhXaKhCkazaXBdbaiaCUdbaqaAaQaLEUdbavcxfhvaqclfhqaHclfhHaiclfhiazclfhzaOcufgOmbkakcefgkad9hmbkkadThkJbbbbhCcbhXarc;abfhvarc;Gbfhicbhqinalavydbgzaw2cdtfIdbalaiydbgHaw2cdtfIdbaeazaD2cdtfgzIdwaeaHaD2cdtfgHIdw:tgsasNazIdbaHIdb:tgsasNazIdlaHIdl:tgsasNMM:rMMgsaCasaC9EgzEhCaqaXazEhXaiclfhiavclfhvaoaqcefgq9hmbkaCJbbbZNhKxekadThkcbhXJbbbbhKkJbbbbhCdnaearc;abfaXcdtgifydbgqaD2cdtfgvIdwaearc;GbfaifydbgzaD2cdtfgiIdwgm:tgsasNavIdbaiIdbgY:tgAaANavIdlaiIdlgP:tgQaQNMM:rgxJbbbb9ETmbaxalaqaw2cdtfIdbMalazaw2cdtfIdb:taxaxM:vhCkasaCNamMhmaQaCNaPMhPaAaCNaYMhYdnakmbaDcdthvawcdthiindnalIdbg8AaecwfIdbam:tgCaCNaeIdbaY:tgsasNaeclfIdbaP:tgAaANMM:rgQMgEaK9ETmbJbbbbhxdnaQJbbbb9ETmbaEaK:taQaQM:vhxkaxaCNamMhmaxaANaPMhPaxasNaYMhYa8AaKaQMMJbbbZNhKkaeavfhealaifhladcufgdmbkkabaKUdxabamUdwabaPUdlabaYUdbarcjef8Kjjjjbkjeeiu8Jjjjjbcj8W9Rgr8Kjjjjbaici2hwdnaiTmbawceawce0EhDarhiinaiaeadRbbcdtfydbBdbadcefhdaiclfhiaDcufgDmbkkabarawaladaoz:hjjjbarcj8Wf8Kjjjjbk:Reeeu8Jjjjjbca9Rgo8Kjjjjbab9cb83dbabcyf9cb83dbabcaf9cb83dbabcKf9cb83dbabczf9cb83dbabcwf9cb83dbdnadTmbaocbBd3ao9cb83iwao9cb83ibaoaeadaialaoc3falEavcbalEcrz1jjjbabao8Pib83dbabao8Piw83dwkaocaf8Kjjjjbk:3lequ8JjjjjbcjP9Rgl8Kjjjjbcbhvalcjxfcbaiz:ojjjb8AdndnadTmbcjehoaehrincuhwarhDcuhqavhkdninawakaoalcjxfaDcefRbbfRbb9RcFeGci6aoalcjxfaDRbbfRbb9RcFeGci6faoalcjxfaDcdfRbbfRbb9RcFeGci6fgxaq9mgmEhwdnammbaxce0mdkaxaqaxaq9kEhqaDcifhDadakcefgk9hmbkkaeawci2fgDcdfRbbhqaDcefRbbhxaDRbbhkaeavci2fgDcifaDawav9Rci2z:rjjjb8Aakalcjxffaocefgo86bbaxalcjxffao86bbaDcdfaq86bbaDcefax86bbaDak86bbaqalcjxffao86bbarcifhravcefgvad9hmbkalcFeaicetz:ojjjbhoadci2gDceaDce0EhqcbhxindnaoaeRbbgkcetfgw8UebgDcu9kmbawax87ebaocjlfaxcdtfabakcdtfydbBdbaxhDaxcefhxkaeaD86bbaecefheaqcufgqmbkaxcdthDxekcbhDkabalcjlfaDz:njjjb8AalcjPf8Kjjjjbk9teiucbcbyd;C1jjbgeabcifc98GfgbBd;C1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;teeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk:3eedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdxaialBdwaialBdlaialBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabk9teiucbcbyd;C1jjbgeabcrfc94GfgbBd;C1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik9:eiuZbhedndncbyd;C1jjbgdaecztgi9nmbcuheadai9RcFFifcz4nbcuSmekadhekcbabae9Rcifc98Gcbyd;C1jjbfgdBd;C1jjbdnadZbcztge9nmbadae9RcFFifcz4nb8Akk:;Deludndndnadch9pmbabaeSmdaeabadfgi9Rcbadcet9R0mekabaead;8qbbxekaeab7ciGhldndndnabae9pmbdnalTmbadhvabhixikdnabciGmbadhvabhixdkadTmiabaeRbb86bbadcufhvdnabcefgiciGmbaecefhexdkavTmiabaeRbe86beadc9:fhvdnabcdfgiciGmbaecdfhexdkavTmiabaeRbd86bdadc99fhvdnabcifgiciGmbaecifhexdkavTmiabaeRbi86biabclfhiaeclfheadc98fhvxekdnalmbdnaiciGTmbadTmlabadcufgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc9:fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc99fgifglaeaifRbb86bbdnalciGmbaihdxekaiTmlabadc98fgdfaeadfRbb86bbkadcl6mbdnadc98fgocd4cefciGgiTmbaec98fhlabc98fhvinavadfaladfydbBdbadc98fhdaicufgimbkkaocx6mbaec9Wfhvabc9WfhoinaoadfgicxfavadfglcxfydbBdbaicwfalcwfydbBdbaiclfalclfydbBdbaialydbBdbadc9Wfgdci0mbkkadTmdadhidnadciGglTmbaecufhvabcufhoadhiinaoaifavaifRbb86bbaicufhialcufglmbkkadcl6mdaec98fhlabc98fhvinavaifgecifalaifgdcifRbb86bbaecdfadcdfRbb86bbaecefadcefRbb86bbaeadRbb86bbaic98fgimbxikkavcl6mbdnavc98fglcd4cefcrGgdTmbavadcdt9RhvinaiaeydbBdbaeclfheaiclfhiadcufgdmbkkalc36mbinaiaeydbBdbaiaeydlBdlaiaeydwBdwaiaeydxBdxaiaeydzBdzaiaeydCBdCaiaeydKBdKaiaeyd3Bd3aecafheaicafhiavc9Gfgvci0mbkkavTmbdndnavcrGgdmbavhlxekavc94GhlinaiaeRbb86bbaicefhiaecefheadcufgdmbkkavcw6mbinaiaeRbb86bbaiaeRbe86beaiaeRbd86bdaiaeRbi86biaiaeRbl86blaiaeRbv86bvaiaeRbo86boaiaeRbr86braicwfhiaecwfhealc94fglmbkkabkk9Tdbcjwk9ubbjZbbbbbbbbbbbbbbjZbbbbbbbbbbbbbbjZ86;nAZ86;nAZ86;nAZ86;nA:;86;nAZ86;nAZ86;nAZ86;nA:;86;nAZ86;nAZ86;nAZ86;nA:;bc;uwkxebbbdbbb9GNbb"),{}).then(function(e){e.instance.exports.__wasm_call_ctors()})}(),n(569445)),c=n(48660);function l(e){const t=(e=e??o.A.EMPTY_OBJECT).resourceCache,n=e.gltf,r=e.bufferViewId,s=e.gltfResource,A=e.baseResource,l=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.number("options.bufferViewId",r),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A);const u=n.bufferViews[r];let d,h,g,f,p=u.buffer,m=u.byteOffset,_=u.byteLength,I=!1;if((0,a.A)(u,"EXT_meshopt_compression")){const e=u.extensions.EXT_meshopt_compression;p=e.buffer,m=e.byteOffset??0,_=e.byteLength,I=!0,d=e.byteStride,h=e.count,g=e.mode,f=e.filter??"NONE"}const E=n.buffers[p];this._hasMeshopt=I,this._meshoptByteStride=d,this._meshoptCount=h,this._meshoptMode=g,this._meshoptFilter=f,this._resourceCache=t,this._gltfResource=s,this._baseResource=A,this._buffer=E,this._bufferId=p,this._byteOffset=m,this._byteLength=_,this._cacheKey=l,this._bufferLoader=void 0,this._typedArray=void 0,this._state=c.A.UNLOADED,this._promise=void 0}(0,r.A)(Object.create)&&(l.prototype=Object.create(A.A.prototype),l.prototype.constructor=l),Object.defineProperties(l.prototype,{cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),l.prototype.load=async function(){return(0,r.A)(this._promise)||(this._state=c.A.LOADING,this._promise=async function(e){try{const t=function(e){const t=e._resourceCache,n=e._buffer;if((0,r.A)(n.uri)){const i=e._baseResource.getDerivedResource({url:n.uri});return t.getExternalBufferLoader({resource:i})}return t.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:e._bufferId})}(e);if(e._bufferLoader=t,await t.load(),e.isDestroyed())return;const n=t.typedArray,i=new Uint8Array(n.buffer,n.byteOffset+e._byteOffset,e._byteLength);if(e.unload(),e._typedArray=i,e._hasMeshopt){const t=e._meshoptCount,n=e._meshoptByteStride,i=new Uint8Array(t*n);s.decodeGltfBuffer(i,t,n,e._typedArray,e._meshoptMode,e._meshoptFilter),e._typedArray=i}return e._state=c.A.READY,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=c.A.FAILED;const n="Failed to load buffer view";throw e.getError(n,t)}}(this)),this._promise},l.prototype.unload=function(){(0,r.A)(this._bufferLoader)&&!this._bufferLoader.isDestroyed()&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0};const u=l},201783:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(369031),o=n(571804),r=n(915325),a=n(491446),s=n(445848),A=n(569445),c=n(48660),l=n(595826);function u(e){const t=(e=e??r.A.EMPTY_OBJECT).resourceCache,n=e.gltf,o=e.primitive,a=e.draco,s=e.gltfResource,A=e.baseResource,l=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.primitive",o),i.A.typeOf.object("options.draco",a),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A),this._resourceCache=t,this._gltfResource=s,this._baseResource=A,this._gltf=n,this._primitive=o,this._draco=a,this._cacheKey=l,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=c.A.UNLOADED,this._promise=void 0,this._dracoError=void 0}function d(e,t){throw e.unload(),e._state=c.A.FAILED,e.getError("Failed to load Draco",t)}(0,a.A)(Object.create)&&(u.prototype=Object.create(A.A.prototype),u.prototype.constructor=u),Object.defineProperties(u.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}}),u.prototype.load=async function(){return(0,a.A)(this._promise)||(this._state=c.A.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._draco.bufferView,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._bufferViewTypedArray=n.typedArray,e._state=c.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;d(e,t)}}(this)),this._promise};const h={};function g(e){for(const t in h)if(h.hasOwnProperty(t)&&e.startsWith(t))return h[t]}h[l.A.POSITION]="POSITION",h[l.A.NORMAL]="NORMAL",h[l.A.COLOR]="COLOR",h[l.A.TEXCOORD]="TEX_COORD",u.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===c.A.READY)return!0;if(this._state!==c.A.PROCESSING)return!1;if((0,a.A)(this._dracoError)&&d(this,this._dracoError),!(0,a.A)(this._bufferViewTypedArray))return!1;if((0,a.A)(this._decodePromise))return!1;const t=this._draco,n=this._primitive,r=this._gltf,A=r.bufferViews[t.bufferView],l=t.attributes,u=[];for(const e in n.attributes)if(n.attributes.hasOwnProperty(e)){const t=g(e);(0,a.A)(t)&&r.accessors[n.attributes[e]].componentType===o.A.FLOAT&&(u.includes(t)||u.push(t))}const h={array:new Uint8Array(this._bufferViewTypedArray),bufferView:A,compressedAttributes:l,dequantizeInShader:!0,attributesToSkipTransform:u},f=s.A.decodeBufferView(h);if(!(0,a.A)(f))return!1;this._decodePromise=async function(e,t){try{const n=await t;if(e.isDestroyed())return;return e.unload(),e._decodedData={indices:n.indexArray,vertexAttributes:n.attributeData},e._state=c.A.READY,e._baseResource}catch(t){if(e.isDestroyed())return;e._dracoError=t}}(this,f)},u.prototype.unload=function(){(0,a.A)(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0,this._primitive=void 0};const f=u},395989:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(369031),o=n(915325),r=n(491446),a=n(404547),s=n(471874),A=n(123245),c=n(569445),l=n(48660);function u(e){const t=(e=e??o.A.EMPTY_OBJECT).resourceCache,n=e.gltf,r=e.imageId,a=e.gltfResource,s=e.baseResource,A=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.number("options.imageId",r),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",s);const c=n.images[r],u=c.bufferView,d=c.uri;this._resourceCache=t,this._gltfResource=a,this._baseResource=s,this._gltf=n,this._bufferViewId=u,this._uri=d,this._cacheKey=A,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=l.A.UNLOADED,this._promise=void 0}function d(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map(function(e){return e.bufferView}),e=e[0]),{image:e,mipLevels:t}}function h(e,t,n){return e.unload(),e._state=l.A.FAILED,Promise.reject(e.getError(n,t))}(0,r.A)(Object.create)&&(u.prototype=Object.create(c.A.prototype),u.prototype.constructor=u),Object.defineProperties(u.prototype,{cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}}),u.prototype.load=function(){return(0,r.A)(this._promise)?this._promise:(0,r.A)(this._bufferViewId)?(this._promise=async function(e){e._state=l.A.LOADING;const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;const i=n.typedArray,o=await async function(e){const t=function(e){const t=e.subarray(0,2),n=e.subarray(0,4),i=e.subarray(8,12);if(255===t[0]&&216===t[1])return"image/jpeg";if(137===t[0]&&80===t[1])return"image/png";if(171===t[0]&&75===t[1])return"image/ktx2";if(82===n[0]&&73===n[1]&&70===n[2]&&70===n[3]&&87===i[0]&&69===i[1]&&66===i[2]&&80===i[3])return"image/webp";throw new A.A("Image format is not recognized")}(e);if("image/ktx2"===t){const t=new Uint8Array(e);return(0,s.A)(t)}return u._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}(i);if(e.isDestroyed())return;const r=d(o);return e.unload(),e._image=r.image,e._mipLevels=r.mipLevels,e._state=l.A.READY,e}catch(t){if(e.isDestroyed())return;return h(e,t,"Failed to load embedded image")}}(this),this._promise):(this._promise=async function(e){e._state=l.A.LOADING;const t=e._baseResource,n=e._uri,i=t.getDerivedResource({url:n});try{const t=await function(e){const t=e.getUrlComponent(!1,!0);return g.test(t)?(0,s.A)(e):e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}(i);if(e.isDestroyed())return;const n=d(t);return e.unload(),e._image=n.image,e._mipLevels=n.mipLevels,e._state=l.A.READY,e}catch(t){if(e.isDestroyed())return;return h(e,t,`Failed to load image: ${n}`)}}(this),this._promise)};const g=/(^data:image\/ktx2)|(\.ktx2$)/i;u.prototype.unload=function(){(0,r.A)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0},u._loadImageFromTypedArray=a.A;const f=u},385618:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(369031),o=n(571804),r=n(915325),a=n(491446),s=n(786101),A=n(605971),c=n(874915),l=n(641613),u=n(442790),d=n(666203),h=n(569445),g=n(48660);function f(e){const t=(e=e??r.A.EMPTY_OBJECT).resourceCache,n=e.gltf,o=e.accessorId,a=e.gltfResource,s=e.baseResource,c=e.primitive,l=e.draco,u=e.cacheKey,d=e.asynchronous??!0,h=e.loadBuffer??!1,f=e.loadTypedArray??!1;if(i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.number("options.accessorId",o),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",s),!h&&!f)throw new A.A("At least one of loadBuffer and loadTypedArray must be true.");const p=n.accessors[o].componentType;this._resourceCache=t,this._gltfResource=a,this._baseResource=s,this._gltf=n,this._accessorId=o,this._indexDatatype=p,this._primitive=c,this._draco=l,this._cacheKey=u,this._asynchronous=d,this._loadBuffer=h,this._loadTypedArray=f,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=g.A.UNLOADED,this._promise=void 0}(0,a.A)(Object.create)&&(f.prototype=Object.create(h.A.prototype),f.prototype.constructor=f),Object.defineProperties(f.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});const p=new _;function m(e,t){throw e.unload(),e._state=g.A.FAILED,e.getError("Failed to load index buffer",t)}function _(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}function I(e,t,n){const i=l.A.createIndexBuffer({typedArray:e,context:n,usage:u.A.STATIC_DRAW,indexDatatype:t});return i.vertexArrayDestroyable=!1,i}f.prototype.load=async function(){return(0,a.A)(this._promise)?this._promise:(0,a.A)(this._draco)?(this._promise=async function(e){e._state=g.A.LOADING;const t=e._resourceCache;try{const n=t.getDracoLoader({gltf:e._gltf,primitive:e._primitive,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._dracoLoader=n,await n.load(),e.isDestroyed())return;return e._state=g.A.LOADED,e}catch(t){if(e.isDestroyed())return;m(e,t)}}(this),this._promise):(this._promise=async function(e){const t=e._gltf,n=e._accessorId,i=t.accessors[n].bufferView;e._state=g.A.LOADING;const o=e._resourceCache;try{const n=o.getBufferViewLoader({gltf:t,bufferViewId:i,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;const r=n.typedArray;return e._typedArray=function(e,t){const n=e._gltf,i=e._accessorId,o=n.accessors[i],r=o.count,a=o.componentType,A=c.A.getSizeInBytes(a);let l,u=t.buffer,d=t.byteOffset+o.byteOffset;if(d%A!==0){const e=new Uint8Array(u,d,r*A);u=new Uint8Array(e).buffer,d=0,(0,s.A)("index-buffer-unaligned",`The index array is not aligned to a ${A}-byte boundary.`)}return a===c.A.UNSIGNED_BYTE?l=new Uint8Array(u,d,r):a===c.A.UNSIGNED_SHORT?l=new Uint16Array(u,d,r):a===c.A.UNSIGNED_INT&&(l=new Uint32Array(u,d,r)),l}(e,r),e._state=g.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;m(e,t)}}(this),this._promise)},_.prototype.set=function(e,t,n){this.typedArray=e,this.indexDatatype=t,this.context=n},_.prototype.execute=function(){this.buffer=I(this.typedArray,this.indexDatatype,this.context)},f.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===g.A.READY)return!0;if(this._state!==g.A.LOADED&&this._state!==g.A.PROCESSING)return!1;let t,n=this._typedArray,r=this._indexDatatype;if((0,a.A)(this._dracoLoader))try{this._dracoLoader.process(e)&&(n=this._dracoLoader.decodedData.indices.typedArray,this._typedArray=n,r=o.A.fromTypedArray(n),this._indexDatatype=r)}catch(e){m(this,e)}if(!(0,a.A)(n))return!1;if(this._loadBuffer&&this._asynchronous){const i=p;if(i.set(n,r,e.context),!e.jobScheduler.execute(i,d.A.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=I(n,r,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=g.A.READY,this._resourceCache.statistics.addGeometryLoader(this),!0},f.prototype.unload=function(){(0,a.A)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,a.A)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),(0,a.A)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0,this._primitive=void 0};const E=f},560710:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(369031),o=n(915325),r=n(491446),a=n(604752),s=n(452684),A=n(647885),c=n(744603),l=n(123245),u=n(267047),d=n(865980),h=n(133240),g=n(512286),f=n(899557),p=n(913081),m=n(493435),_=n(569445),I=n(48660),E=n(471147);function y(e){const t=(e=e??o.A.EMPTY_OBJECT).resourceCache,n=e.gltfResource,r=e.baseResource,a=e.typedArray,s=e.gltfJson,A=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltfResource",n),i.A.typeOf.object("options.baseResource",r),this._resourceCache=t,this._gltfResource=n,this._baseResource=r,this._typedArray=a,this._gltfJson=s,this._cacheKey=A,this._gltf=void 0,this._bufferLoaders=[],this._state=I.A.UNLOADED,this._promise=void 0}function C(e,t){e.unload(),e._state=I.A.FAILED;const n=`Failed to load glTF: ${e._gltfResource.url}`;throw e.getError(n,t)}async function b(e,t){try{(0,d.A)(t),await function(e){const t=[];return h.A.buffer(e,function(e){const n=e.uri;!(0,r.A)(e.extras._pipeline.source)&&(0,r.A)(n)&&(0,A.A)(n)&&(delete e.uri,t.push(c.A.fetchArrayBuffer(n).then(function(t){e.extras._pipeline.source=new Uint8Array(t)})))}),Promise.all(t)}(t),await async function(e,t){if((0,r.A)(t.asset)&&"2.0"===t.asset.version&&!(0,m.A)(t,"KHR_techniques_webgl")&&!(0,m.A)(t,"KHR_materials_common"))return Promise.resolve();const n=[];h.A.buffer(t,function(t){if(!(0,r.A)(t.extras._pipeline.source)&&(0,r.A)(t.uri)){const i=e._baseResource.getDerivedResource({url:t.uri}),o=e._resourceCache.getExternalBufferLoader({resource:i});e._bufferLoaders.push(o),n.push(o.load().then(function(){o.isDestroyed()||(t.extras._pipeline.source=o.typedArray)}))}}),await Promise.all(n),(0,p.A)(t)}(e,t),(0,u.A)(t),await function(e,t){const n=[];return h.A.buffer(t,function(t,i){const o=t.extras._pipeline.source;if((0,r.A)(o)&&!(0,r.A)(t.uri)){const t=e._resourceCache.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:i,typedArray:o});e._bufferLoaders.push(t),n.push(t.load())}}),Promise.all(n)}(e,t),(0,f.A)(t);const n=t.asset.version;if("1.0"!==n&&"2.0"!==n)throw new l.A(`Unsupported glTF version: ${n}`);const i=t.extensionsRequired;return(0,r.A)(i)&&E.A.checkSupportedExtensions(i),e._gltf=t,e._state=I.A.READY,e}catch(t){if(e.isDestroyed())return;C(e,t)}}async function B(e,t){let n;try{n="glTF"===(0,s.A)(t)?(0,g.A)(t):(0,a.A)(t)}catch(t){if(e.isDestroyed())return;C(e,t)}return b(e,n)}(0,r.A)(Object.create)&&(y.prototype=Object.create(_.A.prototype),y.prototype.constructor=y),Object.defineProperties(y.prototype,{cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}}),y.prototype.load=async function(){return(0,r.A)(this._promise)?this._promise:(this._state=I.A.LOADING,(0,r.A)(this._gltfJson)?(this._promise=b(this,this._gltfJson),this._promise):(0,r.A)(this._typedArray)?(this._promise=B(this,this._typedArray),this._promise):(this._promise=async function(e){let t;try{const n=await e._fetchGltf();if(e.isDestroyed())return;t=new Uint8Array(n)}catch(t){if(e.isDestroyed())return;C(e,t)}return B(e,t)}(this),this._promise))},y.prototype.unload=function(){const e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)e[n]=!e[n].isDestroyed()&&this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0},y.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};const v=y},982504:(e,t,n)=>{"use strict";n.d(t,{A:()=>ke});var i=n(794282),o=n(434067),r=n(267980),a=n(626809),s=n(369031),A=n(571804),c=n(672743),l=n(915325),u=n(491446),d=n(520098),h=n(92457),g=n(584164),f=n(402330),p=n(99479),m=n(123245),_=n(654799),I=n(534702),E=n(614480),y=n(137261),C=n(582998),b=n(730839),B=n(320475),v=n(782556),w=n(800859),T=n(866857),S=n(995537),x=n(289758),D=n(872182),Q=n(569445),N=n(768213),R=n(595826),M=n(659282),L=n(893828),P=n(983884),O=n(702247),F=n(63267);const{Attribute:U,Indices:k,FeatureIdAttribute:G,FeatureIdTexture:H,FeatureIdImplicitRange:V,MorphTarget:z,Primitive:j,Instances:Y,Skin:q,Node:W,AnimatedPropertyType:J,AnimationSampler:K,AnimationTarget:X,AnimationChannel:Z,Animation:$,ArticulationStage:ee,Articulation:te,Asset:ne,Scene:ie,Components:oe,MetallicRoughness:re,SpecularGlossiness:ae,Specular:se,Anisotropy:Ae,Clearcoat:ce,Material:le}=S.A;function ue(e){e=e??l.A.EMPTY_OBJECT;const{gltfResource:t,typedArray:n,releaseGltfJson:i=!1,asynchronous:o=!0,incrementallyLoadTextures:r=!0,upAxis:a=B.A.Y,forwardAxis:A=B.A.Z,loadAttributesAsTypedArray:c=!1,loadAttributesFor2D:u=!1,enablePick:d=!1,loadIndicesForWireframe:h=!1,loadPrimitiveOutline:g=!0,loadForClassification:f=!1,renameBatchIdSemantic:p=!1}=e;s.A.typeOf.object("options.gltfResource",t);const{baseResource:m=t.clone()}=e;this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=m,this._typedArray=n,this._releaseGltfJson=i,this._asynchronous=o,this._incrementallyLoadTextures=r,this._upAxis=a,this._forwardAxis=A,this._loadAttributesAsTypedArray=c,this._loadAttributesFor2D=u,this._enablePick=d,this._loadIndicesForWireframe=h,this._loadPrimitiveOutline=g,this._loadForClassification=f,this._renameBatchIdSemantic=p,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=0,this._textureState=0,this._promise=void 0,this._processError=void 0,this._textureErrors=[],this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._textureCallbacks=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._geometryCallbacks=[],this._structuralMetadataLoader=void 0,this._meshPrimitiveGpmLoader=void 0,this._loadResourcesPromise=void 0,this._resourcesLoaded=!1,this._texturesLoaded=!1,this._supportedImageFormats=void 0,this._postProcessBuffers=[],this._components=void 0}function de(e,t){throw e.unload(),e.getError("Failed to load glTF",t)}function he(e,t){const n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;(0,u.A)(o)&&n.push(o.buffer);const r=i.attributes;for(let e=0;e<r.length;e++){const t=r[e];(0,u.A)(t.buffer)&&n.push(t.buffer)}const a=i.indices;(0,u.A)(a)&&(0,u.A)(a.buffer)&&n.push(a.buffer)}function ge(e,t,n){let i=t.byteOffset;const o=(0,I.A)(e,t),r=t.count,a=(0,y.A)(t.type),s=t.componentType,c=A.A.getSizeInBytes(s),l=r*a;if(o===c*a)return n=new Uint8Array(n),A.A.createArrayBufferView(s,n.buffer,n.byteOffset+i,l);const u=A.A.createTypedArray(s,l),d=new DataView(n.buffer),h=new Array(a),g=(0,E.A)(t.componentType);i=n.byteOffset+i;for(let e=0;e<r;++e){g(d,i,a,c,h);for(let t=0;t<a;++t)u[e*a+t]=h[t];i+=o}return u}function fe(e,t,n){const i=new Array(t.count),o=t.bufferView;if((0,u.A)(o)){const r=function(e,t){const n=D.A.getBufferViewLoader({gltf:e.gltfJson,bufferViewId:t,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(n),n}(e,o),a=async function(e,t,n,i,o){const{gltfJson:r}=e;await t.load(),e.isDestroyed()||function(e,t,n,i){const o=e.type,r=e.count;if(o===b.A.SCALAR)for(let e=0;e<r;e++)n[e]=t[e];else if(o===b.A.VEC4&&i)for(let e=0;e<r;e++)n[e]=p.A.unpack(t,4*e);else{const e=b.A.getMathType(o),i=b.A.getNumberOfComponents(o);for(let o=0;o<r;o++)n[o]=e.unpack(t,o*i)}}(n,ge(r,n,t.typedArray),o,i=i??!1)}(e,r,t,n,i);return e._loaderPromises.push(a),i}return function(e,t){const n=e.type;if(n===b.A.SCALAR)return t.fill(0);const i=b.A.getMathType(n);return t.fill(i.clone(i.ZERO))}(t,i)}function pe(e,t){if((0,u.A)(t))return e===Number?t[0]:e.unpack(t)}(0,u.A)(Object.create)&&(ue.prototype=Object.create(Q.A.prototype),ue.prototype.constructor=ue),Object.defineProperties(ue.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},gltfJson:{get:function(){return(0,u.A)(this._gltfJsonLoader)?this._gltfJsonLoader.gltf:this._gltfJson}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},texturesLoaded:{get:function(){return this._texturesLoaded}}}),ue.prototype.load=async function(){return(0,u.A)(this._promise)||(this._promise=async function(e){e._state=1,e._textureState=1;try{const t=D.A.getGltfJsonLoader({gltfResource:e._gltfResource,baseResource:e._baseResource,typedArray:e._typedArray,gltfJson:e._gltfJson});if(e._gltfJsonLoader=t,await t.load(),e.isDestroyed()||e.isUnloaded()||t.isDestroyed())return;return e._state=2,e._textureState=2,e}catch(t){if(e.isDestroyed())return;e._state=7,e._textureState=7,de(e,t)}}(this)),this._promise},ue.prototype._process=function(e){return 6===this._state||(3===this._state&&function(e,t){let n=!0;const i=e._geometryLoaders;for(let o=0;o<i.length;++o){const r=i[o].process(t);r&&(0,u.A)(e._geometryCallbacks[o])&&(e._geometryCallbacks[o](),e._geometryCallbacks[o]=void 0),n=n&&r}const o=e._structuralMetadataLoader;if((0,u.A)(o)){const i=o.process(t);i&&(e._components.structuralMetadata=o.structuralMetadata),n=n&&i}const r=e._meshPrimitiveGpmLoader;if((0,u.A)(r)){const i=r.process(t);i&&((0,u.A)(e._components.structuralMetadata)&&(0,P.A)("structural-metadata-gpm","The model defines both the 'EXT_structural_metadata' extension and the 'NGA_gpm_local' extension. The data from the 'EXT_structural_metadata' extension will be replaced with the data from the 'NGA_gpm_local' extension, and will no longer be available for styling and picking."),e._components.structuralMetadata=r.structuralMetadata),n=n&&i}n&&(e._state=4)}(this,e),this._resourcesLoaded&&4===this._state&&(function(e,t){const n=e._primitiveLoadPlans;for(let i=0;i<n.length;i++){const o=n[i];o.postProcess(t),(o.needsOutlines||o.needsGaussianSplats)&&he(e,o)}}(this,e.context),this._state=5),!(!this._resourcesLoaded||5!==this._state||(Ue(this),this._typedArray=void 0,this._state=6,0)))},ue.prototype._processTextures=function(e){if(6===this._textureState)return!0;if(3!==this._textureState)return!1;let t=!0;const n=this._textureLoaders;for(let i=0;i<n.length;++i){const o=n[i].process(e);o&&(0,u.A)(this._textureCallbacks[i])&&(this._textureCallbacks[i](),this._textureCallbacks[i]=void 0),t=t&&o}return!!t&&(this._textureState=6,this._texturesLoaded=!0,!0)},ue.prototype.process=function(e){if(s.A.typeOf.object("frameState",e),2!==this._state||(0,u.A)(this._loadResourcesPromise)||(this._loadResourcesPromise=async function(e,t){d.A.supportsWebP.initialized||await d.A.supportsWebP.initialize(),e._supportedImageFormats=new N.A({webp:d.A.supportsWebP(),basis:t.context.supportsBasis});const n=function(e,t){const n=e.gltfJson,i=n.extensions??l.A.EMPTY_OBJECT,o=i.EXT_structural_metadata,a=i.EXT_feature_metadata,s=i.CESIUM_RTC;if((0,u.A)(a)){const t=a.featureTables,n=a.featureTextures,i=(0,u.A)(t)?t:[],o=(0,u.A)(n)?n:[];e._sortedPropertyTableIds=Object.keys(i).sort(),e._sortedFeatureTextureIds=Object.keys(o).sort()}const A=function(e,t){const n=e.gltfJson.nodes;if(!(0,u.A)(n))return[];const i=n.map(function(n,i){const o=function(e,t,n){const i=new W;i.name=t.name,i.matrix=pe(g.A,t.matrix),i.translation=pe(r.A,t.translation),i.rotation=pe(p.A,t.rotation),i.scale=pe(r.A,t.scale);const o=t.extensions??l.A.EMPTY_OBJECT,a=o.EXT_mesh_gpu_instancing,s=o.AGI_articulations;if((0,u.A)(a)){if(e._loadForClassification)throw new m.A("Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.");i.instances=function(e,t,n){const i=t.EXT_mesh_gpu_instancing,o=new Y,r=i.attributes;if((0,u.A)(r))for(const t in r){if(!r.hasOwnProperty(t))continue;const i=r[t];o.attributes.push(ve(e,i,r,t,n))}const a=i.extensions??l.A.EMPTY_OBJECT,s=t.EXT_instance_features,A=a.EXT_feature_metadata;return(0,u.A)(s)?function(e,t){const n=t.featureIds;for(let t=0;t<n.length;t++){const i=n[t],o=`instanceFeatureId_${t}`;let r;r=(0,u.A)(i.attribute)?Te(i,o):xe(i,o),e.featureIds.push(r)}}(o,s):(0,u.A)(A)&&function(e,t,n,i){const o=e.extensions.EXT_feature_metadata.featureTables,r=n.featureIdAttributes;if((0,u.A)(r))for(let e=0;e<r.length;++e){const n=r[e],a=n.featureTable,s=i.indexOf(a),A=o[a].count,c=`instanceFeatureId_${e}`;let l;l=(0,u.A)(n.featureIds.attribute)?Se(n,s,A,c):De(n,s,A,c),t.featureIds.push(l)}}(e.gltfJson,o,A,e._sortedPropertyTableIds),o}(e,o,n)}(0,u.A)(s)&&(i.articulationName=s.articulationName);const A=t.mesh;if((0,u.A)(A)){const o=e.gltfJson.meshes[A],r=(0,F.A)(o);for(let t=0;t<r.length;++t)i.primitives.push(Me(e,r[t],(0,u.A)(i.instances),n));const a=t.weights??o.weights,s=i.primitives[0].morphTargets;i.morphWeights=(0,u.A)(a)?a.slice():new Array(s.length).fill(0)}return i}(e,n,t);return o.index=i,o});for(let e=0;e<i.length;++e){const t=n[e].children;if((0,u.A)(t))for(let n=0;n<t.length;++n)i[e].children.push(i[t[n]])}return i}(e,t),d=function(e,t){const n=e.gltfJson.skins;if(e._loadForClassification||!(0,u.A)(n))return[];const i=n.map(function(n,i){const o=function(e,t,n){const i=new q,o=t.joints;i.joints=o.map(e=>n[e]);const r=t.inverseBindMatrices;if((0,u.A)(r)){const t=e.gltfJson.accessors[r];i.inverseBindMatrices=fe(e,t)}else i.inverseBindMatrices=new Array(o.length).fill(g.A.IDENTITY);return i}(e,n,t);return o.index=i,o}),o=e.gltfJson.nodes;for(let e=0;e<t.length;++e){const n=o[e].skin;(0,u.A)(n)&&(t[e].skin=i[n])}return i}(e,A),f=function(e,t){const n=e.gltfJson.animations;if(e._loadForClassification||!(0,u.A)(n))return[];const i=n.map(function(n,i){const o=function(e,t,n){const i=new $;i.name=t.name;const o=t.samplers.map(function(t,n){const i=function(e,t){const n=new K,i=e.gltfJson.accessors,o=i[t.input];n.input=fe(e,o);const r=t.interpolation;n.interpolation=h.A[r]??h.A.LINEAR;const a=i[t.output];return n.output=fe(e,a,!0),n}(e,t);return i.index=n,i}),r=t.channels.map(function(e){return function(e,t,n){const i=new Z,o=e.sampler;return i.sampler=t[o],i.target=function(e,t){const n=new X,i=e.node;if(!(0,u.A)(i))return;n.node=t[i];const o=e.path.toUpperCase();return n.path=J[o],n}(e.target,n),i}(e,o,n)});return i.samplers=o,i.channels=r,i}(e,n,t);return o.index=i,o});return i}(e,A),_=function(e){const t=e.extensions??l.A.EMPTY_OBJECT,n=t.AGI_articulations?.articulations;return(0,u.A)(n)?n.map(Oe):[]}(n),I=function(e,t){const n=new ie,i=function(e){let t;return(0,u.A)(e.scenes)&&(0,u.A)(e.scene)&&(t=e.scenes[e.scene].nodes),t=t??e.nodes,t=(0,u.A)(t)?t:[],t}(e);return n.nodes=i.map(function(e){return t[e]}),n}(n,A),E=new oe,y=new ne,b=n.asset.copyright;if((0,u.A)(b)){const e=b.split(";").map(function(e){return new c.A(e.trim())});y.credits=e}if(E.asset=y,E.scene=I,E.nodes=A,E.skins=d,E.animations=f,E.articulations=_,E.upAxis=e._upAxis,E.forwardAxis=e._forwardAxis,(0,u.A)(s)){const e=r.A.fromArray(s.center,0,Fe);E.transform=g.A.fromTranslation(e,E.transform)}if(e._components=E,(0,u.A)(o)||(0,u.A)(a)){const n=async function(e,t,n,i){const o=new C.A({gltf:e.gltfJson,extension:t,extensionLegacy:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:i,asynchronous:e._asynchronous});return e._structuralMetadataLoader=o,o.load()}(e,o,a,t);e._loaderPromises.push(n)}const B=i.NGA_gpm_local;if((0,u.A)(B)){const t=M.A.load(B);e._components.extensions.NGA_gpm_local=t}const v=n.meshes;if((0,u.A)(v))for(const i of v){const o=i.primitives;if((0,u.A)(o))for(const i of o){const o=i.extensions;if((0,u.A)(o)){const i=o.NGA_gpm_local;if((0,u.A)(i)){const o=Le(e,n,i,t);e._loaderPromises.push(o)}}}}const w=[];return(0,O.A)(w,e._loaderPromises),e._incrementallyLoadTextures||(0,O.A)(w,e._texturesPromises),Promise.all(w)}(e,t);return e._state=3,e._textureState=3,(0,u.A)(e._gltfJsonLoader)&&e._releaseGltfJson&&(D.A.unload(e._gltfJsonLoader),e._gltfJsonLoader=void 0),n}(this,e).then(()=>{this._resourcesLoaded=!0}).catch(e=>{this._processError=e})),(0,u.A)(this._processError)){this._state=7;const e=this._processError;this._processError=void 0,de(this,e)}const t=this._textureErrors.pop();if((0,u.A)(t)){const e=this.getError("Failed to load glTF texture",t);throw e.name="TextureError",e}if(7===this._state)return!1;let n=!1;try{n=this._process(e)}catch(e){this._state=7,de(this,e)}let i=!1;try{i=this._processTextures(e)}catch(e){this._textureState=7,de(this,e)}return this._incrementallyLoadTextures?n:n&&i};const me={VEC2:new o.A(-1,-1),VEC3:new r.A(-1,-1,-1),VEC4:new a.A(-1,-1,-1,-1)};function _e(e,t,n,i,s){const c=e.accessors[t],l=b.A.getMathType(c.type),d=c.normalized??!1,h=new U;h.name=n,h.semantic=i,h.setIndex=s,h.constant=function(e){return e===Number?0:new e}(l),h.componentDatatype=c.componentType,h.normalized=d,h.count=c.count,h.type=c.type,h.min=pe(l,c.min),h.max=pe(l,c.max),h.byteOffset=c.byteOffset,h.byteStride=(0,I.A)(e,c),(0,w.A)(c,"WEB3D_quantized_attributes")&&function(e,t,n){const i=e.decodeMatrix,s=pe(n,e.decodedMin),A=pe(n,e.decodedMax);(0,u.A)(s)&&(0,u.A)(A)&&(t.min=s,t.max=A);const c=new S.A.Quantization;c.componentDatatype=t.componentDatatype,c.type=t.type,4===i.length?(c.quantizedVolumeOffset=i[2],c.quantizedVolumeStepSize=i[0]):9===i.length?(c.quantizedVolumeOffset=new o.A(i[6],i[7]),c.quantizedVolumeStepSize=new o.A(i[0],i[4])):16===i.length?(c.quantizedVolumeOffset=new r.A(i[12],i[13],i[14]),c.quantizedVolumeStepSize=new r.A(i[0],i[5],i[10])):25===i.length&&(c.quantizedVolumeOffset=new a.A(i[20],i[21],i[22],i[23]),c.quantizedVolumeStepSize=new a.A(i[0],i[6],i[12],i[18])),t.quantization=c}(c.extensions.WEB3D_quantized_attributes,h,l);const g=h.semantic===R.A.POSITION||h.semantic===R.A.NORMAL||h.semantic===R.A.TANGENT||h.semantic===R.A.TEXCOORD||h.semantic===R.A.FEATURE_ID||h.semantic===R.A.SCALE||h.semantic===R.A.ROTATION,f=e.extensionsRequired?.includes("KHR_mesh_quantization");return f&&d&&g&&function(e,t){const n=function(e){switch(e){case A.A.BYTE:return 127;case A.A.UNSIGNED_BYTE:return 255;case A.A.SHORT:return 32767;case A.A.UNSIGNED_SHORT:return 65535;default:return 1}}(e.componentDatatype),i=me[e.type];let o=e.min;(0,u.A)(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let r=e.max;(0,u.A)(r)&&(r=t.divideByScalar(r,n,r),r=t.maximumByComponent(r,i,r)),e.min=o,e.max=r}(h,l),h}function Ie(e){const t=/^\w+_(\d+)$/.exec(e);if(null!==t)return parseInt(t[1])}const Ee={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function ye(e,t,n){let i=n;!e._renameBatchIdSemantic||"_BATCHID"!==n&&"BATCHID"!==n||(i="_FEATURE_ID_0");const o=t.fromGltfSemantic(i),r=Ee;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function Ce(e){const t=e===R.A.POSITION,n=e===R.A.FEATURE_ID,i=e===R.A.TEXCOORD;return t||n||i}function be(e,t,n,i,o,a,s,c,l){const d=e.gltfJson,h=d.accessors[t],g=h.bufferView,f=n.gltfSemantic,p=n.renamedSemantic,m=n.modelSemantic,_=(0,u.A)(m)?Ie(p):void 0,I=_e(d,t,f,m,_);if(!(0,u.A)(o)&&!(0,u.A)(g)&&!(0,u.A)(a))return I;const E=function(e,t,n,i,o,r,a,s,A){const c=e.gltfJson,l=c.accessors[t].bufferView;return D.A.getVertexBufferLoader({gltf:c,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:A,bufferViewId:l,primitive:i,draco:o,spz:r,attributeSemantic:n,accessorId:t,asynchronous:e._asynchronous,loadBuffer:a,loadTypedArray:s})}(e,t,f,i,o,a,s,c,l),y=e._geometryLoaders.length;e._geometryLoaders.push(E);const C=E.load();return e._loaderPromises.push(C),e._geometryCallbacks[y]=()=>{(0,u.A)(o)&&(0,u.A)(o.attributes)&&(0,u.A)(o.attributes[f])?function(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){const n=(0,u.A)(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=A.A.createArrayBufferView(n,t.typedArray.buffer)}}(I,E,s,c):(0,u.A)(a)?function(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,n&&(e.buffer=t.buffer),i&&(0,u.A)(t.typedArray)&&(e.typedArray=A.A.createArrayBufferView(e.componentDatatype,t.typedArray.buffer)),e.semantic===R.A.POSITION){const t=e=>{let t=1/0,n=-1/0,i=1/0,o=-1/0,a=1/0,s=-1/0;for(let r=0;r<e.length;r+=3){const A=e[r],c=e[r+1],l=e[r+2];t=Math.min(t,A),n=Math.max(n,A),i=Math.min(i,c),o=Math.max(o,c),a=Math.min(a,l),s=Math.max(s,l)}return[new r.A(t,i,a),new r.A(n,o,s)]},n=e.typedArray;[e.min,e.max]=t(n)}}(I,E,s,c):function(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){const r=i.typedArray;n.typedArray=ge(e,t,r),o||(n.byteOffset=0,n.byteStride=void 0)}}(d,h,I,E,s,c)},I}function Be(e,t,n,i,o,r,a,s,A){const c=n.modelSemantic,l=c===R.A.POSITION,u=c===R.A.FEATURE_ID,d=l&&!a&&e._loadAttributesFor2D&&!A.scene3DOnly,h=l&&e._enablePick&&!A.context.webgl2,g=e._loadForClassification&&u,f=e._loadAttributesAsTypedArray,p=!f,m=f||d||h||g,_=be(e,t,n,i,o,r,!s&&p,!!s||m,A),I=new x.A.AttributeLoadPlan(_);return I.loadBuffer=p,I.loadTypedArray=m,I}function ve(e,t,n,i,o){const r=e.gltfJson.accessors,a=(0,u.A)(n.ROTATION),s=(0,u.A)(n.TRANSLATION)&&(0,u.A)(r[n.TRANSLATION].min)&&(0,u.A)(r[n.TRANSLATION].max),A=ye(e,T.A,i),c=A.modelSemantic,l=c===T.A.TRANSLATION||c===T.A.ROTATION||c===T.A.SCALE,d=c===T.A.TRANSLATION,h=e._loadAttributesAsTypedArray||a&&l||!o.context.instancedArrays,g=e._enablePick&&!o.context.webgl2,f=!h,p=e._loadAttributesFor2D&&!o.scene3DOnly;return be(e,t,A,void 0,void 0,void 0,f,h||d&&(!s||p||g),o)}function we(e,t,n,i){const o=e.gltfJson,r=v.A.getImageIdFromTexture({gltf:o,textureId:t.index,supportedImageFormats:e._supportedImageFormats});if(!(0,u.A)(r))return;const a=D.A.getTextureLoader({gltf:o,textureInfo:t,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:n,asynchronous:e._asynchronous}),s=v.A.createModelTextureReader({textureInfo:t}),A=e._textureLoaders.length;e._textureLoaders.push(a);const c=a.load().catch(t=>{if(!e.isDestroyed()){if(!e._incrementallyLoadTextures)throw t;e._textureState=7,e._textureErrors.push(t)}});return e._texturesPromises.push(c),e._textureCallbacks[A]=()=>{s.texture=a.texture,(0,u.A)(i)&&(s.texture.sampler=i)},s}function Te(e,t){const n=new G;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function Se(e,t,n,i){const o=new G,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=Ie(r.attribute),o.positionalLabel=i,o}function xe(e,t){const n=new V;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function De(e,t,n,i){const o=new V,r=e.featureIds;o.propertyTableId=t,o.featureCount=n,o.offset=r.constant??0;const a=r.divisor??0;return o.repeat=0===a?void 0:a,o.positionalLabel=i,o}function Qe(e,t,n,i){const o=new H;o.featureCount=t.featureCount,o.nullFeatureId=t.nullFeatureId,o.propertyTableId=t.propertyTable,o.label=t.label,o.positionalLabel=i;const r=t.texture;o.textureReader=we(e,r,n,_.A.NEAREST);const a=((0,u.A)(r.channels)?r.channels:[0]).map(function(e){return"rgba".charAt(e)}).join("");return o.textureReader.channels=a,o}function Ne(e,t,n,i,o,r){const a=new H,s=t.featureIds,A=s.texture;return a.featureCount=o,a.propertyTableId=n,a.textureReader=we(e,A,i,_.A.NEAREST),a.textureReader.channels=s.channels,a.positionalLabel=r,a}function Re(e,t,n,i,o){const r=new z;for(const a in t){if(!t.hasOwnProperty(a))continue;const s=Be(e,t[a],ye(e,R.A,a),void 0,void 0,void 0,!1,n,o);r.attributes.push(s.attribute),i.attributePlans.push(s)}return r}function Me(e,t,n,i){const o=new j,s=new x.A(o);e._primitiveLoadPlans.push(s);const A=t.material;(0,u.A)(A)&&(o.material=function(e,t,n){const i=new le,o=t.extensions??l.A.EMPTY_OBJECT,s=o.KHR_materials_pbrSpecularGlossiness,A=o.KHR_materials_specular,c=o.KHR_materials_anisotropy,d=o.KHR_materials_clearcoat,h=t.pbrMetallicRoughness;return i.unlit=(0,u.A)(o.KHR_materials_unlit),(0,u.A)(s)?i.specularGlossiness=function(e,t,n){const{diffuseTexture:i,specularGlossinessTexture:o,diffuseFactor:s,specularFactor:A,glossinessFactor:c}=t,l=new ae;return(0,u.A)(i)&&(l.diffuseTexture=we(e,i,n)),(0,u.A)(o)&&(l.specularGlossinessTexture=we(e,o,n)),l.diffuseFactor=pe(a.A,s),l.specularFactor=pe(r.A,A),l.glossinessFactor=c,l}(e,s,n):((0,u.A)(h)&&(i.metallicRoughness=function(e,t,n){const{baseColorTexture:i,metallicRoughnessTexture:o,baseColorFactor:r,metallicFactor:s,roughnessFactor:A}=t,c=new re;return(0,u.A)(i)&&(c.baseColorTexture=we(e,i,n)),(0,u.A)(o)&&(c.metallicRoughnessTexture=we(e,o,n)),c.baseColorFactor=pe(a.A,r),c.metallicFactor=s,c.roughnessFactor=A,c}(e,h,n)),(0,u.A)(A)&&!i.unlit&&(i.specular=function(e,t,n){const{specularFactor:i,specularTexture:o,specularColorFactor:a,specularColorTexture:s}=t,A=new se;return(0,u.A)(o)&&(A.specularTexture=we(e,o,n)),(0,u.A)(s)&&(A.specularColorTexture=we(e,s,n)),A.specularFactor=i,A.specularColorFactor=pe(r.A,a),A}(e,A,n)),(0,u.A)(c)&&!i.unlit&&(i.anisotropy=function(e,t,n){const{anisotropyStrength:i=Ae.DEFAULT_ANISOTROPY_STRENGTH,anisotropyRotation:o=Ae.DEFAULT_ANISOTROPY_ROTATION,anisotropyTexture:r}=t,a=new Ae;return(0,u.A)(r)&&(a.anisotropyTexture=we(e,r,n)),a.anisotropyStrength=i,a.anisotropyRotation=o,a}(e,c,n)),(0,u.A)(d)&&!i.unlit&&(i.clearcoat=function(e,t,n){const{clearcoatFactor:i=ce.DEFAULT_CLEARCOAT_FACTOR,clearcoatTexture:o,clearcoatRoughnessFactor:r=ce.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR,clearcoatRoughnessTexture:a,clearcoatNormalTexture:s}=t,A=new ce;return(0,u.A)(o)&&(A.clearcoatTexture=we(e,o,n)),(0,u.A)(a)&&(A.clearcoatRoughnessTexture=we(e,a,n)),(0,u.A)(s)&&(A.clearcoatNormalTexture=we(e,s,n)),A.clearcoatFactor=i,A.clearcoatRoughnessFactor=r,A}(e,d,n))),(0,u.A)(t.emissiveTexture)&&(i.emissiveTexture=we(e,t.emissiveTexture,n)),(0,u.A)(t.normalTexture)&&!e._loadForClassification&&(i.normalTexture=we(e,t.normalTexture,n)),(0,u.A)(t.occlusionTexture)&&(i.occlusionTexture=we(e,t.occlusionTexture,n)),i.emissiveFactor=pe(r.A,t.emissiveFactor),i.alphaMode=t.alphaMode,i.alphaCutoff=t.alphaCutoff,i.doubleSided=t.doubleSided,i}(e,e.gltfJson.materials[A],i));const c=t.extensions??l.A.EMPTY_OBJECT;let d=!1;const h=c.CESIUM_primitive_outline;e._loadPrimitiveOutline&&(0,u.A)(h)&&(d=!0,s.needsOutlines=!0,s.outlineIndices=function(e,t){const n=t.indices;return fe(e,e.gltfJson.accessors[n],!1)}(e,h));const g=function(e){const t=e?.KHR_gaussian_splatting,n=t?.extensions,i=n?.KHR_gaussian_splatting_compression_spz_2;if((0,u.A)(i))return i;const o=e?.KHR_spz_gaussian_splats_compression;return(0,u.A)(o)?o:void 0}(c);(0,u.A)(g)&&(d=!0,s.needsGaussianSplats=!0);const p=e._loadForClassification,_=c.KHR_draco_mesh_compression;let I=!1;const E=t.attributes;if((0,u.A)(E))for(const r in E){if(!E.hasOwnProperty(r))continue;const a=E[r],A=ye(e,R.A,r),c=A.modelSemantic;if(p&&!Ce(c))continue;c===R.A.FEATURE_ID&&(I=!0);const l=Be(e,a,A,t,_,g,n,d,i);s.attributePlans.push(l),o.attributes.push(l.attribute)}const y=t.targets;if((0,u.A)(y)&&!p)for(let t=0;t<y.length;++t)o.morphTargets.push(Re(e,y[t],d,s,i));const C=t.indices;if((0,u.A)(C)){const n=function(e,t,n,i,o,r,a){const s=e.gltfJson.accessors[t],A=s.bufferView;if(!(0,u.A)(i)&&!(0,u.A)(A))return;const c=new k;c.count=s.count;const l=e._loadAttributesAsTypedArray,d=(e._loadIndicesForWireframe||e._enablePick)&&!a.context.webgl2,h=e._loadForClassification&&o,g=!l,f=l||d||h,p=function(e,t,n,i,o,r,a){return D.A.getIndexBufferLoader({gltf:e.gltfJson,accessorId:t,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:a,primitive:n,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r})}(e,t,n,i,!r&&g,!!r||f,a),m=e._geometryLoaders.length;e._geometryLoaders.push(p);const _=p.load();e._loaderPromises.push(_),e._geometryCallbacks[m]=()=>{c.indexDatatype=p.indexDatatype,c.buffer=p.buffer,c.typedArray=p.typedArray};const I=new x.A.IndicesLoadPlan(c);return I.loadBuffer=g,I.loadTypedArray=f,I}(e,C,t,_,I,d,i);(0,u.A)(n)&&(s.indicesPlan=n,o.indices=n.indices)}const b=c.EXT_structural_metadata,B=c.EXT_mesh_features,v=c.EXT_feature_metadata,w=(0,u.A)(v);(0,u.A)(B)?function(e,t,n,i){let o;o=(0,u.A)(n)&&(0,u.A)(n.featureIds)?n.featureIds:[];for(let n=0;n<o.length;n++){const r=o[n],a=`featureId_${n}`;let s;s=(0,u.A)(r.texture)?Qe(e,r,i,a):(0,u.A)(r.attribute)?Te(r,a):xe(r,a),t.featureIds.push(s)}}(e,o,B,i):w&&function(e,t,n,i){const{featureTables:o}=e.gltfJson.extensions.EXT_feature_metadata;let r=0;const a=n.featureIdAttributes;if((0,u.A)(a))for(let n=0;n<a.length;++n){const i=a[n],s=i.featureTable,A=e._sortedPropertyTableIds.indexOf(s),c=o[s].count,l=`featureId_${r}`;let d;r++,d=(0,u.A)(i.featureIds.attribute)?Se(i,A,c,l):De(i,A,c,l),t.featureIds.push(d)}const s=n.featureIdTextures;if((0,u.A)(s))for(let n=0;n<s.length;++n){const a=s[n],A=a.featureTable,c=e._sortedPropertyTableIds.indexOf(A),l=`featureId_${r}`;r++;const u=Ne(e,a,c,i,o[A].count,l);t.featureIds.push(u)}}(e,o,v,i),(0,u.A)(b)?function(e,t){if(!(0,u.A)(t))return;const{propertyTextures:n,propertyAttributes:i}=t;(0,u.A)(n)&&(e.propertyTextureIds=n),(0,u.A)(i)&&(e.propertyAttributeIds=i)}(o,b):w&&function(e,t,n){(0,u.A)(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map(function(t){return e._sortedFeatureTextureIds.indexOf(t)}))}(e,o,v);const T=t.mode;if(p&&T!==f.A.TRIANGLES)throw new m.A("Only triangle meshes can be used for classification.");return o.primitiveType=T,o}async function Le(e,t,n,i){const o=new L.A({gltf:t,extension:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:e._supportedImageFormats,frameState:i,asynchronous:e._asynchronous});return e._meshPrimitiveGpmLoader=o,o.load()}function Pe(e){const t=new ee;t.name=e.name;const n=e.type.toUpperCase();return t.type=i.A[n],t.minimumValue=e.minimumValue,t.maximumValue=e.maximumValue,t.initialValue=e.initialValue,t}function Oe(e){const t=new te;return t.name=e.name,t.stages=e.stages.map(Pe),t}const Fe=new r.A;function Ue(e){const t=e._bufferViewLoaders;for(let e=0;e<t.length;++e)t[e]=!t[e].isDestroyed()&&D.A.unload(t[e]);e._bufferViewLoaders.length=0}ue.prototype.isUnloaded=function(){return 8===this._state},ue.prototype.unload=function(){var e;(0,u.A)(this._gltfJsonLoader)&&!this._gltfJsonLoader.isDestroyed()&&D.A.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,function(e){const t=e._textureLoaders;for(let e=0;e<t.length;++e)t[e]=!t[e].isDestroyed()&&D.A.unload(t[e]);e._textureLoaders.length=0}(this),Ue(this),function(e){const t=e._geometryLoaders;for(let e=0;e<t.length;++e)t[e]=!t[e].isDestroyed()&&D.A.unload(t[e]);e._geometryLoaders.length=0}(this),function(e){const t=e._postProcessBuffers;for(let e=0;e<t.length;e++){const n=t[e];n.isDestroyed()||n.destroy()}t.length=0}(this),e=this,(0,u.A)(e._structuralMetadataLoader)&&!e._structuralMetadataLoader.isDestroyed()&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0),function(e){(0,u.A)(e._meshPrimitiveGpmLoader)&&!e._meshPrimitiveGpmLoader.isDestroyed()&&(e._meshPrimitiveGpmLoader.destroy(),e._meshPrimitiveGpmLoader=void 0)}(this),this._components=void 0,this._typedArray=void 0,this._state=8};const ke=ue},782556:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(434067),o=n(369031),r=n(915325),a=n(491446),s=n(331185),A=n(654799),c=n(957233),l=n(78078),u=n(557448),d=n(995537);const h={getImageIdFromTexture:function(e){e=e??r.A.EMPTY_OBJECT;const{gltf:t,textureId:n,supportedImageFormats:i}=e;o.A.typeOf.object("options.gltf",t),o.A.typeOf.number("options.textureId",n),o.A.typeOf.object("options.supportedImageFormats",i);const s=t.textures[n],A=s.extensions;if((0,a.A)(A)){if(i.webp&&(0,a.A)(A.EXT_texture_webp))return A.EXT_texture_webp.source;if(i.basis&&(0,a.A)(A.KHR_texture_basisu))return A.KHR_texture_basisu.source}return s.source},createSampler:function(e){e=e??r.A.EMPTY_OBJECT;const{gltf:t,textureInfo:n,compressedTextureNoMipmap:i=!1}=e;o.A.typeOf.object("options.gltf",t),o.A.typeOf.object("options.textureInfo",n);let s=u.A.REPEAT,d=u.A.REPEAT,h=l.A.LINEAR,g=c.A.LINEAR;const f=n.index,p=t.textures[f].sampler;if((0,a.A)(p)){const e=t.samplers[p];s=e.wrapS??s,d=e.wrapT??d,h=e.minFilter??h,g=e.magFilter??g}return i&&h!==l.A.LINEAR&&h!==l.A.NEAREST&&(h=h===l.A.NEAREST_MIPMAP_NEAREST||h===l.A.NEAREST_MIPMAP_LINEAR?l.A.NEAREST:l.A.LINEAR),new A.A({wrapS:s,wrapT:d,minificationFilter:h,magnificationFilter:g})}},g=new i.A(1,1);h.createModelTextureReader=function(e){e=e??r.A.EMPTY_OBJECT;const{textureInfo:t,channels:n,texture:A}=e;o.A.typeOf.object("options.textureInfo",t);let c,l=t.texCoord??0;const u=t.extensions?.KHR_texture_transform;if((0,a.A)(u)){l=u.texCoord??l;const e=(0,a.A)(u.offset)?i.A.unpack(u.offset):i.A.ZERO;let t=u.rotation??0;const n=(0,a.A)(u.scale)?i.A.unpack(u.scale):g;t=-t,c=new s.A(Math.cos(t)*n.x,-Math.sin(t)*n.y,e.x,Math.sin(t)*n.x,Math.cos(t)*n.y,e.y,0,0,1)}const h=new d.A.TextureReader;return h.index=t.index,h.texture=A,h.texCoord=l,h.scale=t.scale,h.transform=c,h.channels=n,h};const f=h},133240:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(493435),o=n(491446);function r(){}r.objectLegacy=function(e,t){if((0,o.A)(e))for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=t(e[n],n);if((0,o.A)(i))return i}},r.object=function(e,t){if((0,o.A)(e)){const n=e.length;for(let i=0;i<n;i++){const n=t(e[i],i);if((0,o.A)(n))return n}}},r.topLevel=function(e,t,n){const i=e[t];return(0,o.A)(i)&&!Array.isArray(i)?r.objectLegacy(i,n):r.object(i,n)},r.accessor=function(e,t){return r.topLevel(e,"accessors",t)},r.accessorWithSemantic=function(e,t,n){const i={};return r.mesh(e,function(e){return r.meshPrimitive(e,function(e){const a=r.meshPrimitiveAttribute(e,function(e,r){if(0===r.indexOf(t)&&!(0,o.A)(i[e])){i[e]=!0;const t=n(e);if((0,o.A)(t))return t}});return(0,o.A)(a)?a:r.meshPrimitiveTarget(e,function(e){return r.meshPrimitiveTargetAttribute(e,function(e,r){if(0===r.indexOf(t)&&!(0,o.A)(i[e])){i[e]=!0;const t=n(e);if((0,o.A)(t))return t}})})})})},r.accessorContainingVertexAttributeData=function(e,t){const n={};return r.mesh(e,function(e){return r.meshPrimitive(e,function(e){const i=r.meshPrimitiveAttribute(e,function(e){if(!(0,o.A)(n[e])){n[e]=!0;const i=t(e);if((0,o.A)(i))return i}});return(0,o.A)(i)?i:r.meshPrimitiveTarget(e,function(e){return r.meshPrimitiveTargetAttribute(e,function(e){if(!(0,o.A)(n[e])){n[e]=!0;const i=t(e);if((0,o.A)(i))return i}})})})})},r.accessorContainingIndexData=function(e,t){const n={};return r.mesh(e,function(e){return r.meshPrimitive(e,function(e){const i=e.indices;if((0,o.A)(i)&&!(0,o.A)(n[i])){n[i]=!0;const e=t(i);if((0,o.A)(e))return e}})})},r.animation=function(e,t){return r.topLevel(e,"animations",t)},r.animationChannel=function(e,t){const n=e.channels;return r.object(n,t)},r.animationSampler=function(e,t){const n=e.samplers;return r.object(n,t)},r.buffer=function(e,t){return r.topLevel(e,"buffers",t)},r.bufferView=function(e,t){return r.topLevel(e,"bufferViews",t)},r.camera=function(e,t){return r.topLevel(e,"cameras",t)},r.image=function(e,t){return r.topLevel(e,"images",t)},r.material=function(e,t){return r.topLevel(e,"materials",t)},r.materialValue=function(e,t){let n=e.values;(0,o.A)(e.extensions)&&(0,o.A)(e.extensions.KHR_techniques_webgl)&&(n=e.extensions.KHR_techniques_webgl.values);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.mesh=function(e,t){return r.topLevel(e,"meshes",t)},r.meshPrimitive=function(e,t){const n=e.primitives;if((0,o.A)(n)){const e=n.length;for(let i=0;i<e;i++){const e=t(n[i],i);if((0,o.A)(e))return e}}},r.meshPrimitiveAttribute=function(e,t){const n=e.attributes;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.meshPrimitiveTarget=function(e,t){const n=e.targets;if((0,o.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=t(n[i],i);if((0,o.A)(e))return e}}},r.meshPrimitiveTargetAttribute=function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=t(e[n],n);if((0,o.A)(i))return i}},r.node=function(e,t){return r.topLevel(e,"nodes",t)},r.nodeInTree=function(e,t,n){const i=e.nodes;if((0,o.A)(i)){const a=t.length;for(let s=0;s<a;s++){const a=t[s],A=i[a];if((0,o.A)(A)){let t=n(A,a);if((0,o.A)(t))return t;const i=A.children;if((0,o.A)(i)&&(t=r.nodeInTree(e,i,n),(0,o.A)(t)))return t}}}},r.nodeInScene=function(e,t,n){const i=t.nodes;if((0,o.A)(i))return r.nodeInTree(e,i,n)},r.program=function(e,t){return(0,i.A)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.programs,t):r.topLevel(e,"programs",t)},r.sampler=function(e,t){return r.topLevel(e,"samplers",t)},r.scene=function(e,t){return r.topLevel(e,"scenes",t)},r.shader=function(e,t){return(0,i.A)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.shaders,t):r.topLevel(e,"shaders",t)},r.skin=function(e,t){return r.topLevel(e,"skins",t)},r.skinJoint=function(e,t){const n=e.joints;if((0,o.A)(n)){const e=n.length;for(let i=0;i<e;i++){const e=t(n[i]);if((0,o.A)(e))return e}}},r.techniqueAttribute=function(e,t){const n=e.attributes;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.techniqueUniform=function(e,t){const n=e.uniforms;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.techniqueParameter=function(e,t){const n=e.parameters;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=t(n[e],e);if((0,o.A)(i))return i}},r.technique=function(e,t){return(0,i.A)(e,"KHR_techniques_webgl")?r.object(e.extensions.KHR_techniques_webgl.techniques,t):r.topLevel(e,"techniques",t)},r.texture=function(e,t){return r.topLevel(e,"textures",t)};const a=r},724447:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(155463);const o=function(e,t){const n={byteLength:t.length,extras:{_pipeline:{source:t}}},o={buffer:(0,i.A)(e.buffers,n),byteOffset:0,byteLength:t.length};return(0,i.A)(e.bufferViews,o)}},267047:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(155463),o=n(133240),r=n(534702),a=n(491446),s=n(352581);function A(e){(0,a.A)(e)&&(e.texCoord=e.texCoord??0)}const c=function(e){o.A.accessor(e,function(e){(0,a.A)(e.bufferView)&&(e.byteOffset=e.byteOffset??0)}),o.A.bufferView(e,function(e){(0,a.A)(e.buffer)&&(e.byteOffset=e.byteOffset??0)}),o.A.mesh(e,function(t){o.A.meshPrimitive(t,function(t){if(t.mode=t.mode??s.A.TRIANGLES,!(0,a.A)(t.material)){(0,a.A)(e.materials)||(e.materials=[]);const n={name:"default"};t.material=(0,i.A)(e.materials,n)}})}),o.A.accessorContainingVertexAttributeData(e,function(t){const n=e.accessors[t],i=n.bufferView;if(n.normalized=n.normalized??!1,(0,a.A)(i)){const t=e.bufferViews[i];t.byteStride=(0,r.A)(e,n),t.target=s.A.ARRAY_BUFFER}}),o.A.accessorContainingIndexData(e,function(t){const n=e.accessors[t].bufferView;(0,a.A)(n)&&(e.bufferViews[n].target=s.A.ELEMENT_ARRAY_BUFFER)}),o.A.material(e,function(e){const t=e.extensions??{},n=t.KHR_materials_common;if((0,a.A)(n)){const e=n.technique,t=(0,a.A)(n.values)?n.values:{};return n.values=t,t.ambient=(0,a.A)(t.ambient)?t.ambient:[0,0,0,1],t.emission=(0,a.A)(t.emission)?t.emission:[0,0,0,1],t.transparency=t.transparency??1,"CONSTANT"!==e&&(t.diffuse=(0,a.A)(t.diffuse)?t.diffuse:[0,0,0,1],"LAMBERT"!==e&&(t.specular=(0,a.A)(t.specular)?t.specular:[0,0,0,1],t.shininess=t.shininess??0)),n.transparent=n.transparent??!1,void(n.doubleSided=n.doubleSided??!1)}e.emissiveFactor=e.emissiveFactor??[0,0,0],e.alphaMode=e.alphaMode??"OPAQUE",e.doubleSided=e.doubleSided??!1,"MASK"===e.alphaMode&&(e.alphaCutoff=e.alphaCutoff??.5);const i=t.KHR_techniques_webgl;(0,a.A)(i)&&o.A.materialValue(e,function(e){(0,a.A)(e.index)&&A(e)}),A(e.emissiveTexture),A(e.normalTexture),A(e.occlusionTexture);const r=e.pbrMetallicRoughness;(0,a.A)(r)&&(r.baseColorFactor=r.baseColorFactor??[1,1,1,1],r.metallicFactor=r.metallicFactor??1,r.roughnessFactor=r.roughnessFactor??1,A(r.baseColorTexture),A(r.metallicRoughnessTexture));const s=t.KHR_materials_pbrSpecularGlossiness;(0,a.A)(s)&&(s.diffuseFactor=s.diffuseFactor??[1,1,1,1],s.specularFactor=s.specularFactor??[1,1,1],s.glossinessFactor=s.glossinessFactor??1,A(s.specularGlossinessTexture))}),o.A.animation(e,function(e){o.A.animationSampler(e,function(e){e.interpolation=e.interpolation??"LINEAR"})});const t=function(e){const t={};return o.A.animation(e,function(e){o.A.animationChannel(e,function(e){const n=e.target,i=n.node,o=n.path;"translation"!==o&&"rotation"!==o&&"scale"!==o||(t[i]=!0)})}),t}(e);return o.A.node(e,function(e,n){(0,a.A)(t[n])||(0,a.A)(e.translation)||(0,a.A)(e.rotation)||(0,a.A)(e.scale)?(e.translation=e.translation??[0,0,0],e.rotation=e.rotation??[0,0,0,1],e.scale=e.scale??[1,1,1]):e.matrix=e.matrix??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),o.A.sampler(e,function(e){e.wrapS=e.wrapS??s.A.REPEAT,e.wrapT=e.wrapT??s.A.REPEAT}),(0,a.A)(e.scenes)&&!(0,a.A)(e.scene)&&(e.scene=0),e}},84334:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(114098),o=n(155463),r=n(491446);const a=function(e,t){let n=e.extensionsRequired;(0,r.A)(n)||(n=[],e.extensionsRequired=n),(0,o.A)(n,t,!0),(0,i.A)(e,t)}},114098:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(155463),o=n(491446);const r=function(e,t){let n=e.extensionsUsed;(0,o.A)(n)||(n=[],e.extensionsUsed=n),(0,i.A)(n,t,!0)}},865980:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(133240),o=n(491446);function r(e){e.extras=(0,o.A)(e.extras)?e.extras:{},e.extras._pipeline=(0,o.A)(e.extras._pipeline)?e.extras._pipeline:{}}const a=function(e){return i.A.shader(e,function(e){r(e)}),i.A.buffer(e,function(e){r(e)}),i.A.image(e,function(e){r(e)}),r(e),e}},155463:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n){if(n=n??!1){const n=e.indexOf(t);if(n>-1)return n}return e.push(t),e.length-1}},839078:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(534702),o=n(614480),r=n(137261),a=n(571804),s=n(491446);const A=function(e,t){const n=e.bufferViews,A=e.buffers,c=t.bufferView,l=(0,r.A)(t.type);if(!(0,s.A)(t.bufferView))return{min:new Array(l).fill(0),max:new Array(l).fill(0)};const u=new Array(l).fill(Number.POSITIVE_INFINITY),d=new Array(l).fill(Number.NEGATIVE_INFINITY),h=n[c],g=A[h.buffer].extras._pipeline.source,f=t.count,p=(0,i.A)(e,t);let m=t.byteOffset+h.byteOffset+g.byteOffset;const _=t.componentType,I=a.A.getSizeInBytes(_),E=new DataView(g.buffer),y=new Array(l),C=(0,o.A)(_);for(let e=0;e<f;e++){C(E,m,l,I,y);for(let e=0;e<l;e++){const t=y[e];u[e]=Math.min(u[e],t),d[e]=Math.max(d[e],t)}m+=p}return{min:u,max:d}}},464335:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(133240),o=n(369031),r=n(491446);const a=function(e,t){o.A.typeOf.object("material",e),o.A.defined("handler",t);const n=e.pbrMetallicRoughness;if((0,r.A)(n)){if((0,r.A)(n.baseColorTexture)){const e=n.baseColorTexture,i=t(e.index,e);if((0,r.A)(i))return i}if((0,r.A)(n.metallicRoughnessTexture)){const e=n.metallicRoughnessTexture,i=t(e.index,e);if((0,r.A)(i))return i}}const{extensions:a}=e;if((0,r.A)(a)){const e=a.KHR_materials_pbrSpecularGlossiness;if((0,r.A)(e)){if((0,r.A)(e.diffuseTexture)){const n=e.diffuseTexture,i=t(n.index,n);if((0,r.A)(i))return i}if((0,r.A)(e.specularGlossinessTexture)){const n=e.specularGlossinessTexture,i=t(n.index,n);if((0,r.A)(i))return i}}const n=a.KHR_materials_specular;if((0,r.A)(n)){const{specularTexture:e,specularColorTexture:i}=n;if((0,r.A)(e)){const n=t(e.index,e);if((0,r.A)(n))return n}if((0,r.A)(i)){const e=t(i.index,i);if((0,r.A)(e))return e}}const i=a.KHR_materials_common;if((0,r.A)(i)&&(0,r.A)(i.values)){const{diffuse:e,ambient:n,emission:o,specular:a}=i.values;if((0,r.A)(e)&&(0,r.A)(e.index)){const n=t(e.index,e);if((0,r.A)(n))return n}if((0,r.A)(n)&&(0,r.A)(n.index)){const e=t(n.index,n);if((0,r.A)(e))return e}if((0,r.A)(o)&&(0,r.A)(o.index)){const e=t(o.index,o);if((0,r.A)(e))return e}if((0,r.A)(a)&&(0,r.A)(a.index)){const e=t(a.index,a);if((0,r.A)(e))return e}}}const s=i.A.materialValue(e,function(e){if((0,r.A)(e.index)){const n=t(e.index,e);if((0,r.A)(n))return n}});if((0,r.A)(s))return s;if((0,r.A)(e.emissiveTexture)){const n=e.emissiveTexture,i=t(n.index,n);if((0,r.A)(i))return i}if((0,r.A)(e.normalTexture)){const n=e.normalTexture,i=t(n.index,n);if((0,r.A)(i))return i}if((0,r.A)(e.occlusionTexture)){const n=e.occlusionTexture,i=t(n.index,n);if((0,r.A)(i))return i}}},534702:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(137261),o=n(571804),r=n(491446);const a=function(e,t){const n=t.bufferView;if((0,r.A)(n)){const t=e.bufferViews[n];if((0,r.A)(t.byteStride)&&t.byteStride>0)return t.byteStride}return o.A.getSizeInBytes(t.componentType)*(0,i.A)(t.type)}},614480:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(571804);const o=function(e){switch(e){case i.A.BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt8(t+r*i)};case i.A.UNSIGNED_BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint8(t+r*i)};case i.A.SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt16(t+r*i,!0)};case i.A.UNSIGNED_SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint16(t+r*i,!0)};case i.A.INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt32(t+r*i,!0)};case i.A.UNSIGNED_INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint32(t+r*i,!0)};case i.A.FLOAT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat32(t+r*i,!0)};case i.A.DOUBLE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat64(t+r*i,!0)}}}},884137:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(114098),o=n(133240),r=n(491446),a=n(352581);const s=[a.A.FUNC_ADD,a.A.FUNC_ADD],A=[a.A.ONE,a.A.ZERO,a.A.ONE,a.A.ZERO];function c(e,t){const n=e.enable;return!!(0,r.A)(n)&&n.indexOf(t)>-1}const l=[a.A.ZERO,a.A.ONE,a.A.SRC_COLOR,a.A.ONE_MINUS_SRC_COLOR,a.A.SRC_ALPHA,a.A.ONE_MINUS_SRC_ALPHA,a.A.DST_ALPHA,a.A.ONE_MINUS_DST_ALPHA,a.A.DST_COLOR,a.A.ONE_MINUS_DST_COLOR];function u(e,t){if(!(0,r.A)(e))return t;for(let n=0;n<4;n++)if(-1===l.indexOf(e[n]))return t;return e}const d=function(e){const t={},n={},l=e.techniques;return(0,r.A)(l)?(o.A.technique(e,function(e,i){const o=e.states;if((0,r.A)(o)){const l=n[i]={};if(c(o,a.A.BLEND)){l.alphaMode="BLEND";const e=o.functions;(0,r.A)(e)&&((0,r.A)(e.blendEquationSeparate)||(0,r.A)(e.blendFuncSeparate))&&(t[i]={blendEquation:e.blendEquationSeparate??s,blendFactors:u(e.blendFuncSeparate,A)})}c(o,a.A.CULL_FACE)||(l.doubleSided=!0),delete e.states}}),Object.keys(t).length>0&&((0,r.A)(e.extensions)||(e.extensions={}),(0,i.A)(e,"KHR_blend")),o.A.material(e,function(e){if((0,r.A)(e.technique)){const i=n[e.technique];o.A.objectLegacy(i,function(t,n){e[n]=t});const a=t[e.technique];(0,r.A)(a)&&((0,r.A)(e.extensions)||(e.extensions={}),e.extensions.KHR_blend=a)}}),e):e}},494490:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(114098),o=n(84334),r=n(155463),a=n(133240),s=n(491446);const A=function(e){const t=e.techniques,n={},A={},c={};if((0,s.A)(t)){const t={programs:[],shaders:[],techniques:[]},l=e.glExtensionsUsed;delete e.glExtensionsUsed,a.A.technique(e,function(i,o){const u={name:i.name,program:void 0,attributes:{},uniforms:{}};let d;if(a.A.techniqueAttribute(i,function(e,t){d=i.parameters[e],u.attributes[t]={semantic:d.semantic}}),a.A.techniqueUniform(i,function(e,t){d=i.parameters[e],u.uniforms[t]={count:d.count,node:d.node,type:d.type,semantic:d.semantic,value:d.value},(0,s.A)(n[o])||(n[o]={}),n[o][e]=t}),(0,s.A)(c[i.program]))u.program=c[i.program];else{const n=e.programs[i.program],o={name:n.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:l},a=e.shaders[n.fragmentShader];o.fragmentShader=(0,r.A)(t.shaders,a,!0);const s=e.shaders[n.vertexShader];o.vertexShader=(0,r.A)(t.shaders,s,!0),u.program=(0,r.A)(t.programs,o),c[i.program]=u.program}A[o]=(0,r.A)(t.techniques,u)}),t.techniques.length>0&&((0,s.A)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t,(0,i.A)(e,"KHR_techniques_webgl"),(0,o.A)(e,"KHR_techniques_webgl"))}return a.A.material(e,function(e){if((0,s.A)(e.technique)){const t={technique:A[e.technique]};a.A.objectLegacy(e.values,function(i,o){(0,s.A)(t.values)||(t.values={});const r=n[e.technique][o];(0,s.A)(r)&&(t.values[r]=i)}),(0,s.A)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t}delete e.technique,delete e.values}),delete e.techniques,delete e.programs,delete e.shaders,e}},137261:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}},512286:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(865980),o=n(277315),r=n(491446),a=n(452684),s=n(241839),A=n(123245);function c(e,t,n){const i=new DataView(e.buffer),o=new Array(n);for(let r=0;r<n;++r)o[r]=i.getUint32(e.byteOffset+t+4*r,!0);return o}const l=function(e){if("glTF"!==(0,a.A)(e))throw new A.A("File is not valid binary glTF");const t=c(e,0,5),n=t[1];if(1!==n&&2!==n)throw new A.A("Binary glTF version is not 1 or 2");return 1===n?function(e,t){const n=t[2],a=t[3];if(0!==t[4])throw new A.A("Binary glTF scene format is not JSON");const c=20+a,l=(0,s.A)(e,20,a),u=JSON.parse(l);(0,i.A)(u);const d=e.subarray(c,n),h=u.buffers;if((0,r.A)(h)&&Object.keys(h).length>0){const e=h.binary_glTF??h.KHR_binary_glTF;(0,r.A)(e)&&(e.extras._pipeline.source=d,delete e.uri)}return(0,o.A)(u,"KHR_binary_glTF"),u}(e,t):function(e,t){const n=t[2];let o,a,A=12;for(;A<n;){const t=c(e,A,2),n=t[0],r=t[1];A+=8;const l=e.subarray(A,A+n);if(A+=n,1313821514===r){const e=(0,s.A)(l);o=JSON.parse(e),(0,i.A)(o)}else 5130562===r&&(a=l)}if((0,r.A)(o)&&(0,r.A)(a)){const e=o.buffers;(0,r.A)(e)&&e.length>0&&(e[0].extras._pipeline.source=a)}return o}(e,t)}},578283:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(534702),o=n(614480),r=n(137261),a=n(571804),s=n(491446);const A=function(e,t){const n=(0,i.A)(e,t),A=a.A.getSizeInBytes(t.componentType),c=(0,r.A)(t.type),l=t.count,u=new Array(c*l);if(!(0,s.A)(t.bufferView))return u.fill(0);const d=e.bufferViews[t.bufferView],h=e.buffers[d.buffer].extras._pipeline.source;let g=t.byteOffset+d.byteOffset+h.byteOffset;const f=new DataView(h.buffer),p=new Array(c),m=(0,o.A)(t.componentType);for(let e=0;e<l;++e){m(f,g,c,A,p);for(let t=0;t<c;++t)u[e*c+t]=p[t];g+=n}return u}},166479:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(133240),o=n(277315),r=n(491446);function a(e,t){if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;++i)a(e[i],t)}else if(null!==e&&"object"==typeof e&&e.constructor===Object){const n=e.extensions;let i;(0,r.A)(n)&&(i=n[t],(0,r.A)(i)&&(delete n[t],0===Object.keys(n).length&&delete e.extensions));for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&a(e[n],t);return i}}const s=function(e,t){return(0,o.A)(e,t),"CESIUM_RTC"===t&&function(e){i.A.technique(e,function(e){i.A.techniqueUniform(e,function(e){"CESIUM_RTC_MODELVIEW"===e.semantic&&(e.semantic="MODELVIEW")})})}(e),a(e,t)}},495331:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){const n=e.extensionsRequired;if((0,i.A)(n)){const i=n.indexOf(t);i>=0&&n.splice(i,1),0===n.length&&delete e.extensionsRequired}}},277315:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(495331),o=n(491446);const r=function(e,t){const n=e.extensionsUsed;if((0,o.A)(n)){const o=n.indexOf(t);o>=0&&n.splice(o,1),(0,i.A)(e,t),0===n.length&&delete e.extensionsUsed}}},899557:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(133240),o=n(491446);function r(e){(0,o.A)(e.extras)&&((0,o.A)(e.extras._pipeline)&&delete e.extras._pipeline,0===Object.keys(e.extras).length&&delete e.extras)}const a=function(e){return i.A.shader(e,function(e){r(e)}),i.A.buffer(e,function(e){r(e)}),i.A.image(e,function(e){r(e)}),r(e),e}},330483:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(133240),o=n(464335),r=n(493435),a=n(491446);const s=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"],A={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function c(){}function l(){}function u(e,t,n){const i=e.nodes[t];return!((0,a.A)(i.mesh)||(0,a.A)(i.camera)||(0,a.A)(i.skin)||(0,a.A)(i.weights)||(0,a.A)(i.extras)||(0,a.A)(i.extensions)&&0!==Object.keys(i.extensions).length||(0,a.A)(n[t])||(0,a.A)(i.children)&&0!==i.children.filter(function(t){return!u(e,t,n)}).length)}c.accessor=function(e,t){e.accessors.splice(t,1),i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){i.A.meshPrimitiveAttribute(e,function(n,i){n>t&&e.attributes[i]--}),i.A.meshPrimitiveTarget(e,function(e){i.A.meshPrimitiveTargetAttribute(e,function(n,i){n>t&&e[i]--})});const n=e.indices;(0,a.A)(n)&&n>t&&e.indices--;const o=e.extensions;(0,a.A)(o)&&(0,a.A)(o.CESIUM_primitive_outline)&&o.CESIUM_primitive_outline.indices>t&&--o.CESIUM_primitive_outline.indices})}),i.A.skin(e,function(e){(0,a.A)(e.inverseBindMatrices)&&e.inverseBindMatrices>t&&e.inverseBindMatrices--}),i.A.animation(e,function(e){i.A.animationSampler(e,function(e){(0,a.A)(e.input)&&e.input>t&&e.input--,(0,a.A)(e.output)&&e.output>t&&e.output--})})},c.buffer=function(e,t){e.buffers.splice(t,1),i.A.bufferView(e,function(e){(0,a.A)(e.buffer)&&e.buffer>t&&e.buffer--,(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_meshopt_compression)&&e.extensions.EXT_meshopt_compression.buffer--})},c.bufferView=function(e,t){if(e.bufferViews.splice(t,1),i.A.accessor(e,function(e){(0,a.A)(e.bufferView)&&e.bufferView>t&&e.bufferView--}),i.A.shader(e,function(e){(0,a.A)(e.bufferView)&&e.bufferView>t&&e.bufferView--}),i.A.image(e,function(e){(0,a.A)(e.bufferView)&&e.bufferView>t&&e.bufferView--}),(0,r.A)(e,"KHR_draco_mesh_compression")&&i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.KHR_draco_mesh_compression)&&e.extensions.KHR_draco_mesh_compression.bufferView>t&&e.extensions.KHR_draco_mesh_compression.bufferView--})}),(0,r.A)(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata.featureTables;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];(0,a.A)(n.bufferView)&&n.bufferView>t&&n.bufferView--,(0,a.A)(n.arrayOffsetBufferView)&&n.arrayOffsetBufferView>t&&n.arrayOffsetBufferView--,(0,a.A)(n.stringOffsetBufferView)&&n.stringOffsetBufferView>t&&n.stringOffsetBufferView--}}}if((0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTables;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];(0,a.A)(i.values)&&i.values>t&&i.values--,(0,a.A)(i.arrayOffsets)&&i.arrayOffsets>t&&i.arrayOffsets--,(0,a.A)(i.stringOffsets)&&i.stringOffsets>t&&i.stringOffsets--}}}}},c.image=function(e,t){e.images.splice(t,1),i.A.texture(e,function(e){(0,a.A)(e.source)&&e.source>t&&--e.source;const n=e.extensions;(0,a.A)(n)&&(0,a.A)(n.EXT_texture_webp)&&n.EXT_texture_webp.source>t?--e.extensions.EXT_texture_webp.source:(0,a.A)(n)&&(0,a.A)(n.KHR_texture_basisu)&&n.KHR_texture_basisu.source>t&&--e.extensions.KHR_texture_basisu.source})},c.mesh=function(e,t){e.meshes.splice(t,1),i.A.node(e,function(e){(0,a.A)(e.mesh)&&(e.mesh>t?e.mesh--:e.mesh===t&&delete e.mesh)})},c.node=function(e,t){e.nodes.splice(t,1),i.A.skin(e,function(e){(0,a.A)(e.skeleton)&&e.skeleton>t&&e.skeleton--,e.joints=e.joints.map(function(e){return e>t?e-1:e})}),i.A.animation(e,function(e){i.A.animationChannel(e,function(e){(0,a.A)(e.target)&&(0,a.A)(e.target.node)&&e.target.node>t&&e.target.node--})}),i.A.technique(e,function(e){i.A.techniqueUniform(e,function(e){(0,a.A)(e.node)&&e.node>t&&e.node--})}),i.A.node(e,function(e){(0,a.A)(e.children)&&(e.children=e.children.filter(function(e){return e!==t}).map(function(e){return e>t?e-1:e}))}),i.A.scene(e,function(e){e.nodes=e.nodes.filter(function(e){return e!==t}).map(function(e){return e>t?e-1:e})})},c.material=function(e,t){e.materials.splice(t,1),i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){(0,a.A)(e.material)&&e.material>t&&e.material--})})},c.sampler=function(e,t){e.samplers.splice(t,1),i.A.texture(e,function(e){(0,a.A)(e.sampler)&&e.sampler>t&&--e.sampler})},c.texture=function(e,t){if(e.textures.splice(t,1),i.A.material(e,function(e){(0,o.A)(e,function(e,n){n.index>t&&--n.index})}),(0,r.A)(e,"EXT_feature_metadata")){i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata.featureIdTextures;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i].featureIds.texture;n.index>t&&--n.index}}}})});const n=e.extensions.EXT_feature_metadata.featureTextures;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e].texture;n.index>t&&--n.index}}}if((0,r.A)(e,"EXT_mesh_features")&&i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_mesh_features)){const e=n.EXT_mesh_features.featureIds;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i];(0,a.A)(n.texture)&&n.texture.index>t&&--n.texture.index}}}})}),(0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTextures;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];i.index>t&&--i.index}}}}},l.accessor=function(e){const t={};return i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){i.A.meshPrimitiveAttribute(e,function(e){t[e]=!0}),i.A.meshPrimitiveTarget(e,function(e){i.A.meshPrimitiveTargetAttribute(e,function(e){t[e]=!0})});const n=e.indices;(0,a.A)(n)&&(t[n]=!0)})}),i.A.skin(e,function(e){(0,a.A)(e.inverseBindMatrices)&&(t[e.inverseBindMatrices]=!0)}),i.A.animation(e,function(e){i.A.animationSampler(e,function(e){(0,a.A)(e.input)&&(t[e.input]=!0),(0,a.A)(e.output)&&(t[e.output]=!0)})}),(0,r.A)(e,"EXT_mesh_gpu_instancing")&&i.A.node(e,function(e){(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_mesh_gpu_instancing)&&Object.keys(e.extensions.EXT_mesh_gpu_instancing.attributes).forEach(function(n){const i=e.extensions.EXT_mesh_gpu_instancing.attributes[n];t[i]=!0})}),(0,r.A)(e,"CESIUM_primitive_outline")&&i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.CESIUM_primitive_outline)){const e=n.CESIUM_primitive_outline.indices;(0,a.A)(e)&&(t[e]=!0)}})}),t},l.buffer=function(e){const t={};return i.A.bufferView(e,function(e){(0,a.A)(e.buffer)&&(t[e.buffer]=!0),(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_meshopt_compression)&&(t[e.extensions.EXT_meshopt_compression.buffer]=!0)}),t},l.bufferView=function(e){const t={};if(i.A.accessor(e,function(e){(0,a.A)(e.bufferView)&&(t[e.bufferView]=!0)}),i.A.shader(e,function(e){(0,a.A)(e.bufferView)&&(t[e.bufferView]=!0)}),i.A.image(e,function(e){(0,a.A)(e.bufferView)&&(t[e.bufferView]=!0)}),(0,r.A)(e,"KHR_draco_mesh_compression")&&i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.KHR_draco_mesh_compression)&&(t[e.extensions.KHR_draco_mesh_compression.bufferView]=!0)})}),(0,r.A)(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata.featureTables;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];(0,a.A)(n.bufferView)&&(t[n.bufferView]=!0),(0,a.A)(n.arrayOffsetBufferView)&&(t[n.arrayOffsetBufferView]=!0),(0,a.A)(n.stringOffsetBufferView)&&(t[n.stringOffsetBufferView]=!0)}}}if((0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTables;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];(0,a.A)(i.values)&&(t[i.values]=!0),(0,a.A)(i.arrayOffsets)&&(t[i.arrayOffsets]=!0),(0,a.A)(i.stringOffsets)&&(t[i.stringOffsets]=!0)}}}}return t},l.image=function(e){const t={};return i.A.texture(e,function(e){(0,a.A)(e.source)&&(t[e.source]=!0),(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.EXT_texture_webp)?t[e.extensions.EXT_texture_webp.source]=!0:(0,a.A)(e.extensions)&&(0,a.A)(e.extensions.KHR_texture_basisu)&&(t[e.extensions.KHR_texture_basisu.source]=!0)}),t},l.mesh=function(e){const t={};return i.A.node(e,function(n){if((0,a.A)(n.mesh&&(0,a.A)(e.meshes))){const i=e.meshes[n.mesh];(0,a.A)(i)&&(0,a.A)(i.primitives)&&i.primitives.length>0&&(t[n.mesh]=!0)}}),t},l.node=function(e){const t={};return i.A.skin(e,function(e){(0,a.A)(e.skeleton)&&(t[e.skeleton]=!0),i.A.skinJoint(e,function(e){t[e]=!0})}),i.A.animation(e,function(e){i.A.animationChannel(e,function(e){(0,a.A)(e.target)&&(0,a.A)(e.target.node)&&(t[e.target.node]=!0)})}),i.A.technique(e,function(e){i.A.techniqueUniform(e,function(e){(0,a.A)(e.node)&&(t[e.node]=!0)})}),i.A.node(e,function(n,i){u(e,i,t)||(t[i]=!0)}),t},l.material=function(e){const t={};return i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){(0,a.A)(e.material)&&(t[e.material]=!0)})}),t},l.texture=function(e){const t={};if(i.A.material(e,function(e){(0,o.A)(e,function(e){t[e]=!0})}),(0,r.A)(e,"EXT_feature_metadata")){i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata.featureIdTextures;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i].featureIds.texture;t[n.index]=!0}}}})});const n=e.extensions.EXT_feature_metadata.featureTextures;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;if((0,a.A)(i))for(const e in i)if(i.hasOwnProperty(e)){const n=i[e].texture;t[n.index]=!0}}}if((0,r.A)(e,"EXT_mesh_features")&&i.A.mesh(e,function(e){i.A.meshPrimitive(e,function(e){const n=e.extensions;if((0,a.A)(n)&&(0,a.A)(n.EXT_mesh_features)){const e=n.EXT_mesh_features.featureIds;if((0,a.A)(e)){const n=e.length;for(let i=0;i<n;++i){const n=e[i];(0,a.A)(n.texture)&&(t[n.texture.index]=!0)}}}})}),(0,r.A)(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata.propertyTextures;if((0,a.A)(n)){const e=n.length;for(let i=0;i<e;++i){const e=n[i].properties;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=!0}}}}return t},l.sampler=function(e){const t={};return i.A.texture(e,function(e){(0,a.A)(e.sampler)&&(t[e.sampler]=!0)}),t};const d=function(e,t){return t=t??s,s.forEach(function(n){t.indexOf(n)>-1&&function(e,t){const n=e[A[t]];if((0,a.A)(n)){let i=0;const o=l[t](e),r=n.length;for(let n=0;n<r;++n)o[n]||(c[t](e,n-i),i++)}}(e,n)}),e}},94334:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(724447),o=n(133240),r=n(578283),a=n(571804),s=n(352581);function A(e,t,n){const o=a.A.createTypedArray(n,(0,r.A)(e,t)),s=new Uint8Array(o.buffer);t.bufferView=(0,i.A)(e,s),t.componentType=n,t.byteOffset=0}const c=function(e){let t;return o.A.accessorWithSemantic(e,"JOINTS_0",function(n){const i=e.accessors[n];t=i.componentType,t===s.A.BYTE?A(e,i,a.A.UNSIGNED_BYTE):t!==s.A.UNSIGNED_BYTE&&t!==s.A.UNSIGNED_SHORT&&A(e,i,a.A.UNSIGNED_SHORT)}),o.A.accessorWithSemantic(e,"WEIGHTS_0",function(n){const i=e.accessors[n];t=i.componentType,t===s.A.BYTE?A(e,i,a.A.UNSIGNED_BYTE):t===s.A.SHORT&&A(e,i,a.A.UNSIGNED_SHORT)}),e}},913081:(e,t,n)=>{"use strict";n.d(t,{A:()=>U});var i=n(114098),o=n(155463),r=n(839078),a=n(133240),s=n(534702),A=n(137261),c=n(884137),l=n(494490),u=n(330483),d=n(94334),h=n(166479),g=n(267980),f=n(626809),p=n(376758),m=n(571804),_=n(491446),I=n(584164),E=n(99479),y=n(352581);const C={.8:function(e){(0,_.A)(e.asset)||(e.asset={});const t=e.asset;if(t.version="1.0","string"==typeof t.profile){const e=t.profile.split(" ");t.profile={api:e[0],version:e[1]}}else t.profile={};if((0,_.A)(e.version)&&delete e.version,b(e),function(e){const t=e.meshes;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e].primitives;if((0,_.A)(n)){const e=n.length;for(let t=0;t<e;++t){const e=n[t],i=e.primitive??y.A.TRIANGLES;e.mode=e.mode??i,delete e.primitive}}}}(e),function(e){const t=e.nodes,n=new g.A,i=new E.A;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const o=t[e];if((0,_.A)(o.rotation)){const e=o.rotation;g.A.fromArray(e,0,n),E.A.fromAxisAngle(n,e[3],i),o.rotation=[i.x,i.y,i.z,i.w]}const r=o.instanceSkin;(0,_.A)(r)&&(o.skeletons=r.skeletons,o.skin=r.skin,o.meshes=r.meshes,delete o.instanceSkin)}}(e),function(e){const t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,r={},a=new g.A,s=new E.A;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const c=t[e],l=c.channels,u=c.parameters,d=c.samplers;if((0,_.A)(l)){const e=l.length;for(let t=0;t<e;++t){const e=l[t];if("rotation"===e.target.path){const t=u[d[e.sampler].output];if((0,_.A)(r[t]))continue;r[t]=!0;const c=n[t],l=i[c.bufferView],h=o[l.buffer].extras._pipeline.source,f=h.byteOffset+l.byteOffset+c.byteOffset,p=c.componentType,I=c.count,y=(0,A.A)(c.type),C=c.count*y,b=m.A.createArrayBufferView(p,h.buffer,f,C);for(let e=0;e<I;e++){const t=e*y;g.A.unpack(b,t,a);const n=b[t+3];E.A.fromAxisAngle(a,n,s),E.A.pack(s,b,t)}}}}}}(e),function(e){const t=e.techniques;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.passes;if((0,_.A)(i)){const e=n.pass??"defaultPass";if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e],o=t.instanceProgram;n.attributes=n.attributes??o.attributes,n.program=n.program??o.program,n.uniforms=n.uniforms??o.uniforms,n.states=n.states??t.states}delete n.passes,delete n.pass}}}(e),(0,_.A)(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),(0,_.A)(e.lights)){const t=e.extensions??{};e.extensions=t;const n=t.KHR_materials_common??{};t.KHR_materials_common=n,n.lights=e.lights,delete e.lights,(0,i.A)(e,"KHR_materials_common")}},"1.0":function(e){e.asset=e.asset??{},e.asset.version="2.0",b(e),function(e){const t=e.animations;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.parameters;if((0,_.A)(i)){const e=n.samplers;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];n.input=i[n.input],n.output=i[n.output]}delete n.parameters}}}(e),function(e){a.A.node(e,function(t,n){x(t)&&D(e,n)})}(e),function(e){let t;const n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}};let i;const r={},s=e.nodes;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(i=s[e].jointName,(0,_.A)(i)&&(r[i]=e));for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(0,_.A)(n[t])){const i={},o=e[t];e[t]=B(o,i),n[t]=i}for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(r[i]=n.nodes[r[i]]);(0,_.A)(e.scene)&&(e.scene=n.scenes[e.scene]),a.A.bufferView(e,function(e){(0,_.A)(e.buffer)&&(e.buffer=n.buffers[e.buffer])}),a.A.accessor(e,function(e){(0,_.A)(e.bufferView)&&(e.bufferView=n.bufferViews[e.bufferView])}),a.A.shader(e,function(e){const t=e.extensions;if((0,_.A)(t)){const i=t.KHR_binary_glTF;(0,_.A)(i)&&(e.bufferView=n.bufferViews[i.bufferView],delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}}),a.A.program(e,function(e){(0,_.A)(e.vertexShader)&&(e.vertexShader=n.shaders[e.vertexShader]),(0,_.A)(e.fragmentShader)&&(e.fragmentShader=n.shaders[e.fragmentShader])}),a.A.technique(e,function(e){(0,_.A)(e.program)&&(e.program=n.programs[e.program]),a.A.techniqueParameter(e,function(e){(0,_.A)(e.node)&&(e.node=n.nodes[e.node]);const t=e.value;"string"==typeof t&&(e.value={index:n.textures[t]})})}),a.A.mesh(e,function(e){a.A.meshPrimitive(e,function(e){(0,_.A)(e.indices)&&(e.indices=n.accessors[e.indices]),a.A.meshPrimitiveAttribute(e,function(t,i){e.attributes[i]=n.accessors[t]}),(0,_.A)(e.material)&&(e.material=n.materials[e.material])})}),a.A.node(e,function(i){let r=i.children;if((0,_.A)(r)){const e=r.length;for(t=0;t<e;++t)r[t]=n.nodes[r[t]]}if((0,_.A)(i.meshes)){const a=i.meshes,s=a.length;if(s>0)for(i.mesh=n.meshes[a[0]],t=1;t<s;++t){const s={mesh:n.meshes[a[t]]},A=(0,o.A)(e.nodes,s);(0,_.A)(r)||(r=[],i.children=r),r.push(A)}delete i.meshes}if((0,_.A)(i.camera)&&(i.camera=n.cameras[i.camera]),(0,_.A)(i.skin)&&(i.skin=n.skins[i.skin]),(0,_.A)(i.skeletons)){const t=i.skeletons;t.length>0&&(0,_.A)(i.skin)&&(e.skins[i.skin].skeleton=n.nodes[t[0]]),delete i.skeletons}(0,_.A)(i.jointName)&&delete i.jointName}),a.A.skin(e,function(e){(0,_.A)(e.inverseBindMatrices)&&(e.inverseBindMatrices=n.accessors[e.inverseBindMatrices]);const i=e.jointNames;if((0,_.A)(i)){const n=[],o=i.length;for(t=0;t<o;++t)n[t]=r[i[t]];e.joints=n,delete e.jointNames}}),a.A.scene(e,function(e){const i=e.nodes;if((0,_.A)(i)){const e=i.length;for(t=0;t<e;++t)i[t]=n.nodes[i[t]]}}),a.A.animation(e,function(e){const t={};e.samplers=B(e.samplers,t),a.A.animationSampler(e,function(e){e.input=n.accessors[e.input],e.output=n.accessors[e.output]}),a.A.animationChannel(e,function(e){e.sampler=t[e.sampler];const i=e.target;(0,_.A)(i)&&(i.node=n.nodes[i.id],delete i.id)})}),a.A.material(e,function(e){(0,_.A)(e.technique)&&(e.technique=n.techniques[e.technique]),a.A.materialValue(e,function(t,i){"string"==typeof t&&(e.values[i]={index:n.textures[t]})});const t=e.extensions;if((0,_.A)(t)){const e=t.KHR_materials_common;(0,_.A)(e)&&(0,_.A)(e.values)&&a.A.materialValue(e,function(t,i){"string"==typeof t&&(e.values[i]={index:n.textures[t]})})}}),a.A.image(e,function(e){const t=e.extensions;if((0,_.A)(t)){const i=t.KHR_binary_glTF;(0,_.A)(i)&&(e.bufferView=n.bufferViews[i.bufferView],e.mimeType=i.mimeType,delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}}),a.A.texture(e,function(e){(0,_.A)(e.sampler)&&(e.sampler=n.samplers[e.sampler]),(0,_.A)(e.source)&&(e.source=n.images[e.source])})}(e),function(e){a.A.animation(e,function(e){a.A.animationSampler(e,function(e){delete e.name})})}(e),function(e){const t=e.asset;delete t.profile,delete t.premultipliedAlpha}(e),function(e){const t=e.extensionsUsed;if(e.extensionsRequired=e.extensionsRequired??[],(0,_.A)(t)){const n=t.length;for(let i=0;i<n;++i){const n=t[i];(0,_.A)(v[n])&&e.extensionsRequired.push(n)}}}(e),function(e){a.A.buffer(e,function(e){(0,_.A)(e.byteLength)||(e.byteLength=e.extras._pipeline.source.length)}),a.A.accessor(e,function(t){const n=t.bufferView;if((0,_.A)(n)){const i=e.bufferViews[n],o=S(e,t),r=t.byteOffset+t.count*o;i.byteLength=Math.max(i.byteLength??0,r)}})}(e),function(e){let t,n,i;const r=e.bufferViews,s={};a.A.accessorContainingVertexAttributeData(e,function(t){const n=e.accessors[t];(0,_.A)(n.bufferView)&&(s[n.bufferView]=!0)});const A={};a.A.accessor(e,function(e){(0,_.A)(e.bufferView)&&(A[e.bufferView]=A[e.bufferView]??[],A[e.bufferView].push(e))});for(const a in A)if(Object.prototype.hasOwnProperty.call(A,a)){i=r[a];const c=A[a];c.sort(function(e,t){return e.byteOffset-t.byteOffset});let l=0,u=0;const d=c.length;for(t=0;t<d;++t){let A=c[t];const h=S(e,A),g=A.byteOffset,f=A.count*h;delete A.byteStride;const m=t<d-1;if(h!==(m?S(e,c[t+1]):void 0)){const e=(0,p.A)(i,!0);s[a]&&(e.byteStride=h),e.byteOffset+=l,e.byteLength=g+f-l;const d=(0,o.A)(r,e);for(n=u;n<=t;++n)A=c[n],A.bufferView=d,A.byteOffset=A.byteOffset-l;l=m?c[t+1].byteOffset:void 0,u=t+1}}}(0,u.A)(e,["accessor","bufferView","buffer"])}(e),function(e){a.A.accessorWithSemantic(e,"POSITION",function(t){const n=e.accessors[t];if(!(0,_.A)(n.min)||!(0,_.A)(n.max)){const t=(0,r.A)(e,n);n.min=t.min,n.max=t.max}})}(e),function(e){a.A.animation(e,function(t){a.A.animationSampler(t,function(t){const n=e.accessors[t.input];if(!(0,_.A)(n.min)||!(0,_.A)(n.max)){const t=(0,r.A)(e,n);n.min=t.min,n.max=t.max}})})}(e),function(e){a.A.accessor(e,function(t){if((0,_.A)(t.min)||(0,_.A)(t.max)){const n=(0,r.A)(e,t);(0,_.A)(t.min)&&(t.min=n.min),(0,_.A)(t.max)&&(t.max=n.max)}})}(e),function(e){a.A.buffer(e,function(e){delete e.type})}(e),function(e){a.A.texture(e,function(e){delete e.format,delete e.internalFormat,delete e.target,delete e.type})}(e),function(e){a.A.mesh(e,function(e){a.A.meshPrimitive(e,function(e){a.A.meshPrimitiveAttribute(e,function(t,n){"TEXCOORD"===n?e.attributes.TEXCOORD_0=t:"COLOR"===n&&(e.attributes.COLOR_0=t)}),delete e.attributes.TEXCOORD,delete e.attributes.COLOR})}),a.A.technique(e,function(e){a.A.techniqueParameter(e,function(e){const t=e.semantic;(0,_.A)(t)&&("TEXCOORD"===t?e.semantic="TEXCOORD_0":"COLOR"===t&&(e.semantic="COLOR_0"))})})}(e),function(e){const t={};a.A.mesh(e,function(e){a.A.meshPrimitive(e,function(e){a.A.meshPrimitiveAttribute(e,function(e,n){if("_"!==n.charAt(0)){const e=n.search(/_[0-9]+/g);let i,o=n,r="_0";e>=0&&(o=n.substring(0,e),r=n.substring(e));const a=T[o];(0,_.A)(a)?(i=a+r,t[n]=i):(0,_.A)(w[o])||(i=`_${n}`,t[n]=i)}});for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n],o=e.attributes[n];(0,_.A)(o)&&(delete e.attributes[n],e.attributes[i]=o)}})}),a.A.technique(e,function(e){a.A.techniqueParameter(e,function(e){const n=t[e.semantic];(0,_.A)(n)&&(e.semantic=n)})})}(e),(0,d.A)(e),function(e){a.A.camera(e,function(e){const t=e.perspective;if((0,_.A)(t)){const e=t.aspectRatio;(0,_.A)(e)&&0===e&&delete t.aspectRatio;const n=t.yfov;(0,_.A)(n)&&0===n&&(t.yfov=1)}})}(e),(0,c.A)(e),(0,l.A)(e),function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];Array.isArray(n)&&0===n.length&&delete e[t]}a.A.node(e,function(e){(0,_.A)(e.children)&&0===e.children.length&&delete e.children})}(e)},"2.0":void 0};function b(e){const t=e.materials;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e],i=n.instanceTechnique;(0,_.A)(i)&&(n.technique=i.technique,n.values=i.values,delete n.instanceTechnique)}}function B(e,t){const n=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];t[i]=n.length,n.push(o),(0,_.A)(o.name)||(o.name=i)}return n}const v={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0},w={POSITION:!0,NORMAL:!0,TANGENT:!0},T={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function S(e,t){return(0,_.A)(t.byteStride)&&0!==t.byteStride?t.byteStride:(0,s.A)(e,t)}function x(e){return(!(0,_.A)(e.children)||0===e.children.length)&&(!(0,_.A)(e.meshes)||0===e.meshes.length)&&!(0,_.A)(e.camera)&&!(0,_.A)(e.skin)&&!(0,_.A)(e.skeletons)&&!(0,_.A)(e.jointName)&&(!(0,_.A)(e.translation)||g.A.fromArray(e.translation).equals(g.A.ZERO))&&(!(0,_.A)(e.scale)||g.A.fromArray(e.scale).equals(new g.A(1,1,1)))&&(!(0,_.A)(e.rotation)||f.A.fromArray(e.rotation).equals(new f.A(0,0,0,1)))&&(!(0,_.A)(e.matrix)||I.A.fromColumnMajorArray(e.matrix).equals(I.A.IDENTITY))&&!(0,_.A)(e.extensions)&&!(0,_.A)(e.extras)}function D(e,t){a.A.scene(e,function(e){const n=e.nodes;if((0,_.A)(n))for(let e=n.length;e>=0;--e)if(n[e]===t)return void n.splice(e,1)}),a.A.node(e,function(n,i){if((0,_.A)(n.children)){const o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),x(n)&&D(e,i))}}),delete e.nodes[t]}const Q=["u_tex","u_diffuse","u_emission","u_diffuse_tex"],N=["u_diffuse","u_diffuse_mat"];function R(e){e.pbrMetallicRoughness=(0,_.A)(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function M(e){return(0,_.A)(e.index)}function L(e){return Array.isArray(e)&&4===e.length}function P(e){const t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){const i=e[n];t[n]=i<=.04045?.07739938080495357*e[n]:Math.pow(.9478672985781991*(i+.055),2.4)}return t}function O(e,t){(0,_.A)(t)&&(L(t)?e.pbrMetallicRoughness.baseColorFactor=P(t):M(t)&&(e.pbrMetallicRoughness.baseColorTexture=t))}function F(e,t){(0,_.A)(t)&&(L(t)?e.emissiveFactor=t.slice(0,3):M(t)&&(e.emissiveTexture=t))}const U=function(e,t){const n=(t=t??{}).targetVersion;let o=e.version;e.asset=e.asset??{version:"1.0"},e.asset.version=e.asset.version??"1.0",o=(o??e.asset.version).toString(),Object.prototype.hasOwnProperty.call(C,o)||((0,_.A)(o)&&(o=o.substring(0,3)),Object.prototype.hasOwnProperty.call(C,o)||(o="1.0"));let r=C[o];for(;(0,_.A)(r)&&o!==n;)r(e,t),o=e.asset.version,r=C[o];return t.keepLegacyExtensions||(function(e,t){const n=(t=t??{}).baseColorTextureNames??Q,i=t.baseColorFactorNames??N;a.A.material(e,function(e){a.A.materialValue(e,function(t,o){-1!==n.indexOf(o)&&M(t)?(R(e),e.pbrMetallicRoughness.baseColorTexture=t):-1!==i.indexOf(o)&&L(t)&&(R(e),e.pbrMetallicRoughness.baseColorFactor=P(t))})}),(0,h.A)(e,"KHR_techniques_webgl"),(0,h.A)(e,"KHR_blend")}(e,t),function(e){a.A.material(e,function(t){const n=(t.extensions??{}).KHR_materials_common;if(!(0,_.A)(n))return;const o=n.values??{},r=o.ambient,a=o.diffuse,s=o.emission,A=o.transparency,c=n.doubleSided,l=n.transparent;R(t),"CONSTANT"===n.technique?((0,i.A)(e,"KHR_materials_unlit"),t.extensions=(0,_.A)(t.extensions)?t.extensions:{},t.extensions.KHR_materials_unlit={},O(t,s),O(t,r)):(O(t,a),F(t,r),F(t,s)),(0,_.A)(c)&&(t.doubleSided=c),(0,_.A)(A)&&((0,_.A)(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=A:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,A]),(0,_.A)(l)&&(t.alphaMode=l?"BLEND":"OPAQUE")}),(0,h.A)(e,"KHR_materials_common")}(e)),e}},493435:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){return(0,i.A)(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}},179006:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(369031),o=n(915325),r=n(491446),a=n(569445),s=n(48660),A=n(348287).Buffer;async function c(e={}){var t,n=e,i="object"==typeof window,o=typeof WorkerGlobalScope<"u",r="object"==typeof process&&(null==(t=process.versions)?void 0:t.node)&&"renderer"!=process.type;if(r){const{createRequire:e}=await Promise.resolve().then(()=>h);var a=e("file:///home/runner/work/geonode-mapstore-client/geonode-mapstore-client/geonode_mapstore_client/client/node_modules/@spz-loader/core/dist/index.js")}var s,c="./this.program",l="file:///home/runner/work/geonode-mapstore-client/geonode-mapstore-client/geonode_mapstore_client/client/node_modules/@spz-loader/core/dist/index.js";if(r){var u=a("fs");l.startsWith("file:")&&a("path").dirname(a("url").fileURLToPath(l)),s=e=>(e=D(e)?new URL(e):e,u.readFileSync(e)),1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(i||o){try{new URL(".",l)}catch{}o&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})}var d,g,f,p,m,_,I,E,y,C,b,B,v,w,T=console.log.bind(console),S=console.error.bind(console),x=!1,D=e=>e.startsWith("file://"),Q=!1;function N(){var e=p.buffer;m=new Int8Array(e),I=new Int16Array(e),n.HEAPU8=_=new Uint8Array(e),E=new Uint16Array(e),y=new Int32Array(e),C=new Uint32Array(e),n.HEAPF32=b=new Float32Array(e),B=new Float64Array(e),v=new BigInt64Array(e),w=new BigUint64Array(e)}var R,M=0,L=null;function P(e){var t;throw null==(t=n.onAbort)||t.call(n,e),S(e="Aborted("+e+")"),x=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),null==f||f(e),e}var O=e=>{for(;0<e.length;)e.shift()(n)},F=[],U=[],k=()=>{var e=n.preRun.shift();U.push(e)},G={},H=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function V(e){return this.N(C[e>>2])}var z={},j={},Y={},q=class extends Error{constructor(e){super(e),this.name="InternalError"}},W=(e,t,n)=>{function i(t){if((t=n(t)).length!==e.length)throw new q("Mismatched type converter count");for(var i=0;i<e.length;++i)Z(e[i],t[i])}e.forEach(e=>Y[e]=t);var o=Array(t.length),r=[],a=0;t.forEach((e,t)=>{j.hasOwnProperty(e)?o[t]=j[e]:(r.push(e),z.hasOwnProperty(e)||(z[e]=[]),z[e].push(()=>{o[t]=j[e],++a===r.length&&i(o)}))}),0===r.length&&i(o)},J=e=>{for(var t="";;){var n=_[e++];if(!n)return t;t+=String.fromCharCode(n)}},K=class extends Error{constructor(e){super(e),this.name="BindingError"}},X=e=>{throw new K(e)};function Z(e,t,n={}){return function(e,t,n={}){var i=t.name;if(!e)throw new K(`type "${i}" must have a positive integer typeid pointer`);if(j.hasOwnProperty(e)){if(n.wa)return;throw new K(`Cannot register type '${i}' twice`)}j[e]=t,delete Y[e],z.hasOwnProperty(e)&&(t=z[e],delete z[e],t.forEach(e=>e()))}(e,t,n)}var $=(e,t,n)=>{switch(t){case 1:return n?e=>m[e]:e=>_[e];case 2:return n?e=>I[e>>1]:e=>E[e>>1];case 4:return n?e=>y[e>>2]:e=>C[e>>2];case 8:return n?e=>v[e>>3]:e=>w[e>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},ee=e=>{throw new K(e.L.P.M.name+" instance already deleted")},te=!1,ne=()=>{},ie=e=>typeof FinalizationRegistry>"u"?(ie=e=>e,e):(te=new FinalizationRegistry(e=>{--(e=e.L).count.value,0===e.count.value&&(e.S?e.W.Y(e.S):e.P.M.Y(e.O))}),ne=e=>{te.unregister(e)},(ie=e=>{var t=e.L;return t.S&&te.register(e,{L:t},e),e})(e));function oe(){}var re=(e,t)=>Object.defineProperty(t,"name",{value:e}),ae={},se=(e,t,n)=>{if(void 0===e[t].R){var i=e[t];e[t]=function(...i){if(!e[t].R.hasOwnProperty(i.length))throw new K(`Function '${n}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].R})!`);return e[t].R[i.length].apply(this,i)},e[t].R=[],e[t].R[i.aa]=i}},Ae=(e,t,i)=>{if(n.hasOwnProperty(e)){if(void 0===i||void 0!==n[e].R&&void 0!==n[e].R[i])throw new K(`Cannot register public name '${e}' twice`);if(se(n,e,e),n[e].R.hasOwnProperty(i))throw new K(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`);n[e].R[i]=t}else n[e]=t,n[e].aa=i};function ce(e,t,n,i,o,r,a,s){this.name=e,this.constructor=t,this.$=n,this.Y=i,this.U=o,this.ra=r,this.ea=a,this.pa=s,this.ya=[]}var le=(e,t,n)=>{for(;t!==n;){if(!t.ea)throw new K(`Expected null or instance of ${n.name}, got an instance of ${t.name}`);e=t.ea(e),t=t.U}return e},ue=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e};function de(e,t){if(null===t){if(this.ha)throw new K(`null is not a valid ${this.name}`);return 0}if(!t.L)throw new K(`Cannot pass "${ue(t)}" as a ${this.name}`);if(!t.L.O)throw new K(`Cannot pass deleted object as a pointer of type ${this.name}`);return le(t.L.O,t.L.P.M,this.M)}function he(e,t){if(null===t){if(this.ha)throw new K(`null is not a valid ${this.name}`);if(this.ga){var n=this.ia();return null!==e&&e.push(this.Y,n),n}return 0}if(!t||!t.L)throw new K(`Cannot pass "${ue(t)}" as a ${this.name}`);if(!t.L.O)throw new K(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.fa&&t.L.P.fa)throw new K(`Cannot convert argument of type ${t.L.W?t.L.W.name:t.L.P.name} to parameter type ${this.name}`);if(n=le(t.L.O,t.L.P.M,this.M),this.ga){if(void 0===t.L.S)throw new K("Passing raw pointer to smart pointer is illegal");switch(this.Da){case 0:if(t.L.W!==this)throw new K(`Cannot convert argument of type ${t.L.W?t.L.W.name:t.L.P.name} to parameter type ${this.name}`);n=t.L.S;break;case 1:n=t.L.S;break;case 2:if(t.L.W===this)n=t.L.S;else{var i=t.clone();n=this.za(n,Me(()=>i.delete())),null!==e&&e.push(this.Y,n)}break;default:throw new K("Unsupporting sharing policy")}}return n}function ge(e,t){if(null===t){if(this.ha)throw new K(`null is not a valid ${this.name}`);return 0}if(!t.L)throw new K(`Cannot pass "${ue(t)}" as a ${this.name}`);if(!t.L.O)throw new K(`Cannot pass deleted object as a pointer of type ${this.name}`);if(t.L.P.fa)throw new K(`Cannot convert argument of type ${t.L.P.name} to parameter type ${this.name}`);return le(t.L.O,t.L.P.M,this.M)}var fe=(e,t,n)=>t===n?e:void 0===n.U||null===(e=fe(e,t,n.U))?null:n.pa(e),pe={},me=(e,t)=>{if(!t.P||!t.O)throw new q("makeClassHandle requires ptr and ptrType");if(!!t.W!=!!t.S)throw new q("Both smartPtrType and smartPtr must be specified");return t.count={value:1},ie(Object.create(e,{L:{value:t,writable:!0}}))};function _e(e,t,n,i,o,r,a,s,A,c,l){this.name=e,this.M=t,this.ha=n,this.fa=i,this.ga=o,this.xa=r,this.Da=a,this.na=s,this.ia=A,this.za=c,this.Y=l,o||void 0!==t.U?this.T=he:(this.T=i?de:ge,this.V=null)}var Ie,Ee=(e,t,i)=>{if(!n.hasOwnProperty(e))throw new q("Replacing nonexistent public symbol");void 0!==n[e].R&&void 0!==i?n[e].R[i]=t:(n[e]=t,n[e].aa=i)},ye=(e,t)=>{e=J(e);var n=Ie.get(t);if("function"!=typeof n)throw new K(`unknown function pointer with signature ${e}: ${t}`);return n};class Ce extends Error{}var be=e=>{e=at(e);var t=J(e);return At(e),t},Be=(e,t)=>{var n=[],i={};throw t.forEach(function e(t){i[t]||j[t]||(Y[t]?Y[t].forEach(e):(n.push(t),i[t]=!0))}),new Ce(`${e}: `+n.map(be).join([", "]))},ve=(e,t)=>{for(var n=[],i=0;i<e;i++)n.push(C[t+4*i>>2]);return n};function we(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].V)return!0;return!1}function Te(e,t,n,i,o,r){var a=t.length;if(2>a)throw new K("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==t[1]&&null!==n,A=we(t);n=!t[0].ma;var c=t[0],l=t[1];for(i=[e,X,i,o,H,c.N.bind(c),null==l?void 0:l.T.bind(l)],o=2;o<a;++o)c=t[o],i.push(c.T.bind(c));if(!A)for(o=s?1:2;o<t.length;++o)null!==t[o].V&&i.push(t[o].V);for(A=we(t),o=t.length-2,l=[],c=["fn"],s&&c.push("thisWired"),a=0;a<o;++a)l.push(`arg${a}`),c.push(`arg${a}Wired`);l=l.join(","),c=c.join(","),l=`return function (${l}) {\n`,A&&(l+="var destructors = [];\n");var u=A?"destructors":"null",d="humanName throwBindingError invoker fn runDestructors fromRetWire toClassParamWire".split(" ");for(s&&(l+=`var thisWired = toClassParamWire(${u}, this);\n`),a=0;a<o;++a){var h=`toArg${a}Wire`;l+=`var arg${a}Wired = ${h}(${u}, arg${a});\n`,d.push(h)}if(l+=(n||r?"var rv = ":"")+`invoker(${c});\n`,A)l+="runDestructors(destructors);\n";else for(a=s?1:2;a<t.length;++a)r=1===a?"thisWired":"arg"+(a-2)+"Wired",null!==t[a].V&&(l+=`${r}_dtor(${r});\n`,d.push(`${r}_dtor`));return n&&(l+="var ret = fromRetWire(rv);\nreturn ret;\n"),t=new Function(d,l+"}\n")(...i),re(e,t)}for(var Se,xe=e=>{const t=(e=e.trim()).indexOf("(");return-1===t?e:e.slice(0,t)},De=[],Qe=[0,1,,1,null,1,!0,1,!1,1],Ne=e=>{9<e&&0===--Qe[e+1]&&(Qe[e]=void 0,De.push(e))},Re=e=>{if(!e)throw new K(`Cannot use deleted val. handle = ${e}`);return Qe[e]},Me=e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:const t=De.pop()||Qe.length;return Qe[t]=e,Qe[t+1]=1,t}},Le={name:"emscripten::val",N:e=>{var t=Re(e);return Ne(e),t},T:(e,t)=>Me(t),X:V,V:null},Pe=(e,t,n)=>{switch(t){case 1:return n?function(e){return this.N(m[e])}:function(e){return this.N(_[e])};case 2:return n?function(e){return this.N(I[e>>1])}:function(e){return this.N(E[e>>1])};case 4:return n?function(e){return this.N(y[e>>2])}:function(e){return this.N(C[e>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Oe=(e,t)=>{var n=j[e];if(void 0===n)throw e=`${t} has unknown type ${be(e)}`,new K(e);return n},Fe=(e,t)=>{switch(t){case 4:return function(e){return this.N(b[e>>2])};case 8:return function(e){return this.N(B[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ue=Object.assign({optional:!0},Le),ke=(e,t,n)=>{var i=_;if(!(0<n))return 0;var o=t;n=t+n-1;for(var r=0;r<e.length;++r){var a=e.codePointAt(r);if(127>=a){if(t>=n)break;i[t++]=a}else if(2047>=a){if(t+1>=n)break;i[t++]=192|a>>6,i[t++]=128|63&a}else if(65535>=a){if(t+2>=n)break;i[t++]=224|a>>12,i[t++]=128|a>>6&63,i[t++]=128|63&a}else{if(t+3>=n)break;i[t++]=240|a>>18,i[t++]=128|a>>12&63,i[t++]=128|a>>6&63,i[t++]=128|63&a,r++}}return i[t]=0,t-o},Ge=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);127>=i?t++:2047>=i?t+=2:55296<=i&&57343>=i?(t+=4,++n):t+=3}return t},He=new TextDecoder,Ve=(e,t,n,i)=>{if(n=t+n,i)return n;for(;e[t]&&!(t>=n);)++t;return t},ze=new TextDecoder("utf-16le"),je=(e,t,n)=>(e>>=1,ze.decode(E.subarray(e,Ve(E,e,t/2,n)))),Ye=(e,t,n)=>{if(n??(n=2147483647),2>n)return 0;var i=t;n=(n-=2)<2*e.length?n/2:e.length;for(var o=0;o<n;++o)I[t>>1]=e.charCodeAt(o),t+=2;return I[t>>1]=0,t-i},qe=e=>2*e.length,We=(e,t,n)=>{var i="";e>>=2;for(var o=0;!(o>=t/4);o++){var r=C[e+o];if(!r&&!n)break;i+=String.fromCodePoint(r)}return i},Je=(e,t,n)=>{if(n??(n=2147483647),4>n)return 0;var i=t;n=i+n-4;for(var o=0;o<e.length;++o){var r=e.codePointAt(o);if(65535<r&&o++,y[t>>2]=r,(t+=4)+4>n)break}return y[t>>2]=0,t-i},Ke=e=>{for(var t=0,n=0;n<e.length;++n)65535<e.codePointAt(n)&&n++,t+=4;return t},Xe=[],Ze=(e,t,n)=>{var i=[];return e=e(i,n),i.length&&(C[t>>2]=Me(i)),e},$e={},et=e=>{var t=$e[e];return void 0===t?J(e):t},tt={},nt=()=>{if(!Se){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.language||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in tt)void 0===tt[e]?delete t[e]:t[e]=tt[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);Se=n}return Se},it=[null,[],[]],ot=new Uint8Array(123),rt=25;0<=rt;--rt)ot[48+rt]=52+rt,ot[65+rt]=rt,ot[97+rt]=26+rt;ot[43]=62,ot[47]=63,(()=>{let e=oe.prototype;Object.assign(e,{isAliasOf:function(e){if(!(this instanceof oe&&e instanceof oe))return!1;var t=this.L.P.M,n=this.L.O;e.L=e.L;var i=e.L.P.M;for(e=e.L.O;t.U;)n=t.ea(n),t=t.U;for(;i.U;)e=i.ea(e),i=i.U;return t===i&&n===e},clone:function(){if(this.L.O||ee(this),this.L.da)return this.L.count.value+=1,this;var e=ie,t=Object,n=t.create,i=Object.getPrototypeOf(this),o=this.L;return(e=e(n.call(t,i,{L:{value:{count:o.count,ba:o.ba,da:o.da,O:o.O,P:o.P,S:o.S,W:o.W}}}))).L.count.value+=1,e.L.ba=!1,e},delete(){if(this.L.O||ee(this),this.L.ba&&!this.L.da)throw new K("Object already scheduled for deletion");ne(this);var e=this.L;--e.count.value,0===e.count.value&&(e.S?e.W.Y(e.S):e.P.M.Y(e.O)),this.L.da||(this.L.S=void 0,this.L.O=void 0)},isDeleted:function(){return!this.L.O},deleteLater:function(){if(this.L.O||ee(this),this.L.ba&&!this.L.da)throw new K("Object already scheduled for deletion");return this.L.ba=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)})(),Object.assign(_e.prototype,{sa(e){return this.na&&(e=this.na(e)),e},ka(e){var t;null==(t=this.Y)||t.call(this,e)},X:V,N:function(e){function t(){return this.ga?me(this.M.$,{P:this.xa,O:n,W:this,S:e}):me(this.M.$,{P:this,O:e})}var n=this.sa(e);if(!n)return this.ka(e),null;var i=((e,t)=>{if(void 0===t)throw new K("ptr should not be undefined");for(;e.U;)t=e.ea(t),e=e.U;return pe[t]})(this.M,n);if(void 0!==i)return 0===i.L.count.value?(i.L.O=n,i.L.S=e,i.clone()):(i=i.clone(),this.ka(e),i);if(i=this.M.ra(n),!(i=ae[i]))return t.call(this);i=this.fa?i.oa:i.pointerType;var o=fe(n,this.M,i.M);return null===o?t.call(this):this.ga?me(i.M.$,{P:i,O:o,W:this,S:e}):me(i.M.$,{P:i,O:o})}}),n.print&&(T=n.print),n.printErr&&(S=n.printErr),n.wasmBinary&&(d=n.wasmBinary),n.thisProgram&&(c=n.thisProgram);var at,st,At,ct={x:()=>P(""),q:e=>{var t=G[e];delete G[e];var n=t.ia,i=t.Y,o=t.la,r=o.map(e=>e.va).concat(o.map(e=>e.Ba));W([e],r,e=>{var r={};return o.forEach((t,n)=>{var i=e[n],a=t.ta,s=t.ua,A=e[n+o.length],c=t.Aa,l=t.Ca;r[t.qa]={read:e=>i.N(a(s,e)),write:(e,t)=>{var n=[];c(l,e,A.T(n,t)),H(n)},optional:e[n].optional}}),[{name:t.name,N:e=>{var t,n={};for(t in r)n[t]=r[t].read(e);return i(e),n},T:(e,t)=>{for(var o in r)if(!(o in t)&&!r[o].optional)throw new TypeError(`Missing field: "${o}"`);var a=n();for(o in r)r[o].write(a,t[o]);return null!==e&&e.push(i,a),a},X:V,V:i}]})},n:(e,t,n,i,o)=>{t=J(t);let r=e=>e;if(i=0n===i){const e=8*n;r=t=>BigInt.asUintN(e,t),o=r(o)}Z(e,{name:t,N:r,T:(e,t)=>("number"==typeof t&&(t=BigInt(t)),t),X:$(t,n,!i),V:null})},B:(e,t,n,i)=>{Z(e,{name:t=J(t),N:function(e){return!!e},T:function(e,t){return t?n:i},X:function(e){return this.N(_[e])},V:null})},j:(e,t,n,i,o,r,a,s,A,c,l,u,d)=>{l=J(l),r=ye(o,r),s&&(s=ye(a,s)),c&&(c=ye(A,c)),d=ye(u,d);var h=(e=>{var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e})(l);Ae(h,function(){Be(`Cannot construct ${l} due to unbound types`,[i])}),W([e,t,n],i?[i]:[],t=>{if(t=t[0],i)var n=t.M,o=n.$;else o=oe.prototype;t=re(l,function(...e){if(Object.getPrototypeOf(this)!==a)throw new K(`Use 'new' to construct ${l}`);if(void 0===u.Z)throw new K(`${l} has no accessible constructor`);var t=u.Z[e.length];if(void 0===t)throw new K(`Tried to invoke ctor of ${l} with invalid number of parameters (${e.length}) - expected (${Object.keys(u.Z).toString()}) parameters instead!`);return t.apply(this,e)});var a=Object.create(o,{constructor:{value:t}});t.prototype=a;var A,u=new ce(l,t,a,d,n,r,s,c);return u.U&&((A=u.U).ja??(A.ja=[]),u.U.ja.push(u)),n=new _e(l,u,!0,!1,!1),A=new _e(l+"*",u,!1,!1,!1),o=new _e(l+" const*",u,!1,!0,!1),ae[e]={pointerType:A,oa:o},Ee(h,t),[n,A,o]})},g:(e,t,n,i,o,r)=>{var a=ve(t,n);o=ye(i,o),W([],[e],e=>{var n=`constructor ${(e=e[0]).name}`;if(void 0===e.M.Z&&(e.M.Z=[]),void 0!==e.M.Z[t-1])throw new K(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.M.Z[t-1]=()=>{Be(`Cannot construct ${e.name} due to unbound types`,a)},W([],a,i=>(i.splice(1,0,null),e.M.Z[t-1]=Te(n,i,null,o,r),[])),[]})},b:(e,t,n,i,o,r,a,s,A)=>{var c=ve(n,i);t=J(t),t=xe(t),r=ye(o,r),W([],[e],e=>{function i(){Be(`Cannot call ${o} due to unbound types`,c)}var o=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.M.ya.push(t);var l=e.M.$,u=l[t];return void 0===u||void 0===u.R&&u.className!==e.name&&u.aa===n-2?(i.aa=n-2,i.className=e.name,l[t]=i):(se(l,t,o),l[t].R[n-2]=i),W([],c,i=>(i=Te(o,i,e,r,a,A),void 0===l[t].R?(i.aa=n-2,l[t]=i):l[t].R[n-2]=i,[])),[]})},z:e=>Z(e,Le),r:(e,t,n,i)=>{function o(){}t=J(t),o.values={},Z(e,{name:t,constructor:o,N:function(e){return this.constructor.values[e]},T:(e,t)=>t.value,X:Pe(t,n,i),V:null}),Ae(t,o)},d:(e,t,n)=>{var i=Oe(e,"enum");t=J(t),e=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:re(`${i.name}_${t}`,function(){})}}),e.values[n]=i,e[t]=i},m:(e,t,n)=>{Z(e,{name:t=J(t),N:e=>e,T:(e,t)=>t,X:Fe(t,n),V:null})},l:(e,t,n,i,o,r,a)=>{var s=ve(t,n);e=J(e),e=xe(e),o=ye(i,o),Ae(e,function(){Be(`Cannot call ${e} due to unbound types`,s)},t-1),W([],s,n=>(n=[n[0],null].concat(n.slice(1)),Ee(e,Te(e,n,null,o,r,a),t-1),[]))},c:(e,t,n,i,o)=>{t=J(t);let r=e=>e;if(0===i){var a=32-8*n;r=e=>e<<a>>>a,o=r(o)}Z(e,{name:t,N:r,T:(e,t)=>t,X:$(t,n,0!==i),V:null})},a:(e,t,n)=>{function i(e){return new o(m.buffer,C[e+4>>2],C[e>>2])}var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];Z(e,{name:n=J(n),N:i,X:i},{wa:!0})},h:e=>{Z(e,Ue)},A:(e,t)=>{Z(e,{name:t=J(t),N(e){var t=(t=e+4)?He.decode(_.subarray(t,Ve(_,t,C[e>>2],!0))):"";return At(e),t},T(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;if(!(n||ArrayBuffer.isView(t)&&1==t.BYTES_PER_ELEMENT))throw new K("Cannot pass non-string to std::string");var i=n?Ge(t):t.length,o=st(4+i+1),r=o+4;return C[o>>2]=i,n?ke(t,r,i+1):_.set(t,r),null!==e&&e.push(At,o),o},X:V,V(e){At(e)}})},f:(e,t,n)=>{if(n=J(n),2===t)var i=je,o=Ye,r=qe;else i=We,o=Je,r=Ke;Z(e,{name:n,N:e=>{var n=i(e+4,C[e>>2]*t,!0);return At(e),n},T:(e,i)=>{if("string"!=typeof i)throw new K(`Cannot pass non-string to C++ string type ${n}`);var a=r(i),s=st(4+a+t);return C[s>>2]=a/t,o(i,s+4,a+t),null!==e&&e.push(At,s),s},X:V,V(e){At(e)}})},i:(e,t,n,i,o,r)=>{G[e]={name:J(t),ia:ye(n,i),Y:ye(o,r),la:[]}},e:(e,t,n,i,o,r,a,s,A,c)=>{G[e].la.push({qa:J(t),va:n,ta:ye(i,o),ua:r,Ba:a,Aa:ye(s,A),Ca:c})},C:(e,t)=>{Z(e,{ma:!0,name:t=J(t),N:()=>{},T:()=>{}})},p:(e,t,n)=>{var[i,...o]=((e,t)=>{for(var n=Array(e),i=0;i<e;++i)n[i]=Oe(C[t+4*i>>2],`parameter ${i}`);return n})(e,t);t=i.T.bind(i);var r=o.map(e=>e.X.bind(e));e--;var a={toValue:Re};switch(e=r.map((e,t)=>{var n=`argFromPtr${t}`;return a[n]=e,`${n}(args${t?"+"+8*t:""})`}),n){case 0:var s="toValue(handle)";break;case 2:s="new (toValue(handle))";break;case 3:s="";break;case 1:a.getStringOrSymbol=et,s="toValue(handle)[getStringOrSymbol(methodName)]"}return s+=`(${e})`,i.ma||(a.toReturnWire=t,a.emval_returnValue=Ze,s=`return emval_returnValue(toReturnWire, destructorsRef, ${s})`),s=`return function (handle, methodName, destructorsRef, args) {\n  ${s}\n  }`,n=new Function(Object.keys(a),s)(...Object.values(a)),s=`methodCaller<(${o.map(e=>e.name)}) => ${i.name}>`,(e=>{var t=Xe.length;return Xe.push(e),t})(re(s,n))},E:Ne,o:(e,t,n,i,o)=>Xe[e](t,n,i,o),D:e=>{var t=Re(e);H(t),Ne(e)},s:(e,t,n,i)=>{var o=(new Date).getFullYear(),r=new Date(o,0,1).getTimezoneOffset();o=new Date(o,6,1).getTimezoneOffset(),C[e>>2]=60*Math.max(r,o),y[t>>2]=+(r!=o),e=(t=e=>{var t=Math.abs(e);return`UTC${0<=e?"-":"+"}${String(Math.floor(t/60)).padStart(2,"0")}${String(t%60).padStart(2,"0")}`})(r),t=t(o),o<r?(ke(e,n,17),ke(t,i,17)):(ke(e,i,17),ke(t,n,17))},y:e=>{var t=_.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=t*(1+.2/n);i=Math.min(i,e+100663296);e:{i=(Math.min(2147483648,65536*Math.ceil(Math.max(e,i)/65536))-p.buffer.byteLength+65535)/65536|0;try{p.grow(i),N();var o=1;break e}catch{}o=void 0}if(o)return!0}return!1},t:(e,t)=>{var n,i=0,o=0;for(n of nt()){var r=t+i;C[e+o>>2]=r,i+=ke(n,r,1/0)+1,o+=4}return 0},u:(e,t)=>{var n=nt();for(var i of(C[e>>2]=n.length,e=0,n))e+=Ge(i)+1;return C[t>>2]=e,0},v:()=>52,w:function(){return 70},k:(e,t,n,i)=>{for(var o=0,r=0;r<n;r++){var a=C[t>>2],s=C[t+4>>2];t+=8;for(var A=0;A<s;A++){var c=e,l=_[a+A],u=it[c];0===l||10===l?(c=1===c?T:S,l=Ve(u,0),c(l=He.decode(u.buffer?u.subarray(0,l):new Uint8Array(u.slice(0,l)))),u.length=0):u.push(l)}o+=s}return C[i>>2]=o,0}},lt=await async function(){var e;function t(e){var t;return lt=e.exports,p=lt.F,N(),Ie=lt.H,at=(e=lt).I,n._malloc=st=e.J,n._free=At=e.K,M--,null==(t=n.monitorRunDependencies)||t.call(n,M),0==M&&L&&(e=L,L=null,e()),lt}M++,null==(e=n.monitorRunDependencies)||e.call(n,M);var i={a:ct};return n.instantiateWasm?new Promise(e=>{n.instantiateWasm(i,(n,i)=>{e(t(n))})}):(R??(R=(e=>{if(r)return e=A.from(e,"base64"),new Uint8Array(e.buffer,e.byteOffset,e.length);for(var t,n,i=0,o=0,a=e.length,s=new Uint8Array((3*a>>2)-("="==e[a-2])-("="==e[a-1]));i<a;i+=4,o+=3)t=ot[e.charCodeAt(i+1)],n=ot[e.charCodeAt(i+2)],s[o]=ot[e.charCodeAt(i)]<<2|t>>4,s[o+1]=t<<4|n>>2,s[o+2]=n<<6|ot[e.charCodeAt(i+3)];return s})("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C0EAEKEDRQRAQZiDASEBIARBmIMBQRgQiwFFDQJBsIMBIQEgBEGwgwFBGBCLAUUNAkEAIQBBvO4BLQAARQRAA0AgAEECdCAAQcYfEKIDNgKM7gEgAEEBaiIAQQZHDQALQbzuAUEBOgAAQaTuAUGM7gEoAgA2AgALQYzuASEBIAJBCGoiAEGM7gFBGBCLAUUNAkGk7gEhASAAQaTuAUEYEIsBRQ0CQRgQNCIBRQ0BCyABIAIpAgg3AgAgASACKQIYNwIQIAEgAikCEDcCCAwBC0EAIQELIAJBIGokAEGc8QFBAToAAEGY8QEgATYCACABC80KAgV/CX4jAEHgAGsiBSQAIARC////////P4MhCiACIASFQoCAgICAgICAgH+DIQsgAkL///////8/gyIMQiCIIQ8gBEIwiKdB//8BcSEHAkACQCACQjCIp0H//wFxIglB//8Ba0GCgH5PBEAgB0H//wFrQYGAfksNAQsgAVAgAkL///////////8AgyINQoCAgICAgMD//wBUIA1CgICAgICAwP//AFEbRQRAIAJCgICAgICAIIQhCwwCCyADUCAEQv///////////wCDIgJCgICAgICAwP//AFQgAkKAgICAgIDA//8AURtFBEAgBEKAgICAgIAghCELIAMhAQwCCyABIA1CgICAgICAwP//AIWEUARAIAIgA4RQBEBCgICAgICA4P//ACELQgAhAQwDCyALQoCAgICAgMD//wCEIQtCACEBDAILIAMgAkKAgICAgIDA//8AhYRQBEAgASANhEIAIQFQBEBCgICAgICA4P//ACELDAMLIAtCgICAgICAwP//AIQhCwwCCyABIA2EUARAQgAhAQwCCyACIAOEUARAQgAhAQwCCyANQv///////z9YBEAgBUHQAGogASAMIAEgDCAMUCIGG3lCwABCACAGG3ynIgZBD2sQREEQIAZrIQYgBSkDWCIMQiCIIQ8gBSkDUCEBCyACQv///////z9WDQAgBUFAayADIAogAyAKIApQIggbeULAAEIAIAgbfKciCEEPaxBEIAYgCGtBEGohBiAFKQNIIQogBSkDQCEDCyAHIAlqIAZqQf//AGshBgJAIApCD4YiDkIgiEKAgICACIQiAiABQiCIIgR+IhAgA0IPhiIRQiCIIgogD0KAgASEIg1+fCIPIBBUrSAPIANCMYggDoRC/////w+DIgMgDEL/////D4MiDH58Ig4gD1StfCACIA1+fCAOIA4gEUKAgP7/D4MiDyAMfiIRIAQgCn58IhAgEVStIBAgECADIAFC/////w+DIgF+fCIQVq18fCIOVq18IAMgDX4iEiACIAx+fCIRIBJUrUIghiARQiCIhHwgDiAOIBFCIIZ8Ig5WrXwgDiANIA9+Ig0gCiAMfnwiDCABIAJ+fCICIAMgBH58IgNCIIggAiADVq0gDCANVK0gAiAMVK18fEIghoR8IgIgDlStfCACIBAgBCAPfiIMIAEgCn58IgRCIIggBCAMVK1CIIaEfCIKIBBUrSAKIANCIIZ8IgMgClStfHwiCiACVK18IAogAyAEQiCGIgIgASAPfnwiASACVK18IgIgA1StfCIEIApUrXwiA0KAgICAgIDAAINQRQRAIAZBAWohBgwBCyABQj+IIANCAYYgBEI/iIQhAyAEQgGGIAJCP4iEIQQgAUIBhiEBIAJCAYaEIQILIAZB//8BTgRAIAtCgICAgICAwP//AIQhC0IAIQEMAQsCfiAGQQBMBEBBASAGayIHQf8ATQRAIAVBMGogASACIAZB/wBqIgYQRCAFQSBqIAQgAyAGEEQgBUEQaiABIAIgBxCKASAFIAQgAyAHEIoBIAUpAzAgBSkDOIRCAFKtIAUpAyAgBSkDEISEIQEgBSkDKCAFKQMYhCECIAUpAwAhBCAFKQMIDAILQgAhAQwCCyADQv///////z+DIAatQjCGhAsgC4QhCyABUCACQgBZIAJCgICAgICAgICAf1EbRQRAIAsgBEIBfCIBUK18IQsMAQsgASACQoCAgICAgICAgH+FhFBFBEAgBCEBDAELIAsgBCAEQgGDfCIBIARUrXwhCwsgACABNwMAIAAgCzcDCCAFQeAAaiQACwYAIAAQLQt8AQN/IwBBEGsiASQAIAEgADYCDCMAQRBrIgIkACAAKAIAQX9HBEAgAkEIaiACQQxqIAFBDGoQVRBVIQMDQCAAKAIAQQFGDQALIAAoAgBFBEAgAEEBNgIAIAMQ0gIgAEF/NgIACwsgAkEQaiQAIAAoAgQgAUEQaiQAQQFrCyAAIAAgAUEBazYCBCAAQeDVATYCACAAQZCtATYCACAAC/cFAQl/IwBBEGsiCSQAIAEQ1wIgCUEMaiABEFUhCCAAQQhqIgMQayACTQRAAkAgAkEBaiIAIAMQayIBSwRAIwBBIGsiCiQAAkAgACABayIHIAMoAgggAygCBGtBAnVNBEAgAyAHENkCDAELIApBDGohAQJ/IAMQayAHaiEFIwBBEGsiACQAIAAgBTYCDCAFELwCIgRNBEAgAxC5AiIFIARBAXZJBEAgACAFQQF0NgIIIABBCGogAEEMahCgASgCACEECyAAQRBqJAAgBAwBCxCMAQALIQQgAxBrIQUjAEEQayIAJAAgASADQQxqIgs2AhAgAUEANgIMIAQEfyAAQQhqIAsgBBC7AiAAKAIIIQYgACgCDAVBAAshBCABIAY2AgAgASAGIAVBAnRqIgU2AgggASAGIARBAnRqNgIMIAEgBTYCBCAAQRBqJAAjAEEQayIGJAAgASgCCCEEIAZBBGoiACABQQhqNgIIIAAgBDYCACAAIAQgB0ECdGo2AgQgACgCACEEA0AgACgCBCAERwRAIAEoAhAaIAQQugIgACAAKAIAQQRqIgQ2AgAMAQsLIAAoAgggACgCADYCACAGQRBqJAAgASgCBCADKAIAIgAgAygCBGtqIQQgAygCBCAAayIHBEAgBCAAIAf8CgAACyABIAQ2AgQgAyADKAIANgIEIAMgAUEEahDXASADQQRqIAFBCGoQ1wEgA0EIaiABQQxqENcBIAEgASgCBDYCACADEGsaIAEoAgQhAANAIAEoAggiBCAARwRAIAEgBEEEazYCCCABKAIQGgwBCwsgASgCACIABEAgASgCECAAIAEoAgwgASgCAGtBAnUQuAILCyAKQSBqJAAMAQsgACABSQRAIAMoAgAgAEECdGohACADEGsaIAMgABDYAgsLCyADIAIQggEoAgAEQCADIAIQggEoAgAQvwELIAgQrAEhACADIAIQggEgADYCACAIKAIAIQAgCEEANgIAIAAEQCAAEL8BCyAJQRBqJAALySgBC38jAEEQayIKJAACQAJAAkACQAJAAkACQAJAAkACQCAAQfQBTQRAQYzqASgCACIEQRAgAEELakH4A3EgAEELSRsiBkEDdiIAdiIBQQNxBEACQCABQX9zQQFxIABqIgJBA3QiAUG06gFqIgAgASgCvOoBIgEoAggiBUYEQEGM6gEgBEF+IAJ3cTYCAAwBCyAFIAA2AgwgACAFNgIICyABQQhqIQAgASACQQN0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KAIAKAIcEQQAC8EBAQN/IAAtAABBIHFFBEACQCAAKAIQIgMEfyADBSAAEN8BDQEgACgCEAsgACgCFCIEayACSQRAIAAgASACIAAoAiQRAwAaDAELAkACQCACRSAAKAJQQQBIcg0AIAIhAwNAIAEgA2oiBUEBay0AAEEKRwRAIANBAWsiAw0BDAILCyAAIAEgAyAAKAIkEQMAIANJDQIgAiADayECIAAoAhQhBAwBCyABIQULIAQgBSACEHEaIAAgACgCFCACajYCFAsLC6EBAQJ/AkAgABAfRSACIAFrQQVIcg0AIAEgAhDHASACQQRrIQQgABAjIgIgABAfaiEFAkADQAJAIAIsAAAhACABIARPDQAgAEEATCAAQf8ATnJFBEAgASgCACACLAAARw0DCyABQQRqIQEgAiAFIAJrQQFKaiECDAELCyAAQQBMIABB/wBOcg0BIAIsAAAgBCgCAEEBa0sNAQsgA0EENgIACwtQAQF+AkAgA0HAAHEEQCABIANBQGqthiECQgAhAQwBCyADRQ0AIAIgA60iBIYgAUHAACADa62IhCECIAEgBIYhAQsgACABNwMAIAAgAjcDCAtpAQF/IwBBgAJrIgUkACAEQYDABHEgAiADTHJFBEAgBSABIAIgA2siA0GAAiADQYACSSIBGxCYAiABRQRAA0AgACAFQYACEEIgA0GAAmsiA0H/AUsNAAsLIAAgBSADEEILIAVBgAJqJAALBABBAAsKACAALQALQQd2CwoAIABB0PIBEHoLCgAgAEHY8gEQegvPCQIEfwR+IwBB8ABrIgYkACAEQv///////////wCDIQkCQAJAIAFQIgUgAkL///////////8AgyIKQoCAgICAgMD//wB9QoCAgICAgMCAgH9UIApQG0UEQCADQgBSIAlCgICAgICAwP//AH0iC0KAgICAgIDAgIB/ViALQoCAgICAgMCAgH9RGw0BCyAFIApCgICAgICAwP//AFQgCkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEEIAEhAwwCCyADUCAJQoCAgICAgMD//wBUIAlCgICAgICAwP//AFEbRQRAIARCgICAgICAIIQhBAwCCyABIApCgICAgICAwP//AIWEUARAQoCAgICAgOD//wAgAiABIAOFIAIgBIVCgICAgICAgICAf4WEUCIFGyEEQgAgASAFGyEDDAILIAMgCUKAgICAgIDA//8AhYRQDQEgASAKhFAEQCADIAmEQgBSDQIgASADgyEDIAIgBIMhBAwCCyADIAmEUEUNACABIQMgAiEEDAELIAMgASABIANUIAkgClYgCSAKURsiCBshCiAEIAIgCBsiDEL///////8/gyEJIAIgBCAIGyILQjCIp0H//wFxIQcgDEIwiKdB//8BcSIFRQRAIAZB4ABqIAogCSAKIAkgCVAiBRt5QsAAQgAgBRt8pyIFQQ9rEEQgBikDaCEJIAYpA2AhCkEQIAVrIQULIAEgAyAIGyEDIAtC////////P4MhASAHBH4gAQUgBkHQAGogAyABIAMgASABUCIHG3lCwABCACAHG3ynIgdBD2sQREEQIAdrIQcgBikDUCEDIAYpA1gLQgOGIANCPYiEQoCAgICAgIAEhCEBIAlCA4YgCkI9iIQgAiAEhSEEAn4gA0IDhiICIAUgB0YNABogBSAHayIHQf8ASwRAQgAhAUIBDAELIAZBQGsgAiABQYABIAdrEEQgBkEwaiACIAEgBxCKASAGKQM4IQEgBikDMCAGKQNAIAYpA0iEQgBSrYQLIQlCgICAgICAgASEIQsgCkIDhiEKAkAgBEIAUwRAQgAhA0IAIQQgCSAKhSABIAuFhFANAiAKIAl9IQIgCyABfSAJIApWrX0iBEL/////////A1YNASAGQSBqIAIgBCACIAQgBFAiBxt5QsAAQgAgBxt8p0EMayIHEEQgBSAHayEFIAYpAyghBCAGKQMgIQIMAQsgCSAKfCICIAlUrSABIAt8fCIEQoCAgICAgIAIg1ANACAJQgGDIARCP4YgAkIBiISEIQIgBUEBaiEFIARCAYghBAsgDEKAgICAgICAgIB/gyEDIAVB//8BTgRAIANCgICAgICAwP//AIQhBEIAIQMMAQtBACEHAkAgBUEASgRAIAUhBwwBCyAGQRBqIAIgBCAFQf8AahBEIAYgAiAEQQEgBWsQigEgBikDACAGKQMQIAYpAxiEQgBSrYQhAiAGKQMIIQQLIARCPYYgAkIDiIQhASAEQgOIQv///////z+DIAetQjCGhCADhCEEAkACQCACp0EHcSIFQQRHBEAgBCABIAEgBUEES618IgNWrXwhBAwBCyAEIAEgASABQgGDfCIDVq18IQQMAQsgBUUN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C14BA38gAEEANgIIIABCADcCACABKAIAIQMgASgCBCIBIANrIgRBAnUiAgRAIAAgAhCuAyAAKAIEIQIgBEUgASADRnJFBEAgAiADIAT8CgAACyAAIAIgBGo2AgQLIAALDQAgACgCACABQQJ0agsXACAAEEcEQCAAIAE2AgQPCyAAIAEQUAthAQF/IwBBEGsiAiQAIAIgADYCDAJAIAAgAUYNAANAIAIgAUEBayIBNgIIIAAgAU8NASACKAIMIAIoAggQ8wIgAiACKAIMQQFqIgA2AgwgAigCCCEBDAALAAsgAkEQaiQAC6wBAQR/IwBBEGsiByQAAkAgAEUNACAEKAIMIQYgAiABa0ECdSIIQQBKBEAgACABIAgQjQIgCEcNAQsgAyABa0ECdSIBIAZIBEAgACAHQQRqIAYgAWsiASAFEP0CIgUQIyABEI0CIQYgBRA5GiABIAZHDQELIAMgAmtBAnUiAUEASgRAIAAgAiABEI0CIAFHDQELIAQoAgwaIARBADYCDCAAIQkLIAdBEGokACAJCycBAX8jAEEQayIDJAAgAyACNgIMIABB5AAgASACENEBIANBEGokAAvbAQIBfwJ+QQEhBAJAIABCAFIgAUL///////////8AgyIFQoCAgICAgMD//wBWIAVCgICAgICAwP//AFEbDQAgAkIAUiADQv///////////wCDIgZCgICAgICAwP//AFYgBkKAgICAgIDA//8AURsNACAAIAKEIAUgBoSEUARAQQAPCyABIAODQgBZBEAgACACVCABIANTIAEgA1EbBEBBfw8LIAAgAoUgASADhYRCAFIPCyAAIAJWIAEgA1UgASADURsEQEF/DwsgACAChSABIAOFhEIAUiEECyAEC+wBAQR/IwBBEGsiBCQAIABBADYCBCMAQRBrIgUkACAEQQA6AA8gACAAKAIAQQxrKAIAahDZASEGIAAgACgCAEEMaygCAGohAwJAIAYEQCADKAJIBEAgACAAKAIAQQxrKAIAaigCSBDFAwsgBCAAIAAoAgBBDGsoAgBqENkBOgAPDAELIANBBBDVAQsgBUEQaiQAQQQhAyAELQAPBEAgACAAIAAoAgBBDGsoAgBqKAIYIgMgASACIAMoAgAoAiARAwAiATYCBEEGQQAgASACRxshAwsgACAAKAIAQQxrKAIAaiADENUBIARB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AxsLPAAgAEEANgIIIABCADcCACAAIAEoAgA2AgAgACABKAIENgIEIAAgASgCCDYCCCABQQA2AgggAUIANwIACywBAX8gAEEANgIIIABCADcCACAAIAEoAgAiAiABKAIEIgEgASACaxDAAyAACwgAIABB/wFxC/wBAQN/IAAoAgQgACgCACIDa0ECdSICIAFJBEAjAEEgayIDJAACQCABIAJrIgIgACgCCCAAKAIEIgFrQQJ1TQRAIAAoAgQiASACQQJ0aiECA0AgASACRgRAIAAgAjYCBAUgAUEANgIAIAFBBGohAQwBCwsMAQsgA0EMaiAAIAEgACgCAGtBAnUgAmoQtgEgACgCBCAAKAIAa0ECdSAAEIcCIgQoAggiASACQQJ0aiECA0AgASACRwRAIAFBADYCACABQQRqIQEMAQsLIAQgAjYCCCAAIAQQhQIgBBCBAgsgA0EgaiQADwsgASACSQRAIAAgAyABQQJ0ajYCBAsLUgECf0HU3gEoAgAiASAAQQdqQXhxIgJqIQACQCACQQAgACABTRtFBEAgAD8AQRB0TQ0BIAAQGA0BC0GI6gFBMDYCAEF/DwtB1N4BIAA2AgAgAQt/AgF+A38CQCAAQoCAgIAQVARAIAAhAgwBCwNAIAFBAWsiASAAIABCCoAiAkIKfn2nQTByOgAAIABC/////58BViACIQANAAsLIAJQRQRAIAKnIQMDQCABQQFrIgEgAyADQQpuIgRBCmxrQTByOgAAIANBCUsgBCEDDQALCyABC78BAQN/IAAoAgQgACgCACIDayICIAFJBEAjAEEgayIDJAACQCABIAJrIgIgACgCCCAAKAIEIgFrTQRAIAAgAhCYAwwBCyACIANBDGogACABIAJqIAAoAgBrELQBIAAoAgQgACgCAGsgABDGASIEKAIIIgFqIQIDQCABIAJHBEAgAUEAOgAAIAFBAWohAQwBCwsgBCACNgIIIAAgBBDvASAEELoBCyADQSBqJAAPCyABIAJJBEAgACABIANqNgIECwt9AQN/AkACQCAAIgFBA3FFDQAgAS0AAEUEQEEADwsDQCABQQFqIgFBA3FFDQEgAS0AAA0ACwwBCwNAIAEiAkEEaiEBQYCChAggAigCACIDayADckGAgYKEeHFBgIGChHhGDQALA0AgAiIBQQFqIQIgAS0AAA0ACwsgASAA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BEBBCiEBIAAQXgwBCyAAEH5BAWshASAAKAIECyIDIAFGBEAgACABQQEgASABEPQBIAAQIxoMAQsgABAjGiAEDQAgACIBIANBAWoQUAwBCyAAKAIAIQEgACADQQFqNgIECyABIANqIgAgAkEPahBdIAJBADoADiAAQQFqIAJBDmoQXSACQRBqJAALoQIBA38jAEEgayIIJABB9////wciCSABQX9zaiACTwRAIAAQIyEKIAFB8////wNJBEAgCCABQQF0NgIcIAggASACajYCECAIQRBqIAhBHGoQoAEoAgAQnwFBAWohCQsgCEEcaiAIQRhqIAAQVSgCABC8ASAIQRBqIAkQngEgCCgCECECIAgoAhQaIAQEQCACIAogBBBNCyAGBEAgAiAEaiAHIAYQTQsgAyAEIAVqIglrIQcgAyAJRwRAIAIgBGogBmogBCAKaiAFaiAHEE0LIAFBCkcEQCAKEIsCCyAAIAI2AgAgACAIKAIUEFwgACAEIAZqIAdqIgA2AgQgCEEAOgAPIAAgAmogCEEPahBdIAhBHGoQuwEgCEEgaiQADwsQWwALCQAgAEEBEKgCCwoAIAAoAgAQHxoLCQAgACABEFUaCwcAIABBAkkLBABBBAsoAQF/IAAgACgCBEEBayIBNgIEIAFBf0YEQCAAIAAoAgAoAggRAgALC5UBAQN/IwBBEGsiBCQAIAQgATYCDCAEIAM2AgggBEEEaiAEQQxqEGMgBCgCCCEDIwBBEGsiASQAIAEgAzYCDCABIAM2AghBfyEFAkBBAEEAIAIgAxDRASIDQQBIDQAgACADQQFqIgMQNCIANgIAIABFDQAgACADIAIgASgCDBDRASEFCyABQRBqJAAQYiAEQRBqJAAgBQsPACAAIAAoAgAoAiQRAAALEQAgACABIAEoAgAoAiARAQALDgAgACABKAIANgIAIAALCABB/////wcLBQBB/wALOwAgACADNgIQIAAgAQR/IAEQUwVBAAsiAzYCACAAIAIgA2oiAjYCCCAAIAEgA2o2AgwgACACNgIEIAALYQEBfyMAQRBrIgIkACACIAA2AgwCQCAAIAFGDQADQCACIAFBBGsiATYCCCAAIAFPDQEgAigCDCACKAIIENcBIAIgAigCDEEEaiIANgIMIAIoAgghAQwACwALIAJBEGokAAs5AgF/AX4jAEEQayIEJAAgAykDACEFIAQgAykDCDcDCCAEIAU3AwAgACABIAIgBBDAASAEQRBqJAAL0AEBAn8gAkGAEHEEQCAAQSs6AAAgAEEBaiEACyACQYAIcQRAIABBIzoAACAAQQFqIQALIAJBhAJxIgNBhAJHBEAgAEGu1AA7AAAgAEECaiEACyACQYCAAXEhAgNAIAEtAAAiBARAIAAgBDoAACAAQQFqIQAgAUEBaiEBDAELCyAAAn8CQCADQYACRwRAIANBBEcNAUHGAEHmACACGwwCC0HFAEHlACACGwwBC0HBAEHhACACGyADQYQCRg0AGkHHAEHnACACGws6AAAgA0GEAkcLKwEBfyMAQRBrIgUkACAFIAQoAgA2AgAgACABIAIgAyAFEJYBIAVBEGokAAuqAQEBfwJAIANBgBBxRSACRXINACADQcoAcSIEQQhGIARBwABGcg0AIABBKzoAACAAQQFqIQALIANBgARxBEAgAEEjOgAAIABBAWohAAsDQCABLQAAIgQEQCAAIAQ6AAAgAEEBaiEAIAFBAWohAQwBCwsgAAJ/Qe8AIANBygBxIgFBwABGDQAaQdgAQfgAIANBgIABcRsgAUEIRg0AGkHkAEH1ACACGws6AAALDAAgABAjIAFBAnRqC5IEAQt/IwBBgAFrIgokACAKIAE2AnwgAiADELUCIQggCkHjADYCECAKQQhqQQAgCkEQaiIJEDYhDwJAAkACQCAIQeUATwRAIAgQNCIJRQ0BIA8gCRA8CyAJIQcgAiEBA0AgASADRgRAA0AgACAKQfwAaiIBECtBASAIGwRAIAAgARArBEAgBSAFKAIAQQJyNgIACwNAIAIgA0YNBiAJLQAAQQJGDQcgCUEBaiEJIAJBDGohAgwACwALIAAQNyEOIAZFBEAgBCAOEEEhDgsgDUEBaiEMQQAhECAJIQcgAiEBA0AgASADRgRAIAwhDSAQRQ0CIAAQPhogCSEHIAIhASAIIAtqQQJJDQIDQCABIANGBEAMBAUCQCAHLQAAQQJHDQAgARAfIA1GDQAgB0EAOgAAIAtBAWshCwsgB0EBaiEHIAFBDGohAQwBCwALAAUCQCAHLQAAQQFHDQAgASANEMwBKAIAIRECQCAGBH8gEQUgBCAREEELIA5GBEBBASEQIAEQHyAMRw0CIAdBAjoAACALQQFqIQsMAQsgB0EAOgAACyAIQQFrIQgLIAdBAWohByABQQxqIQEMAQsACwALAAUgB0ECQQEgARBaIgwbOgAAIAdBAWohByABQQxqIQEgCyAMaiELIAggDGshCAwBCwALAAsQPQALIAUgBSgCAEEEcjYCAAsgDxA1IApBgAFqJAAgAgsRACAAIAEgACgCACgCDBEEAAuTBAELfyMAQYABayIKJAAgCiABNgJ8IAIgAxC1AiEIIApB4wA2AhAgCkEIakEAIApBEGoiCRA2IQ8CQAJAAkAgCEHlAE8EQCAIEDQiCUUNASAPIAkQPAsgCSEHIAIhAQNAIAEgA0YEQANAIAAgCkH8AGoiARAsQQEgCBsEQCAAIAEQLARAIAUgBSgCAEECcjYCAAsDQCACIANGDQYgCS0AAEECRg0HIAlBAWohCSACQQxqIQIMAAsACyAAEDghDiAGRQRAIAQgDhDOASEOCyANQQFqIQxBACEQIAkhByACIQEDQCABIANGBEAgDCENIBBFDQIgABA/GiAJIQcgAiEBIAggC2pBAkkNAgNAIAEgA0YEQAwEBQJAIActAABBAkcNACABEB8gDUYNACAHQQA6AAAgC0EBayELCyAHQQFqIQcgAUEMaiEBDAELAAsABQJAIActAABBAUcNACABIA0QIiwAACERAkAgBgR/IBEFIAQgERDOAQsgDkYEQEEBIRAgARAfIAxHDQIgB0ECOgAAIAtBAWohCwwBCyAHQQA6AAALIAhBAWshCAsgB0EBaiEHIAFBDGohAQwBCwALAAsABSAHQQJBASABEFoiDBs6AAAgB0EBaiEHIAFBDGohASALIAxqIQsgCCAMayEIDAELAAsACxA9AAsgBSAFKAIAQQRyNgIACyAPEDUgCkGAAWokACACC0oBAn8CQCAALQAAIgJFIAIgAS0AACIDR3INAANAIAEtAAEhAyAALQABIgJFDQEgAUEBaiEBIABBAWohACACIANGDQALCyACIANrC4QBAQJ/IwBBoAFrIgQkACAEIAAgBEGeAWogARsiADYClAEgBCABQQFrIgVBACABIAVPGzYCmAEgBEEAQZAB/AsAIARBfzYCTCAEQeIANgIkIARBfzYCUCAEIARBnwFqNgIsIAQgBEGUAWo2AlQgAEEAOgAAIAQgAiADEM0DIARBoAFqJAALuwIBBH8gA0H87QEgAxsiBSgCACEDAkAC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IBAtIAAoAiQQLSAAKAIwEC0gACgCPBAtCyAACwcAIAEgAGsLDABBARDWARogABAtCwkAIAAQsQEQLQsTACAAIAEgAiAAKAIAKAIwEQMACwkAIAAQ2AEQLQsMACAAQQRqENoBIAALDAAgAEEIahDaASAACygBAn8jAEEQayICJAAgASgCACAAKAIASCEDIAJBEGokACABIAAgAxsLEAAgACABNwMIIABCADcDAAsCAAsUACAAQZj1ADYCACAAQQRqECUgAAvyAwICfgV/IwBBIGsiBSQAIAFC////////P4MhAgJ+IAFCMIhC//8BgyIDpyIEQYH4AGtB/Q9NBEAgAkIEhiAAQjyIhCECIARBgPgAa60hAwJAIABC//////////8PgyIAQoGAgICAgICACFoEQCACQgF8IQIMAQsgAEKAgICAgICAgAhSDQAgAkIBgyACfCECC0IAIAIgAkL/////////B1YiBBshACAErSADfAwBCyAAIAKEUCADQv//AVJyRQRAIAJCBIYgAEI8iIRCgICAgICAgASEIQBC/w8MAQsgBEH+hwFLBEBCACEAQv8PDAELQYD4AEGB+AAgA1AiBxsiCCAEayIGQfAASgRAQgAhAEIADAELIAVBEGogACACIAJCgICAgICAwACEIAcbIgJBgAEgBmsQRCAFIAAgAiAGEIoBIAUpAwhCBIYgBSkDACICQjyIhCEAAkAgBCAIRyAFKQMQIAUpAxiEQgBSca0gAkL//////////w+DhCICQoGAgICAgICACFoEQCAAQgF8IQAMAQsgAkKAgICAgICAgAhSDQAgAEIBgyAAfCEACyAAQoCAgICAgIAIhSAAIABC/////////wdWIgQbIQAgBK0LIQIgBUEgaiQAIAFCgICAgICAgICAf4MgAkI0hoQgAIS/C4kCAAJAIAAEfyABQf8ATQ0BAkBB3OEBKAIAKAIARQRAIAFBgH9xQYC/A0YNAwwBCyABQf8PTQRAIAAgAUE/cUGAAXI6AAEgACABQQZ2QcABcjoAAEECDwsgAUGAQHFBgMADRyABQYCwA09xRQRAIAAgAUE/cUGAAXI6AAIgACABQQx2QeABcjoAACAAIAFBBnZBP3FBgAFyOgABQQMPCyABQYCABGtB//8/TQRAIAAgAUE/cUGAAXI6AAMgACABQRJ2QfABcjoAACAA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AXI2AgQgCSAGIAkoAgBBAXFyQQJyNgIAIAEgBmoiAiACKAIEQQFyNgIEIAEgBhDbAQsCQCAAKAIEIgJBA3FFDQAgAkF4cSIBIAVBEGpNDQAgACAFIAJBAXFyQQJyNgIEIAAgBWoiBCABIAVrIgJBA3I2AgQgACABaiIBIAEoAgRBAXI2AgQgBCACENsBCyAAQQhqCwsiAEUNARogCCAANgIMQQAhAQsgAQshAEEAIAgoAgwgABshAQsgCEEQaiQAIAENAEHk/gEoAgAiAEUNACAAEQwADAELCyABRQRAEOsBCyABCwoAIAEgAGtBDG0LCQAgABAuNgIACyMBAn8gACEBA0AgASICQQRqIQEgAigCAA0ACyACIABrQQJ1Cy8BAX8jAEEQayIDJAACQCAAIAFGBEAgAEEAOgB4DAELIAEgAhCpAQsgA0EQaiQACxAAIAAoAgggACgCAGtBAnULCQAgAEEANgIAC0kBAX8jAEEQayIDJAACQAJAIAJBHksNACABLQB4QQFxDQAgAUEBOgB4DAELIAIQwQIhAQsgA0EQaiQAIAAgAjYCBCAAIAE2AgALOgECfyMAQRBrIgAkACAAQf////8DNgIMIABB/////wc2AgggAEEMaiAAQQhqELUDKAIAIABBEGokAAs0AQF/IwBBEGsiAyQAIAMgARBzNgIMIAMgAhBzNgIIIAAgA0EMaiADQQhqEGYgA0EQaiQAC04BAX8jAEEQayIDJAAgAyABNgIIIAMgADYCDCADIAI2AgRBACEBIANBBGoiACADQQxqENMBRQRAIAAgA0EIahDTASEBCyADQRBqJAAgAQswAQF/IwBBEGsiAyQAIAMgATYCDCADIAI2AgggACADQQxqIANBCGoQZiADQRBqJAALMwEBfyMAQRBrIgMkACAAEB8aIAAgAhCDASADQQA6AA8gASACaiADQQ9qEF0gA0EQaiQACzEAIABB/////wNLBEAQqgIACwJ/IABBAnQhAEEEENYBBEAgAEEEELQCDAELIAAQUwsLCQAgABDtARAtCxUAIABB8KoBNgIAIABBEGoQIBogAAsVACAAQciqATYCACAAQQxqECAaIAALgAMBBH8gAiEAA0ACQCAEIAdNIAAgA09yDQAgACwAACIBQf8BcSEFAn9BASABQQBODQAaIAFBQkkNASABQV9NBEAgAyAA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ZEYNAEEAIQAgC0EANgIQIBEgDygCACALKAJkIAtBEGoQQyALKAIQBEAgBSAFKAIAQQRyNgIADAELQQEhAAsgEBAgGiANECAaIA4QIBogDBAgGiARECAaIA8QNQwDCyACIQELIANBAWohAwwACwALIAtBkARqJAAgAAsMACAAQQFBLRD9AhoLCwAgAEEBQS0QsAILHAEBfyAALQAAIQIgACABLQAAOgAAIAEgAjoAAAtlAQF/IwBBEGsiBiQAIAZBADoADyAGIAU6AA4gBiAEOgANIAZBJToADCAFBEAgBkENaiAGQQ5qEPMCCyACIAEgASACKAIAEIoCIAZBDGogAyAAKAIAEJ4DIAFqNgIAIAZBEGokAAtBACABIAIgAyAEQQQQZyEBIAMtAABBBHFFBEAgACABQdAPaiABQewOaiABIAFB5ABJGyABQcUASBtB7A5rNgIACwtAACACIAMgAEEIaiAAKAIIKAIEEQAAIgAgAEGgAmogBSAEQQAQzQEgAGsiAEGfAkwEQCABIABBDG1BDG82AgALC0AAIAIgAyAAQQhqIAAoAggoAgARAAAiACAAQagBaiAFIARBABDNASAAayIAQacBTARAIAEgAEEMbUEHbzYCAAsLQQAgASACIAMgBEEEEGghASADLQAAQQRxRQRAIAAgAUHQD2ogAUHsDmogASABQeQASRsgAUHFAEgbQewOazYCAAsLQAAgAiADIABBCGogACgCCCgCBBEAACIAIABBoAJqIAUgBEEAEM8BIABrIgBBnwJMBEAgASAAQQxtQQxvNgIACwtAACACIAMgAEEIaiAAKAIIKAIAEQAAIgAgAEGoAWogBSAEQQAQzwEgAGsiAEGnAUwEQCABIABBDG1BB282AgALCxgBAX9BDBBTIgBBADYCCCAAQgA3AgAgAAsEAEECC8oBAQR/IwBBEGsiAyQAAkAgAUH3////A00EQAJAIAEQvQEEQCAAIAEQUCAAIQQMAQsgA0EIaiABEJABQQFqEI8BIAMoAgwaIAAgAygCCCIENgIAIAAgAygCDBBcIAAgATYCBAsjAEEQayIFJAAgBSACNgIMIAQhBiABIQIDQCACBEAgBiAFKAIMNgIAIAJBAWshAiAGQQRqIQYMAQsLIAVBEGokACADQQA2AgQgBCABQQJ0aiADQQRqEFYgA0EQaiQADAELEFsA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hoRCAEKAgICAgIDAwz8QLyAFKQNIIQIgBSkDQCEEDAELIAlC////////P4MgBiAHcq1CMIaEIQILIAAgBDcDACAAIAI3AwggBUGAAWokAAuIEAIFfw9+IwBB0AJrIgUkACAEQv///////z+DIQsgAkL///////8/gyEKIAIgBIVCgICAgICAgICAf4MhDCAEQjCIp0H//wFxIQcCQAJAIAJCMIinQf//AXEiCEH//wFrQYKAfk8EQCAHQf//AWtBgYB+Sw0BCyABUCACQv///////////wCDIg5CgICAgICAwP//AFQgDkKAgICAgIDA//8AURtFBEAgAkKAgICAgIAghCEMDAILIANQIARC////////////AIMiAkKAgICAgIDA//8AVCACQoCAgICAgMD//wBRG0UEQCAEQoCAgICAgCCEIQwgAyEBDAILIAEgDkKAgICAgIDA//8AhYRQBEAgAyACQoCAgICAgMD//wCFhFAEQEIAIQFCgICAgICA4P//ACEMDAMLIAxCgICAgICAwP//AIQhDEIAIQEMAgsgAyACQoCAgICAgMD//wCFhFAEQEIAIQEMAgsgASAOhFAEQEKAgICAgIDg//8AIAwgAiADhFAbIQxCACEBDAILIAIgA4RQBEAgDEKAgICAgIDA//8AhCEMQgAhAQwCCyAOQv///////z9YBEAgBUHAAmogASAKIAEgCiAKUCIGG3lCwABCACAGG3ynIgZBD2sQREEQIAZrIQYgBSkDyAIhCiAFKQPAAiEBCyACQv///////z9WDQAgBUGwAmogAyALIAMgCyALUCIJG3lCwABCACAJG3ynIglBD2sQRCAGIAlqQRBrIQYgBSkDuAIhCyAFKQOwAiEDCyAFQaACaiALQoCAgICAgMAAhCISQg+GIANCMYiEIgJCAEKAgICAsOa8gvUAIAJ9IgRCABBAIAVBkAJqQgAgBSkDqAJ9QgAgBEIAEEAgBUGAAmogBSkDmAJCAYYgBSkDkAJCP4iEIgRCACACQgAQQCAFQfABaiAEQgBCACAFKQOIAn1CABBAIAVB4AFqIAUpA/gBQgGGIAUpA/ABQj+IhCIEQgAgAkIAEEAgBUHQAWogBEIAQgAgBSkD6AF9QgAQQCAFQcABaiAFKQPYAUIBhiAFKQPQAUI/iIQiBEIAIAJCABBAIAVBsAFqIARCAEIAIAUpA8gBfUIAEEAgBUGgAWogAkIAIAUpA7gBQgGGIAUpA7ABQj+IhEIBfSICQgAQQCAFQZABaiADQg+GQgAgAkIAEEAgBUHwAGogAkIAQgAgBSkDqAEgBSkDoAEiDiAFKQOYAXwiBCAOVK18IARCAVatfH1CABBAIAVBgAFqQgEgBH1CACACQgAQQCAGIAggB2tqIghB//8AaiEGAn4gBSkDcCITQgGGIg0gBSkDiAEiD0IBhiAFKQOAAUI/iIR8IhBC5+wAfSIUQiCIIgIgCkKAgICAgIDAAIQiFUIBhiIWQiCIIgR+IhEgAUIBhiIOQiCIIgsgECAUVq0gDSAQVq0gBSkDeEIBhiATQj+IhCAPQj+IfHx8QgF9IhNCIIgiEH58Ig0gEVStIA0gDSATQv////8PgyITIAFCP4giFyAKQgGGhEL/////D4MiCn58Ig1WrXwgBCAQfnwgBCATfiIRIAogEH58Ig8gEVStQiCGIA9CIIiEfCANIA9CIIZ8Ig8gDVStfCAPIA8gFEL/////D4MiFCAKfiINIAIgC358IhEgDVStIBEgESATIA5C/v///w+DIg1+fCIRVq18fCIPVq18IA8gBCAUfiIYIA0gEH58IgQgAiAKfnwiCiALIBN+fCIQQiCIIAogEFatIAQgGFStIAQgClatfHxCIIaEfCIEIA9UrXwgBCAEIBEgAiANfiIKIAsgFH58IgJCIIggAiAKVK1CIIaEfCIKIBFUrSAKIAogEEIghnwiClatfHwiBFatfCAEIAQgCiACQiCGIgIgDSAUfnwgAlStQn+FIgJWIAIgClJxrXwiBFatfCICQv////////8AWARAIBYgF4QhFSAFQdAAaiAEIAJCgICAgICAwABUIgetIguGIgogAiALhiAEQgGIIAdBP3OtiIQiBCADIBIQQCAIQf7/AGogBiAHG0EBayEGIAFCMYYgBSkDWH0gBSkDUCIBQgBSrX0hC0IAIAF9DAELIAVB4ABqIAJCP4YgBEIBiIQiCiACQgGIIgQgAyASEEAgAUIwhiAFKQNofSAFKQNgIgJCAFKtfSELIAEhDkIAIAJ9CyECIAZB//8BTgRAIAxCgICAgICAwP//AIQhDEIAIQEMAQsCfiAGQQBKBEAgC0IBhiACQj+IhCEBIARC////////P4MgBq1CMIaEIQsgAkIBhgwBCyAGQY9/TARAQgAhAQwCCyAFQUBrIAogBEEBIAZrEIoBIAVBMGogDiAVIAZB8ABqEEQgBUEgaiADIBIgBSkDQCIKIAUpA0giCxBAIAUpAzggBSkDKEIBhiAFKQMgIgFCP4iEfSAFKQMwIgIgAUIBhiIEVK19IQEgAiAEfQshAiAFQRBqIAMgEkIDQgAQQCAFIAMgEkIFQgAQQCALIAogAyAKQgGDIgMgAnwiAlQgASACIANUrXwiASASViABIBJRG618IgMgClStfCIEIAMgAyAEQoCAgICAgMD//wBUIAIgBSkDEFYgASAFKQMYIgRWIAEgBFEbca18IgNWrXwiBCADIARCgICAgICAwP//AFQgAiAFKQMAViABIAUpAwgiAlYgASACURtxrXwiASADVK18IAyEIQwLIAAgATcDACAAIAw3AwggBUHQAmokAAu/AgEBfyMAQdAAayIEJAACQCADQYCAAU4EQCAEQSBqIAEgAkIAQoCAgICAgID//wAQLyAEKQMoIQIgBCkDICEBIANB//8BSQRAIANB//8AayEDDAILIARBEGogASACQgBCgICAgICAgP//ABAvQf3/AiADIANB/f8CTxtB/v8BayEDIAQpAxghAiAEKQMQIQEMAQsgA0GBgH9KDQAgBEFAayABIAJCAEKAgICAgICAORAvIAQpA0ghAiAEKQNAIQEgA0H0gH5LBEAgA0GN/wBqIQMMAQsgBEEwaiABIAJCAEKAgICAgICAORAvQeiBfSADIANB6IF9TRtBmv4BaiEDIAQpAzghAiAEKQMwIQELIAQgASACQgAgA0H//wBqrUIwhhAvIAAgBCkDCDcDCCAAIAQpAwA3AwAgBEHQAGokAAs8ACAAIAE3AwAgACACQv///////z+DIAJCgICAgICAwP//AINCMIinIANCMIinQYCAAnFyrUIwhoQ3AwgLwAECAX8CfkF/IQMCQCAAQgBSIAFC////////////AIMiBEKAgICAgIDA//8AViAEQoCAgICAgMD//wBRGw0AIAJC////////////AIMiBUKAgICAgIDA//8AViAFQoCAgICAgMD//wBScQ0AIAAgBCAFhIRQBEBBAA8LIAEgAoNCAFkEQCABIAJSIAEgAlNxDQEgACABIAKFhEIAUg8LIABCAFIgASACVSABIAJRGw0AIAAg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EKYCCyEAIAEQTAR/QZiEASgCACABQf8BcUECdGooAgAFIAELwAsJACAAENACEC0LOwADQCABIAJGRQRAIAMhACAEIAEoAgAQTAR/IAEoAgAFIAALOgAAIARBAWohBCABQQRqIQEMAQsLIAELDAAgASACIAEQTBvACyoAA0AgASACRkUEQCADIAEsAAA2AgAgA0EEaiEDIAFBAWohAQwBCwsgAQsPACAAIAEgAkGgkAEQpwILHAAgARBMBH9BoJABKAIAIAFBAnRqKAIABSABCwsPACAAIAEgAkGYhAEQpwILHAAgARBMBH9BmIQBKAIAIAFBAnRqKAIABSABCwsQACAABEAgABDHAwsgABAtCzoAA0ACQCACIANGDQAgAigCABBMRQ0AIAIoAgBBAnRBkKIBaigCACABcUUNACACQQRqIQIMAQsLIAILOQADQAJAIAIgA0YNACACKAIAEEwEQCACKAIAQQJ0QZCiAWooAgAgAXENAQsgAkEEaiECDAELCyACC0YAA0AgASACRkUEQEEAIQAgAyABKAIAEEwEfyABKAIAQQJ0QZCiAWooAgAFQQALNgIAIANBBGohAyABQQRqIQEMAQsLIAELIwBBACEAIAIQTAR/IAJBAnRBkKIBaigCACABcUEARwVBAAsLDwAgACAAKAIAKAIEEQIACwkAIAAQ1gIQLQsVAQF/QdQAEFMiAEEAQdQA/AsAIAALFAAgACgCACABaiACLQAAOgAAQQELrgEAAkAgBRBHRQRAIAAgBSkCADcCACAAIAUoAgg2AgggABBeGgwBCyAFKAIAIQQgBSgCBCECIwBBEGsiAyQAAkACQAJAIAIQvQEEQCAAIgEgAhBQDAELIAJB9////wNLDQEgA0EIaiACEJABQQFqEI8BIAMoAgwaIAAgAygCCCIBNgIAIAAgAygCDBBcIAAgAjYCBAsgASAEIAJBAWoQZSADQRBqJAAMAQsQWwALCwsJACAAIAUQ5AELhAMBCH8jAEHgA2siACQAIABB3ANqIgYgAxAnIAYQSCEKIAUQHwRAIAVBABDMASgCACAKQS0QS0YhCwsgAiALIABB3ANqIABB2ANqIABB1ANqIABB0ANqIABBxANqECQiDCAAQbgDahAkIgYgAEGsA2oQJCIHIABBqANqEN8CIABB4wA2AhAgAEEIakEAIABBEGoiAhA2IQgCQAJ/IAUQHyAAKAKoA0oEQCAFEB8hCSAAKAKoAyENIAcQHyAJIA1rQQF0aiAGEB9qIAAoAqgDakEBagwBCyAHEB8gBhAfaiAAKAKoA2pBAmoLIglB5QBJDQAgCCAJQQJ0EDQQPCAIKAIAIgINABA9AAsgAiAAQQRqIAAgAygCBCAFECMgBRAjIAUQH0ECdGogCiALIABB2ANqIAAoAtQDIAAoAtADIAwgBiAHIAAoAqgDEN4CIAEgAiAAKAIEIAAoAgAgAyAEEIUBIAgQNSAHEDkaIAYQORogDBAgGiAAQdwDahAlIABB4ANqJAALvgQBC38jAEGgCGsiACQAIAAgBjcDmAggACAFNwOQCCAAIAU3AwAgACAGNwMIIAAgAEGgB2oiBzYCnAcgB0HAECAAEIYBIQcgAEHjADYCgAQgAEH4A2pBACAAQYAEaiIJEDYhDiAAQeMANgKABCAAQfADakEAIAkQNiEKAkAgB0HkAE8EQCAAQZwHahAuQcAQIABBkAhqEMgBIgdBf0YNASAOIAAoApwHEDwgCiAHQQJ0EDQQPCAKEOQCDQEgCigCACEJCyAAQewDaiIIIAMQJyAIEEgiESAAKAKcByIIIAcgCGogCRBvIAdBAEoEQCAAKAKcBy0AAEEtRiEPCyACIA8gAEHsA2ogAEHoA2ogAEHkA2ogAEHgA2ogAEHUA2oQJCIQIABByANqECQiCCAAQbwDahAkIgsgAEG4A2oQ3wIgAEHjADYCICAAQRhqQQAgAEEgaiICEDYhDAJ/IAAoArgDIg0gB0gEQCALEB8gByANa0EBdGogCBAfaiAAKAK4A2pBAWoMAQsgCxAfIAgQH2ogACgCuANqQQJqCyINQeUATwRAIAwgDUECdBA0EDwgDCgCACICRQ0BCyACIABBFGogAEEQaiADKAIEIAkgCSAHQQJ0aiARIA8gAEHoA2ogACgC5AMgACgC4AMgECAIIAsgACgCuAMQ3gIgASACIAAoAhQgACgCECADIAQQhQEgDBA1IAsQORogCBA5GiAQECAaIABB7ANqECUgChA1IA4QNSAAQaAIaiQADwsQPQALMwECfyABKAIEIAEoAgAiAWsgAksEQEEBIQQgASACai0AACEDCyAAIAQ6AAEgACADOgAAC/wCAQh/IwBBsAFrIgAkACAAQawBaiIGIAMQJyAGEEkhCiAFEB8EQCAFQQAQIi0AACAKQS0QQUH/AXFGIQsLIAIgCyAAQawBaiAAQagBaiAAQacBaiAAQaYBaiAAQZgBahAkIgwgAEGMAWoQJCIGIABBgAFqECQiByAAQfwAahDjAiAAQeMANgIQIABBCGpBACAAQRBqIgIQNiEIAkACfyAFEB8gACgCfEoEQCAFEB8hCSAAKAJ8IQ0gBxAfIAkgDWtBAXRqIAYQH2ogACgCfGpBAWoMAQsgBxAfIAYQH2ogACgCfGpBAmoLIglB5QBJDQAgCCAJEDQQPCAIKAIAIgINABA9AAsgAiAAQQRqIAAgAygCBCAFECMgBRAjIAUQH2ogCiALIABBqAFqIAAsAKcBIAAsAKYBIAwgBiAHIAAoAnwQ4gIgASACIAAoAgQgACgCACADIAQQgAEgCBA1IAcQIBogBhAgGiAMECAaIABBrAFqECUgAEGwAWokAAu1BAELfyMAQcADayIAJAAgACAGNwO4AyAAIAU3A7ADIAAgBTcDACAAIAY3AwggACAAQcACaiIHNgK8AiAHQcAQIAAQhgEhByAAQeMANgLQASAAQcgBakEAIABB0AFqIgkQNiEOIABB4wA2AtABIABBwAFqQQAgCRA2IQoCQCAHQeQATwRAIABBvAJqEC5BwBAgAEGwA2oQyAEiB0F/Rg0BIA4gACgCvAIQPCAKIAcQNBA8IAoQ5AINASAKKAIAIQkLIABBvAFqIgggAxAnIAgQSSIRIAAoArwCIgggByAIaiAJEHkgB0EASgRAIAAoArwCLQAAQS1GIQ8LIAIgDyAAQbwBaiAAQbgBaiAAQbcBaiAAQbYBaiAAQagBahAkIhAgAEGcAWoQJCIIIABBkAFqECQiCyAAQYwBahDjAiAAQeMANgIgIABBGGpBACAAQSBqIgIQNiEMAn8gACgCjAEiDSAHSARAIAsQHyAHIA1rQQF0aiAIEB9qIAAoAowBakEBagwBCyALEB8gCBAfaiAAKAKMAWpBAmoLIg1B5QBPBEAgDCANEDQQPCAMKAIAIgJFDQELIAIgAEEUaiAAQRBqIAMoAgQgCSAHIAlqIBEgDyAAQbgBaiAALAC3ASAALAC2ASAQIAggCyAAKAKMARDiAiABIAIgACgCFCAAKAIQIAMgBBCAASAMEDUgCxAgGiAIECAaIBAQIBogAEG8AWoQJSAKEDUgDhA1IABBwANqJAAPCxA9AAvtAQEDfyAAKAIEIAAoAgAiBGsiAyABSQRAIwBBIGsiBCQAAkAgASADayIDIAAoAgggACgCBCIBa00EQCADIAAoAgQiAWohAwNAIAEgA0YEQCAAIAM2AgQFIAEgAi0AADoAACABQQFqIQEMAQsLDAELIAMgBEEMaiAAIAEgA2ogACgCAGsQtAEgACgCBCAAKAIAayAAEMYBIgUoAggiAWohAwNAIAEgA0cEQCABIAItAAA6AAAgAUEBaiEBDAELCyAFIAM2AgggACAFEO8BIAUQugELIARBIGokAA8LIAEgA0kEQCAAIAEgBGo2AgQLC4EFAQR/IwBBwANrIgAkACAAIAI2ArgDIAAgATYCvAMgAEHkADYCFCAAQRhqIABBIGogAEEUaiIIEDYhCiAAQRBqIgEgBBAnIAEQSCEHIABBADoADyAAQbwDaiACIAMgASAEKAIEIAUgAEEPaiAHIAogCCAAQbADahDqAgRAIwBBEGsiASQAIAYQHxoCQCAGEEcEQCAGKAIAIAFBADYCDCABQQxqEFYgBkEANgIEDAELIAFBADYCCCAGIAFBCGoQViAGQQAQUAsgAUEQaiQAIAAtAA9BAUYEQCAGIAdBLRBLEOoBCyAHQTAQSyEBIAooAgAhAiAAKAIUIgNBBGshBANAAkAgAiAETw0AIAIoAgAgAUcNACACQQRqIQIMAQsLIwBBEGsiBCQAIAYQHyEBIAYQ8QEhBwJAIAIgAxD1ASIIRQ0AIAYQIyAGECMgBhAfQQJ0akEEaiACEL4CRQRAIAggByABa0sEQCAGIAcgASAHayAIaiABIAEQ6AILIAIgAyAGECMgAUECdGoQ5wIgBEEANgIEIARBBGoQViAGIAEgCGoQgwEMAQsgBEEEaiIBIAIgAxCZAyABECMhCCABEB8hAiMAQRBrIgckAAJAIAIgBhDxASIJIAYQHyIDa00EQCACRQ0BIAYQIyIJIANBAnRqIAggAhBlIAYgAiADaiICEIMBIAdBADYCDCAJIAJBAnRqIAdBDGoQVgwBCyAGIAkgAiAJayADaiADIANBACACIAgQrwILIAdBEGokACABEDkaCyAEQRBqJAALIABBvANqIABBuANqECsEQCAFIAUoAgBBAnI2AgALIAAoArwDIABBEGoQJSAKEDUgAEHAA2okAAvRAwEDfyMAQfAEayIAJAAgACACNgLoBCAAIAE2AuwEIABB5AA2AhAgAEHIAWogAEHQAWogAEEQaiIBEDYhByAAQcABaiIIIAQQJyAIEEghCSAAQQA6AL8BAkAgAEHsBGogAiADIAggBCgCBCAFIABBvwFqIAkgByAAQcQBaiAAQeAEahDqAkUNACAAQcsbKAAANgC3ASAAQcQbKQAANwOwASAJIABBsAFqIABBugFqIABBgAFqEG8gAEHjADYCECAAQQhqQQAgARA2IQMgASEEAkAgACgCxAEgBygCAGsiAUGJA04EQCADIAFBAnVBAmoQNBA8IAMoAgBFDQEgAygCACEECyAALQC/AUEBRgRAIARBLToAACAEQQFqIQQLIAcoAgAhAgNAIAAoAsQBIAJNBEACQCAEQQA6AAAgACAGNgIAIABBEGogABCjA0EBRw0AIAMQNQwECwUgBCAAQbABaiAAQYABaiIBIAFBKGogAhD5ASABa0ECdWotAAA6AAAgBEEBaiEEIAJBBGohAgwBCwsQPQALED0ACyAAQewEaiAAQegEahArBEAgBSAFKAIAQQJyNgIACyAAKALsBCAAQcABahAlIAcQNSAAQfAEaiQAC5ABAQJ/IAACfyAAKAIEIgIgACgCCEkEQCACIAEtAAA6AAAgAkEBagwBCyMAQSBrIgMkACADQQxqIAAgACgCBCAAKAIAa0EBahC0ASAAKAIEIAAoAgBrIAAQxgEiAigCCCABLQAAOgAAIAIgAigCCEEBajYCCCAAIAIQ7wEgACgCBCACELoBIANBIGokAAs2AgQLBQBBpCoL0AQBA38jAEGQAWsiACQAIAAgAjYCiAEgACABNgKMASAAQeQANgIUIABBGGogAEEgaiAAQRRqIgcQNiEJIABBEGoiCCAEECcgCBBJIQEgAEEAOgAPIABBjAFqIAIgAyAIIAQoAgQgBSAAQQ9qIAEgCSAHIABBhAFqEPACBEACQCAGLAALQQBIBEAgBigCAEEAOgAAIAZBADYCBAwBCyAGQQA6AAsgBkEAOgAACyAALQAPQQFGBEAgBiABQS0QQRC4AQsgAUEwEEEgCSgCACECIAAoAhQiBEEBayEDQf8BcSEBA0ACQCACIANPDQAgAi0AACABRw0AIAJBAWohAgwBCwsjAEEQayIBJAAgBhAfIQMgBhAoIQgCQCACIAQQigIiB0UNACAGECMgBhAjIAYQH2pBAWogAhC+AkUEQCAHIAggA2tLBEAgBiAIIAMgCGsgB2ogAyADEPQBCyACIAQgBhAjIANqELQDIAFBADoADyABQQ9qEF0gBiADIAdqEIMBDAELIAEgAiAEELgDIAEQIyEIIAEQHyECIwBBEGsiBCQAAkAgAiAGECgiByAGEB8iA2tNBEAgAkUNASAGECMiByADaiAIIAIQTSAGIAIgA2oiAhCDASAEQQA6AA8gAiAHaiAEQQ9qEF0MAQsgBiAHIAIgB2sgA2ogAyADQQAgAiAIELkBCyAEQRBqJAAgARAgGgsgAUEQaiQACyAAQYwBaiAAQYgBahAsBEAgBSAFKAIAQQJyNgIACyAAKAKMASAAQRBqECUgCRA1IABBkAFqJAALxwMBA38jAEGQAmsiACQAIAAgAjYCiAIgACABNgKMAiAAQeQANgIQIABBmAFqIABBoAFqIABBEGoiARA2IQcgAEGQAWoiCCAEECcgCBBJIQkgAEEAOgCPAQJAIABBjAJqIAIgAyAIIAQoAgQgBSAAQY8BaiAJIAcgAEGUAWogAEGEAmoQ8AJFDQAgAEHLGygAADYAhwEgAEHEGykAADcDgAEgCSAAQYABaiAAQYoBaiAAQfYAahB5IABB4wA2AhAgAEEIakEAIAEQNiEDIAEhBAJAIAAoApQBIAcoAgBrIgFB4wBOBEAgAyABQQJqEDQQPCADKAIARQ0BIAMoAgAhBAsgAC0AjwFBAUYEQCAEQS06AAAgBEEBaiEECyAHKAIAIQIDQCAAKAKUASACTQRAAkAgBEEAOgAAIAAgBjYCACAAQRBqIAAQowNBAUcNACADEDUMBAsFIAQgAEH2AGoiASABQQpqIAIQ/QEgAGsgAGotAAo6AAAgBEEBaiEEIAJBAWohAgwBCwsQPQALED0ACyAAQYwCaiAAQYgCahAsBEAgBSAFKAIAQQJyNgIACyAAKAKMAiAAQZABahAlIAcQNSAAQZACaiQACxcAIAAoAgAgAUECdGogAioCADgCAEEBC5EDAQJ/IwBBoANrIgckACAHIAdBoANqIgM2AgwjAEGQAWsiAiQAIAIgAkGEAWo2AhwgAEEIaiACQSBqIgggAkEcaiAEIAUgBhD0AiACQgA3AxAgAiAINgIMIAdBEGoiBSAHKAIMEPUBIQQgACgCCCEGIwBBEGsiACQAIAAgBjYCDCAAQQhqIABBDGoQYyAFIAJBDGogBCACQRBqEJsDIQQQYiAAQRBqJAAgBEF/RgRAED0ACyAHIAUgBEECdGo2AgwgAkGQAWokACAHKAIMIQIjAEEQayIGJAAjAEEgayIAJAAgAEEYaiAFIAIQvwIgAEEQaiAAKAIYIQIgACgCHCEIIwBBEGsiBCQAIAQgAjYCCCAEIAE2AgwDQCACIAhHBEAgBEEMaiACKAIAELsDIAQgAkEEaiICNgIIDAELCyAEQQhqIARBDGoQZiAEQRBqJAAgACAFIAAoAhAQjgE2AgwgACAAKAIUNgIIIAZBCGogAEEMaiAAQQhqEGYgAEEgaiQAIAYoAgwgBkEQaiQAIAMkAAuAAgECfyMAQYABayICJAAgAiACQfQAajYCDCAAQQhqIAJBEGoiAyACQQxqIAQgBSAGEPQCIAIoAgwhBCMAQRBrIgYkACMAQSBrIgAkACAAQRhqIAMgBBC/AiAAQRBqIAAoAhghBCAAKAIcIQgjAEEQayIFJAAgBSAENgIIIAUgATYCDANAIAQgCEcEQCAFQQxqIAQsAAAQvwMgBSAEQQFqIgQ2AggMAQsLIAVBCGogBUEMahBmIAVBEGokACAAIAMgACgCEBCOATYCDCAAIAAoAhQ2AgggBkEIaiAAQQxqIABBCGoQZiAAQSBqJAAgBigCDCAGQRBqJAAgAkGAAWokAAvdDAEBfyMAQTBrIgckACAHIAE2AiwgBEEANgIAIAcgAxAnIAcQSCEIIAcQJQJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAGQcEAaw45AAEXBBcFFwYHFxcXChcXFxcODxAXFxcTFRcXFxcXFxcAAQIDAxcXARcIFxcJCxcMFw0XCxcXERIUFgsgACAFQRhqIAdBLGogAiAEIAgQ9wIMGAsgACAFQRBqIAdBLGogAiAEIAgQ9gIMFwsgAEEIaiAAKAIIKAIMEQAAIQEgByAAIAcoAiwgAiADIAQgBSABECMgARAjIAEQH0ECdGoQbTYCLAwWCyAHQSxqIAIgBCAIQQIQZyEAAkAgBCgCACIBQQRxIABBAWtBHktyRQRAIAUgADYCDAwBCyAEIAFBBHI2AgALDBULIAdBqKABKQMANwMYIAdBoKABKQMANwMQIAdBmKABKQMANwMIIAdBkKABKQMANwMAIAcgACABIAIgAyAEIAUgByAHQSBqEG02AiwMFAsgB0HIoAEpAwA3AxggB0HAoAEpAwA3AxAgB0G4oAEpAwA3AwggB0GwoAEpAwA3AwAgByAAIAEgAiADIAQgBSAHIAdBIGoQbTYCLAwTCyAHQSxqIAIgBCAIQQIQZyEAAkAgBCgCACIBQQRxIABBF0pyRQRAIAUgADYCCAwBCyAEIAFBBHI2AgALDBILIAdBLGogAiAEIAhBAhBnIQACQCAEKAIAIgFBBHEgAEEBa0ELS3JFBEAgBSAANgIIDAELIAQgAUEEcjYCAAsMEQsgB0EsaiACIAQgCEEDEGchAAJAIAQoAgAiAUEEcSAAQe0CSnJFBEAgBSAANgIcDAELIAQgAUEEcjYCAAsMEAsgB0EsaiACIAQgCEECEGchAAJAIAQoAgAiAUEEcSAAQQFrIgBBC0tyRQRAIAUgADYCEAwBCyAEIAFBBHI2AgALDA8LIAdBLGogAiAEIAhBAhBnIQACQCAEKAIAIgFBBHEgAEE7SnJFBEAgBSAANgIEDAELIAQgAUEEcjYCAAsMDgsgB0EsaiEAIwBBEGsiASQAIAEgAjYCDANAAkAgACABQQxqECsNACAIQQEgABA3EF9FDQAgABA+GgwBCwsgACABQQxqECsEQCAEIAQoAgBBAnI2AgALIAFBEGokAAwNCyAHQSxqIQECQCAAQQhqIAAoAggoAggRAAAiABAfQQAgAEEMahAfa0YEQCAEIAQoAgBBBHI2AgAMAQsgASACIAAgAEEYaiAIIARBABDNASICIABHIAUoAggiAUEMR3JFBEAgBUEANgIIDAELIAIgAGtBDEcgAUELSnJFBEAgBSABQQxqNgIICwsMDAsgB0HQoAFBLPwKAAAgByAAIAEgAiADIAQgBSAHIAdBLGoQbTYCLAwLCyAHQZChASgCADYCECAHQYihASkDADcDCCAHQYChASkDADcDACAHIAAgASACIAMgBCAFIAcgB0EUahBtNgIsDAoLIAdBLGogAiAEIAhBAhBnIQACQCAEKAIAIgFBBHEgAEE8SnJFBEAgBSAANgIADAELIAQgAUEEcjYCAAsMCQsgB0G4oQEpAwA3AxggB0GwoQEpAwA3AxAgB0GooQEpAwA3AwggB0GgoQEpAwA3AwAgByAAIAEgAiADIAQgBSAHIAdBIGoQbTYCLAwICyAHQSxqIAIgBCAIQQEQZyEAAkAgBCgCACIBQQRxIABBBkpyRQRAIAUgADYCGAwBCyAEIAFBBHI2AgALDAcLIAAgASACIAMgBCAFIAAoAgAoAhQRBgAMBwsgAEEIaiAAKAIIKAIYEQAAIQEgByAAIAcoAiwgAiADIAQgBSABECMgARAjIAEQH0ECdGoQbTYCLAwFCyAFQRRqIAdBLGogAiAEIAgQ9QIMBAsgB0EsaiACIAQgCEEEEGchACAELQAAQQRxRQRAIAUgAEHsDms2AhQLDAMLIAZBJUYNAQsgBCAEKAIAQQRyNgIADAELIwBBEGsiACQAIAAgAjYCDAJAIAQCf0EGIAdBLGoiASAAQQxqIgIQKw0AGkEEIAggARA3EJQBQSVHDQAaIAEQPiACECtFDQFBAgsgBCgCAHI2AgALIABBEGokAAsgBygCLAsgB0EwaiQACz0AIAACfyABKAIEIAEoAgAiAWtBAnUgAksEQCAAIAEgAkECdGoqAgA4AgBBAQwBCyAAQQA6AABBAAs6AAQLSAECfyMAQRBrIgYkACAGIAE2AgwgBkEIaiIHIAMQJyAHEEghASAHECUgBUEUaiAGQQxqIAIgBCABEPUCIAYoAgwgBkEQaiQAC0oBAn8jAEEQayIGJAAgBiABNgIMIAZBCGoiByADECcgBxBIIQEgBxAlIAAgBUEQaiAGQQxqIAIgBCABEPYCIAYoAgwgBkEQaiQAC0oBAn8jAEEQayIGJAAgBiABNgIMIAZBCGoiByADECcgBxBIIQEgBxAlIAAgBUEYaiAGQQxqIAIgBCABEPcCIAYoAgwgBkEQaiQACzAAIAAgASACIAMgBCAFIABBCGogACgCCCgCFBEAACIAECMgABAjIAAQH0ECdGoQbQtYAQF/IwBBIGsiBiQAIAZBuKEBKQMANwMYIAZBsKEBKQMANwMQIAZBqKEBKQMANwMIIAZBoKEBKQMANwMAIAAgASACIAMgBCAFIAYgBkEgaiIBEG0gASQAC4ICAQN/IAAoAgQgACgCACIEa0ECdSIDIAFJBEAjAEEgayIEJAACQCABIANrIgMgACgCCCAAKAIEIgFrQQJ1TQRAIAAoAgQiASADQQJ0aiEDA0AgASADRgRAIAAgAzYCBAUgASACKgIAOAIAIAFBBGohAQwBCwsMAQsgBEEMaiAAIAEgACgCAGtBAnUgA2oQtgEgACgCBCAAKAIAa0ECdSAAEIcCIgUoAggiASADQQJ0aiEDA0AgASADRwRAIAEgAioCADgCACABQQRqIQEMAQsLIAUgAzYCCCAAIAUQhQIgBRCBAgsgBEEgaiQADwsgASADSQRAIAAgBCABQQJ0ajYCBAsL9wsBAX8jAEEQayIHJAAgByABNgIMIARBADYCACAHIAMQJyAHEEkhCCAHECUCfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgBkHBAGsOOQABFwQXBRcGBxcXFwoXFxcXDg8QFxcXExUXFxcXFxcXAAECAwMXFwEXCBcXCQsXDBcNFwsXFxESFBYLIAAgBUEYaiAHQQxqIAIgBCAIEPoCDBgLIAAgBUEQaiAHQQxqIAIgBCAIEPkCDBcLIABBCGogACgCCCgCDBEAACEBIAcgACAHKAIMIAIgAyAEIAUgARAjIAEQIyABEB9qEG42AgwMFgsgB0EMaiACIAQgCEECEGghAAJAIAQoAgAiAUEEcSAAQQFrQR5LckUEQCAFIAA2AgwMAQsgBCABQQRyNgIACwwVCyAHQqXavanC7MuS+QA3AwAgByAAIAEgAiADIAQgBSAHIAdBCGoQbjYCDAwUCyAHQqWytanSrcuS5AA3AwAgByAAIAEgAiADIAQgBSAHIAdBCGoQbjYCDAwTCyAHQQxqIAIgBCAIQQIQaCEAAkAgBCgCACIBQQRxIABBF0pyRQRAIAUgADYCCAwBCyAEIAFBBHI2AgALDBILIAdBDGogAiAEIAhBAhBoIQACQCAEKAIAIgFBBHEgAEEBa0ELS3JFBEAgBSAANgIIDAELIAQgAUEEcjYCAAsMEQsgB0EMaiACIAQgCEEDEGghAAJAIAQoAgAiAUEEcSAAQe0CSnJFBEAgBSAANgIcDAELIAQgAUEEcjYCAAsMEAsgB0EMaiACIAQgCEECEGghAAJAIAQoAgAiAUEEcSAAQQFrIgBBC0tyRQRAIAUgADYCEAwBCyAEIAFBBHI2AgALDA8LIAdBDGogAiAEIAhBAhBoIQACQCAEKAIAIgFBBHEgAEE7SnJFBEAgBSAANgIEDAELIAQgAUEEcjYCAAsMDgsgB0EMaiEAIwBBEGsiASQAIAEgAjYCDANAAkAgACABQQxqECwNACAIQQEgABA4EGBFDQAgABA/GgwBCwsgACABQQxqECwEQCAEIAQoAgBBAnI2AgALIAFBEGokAAwNCyAHQQxqIQECQCAAQQhqIAAoAggoAggRAAAiABAfQQAgAEEMahAfa0YEQCAEIAQoAgBBBHI2AgAMAQsgASACIAAgAEEYaiAIIARBABDPASICIABHIAUoAggiAUEMR3JFBEAgBUEANgIIDAELIAIgAGtBDEcgAUELSnJFBEAgBSABQQxqNgIICwsMDAsgB0H4nwEoAAA2AAcgB0HxnwEpAAA3AwAgByAAIAEgAiADIAQgBSAHIAdBC2oQbjYCDAwLCyAHQYCgAS0AADoABCAHQfyfASgAADYCACAHIAAgASACIAMgBCAFIAcgB0EFahBuNgIMDAoLIAdBDGogAiAEIAhBAhBoIQACQCAEKAIAIgFBBHEgAEE8SnJFBEAgBSAANgIADAELIAQgAUEEcjYCAAsMCQsgB0KlkOmp0snOktMANwMAIAcgACABIAIgAyAEIAUgByAHQQhqEG42AgwMCAsgB0EMaiACIAQgCEEBEGghAAJAIAQoAgAiAUEEcSAAQQZKckUEQCAFIAA2AhgMAQsgBCABQQRyNgIACwwHCyAAIAEgAiADIAQgBSAAKAIAKAIUEQYADAcLIABBCGogACgCCCgCGBEAACEBIAcgACAHKAIMIAIgAyAEIAUgARAjIAEQIyABEB9qEG42AgwMBQsgBUEUaiAHQQxqIAIgBCAIEPgCDAQLIAdBDGogAiAEIAhBBBBoIQAgBC0AAEEEcUUEQCAFIABB7A5rNgIUCwwDCyAGQSVGDQELIAQgBCgCAEEEcjYCAAwBCyMAQRBrIgAkACAAIAI2AgwCQCAEAn9BBiAHQQxqIgEgAEEMaiICECwNABpBBCAIIAEQOBCVAUElRw0AGiABED8gAhAsRQ0BQQILIAQoAgByNgIACyAAQRBqJAALIAcoAgwLIAdBEGokAAtIAQJ/IwBBEGsiBiQAIAYgATYCDCAGQQhqIgcgAxAnIAcQSSEBIAcQJSAFQRRqIAZBDGogAiAEIAEQ+AIgBigCDCAGQRBqJAALSgECfyMAQRBrIgYkACAGIAE2AgwgBkEIaiIHIAMQJyAHEEkhASAHECUgACAFQRBqIAZBDGogAiAEIAEQ+QIgBigCDCAGQRBqJAALSgECfyMAQRBrIgYkACAGIAE2AgwgBkEIaiIHIAMQJyAHEEkhASAHECUgACAFQRhqIAZBDGogAiAEIAEQ+gIgBigCDCAGQRBqJAALLQAgACABIAIgAyAEIAUgAEEIaiAAKAIIKAIUEQAAIgAQIyAAECMgABAfahBuCzsBAX8jAEEQayIGJAAgBkKlkOmp0snOktMANwMIIAAgASACIAMgBCAFIAZBCGogBkEQaiIBEG4gASQAC4MBAQR/IwBBwAFrIgAkACAAIAQ2ArwBIABBoAFqIgUgBSAFQRQQLkHXDSAAQbwBahDKASIHaiIEIAIQaSEGIAAgAhAnIAAQSCAAECUgBSAEIAAQbyABIAAgACAHQQJ0aiIBIAAgBiAFa0ECdGogBCAGRhsgASACIAMQhQEgAEHAAWokAAvRAwEHfwJ/IwBB0AJrIgYkACAGIAU3A8gCIAYgBDcDwAIgBkIlNwO4AiAGQbgCaiIHQQFyQd8VIAIoAgQQyQEhCCAGIAZBkAJqIgk2AowCEC4hAAJ/IAgEQCAGIAIoAgg2AiAgCSAAIAcgBkEgaiAGQcACahCDAwwBCyAGQZACaiAAIAZBuAJqIAZBwAJqEIIDCyEAIAZB4wA2AiAgBkGEAmpBACAGQSBqIgoQNiEJIAZBkAJqIQcCQCAAQR5OBEAQLiEAAn8gCARAIAYgAigCCDYCICAGQYwCaiAAIAZBuAJqIAogBkHAAmoQgQMMAQsgBkGMAmogACAGQbgCaiAGQcACahDIAQsiAEF/Rg0BIAkgBigCjAIQPCAGKAKMAiEHCyAHIAAgB2oiCyACEGkhDCAGQeMANgIgIAZBGGpBACAGQSBqIgcQNiEIAkAgBigCjAIiCiAGQZACakYEQCAHIQAMAQsgAEEDdBA0IgBFDQEgCCAAEDwgBigCjAIhCgsgBkEMaiIHIAIQJyAKIAwgCyAAIAZBFGogBkEQaiAHEP4CIAcQJSABIAAgBigCFCAGKAIQIAIgAxCFASAIEDUgCRA1IAZB0AJqJAAMAQsQPQALC8kDAQd/An8jAEHAAmsiBSQAIAUgBDkDuAIgBUIlNwOwAiAFQbACaiIGQQFyQcYfIAIoAgQQyQEhByAFIAVBkAJqIgg2AowCEC4hAAJ/IAcEQCAFIAIoAgg2AiAgCCAAIAYgBUEgaiAFQbgCahCIAwwBCyAFQZACaiAAIAVBsAJqIAVBuAJqEIcDCyEAIAVB4wA2AiAgBUGEAmpBACAFQSBqIgkQNiEIIAVBkAJqIQYCQCAAQR5OBEAQLiEAAn8gBwRAIAUgAigCCDYCICAFQYwCaiAAIAVBsAJqIAkgBUG4AmoQhgMMAQsgBUGMAmogACAFQbACaiAFQbgCahCFAwsiAEF/Rg0BIAggBSgCjAIQPCAFKAKMAiEGCyAGIAAgBmoiCiACEGkhCyAFQeMANgIgIAVBGGpBACAFQSBqIgYQNiEHAkAgBSgCjAIiCSAFQZACakYEQCAGIQAMAQsgAEEDdBA0IgBFDQEgByAAEDwgBSgCjAIhCQsgBUEMaiIGIAIQJyAJIAsgCiAAIAVBFGogBUEQaiAGEP4CIAYQJSABIAAgBSgCFCAFKAIQIAIgAxCFASAHEDUgCBA1IAVBwAJqJAAMAQsQPQALCxEAIAAgASACIAMgBEEAEKECCxEAIAAgASACIAMgBEEAEKICCxEAIAAgASACIAMgBEEBEKECCxEAIAAgASACIAMgBEEBEKICC8kBAQF/IwBBIGsiBSQAIAUgATYCHAJAIAIoAgRBAXFFBEAgACABIAIgAyAEIAAoAgAoAhgRBwAhAgwBCyAFQRBqIgAgAhAnIAAQmQEhASAAECUCQCAEBEAgACABEHwMAQsgBUEQaiABEHsLIAUgBUEQahBONgIMA0AgBSAFQRBqIgAQdTYCCCAFQQxqIAVBCGoQdgRAIAUoAhwhAiAAEDkaBSAFQRxqIAVBDGoiACgCACgCABC7AyAAEPYBDAELCwsgBUEgaiQAIAILBQBB7CALewEEfyMAQdAAayIAJAAgACAENgJMIABBMGoiBSAFIAVBFBAuQdcNIABBzABqEMoBIgdqIgQgAhBpIQYgACACECcgABBJIAAQJSAFIAQgABB5IAEgACAAIAdqIgEgACAGIAVraiAEIAZGGyABIAIgAxCAASAAQdAAaiQAC8wDAQd/An8jAEGwAWsiBiQAIAYgBTcDqAEgBiAENwOgASAGQiU3A5gBIAZBmAFqIgdBAXJB3xUgAigCBBDJASEIIAYgBkHwAGoiCTYCbBAuIQACfyAIBEAgBiACKAIINgIgIAkgACAHIAZBIGogBkGgAWoQgwMMAQsgBkHwAGogACAGQZgBaiAGQaABahCCAwshACAGQeMANgIgIAZB5ABqQQAgBkEgaiIKEDYhCSAGQfAAaiEHAkAgAEEeTgRAEC4hAAJ/IAgEQCAGIAIoAgg2AiAgBkHsAGogACAGQZgBaiAKIAZBoAFqEIEDDAELIAZB7ABqIAAgBkGYAWogBkGgAWoQyAELIgBBf0YNASAJIAYoAmwQPCAGKAJsIQcLIAcgACAHaiILIAIQaSEMIAZB4wA2AiAgBkEYakEAIAZBIGoiBxA2IQgCQCAGKAJsIgogBkHwAGpGBEAgByEADAELIABBAXQQNCIARQ0BIAggABA8IAYoAmwhCgsgBkEMaiIHIAIQJyAKIAwgCyAAIAZBFGogBkEQaiAHEIQDIAcQJSABIAAgBigCFCAGKAIQIAIgAxCAASAIEDUgCRA1IAZBsAFqJAAMAQsQPQALCwkAIAEgABEAAAvEAwEHfwJ/IwBBoAFrIgUkACAFIAQ5A5gBIAVCJTcDkAEgBUGQAWoiBkEBckHGHyACKAIEEMkBIQcgBSAFQfAAaiIINgJsEC4hAAJ/IAcEQCAFIAIoAgg2AiAgCCAAIAYgBUEgaiAFQZgBahCIAwwBCyAFQfAAaiAAIAVBkAFqIAVBmAFqEIcDCyEAIAVB4wA2AiAgBUHkAGpBACAFQSBqIgkQNiEIIAVB8ABqIQYCQCAAQR5OBEAQLiEAAn8gBwRAIAUgAigCCDYCICAFQewAaiAAIAVBkAFqIAkgBUGYAWoQhgMMAQsgBUHsAGogACAFQZABaiAFQZgBahCFAwsiAEF/Rg0BIAggBSgCbBA8IAUoAmwhBgsgBiAAIAZqIgogAhBpIQsgBUHjADYCICAFQRhqQQAgBUEgaiIGEDYhBwJAIAUoAmwiCSAFQfAAakYEQCAGIQAMAQsgAEEBdBA0IgBFDQEgByAAEDwgBSgCbCEJCyAFQQxqIgYgAhAnIAkgCyAKIAAgBUEUaiAFQRBqIAYQhAMgBhAlIAEgACAFKAIUIAUoAhAgAiADEIABIAcQNSAIEDUgBUGgAWokAAwBCxA9AAsLEQAgACABIAIgAyAEQQAQowILEQAgACABIAIgAyAEQQAQpAILEQAgACABIAIgAyAEQQEQowILoQEBAn8jAEHgAGsiBSQAIAVBDGoiBCABIAIgAygCACAAEQgAQdQAEFMiACAEKQIANwIAIAAgBC0ACDoACCAAQQxqIARBDGoQgQEaIABBGGogBEEYahCBARogAEEkaiAEQSRqEIEBGiAAQTBqIARBMGoQgQEaIABBPGogBEE8ahCBARogAEHIAGogBEHIAGoQgQEaIAQQxwMgBUHgAGokACAACxEAIAAgASACIAMgBEEBEKQCC8kBAQF/IwBBIGsiBSQAIAUgATYCHAJAIAIoAgRBAXFFBEAgACABIAIgAyAEIAAoAgAoAhgRBwAhAgwBCyAFQRBqIgAgAhAnIAAQmwEhASAAECUCQCAEBEAgACABEHwMAQsgBUEQaiABEHsLIAUgBUEQahBONgIMA0AgBSAFQRBqIgAQdzYCCCAFQQxqIAVBCGoQdgRAIAUoAhwhAiAAECAaBSAFQRxqIAVBDGoiACgCACwAABC/AyAAEPgBDAELCwsgBUEgaiQAIAIL5gIBAX8jAEHAAmsiACQAIAAgAjYCuAIgACABNgK8AiAAQcQBahAkIQYgAEEQaiICIAMQJyACEEhB0J8BQeqfASAAQdABahBvIAIQJSAAQbgBahAkIgMgAxAoECEgACADQQAQIiIBNgK0ASAAIAI2AgwgAEEANgIIA0ACQCAAQbwCaiAAQbgCahArDQAgACgCtAEgAxAfIAFqRgRAIAMQHyECIAMgAxAfQQF0ECEgAyADECgQISAAIAIgA0EAECIiAWo2ArQBCyAAQbwCaiICEDdBECABIABBtAFqIABBCGpBACAGIABBEGogAEEMaiAAQdABahCYAQ0AIAIQPhoMAQsLIAMgACgCtAEgAWsQISADECMQLiAAIAU2AgQgAEEEahCNA0EBRwRAIARBBDYCAAsgAEG8AmogAEG4AmoQKwRAIAQgBCgCAEECcjYCAAsgACgCvAIgAxAgGiAGECAaIABBwAJqJAAL4QQCA38BfgJ/IwBB8AJrIgAkACAAIAI2AugCIAAgATYC7AIgAEHcAWogAyAAQfABaiAAQewBaiAAQegBahD7ASAAQdABahAkIgEgARAoECEgACABQQAQIiICNgLMASAAIABBIGo2AhwgAEEANgIYIABBAToAFyAAQcUAOgAWQQAhAwNAAkACQAJAIABB7AJqIABB6AJqECsNACAAKALMASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCzAELIABB7AJqEDcgAEEXaiAAQRZqIAIgAEHMAWogACgC7AEgACgC6AEgAEHcAWogAEEgaiAAQRxqIABBGGogAEHwAWoQ+gENACADDQFBACEDIAAoAswBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQdwBahAfRQ0AIAAtABdBAXFFDQAgACgCHCIDIABBIGprQZ8BSg0AIAAgA0EEajYCHCADIAAoAhg2AgALIAAgAiAAKALMASAEEI4DIAApAwAhCSAFIAApAwg3AwggBSAJNwMAIABB3AFqIABBIGogACgCHCAEEEMgAEHsAmogAEHoAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC7AIgARAgGiAAQdwBahAgGiAAQfACaiQADAMLQQEhAwsgAEHsAmoQPhoMAAsACwvKBAEDfwJ/IwBB4AJrIgAkACAAIAI2AtgCIAAgATYC3AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahD7ASAAQcABahAkIgEgARAoECEgACABQQAQIiICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGQQAhAwNAAkACQAJAIABB3AJqIABB2AJqECsNACAAKAK8ASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCvAELIABB3AJqEDcgAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ+gENACADDQFBACEDIAAoArwBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQcwBahAfRQ0AIAAtAAdBAXFFDQAgACgCDCIDIABBEGprQZ8BSg0AIAAgA0EEajYCDCADIAAoAgg2AgALIAUgAiAAKAK8ASAEEI8DOQMAIABBzAFqIABBEGogACgCDCAEEEMgAEHcAmogAEHYAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC3AIgARAgGiAAQcwBahAgGiAAQeACaiQADAMLQQEhAwsgAEHcAmoQPhoMAAsACwvKBAEDfwJ/IwBB4AJrIgAkACAAIAI2AtgCIAAgATYC3AIgAEHMAWogAyAAQeABaiAAQdwBaiAAQdgBahD7ASAAQcABahAkIgEgARAoECEgACABQQAQIiICNgK8ASAAIABBEGo2AgwgAEEANgIIIABBAToAByAAQcUAOgAGQQAhAwNAAkACQAJAIABB3AJqIABB2AJqECsNACAAKAK8ASABEB8gAmpGBEAgARAfIQYgASABEB9BAXQQISABIAEQKBAhIAAgBiABQQAQIiICajYCvAELIABB3AJqEDcgAEEHaiAAQQZqIAIgAEG8AWogACgC3AEgACgC2AEgAEHMAWogAEEQaiAAQQxqIABBCGogAEHgAWoQ+gENACADDQFBACEDIAAoArwBIAJrIgdBAEwNAgJAAkAgAi0AACIGQStrIggOAwEAAQALIAZBLkYNAkEBIQMgBkEwa0H/AXFBCkkNAwwBCyAHQQFGDQICQCAIDgMAAwADCyACLQABIgZBLkYNAUEBIQMgBkEwa0H/AXFBCU0NAgsCQCAAQcwBahAfRQ0AIAAtAAdBAXFFDQAgACgCDCIDIABBEGprQZ8BSg0AIAAgA0EEajYCDCADIAAoAgg2AgALIAUgAiAAKAK8ASAEEJEDOAIAIABBzAFqIABBEGogACgCDCAEEEMgAEHcAmogAEHYAmoQKwRAIAQgBCgCAEECcjYCAAsgACgC3AIgARAgGiAAQcwBahAgGiAAQeACaiQADAMLQQEhAwsgAEHcAmoQPhoMAAsACwuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCSAzcDACAAQcQBaiAAQRBqIAAoAgwgBBBDIABBzAJqIABByAJqECsEQCAEIAQoAgBBAnI2AgALIAAoAswCIAEQIBogAEHEAWoQIBogAEHQAmokAAuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtBnwFKDQAgACADQQRqNgIMIAMgACgCCDYCAAsgBSACIAAoArQBIAQgBhCVAzsBACAAQcQBaiAAQRBqIAAoAgwgBBBDIABBzAJqIABByAJqECsEQCAEIAQoAgBBAnI2AgALIAAoAswCIAEQIBogAEHEAWoQIBogAEHQAmokAAuWAwECfyMAQdACayIAJAAgACACNgLIAiAAIAE2AswCIAMQaiEGIAMgAEHQAWoQrgEhByAAQcQBaiADIABBxAJqEK0BIABBuAFqECQiASABECgQISAAIAFBABAiIgI2ArQBIAAgAEEQajYCDCAAQQA2AggDQAJAIABBzAJqIABByAJqECsNACAAKAK0ASABEB8gAmpGBEAgARAfIQMgASABEB9BAXQQISABIAEQKBAhIAAgAyABQQAQIiICajYCtAELIABBzAJqIgMQNyAGIAIgAEG0AWogAEEIaiAAKALEAiAAQcQBaiAAQRBqIABBDGogBxCYAQ0AIAMQPhoMAQsLAkAgAEHEAWoQH0UNACAAKAIMIgMgAEEQamtB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DCECDAYLIANBIHIhAyABQQRqIQIgBEEEayEEIAEtAAMgCHQgB2ohBwsCQCAFQQRxRQ0AIAcgBigCIEYNACAKQd4ONgIYIAZB0f4ANgIEIAIhASAGKAIEIQUMAQsLIAIhAUEAIQdBACEDCyAGQdD+ADYCBAtBASECDAELQQAhBCAMIQILIAogDzYCECAKIBA2AgwgCiAENgIEIAogATYCACAGIAM2AkAgBiAHNgI8AkACQCAGKAIsRQRAIA8gFUYNASAGKAIEQdD+AEsNAQsCfyAVIA9rIQMCQAJAIAooAhwiASgCOCIMRQRAQQEhBSABIAooAihBASABKAIodEEBIAooAiARAwAiDDYCOCAMRQ0BCyABKAIsIgRFBEAgAUIANwIwIAFBASABKAIodCIENgIsCyADIARPBEAgBARAIAwgECAEayAE/AoAAAsgAUEANgI0DAILIAQgASgCNCIIayIFIAMgAyAFSxsiBARAIAggDGogECADayAE/AoAAAsgAyAFSwRAIAMgBGsiAwRAIAEoAjggECADayAD/AoAAAsgASADNgI0DAILQQAhBSABIAEoAjQgBGoiA0EAIAMgASgCLCIMRxs2AjQgDCABKAIwIgNNDQAgASADIARqNgIwCyAFDAELIAEgASgCLDYCMEEACw0BIAooAhAhDyAKKAIEIQQLIAogCigCCCAkIARrajYCCCAKIBUgD2siASAKKAIUajYCFCAGIAYoAiAgAWo2AiAgBi0ADEEEcUUgDyAVRnJFBEAgCigCDCABayEDIAYoAhwhBSAGAn8gBigCFARAIAUgAyABEFEMAQsgBSADIAEQswELIgE2AhwgCiABNgIwCyAKIAYoAkBBwABBACAGKAIIG2pBgAFBACAGKAIEIgFBv/4ARhtqQYACQYACQQAgAUHC/gBGGyABQcf+AEYbajYCLCACQXsgAhsgAiAPIBVGGyACIAQgJEYbIRwMAgsgBkHS/gA2AgQLQXwhHAsgF0EQaiQAIBxBAUsNASATQagBaiEBIBMoAqwBIQMgGigCACEJIBooAgQgEygCFGshDCMAQSBrIggkAAJAIAwgCWsiBUEATA0AIAEoAgggASgCBCICayAFTgRAIAIgA2siBCAFSARAIAwgBCAJaiIHayILRSAHIAxGckUEQCACIAcgC/wKAAALIAEgAiALajYCBCAE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eQAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4AE5vdgBUaHUAQXVndXN0AHVuc2lnbmVkIHNob3J0AHVuc2lnbmVkIGludABpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQAaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0AHVua25vd24gaGVhZGVyIGZsYWdzIHNldABpbnZhbGlkIGRpc3RhbmNlcyBzZXQAZ2V0AE9jdABmbG9hdABpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0AFNhdABudW1Qb2ludHMAY29sb3JzAFVucGFja09wdGlvbnMAcG9zaXRpb25zAHJvdGF0aW9ucwB0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scwBpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzAHNjYWxlcwBhbHBoYXMAW1NQWjogRVJST1JdIENoZWNrIGZhaWxlZDogJXM6JWQ6ICVzAHZmMzJfcHRyAEFwcgB2ZWN0b3IAbW9uZXlfZ2V0IGVycm9yAFtTUFogRVJST1JdIGRlc2VyaWFsaXplUGFja2VkR2F1c3NpYW5zOiByZWFkIGVycm9yAE9jdG9iZXIATm92ZW1iZXIAU2VwdGVtYmVyAERlY2VtYmVyAHVuc2lnbmVkIGNoYXIAaW9zX2Jhc2U6OmNsZWFyAE1hcgAvZW1zZGsvZW1zY3JpcHRlbi9zeXN0ZW0vbGliL2xpYmN4eGFiaS9zcmMvcHJpdmF0ZV90eXBlaW5mby5jcHAAU2VwACVJOiVNOiVTICVwAFN1bgBKdW4ATW9uAG5hbgBKYW4AY29vcmRpbmF0ZVN5c3RlbQBDb29yZGluYXRlU3lzdGVtAEp1bABib29sAGxsAEFwcmlsAGludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jawBpbmNvcnJlY3QgaGVhZGVyIGNoZWNrAGluY29ycmVjdCBsZW5ndGggY2hlY2sAaW5jb3JyZWN0IGRhdGEgY2hlY2sAcHVzaF9iYWNrAGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrAEZyaQBzaABoZWFkZXIgY3JjIG1pc21hdGNoAE1hcmNoAEF1ZwB1bnNpZ25lZCBsb25nIGxvbmcAdW5zaWduZWQgbG9uZwBzdGQ6OndzdHJpbmcAYmFzaWNfc3RyaW5nAHN0ZDo6c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGluZgAlLjBMZgAlTGYAcmVzaXplAGludmFsaWQgd2luZG93IHNpemUAdHJ1ZQBUdWUAZmFsc2UAaW52YWxpZCBibG9jayB0eXBlAEp1bmUAZG91YmxlAHNoRGVncmVlAGJhZF9hcnJheV9uZXdfbGVuZ3RoIHdhcyB0aHJvd24gaW4gLWZuby1leGNlcHRpb25zIG1vZGUAaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlAGludmFsaWQgZGlzdGFuY2UgY29kZQBSYXdHYXVzc2lhbkNsb3VkAHVua25vd24gY29tcHJlc3Npb24gbWV0aG9kAFtTUFogRVJST1JdIGRlc2VyaWFsaXplUGFja2VkR2F1c3NpYW5zOiBoZWFkZXIgbm90IGZvdW5kACUwKmxsZAAlKmxsZAArJWxsZAAlKy40bGQAdm9pZABsb2NhbGUgbm90IHN1cHBvcnRlZABhbnRpYWxpYXNlZABXZWQAJVktJW0tJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IFRvbyBtYW55IHBvaW50czogJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IFVuc3VwcG9ydGVkIFNIIGRlZ3JlZTogJWQAW1NQWiBFUlJPUl0gZGVzZXJpYWxpemVQYWNrZWRHYXVzc2lhbnM6IHZlcnNpb24gbm90IHN1cHBvcnRlZDogJWQARGVjAC4vc3B6L3NyYy9jYy9sb2FkLXNwei5jYwBGZWIAJWEgJWIgJWQgJUg6JU06JVMgJVkAUE9TSVgAVmVjdG9yVUludDhUACVIOiVNOiVTAE5BTgBQTQBBTQAlSDolTQBMQ19BTEwAQVNDSUkATEFORwBSVUYATFVGAElORgBSREYATERGAFVOU1BFQ0lGSUVEAEMAUlVCAExVQgBSREIATERCAGNhdGNoaW5nIGEgY2xhc3Mgd2l0aG91dCBhbiBvYmplY3Q/AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50NjRfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNpZ25lZCBjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBsb25nPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+ADAxMjM0NTY3ODkAQy5VVEYtOABWZWN0b3JGbG9hdDMyADEuMy4xAC4ALQAocGFja2VkLmFscGhhcy5zaXplKCkpID09IChudW1Qb2ludHMpAChudWxsKQAocGFja2VkLmNvbG9ycy5zaXplKCkpID09IChudW1Qb2ludHMgKiAzKQAocGFja2VkLnNjYWxlcy5zaXplKCkpID09IChudW1Qb2ludHMgKiAzKQAocGFja2VkLnNoLnNpemUoKSkgPT0gKG51bVBvaW50cyAqIHNoRGltICogMykAKHBhY2tlZC5yb3RhdGlvbnMuc2l6ZSgpKSA9PSAobnVtUG9pbnRzICogKHBhY2tlZC51c2VzUXVhdGVybmlvblNtYWxsZXN0VGhyZWUgPyA0IDogMykpAChwYWNrZWQucG9zaXRpb25zLnNpemUoKSkgPT0gKG51bVBvaW50cyAqIDMgKiAodXNlc0Zsb2F0MTYgPyAyIDogMykpACUAbGVuZ3RoX2Vycm9yIHdhcyB0aHJvd24gaW4gLWZuby1leGNlcHRpb25zIG1vZGUgd2l0aCBtZXNzYWdlICIlcyIAUHVyZSB2aXJ0dWFsIGZ1bmN0aW9uIGNhbGxlZCEAW1NQWjogRVJST1JdIFVuc3VwcG9ydGVkIFNIIGRlZ3JlZTogJWQKAAkAAAAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AACAPwBBkCALthMgEAAA9GwAAPRsAABAEAAAqG0AACgQAABOM3NwejEzR2F1c3NpYW5DbG91ZEUAAACobQAASBAAAE4zc3B6MTNVbnBhY2tPcHRpb25zRQBwcGlpcAD0bAAAbBAAAKhtAAB0EAAATlN0M19fMjZ2ZWN0b3JJZk5TXzlhbGxvY2F0b3JJZkVFRUUAaXBwACxuAADEEAAAAAAAAAMAAADcEAAAAAAAACgSAAAAAAAAWBIAAAAAAABOU3QzX18yOG9wdGlvbmFsSWZFRQAAAADQbQAA6BAAABgRAABOU3QzX18yMjdfX29wdGlvbmFsX21vdmVfYXNzaWduX2Jhc2VJZkxiMUVFRQAAAADQbQAAJBEAAFQRAABOU3QzX18yMjdfX29wdGlvbmFsX2NvcHlfYXNzaWduX2Jhc2VJZkxiMUVFRQAAAADQbQAAYBEAAIgRAABOU3QzX18yMjBfX29wdGlvbmFsX21vdmVfYmFzZUlmTGIxRUVFAAAA0G0AAJQRAAC8EQAATlN0M19fMjIwX19vcHRpb25hbF9jb3B5X2Jhc2VJZkxiMUVFRQAAANBtAADIEQAA9BEAAE5TdDNfXzIyM19fb3B0aW9uYWxfc3RvcmFnZV9iYXNlSWZMYjBFRUUAAAAAqG0AAPwRAABOU3QzX18yMjRfX29wdGlvbmFsX2Rlc3RydWN0X2Jhc2VJZkxiMUVFRQAAAKhtAAAwEgAATlN0M19fMjE4X19zZmluYWVfY3Rvcl9iYXNlSUxiMUVMYjFFRUUAAKhtAABgEgAATlN0M19fMjIwX19zZmluYWVfYXNzaWduX2Jhc2VJTGIxRUxiMUVFRQAAAACIbgAAnBIAAAAAAABsEAAAUE5TdDNfXzI2dmVjdG9ySWZOU185YWxsb2NhdG9ySWZFRUVFAAAAAIhuAADUEgAAAQAAAGwQAABQS05TdDNfXzI2dmVjdG9ySWZOU185YWxsb2NhdG9ySWZFRUVFAHBwAHYAdnAAAACMEgAAcHAAAJRsAACMEgAAPG0AAHZwcGQAAAAAlGwAAIwSAAAYbQAAPG0AAHZwcHBkAAAAGG0AAMQSAABwcHAATBMAADxtAACobQAAVBMAAE4xMGVtc2NyaXB0ZW4zdmFsRQAAnBAAAGwQAAAYbQAAcHBwcAAAAAAAAAAArGwAAGwQAAAYbQAAPG0AAGlwcHBkAAAALG4AAMATAAAAAAAAAwAAANgTAAAAAAAAKBIAAAAAAABYEgAAAAAAAE5TdDNfXzI4b3B0aW9uYWxJaEVFAAAAANBtAADkEwAAFBQAAE5TdDNfXzIyN19fb3B0aW9uYWxfbW92ZV9hc3NpZ25fYmFzZUloTGIxRUVFAAAAANBtAAAgFAAAUBQAAE5TdDNfXzIyN19fb3B0aW9uYWxfY29weV9hc3NpZ25fYmFzZUloTGIxRUVFAAAAANBtAABcFAAAhBQAAE5TdDNfXzIyMF9fb3B0aW9uYWxfbW92ZV9iYXNlSWhMYjFFRUUAAADQbQAAkBQAALgUAABOU3QzX18yMjBfX29wdGlvbmFsX2NvcHlfYmFzZUloTGIxRUVFAAAA0G0AAMQUAADwFAAATlN0M19fMjIzX19vcHRpb25hbF9zdG9yYWdlX2Jhc2VJaExiMEVFRQAAAACobQAA+BQAAE5TdDNfXzIyNF9fb3B0aW9uYWxfZGVzdHJ1Y3RfYmFzZUloTGIxRUVFAAAAqG0AACwVAABOU3QzX18yNnZlY3RvckloTlNfOWFsbG9jYXRvckloRUVFRQCIbgAAYBUAAAAAAAAkFQAAUE5TdDNfXzI2dmVjdG9ySWhOU185YWxsb2NhdG9ySWhFRUVFAAAAAIhuAACYFQAAAQAAACQVAABQS05TdDNfXzI2dmVjdG9ySWhOU185YWxsb2NhdG9ySWhFRUVFAHBwAHZwAFAVAABwcAAAlGwAAFAVAADEbAAAdnBwaQAAAACUbAAAUBUAABhtAADEbAAAdnBwcGkAAAAYbQAAiBUAAHBwcABMEwAAxGwAAJgTAAAkFQAAGG0AAHBwcHAAAAAArGwAACQVAAAYbQAAxGwAAGlwcHBpAHAAdnAAaXBwAHZwcGkAaXBwAHZwcGkAcHBwAHZwcHAAAABcbQAAYBYAAE4zc3B6MTZDb29yZGluYXRlU3lzdGVtRQBwAHZwAGlwcAB2cHBpAAAAAAAAAwAAAAgAAAAPAAAAqG0AAKAWAABOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAAqG0AAOgWAABOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQAAqG0AADAXAABOU3QzX18yMTJiYXNpY19zdHJpbmdJRHNOU18xMWNoYXJfdHJhaXRzSURzRUVOU185YWxsb2NhdG9ySURzRUVFRQAAAKhtAAB8FwAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUAAACobQAAyBcAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWNFRQAAqG0AAPAXAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lhRUUAAKhtAAAYGAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaEVFAACobQAAQBgAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXNFRQAAqG0AAGgYAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l0RUUAAKhtAACQGAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaUVFAACobQAAuBgAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWpFRQAAqG0AAOAYAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lsRUUAAKhtAAAIGQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbUVFAACobQAAMBkAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXhFRQAAqG0AAFgZAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l5RUUAAKhtAACAGQAATjEwZW1zY3Jp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AAAJqAAACAQAAAiEAAAIRAAACegAEAcIAAAIXAAACBwAAAmYABQHUwAACHwAAAg8AAAJ2AASBxcAAAhsAAAILAAACbgAAAgMAAAIjAAACEwAAAn4ABAHAwAACFIAAAgSABUIowATByMAAAhyAAAIMgAACcQAEQcLAAAIYgAACCIAAAmkAAAIAgAACIIAAAhCAAAJ5AAQBwcAAAhaAAAIGgAACZQAFAdDAAAIegAACDoAAAnUABIHEwAACGoAAAgqAAAJtAAACAoAAAiKAAAISgAACfQAEAcFAAAIVgAACBYAQAgAABMHMwAACHYAAAg2AAAJzAARBw8AAAhmAAAIJgAACawAAAgGAAAIhgAACEYAAAnsABAHCQAACF4AAAgeAAAJnAAUB2MAAAh+AAAIPgAACdwAEgcbAAAIbgAACC4AAAm8AAAIDgAACI4AAAhOAAAJ/ABgBwAAAAhRAAAIEQAVCIMAEgcfAAAIcQAACDEAAAnCABAHCgAACGEAAAghAAAJogAACAEAAAiBAAAIQQAACeIAEAcGAAAIWQAACBkAAAmSABMHOwAACHkAAAg5AAAJ0gARBxEAAAhpAAAIKQAACbIAAAgJAAAIiQAACEkAAAnyABAHBAAACFUAAAgVABAIAgETBysAAAh1AAAINQAACcoAEQcNAAAIZQAACCUAAAmqAAAIBQAACIUAAAhFAAAJ6gAQBwgAAAhdAAAIHQAACZoAFAdTAAAIfQAACD0AAAnaABIHFwAACG0AAAgtAAAJugAACA0AAAiNAAAITQAACfoAEAcDAAAIUwAACBMAFQjDABMHIwAACHMAAAgzAAAJxgARBwsAAAhjAAAIIwAACaYAAAgDAAAIgwAACEMAAAnmABAHBwAACFsAAAgbAAAJlgAUB0MAAAh7AAAIOwAACdYAEgcTAAAIawAACCsAAAm2AAAICwAACIsAAAhLAAAJ9gAQBwUAAAhXAAAIFwBACAAAEwczAAAIdwAACDcAAAnOABEHDwAACGcAAAgnAAAJrgAACAcAAAiHAAAIRwAACe4AEAcJAAAIXwAACB8AAAmeABQHYwAACH8AAAg/AAAJ3gASBxsAAAhvAAAILwAACb4AAAgPAAAIjwAACE8AAAn+AGAHAAAACFAAAAgQABQIcwASBx8AAAhwAAAIMAAACcEAEAcKAAAIYAAACCAAAAmhAAAIAAAACIAAAAhAAAAJ4QAQBwYAAAhYAAAIGAAACZEAEwc7AAAIeAAACDgAAAnRABEHEQAACGgAAAgoAAAJsQAACAgAAAiIAAAISAAACfEAEAcEAAAIVAAACBQAFQjjABMHKwAACHQAAAg0AAAJyQARBw0AAAhkAAAIJAAACakAAAgEAAAIhAAACEQAAAnpABAHCAAACFwAAAgcAAAJmQAUB1MAAAh8AAAIPAAACdkAEgcXAAAIbAAACCwAAAm5AAAIDAAACIwAAAhMAAAJ+QAQBwMAAAhSAAAIEgAVCKMAEwcjAAAIcgAACDIAAAnFABEHCwAACGIAAAgiAAAJpQAACAIAAAiCAAAIQgAACeUAEAcHAAAIWgAACBoAAAmVABQHQwAACHoAAAg6AAAJ1QASBxMAAAhqAAAIKgAACbUAAAgKAAAIigAACEoAAAn1ABAHBQAACFYAAAgWAEAIAAATBzMAAAh2AAAINgAACc0AEQcPAAAIZgAACCYAAAmtAAAIBgAACIYAAAhGAAAJ7QAQBwkAAAheAAAIHgAACZ0AFAdjAAAIfgAACD4AAAndABIHGwAACG4AAAguAAAJvQAACA4AAAiOAAAITgAACf0AYAcAAAAIUQAACBEAFQiDABIHHwAACHEAAAgxAAAJwwAQBwoAAAhhAAAIIQAACaMAAAgBAAAIgQAACEEAAAnjABAHBgAACFkAAAgZAAAJkwATBzsAAAh5AAAIOQAACdMAEQcRAAAIaQAACCkAAAmzAAAICQAACIkAAAhJAAAJ8wAQBwQAAAhVAAAIFQAQCAIBEwcrAAAIdQAACDUAAAnLABEHDQAACGUAAAglAAAJqwAACAUAAAiFAAAIRQAACesAEAcIAAAIXQAACB0AAAmbABQHUwAACH0AAAg9AAAJ2wASBxcAAAhtAAAILQAACbsAAAgNAAAIjQAACE0AAAn7ABAHAwAACFMAAAgTABUIwwATByMAAAhzAAAIMwAACccAEQcLAAAIYwAACCMAAAmnAAAIAwAACIMAAAhDAAAJ5wAQBwcAAAhbAAAIGwAACZcAFAdDAAAIewAACDsAAAnXABIHEwAACGsAAAgrAAAJtwAACAsAAAiLAAAISwAACfcAEAcFAAAIVwAACBcAQAgAABMHMwAACHcAAAg3AAAJzwARBw8AAAhnAAAIJwAACa8AAAgH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Y05TXzExY2hhcl90cmFpdHNJY0VFRUUA0G0AAHg9AAAAPAAATlN0M19fMjE1YmFzaWNfc3RyaW5nYnVmSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAABAAAAAAAAAAKw+AABZAAAAWgAAADgAAAD4////rD4AAFsAAABcAAAAwP///8D///+sPgAAXQAAAF4AAADIPQAALD4AAGg+AAB8PgAAkD4AAKQ+AABUPgAAQD4AAPA9AADcPQAAQAAAAAAAAAAcPQAATAAAAE0AAAA4AAAA+P///xw9AABOAAAATwAAAMD////A////HD0AAFAAAABRAAAAQAAAAAAAAAA8PAAARAAAAEUAAADA////wP///zw8AABGAAAARwAAADgAAAAAAAAAhDwAAEgAAABJAAAAyP///8j///+EPAAASgAAAEsAAADQbQAAuD4AABw9AABOU3QzX18yMThiYXNpY19zdHJpbmdzdHJlYW1JY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAAAAAAAAAAED8AAF8AAABgAAAAqG0AABg/AABOU3QzX18yOGlvc19iYXNlRQAAAAAAAADRdJ4AV529KoBwUg///z4nCgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUYAAAANQAAAHEAAABr////zvv//5K///8AAAAAAAAAAP////////////////////////////////////////////////////////////////8AAQIDBAUGBwgJ/////////woLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIj////////CgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAECBAcDBgUAAAAAAAAAAgAAwAMAAMAEAADABQAAwAYAAMAHAADACAAAwAkAAMAKAADACwAAwAwAAMANAADADgAAwA8AAMAQAADAEQAAwBIAAMATAADA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")),t((await async function(e){return async function(e){var t=R;try{var n=await async function(e){if(!ArrayBuffer.isView(e))if(e==R&&d)e=new Uint8Array(d);else{if(!s)throw"both async and sync fetching of the wasm failed";e=s(e)}return e}(t);return await WebAssembly.instantiate(n,e)}catch(e){S(`failed to asynchronously prepare wasm: ${e}`),P(e)}}(e)}(i)).instance))}();if(n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.shift()();return function e(){function t(){var e;if(n.calledRun=!0,!x){if(Q=!0,lt.G(),null==g||g(n),null==(e=n.onRuntimeInitialized)||e.call(n),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var t=n.postRun.shift();F.push(t)}O(F)}}if(0<M)L=e;else{if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)k();O(U),0<M?L=e:n.setStatus?(n.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>n.setStatus(""),1),t()},1)):t()}}(),Q?n:new Promise((e,t)=>{g=e,f=t})}const l=(e,t,n=e=>e)=>{const i=e.vf32_ptr(t),o=t.size();return new Float32Array(e.HEAPF32.buffer,i,o).map(n)},u=e=>1/(1+Math.exp(-e)),d=e=>t=>t*e+.5,h=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function g(e){const t=(e=e??o.A.EMPTY_OBJECT).resourceCache,n=e.gltf,r=e.primitive,a=e.spz,A=e.gltfResource,c=e.baseResource,l=e.cacheKey;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.primitive",r),i.A.typeOf.object("options.spz",a),i.A.typeOf.object("options.gltfResource",A),i.A.typeOf.object("options.baseResource",c),this._resourceCache=t,this._gltfResource=A,this._baseResource=c,this._gltf=n,this._primitive=r,this._spz=a,this._cacheKey=l,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=s.A.UNLOADED,this._promise=void 0,this._spzError=void 0}function f(e,t){throw e.unload(),e._state=s.A.FAILED,e.getError("Failed to load SPZ",t)}(0,r.A)(Object.create)&&(g.prototype=Object.create(a.A.prototype),g.prototype.constructor=g),Object.defineProperties(g.prototype,{cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}}),g.prototype.load=async function(){return(0,r.A)(this._promise)||(this._state=s.A.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:0,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._bufferViewTypedArray=n.typedArray,e._state=s.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;f(e,t)}}(this)),this._promise},g.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===s.A.READY)return!0;if(this._state!==s.A.PROCESSING)return!1;if((0,r.A)(this._spzError)&&f(this,this._spzError),!(0,r.A)(this._bufferViewTypedArray))return!1;if((0,r.A)(this._decodePromise))return!1;const t=(async(e,t)=>{var n;const i=await c(),o=e instanceof Uint8Array?e:new Uint8Array(e);let r=null;try{if(r=i._malloc(Uint8Array.BYTES_PER_ELEMENT*o.length),null===r)throw new Error("couldn't allocate memory");i.HEAPU8.set(o,r/Uint8Array.BYTES_PER_ELEMENT);const e=i.CoordinateSystem[(null==(n=null==t?void 0:t.unpackOptions)?void 0:n.coordinateSystem)??"UNSPECIFIED"],a=i.load_spz(r,o.length,{coordinateSystem:e}),s=((e,t,n)=>{const i=(null==n?void 0:n.colorScaleFactor)??.282;return{numPoints:t.numPoints,shDegree:t.shDegree,antialiased:t.antialiased,positions:l(e,t.positions),scales:l(e,t.scales,Math.exp),rotations:l(e,t.rotations),alphas:l(e,t.alphas,u),colors:l(e,t.colors,d(i)),sh:l(e,t.sh)}})(i,a,t);return((e,t)=>{e._free(e.vf32_ptr(t.positions)),e._free(e.vf32_ptr(t.scales)),e._free(e.vf32_ptr(t.rotations)),e._free(e.vf32_ptr(t.alphas)),e._free(e.vf32_ptr(t.colors)),e._free(e.vf32_ptr(t.sh))})(i,a),s}catch(e){throw e}finally{null!==r&&i._free(r)}})(this._bufferViewTypedArray,{unpackOptions:{coordinateSystem:"UNSPECIFIED"}});if(!(0,r.A)(t))return!1;this._decodePromise=async function(e,t){try{const n=await t;if(e.isDestroyed())return;return e.unload(),e._decodedData={gcloud:n},e._state=s.A.READY,e._baseResource}catch(t){if(e.isDestroyed())return;e._spzError=t}}(this,t)},g.prototype.unload=function(){(0,r.A)(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0,this._primitive=void 0};const p=g},582998:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(369031),o=n(915325),r=n(491446),a=n(605971),s=n(613161),A=n(4471),c=n(872182),l=n(569445),u=n(48660);function d(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,extension:n,extensionLegacy:s,gltfResource:A,baseResource:c,supportedImageFormats:l,frameState:d,cacheKey:h,asynchronous:g=!0}=e;if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.gltfResource",A),i.A.typeOf.object("options.baseResource",c),i.A.typeOf.object("options.supportedImageFormats",l),i.A.typeOf.object("options.frameState",d),!(0,r.A)(e.extension)&&!(0,r.A)(e.extensionLegacy))throw new a.A("One of options.extension or options.extensionLegacy must be specified");this._gltfResource=A,this._baseResource=c,this._gltf=t,this._extension=n,this._extensionLegacy=s,this._supportedImageFormats=l,this._frameState=d,this._cacheKey=h,this._asynchronous=g,this._bufferViewLoaders=[],this._bufferViewIds=[],this._textureLoaders=[],this._textureIds=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=u.A.UNLOADED,this._promise=void 0}function h(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.values,a=i.arrayOffsets,s=i.stringOffsets;(0,r.A)(o)&&(t[o]=!0),(0,r.A)(a)&&(t[a]=!0),(0,r.A)(s)&&(t[s]=!0)}}function g(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.bufferView,a=i.arrayOffsetBufferView,s=i.stringOffsetBufferView;(0,r.A)(o)&&(t[o]=!0),(0,r.A)(a)&&(t[a]=!0),(0,r.A)(s)&&(t[s]=!0)}}function f(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=i}}function p(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n].texture;t[i.index]=i}}function m(e){const t=e._bufferViewLoaders,n=t.length;for(let e=0;e<n;++e)c.A.unload(t[e]);e._bufferViewLoaders.length=0,e._bufferViewIds.length=0}(0,r.A)(Object.create)&&(d.prototype=Object.create(l.A.prototype),d.prototype.constructor=d),Object.defineProperties(d.prototype,{cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}}),d.prototype.load=function(){return(0,r.A)(this._promise)||(this._state=u.A.LOADING,this._promise=async function(e){try{const t=async function(e){let t;t=(0,r.A)(e._extension)?function(e){const t=e.propertyTables,n={};if((0,r.A)(t))for(let e=0;e<t.length;e++)h(t[e].properties,n);return n}(e._extension):function(e){const t=e.featureTables,n={};if((0,r.A)(t))for(const e in t)if(t.hasOwnProperty(e)){const i=t[e].properties;(0,r.A)(i)&&g(i,n)}return n}(e._extensionLegacy);const n=[];for(const i in t)if(t.hasOwnProperty(i)){const t=c.A.getBufferViewLoader({gltf:e._gltf,bufferViewId:parseInt(i),gltfResource:e._gltfResource,baseResource:e._baseResource});e._bufferViewLoaders.push(t),e._bufferViewIds.push(i),n.push(t.load())}return Promise.all(n)}(e),n=function(e){let t;t=(0,r.A)(e._extension)?function(e){const t={},n=e.propertyTextures;if((0,r.A)(n))for(let e=0;e<n.length;e++){const i=n[e].properties;(0,r.A)(i)&&f(i,t)}return t}(e._extension):function(e){const t={},n=e.featureTextures;if((0,r.A)(n))for(const e in n)if(n.hasOwnProperty(e)){const i=n[e].properties;(0,r.A)(i)&&p(i,t)}return t}(e._extensionLegacy);const n=e._gltf,i=e._gltfResource,o=e._baseResource,a=e._supportedImageFormats,s=e._frameState,A=e._asynchronous,l=[];for(const r in t)if(t.hasOwnProperty(r)){const u=c.A.getTextureLoader({gltf:n,textureInfo:t[r],gltfResource:i,baseResource:o,supportedImageFormats:a,frameState:s,asynchronous:A});e._textureLoaders.push(u),e._textureIds.push(r),l.push(u.load())}return Promise.all(l)}(e),i=async function(e){const t=e._extension??e._extensionLegacy;let n;if((0,r.A)(t.schemaUri)){const i=e._baseResource.getDerivedResource({url:t.schemaUri});n=c.A.getSchemaLoader({resource:i})}else n=c.A.getSchemaLoader({schema:t.schema});if(e._schemaLoader=n,await n.load(),!n.isDestroyed())return n.schema}(e);if(await Promise.all([t,n,i]),e.isDestroyed())return;return e._gltf=void 0,e._state=u.A.LOADED,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=u.A.FAILED;const n="Failed to load structural metadata";throw e.getError(n,t)}}(this)),this._promise},d.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===u.A.READY)return!0;if(this._state!==u.A.LOADED)return!1;const t=this._textureLoaders,n=t.length;let o=!0;for(let i=0;i<n;++i){const n=t[i].process(e);o=o&&n}if(!o)return!1;const a=this._schemaLoader.schema,c={};for(let e=0;e<this._bufferViewIds.length;++e){const t=this._bufferViewIds[e],n=this._bufferViewLoaders[e];if(!n.isDestroyed()){const e=new Uint8Array(n.typedArray);c[t]=e}}const l={};for(let e=0;e<this._textureIds.length;++e){const n=this._textureIds[e],i=t[e];i.isDestroyed()||(l[n]=i.texture)}return(0,r.A)(this._extension)?this._structuralMetadata=(0,s.A)({extension:this._extension,schema:a,bufferViews:c,textures:l}):this._structuralMetadata=(0,A.A)({extension:this._extensionLegacy,schema:a,bufferViews:c,textures:l}),m(this),this._state=u.A.READY,!0},d.prototype.unload=function(){m(this),function(e){const t=e._textureLoaders,n=t.length;for(let e=0;e<n;++e)c.A.unload(t[e]);e._textureLoaders.length=0,e._textureIds.length=0}(this),(0,r.A)(this._schemaLoader)&&c.A.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};const _=d},952575:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(369031),o=n(367817),r=n(915325),a=n(491446),s=n(276904),A=n(616e3),c=n(78078),l=n(557448),u=n(782556),d=n(666203),h=n(569445),g=n(48660),f=n(271868);function p(e){const t=(e=e??r.A.EMPTY_OBJECT).resourceCache,n=e.gltf,o=e.textureInfo,a=e.gltfResource,s=e.baseResource,A=e.supportedImageFormats,c=e.cacheKey,l=e.asynchronous??!0;i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.textureInfo",o),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",s),i.A.typeOf.object("options.supportedImageFormats",A);const d=o.index,h=u.A.getImageIdFromTexture({gltf:n,textureId:d,supportedImageFormats:A});this._resourceCache=t,this._gltf=n,this._textureInfo=o,this._imageId=h,this._gltfResource=a,this._baseResource=s,this._cacheKey=c,this._asynchronous=l,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=g.A.UNLOADED,this._promise=void 0}(0,a.A)(Object.create)&&(p.prototype=Object.create(h.A.prototype),p.prototype.constructor=p),Object.defineProperties(p.prototype,{cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});const m=new _;function _(){this.gltf=void 0,this.textureInfo=void 0,this.textureId=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}function I(e,t,n,i,r,d){const h=i.internalFormat;let g=!1;s.A.isCompressedFormat(h)&&!(0,a.A)(r)&&(g=!0);const p=u.A.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:g}),m=p.minificationFilter,_=p.wrapS,I=p.wrapT,E=m===c.A.NEAREST_MIPMAP_NEAREST||m===c.A.NEAREST_MIPMAP_LINEAR||m===c.A.LINEAR_MIPMAP_NEAREST||m===c.A.LINEAR_MIPMAP_LINEAR,y=!(0,a.A)(h)&&E,C=y||_===l.A.REPEAT||_===l.A.MIRRORED_REPEAT||I===l.A.REPEAT||I===l.A.MIRRORED_REPEAT,b=!o.A.isPowerOfTwo(i.width)||!o.A.isPowerOfTwo(i.height),B=C&&b;let v;return(0,a.A)(h)?(!d.webgl2&&s.A.isCompressedFormat(h)&&b&&C&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."),v=A.A.create({id:n,context:d,source:{arrayBufferView:i.bufferView,mipLevels:r},width:i.width,height:i.height,pixelFormat:i.internalFormat,sampler:p})):(B&&(i=(0,f.A)(i)),v=A.A.create({id:n,context:d,source:i,sampler:p,flipY:!1,skipColorSpaceConversion:!0})),y&&v.generateMipmap(),v}p.prototype.load=async function(){return(0,a.A)(this._promise)||(this._state=g.A.LOADING,this._promise=async function(e){const t=e._resourceCache;try{const n=t.getImageLoader({gltf:e._gltf,imageId:e._imageId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._imageLoader=n,await n.load(),e.isDestroyed())return;return e._image=n.image,e._mipLevels=n.mipLevels,e._state=g.A.LOADED,e}catch(t){if(e.isDestroyed())return;e.unload(),e._state=g.A.FAILED;const n="Failed to load texture";throw e.getError(n,t)}}(this)),this._promise},_.prototype.set=function(e,t,n,i,o,r){this.gltf=e,this.textureInfo=t,this.textureId=n,this.image=i,this.mipLevels=o,this.context=r},_.prototype.execute=function(){this.texture=I(this.gltf,this.textureInfo,this.textureId,this.image,this.mipLevels,this.context)},p.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===g.A.READY)return!0;if(this._state!==g.A.LOADED&&this._state!==g.A.PROCESSING)return!1;if((0,a.A)(this._texture))return!1;if(!(0,a.A)(this._image))return!1;let t;if(this._state=g.A.PROCESSING,this._asynchronous){const n=m;if(n.set(this._gltf,this._textureInfo,this._cacheKey,this._image,this._mipLevels,e.context),!e.jobScheduler.execute(n,d.A.TEXTURE))return;t=n.texture}else t=I(this._gltf,this._textureInfo,this._cacheKey,this._image,this._mipLevels,e.context);return this.unload(),this._texture=t,this._state=g.A.READY,this._resourceCache.statistics.addTextureLoader(this),!0},p.prototype.unload=function(){(0,a.A)(this._texture)&&this._texture.destroy(),(0,a.A)(this._imageLoader)&&!this._imageLoader.isDestroyed()&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};const E=p},946240:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(369031),o=n(915325),r=n(491446),a=n(605971),s=n(641613),A=n(442790),c=n(730839),l=n(666203),u=n(995537),d=n(569445),h=n(48660),g=n(367817);function f(e){const t=(e=e??o.A.EMPTY_OBJECT).resourceCache,n=e.gltf,s=e.gltfResource,A=e.baseResource,c=e.bufferViewId,l=e.primitive,u=e.draco,d=e.attributeSemantic,g=e.accessorId,f=e.cacheKey,m=e.spz,_=e.asynchronous??!0,I=e.loadBuffer??!1,E=e.loadTypedArray??!1;if(i.A.typeOf.func("options.resourceCache",t),i.A.typeOf.object("options.gltf",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A),!I&&!E)throw new a.A("At least one of loadBuffer and loadTypedArray must be true.");const y=(0,r.A)(c),C=(0,r.A)(l),b=p(u,d),B=(0,r.A)(d),v=(0,r.A)(g);if(y===(b!==(0,r.A)(m)))throw new a.A("One of options.bufferViewId, options.draco, or options.spz must be defined.");if(b&&!B)throw new a.A("When options.draco is defined options.attributeSemantic must also be defined.");if(b&&!v)throw new a.A("When options.draco is defined options.accessorId must also be defined.");if(b&&!C)throw new a.A("When options.draco is defined options.primitive must also be defined.");b&&(i.A.typeOf.object("options.primitive",l),i.A.typeOf.object("options.draco",u),i.A.typeOf.string("options.attributeSemantic",d),i.A.typeOf.number("options.accessorId",g)),this._resourceCache=t,this._gltfResource=s,this._baseResource=A,this._gltf=n,this._bufferViewId=c,this._primitive=l,this._draco=u,this._spz=m,this._attributeSemantic=d,this._accessorId=g,this._cacheKey=f,this._asynchronous=_,this._loadBuffer=I,this._loadTypedArray=E,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=h.A.UNLOADED,this._promise=void 0}function p(e,t){return(0,r.A)(e)&&(0,r.A)(e.attributes)&&(0,r.A)(e.attributes[t])}function m(e,t){throw e.unload(),e._state=h.A.FAILED,e.getError("Failed to load vertex buffer",t)}function _(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}function I(e,t){const n=s.A.createVertexBuffer({typedArray:e,context:t,usage:A.A.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}(0,r.A)(Object.create)&&(f.prototype=Object.create(d.A.prototype),f.prototype.constructor=f),Object.defineProperties(f.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}}),f.prototype.load=async function(){return(0,r.A)(this._promise)?this._promise:(0,r.A)(this._spz)?(this._promise=async function(e){e._state=h.A.LOADING;const t=e._resourceCache;try{const n=t.getSpzLoader({gltf:e._gltf,primitive:e._primitive,spz:e._spz,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._spzLoader=n,await n.load(),e.isDestroyed())return;return e._state=h.A.LOADED,e}catch{if(e.isDestroyed())return}}(this),this._promise):p(this._draco,this._attributeSemantic)?(this._promise=async function(e){e._state=h.A.LOADING;const t=e._resourceCache;try{const n=t.getDracoLoader({gltf:e._gltf,primitive:e._primitive,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._dracoLoader=n,await n.load(),e.isDestroyed())return;return e._state=h.A.LOADED,e}catch{if(e.isDestroyed())return;m(e)}}(this),this._promise):(this._promise=async function(e){e._state=h.A.LOADING;const t=e._resourceCache;try{const n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});if(e._bufferViewLoader=n,await n.load(),e.isDestroyed())return;return e._typedArray=n.typedArray,e._state=h.A.PROCESSING,e}catch(t){if(e.isDestroyed())return;m(e,t)}}(this),this._promise)},_.prototype.set=function(e,t){this.typedArray=e,this.context=t},_.prototype.execute=function(){this.buffer=I(this.typedArray,this.context)};const E=new _;f.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===h.A.READY)return!0;if(this._state!==h.A.LOADED&&this._state!==h.A.PROCESSING)return!1;if((0,r.A)(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(e){m(this,e)}!function(e){e._state=h.A.PROCESSING;const t=e._dracoLoader.decodedData.vertexAttributes[e._attributeSemantic],n=e._accessorId,i=e._gltf.accessors[n].type,o=t.array,a=t.data.quantization;(0,r.A)(a)&&(e._quantization=function(e,t,n,i){const o=(1<<e.quantizationBits)-1,r=1/o,a=new u.A.Quantization;if(a.componentDatatype=t,a.octEncoded=e.octEncoded,a.octEncodedZXY=!0,a.type=i,a.octEncoded)a.type=c.A.VEC2,a.normalizationRange=o;else{const t=c.A.getMathType(i);if(t===Number){const t=e.range;a.quantizedVolumeOffset=e.minValues[0],a.quantizedVolumeDimensions=t,a.normalizationRange=o,a.quantizedVolumeStepSize=t*r}else{a.quantizedVolumeOffset=t.unpack(e.minValues),a.normalizationRange=t.unpack(new Array(n).fill(o));const i=new Array(n).fill(e.range);a.quantizedVolumeDimensions=t.unpack(i);const s=i.map(function(e){return e*r});a.quantizedVolumeStepSize=t.unpack(s)}}return a}(a,t.data.componentDatatype,t.data.componentsPerAttribute,i)),e._typedArray=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}(this)}if((0,r.A)(this._spzLoader)){try{if(!this._spzLoader.process(e))return!1}catch(e){m(this,e)}!function(e){e._state=h.A.PROCESSING;const t=e._spzLoader.decodedData.gcloud;if("POSITION"===e._attributeSemantic)e._typedArray=t.positions;else if("KHR_gaussian_splatting:SCALE"===e._attributeSemantic||"_SCALE"===e._attributeSemantic)e._typedArray=t.scales;else if("KHR_gaussian_splatting:ROTATION"===e._attributeSemantic||"_ROTATION"===e._attributeSemantic)e._typedArray=t.rotations;else if("COLOR_0"===e._attributeSemantic){const n=t.colors,i=t.alphas;e._typedArray=new Uint8Array(n.length/3*4);for(let t=0;t<n.length/3;t++)e._typedArray[4*t]=g.A.clamp(255*n[3*t],0,255),e._typedArray[4*t+1]=g.A.clamp(255*n[3*t+1],0,255),e._typedArray[4*t+2]=g.A.clamp(255*n[3*t+2],0,255),e._typedArray[4*t+3]=g.A.clamp(255*i[t],0,255)}else if(e._attributeSemantic.includes("SH_DEGREE_")){const{l:n,n:i}=function(e){const t=function(e){return(e.startsWith("KHR_gaussian_splatting:")?"KHR_gaussian_splatting:":"_")+"SH_DEGREE_"}(e),n=t.length,i=e.indexOf("_COEF_",n);return{l:parseInt(e.slice(n,i),10),n:parseInt(e.slice(i+6),10)}}(e._attributeSemantic);let o=0;const r=[0,9,24];switch(t.shDegree){case 1:o=9;break;case 2:o=24;break;case 3:o=45}const a=t.numPoints,s=t.sh;e._typedArray=new Float32Array(3*a);for(let t=0;t<a;t++){const a=t*o+r[n-1]+3*i;e._typedArray[3*t]=s[a],e._typedArray[3*t+1]=s[a+1],e._typedArray[3*t+2]=s[a+2]}}}(this)}let t;const n=this._typedArray;if(this._loadBuffer&&this._asynchronous){const i=E;if(i.set(n,e.context),!e.jobScheduler.execute(i,l.A.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=I(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=h.A.READY,this._resourceCache.statistics.addGeometryLoader(this),!0},f.prototype.unload=function(){(0,r.A)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,r.A)(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),(0,r.A)(this._dracoLoader)&&e.unload(this._dracoLoader),(0,r.A)(this._spzLoader)&&e.unload(this._spzLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._spzLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0,this._primitive=void 0};const y=f},38300:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(303578),o=n(369031),r=n(672743),a=n(491446),s=n(955943),A=n(182348),c=n(697422),l=n(744603),u=n(123245),d=n(705302),h=n(41076),g=n(553909);function f(e){this.channel=e.channel,this.ellipsoid=e.ellipsoid,this.tilingScheme=void 0,this.version=void 0}function p(e){e=e??{},this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1.9,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new r.A(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${p.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new s.A}f.prototype.build=function(e){e._channel=this.channel,e._version=this.version,e._tilingScheme=this.tilingScheme},Object.defineProperties(p.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),p.fromUrl=async function(e,t,n){o.A.defined("url",e),o.A.defined("channel",t);const i=(n=n??{}).path??"/default_map",r=l.A.createIfNeeded(e).getDerivedResource({url:"/"===i[0]?i.substring(1):i});r.appendForwardSlash();const s=r.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),g=new f(n);g.channel=t,await async function(e,t,n){try{!function(e,t){let n,i;try{n=JSON.parse(e)}catch(t){n=JSON.parse(e.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(let e=0;e<n.layers.length;e++)if(n.layers[e].id===t.channel){i=n.layers[e];break}if(!(0,a.A)(i)){const e=`Could not find layer with channel (id) of ${t.channel}.`;throw new u.A(e)}if(!(0,a.A)(i.version)){const e=`Could not find a version in channel (id) ${t.channel}.`;throw new u.A(e)}if(t.version=i.version,(0,a.A)(n.projection)&&"flat"===n.projection)t.tilingScheme=new A.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new c.A(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:t.ellipsoid});else{if((0,a.A)(n.projection)&&"mercator"!==n.projection){const e=`Unsupported projection ${n.projection}.`;throw new u.A(e)}t.tilingScheme=new h.A({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid})}}(await e.fetchText(),t)}catch(t){!function(e,t,n){let i=`An error occurred while accessing ${t.url}.`;throw(0,a.A)(e)&&(0,a.A)(e.message)&&(i+=`: ${e.message}`),d.A.reportError(void 0,n,(0,a.A)(n)?n._errorEvent:void 0,i),new u.A(i)}(t,e,n)}}(s,g);const m=new p(n);return g.build(m),m._resource=r,m._url=e,m._path=i,m},p.prototype.getTileCredits=function(e,t,n){},p.prototype.requestImage=function(e,t,n,i){const o=this._resource.getDerivedResource({url:"query",request:i,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:n+1}});return g.A.loadImage(this,o)},p.prototype.pickFeatures=function(e,t,n,i,o){},p._logoUrl=void 0,Object.defineProperties(p,{logoUrl:{get:function(){return(0,a.A)(p._logoUrl)||(p._logoUrl=(0,i.A)("Assets/Images/google_earth_credit.png")),p._logoUrl},set:function(e){o.A.defined("value",e),p._logoUrl=e}}});const m=p},834298:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(915325),r=n(491446),a=n(965976);function s(e){const t=(e=e??o.A.EMPTY_OBJECT).id,n=e.group,a=e.class;i.A.typeOf.object("options.group",n),i.A.typeOf.object("options.class",a);const s=(0,r.A)(n.properties)?n.properties:{};this._class=a,this._properties=s,this._id=t,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return a.A.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return a.A.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return a.A.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return a.A.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return a.A.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return a.A.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return a.A.setPropertyBySemantic(e,t,this._properties,this._class)};const A=s},680278:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(786101),r=n(604752),a=n(123245);const s={};s._deprecationWarning=o.A;const A=Uint32Array.BYTES_PER_ELEMENT;s.parse=function(e,t){i.A.defined("arrayBuffer",e);const n=t??0;t=n;const o=new Uint8Array(e),c=new DataView(e);t+=A;const l=c.getUint32(t,!0);if(1!==l)throw new a.A(`Only Instanced 3D Model version 1 is supported. Version ${l} is not.`);t+=A;const u=c.getUint32(t,!0);t+=A;const d=c.getUint32(t,!0);if(0===d)throw new a.A("featureTableJsonByteLength is zero, the feature table must be defined.");t+=A;const h=c.getUint32(t,!0);t+=A;const g=c.getUint32(t,!0);t+=A;const f=c.getUint32(t,!0);t+=A;const p=c.getUint32(t,!0);if(1!==p&&0!==p)throw new a.A(`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${p} is not.`);t+=A;const m=(0,r.A)(o,t,d);t+=d;const _=new Uint8Array(e,t,h);let I,E;t+=h,g>0&&(I=(0,r.A)(o,t,g),t+=g,f>0&&(E=new Uint8Array(e,t,f),E=new Uint8Array(E),t+=f));const y=n+u-t;if(0===y)throw new a.A("glTF byte length must be greater than 0.");let C;return t%4==0?C=new Uint8Array(e,t,y):(s._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),C=new Uint8Array(o.subarray(t,t+y))),{gltfFormat:p,featureTableJson:m,featureTableBinary:_,batchTableJson:I,batchTableBinary:E,gltf:C}};const c=s},208198:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(434067),o=n(369031),r=n(491446),a=n(915325),s=n(677354),A=n(605971),c=n(126797);function l(e){e=e??a.A.EMPTY_OBJECT;const t=(0,r.A)(e.imageBasedLightingFactor)?i.A.clone(e.imageBasedLightingFactor):new i.A(1,1);o.A.typeOf.object("options.imageBasedLightingFactor",t),o.A.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.x",t.x,0),o.A.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.x",t.x,1),o.A.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.y",t.y,0),o.A.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.y",t.y,1),this._imageBasedLightingFactor=t;const n=e.sphericalHarmonicCoefficients;if((0,r.A)(n)&&(!Array.isArray(n)||9!==n.length))throw new A.A("options.sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._sphericalHarmonicCoefficients=n,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentCubeMap=void 0,this._specularEnvironmentCubeMapDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousFrameContext=void 0,this._previousImageBasedLightingFactor=i.A.clone(t),this._previousSphericalHarmonicCoefficients=n,this._removeErrorListener=void 0}Object.defineProperties(l.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){o.A.typeOf.object("imageBasedLightingFactor",e),o.A.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),o.A.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),o.A.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),o.A.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),this._previousImageBasedLightingFactor=i.A.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=i.A.clone(e,this._imageBasedLightingFactor)}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){if((0,r.A)(e)&&(!Array.isArray(e)||9!==e.length))throw new A.A("sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentCubeMapDirty=this._specularEnvironmentCubeMapDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},specularEnvironmentCubeMap:{get:function(){return this._specularEnvironmentCubeMap}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return(0,r.A)(this._specularEnvironmentCubeMap)&&this._specularEnvironmentCubeMap.ready||this._useDefaultSpecularMaps}}}),l.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber&&e.context===this._previousFrameContext)return;this._previousFrameNumber=e.frameNumber;const t=this._previousFrameContext=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;const n=this._imageBasedLightingFactor,o=this._previousImageBasedLightingFactor;i.A.equals(n,o)||(this._shouldRegenerateShaders=n.x>0&&0===o.x||0===n.x&&o.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||n.y>0&&0===o.y||0===n.y&&o.y>0,this._previousImageBasedLightingFactor=i.A.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,r.A)(this._previousSphericalHarmonicCoefficients)!==(0,r.A)(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentCubeMapDirty&&(function(e,t){if(c.A.isSupported(t)){if(e._specularEnvironmentCubeMap=e._specularEnvironmentCubeMap&&e._specularEnvironmentCubeMap.destroy(),(0,r.A)(e._specularEnvironmentMaps)){const t=new c.A(e._specularEnvironmentMaps);e._specularEnvironmentCubeMap=t,e._removeErrorListener=t.errorEvent.addEventListener(e=>{console.error(`Error loading specularEnvironmentMaps: ${e}`)})}e._shouldRegenerateShaders=!0}}(this,t),this._specularEnvironmentCubeMapDirty=!1),(0,r.A)(this._specularEnvironmentCubeMap)&&(this._specularEnvironmentCubeMap.update(e),this._specularEnvironmentCubeMap.ready&&(this._specularEnvironmentMapLoaded=!0));const a=!(0,r.A)(this._specularEnvironmentCubeMap)&&(0,r.A)(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,s=!(0,r.A)(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,A=!(0,r.A)(this._sphericalHarmonicCoefficients)&&(0,r.A)(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,l=!(0,r.A)(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||a||s||A||l,this._useDefaultSpecularMaps=!(0,r.A)(this._specularEnvironmentCubeMap)&&(0,r.A)(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!(0,r.A)(this._sphericalHarmonicCoefficients)&&(0,r.A)(e.sphericalHarmonicCoefficients)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._specularEnvironmentCubeMap=this._specularEnvironmentCubeMap&&this._specularEnvironmentCubeMap.destroy(),this._removeErrorListener=this._removeErrorListener&&this._removeErrorListener(),(0,s.A)(this)};const u=l},17656:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(677354),r=n(921243);function a(e,t,n,o,a){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=o,this.request=void 0,0!==o){const i=t/2|0,r=n/2|0,a=o-1;this.parent=e.getImageryFromCache(i,r,a)}this.state=r.A.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!(0,i.A)(a)&&e.ready&&(a=e.imageryProvider.tilingScheme.tileXYToRectangle(t,n,o)),this.rectangle=a}a.createPlaceholder=function(e){const t=new a(e,0,0,0);return t.addReference(),t.state=r.A.PLACEHOLDER,t},a.prototype.addReference=function(){++this.referenceCount},a.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),(0,i.A)(this.parent)&&this.parent.releaseReference(),(0,i.A)(this.image)&&(0,i.A)(this.image.destroy)&&this.image.destroy(),(0,i.A)(this.texture)&&this.texture.destroy(),(0,i.A)(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),(0,o.A)(this),0):this.referenceCount},a.prototype.processStateMachine=function(e,t,n){this.state!==r.A.UNLOADED||n||(this.state=r.A.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===r.A.RECEIVED&&(this.state=r.A.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));const i=this.state===r.A.READY&&t&&!this.texture;(this.state===r.A.TEXTURE_LOADED||i)&&(this.state=r.A.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};const s=a},451227:(e,t,n)=>{"use strict";n.d(t,{A:()=>Z});var i=n(434067),o=n(626809),r=n(369031),a=n(655028),s=n(915325),A=n(491446),c=n(677354),l=n(605971),u=n(955943),d=n(520098),h=n(653577),g=n(874915),f=n(367817),p=n(276904),m=n(697422),_=n(209202),I=n(83181),E=n(307898),y=n(98055),C=n(705302),b=n(414305),B=n(641613),v=n(442790),w=n(718289),T=n(430332),S=n(418906),x=n(654799),D=n(302836),Q=n(342875),N=n(616e3),R=n(957233),M=n(78078),L=n(557448),P=n(508380),O=n(275058),F=n(208898),U=n(17656),k=n(921243),G=n(913419),H=n(976092);function V(e,t){this._imageryProvider=e,this._readyEvent=new u.A,this._errorEvent=new u.A,t=t??s.A.EMPTY_OBJECT,e=e??s.A.EMPTY_OBJECT,this.alpha=t.alpha??e._defaultAlpha??1,this.nightAlpha=t.nightAlpha??e._defaultNightAlpha??1,this.dayAlpha=t.dayAlpha??e._defaultDayAlpha??1,this.brightness=t.brightness??e._defaultBrightness??V.DEFAULT_BRIGHTNESS,this.contrast=t.contrast??e._defaultContrast??V.DEFAULT_CONTRAST,this.hue=t.hue??e._defaultHue??V.DEFAULT_HUE,this.saturation=t.saturation??e._defaultSaturation??V.DEFAULT_SATURATION,this.gamma=t.gamma??e._defaultGamma??V.DEFAULT_GAMMA,this.splitDirection=t.splitDirection??V.DEFAULT_SPLIT,this.minificationFilter=t.minificationFilter??e._defaultMinificationFilter??V.DEFAULT_MINIFICATION_FILTER,this.magnificationFilter=t.magnificationFilter??e._defaultMagnificationFilter??V.DEFAULT_MAGNIFICATION_FILTER,this.show=t.show??!0,this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=t.rectangle??m.A.MAX_VALUE,this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new H.A(U.A.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=t.colorToAlphaThreshold??V.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD}Object.defineProperties(V.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},ready:{get:function(){return(0,A.A)(this._imageryProvider)}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},rectangle:{get:function(){return this._rectangle}}}),V.DEFAULT_BRIGHTNESS=1,V.DEFAULT_CONTRAST=1,V.DEFAULT_HUE=0,V.DEFAULT_SATURATION=1,V.DEFAULT_GAMMA=1,V.DEFAULT_SPLIT=G.A.NONE,V.DEFAULT_MINIFICATION_FILTER=M.A.LINEAR,V.DEFAULT_MAGNIFICATION_FILTER=R.A.LINEAR,V.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,V.fromProviderAsync=function(e,t){r.A.typeOf.object("imageryProviderPromise",e);const n=new V(void 0,t);return async function(e,t){let n;try{if(n=await Promise.resolve(t),e.isDestroyed())return;e._imageryProvider=n,e._readyEvent.raiseEvent(n)}catch(t){!function(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}(e._errorEvent,t)}}(n,Promise.resolve(e)),n},V.fromWorldImagery=function(e){return e=e??s.A.EMPTY_OBJECT,V.fromProviderAsync((0,a.A)({style:e.style}),e)},V.prototype.isBaseLayer=function(){return this._isBaseLayer},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){return(0,c.A)(this)};const z=new m.A,j=new m.A,Y=new m.A,q=new m.A;function W(e,t,n){return`${e}:${t}:${n}`}function J(e,t,n){return JSON.stringify([e,t,n])}V.prototype.getImageryRectangle=function(){const e=this._imageryProvider,t=this._rectangle;return m.A.intersection(e.rectangle,t)},V.prototype._createTileImagerySkeletons=function(e,t,n){const i=e.data;if(!(0,A.A)(t)||(0,A.A)(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if((0,A.A)(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;(0,A.A)(n)||(n=i.imagery.length);const r=this._imageryProvider;if(!this.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;const a=r.tilingScheme.projection instanceof b.A&&e.rectangle.north<b.A.MaximumLatitude&&e.rectangle.south>-b.A.MaximumLatitude,s=m.A.intersection(r.rectangle,this._rectangle,z);let c=m.A.intersection(e.rectangle,s,j);if(!(0,A.A)(c)){if(!this.isBaseLayer())return!1;const t=s,n=e.rectangle;c=j,n.south>=t.north?c.north=c.south=t.north:n.north<=t.south?c.north=c.south=t.south:(c.south=Math.max(n.south,t.south),c.north=Math.min(n.north,t.north)),n.west>=t.east?c.west=c.east=t.east:n.east<=t.west?c.west=c.east=t.west:(c.west=Math.max(n.west,t.west),c.east=Math.min(n.east,t.east))}let l=0;c.south>0?l=c.south:c.north<0&&(l=c.north);let u=function(e,t,n){const i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,a=e._imageryProvider.tilingScheme.projection instanceof h.A?1:Math.cos(n),s=o.rectangle,A=r.maximumRadius*s.width*a/(i.tileWidth*o.getNumberOfXTilesAtLevel(0))/t,c=Math.log(A)/Math.log(2);return 0|Math.round(c)}(this,1*t.getLevelMaximumGeometricError(e.level),l);u=Math.max(0,u);const d=r.maximumLevel;if(u>d&&(u=d),(0,A.A)(r.minimumLevel)){const e=r.minimumLevel;u<e&&(u=e)}const g=r.tilingScheme,f=g.positionToTileXY(m.A.northwest(c),u),p=g.positionToTileXY(m.A.southeast(c),u);let _=e.rectangle.width/512,I=e.rectangle.height/512;const E=g.tileXYToRectangle(f.x,f.y,u);Math.abs(E.south-e.rectangle.north)<I&&f.y<p.y&&++f.y,Math.abs(E.east-e.rectangle.west)<_&&f.x<p.x&&++f.x;const y=g.tileXYToRectangle(p.x,p.y,u);Math.abs(y.north-e.rectangle.south)<I&&p.y>f.y&&--p.y,Math.abs(y.west-e.rectangle.east)<_&&p.x>f.x&&--p.x;const C=m.A.clone(e.rectangle,q);let B,v,w=g.tileXYToRectangle(f.x,f.y,u),T=m.A.intersection(w,s,Y);a?(g.rectangleToNativeRectangle(C,C),g.rectangleToNativeRectangle(w,w),g.rectangleToNativeRectangle(T,T),g.rectangleToNativeRectangle(s,s),B=g.tileXYToNativeRectangle.bind(g),_=C.width/512,I=C.height/512):B=g.tileXYToRectangle.bind(g);let S,x=0,D=1;!this.isBaseLayer()&&Math.abs(T.west-C.west)>=_&&(x=Math.min(1,(T.west-C.west)/C.width)),!this.isBaseLayer()&&Math.abs(T.north-C.north)>=I&&(D=Math.max(0,(T.north-C.south)/C.height));const Q=D;for(let e=f.x;e<=p.x;e++)if(v=x,w=B(e,f.y,u),T=m.A.simpleIntersection(w,s,Y),(0,A.A)(T)){x=Math.min(1,(T.east-C.west)/C.width),e===p.x&&(this.isBaseLayer()||Math.abs(T.east-C.east)<_)&&(x=1),D=Q;for(let t=f.y;t<=p.y;t++){if(S=D,w=B(e,t,u),T=m.A.simpleIntersection(w,s,Y),!(0,A.A)(T))continue;D=Math.max(0,(T.south-C.south)/C.height),t===p.y&&(this.isBaseLayer()||Math.abs(T.south-C.south)<I)&&(D=0);const r=new o.A(v,D,x,S),c=this.getImageryFromCache(e,t,u);i.imagery.splice(n,0,new H.A(c,r,a)),++n}}return!0},V.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){const e=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=e.rectangleToNativeRectangle(n,z),i=e.rectangleToNativeRectangle(i,q)}const r=i.width,a=i.height,s=r/n.width,A=a/n.height;return new o.A(s*(i.west-n.west)/r,A*(i.south-n.south)/a,s,A)},V.prototype._requestImagery=function(e){const t=this._imageryProvider,n=this;function i(i){if(e.request.state===I.A.CANCELLED)return e.state=k.A.UNLOADED,void(e.request=void 0);e.state=k.A.FAILED,e.request=void 0;const r=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=C.A.reportError(n._requestImageError,t,t.errorEvent,r,e.x,e.y,e.level,i),n._requestImageError.retry&&o()}function o(){const o=new _.A({throttle:!1,throttleByServer:!0,type:E.A.IMAGERY});e.request=o,e.state=k.A.TRANSITIONING;const r=t.requestImage(e.x,e.y,e.level,o);if(!(0,A.A)(r))return e.state=k.A.UNLOADED,void(e.request=void 0);(0,A.A)(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),r.then(function(t){!function(t){if(!(0,A.A)(t))return i();e.image=t,e.state=k.A.RECEIVED,e.request=void 0,C.A.reportSuccess(n._requestImageError)}(t)}).catch(function(e){i(e)})}o()},V.prototype._createTextureWebGL=function(e,t){const n=new x.A({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return(0,A.A)(i.internalFormat)?new N.A({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new N.A({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?p.A.RGBA:p.A.RGB,sampler:n})},V.prototype._createTexture=function(e,t){const n=this._imageryProvider,i=t.image;if((0,A.A)(n.tileDiscardPolicy)){const e=n.tileDiscardPolicy;if((0,A.A)(e)){if(!e.isReady())return void(t.state=k.A.RECEIVED);if(e.shouldDiscardImage(i))return void(t.state=k.A.INVALID)}}if(this.minificationFilter!==M.A.NEAREST&&this.minificationFilter!==M.A.LINEAR)throw new l.A("ImageryLayer minification filter must be NEAREST or LINEAR");const o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof b.A?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=k.A.TEXTURE_LOADED},V.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter;const i=this.magnificationFilter;if(n===M.A.LINEAR&&i===R.A.LINEAR&&!p.A.isCompressedFormat(t.pixelFormat)&&f.A.isPowerOfTwo(t.width)&&f.A.isPowerOfTwo(t.height)){n=M.A.LINEAR_MIPMAP_LINEAR;const o=T.A.maximumTextureFilterAnisotropy,r=Math.min(o,this._maximumAnisotropy??o),a=W(n,i,r);let s=e.cache.imageryLayerMipmapSamplers;(0,A.A)(s)||(s={},e.cache.imageryLayerMipmapSamplers=s);let c=s[a];(0,A.A)(c)||(c=s[a]=new x.A({wrapS:L.A.CLAMP_TO_EDGE,wrapT:L.A.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:r})),t.generateMipmap(S.A.NICEST),t.sampler=c}else{const o=W(n,i,0);let r=e.cache.imageryLayerNonMipmapSamplers;(0,A.A)(r)||(r={},e.cache.imageryLayerNonMipmapSamplers=r);let a=r[o];(0,A.A)(a)||(a=r[o]=new x.A({wrapS:L.A.CLAMP_TO_EDGE,wrapT:L.A.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=a}},V.prototype._reprojectTexture=function(e,t,n){const i=t.textureWebMercator||t.texture,o=t.rectangle,r=e.context;if((n=n??!0)&&!(this._imageryProvider.tilingScheme.projection instanceof h.A)&&o.width/i.width>1e-5){const e=this;t.addReference();const n=new w.A({persists:!0,owner:this,preExecute:function(e){!function(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!(0,A.A)(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){(0,A.A)(this.framebuffer)&&this.framebuffer.destroy(),(0,A.A)(this.vertexArray)&&this.vertexArray.destroy(),(0,A.A)(this.shaderProgram)&&this.shaderProgram.destroy()}};const e=new Float32Array(256);let n=0;for(let t=0;t<64;++t){const i=t/63;e[n++]=0,e[n++]=i,e[n++]=1,e[n++]=i}const i={position:0,webMercatorT:1},r=y.A.getRegularGridIndices(2,64),a=B.A.createIndexBuffer({context:t,typedArray:r,usage:v.A.STATIC_DRAW,indexDatatype:g.A.UNSIGNED_SHORT});o.vertexArray=new P.A({context:t,attributes:[{index:i.position,vertexBuffer:B.A.createVertexBuffer({context:t,typedArray:e,usage:v.A.STATIC_DRAW}),componentsPerAttribute:2},{index:i.webMercatorT,vertexBuffer:B.A.createVertexBuffer({context:t,sizeInBytes:512,usage:v.A.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:a});const s=new Q.A({sources:[F.A]});o.shaderProgram=D.A.fromCache({context:t,vertexShaderSource:s,fragmentShaderSource:O.A,attributeLocations:i}),o.sampler=new x.A({wrapS:L.A.CLAMP_TO_EDGE,wrapT:L.A.CLAMP_TO_EDGE,minificationFilter:M.A.LINEAR,magnificationFilter:R.A.LINEAR})}n.sampler=o.sampler;const r=n.width,a=n.height;K.textureDimensions.x=r,K.textureDimensions.y=a,K.texture=n;let s=Math.sin(i.south);const c=.5*Math.log((1+s)/(1-s));s=Math.sin(i.north);const l=1/(.5*Math.log((1+s)/(1-s))-c),u=new N.A({context:t,width:r,height:a,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});f.A.isPowerOfTwo(r)&&f.A.isPowerOfTwo(a)&&u.generateMipmap(S.A.NICEST);const d=i.south,h=i.north,p=X;let m=0;for(let e=0;e<64;++e){const t=e/63,n=f.A.lerp(d,h,t);s=Math.sin(n);const i=(.5*Math.log((1+s)/(1-s))-c)*l;p[m++]=i,p[m++]=i}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(p),e.shaderProgram=o.shaderProgram,e.outputTexture=u,e.uniformMap=K,e.vertexArray=o.vertexArray}(e,r,i,t.rectangle)},postExecute:function(n){t.texture=n,e._finalizeReprojectTexture(r,n),t.state=k.A.READY,t.releaseReference()},canceled:function(){t.state=k.A.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(n)}else n&&(t.texture=i),this._finalizeReprojectTexture(r,i),t.state=k.A.READY},V.prototype.queueReprojectionCommands=function(e){const t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0},V.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach(function(e){(0,A.A)(e.canceled)&&e.canceled()}),this._reprojectComputeCommands.length=0},V.prototype.getImageryFromCache=function(e,t,n,i){const o=J(e,t,n);let r=this._imageryCache[o];return(0,A.A)(r)||(r=new U.A(this,e,t,n,i),this._imageryCache[o]=r),r.addReference(),r},V.prototype.removeImageryFromCache=function(e){const t=J(e.x,e.y,e.level);delete this._imageryCache[t]};const K={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new i.A,texture:void 0},X=d.A.supportsTypedArrays()?new Float32Array(128):void 0,Z=V},869327:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(491446),o=n(677354),r=n(605971),a=n(955943),s=n(367817),A=n(697422),c=n(451227);function l(){this._layers=[],this.layerAdded=new a.A,this.layerRemoved=new a.A,this.layerMoved=new a.A,this.layerShownOrHidden=new a.A}function u(e,t){if(!(0,i.A)(t))throw new r.A("layer is required.");const n=e.indexOf(t);if(-1===n)throw new r.A("layer is not in this collection.");return n}function d(e,t,n){const i=e._layers;if((t=s.A.clamp(t,0,i.length-1))===(n=s.A.clamp(n,0,i.length-1)))return;const o=i[t];i[t]=i[n],i[n]=o,e._update(),e.layerMoved.raiseEvent(o,n,t)}Object.defineProperties(l.prototype,{length:{get:function(){return this._layers.length}}}),l.prototype.add=function(e,t){const n=(0,i.A)(t);if(!(0,i.A)(e))throw new r.A("layer is required.");if(n){if(t<0)throw new r.A("index must be greater than or equal to zero.");if(t>this._layers.length)throw new r.A("index must be less than or equal to the number of layers.")}n?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t);const o=e.readyEvent.addEventListener(()=>{this.layerShownOrHidden.raiseEvent(e,e._layerIndex,e.show),o()})},l.prototype.addImageryProvider=function(e,t){if(!(0,i.A)(e))throw new r.A("imageryProvider is required.");const n=new c.A(e);return this.add(n,t),n},l.prototype.remove=function(e,t){t=t??!0;const n=this._layers.indexOf(e);return-1!==n&&(this._layers.splice(n,1),this._update(),this.layerRemoved.raiseEvent(e,n),t&&e.destroy(),!0)},l.prototype.removeAll=function(e){e=e??!0;const t=this._layers;for(let n=0,i=t.length;n<i;n++){const i=t[n];this.layerRemoved.raiseEvent(i,n),e&&i.destroy()}this._layers=[]},l.prototype.contains=function(e){return-1!==this.indexOf(e)},l.prototype.indexOf=function(e){return this._layers.indexOf(e)},l.prototype.get=function(e){if(!(0,i.A)(e))throw new r.A("index is required.","index");return this._layers[e]},l.prototype.raise=function(e){const t=u(this._layers,e);d(this,t,t+1)},l.prototype.lower=function(e){const t=u(this._layers,e);d(this,t,t-1)},l.prototype.raiseToTop=function(e){const t=u(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},l.prototype.lowerToBottom=function(e){const t=u(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};const h=new A.A;function g(e,t,n,o){const r=e.globe._surface._tilesToRender;let a;for(let e=0;!(0,i.A)(a)&&e<r.length;++e){const n=r[e];A.A.contains(n.rectangle,t)&&(a=n)}if(!(0,i.A)(a))return;const c=a.data.imagery;for(let e=c.length-1;e>=0;--e){const r=c[e],l=r.readyImagery;if(!(0,i.A)(l))continue;if(!l.imageryLayer.ready)continue;const u=l.imageryLayer.imageryProvider;if(n&&!(0,i.A)(u.pickFeatures))continue;if(!A.A.contains(l.rectangle,t))continue;const d=h,g=1/1024;d.west=s.A.lerp(a.rectangle.west,a.rectangle.east,r.textureCoordinateRectangle.x-g),d.east=s.A.lerp(a.rectangle.west,a.rectangle.east,r.textureCoordinateRectangle.z+g),d.south=s.A.lerp(a.rectangle.south,a.rectangle.north,r.textureCoordinateRectangle.y-g),d.north=s.A.lerp(a.rectangle.south,a.rectangle.north,r.textureCoordinateRectangle.w+g),A.A.contains(d,t)&&o(l)}}l.prototype.pickImageryLayers=function(e,t){const n=t.globe.pick(e,t);if(!(0,i.A)(n))return;const o=t.ellipsoid.cartesianToCartographic(n),r=[];return g(t,o,!1,function(e){r.push(e.imageryLayer)}),0!==r.length?r:void 0},l.prototype.pickImageryLayerFeatures=function(e,t){const n=t.globe.pick(e,t);if(!(0,i.A)(n))return;const o=t.ellipsoid.cartesianToCartographic(n),r=[],a=[];return g(t,o,!0,function(e){if(!e.imageryLayer.ready)return;const t=e.imageryLayer.imageryProvider.pickFeatures(e.x,e.y,e.level,o.longitude,o.latitude);(0,i.A)(t)&&(r.push(t),a.push(e.imageryLayer))}),0!==r.length?Promise.all(r).then(function(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n],s=a[n];if((0,i.A)(r)&&r.length>0)for(let e=0;e<r.length;++e){const n=r[e];n.imageryLayer=s,(0,i.A)(n.position)||(n.position=o),t.push(n)}}return t}):void 0},l.prototype.queueReprojectionCommands=function(e){const t=this._layers;for(let n=0,i=t.length;n<i;++n)t[n].queueReprojectionCommands(e)},l.prototype.cancelReprojections=function(){const e=this._layers;for(let t=0,n=e.length;t<n;++t)e[t].cancelReprojections()},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this.removeAll(!0),(0,o.A)(this)},l.prototype._update=function(){let e=!0;const t=this._layers;let n,o,r,a;for(r=0,a=t.length;r<a;++r)o=t[r],o._layerIndex=r,o.show?(o._isBaseLayer=e,e=!1):o._isBaseLayer=!1,o.show!==o._show&&((0,i.A)(o._show)&&((0,i.A)(n)||(n=[]),n.push(o)),o._show=o.show);if((0,i.A)(n))for(r=0,a=n.length;r<a;++r)o=n[r],this.layerShownOrHidden.raiseEvent(o,o._layerIndex,o.show)};const f=l},789989:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446);function o(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}o.prototype.configureNameFromProperties=function(e){let t,n=10;for(const i in e)if(e.hasOwnProperty(i)&&e[i]){const e=i.toLowerCase();n>1&&"name"===e?(n=1,t=i):n>2&&"title"===e?(n=2,t=i):n>3&&/name/i.test(i)?(n=3,t=i):n>4&&/title/i.test(i)&&(n=4,t=i)}(0,i.A)(t)&&(this.name=e[t])},o.prototype.configureDescriptionFromProperties=function(e){this.description=function e(t){let n='<table class="cesium-infoBox-defaultTable">';for(const o in t)if(t.hasOwnProperty(o)){const r=t[o];(0,i.A)(r)&&(n+="object"==typeof r?`<tr><td>${o}</td><td>${e(r)}</td></tr>`:`<tr><td>${o}</td><td>${r}</td></tr>`)}return n+="</table>",n}(e)};const r=o},553909:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(491446),r=n(605971),a=n(471874),s=n(744603);function A(){r.A.throwInstantiationError()}Object.defineProperties(A.prototype,{rectangle:{get:r.A.throwInstantiationError},tileWidth:{get:r.A.throwInstantiationError},tileHeight:{get:r.A.throwInstantiationError},maximumLevel:{get:r.A.throwInstantiationError},minimumLevel:{get:r.A.throwInstantiationError},tilingScheme:{get:r.A.throwInstantiationError},tileDiscardPolicy:{get:r.A.throwInstantiationError},errorEvent:{get:r.A.throwInstantiationError},credit:{get:r.A.throwInstantiationError},proxy:{get:r.A.throwInstantiationError},hasAlphaChannel:{get:r.A.throwInstantiationError}}),A.prototype.getTileCredits=function(e,t,n){r.A.throwInstantiationError()},A.prototype.requestImage=function(e,t,n,i){r.A.throwInstantiationError()},A.prototype.pickFeatures=function(e,t,n,i,o){r.A.throwInstantiationError()};const c=/\.ktx2$/i;A.loadImage=function(e,t){i.A.defined("url",t);const n=s.A.createIfNeeded(t);return c.test(n.url)?(0,a.A)(n):(0,o.A)(e)&&(0,o.A)(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};const l=A},921243:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7})},961965:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(267980),o=n(369031),r=n(376758),a=n(430346),s=n(491446),A=n(677354),c=n(605971),l=n(367817),u=n(416721),d=n(331185),h=n(697422),g=n(252538),f=n(409211),p=n(800859),m=n(165955),_=n(655979);function I(e,t,n){o.A.defined("tile.implicitTileset",t.implicitTileset),o.A.defined("tile.implicitCoordinates",t.implicitCoordinates);const i=t.implicitTileset,r=t.implicitCoordinates;this._implicitTileset=i,this._implicitCoordinates=r,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;const a=r.getTemplateValues(),s=i.subtreeUriTemplate.getDerivedResource({templateValues:a});this._url=s.getUrlComponent(!0),this._ready=!1}function E(e,t,n){const i=m.A.TILE_GEOMETRIC_ERROR;return(0,s.A)(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function y(e,t,n,i,o,A){const c=e._implicitTileset;let l,u,d,h;if(l=A?n.implicitCoordinates:n.implicitCoordinates.getChildCoordinates(i),(0,s.A)(t.tilePropertyTableJson)){u=t.getTileMetadataView(l);const e=_.A.parseAllBoundingVolumeSemantics(u);d=e.tile,h=e.content}const g=t.contentPropertyTableJsons.length;let f=!1;for(let e=0;e<g;e++)if(t.contentIsAvailableAtCoordinates(l,e)){f=!0;break}const p=function(e,t,n,i,o,r){let a;return a=!(0,s.A)(r)||!(0,s.A)(r.boundingVolume)||!C(r.boundingVolume,r)&&C(e.boundingVolume,r)?v(e,t,n,i??!1,o):r.boundingVolume,b(a,r),a}(c,l,i,A,n,d),m=[];for(let e=0;e<c.contentCount;e++){if(!t.contentIsAvailableAtIndex(o,e))continue;const n={uri:c.contentUriTemplates[e].getDerivedResource({templateValues:l.getTemplateValues()}).url},i=B(p,h);(0,s.A)(i)&&(n.boundingVolume=i),m.push((0,a.A)(n,c.contentHeaders[e]))}const I={boundingVolume:p,geometricError:E(u,c,l),refine:c.refine,contents:m},y=!0,w=(0,r.A)(c.tileHeader,y);delete w.boundingVolume,delete w.transform,delete w.metadata;const T=(0,a.A)(I,w,y),S=L(e,c.baseResource,T,n);return S.implicitCoordinates=l,S.implicitSubtree=t,S.metadata=u,S.hasImplicitContentMetadata=f,S}function C(e,t){return(0,s.A)(e)&&(0,s.A)(t)&&((0,s.A)(t.minimumHeight)||(0,s.A)(t.maximumHeight))&&((0,p.A)(e,"3DTILES_bounding_volume_S2")||(0,s.A)(e.region))}function b(e,t){var n,i,o;(0,s.A)(t)&&((0,p.A)(e,"3DTILES_bounding_volume_S2")?(n=e.extensions["3DTILES_bounding_volume_S2"],i=t.minimumHeight,o=t.maximumHeight,(0,s.A)(i)&&(n.minimumHeight=i),(0,s.A)(o)&&(n.maximumHeight=o)):(0,s.A)(e.region)&&function(e,t,n){(0,s.A)(t)&&(e[4]=t),(0,s.A)(n)&&(e[5]=n)}(e.region,t.minimumHeight,t.maximumHeight))}function B(e,t){let n;return(0,s.A)(t)&&(n=t.boundingVolume),C(n,t)?b(n,t):C(e,t)&&(n=(0,r.A)(e,!0),b(n,t)),n}function v(e,t,n,i,o){const r=e.boundingVolume;return(0,p.A)(r,"3DTILES_bounding_volume_S2")?w(i,o,n,t.level,t.x,t.y,t.z):(0,s.A)(r.region)?{region:R(r.region,t.level,t.x,t.y,t.z)}:{box:Q(r.box,t.level,t.x,t.y,t.z)}}function w(e,t,n,i,r,a,A){o.A.typeOf.bool("parentIsPlaceholderTile",e),o.A.typeOf.object("parentTile",t),o.A.typeOf.number("childIndex",n),o.A.typeOf.number("level",i),o.A.typeOf.number("x",r),o.A.typeOf.number("y",a),(0,s.A)(A)&&o.A.typeOf.number("z",A);const c=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:g.A.getTokenFromId(c.s2Cell._cellId),minimumHeight:c.minimumHeight,maximumHeight:c.maximumHeight}}};const l=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),d=l%2==0?u.A.encode2D(i,r,a):u.A.encode2D(i,a,r),h=g.A.fromFacePositionLevel(l,BigInt(d),i);let f,p;if((0,s.A)(A)){const e=(c.maximumHeight+c.minimumHeight)/2;f=n<4?c.minimumHeight:e,p=n<4?e:c.maximumHeight}else f=c.minimumHeight,p=c.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:g.A.getTokenFromId(h._cellId),minimumHeight:f,maximumHeight:p}}}}Object.defineProperties(I.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){throw new c.A("Implicit3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),I.fromSubtreeJson=async function(e,t,n,i,r,a){if(o.A.defined("tile.implicitTileset",t.implicitTileset),o.A.defined("tile.implicitCoordinates",t.implicitCoordinates),(0,s.A)(i)===(0,s.A)(r))throw new c.A("One of json and arrayBuffer must be defined.");let A;a=a??0,(0,s.A)(r)&&(A=new Uint8Array(r,a));const l=t.implicitTileset,u=t.implicitCoordinates,d=await f.A.fromSubtreeJson(n,i,A,l,u),h=new I(e,t,n);return h._implicitSubtree=d,function(e,t){const n=e._tile,i=function(e,t,n,i){const o=y(e,t,n,i,0,!0),r=e._tileset.statistics;let a=[o],s=[];const A=e._implicitTileset;for(let n=1;n<A.subtreeLevels;n++){const i=t.getLevelOffset(n),o=A.branchingFactor*a.length;for(let n=0;n<o;n++){const o=i+n;if(!t.tileIsAvailableAtIndex(o)){s.push(void 0);continue}const c=a[t.getParentMortonIndex(n)],l=y(e,t,c,n%A.branchingFactor,o);c.children.push(l),r.numberOfTilesTotal++,s.push(l)}a=s,s=[]}return{rootTile:o,bottomRow:a}}(e,t,n,e._implicitCoordinates.childIndex),o=e._tileset.statistics;n.children.push(i.rootTile),o.numberOfTilesTotal++;const r=function(e,t,n){const i=[],o=e._implicitTileset.branchingFactor;for(let e=0;e<n.length;e++){const r=n[e];if((0,s.A)(r))for(let n=0;n<o;n++){const a=e*o+n;t.childSubtreeIsAvailableAtIndex(a)&&i.push({tile:r,childIndex:n})}}return i}(e,t,i.bottomRow);for(let t=0;t<r.length;t++){const n=r[t],i=n.tile,a=M(e,i,n.childIndex);i.children.push(a),o.numberOfTilesTotal++}}(h,d),h._ready=!0,h};const T=new i.A,S=new i.A,x=new i.A,D=new d.A;function Q(e,t,n,r,a){if(o.A.typeOf.object("rootBox",e),o.A.typeOf.number("level",t),o.A.typeOf.number("x",n),o.A.typeOf.number("y",r),(0,s.A)(a)&&o.A.typeOf.number("z",a),0===t)return e;const A=i.A.unpack(e,0,S),c=d.A.unpack(e,3,D),l=Math.pow(2,-t),u=(2*n+1)*l-1,h=(2*r+1)*l-1;let g=0;const f=i.A.fromElements(l,l,1,T);(0,s.A)(a)&&(g=(2*a+1)*l-1,f.z=l);let p=i.A.fromElements(u,h,g,x);p=d.A.multiplyByVector(c,p,x),p=i.A.add(p,A,x);let m=d.A.clone(c);m=d.A.multiplyByScale(m,f,m);const _=new Array(12);return i.A.pack(p,_),d.A.pack(m,_,3),_}const N=new h.A;function R(e,t,n,i,r){if(o.A.typeOf.object("rootRegion",e),o.A.typeOf.number("level",t),o.A.typeOf.number("x",n),o.A.typeOf.number("y",i),(0,s.A)(r)&&o.A.typeOf.number("z",r),0===t)return e.slice();const a=h.A.unpack(e,0,N),A=e[4],c=e[5],u=Math.pow(2,-t),d=u*a.width,g=l.A.negativePiToPi(a.west+n*d),f=l.A.negativePiToPi(g+d),p=u*a.height,m=l.A.negativePiToPi(a.south+i*p),_=l.A.negativePiToPi(m+p);let I=A,E=c;if((0,s.A)(r)){const e=u*(c-A);I+=r*e,E=I+e}return[g,m,f,_,I,E]}function M(e,t,n){const i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=v(i,o,n,!1,t),a=E(void 0,i,o),s=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,A={boundingVolume:r,geometricError:a,refine:i.refine,contents:[{uri:s}]},c=L(e,i.baseResource,A,t);return c.implicitTileset=i,c.implicitCoordinates=o,c}function L(e,t,n,i){return new(0,e._tile.constructor)(e._tileset,t,n,i)}I.prototype.hasProperty=function(e,t){return!1},I.prototype.getFeature=function(e){},I.prototype.applyDebugSettings=function(e,t){},I.prototype.applyStyle=function(e){},I.prototype.update=function(e,t){},I.prototype.pick=function(e,t,n){},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),(0,A.A)(this)},I._deriveBoundingBox=Q,I._deriveBoundingRegion=R,I._deriveBoundingVolumeS2=w;const P=I},1235:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(491446),r=n(605971),a=n(123245);function s(e){const t=e.lengthBits;let n=e.availableCount;i.A.typeOf.number("options.lengthBits",t);const r=e.constant,s=e.bitstream;if((0,o.A)(r))n=t;else{const i=Math.ceil(t/8);if(s.length!==i)throw new a.A(`Availability bitstream must be exactly ${i} bytes long to store ${t} bits. Actual bitstream was ${s.length} bytes long.`);const r=e.computeAvailableCountEnabled??!1;!(0,o.A)(n)&&r&&(n=function(e,t){let n=0;for(let i=0;i<t;i++){const t=i%8;n+=e[i>>3]>>t&1}return n}(s,t))}this._lengthBits=t,this._availableCount=n,this._constant=r,this._bitstream=s}Object.defineProperties(s.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),s.prototype.getBit=function(e){if(e<0||e>=this._lengthBits)throw new r.A("Bit index out of bounds.");if((0,o.A)(this._constant))return this._constant;const t=e>>3,n=e%8;return 1==(this._bitstream[t]>>n&1)};const A=s},829513:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(915325);function r(e){const t=(e=e??o.A.EMPTY_OBJECT).metadataTable,n=e.class,r=e.entityId,a=e.propertyTableJson;i.A.typeOf.object("options.metadataTable",t),i.A.typeOf.object("options.class",n),i.A.typeOf.number("options.entityId",r),i.A.typeOf.object("options.propertyTableJson",a),this._class=n,this._metadataTable=t,this._entityId=r,this._extensions=a.extensions,this._extras=a.extras}Object.defineProperties(r.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),r.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},r.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},r.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},r.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},r.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},r.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},r.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};const a=r},586067:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(605971);const o={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case o.OCTREE:return 8;case o.QUADTREE:return 4;default:throw new i.A("subdivisionScheme is not a valid value.")}}},r=Object.freeze(o)},409211:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(369031),o=n(605971),r=n(491446),a=n(677354),s=n(604752),A=n(123245),c=n(800859),l=n(1235),u=n(829513),d=n(586067),h=n(123314),g=n(874403),f=n(872182);function p(e,t,n){i.A.typeOf.object("resource",e),i.A.typeOf.object("implicitTileset",t),i.A.typeOf.object("implicitCoordinates",n),this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=n,this._subtreeLevels=t.subtreeLevels,this._subdivisionScheme=t.subdivisionScheme,this._branchingFactor=t.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._ready=!1}function m(e,t){const n=e.properties;let i;for(const e in n)if(n.hasOwnProperty(e)){const o=n[e];i=t[o.values??o.bufferView],i.isActive=!0,i.bufferHeader.isActive=!0;const a=o.stringOffsets??o.stringOffsetBufferView;(0,r.A)(a)&&(i=t[a],i.isActive=!0,i.bufferHeader.isActive=!0);const s=o.arrayOffsets??o.arrayOffsetBufferView;(0,r.A)(s)&&(i=t[s],i.isActive=!0,i.bufferHeader.isActive=!0)}}async function _(e,t){const n=e._resource.getDerivedResource({url:t.uri}),i=f.A.getExternalBufferLoader({resource:n});e._bufferLoader=i;try{await i.load()}catch(e){if(i.isDestroyed())return;throw e}return i.typedArray}function I(e,t,n,i){if((0,r.A)(e.constant))return new l.A({constant:Boolean(e.constant),lengthBits:n,availableCount:e.availableCount});let o;return(0,r.A)(e.bitstream)?o=t[e.bitstream]:(0,r.A)(e.bufferView)&&(o=t[e.bufferView]),new l.A({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function E(e){let t=0;const n=e.lengthBits,i=e.availableCount;let o;o=i<256?new Uint8Array(n):i<65536?new Uint16Array(n):new Uint32Array(n);for(let n=0;n<e.lengthBits;n++)e.getBit(n)&&(o[n]=t,t++);return o}Object.defineProperties(p.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),p.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},p.prototype.tileIsAvailableAtCoordinates=function(e){const t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},p.prototype.contentIsAvailableAtIndex=function(e,t){if((t=t??0)<0||t>=this._contentAvailabilityBitstreams.length)throw new o.A("contentIndex out of bounds.");return this._contentAvailabilityBitstreams[t].getBit(e)},p.prototype.contentIsAvailableAtCoordinates=function(e,t){const n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)},p.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},p.prototype.childSubtreeIsAvailableAtCoordinates=function(e){const t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},p.prototype.getLevelOffset=function(e){const t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},p.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===d.A.OCTREE&&(t=3),e>>t},p.fromSubtreeJson=async function(e,t,n,a,A){if(i.A.typeOf.object("resource",e),(0,r.A)(t)===(0,r.A)(n))throw new o.A("One of json and subtreeView must be defined.");i.A.typeOf.object("implicitTileset",a),i.A.typeOf.object("implicitCoordinates",A);const l=new p(e,a,A);let u;u=(0,r.A)(t)?{json:t,binary:void 0}:function(e){const t=!0,n=new DataView(e.buffer,e.byteOffset);let i=8;const o=n.getUint32(i,t);i+=8;const r=n.getUint32(i,t);i+=8;const a=(0,s.A)(e,i,o);i+=o;return{json:a,binary:e.subarray(i,i+r)}}(n);const d=u.json;let f;if(l._subtreeJson=d,(0,c.A)(d,"3DTILES_metadata"))f=d.extensions["3DTILES_metadata"];else if((0,r.A)(d.tileMetadata)){const e=d.tileMetadata;f=d.propertyTables[e]}const y=[];if((0,r.A)(d.contentMetadata)){const e=d.contentMetadata.length;for(let t=0;t<e;t++){const e=d.contentMetadata[t];y.push(d.propertyTables[e])}}let C;const b=a.metadataSchema,B=d.subtreeMetadata;if((0,r.A)(B)){const e=B.class,t=b.classes[e];C=new h.A({subtreeMetadata:B,class:t})}l._metadata=C,l._tilePropertyTableJson=f,l._contentPropertyTableJsons=y;d.contentAvailabilityHeaders=[],(0,c.A)(d,"3DTILES_multiple_contents")?d.contentAvailabilityHeaders=d.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(d.contentAvailability)?d.contentAvailabilityHeaders=d.contentAvailability:d.contentAvailabilityHeaders.push(d.contentAvailability??{constant:0});const v=function(e){e=(0,r.A)(e)?e:[];for(let t=0;t<e.length;t++){const n=e[t];n.isExternal=(0,r.A)(n.uri),n.isActive=!1}return e}(d.buffers),w=function(e,t){e=(0,r.A)(e)?e:[];for(let n=0;n<e.length;n++){const i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}(d.bufferViews,v);!function(e,t){let n;const i=e.tileAvailability;(0,r.A)(i.bitstream)?n=t[i.bitstream]:(0,r.A)(i.bufferView)&&(n=t[i.bufferView]),(0,r.A)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);const o=e.contentAvailabilityHeaders;for(let e=0;e<o.length;e++)n=void 0,(0,r.A)(o[e].bitstream)?n=t[o[e].bitstream]:(0,r.A)(o[e].bufferView)&&(n=t[o[e].bufferView]),(0,r.A)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;const a=e.childSubtreeAvailability;(0,r.A)(a.bitstream)?n=t[a.bitstream]:(0,r.A)(a.bufferView)&&(n=t[a.bufferView]),(0,r.A)(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}(d,w),(0,r.A)(f)&&m(f,w);for(let e=0;e<y.length;e++)m(y[e],w);const T=await function(e,t,n){const i=[];for(let o=0;o<t.length;o++){const r=t[o];if(r.isActive)if(r.isExternal){const t=_(e,r);i.push(t)}else i.push(Promise.resolve(n));else i.push(Promise.resolve(void 0))}return Promise.all(i).then(function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];(0,r.A)(i)&&(t[n]=i)}return t})}(l,v,u.binary),S=function(e,t){const n={};for(let i=0;i<e.length;i++){const o=e[i];if(!o.isActive)continue;const r=o.byteOffset,a=r+o.byteLength,s=t[o.buffer].subarray(r,a);n[i]=s}return n}(w,T);return function(e,t,n,i){const o=n.branchingFactor,a=n.subtreeLevels,s=(Math.pow(o,a)-1)/(o-1),A=Math.pow(o,a),l=(0,c.A)(t,"3DTILES_metadata"),u=(0,r.A)(e._tilePropertyTableJson);let d=l||u;e._tileAvailability=I(t.tileAvailability,i,s,d);const h=e._contentPropertyTableJsons.length>0;d=d||h;for(let n=0;n<t.contentAvailabilityHeaders.length;n++){const o=I(t.contentAvailabilityHeaders[n],i,s,d);e._contentAvailabilityBitstreams.push(o)}e._childSubtreeAvailability=I(t.childSubtreeAvailability,i,A)}(l,d,a,S),(0,r.A)(f)&&(function(e,t,n){const i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,a=i.class,s=r.classes[a];e._tileMetadataTable=new g.A({class:s,count:o,properties:i.properties,bufferViews:n})}(l,a,S),function(e){const t=E(e._tileAvailability);e._tileJumpBuffer=t}(l)),function(e,t,n){const i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,a=e._contentMetadataTables;for(let e=0;e<i.length;e++){const t=i[e],s=o[e].availableCount,A=t.class,c=r.classes[A],l=new g.A({class:c,count:s,properties:t.properties,bufferViews:n});a.push(l)}}(l,a,S),function(e){const t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let e=0;e<n.length;e++){const i=E(n[e]);t.push(i)}}(l),l._ready=!0,l},p.prototype.getTileIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new A.A("level is out of bounds for this subtree");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex},p.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new A.A("level is out of bounds for this subtree");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex},p.prototype.getTileMetadataView=function(e){const t=function(e,t){if(!(0,r.A)(e._tileMetadataTable))return;const n=e.getTileIndex(t);return e._tileAvailability.getBit(n)?e._tileJumpBuffer[n]:void 0}(this,e);if(!(0,r.A)(t))return;const n=this._tileMetadataTable;return new u.A({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})},p.prototype.getContentMetadataView=function(e,t){const n=function(e,t,n){const i=e._contentMetadataTables;if(!(0,r.A)(i))return;const o=i[n];if(!(0,r.A)(o))return;const a=e._contentAvailabilityBitstreams[n],s=e.getTileIndex(t);return a.getBit(s)?e._contentJumpBuffers[n][s]:void 0}(this,e,t);if(!(0,r.A)(n))return;const i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new u.A({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return(0,r.A)(this._bufferLoader)&&f.A.unload(this._bufferLoader),(0,a.A)(this)};const y=p},123314:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(915325),r=n(491446),a=n(965976);function s(e){const t=(e=e??o.A.EMPTY_OBJECT).subtreeMetadata,n=e.class;i.A.typeOf.object("options.subtreeMetadata",t),i.A.typeOf.object("options.class",n);const a=(0,r.A)(t.properties)?t.properties:{};this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return a.A.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return a.A.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return a.A.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return a.A.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return a.A.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return a.A.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return a.A.setPropertyBySemantic(e,t,this._properties,this._class)};const A=s},410974:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(367817),o=n(369031),r=n(605971),a=n(245226),s=n(586067);function A(e){if(o.A.typeOf.string("options.subdivisionScheme",e.subdivisionScheme),o.A.typeOf.number("options.subtreeLevels",e.subtreeLevels),o.A.typeOf.number("options.level",e.level),o.A.typeOf.number("options.x",e.x),o.A.typeOf.number("options.y",e.y),e.subdivisionScheme===s.A.OCTREE&&o.A.typeOf.number("options.z",e.z),e.level<0)throw new r.A("level must be non-negative");if(e.x<0)throw new r.A("x must be non-negative");if(e.y<0)throw new r.A("y must be non-negative");if(e.subdivisionScheme===s.A.OCTREE&&e.z<0)throw new r.A("z must be non-negative");const t=1<<e.level;if(e.x>=t)throw new r.A("x is out of range");if(e.y>=t)throw new r.A("y is out of range");if(e.subdivisionScheme===s.A.OCTREE&&e.z>=t)throw new r.A("z is out of range");this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===s.A.OCTREE&&(this.z=e.z)}function c(e,t){if(e.subdivisionScheme!==t.subdivisionScheme)throw new r.A("coordinates must have same subdivisionScheme");if(e.subtreeLevels!==t.subtreeLevels)throw new r.A("coordinates must have same subtreeLevels")}Object.defineProperties(A.prototype,{childIndex:{get:function(){let e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===s.A.OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===s.A.OCTREE?a.A.encode3D(this.x,this.y,this.z):a.A.encode2D(this.x,this.y)}},tileIndex:{get:function(){return(this.subdivisionScheme===s.A.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3)+this.mortonIndex}}}),A.prototype.getDescendantCoordinates=function(e){o.A.typeOf.object("offsetCoordinates",e),c(this,e);const t=this.level+e.level,n=(this.x<<e.level)+e.x,i=(this.y<<e.level)+e.y;if(this.subdivisionScheme===s.A.OCTREE){const o=(this.z<<e.level)+e.z;return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i,z:o})}return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:i})},A.prototype.getAncestorCoordinates=function(e){if(o.A.typeOf.number("offsetLevels",e),e<0)throw new r.A("offsetLevels must be non-negative");if(e>this.level)throw new r.A("ancestor cannot be above the tileset root");const t=1<<e,n=this.level-e,i=Math.floor(this.x/t),a=Math.floor(this.y/t);if(this.subdivisionScheme===s.A.OCTREE){const e=Math.floor(this.z/t);return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:a,z:e})}return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:a})},A.prototype.getOffsetCoordinates=function(e){if(o.A.typeOf.object("descendantCoordinates",e),!this.isEqual(e)&&!this.isAncestor(e))throw new r.A("this is not an ancestor of descendant");c(this,e);const t=e.level-this.level,n=1<<t,i=e.x%n,a=e.y%n;if(this.subdivisionScheme===s.A.OCTREE){const o=e.z%n;return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:a,z:o})}return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:a})},A.prototype.getChildCoordinates=function(e){o.A.typeOf.number("childIndex",e);const t=s.A.getBranchingFactor(this.subdivisionScheme);if(e<0||t<=e)throw new r.A(`childIndex must be at least 0 and less than ${t}`);const n=this.level+1,i=2*this.x+e%2,a=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===s.A.OCTREE){const t=2*this.z+Math.floor(e/4)%2;return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:a,z:t})}return new A({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:i,y:a})},A.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},A.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},A.prototype.isAncestor=function(e){o.A.typeOf.object("descendantCoordinates",e),c(this,e);const t=e.level-this.level;if(t<=0)return!1;const n=e.x>>t,i=e.y>>t,r=this.x===n,a=this.y===i;if(this.subdivisionScheme===s.A.OCTREE){const n=e.z>>t,i=this.z===n;return r&&a&&i}return r&&a},A.prototype.isEqual=function(e){return o.A.typeOf.object("otherCoordinates",e),this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==s.A.OCTREE||this.z===e.z)},A.prototype.isImplicitTilesetRoot=function(){return 0===this.level},A.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels===0},A.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels===this.subtreeLevels-1},A.prototype.getTemplateValues=function(){const e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===s.A.OCTREE&&(e.z=this.z),e};const l=[0,0,0];A.fromMortonIndex=function(e,t,n,i){let o;return e===s.A.OCTREE?(o=a.A.decode3D(i,l),new A({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1],z:o[2]})):(o=a.A.decode2D(i,l),new A({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1]}))},A.fromTileIndex=function(e,t,n){let o,r,a;return e===s.A.OCTREE?(o=Math.floor(i.A.log2(7*n+1)/3),r=((1<<3*o)-1)/7,a=n-r):(o=Math.floor(i.A.log2(3*n+1)/2),r=((1<<2*o)-1)/3,a=n-r),A.fromMortonIndex(e,t,o,a)};const u=A},834957:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(376758),r=n(491446),a=n(744603),s=n(123245),A=n(800859),c=n(586067);const l=function(e,t,n){const l=(0,A.A)(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;i.A.typeOf.object("implicitTiling",l),this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=n;const u=t.boundingVolume;if(!((0,r.A)(u.box)||(0,r.A)(u.region)||(0,A.A)(u,"3DTILES_bounding_volume_S2")||(0,A.A)(u,"3DTILES_bounding_volume_cylinder")))throw new s.A("Only box, region, 3DTILES_bounding_volume_S2, and 3DTILES_bounding_volume_cylinder are supported for implicit tiling");this.boundingVolume=u,this.refine=t.refine,this.subtreeUriTemplate=new a.A({url:l.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];const d=function(e){if((0,A.A)(e,"3DTILES_multiple_contents")){const t=e.extensions["3DTILES_multiple_contents"];return(0,r.A)(t.contents)?t.contents:t.content}return(0,r.A)(e.contents)?e.contents:(0,r.A)(e.content)?[e.content]:[]}(t);for(let e=0;e<d.length;e++){const t=d[e];this.contentHeaders.push((0,o.A)(t,!0));const n=new a.A({url:t.uri});this.contentUriTemplates.push(n)}this.contentCount=this.contentHeaders.length,this.tileHeader=function(e){const t=(0,o.A)(e,!0);return(0,r.A)(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}(t),this.subdivisionScheme=c.A[l.subdivisionScheme],this.branchingFactor=c.A.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=l.subtreeLevels,(0,r.A)(l.availableLevels)?this.availableLevels=l.availableLevels:this.availableLevels=l.maximumLevel+1}},866857:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);const o={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID",fromGltfSemantic:function(e){i.A.typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/.exec(e);switch(null!==n&&(t=n[1]),t){case"TRANSLATION":return o.TRANSLATION;case"ROTATION":return o.ROTATION;case"SCALE":return o.SCALE;case"_FEATURE_ID":return o.FEATURE_ID}}},r=Object.freeze(o)},819598:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(41476),o=n(491446),r=n(677354),a=n(276904),s=n(769493),A=n(804701),c=n(57775),l=n(557053),u=n(100482),d=n(40118),h=n(342875),g=n(616e3),f=n(90979),p=n(200646),m=n(938987),_=n(896464),I=n(138151);function E(){this._numSamples=1,this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this._fbo=new A.A({depthStencil:!0,createDepthAttachments:!1}),this._fboClassified=new A.A({depthStencil:!0,createDepthAttachments:!1}),this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new s.A({color:new i.A(0,0,0,0),owner:this}),this._clearCommand=new s.A({color:new i.A(0,0,0,0),depth:1,stencil:0});const e=this;this._uniformMap={colorTexture:function(){return e._fbo.getColorTexture()},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._fboClassified.getColorTexture()}}}Object.defineProperties(E.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),E.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};const y={depthMask:!1,stencilTest:{enabled:!0,frontFunction:_.A.EQUAL,frontOperation:{fail:I.A.KEEP,zFail:I.A.KEEP,zPass:I.A.KEEP},backFunction:_.A.NEVER,reference:0,mask:m.A.CLASSIFICATION_MASK},blending:p.A.ALPHA_BLEND},C={depthMask:!1,stencilTest:{enabled:!0,frontFunction:_.A.NOT_EQUAL,frontOperation:{fail:I.A.KEEP,zFail:I.A.KEEP,zPass:I.A.KEEP},backFunction:_.A.NEVER,reference:0,mask:m.A.CLASSIFICATION_MASK},blending:p.A.ALPHA_BLEND},b={depthMask:!0,depthTest:{enabled:!0},stencilTest:m.A.setCesium3DTileBit(),stencilMask:m.A.CESIUM_3D_TILE_MASK,blending:p.A.ALPHA_BLEND};E.prototype.update=function(e,t,n){const i=this._fbo.getColorTexture(),r=this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;const s=this._numSamples!==t,A=e.drawingBufferWidth,p=e.drawingBufferHeight,m=!(0,o.A)(i)||i.width!==A||i.height!==p;if((m||r||s)&&(this._numSamples=t,this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,o.A)(this._previousFramebuffer)||(this._depthStencilTexture=new g.A({context:e,width:A,height:p,pixelFormat:a.A.DEPTH_STENCIL,pixelDatatype:c.A.UNSIGNED_INT_24_8}),t>1&&(this._depthStencilRenderbuffer=new l.A({context:e,width:A,height:p,format:u.A.DEPTH24_STENCIL8,numSamples:t})))),!(0,o.A)(this._fbo.framebuffer)||m||r||s){let i,r;this._fbo.destroy(),this._fboClassified.destroy(),(0,o.A)(this._previousFramebuffer)?(i=n.getDepthStencilTexture(),r=n.getDepthStencilRenderbuffer()):(i=this._depthStencilTexture,r=this._depthStencilRenderbuffer),this._fbo.setDepthStencilTexture(i),(0,o.A)(r)&&this._fbo.setDepthStencilRenderbuffer(r),this._fbo.update(e,A,p,t),(0,o.A)(this._previousFramebuffer)||(this._fboClassified.setDepthStencilTexture(i),this._fboClassified.update(e,A,p))}if((0,o.A)(this._rsUnclassified)||(this._rsUnclassified=d.A.fromCache(y),this._rsClassified=d.A.fromCache(C),this._rsDefault=d.A.fromCache(b)),!(0,o.A)(this._unclassifiedCommand)||r||s){(0,o.A)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());const t=(0,o.A)(this._previousFramebuffer)?"uniform sampler2D colorTexture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    out_FragColor = color * czm_invertClassificationColor;\n#else\n    out_FragColor = color;\n#endif\n}\n":"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nin vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    out_FragColor = color * highlightColor;\n    gl_FragDepth = texture(depthTexture, v_textureCoordinates).r;\n}\n",n=new h.A({defines:["UNCLASSIFIED"],sources:[t]}),i=new h.A({sources:[t]});this._unclassifiedCommand=e.createViewportQuadCommand(n,{renderState:(0,o.A)(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(i,{renderState:(0,o.A)(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),(0,o.A)(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),(0,o.A)(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(f.A,{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},E.prototype.prepareTextures=function(e,t){this._fbo._numSamples>1&&this._fbo.prepareTextures(e,t)},E.prototype.clear=function(e,t){(0,o.A)(this._previousFramebuffer)?this._fbo.clear(e,this._clearColorCommand,t):(this._fbo.clear(e,this._clearCommand,t),this._fboClassified.clear(e,this._clearCommand,t))},E.prototype.executeClassified=function(e,t){if(!(0,o.A)(this._previousFramebuffer)){const n=t.framebuffer;this.prepareTextures(e,!0),t.framebuffer=this._fboClassified.framebuffer,this._translucentCommand.execute(e,t),t.framebuffer=n}this._classifiedCommand.execute(e,t)},E.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return this._fbo.destroy(),this._fboClassified.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,o.A)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),(0,r.A)(this)};const B=E},670549:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(369031),o=n(915325),r=n(491446),a=n(955943),s=n(954865),A=n(123245),c=n(531573),l=n(886626),u=n(829670),d=n(38300),h=n(847072),g=n(556541),f=n(66458),p=n(762270),m=n(32706);const _={ARCGIS_MAPSERVER:c.A.fromUrl,BING:async(e,t)=>l.A.fromUrl(e,t),GOOGLE_EARTH:async(e,t)=>{const n=t.channel;return delete t.channel,d.A.fromUrl(e,n,t)},MAPBOX:(e,t)=>new h.A({url:e,...t}),SINGLE_TILE:g.A.fromUrl,TMS:u.A.fromUrl,URL_TEMPLATE:(e,t)=>new f.A({url:e,...t}),WMS:(e,t)=>new p.A({url:e,...t}),WMTS:(e,t)=>new m.A({url:e,...t})};function I(e){e=e??o.A.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileCredits=void 0,this._errorEvent=new a.A}Object.defineProperties(I.prototype,{rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},proxy:{get:function(){}}}),I.fromAssetId=async function(e,t){i.A.typeOf.number("assetId",e),t=t??o.A.EMPTY_OBJECT;const n=s.A._createEndpointResource(e,t),a=e.toString()+t.accessToken+t.server;let c=I._endpointCache[a];(0,r.A)(c)||(c=n.fetchJson(),I._endpointCache[a]=c);const l=await c;if("IMAGERY"!==l.type)throw new A.A(`Cesium ion asset ${e} is not an imagery asset.`);let d;const h=l.externalType;if((0,r.A)(h)){const e=_[h];if(!(0,r.A)(e))throw new A.A(`Unrecognized Cesium ion imagery type: ${h}`);const t={...l.options},n=t.url;delete t.url,d=await e(n,t)}else d=await u.A.fromUrl(new s.A(l,n));const g=new I(t);return d.errorEvent.addEventListener(function(e){e.provider=g,g._errorEvent.raiseEvent(e)}),g._tileCredits=s.A.getCreditsFromEndpoint(l,n),g._imageryProvider=d,g},I.prototype.getTileCredits=function(e,t,n){const i=this._imageryProvider.getTileCredits(e,t,n);return(0,r.A)(i)?this._tileCredits.concat(i):this._tileCredits},I.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},I.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},I._endpointCache={};const E=I},231097:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4})},647474:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(605971),r=n(230259),a=n(666203);function s(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function A(e){if((0,i.A)(e)&&e.length!==a.A.NUMBER_OF_JOB_TYPES)throw new o.A("A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES.");const t=new Array(a.A.NUMBER_OF_JOB_TYPES);t[a.A.TEXTURE]=new s((0,i.A)(e)?e[a.A.TEXTURE]:10),t[a.A.PROGRAM]=new s((0,i.A)(e)?e[a.A.PROGRAM]:10),t[a.A.BUFFER]=new s((0,i.A)(e)?e[a.A.BUFFER]:30);const n=t.length;let r,A=0;for(r=0;r<n;++r)A+=t[r].total;const c=new Array(n);for(r=0;r<n;++r)c[r]=!1;this._totalBudget=A,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=c}Object.defineProperties(s.prototype,{total:{get:function(){return this._total}}}),A.getTimestamp=r.A,Object.defineProperties(A.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),A.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},A.prototype.resetBudgets=function(){const e=this._budgets,t=e.length;for(let n=0;n<t;++n){const t=e[n];t.starvedLastFrame=t.starvedThisFrame,t.starvedThisFrame=!1,t.usedThisFrame=0,t.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},A.prototype.execute=function(e,t){const n=this._budgets,i=n[t],o=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&o)return i.starvedThisFrame=!0,!1;let r;if(i.usedThisFrame+i.stolenFromMeThisFrame>=i.total){const e=n.length;let t;for(t=0;t<e&&(r=n[t],!(r.usedThisFrame+r.stolenFromMeThisFrame<r.total)||r.starvedLastFrame);++t);if(t===e&&o)return!1;o&&(i.starvedThisFrame=!0)}const a=A.getTimestamp();e.execute();const s=A.getTimestamp()-a;return this._totalUsedThisFrame+=s,r?r.stolenFromMeThisFrame+=s:i.usedThisFrame+=s,this._executedThisFrame[t]=!0,!0};const c=A},666203:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3})},784749:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(376758),r=n(491446),a=n(605971),s=n(965976);const A={};function c(e){i.A.typeOf.number.greaterThan("options.count",e.count,0),i.A.typeOf.object("options.properties",e.properties),this._count=e.count,this._properties=(0,o.A)(e.properties,!0)}c.prototype.hasProperty=function(e){return s.A.hasProperty(e,this._properties,A)},c.prototype.getPropertyIds=function(e){return s.A.getPropertyIds(this._properties,A,e)},c.prototype.getProperty=function(e,t){if(i.A.typeOf.number("index",e),i.A.typeOf.string("propertyId",t),e<0||e>=this._count)throw new a.A(`index must be in the range [0, ${this._count})`);const n=this._properties[t];if((0,r.A)(n))return(0,o.A)(n[e],!0)},c.prototype.setProperty=function(e,t,n){if(i.A.typeOf.number("index",e),i.A.typeOf.string("propertyId",t),e<0||e>=this._count)throw new a.A(`index must be in the range [0, ${this._count})`);let s=this._properties[t];(0,r.A)(s)||(s=new Array(this._count),this._properties[t]=s),s[e]=(0,o.A)(n,!0)};const l=c},301866:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i=Object.freeze({UNLOADED:0,RECEIVING:1,PROCESSING:2,LOADED:3,FAILED:4,UNAVAILABLE:5});function o(e,t){this.spatialNode=e,this.keyframe=t,this.state=i.UNLOADED,this.content=void 0,this.megatextureIndex=-1,this.priority=-Number.MAX_VALUE,this.highPriorityFrameNumber=-1}o.prototype.unload=function(){this.content=this.content&&this.content.destroy(),this.spatialNode=void 0,this.state=i.UNLOADED,this.megatextureIndex=-1,this.priority=-Number.MAX_VALUE,this.highPriorityFrameNumber=-1},o.priorityComparator=function(e,t){return e.priority-t.priority},o.searchComparator=function(e,t){return e.keyframe-t.keyframe},o.LoadState=i;const r=o},77879:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ROTATE:0,INFINITE_SCROLL:1})},847072:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(672743),o=n(915325),r=n(491446),a=n(605971),s=n(744603),A=n(66458);const c=/\/$/,l=new i.A('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function u(e){const t=(e=e??o.A.EMPTY_OBJECT).mapId;if(!(0,r.A)(t))throw new a.A("options.mapId is required.");const n=e.accessToken;if(!(0,r.A)(n))throw new a.A("options.accessToken is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const u=s.A.createIfNeeded(e.url??"https://{s}.tiles.mapbox.com/v4/");this._mapId=t,this._accessToken=n;let d=e.format??"png";/\./.test(d)||(d=`.${d}`),this._format=d;let h,g=u.getUrlComponent();c.test(g)||(g+="/"),g+=`${t}/{z}/{x}/{y}${this._format}`,u.url=g,u.setQueryParameters({access_token:n}),(0,r.A)(e.credit)?(h=e.credit,"string"==typeof h&&(h=new i.A(h))):h=l,this._resource=u,this._imageryProvider=new A.A({url:u,credit:h,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle})}Object.defineProperties(u.prototype,{url:{get:function(){return this._imageryProvider.url}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}}),u.prototype.getTileCredits=function(e,t,n){},u.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},u.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},u._defaultCredit=l;const d=u},551549:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(915325),o=n(491446),r=n(769534),a=n(301005),s=n(980509),A=n(291192),c=n(149800),l=n(64137),u=n(373785),d=n(207828),h=n(608191);function g(e){const t=(e=e??i.A.EMPTY_OBJECT).translucent??!0,n=e.closed??!1,r=e.materialSupport??g.MaterialSupport.TEXTURED;this.material=(0,o.A)(e.material)?e.material:h.A.fromType(h.A.ColorType),this.translucent=t,this._vertexShaderSource=e.vertexShaderSource??r.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource??r.fragmentShaderSource,this._renderState=d.A.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=r,this._vertexFormat=r.vertexFormat,this._flat=e.flat??!1,this._faceForward=e.faceForward??!n}Object.defineProperties(g.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),g.prototype.getFragmentShaderSource=d.A.prototype.getFragmentShaderSource,g.prototype.isTranslucent=d.A.prototype.isTranslucent,g.prototype.getRenderState=d.A.prototype.getRenderState,g.MaterialSupport={BASIC:Object.freeze({vertexFormat:r.A.POSITION_AND_NORMAL,vertexShaderSource:c.A,fragmentShaderSource:A.A}),TEXTURED:Object.freeze({vertexFormat:r.A.POSITION_NORMAL_AND_ST,vertexShaderSource:u.A,fragmentShaderSource:l.A}),ALL:Object.freeze({vertexFormat:r.A.ALL,vertexShaderSource:s.A,fragmentShaderSource:a.A})};const f=g},866109:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(434067),o=n(267980),r=n(571804),a=n(430332),s=n(491446),A=n(677354),c=n(605971),l=n(367817),u=n(568748),d=n(57775),h=n(276904),g=n(123245),f=n(654799),p=n(616e3),m=n(957233),_=n(78078),I=n(557448);function E(e,t,n,s,A){if(A=Math.min(A??134217728,536870912),s===u.A.UNSIGNED_SHORT&&(s=u.A.FLOAT32),s===u.A.FLOAT32&&!e.floatingPointTexture)throw new g.A("Floating point texture not supported");const c=function(e){return e===u.A.FLOAT32||e===u.A.FLOAT64?d.A.FLOAT:e===u.A.UINT8?d.A.UNSIGNED_BYTE:void 0}(s),E=function(e,t){return 1===e?t?h.A.RED:h.A.LUMINANCE:2===e?t?h.A.RG:h.A.LUMINANCE_ALPHA:3===e?h.A.RGB:4===e?h.A.RGBA:void 0}(n,e.webgl2),C=u.A.getSizeInBytes(s),b=function(e,t,n){const i=Math.floor(e/(t*n));return Math.min(a.A.maximumTextureSize,l.A.previousPowerOfTwo(Math.floor(Math.sqrt(i))))}(A,n,C),B=Math.ceil(Math.sqrt(t.x)),v=Math.ceil(t.z/B),w=B*t.x,T=v*t.y,S=Math.floor(b/w),x=Math.floor(b/T);if(0===S||0===x)throw new g.A("Tileset is too large to fit into megatexture");this.channelCount=n,this.componentType=s,this.textureMemoryByteLength=C*n*b**2,this.voxelCountPerTile=o.A.clone(t,new o.A),this.maximumTileCount=S*x,this.regionCountPerMegatexture=new i.A(S,x),this.voxelCountPerRegion=new i.A(w,T),this.sliceCountPerRegion=new i.A(B,v),this.voxelSizeUv=new i.A(1/b,1/b),this.sliceSizeUv=new i.A(t.x/b,t.y/b),this.regionSizeUv=new i.A(w/b,T/b),this.texture=new p.A({context:e,pixelFormat:E,pixelDatatype:c,flipY:!1,width:b,height:b,sampler:new f.A({wrapS:I.A.CLAMP_TO_EDGE,wrapT:I.A.CLAMP_TO_EDGE,minificationFilter:_.A.LINEAR,magnificationFilter:m.A.LINEAR})});const D=u.A.toComponentDatatype(s);this.tileVoxelDataTemp=r.A.createTypedArray(D,w*T*n),this.nodes=new Array(this.maximumTileCount);for(let e=0;e<this.maximumTileCount;e++)this.nodes[e]=new y(e);for(let e=0;e<this.maximumTileCount;e++){const t=this.nodes[e];t.previousNode=e>0?this.nodes[e-1]:void 0,t.nextNode=e<this.maximumTileCount-1?this.nodes[e+1]:void 0}this.occupiedList=void 0,this.emptyList=this.nodes[0],this.occupiedCount=0}function y(e){this.index=e,this.nextNode=void 0,this.previousNode=void 0}function C(e,t,n){return n*(e.y*e.x)+t*e.x}E.prototype.add=function(e){if(this.isFull())throw new c.A("Trying to add when there are no empty spots");const t=this.emptyList;this.emptyList=this.emptyList.nextNode,(0,s.A)(this.emptyList)&&(this.emptyList.previousNode=void 0),t.nextNode=this.occupiedList,(0,s.A)(t.nextNode)&&(t.nextNode.previousNode=t),this.occupiedList=t;const n=t.index;return this.writeDataToTexture(n,e),this.occupiedCount++,n},E.prototype.remove=function(e){if(e<0||e>=this.maximumTileCount)throw new c.A("Megatexture index out of bounds");const t=this.nodes[e];(0,s.A)(t.previousNode)&&(t.previousNode.nextNode=t.nextNode),(0,s.A)(t.nextNode)&&(t.nextNode.previousNode=t.previousNode),t.nextNode=this.emptyList,(0,s.A)(t.nextNode)&&(t.nextNode.previousNode=t),t.previousNode=void 0,this.emptyList=t,this.occupiedCount--},E.prototype.isFull=function(){return void 0===this.emptyList},E.getApproximateTextureMemoryByteLength=function(e,t,n,i){i===u.A.UNSIGNED_SHORT&&(i=u.A.FLOAT32);const o=u.A.getSizeInBytes(i),r=e*t.x*t.y*t.z,a=Math.ceil(Math.sqrt(t.x)),s=Math.ceil(t.z/a),A=a*t.x,c=s*t.y;let d=l.A.previousPowerOfTwo(Math.floor(Math.sqrt(r)));for(;!(Math.floor(d/A)*Math.floor(d/c)>=e);)d*=2;return d*d*n*o},E.prototype.writeDataToTexture=function(e,t){const n=t.constructor===Uint16Array?new Float32Array(t):t,{tileVoxelDataTemp:i,voxelCountPerTile:o,sliceCountPerRegion:r,voxelCountPerRegion:a,channelCount:s,regionCountPerMegatexture:A}=this;for(let e=0;e<o.z;e++){const t=e%r.x*o.x,A=Math.floor(e/r.x)*o.y;for(let r=0;r<o.y;r++){const c=C(o,r,e),l=(A+r)*a.x+t;for(let e=0;e<o.x;e++){const t=c+e,o=l+e;for(let e=0;e<s;e++)i[o*s+e]=n[t*s+e]}}}const c=e%A.x*a.x,l=Math.floor(e/A.x)*a.y,u={source:{arrayBufferView:i,width:a.x,height:a.y},xOffset:c,yOffset:l};this.texture.copyFrom(u)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return this.texture=this.texture&&this.texture.destroy(),(0,A.A)(this)};const b=E},32335:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(376758),r=n(915325),a=n(491446),s=n(343674);function A(e){const t=(e=e??r.A.EMPTY_OBJECT).id;i.A.typeOf.string("options.id",t);const n=e.properties??{},s={};for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];(0,a.A)(t.semantic)&&(s[t.semantic]=t)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=s,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}A.fromJson=function(e){const t=(e=e??r.A.EMPTY_OBJECT).id,n=e.class;i.A.typeOf.string("options.id",t),i.A.typeOf.object("options.class",n);const o={};for(const t in n.properties)if(n.properties.hasOwnProperty(t)){const i=s.A.fromJson({id:t,property:n.properties[t],enums:e.enums});o[t]=i}return new A({id:t,name:n.name,description:n.description,properties:o,extras:n.extras,extensions:n.extensions})},Object.defineProperties(A.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),A.BATCH_TABLE_CLASS_NAME="_batchTable";const c=A},343674:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(434067),o=n(267980),r=n(626809),a=n(369031),s=n(376758),A=n(915325),c=n(491446),l=n(605971),u=n(463298),d=n(331185),h=n(584164),g=n(374607),f=n(568748);function p(e){const t=(e=e??A.A.EMPTY_OBJECT).id,n=e.type;a.A.typeOf.string("options.id",t),a.A.typeOf.string("options.type",n);const i=e.componentType,o=e.enumType,r=(0,c.A)(i)&&f.A.isIntegerType(i)&&(e.normalized??!1);this._id=t,this._name=e.name,this._description=e.description,this._semantic=e.semantic,this._isLegacyExtension=e.isLegacyExtension,this._type=n,this._componentType=i,this._enumType=o,this._valueType=(0,c.A)(o)?o.valueType:i,this._isArray=e.isArray??!1,this._isVariableLengthArray=e.isVariableLengthArray??!1,this._arrayLength=e.arrayLength,this._min=(0,s.A)(e.min,!0),this._max=(0,s.A)(e.max,!0),this._normalized=r;let l=(0,s.A)(e.offset,!0),u=(0,s.A)(e.scale,!0);const d=(0,c.A)(l)||(0,c.A)(u),h=!0;(0,c.A)(l)||(l=this.expandConstant(0,h)),(0,c.A)(u)||(u=this.expandConstant(1,h)),this._offset=l,this._scale=u,this._hasValueTransform=d,this._noData=(0,s.A)(e.noData,!0),this._default=(0,s.A)(e.default,!0),this._required=e.required??!0,this._extras=(0,s.A)(e.extras,!0),this._extensions=(0,s.A)(e.extensions,!0)}function m(e,t){if(!Array.isArray(e))return e===t;if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!m(e[n],t[n]))return!1;return!0}function _(e,t){const n=e._type,a=e._componentType,s=e._enumType,A=e._normalized;return g.A.isVectorType(n)?function(e,t,n){return f.A.isVectorCompatible(n)?t!==g.A.VEC2||e instanceof i.A?t!==g.A.VEC3||e instanceof o.A?t!==g.A.VEC4||e instanceof r.A?void 0:`vector value ${e} must be a Cartesian4`:`vector value ${e} must be a Cartesian3`:`vector value ${e} must be a Cartesian2`:`componentType ${n} is incompatible with vector type ${t}`}(t,n,a):g.A.isMatrixType(n)?function(e,t,n){return f.A.isVectorCompatible(n)?t!==g.A.MAT2||e instanceof u.A?t!==g.A.MAT3||e instanceof d.A?t!==g.A.MAT4||e instanceof h.A?void 0:`matrix value ${e} must be a Matrix4`:`matrix value ${e} must be a Matrix3`:`matrix value ${e} must be a Matrix2`:`componentType ${n} is incompatible with matrix type ${t}`}(t,n,a):n===g.A.STRING?function(e){if("string"!=typeof e)return I(e,g.A.STRING)}(t):n===g.A.BOOLEAN?function(e){if("boolean"!=typeof e)return I(e,g.A.BOOLEAN)}(t):n===g.A.ENUM?function(e,t){const n=typeof e;if((0,c.A)(t))return"string"===n&&(0,c.A)(t.valuesByName[e])?void 0:`value ${e} is not a valid enum name for ${t.id}`}(t,s):function(e,t,n){const i=typeof e;switch(t){case f.A.INT8:case f.A.UINT8:case f.A.INT16:case f.A.UINT16:case f.A.INT32:case f.A.UINT32:case f.A.FLOAT32:case f.A.FLOAT64:return"number"!==i?I(e,t):isFinite(e)?y(e,t,n):C(e,t);case f.A.INT64:case f.A.UINT64:return"number"!==i&&"bigint"!==i?I(e,t):"number"!==i||isFinite(e)?y(e,t,n):C(e,t)}}(t,a,A)}function I(e,t){return`value ${e} does not match type ${t}`}function E(e,t,n){let i=`value ${e} is out of range for type ${t}`;return n&&(i+=" (normalized)"),i}function y(e,t,n){return n?e<(f.A.isUnsignedIntegerType(t)?0:-1)||e>1?E(e,t,n):void 0:e<f.A.getMinimum(t)||e>f.A.getMaximum(t)?E(e,t,n):void 0}function C(e,t){return`value ${e} of type ${t} must be finite`}function b(e,t,n){if(!Array.isArray(e))return n(e,t);for(let i=0;i<e.length;i++)e[i]=b(e[i],t,n);return e}p.fromJson=function(e){const t=(e=e??A.A.EMPTY_OBJECT).id,n=e.property;a.A.typeOf.string("options.id",t),a.A.typeOf.object("options.property",n),a.A.typeOf.string("options.property.type",n.type);const i=function(e){if("ARRAY"===e.type)return!0;const t=e.type;return t!==g.A.SCALAR&&!g.A.isMatrixType(t)&&!g.A.isVectorType(t)&&(!!(0,c.A)(f.A[t])||!((0,c.A)(e.noData)||(0,c.A)(e.scale)||(0,c.A)(e.offset)||(0,c.A)(e.required)||(0,c.A)(e.count)||(0,c.A)(e.array))&&(!(0,c.A)(e.optional)&&void 0))}(n),o=function(e,t){const n=e.type,i=e.componentType,o="ARRAY"===n;let r,a,s,A;if(o?(r=!0,a=e.componentCount,s=!(0,c.A)(a)):e.array?(r=!0,a=e.count,s=!(0,c.A)(e.count)):(r=!1,a=void 0,s=!1),(0,c.A)(e.enumType)&&(A=t[e.enumType]),n===g.A.ENUM)return{type:n,componentType:void 0,enumType:A,valueType:A.valueType,isArray:r,isVariableLengthArray:s,arrayLength:a};if(o&&i===g.A.ENUM)return{type:i,componentType:void 0,enumType:A,valueType:A.valueType,isArray:r,isVariableLengthArray:s,arrayLength:a};if(n===g.A.SCALAR||g.A.isMatrixType(n)||g.A.isVectorType(n))return{type:n,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:s,arrayLength:a};if(n===g.A.BOOLEAN||n===g.A.STRING)return{type:n,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:s,arrayLength:a};if(o&&(i===g.A.BOOLEAN||i===g.A.STRING))return{type:i,componentType:void 0,enumType:void 0,valueType:void 0,isArray:r,isVariableLengthArray:s,arrayLength:a};if((0,c.A)(i)&&(0,c.A)(f.A[i]))return{type:g.A.SCALAR,componentType:i,enumType:void 0,valueType:i,isArray:r,isVariableLengthArray:s,arrayLength:a};if((0,c.A)(f.A[n]))return{type:g.A.SCALAR,componentType:n,enumType:void 0,valueType:n,isArray:r,isVariableLengthArray:s,arrayLength:a};throw new l.A(`unknown metadata type {type: ${n}, componentType: ${i})`)}(n,e.enums);let r;return r=!!(0,c.A)(i)&&(i?!(0,c.A)(n.optional)||!n.optional:n.required??!1),new p({id:t,type:o.type,componentType:o.componentType,enumType:o.enumType,isArray:o.isArray,isVariableLengthArray:o.isVariableLengthArray,arrayLength:o.arrayLength,normalized:n.normalized,min:n.min,max:n.max,offset:n.offset,scale:n.scale,noData:n.noData,default:n.default,required:r,name:n.name,description:n.description,semantic:n.semantic,extras:n.extras,extensions:n.extensions,isLegacyExtension:i})},Object.defineProperties(p.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},enumType:{get:function(){return this._enumType}},componentType:{get:function(){return this._componentType}},valueType:{get:function(){return this._valueType}},isArray:{get:function(){return this._isArray}},isVariableLengthArray:{get:function(){return this._isVariableLengthArray}},arrayLength:{get:function(){return this._arrayLength}},normalized:{get:function(){return this._normalized}},max:{get:function(){return this._max}},min:{get:function(){return this._min}},noData:{get:function(){return this._noData}},default:{get:function(){return this._default}},required:{get:function(){return this._required}},semantic:{get:function(){return this._semantic}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),p.prototype.normalize=function(e){return this._normalized?b(e,this._valueType,f.A.normalize):e},p.prototype.unnormalize=function(e){return this._normalized?b(e,this._valueType,f.A.unnormalize):e},p.prototype.applyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:p.valueTransformInPlace(e,this._offset,this._scale,f.A.applyValueTransform)},p.prototype.unapplyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:p.valueTransformInPlace(e,this._offset,this._scale,f.A.unapplyValueTransform)},p.prototype.expandConstant=function(e,t){t=t??!1;const n=this._isArray,i=this._arrayLength,o=g.A.getComponentCount(this._type),r=n&&o>1;if(!n&&1===o)return e;if(!n)return new Array(o).fill(e);if(!r)return new Array(i).fill(e);if(!t)return new Array(this._arrayLength*o).fill(e);const a=new Array(o).fill(e);return new Array(this._arrayLength).fill(a)},p.prototype.handleNoData=function(e){const t=this._noData;return(0,c.A)(t)&&m(e,t)?void 0:e},p.prototype.unpackVectorAndMatrixTypes=function(e,t){t=t??!1;const n=g.A.getMathType(this._type),i=this._isArray,o=g.A.getComponentCount(this._type),r=i&&o>1;return(0,c.A)(n)?t&&r?e.map(function(e){return n.unpack(e)}):i?n.unpackArray(e):n.unpack(e):e},p.prototype.packVectorAndMatrixTypes=function(e,t){t=t??!1;const n=g.A.getMathType(this._type),i=this._isArray,o=g.A.getComponentCount(this._type),r=i&&o>1;return(0,c.A)(n)?t&&r?e.map(function(e){return n.pack(e,[])}):i?n.packArray(e,[]):n.pack(e,[]):e},p.prototype.validate=function(e){if((0,c.A)(e)||!(0,c.A)(this._default))return this._required&&!(0,c.A)(e)?"required property must have a value":this._isArray?function(e,t){if(!Array.isArray(t))return`value ${t} must be an array`;const n=t.length;if(!e._isVariableLengthArray&&n!==e._arrayLength)return"Array length does not match property.arrayLength";for(let i=0;i<n;i++){const n=_(e,t[i]);if((0,c.A)(n))return n}}(this,e):_(this,e)},p.valueTransformInPlace=function(e,t,n,i){if(!Array.isArray(e))return i(e,t,n);for(let o=0;o<e.length;o++)e[o]=p.valueTransformInPlace(e[o],t[o],n[o],i);return e};const B=p},568748:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(367817),o=n(369031),r=n(571804),a=n(605971),s=n(520098);const A={INT8:"INT8",UINT8:"UINT8",INT16:"INT16",UINT16:"UINT16",INT32:"INT32",UINT32:"UINT32",INT64:"INT64",UINT64:"UINT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64",getMinimum:function(e){switch(o.A.typeOf.string("type",e),e){case A.INT8:return-128;case A.UINT8:return 0;case A.INT16:return-32768;case A.UINT16:return 0;case A.INT32:return-2147483648;case A.UINT32:return 0;case A.INT64:return s.A.supportsBigInt()?BigInt("-9223372036854775808"):-Math.pow(2,63);case A.UINT64:return s.A.supportsBigInt()?BigInt(0):0;case A.FLOAT32:return-34028234663852886e22;case A.FLOAT64:return-Number.MAX_VALUE}},getMaximum:function(e){switch(o.A.typeOf.string("type",e),e){case A.INT8:return 127;case A.UINT8:return 255;case A.INT16:return 32767;case A.UINT16:return 65535;case A.INT32:return 2147483647;case A.UINT32:return 4294967295;case A.INT64:return s.A.supportsBigInt()?BigInt("9223372036854775807"):Math.pow(2,63)-1;case A.UINT64:return s.A.supportsBigInt()?BigInt("18446744073709551615"):Math.pow(2,64)-1;case A.FLOAT32:return 34028234663852886e22;case A.FLOAT64:return Number.MAX_VALUE}},isIntegerType:function(e){switch(o.A.typeOf.string("type",e),e){case A.INT8:case A.UINT8:case A.INT16:case A.UINT16:case A.INT32:case A.UINT32:case A.INT64:case A.UINT64:return!0;default:return!1}},isUnsignedIntegerType:function(e){switch(o.A.typeOf.string("type",e),e){case A.UINT8:case A.UINT16:case A.UINT32:case A.UINT64:return!0;default:return!1}},isVectorCompatible:function(e){switch(o.A.typeOf.string("type",e),e){case A.INT8:case A.UINT8:case A.INT16:case A.UINT16:case A.INT32:case A.UINT32:case A.FLOAT32:case A.FLOAT64:return!0;default:return!1}},normalize:function(e,t){if("number"!=typeof e&&"bigint"!=typeof e)throw new a.A("value must be a number or a BigInt");if(!A.isIntegerType(t))throw new a.A("type must be an integer type");return Math.max(Number(e)/Number(A.getMaximum(t)),-1)},unnormalize:function(e,t){if(o.A.typeOf.number("value",e),!A.isIntegerType(t))throw new a.A("type must be an integer type");const n=A.getMaximum(t),r=A.isUnsignedIntegerType(t)?0:-n;return e=i.A.sign(e)*Math.round(Math.abs(e)*Number(n)),t!==A.INT64&&t!==A.UINT64||!s.A.supportsBigInt()||(e=BigInt(e)),e>n?n:e<r?r:e},applyValueTransform:function(e,t,n){return n*e+t},unapplyValueTransform:function(e,t,n){return 0===n?0:(e-t)/n},getSizeInBytes:function(e){switch(o.A.typeOf.string("type",e),e){case A.INT8:case A.UINT8:return 1;case A.INT16:case A.UINT16:return 2;case A.INT32:case A.UINT32:return 4;case A.INT64:case A.UINT64:return 8;case A.FLOAT32:return 4;case A.FLOAT64:return 8}},fromComponentDatatype:function(e){switch(o.A.typeOf.number("componentDatatype",e),e){case r.A.BYTE:return A.INT8;case r.A.UNSIGNED_BYTE:return A.UINT8;case r.A.SHORT:return A.INT16;case r.A.UNSIGNED_SHORT:return A.UINT16;case r.A.INT:return A.INT32;case r.A.UNSIGNED_INT:return A.UINT32;case r.A.FLOAT:return A.FLOAT32;case r.A.DOUBLE:return A.FLOAT64}},toComponentDatatype:function(e){switch(o.A.typeOf.string("type",e),e){case A.INT8:return r.A.BYTE;case A.UINT8:return r.A.UNSIGNED_BYTE;case A.INT16:return r.A.SHORT;case A.UINT16:return r.A.UNSIGNED_SHORT;case A.INT32:return r.A.INT;case A.UINT32:return r.A.UNSIGNED_INT;case A.FLOAT32:return r.A.FLOAT;case A.FLOAT64:return r.A.DOUBLE}}},c=Object.freeze(A)},965976:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(376758),r=n(491446),a=n(605971);function s(){}Object.defineProperties(s.prototype,{class:{get:function(){a.A.throwInstantiationError()}}}),s.prototype.hasProperty=function(e){a.A.throwInstantiationError()},s.prototype.hasPropertyBySemantic=function(e){a.A.throwInstantiationError()},s.prototype.getPropertyIds=function(e){a.A.throwInstantiationError()},s.prototype.getProperty=function(e){a.A.throwInstantiationError()},s.prototype.setProperty=function(e,t){a.A.throwInstantiationError()},s.prototype.getPropertyBySemantic=function(e){a.A.throwInstantiationError()},s.prototype.setPropertyBySemantic=function(e,t){a.A.throwInstantiationError()},s.hasProperty=function(e,t,n){if(i.A.typeOf.string("propertyId",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n),(0,r.A)(t[e]))return!0;const o=n.properties;if(!(0,r.A)(o))return!1;const a=o[e];return!(!(0,r.A)(a)||!(0,r.A)(a.default))},s.hasPropertyBySemantic=function(e,t,n){i.A.typeOf.string("semantic",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!(0,r.A)(o))return!1;const a=o[e];return(0,r.A)(a)},s.getPropertyIds=function(e,t,n){i.A.typeOf.object("properties",e),i.A.typeOf.object("classDefinition",t),(n=(0,r.A)(n)?n:[]).length=0;for(const t in e)e.hasOwnProperty(t)&&(0,r.A)(e[t])&&n.push(t);const o=t.properties;if((0,r.A)(o))for(const t in o)o.hasOwnProperty(t)&&!(0,r.A)(e[t])&&(0,r.A)(o[t].default)&&n.push(t);return n},s.getProperty=function(e,t,n){if(i.A.typeOf.string("propertyId",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n),!(0,r.A)(n.properties[e]))throw new a.A(`Class definition missing property ${e}`);const s=n.properties[e];let A=t[e];Array.isArray(A)&&(A=A.slice());const c=!0;return A=s.handleNoData(A),!(0,r.A)(A)&&(0,r.A)(s.default)?(A=(0,o.A)(s.default,!0),s.unpackVectorAndMatrixTypes(A,c)):(0,r.A)(A)?(A=s.normalize(A),A=s.applyValueTransform(A),s.unpackVectorAndMatrixTypes(A,c)):void 0},s.setProperty=function(e,t,n,o){if(i.A.typeOf.string("propertyId",e),i.A.defined("value",t),i.A.typeOf.object("properties",n),i.A.typeOf.object("classDefinition",o),!(0,r.A)(n[e]))return!1;let a;Array.isArray(t)&&(t=t.slice());const s=o.properties;return(0,r.A)(s)&&(a=s[e]),(0,r.A)(a)&&(t=a.packVectorAndMatrixTypes(t,!0),t=a.unapplyValueTransform(t),t=a.unnormalize(t)),n[e]=t,!0},s.getPropertyBySemantic=function(e,t,n){i.A.typeOf.string("semantic",e),i.A.typeOf.object("properties",t),i.A.typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!(0,r.A)(o))return;const a=o[e];return(0,r.A)(a)?s.getProperty(a.id,t,n):void 0},s.setPropertyBySemantic=function(e,t,n,o){i.A.typeOf.string("semantic",e),i.A.defined("value",t),i.A.typeOf.object("properties",n),i.A.typeOf.object("classDefinition",o);const a=o.propertiesBySemantic;if(!(0,r.A)(a))return!1;const A=o.propertiesBySemantic[e];return!!(0,r.A)(A)&&s.setProperty(A.id,t,n,o)};const A=s},266262:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(376758),r=n(915325),a=n(901717),s=n(568748);function A(e){const t=(e=e??r.A.EMPTY_OBJECT).id,n=e.values;i.A.typeOf.string("options.id",t),i.A.defined("options.values",n);const a={},A={},c=n.length;for(let e=0;e<c;++e){const t=n[e];a[t.value]=t.name,A[t.name]=t.value}const l=e.valueType??s.A.UINT16;this._values=n,this._namesByValue=a,this._valuesByName=A,this._valueType=l,this._id=t,this._name=e.name,this._description=e.description,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}A.fromJson=function(e){const t=(e=e??r.A.EMPTY_OBJECT).id,n=e.enum;return i.A.typeOf.string("options.id",t),i.A.typeOf.object("options.enum",n),new A({id:t,values:n.values.map(function(e){return a.A.fromJson(e)}),valueType:s.A[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})},Object.defineProperties(A.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const c=A},901717:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(376758),r=n(915325);function a(e){const t=(e=e??r.A.EMPTY_OBJECT).value,n=e.name;i.A.typeOf.number("options.value",t),i.A.typeOf.string("options.name",n),this._value=t,this._name=n,this._description=e.description,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}a.fromJson=function(e){return i.A.typeOf.object("value",e),new a({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})},Object.defineProperties(a.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const s=a},658036:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(434067),o=n(267980),r=n(626809),a=n(491446),s=n(463298),A=n(331185),c=n(584164),l=n(123245),u=n(343674),d=n(568748),h=n(374607);const g={decodeRawMetadataValue:function(e,t,n){switch(e){case d.A.INT8:return t.getInt8(n);case d.A.UINT8:return t.getUint8(n);case d.A.INT16:return t.getInt16(n,!0);case d.A.UINT16:return t.getUint16(n,!0);case d.A.INT32:return t.getInt32(n,!0);case d.A.UINT32:return t.getUint32(n,!0);case d.A.INT64:return t.getBigInt64(n,!0);case d.A.UINT64:return t.getBigUint64(n,!0);case d.A.FLOAT32:return t.getFloat32(n,!0);case d.A.FLOAT64:return t.getFloat64(n,!0)}throw new l.A(`Invalid component type: ${e}`)},decodeRawMetadataValueComponent:function(e,t,n){const i=e.componentType,o=g.decodeRawMetadataValue(i,t,n);return e.normalized?d.A.normalize(o,i):o},decodeRawMetadataValueElement:function(e,t,n){const i=e.componentType,o=d.A.getSizeInBytes(i),r=e.type,a=h.A.getComponentCount(r),s=o*a;if(a>1){const i=Array(a);for(let r=0;r<a;r++){const a=n*s+r*o,A=g.decodeRawMetadataValueComponent(e,t,a);i[r]=A}return i}const A=n*s;return g.decodeRawMetadataValueComponent(e,t,A)},decodeRawMetadataValues:function(e,t){const n=new DataView(t.buffer,t.byteOffset,t.byteLength);if(e.isArray){const t=e.arrayLength,i=Array(t);for(let o=0;o<t;o++){const t=g.decodeRawMetadataValueElement(e,n,o);i[o]=t}return i}return g.decodeRawMetadataValueElement(e,n,0)},convertToObjectType:function(e,t){if(!(0,a.A)(t))return t;if(e===h.A.SCALAR||e===h.A.STRING||e===h.A.BOOLEAN||e===h.A.ENUM)return t;const n=t.map(e=>Number(e));switch(e){case h.A.VEC2:return i.A.unpack(n,0,new i.A);case h.A.VEC3:return o.A.unpack(n,0,new o.A);case h.A.VEC4:return r.A.unpack(n,0,new r.A);case h.A.MAT2:return s.A.unpack(n,0,new s.A);case h.A.MAT3:return A.A.unpack(n,0,new A.A);case h.A.MAT4:return c.A.unpack(n,0,new c.A)}throw new l.A(`Invalid metadata object type: ${e}`)},convertFromObjectType:function(e,t){if(!(0,a.A)(t))return t;if(e===h.A.SCALAR||e===h.A.STRING||e===h.A.BOOLEAN||e===h.A.ENUM)return t;switch(e){case h.A.VEC2:return i.A.pack(t,Array(2));case h.A.VEC3:return o.A.pack(t,Array(3));case h.A.VEC4:return r.A.pack(t,Array(4));case h.A.MAT2:return s.A.pack(t,Array(4));case h.A.MAT3:return A.A.pack(t,Array(9));case h.A.MAT4:return c.A.pack(t,Array(16))}throw new l.A(`Invalid metadata object type: ${e}`)},decodeMetadataValues:function(e,t,n){let i=g.decodeRawMetadataValues(e,n);if(t.hasValueTransform){const n=g.convertFromObjectType(e.type,t.offset),o=g.convertFromObjectType(e.type,t.scale);i=u.A.valueTransformInPlace(i,n,o,d.A.applyValueTransform)}if(e.isArray){const t=e.arrayLength,n=Array(t);for(let o=0;o<t;o++){const t=i[o],r=g.convertToObjectType(e.type,t);n[o]=r}return n}return g.convertToObjectType(e.type,i)}},f=Object.freeze(g)},4024:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(376758),r=n(915325),a=n(491446),s=n(32335),A=n(266262);function c(e){const t=(e=e??r.A.EMPTY_OBJECT).classes??{},n=e.enums??{};this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=(0,o.A)(e.extras,!0),this._extensions=(0,o.A)(e.extensions,!0)}c.fromJson=function(e){i.A.typeOf.object("schema",e);const t={};if((0,a.A)(e.enums))for(const n in e.enums)e.enums.hasOwnProperty(n)&&(t[n]=A.A.fromJson({id:n,enum:e.enums[n]}));const n={};if((0,a.A)(e.classes))for(const i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=s.A.fromJson({id:i,class:e.classes[i],enums:t}));return new c({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})},Object.defineProperties(c.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const l=c},729295:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(915325),o=n(491446),r=n(605971),a=n(4024),s=n(569445),A=n(48660);function c(e){const t=(e=e??i.A.EMPTY_OBJECT).schema,n=e.resource,s=e.cacheKey;if((0,o.A)(t)===(0,o.A)(n))throw new r.A("One of options.schema and options.resource must be defined.");this._schema=(0,o.A)(t)?a.A.fromJson(t):void 0,this._resource=n,this._cacheKey=s,this._state=A.A.UNLOADED,this._promise=void 0}(0,o.A)(Object.create)&&(c.prototype=Object.create(s.A.prototype),c.prototype.constructor=c),Object.defineProperties(c.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}}),c.prototype.load=async function(){return(0,o.A)(this._promise)?this._promise:(0,o.A)(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=async function(e){const t=e._resource;e._state=A.A.LOADING;try{const n=await t.fetchJson();if(e.isDestroyed())return;return e._schema=a.A.fromJson(n),e._state=A.A.READY,e}catch(n){if(e.isDestroyed())return;e._state=A.A.FAILED;const i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}(this),this._promise)},c.prototype.unload=function(){this._schema=void 0};const l=c},165955:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({ID:"ID",NAME:"NAME",DESCRIPTION:"DESCRIPTION",TILESET_TILE_COUNT:"TILESET_TILE_COUNT",TILE_BOUNDING_BOX:"TILE_BOUNDING_BOX",TILE_BOUNDING_REGION:"TILE_BOUNDING_REGION",TILE_BOUNDING_SPHERE:"TILE_BOUNDING_SPHERE",TILE_MINIMUM_HEIGHT:"TILE_MINIMUM_HEIGHT",TILE_MAXIMUM_HEIGHT:"TILE_MAXIMUM_HEIGHT",TILE_HORIZON_OCCLUSION_POINT:"TILE_HORIZON_OCCLUSION_POINT",TILE_GEOMETRIC_ERROR:"TILE_GEOMETRIC_ERROR",CONTENT_BOUNDING_BOX:"CONTENT_BOUNDING_BOX",CONTENT_BOUNDING_REGION:"CONTENT_BOUNDING_REGION",CONTENT_BOUNDING_SPHERE:"CONTENT_BOUNDING_SPHERE",CONTENT_MINIMUM_HEIGHT:"CONTENT_MINIMUM_HEIGHT",CONTENT_MAXIMUM_HEIGHT:"CONTENT_MAXIMUM_HEIGHT",CONTENT_HORIZON_OCCLUSION_POINT:"CONTENT_HORIZON_OCCLUSION_POINT"})},874403:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(369031),o=n(376758),r=n(915325),a=n(491446),s=n(965976),A=n(140182);function c(e){const t=(e=e??r.A.EMPTY_OBJECT).count,n=e.class;i.A.typeOf.number.greaterThan("options.count",t,0),i.A.typeOf.object("options.class",n);let o=0;const s={};if((0,a.A)(e.properties))for(const i in e.properties)if(e.properties.hasOwnProperty(i)){const r=new A.A({count:t,property:e.properties[i],classProperty:n.properties[i],bufferViews:e.bufferViews});s[i]=r,o+=r.byteLength}this._count=t,this._class=n,this._properties=s,this._byteLength=o}Object.defineProperties(c.prototype,{count:{get:function(){return this._count}},class:{get:function(){return this._class}},byteLength:{get:function(){return this._byteLength}}}),c.prototype.hasProperty=function(e){return s.A.hasProperty(e,this._properties,this._class)},c.prototype.hasPropertyBySemantic=function(e){return s.A.hasPropertyBySemantic(e,this._properties,this._class)},c.prototype.getPropertyIds=function(e){return s.A.getPropertyIds(this._properties,this._class,e)},c.prototype.getProperty=function(e,t){i.A.typeOf.string("propertyId",t);const n=this._properties[t];let r;return r=(0,a.A)(n)?n.get(e):function(e,t){const n=e.properties;if(!(0,a.A)(n))return;const i=n[t];if((0,a.A)(i)&&(0,a.A)(i.default)){let e=i.default;return i.isArray&&(e=(0,o.A)(e,!0)),e=i.normalize(e),i.unpackVectorAndMatrixTypes(e)}}(this._class,t),r},c.prototype.setProperty=function(e,t,n){i.A.typeOf.string("propertyId",t);const o=this._properties[t];return!!(0,a.A)(o)&&(o.set(e,n),!0)},c.prototype.getPropertyBySemantic=function(e,t){let n;i.A.typeOf.string("semantic",t);const o=this._class.propertiesBySemantic;if((0,a.A)(o)&&(n=o[t]),(0,a.A)(n))return this.getProperty(e,n.id)},c.prototype.setPropertyBySemantic=function(e,t,n){let o;i.A.typeOf.string("semantic",t);const r=this._class.propertiesBySemantic;return(0,a.A)(r)&&(o=r[t]),!!(0,a.A)(o)&&this.setProperty(e,o.id,n)},c.prototype.getPropertyTypedArray=function(e){i.A.typeOf.string("propertyId",e);const t=this._properties[e];if((0,a.A)(t))return t.getTypedArray()},c.prototype.getPropertyTypedArrayBySemantic=function(e){let t;i.A.typeOf.string("semantic",e);const n=this._class.propertiesBySemantic;if((0,a.A)(n)&&(t=n[e]),(0,a.A)(t))return this.getPropertyTypedArray(t.id)};const l=c},140182:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(376758),r=n(571804),a=n(915325),s=n(491446),A=n(605971),c=n(520098),l=n(241839),u=n(983884),d=n(568748),h=n(343674),g=n(374607),f=n(702247);function p(e){const t=(e=e??a.A.EMPTY_OBJECT).count,n=e.property,o=e.classProperty,r=e.bufferViews;i.A.typeOf.number.greaterThan("options.count",t,0),i.A.typeOf.object("options.property",n),i.A.typeOf.object("options.classProperty",o),i.A.typeOf.object("options.bufferViews",r);const A=o.type,c=o.isArray,u=o.isVariableLengthArray;let h=o.valueType;const f=o.enumType,p=A===g.A.STRING,_=A===g.A.BOOLEAN;let I,E=0;if(u){let e=n.arrayOffsetType??n.offsetType;e=d.A[e]??d.A.UINT32,I=new C(r[n.arrayOffsets??n.arrayOffsetBufferView],e,t+1),E+=I.typedArray.byteLength}const y=g.A.getComponentCount(A);let b;b=u?I.get(t)-I.get(0):c?t*o.arrayLength:t;const B=y*b;let v,w;if(p){let e=n.stringOffsetType??n.offsetType;e=d.A[e]??d.A.UINT32,v=new C(r[n.stringOffsets??n.stringOffsetBufferView],e,B+1),E+=v.typedArray.byteLength}(p||_)&&(h=d.A.UINT8),w=p?v.get(B)-v.get(0):_?Math.ceil(B/8):B;const T=new C(r[n.values??n.bufferView],h,w);E+=T.typedArray.byteLength;let S=n.offset,x=n.scale;const D=o.hasValueTransform||(0,s.A)(S)||(0,s.A)(x);let Q,N;S=S??o.offset,x=x??o.scale,S=m(S),x=m(x);const R=this;p?Q=function(e){return function(e,t,n){const i=n.get(e),o=n.get(e+1)-i;return(0,l.A)(t.typedArray,i,o)}(e,R._values,R._stringOffsets)}:_?(Q=function(e){return function(e,t){const n=e>>3,i=e%8;return 1==(t.typedArray[n]>>i&1)}(e,R._values)},N=function(e,t){!function(e,t,n){const i=e>>3,o=e%8;n?t.typedArray[i]|=1<<o:t.typedArray[i]&=~(1<<o)}(e,R._values,t)}):(0,s.A)(f)?(Q=function(e){const t=R._values.get(e);return f.namesByValue[t]},N=function(e,t){const n=f.valuesByName[t];R._values.set(e,n)}):(Q=function(e){return R._values.get(e)},N=function(e,t){R._values.set(e,t)}),this._arrayOffsets=I,this._stringOffsets=v,this._values=T,this._classProperty=o,this._count=t,this._vectorComponentCount=y,this._min=n.min,this._max=n.max,this._offset=S,this._scale=x,this._hasValueTransform=D,this._getValue=Q,this._setValue=N,this._unpackedValues=void 0,this._extras=n.extras,this._extensions=n.extensions,this._byteLength=E}function m(e){if(!Array.isArray(e))return e;const t=[];for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)?(0,f.A)(t,i):t.push(i)}return t}function _(e,t){const n=e._count;if(!(0,s.A)(t)||t<0||t>=n){const e=n-1;throw new A.A(`index is required and between zero and count - 1. Actual value: ${e}`)}}function I(e,t,n){let i,o;if(t.isVariableLengthArray){i=e._arrayOffsets.get(n),o=e._arrayOffsets.get(n+1)-i;const r=g.A.getComponentCount(t.type);i*=r,o*=r}else{const r=(t.arrayLength??1)*e._vectorComponentCount;i=n*r,o=r}const r=new Array(o);for(let t=0;t<o;t++)r[t]=e._getValue(i+t);return r}function E(e){if((0,s.A)(e._unpackedValues))return!1;const t=e._classProperty,n=t.type,i=t.valueType;return n===g.A.STRING||i===d.A.INT64&&!c.A.supportsBigInt64Array()||i===d.A.UINT64&&!c.A.supportsBigUint64Array()}function y(e){e._unpackedValues=function(e){const t=e._count,n=new Array(t),i=e._classProperty,o=i.isArray,r=i.type,a=g.A.getComponentCount(r);if(!o&&1===a){for(let i=0;i<t;++i)n[i]=e._getValue(i);return n}for(let o=0;o<t;o++)n[o]=I(e,i,o);return n}(e),e._arrayOffsets=void 0,e._stringOffsets=void 0,e._values=void 0}function C(e,t,n){const i=this;let o,a,A;if(t===d.A.INT64)c.A.supportsBigInt()?c.A.supportsBigInt64Array()?(o=new BigInt64Array(e.buffer,e.byteOffset,n),A=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return function(e,t){const n=t.dataView,i=8*e;let o=BigInt(0);const r=(128&n.getUint8(i+7))>0;let a=!0;for(let e=0;e<8;++e){let t=n.getUint8(i+e);r&&(a?0!==t&&(t=255&~(t-1),a=!1):t=255&~t),o+=BigInt(t)*(BigInt(1)<<BigInt(8*e))}return r&&(o=-o),o}(e,i)}):((0,u.A)("INT64 type is not fully supported on this platform. Values greater than 2^53 - 1 or less than -(2^53 - 1) may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return function(e,t){const n=t.dataView,i=8*e;let o=0;const r=(128&n.getUint8(i+7))>0;let a=!0;for(let e=0;e<8;++e){let t=n.getUint8(i+e);r&&(a?0!==t&&(t=255&~(t-1),a=!1):t=255&~t),o+=t*Math.pow(256,e)}return r&&(o=-o),o}(e,i)});else if(t===d.A.UINT64)c.A.supportsBigInt()?c.A.supportsBigUint64Array()?(o=new BigUint64Array(e.buffer,e.byteOffset,n),A=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return function(e,t){const n=t.dataView,i=8*e,o=BigInt(n.getUint32(i,!0)),r=BigInt(n.getUint32(i+4,!0));return o+BigInt(4294967296)*r}(e,i)}):((0,u.A)("UINT64 type is not fully supported on this platform. Values greater than 2^53 - 1 may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return function(e,t){const n=t.dataView,i=8*e;return n.getUint32(i,!0)+4294967296*n.getUint32(i+4,!0)}(e,i)});else{const a=function(e){switch(e){case d.A.INT8:return r.A.BYTE;case d.A.UINT8:return r.A.UNSIGNED_BYTE;case d.A.INT16:return r.A.SHORT;case d.A.UINT16:return r.A.UNSIGNED_SHORT;case d.A.INT32:return r.A.INT;case d.A.UINT32:return r.A.UNSIGNED_INT;case d.A.FLOAT32:return r.A.FLOAT;case d.A.FLOAT64:return r.A.DOUBLE}}(t);o=r.A.createArrayBufferView(a,e.buffer,e.byteOffset,n),A=function(e,t){i.typedArray[e]=t}}(0,s.A)(a)||(a=function(e){return i.typedArray[e]}),this.typedArray=o,this.dataView=new DataView(o.buffer,o.byteOffset),this.get=a,this.set=A,this._componentType=t}Object.defineProperties(p.prototype,{hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){return this._byteLength}}}),p.prototype.get=function(e){_(this,e);let t=function(e,t){E(e)&&y(e);const n=e._classProperty,i=n.isArray,r=n.type,a=g.A.getComponentCount(r);if((0,s.A)(e._unpackedValues)){const n=e._unpackedValues[t];return i?(0,o.A)(n,!0):n}return i||1!==a?I(e,n,t):e._getValue(t)}(this,e);return t=this._classProperty.handleNoData(t),(0,s.A)(t)?(t=this._classProperty.normalize(t),t=function(e,t){const n=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||n?t:h.A.valueTransformInPlace(t,e._offset,e._scale,d.A.applyValueTransform)}(this,t),this._classProperty.unpackVectorAndMatrixTypes(t)):(t=this._classProperty.default,this._classProperty.unpackVectorAndMatrixTypes(t))},p.prototype.set=function(e,t){const n=this._classProperty;i.A.defined("value",t),_(this,e);const r=n.validate(t);if((0,s.A)(r))throw new A.A(r);t=function(e,t){const n=e._classProperty.isVariableLengthArray;return!e._hasValueTransform||n?t:h.A.valueTransformInPlace(t,e._offset,e._scale,d.A.unapplyValueTransform)}(this,t=n.packVectorAndMatrixTypes(t)),function(e,t,n){(function(e,t,n){if(E(e))return!0;const i=e._arrayOffsets;return!(!(0,s.A)(i)||i.get(t+1)-i.get(t)===n.length)})(e,t,n)&&y(e);const i=e._classProperty,r=i.isArray,a=i.type,A=g.A.getComponentCount(a);if((0,s.A)(e._unpackedValues))return i.isArray&&(n=(0,o.A)(n,!0)),void(e._unpackedValues[t]=n);if(!r&&1===A)return void e._setValue(t,n);let c,l;if(i.isVariableLengthArray)c=e._arrayOffsets.get(t),l=e._arrayOffsets.get(t+1)-c;else{const n=(i.arrayLength??1)*e._vectorComponentCount;c=t*n,l=n}for(let t=0;t<l;++t)e._setValue(c+t,n[t])}(this,e,t=n.unnormalize(t))},p.prototype.getTypedArray=function(){if((0,s.A)(this._values))return this._values.typedArray};const b=p},374607:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(434067),r=n(267980),a=n(626809),s=n(605971),A=n(463298),c=n(331185),l=n(584164);const u={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",BOOLEAN:"BOOLEAN",STRING:"STRING",ENUM:"ENUM",isVectorType:function(e){switch(i.A.typeOf.string("type",e),e){case u.VEC2:case u.VEC3:case u.VEC4:return!0;default:return!1}},isMatrixType:function(e){switch(i.A.typeOf.string("type",e),e){case u.MAT2:case u.MAT3:case u.MAT4:return!0;default:return!1}},getComponentCount:function(e){switch(i.A.typeOf.string("type",e),e){case u.SCALAR:case u.STRING:case u.ENUM:case u.BOOLEAN:return 1;case u.VEC2:return 2;case u.VEC3:return 3;case u.VEC4:case u.MAT2:return 4;case u.MAT3:return 9;case u.MAT4:return 16;default:throw new s.A(`Invalid metadata type ${e}`)}},getMathType:function(e){switch(e){case u.VEC2:return o.A;case u.VEC3:return r.A;case u.VEC4:return a.A;case u.MAT2:return A.A;case u.MAT3:return c.A;case u.MAT4:return l.A;default:return}}},d=Object.freeze(u)},19120:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(624512),r=n(200646),a=n(760866);const s={name:"AlphaPipelineStage",process:function(e,t,n){const s=e.alphaOptions,A=e.model;s.pass=s.pass??A.opaquePass;const c=e.renderStateOptions;s.pass===a.A.TRANSLUCENT&&(c.cull.enabled=!1,c.depthMask=!1,c.blending=r.A.ALPHA_BLEND);const l=e.shaderBuilder,u=e.uniformMap;(0,i.A)(s.alphaCutoff)&&(l.addDefine("ALPHA_MODE_MASK",void 0,o.A.FRAGMENT),l.addUniform("float","u_alphaCutoff",o.A.FRAGMENT),u.u_alphaCutoff=function(){return s.alphaCutoff})}}},538198:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(267980),o=n(367817),r=n(624512),a=n(50937),s=n(390249);const A={name:"AtmospherePipelineStage",process:function(e,t,n){const A=e.shaderBuilder;A.addDefine("HAS_ATMOSPHERE",void 0,r.A.BOTH),A.addDefine("COMPUTE_POSITION_WC_ATMOSPHERE",void 0,r.A.BOTH),A.addVarying("vec3","v_atmosphereRayleighColor"),A.addVarying("vec3","v_atmosphereMieColor"),A.addVarying("float","v_atmosphereOpacity"),A.addVertexLines([s.A]),A.addFragmentLines([a.A]),A.addUniform("bool","u_isInFog",r.A.FRAGMENT),e.uniformMap.u_isInFog=function(){const e=i.A.distance(n.camera.positionWC,t.boundingSphere.center);return o.A.fog(e,n.fog.density)>o.A.EPSILON3}}}},802227:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(320475),o=n(511517),r=n(267980),a=n(468741),s=n(369031),A=n(571804),c=n(915325),l=n(491446),u=n(590732),d=n(982504),h=n(584164),g=n(32335),f=n(995537),p=n(471147),m=n(115959),_=n(287659),I=n(569445),E=n(595826);const y=f.A.FeatureIdAttribute;function C(e){const t=(e=e??c.A.EMPTY_OBJECT).b3dmResource;let n=e.baseResource;const o=e.arrayBuffer,r=e.byteOffset??0,a=e.releaseGltfJson??!1,A=e.asynchronous??!0,u=e.incrementallyLoadTextures??!0,d=e.upAxis??i.A.Y,g=e.forwardAxis??i.A.X,f=e.loadAttributesAsTypedArray??!1,p=e.loadAttributesFor2D??!1,m=e.enablePick??!1,_=e.loadIndicesForWireframe??!1,I=e.loadPrimitiveOutline??!0,E=e.loadForClassification??!1;s.A.typeOf.object("options.b3dmResource",t),s.A.typeOf.object("options.arrayBuffer",o),n=(0,l.A)(n)?n:t.clone(),this._b3dmResource=t,this._baseResource=n,this._arrayBuffer=o,this._byteOffset=r,this._releaseGltfJson=a,this._asynchronous=A,this._incrementallyLoadTextures=u,this._upAxis=d,this._forwardAxis=g,this._loadAttributesAsTypedArray=f,this._loadAttributesFor2D=p,this._enablePick=m,this._loadIndicesForWireframe=_,this._loadPrimitiveOutline=I,this._loadForClassification=E,this._state=0,this._promise=void 0,this._gltfLoader=void 0,this._batchLength=0,this._propertyTable=void 0,this._batchTable=void 0,this._components=void 0,this._transform=h.A.IDENTITY}function b(e){const t=e.children.length;for(let n=0;n<t;n++)b(e.children[n]);const n=e.primitives.length;for(let t=0;t<n;t++){const n=e.primitives[t],i=p.A.getAttributeBySemantic(n,E.A.FEATURE_ID);if((0,l.A)(i)){i.setIndex=0;const e=new y;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",n.featureIds.push(e)}}}(0,l.A)(Object.create)&&(C.prototype=Object.create(I.A.prototype),C.prototype.constructor=C),Object.defineProperties(C.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),C.prototype.load=function(){if((0,l.A)(this._promise))return this._promise;const e=o.A.parse(this._arrayBuffer,this._byteOffset);let t=e.batchLength;const n=e.featureTableJson,i=e.featureTableBinary,s=e.batchTableJson,c=e.batchTableBinary,u=new a.A(n,i);t=u.getGlobalProperty("BATCH_LENGTH"),this._batchLength=t;const g=u.getGlobalProperty("RTC_CENTER",A.A.FLOAT,3);(0,l.A)(g)&&(this._transform=h.A.fromTranslation(r.A.fromArray(g))),this._batchTable={json:s,binary:c};const f=new d.A({typedArray:e.gltf,upAxis:this._upAxis,forwardAxis:this._forwardAxis,gltfResource:this._b3dmResource,baseResource:this._baseResource,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadAttributesFor2D:this._loadAttributesFor2D,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline,loadForClassification:this._loadForClassification,renameBatchIdSemantic:!0});this._gltfLoader=f,this._state=1;const p=this;return this._promise=f.load().then(function(){if(!p.isDestroyed())return p._state=2,p}).catch(function(e){if(!p.isDestroyed())return function(e,t){e.unload(),e._state=4;return t=e.getError("Failed to load b3dm",t),Promise.reject(t)}(p,e)}),this._promise},C.prototype.process=function(e){if(s.A.typeOf.object("frameState",e),3===this._state)return!0;if(2!==this._state)return!1;if(!this._gltfLoader.process(e))return!1;const t=this._gltfLoader.components;return t.transform=h.A.multiplyTransformation(this._transform,t.transform,t.transform),function(e,t){const n=e._batchTable,i=e._batchLength;if(0===i)return;let o;if((0,l.A)(n.json))o=(0,m.A)({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new _.A({name:g.A.BATCH_TABLE_CLASS_NAME,count:i});o=new u.A({schema:{},propertyTables:[e]})}const r=t.scene.nodes,a=r.length;for(let e=0;e<a;e++)b(r[e]);t.structuralMetadata=o}(this,t),this._components=t,this._arrayBuffer=void 0,this._state=3,!0},C.prototype.unload=function(){(0,l.A)(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),this._components=void 0,this._arrayBuffer=void 0};const B=C},186919:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(430346);const o={name:"BatchTexturePipelineStage",process:function(e,t,n){const o=e.shaderBuilder,r={},a=e.model,s=a.featureTables[a.featureTableId],A=s.featuresLength;o.addUniform("int","model_featuresLength"),r.model_featuresLength=function(){return A};const c=s.batchTexture;o.addUniform("sampler2D","model_batchTexture"),r.model_batchTexture=function(){return c.batchTexture??c.defaultTexture},o.addUniform("vec4","model_textureStep"),r.model_textureStep=function(){return c.textureStep},c.textureDimensions.y>1&&(o.addDefine("MULTILINE_BATCH_TEXTURE"),o.addUniform("vec2","model_textureDimensions"),r.model_textureDimensions=function(){return c.textureDimensions}),e.uniformMap=(0,i.A)(r,e.uniformMap)}}},212642:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(428027),o=n(726401),r=n(759889),a=n(491446),s=n(542614),A=n(760866),c=n(624512);const l={name:"CPUStylingPipelineStage",process:function(e,t,n){const l=e.model,u=e.shaderBuilder;u.addVertexLines(o.A),u.addFragmentLines(r.A),u.addDefine("USE_CPU_STYLING",void 0,c.A.BOTH),(0,a.A)(l.color)||(u.addUniform("float",s.A.COLOR_BLEND_UNIFORM_NAME,c.A.FRAGMENT),e.uniformMap[s.A.COLOR_BLEND_UNIFORM_NAME]=function(){return i.A.getColorBlend(l.colorBlendMode,l.colorBlendAmount)}),u.addUniform("bool","model_commandTranslucent",c.A.BOTH),e.uniformMap.model_commandTranslucent=function(){return e.alphaOptions.pass===A.A.TRANSLUCENT}}}},503631:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=class{constructor(e,t,n,i){this._minX=e??0,this._minY=t??0,this._maxX=n??0,this._maxY=i??0}get minX(){return this._minX}set minX(e){this._minX=e}get minY(){return this._minY}set minY(e){this._minY=e}get maxX(){return this._maxX}set maxX(e){this._maxX=e}get maxY(){return this._maxY}set maxY(e){this._maxY=e}contains(e,t){return e>=this.minX&&e<this.maxX&&t>=this.minY&&t<this.maxY}containsExclusive(e,t){return e>this.minX&&e<this.maxX&&t>this.minY&&t<this.maxY}containsInclusive(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY}}},899700:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(702247),o=n(660662),r=n(369031),a=n(915325),s=n(584164),A=n(377496),c=n(760866),l=n(40118),u=n(200646),d=n(71578),h=n(523721),g=n(938987),f=n(896464),p=n(138151);function m(e){const t=(e=e??a.A.EMPTY_OBJECT).command,n=e.primitiveRenderResources;r.A.typeOf.object("options.command",t),r.A.typeOf.object("options.primitiveRenderResources",n);const i=n.model;this._command=t,this._model=i,this._runtimePrimitive=n.runtimePrimitive,this._modelMatrix=t.modelMatrix,this._boundingVolume=t.boundingVolume,this._cullFace=t.renderState.cull.face;const o=i.classificationType;this._classificationType=o,this._classifiesTerrain=o!==d.A.CESIUM_3D_TILE,this._classifies3DTiles=o!==d.A.TERRAIN,this._useDebugWireframe=i._enableDebugWireframe&&i.debugWireframe,this._pickId=n.pickId,this._commandListTerrain=[],this._commandList3DTiles=[],this._commandListIgnoreShow=[],this._commandListDebugWireframe=[],this._commandListTerrainPicking=[],this._commandList3DTilesPicking=[],function(e){const t=e._command,n=E;if(e._useDebugWireframe){t.pass=c.A.OPAQUE,n.length=0,n.push(t),e._commandListDebugWireframe=y(e,n,e._commandListDebugWireframe);const i=e._commandListDebugWireframe,o=i.length;for(let e=0;e<o;e++){const t=i[e];t.count*=2,t.offset*=2}return}const i=e.model.allowPicking;if(e._classifiesTerrain){const o=c.A.TERRAIN_CLASSIFICATION,r=C(t,o),a=b(t,o);n.length=0,n.push(r,a),e._commandListTerrain=y(e,n,e._commandListTerrain),i&&(e._commandListTerrainPicking=v(e,n,e._commandListTerrainPicking))}if(e._classifies3DTiles){const o=c.A.CESIUM_3D_TILE_CLASSIFICATION,r=C(t,o),a=b(t,o);n.length=0,n.push(r,a),e._commandList3DTiles=y(e,n,e._commandList3DTiles),i&&(e._commandList3DTilesPicking=v(e,n,e._commandList3DTilesPicking))}}(this)}const _={stencilTest:{enabled:!0,frontFunction:f.A.NOT_EQUAL,frontOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},backFunction:f.A.NOT_EQUAL,backOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},reference:0,mask:g.A.CLASSIFICATION_MASK},stencilMask:g.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:u.A.PRE_MULTIPLIED_ALPHA_BLEND},I={stencilTest:{enabled:!0,frontFunction:f.A.NOT_EQUAL,frontOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},backFunction:f.A.NOT_EQUAL,backOperation:{fail:p.A.ZERO,zFail:p.A.ZERO,zPass:p.A.ZERO},reference:0,mask:g.A.CLASSIFICATION_MASK},stencilMask:g.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},E=[];function y(e,t,n){const i=e._runtimePrimitive,o=i.batchLengths,r=i.batchOffsets,a=o.length,s=t.length;for(let e=0;e<a;e++){const i=o[e],a=r[e];for(let e=0;e<s;e++){const o=t[e],r=A.A.shallowClone(o);r.count=i,r.offset=a,n.push(r)}}return n}function C(e,t){const n=A.A.shallowClone(e);n.cull=!1,n.pass=t;const i={colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:o=t===c.A.TERRAIN_CLASSIFICATION?f.A.ALWAYS:f.A.EQUAL,frontOperation:{fail:p.A.KEEP,zFail:p.A.DECREMENT_WRAP,zPass:p.A.KEEP},backFunction:o,backOperation:{fail:p.A.KEEP,zFail:p.A.INCREMENT_WRAP,zPass:p.A.KEEP},reference:g.A.CESIUM_3D_TILE_MASK,mask:g.A.CESIUM_3D_TILE_MASK},stencilMask:g.A.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:h.A.LESS_OR_EQUAL},depthMask:!1};var o;return n.renderState=l.A.fromCache(i),n}function b(e,t){const n=A.A.shallowClone(e);return n.cull=!1,n.pass=t,n.renderState=l.A.fromCache(_),n}const B=[];function v(e,t,n){const i=l.A.fromCache(I),o=t[0],r=t[1],a=A.A.shallowClone(o);a.cull=!0,a.pickOnly=!0;const s=A.A.shallowClone(r);s.cull=!0,s.pickOnly=!0,s.renderState=i,s.pickId=e._pickId;const c=B;return c.length=0,c.push(a,s),y(e,c,n)}Object.defineProperties(m.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},batchLengths:{get:function(){return this._runtimePrimitive.batchLengths}},batchOffsets:{get:function(){return this._runtimePrimitive.batchOffsets}},model:{get:function(){return this._model}},classificationType:{get:function(){return this._classificationType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=s.A.clone(e,this._modelMatrix);const t=this._runtimePrimitive.boundingSphere;this._boundingVolume=o.A.transform(t,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e}}}),m.prototype.pushCommands=function(e,t){const n=e.passes;if(n.render){if(this._useDebugWireframe)return void(0,i.A)(t,this._commandListDebugWireframe);if(this._classifiesTerrain&&(0,i.A)(t,this._commandListTerrain),this._classifies3DTiles&&(0,i.A)(t,this._commandList3DTiles),e.invertClassification&&this._classifies3DTiles){if(0===this._commandListIgnoreShow.length){const e=c.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,t=C(this._command,e),n=E;n.length=0,n.push(t),this._commandListIgnoreShow=y(this,n,this._commandListIgnoreShow)}(0,i.A)(t,this._commandListIgnoreShow)}}return n.pick&&(this._classifiesTerrain&&(0,i.A)(t,this._commandListTerrainPicking),this._classifies3DTiles&&(0,i.A)(t,this._commandList3DTilesPicking)),t};const w=m},662274:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(491446),o=n(123245),r=n(624512),a=n(595826),s=n(471147);const A={name:"ClassificationPipelineStage",process:function(e,t,n){e.shaderBuilder.addDefine("HAS_CLASSIFICATION",void 0,r.A.BOTH);const A=e.runtimePrimitive;(0,i.A)(A.batchLengths)||function(e,t){const n=s.A.getAttributeBySemantic(e,a.A.POSITION);if(!(0,i.A)(n))throw new o.A("Primitives must have a position attribute to be used for classification.");let r;const A=e.indices,c=(0,i.A)(A);c&&(r=A.typedArray,A.typedArray=void 0);const l=c?A.count:n.count,u=s.A.getAttributeBySemantic(e,a.A.FEATURE_ID,0);if(!(0,i.A)(u))return t.batchLengths=[l],void(t.batchOffsets=[0]);const d=u.typedArray;u.typedArray=void 0;const h=[],g=[0];let f=d[c?r[0]:0],p=0;for(let e=1;e<l;e++){const t=d[c?r[e]:e];if(t!==f){const n=e-p,i=e;h.push(n),g.push(i),p=i,f=t}}const m=l-p;h.push(m),t.batchLengths=h,t.batchOffsets=g}(t,A)}},c=A},106430:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(369031),o=n(915325),r=n(491446),a=n(677354),s=n(605971),A=n(212525),c=n(671098),l=n(821174),u=n(747680);function d(e){e=e??o.A.EMPTY_OBJECT,this.mode=e.mode??A.A.MODIFY_MATERIAL,this.lightingModel=e.lightingModel,this.uniforms=e.uniforms??o.A.EMPTY_OBJECT,this.varyings=e.varyings??o.A.EMPTY_OBJECT,this.vertexShaderText=e.vertexShaderText,this.fragmentShaderText=e.fragmentShaderText,this.translucencyMode=e.translucencyMode??u.A.INHERIT,this._textureManager=new l.A,this._defaultTexture=void 0,this.uniformMap=function(e){const t=e.uniforms,n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i],r=o.type;if(r===c.A.SAMPLER_CUBE)throw new s.A("CustomShader does not support samplerCube uniforms");r===c.A.SAMPLER_2D?(e._textureManager.loadTexture2D(i,o.value),n[i]=h(e,i)):n[i]=g(e,i)}return n}(this),this.usedVariablesVertex={attributeSet:{},featureIdSet:{},metadataSet:{}},this.usedVariablesFragment={attributeSet:{},featureIdSet:{},metadataSet:{},materialSet:{}},function(e){const t=/[vf]sInput\.attributes\.(\w+)/g,n=/[vf]sInput\.featureIds\.(\w+)/g,i=/[vf]sInput\.metadata.(\w+)/g;let o;const a=e.vertexShaderText;(0,r.A)(a)&&(o=e.usedVariablesVertex.attributeSet,f(a,t,o),o=e.usedVariablesVertex.featureIdSet,f(a,n,o),o=e.usedVariablesVertex.metadataSet,f(a,i,o));const s=e.fragmentShaderText;(0,r.A)(s)&&(o=e.usedVariablesFragment.attributeSet,f(s,t,o),o=e.usedVariablesFragment.featureIdSet,f(s,n,o),o=e.usedVariablesFragment.metadataSet,f(s,i,o),f(s,/material\.(\w+)/g,e.usedVariablesFragment.materialSet))}(this),function(e){const t=e.usedVariablesVertex.attributeSet;m(t,"position","positionMC","vertex"),m(t,"normal","normalMC","vertex"),m(t,"tangent","tangentMC","vertex"),m(t,"bitangent","bitangentMC","vertex"),m(t,"positionWC","positionMC","vertex"),m(t,"positionEC","positionMC","vertex"),m(t,"normalEC","normalMC","vertex"),m(t,"tangentEC","tangentMC","vertex"),m(t,"bitangentEC","bitangentMC","vertex");const n=e.usedVariablesFragment.attributeSet;m(n,"position","positionEC","fragment"),m(n,"normal","normalEC","fragment"),m(n,"tangent","tangentEC","fragment"),m(n,"bitangent","bitangentEC","fragment"),m(n,"normalMC","normalEC","fragment"),m(n,"tangentMC","tangentEC","fragment"),m(n,"bitangentMC","bitangentEC","fragment")}(this)}function h(e,t){return function(){return e._textureManager.getTexture(t)??e._defaultTexture}}function g(e,t){return function(){return e.uniforms[t].value}}function f(e,t,n){let i;for(;null!==(i=t.exec(e));)n[i[1]]=!0}function p(e){return/^.*MC$/.test(e)?`${e} (model coordinates)`:/^.*WC$/.test(e)?`${e} (Cartesian world coordinates)`:/^.*EC$/.test(e)?`${e} (eye coordinates)`:e}function m(e,t,n,i){if(e.hasOwnProperty(t)){const e=`${p(t)} is not available in the ${i} shader. Did you mean ${p(n)} instead?`;throw new s.A(e)}}d.prototype.setUniform=function(e,t){if(i.A.typeOf.string("uniformName",e),i.A.defined("value",t),!(0,r.A)(this.uniforms[e]))throw new s.A(`Uniform ${e} must be declared in the CustomShader constructor.`);const n=this.uniforms[e];n.type===c.A.SAMPLER_2D?this._textureManager.loadTexture2D(e,t):(0,r.A)(t.clone)?n.value=t.clone(n.value):n.value=t},d.prototype.update=function(e){this._defaultTexture=e.context.defaultTexture,this._textureManager.update(e)},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){this._textureManager=this._textureManager&&this._textureManager.destroy(),(0,a.A)(this)};const _=d},212525:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL",getDefineName:function(e){return`CUSTOM_SHADER_${e}`}})},381508:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(430346),o=n(491446),r=n(983884),a=n(624512),s=n(760866),A=n(181163),c=n(58747),l=n(212525),u=n(598073),d=n(64389),h=n(471147),g=n(747680);const f={name:"CustomShaderPipelineStage",STRUCT_ID_ATTRIBUTES_VS:"AttributesVS",STRUCT_ID_ATTRIBUTES_FS:"AttributesFS",STRUCT_NAME_ATTRIBUTES:"Attributes",STRUCT_ID_VERTEX_INPUT:"VertexInput",STRUCT_NAME_VERTEX_INPUT:"VertexInput",STRUCT_ID_FRAGMENT_INPUT:"FragmentInput",STRUCT_NAME_FRAGMENT_INPUT:"FragmentInput",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS:"initializeInputStructVS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS:"void initializeInputStruct(out VertexInput vsInput, ProcessedAttributes attributes)",FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS:"initializeInputStructFS",FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS:"void initializeInputStruct(out FragmentInput fsInput, ProcessedAttributes attributes)",_oneTimeWarning:r.A,process:function(e,t,n){const{shaderBuilder:r,model:p,alphaOptions:m}=e,{customShader:I}=p,{lightingModel:b,translucencyMode:B}=I;(0,o.A)(b)&&(e.lightingOptions.lightingModel=b),B===g.A.TRANSLUCENT?m.pass=s.A.TRANSLUCENT:B===g.A.OPAQUE&&(m.pass=void 0);const v=function(e,t){const n=function(e){const t={};for(let n=0;n<e.length;n++){const i=h.A.getAttributeInfo(e[n]);t[i.variableName]=i}return t}(t.attributes),i=function(e,t){if(!(0,o.A)(e.vertexShaderText))return{enabled:!1};const n=e.usedVariablesVertex.attributeSet,i=E(t,n,!1),r=y(t,n,!1);let a;const s=[],A=[];for(const e in i){if(!i.hasOwnProperty(e))continue;const t=[i[e].glslType,e];s.push(t),a=`vsInput.attributes.${e} = attributes.${e};`,A.push(a)}for(let e=0;e<r.length;e++){const t=r[e],n=_(t);if(!(0,o.A)(n))return f._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveVS",`Primitive is missing attribute ${t}, disabling custom vertex shader`),{enabled:!1};s.push(n.attributeField),a=`vsInput.attributes.${t} = ${n.value};`,A.push(a)}return{enabled:!0,attributeFields:s,initializationLines:A}}(e,n),r=function(e,t){if(!(0,o.A)(e.fragmentShaderText))return{enabled:!1};const n=e.usedVariablesFragment.attributeSet,i=E(t,n,!0),r=y(t,n,!0);let a;const s=[],A=[];for(const e in i){if(!i.hasOwnProperty(e))continue;const t=[i[e].glslType,e];s.push(t),a=`fsInput.attributes.${e} = attributes.${e};`,A.push(a)}for(let e=0;e<r.length;e++){const t=r[e],n=_(t);if(!(0,o.A)(n))return f._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveFS",`Primitive is missing attribute ${t}, disabling custom fragment shader.`),{enabled:!1};s.push(n.attributeField),a=`fsInput.attributes.${t} = ${n.value};`,A.push(a)}const c=function(e){const t=[],n=[],i=e.usedVariablesFragment.attributeSet;return i.hasOwnProperty("positionWC")&&(t.push(["vec3","positionWC"]),n.push("fsInput.attributes.positionWC = attributes.positionWC;")),i.hasOwnProperty("positionEC")&&(t.push(["vec3","positionEC"]),n.push("fsInput.attributes.positionEC = attributes.positionEC;")),{attributeFields:t,initializationLines:n}}(e);return{enabled:!0,attributeFields:s.concat(c.attributeFields),initializationLines:c.initializationLines.concat(A)}}(e,n),a=e.usedVariablesFragment.attributeSet.hasOwnProperty("positionWC")&&r.enabled;return{vertexLines:i,fragmentLines:r,customShaderEnabled:i.enabled||r.enabled,shouldComputePositionWC:a}}(I,t);if(!v.customShaderEnabled)return;if(function(e,t,n){const{vertexLines:i,fragmentLines:o}=n,r=C;i.enabled&&(function(e,t){let n=f.STRUCT_ID_ATTRIBUTES_VS;e.addStruct(n,f.STRUCT_NAME_ATTRIBUTES,a.A.VERTEX);const{attributeFields:i,initializationLines:o}=t;for(let t=0;t<i.length;t++){const[o,r]=i[t];e.addStructField(n,o,r)}n=f.STRUCT_ID_VERTEX_INPUT,e.addStruct(n,f.STRUCT_NAME_VERTEX_INPUT,a.A.VERTEX),e.addStructField(n,f.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(n,u.A.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(n,d.A.STRUCT_NAME_METADATA,"metadata"),e.addStructField(n,d.A.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(n,d.A.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");const r=f.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS;e.addFunction(r,f.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS,a.A.VERTEX),e.addFunctionLines(r,o)}(e,i),r.length=0,r.push("#line 0",t.vertexShaderText,A.A),e.addVertexLines(r)),o.enabled&&(function(e,t){let n=f.STRUCT_ID_ATTRIBUTES_FS;e.addStruct(n,f.STRUCT_NAME_ATTRIBUTES,a.A.FRAGMENT);const{attributeFields:i,initializationLines:o}=t;for(let t=0;t<i.length;t++){const[o,r]=i[t];e.addStructField(n,o,r)}n=f.STRUCT_ID_FRAGMENT_INPUT,e.addStruct(n,f.STRUCT_NAME_FRAGMENT_INPUT,a.A.FRAGMENT),e.addStructField(n,f.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(n,u.A.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(n,d.A.STRUCT_NAME_METADATA,"metadata"),e.addStructField(n,d.A.STRUCT_NAME_METADATA_CLASS,"metadataClass"),e.addStructField(n,d.A.STRUCT_NAME_METADATA_STATISTICS,"metadataStatistics");const r=f.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS;e.addFunction(r,f.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS,a.A.FRAGMENT),e.addFunctionLines(r,o)}(e,o),r.length=0,r.push("#line 0",t.fragmentShaderText,c.A),e.addFragmentLines(r))}(r,I,v),v.shouldComputePositionWC&&r.addDefine("COMPUTE_POSITION_WC_CUSTOM_SHADER",void 0,a.A.BOTH),(0,o.A)(I.vertexShaderText)&&r.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,a.A.VERTEX),(0,o.A)(I.fragmentShaderText)){r.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,a.A.FRAGMENT);const e=l.A.getDefineName(I.mode);r.addDefine(e,void 0,a.A.FRAGMENT)}const w=I.uniforms;for(const e in w)if(w.hasOwnProperty(e)){const t=w[e];r.addUniform(t.type,e)}const T=I.varyings;for(const e in T)if(T.hasOwnProperty(e)){const t=T[e];r.addVarying(t,e)}e.uniformMap=(0,i.A)(e.uniformMap,I.uniformMap)}},p={position:"vec3",normal:"vec3",tangent:"vec3",bitangent:"vec3",texCoord:"vec2",color:"vec4",joints:"ivec4",weights:"vec4"},m={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec3(1.0, 0.0, 0.0)",bitangent:"vec3(0.0, 1.0, 0.0)",texCoord:"vec2(0.0)",color:"vec4(1.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function _(e){let t=e.replace(/_[0-9]+$/,"");t=t.replace(/(MC|EC)$/,"");const n=p[t],i=m[t];if((0,o.A)(n))return{attributeField:[n,e],value:i}}const I={positionWC:!0,positionEC:!0};function E(e,t,n){const i={};for(const o in e){if(!e.hasOwnProperty(o))continue;const r=e[o];let a=o;n&&"normalMC"===o?a="normalEC":n&&"tangentMC"===o&&(a="tangentEC",r.glslType="vec3"),t.hasOwnProperty(a)&&(i[a]=r)}return i}function y(e,t,n){const i=[];for(const o in t){if(!t.hasOwnProperty(o))continue;if(I.hasOwnProperty(o))continue;let r=o;n&&"normalEC"===o?r="normalMC":n&&"tangentEC"===o&&(r="tangentMC"),e.hasOwnProperty(r)||i.push(o)}return i}const C=[],b=f},747680:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({INHERIT:0,OPAQUE:1,TRANSLUCENT:2})},13916:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(626809),r=n(624512),a=n(471147),s=n(595826);const A={name:"DequantizationPipelineStage",FUNCTION_ID_DEQUANTIZATION_STAGE_VS:"dequantizationStage",FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS:"void dequantizationStage(inout ProcessedAttributes attributes)"};function c(e,t){const n=e.shaderBuilder,i=e.uniformMap,o=t.variableName,a=t.attribute.quantization;if(a.octEncoded){const e=`model_normalizationRange_${o}`;n.addUniform("float",e,r.A.VERTEX),i[e]=function(){return a.normalizationRange}}else{const e=`model_quantizedVolumeOffset_${o}`,s=`model_quantizedVolumeStepSize_${o}`,A=t.glslType;n.addUniform(A,e,r.A.VERTEX),n.addUniform(A,s,r.A.VERTEX);let c=a.quantizedVolumeOffset,u=a.quantizedVolumeStepSize;/^color_\d+$/.test(o)&&(c=l(c,0),u=l(u,1)),i[e]=function(){return c},i[s]=function(){return u}}}function l(e,t){return e instanceof o.A?e:new o.A(e.x,e.y,e.z,t)}function u(e,t){const n=t.variableName,i=t.attribute.quantization;let o;o=i.octEncoded?function(e,t){return`${`attributes.${e}`} = czm_octDecode(${`a_quantized_${e}`}, ${`model_normalizationRange_${e}`})${t.octEncodedZXY?".zxy":".xyz"};`}(n,i):function(e){return`${`attributes.${e}`} = ${`model_quantizedVolumeOffset_${e}`} + ${`a_quantized_${e}`} * ${`model_quantizedVolumeStepSize_${e}`};`}(n),e.addFunctionLines(A.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,[o])}A.process=function(e,t,n){const o=e.shaderBuilder,l=e.model,d=(0,i.A)(l.classificationType);o.addDefine("USE_DEQUANTIZATION",void 0,r.A.VERTEX),o.addFunction(A.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,A.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS,r.A.VERTEX);const h=t.attributes;for(let t=0;t<h.length;t++){const n=h[t],r=n.quantization;if(!(0,i.A)(r))continue;const A=n.semantic===s.A.POSITION,l=n.semantic===s.A.TEXCOORD;if(d&&!A&&!l)continue;const g=a.A.getAttributeInfo(n);u(o,g),c(e,g)}};const d=A},593920:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){i.A.typeOf.object("options.position",e.position),i.A.typeOf.object("options.adjustmentParams",e.adjustmentParams),this._position=e.position,this._adjustmentParams=e.adjustmentParams}Object.defineProperties(o.prototype,{position:{get:function(){return this._position}},adjustmentParams:{get:function(){return this._adjustmentParams}}});const r=o},316923:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){i.A.typeOf.object("options.position",e.position),i.A.typeOf.object("options.adjustmentParams",e.adjustmentParams),i.A.typeOf.object("options.covarianceMatrix",e.covarianceMatrix),this._position=e.position,this._adjustmentParams=e.adjustmentParams,this._covarianceMatrix=e.covarianceMatrix}Object.defineProperties(o.prototype,{position:{get:function(){return this._position}},adjustmentParams:{get:function(){return this._adjustmentParams}},covarianceMatrix:{get:function(){return this._covarianceMatrix}}});const r=o},882209:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){i.A.typeOf.object("options.groupFlags",e.groupFlags),i.A.typeOf.object("options.rotationThetas",e.rotationThetas),i.A.typeOf.object("options.params",e.params),this._groupFlags=e.groupFlags,this._rotationThetas=e.rotationThetas,this._params=e.params}Object.defineProperties(o.prototype,{groupFlags:{get:function(){return this._groupFlags}},rotationThetas:{get:function(){return this._rotationThetas}},params:{get:function(){return this._params}}});const r=o},659282:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(369031),r=n(331185),a=n(123245),s=n(593920),A=n(316923),c=n(882209),l=n(912726),u=n(453056),d=n(844833);function h(){}function g(e){return new r.A(e[0],e[1],e[3],e[1],e[2],e[4],e[3],e[4],e[5])}function f(e){const t=i.A.fromArray(e.position,0,new i.A),n=i.A.fromArray(e.adjustmentParams,0,new i.A);return new s.A({position:t,adjustmentParams:n})}function p(e){const t=i.A.fromArray(e.position,0,new i.A),n=i.A.fromArray(e.adjustmentParams,0,new i.A),o=g(e.covarianceMatrix);return new A.A({position:t,adjustmentParams:n,covarianceMatrix:o})}function m(e){const t=e.groupFlags,n=i.A.fromArray(e.rotationThetas,0,new i.A),o=[];for(const t of e.params){const e=new u.A({A:t.A,alpha:t.alpha,beta:t.beta,T:t.T});o.push(e)}return new c.A({groupFlags:t,rotationThetas:n,params:o})}h.load=function(e){o.A.typeOf.object("gltfGpmLocalJson",e);const t=e.storageType;if(t===d.A.Direct)return h.loadDirect(e);if(t===d.A.Indirect)return h.loadIndirect(e);throw new a.A(`Invalid storage type in NGA_gpm_local - expected 'Direct' or 'Indirect', but found ${t}`)},h.loadDirect=function(e){o.A.typeOf.object("gltfGpmLocalJson",e),o.A.typeOf.object("gltfGpmLocalJson.anchorPointsDirect",e.anchorPointsDirect),o.A.typeOf.object("gltfGpmLocalJson.covarianceDirectUpperTriangle",e.covarianceDirectUpperTriangle);const t=[],n=e.anchorPointsDirect;for(const e of n){const n=f(e);t.push(n)}const i=g(e.covarianceDirectUpperTriangle);return new l.A({storageType:d.A.Direct,anchorPointsDirect:t,covarianceDirect:i})},h.loadIndirect=function(e){o.A.typeOf.object("gltfGpmLocalJson",e),o.A.typeOf.object("gltfGpmLocalJson.anchorPointsIndirect",e.anchorPointsIndirect),o.A.typeOf.object("gltfGpmLocalJson.intraTileCorrelationGroups",e.intraTileCorrelationGroups);const t=[],n=e.anchorPointsIndirect;for(const e of n){const n=p(e);t.push(n)}const i=e.intraTileCorrelationGroups,r=[];for(const e of i){const t=m(e);r.push(t)}return new l.A({storageType:d.A.Indirect,anchorPointsIndirect:t,intraTileCorrelationGroups:r})};const _=h},912726:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(369031),r=n(123245),a=n(844833);function s(e){if(o.A.typeOf.string("options.storageType",e.storageType),this._storageType=e.storageType,this._anchorPointsIndirect=e.anchorPointsIndirect,this._anchorPointsDirect=e.anchorPointsDirect,this._intraTileCorrelationGroups=e.intraTileCorrelationGroups,this._covarianceDirect=e.covarianceDirect,this.storageType===a.A.Indirect){if(!(0,i.A)(this.anchorPointsIndirect))throw new r.A("The anchorPointsIndirect are required for 'Indirect' storage");if(!(0,i.A)(this.intraTileCorrelationGroups))throw new r.A("The intraTileCorrelationGroups are required for 'Indirect' storage");if((0,i.A)(this.anchorPointsDirect))throw new r.A("The anchorPointsDirect must be omitted for 'Indirect' storage");if((0,i.A)(this.covarianceDirect))throw new r.A("The covarianceDirect must be omitted for 'Indirect' storage")}else{if(!(0,i.A)(this.anchorPointsDirect))throw new r.A("The anchorPointsDirect are required for 'Direct' storage");if(!(0,i.A)(this.covarianceDirect))throw new r.A("The covarianceDirect is required for 'Direct' storage");if((0,i.A)(this.anchorPointsIndirect))throw new r.A("The anchorPointsIndirect must be omitted for 'Direct' storage");if((0,i.A)(this.intraTileCorrelationGroups))throw new r.A("The intraTileCorrelationGroups must be omitted for 'Direct' storage")}}Object.defineProperties(s.prototype,{storageType:{get:function(){return this._storageType}},anchorPointsIndirect:{get:function(){return this._anchorPointsIndirect}},anchorPointsDirect:{get:function(){return this._anchorPointsDirect}},intraTileCorrelationGroups:{get:function(){return this._intraTileCorrelationGroups}},covarianceDirect:{get:function(){return this._covarianceDirect}}});const A=s},893828:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(369031),o=n(915325),r=n(491446),a=n(872182),s=n(569445),A=n(48660),c=n(105792),l=n(590732),u=n(4024),d=n(858288),h=n(714574),g=n(47367);function f(e){const t=(e=e??o.A.EMPTY_OBJECT).gltf,n=e.extension,r=e.gltfResource,a=e.baseResource,s=e.supportedImageFormats,c=e.frameState,l=e.cacheKey,u=e.asynchronous??!0;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.extension",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",a),i.A.typeOf.object("options.supportedImageFormats",s),i.A.typeOf.object("options.frameState",c),this._gltfResource=r,this._baseResource=a,this._gltf=t,this._extension=n,this._supportedImageFormats=s,this._frameState=c,this._cacheKey=l,this._asynchronous=u,this._textureLoaders=[],this._textureIds=[],this._meshPrimitiveGpmLocal=void 0,this._structuralMetadata=void 0,this._state=A.A.UNLOADED,this._promise=void 0}(0,r.A)(Object.create)&&(f.prototype=Object.create(s.A.prototype),f.prototype.constructor=f),Object.defineProperties(f.prototype,{cacheKey:{get:function(){return this._cacheKey}},meshPrimitiveGpmLocal:{get:function(){return this._meshPrimitiveGpmLocal}},structuralMetadata:{get:function(){return this._structuralMetadata}}}),f.prototype._loadResources=async function(){try{const e=this._loadTextures();if(await e,this.isDestroyed())return;return this._gltf=void 0,this._state=A.A.LOADED,this}catch(e){if(this.isDestroyed())return;this.unload(),this._state=A.A.FAILED;const t="Failed to load GPM data";throw this.getError(t,e)}},f.prototype.load=function(){return(0,r.A)(this._promise)||(this._state=A.A.LOADING,this._promise=this._loadResources(this)),this._promise},f.prototype._loadTextures=function(){let e;(0,r.A)(this._extension)&&(e=function(e){const t={},n=e.ppeTextures;if((0,r.A)(n))for(let e=0;e<n.length;e++){const i=n[e];t[i.index]=i}return t}(this._extension));const t=this._gltf,n=this._gltfResource,i=this._baseResource,o=this._supportedImageFormats,s=this._frameState,A=this._asynchronous,c=[];for(const r in e)if(e.hasOwnProperty(r)){const l=a.A.getTextureLoader({gltf:t,textureInfo:e[r],gltfResource:n,baseResource:i,supportedImageFormats:o,frameState:s,asynchronous:A});this._textureLoaders.push(l),this._textureIds.push(r),c.push(l.load())}return Promise.all(c)},f.ppeTexturesMetadataSchemaCache=new Map,f._createPpeTextureClassJson=function(e,t){const n=e.traits,i=n.source,o=e.offset??0,r=255*(e.scale??1);return{name:`PPE texture class ${t}`,properties:{[i]:{name:"PPE",type:"SCALAR",componentType:"UINT8",normalized:!0,offset:o,scale:r,min:n.min,max:n.max}}}},f._obtainPpeTexturesMetadataSchema=function(e){const t=f._collectPpeTexturePropertyIdentifiers(e).toString();let n=f.ppeTexturesMetadataSchemaCache.get(t);if((0,r.A)(n))return n;const i={id:`PPE_TEXTURE_SCHEMA_${f.ppeTexturesMetadataSchemaCache.size}`,classes:{}},o=e.ppeTextures;for(let e=0;e<o.length;e++){const t=o[e],n=`ppeTexture_${e}`,r=f._createPpeTextureClassJson(t,e);i.classes[n]=r}return n=u.A.fromJson(i),f.ppeTexturesMetadataSchemaCache.set(t,n),n},f._collectPpeTexturePropertyIdentifiers=function(e){const t=[],n=e.ppeTextures;for(let e=0;e<n.length;e++){const i=n[e],o=f._createPpeTextureClassJson(i,e),r=JSON.stringify(o);t.push(r)}return t},f._convertToStructuralMetadata=function(e,t){const n=[],i=f._obtainPpeTexturesMetadataSchema(e),o=e.ppeTextures;for(let e=0;e<o.length;e++){const r=o[e],a=`ppeTexture_${e}`,s=r.traits.source,A=i.classes[a],l={class:a,properties:{[s]:{index:r.index,texCoord:r.texCoord}}};n.push(new c.A({id:e,name:r.name,propertyTexture:l,class:A,textures:t}))}return new l.A({schema:i,propertyTables:[],propertyTextures:n,propertyAttributes:[]})},f.prototype.process=function(e){if(i.A.typeOf.object("frameState",e),this._state===A.A.READY)return!0;if(this._state!==A.A.LOADED)return!1;const t=this._textureLoaders,n=t.length;let o=!0;for(let i=0;i<n;++i){const n=t[i].process(e);o=o&&n}if(!o)return!1;const a={};for(let e=0;e<this._textureIds.length;++e){const n=this._textureIds[e],i=t[e];i.isDestroyed()||(a[n]=i.texture)}const s=[],c=this._extension;if((0,r.A)(c.ppeTextures)){const e=c.ppeTextures;for(const t of e){const e=t.traits,n=new h.A({min:e.min,max:e.max,source:e.source}),i=new d.A({traits:n,noData:t.noData,offset:t.offset,scale:t.scale,index:t.index,texCoord:t.texCoord});s.push(i)}}const l=new g.A(s);this._meshPrimitiveGpmLocal=l;const u=f._convertToStructuralMetadata(l,a);return this._structuralMetadata=u,this._state=A.A.READY,!0},f.prototype._unloadTextures=function(){const e=this._textureLoaders,t=e.length;for(let n=0;n<t;++n)a.A.unload(e[n]);this._textureLoaders.length=0,this._textureIds.length=0},f.prototype.unload=function(){this._unloadTextures(),this._gltf=void 0,this._extension=void 0,this._structuralMetadata=void 0};const p=f},47367:(e,t,n)=>{"use strict";function i(e){this._ppeTextures=e}n.d(t,{A:()=>o}),Object.defineProperties(i.prototype,{ppeTextures:{get:function(){return this._ppeTextures}}});const o=i},714574:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){i.A.typeOf.string("options.source",e.source),this._min=e.min,this._max=e.max,this._source=e.source}Object.defineProperties(o.prototype,{min:{get:function(){return this._min}},max:{get:function(){return this._max}},source:{get:function(){return this._source}}});const r=o},858288:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){i.A.typeOf.object("options.traits",e.traits),i.A.typeOf.number.greaterThanOrEquals("options.index",e.index,0),this._traits=e.traits,this._noData=e.noData,this._offset=e.offset,this._scale=e.scale,this._index=e.index,this._texCoord=e.texCoord}Object.defineProperties(o.prototype,{traits:{get:function(){return this._traits}},noData:{get:function(){return this._noData}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},index:{get:function(){return this._index}},texCoord:{get:function(){return this._texCoord}}});const r=o},453056:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031);function o(e){i.A.typeOf.number.greaterThan("options.A",e.A,0),i.A.typeOf.number.lessThanOrEquals("options.A",e.A,1),i.A.typeOf.number.greaterThanOrEquals("options.alpha",e.alpha,0),i.A.typeOf.number.lessThan("options.alpha",e.alpha,1),i.A.typeOf.number.greaterThanOrEquals("options.beta",e.beta,0),i.A.typeOf.number.lessThanOrEquals("options.beta",e.beta,10),i.A.typeOf.number.greaterThan("options.T",e.T,0),this._A=e.A,this._alpha=e.alpha,this._beta=e.beta,this._T=e.T}Object.defineProperties(o.prototype,{A:{get:function(){return this._A}},alpha:{get:function(){return this._alpha}},beta:{get:function(){return this._beta}},T:{get:function(){return this._T}}});const r=o},844833:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({Direct:"Direct",Indirect:"Indirect"})},598073:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(571804),o=n(491446),r=n(624512),a=n(641613),s=n(442790),A=n(625322),c=n(204410),l=n(995537),u=n(595826),d=n(471147),h=n(331185);const g={name:"FeatureIdPipelineStage",STRUCT_ID_FEATURE_IDS_VS:"FeatureIdsVS",STRUCT_ID_FEATURE_IDS_FS:"FeatureIdsFS",STRUCT_NAME_FEATURE_IDS:"FeatureIds",FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS:"initializeFeatureIdsVS",FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS:"initializeFeatureIdsFS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS:"initializeFeatureIdAliasesVS",FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS:"initializeFeatureIdAliasesFS",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS:"void initializeFeatureIds(out FeatureIds featureIds, ProcessedAttributes attributes)",FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES:"void initializeFeatureIdAliases(inout FeatureIds featureIds)",FUNCTION_ID_SET_FEATURE_ID_VARYINGS:"setFeatureIdVaryings",FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS:"void setFeatureIdVaryings()"};function f(e,t,n){const i=e.shaderBuilder;i.addStructField(g.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(g.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=`a_${r}${o}`,s=`v_${r}${o}`,A=`featureIds.${n} = int(czm_round(${a}));`,c=`featureIds.${n} = int(czm_round(${s}));`;i.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[A]),i.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[c]),i.addVarying("float",s),i.addFunctionLines(g.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${s} = ${a};`])}function p(e,t,n){const i=e.shaderBuilder;i.addStructField(g.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(g.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=[`featureIds.${n} = int(czm_round(attributes.${r}${o}));`];i.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,a),i.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,a)}function m(e,t,n,r,A,c){!function(e,t,n,r,A){const c=e.model;let l,u;if((0,o.A)(t.repeat)){const e=function(e,t){const n=e.offset,i=e.repeat,o=new Float32Array(t);for(let e=0;e<t;e++)o[e]=n+Math.floor(e/i);return o}(t,n);l=a.A.createVertexBuffer({context:A.context,typedArray:e,usage:s.A.STATIC_DRAW}),l.vertexArrayDestroyable=!1,c._pipelineResources.push(l);const i=!1;c.statistics.addBuffer(l,i)}else u=[t.offset];const d={index:e.attributeIndex++,instanceDivisor:r,value:u,vertexBuffer:l,normalize:!1,componentsPerAttribute:1,componentDatatype:i.A.FLOAT,strideInBytes:i.A.getSizeInBytes(i.A.FLOAT),offsetInBytes:0};e.attributes.push(d)}(e,t,r,A,c);const l=e.shaderBuilder,u=`a_implicit_${n}`;l.addAttribute("float",u);const d=`v_implicit_${n}`;l.addVarying("float",d),l.addStructField(g.STRUCT_ID_FEATURE_IDS_VS,"int",n),l.addStructField(g.STRUCT_ID_FEATURE_IDS_FS,"int",n),l.addFunctionLines(g.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${d} = ${u};`]),l.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[`featureIds.${n} = int(czm_round(${u}));`]),l.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[`featureIds.${n} = int(czm_round(${d}));`])}function _(e,t,n,i,a){const s=`u_featureIdTexture_${i}`,A=e.uniformMap,c=t.textureReader;A[s]=function(){return c.texture??a.context.defaultTexture};const l=c.channels,u=e.shaderBuilder;u.addStructField(g.STRUCT_ID_FEATURE_IDS_FS,"int",n),u.addUniform("sampler2D",s,r.A.FRAGMENT);const d=`v_texCoord_${c.texCoord}`;let f=d;const p=c.transform;if((0,o.A)(p)&&!h.A.equals(p,h.A.IDENTITY)){const e=`${s}Transform`;u.addUniform("mat3",e,r.A.FRAGMENT),A[e]=function(){return p},f=`vec2(${e} * vec3(${d}, 1.0))`}const m=`featureIds.${n} = czm_unpackUint(texture(${s}, ${f}).${l});`;u.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[m])}function I(e,t,n,i){const o=e.shaderBuilder,a=r.A.includesVertexShader(i);a&&o.addStructField(g.STRUCT_ID_FEATURE_IDS_VS,"int",n),o.addStructField(g.STRUCT_ID_FEATURE_IDS_FS,"int",n);const s=[`featureIds.${n} = featureIds.${t};`];a&&o.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,s),o.addFunctionLines(g.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,s)}g.process=function(e,t,n){const i=e.shaderBuilder;!function(e){e.addStruct(g.STRUCT_ID_FEATURE_IDS_VS,g.STRUCT_NAME_FEATURE_IDS,r.A.VERTEX),e.addStruct(g.STRUCT_ID_FEATURE_IDS_FS,g.STRUCT_NAME_FEATURE_IDS,r.A.FRAGMENT),e.addFunction(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,g.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,r.A.VERTEX),e.addFunction(g.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,g.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,r.A.FRAGMENT),e.addFunction(g.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,g.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,r.A.VERTEX),e.addFunction(g.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,g.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,r.A.FRAGMENT),e.addFunction(g.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,g.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS,r.A.VERTEX)}(i);const a=e.runtimeNode.node.instances;(0,o.A)(a)&&function(e,t,n){const i=t.featureIds,a=t.attributes[0].count;for(let t=0;t<i.length;t++){const s=i[t],A=s.positionalLabel;s instanceof l.A.FeatureIdAttribute?f(e,s,A):m(e,s,A,a,1,n);const c=s.label;(0,o.A)(c)&&I(e,A,c,r.A.BOTH)}}(e,a,n),function(e,t,n){const i=t.featureIds,a=d.A.getAttributeBySemantic(t,u.A.POSITION).count;for(let t=0;t<i.length;t++){const s=i[t],A=s.positionalLabel;let c=r.A.BOTH;s instanceof l.A.FeatureIdAttribute?p(e,s,A):s instanceof l.A.FeatureIdImplicitRange?m(e,s,A,a,void 0,n):(_(e,s,A,t,n),c=r.A.FRAGMENT);const u=s.label;(0,o.A)(u)&&I(e,A,u,c)}}(e,t,n),i.addVertexLines(c.A),i.addFragmentLines(A.A)};const E=g},66502:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var i=n(267980),o=n(369031),r=n(571804),a=n(915325),s=n(491446),A=n(610750),c=n(874915),l=n(584164),u=n(402330),d=n(123245),h=n(543622),g=n(730839),f=n(784749),p=n(4024),m=n(995537),_=n(287659),I=n(569445),E=n(590732),y=n(595826),C=n(641613),b=n(442790),B=n(702247);function v(e){e=e??a.A.EMPTY_OBJECT,o.A.typeOf.object("options.geoJson",e.geoJson),this._geoJson=e.geoJson,this._components=void 0}function w(){this.lines=void 0,this.points=void 0,this.properties=void 0}function T(){this.features=[]}function S(e){const t=e[0],n=e[1],o=e[2]??0;return new i.A(t,n,o)}function x(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=S(e[i]);return[n]}function D(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=x(e[i])[0];return n}(0,s.A)(Object.create)&&(v.prototype=Object.create(I.A.prototype),v.prototype.constructor=v),Object.defineProperties(v.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),v.prototype.load=function(){return Promise.resolve(this)},v.prototype.process=function(e){return o.A.typeOf.object("frameState",e),(0,s.A)(this._components)||(this._components=function(e,t){const n=new T,o=M[e.type];(0,s.A)(o)&&o(e,n);const I=n.features,B=I.length;if(0===B)throw new d.A("GeoJSON must have at least one feature");const v={};for(let e=0;e<B;e++){const t=I[e].properties??a.A.EMPTY_OBJECT;for(const e in t)t.hasOwnProperty(e)&&((0,s.A)(v[e])||(v[e]=new Array(B)))}for(let e=0;e<B;e++){const t=I[e];for(const n in v)if(v.hasOwnProperty(n)){const i=t.properties[n]??"";v[n][e]=i}}const w=new f.A({count:B,properties:v}),S=[new _.A({id:0,count:B,jsonMetadataTable:w})],x=p.A.fromJson({}),D=new E.A({schema:x,propertyTables:S}),Q=new i.A(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),N=new i.A(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let R=!1,P=!1;for(let e=0;e<B;e++){const t=I[e];if((0,s.A)(t.lines)){R=!0;const e=t.lines.length;for(let n=0;n<e;n++){const e=t.lines[n],o=e.length;for(let t=0;t<o;t++)i.A.minimumByComponent(Q,e[t],Q),i.A.maximumByComponent(N,e[t],N)}}if((0,s.A)(t.points)){P=!0;const e=t.points.length;for(let n=0;n<e;n++){const e=t.points[n];i.A.minimumByComponent(Q,e,Q),i.A.maximumByComponent(N,e,N)}}}const O=i.A.midpoint(Q,N,new i.A),F=i.A.fromDegrees(O.x,O.y,O.z,A.A.WGS84,new i.A),U=h.A.eastNorthUpToFixedFrame(F,A.A.WGS84,new l.A),k=l.A.inverseTransformation(U,new l.A),G=[];R&&G.push(function(e,t,n){let o=0,a=0;const d=e.length;for(let t=0;t<d;t++){const n=e[t];if((0,s.A)(n.lines)){const e=n.lines.length;for(let t=0;t<e;t++){const e=n.lines[t];o+=e.length,a+=2*(e.length-1)}}}const h=new Float32Array(3*o),f=new Float32Array(o),p=c.A.createTypedArray(o,a),_=c.A.fromTypedArray(p),I=new i.A(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),E=new i.A(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let B=0,v=0;for(let n=0;n<d;n++){const o=e[n];if(!(0,s.A)(o.lines))continue;const r=o.lines.length;for(let e=0;e<r;e++){const r=o.lines[e],a=r.length;for(let e=0;e<a;e++){const o=r[e],s=i.A.fromDegrees(o.x,o.y,o.z,A.A.WGS84,L),c=l.A.multiplyByPoint(t,s,L);i.A.minimumByComponent(I,c,I),i.A.maximumByComponent(E,c,E),i.A.pack(c,h,3*B),f[B]=n,e<a-1&&(p[2*v]=B,p[2*v+1]=B+1,v++),B++}}}const w=C.A.createVertexBuffer({typedArray:h,context:n.context,usage:b.A.STATIC_DRAW});w.vertexArrayDestroyable=!1;const T=C.A.createVertexBuffer({typedArray:f,context:n.context,usage:b.A.STATIC_DRAW});T.vertexArrayDestroyable=!1;const S=C.A.createIndexBuffer({typedArray:p,context:n.context,usage:b.A.STATIC_DRAW,indexDatatype:_});S.vertexArrayDestroyable=!1;const x=new m.A.Attribute;x.semantic=y.A.POSITION,x.componentDatatype=r.A.FLOAT,x.type=g.A.VEC3,x.count=o,x.min=I,x.max=E,x.buffer=w;const D=new m.A.Attribute;D.semantic=y.A.FEATURE_ID,D.setIndex=0,D.componentDatatype=r.A.FLOAT,D.type=g.A.SCALAR,D.count=o,D.buffer=T;const Q=[x,D],N=new m.A.Material;N.unlit=!0;const R=new m.A.Indices;R.indexDatatype=_,R.count=p.length,R.buffer=S;const M=new m.A.FeatureIdAttribute;M.featureCount=d,M.propertyTableId=0,M.setIndex=0,M.positionalLabel="featureId_0";const P=[M],O=new m.A.Primitive;return O.attributes=Q,O.indices=R,O.featureIds=P,O.primitiveType=u.A.LINES,O.material=N,O}(I,k,t)),P&&G.push(function(e,t,n){let o=0;const a=e.length;for(let t=0;t<a;t++){const n=e[t];(0,s.A)(n.points)&&(o+=n.points.length)}const c=new Float32Array(3*o),d=new Float32Array(o),h=new i.A(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new i.A(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let p=0;for(let n=0;n<a;n++){const o=e[n];if(!(0,s.A)(o.points))continue;const r=o.points.length;for(let e=0;e<r;e++){const r=o.points[e],a=i.A.fromDegrees(r.x,r.y,r.z,A.A.WGS84,L),s=l.A.multiplyByPoint(t,a,L);i.A.minimumByComponent(h,s,h),i.A.maximumByComponent(f,s,f),i.A.pack(s,c,3*p),d[p]=n,p++}}const _=C.A.createVertexBuffer({typedArray:c,context:n.context,usage:b.A.STATIC_DRAW});_.vertexArrayDestroyable=!1;const I=C.A.createVertexBuffer({typedArray:d,context:n.context,usage:b.A.STATIC_DRAW});I.vertexArrayDestroyable=!1;const E=new m.A.Attribute;E.semantic=y.A.POSITION,E.componentDatatype=r.A.FLOAT,E.type=g.A.VEC3,E.count=o,E.min=h,E.max=f,E.buffer=_;const B=new m.A.Attribute;B.semantic=y.A.FEATURE_ID,B.setIndex=0,B.componentDatatype=r.A.FLOAT,B.type=g.A.SCALAR,B.count=o,B.buffer=I;const v=[E,B],w=new m.A.Material;w.unlit=!0;const T=new m.A.FeatureIdAttribute;T.featureCount=a,T.propertyTableId=0,T.setIndex=0,T.positionalLabel="featureId_0";const S=[T],x=new m.A.Primitive;return x.attributes=v,x.featureIds=S,x.primitiveType=u.A.POINTS,x.material=w,x}(I,k,t));const H=new m.A.Node;H.index=0,H.primitives=G;const V=[H],z=new m.A.Scene;z.nodes=V;const j=new m.A.Components;return j.scene=z,j.nodes=V,j.transform=U,j.structuralMetadata=D,j}(this._geoJson,e),this._geoJson=void 0),!0};const Q={LineString:x,MultiLineString:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=x(e[i])[0];return n},MultiPolygon:function(e){const t=e.length,n=[];for(let i=0;i<t;i++){const t=D(e[i]);(0,B.A)(n,t)}return n},Polygon:D,MultiPoint:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=S(e[i]);return n},Point:function(e){return[S(e)]}},N={LineString:u.A.LINES,MultiLineString:u.A.LINES,MultiPolygon:u.A.LINES,Polygon:u.A.LINES,MultiPoint:u.A.POINTS,Point:u.A.POINTS};function R(e,t){if(!(0,s.A)(e.geometry))return;const n=e.geometry.type,i=Q[n],o=N[n],r=e.geometry.coordinates;if(!(0,s.A)(i))return;if(!(0,s.A)(r))return;const a=new w;o===u.A.LINES?a.lines=i(r):o===u.A.POINTS&&(a.points=i(r)),a.properties=e.properties,t.features.push(a)}const M={FeatureCollection:function(e,t){const n=e.features,i=n.length;for(let e=0;e<i;e++)R(n[e],t)},Feature:R},L=new i.A;v.prototype.unload=function(){this._components=void 0};const P=v},320578:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(571804),o=n(491446),r=n(605971),a=n(402330),s=n(624512),A=n(896077),c=n(575581),l=n(730839),u=n(62467),d=n(226827),h=n(471147),g=n(391852),f=n(595826);const p={name:"GeometryPipelineStage",STRUCT_ID_PROCESSED_ATTRIBUTES_VS:"ProcessedAttributesVS",STRUCT_ID_PROCESSED_ATTRIBUTES_FS:"ProcessedAttributesFS",STRUCT_NAME_PROCESSED_ATTRIBUTES:"ProcessedAttributes",FUNCTION_ID_INITIALIZE_ATTRIBUTES:"initializeAttributes",FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES:"void initializeAttributes(out ProcessedAttributes attributes)",FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS:"setDynamicVaryingsVS",FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS:"setDynamicVaryingsFS",FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS:"void setDynamicVaryings(inout ProcessedAttributes attributes)"};function m(e,t,n,r,a,s){const A=e.shaderBuilder,c=h.A.getAttributeInfo(t),u=a&&!s;r>1?function(e,t,n,r){const{quantization:a,normalized:s}=t,{type:A,componentDatatype:c}=(0,o.A)(a)?a:t,u=l.A.getNumberOfComponents(A)/r,d=u*i.A.getSizeInBytes(c),h=t.byteStride;for(let i=0;i<r;i++){const o=t.byteOffset+i*d,r={index:n+i,vertexBuffer:t.buffer,componentsPerAttribute:u,componentDatatype:c,offsetInBytes:o,strideInBytes:h,normalize:s};e.attributes.push(r)}}(e,t,n,r):function(e,t,n,r){const{quantization:a,semantic:s,setIndex:A}=t,{type:c,componentDatatype:u}=(0,o.A)(a)?a:t;s===f.A.FEATURE_ID&&A>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=A+1);const d=s===f.A.POSITION,h=d?0:n,g=l.A.getNumberOfComponents(c),p={index:h,value:(0,o.A)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:g,componentDatatype:u,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(e.attributes.push(p),!d||!r)return;const m={index:n,vertexBuffer:e.runtimePrimitive.positionBuffer2D,count:t.count,componentsPerAttribute:g,componentDatatype:i.A.FLOAT,offsetInBytes:0,strideInBytes:void 0,normalize:t.normalized};e.attributes.push(m)}(e,t,n,u),function(e,t,n){const i=t.attribute.semantic,o=t.variableName;let r,a;t.isQuantized?(r=`a_quantized_${o}`,a=t.quantizedGlslType):(r=`a_${o}`,a=t.glslType);const s=i===f.A.POSITION;s?e.setPositionAttribute(a,r):e.addAttribute(a,r),s&&n&&e.addAttribute("vec3","a_position2D")}(A,c,u),function(e,t){const n=t.variableName;let i,o=`v_${n}`;"normalMC"===n?(o="v_normalEC",i=t.glslType):"tangentMC"===n?(i="vec3",o="v_tangentEC"):i=t.glslType,e.addVarying(i,o)}(A,c),(0,o.A)(t.semantic)&&function(e,t){const{semantic:n,setIndex:i}=t;switch(n){case f.A.NORMAL:e.addDefine("HAS_NORMALS");break;case f.A.TANGENT:e.addDefine("HAS_TANGENTS");break;case f.A.FEATURE_ID:e.addDefine(`HAS${n}_${i}`);break;case f.A.TEXCOORD:case f.A.COLOR:e.addDefine(`HAS_${n}_${i}`)}}(A,t),function(e,t,n){const i=p.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,o=p.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,{variableName:r,glslType:a}=t;"tangentMC"===r?(e.addStructField(i,"vec3","tangentMC"),e.addStructField(i,"float","tangentSignMC"),e.addStructField(o,"vec3","tangentEC")):"normalMC"===r?(e.addStructField(i,"vec3","normalMC"),e.addStructField(o,"vec3","normalEC")):(e.addStructField(i,a,r),e.addStructField(o,a,r)),"positionMC"===r&&n&&e.addStructField(i,"vec3","position2D")}(A,c,a),function(e,t,n){const i=p.FUNCTION_ID_INITIALIZE_ATTRIBUTES,o=t.variableName;if("positionMC"===o&&n){const t="attributes.position2D = a_position2D;";e.addFunctionLines(i,[t])}if(t.isQuantized)return;const r=[];"tangentMC"===o?(r.push("attributes.tangentMC = a_tangentMC.xyz;"),r.push("attributes.tangentSignMC = a_tangentMC.w;")):r.push(`attributes.${o} = a_${o};`),e.addFunctionLines(i,r)}(A,c,u),function(e,t){const{semantic:n,setIndex:i}=t.attribute;if((0,o.A)(n)&&!(0,o.A)(i))return;let r=p.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS;const a=t.variableName;let s=`v_${a} = attributes.${a};`;e.addFunctionLines(r,[s]),r=p.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,s=`attributes.${a} = v_${a};`,e.addFunctionLines(r,[s])}(A,c)}p.process=function(e,t,n){const{shaderBuilder:i,model:h}=e;i.addStruct(p.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"ProcessedAttributes",s.A.VERTEX),i.addStruct(p.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"ProcessedAttributes",s.A.FRAGMENT),i.addStruct(g.A.STRUCT_ID_SELECTED_FEATURE,g.A.STRUCT_NAME_SELECTED_FEATURE,s.A.BOTH),i.addFunction(p.FUNCTION_ID_INITIALIZE_ATTRIBUTES,p.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES,s.A.VERTEX),i.addVarying("vec3","v_positionWC"),i.addVarying("vec3","v_positionEC"),i.addStructField(p.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionWC"),i.addStructField(p.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionEC"),i.addFunction(p.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,p.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,s.A.VERTEX),i.addFunction(p.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,p.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,s.A.FRAGMENT),h.type===d.A.TILE_PNTS&&i.addDefine("HAS_SRGB_COLOR",void 0,s.A.FRAGMENT);const _=n.mode!==u.A.SCENE3D&&!n.scene3DOnly&&h._projectTo2D,I=(0,o.A)(e.runtimeNode.node.instances),E=_&&!I,y=t.attributes.length;for(let n=0;n<y;n++){const i=t.attributes[n],a=l.A.getAttributeLocationCount(i.type);if(!(0,o.A)(i.buffer)&&!(0,o.A)(i.constant))throw new r.A("Attributes must be provided as a Buffer or constant value");const s=i.semantic===f.A.POSITION;let A;a>1?(A=e.attributeIndex,e.attributeIndex+=a):A=s&&!E?0:e.attributeIndex++,m(e,i,A,a,_,I)}!function(e,t){let n=!1,i=!1;for(let e=0;e<t.length;e++){const o=t[e];o.semantic===f.A.NORMAL?n=!0:o.semantic===f.A.TANGENT&&(i=!0)}n&&i&&(e.addDefine("HAS_BITANGENTS"),e.addVarying("vec3","v_bitangentEC"),e.addStructField(p.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"vec3","bitangentMC"),e.addStructField(p.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","bitangentEC"))}(i,t.attributes),t.primitiveType===a.A.POINTS&&i.addDefine("PRIMITIVE_TYPE_POINTS"),i.addVertexLines(c.A),i.addFragmentLines(A.A)};const _=p},521032:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(961645),o=n(660662),r=n(267980),a=n(369031),s=n(376758),A=n(571804),c=n(915325),l=n(491446),u=n(610750),d=n(241839),h=n(331185),g=n(584164),f=n(99479),p=n(123245),m=n(543622),_=n(641613),I=n(442790),E=n(730839),y=n(320475),C=n(468741),b=n(982504),B=n(866857),v=n(680278),w=n(32335),T=n(995537),S=n(115959),x=n(287659),D=n(569445),Q=n(590732);const N=T.A.Attribute,R=T.A.FeatureIdAttribute,M=T.A.Instances;function L(e){const t=(e=e??c.A.EMPTY_OBJECT).i3dmResource,n=e.arrayBuffer;let i=e.baseResource;const o=e.byteOffset??0,r=e.releaseGltfJson??!1,s=e.asynchronous??!0,A=e.incrementallyLoadTextures??!0,u=e.upAxis??y.A.Y,d=e.forwardAxis??y.A.X,h=e.loadAttributesAsTypedArray??!1,f=e.loadIndicesForWireframe??!1,p=e.loadPrimitiveOutline??!0,m=e.enablePick??!1;a.A.typeOf.object("options.i3dmResource",t),a.A.typeOf.object("options.arrayBuffer",n),i=(0,l.A)(i)?i:t.clone(),this._i3dmResource=t,this._baseResource=i,this._arrayBuffer=n,this._byteOffset=o,this._releaseGltfJson=r,this._asynchronous=s,this._incrementallyLoadTextures=A,this._upAxis=u,this._forwardAxis=d,this._loadAttributesAsTypedArray=h,this._loadIndicesForWireframe=f,this._loadPrimitiveOutline=p,this._enablePick=m,this._state=0,this._promise=void 0,this._gltfLoader=void 0,this._buffers=[],this._components=void 0,this._transform=g.A.IDENTITY,this._batchTable=void 0,this._featureTable=void 0,this._instancesLength=0}(0,l.A)(Object.create)&&(L.prototype=Object.create(D.A.prototype),L.prototype.constructor=L),Object.defineProperties(L.prototype,{texturesLoaded:{get:function(){return this._gltfLoader?.texturesLoaded}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),L.prototype.load=function(){if((0,l.A)(this._promise))return this._promise;const e=v.A.parse(this._arrayBuffer,this._byteOffset),t=e.featureTableJson,n=e.featureTableBinary,i=e.batchTableJson,o=e.batchTableBinary,a=e.gltfFormat,s=new C.A(t,n);this._featureTable=s;const c=s.getGlobalProperty("INSTANCES_LENGTH");if(s.featuresLength=c,!(0,l.A)(c))throw new p.A("Feature table global property: INSTANCES_LENGTH must be defined");this._instancesLength=c;const u=s.getGlobalProperty("RTC_CENTER",A.A.FLOAT,3);(0,l.A)(u)&&(this._transform=g.A.fromTranslation(r.A.fromArray(u))),this._batchTable={json:i,binary:o};const h={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(0===a){let t=(0,d.A)(e.gltf);t=t.replace(/[\s\0]+$/,"");const n=this._baseResource.getDerivedResource({url:t});h.gltfResource=n,h.baseResource=n}else h.gltfResource=this._i3dmResource,h.typedArray=e.gltf;const f=new b.A(h);return this._gltfLoader=f,this._state=1,this._promise=f.load().then(()=>{if(!this.isDestroyed())return this._state=2,this}).catch(e=>{if(!this.isDestroyed())throw function(e,t){e.unload(),e._state=5;return e.getError("Failed to load i3dm",t)}(this,e)}),this._promise},L.prototype.process=function(e){if(a.A.typeOf.object("frameState",e),4===this._state)return!0;const t=this._gltfLoader;let n=!1;if(2===this._state&&(n=t.process(e)),!n)return!1;const i=t.components;return i.transform=g.A.multiplyTransformation(this._transform,i.transform,i.transform),function(e,t,n){let i;const a=e._featureTable,s=e._instancesLength;if(0===s)return;const c=a.getGlobalProperty("RTC_CENTER",A.A.FLOAT,3),u=a.getGlobalProperty("EAST_NORTH_UP"),d=a.hasProperty("NORMAL_UP")||a.hasProperty("NORMAL_UP_OCT32P")||u,m=a.hasProperty("SCALE")||a.hasProperty("SCALE_NON_UNIFORM"),y=function(e){if(e.hasProperty("POSITION"))return e.getPropertyArray("POSITION",A.A.FLOAT,3);if(e.hasProperty("POSITION_QUANTIZED")){const t=e.getPropertyArray("POSITION_QUANTIZED",A.A.UNSIGNED_SHORT,3),n=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",A.A.FLOAT,3);if(!(0,l.A)(n))throw new p.A("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",A.A.FLOAT,3);if(!(0,l.A)(i))throw new p.A("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=new Float32Array(t.length);for(let e=0;e<t.length/3;e++)for(let r=0;r<3;r++){const a=3*e+r;o[a]=t[a]/65535*i[r]+n[r]}return o}throw new p.A("Either POSITION or POSITION_QUANTIZED must be defined for each instance.")}(a);let C,b;d&&(C=new Float32Array(4*s)),m&&(b=new Float32Array(3*s));const v=new Float32Array(s),w=r.A.unpackArray(y);let T=new r.A;const S=new r.A,x=new r.A,D=new r.A,Q=new h.A,L=new f.A,O=new Array(4),k=new r.A,V=new Array(3),z=new g.A;if(!(0,l.A)(c)||r.A.equals(r.A.unpack(c),r.A.ZERO)){const e=o.A.fromPoints(w);for(i=0;i<w.length;i++)r.A.subtract(w[i],e.center,P),y[3*i+0]=P.x,y[3*i+1]=P.y,y[3*i+2]=P.z;const n=g.A.fromTranslation(e.center,F);t.transform=g.A.multiplyTransformation(n,t.transform,t.transform)}for(i=0;i<s;i++){T=r.A.clone(w[i]),(0,l.A)(c)&&r.A.add(T,r.A.unpack(c),T),d&&(G(a,u,i,L,T,x,S,D,Q,z),f.A.pack(L,O,0),C[4*i+0]=O[0],C[4*i+1]=O[1],C[4*i+2]=O[2],C[4*i+3]=O[3]),m&&(H(a,i,k),r.A.pack(k,V,0),b[3*i+0]=V[0],b[3*i+1]=V[1],b[3*i+2]=V[2]);let e=a.getProperty("BATCH_ID",A.A.UNSIGNED_SHORT,1,i);(0,l.A)(e)||(e=i),v[i]=e}const j=new M;j.transformInWorldSpace=!0;const Y=e._buffers,q=new N;if(q.name="Instance Translation",q.semantic=B.A.TRANSLATION,q.componentDatatype=A.A.FLOAT,q.type=E.A.VEC3,q.count=s,q.typedArray=y,!d){const e=_.A.createVertexBuffer({context:n.context,typedArray:y,usage:I.A.STATIC_DRAW});e.vertexArrayDestroyable=!1,Y.push(e),q.buffer=e}if(j.attributes.push(q),d){const e=new N;e.name="Instance Rotation",e.semantic=B.A.ROTATION,e.componentDatatype=A.A.FLOAT,e.type=E.A.VEC4,e.count=s,e.typedArray=C,j.attributes.push(e)}if(m){const e=new N;if(e.name="Instance Scale",e.semantic=B.A.SCALE,e.componentDatatype=A.A.FLOAT,e.type=E.A.VEC3,e.count=s,d)e.typedArray=b;else{const t=_.A.createVertexBuffer({context:n.context,typedArray:b,usage:I.A.STATIC_DRAW});t.vertexArrayDestroyable=!1,Y.push(t),e.buffer=t}j.attributes.push(e)}const W=new N;W.name="Instance Feature ID",W.setIndex=0,W.semantic=B.A.FEATURE_ID,W.componentDatatype=A.A.FLOAT,W.type=E.A.SCALAR,W.count=s;const J=_.A.createVertexBuffer({context:n.context,typedArray:v,usage:I.A.STATIC_DRAW});J.vertexArrayDestroyable=!1,Y.push(J),W.buffer=J,j.attributes.push(W);const K=new R;K.propertyTableId=0,K.setIndex=0,K.positionalLabel="instanceFeatureId_0",j.featureIds.push(K);const X=t.nodes,Z=X.length;let $=!1;for(i=0;i<Z;i++){const e=X[i];e.primitives.length>0&&(e.instances=$?U(j):j,$=!0)}}(this,i,e),function(e,t){const n=e._batchTable,i=e._instancesLength;if(0===i)return;let o;if((0,l.A)(n.json))o=(0,S.A)({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new x.A({name:w.A.BATCH_TABLE_CLASS_NAME,count:i});o=new Q.A({schema:{},propertyTables:[e]})}t.structuralMetadata=o}(this,i),this._components=i,this._arrayBuffer=void 0,this._state=4,!0};const P=new r.A,O=new Array(4),F=new g.A;function U(e){const t=new M;t.transformInWorldSpace=e.transformInWorldSpace;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=(0,s.A)(n[e],!1);t.attributes.push(i)}return t.featureIds=e.featureIds,t}const k=new Array(4);function G(e,t,n,o,a,s,c,d,_,I){const E=e.getProperty("NORMAL_UP",A.A.FLOAT,3,n,O),y=e.getProperty("NORMAL_RIGHT",A.A.FLOAT,3,n,k);let C=!1;if((0,l.A)(E)){if(!(0,l.A)(y))throw new p.A("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");r.A.unpack(E,0,s),r.A.unpack(y,0,c),C=!0}else{const o=e.getProperty("NORMAL_UP_OCT32P",A.A.UNSIGNED_SHORT,2,n,O),r=e.getProperty("NORMAL_RIGHT_OCT32P",A.A.UNSIGNED_SHORT,2,n,k);if((0,l.A)(o)){if(!(0,l.A)(r))throw new p.A("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");i.A.octDecodeInRange(o[0],o[1],65535,s),i.A.octDecodeInRange(r[0],r[1],65535,c),C=!0}else t?(m.A.eastNorthUpToFixedFrame(a,u.A.WGS84,I),g.A.getMatrix3(I,_)):h.A.clone(h.A.IDENTITY,_)}C&&(r.A.cross(c,s,d),r.A.normalize(d,d),h.A.setColumn(_,0,c,_),h.A.setColumn(_,1,s,_),h.A.setColumn(_,2,d,_)),f.A.fromRotationMatrix(_,o)}function H(e,t,n){n=r.A.fromElements(1,1,1,n);const i=e.getProperty("SCALE",A.A.FLOAT,1,t);(0,l.A)(i)&&r.A.multiplyByScalar(n,i,n);const o=e.getProperty("SCALE_NON_UNIFORM",A.A.FLOAT,3,t,O);(0,l.A)(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}L.prototype.isUnloaded=function(){return 6===this._state},L.prototype.unload=function(){(0,l.A)(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),function(e){const t=e._buffers,n=t.length;for(let e=0;e<n;e++){const n=t[e];n.isDestroyed()||n.destroy()}t.length=0}(this),this._components=void 0,this._arrayBuffer=void 0,this._state=6};const V=L},3282:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(430346),o=n(491446),r=n(490129),a=n(624512),s=n(126797),A=n(434067);const c={name:"ImageBasedLightingPipelineStage"},l=new A.A;c.process=function(e,t,n){const c=t.imageBasedLighting,u=t.environmentMapManager,d=e.shaderBuilder;let h;(0,o.A)(c.specularEnvironmentMaps)||(h=u.radianceCubeMap);const g=c.sphericalHarmonicCoefficients??u.sphericalHarmonicCoefficients;d.addDefine("USE_IBL_LIGHTING",void 0,a.A.FRAGMENT),d.addUniform("vec2","model_iblFactor",a.A.FRAGMENT),s.A.isSupported(n.context)&&((c.useSphericalHarmonics||c.useSpecularEnvironmentMaps||c.enabled)&&d.addUniform("mat3","model_iblReferenceFrameMatrix",a.A.FRAGMENT),(0,o.A)(h)&&d.addDefine("COMPUTE_POSITION_WC_ATMOSPHERE",void 0,a.A.BOTH),(0,o.A)(g)&&(0,o.A)(g[0])?(d.addDefine("DIFFUSE_IBL",void 0,a.A.FRAGMENT),d.addDefine("CUSTOM_SPHERICAL_HARMONICS",void 0,a.A.FRAGMENT),d.addUniform("vec3","model_sphericalHarmonicCoefficients[9]",a.A.FRAGMENT)):c.useDefaultSphericalHarmonics&&d.addDefine("DIFFUSE_IBL",void 0,a.A.FRAGMENT),(0,o.A)(c.specularEnvironmentCubeMap)&&c.specularEnvironmentCubeMap.ready||(0,o.A)(h)?(d.addDefine("SPECULAR_IBL",void 0,a.A.FRAGMENT),d.addDefine("CUSTOM_SPECULAR_IBL",void 0,a.A.FRAGMENT),d.addUniform("samplerCube","model_specularEnvironmentMaps",a.A.FRAGMENT),d.addUniform("float","model_specularEnvironmentMapsMaximumLOD",a.A.FRAGMENT)):t.useDefaultSpecularMaps&&d.addDefine("SPECULAR_IBL",void 0,a.A.FRAGMENT)),d.addFragmentLines(r.A);const f={model_iblFactor:function(){return A.A.multiplyByScalar(c.imageBasedLightingFactor,u?.intensity||1,l)},model_iblReferenceFrameMatrix:function(){return t._iblReferenceFrameMatrix},model_sphericalHarmonicCoefficients:function(){return g},model_specularEnvironmentMaps:function(){return c.specularEnvironmentCubeMap.texture},model_specularEnvironmentMapsMaximumLOD:function(){return c.specularEnvironmentCubeMap.maximumMipmapLevel}};(0,o.A)(h)&&(f.model_specularEnvironmentMaps=function(){return h},f.model_specularEnvironmentMapsMaximumLOD=function(){return u.maximumMipmapLevel}),e.uniformMap=(0,i.A)(f,e.uniformMap)};const u=c},509830:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=class{constructor(e){this.show=e.show,this.alpha=e.alpha,this.brightness=e.brightness,this.contrast=e.contrast,this.hue=e.hue,this.saturation=e.saturation,this.gamma=e.gamma,this.colorToAlpha=e.colorToAlpha}}},890692:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(491446),o=n(697422),r=n(503631);const a=new o.A,s=new o.A,A=new o.A,c=new o.A,l=new o.A,u=new o.A;class d{constructor(e,t,n,i,o){this._x=e,this._y=t,this._level=n,this._textureCoordinateRectangle=i,this._imagery=o}get x(){return this._x}get y(){return this._y}get level(){return this._level}get textureCoordinateRectangle(){return this._textureCoordinateRectangle}get imagery(){return this._imagery}static createImageryCoverages(e,t,n){if(!t.show)return[];const r=t.imageryProvider,s=d._clampImageryLevel(r,n),h=o.A.intersection(r.rectangle,t.rectangle,a),g=r.tilingScheme,f=d._computeImageryRange(e,h,g,s),p=c;g.rectangleToNativeRectangle(e,p);const m=l;return g.rectangleToNativeRectangle(h,m),d._computeImageryCoverages(t,f,s,p,(e,t,n)=>{const r=g.tileXYToRectangle(e,t,n),a=o.A.intersection(r,h,A);if(!(0,i.A)(a))return;const s=u;return g.rectangleToNativeRectangle(a,s),s})}static _clampImageryLevel(e,t){const n=e.minimumLevel??0,i=e.maximumLevel??Number.POSITIVE_INFINITY,o=Math.min(i-1,Math.max(n,t));return Math.floor(o)}static _computeImageryRange(e,t,n,i){const a=d._computeOverlappedRectangle(e,t),s=n.positionToTileXY(o.A.northwest(a),i),A=n.positionToTileXY(o.A.southeast(a),i),c=new r.A;c.minX=s.x,c.minY=s.y,c.maxX=A.x,c.maxY=A.y;const l=e.width/512,u=e.height/512,h=n.tileXYToRectangle(c.minX,c.minY,i);Math.abs(h.south-e.north)<u&&c.minY<c.maxY&&++c.minY,Math.abs(h.east-e.west)<l&&c.minX<c.maxX&&++c.minX;const g=n.tileXYToRectangle(c.maxX,c.maxY,i);return Math.abs(g.north-e.south)<u&&c.maxY>c.minY&&--c.maxY,Math.abs(g.west-e.east)<l&&c.maxX>c.minX&&--c.maxX,c}static _clampRectangle(e,t,n){return(0,i.A)(n)||(n=new o.A),e.south>=t.north?n.north=n.south=t.north:e.north<=t.south?n.north=n.south=t.south:(n.south=Math.max(e.south,t.south),n.north=Math.min(e.north,t.north)),e.west>=t.east?n.west=n.east=t.east:e.east<=t.west?n.west=n.east=t.west:(n.west=Math.max(e.west,t.west),n.east=Math.min(e.east,t.east)),n}static _computeOverlappedRectangle(e,t){const n=o.A.intersection(e,t,s);return(0,i.A)(n)?n:d._clampRectangle(e,t,s)}static _computeImageryCoverages(e,t,n,o,r){const a=[];for(let s=t.minX;s<=t.maxX;s++){const A=r(s,t.maxY,n);if((0,i.A)(A))for(let A=t.minY;A<=t.maxY;A++){const t=r(s,A,n);if(!(0,i.A)(t))continue;const c=d._localizeToCartesianRectangle(t,o,void 0),l=e.getImageryFromCache(s,A,n),u=new d(s,A,n,c,l);a.push(u)}}return a}static _localizeToCartesianRectangle(e,t,n){(0,i.A)(n)||(n=new r.A);const o=1/t.width,a=1/t.height;return n.minX=(e.west-t.west)*o,n.minY=(e.south-t.south)*a,n.maxX=(e.east-t.west)*o,n.maxY=(e.north-t.south)*a,n}}const h=d},577847:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=class{constructor(){this.alpha=!1,this.brightness=!1,this.contrast=!1,this.hue=!1,this.saturation=!1,this.gamma=!1,this.colorToAlpha=!1}}},610084:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=class{constructor(e,t,n,i,o){this.imageryLayer=e,this.texture=t,this.textureTranslationAndScale=n,this.textureCoordinateRectangle=i,this.imageryTexCoordAttributeSetIndex=o}}},391648:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(491446),o=n(626809),r=n(369031),a=n(697422),s=n(624512),A=n(451227),c=n(730839),l=n(577847),u=n(17728),d=n(610084),h=n(921243),g=n(983884);const f=new a.A,p=new a.A;class m{static process(e,t,n){const o=e.model,r=t.modelPrimitiveImagery;if(!(0,i.A)(r))return;if(!r.ready)return;const a=o.imageryLayers,s=u.A._extractProjections(a),A=[...new Set(s)],c=m._computeIndexMapping(s,A),l=m._createImageryInputs(a,r,c);if(0===l.length)return;l.length>10&&((0,g.A)("imagery-texture-units",`Warning: Draped imagery requires ${l.length} texture units, truncating`),l.length=10),m._addImageryTexCoordAttributesToRenderResources(r,e);const d=[];for(let e=0;e<a.length;e++)d.push(a.get(e));m._processImageryInputs(d,e,l,A.length)}static _addImageryTexCoordAttributesToRenderResources(e,t){const n=e.imageryTexCoordAttributesPerProjection();for(const e of n)m._addImageryTexCoordAttributeToRenderResources(e,t)}static _addImageryTexCoordAttributeToRenderResources(e,t){const n=c.A.getNumberOfComponents(e.type),o={index:t.attributeIndex++,value:(0,i.A)(e.buffer)?void 0:e.constant,vertexBuffer:e.buffer,count:e.count,componentsPerAttribute:n,componentDatatype:e.componentDatatype,offsetInBytes:e.byteOffset,strideInBytes:e.byteStride,normalize:e.normalized};t.attributes.push(o)}static _processImageryInputs(e,t,n,i){const o=t.shaderBuilder,r=m._computeImageryFlags(e),a=n.length;o.addDefine("HAS_IMAGERY"),o.addDefine(`IMAGERY_TEXTURE_UNITS ${a}`),m._addAttributes(o,i),m._defineUniforms(o,r),m._buildSampleAndBlendFunction(o,r),m._createMainImageryShader(o,n,r);const s=t.uniformMap,A=m._createImageryUniforms(n);m._setImageryUniforms(s,A)}static _addAttributes(e,t){for(let n=0;n<t;n++)e.addAttribute("vec2",`a_imagery_texCoord_${n}`),e.addVarying("vec2",`v_imagery_texCoord_${n}`);const n="initializeImageryAttributes",i=`void ${n}()`;e.addFunction(n,i,s.A.VERTEX);for(let i=0;i<t;i++)e.addFunctionLines(n,[`v_imagery_texCoord_${i} = a_imagery_texCoord_${i};`])}static _computeImageryFlags(e){const t=new l.A;for(let n=0;n<e.length;n++){const o=e[n];t.alpha|=1!==o.alpha,t.brightness|=o.brightness!==A.A.DEFAULT_BRIGHTNESS,t.contrast|=o.contrast!==A.A.DEFAULT_CONTRAST,t.hue|=o.hue!==A.A.DEFAULT_HUE,t.saturation|=o.saturation!==A.A.DEFAULT_SATURATION,t.gamma|=o.gamma!==A.A.DEFAULT_GAMMA;const r=(0,i.A)(o.colorToAlpha)&&o.colorToAlphaThreshold>0;t.colorToAlpha|=r}return t}static _defineUniforms(e,t){e.addUniform("sampler2D","u_imageryTextures[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),e.addUniform("vec4","u_imageryTextureCoordinateRectangle[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),e.addUniform("vec4","u_imageryTextureTranslationAndScale[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.alpha&&e.addUniform("float","u_imageryTextureAlpha[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.brightness&&e.addUniform("float","u_imageryTextureBrightness[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.contrast&&e.addUniform("float","u_imageryTextureContrast[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.hue&&e.addUniform("float","u_imageryTextureHue[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.saturation&&e.addUniform("float","u_imageryTextureSaturation[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.gamma&&e.addUniform("float","u_imageryTextureOneOverGamma[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT),t.colorToAlpha&&e.addUniform("vec4","u_imageryTextureColorToAlpha[IMAGERY_TEXTURE_UNITS]",s.A.FRAGMENT)}static _createSampleAndBlendFunctionSignature(e){const t=[];return t.push("vec4 previousColor"),t.push("sampler2D textureToSample"),t.push("vec2 textureCoordinates"),t.push("vec4 textureCoordinateRectangle"),t.push("vec4 textureCoordinateTranslationAndScale"),e.alpha&&t.push("float textureAlpha"),e.brightness&&t.push("float textureBrightness"),e.contrast&&t.push("float textureContrast"),e.hue&&t.push("float textureHue"),e.saturation&&t.push("float textureSaturation"),e.gamma&&t.push("float textureOneOverGamma"),e.colorToAlpha&&t.push("vec4 colorToAlpha"),`vec4 sampleAndBlend(${t.join(", ")})`}static _buildSampleAndBlendFunction(e,t){const n="sampleAndBlend",i=m._createSampleAndBlendFunctionSignature(t);e.addFunction(n,i,s.A.FRAGMENT),e.addFunctionLines(n,["float effectiveAlpha = 1.0;"]),t.alpha&&e.addFunctionLines(n,["effectiveAlpha = textureAlpha;"]),e.addFunctionLines(n,["if (textureCoordinates.x < textureCoordinateRectangle.x) effectiveAlpha = 0.0;","if (textureCoordinates.x > textureCoordinateRectangle.z) effectiveAlpha = 0.0;","if (textureCoordinates.y < textureCoordinateRectangle.y) effectiveAlpha = 0.0;","if (textureCoordinates.y > textureCoordinateRectangle.w) effectiveAlpha = 0.0;","vec2 translation = textureCoordinateTranslationAndScale.xy;","vec2 scale = textureCoordinateTranslationAndScale.zw;","vec2 effectiveTextureCoordinates = textureCoordinates * scale + translation;","vec4 value = texture(textureToSample, effectiveTextureCoordinates);","value = czm_srgbToLinear(value);","vec3 color = value.rgb;","float alpha = value.a;"]),t.colorToAlpha&&e.addFunctionLines(n,["vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);","colorDiff.r = czm_maximumComponent(colorDiff);","alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);"]),t.gamma?e.addFunctionLines(n,["color = pow(color, vec3(textureOneOverGamma));"]):e.addFunctionLines(n,["vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));","color = tempColor.rgb;","alpha = tempColor.a;"]),t.brightness&&e.addFunctionLines(n,["color = mix(vec3(0.0), color, textureBrightness);"]),t.contrast&&e.addFunctionLines(n,["color = mix(vec3(0.5), color, textureContrast);"]),t.hue&&e.addFunctionLines(n,["color = czm_hue(color, textureHue);"]),t.saturation&&e.addFunctionLines(n,["color = czm_saturation(color, textureSaturation);"]),e.addFunctionLines(n,["float sourceAlpha = alpha * effectiveAlpha;","float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);","outAlpha += sign(outAlpha) - 1.0;","vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;","vec4 result = vec4(outColor, max(outAlpha, 0.0));"]),e.addFunctionLines(n,["return result;"])}static _createSampleAndBlendCallArguments(e,t,n){const i=`v_imagery_texCoord_${t}`,o=[];return o.push("blendedBaseColor"),o.push(`u_imageryTextures[${n}]`),o.push(`${i}`),o.push(`u_imageryTextureCoordinateRectangle[${n}]`),o.push(`u_imageryTextureTranslationAndScale[${n}]`),e.alpha&&o.push(`u_imageryTextureAlpha[${n}]`),e.brightness&&o.push(`u_imageryTextureBrightness[${n}]`),e.contrast&&o.push(`u_imageryTextureContrast[${n}]`),e.hue&&o.push(`u_imageryTextureHue[${n}]`),e.saturation&&o.push(`u_imageryTextureSaturation[${n}]`),e.gamma&&o.push(`u_imageryTextureOneOverGamma[${n}]`),e.colorToAlpha&&o.push(`u_imageryTextureColorToAlpha[${n}]`),o.join(", ")}static _createMainImageryShader(e,t,n){const i="blendBaseColorWithImagery";e.addFunction(i,"vec4 blendBaseColorWithImagery(vec4 baseColorWithAlpha)",s.A.FRAGMENT),e.addFunctionLines(i,["vec4 blendedBaseColor = baseColorWithAlpha;"]);for(let o=0;o<t.length;o++){const r=t[o].imageryTexCoordAttributeSetIndex,a=m._createSampleAndBlendCallArguments(n,r,o);e.addFunctionLines(i,[`blendedBaseColor = sampleAndBlend(${a});`])}e.addFunctionLines(i,["return blendedBaseColor;"])}static _createImageryUniforms(e){const t=e.length,n={};n.imageryTextures=Array(t),n.imageryTextureCoordinateRectangle=Array(t),n.imageryTextureTranslationAndScale=Array(t),n.imageryTextureAlpha=Array(t),n.imageryTextureBrightness=Array(t),n.imageryTextureContrast=Array(t),n.imageryTextureHue=Array(t),n.imageryTextureSaturation=Array(t),n.imageryTextureOneOverGamma=Array(t),n.imageryTextureColorToAlpha=Array(t);for(let r=0;r<t;r++){const t=e[r],a=t.imageryLayer,s=t.texture,A=t.textureCoordinateRectangle,c=t.textureTranslationAndScale;n.imageryTextures[r]=s,n.imageryTextureTranslationAndScale[r]=c,n.imageryTextureCoordinateRectangle[r]=A,n.imageryTextureAlpha[r]=a.alpha,n.imageryTextureBrightness[r]=a.brightness,n.imageryTextureContrast[r]=a.contrast,n.imageryTextureHue[r]=a.hue,n.imageryTextureSaturation[r]=a.saturation,n.imageryTextureOneOverGamma[r]=1/a.gamma;let l=n.imageryTextureColorToAlpha[r];if((0,i.A)(l)||(l=new o.A,n.imageryTextureColorToAlpha[r]=l),(0,i.A)(a.colorToAlpha)&&a.colorToAlphaThreshold>0){const e=a.colorToAlpha;l.x=e.red,l.y=e.green,l.z=e.blue,l.w=a.colorToAlphaThreshold}else l.w=-1}return n}static _setImageryUniforms(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[`u_${n}`]=function(){return t[n]})}static _createImageryInputs(e,t,n){r.A.defined("imageryLayers",e),r.A.defined("modelPrimitiveImagery",t),r.A.defined("imageryTexCoordAttributeSetIndices",n);const o=[];for(let r=0;r<e.length;r++){const a=e.get(r);if(!a.show)continue;const s=n[r],A=t.mappedPositionsForImageryLayer(a).cartographicBoundingRectangle,c=t.coveragesForImageryLayer(a);for(let e=0;e<c.length;e++){const t=c[e],n=m._createImageryInput(a,t,A,s);(0,i.A)(n)&&o.push(n)}}return o}static _createImageryInput(e,t,n,a){r.A.defined("imageryLayer",e),r.A.defined("coverage",t),r.A.defined("cartographicBoundingRectangle",n),r.A.typeOf.number.greaterThanOrEquals("imageryTexCoordAttributeSetIndex",a,0);const s=t.imagery;if(s.state===h.A.FAILED||s.state===h.A.INVALID)return;let A=s.textureWebMercator;if(!(0,i.A)(A)&&(A=s.texture,!(0,i.A)(A)))return void(s.state===h.A.READY&&console.log(`Imagery at ${t.x}, ${t.y} (level ${t.level}) does not have any texture - state ${s.state}`));const c=m._computeTextureTranslationAndScale(e,n,s.rectangle),l=t.textureCoordinateRectangle,u=new o.A(l.minX,l.minY,l.maxX,l.maxY);return new d.A(e,A,c,u,a)}static _computeTextureTranslationAndScale(e,t,n){r.A.defined("imageryLayer",e),r.A.defined("nonNativeBoundingRectangle",t),r.A.defined("nonNativeImageryRectangle",n);const i=e.imageryProvider.tilingScheme,o=i.rectangleToNativeRectangle(t,f),a=i.rectangleToNativeRectangle(n,p);return m._computeTextureTranslationAndScaleFromNative(o,a)}static _computeTextureTranslationAndScaleFromNative(e,t){r.A.defined("nativeBoundingRectangle",e),r.A.defined("nativeImageryRectangle",t);const n=1/t.width,i=1/t.height,a=(e.west-t.west)*n,s=(e.south-t.south)*i,A=e.width*n,c=e.height*i;return new o.A(a,s,A,c)}static _computeIndexMapping(e,t){r.A.defined("source",e),r.A.defined("target",t);const n=[],i=e.length;for(let o=0;o<i;o++){const i=e[o],r=t.indexOf(i);n.push(r)}return n}}const _=m},281810:(e,t,n)=>{"use strict";n.d(t,{A:()=>W});var i=n(702247),o=n(961645),r=n(267980),a=n(376758),s=n(430346),A=n(571804),c=n(491446),l=n(584164),u=n(99479),d=n(543622),h=n(641613),g=n(442790),f=n(624512),p=n(75899),m=n(295673),_=n(370988),I=n(730839),E=n(866857),y=n(62467),C=n(78173),b=n(471147);const B=new l.A,v=new l.A,w=new l.A,T={name:"InstancingPipelineStage",_getInstanceTransformsAsMatrices:z,_transformsToTypedArray:k,process:function(e,t,n){const o=t.instances,A=o.attributes[0].count,u=e.shaderBuilder;u.addDefine("HAS_INSTANCING"),u.addVertexLines(p.A);const h=e.model,g=h.sceneGraph,C=e.runtimeNode,T=n.mode!==y.A.SCENE3D&&!n.scene3DOnly&&h._projectTo2D,S=h._enablePick&&!n.context.webgl2,x=[];!function(e,t,n,i,o,s){const A=b.A.getAttributeBySemantic(n,E.A.ROTATION);(0,c.A)(A)?function(e,t,n,i,o,s){const A=e.shaderBuilder,u=t.attributes[0].count,d=e.model,h=e.runtimeNode;A.addDefine("HAS_INSTANCE_MATRICES");let g,f=h.instancingTransformsBuffer;if(!(0,c.A)(f)){g=z(t,u,e);const n=k(g);f=j(n,i),d._modelResources.push(f),s&&(h.transformsTypedArray=n),h.instancingTransformsBuffer=f}if(Y(e,f,n,"Transform"),!o)return;const p=(0,a.A)(i);p.mode=y.A.COLUMBUS_VIEW,U(e,p);let m=h.instancingTransformsBuffer2D;if(!(0,c.A)(m)){const t=function(e,t,n,i){const o=R,a=M;N(t,o,a);const s=t.runtimeNode.instancingReferencePoint2D,A=e.length;for(let t=0;t<A;t++){const A=D(e[t],o,a,n,L),c=l.A.getTranslation(A,P),u=r.A.subtract(c,s,c);i[t]=l.A.setTranslation(A,u,i[t])}return i}(g,e,p,g);m=j(k(t),i),d._modelResources.push(m),h.instancingTransformsBuffer2D=m}Y(e,m,n,"Transform2D")}(e,n,i,t,o,s):function(e,t,n,i,o){const s=e.shaderBuilder,A=e.runtimeNode,l=b.A.getAttributeBySemantic(t,E.A.TRANSLATION),u=b.A.getAttributeBySemantic(t,E.A.SCALE);if((0,c.A)(u)){s.addDefine("HAS_INSTANCE_SCALE");const t="Scale";q(e,u.buffer,u.byteOffset,u.byteStride,n,t)}if(!(0,c.A)(l))return;let d;const h=l.typedArray;(0,c.A)(h)?d=function(e,t,n){const i=new Array(t),o=e.typedArray,a=new r.A(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),s=new r.A(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let e=0;e<t;e++){const t=new r.A(o[3*e],o[3*e+1],o[3*e+2]);i[e]=t,r.A.minimumByComponent(a,t,a),r.A.maximumByComponent(s,t,s)}const A=n.runtimeNode;return A.instancingTranslationMin=a,A.instancingTranslationMax=s,e.typedArray=void 0,i}(l,l.count,e):(0,c.A)(A.instancingTranslationMin)||(A.instancingTranslationMin=l.min,A.instancingTranslationMax=l.max),s.addDefine("HAS_INSTANCE_TRANSLATION");if(q(e,l.buffer,l.byteOffset,l.byteStride,n,"Translation"),!o)return;const g=(0,a.A)(i);g.mode=y.A.COLUMBUS_VIEW,U(e,g);let f=A.instancingTranslationBuffer2D;if(!(0,c.A)(f)){const t=function(e,t,n,i){const o=R,a=M;N(t,o,a);const s=t.runtimeNode.instancingReferencePoint2D,A=e.length;for(let t=0;t<A;t++){const A=e[t],c=Q(A,o,a,n,A);i[t]=r.A.subtract(c,s,i[t])}return i}(d,e,g,d),n=function(e){const t=e.length,n=new Float32Array(3*t);for(let i=0;i<t;i++){const t=e[i],o=3*i;n[o+0]=t[0],n[o+1]=t[4],n[o+2]=t[8]}return n}(t);f=j(n,i),e.model._modelResources.push(f),A.instancingTranslationBuffer2D=f}if(!o)return;q(e,f,0,void 0,n,"Translation2D")}(e,n,i,t,o)}(e,n,o,x,T,S),function(e,t,n,i){const o=n.attributes,r=e.shaderBuilder;for(let t=0;t<o.length;t++){const n=o[t];n.semantic===E.A.FEATURE_ID&&(n.setIndex>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=n.setIndex+1),i.push({index:e.attributeIndex++,vertexBuffer:n.buffer,componentsPerAttribute:I.A.getNumberOfComponents(n.type),componentDatatype:n.componentDatatype,normalize:!1,offsetInBytes:n.byteOffset,strideInBytes:n.byteStride,instanceDivisor:1}),r.addAttribute("float",`a_instanceFeatureId_${n.setIndex}`))}}(e,0,o,x);const O={};if(o.transformInWorldSpace?(u.addDefine("USE_LEGACY_INSTANCING",void 0,f.A.VERTEX),u.addUniform("mat4","u_instance_modifiedModelView",f.A.VERTEX),u.addUniform("mat4","u_instance_nodeTransform",f.A.VERTEX),O.u_instance_modifiedModelView=function(){let e=l.A.multiplyTransformation(h.modelMatrix,g.components.transform,B);return T?l.A.multiplyTransformation(n.context.uniformState.view3D,e,B):(n.mode!==y.A.SCENE3D&&(e=d.A.basisTo2D(n.mapProjection,e,B)),l.A.multiplyTransformation(n.context.uniformState.view,e,B))},O.u_instance_nodeTransform=function(){return l.A.multiplyTransformation(g.axisCorrectionMatrix,C.computedTransform,v)},u.addVertexLines(_.A)):u.addVertexLines(m.A),T){u.addDefine("USE_2D_INSTANCING",void 0,f.A.VERTEX),u.addUniform("mat4","u_modelView2D",f.A.VERTEX);const e=n.context,t=l.A.fromTranslation(C.instancingReferencePoint2D,new l.A);O.u_modelView2D=function(){return l.A.multiplyTransformation(e.uniformState.view,t,w)}}e.uniformMap=(0,s.A)(O,e.uniformMap),e.instanceCount=A,(0,i.A)(e.attributes,x)}},S=new l.A,x=new r.A;function D(e,t,n,i,o){let r=l.A.multiplyTransformation(t,e,S);return r=l.A.multiplyTransformation(r,n,S),d.A.basisTo2D(i.mapProjection,r,o)}function Q(e,t,n,i,o){const r=l.A.fromTranslation(e,S);let a=l.A.multiplyTransformation(t,r,S);a=l.A.multiplyTransformation(a,n,S);const s=l.A.getTranslation(a,x);return C.A.computeActualEllipsoidPosition(i,s,o)}function N(e,t,n){const i=e.model,o=i.sceneGraph;e.runtimeNode.node.instances.transformInWorldSpace?(t=l.A.multiplyTransformation(i.modelMatrix,o.components.transform,t),n=l.A.multiplyTransformation(o.axisCorrectionMatrix,e.runtimeNode.computedTransform,n)):(t=l.A.clone(o.computedModelMatrix,t),t=l.A.multiplyTransformation(t,e.runtimeNode.computedTransform,t),n=l.A.clone(l.A.IDENTITY,n))}const R=new l.A,M=new l.A,L=new l.A,P=new r.A,O=new r.A,F=new r.A;function U(e,t){const n=e.runtimeNode,i=e.model.sceneGraph.computedModelMatrix,o=l.A.multiplyByPoint(i,n.instancingTranslationMin,O),a=C.A.computeActualEllipsoidPosition(t,o,o),s=l.A.multiplyByPoint(i,n.instancingTranslationMax,F),A=C.A.computeActualEllipsoidPosition(t,s,s);n.instancingReferencePoint2D=r.A.lerp(a,A,.5,new r.A)}function k(e){const t=e.length,n=new Float32Array(12*t);for(let i=0;i<t;i++){const t=e[i],o=12*i;n[o+0]=t[0],n[o+1]=t[4],n[o+2]=t[8],n[o+3]=t[12],n[o+4]=t[1],n[o+5]=t[5],n[o+6]=t[9],n[o+7]=t[13],n[o+8]=t[2],n[o+9]=t[6],n[o+10]=t[10],n[o+11]=t[14]}return n}const G=new r.A,H=new u.A,V=new r.A;function z(e,t,n){const i=new Array(t),a=b.A.getAttributeBySemantic(e,E.A.TRANSLATION),s=b.A.getAttributeBySemantic(e,E.A.ROTATION),A=b.A.getAttributeBySemantic(e,E.A.SCALE),d=new r.A(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),h=new r.A(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),g=(0,c.A)(a),f=(0,c.A)(s),p=(0,c.A)(A),m=g?a.typedArray:new Float32Array(3*t);let _,I=f?s.typedArray:new Float32Array(4*t);f&&s.normalized&&(I=o.A.dequantize(I,s.componentDatatype,s.type,t)),p?_=A.typedArray:(_=new Float32Array(3*t),_.fill(1));for(let e=0;e<t;e++){const t=new r.A(m[3*e],m[3*e+1],m[3*e+2],G);r.A.maximumByComponent(d,t,d),r.A.minimumByComponent(h,t,h);const n=new u.A(I[4*e],I[4*e+1],I[4*e+2],f?I[4*e+3]:1,H),o=new r.A(_[3*e],_[3*e+1],_[3*e+2],V),a=l.A.fromTranslationQuaternionRotationScale(t,n,o,new l.A);i[e]=a}const y=n.runtimeNode;return y.instancingTranslationMin=h,y.instancingTranslationMax=d,g&&(a.typedArray=void 0),f&&(s.typedArray=void 0),p&&(A.typedArray=void 0),i}function j(e,t){const n=h.A.createVertexBuffer({context:t.context,typedArray:e,usage:g.A.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}function Y(e,t,n,o){const r=A.A.getSizeInBytes(A.A.FLOAT),a=12*r,s=[{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:A.A.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:A.A.FLOAT,normalize:!1,offsetInBytes:4*r,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:A.A.FLOAT,normalize:!1,offsetInBytes:8*r,strideInBytes:a,instanceDivisor:1}],c=e.shaderBuilder;c.addAttribute("vec4",`a_instancing${o}Row0`),c.addAttribute("vec4",`a_instancing${o}Row1`),c.addAttribute("vec4",`a_instancing${o}Row2`),(0,i.A)(n,s)}function q(e,t,n,i,o,r){o.push({index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:3,componentDatatype:A.A.FLOAT,normalize:!1,offsetInBytes:n,strideInBytes:i,instanceDivisor:1}),e.shaderBuilder.addAttribute("vec3",`a_instance${r}`)}const W=T},10803:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLIT:0,PBR:1})},817082:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(624512),r=n(419421),a=n(10803);const s={name:"LightingPipelineStage",process:function(e,t){const{model:n,lightingOptions:s,shaderBuilder:A}=e;(0,i.A)(n.lightColor)&&(A.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,o.A.FRAGMENT),A.addUniform("vec3","model_lightColorHdr",o.A.FRAGMENT),e.uniformMap.model_lightColorHdr=function(){return n.lightColor});const{lightingModel:c}=s;c===a.A.PBR?A.addDefine("LIGHTING_PBR",void 0,o.A.FRAGMENT):A.addDefine("LIGHTING_UNLIT",void 0,o.A.FRAGMENT),A.addFragmentLines(r.A)}}},736355:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(369031);const o=class{constructor(e,t,n,o){i.A.defined("cartographicPositions",e),i.A.typeOf.number.greaterThanOrEquals("numPositions",t,0),i.A.defined("cartographicBoundingRectangle",n),i.A.defined("ellipsoid",o),this._cartographicPositions=e,this._numPositions=t,this._cartographicBoundingRectangle=n,this._ellipsoid=o}get cartographicPositions(){return this._cartographicPositions}get numPositions(){return this._numPositions}get cartographicBoundingRectangle(){return this._cartographicBoundingRectangle}get ellipsoid(){return this._ellipsoid}}},193497:(e,t,n)=>{"use strict";n.d(t,{A:()=>B});var i=n(491446),o=n(267980),r=n(626809),a=n(331185),s=n(624512),A=n(760866),c=n(563402),l=n(953019),u=n(995537),d=n(595826),h=n(10803),g=n(471147);const{Material:f,MetallicRoughness:p,SpecularGlossiness:m,Specular:_,Clearcoat:I}=u.A,E={name:"MaterialPipelineStage",_processTexture:C,_processTextureTransform:y};function y(e,t,n,i,o){const r=`HAS_${o}_TEXTURE_TRANSFORM`;e.addDefine(r,void 0,s.A.FRAGMENT);const a=`${i}Transform`;e.addUniform("mat3",a,s.A.FRAGMENT),t[a]=function(){return n.transform}}function C(e,t,n,o,r,A){e.addUniform("sampler2D",o,s.A.FRAGMENT),t[o]=function(){return n.texture??A};const c=`HAS_${r}_TEXTURE`;e.addDefine(c,void 0,s.A.FRAGMENT);const l=`v_texCoord_${n.texCoord}`,u=`TEXCOORD_${r}`;e.addDefine(u,l,s.A.FRAGMENT);const d=n.transform;(0,i.A)(d)&&!a.A.equals(d,a.A.IDENTITY)&&y(e,t,n,o,r);const{scale:h}=n;(0,i.A)(h)&&1!==h&&function(e,t,n,i,o){const r=`HAS_${o}_TEXTURE_SCALE`;e.addDefine(r,void 0,s.A.FRAGMENT);const a=`${i}Scale`;e.addUniform("float",a,s.A.FRAGMENT),t[a]=function(){return n.scale}}(e,t,n,o,r)}E.process=function(e,t,n){const a=t.material,{model:u,uniformMap:E,shaderBuilder:y}=e,B=(0,i.A)(u.classificationType),v=B,{defaultTexture:w,defaultNormalTexture:T,defaultEmissiveTexture:S}=n.context;!function(e,t,n,r,a,A,c){const{emissiveFactor:l,emissiveTexture:u,normalTexture:d,occlusionTexture:h}=e;(0,i.A)(l)&&!o.A.equals(l,f.DEFAULT_EMISSIVE_FACTOR)&&(n.addUniform("vec3","u_emissiveFactor",s.A.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,s.A.FRAGMENT),(0,i.A)(u)&&!c&&C(n,t,u,"u_emissiveTexture","EMISSIVE",A)),(0,i.A)(d)&&!c&&C(n,t,d,"u_normalTexture","NORMAL",a),(0,i.A)(h)&&!c&&C(n,t,h,"u_occlusionTexture","OCCLUSION",r)}(a,E,y,w,T,S,v),(0,i.A)(a.specularGlossiness)?function(e,t,n,a,A){const{diffuseTexture:c,diffuseFactor:l,specularGlossinessTexture:u,specularFactor:d,glossinessFactor:h}=e;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,s.A.FRAGMENT),(0,i.A)(c)&&!A&&C(n,t,c,"u_diffuseTexture","DIFFUSE",a),(0,i.A)(l)&&!r.A.equals(l,m.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",s.A.FRAGMENT),t.u_diffuseFactor=function(){return e.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,s.A.FRAGMENT)),(0,i.A)(u)&&!A&&C(n,t,u,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",a),(0,i.A)(d)&&!o.A.equals(d,m.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_legacySpecularFactor",s.A.FRAGMENT),t.u_legacySpecularFactor=function(){return e.specularFactor},n.addDefine("HAS_LEGACY_SPECULAR_FACTOR",void 0,s.A.FRAGMENT)),(0,i.A)(h)&&h!==m.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",s.A.FRAGMENT),t.u_glossinessFactor=function(){return e.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,s.A.FRAGMENT))}(a.specularGlossiness,E,y,w,v):((0,i.A)(a.specular)&&g.A.supportedExtensions.KHR_materials_specular&&function(e,t,n,r,a){const{specularTexture:A,specularFactor:c,specularColorTexture:l,specularColorFactor:u}=e;n.addDefine("USE_SPECULAR",void 0,s.A.FRAGMENT),(0,i.A)(A)&&!a&&C(n,t,A,"u_specularTexture","SPECULAR",r),(0,i.A)(c)&&c!==_.DEFAULT_SPECULAR_FACTOR&&(n.addUniform("float","u_specularFactor",s.A.FRAGMENT),t.u_specularFactor=function(){return e.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,s.A.FRAGMENT)),(0,i.A)(l)&&!a&&C(n,t,l,"u_specularColorTexture","SPECULAR_COLOR",r),(0,i.A)(u)&&!o.A.equals(u,_.DEFAULT_SPECULAR_COLOR_FACTOR)&&(n.addUniform("vec3","u_specularColorFactor",s.A.FRAGMENT),t.u_specularColorFactor=function(){return e.specularColorFactor},n.addDefine("HAS_SPECULAR_COLOR_FACTOR",void 0,s.A.FRAGMENT))}(a.specular,E,y,w,v),(0,i.A)(a.anisotropy)&&g.A.supportedExtensions.KHR_materials_anisotropy&&function(e,t,n,r,a){const{anisotropyStrength:A,anisotropyRotation:c,anisotropyTexture:l}=e;n.addDefine("USE_ANISOTROPY",void 0,s.A.FRAGMENT),(0,i.A)(l)&&!a&&C(n,t,l,"u_anisotropyTexture","ANISOTROPY",r);const u=Math.cos(c),d=Math.sin(c);n.addUniform("vec3","u_anisotropy",s.A.FRAGMENT),t.u_anisotropy=function(){return o.A.fromElements(u,d,A,b)}}(a.anisotropy,E,y,w,v),(0,i.A)(a.clearcoat)&&g.A.supportedExtensions.KHR_materials_clearcoat&&function(e,t,n,o,r){const{clearcoatFactor:a,clearcoatTexture:A,clearcoatRoughnessFactor:c,clearcoatRoughnessTexture:l,clearcoatNormalTexture:u}=e;n.addDefine("USE_CLEARCOAT",void 0,s.A.FRAGMENT),(0,i.A)(a)&&a!==I.DEFAULT_CLEARCOAT_FACTOR&&(n.addUniform("float","u_clearcoatFactor",s.A.FRAGMENT),t.u_clearcoatFactor=function(){return e.clearcoatFactor},n.addDefine("HAS_CLEARCOAT_FACTOR",void 0,s.A.FRAGMENT)),(0,i.A)(A)&&!r&&C(n,t,A,"u_clearcoatTexture","CLEARCOAT",o),(0,i.A)(c)&&a!==I.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_clearcoatRoughnessFactor",s.A.FRAGMENT),t.u_clearcoatRoughnessFactor=function(){return e.clearcoatRoughnessFactor},n.addDefine("HAS_CLEARCOAT_ROUGHNESS_FACTOR",void 0,s.A.FRAGMENT)),(0,i.A)(l)&&!r&&C(n,t,l,"u_clearcoatRoughnessTexture","CLEARCOAT_ROUGHNESS",o),(0,i.A)(u)&&!r&&C(n,t,u,"u_clearcoatNormalTexture","CLEARCOAT_NORMAL",o)}(a.clearcoat,E,y,w,v),function(e,t,n,o,a){n.addDefine("USE_METALLIC_ROUGHNESS",void 0,s.A.FRAGMENT);const A=e.baseColorTexture;(0,i.A)(A)&&!a&&C(n,t,A,"u_baseColorTexture","BASE_COLOR",o);const c=e.baseColorFactor;(0,i.A)(c)&&!r.A.equals(c,p.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",s.A.FRAGMENT),t.u_baseColorFactor=function(){return e.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,s.A.FRAGMENT));const l=e.metallicRoughnessTexture;(0,i.A)(l)&&!a&&C(n,t,l,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",o);const u=e.metallicFactor;(0,i.A)(u)&&u!==p.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",s.A.FRAGMENT),t.u_metallicFactor=function(){return e.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,s.A.FRAGMENT));const d=e.roughnessFactor;(0,i.A)(d)&&d!==p.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",s.A.FRAGMENT),t.u_roughnessFactor=function(){return e.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,s.A.FRAGMENT))}(a.metallicRoughness,E,y,w,v));const x=g.A.getAttributeBySemantic(t,d.A.NORMAL),D=(0,i.A)(u.pointCloudShading)&&!u.pointCloudShading.normalShading,Q=e.lightingOptions;a.unlit||!x||B||D?Q.lightingModel=h.A.UNLIT:Q.lightingModel=h.A.PBR;const N=u.backFaceCulling&&!a.doubleSided;e.renderStateOptions.cull.enabled=N;const R=e.alphaOptions;a.alphaMode===l.A.BLEND?R.pass=A.A.TRANSLUCENT:a.alphaMode===l.A.MASK&&(R.alphaCutoff=a.alphaCutoff),y.addFragmentLines(c.A),a.doubleSided&&y.addDefine("HAS_DOUBLE_SIDED_MATERIAL",void 0,s.A.BOTH)};const b=new o.A,B=E},963564:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(624512);const o={name:"MetadataPickingPipelineStage",METADATA_PICKING_ENABLED:"METADATA_PICKING_ENABLED",METADATA_PICKING_VALUE_TYPE:"METADATA_PICKING_VALUE_TYPE",METADATA_PICKING_VALUE_STRING:"METADATA_PICKING_VALUE_STRING",METADATA_PICKING_VALUE_COMPONENT_X:"METADATA_PICKING_VALUE_COMPONENT_X",METADATA_PICKING_VALUE_COMPONENT_Y:"METADATA_PICKING_VALUE_COMPONENT_Y",METADATA_PICKING_VALUE_COMPONENT_Z:"METADATA_PICKING_VALUE_COMPONENT_Z",METADATA_PICKING_VALUE_COMPONENT_W:"METADATA_PICKING_VALUE_COMPONENT_W",process:function(e,t,n){const r=e.shaderBuilder;r.addDefine(o.METADATA_PICKING_VALUE_TYPE,"float",i.A.FRAGMENT),r.addDefine(o.METADATA_PICKING_VALUE_STRING,"0.0",i.A.FRAGMENT),r.addDefine(o.METADATA_PICKING_VALUE_COMPONENT_X,"0.0",i.A.FRAGMENT),r.addDefine(o.METADATA_PICKING_VALUE_COMPONENT_Y,"0.0",i.A.FRAGMENT),r.addDefine(o.METADATA_PICKING_VALUE_COMPONENT_Z,"0.0",i.A.FRAGMENT),r.addDefine(o.METADATA_PICKING_VALUE_COMPONENT_W,"0.0",i.A.FRAGMENT),r.addFunction("metadataPickingStage","void metadataPickingStage(Metadata metadata, MetadataClass metadataClass, inout vec4 metadataValues)",i.A.FRAGMENT),r.addFunctionLines("metadataPickingStage",[`${o.METADATA_PICKING_VALUE_TYPE} value = ${o.METADATA_PICKING_VALUE_TYPE}(${o.METADATA_PICKING_VALUE_STRING});`,`metadataValues.x = ${o.METADATA_PICKING_VALUE_COMPONENT_X};`,`metadataValues.y = ${o.METADATA_PICKING_VALUE_COMPONENT_Y};`,`metadataValues.z = ${o.METADATA_PICKING_VALUE_COMPONENT_Z};`,`metadataValues.w = ${o.METADATA_PICKING_VALUE_COMPONENT_W};`],i.A.FRAGMENT)}},r=o},64389:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(331185),o=n(491446),r=n(624512),a=n(143938),s=n(801202),A=n(374607),c=n(471147);const l={name:"MetadataPipelineStage",STRUCT_ID_METADATA_VS:"MetadataVS",STRUCT_ID_METADATA_FS:"MetadataFS",STRUCT_NAME_METADATA:"Metadata",STRUCT_ID_METADATA_CLASS_VS:"MetadataClassVS",STRUCT_ID_METADATA_CLASS_FS:"MetadataClassFS",STRUCT_NAME_METADATA_CLASS:"MetadataClass",STRUCT_ID_METADATA_STATISTICS_VS:"MetadataStatisticsVS",STRUCT_ID_METADATA_STATISTICS_FS:"MetadataStatisticsFS",STRUCT_NAME_METADATA_STATISTICS:"MetadataStatistics",FUNCTION_ID_INITIALIZE_METADATA_VS:"initializeMetadataVS",FUNCTION_ID_INITIALIZE_METADATA_FS:"initializeMetadataFS",FUNCTION_SIGNATURE_INITIALIZE_METADATA:"void initializeMetadata(out Metadata metadata, out MetadataClass metadataClass, out MetadataStatistics metadataStatistics, ProcessedAttributes attributes)",FUNCTION_ID_SET_METADATA_VARYINGS:"setMetadataVaryings",FUNCTION_SIGNATURE_SET_METADATA_VARYINGS:"void setMetadataVaryings()",METADATA_CLASS_FIELDS:[{specName:"noData",shaderName:"noData"},{specName:"default",shaderName:"defaultValue"},{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"}],METADATA_STATISTICS_FIELDS:[{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"},{specName:"mean",shaderName:"mean",type:"float"},{specName:"median",shaderName:"median"},{specName:"standardDeviation",shaderName:"standardDeviation",type:"float"},{specName:"variance",shaderName:"variance",type:"float"},{specName:"sum",shaderName:"sum"}],process:function(e,t,n){const{shaderBuilder:i,model:u}=e,{structuralMetadata:f={},content:p}=u,m=p?.tileset.metadataExtension?.statistics,_=function(e,t,n){return(0,o.A)(e)?e.flatMap(e=>function(e,t,n){const{getAttributeByName:i,getAttributeInfo:o,sanitizeGlslIdentifier:a}=c.A,s=e.class.id,A=n?.classes[s],l=Object.entries(e.properties),u=new Array(l.length);for(let e=0;e<l.length;e++){const[n,s]=l[e],c=i(t,s.attribute),{glslType:d,variableName:h}=o(c);u[e]={metadataVariable:a(n),property:s,type:s.classProperty.type,glslType:d,variableName:h,propertyStatistics:A?.properties[n],shaderDestination:r.A.BOTH}}return u}(e,t,n)):[]}(f.propertyAttributes,t,m),I=function(e,t){return(0,o.A)(e)?e.flatMap(e=>function(e,t){const{sanitizeGlslIdentifier:n}=c.A,i=e.class.id,o=t?.classes[i],a=Object.entries(e.properties).filter(([e,t])=>t.isGpuCompatible()),s=new Array(a.length);for(let e=0;e<a.length;e++){const[t,i]=a[e];s[e]={metadataVariable:n(t),property:i,type:i.classProperty.type,glslType:i.getGlslType(),propertyStatistics:o?.properties[t],shaderDestination:r.A.FRAGMENT}}return s}(e,t)):[]}(f.propertyTextures,m);!function(e,t){const n=new Set,i=new Set;for(let e=0;e<t.length;e++){const{type:r,glslType:a,propertyStatistics:s}=t[e];n.add(a),(0,o.A)(s)&&r!==A.A.ENUM&&i.add(a)}const a=l.METADATA_CLASS_FIELDS;for(const e of n)c(`${e}MetadataClass`,e,a);const s=l.METADATA_STATISTICS_FIELDS;for(const e of i)c(`${e}MetadataStatistics`,e,s);function c(t,n,i){e.addStruct(t,t,r.A.BOTH);for(let o=0;o<i.length;o++){const{shaderName:r}=i[o],a="float"===i[o].type?d(n):n;e.addStructField(t,a,r)}}}(i,_.concat(I)),function(e){e.addStruct(l.STRUCT_ID_METADATA_VS,l.STRUCT_NAME_METADATA,r.A.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_FS,l.STRUCT_NAME_METADATA,r.A.FRAGMENT),e.addStruct(l.STRUCT_ID_METADATA_CLASS_VS,l.STRUCT_NAME_METADATA_CLASS,r.A.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_CLASS_FS,l.STRUCT_NAME_METADATA_CLASS,r.A.FRAGMENT),e.addStruct(l.STRUCT_ID_METADATA_STATISTICS_VS,l.STRUCT_NAME_METADATA_STATISTICS,r.A.VERTEX),e.addStruct(l.STRUCT_ID_METADATA_STATISTICS_FS,l.STRUCT_NAME_METADATA_STATISTICS,r.A.FRAGMENT),e.addFunction(l.FUNCTION_ID_INITIALIZE_METADATA_VS,l.FUNCTION_SIGNATURE_INITIALIZE_METADATA,r.A.VERTEX),e.addFunction(l.FUNCTION_ID_INITIALIZE_METADATA_FS,l.FUNCTION_SIGNATURE_INITIALIZE_METADATA,r.A.FRAGMENT),e.addFunction(l.FUNCTION_ID_SET_METADATA_VARYINGS,l.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,r.A.VERTEX)}(i),i.addVertexLines(s.A),i.addFragmentLines(a.A);for(let t=0;t<_.length;t++)h(e,_[t]);for(let t=0;t<I.length;t++)g(e,I[t])}},u={int:"float",ivec2:"vec2",ivec3:"vec3",ivec4:"vec4"};function d(e){const t=u[e];return(0,o.A)(t)?t:e}function h(e,t){!function(e,t){const{shaderBuilder:n}=e,{metadataVariable:i,property:o,glslType:a}=t,s=_({valueExpression:`attributes.${t.variableName}`,renderResources:e,glslType:a,metadataVariable:i,shaderDestination:r.A.BOTH,property:o});n.addStructField(l.STRUCT_ID_METADATA_VS,a,i),n.addStructField(l.STRUCT_ID_METADATA_FS,a,i);const A=`metadata.${i} = ${s};`;n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,[A]),n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,[A])}(e,t),f(e.shaderBuilder,t),p(e.shaderBuilder,t)}function g(e,t){!function(e,t){const{shaderBuilder:n,uniformMap:a}=e,{metadataVariable:s,glslType:A,property:c}=t,{texCoord:u,channels:d,index:h,texture:g,transform:f}=c.textureReader,p=`u_propertyTexture_${h}`;a.hasOwnProperty(p)||(n.addUniform("sampler2D",p,r.A.FRAGMENT),a[p]=()=>g),n.addStructField(l.STRUCT_ID_METADATA_FS,A,s);const m=`attributes.texCoord_${u}`;let I=m;if((0,o.A)(f)&&!i.A.equals(f,i.A.IDENTITY)){const e=`${p}Transform`;n.addUniform("mat3",e,r.A.FRAGMENT),a[e]=function(){return f},I=`vec2(${e} * vec3(${m}, 1.0))`}const E=`texture(${p}, ${I}).${d}`,y=`metadata.${s} = ${_({valueExpression:c.unpackInShader(E),renderResources:e,glslType:A,metadataVariable:s,shaderDestination:r.A.FRAGMENT,property:c})};`;n.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,[y])}(e,t),f(e.shaderBuilder,t),p(e.shaderBuilder,t)}function f(e,t){const{classProperty:n}=t.property,{metadataVariable:i,glslType:o,shaderDestination:a}=t,s=m(l.METADATA_CLASS_FIELDS,n,`metadataClass.${i}`,o),A=`${o}MetadataClass`;e.addStructField(l.STRUCT_ID_METADATA_CLASS_FS,A,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,s),r.A.includesVertexShader(a)&&(e.addStructField(l.STRUCT_ID_METADATA_CLASS_VS,A,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,s))}function p(e,t){const{propertyStatistics:n}=t;if(!(0,o.A)(n))return;const{metadataVariable:i,type:a,glslType:s}=t;if(a===A.A.ENUM)return;const c=m(l.METADATA_STATISTICS_FIELDS,n,`metadataStatistics.${i}`,s),u=`${s}MetadataStatistics`;e.addStructField(l.STRUCT_ID_METADATA_STATISTICS_FS,u,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_FS,c),r.A.includesVertexShader(t.shaderDestination)&&(e.addStructField(l.STRUCT_ID_METADATA_STATISTICS_VS,u,i),e.addFunctionLines(l.FUNCTION_ID_INITIALIZE_METADATA_VS,c))}function m(e,t,n,i){return(0,o.A)(t)?e.map(function(e){const r=t[e.specName];if((0,o.A)(r))return`${n}.${e.shaderName} = ${i}(${r});`}).filter(o.A):[]}function _(e){const{valueExpression:t,property:n}=e;if(!n.hasValueTransform)return t;const i=e.metadataVariable,o=`u_${i}_offset`,r=`u_${i}_scale`,{shaderBuilder:a,uniformMap:s}=e.renderResources,{glslType:A,shaderDestination:c}=e;a.addUniform(A,o,c),a.addUniform(A,r,c);const{offset:l,scale:u}=n;return s[o]=()=>l,s[r]=()=>u,`czm_valueTransform(${o}, ${r}, ${t})`}const I=l},623379:(e,t,n)=>{"use strict";n.d(t,{A:()=>ue});var i=n(660662),o=n(267980),r=n(336946),a=n(369031),s=n(672743),A=n(41476),c=n(491446),l=n(915325),u=n(605971),d=n(677354),h=n(853331),g=n(610750),f=n(955943),p=n(331185),m=n(584164),_=n(744603),I=n(123245),E=n(760866),y=n(711284),C=n(348460),b=n(615557),B=n(428027),v=n(982504),w=n(63316),T=n(208198),S=n(929771),x=n(62467),D=n(78173),Q=n(988609),N=n(913419),R=n(802227),M=n(66502),L=n(521032),P=n(4773),O=n(947129),F=n(814071),U=n(650884),k=n(226827),G=n(471147),H=n(983884),V=n(31908),z=n(942836),j=n(965020),Y=n(701111);function q(e){e=e??l.A.EMPTY_OBJECT,a.A.typeOf.object("options.loader",e.loader),a.A.typeOf.object("options.resource",e.resource),this._loader=e.loader,this._resource=e.resource,this.type=e.type??k.A.GLTF,this.modelMatrix=m.A.clone(e.modelMatrix??m.A.IDENTITY),this._modelMatrix=m.A.clone(this.modelMatrix),this._scale=e.scale??1,this._minimumPixelSize=e.minimumPixelSize??0,this._maximumScale=e.maximumScale,this._clampedScale=(0,c.A)(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=p.A.clone(p.A.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new P.A(this),this._clampAnimations=e.clampAnimations??!0,this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=A.A.clone(e.color),this._colorBlendMode=e.colorBlendMode??B.A.HIGHLIGHT,this._colorBlendAmount=e.colorBlendAmount??.5;const t=e.silhouetteColor??A.A.RED;this._silhouetteColor=A.A.clone(t),this._silhouetteSize=e.silhouetteSize??0,this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=e.cull??!0,this._opaquePass=e.opaquePass??E.A.OPAQUE,this._allowPicking=e.allowPicking??!0,this._show=e.show??!0,this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=e.featureIdLabel??"featureId_0";"number"==typeof n&&(n=`featureId_${n}`),this._featureIdLabel=n;let r=e.instanceFeatureIdLabel??"instanceFeatureId_0";"number"==typeof r&&(r=`instanceFeatureId_${r}`),this._instanceFeatureIdLabel=r,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new i.A,this._initialRadius=void 0,this._heightReference=e.heightReference??w.Ay.NONE,this._heightDirty=this._heightReference!==w.Ay.NONE,this._removeUpdateHeightCallback=void 0,this._enableVerticalExaggeration=e.enableVerticalExaggeration??!0,this._hasVerticalExaggeration=!1,this._clampedModelMatrix=void 0;const u=e.scene;(0,c.A)(u)&&(0,c.A)(u.terrainProviderChanged)&&(this._terrainProviderChangedCallback=u.terrainProviderChanged.addEventListener(()=>{this._heightDirty=!0})),this._scene=u,this._distanceDisplayCondition=e.distanceDisplayCondition;const d=new S.A(e.pointCloudShading);this._pointCloudShading=d,this._attenuation=d.attenuation,this._pointCloudBackFaceCulling=d.backFaceCulling;const h=e.clippingPlanes;(0,c.A)(h)&&void 0===h.owner?y.A.setOwner(h,this,"_clippingPlanes"):this._clippingPlanes=h,this._clippingPlanesState=0,this._clippingPlanesMatrix=m.A.clone(m.A.IDENTITY);const g=e.clippingPolygons;(0,c.A)(g)&&void 0===g.owner?C.A.setOwner(g,this,"_clippingPolygons"):this._clippingPolygons=g,this._clippingPolygonsState=0,this._modelImagery=new Y.A(this),this._lightColor=o.A.clone(e.lightColor),this._imageBasedLighting=(0,c.A)(e.imageBasedLighting)?e.imageBasedLighting:new T.A,this._shouldDestroyImageBasedLighting=!(0,c.A)(e.imageBasedLighting),this._environmentMapManager=void 0;const _=new b.A(e.environmentMapOptions);b.A.setOwner(_,this,"_environmentMapManager"),this._backFaceCulling=e.backFaceCulling??!0,this._backFaceCullingDirty=!1,this._shadows=e.shadows??Q.A.ENABLED,this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._enableDebugWireframe=e.enableDebugWireframe??!1,this._enableShowOutline=e.enableShowOutline??!0,this._debugWireframe=e.debugWireframe??!1,!0===this._debugWireframe&&!1===this._enableDebugWireframe&&this.type===k.A.GLTF&&(0,H.A)("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltf, otherwise debugWireframe will be ignored.");let I=e.credit;"string"==typeof I&&(I=new s.A(I)),this._credits=[],this._credit=I,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=e.showCreditsOnScreen??!1,this._showCreditsOnScreenDirty=!0,this._splitDirection=e.splitDirection??N.A.NONE,this._enableShowOutline=e.enableShowOutline??!0,this.showOutline=e.showOutline??!0,this.outlineColor=e.outlineColor??A.A.BLACK,this._classificationType=e.classificationType,this._statistics=new U.A,this._sceneMode=void 0,this._projectTo2D=e.projectTo2D??!1,this._enablePick=e.enablePick??!1,this._fogRenderable=void 0,this._skipLevelOfDetail=!1,this._ignoreCommands=e.ignoreCommands??!1,this._errorEvent=new f.A,this._readyEvent=new f.A,this._texturesReadyEvent=new f.A,this._sceneGraph=void 0,this._nodesByName={},this.pickObject=e.pickObject}function W(e,t){e._errorEvent.numberOfListeners>0?e._errorEvent.raiseEvent(t):console.log(t)}function J(e,t){if(!(0,c.A)(e)&&!(0,c.A)(t))return!1;if((0,c.A)(e)!==(0,c.A)(t))return!0;const n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}Object.defineProperties(q.prototype,{ready:{get:function(){return this._ready}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},incrementallyLoadTextures:{get:function(){return this._loader.incrementallyLoadTextures??!1}},texturesReadyEvent:{get:function(){return this._texturesReadyEvent}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){a.A.defined("pointCloudShading",e),e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,c.A)(e)&&e.far<=e.near)throw new u.A("far must be greater than near");this._distanceDisplayCondition=h.A.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){J(e,this._color)&&this.resetDrawCommands(),this._color=A.A.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!A.A.equals(e,this._silhouetteColor)){const t=J(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=A.A.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){const t=this._silhouetteSize,n=e>0&&0===t||0===e&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){if(!this._ready)throw new u.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return ne(this,(0,c.A)(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e,!0===this._debugWireframe&&!1===this._enableDebugWireframe&&this.type===k.A.GLTF&&(0,H.A)("model-debug-wireframe-ignored","enableDebugWireframe must be set to true in Model.fromGltfAsync, otherwise debugWireframe will be ignored.")}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),a.A.typeOf.string("value",e),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),a.A.typeOf.string("value",e),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(y.A.setOwner(e,this,"_clippingPlanes"),this.resetDrawCommands())}},clippingPolygons:{get:function(){return this._clippingPolygons},set:function(e){e!==this._clippingPolygons&&(C.A.setOwner(e,this,"_clippingPolygons"),this.resetDrawCommands())}},enableVerticalExaggeration:{get:function(){return this._enableVerticalExaggeration},set:function(e){e!==this._enableVerticalExaggeration&&this.resetDrawCommands(),this._enableVerticalExaggeration=e}},hasVerticalExaggeration:{get:function(){return this._hasVerticalExaggeration}},imageryLayers:{get:function(){if((0,c.A)(this._content)){const e=this._content.tileset;if((0,c.A)(e))return e.imageryLayers}}},lightColor:{get:function(){return this._lightColor},set:function(e){(0,c.A)(e)!==(0,c.A)(this._lightColor)&&this.resetDrawCommands(),this._lightColor=o.A.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){a.A.typeOf.object("imageBasedLighting",e),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},environmentMapManager:{get:function(){return this._environmentMapManager},set:function(e){a.A.typeOf.object("environmentMapManager",e),e!==this.environmentMapManager&&(b.A.setOwner(e,this,"_environmentMapManager"),this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}}),q.prototype.getNode=function(e){if(!this._ready)throw new u.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return a.A.typeOf.string("name",e),this._nodesByName[e]},q.prototype.setArticulationStage=function(e,t){if(a.A.typeOf.number("value",t),!this._ready)throw new u.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");this._sceneGraph.setArticulationStage(e,t)},q.prototype.applyArticulations=function(){if(!this._ready)throw new u.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");this._sceneGraph.applyArticulations()},q.prototype.getExtension=function(e){if(a.A.typeOf.string("extensionName",e),!this._ready)throw new u.A("The model is not loaded. Use Model.readyEvent or wait for Model.ready to be true.");return this._loader.components.extensions[e]},q.prototype.makeStyleDirty=function(){this._styleDirty=!0},q.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};const K=new m.A,X=new p.A,Z=new m.A;function $(e){const t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=z.A.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}q.prototype.update=function(e){let t=!1;try{t=function(e,t){return!(!e._resourcesLoaded||e._loader.incrementallyLoadTextures&&!e._texturesLoaded)||(t.afterRender.push(()=>!0),e._loader.process(t))}(this,e)}catch(e){this._loader.incrementallyLoadTextures||"TextureError"!==e.name?W(this,G.A.getError("model",this._resource,e)):W(this,e)}if(function(e,t){(0,c.A)(e._customShader)&&e._customShader.update(t)}(this,e),function(e,t){const n=e._environmentMapManager,i=t.passes.pick||t.passes.pickVoxel;e._ready&&n.owner===e&&!i&&(n.position=e._boundingSphere.center,n.shouldUpdate=!(0,c.A)(e._imageBasedLighting.sphericalHarmonicCoefficients)||!(0,c.A)(e._imageBasedLighting.specularEnvironmentMaps),n.update(t),n.shouldRegenerateShaders&&e.resetDrawCommands())}(this,e),function(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}(this,e),!this._resourcesLoaded&&t){this._resourcesLoaded=!0;const e=this._loader.components;if(!(0,c.A)(e)){if(this._loader.isUnloaded())return;const e=G.A.getError("model",this._resource,new I.A("Failed to load model."));W(e),this._rejectLoad=this._rejectLoad&&this._rejectLoad(e)}const t=e.structuralMetadata;(0,c.A)(t)&&t.propertyTableCount>0&&function(e,t){const n=e._featureTables,i=t.propertyTables,o=i.length;for(let t=0;t<o;t++){const o=i[t],r=new O.A({model:e,propertyTable:o});n.push(r)}}(this,t);const n=new F.A({model:this,modelComponents:e});this._sceneGraph=n,this._gltfCredits=n.components.asset.credits}if(!this._resourcesLoaded||e.mode===x.A.MORPHING)return;const n=this._modelImagery;var i;(n.update(e),n.ready||this._content?.tileset?._asynchronouslyLoadImagery)&&(!function(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;const t=e._sceneGraph.components,n=t.structuralMetadata;(0,c.A)(n)&&n.propertyTableCount>0&&(e.featureTableId=function(e,t){const n=t._featureIdLabel,i=t._instanceFeatureIdLabel;let o,r,a,s;for(o=0;o<e.nodes.length;o++)if(s=e.nodes[o],(0,c.A)(s.instances)&&(a=G.A.getFeatureIdsByLabel(s.instances.featureIds,i),(0,c.A)(a)&&(0,c.A)(a.propertyTableId)))return a.propertyTableId;for(o=0;o<e.nodes.length;o++)for(s=e.nodes[o],r=0;r<s.primitives.length;r++){const e=s.primitives[r],t=G.A.getFeatureIdsByLabel(e.featureIds,n);if((0,c.A)(t))return t.propertyTableId}if(1===t._featureTables.length)return 0}(t,e),e._styleDirty=!0,e.resetDrawCommands())}(this),(i=this)._styleDirty&&(i.applyStyle(i._style),i._styleDirty=!1),function(e,t){const n=e._featureTables,i=n.length;let o=!1;for(let e=0;e<i;e++)n[e].update(t),n[e].styleCommandsNeededDirty&&(o=!0);o&&$(e)}(this,e),function(e){const t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}(this),function(e,t){e._silhouetteDirty&&(Ae(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}(this,e),function(e,t){const n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}(this,e),function(e,t){let n=0;e.isClippingEnabled()&&(e._clippingPlanes.owner===e&&e._clippingPlanes.update(t),n=e._clippingPlanes.clippingPlanesState),n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}(this,e),function(e,t){let n=0;e.isClippingPolygonsEnabled()&&(e._clippingPolygons.owner===e&&(e._clippingPolygons.update(t),e._clippingPolygons.queueCommands(t)),n=e._clippingPolygons.clippingPolygonsState),n!==e._clippingPolygonsState&&(e.resetDrawCommands(),e._clippingPolygonsState=n)}(this,e),function(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}(this,e),function(e,t){const n=t.fog.enabled&&t.fog.renderable;n!==e._fogRenderable&&(e.resetDrawCommands(),e._fogRenderable=n)}(this,e),function(e,t){if(e.enableVerticalExaggeration){const n=1!==t.verticalExaggeration;e.hasVerticalExaggeration!==n&&(e.resetDrawCommands(),e._hasVerticalExaggeration=n)}else e.hasVerticalExaggeration&&(e.resetDrawCommands(),e._hasVerticalExaggeration=!1)}(this,e),this._defaultTexture=e.context.defaultTexture,function(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}(this,e),function(e,t){if(!m.A.equals(e.modelMatrix,e._modelMatrix)){if(t.mode!==x.A.SCENE3D&&e._projectTo2D)throw new u.A("Model.modelMatrix cannot be changed in 2D or Columbus View if projectTo2D is true.");e._updateModelMatrix=!0,e._modelMatrix=m.A.clone(e.modelMatrix,e._modelMatrix)}}(this,e),function(e){if(!e._updateModelMatrix&&!e._heightDirty&&0===e._minimumPixelSize)return;(0,c.A)(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);const t=e._scene;if(!(0,c.A)(t)||e.heightReference===w.Ay.NONE){if(e.heightReference!==w.Ay.NONE)throw new u.A("Height reference is not supported without a scene.");return void(e._clampedModelMatrix=void 0)}const n=t.ellipsoid??g.A.default,i=e.modelMatrix;ee.x=i[12],ee.y=i[13],ee.z=i[14];const o=n.cartesianToCartographic(ee);(0,c.A)(e._clampedModelMatrix)||(e._clampedModelMatrix=m.A.clone(i,new m.A)),e._removeUpdateHeightCallback=t.updateHeight(o,ae(e,n,o),e.heightReference);const a=t.getHeight(o,e.heightReference);if((0,c.A)(a)){const t=ae(e,n,o);r.A.clone(o,te),te.height=a,t(te)}e._heightDirty=!1,e._updateModelMatrix=!0}(this),function(e,t){if(!e._updateModelMatrix&&0===e._minimumPixelSize)return;const n=(0,c.A)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;ne(e,n),function(e,t,n){let i=e.scale;if(0!==e.minimumPixelSize&&!e._projectTo2D){const o=n.context,r=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);m.A.getTranslation(t,ee),e._sceneMode!==x.A.SCENE3D&&D.A.computeActualEllipsoidPosition(n,ee,ee);const a=e._boundingSphere.radius,s=function(e,t,n){return oe.center=e,oe.radius=t,n.camera.getPixelSize(oe,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}(ee,a,n),A=1/s;Math.min(A*(2*a),r)<e.minimumPixelSize&&(i=e.minimumPixelSize*s/(2*e._initialRadius))}e._computedScale=(0,c.A)(e.maximumScale)?Math.min(e.maximumScale,i):i}(e,n,t)}(this,e),function(e,t){const n=(0,c.A)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix,i=e.referenceMatrix??n,o=t.context;let r=X,a=K;if(a=m.A.multiply(o.uniformState.view3D,i,a),r=m.A.getRotation(a,r),r=p.A.transpose(r,r),e._iblReferenceFrameMatrix=p.A.multiply(ie,r,e._iblReferenceFrameMatrix),e.isClippingEnabled()){let t=Z;t=m.A.multiply(o.uniformState.view3D,i,t),t=m.A.multiply(t,e._clippingPlanes.modelMatrix,t),e._clippingPlanesMatrix=m.A.inverseTranspose(t,e._clippingPlanesMatrix)}}(this,e),this._ready?(this._loader.incrementallyLoadTextures&&!this._texturesLoaded&&this._loader.texturesLoaded&&(this.resetDrawCommands(),this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this)),function(e){if(!e._idDirty)return;e._idDirty=!1;const t=e._id,n=e._pickIds,i=n.length;for(let e=0;e<i;++e)n[e].object.id=t}(this),function(e,t){const n=e._sceneGraph;if(e._updateModelMatrix||0!==e._minimumPixelSize){const i=(0,c.A)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;n.updateModelMatrix(i,t),e._updateModelMatrix=!1}e._backFaceCullingDirty&&(n.updateBackFaceCulling(e._backFaceCulling),e._backFaceCullingDirty=!1),e._shadowsDirty&&(n.updateShadows(e._shadows),e._shadowsDirty=!1),e._debugShowBoundingVolumeDirty&&(n.updateShowBoundingVolume(e._debugShowBoundingVolume),e._debugShowBoundingVolumeDirty=!1);let i=!1;(0,c.A)(e.classificationType)||(i=e._userAnimationDirty||e._activeAnimations.update(t)),n.update(t,i),e._userAnimationDirty=!1}(this,e),function(e){if(!e._showCreditsOnScreenDirty)return;e._showCreditsOnScreenDirty=!1,e._credits.length=0;const t=e._showCreditsOnScreen;if((0,c.A)(e._credit)){const n=s.A.clone(e._credit);n.showOnScreen=n.showOnScreen||t,e._credits.push(n)}const n=e._resourceCredits,i=n.length;for(let o=0;o<i;o++){const i=s.A.clone(n[o]);i.showOnScreen=i.showOnScreen||t,e._credits.push(i)}const o=e._gltfCredits,r=o.length;for(let n=0;n<r;n++){const i=s.A.clone(o[n]);i.showOnScreen=i.showOnScreen||t,e._credits.push(i)}}(this),function(e,t){const n=function(e,t){const n=e.distanceDisplayCondition;if(!(0,c.A)(n))return!0;const i=n.near*n.near,r=n.far*n.far;let a;if(t.mode===x.A.SCENE2D){const e=.5*(t.camera.frustum.right-t.camera.frustum.left);a=e*e}else{const n=m.A.getTranslation(e.modelMatrix,se);D.A.computeActualEllipsoidPosition(t,n,n),a=o.A.distanceSquared(n,t.camera.positionWC)}return a>=i&&a<=r}(e,t),i=e.isInvisible(),r=e.hasSilhouette(t),a=e._show&&0!==e._computedScale&&n&&(!i||r),s=t.passes,A=s.render||s.pick&&e.allowPicking;a&&!e._ignoreCommands&&A&&(function(e,t){const n=t.creditDisplay,i=e._credits,o=i.length;for(let e=0;e<o;e++)n.addCreditToNextFrame(i[e])}(e,t),e._sceneGraph.pushDrawCommands(t))}(this,e)):e.afterRender.push(()=>{this._ready=!0,this._readyEvent.raiseEvent(this)}))};const ee=new o.A,te=new r.A;function ne(e,t){e._clampedScale=(0,c.A)(e._maximumScale)?Math.min(e._scale,e._maximumScale):e._scale,e._boundingSphere.center=o.A.multiplyByScalar(e._sceneGraph.boundingSphere.center,e._clampedScale,e._boundingSphere.center),e._boundingSphere.radius=e._initialRadius*e._clampedScale,e._boundingSphere=i.A.transform(e._boundingSphere,t,e._boundingSphere)}const ie=new p.A(1,0,0,0,0,1,0,-1,0),oe=new i.A,re=new o.A;function ae(e,t,n){return function(i){(0,w.Lq)(e.heightReference)&&(i.height+=n.height),t.cartographicToCartesian(i,re);const o=e._clampedModelMatrix;m.A.clone(e.modelMatrix,o),o[12]=re.x,o[13]=re.y,o[14]=re.z,e._heightDirty=!0}}const se=new o.A;function Ae(e){return e.context.stencilBuffer}q.prototype.isTranslucent=function(){const e=this.color;return(0,c.A)(e)&&e.alpha>0&&e.alpha<1},q.prototype.isInvisible=function(){const e=this.color;return(0,c.A)(e)&&0===e.alpha},q.prototype.hasSilhouette=function(e){return Ae(e)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0&&!(0,c.A)(this._classificationType)},q.prototype.hasSkipLevelOfDetail=function(e){if(!k.A.is3DTiles(this.type))return!1;const t=e.context.stencilBuffer,n=this._content.tileset;return t&&n.isSkippingLevelOfDetail},q.prototype.isClippingEnabled=function(){const e=this._clippingPlanes;return(0,c.A)(e)&&e.enabled&&0!==e.length},q.prototype.pick=function(e,t,n,i,o){return(0,j.A)(this,e,t,n,i,o)},q.prototype.isClippingPolygonsEnabled=function(){const e=this._clippingPolygons;return(0,c.A)(e)&&e.enabled&&0!==e.length},q.prototype.isDestroyed=function(){return!1},q.prototype.destroy=function(){const e=this._loader;(0,c.A)(e)&&e.destroy();const t=this._featureTables;if((0,c.A)(t)){const e=t.length;for(let n=0;n<e;n++)t[n].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),(0,c.A)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),(0,c.A)(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);const n=this._clippingPlanes;(0,c.A)(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0;const i=this._clippingPolygons;(0,c.A)(i)&&!i.isDestroyed()&&i.owner===this&&i.destroy(),this._clippingPolygons=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0;const o=this._environmentMapManager;o.isDestroyed()||o.owner!==this||o.destroy(),this._environmentMapManager=void 0,(0,d.A)(this)},q.prototype.destroyPipelineResources=function(){const e=this._pipelineResources;for(let t=0;t<e.length;t++)e[t].destroy();this._pipelineResources.length=0,this._pickIds.length=0},q.prototype.destroyModelResources=function(){const e=this._modelResources;for(let t=0;t<e.length;t++)e[t].destroy();this._modelResources.length=0},q.fromGltfAsync=async function(e){if(e=e??l.A.EMPTY_OBJECT,!(0,c.A)(e.url)&&!(0,c.A)(e.gltf))throw new u.A("options.url is required.");const t=e.url??e.gltf,n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,c.A)(e.classificationType)},i=e.basePath??"",o=_.A.createIfNeeded(i);(0,c.A)(t.asset)?(n.gltfJson=t,n.baseResource=o,n.gltfResource=o):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=o,n.gltfResource=o):n.gltfResource=_.A.createIfNeeded(t);const r=new v.A(n),A=(0,c.A)(e.content)?k.A.TILE_GLTF:k.A.GLTF,d=n.gltfResource,h=le(r,A,e);h.resource=d,h.environmentMapOptions=e.environmentMapOptions;try{await r.load()}catch(e){throw r.destroy(),G.A.getError("model",d,e)}const g=e.gltfCallback;(0,c.A)(g)&&(a.A.typeOf.func("options.gltfCallback",g),g(r.gltfJson));const f=new q(h),p=f._resource.credits;if((0,c.A)(p)){const e=p.length;for(let t=0;t<e;t++)f._resourceCredits.push(s.A.clone(p[t]))}return f},q.fromB3dm=async function(e){const t={b3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:(0,c.A)(e.classificationType)},n=new R.A(t);try{await n.load();return new q(le(n,k.A.TILE_B3DM,e))}catch(e){throw n.destroy(),e}},q.fromPnts=async function(e){const t={arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,loadAttributesFor2D:e.projectTo2D},n=new V.A(t);try{await n.load();return new q(le(n,k.A.TILE_PNTS,e))}catch(e){throw n.destroy(),e}},q.fromI3dm=async function(e){const t={i3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,enablePick:e.enablePick,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline},n=new L.A(t);try{await n.load();return new q(le(n,k.A.TILE_I3DM,e))}catch(e){throw n.destroy(),e}},q.fromGeoJson=async function(e){const t={geoJson:e.geoJson};return new q(le(new M.A(t),k.A.TILE_GEOJSON,e))};const ce=new A.A;function le(e,t,n){return{loader:e,type:t,resource:n.resource,show:n.show,modelMatrix:n.modelMatrix,scale:n.scale,enableVerticalExaggeration:n.enableVerticalExaggeration,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,id:n.id,allowPicking:n.allowPicking,clampAnimations:n.clampAnimations,shadows:n.shadows,debugShowBoundingVolume:n.debugShowBoundingVolume,enableDebugWireframe:n.enableDebugWireframe,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,customShader:n.customShader,content:n.content,heightReference:n.heightReference,scene:n.scene,distanceDisplayCondition:n.distanceDisplayCondition,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,silhouetteColor:n.silhouetteColor,silhouetteSize:n.silhouetteSize,enableShowOutline:n.enableShowOutline,showOutline:n.showOutline,outlineColor:n.outlineColor,clippingPlanes:n.clippingPlanes,clippingPolygons:n.clippingPolygons,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,credit:n.credit,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection,projectTo2D:n.projectTo2D,enablePick:n.enablePick,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,classificationType:n.classificationType,pickObject:n.pickObject}}q.prototype.applyColorAndShow=function(e){const t=A.A.clone(this._color,ce),n=(0,c.A)(e)&&(0,c.A)(e.color),i=(0,c.A)(e)&&(0,c.A)(e.show);this._color=n?e.color.evaluateColor(void 0,this._color):A.A.clone(A.A.WHITE,this._color),this._show=!i||e.show.evaluate(void 0),J(t,this._color)&&this.resetDrawCommands()},q.prototype.applyStyle=function(e){const t=this.type===k.A.TILE_PNTS,n=(0,c.A)(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,i=(0,c.A)(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=(0,c.A)(i)&&(0,c.A)(i[0]);!t||n&&!o?n?(this.featureTables[this.featureTableId].applyStyle(e),$(this)):(this.applyColorAndShow(e),this._styleCommandsNeeded=void 0):this.resetDrawCommands()};const ue=q},224975:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(41476),o=n(430346),r=n(491446),a=n(677354),s=n(605971),A=n(610750),c=n(760866),l=n(598361),u=n(623379);function d(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._metadata=void 0,this._group=void 0,this._ready=!1}function h(e,t,n,i){const r={cull:!1,releaseGltfJson:!0,opaquePass:c.A.CESIUM_3D_TILE,modelMatrix:t.computedTransform,upAxis:e._modelUpAxis,forwardAxis:e._modelForwardAxis,incrementallyLoadTextures:!1,customShader:e.customShader,content:n,colorBlendMode:e.colorBlendMode,colorBlendAmount:e.colorBlendAmount,lightColor:e.lightColor,imageBasedLighting:e.imageBasedLighting,featureIdLabel:e.featureIdLabel,instanceFeatureIdLabel:e.instanceFeatureIdLabel,pointCloudShading:e.pointCloudShading,clippingPlanes:e.clippingPlanes,backFaceCulling:e.backFaceCulling,shadows:e.shadows,showCreditsOnScreen:e.showCreditsOnScreen,splitDirection:e.splitDirection,enableDebugWireframe:e._enableDebugWireframe,debugWireframe:e.debugWireframe,projectTo2D:e._projectTo2D,enablePick:e._enablePick,enableShowOutline:e._enableShowOutline,showOutline:e.showOutline,outlineColor:e.outlineColor};return(0,o.A)(i,r)}Object.defineProperties(d.prototype,{featuresLength:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;return(0,r.A)(t)&&(0,r.A)(t[n])?t[n].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){const e=this._model.statistics;return e.propertyTablesByteLength+e.batchTexturesByteLength}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;if((0,r.A)(t)&&(0,r.A)(t[n]))return t[n]}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),d.prototype.getTextureIds=function(){return this._model.statistics.getTextureIds()},d.prototype.getTextureByteLengthById=function(e){return this._model.statistics.getTextureByteLengthById(e)},d.prototype.getExtension=function(e){return this._model.getExtension(e)},d.prototype.getFeature=function(e){const t=this._model,n=t.featureTableId;if(!(0,r.A)(n))throw new s.A("No feature ID set is selected. Make sure Cesium3DTileset.featureIdLabel or Cesium3DTileset.instanceFeatureIdLabel is defined");const i=t.featureTables[n];if(!(0,r.A)(i))throw new s.A("No feature table found for the selected feature ID set");const o=i.featuresLength;if(!(0,r.A)(e)||e<0||e>=o)throw new s.A(`featureId is required and must be between 0 and featuresLength - 1 (${o-1}).`);return i.getFeature(e)},d.prototype.hasProperty=function(e,t){const n=this._model,i=n.featureTableId;return!!(0,r.A)(i)&&n.featureTables[i].hasProperty(e,t)},d.prototype.applyDebugSettings=function(e,t){t=e?t:i.A.WHITE,0===this.featuresLength?this._model.color=t:(0,r.A)(this.batchTable)&&this.batchTable.setAllColor(t)},d.prototype.applyStyle=function(e){this._model.style=e},d.prototype.update=function(e,t){const n=this._model,i=this._tile;n.colorBlendAmount=e.colorBlendAmount,n.colorBlendMode=e.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=e.customShader,n.featureIdLabel=e.featureIdLabel,n.instanceFeatureIdLabel=e.instanceFeatureIdLabel,n.lightColor=e.lightColor,n.imageBasedLighting=e.imageBasedLighting,n.backFaceCulling=e.backFaceCulling,n.shadows=e.shadows,n.showCreditsOnScreen=e.showCreditsOnScreen,n.splitDirection=e.splitDirection,n.debugWireframe=e.debugWireframe,n.showOutline=e.showOutline,n.outlineColor=e.outlineColor,n.pointCloudShading=e.pointCloudShading;const o=e.clippingPlanes;n.referenceMatrix=e.clippingPlanesOriginMatrix,(0,r.A)(o)&&i.clippingPlanesDirty&&(n._clippingPlanes=o.enabled&&i._isClipped?o:void 0);const a=e.environmentMapManager;n.environmentMapManager!==o&&(n._environmentMapManager=a),(0,r.A)(o)&&(0,r.A)(n._clippingPlanes)&&n._clippingPlanes!==o&&(n._clippingPlanes=o,n._clippingPlanesState=0);const s=e.clippingPolygons;(0,r.A)(s)&&i.clippingPolygonsDirty&&(n._clippingPolygons=s.enabled&&i._isClippedByPolygon?s:void 0),(0,r.A)(s)&&(0,r.A)(n._clippingPolygons)&&n._clippingPolygons!==s&&(n._clippingPolygons=s,n._clippingPolygonsState=0),n.update(t),!this._ready&&n.ready&&(n.activeAnimations.addAll({loop:l.A.REPEAT}),this._ready=!0)},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),(0,a.A)(this)},d.fromGltf=async function(e,t,n,i){const o=new d(e,t,n),r=h(e,t,o,{gltf:i,basePath:n}),a=e.vectorClassificationOnly?void 0:e.classificationType;r.classificationType=a;const s=await u.A.fromGltfAsync(r);return o._model=s,o},d.fromB3dm=async function(e,t,n,i,o){const r=new d(e,t,n),a=h(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),s=e.vectorClassificationOnly?void 0:e.classificationType;a.classificationType=s;const A=await u.A.fromB3dm(a);return r._model=A,r},d.fromI3dm=async function(e,t,n,i,o){const r=new d(e,t,n),a=h(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),s=await u.A.fromI3dm(a);return r._model=s,r},d.fromPnts=async function(e,t,n,i,o){const r=new d(e,t,n),a=h(e,t,r,{arrayBuffer:i,byteOffset:o,resource:n}),s=await u.A.fromPnts(a);return r._model=s,r},d.fromGeoJson=async function(e,t,n,i){const o=new d(e,t,n),r=h(e,t,o,{geoJson:i,resource:n}),a=await u.A.fromGeoJson(r);return o._model=a,o},d.prototype.pick=function(e,t,n){if(!(0,r.A)(this._model)||!this._ready)return;const i=t.verticalExaggeration,o=t.verticalExaggerationRelativeHeight;return this._model.pick(e,t,i,o,A.A.WGS84,n)};const g=d},56241:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(){this.pass=void 0,this.alphaCutoff=void 0}},156621:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(955943),r=n(591978),a=n(598361),s=n(304686),A=n(275670);function c(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=r.A.clone(n.startTime),this._delay=n.delay??0,this._stopTime=r.A.clone(n.stopTime),this.removeOnStop=n.removeOnStop??!1,this._multiplier=n.multiplier??1,this._reverse=n.reverse??!1,this._loop=n.loop??a.A.NONE,this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new o.A,this.update=new o.A,this.stop=new o.A,this._state=s.A.STOPPED,this._computedStartTime=void 0,this._duration=void 0;const c=this;this._raiseStartEvent=function(){c.start.raiseEvent(e,c)},this._updateEventTime=0,this._raiseUpdateEvent=function(){c.update.raiseEvent(e,c,c._updateEventTime)},this._raiseStopEvent=function(){c.stop.raiseEvent(e,c)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,function(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;const o=e._model.sceneGraph,r=e._animation.channels,a=r.length,s=[];for(let c=0;c<a;c++){const a=r[c],l=a.target;if(!(0,i.A)(l))continue;const u=l.node.index,d=o._runtimeNodes[u],h=new A.A({channel:a,runtimeAnimation:e,runtimeNode:d}),g=a.sampler.input;t=Math.min(t,g[0]),n=Math.max(n,g[g.length-1]),s.push(h)}e._runtimeChannels=s,e._localStartTime=t,e._localStopTime=n}(this)}Object.defineProperties(c.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}}),c.prototype.animate=function(e){const t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};const l=c},275670:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(267980),o=n(369031),r=n(931806),a=n(915325),s=n(491446),A=n(961136),c=n(92457),l=n(153127),u=n(995537),d=n(587841),h=n(99479),g=n(259690);const f=u.A.AnimatedPropertyType;function p(e){const t=(e=e??a.A.EMPTY_OBJECT).channel,n=e.runtimeAnimation,i=e.runtimeNode;o.A.typeOf.object("options.channel",t),o.A.typeOf.object("options.runtimeAnimation",n),o.A.typeOf.object("options.runtimeNode",i),this._channel=t,this._runtimeAnimation=n,this._runtimeNode=i,this._splines=[],this._path=void 0,function(e){const t=e._channel,n=t.sampler,i=n.input,o=n.output,r=n.interpolation,a=t.target.path,A=e._runtimeNode,l=function(e,t,n,i,o){const r=[];if(i===f.WEIGHTS){const a=t.length/o;let s,A;for(s=0;s<o;s++){const l=new Array(a);let u=s;if(n===c.A.CUBICSPLINE)for(A=0;A<a;A+=3)l[A]=t[u],l[A+1]=t[u+o],l[A+2]=t[u+2*o],u+=3*o;else for(A=0;A<a;A++)l[A]=t[u],u+=o;r.push(m(e,l,n,i))}}else r.push(m(e,t,n,i));return r}(i,o,r,a,(0,s.A)(A.morphWeights)?A.morphWeights.length:1);e._splines=l,e._path=a}(this)}function m(e,t,n,i){if(1===e.length&&1===t.length)return new r.A(t[0]);switch(n){case c.A.STEP:return new d.A({times:e,points:t});case c.A.CUBICSPLINE:return function(e,t){const n=[],i=[],o=[],r=t.length;for(let e=0;e<r;e+=3)i.push(t[e]),n.push(t[e+1]),o.push(t[e+2]);return i.splice(0,1),o.length=o.length-1,new A.A({times:e,points:n,inTangents:i,outTangents:o})}(e,t);case c.A.LINEAR:return i===f.ROTATION?new g.A({times:e,points:t}):new l.A({times:e,points:t})}}Object.defineProperties(p.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}});const _=new i.A,I=new h.A;p.prototype.animate=function(e){const t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===f.WEIGHTS){const n=o.morphWeights,r=n.length;for(let o=0;o<r;o++){const r=t[o],a=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n[o]=r.evaluate(a)}}else{if(o.userAnimated)return;{const r=t[0],a=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n===f.TRANSLATION||n===f.SCALE?o[n]=r.evaluate(a,_):n===f.ROTATION&&(o[n]=r.evaluate(a,I))}}};const E=p},4773:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(915325),o=n(491446),r=n(605971),a=n(955943),s=n(591978),A=n(367817),c=n(156621),l=n(598361),u=n(304686);function d(e){this.animationAdded=new a.A,this.animationRemoved=new a.A,this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}function h(e,t,n){const i=e._model,o=new c.A(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}Object.defineProperties(d.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}}),d.prototype.add=function(e){e=e??i.A.EMPTY_OBJECT;const t=this._model;if(!t.ready)throw new r.A("Animations are not loaded.  Wait for Model.ready to be true.");const n=t.sceneGraph.components.animations;if(!(0,o.A)(e.name)&&!(0,o.A)(e.index))throw new r.A("Either options.name or options.index must be defined.");if((0,o.A)(e.multiplier)&&e.multiplier<=0)throw new r.A("options.multiplier must be greater than zero.");if((0,o.A)(e.index)&&(e.index>=n.length||e.index<0))throw new r.A("options.index must be a valid animation index.");let a=e.index;if((0,o.A)(a))return h(this,n[a],e);const s=n.length;for(let t=0;t<s;++t)if(n[t].name===e.name){a=t;break}if(!(0,o.A)(a))throw new r.A("options.name must be a valid animation name.");return h(this,n[a],e)},d.prototype.addAll=function(e){e=e??i.A.EMPTY_OBJECT;const t=this._model;if(!t.ready)throw new r.A("Animations are not loaded.  Wait for Model.ready to be true.");if((0,o.A)(e.multiplier)&&e.multiplier<=0)throw new r.A("options.multiplier must be greater than zero.");const n=t.sceneGraph.components.animations,a=[],s=n.length;for(let t=0;t<s;++t){const i=h(this,n[t],e);a.push(i)}return a},d.prototype.remove=function(e){if(!(0,o.A)(e))return!1;const t=this._runtimeAnimations,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0)},d.prototype.removeAll=function(){const e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])},d.prototype.contains=function(e){return!!(0,o.A)(e)&&-1!==this._runtimeAnimations.indexOf(e)},d.prototype.get=function(e){if(!(0,o.A)(e))throw new r.A("index is required.");if(e>=this._runtimeAnimations.length||e<0)throw new r.A("index must be valid within the range of the collection");return this._runtimeAnimations[e]};const g=[];function f(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}d.prototype.update=function(e){const t=this._runtimeAnimations;let n=t.length;if(0===n)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&s.A.equals(e.time,this._previousTime))return!1;this._previousTime=s.A.clone(e.time,this._previousTime);let i=!1;const r=e.time,a=this._model;for(let a=0;a<n;++a){const n=t[a];(0,o.A)(n._computedStartTime)||(n._computedStartTime=s.A.addSeconds(n.startTime??r,n.delay,new s.A)),(0,o.A)(n._duration)||(n._duration=n.localStopTime*(1/n.multiplier));const c=n._computedStartTime,d=n._duration,h=n.stopTime,f=s.A.lessThanOrEquals(c,r),p=(0,o.A)(h)&&s.A.greaterThan(r,h);let m=0;if(0!==d){const e=s.A.secondsDifference(p?h:r,c);m=(0,o.A)(n._animationTime)?n._animationTime(d,e):e/d}const _=n.loop===l.A.REPEAT||n.loop===l.A.MIRRORED_REPEAT,I=(f||_&&!(0,o.A)(n.startTime))&&(m<=1||_)&&!p;if((m!==n._prevAnimationDelta||I===(n._state===u.A.STOPPED))&&(n._prevAnimationDelta=m,I||n._state===u.A.ANIMATING)){if(I&&n._state===u.A.STOPPED&&(n._state=u.A.ANIMATING,n.start.numberOfListeners>0&&e.afterRender.push(n._raiseStartEvent)),n.loop===l.A.REPEAT)m-=Math.floor(m);else if(n.loop===l.A.MIRRORED_REPEAT){const e=Math.floor(m),t=m-e;m=e%2==1?1-t:t}n.reverse&&(m=1-m);let t=m*d*n.multiplier;t=A.A.clamp(t,n.localStartTime,n.localStopTime),n.animate(t),n.update.numberOfListeners>0&&(n._updateEventTime=t,e.afterRender.push(n._raiseUpdateEvent)),i=!0,I||(n._state=u.A.STOPPED,n.stop.numberOfListeners>0&&e.afterRender.push(n._raiseStopEvent),n.removeOnStop&&g.push(n))}}n=g.length;for(let i=0;i<n;++i){const n=g[i];t.splice(t.indexOf(n),1),e.afterRender.push(f(this,a,n))}return g.length=0,i};const p=d},41358:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(915325),r=n(491446),a=n(584164),s=n(647478);function A(e){const t=(e=e??o.A.EMPTY_OBJECT).articulation,n=e.sceneGraph;i.A.typeOf.object("options.articulation",t),i.A.typeOf.object("options.sceneGraph",n),this._articulation=t,this._sceneGraph=n,this._name=t.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,function(e){const t=e.articulation.stages,n=t.length,i=e._runtimeStages,o=e._runtimeStagesByName;for(let r=0;r<n;r++){const n=t[r],a=new s.A({stage:n,runtimeArticulation:e});i.push(a),o[n.name]=a}}(this)}Object.defineProperties(A.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}}),A.prototype.setArticulationStage=function(e,t){const n=this._runtimeStagesByName[e];(0,r.A)(n)&&(n.currentValue=t)};const c=new a.A,l=new a.A;A.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let e,t=a.A.clone(a.A.IDENTITY,c);const n=this._runtimeStages,i=n.length;for(e=0;e<i;e++)t=n[e].applyStageToMatrix(t);const o=this._runtimeNodes,r=o.length;for(e=0;e<r;e++){const n=o[e],i=a.A.multiplyTransformation(n.originalTransform,t,l);n.transform=i}};const u=A},647478:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(794282),o=n(267980),r=n(367817),a=n(369031),s=n(915325),A=n(331185),c=n(584164);const l=r.A.EPSILON16;function u(e){const t=(e=e??s.A.EMPTY_OBJECT).stage,n=e.runtimeArticulation;a.A.typeOf.object("options.stage",t),a.A.typeOf.object("options.runtimeArticulation",n),this._stage=t,this._runtimeArticulation=n,this._name=t.name,this._type=t.type,this._minimumValue=t.minimumValue,this._maximumValue=t.maximumValue,this._currentValue=t.initialValue}Object.defineProperties(u.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(e){a.A.typeOf.number("value",e),e=r.A.clamp(e,this.minimumValue,this.maximumValue),r.A.equalsEpsilon(this._currentValue,e,l)||(this._currentValue=e,this.runtimeArticulation._dirty=!0)}}});const d=new o.A,h=new A.A;u.prototype.applyStageToMatrix=function(e){a.A.typeOf.object("result",e);const t=this.type,n=this.currentValue,o=d;let s;switch(t){case i.A.XROTATE:s=A.A.fromRotationX(r.A.toRadians(n),h),e=c.A.multiplyByMatrix3(e,s,e);break;case i.A.YROTATE:s=A.A.fromRotationY(r.A.toRadians(n),h),e=c.A.multiplyByMatrix3(e,s,e);break;case i.A.ZROTATE:s=A.A.fromRotationZ(r.A.toRadians(n),h),e=c.A.multiplyByMatrix3(e,s,e);break;case i.A.XTRANSLATE:o.x=n,o.y=0,o.z=0,e=c.A.multiplyByTranslation(e,o,e);break;case i.A.YTRANSLATE:o.x=0,o.y=n,o.z=0,e=c.A.multiplyByTranslation(e,o,e);break;case i.A.ZTRANSLATE:o.x=0,o.y=0,o.z=n,e=c.A.multiplyByTranslation(e,o,e);break;case i.A.XSCALE:o.x=n,o.y=1,o.z=1,e=c.A.multiplyByScale(e,o,e);break;case i.A.YSCALE:o.x=1,o.y=n,o.z=1,e=c.A.multiplyByScale(e,o,e);break;case i.A.ZSCALE:o.x=1,o.y=1,o.z=n,e=c.A.multiplyByScale(e,o,e);break;case i.A.UNIFORMSCALE:e=c.A.multiplyByUniformScale(e,n,e)}return e};const g=u},303036:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(434067),o=n(711284),r=n(430346),a=n(41476),s=n(403139),A=n(624512);const c={name:"ModelClippingPlanesPipelineStage"},l=new i.A;c.process=function(e,t,n){const i=t.clippingPlanes,c=n.context,u=e.shaderBuilder;u.addDefine("HAS_CLIPPING_PLANES",void 0,A.A.FRAGMENT),u.addDefine("CLIPPING_PLANES_LENGTH",i.length,A.A.FRAGMENT),i.unionClippingRegions&&u.addDefine("UNION_CLIPPING_REGIONS",void 0,A.A.FRAGMENT),o.A.useFloatTexture(c)&&u.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,A.A.FRAGMENT);const d=o.A.getTextureResolution(i,c,l);u.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",d.x,A.A.FRAGMENT),u.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",d.y,A.A.FRAGMENT),u.addUniform("sampler2D","model_clippingPlanes",A.A.FRAGMENT),u.addUniform("vec4","model_clippingPlanesEdgeStyle",A.A.FRAGMENT),u.addUniform("mat4","model_clippingPlanesMatrix",A.A.FRAGMENT),u.addFragmentLines(s.A);const h={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){const e=a.A.clone(i.edgeColor);return e.alpha=i.edgeWidth,e},model_clippingPlanesMatrix:function(){return t._clippingPlanesMatrix}};e.uniformMap=(0,r.A)(h,e.uniformMap)};const u=c},855692:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(430346),o=n(212143),r=n(521791),a=n(624512);const s={name:"ModelClippingPolygonsPipelineStage",process:function(e,t,n){const s=t.clippingPolygons,A=e.shaderBuilder;A.addDefine("ENABLE_CLIPPING_POLYGONS",void 0,a.A.BOTH),s.inverse&&A.addDefine("CLIPPING_INVERSE",void 0,a.A.FRAGMENT),A.addDefine("CLIPPING_POLYGON_REGIONS_LENGTH",s.extentsCount,a.A.BOTH),A.addUniform("sampler2D","model_clippingDistance",a.A.FRAGMENT),A.addUniform("sampler2D","model_clippingExtents",a.A.VERTEX),A.addVarying("vec2","v_clippingPosition"),A.addVarying("int","v_regionIndex","flat"),A.addVertexLines(o.A),A.addFragmentLines(r.A);const c={model_clippingDistance:function(){return s.clippingTexture??n.context.defaultTexture},model_clippingExtents:function(){return s.extentsTexture??n.context.defaultTexture}};e.uniformMap=(0,i.A)(c,e.uniformMap)}}},542614:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(428027),o=n(430346),r=n(325161),a=n(760866),s=n(624512);const A={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend",process:function(e,t,n){const c=e.shaderBuilder;c.addDefine("HAS_MODEL_COLOR",void 0,s.A.FRAGMENT),c.addFragmentLines(r.A);const l={},u=t.color;0!==u.alpha||t.hasSilhouette(n)||(e.renderStateOptions.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),u.alpha<1&&(e.alphaOptions.pass=a.A.TRANSLUCENT),c.addUniform("vec4",A.COLOR_UNIFORM_NAME,s.A.FRAGMENT),l[A.COLOR_UNIFORM_NAME]=function(){return t.color},c.addUniform("float",A.COLOR_BLEND_UNIFORM_NAME,s.A.FRAGMENT),l[A.COLOR_BLEND_UNIFORM_NAME]=function(){return i.A.getColorBlend(t.colorBlendMode,t.colorBlendAmount)},e.uniformMap=(0,o.A)(l,e.uniformMap)}},c=A},270316:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(660662),o=n(434067),r=n(367817),a=n(369031),s=n(376758),A=n(915325),c=n(491446),l=n(584164),u=n(352581),d=n(377496),h=n(760866),g=n(40118),f=n(200646),p=n(527083),m=n(62467),_=n(988609),I=n(938987),E=n(896464),y=n(138151),C=n(942836);function b(e){const t=(e=e??A.A.EMPTY_OBJECT).command,n=e.primitiveRenderResources;a.A.typeOf.object("options.command",t),a.A.typeOf.object("options.primitiveRenderResources",n);const o=n.model;this._model=o;const r=n.runtimePrimitive;this._runtimePrimitive=r;const s=t.pass===h.A.TRANSLUCENT,c=!r.primitive.material.doubleSided&&!s,u=n.hasSilhouette,d=!s&&!u,g=n.hasSkipLevelOfDetail&&!s,f=u;this._command=t,this._modelMatrix=l.A.clone(t.modelMatrix),this._boundingVolume=i.A.clone(t.boundingVolume),this._modelMatrix2D=new l.A,this._boundingVolume2D=new i.A,this._modelMatrix2DDirty=!1,this._backFaceCulling=t.renderState.cull.enabled,this._cullFace=t.renderState.cull.face,this._shadows=o.shadows,this._debugShowBoundingVolume=t.debugShowBoundingVolume,this._usesBackFaceCulling=c,this._needsTranslucentCommand=d,this._needsSkipLevelOfDetailCommands=g,this._needsSilhouetteCommands=f,this._originalCommand=void 0,this._translucentCommand=void 0,this._skipLodBackfaceCommand=void 0,this._skipLodStencilCommand=void 0,this._silhouetteModelCommand=void 0,this._silhouetteColorCommand=void 0,this._derivedCommands=[],this._has2DCommands=!1,function(e){const t=e._command;t.modelMatrix=e._modelMatrix,t.boundingVolume=e._boundingVolume;const n=e._model,i=e._usesBackFaceCulling,o=e._derivedCommands;e._originalCommand=new B({command:t,updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0,is2D:!1}),o.push(e._originalCommand),e._needsTranslucentCommand&&(e._translucentCommand=new B({command:S(t),updateShadows:!0,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!0}),o.push(e._translucentCommand)),e._needsSkipLevelOfDetailCommands&&(e._skipLodBackfaceCommand=new B({command:Q(t),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:i,updateDebugShowBoundingVolume:!1}),e._skipLodStencilCommand=new B({command:N(t),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),o.push(e._skipLodBackfaceCommand),o.push(e._skipLodStencilCommand)),e._needsSilhouetteCommands&&(e._silhouetteModelCommand=new B({command:x(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),e._silhouetteColorCommand=new B({command:D(t,n),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!1}),o.push(e._silhouetteModelCommand),o.push(e._silhouetteColorCommand))}(this)}function B(e){this.command=e.command,this.updateShadows=e.updateShadows,this.updateBackFaceCulling=e.updateBackFaceCulling,this.updateCullFace=e.updateCullFace,this.updateDebugShowBoundingVolume=e.updateDebugShowBoundingVolume,this.is2D=e.is2D??!1,this.derivedCommand2D=void 0}function v(e,t,n){e.push(t.command),n&&e.push(t.derivedCommand2D.command)}function w(e,t){if(t.mode!==m.A.SCENE2D||e.model._projectTo2D)return!1;const n=e.model.sceneGraph._boundingSphere2D,i=n.center.y-n.radius,o=n.center.y+n.radius,a=t.mapProjection.ellipsoid.maximumRadius*r.A.PI;return i<a&&o>a||i<-a&&o>-a}function T(e,t){if(!(0,c.A)(t))return;const n=B.clone(t),i=d.A.shallowClone(t.command);return i.modelMatrix=e._modelMatrix2D,i.boundingVolume=e._boundingVolume2D,n.command=i,n.updateShadows=!1,n.is2D=!0,t.derivedCommand2D=n,e._derivedCommands.push(n),n}function S(e){const t=d.A.shallowClone(e);t.pass=h.A.TRANSLUCENT;const n=(0,s.A)(e.renderState,!0);return n.cull.enabled=!1,n.depthMask=!1,n.blending=f.A.ALPHA_BLEND,t.renderState=g.A.fromCache(n),t}function x(e,t){const n=t._silhouetteId%255,i=d.A.shallowClone(e),o=(0,s.A)(e.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:u.A.ALWAYS,backFunction:u.A.ALWAYS,reference:n,mask:-1,frontOperation:{fail:u.A.KEEP,zFail:u.A.KEEP,zPass:u.A.REPLACE},backOperation:{fail:u.A.KEEP,zFail:u.A.KEEP,zPass:u.A.REPLACE}},t.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),i.renderState=g.A.fromCache(o),i}function D(e,t){const n=t._silhouetteId%255,i=d.A.shallowClone(e),o=(0,s.A)(e.renderState,!0);o.cull.enabled=!1,(e.pass===h.A.TRANSLUCENT||t.silhouetteColor.alpha<1)&&(i.pass=h.A.TRANSLUCENT,o.depthMask=!1,o.blending=f.A.ALPHA_BLEND),o.stencilTest={enabled:!0,frontFunction:u.A.NOTEQUAL,backFunction:u.A.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:u.A.KEEP,zFail:u.A.KEEP,zPass:u.A.KEEP},backOperation:{fail:u.A.KEEP,zFail:u.A.KEEP,zPass:u.A.KEEP}};const r=(0,s.A)(e.uniformMap);return r.model_silhouettePass=function(){return!0},i.renderState=g.A.fromCache(o),i.uniformMap=r,i.castShadows=!1,i.receiveShadows=!1,i}function Q(e){const t=d.A.shallowClone(e),n=(0,s.A)(e.renderState,!0);n.cull.enabled=!0,n.cull.face=p.A.FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5};const i=(0,s.A)(t.uniformMap),r=new o.A(5,5);return i.u_polygonOffset=function(){return r},t.renderState=g.A.fromCache(n),t.uniformMap=i,t.castShadows=!1,t.receiveShadows=!1,t}function N(e){const t=d.A.shallowClone(e),n=(0,s.A)(e.renderState,!0),{stencilTest:i}=n;return i.enabled=!0,i.mask=I.A.SKIP_LOD_MASK,i.reference=I.A.CESIUM_3D_TILE_MASK,i.frontFunction=E.A.GREATER_OR_EQUAL,i.frontOperation.zPass=y.A.REPLACE,i.backFunction=E.A.GREATER_OR_EQUAL,i.backOperation.zPass=y.A.REPLACE,n.stencilMask=I.A.CESIUM_3D_TILE_MASK|I.A.SKIP_LOD_MASK,t.renderState=g.A.fromCache(n),t}B.clone=function(e){return new B({command:e.command,updateShadows:e.updateShadows,updateBackFaceCulling:e.updateBackFaceCulling,updateCullFace:e.updateCullFace,updateDebugShowBoundingVolume:e.updateDebugShowBoundingVolume,is2D:e.is2D,derivedCommand2D:e.derivedCommand2D})},Object.defineProperties(b.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=l.A.clone(e,this._modelMatrix),this._modelMatrix2DDirty=!0,this._boundingVolume=i.A.transform(this.runtimePrimitive.boundingSphere,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},shadows:{get:function(){return this._shadows},set:function(e){this._shadows=e,function(e){const t=e.shadows,n=_.A.castShadows(t),i=_.A.receiveShadows(t),o=e._derivedCommands;for(let e=0;e<o.length;++e){const t=o[e];if(t.updateShadows){const e=t.command;e.castShadows=n,e.receiveShadows=i}}}(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,function(e){const t=e.backFaceCulling,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];if(i.updateBackFaceCulling){const e=i.command,n=(0,s.A)(e.renderState,!0);n.cull.enabled=t,e.renderState=g.A.fromCache(n)}}}(this))}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,function(e){const t=e.cullFace,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];if(i.updateCullFace){const e=i.command,n=(0,s.A)(e.renderState,!0);n.cull.face=t,e.renderState=g.A.fromCache(n)}}}(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolume=e,function(e){const t=e.debugShowBoundingVolume,n=e._derivedCommands;for(let e=0;e<n.length;++e){const i=n[e];i.updateDebugShowBoundingVolume&&(i.command.debugShowBoundingVolume=t)}}(this))}}}),b.prototype.pushCommands=function(e,t){const n=w(this,e);var o;n&&!this._has2DCommands&&(T(o=this,o._originalCommand),T(o,o._translucentCommand),T(o,o._skipLodBackfaceCommand),T(o,o._skipLodStencilCommand),T(o,o._silhouetteModelCommand),T(o,o._silhouetteColorCommand),this._has2DCommands=!0,this._modelMatrix2DDirty=!0),this._modelMatrix2DDirty&&(function(e,t){const n=e._modelMatrix;e._modelMatrix2D=l.A.clone(n,e._modelMatrix2D),e._modelMatrix2D[13]-=2*r.A.sign(n[13])*r.A.PI*t.mapProjection.ellipsoid.maximumRadius,e._boundingVolume2D=i.A.transform(e.runtimePrimitive.boundingSphere,e._modelMatrix2D,e._boundingVolume2D)}(this,e),this._modelMatrix2DDirty=!1);const a=this.model.styleCommandsNeeded;if(!this._needsTranslucentCommand||!(0,c.A)(a)||(a!==C.A.ALL_OPAQUE&&v(t,this._translucentCommand,n),a!==C.A.ALL_TRANSLUCENT)){if(this._needsSkipLevelOfDetailCommands){const{tileset:e,tile:i}=this._model.content;if(e.hasMixedContent)return i._finalResolution||v(e._backfaceCommands,this._skipLodBackfaceCommand,n),function(e,t,n){const i=e._skipLodStencilCommand,o=i.command,r=t._selectionDepth,a=function(e){return(e.renderState.stencilTest.reference&I.A.SKIP_LOD_MASK)>>>I.A.SKIP_LOD_BIT_SHIFT}(o);if(r!==a){const e=function(e){return I.A.CESIUM_3D_TILE_MASK|e<<I.A.SKIP_LOD_BIT_SHIFT}(r),t=(0,s.A)(o.renderState,!0);t.stencilTest.reference=e,o.renderState=g.A.fromCache(t),n&&(i.derivedCommand2D.renderState=t)}}(this,i,n),void v(t,this._skipLodStencilCommand,n)}if(!this._needsSilhouetteCommands)return v(t,this._originalCommand,n),t;v(t,this._silhouetteModelCommand,n)}},b.prototype.pushSilhouetteCommands=function(e,t){const n=w(this,e);return v(t,this._silhouetteColorCommand,n),t};const R=b},652259:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(660662),o=n(376758),r=n(491446),a=n(584164),s=n(377496),A=n(40118),c=n(62467),l=n(988609),u=n(899700),d=n(270316),h=n(508380),g=n(501782),f=n(261126),p=n(471147),m=n(605971);function _(){}_.buildModelDrawCommand=function(e,t){const n=function(e,t,n){t.addVertexLines(g.A),t.addFragmentLines(f.A);const i=e.model,o=t.buildShaderProgram(n.context);return i._pipelineResources.push(o),o}(e,e.shaderBuilder,t),_=function(e,t,n){const u=function(e){const t=e.wireframeIndexBuffer;if((0,r.A)(t))return t;const n=e.indices;if((0,r.A)(n)){if(!(0,r.A)(n.buffer))throw new m.A("Indices must be provided as a Buffer");return n.buffer}}(e),d=new h.A({context:n.context,indexBuffer:u,attributes:e.attributes}),g=e.model;g._pipelineResources.push(d);const f=e.alphaOptions.pass,_=g.sceneGraph,I=n.mode===c.A.SCENE3D;let E,y;if(I||n.scene3DOnly||!g._projectTo2D){const t=I?_._computedModelMatrix:_._computedModelMatrix2D;E=a.A.multiplyTransformation(t,e.runtimeNode.computedTransform,new a.A),y=i.A.transform(e.boundingSphere,E)}else E=a.A.multiplyTransformation(_._computedModelMatrix,e.runtimeNode.computedTransform,new a.A),y=e.runtimePrimitive.boundingSphere2D;let C=(0,o.A)(A.A.fromCache(e.renderStateOptions),!0);C.cull.face=p.A.getCullFace(E,e.primitiveType),C=A.A.fromCache(C);const b=(0,r.A)(g.classificationType),B=!b&&l.A.castShadows(g.shadows),v=!b&&l.A.receiveShadows(g.shadows),w=b?void 0:e.pickId;return new s.A({boundingVolume:y,modelMatrix:E,uniformMap:e.uniformMap,renderState:C,vertexArray:d,shaderProgram:t,cull:g.cull,pass:f,count:e.count,owner:g,pickId:w,pickMetadataAllowed:!0,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:g.debugShowBoundingVolume,castShadows:B,receiveShadows:v})}(e,n,t),I=e.model;return(0,r.A)(I.classificationType)?new u.A({primitiveRenderResources:e,command:_}):new d.A({primitiveRenderResources:e,command:_})};const I=_},242893:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(41476),o=n(491446);function r(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return(0,o.A)(this._color)||(this._color=new i.A),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}}),r.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)},r.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)},r.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)},r.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)},r.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};const a=r},947129:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(653565),o=n(622569),r=n(369031),a=n(41476),s=n(491446),A=n(677354),c=n(242893),l=n(942836),u=n(226827);function d(e){const t=e.model,n=e.propertyTable;r.A.typeOf.object("propertyTable",n),r.A.typeOf.object("model",t),this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=l.A.ALL_OPAQUE,function(e){const t=e._model,n=u.A.is3DTiles(t.type),r=e._propertyTable.count;if(0===r)return;let a;const s=new Array(r);if(n){const e=t.content;for(a=0;a<r;a++)s[a]=new o.A(e,a)}else for(a=0;a<r;a++)s[a]=new c.A({model:t,featureId:a,featureTable:e});e._features=s,e._featuresLength=r,e._batchTexture=new i.A({featuresLength:r,owner:e,statistics:n?t.content.tileset.statistics:void 0})}(this)}Object.defineProperties(d.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return(0,s.A)(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}}),d.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);const t=l.A.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)},d.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},d.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},d.prototype.getShow=function(e){return this._batchTexture.getShow(e)},d.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},d.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},d.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},d.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)},d.prototype.getFeature=function(e){return this._features[e]},d.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)},d.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)},d.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)},d.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)},d.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)},d.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)},d.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)},d.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)},d.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};const h=new a.A;d.prototype.applyStyle=function(e){if(!(0,s.A)(e))return this.setAllColor(i.A.DEFAULT_COLOR_VALUE),void this.setAllShow(i.A.DEFAULT_SHOW_VALUE);for(let t=0;t<this._featuresLength;t++){const n=this.getFeature(t),o=(0,s.A)(e.color)?e.color.evaluateColor(n,h)??i.A.DEFAULT_COLOR_VALUE:i.A.DEFAULT_COLOR_VALUE,r=(0,s.A)(e.show)?e.show.evaluate(n)??i.A.DEFAULT_SHOW_VALUE:i.A.DEFAULT_SHOW_VALUE;this.setColor(t,o),this.setShow(t,r)}},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,A.A)(this)};const g=d},701111:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(491446),r=n(677354),a=n(605971),s=n(509830),A=n(17728);const c=class{constructor(e){i.A.defined("model",e),this._model=e,this._modelPrimitiveImageries=void 0,this._imageryConfigurations=[]}update(e){i.A.defined("frameState",e),this._hasImagery&&this._allImageryLayersReady&&((0,o.A)(this._modelPrimitiveImageries)||(this._modelPrimitiveImageries=this._createModelPrimitiveImageries()),this._updateModelPrimitiveImageries(e),this._checkForModifiedImageryConfigurations())}_createModelPrimitiveImageries(){const e=this._model,t=this._collectRuntimeNodesAndPrimitives(),n=[],i=t.length;for(let o=0;o<i;o++){const i=t[o],r=i.runtimeNode,a=i.runtimePrimitive,s=new A.A(e,r,a);a.primitive.modelPrimitiveImagery=s,n.push(s)}return n}_collectRuntimeNodesAndPrimitives(){const e=this._model.sceneGraph._runtimeNodes,t=[];for(let n=0;n<e.length;n++){const i=e[n];if((0,o.A)(i))for(let e=0;e<i.runtimePrimitives.length;e++){const n=i.runtimePrimitives[e];t.push({runtimeNode:i,runtimePrimitive:n})}}return t}_updateModelPrimitiveImageries(e){if(i.A.defined("frameState",e),!(0,o.A)(this._modelPrimitiveImageries))throw new a.A("The modelPrimitiveImageries have not been created");const t=this._modelPrimitiveImageries,n=t.length;for(let i=0;i<n;i++)t[i].update(e)}_deleteModelPrimitiveImageries(){const e=this._modelPrimitiveImageries;if(!(0,o.A)(e))return;const t=e.length;for(let n=0;n<t;n++)e[n].destroy();delete this._modelPrimitiveImageries}get ready(){return!this._hasImagery||!!this._allImageryLayersReady&&!!this._allModelPrimitiveImageriesReady}get _hasImagery(){const e=this._model.imageryLayers;return(0,o.A)(e)&&e.length>0}get _allImageryLayersReady(){if(!this._hasImagery)return!0;const e=this._model.imageryLayers,t=e.length;for(let n=0;n<t;n++)if(!e.get(n).ready)return!1;return!0}get _allModelPrimitiveImageriesReady(){const e=this._modelPrimitiveImageries;if(!(0,o.A)(e))return!1;const t=e.length;for(let n=0;n<t;n++)if(!e[n].ready)return!1;return!0}_checkForModifiedImageryConfigurations(){this._imageryConfigurationsModified()&&(this._updateImageryConfigurations(),this._model.resetDrawCommands())}_imageryConfigurationsModified(){const e=this._model.imageryLayers,t=this._imageryConfigurations;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++){const i=e.get(n),o=t[n];if(i.show!==o.show)return!0;if(i.alpha!==o.alpha)return!0;if(i.brightness!==o.brightness)return!0;if(i.contrast!==o.contrast)return!0;if(i.hue!==o.hue)return!0;if(i.saturation!==o.saturation)return!0;if(i.gamma!==o.gamma)return!0;if(i.colorToAlpha!==o.colorToAlpha)return!0}return!1}_updateImageryConfigurations(){const e=this._model.imageryLayers,t=this._imageryConfigurations;t.length=e.length;for(let n=0;n<e.length;n++){const i=e.get(n);t[n]=new s.A(i)}}isDestroyed(){return!1}destroy(){if(!this.isDestroyed())return this._deleteModelPrimitiveImageries(),(0,r.A)(this)}}},112497:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(491446),o=n(434067),r=n(267980),a=n(584164),s=n(697422),A=n(336946),c=n(647934),l=n(571804),u=n(369031),d=n(730839),h=n(949020),g=n(595826);class f{static createTextureCoordinatesForMappedPositions(e,t){u.A.defined("mappedPositions",e),u.A.defined("projection",t);const n=e.cartographicPositions,i=e.cartographicBoundingRectangle,o=e.numPositions;return f._createTextureCoordinates(n,o,i,t)}static _createTextureCoordinates(e,t,n,i){u.A.defined("cartographicPositions",e),u.A.typeOf.number.greaterThanOrEquals("numPositions",t,0),u.A.defined("cartographicBoundingRectangle",n),u.A.defined("projection",i);const o=new c.A;c.A.fromRectangle(n,i,o);const r=f.createProjectedPositions(e,i),a=f.computeTexCoords(r,o);return f.createTypedArrayFromCartesians2(t,a)}static createTextureCoordinatesAttributeForMappedPositions(e,t){u.A.defined("mappedPositions",e),u.A.defined("projection",t);const n=f.createTextureCoordinatesForMappedPositions(e,t);return f.createTexCoordAttribute(n)}static createCartographicPositions(e,t,n){u.A.defined("primitivePositionAttribute",e),u.A.defined("primitivePositionTransform",t),u.A.defined("ellipsoid",n);const i=h.A.readAttributeAsTypedArray(e),o=e.type,r=d.A.getNumberOfComponents(o),a=f.createIterableCartesian3FromTypedArray(i,r),s=f.transformCartesians3(a,t);return f.transformToCartographic(s,n)}static createIterableCartesian3FromTypedArray(e,t){u.A.defined("typedArray",e),u.A.typeOf.number.greaterThanOrEquals("stride",t,3);const n=new r.A,i=e.length/t;return{[Symbol.iterator]:function*(){for(let o=0;o<i;o++)n.x=e[o*t+0],n.y=e[o*t+1],n.z=e[o*t+2],yield n}}}static map(e,t){return u.A.defined("iterable",e),u.A.defined("mapper",t),{[Symbol.iterator]:function*(){for(const n of e)yield t(n)}}}static computeCartographicBoundingRectangle(e,t){u.A.defined("cartographicPositions",e),(0,i.A)(t)||(t=new s.A);let n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(const t of e)n=Math.max(n,t.latitude),o=Math.min(o,t.latitude),r=Math.max(r,t.longitude),a=Math.min(a,t.longitude);return t.north=n,t.south=o,t.east=r,t.west=a,t}static transformCartesians3(e,t){u.A.defined("positions",e),u.A.defined("matrix",t);const n=new r.A;return f.map(e,e=>(a.A.multiplyByPoint(t,e,n),n))}static transformToCartographic(e,t){u.A.defined("positions",e),u.A.defined("ellipsoid",t);const n=new A.A;return f.map(e,e=>(t.cartesianToCartographic(e,n),n))}static createProjectedPositions(e,t){u.A.defined("cartographicPositions",e),u.A.defined("projection",t);const n=new r.A;return f.map(e,e=>(t.project(e,n),n))}static computeTexCoords(e,t){u.A.defined("positions",e),u.A.defined("boundingRectangle",t);const n=new o.A,i=1/t.width,r=1/t.height;return f.map(e,e=>{const o=(e.x-t.x)*i,a=(e.y-t.y)*r,s=Math.min(Math.max(o,0),1),A=Math.min(Math.max(a,0),1);return n.x=s,n.y=A,n})}static createTypedArrayFromCartesians2(e,t){u.A.typeOf.number.greaterThanOrEquals("numElements",e,0),u.A.defined("elements",t);const n=new Float32Array(2*e);let i=0;for(const e of t)n[2*i+0]=e.x,n[2*i+1]=e.y,i++;return n}static createTexCoordAttribute(e){return u.A.defined("texCoordsTypedArray",e),{name:"Imagery Texture Coordinates",semantic:g.A.TEXCOORD,setIndex:0,componentDatatype:l.A.FLOAT,type:d.A.VEC2,normalized:!1,count:e.length/2,min:void 0,max:void 0,constant:new o.A(0,0),quantization:void 0,typedArray:e,byteOffset:0,byteStride:void 0}}}const p=f},127329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(915325),o=n(10803);const r=function(e){e=e??i.A.EMPTY_OBJECT,this.lightingModel=e.lightingModel??o.A.UNLIT}},657685:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(584164),o=n(471147),r=n(62467);const a={};function s(e,t,n){e.modelMatrix=i.A.multiplyTransformation(t,n,e.modelMatrix),e.cullFace=o.A.getCullFace(e.modelMatrix,e.primitiveType)}function A(e,t,n,o){let r;o=i.A.multiplyTransformation(o,e.transform,new i.A),e.updateComputedTransform();const a=e.runtimePrimitives.length;for(r=0;r<a;r++)s(e.runtimePrimitives[r].drawCommand,n,o);const c=e.children.length;for(r=0;r<c;r++){const a=t._runtimeNodes[e.children[r]];a._transformToRoot=i.A.clone(o,a._transformToRoot),A(a,t,n,o),a._transformDirty=!1}}a.name="ModelMatrixUpdateStage",a.update=function(e,t,n){const i=n.mode!==r.A.SCENE3D;i&&t._model._projectTo2D||!e._transformDirty||(A(e,t,i?t._computedModelMatrix2D:t._computedModelMatrix,e.transformToRoot),e._transformDirty=!1)};const c=a},922167:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(491446);function r(e,t){i.A.typeOf.object("model",e),i.A.typeOf.object("runtimeNode",t),this._model=e,this._runtimeNode=t}Object.defineProperties(r.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(e){this._runtimeNode.show=e}},matrix:{get:function(){return this._runtimeNode.transform},set:function(e){(0,o.A)(e)?(this._runtimeNode.transform=e,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});const a=r},17728:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(491446),o=n(605971),r=n(584164),a=n(369031),s=n(677354),A=n(921243),c=n(890692),l=n(112497),u=n(471147),d=n(736355),h=n(641613),g=n(442790);class f{constructor(e,t,n){a.A.defined("model",e),a.A.defined("runtimeNode",t),a.A.defined("runtimePrimitive",n),this._model=e,this._runtimeNode=t,this._runtimePrimitive=n,this._mappedPositionsPerEllipsoid=void 0,this._mappedPositionsModelMatrix=new r.A,this._lastImageryLayersModificationCounter=0,this._imageryTexCoordAttributesPerProjection=void 0,this._currentImageryLayers=void 0,this._coveragesPerLayer=void 0,this._allImageriesReady=!1}coveragesForImageryLayer(e){const t=this._model.imageryLayers.indexOf(e);if(-1===t)throw new o.A("Imagery layer is not part of the model");const n=this._coveragesPerLayer;if(!(0,i.A)(n))throw new o.A("The coveragesPerLayer have not been computed yet");return n[t]}update(e){a.A.defined("frameState",e);const t=this._model,n=t.content.tileset.imageryLayersModificationCounter;this._lastImageryLayersModificationCounter!==n&&(delete this._mappedPositionsPerEllipsoid,this._lastImageryLayersModificationCounter=n),this._mappedPositionsNeedUpdate&&(t.resetDrawCommands(),this._mappedPositionsPerEllipsoid=this._computeMappedPositionsPerEllipsoid(),this._deleteCoveragesPerLayer(),this._destroyImageryTexCoordAttributes()),(0,i.A)(this._imageryTexCoordAttributesPerProjection)||(this._imageryTexCoordAttributesPerProjection=this._computeImageryTexCoordsAttributesPerProjection(),this._uploadImageryTexCoordAttributes(e.context)),(0,i.A)(this._coveragesPerLayer)||(this._computeCoveragesPerLayer(),this._allImageriesReady=!1),this._allImageriesReady||this._updateImageries(e)}_deleteCoveragesPerLayer(){const e=this._coveragesPerLayer;if(!(0,i.A)(e))return;const t=this._currentImageryLayers,n=e.length;for(let i=0;i<n;i++){const n=t[i],o=e[i];this._deleteCoverages(n,o)}delete this._currentImageryLayers,delete this._coveragesPerLayer}_deleteCoverages(e,t){if(e.isDestroyed())return;const n=t.length;for(let e=0;e<n;e++)t[e].imagery.releaseReference()}_uploadImageryTexCoordAttributes(e){a.A.defined("context",e);const t=this._imageryTexCoordAttributesPerProjection;if(!(0,i.A)(t))return;const n=t.length;for(let i=0;i<n;i++){const n=t[i],o=h.A.createVertexBuffer({context:e,typedArray:n.typedArray,usage:g.A.STATIC_DRAW});o.vertexArrayDestroyable=!1,n.buffer=o}}_destroyImageryTexCoordAttributes(){const e=this._imageryTexCoordAttributesPerProjection;if(!(0,i.A)(e))return;const t=e.length;for(let n=0;n<t;n++){const t=e[n];(0,i.A)(t)&&((0,i.A)(t.buffer)&&(t.buffer.isDestroyed()||t.buffer.destroy()),e[n]=void 0)}delete this._imageryTexCoordAttributesPerProjection}get _mappedPositionsNeedUpdate(){if(!(0,i.A)(this._mappedPositionsPerEllipsoid))return!0;const e=this._model,t=this._mappedPositionsModelMatrix;return!r.A.equals(e.modelMatrix,t)}_computeMappedPositionsPerEllipsoid(){const e=this._model,t=this._runtimeNode,n=this._runtimePrimitive,i=f._obtainPrimitivePositionAttribute(n.primitive),o=i.count,a=f._computePrimitivePositionTransform(e,t,void 0),s=[],A=f._computeUniqueEllipsoids(e.imageryLayers),c=A.length;for(let e=0;e<c;e++){const t=A[e],n=l.A.createCartographicPositions(i,a,t),r=l.A.computeCartographicBoundingRectangle(n),c=new d.A(n,o,r,t);s.push(c)}return r.A.clone(e.modelMatrix,this._mappedPositionsModelMatrix),s}static _computeUniqueEllipsoids(e){a.A.defined("imageryLayers",e);const t=new Set,n=e.length;for(let i=0;i<n;i++){const n=e.get(i),o=f._getEllipsoid(n);t.add(o)}return[...t]}_computeImageryTexCoordsAttributesPerProjection(){const e=this._model.imageryLayers,t=f._extractProjections(e),n=[...new Set(t)];return this._createImageryTexCoordAttributes(n)}static _extractProjections(e){a.A.defined("imageryLayers",e);const t=[],n=e.length;for(let i=0;i<n;i++){const n=e.get(i),o=f._getProjection(n);t.push(o)}return t}static _getProjection(e){return a.A.defined("imageryLayer",e),e.imageryProvider.tilingScheme.projection}_createImageryTexCoordAttributes(e){a.A.defined("uniqueProjections",e);const t=[],n=e.length;for(let i=0;i<n;i++){const n=e[i],o=n.ellipsoid,r=this.mappedPositionsForEllipsoid(o),a=l.A.createTextureCoordinatesAttributeForMappedPositions(r,n);t.push(a)}return t}_computeCoveragesPerLayer(){const e=[],t=[],n=this._model.imageryLayers,i=n.length;for(let o=0;o<i;o++){const i=n.get(o),r=this._computeCoverage(i);e.push(r),t.push(i)}this._coveragesPerLayer=e,this._currentImageryLayers=t}_computeCoverage(e){const t=this.mappedPositionsForImageryLayer(e).cartographicBoundingRectangle,n=this._computeImageryLevel(e,t);return c.A.createImageryCoverages(t,e,n)}_computeImageryLevel(e,t){const n=e.imageryProvider,i=n.tilingScheme.rectangle;let o=t.width,r=i.width;t.height>t.width&&(o=t.height,r=i.height);const a=Math.log2(1*r/o);return c.A._clampImageryLevel(n,a)}_updateImageries(e){const t=this._model,n=this._coveragesPerLayer,i=n.length;let o=!0;for(let t=0;t<i;t++){const i=n[t],r=i.length;for(let t=0;t<r;t++){const n=i[t].imagery;n.state===A.A.READY||n.state===A.A.FAILED||n.state===A.A.INVALID||(o=!1,n.processStateMachine(e,!1,!1))}}o&&t.resetDrawCommands(),this._allImageriesReady=o}mappedPositionsForImageryLayer(e){const t=f._getEllipsoid(e);return this.mappedPositionsForEllipsoid(t)}mappedPositionsForEllipsoid(e){const t=this._mappedPositionsPerEllipsoid;if(!(0,i.A)(t))throw new o.A("The mappedPositions have not been computed yet");const n=t.length;for(let i=0;i<n;i++){const n=t[i];if(n.ellipsoid===e)return n}throw new o.A(`Could not find mapped positions for ellipsoid ${e}`)}imageryTexCoordAttributesPerProjection(){const e=this._imageryTexCoordAttributesPerProjection;if(!(0,i.A)(e))throw new o.A("The imagery texture coordinate attributes have not been computed yet");return this._imageryTexCoordAttributesPerProjection}get ready(){const e=this._coveragesPerLayer;return!!(0,i.A)(e)&&this._allImageriesReady}isDestroyed(){return!1}destroy(){if(!this.isDestroyed())return this._deleteCoveragesPerLayer(),this._destroyImageryTexCoordAttributes(),(0,s.A)(this)}static _computePrimitivePositionTransform(e,t,n){a.A.defined("model",e),a.A.defined("runtimeNode",t),(0,i.A)(n)||(n=new r.A);const o=e.sceneGraph;return r.A.clone(r.A.IDENTITY,n),r.A.multiply(n,e.modelMatrix,n),r.A.multiply(n,o.components.transform,n),r.A.multiply(n,o.axisCorrectionMatrix,n),r.A.multiply(n,t.computedTransform,n),n}static _obtainPrimitivePositionAttribute(e){a.A.defined("primitive",e);const t=u.A.getAttributeBySemantic(e,"POSITION");if(!(0,i.A)(t))throw new o.A("The primitive does not have a POSITION attribute");return t}static _getEllipsoid(e){return e.imageryProvider.tilingScheme.projection.ellipsoid}}const p=f},949020:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(369031),o=n(491446),r=n(434067),a=n(267980),s=n(626809),A=n(605971),c=n(571804),l=n(961645),u=n(874915),d=n(402330),h=n(584164),g=n(730839);class f{static readAttributeAsTypedArray(e){i.A.defined("attribute",e);const t=f.readAttributeAsRawCompactTypedArray(e),n=e.normalized,r=e.quantization;if(!(0,o.A)(r)&&!n)return t;const a=e.type,s=e.count;let A=t;return n&&(A=l.A.dequantize(t,e.componentDatatype,a,s)),(0,o.A)(r)?f.dequantize(A,s,a,r):A}static readAttributeAsRawCompactTypedArray(e){i.A.defined("attribute",e);const t=e.type,n=e.count,r=g.A.getNumberOfComponents(t),a=n*r;let s=e.componentDatatype;const A=e.quantization;(0,o.A)(A)&&(s=A.componentDatatype);const l=e.buffer,u=e.byteOffset,d=e.byteStride,h=r*c.A.getSizeInBytes(s);if(!(0,o.A)(d)||d===h){const e=c.A.createTypedArray(s,a);return l.getBufferData(e,u),e}const p=new Uint8Array(l.sizeInBytes);l.getBufferData(p);const m=c.A.createTypedArray(s,a),_=d??h,I=new DataView(p.buffer,p.byteOffset,p.byteLength),E=new Array(r),y=f.createComponentsReader(s);for(let e=0;e<n;++e){y(I,u+e*_,r,E);for(let t=0;t<r;++t)m[e*r+t]=E[t]}return m}static dequantize(e,t,n,o){if(i.A.defined("quantizedTypedArray",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),i.A.defined("elementType",n),i.A.defined("quantization",o),o.octEncoded){const n=f.octDecode(e,t,o.normalizationRange,void 0);return o.octEncodedZXY&&f.convertZxyToXyz(n,n),n}const r=o.quantizedVolumeStepSize,a=o.quantizedVolumeOffset;if(n===g.A.SCALAR)return f.dequantize1D(e,t,r,a,void 0);if(n===g.A.VEC2)return f.dequantize2D(e,t,r,a,void 0);if(n===g.A.VEC3)return f.dequantize3D(e,t,r,a,void 0);if(n===g.A.VEC4)return f.dequantize4D(e,t,r,a,void 0);throw new A.A(`Element type for dequantization must be SCALAR, VEC2, VEC3, or VEC4, but is ${n}`)}static octDecode(e,t,n,r){i.A.defined("quantizedTypedArray",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),i.A.typeOf.number.greaterThan("normalizationRange",n,0),(0,o.A)(r)||(r=new Float32Array(e.length));const s=new a.A;for(let i=0;i<t;i++)a.A.unpack(e,3*i,s),l.A.octDecodeInRange(s,n,s),a.A.pack(r,s,3*i);return r}static convertZxyToXyz(e,t,n){i.A.defined("input",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),(0,o.A)(n)||(n=new Float32Array(e.length));let r=0;for(let i=0;i<t;i++,r+=3){const t=e[r+0],i=e[r+1],o=e[r+2];n[r+0]=i,n[r+1]=o,n[r+2]=t}return n}static dequantize1D(e,t,n,r,a){i.A.defined("quantizedTypedArray",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),i.A.defined("stepSize",n),i.A.defined("offset",r),(0,o.A)(a)||(a=new Float32Array(e.length));for(let i=0;i<t;i++){const t=e[i]*n+r;a[i]=t}return a}static dequantize2D(e,t,n,a,s){i.A.defined("quantizedTypedArray",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),i.A.defined("stepSize",n),i.A.defined("offset",a),(0,o.A)(s)||(s=new Float32Array(e.length));const A=new r.A;for(let i=0;i<t;i++)r.A.unpack(e,2*i,A),r.A.multiplyComponents(A,n,A),r.A.add(A,a,A),r.A.pack(A,s,2*i);return s}static dequantize3D(e,t,n,r,s){i.A.defined("quantizedTypedArray",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),i.A.defined("stepSize",n),i.A.defined("offset",r),(0,o.A)(s)||(s=new Float32Array(e.length));const A=new a.A;for(let i=0;i<t;i++)a.A.unpack(e,3*i,A),a.A.multiplyComponents(A,n,A),a.A.add(A,r,A),a.A.pack(A,s,3*i);return s}static dequantize4D(e,t,n,r,a){i.A.defined("quantizedTypedArray",e),i.A.typeOf.number.greaterThanOrEquals("elementCount",t,0),i.A.defined("stepSize",n),i.A.defined("offset",r),(0,o.A)(a)||(a=new Float32Array(e.length));const A=new s.A;for(let i=0;i<t;i++)s.A.unpack(e,4*i,A),s.A.multiplyComponents(A,n,A),s.A.add(A,r,A),s.A.pack(A,a,4*i);return a}static createComponentsReader(e){const t=f.createComponentReader(e),n=c.A.getSizeInBytes(e);return function(e,i,o,r){let a=i;for(let i=0;i<o;++i)r[i]=t(e,a),a+=n}}static createComponentReader(e){switch(e){case c.A.BYTE:return function(e,t){return e.getInt8(t)};case c.A.UNSIGNED_BYTE:return function(e,t){return e.getUint8(t)};case c.A.SHORT:return function(e,t){return e.getInt16(t,!0)};case c.A.UNSIGNED_SHORT:return function(e,t){return e.getUint16(t,!0)};case c.A.INT:return function(e,t){return e.getInt32(t,!0)};case c.A.UNSIGNED_INT:return function(e,t){return e.getUint32(t,!0)};case c.A.FLOAT:return function(e,t){return e.getFloat32(t,!0)};case c.A.DOUBLE:return function(e,t){return e.getFloat64(t,!0)}}throw new A.A(`The componentType must be a valid ComponentDatatype, but is ${e}`)}static transform3D(e,t,n){i.A.defined("input",e),i.A.defined("matrix",t),(0,o.A)(n)||(n=new Float32Array(e.length));const r=new a.A,s=e.length/3;for(let i=0;i<s;i++)a.A.unpack(e,3*i,r),h.A.multiplyByPoint(t,r,r),a.A.pack(r,n,3*i);return n}static readIndicesAsTypedArray(e){const t=e.typedArray;if((0,o.A)(t))return t;const n=e.buffer,i=e.count,r=e.indexDatatype,a=f.createIndexTypedArray(r,i);return n.getBufferData(a),a}static readIndicesAsTriangleIndicesTypedArray(e,t){const n=f.readIndicesAsTypedArray(e);if(t===d.A.TRIANGLES)return n;if(t===d.A.TRIANGLE_STRIP)return f.convertTriangleStripToTriangleIndices(n);if(t===d.A.TRIANGLE_FAN)return f.convertTriangleFanToTriangleIndices(n);throw new A.A(`The primitiveType must be TRIANGLES (${d.A.TRIANGLES}, TRIANGLE_STRIP (${d.A.TRIANGLE_STRIP}, or TRIANGLE_FAN (${d.A.TRIANGLE_FAN}, but is ${t}`)}static convertTriangleStripToTriangleIndices(e){const t=e.constructor(3*(e.length-2));for(let n=0;n<e.length-2;n++)n%2==1?(t[3*n+0]=e[n+0],t[3*n+1]=e[n+2],t[3*n+2]=e[n+1]):(t[3*n+0]=e[n+0],t[3*n+1]=e[n+1],t[3*n+2]=e[n+2]);return t}static convertTriangleFanToTriangleIndices(e){const t=e.constructor(3*(e.length-2));for(let n=0;n<e.length-2;n++)t[3*n+0]=e[n+0],t[3*n+1]=e[n+1],t[3*n+2]=e[n+2];return t}static createIndexTypedArray(e,t){switch(i.A.typeOf.number.greaterThanOrEquals("size",t,0),e){case u.A.UNSIGNED_BYTE:return new Uint8Array(t);case u.A.UNSIGNED_SHORT:return new Uint16Array(t);case u.A.UNSIGNED_INT:return new Uint32Array(t)}throw new A.A(`The indexDatatype must be UNSIGNED_BYTE (${u.A.UNSIGNED_BYTE}, UNSIGNED_SHORT (${u.A.UNSIGNED_SHORT}, or UNSIGNED_INT (${u.A.UNSIGNED_INT}, but is ${e}`)}}const p=f},136426:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(56241),r=n(40118),a=n(469635),s=n(523721);const A=function(e){i.A.typeOf.object("model",e),this.shaderBuilder=new a.A,this.model=e,this.uniformMap={},this.alphaOptions=new o.A,this.renderStateOptions=r.A.getState(r.A.fromCache({depthTest:{enabled:!0,func:s.A.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1,this.nodeRenderResources=[]}},885251:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(267980),o=n(369031),r=n(915325),a=n(491446),s=n(605971),A=n(584164),c=n(884842),l=n(99479),u=n(281810),d=n(657685),h=n(799395);function g(e){const t=(e=e??r.A.EMPTY_OBJECT).node,n=e.transform,i=e.transformToRoot,s=e.sceneGraph,l=e.children;o.A.typeOf.object("options.node",t),o.A.typeOf.object("options.transform",n),o.A.typeOf.object("options.transformToRoot",i),o.A.typeOf.object("options.sceneGraph",s),o.A.typeOf.object("options.children",l),this._node=t,this._name=t.name,this._id=t.index,this._sceneGraph=s,this._children=l,this._originalTransform=A.A.clone(n,this._originalTransform),this._transform=A.A.clone(n,this._transform),this._transformToRoot=A.A.clone(i,this._transformToRoot),this._computedTransform=new A.A,this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTranslationMin=void 0,this.instancingTranslationMax=void 0,this.instancingTransformsBuffer=void 0,this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,this.instancingReferencePoint2D=void 0,function(e){const t=e.transform,n=e.transformToRoot,i=e._computedTransform;e._computedTransform=A.A.multiply(n,t,i);const o=e.node;(0,a.A)(o.matrix)||(e._transformParameters=new c.A(o.translation,o.rotation,o.scale)),(0,a.A)(o.morphWeights)&&(e._morphWeights=o.morphWeights.slice());const r=o.articulationName;if((0,a.A)(r)){const t=e.sceneGraph._runtimeArticulations[r];(0,a.A)(t)&&t.runtimeNodes.push(e)}}(this)}function f(e,t){e._transformDirty=!0,e._transform=A.A.fromTranslationRotationScale(t,e._transform)}Object.defineProperties(g.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(e){this._transformDirty=!0,this._transform=A.A.clone(e,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return(0,a.A)(this._transformParameters)?this._transformParameters.translation:void 0},set:function(e){const t=this._transformParameters;if(!(0,a.A)(t))throw new s.A("The translation of a node cannot be set if it was defined using a matrix in the model.");const n=t.translation;i.A.equals(n,e)||(t.translation=i.A.clone(e,t.translation),f(this,t))}},rotation:{get:function(){return(0,a.A)(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(e){const t=this._transformParameters;if(!(0,a.A)(t))throw new s.A("The rotation of a node cannot be set if it was defined using a matrix in the model.");const n=t.rotation;l.A.equals(n,e)||(t.rotation=l.A.clone(e,t.rotation),f(this,t))}},scale:{get:function(){return(0,a.A)(this._transformParameters)?this._transformParameters.scale:void 0},set:function(e){const t=this._transformParameters;if(!(0,a.A)(t))throw new s.A("The scale of a node cannot be set if it was defined using a matrix in the model.");const n=t.scale;i.A.equals(n,e)||(t.scale=i.A.clone(e,t.scale),f(this,t))}},morphWeights:{get:function(){return this._morphWeights},set:function(e){const t=e.length;if(this._morphWeights.length!==t)throw new s.A("value must have the same length as the original weights array.");for(let n=0;n<t;n++)this._morphWeights[n]=e[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}}),g.prototype.getChild=function(e){if(o.A.typeOf.number("index",e),e<0||e>=this.children.length)throw new s.A("index must be greater than or equal to 0 and less than the number of children.");return this.sceneGraph._runtimeNodes[this.children[e]]},g.prototype.configurePipeline=function(){const e=this.node,t=this.pipelineStages;t.length=0;const n=this.updateStages;n.length=0,(0,a.A)(e.instances)&&t.push(u.A),t.push(h.A),n.push(d.A)},g.prototype.updateComputedTransform=function(){this._computedTransform=A.A.multiply(this._transformToRoot,this._transform,this._computedTransform)},g.prototype.updateJointMatrices=function(){const e=this._runtimeSkin;if(!(0,a.A)(e))return;e.updateJointMatrices();const t=this._computedJointMatrices,n=e.jointMatrices,i=n.length;for(let e=0;e<i;e++){(0,a.A)(t[e])||(t[e]=new A.A);const i=A.A.multiplyTransformation(this.transformToRoot,this.transform,t[e]),o=A.A.inverseTransformation(i,t[e]);t[e]=A.A.multiplyTransformation(o,n[e],t[e])}};const p=g},850210:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(369031),o=n(915325),r=n(491446),a=n(402330),s=n(62467),A=n(19120),c=n(186919),l=n(662274),u=n(212642),d=n(212525),h=n(381508),g=n(13916),f=n(598073),p=n(320578),m=n(391648),_=n(817082),I=n(193497),E=n(963564),y=n(64389),C=n(471147),b=n(163010),B=n(601945),v=n(752709),w=n(366413),T=n(531218),S=n(252843),x=n(391852),D=n(456727),Q=n(641882),N=n(6214),R=n(983884);function M(e){const t=(e=e??o.A.EMPTY_OBJECT).primitive,n=e.node,r=e.model;i.A.typeOf.object("options.primitive",t),i.A.typeOf.object("options.node",n),i.A.typeOf.object("options.model",r),this.primitive=t,this.node=n,this.model=r,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}M.prototype.configurePipeline=function(e){const t=this.pipelineStages;t.length=0;const n=this.primitive,i=this.node,o=this.model,M=o.customShader,L=o.style,P=e.context.webgl2,O=e.mode!==s.A.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,F=1!==e.verticalExaggeration&&o.hasVerticalExaggeration,U=(0,r.A)(n.morphTargets)&&n.morphTargets.length>0,k=(0,r.A)(i.skin),G=(0,r.A)(o.imageryLayers),H=(0,r.A)(M),V=!(H&&(0,r.A)(M.fragmentShaderText))||M.mode!==d.A.REPLACE_MATERIAL,z=C.A.hasQuantizedAttributes(n.attributes),j=o.debugWireframe&&a.A.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||P),Y=o.pointCloudShading,q=(0,r.A)(Y)&&Y.attenuation,W=(0,r.A)(Y)&&Y.backFaceCulling,J=n.primitiveType===a.A.POINTS&&((0,r.A)(L)||q||W),K=o._enableShowOutline&&(0,r.A)(n.outlineCoordinates),X=function(e,t,n){let i;return(0,r.A)(t.instances)&&(i=C.A.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,r.A)(i))?{hasFeatureIds:!0,hasPropertyTable:(0,r.A)(i.propertyTableId)}:(i=C.A.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),(0,r.A)(i)?{hasFeatureIds:!0,hasPropertyTable:(0,r.A)(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}(o,i,n),Z=(0,r.A)(o.classificationType);O&&t.push(S.A),t.push(p.A),j&&t.push(N.A),Z&&t.push(l.A),U&&t.push(b.A),k&&t.push(D.A),J&&t.push(v.A),z&&t.push(g.A),G&&(K?(0,R.A)("outlines-and-draping","Primitive outlines disable imagery draping"):t.push(m.A)),V&&t.push(I.A),t.push(f.A),t.push(y.A),t.push(E.A),X.hasPropertyTable&&(t.push(x.A),t.push(c.A),t.push(u.A)),F&&t.push(Q.A),H&&t.push(h.A),t.push(_.A),o.allowPicking&&t.push(B.A),K&&t.push(w.A),t.push(A.A),t.push(T.A)};const L=M},814071:(e,t,n)=>{"use strict";n.d(t,{A:()=>X});var i=n(660662),o=n(267980),r=n(369031),a=n(915325),s=n(491446),A=n(584164),c=n(543622),l=n(62467),u=n(913419),d=n(807048),h=n(538198),g=n(3282),f=n(41358),p=n(542614),m=n(303036),_=n(855692),I=n(922167),E=n(885251),y=n(850210),C=n(496854),b=n(471147),B=n(136426),v=n(746761),w=n(566258),T=n(226827),S=n(604883),x=n(214666),D=n(652259),Q=n(702247);function N(e){const t=(e=e??a.A.EMPTY_OBJECT).modelComponents;r.A.typeOf.object("options.model",e.model),r.A.typeOf.object("options.modelComponents",t),this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=A.A.clone(A.A.IDENTITY),this._computedModelMatrix2D=A.A.clone(A.A.IDENTITY),this._axisCorrectionMatrix=b.A.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new A.A),this._runtimeArticulations={},function(e){const t=e._components,n=t.scene;R(e,e._model.modelMatrix);const i=t.articulations,o=i.length,r=e._runtimeArticulations;for(let t=0;t<o;t++){const n=i[t],o=new f.A({articulation:n,sceneGraph:e});r[o.name]=o}const a=t.nodes,s=a.length;e._runtimeNodes=new Array(s);const c=n.nodes.length,l=A.A.IDENTITY;for(let t=0;t<c;t++){const i=L(e,n.nodes[t],l);e._rootNodes.push(i)}const u=t.skins,d=e._runtimeSkins,h=u.length;for(let t=0;t<h;t++){const n=u[t];d.push(new C.A({skin:n,sceneGraph:e}))}const g=e._skinnedNodes,p=g.length;for(let t=0;t<p;t++){const n=g[t],i=e._runtimeNodes[n],o=a[n].skin.index;i._runtimeSkin=d[o],i.updateJointMatrices()}e.applyArticulations()}(this)}function R(e,t){const n=e._components,i=e._model;e._computedModelMatrix=A.A.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=A.A.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=A.A.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}Object.defineProperties(N.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});const M=new o.A;function L(e,t,n){const i=[],o=b.A.getNodeTransform(t),r=t.children.length;for(let a=0;a<r;a++){const r=L(e,t.children[a],A.A.multiplyTransformation(n,o,new A.A));i.push(r)}const a=new E.A({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),c=t.primitives.length;for(let n=0;n<c;n++)a.runtimePrimitives.push(new y.A({primitive:t.primitives[n],node:t,model:e._model}));const l=t.index;e._runtimeNodes[l]=a,(0,s.A)(t.skin)&&e._skinnedNodes.push(l);const u=t.name;if((0,s.A)(u)){const t=e._model,n=new I.A(t,a);t._nodesByName[u]=n}return l}const P=new o.A,O=new o.A,F=new o.A,U=new o.A;function k(e,t,n,i,o){if(n&&!t.show)return;const r=t.children.length;for(let a=0;a<r;a++)k(e,t.getChild(a),n,i,o);const a=t.runtimePrimitives,s=a.length;for(let e=0;e<s;e++)i(a[e],o)}function G(e,t,n,i){const o=e._rootNodes,r=o.length;for(let a=0;a<r;a++){const r=o[a];k(e,e._runtimeNodes[r],t,n,i)}}N.prototype.buildDrawCommands=function(e){const t=this.buildRenderResources(e);this.computeBoundingVolumes(t),this.createDrawCommands(t,e)},N.prototype.buildRenderResources=function(e){const t=this._model,n=new B.A(t);t.statistics.clear(),this.configurePipeline(e);const i=this.modelPipelineStages;for(let o=0;o<i.length;o++)i[o].process(n,t,e);for(let t=0;t<this._runtimeNodes.length;t++){const i=this._runtimeNodes[t];if(!(0,s.A)(i))continue;i.configurePipeline();const o=i.pipelineStages,r=new S.A(n,i);n.nodeRenderResources[t]=r;for(let t=0;t<o.length;t++)o[t].process(r,i.node,e);for(let t=0;t<i.runtimePrimitives.length;t++){const n=i.runtimePrimitives[t];n.configurePipeline(e);const o=n.pipelineStages,a=new x.A(r,n);r.primitiveRenderResources[t]=a;for(let t=0;t<o.length;t++)o[t].process(a,n.primitive,e)}}return n},N.prototype.computeBoundingVolumes=function(e){const t=this._model,n=o.A.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,P),r=o.A.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,O);for(let t=0;t<this._runtimeNodes.length;t++){const a=this._runtimeNodes[t];if(!(0,s.A)(a))continue;const c=e.nodeRenderResources[t],l=a.computedTransform;for(let e=0;e<a.runtimePrimitives.length;e++){const t=a.runtimePrimitives[e],s=c.primitiveRenderResources[e];t.boundingSphere=i.A.clone(s.boundingSphere,new i.A);const u=A.A.multiplyByPoint(l,s.positionMin,F),d=A.A.multiplyByPoint(l,s.positionMax,U);o.A.minimumByComponent(n,u,n),o.A.maximumByComponent(r,d,r)}}this._boundingSphere=i.A.fromCornerPoints(n,r,new i.A),this._boundingSphere=i.A.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=i.A.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=i.A.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale},N.prototype.createDrawCommands=function(e,t){for(let n=0;n<this._runtimeNodes.length;n++){const i=this._runtimeNodes[n];if(!(0,s.A)(i))continue;const o=e.nodeRenderResources[n];for(let e=0;e<i.runtimePrimitives.length;e++){const n=i.runtimePrimitives[e],r=o.primitiveRenderResources[e],a=D.A.buildModelDrawCommand(r,t);n.drawCommand=a}}},N.prototype.configurePipeline=function(e){const t=this.modelPipelineStages;t.length=0;const n=this._model,i=e.fog.enabled&&e.fog.renderable;(0,s.A)(n.color)&&t.push(p.A),(0,s.A)(n.classificationType)||(n.imageBasedLighting.enabled&&t.push(g.A),n.isClippingEnabled()&&t.push(m.A),n.isClippingPolygonsEnabled()&&t.push(_.A),n.hasSilhouette(e)&&t.push(v.A),(0,s.A)(n.splitDirection)&&n.splitDirection!==u.A.NONE&&t.push(w.A),T.A.is3DTiles(n.type)&&t.push(d.A),i&&t.push(h.A))},N.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){const r=this._runtimeNodes[n];if(!(0,s.A)(r))continue;for(i=0;i<r.updateStages.length;i++)r.updateStages[i].update(r,this,e);const a=e.mode!==l.A.SCENE3D&&this._model._projectTo2D;for(t&&!a&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){const e=r.runtimePrimitives[i];for(o=0;o<e.updateStages.length;o++)e.updateStages[o].update(e,this)}}},N.prototype.updateModelMatrix=function(e,t){R(this,e),t.mode!==l.A.SCENE3D&&function(e,t){const n=e._computedModelMatrix,r=A.A.getTranslation(n,M);if(o.A.equals(r,o.A.ZERO)){const i=e.boundingSphere.center,o=c.A.ellipsoidTo2DModelMatrix(t.mapProjection,i,e._computedModelMatrix2D);e._computedModelMatrix2D=A.A.multiply(o,n,e._computedModelMatrix2D)}else e._computedModelMatrix2D=c.A.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);e._boundingSphere2D=i.A.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}(this,t);const n=this._rootNodes;for(let e=0;e<n.length;e++)this._runtimeNodes[n[e]]._transformDirty=!0},N.prototype.updateJointMatrices=function(){const e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){const t=e[n];this._runtimeNodes[t].updateJointMatrices()}};const H={backFaceCulling:void 0};function V(e,t){e.drawCommand.backFaceCulling=t.backFaceCulling}N.prototype.updateBackFaceCulling=function(e){const t=H;t.backFaceCulling=e,G(this,!1,V,t)};const z={shadowMode:void 0};function j(e,t){e.drawCommand.shadows=t.shadowMode}N.prototype.updateShadows=function(e){const t=z;t.shadowMode=e,G(this,!1,j,t)};const Y={debugShowBoundingVolume:void 0};function q(e,t){e.drawCommand.debugShowBoundingVolume=t.debugShowBoundingVolume}N.prototype.updateShowBoundingVolume=function(e){const t=Y;t.debugShowBoundingVolume=e,G(this,!1,q,t)};const W=[],J={frameState:void 0,hasSilhouette:void 0};function K(e,t){const n=t.frameState,i=t.hasSilhouette,o=n.passes,r=W,a=e.drawCommand;a.pushCommands(n,n.commandList),i&&!o.pick&&a.pushSilhouetteCommands(n,r)}N.prototype.pushDrawCommands=function(e){const t=W;t.length=0;const n=J;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,G(this,!0,K,n),(0,Q.A)(e.commandList,t)},N.prototype.setArticulationStage=function(e,t){const n=e.split(" ");if(2!==n.length)return;const i=n[0],o=n[1],r=this._runtimeArticulations[i];(0,s.A)(r)&&r.setArticulationStage(o,t)},N.prototype.applyArticulations=function(){const e=this._runtimeArticulations;for(const t in e)e.hasOwnProperty(t)&&e[t].apply()};const X=N},746761:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(430346),o=n(491446),r=n(624512),a=n(221334),s=n(980678);const A={name:"ModelSilhouettePipelineStage",silhouettesLength:0,process:function(e,t,n){(0,o.A)(t._silhouetteId)||(t._silhouetteId=++A.silhouettesLength);const c=e.shaderBuilder;c.addDefine("HAS_SILHOUETTE",void 0,r.A.BOTH),c.addVertexLines(s.A),c.addFragmentLines(a.A),c.addUniform("vec4","model_silhouetteColor",r.A.FRAGMENT),c.addUniform("float","model_silhouetteSize",r.A.VERTEX),c.addUniform("bool","model_silhouettePass",r.A.BOTH);const l={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=(0,i.A)(l,e.uniformMap),e.hasSilhouette=!0}},c=A},496854:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(584164),o=n(369031),r=n(915325);function a(e){e=e??r.A.EMPTY_OBJECT,o.A.typeOf.object("options.skin",e.skin),o.A.typeOf.object("options.sceneGraph",e.sceneGraph),this._sceneGraph=e.sceneGraph;const t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],function(e){const t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;const o=t.joints,r=o.length,a=e.sceneGraph._runtimeNodes,A=e.joints,c=e._jointMatrices;for(let e=0;e<r;e++){const t=a[o[e].index];A.push(t);const r=s(t,n[e],new i.A);c.push(r)}}(this)}function s(e,t,n){const o=i.A.multiplyTransformation(e.transformToRoot,e.transform,n);return i.A.multiplyTransformation(o,t,n)}Object.defineProperties(a.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}}),a.prototype.updateJointMatrices=function(){const e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){const t=this.joints[n],i=this.inverseBindMatrices[n];e[n]=s(t,i,e[n])}};const A=a},566258:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(430346),o=n(768601),r=n(624512);const a={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection",process:function(e,t,n){const s=e.shaderBuilder;s.addDefine("HAS_MODEL_SPLITTER",void 0,r.A.FRAGMENT),s.addFragmentLines(o.A);const A={};s.addUniform("float",a.SPLIT_DIRECTION_UNIFORM_NAME,r.A.FRAGMENT),A[a.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=(0,i.A)(A,e.uniformMap)}},s=a},650884:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(288787),o=n(369031);function r(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdByteLengths={},this._batchTextureIdMap=new i.A}Object.defineProperties(r.prototype,{batchTexturesByteLength:{get:function(){const e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values;let n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}}),r.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdByteLengths={},this._batchTextureIdMap.removeAll()},r.prototype.addBuffer=function(e,t){if(o.A.typeOf.object("buffer",e),o.A.typeOf.bool("hasCpuCopy",t),!this._bufferIdSet.hasOwnProperty(e._id)){const n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0},r.prototype.addTexture=function(e){o.A.typeOf.object("texture",e),this._textureIdByteLengths.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes,this._textureIdByteLengths[e._id]=e.sizeInBytes)},r.prototype.getTextureIds=function(){return Object.keys(this._textureIdByteLengths)},r.prototype.getTextureByteLengthById=function(e){return this._textureIdByteLengths[e]},r.prototype.addBatchTexture=function(e){o.A.typeOf.object("batchTexture",e),this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};const a=r},226827:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(605971);const r={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON",is3DTiles:function(e){switch(i.A.typeOf.string("modelType",e),e){case r.TILE_GLTF:case r.TILE_B3DM:case r.TILE_I3DM:case r.TILE_PNTS:case r.TILE_GEOJSON:return!0;case r.GLTF:return!1;default:throw new o.A("modelType is not a valid value.")}}},a=Object.freeze(r)},471147:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(491446),r=n(584164),a=n(99479),s=n(123245),A=n(320475),c=n(730839),l=n(595826),u=n(527083),d=n(402330),h=n(331185);function g(){}g.getError=function(e,t,n){let i=`Failed to load ${e}: ${t}`;(0,o.A)(n)&&(0,o.A)(n.message)&&(i+=`\n${n.message}`);const r=new s.A(i);return(0,o.A)(n)&&(r.stack=`Original stack:\n${n.stack}\nHandler stack:\n${r.stack}`),r},g.getNodeTransform=function(e){return(0,o.A)(e.matrix)?e.matrix:r.A.fromTranslationQuaternionRotationScale((0,o.A)(e.translation)?e.translation:i.A.ZERO,(0,o.A)(e.rotation)?e.rotation:a.A.IDENTITY,(0,o.A)(e.scale)?e.scale:i.A.ONE)},g.getAttributeBySemantic=function(e,t,n){const i=e.attributes,r=i.length;for(let e=0;e<r;++e){const r=i[e],a=!(0,o.A)(n)||r.setIndex===n;if(r.semantic===t&&a)return r}},g.getAttributeByName=function(e,t){const n=e.attributes,i=n.length;for(let e=0;e<i;++e){const i=n[e];if(i.name===t)return i}},g.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.positionalLabel===t||i.label===t)return i}},g.hasQuantizedAttributes=function(e){if(!(0,o.A)(e))return!1;for(let t=0;t<e.length;t++){const n=e[t];if((0,o.A)(n.quantization))return!0}return!1},g.getAttributeInfo=function(e){const t=e.semantic,n=e.setIndex;let i,r=!1;(0,o.A)(t)?(i=l.A.getVariableName(t,n),r=!0):(i=e.name,i=i.replace(/^_/,""),i=i.toLowerCase());const a=/^color_\d+$/.test(i),s=e.type;let A=c.A.getGlslType(s);a&&(A="vec4");const u=(0,o.A)(e.quantization);let d;return u&&(d=a?"vec4":c.A.getGlslType(e.quantization.type)),{attribute:e,isQuantized:u,variableName:i,hasSemantic:r,glslType:A,quantizedGlslType:d}};const f=new i.A,p=new i.A;g.getPositionMinMax=function(e,t,n){const r=g.getAttributeBySemantic(e,"POSITION");let a=r.max,s=r.min;return(0,o.A)(n)&&(0,o.A)(t)&&(s=i.A.add(s,t,p),a=i.A.add(a,n,f)),{min:s,max:a}},g.getAxisCorrectionMatrix=function(e,t,n){return n=r.A.clone(r.A.IDENTITY,n),e===A.A.Y?n=r.A.clone(A.A.Y_UP_TO_Z_UP,n):e===A.A.X&&(n=r.A.clone(A.A.X_UP_TO_Z_UP,n)),t===A.A.Z&&(n=r.A.multiplyTransformation(n,A.A.Z_UP_TO_X_UP,n)),n};const m=new h.A;g.getCullFace=function(e,t){if(!d.A.isTriangles(t))return u.A.BACK;const n=r.A.getMatrix3(e,m);return h.A.determinant(n)<0?u.A.FRONT:u.A.BACK},g.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,"_");return t=t.replace(/^gl_/,""),/^\d/.test(t)&&(t=`_${t}`),t},g.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_implicit_cylinder_region:!0,EXT_implicit_ellipsoid_region:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_primitive_voxels:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_implicit_shapes:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_specular:!0,KHR_materials_anisotropy:!0,KHR_materials_clearcoat:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_techniques_webgl:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0,KHR_gaussian_splatting:!0,KHR_gaussian_splatting_compression_spz_2:!0,KHR_spz_gaussian_splats_compression:!0,WEB3D_quantized_attributes:!0},g.checkSupportedExtensions=function(e){const t=e.length;for(let n=0;n<t;n++){const t=e[n];if(!g.supportedExtensions[t])throw new s.A(`Unsupported glTF Extension: ${t}`)}};const _=g},163010:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(730839),o=n(430346),r=n(491446),a=n(624512),s=n(828077),A=n(595826);const c={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,a.A.VERTEX),function(e){e.addFunction(c.FUNCTION_ID_GET_MORPHED_POSITION,c.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,a.A.VERTEX);e.addFunctionLines(c.FUNCTION_ID_GET_MORPHED_POSITION,["vec3 morphedPosition = position;"]),e.addFunction(c.FUNCTION_ID_GET_MORPHED_NORMAL,c.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,a.A.VERTEX);e.addFunctionLines(c.FUNCTION_ID_GET_MORPHED_NORMAL,["vec3 morphedNormal = normal;"]),e.addFunction(c.FUNCTION_ID_GET_MORPHED_TANGENT,c.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,a.A.VERTEX);e.addFunctionLines(c.FUNCTION_ID_GET_MORPHED_TANGENT,["vec3 morphedTangent = tangent;"])}(n);const i=t.morphTargets.length;for(let n=0;n<i;n++){const i=t.morphTargets[n].attributes,o=i.length;for(let t=0;t<o;t++){const o=i[t],r=o.semantic;r!==A.A.POSITION&&r!==A.A.NORMAL&&r!==A.A.TANGENT||(u(e,o,e.attributeIndex,n),e.attributeIndex++)}}!function(e){e.addFunctionLines(c.FUNCTION_ID_GET_MORPHED_POSITION,["return morphedPosition;"]);e.addFunctionLines(c.FUNCTION_ID_GET_MORPHED_NORMAL,["return morphedNormal;"]);e.addFunctionLines(c.FUNCTION_ID_GET_MORPHED_TANGENT,["return morphedTangent;"])}(n);const r=e.runtimeNode.morphWeights.length;n.addUniform("float",`u_morphWeights[${r}]`,a.A.VERTEX),n.addVertexLines(s.A);const l={u_morphWeights:function(){return e.runtimeNode.morphWeights}};e.uniformMap=(0,o.A)(l,e.uniformMap)}},l={attributeString:void 0,functionId:void 0};function u(e,t,n,o){const a=e.shaderBuilder;!function(e,t,n){const o={index:n,value:(0,r.A)(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:i.A.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};e.attributes.push(o)}(e,t,n);const s=function(e,t){switch(e.semantic){case A.A.POSITION:t.attributeString="Position",t.functionId=c.FUNCTION_ID_GET_MORPHED_POSITION;break;case A.A.NORMAL:t.attributeString="Normal",t.functionId=c.FUNCTION_ID_GET_MORPHED_NORMAL;break;case A.A.TANGENT:t.attributeString="Tangent",t.functionId=c.FUNCTION_ID_GET_MORPHED_TANGENT}return t}(t,l);!function(e,t,n){const i=t.attributeString,o=`a_target${i}_${n}`,r=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;e.addAttribute("vec3",o),e.addFunctionLines(t.functionId,[r])}(a,s,o)}const d=c},604883:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(369031),o=n(376758);const r=function(e,t){i.A.typeOf.object("modelRenderResources",e),i.A.typeOf.object("runtimeNode",t),this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=(0,o.A)(e.uniformMap),this.alphaOptions=(0,o.A)(e.alphaOptions),this.renderStateOptions=(0,o.A)(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0,this.primitiveRenderResources=[]}},799395:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446);const o={name:"NodeStatisticsPipelineStage",_countInstancingAttributes:r,_countGeneratedBuffers:a};function r(e,t){if(!(0,i.A)(t))return;const n=t.attributes,o=n.length;for(let t=0;t<o;t++){const o=n[t];if((0,i.A)(o.buffer)){const t=!1;e.addBuffer(o.buffer,t)}}}function a(e,t){if((0,i.A)(t.instancingTransformsBuffer)){const n=!1;e.addBuffer(t.instancingTransformsBuffer,n)}if((0,i.A)(t.instancingTransformsBuffer2D)){const n=!1;e.addBuffer(t.instancingTransformsBuffer2D,n)}if((0,i.A)(t.instancingTranslationBuffer2D)){const n=!1;e.addBuffer(t.instancingTranslationBuffer2D,n)}}o.process=function(e,t,n){const i=e.model.statistics,o=t.instances,s=e.runtimeNode;r(i,o),a(i,s)};const s=o},601945:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(641613),o=n(442790),r=n(41476),a=n(571804),s=n(491446),A=n(624512),c=n(226827),l=n(471147);const u={name:"PickingPipelineStage"};function d(e,t){const n=e.model;if((0,s.A)(n.pickObject))return n.pickObject;const i={model:n,node:e.runtimeNode,primitive:e.runtimePrimitive};let o;if(c.A.is3DTiles(n.type)){const e=n.content;o={content:e,primitive:e.tileset,detail:i}}else o={primitive:n,detail:i};return o.id=n.id,(0,s.A)(t)&&(o.instanceId=t),o}u.process=function(e,t,n){const c=n.context,u=e.runtimeNode,h=e.shaderBuilder,g=e.model,f=u.node.instances;if(e.hasPropertyTable)!function(e,t,n){const i=e.model;let o,r;const a=i.featureIdLabel,c=i.instanceFeatureIdLabel;(0,s.A)(i.featureTableId)?o=i.featureTableId:(0,s.A)(n)?(r=l.A.getFeatureIdsByLabel(n.featureIds,c),o=r.propertyTableId):(r=l.A.getFeatureIdsByLabel(t.featureIds,a),o=r.propertyTableId);const u=i.featureTables[o];e.shaderBuilder.addUniform("sampler2D","model_pickTexture",A.A.FRAGMENT);const d=u.batchTexture;e.uniformMap.model_pickTexture=function(){return d.pickTexture??d.defaultTexture},e.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture(model_pickTexture, selectedFeature.st) : vec4(0.0))"}(e,t,f);else if((0,s.A)(f))!function(e,t){const n=e.instanceCount,s=new Array(n),c=new Uint8Array(4*n),l=e.model,u=l._pipelineResources;for(let i=0;i<n;i++){const n=d(e,i),o=t.createPickId(n);u.push(o),s[i]=o;const a=o.color;c[4*i+0]=r.A.floatToByte(a.red),c[4*i+1]=r.A.floatToByte(a.green),c[4*i+2]=r.A.floatToByte(a.blue),c[4*i+3]=r.A.floatToByte(a.alpha)}l._pickIds=s;const h=i.A.createVertexBuffer({context:t,typedArray:c,usage:o.A.STATIC_DRAW});h.vertexArrayDestroyable=!1;l.statistics.addBuffer(h,!1),u.push(h);const g={index:e.attributeIndex++,vertexBuffer:h,componentsPerAttribute:4,componentDatatype:a.A.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(g);const f=e.shaderBuilder;f.addDefine("USE_PICKING",void 0,A.A.BOTH),f.addAttribute("vec4","a_pickColor"),f.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}(e,c);else{const t=d(e),n=c.createPickId(t);g._pipelineResources.push(n),g._pickIds.push(n),h.addUniform("vec4","czm_pickColor",A.A.FRAGMENT),e.uniformMap.czm_pickColor=function(){return n.color},e.pickId="czm_pickColor"}};const h=u},31908:(e,t,n)=>{"use strict";n.d(t,{A:()=>W});var i=n(961645),o=n(267980),r=n(41476),a=n(369031),s=n(571804),A=n(915325),c=n(491446),l=n(605971),u=n(584164),d=n(402330),h=n(352581),g=n(393682),f=n(641613),p=n(442790),m=n(953019),_=n(730839),I=n(320475),E=n(115959),y=n(445848),C=n(590732),b=n(569445),B=n(995537),v=n(679854),w=n(48660),T=n(595826);const S=B.A.Components,x=B.A.Scene,D=B.A.Node,Q=B.A.Primitive,N=B.A.Attribute,R=B.A.Quantization,M=B.A.FeatureIdAttribute,L=B.A.Material,P=B.A.MetallicRoughness;function O(e){const t=(e=e??A.A.EMPTY_OBJECT).arrayBuffer,n=e.byteOffset??0;a.A.typeOf.object("options.arrayBuffer",t),this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=e.loadAttributesFor2D??!1,this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._error=void 0,this._state=w.A.UNLOADED,this._buffers=[],this._components=void 0,this._transform=u.A.IDENTITY}function F(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";default:throw new l.A("componentsPerAttribute must be a number from 1-4")}}function U(e){switch(e){case h.A.BYTE:return"BYTE";case h.A.UNSIGNED_BYTE:return"UNSIGNED_BYTE";case h.A.SHORT:return"SHORT";case h.A.UNSIGNED_SHORT:return"UNSIGNED_SHORT";case h.A.INT:return"INT";case h.A.UNSIGNED_INT:return"UNSIGNED_INT";case h.A.DOUBLE:return"DOUBLE";case h.A.FLOAT:return"FLOAT";default:throw new l.A("value is not a valid WebGL constant")}}function k(e,t,n){let a,s=t.typedArray;if(t.octEncoded&&(a=new R,a.octEncoded=t.octEncoded,a.octEncodedZXY=t.octEncodedZXY,a.normalizationRange=t.quantizedRange,a.type=t.quantizedType,a.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){a=new R;const e=t.quantizedRange;a.normalizationRange=e,a.quantizedVolumeOffset=o.A.ZERO;const n=t.quantizedVolumeScale;a.quantizedVolumeDimensions=n,a.quantizedVolumeStepSize=o.A.divideByScalar(n,e,new o.A),a.componentDatatype=t.quantizedComponentDatatype,a.type=t.quantizedType}const A=new N;if(A.name=t.name,A.semantic=t.semantic,A.setIndex=t.setIndex,A.componentDatatype=t.componentDatatype,A.type=t.type,A.normalized=t.normalized??!1,A.min=t.min,A.max=t.max,A.quantization=a,t.isRGB565&&(s=i.A.decodeRGB565(s)),(0,c.A)(t.constantColor)){const e=new Array(4);A.constant=r.A.pack(t.constantColor,e)}else{const t=f.A.createVertexBuffer({typedArray:s,context:n,usage:p.A.STATIC_DRAW});t.vertexArrayDestroyable=!1,e._buffers.push(t),A.buffer=t}const l=e._loadAttributesFor2D;return A.semantic===T.A.POSITION&&l&&(A.typedArray=s),A}let G,H;function V(e){if(!(0,c.A)(H)){G=new g(0),H=new Array(e);for(let t=0;t<e;++t)H[t]=G.random()}return H}(0,c.A)(Object.create)&&(O.prototype=Object.create(b.A.prototype),O.prototype.constructor=O),Object.defineProperties(O.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}}),O.prototype.load=function(){if((0,c.A)(this._promise))return this._promise;this._parsedContent=v.A.parse(this._arrayBuffer,this._byteOffset),this._state=w.A.PROCESSING,this._promise=Promise.resolve(this)},O.prototype.process=function(e){if((0,c.A)(this._error)){const e=this._error;throw this._error=void 0,e}if(this._state===w.A.READY)return!0;if(this._state===w.A.PROCESSING){if((0,c.A)(this._decodePromise))return!1;this._decodePromise=function(e,t){const n=e._parsedContent.draco;let i;if(i=(0,c.A)(n)?y.A.decodePointCloud(n,t):Promise.resolve(),(0,c.A)(i))return e._decodePromise=i,i.then(function(i){if(!e.isDestroyed())return(0,c.A)(i)&&function(e,t,n){e._state=w.A.READY;const i=e._parsedContent;let r;if((0,c.A)(n.POSITION)){if(r={name:"POSITION",semantic:T.A.POSITION,typedArray:n.POSITION.array,componentDatatype:s.A.FLOAT,type:_.A.VEC3,isQuantized:!1},(0,c.A)(n.POSITION.data.quantization)){const e=n.POSITION.data.quantization,t=e.range,i=o.A.fromElements(t,t,t),a=o.A.unpack(e.minValues),A=(1<<e.quantizationBits)-1;r.isQuantized=!0,r.quantizedRange=A,r.quantizedVolumeOffset=a,r.quantizedVolumeScale=i,r.quantizedComponentDatatype=A<=255?s.A.UNSIGNED_BYTE:s.A.UNSIGNED_SHORT,r.quantizedType=_.A.VEC3}i.positions=r}if((0,c.A)(n.NORMAL)){if(r={name:"NORMAL",semantic:T.A.NORMAL,typedArray:n.NORMAL.array,componentDatatype:s.A.FLOAT,type:_.A.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},(0,c.A)(n.NORMAL.data.quantization)){const e=(1<<n.NORMAL.data.quantization.quantizationBits)-1;r.quantizedRange=e,r.octEncoded=!0,r.octEncodedZXY=!0,r.quantizedComponentDatatype=s.A.UNSIGNED_BYTE,r.quantizedType=_.A.VEC2}i.normals=r}if((0,c.A)(n.RGBA)?i.colors={name:"COLOR",semantic:T.A.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:s.A.UNSIGNED_BYTE,type:_.A.VEC4,normalized:!0,isTranslucent:!0}:(0,c.A)(n.RGB)&&(i.colors={name:"COLOR",semantic:T.A.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:s.A.UNSIGNED_BYTE,type:_.A.VEC3,normalized:!0,isTranslucent:!1}),(0,c.A)(n.BATCH_ID)){const e=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:T.A.FEATURE_ID,setIndex:0,typedArray:e,componentDatatype:s.A.fromTypedArray(e),type:_.A.SCALAR}}let a=i.batchTableJson;const A=t.batchTableProperties;for(const e in A)if(A.hasOwnProperty(e)){const t=n[e];(0,c.A)(a)||(a={}),i.hasDracoBatchTable=!0;const o=t.data;a[e]={byteOffset:o.byteOffset,type:F(o.componentsPerAttribute),componentType:U(o.componentDatatype),typedArray:t.array}}i.batchTableJson=a}(e,n,i),function(e,t){const n=e._parsedContent,i=new P;i.metallicFactor=0,i.roughnessFactor=.9;const r=new L;r.metallicRoughness=i;const a=n.colors;(0,c.A)(a)&&a.isTranslucent&&(r.alphaMode=m.A.BLEND);const s=!(0,c.A)(n.normals);r.unlit=s;const A=new Q;if(A.attributes=function(e,t,n){const i=[];let r;const a=t.positions;return(0,c.A)(a)&&(function(e){const t=e.typedArray,n=t.length/3,i=Math.min(n,20),r=V(20),a=Number.MAX_VALUE,s=-Number.MAX_VALUE;let A,c,l,u=o.A.fromElements(a,a,a,z),d=o.A.fromElements(s,s,s,j);if(e.isQuantized)u=o.A.ZERO,d=e.quantizedVolumeScale;else for(A=0;A<i;++A)c=Math.floor(r[A]*n),l=o.A.unpack(t,3*c,Y),o.A.minimumByComponent(u,l,u),o.A.maximumByComponent(d,l,d);e.min=o.A.clone(u),e.max=o.A.clone(d)}(a),r=k(e,a,n),r.count=t.pointsLength,i.push(r)),(0,c.A)(t.normals)&&(r=k(e,t.normals,n),i.push(r)),(0,c.A)(t.colors)?(r=k(e,t.colors,n),i.push(r)):(r=k(e,q,n),i.push(r)),(0,c.A)(t.batchIds)&&(r=k(e,t.batchIds,n),i.push(r)),i}(e,n,t),A.primitiveType=d.A.POINTS,A.material=r,(0,c.A)(n.batchIds)){const e=new M;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",A.featureIds.push(e)}const l=new D;l.index=0,l.primitives=[A];const h=new x;h.nodes=[l],h.upAxis=I.A.Z,h.forwardAxis=I.A.X;const g=new S;g.scene=h,g.nodes=[l];const _=[];g.structuralMetadata=function(e,t){const n=e.batchLength,i=e.pointsLength,o=e.batchTableJson,r=e.batchTableBinary,a=!(0,c.A)(e.batchIds);if((0,c.A)(r)||(0,c.A)(o)||e.hasDracoBatchTable){const e=n??i;return(0,E.A)({count:e,batchTable:o,binaryBody:r,parseAsPropertyAttributes:a,customAttributeOutput:t})}return new C.A({schema:{},propertyTables:[]})}(n,_),_.length>0&&function(e,t,n,i){const o=t.attributes,r=n.length;for(let t=0;t<r;t++){const r=n[t],a=f.A.createVertexBuffer({typedArray:r.typedArray,context:i,usage:p.A.STATIC_DRAW});a.vertexArrayDestroyable=!1,e._buffers.push(a),r.buffer=a,r.typedArray=void 0,o.push(r)}t.propertyAttributeIds=[0]}(e,A,_,t),(0,c.A)(n.rtcCenter)&&(g.transform=u.A.multiplyByTranslation(g.transform,n.rtcCenter,g.transform));const y=n.positions;(0,c.A)(y)&&y.isQuantized&&(g.transform=u.A.multiplyByTranslation(g.transform,y.quantizedVolumeOffset,g.transform)),e._components=g,e._parsedContent=void 0,e._arrayBuffer=void 0}(e,t),e._state=w.A.READY,e}).catch(function(t){e.unload(),e._state=w.A.FAILED;e._error=e.getError("Failed to load Draco pnts",t)})}(this,e.context)}return!1};const z=new o.A,j=new o.A,Y=new o.A,q={name:T.A.COLOR,semantic:T.A.COLOR,setIndex:0,constantColor:r.A.DARKGRAY,componentDatatype:s.A.FLOAT,type:_.A.VEC4,isQuantized:!1,isTranslucent:!1};O.prototype.unload=function(){const e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};const W=O},752709:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(267980),o=n(626809),r=n(367817),a=n(661314),s=n(376758),A=n(491446),c=n(584164),l=n(226827),u=n(471147),d=n(811203),h=n(760866),g=n(7562),f=n(123245),p=n(62467),m=n(624512),_=n(595826);const I=new o.A,E={name:"PointCloudStylingPipelineStage",process:function(e,t,n){const o=e.shaderBuilder,E=e.model,w=E.style,T=E.structuralMetadata,S=(0,A.A)(T)?T.propertyAttributes:void 0,x=(0,A.A)(E.featureTableId)&&E.featureTables[E.featureTableId].featuresLength>0,D=!(0,A.A)(S)&&x;if((0,A.A)(w)&&!D){const n=function(e){const t=(0,s.A)(b);if(!(0,A.A)(e))return t;for(let n=0;n<e.length;n++){const i=e[n].properties;for(const e in i)i.hasOwnProperty(e)&&(t[e]=`metadata.${e}`)}return t}(S),i=function(e,t){const n=C,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${B})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${B})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${B})`,t,i),n.styleTranslucent=(0,A.A)(n.colorStyleFunction)&&i.translucent,n}(w,n);!function(e,t){const n=t.colorStyleFunction;(0,A.A)(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,m.A.BOTH),e.addVertexLines(n),e.addVarying("vec4","v_pointCloudColor"));const i=t.showStyleFunction;(0,A.A)(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,m.A.BOTH),e.addVertexLines(i),e.addVarying("float","v_pointCloudShow"));const o=t.pointSizeStyleFunction;(0,A.A)(o)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,m.A.VERTEX),e.addVertexLines(o))}(o,i);const r=function(e){const t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return(0,A.A)(t)&&v(t,o),(0,A.A)(n)&&v(n,o),(0,A.A)(i)&&v(i,o),o}(i),a=r.indexOf("normalMC")>=0,c=u.A.getAttributeBySemantic(t,_.A.NORMAL);if(a&&!c)throw new f.A("Style references the NORMAL semantic but the point cloud does not have normals");o.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,m.A.VERTEX),i.styleTranslucent&&(e.alphaOptions.pass=h.A.TRANSLUCENT)}const Q=E.pointCloudShading;let N,R,M;Q.attenuation&&o.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,m.A.VERTEX),Q.backFaceCulling&&o.addDefine("HAS_POINT_CLOUD_BACK_FACE_CULLING",void 0,m.A.VERTEX),l.A.is3DTiles(E.type)&&(R=!0,N=E.content,M=N.tile.refine===a.A.ADD),o.addUniform("vec4","model_pointCloudParameters",m.A.VERTEX),o.addVertexLines(g.A),e.uniformMap.model_pointCloudParameters=function(){const o=I;let a=1;R&&(a=M?5:N.tileset.memoryAdjustedScreenSpaceError),o.x=Q.maximumAttenuation??a,o.x*=n.pixelRatio;const s=function(e,t,n,o){if((0,A.A)(o)){const e=o.tile.geometricError;if(e>0)return e}if((0,A.A)(n.baseResolution))return n.baseResolution;const a=u.A.getAttributeBySemantic(t,_.A.POSITION),s=a.count,l=e.runtimeNode.transform;let d=i.A.subtract(a.max,a.min,y);d=c.A.multiplyByPointAsVector(l,d,y);const h=d.x*d.y*d.z;return r.A.cbrt(h/s)}(e,t,Q,N);o.y=s*Q.geometricErrorScale;const l=n.context,h=n.camera.frustum;let g;return g=n.mode===p.A.SCENE2D||h instanceof d.A?Number.POSITIVE_INFINITY:l.drawingBufferHeight/n.camera.frustum.sseDenominator,o.z=g,R&&(o.w=N.tileset.timeSinceLoad),o}}},y=new i.A,C={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},b={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"},B="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function v(e,t){const n=/attributes\.(\w+)/g;let i=n.exec(e);for(;null!==i;){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}const w=E},623524:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var i=n(369031),o=n(491446),r=n(915325),a=n(276904),s=n(430332),A=n(654799),c=n(616e3),l=n(957233),u=n(78078),d=n(557448);function h(e){const t=(e=e??r.A.EMPTY_OBJECT).triangleIndices,n=e.outlineIndices,a=e.originalVertexCount;i.A.typeOf.object("options.triangleIndices",t),i.A.typeOf.object("options.outlineIndices",n),i.A.typeOf.number("options.originalVertexCount",a),this._triangleIndices=t,this._originalVertexCount=a,this._edges=new _(n,a),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],function(e){let t=e._triangleIndices;const n=e._edges,i=[],r=e._extraVertices,a=e._originalVertexCount,s={};for(let e=0;e<t.length;e+=3){let A=t[e],c=t[e+1],l=t[e+2];const u=!1,d=u||n.hasEdge(A,c),h=u||n.hasEdge(c,l),f=u||n.hasEdge(l,A);let p=g(i,A,c,l,d,h,f);for(;(0,o.A)(p);){let n=s[p];if(!(0,o.A)(n)){n=a+r.length;let e=p;for(;e>=a;)e=r[e-a];r.push(e),s[p]=n}n>65534&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):n>255&&t instanceof Uint8Array&&(t=new Uint16Array(t)),p===A?(A=n,t[e]=n):p===c?(c=n,t[e+1]=n):(l=n,t[e+2]=n),p=g(i,A,c,l,d,h,f)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}(this)}function g(e,t,n,i,o,r,a){const s=a?1:0,A=o?1:0,c=f(e,t,s,A,0);if(0===c)return t;const l=o?1:0,u=r?1:0,d=f(e,n,0,l,u);if(0===d)return n;const h=a?1:0,g=r?1:0,m=f(e,i,h,0,g);if(0===m)return i;const _=c&d&m;let I,E,y;if(1&_)I=0,E=1,y=2;else if(2&_)I=0,y=1,E=2;else if(4&_)E=0,I=1,y=2;else if(8&_)E=0,y=1,I=2;else if(16&_)y=0,I=1,E=2;else{if(!(32&_)){const e=p(c),o=p(d),r=p(m);return e<o&&e<r?t:o<r?n:i}y=0,E=1,I=2}const C=3*t;e[C+I]=s,e[C+E]=A,e[C+y]=0;const b=3*n;e[b+I]=0,e[b+E]=l,e[b+y]=u;const B=3*i;e[B+I]=h,e[B+E]=0,e[B+y]=g}function f(e,t,n,i,r){const a=3*t,s=e[a],A=e[a+1],c=e[a+2];return(0,o.A)(s)?(s===n&&A===i&&c===r)|(s===n&&A===r&&c===i)<<1|(s===i&&A===n&&c===r)<<2|(s===i&&A===r&&c===n)<<3|(s===r&&A===n&&c===i)<<4|(s===r&&A===i&&c===n)<<5:63}function p(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function m(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function _(e,t){this._originalVertexCount=t,this._edges=new Set;for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1],o=Math.min(n,i),r=Math.max(n,i),a=o*this._originalVertexCount+r;this._edges.add(a)}}Object.defineProperties(h.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}}),h.prototype.updateAttribute=function(e){const t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=new(0,e.constructor)(e.length+o*i);r.set(e);for(let e=0;e<o;e++){const o=t[e]*i,a=n+e*i;for(let e=0;e<i;e++)r[a+e]=r[o+e]}return r},h.createTexture=function(e){let t=e.cache.modelOutliningCache;if((0,o.A)(t)||(t=e.cache.modelOutliningCache={}),(0,o.A)(t.outlineTexture))return t.outlineTexture;const n=Math.min(4096,s.A.maximumTextureSize);let i=n;const r=m(i),h=[];for(;i>1;)i>>=1,h.push(m(i));const g=new c.A({context:e,source:{arrayBufferView:r,mipLevels:h},width:n,height:1,pixelFormat:a.A.LUMINANCE,sampler:new A.A({wrapS:d.A.CLAMP_TO_EDGE,wrapT:d.A.CLAMP_TO_EDGE,minificationFilter:u.A.LINEAR_MIPMAP_LINEAR,magnificationFilter:l.A.LINEAR})});return t.outlineTexture=g,g},_.prototype.hasEdge=function(e,t){const n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};const I=h},366413:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(730839),o=n(624512),r=n(623524),a=n(494098),s=n(34274);const A={name:"PrimitiveOutlinePipelineStage",process:function(e,t,n){const A=e.shaderBuilder,c=e.uniformMap;A.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,o.A.BOTH),A.addAttribute("vec3","a_outlineCoordinates"),A.addVarying("vec3","v_outlineCoordinates");const l=t.outlineCoordinates,u={index:e.attributeIndex++,vertexBuffer:l.buffer,componentsPerAttribute:i.A.getNumberOfComponents(l.type),componentDatatype:l.componentDatatype,offsetInBytes:l.byteOffset,strideInBytes:l.byteStride,normalize:l.normalized};e.attributes.push(u),A.addUniform("sampler2D","model_outlineTexture",o.A.FRAGMENT);const d=r.A.createTexture(n.context);c.model_outlineTexture=function(){return d};const h=e.model;A.addUniform("vec4","model_outlineColor",o.A.FRAGMENT),c.model_outlineColor=function(){return h.outlineColor},A.addUniform("bool","model_showOutline",o.A.FRAGMENT),c.model_showOutline=function(){return h.showOutline},A.addVertexLines(a.A),A.addFragmentLines(s.A)}}},214666:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(660662),o=n(267980),r=n(369031),a=n(376758),s=n(491446),A=n(471147),c=n(127329);const l=function(e,t){r.A.typeOf.object("nodeRenderResources",e),r.A.typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=(0,a.A)(e.uniformMap),this.alphaOptions=(0,a.A)(e.alphaOptions),this.renderStateOptions=(0,a.A)(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const n=t.primitive;this.count=(0,s.A)(n.indices)?n.indices.count:A.A.getAttributeBySemantic(n,"POSITION").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;const l=A.A.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=o.A.clone(l.min,new o.A),this.positionMax=o.A.clone(l.max,new o.A),this.boundingSphere=i.A.fromCornerPoints(this.positionMin,this.positionMax,new i.A),this.lightingOptions=new c.A,this.pickId=void 0}},531218:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(491446),o=n(402330),r=n(995537),a=n(471147);const s={name:"PrimitiveStatisticsPipelineStage",_countGeometry:A,_count2DPositions:c,_countMorphTargetAttributes:l,_countMaterialTextures:u,_countFeatureIdTextures:d,_countBinaryMetadata:h};function A(e,t){const n=(0,i.A)(t.indices)?t.indices.count:a.A.getAttributeBySemantic(t,"POSITION").count,r=t.primitiveType;r===o.A.POINTS?e.pointsLength+=n:o.A.isTriangles(r)&&(e.trianglesLength+=function(e,t){switch(e){case o.A.TRIANGLES:return t/3;case o.A.TRIANGLE_STRIP:case o.A.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}(r,n));const s=t.attributes,A=s.length;for(let t=0;t<A;t++){const n=s[t];if((0,i.A)(n.buffer)){const t=(0,i.A)(n.typedArray);e.addBuffer(n.buffer,t)}}const c=t.outlineCoordinates;if((0,i.A)(c)&&(0,i.A)(c.buffer)){const t=!1;e.addBuffer(c.buffer,t)}const l=t.indices;if((0,i.A)(l)&&(0,i.A)(l.buffer)){const t=(0,i.A)(l.typedArray);e.addBuffer(l.buffer,t)}}function c(e,t){const n=t.positionBuffer2D;if((0,i.A)(n)){const t=!0;e.addBuffer(n,t)}}function l(e,t){const n=t.morphTargets;if(!(0,i.A)(n))return;const o=n.length;for(let t=0;t<o;t++){const o=n[t].attributes,r=o.length;for(let t=0;t<r;t++){const n=o[t];(0,i.A)(n.buffer)&&e.addBuffer(n.buffer,!1)}}}function u(e,t){const n=function(e){const t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],o=e.specularGlossiness;return(0,i.A)(o)&&(n.push(o.diffuseTexture),n.push(o.specularGlossinessTexture)),n}(t),o=n.length;for(let t=0;t<o;t++){const o=n[t];(0,i.A)(o)&&(0,i.A)(o.texture)&&e.addTexture(o.texture)}}function d(e,t){const n=t.length;for(let o=0;o<n;o++){const n=t[o];if(n instanceof r.A.FeatureIdTexture){const t=n.textureReader;(0,i.A)(t.texture)&&e.addTexture(t.texture)}}}function h(e,t){const n=t.structuralMetadata;(0,i.A)(n)&&(function(e,t){const n=t.propertyTextures;if(!(0,i.A)(n))return;const o=n.length;for(let t=0;t<o;t++){const o=n[t].properties;for(const t in o)if(o.hasOwnProperty(t)){const n=o[t].textureReader;(0,i.A)(n.texture)&&e.addTexture(n.texture)}}}(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);const o=t.featureTables;if(!(0,i.A)(o))return;const r=o.length;for(let t=0;t<r;t++){const n=o[t];e.addBatchTexture(n.batchTexture)}}s.process=function(e,t,n){const i=e.model,o=i.statistics;A(o,t),c(o,e.runtimePrimitive),l(o,t),u(o,t.material),d(o,t.featureIds),h(o,i)};const g=s},252843:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(660662),o=n(641613),r=n(442790),a=n(267980),s=n(376758),A=n(430346),c=n(491446),l=n(584164),u=n(471147),d=n(62467),h=n(624512),g=n(595826),f=n(78173);const p=new l.A,m=new l.A,_={name:"SceneMode2DPipelineStage",process:function(e,t,n){const _=u.A.getAttributeBySemantic(t,g.A.POSITION),C=e.shaderBuilder,b=e.model,B=b.sceneGraph.computedModelMatrix,v=e.runtimeNode.computedTransform,w=l.A.multiplyTransformation(B,v,p),T=function(e,t,n){const o=l.A.multiplyByPoint(t,e.positionMin,I),r=f.A.computeActualEllipsoidPosition(n,o,o),a=l.A.multiplyByPoint(t,e.positionMax,E),s=f.A.computeActualEllipsoidPosition(n,a,a);return i.A.fromCornerPoints(r,s,new i.A)}(e,w,n),S=e.runtimePrimitive;S.boundingSphere2D=T;const x=e.runtimeNode.node.instances;if((0,c.A)(x))return;if((0,c.A)(_.typedArray)){const e=function(e,t,n,i){const A=(0,s.A)(i);A.mode=d.A.COLUMBUS_VIEW;const u=function(e,t,n,i){let o;o=(0,c.A)(e.quantization)?function(e,t){const n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let t=0;t<n;t+=3){const n=a.A.fromArray(e,t,y),s=a.A.multiplyComponents(n,r,n),A=a.A.add(s,o,s);i[t]=A.x,i[t+1]=A.y,i[t+2]=A.z}return i}(e.typedArray,e.quantization):e.typedArray.slice();const r=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,s=o.length,A=(0,c.A)(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let e=r;e<s;e+=A){const r=a.A.fromArray(o,e,y);if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))continue;const s=l.A.multiplyByPoint(t,r,r),A=f.A.computeActualEllipsoidPosition(i,s,s),c=a.A.subtract(A,n,A);o[e]=c.x,o[e+1]=c.y,o[e+2]=c.z}return o}(e,t,n.center,A),h=o.A.createVertexBuffer({context:i.context,typedArray:u,usage:r.A.STATIC_DRAW});return h.vertexArrayDestroyable=!1,h}(_,w,T,n);S.positionBuffer2D=e,b._modelResources.push(e),_.typedArray=void 0}C.addDefine("USE_2D_POSITIONS",void 0,h.A.VERTEX),C.addUniform("mat4","u_modelView2D",h.A.VERTEX);const D=l.A.fromTranslation(T.center,new l.A),Q=n.context,N={u_modelView2D:function(){return l.A.multiplyTransformation(Q.uniformState.view,D,m)}};e.uniformMap=(0,A.A)(N,e.uniformMap)}},I=new a.A,E=new a.A,y=new a.A,C=_},391852:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(624512),r=n(443045),a=n(995537),s=n(471147);const A={name:"SelectedFeatureIdPipelineStage",STRUCT_ID_SELECTED_FEATURE:"SelectedFeature",STRUCT_NAME_SELECTED_FEATURE:"SelectedFeature"};function c(e){return e instanceof a.A.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function l(e){return e instanceof a.A.FeatureIdTexture?o.A.FRAGMENT:o.A.BOTH}A.process=function(e,t,n){const a=e.shaderBuilder;e.hasPropertyTable=!0;const u=function(e,t,n){let o,r;return(0,i.A)(t.instances)&&(r=s.A.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,i.A)(r))?(o=r.label??r.positionalLabel,{featureIds:r,variableName:o,shaderDestination:l(r),featureIdDefine:c(r)}):(r=s.A.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),o=r.label??r.positionalLabel,{featureIds:r,variableName:o,shaderDestination:l(r),featureIdDefine:c(r)})}(e.model,e.runtimeNode.node,t),d=u.shaderDestination;a.addDefine("HAS_SELECTED_FEATURE_ID",void 0,d),a.addDefine("SELECTED_FEATURE_ID",u.variableName,d),a.addDefine(u.featureIdDefine,void 0,d),function(e){e.addStructField(A.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(A.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(A.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}(a);const h=u.featureIds.nullFeatureId,g=e.uniformMap;(0,i.A)(h)&&(a.addDefine("HAS_NULL_FEATURE_ID",void 0,d),a.addUniform("int","model_nullFeatureId",d),g.model_nullFeatureId=function(){return h}),u.shaderDestination===o.A.BOTH&&a.addVertexLines(r.A),a.addFragmentLines(r.A)};const u=A},456727:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(430346),o=n(624512),r=n(40640),a=n(595826);const s={name:"SkinningPipelineStage",FUNCTION_ID_GET_SKINNING_MATRIX:"getSkinningMatrix",FUNCTION_SIGNATURE_GET_SKINNING_MATRIX:"mat4 getSkinningMatrix()",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,o.A.VERTEX),function(e,t){e.addFunction(s.FUNCTION_ID_GET_SKINNING_MATRIX,s.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,o.A.VERTEX);let n,i;e.addFunctionLines(s.FUNCTION_ID_GET_SKINNING_MATRIX,["mat4 skinnedMatrix = mat4(0);"]);const r=["x","y","z","w"],A=function(e){let t=-1;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=n[e];(i.semantic===a.A.JOINTS||i.semantic===a.A.WEIGHTS)&&(t=Math.max(t,i.setIndex))}return t}(t);for(n=0;n<=A;n++)for(i=0;i<=3;i++){const t=r[i],o=`skinnedMatrix += a_weights_${n}.${t} * u_jointMatrices[int(a_joints_${n}.${t})];`;e.addFunctionLines(s.FUNCTION_ID_GET_SKINNING_MATRIX,[o])}e.addFunctionLines(s.FUNCTION_ID_GET_SKINNING_MATRIX,["return skinnedMatrix;"])}(n,t);const A=e.runtimeNode,c=A.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${c.length}]`,o.A.VERTEX),n.addVertexLines(r.A);const l={u_jointMatrices:function(){return A.computedJointMatrices}};e.uniformMap=(0,i.A)(l,e.uniformMap)}},A=s},942836:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?i.ALL_OPAQUE:t===e?i.ALL_TRANSLUCENT:i.OPAQUE_AND_TRANSLUCENT}},o=Object.freeze(i)},821174:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(491446),o=n(677354),r=n(869467),a=n(367817),s=n(271868),A=n(57775),c=n(616e3),l=n(78078),u=n(557448);function d(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function h(e,t,n){const{id:o,textureUniform:c,image:l}=t,d=n.webgl2?g(c,l,n):function(e,t,n){const{typedArray:o,sampler:c}=e,l=f(c),d=c.wrapS===u.A.REPEAT||c.wrapS===u.A.MIRRORED_REPEAT||c.wrapT===u.A.REPEAT||c.wrapT===u.A.MIRRORED_REPEAT,{width:h,height:m}=(0,i.A)(o)?e:t,_=[h,m].every(a.A.isPowerOfTwo);if(!l&&!d||_)return g(e,t,n);if(!(0,i.A)(o))return g(e,(0,s.A)(t),n);if(e.pixelDatatype===A.A.UNSIGNED_BYTE){const e=(0,r.A)(o,h,m);return g({sampler:c},(0,s.A)(e),n)}return l?console.warn("Texture requires resizing for mipmaps but pixelDataType cannot be resized. The texture may be rendered incorrectly."):d&&console.warn("Texture requires resizing for wrapping but pixelDataType cannot be resized. The texture may be rendered incorrectly."),p(e,n)}(c,l,n),h=e._textures[o];(0,i.A)(h)&&h!==n.defaultTexture&&h.destroy(),e._textures[o]=d}function g(e,t,n){const{typedArray:o,sampler:r}=e,a=(0,i.A)(o)?p(e,n):new c.A({context:n,source:t,sampler:r});return f(r)&&a.generateMipmap(),a}function f(e){return[l.A.NEAREST_MIPMAP_NEAREST,l.A.NEAREST_MIPMAP_LINEAR,l.A.LINEAR_MIPMAP_NEAREST,l.A.LINEAR_MIPMAP_LINEAR].includes(e.minificationFilter)}function p(e,t){const{pixelFormat:n,pixelDatatype:i,width:o,height:r,typedArray:a,sampler:s}=e;return new c.A({context:t,pixelFormat:n,pixelDatatype:i,source:{arrayBufferView:a,width:o,height:r},sampler:s,flipY:!1})}d.prototype.getTexture=function(e){return this._textures[e]},d.prototype.loadTexture2D=function(e,t){(0,i.A)(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):function(e,t,n){n.resource.fetchImage().then(function(i){e._loadedImages.push({id:t,image:i,textureUniform:n})}).catch(function(){const n=e._textures[t];(0,i.A)(n)&&n!==e._defaultTexture&&n.destroy(),e._textures[t]=e._defaultTexture})}(this,e,t)},d.prototype.update=function(e){if(e.frameNumber===this._lastUpdatedFrame)return;this._lastUpdatedFrame=e.frameNumber;const t=e.context;this._defaultTexture=t.defaultTexture;const n=this._loadedImages;for(let e=0;e<n.length;e++)h(this,n[e],t);n.length=0},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){const e=this._textures;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n!==this._defaultTexture&&n.destroy()}return(0,o.A)(this)};const m=d},807048:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(430346),o=n(624512),r=n(434067),a=n(938987);const s={name:"TilesetPipelineStage",process:function(e,t,n){if(t.hasSkipLevelOfDetail(n)){e.shaderBuilder.addDefine("POLYGON_OFFSET",void 0,o.A.FRAGMENT);const t={u_polygonOffset:function(){return r.A.ZERO}};e.uniformMap=(0,i.A)(t,e.uniformMap),e.hasSkipLevelOfDetail=!0}const s=e.renderStateOptions;s.stencilTest=a.A.setCesium3DTileBit(),s.stencilMask=a.A.CESIUM_3D_TILE_MASK}}},671098:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat3",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"})},641882:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(434067),o=n(624512),r=n(323745);const a={name:"VerticalExaggerationPipelineStage"},s=new i.A;a.process=function(e,t,n){const{shaderBuilder:a,uniformMap:A}=e;a.addVertexLines(r.A),a.addDefine("HAS_VERTICAL_EXAGGERATION",void 0,o.A.VERTEX),a.addUniform("vec2","u_verticalExaggerationAndRelativeHeight",o.A.VERTEX),A.u_verticalExaggerationAndRelativeHeight=function(){return i.A.fromElements(n.verticalExaggeration,n.verticalExaggerationRelativeHeight,s)}};const A=a},6214:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(641613),o=n(442790),r=n(491446),a=n(874915),s=n(471147),A=n(402330),c=n(624512),l=n(595826),u=n(635692);const d={name:"WireframePipelineStage",process:function(e,t,n){e.shaderBuilder.addDefine("HAS_WIREFRAME",void 0,c.A.FRAGMENT);const d=e.model,h=function(e,t,n){const A=s.A.getAttributeBySemantic(e,l.A.POSITION).count,c=n.context.webgl2;let d;if((0,r.A)(t)){const e=t.buffer,n=t.count;(0,r.A)(e)&&c?(d=e.sizeInBytes===n?new Uint8Array(n):a.A.createTypedArray(A,n),e.getBufferData(d)):d=t.typedArray}const h=e.primitiveType,g=u.A.createWireframeIndices(h,A,d),f=a.A.fromSizeInBytes(g.BYTES_PER_ELEMENT);return i.A.createIndexBuffer({context:n.context,typedArray:g,usage:o.A.STATIC_DRAW,indexDatatype:f})}(t,e.indices,n);d._pipelineResources.push(h),e.wireframeIndexBuffer=h,d.statistics.addBuffer(h,!1);const g=e.primitiveType,f=e.count;e.primitiveType=A.A.LINES,e.count=u.A.getWireframeIndicesCount(g,f)}},h=d},965020:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(961645),o=n(660662),r=n(267980),a=n(336946),s=n(369031),A=n(571804),c=n(491446),l=n(610750),u=n(874915),d=n(150429),h=n(766067),g=n(584164),f=n(543622),p=n(717339),m=n(730839),_=n(62467),I=n(595826),E=n(471147);const y=new r.A,C=new r.A,b=new r.A,B=new g.A,v=new g.A,w=new g.A,T=new a.A,S=new o.A;function x(e,t,n,a,p,x,Q){if(s.A.typeOf.object("model",e),s.A.typeOf.object("ray",t),s.A.typeOf.object("frameState",n),!e._ready||n.mode===_.A.MORPHING)return;let N=Number.MAX_VALUE;const R=e.sceneGraph,M=R._runtimeNodes;for(let r=0;r<M.length;r++){const s=M[r],h=s.node;let T=g.A.clone(s.computedTransform,B),Q=g.A.clone(R.computedModelMatrix,v);const L=h.instances;(0,c.A)(L)&&L.transformInWorldSpace&&(Q=g.A.multiplyTransformation(e.modelMatrix,R.components.transform,Q),T=g.A.multiplyTransformation(R.axisCorrectionMatrix,s.computedTransform,T));let P=g.A.multiplyTransformation(Q,T,w);n.mode!==_.A.SCENE3D&&(P=f.A.basisTo2D(n.mapProjection,P,P));const O=[];if((0,c.A)(L)){const e=L.attributes[0].count,t=L.attributes[0].componentDatatype,i=12;let o=s.transformsTypedArray;if(!(0,c.A)(o)){const r=s.instancingTransformsBuffer;(0,c.A)(r)&&n.context.webgl2&&(o=A.A.createTypedArray(t,e*i),r.getBufferData(o))}if((0,c.A)(o))for(let t=0;t<e;t++){const e=t*i,n=new g.A(o[e],o[e+1],o[e+2],o[e+3],o[e+4],o[e+5],o[e+6],o[e+7],o[e+8],o[e+9],o[e+10],o[e+11],0,0,0,1);L.transformInWorldSpace?(g.A.multiplyTransformation(n,T,n),g.A.multiplyTransformation(Q,n,n)):g.A.multiplyTransformation(n,P,n),O.push(n)}}0===O.length&&O.push(P);const F=s.runtimePrimitives.length;for(let r=0;r<F;r++){const h=s.runtimePrimitives[r],g=h.primitive;if((0,c.A)(h.boundingSphere)&&!(0,c.A)(L)){const e=o.A.transform(h.boundingSphere,P,S),n=d.A.raySphere(t,e);if(!(0,c.A)(n))continue}const f=E.A.getAttributeBySemantic(g,I.A.POSITION),_=f.byteOffset,B=f.byteStride,v=f.count;if(!(0,c.A)(g.indices))continue;let w=g.indices.typedArray;if(!(0,c.A)(w)){const e=g.indices.buffer,t=g.indices.count,i=g.indices.indexDatatype;(0,c.A)(e)&&n.context.webgl2&&(i===u.A.UNSIGNED_BYTE?w=new Uint8Array(t):i===u.A.UNSIGNED_SHORT?w=new Uint16Array(t):i===u.A.UNSIGNED_INT&&(w=new Uint32Array(t)),e.getBufferData(w))}let T=f.typedArray,Q=f.componentDatatype,R=f.type;const M=f.quantization;(0,c.A)(M)&&(Q=f.quantization.componentDatatype,R=f.quantization.type);const F=m.A.getNumberOfComponents(R),U=A.A.getSizeInBytes(Q),k=!(0,c.A)(T)&&(0,c.A)(B)&&B!==F*U;let G=F,H=0;k&&(G=B/U,H=_/U);const V=v*G;if(!(0,c.A)(T)){const e=f.buffer;(0,c.A)(e)&&n.context.webgl2&&(T=A.A.createTypedArray(Q,V),e.getBufferData(T,k?0:_,0,V)),M&&f.normalized&&(T=i.A.dequantize(T,Q,R,v))}if(!(0,c.A)(w)||!(0,c.A)(T))return;x=x??l.A.default,a=a??1,p=p??0;const z=w.length;for(let n=0;n<z;n+=3){const i=w[n],o=w[n+1],r=w[n+2];for(const n of O){const s=D(T,i,H,G,M,n,a,p,x,y),A=D(T,o,H,G,M,n,a,p,x,C),l=D(T,r,H,G,M,n,a,p,x,b),u=d.A.rayTriangleParametric(t,s,A,l,e.backFaceCulling??!0);(0,c.A)(u)&&u<N&&u>=0&&(N=u)}}}}if(N!==Number.MAX_VALUE){if(Q=h.A.getPoint(t,N,Q),n.mode!==_.A.SCENE3D){r.A.fromElements(Q.y,Q.z,Q.x,Q);const e=n.mapProjection,t=e.ellipsoid,i=e.unproject(Q,T);t.cartographicToCartesian(i,Q)}return Q}}function D(e,t,n,o,a,s,A,l,u,d){const h=n+t*o;if(d.x=e[h],d.y=e[h+1],d.z=e[h+2],(0,c.A)(a))if(a.octEncoded){if(d=i.A.octDecodeInRange(d,a.normalizationRange,d),a.octEncodedZXY){const e=d.x;d.x=d.z,d.z=d.y,d.y=e}}else d=r.A.multiplyComponents(d,a.quantizedVolumeStepSize,d),d=r.A.add(d,a.quantizedVolumeOffset,d);return d=g.A.multiplyByPoint(s,d,d),1!==A&&p.A.getPosition(d,u,A,l,d),d}},598361:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({NONE:0,REPEAT:1,MIRRORED_REPEAT:2})},304686:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({STOPPED:0,ANIMATING:1})},995537:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(953019),o=n(267980),r=n(626809),a=n(331185),s=n(584164);const A={};function c(){this.credits=[]}function l(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=r.A.clone(l.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=l.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=l.DEFAULT_ROUGHNESS_FACTOR}function u(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=r.A.clone(u.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=o.A.clone(u.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=u.DEFAULT_GLOSSINESS_FACTOR}function d(){this.specularFactor=d.DEFAULT_SPECULAR_FACTOR,this.specularTexture=void 0,this.specularColorFactor=o.A.clone(d.DEFAULT_SPECULAR_COLOR_FACTOR),this.specularColorTexture=void 0}function h(){this.anisotropyStrength=h.DEFAULT_ANISOTROPY_STRENGTH,this.anisotropyRotation=h.DEFAULT_ANISOTROPY_ROTATION,this.anisotropyTexture=void 0}function g(){this.clearcoatFactor=g.DEFAULT_CLEARCOAT_FACTOR,this.clearcoatTexture=void 0,this.clearcoatRoughnessFactor=g.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR,this.clearcoatRoughnessTexture=void 0,this.clearcoatNormalTexture=void 0}function f(){this.metallicRoughness=new l,this.specularGlossiness=void 0,this.specular=void 0,this.anisotropy=void 0,this.clearcoat=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=o.A.clone(f.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=i.A.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}l.DEFAULT_BASE_COLOR_FACTOR=r.A.ONE,l.DEFAULT_METALLIC_FACTOR=1,l.DEFAULT_ROUGHNESS_FACTOR=1,u.DEFAULT_DIFFUSE_FACTOR=r.A.ONE,u.DEFAULT_SPECULAR_FACTOR=o.A.ONE,u.DEFAULT_GLOSSINESS_FACTOR=1,d.DEFAULT_SPECULAR_FACTOR=1,d.DEFAULT_SPECULAR_COLOR_FACTOR=o.A.ONE,h.DEFAULT_ANISOTROPY_STRENGTH=0,h.DEFAULT_ANISOTROPY_ROTATION=0,g.DEFAULT_CLEARCOAT_FACTOR=0,g.DEFAULT_CLEARCOAT_ROUGHNESS_FACTOR=0,f.DEFAULT_EMISSIVE_FACTOR=o.A.ZERO,A.Quantization=function(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0},A.Attribute=function(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0},A.Indices=function(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0},A.FeatureIdAttribute=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0},A.FeatureIdTexture=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0},A.FeatureIdImplicitRange=function(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0},A.MorphTarget=function(){this.attributes=[]},A.Primitive=function(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0,this.modelPrimitiveImagery=void 0},A.Instances=function(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1},A.Skin=function(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]},A.Node=function(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0},A.Scene=function(){this.nodes=[]},A.AnimatedPropertyType=Object.freeze({TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"}),A.AnimationSampler=function(){this.input=[],this.interpolation=void 0,this.output=[]},A.AnimationTarget=function(){this.node=void 0,this.path=void 0},A.AnimationChannel=function(){this.sampler=void 0,this.target=void 0},A.Animation=function(){this.name=void 0,this.samplers=[],this.channels=[]},A.ArticulationStage=function(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0},A.Articulation=function(){this.name=void 0,this.stages=[]},A.Asset=c,A.Components=function(){this.asset=new c,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=s.A.clone(s.A.IDENTITY),this.extensions={}},A.TextureReader=function(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=a.A.clone(a.A.IDENTITY),this.scale=1,this.channels=void 0},A.MetallicRoughness=l,A.SpecularGlossiness=u,A.Specular=d,A.Anisotropy=h,A.Clearcoat=g,A.Material=f;const p=A},534095:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(303578),o=n(267980),r=n(915325),a=n(491446),s=n(677354),A=n(610750),c=n(220871),l=n(331185),u=n(584164),d=n(658542),h=n(543622),g=n(168976),f=n(608191);function p(e){let t=(e=e??r.A.EMPTY_OBJECT).textureUrl;(0,a.A)(t)||(t=(0,i.A)("Assets/Textures/moonSmall.jpg")),this.show=e.show??!0,this.textureUrl=t,this._ellipsoid=e.ellipsoid??A.A.MOON,this.onlySunLighting=e.onlySunLighting??!0,this._ellipsoidPrimitive=new g.A({radii:this.ellipsoid.radii,material:f.A.fromType(f.A.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new c.A}Object.defineProperties(p.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const m=new l.A,_=new l.A,I=new o.A,E=[];p.prototype.update=function(e){if(!this.show)return;const t=this._ellipsoidPrimitive;t.material.uniforms.image=this.textureUrl,t.onlySunLighting=this.onlySunLighting;const n=e.time;(0,a.A)(h.A.computeIcrfToFixedMatrix(n,m))||h.A.computeTemeToPseudoFixedMatrix(n,m);const i=this._axes.evaluate(n,_);l.A.transpose(i,i),l.A.multiply(m,i,i);const o=d.A.computeMoonPositionInEarthInertialFrame(n,I);l.A.multiplyByVector(m,o,o),u.A.fromRotationTranslation(i,o,t.modelMatrix);const r=e.commandList;return e.commandList=E,E.length=0,t.update(e),e.commandList=r,1===E.length?E[0]:void 0},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),(0,s.A)(this)};const y=p},409816:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(267980),o=n(491446),r=n(677354),a=n(605971),s=n(209202),A=n(866569),c=n(83181),l=n(307898),u=n(308695),d=n(223702),h=n(891846),g=n(635649),f=n(217543),p=n(192518);function m(e,t,n,i){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;const r=(0,o.A)(i.contents)?i.contents:i.content;this._innerContentHeaders=r,this._requestsInFlight=0,this._cancelCount=0,this._externalTilesetCount=0;const a=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(a),this._requests=new Array(a),this._ready=!1,this._innerContentResources=new Array(a),this._serverKeys=new Array(a);for(let e=0;e<a;e++){const t=n.getDerivedResource({url:r[e].uri}),i=A.A.getServerKey(t.getUrlComponent());this._innerContentResources[e]=t,this._serverKeys[e]=i}}function _(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function I(e,t){e._cancelCount++,e._tile._contentState=t;const n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;const i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}function E(e,t,n,i){const r=e._innerContentResources[t].clone(),a=e.tile,A=e._serverKeys[t],u=new s.A({throttle:!0,throttleByServer:!0,type:l.A.TILES3D,priorityFunction:function(){return a._priority},serverKey:A});r.request=u,e._requests[t]=u;const d=r.fetchArrayBuffer();if((0,o.A)(d))return d.then(function(t){if(!(n<e._cancelCount)){if(!r.request.cancelled&&r.request.state!==c.A.CANCELLED)return _(e,-1),t;I(e,i)}}).catch(function(o){n<e._cancelCount||(r.request.cancelled||r.request.state===c.A.CANCELLED?I(e,i):(_(e,-1),y(e,t,o)))})}function y(e,t,n){const i=e._tileset,r=e._innerContentResources[t].url,a=(0,o.A)(n.message)?n.message:n.toString();i.tileFailed.numberOfListeners>0?i.tileFailed.raiseEvent({url:r,message:a}):(console.log(`A content failed to load: ${r}`),console.log(`Error: ${a}`))}Object.defineProperties(m.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return!!this._contentsCreated&&this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){throw new a.A("Multiple3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(){throw new a.A("Multiple3DTileContent cannot have group metadata")}},innerContentUrls:{get:function(){return this._innerContentHeaders.map(function(e){return e.uri})}}}),m.prototype.requestInnerContents=function(){if(!function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];(0,o.A)(t[i])?t[i]++:t[i]=1}for(const e in t)if(t.hasOwnProperty(e)&&!A.A.serverHasOpenSlots(e,t[e]))return!1;return A.A.heapHasOpenSlots(e.length)}(this._serverKeys))return void(this.tileset.statistics.numberOfAttemptedRequests+=this._serverKeys.length);const e=this._innerContentHeaders;_(this,e.length);const t=this._cancelCount;for(let n=0;n<e.length;n++)this._arrayFetchPromises[n]=E(this,n,t,this._tile._contentState);return async function(e){const t=e._cancelCount,n=await Promise.all(e._arrayFetchPromises);if(t<e._cancelCount)return;const i=n.map((t,n)=>async function(e,t,n){if((0,o.A)(t))try{const i=(0,p.A)(t),r=e._tileset,a=e._innerContentResources[n],s=e._tile;let A;i.contentType===d.A.EXTERNAL_TILESET&&(e._externalTilesetCount++,s.hasTilesetContent=!0),e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||i.contentType===d.A.GEOMETRY||i.contentType===d.A.VECTOR;const c=h.A[i.contentType];A=(0,o.A)(i.binaryPayload)?await Promise.resolve(c(r,s,a,i.binaryPayload.buffer,0)):await Promise.resolve(c(r,s,a,i.jsonPayload));const l=e._innerContentHeaders[n];if(s.hasImplicitContentMetadata){const e=s.implicitSubtree,t=s.implicitCoordinates;A.metadata=e.getContentMetadataView(t,n)}else s.hasImplicitContent||(A.metadata=(0,g.A)(r,l));const m=(0,f.A)(r,l);return(0,o.A)(m)&&(A.group=new u.A({metadata:m})),A}catch(t){y(e,n,t)}}(e,t,n)),r=await Promise.all(i);return e._contentsCreated=!0,e._contents=r.filter(o.A),e._externalTilesetCount===e._contents.length&&(e._tile.hasRenderableContent=!1),r}(this)},m.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){const t=this._requests[e];(0,o.A)(t)&&t.cancel()}},m.prototype.hasProperty=function(e,t){return!1},m.prototype.getFeature=function(e){},m.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},m.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},m.prototype.update=function(e,t){const n=this._contents,i=n.length;let o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)},m.prototype.pick=function(e,t,n){if(!this._ready)return;let r,a=Number.POSITIVE_INFINITY;const s=this._contents,A=s.length;for(let c=0;c<A;++c){const A=s[c].pick(e,t,n);if(!(0,o.A)(A))continue;const l=i.A.distance(e.origin,A);l<a&&(r=A,a=l)}return(0,o.A)(r)?n:void 0},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,r.A)(this)};const C=m},433184:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(647934),o=n(41476),r=n(491446),a=n(677354),s=n(276904),A=n(352581),c=n(769493),l=n(377496),u=n(804701),d=n(57775),h=n(40118),g=n(342875),f=n(616e3),p=n(756995),m=n(615954),_=n(620297),I=n(443383);function E(e){this._numSamples=1,this._translucentMultipassSupport=!1,this._translucentMRTSupport=!1;const t=e.colorBufferFloat&&e.depthTexture&&e.floatBlend;this._translucentMRTSupport=e.drawBuffers&&t,this._translucentMultipassSupport=!this._translucentMRTSupport&&t,this._opaqueFBO=void 0,this._opaqueTexture=void 0,this._depthStencilTexture=void 0,this._accumulationTexture=void 0,this._translucentFBO=new u.A({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._alphaFBO=new u.A({createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._adjustTranslucentFBO=new u.A({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1}),this._adjustAlphaFBO=new u.A({createColorAttachments:!1}),this._opaqueClearCommand=new c.A({color:new o.A(0,0,0,0),owner:this}),this._translucentMRTClearCommand=new c.A({color:new o.A(0,0,0,1),owner:this}),this._translucentMultipassClearCommand=new c.A({color:new o.A(0,0,0,0),owner:this}),this._alphaClearCommand=new c.A({color:new o.A(1,1,1,1),owner:this}),this._translucentRenderStateCache={},this._alphaRenderStateCache={},this._compositeCommand=void 0,this._adjustTranslucentCommand=void 0,this._adjustAlphaCommand=void 0,this._viewport=new i.A,this._rs=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHDR=!1}function y(e){e._accumulationTexture=e._accumulationTexture&&!e._accumulationTexture.isDestroyed()&&e._accumulationTexture.destroy(),e._revealageTexture=e._revealageTexture&&!e._revealageTexture.isDestroyed()&&e._revealageTexture.destroy()}function C(e){e._translucentFBO.destroy(),e._alphaFBO.destroy(),e._adjustTranslucentFBO.destroy(),e._adjustAlphaFBO.destroy()}function b(e){y(e),C(e)}E.prototype.update=function(e,t,n,o,a){if(!this.isSupported())return;this._opaqueFBO=n,this._opaqueTexture=n.getColorTexture(0),this._depthStencilTexture=n.getDepthStencilTexture();const{width:c,height:l}=this._opaqueTexture,u=this._accumulationTexture,_=!(0,r.A)(u)||u.width!==c||u.height!==l||o!==this._useHDR,I=this._numSamples!==a;if((_||I)&&(this._numSamples=a,function(e,t,n,i){y(e),e._accumulationTexture=new f.A({context:t,width:n,height:i,pixelFormat:s.A.RGBA,pixelDatatype:d.A.FLOAT}),e._revealageTexture=new f.A({context:t,pixelFormat:s.A.RGBA,pixelDatatype:d.A.FLOAT,width:n,height:i,flipY:!1})}(this,e,c,l)),(!(0,r.A)(this._translucentFBO.framebuffer)||_||I)&&!function(e,t){C(e);const n=A.A.FRAMEBUFFER_COMPLETE;let i=!0;const{width:o,height:r}=e._accumulationTexture;if(e._translucentMRTSupport&&(e._translucentFBO.setColorTexture(e._accumulationTexture,0),e._translucentFBO.setColorTexture(e._revealageTexture,1),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture,0),e._adjustTranslucentFBO.setColorTexture(e._revealageTexture,1),e._adjustTranslucentFBO.update(t,o,r),e._translucentFBO.status===n&&e._adjustTranslucentFBO.status===n||(C(e),e._translucentMRTSupport=!1)),!e._translucentMRTSupport){e._translucentFBO.setColorTexture(e._accumulationTexture),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._alphaFBO.setColorTexture(e._revealageTexture),e._alphaFBO.setDepthStencilTexture(e._depthStencilTexture),e._alphaFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture),e._adjustTranslucentFBO.update(t,o,r),e._adjustAlphaFBO.setColorTexture(e._revealageTexture),e._adjustAlphaFBO.update(t,o,r);const a=e._translucentFBO.status===n,s=e._alphaFBO.status===n,A=e._adjustTranslucentFBO.status===n,c=e._adjustAlphaFBO.status===n;a&&s&&A&&c||(b(e),e._translucentMultipassSupport=!1,i=!1)}return i}(this,e))return;this._useHDR=o;const E=this;let B,v;(0,r.A)(this._compositeCommand)||(B=new g.A({sources:[m.A]}),this._translucentMRTSupport&&B.defines.push("MRT"),v={u_opaque:function(){return E._opaqueTexture},u_accumulation:function(){return E._accumulationTexture},u_revealage:function(){return E._revealageTexture}},this._compositeCommand=e.createViewportQuadCommand(B,{uniformMap:v,owner:this})),(0,r.A)(this._adjustTranslucentCommand)||(this._translucentMRTSupport?(B=new g.A({defines:["MRT"],sources:[p.A]}),v={u_bgColor:function(){return E._translucentMRTClearCommand.color},u_depthTexture:function(){return E._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(B,{uniformMap:v,owner:this})):this._translucentMultipassSupport&&(B=new g.A({sources:[p.A]}),v={u_bgColor:function(){return E._translucentMultipassClearCommand.color},u_depthTexture:function(){return E._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(B,{uniformMap:v,owner:this}),v={u_bgColor:function(){return E._alphaClearCommand.color},u_depthTexture:function(){return E._depthStencilTexture}},this._adjustAlphaCommand=e.createViewportQuadCommand(B,{uniformMap:v,owner:this}))),this._viewport.width=c,this._viewport.height=l;const w=!i.A.equals(this._viewport,t.viewport);let T=w!==this._useScissorTest;this._useScissorTest=w,i.A.equals(this._scissorRectangle,t.viewport)||(this._scissorRectangle=i.A.clone(t.viewport,this._scissorRectangle),T=!0),(0,r.A)(this._rs)&&i.A.equals(this._viewport,this._rs.viewport)&&!T||(this._rs=h.A.fromCache({viewport:this._viewport,scissorTest:{enabled:this._useScissorTest,rectangle:this._scissorRectangle}})),(0,r.A)(this._compositeCommand)&&(this._compositeCommand.renderState=this._rs),this._adjustTranslucentCommand&&(this._adjustTranslucentCommand.renderState=this._rs),(0,r.A)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.renderState=this._rs)};const B={enabled:!0,color:new o.A(0,0,0,0),equationRgb:_.A.ADD,equationAlpha:_.A.ADD,functionSourceRgb:I.A.ONE,functionDestinationRgb:I.A.ONE,functionSourceAlpha:I.A.ZERO,functionDestinationAlpha:I.A.ONE_MINUS_SOURCE_ALPHA},v={enabled:!0,color:new o.A(0,0,0,0),equationRgb:_.A.ADD,equationAlpha:_.A.ADD,functionSourceRgb:I.A.ONE,functionDestinationRgb:I.A.ONE,functionSourceAlpha:I.A.ONE,functionDestinationAlpha:I.A.ONE},w={enabled:!0,color:new o.A(0,0,0,0),equationRgb:_.A.ADD,equationAlpha:_.A.ADD,functionSourceRgb:I.A.ZERO,functionDestinationRgb:I.A.ONE_MINUS_SOURCE_ALPHA,functionSourceAlpha:I.A.ZERO,functionDestinationAlpha:I.A.ONE_MINUS_SOURCE_ALPHA};function T(e,t,n,i){let o=n[i.id];if(!(0,r.A)(o)){const e=h.A.getState(i);e.depthMask=!1,e.blending=t,o=h.A.fromCache(e),n[i.id]=o}return o}function S(e,t,n,i){const{shaderCache:o}=e,a=o.getDerivedShaderProgram(t,n);if((0,r.A)(a))return a;const s=t._attributeLocations,A=t.fragmentShaderSource.clone();A.sources=A.sources.map(function(e){return g.A.replaceMain(e,"czm_translucent_main").replace(/out_FragColor/g,"czm_out_FragColor").replace(/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,"").replace(/\bdiscard\b/g,"czm_discard = true").replace(/czm_phong/g,"czm_translucentPhong")}),A.sources.splice(0,0,"vec4 czm_out_FragColor;\nbool czm_discard = false;\n");const c=[...i.matchAll(/out_FragData_(\d+)/g)];let l="";for(let e=0;e<c.length;e++){const t=c[e];l=`layout (location = ${t[1]}) out vec4 ${t[0]};\n${l}`}return A.sources.push(l),A.sources.push(`void main()\n{\n    czm_translucent_main();\n    if (czm_discard)\n    {\n        discard;\n    }\n${i}}\n`),o.createDerivedShaderProgram(t,n,{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:A,attributeLocations:s})}E.prototype.createDerivedCommands=function(e,t,n){if((0,r.A)(n)||(n={}),this._translucentMRTSupport){let o,a;return(0,r.A)(n.translucentCommand)&&(o=n.translucentCommand.shaderProgram,a=n.translucentCommand.renderState),n.translucentCommand=l.A.shallowClone(e,n.translucentCommand),(0,r.A)(o)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=o,n.translucentCommand.renderState=a):(n.translucentCommand.shaderProgram=function(e,t){return S(e,t,"translucentMRT","    vec3 Ci = czm_out_FragColor.rgb * czm_out_FragColor.a;\n    float ai = czm_out_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    out_FragData_0 = vec4(Ci * wzi, ai);\n    out_FragData_1 = vec4(ai * wzi);\n")}(t,e.shaderProgram),n.translucentCommand.renderState=(i=e.renderState,T(0,B,this._translucentRenderStateCache,i)),n.shaderProgramId=e.shaderProgram.id),n}var i;let o,a,s,A;return(0,r.A)(n.translucentCommand)&&(o=n.translucentCommand.shaderProgram,a=n.translucentCommand.renderState,s=n.alphaCommand.shaderProgram,A=n.alphaCommand.renderState),n.translucentCommand=l.A.shallowClone(e,n.translucentCommand),n.alphaCommand=l.A.shallowClone(e,n.alphaCommand),(0,r.A)(o)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=o,n.translucentCommand.renderState=a,n.alphaCommand.shaderProgram=s,n.alphaCommand.renderState=A):(n.translucentCommand.shaderProgram=function(e,t){return S(e,t,"translucentMultipass","    vec3 Ci = czm_out_FragColor.rgb * czm_out_FragColor.a;\n    float ai = czm_out_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    out_FragColor = vec4(Ci, ai) * wzi;\n")}(t,e.shaderProgram),n.translucentCommand.renderState=function(e,t,n){return T(0,v,e._translucentRenderStateCache,n)}(this,0,e.renderState),n.alphaCommand.shaderProgram=function(e,t){return S(e,t,"alphaMultipass","    float ai = czm_out_FragColor.a;\n    out_FragColor = vec4(ai);\n")}(t,e.shaderProgram),n.alphaCommand.renderState=function(e,t,n){return T(0,w,e._alphaRenderStateCache,n)}(this,0,e.renderState),n.shaderProgramId=e.shaderProgram.id),n},E.prototype.executeCommands=function(e,t,n,i,o){this._translucentMRTSupport?function(e,t,n,i,o,a){const{context:s,frameState:A}=t,{useLogDepth:c,shadowState:l}=A,u=t._hdr,d=i.framebuffer,h=l.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(s,i);const g=e._opaqueFBO.framebuffer;i.framebuffer=e._translucentFBO.framebuffer;for(let e=0;e<o.length;++e){let r=o[e];r=c?r.derivedCommands.logDepth.command:r,r=u?r.derivedCommands.hdr.command:r,n(h&&r.receiveShadows?r.derivedCommands.oit.shadows.translucentCommand:r.derivedCommands.oit.translucentCommand,t,i,g)}if((0,r.A)(a)){const e=a.unclassifiedCommand;n(h&&e.receiveShadows?e.derivedCommands.oit.shadows.translucentCommand:e.derivedCommands.oit.translucentCommand,t,i,g)}i.framebuffer=d}(this,e,t,n,i,o):function(e,t,n,i,o,a){const{context:s,frameState:A}=t,{useLogDepth:c,shadowState:l}=A,u=t._hdr,d=i.framebuffer,h=l.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(s,i),i.framebuffer=e._adjustAlphaFBO.framebuffer,e._adjustAlphaCommand.execute(s,i);const g=e._opaqueFBO.framebuffer;i.framebuffer=e._translucentFBO.framebuffer;for(let e=0;e<o.length;++e){let r=o[e];r=c?r.derivedCommands.logDepth.command:r,r=u?r.derivedCommands.hdr.command:r,n(h&&r.receiveShadows?r.derivedCommands.oit.shadows.translucentCommand:r.derivedCommands.oit.translucentCommand,t,i,g)}if((0,r.A)(a)){const e=a.unclassifiedCommand;n(h&&e.receiveShadows?e.derivedCommands.oit.shadows.translucentCommand:e.derivedCommands.oit.translucentCommand,t,i,g)}i.framebuffer=e._alphaFBO.framebuffer;for(let e=0;e<o.length;++e){let r=o[e];r=c?r.derivedCommands.logDepth.command:r,r=u?r.derivedCommands.hdr.command:r,n(h&&r.receiveShadows?r.derivedCommands.oit.shadows.alphaCommand:r.derivedCommands.oit.alphaCommand,t,i,g)}if((0,r.A)(a)){const e=a.unclassifiedCommand;n(h&&e.receiveShadows?e.derivedCommands.oit.shadows.alphaCommand:e.derivedCommands.oit.alphaCommand,t,i,g)}i.framebuffer=d}(this,e,t,n,i,o)},E.prototype.execute=function(e,t){this._compositeCommand.execute(e,t)},E.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this._opaqueFBO.framebuffer,o.A.clone(n,this._opaqueClearCommand.color),this._opaqueClearCommand.execute(e,t),t.framebuffer=this._translucentFBO.framebuffer,(this._translucentMRTSupport?this._translucentMRTClearCommand:this._translucentMultipassClearCommand).execute(e,t),this._translucentMultipassSupport&&(t.framebuffer=this._alphaFBO.framebuffer,this._alphaClearCommand.execute(e,t)),t.framebuffer=i},E.prototype.isSupported=function(){return this._translucentMRTSupport||this._translucentMultipassSupport},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return b(this),(0,r.A)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,r.A)(this._adjustTranslucentCommand)&&(this._adjustTranslucentCommand.shaderProgram=this._adjustTranslucentCommand.shaderProgram&&this._adjustTranslucentCommand.shaderProgram.destroy()),(0,r.A)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.shaderProgram=this._adjustAlphaCommand.shaderProgram&&this._adjustAlphaCommand.shaderProgram.destroy()),(0,a.A)(this)};const x=E},566334:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(672743),o=n(915325),r=n(491446),a=n(605971),s=n(697422),A=n(744603),c=n(41076),l=n(66458);const u=new i.A("MapQuest, Open Street Map and contributors, CC-BY-SA");function d(e){e=e??o.A.EMPTY_OBJECT;const t=A.A.createIfNeeded(e.url??"https://tile.openstreetmap.org/");t.appendForwardSlash(),t.url+=`{z}/{x}/{y}${e.retinaTiles?"@2x":""}.${e.fileExtension??"png"}`;const n=new c.A({ellipsoid:e.ellipsoid}),r=e.minimumLevel??0,d=e.maximumLevel,h=e.rectangle??n.rectangle,g=n.positionToTileXY(s.A.southwest(h),r),f=n.positionToTileXY(s.A.northeast(h),r),p=(Math.abs(f.x-g.x)+1)*(Math.abs(f.y-g.y)+1);if(p>4)throw new a.A(`The rectangle and minimumLevel indicate that there are ${p} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);let m=e.credit??u;"string"==typeof m&&(m=new i.A(m)),l.A.call(this,{url:t,credit:m,tilingScheme:n,tileWidth:256,tileHeight:256,minimumLevel:r,maximumLevel:d,rectangle:h})}(0,r.A)(Object.create)&&(d.prototype=Object.create(l.A.prototype),d.prototype.constructor=d);const h=d},736125:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(491446),r=n(677354),a=n(493721);function s(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(s.prototype,{length:{get:function(){return this._length}}}),s.prototype.add=function(e,t){i.A.defined("primitive",e),(0,o.A)(t)&&i.A.typeOf.number("zIndex",t),t=t??0;let n=this._collections[t];if(!(0,o.A)(n)){n=new a.A({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;const e=this._collectionsArray;let i=0;for(;i<e.length&&e[i]._zIndex<t;)i++;e.splice(i,0,n)}return n.add(e),this._length++,e._zIndex=t,e},s.prototype.set=function(e,t){return i.A.defined("primitive",e),i.A.typeOf.number("zIndex",t),t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e},s.prototype.remove=function(e,t){if(this.contains(e)){const n=e._zIndex,i=this._collections[n];let o;return o=t?i.remove(e):i.removeAndDestroy(e),o&&this._length--,0===i.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),o}return!1},s.prototype.removeAll=function(){const e=this._collectionsArray;for(let t=0;t<e.length;t++){const n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0},s.prototype.contains=function(e){if(!(0,o.A)(e))return!1;const t=this._collections[e._zIndex];return(0,o.A)(t)&&t.contains(e)},s.prototype.update=function(e){if(!this.show)return;const t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return this.removeAll(),(0,r.A)(this)};const A=s},467302:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(915325),o=n(491446),r=n(677354),a=n(605971),s=n(230259),A=n(116112);function c(e){e=e??i.A.EMPTY_OBJECT;const t=(0,A.A)(e.container);if(!(0,o.A)(t))throw new a.A("container is required");this._container=t;const n=document.createElement("div");n.className="cesium-performanceDisplay";const r=document.createElement("div");r.className="cesium-performanceDisplay-fps",this._fpsText=document.createTextNode(""),r.appendChild(this._fpsText);const c=document.createElement("div");c.className="cesium-performanceDisplay-ms",this._msText=document.createTextNode(""),c.appendChild(this._msText),n.appendChild(c),n.appendChild(r),this._container.appendChild(n),this._lastFpsSampleTime=(0,s.A)(),this._lastMsSampleTime=(0,s.A)(),this._fpsFrameCount=0,this._msFrameCount=0,this._throttled=!1;const l=document.createElement("div");l.className="cesium-performanceDisplay-throttled",this._throttledText=document.createTextNode(""),l.appendChild(this._throttledText),n.appendChild(l)}Object.defineProperties(c.prototype,{throttled:{get:function(){return this._throttled},set:function(e){this._throttled!==e&&(this._throttledText.nodeValue=e?"(throttled)":"",this._throttled=e)}}}),c.prototype.update=function(e){const t=(0,s.A)(),n=e??!0;this._fpsFrameCount++;const i=t-this._lastFpsSampleTime;if(i>1e3){let e="N/A";n&&(e=1e3*this._fpsFrameCount/i|0),this._fpsText.nodeValue=`${e} FPS`,this._lastFpsSampleTime=t,this._fpsFrameCount=0}this._msFrameCount++;const o=t-this._lastMsSampleTime;if(o>200){let e="N/A";n&&(e=(o/this._msFrameCount).toFixed(2)),this._msText.nodeValue=`${e} MS`,this._lastMsSampleTime=t,this._msFrameCount=0}},c.prototype.destroy=function(){return(0,r.A)(this)};const l=c},670270:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(626809),o=n(491446),r=n(677354),a=n(804701),s=n(40118);function A(){this._framebuffer=new a.A,this._textureToCopy=void 0,this._copyDepthCommand=void 0}Object.defineProperties(A.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),A.prototype.update=function(e,t){!function(e,t,n){const{width:i,height:o}=n;e._framebuffer.update(t,i,o)}(this,e,t),function(e,t,n){(0,o.A)(e._copyDepthCommand)||(e._copyDepthCommand=t.createViewportQuadCommand("uniform highp sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n  vec4 globeDepthPacked = texture(czm_globeDepthTexture, v_textureCoordinates);\n  float globeDepth = czm_unpackDepth(globeDepthPacked);\n  float depth = texture(colorTexture, v_textureCoordinates).r;\n  out_FragColor = czm_branchFreeTernary(globeDepth <= 0.0 || globeDepth >= 1.0 || depth < globeDepth && depth > 0.0 && depth < 1.0,\n    czm_packDepth(depth), globeDepthPacked);\n}\n",{renderState:s.A.fromCache(),uniformMap:{colorTexture:function(){return e._textureToCopy}},owner:e})),e._textureToCopy=n,e._copyDepthCommand.framebuffer=e.framebuffer}(this,e,t)};const c=new i.A,l=new i.A(1,1/255,1/65025,1/16581375);A.prototype.getDepth=function(e,t,n){if(!(0,o.A)(this.framebuffer))return;const r=e.readPixels({x:t,y:n,width:1,height:1,framebuffer:this.framebuffer}),a=i.A.unpack(r,0,c);return i.A.divideByScalar(a,255,a),i.A.dot(a,l)},A.prototype.executeCopyDepth=function(e,t){this._copyDepthCommand.execute(e,t)},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this._framebuffer.destroy(),(0,o.A)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=(0,o.A)(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy()),(0,r.A)(this)};const u=A},425415:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(647934),o=n(677354),r=n(804701),a=n(326429);function s(){this._framebuffer=new r.A({color:!1,depthStencil:!0,supportsDepthTexture:!0}),this._passState=void 0}Object.defineProperties(s.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),s.prototype.update=function(e,t,n){const o=n.width,r=n.height;this._framebuffer.isDirty(o,r)&&function(e,t){const n=t.drawingBufferWidth,o=t.drawingBufferHeight;e._framebuffer.update(t,n,o);const r=new a.A(t);r.blendingEnabled=!1,r.scissorTest={enabled:!0,rectangle:new i.A},r.viewport=new i.A,e._passState=r}(this,e);const s=this.framebuffer,A=this._passState;return A.framebuffer=s,A.viewport.width=o,A.viewport.height=r,A.scissorTest.rectangle.x=t.x,A.scissorTest.rectangle.y=r-t.y,A.scissorTest.rectangle.width=1,A.scissorTest.rectangle.height=1,A},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return this._framebuffer.destroy(),(0,o.A)(this)};const A=s},981152:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(647934),o=n(41476),r=n(491446),a=n(677354),s=n(804701),A=n(326429);function c(e){const t=new A.A(e);t.blendingEnabled=!1,t.scissorTest={enabled:!0,rectangle:new i.A},t.viewport=new i.A,this._context=e,this._fb=new s.A({depthStencil:!0}),this._passState=t,this._width=0,this._height=0}c.prototype.begin=function(e,t){const n=this._context,{width:o,height:r}=t;return i.A.clone(e,this._passState.scissorTest.rectangle),this._width=o,this._height=r,this._fb.update(n,o,r),this._passState.framebuffer=this._fb.framebuffer,this._passState.viewport.width=o,this._passState.viewport.height=r,this._passState};const l=new o.A;c.prototype.end=function(e){const t=e.width??1,n=e.height??1,i=this._context,a=i.readPixels({x:e.x,y:e.y,width:t,height:n,framebuffer:this._fb.framebuffer}),s=Math.max(t,n),A=s*s,c=Math.floor(.5*t),u=Math.floor(.5*n);let d=0,h=0,g=0,f=-1;for(let e=0;e<A;++e){if(-c<=d&&d<=c&&-u<=h&&h<=u){const e=4*((u-h)*t+d+c);l.red=o.A.byteToFloat(a[e]),l.green=o.A.byteToFloat(a[e+1]),l.blue=o.A.byteToFloat(a[e+2]),l.alpha=o.A.byteToFloat(a[e+3]);const n=i.getObjectByPickColor(l);if((0,r.A)(n))return n}if(d===h||d<0&&-d===h||d>0&&d===1-h){const e=g;g=-f,f=e}d+=g,h+=f}},c.prototype.readCenterPixel=function(e){const t=e.width??1,n=e.height??1,i=this._context.readPixels({x:e.x,y:e.y,width:t,height:n,framebuffer:this._fb.framebuffer}),o=Math.floor(.5*t),r=4*(Math.floor(.5*n)*t+o);return i.slice(r,r+4)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._fb.destroy(),(0,a.A)(this)};const u=c},842623:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n,i,o){this.schemaId=e,this.className=t,this.propertyName=n,this.classProperty=i,this.metadataProperty=o}},878471:(e,t,n)=>{"use strict";n.d(t,{A:()=>_e});var i=n(564886),o=n(647934),r=n(434067),a=n(267980),s=n(336946),A=n(369031),c=n(41476),l=n(491446),u=n(605971),d=n(584164),h=n(811203),g=n(65891),f=n(666775),p=n(65783),m=n(766067),_=n(708857),I=n(635577),E=n(622569),y=n(581010),C=n(953677),b=n(658036),B=n(670270),v=n(493721),w=n(62467),T=n(78173),S=n(342767);const x=new C.A({pass:y.A.MOST_DETAILED_PRELOAD}),D=new C.A({pass:y.A.MOST_DETAILED_PICK}),Q=new C.A({pass:y.A.PICK});function N(e){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;const t=new o.A(0,0,1,1),n=new I.A(e);n.frustum=new h.A({width:.1,aspectRatio:1,near:.1}),this._pickOffscreenView=new S.A(e,n,t)}N.prototype.update=function(){this._pickPositionCacheDirty=!0},N.prototype.getPickDepth=function(e,t){const n=e.view.pickDepths;let i=n[t];return(0,l.A)(i)||(i=new B.A,n[t]=i),i};const R=new g.A,M=new a.A,L=new a.A,P=new r.A,O=new d.A,F=new p.A,U=new r.A;function k(e,t,n,i,o){const r=e.camera.frustum;return r instanceof h.A||r instanceof g.A?function(e,t,n,i,o){const r=e.camera;let s=r.frustum;const A=s.offCenterFrustum;(0,l.A)(A)&&(s=A);let c=2*(t.x-o.x)/o.width-1;c*=.5*(s.right-s.left);let u=2*(o.height-t.y-o.y)/o.height-1;u*=.5*(s.top-s.bottom);const h=d.A.clone(r.transform,O);r._setTransform(d.A.IDENTITY);const g=a.A.clone(r.position,M);a.A.multiplyByScalar(r.right,c,L),a.A.add(L,g,g),a.A.multiplyByScalar(r.up,u,L),a.A.add(L,g,g),r._setTransform(h),e.mode===w.A.SCENE2D&&a.A.fromElements(g.z,g.x,g.y,g);const f=s.getPixelDimensions(o.width,o.height,1,1,P),p=R;return p.right=.5*f.x,p.left=-p.right,p.top=.5*f.y,p.bottom=-p.top,p.near=s.near,p.far=s.far,p.computeCullingVolume(g,r.directionWC,r.upWC)}(e,t,0,0,o):function(e,t,n,i,o){const r=e.camera,a=r.frustum,s=a.near,A=Math.tan(.5*a.fovy),c=a.aspectRatio*A,l=(2*(t.x-o.x)/o.width-1)*s*c,u=(2*(o.height-t.y-o.y)/o.height-1)*s*A,d=a.getPixelDimensions(o.width,o.height,1,1,U),h=d.x*n*.5,g=d.y*i*.5,f=F;return f.top=u+g,f.bottom=u-g,f.right=l+h,f.left=l-h,f.near=s,f.far=a.far,f.computeCullingVolume(r.positionWC,r.directionWC,r.upWC)}(e,t,n,i,o)}const G=new o.A(0,0,3,3),H=new r.A,V=new c.A(0,0,0,0);function z(e,t,n,i,o){return o.width=n??3,o.height=i??o.width,o.x=t.x-.5*(o.width-1),o.y=e-t.y-.5*(o.height-1),o}N.prototype.pick=function(e,t,n,i){A.A.defined("windowPosition",t);const{context:r,frameState:a,defaultView:s}=e,{viewport:c,pickFramebuffer:l}=s;e.view=s,c.x=0,c.y=0,c.width=r.drawingBufferWidth,c.height=r.drawingBufferHeight;let u=s.passState;u.viewport=o.A.clone(c,u.viewport);const d=T.A.transformWindowToDrawingBuffer(e,t,H),h=z(r.drawingBufferHeight,d,n,i,G);e.jobScheduler.disableThisFrame(),e.updateFrameState(),a.cullingVolume=k(e,d,h.width,h.height,c),a.invertClassification=!1,a.passes.pick=!0,a.tilesetPassState=Q,r.uniformState.update(a),e.updateEnvironment(),u=l.begin(h,c),e.updateAndExecuteCommands(u,V),e.resolveFramebuffers(u);const g=l.end(h);return r.endFrame(),g},N.prototype.pickVoxelCoordinate=function(e,t,n,i){A.A.defined("windowPosition",t);const{context:r,frameState:a,defaultView:s}=e,{viewport:c,pickFramebuffer:l}=s;e.view=s,c.x=0,c.y=0,c.width=r.drawingBufferWidth,c.height=r.drawingBufferHeight;let u=s.passState;u.viewport=o.A.clone(c,u.viewport);const d=T.A.transformWindowToDrawingBuffer(e,t,H),h=z(r.drawingBufferHeight,d,n,i,G);e.jobScheduler.disableThisFrame(),e.updateFrameState(),a.cullingVolume=k(e,d,h.width,h.height,c),a.invertClassification=!1,a.passes.pickVoxel=!0,a.tilesetPassState=Q,r.uniformState.update(a),e.updateEnvironment(),u=l.begin(h,c),e.updateAndExecuteCommands(u,V),e.resolveFramebuffers(u);const g=l.readCenterPixel(h);return r.endFrame(),g},N.prototype.pickMetadata=function(e,t,n){A.A.typeOf.object("windowPosition",t),A.A.typeOf.object("pickedMetadataInfo",n);const{context:i,frameState:r,defaultView:a}=e,{viewport:s,pickFramebuffer:c}=a;e.view=a,s.x=0,s.y=0,s.width=i.drawingBufferWidth,s.height=i.drawingBufferHeight;let l=a.passState;l.viewport=o.A.clone(s,l.viewport);const u=T.A.transformWindowToDrawingBuffer(e,t,H),d=z(i.drawingBufferHeight,u,1,1,G);e.jobScheduler.disableThisFrame(),e.updateFrameState(),r.cullingVolume=k(e,u,d.width,d.height,s),r.invertClassification=!1,r.passes.pick=!0,r.tilesetPassState=Q,r.pickingMetadata=!0,r.pickedMetadataInfo=n,i.uniformState.update(r),e.updateEnvironment(),l=c.begin(d,s),e.updateAndExecuteCommands(l,V);const h=e._environmentState.useOIT;e._environmentState.useOIT=!1,e.resolveFramebuffers(l),e._environmentState.useOIT=h;const g=c.readCenterPixel(d);return i.endFrame(),r.pickingMetadata=!1,b.A.decodeMetadataValues(n.classProperty,n.metadataProperty,g)};const j=new f.A,Y=new p.A,q=new h.A,W=new g.A;N.prototype.pickPositionWorldCoordinates=function(e,t,n){if(!e.useDepthPicking)return;if(A.A.defined("windowPosition",t),!e.context.depthTexture)throw new u.A("Picking from the depth buffer is not supported. Check pickPositionSupported.");const i=t.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return a.A.clone(this._pickPositionCache[i],n);const{context:r,frameState:s,camera:c,defaultView:d}=e,{uniformState:h}=r;e.view=d;const g=T.A.transformWindowToDrawingBuffer(e,t,H);let f;e.pickTranslucentDepth?function(e,t){const{defaultView:n,context:i,frameState:r,environmentState:a}=e,{viewport:s,pickDepthFramebuffer:A}=n;e.view=n,s.x=0,s.y=0,s.width=i.drawingBufferWidth,s.height=i.drawingBufferHeight;let c=n.passState;c.viewport=o.A.clone(s,c.viewport),e.clearPasses(r.passes),r.passes.pick=!0,r.passes.depth=!0,r.cullingVolume=k(e,t,1,1,s),r.tilesetPassState=Q,e.updateEnvironment(),a.renderTranslucentDepthForPick=!0,c=A.update(i,t,s),e.updateAndExecuteCommands(c,V),e.resolveFramebuffers(c),i.endFrame()}(e,g):(e.updateFrameState(),h.update(s),e.updateEnvironment()),g.y=e.drawingBufferHeight-g.y,f=(0,l.A)(c.frustum.fov)?c.frustum.clone(j):(0,l.A)(c.frustum.infiniteProjectionMatrix)?c.frustum.clone(Y):(0,l.A)(c.frustum.width)?c.frustum.clone(q):c.frustum.clone(W);const{frustumCommandsList:p}=d,m=p.length;for(let t=0;t<m;++t){const o=this.getPickDepth(e,t).getDepth(r,g.x,g.y);if((0,l.A)(o)&&o>0&&o<1){const r=p[t];let A;return e.mode===w.A.SCENE2D?(A=c.position.z,c.position.z=A-r.near+1,f.far=Math.max(1,r.far-r.near),f.near=1,h.update(s),h.updateFrustum(f)):(f.near=r.near*(0!==t?e.opaqueFrustumNearOffset:1),f.far=r.far,h.updateFrustum(f)),n=T.A.drawingBufferToWorldCoordinates(e,g,o,n),e.mode===w.A.SCENE2D&&(c.position.z=A,h.update(s)),this._pickPositionCache[i]=a.A.clone(n),n}}this._pickPositionCache[i]=void 0};const J=new s.A;function K(e,t){let n,i;const o=[],r=[],a=[],s=[];(0,l.A)(e)||(e=Number.MAX_VALUE);let A=t();for(;(0,l.A)(A);){const n=A.object,c=A.position,u=A.exclude;if((0,l.A)(c)&&!(0,l.A)(n)){o.push(A);break}if(!(0,l.A)(n)||!(0,l.A)(n.primitive))break;if(!u&&(o.push(A),0>=--e))break;const d=n.primitive;let h=!1;"function"==typeof d.getGeometryInstanceAttributes&&(0,l.A)(n.id)&&(i=d.getGeometryInstanceAttributes(n.id),(0,l.A)(i)&&(0,l.A)(i.show)&&(h=!0,i.show=_.A.toValue(!1,i.show),a.push(i))),n instanceof E.A&&(h=!0,n.show=!1,s.push(n)),h||(d.show=!1,r.push(d)),A=t()}for(n=0;n<r.length;++n)r[n].show=!0;for(n=0;n<a.length;++n)i=a[n],i.show=_.A.toValue(!0,i.show);for(n=0;n<s.length;++n)s[n].show=!0;return o}N.prototype.pickPosition=function(e,t,n){if(n=this.pickPositionWorldCoordinates(e,t,n),(0,l.A)(n)&&e.mode!==w.A.SCENE3D){a.A.fromElements(n.y,n.z,n.x,n);const t=e.mapProjection,i=t.ellipsoid,o=t.unproject(n,J);i.cartographicToCartesian(o,n)}return n},N.prototype.drillPick=function(e,t,n,i,o){const r=this;return K(n,function(){const n=r.pick(e,t,i,o);if((0,l.A)(n))return{object:n,position:void 0,exclude:!1}}).map(function(e){return e.object})};const X=new a.A,Z=new a.A;function $(e,t,n){this.ray=e,this.width=t,this.tilesets=n,this.ready=!1;const i=this;this.promise=new Promise(e=>{i._completePick=()=>{e()}})}function ee(e,t,n,i){const o=t.direction,r=a.A.mostOrthogonalAxis(o,X),s=a.A.cross(o,r,X),A=a.A.cross(o,s,Z);return i.position=t.origin,i.direction=o,i.up=A,i.right=s,i.frustum.width=n??.1,i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function te(e,t,n){const i=t.frameState,{ray:o,width:r,tilesets:a}=n,s=e._pickOffscreenView.camera,A=ee(0,o,r,s),c=x;c.camera=s,c.cullingVolume=A;let l=!0;const u=a.length;for(let e=0;e<u;++e){const n=a[e];n.show&&t.primitives.contains(n)&&(n.updateForPass(i,c),l=l&&c.ready)}return l&&n._completePick(),l}function ne(e,t,n){for(let i=0;i<e.length;++i){const o=e.get(i);o.show&&((0,l.A)(o.isCesium3DTileset)?(0,l.A)(t)&&-1!==t.indexOf(o)||n.push(o):o instanceof v.A&&ne(o,t,n))}}function ie(e,t,n,i,o,r){const a=[];if(ne(t.primitives,i,a),0===a.length)return Promise.resolve(r());const s=new $(n,o,a);return e._mostDetailedRayPicks.push(s),s.promise.then(function(){return r()})}function oe(e,t){return!(!(0,l.A)(e)||!(0,l.A)(t)||0===t.length)&&(t.indexOf(e)>-1||t.indexOf(e.primitive)>-1||t.indexOf(e.id)>-1)}function re(e,t,n,i,r,a,s,A){return K(i,function(){return function(e,t,n,i,r,a,s){const{context:A,frameState:c}=t,u=A.uniformState,d=e._pickOffscreenView;t.view=d,ee(0,n,r,d.camera);const h=o.A.clone(d.viewport,G),g=d.pickFramebuffer.begin(h,d.viewport);let f;t.jobScheduler.disableThisFrame(),t.updateFrameState(),c.invertClassification=!1,c.passes.pick=!0,c.passes.offscreen=!0,c.tilesetPassState=s?D:Q,u.update(c),t.updateEnvironment(),t.updateAndExecuteCommands(g,V),t.resolveFramebuffers(g);const p=d.pickFramebuffer.end(h);if(t.context.depthTexture){const{frustumCommandsList:i}=d,o=i.length;for(let r=0;r<o;++r){const o=e.getPickDepth(t,r).getDepth(A,0,0);if((0,l.A)(o)&&o>0&&o<1){const e=i[r],a=e.near*(0!==r?t.opaqueFrustumNearOffset:1),s=a+o*(e.far-a);f=m.A.getPoint(n,s);break}}}if(t.view=t.defaultView,A.endFrame(),(0,l.A)(p)||(0,l.A)(f))return{object:p,position:f,exclude:!(0,l.A)(f)&&a||oe(p,i)}}(e,t,n,r,a,s,A)})}function ae(e,t,n,i,o,r,a){const s=re(e,t,n,1,i,o,r,a);if(s.length>0)return s[0]}function se(e,t,n,i,o,r,a,s){return re(e,t,n,i,o,r,a,s)}function Ae(e,t){return new Promise((n,i)=>{t.then(function(t){const i=e.postRender.addEventListener(function(){i(),n(t)});e.requestRender()}).catch(function(e){i(e)})})}N.prototype.updateMostDetailedRayPicks=function(e){const t=this._mostDetailedRayPicks;for(let n=0;n<t.length;++n)te(this,e,t[n])&&t.splice(n--,1)},N.prototype.pickFromRay=function(e,t,n,i){if(A.A.defined("ray",t),e.mode!==w.A.SCENE3D)throw new u.A("Ray intersections are only supported in 3D mode.");return ae(this,e,t,n,i,!1,!1)},N.prototype.drillPickFromRay=function(e,t,n,i,o){if(A.A.defined("ray",t),e.mode!==w.A.SCENE3D)throw new u.A("Ray intersections are only supported in 3D mode.");return se(this,e,t,n,i,o,!1,!1)},N.prototype.pickFromRayMostDetailed=function(e,t,n,i){if(A.A.defined("ray",t),e.mode!==w.A.SCENE3D)throw new u.A("Ray intersections are only supported in 3D mode.");const o=this;return t=m.A.clone(t),n=(0,l.A)(n)?n.slice():n,Ae(e,ie(o,e,t,n,i,function(){return ae(o,e,t,n,i,!1,!0)}))},N.prototype.drillPickFromRayMostDetailed=function(e,t,n,i,o){if(A.A.defined("ray",t),e.mode!==w.A.SCENE3D)throw new u.A("Ray intersections are only supported in 3D mode.");const r=this;return t=m.A.clone(t),i=(0,l.A)(i)?i.slice():i,Ae(e,ie(r,e,t,i,o,function(){return se(r,e,t,n,i,o,!1,!0)}))};const ce=new a.A,le=new a.A,ue=new m.A,de=new s.A;function he(e,t){const n=e.ellipsoid,o=i.A._defaultMaxTerrainHeight,r=n.geodeticSurfaceNormalCartographic(t,le),A=s.A.toCartesian(t,n,ce),c=ue;c.origin=A,c.direction=r;const l=new m.A;return m.A.getPoint(c,o,l.origin),a.A.negate(r,l.direction),l}function ge(e,t){const n=e.ellipsoid;return he(e,s.A.fromCartesian(t,n,de))}function fe(e,t){const n=e.ellipsoid;return s.A.fromCartesian(t,n,de).height}function pe(e,t,n,i,o){const r=he(t,n);return ie(e,t,r,i,o,function(){const n=ae(e,t,r,i,o,!0,!0);if((0,l.A)(n))return fe(t,n.position)})}function me(e,t,n,i,o,r){const s=ge(t,n);return ie(e,t,s,i,o,function(){const n=ae(e,t,s,i,o,!0,!0);if((0,l.A)(n))return a.A.clone(n.position,r)})}N.prototype.sampleHeight=function(e,t,n,i){if(A.A.defined("position",t),e.mode!==w.A.SCENE3D)throw new u.A("sampleHeight is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new u.A("sampleHeight requires depth texture support. Check sampleHeightSupported.");const o=ae(this,e,he(e,t),n,i,!0,!1);if((0,l.A)(o))return fe(e,o.position)},N.prototype.clampToHeight=function(e,t,n,i,o){if(A.A.defined("cartesian",t),e.mode!==w.A.SCENE3D)throw new u.A("clampToHeight is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new u.A("clampToHeight requires depth texture support. Check clampToHeightSupported.");const r=ae(this,e,ge(e,t),n,i,!0,!1);if((0,l.A)(r))return a.A.clone(r.position,o)},N.prototype.sampleHeightMostDetailed=function(e,t,n,i){if(A.A.defined("positions",t),e.mode!==w.A.SCENE3D)throw new u.A("sampleHeightMostDetailed is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new u.A("sampleHeightMostDetailed requires depth texture support. Check sampleHeightSupported.");n=(0,l.A)(n)?n.slice():n;const o=t.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=pe(this,e,t[a],n,i);return Ae(e,Promise.all(r).then(function(e){const n=e.length;for(let i=0;i<n;++i)t[i].height=e[i];return t}))},N.prototype.clampToHeightMostDetailed=function(e,t,n,i){if(A.A.defined("cartesians",t),e.mode!==w.A.SCENE3D)throw new u.A("clampToHeightMostDetailed is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new u.A("clampToHeightMostDetailed requires depth texture support. Check clampToHeightSupported.");n=(0,l.A)(n)?n.slice():n;const o=t.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=me(this,e,t[a],n,i,t[a]);return Ae(e,Promise.all(r).then(function(e){const n=e.length;for(let i=0;i<n;++i)t[i]=e[i];return t}))},N.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()};const _e=N},679854:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(267980),o=n(369031),r=n(41476),a=n(430346),s=n(571804),A=n(491446),c=n(604752),l=n(123245),u=n(730839),d=n(468741),h=n(595826);const g={},f=Uint32Array.BYTES_PER_ELEMENT;g.parse=function(e,t){t=t??0,o.A.defined("arrayBuffer",e);const n=new Uint8Array(e),g=new DataView(e);t+=f;const p=g.getUint32(t,!0);if(1!==p)throw new l.A(`Only Point Cloud tile version 1 is supported.  Version ${p} is not.`);t+=f,t+=f;const m=g.getUint32(t,!0);if(0===m)throw new l.A("Feature table must have a byte length greater than zero");t+=f;const _=g.getUint32(t,!0);t+=f;const I=g.getUint32(t,!0);t+=f;const E=g.getUint32(t,!0);t+=f;const y=(0,c.A)(n,t,m);t+=m;const C=new Uint8Array(e,t,_);let b,B;t+=_,I>0&&(b=(0,c.A)(n,t,I),0===Object.keys(b).length&&(b=void 0),t+=I,E>0&&(B=new Uint8Array(e,t,E),B=new Uint8Array(B),t+=E));const v=new d.A(y,C),w=v.getGlobalProperty("POINTS_LENGTH");if(v.featuresLength=w,!(0,A.A)(w))throw new l.A("Feature table global property: POINTS_LENGTH must be defined");let T=v.getGlobalProperty("RTC_CENTER",s.A.FLOAT,3);(0,A.A)(T)&&(T=i.A.unpack(T));const S=function(e,t){const n=e.json;let i,o,r;const s=(0,A.A)(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,c=(0,A.A)(t)&&(0,A.A)(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;let u,d,h,g,f,p;if((0,A.A)(c)&&(r=c.properties),(0,A.A)(s)){o=s.properties;const t=s.byteOffset,n=s.byteLength;if(!(0,A.A)(o)||!(0,A.A)(t)||!(0,A.A)(n))throw new l.A("Draco properties, byteOffset, and byteLength must be defined");i=e.buffer.slice(t,t+n),u=(0,A.A)(o.POSITION),d=(0,A.A)(o.RGB)||(0,A.A)(o.RGBA),h=(0,A.A)(o.NORMAL),g=(0,A.A)(o.BATCH_ID),f=(0,A.A)(o.RGBA)}return(0,A.A)(i)&&(p={buffer:i,featureTableProperties:o,batchTableProperties:r,properties:(0,a.A)(o,r),dequantizeInShader:!0}),{draco:p,hasPositions:u,hasColors:d,isTranslucent:f,hasNormals:h,hasBatchIds:g}}(v,b);if(S.rtcCenter=T,S.pointsLength=w,!S.hasPositions){const e=function(e){const t=e.json;let n;if((0,A.A)(t.POSITION))return n=e.getPropertyArray("POSITION",s.A.FLOAT,3),{name:h.A.POSITION,semantic:h.A.POSITION,typedArray:n,isQuantized:!1,componentDatatype:s.A.FLOAT,type:u.A.VEC3};if((0,A.A)(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",s.A.UNSIGNED_SHORT,3);const t=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",s.A.FLOAT,3);if(!(0,A.A)(t))throw new l.A("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=65535,r=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",s.A.FLOAT,3);if(!(0,A.A)(r))throw new l.A("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:h.A.POSITION,semantic:h.A.POSITION,typedArray:n,isQuantized:!0,componentDatatype:s.A.FLOAT,type:u.A.VEC3,quantizedRange:o,quantizedVolumeOffset:i.A.unpack(r),quantizedVolumeScale:i.A.unpack(t),quantizedComponentDatatype:s.A.UNSIGNED_SHORT,quantizedType:u.A.VEC3}}}(v);S.positions=e,S.hasPositions=S.hasPositions||(0,A.A)(e)}if(!S.hasPositions)throw new l.A("Either POSITION or POSITION_QUANTIZED must be defined.");if(!S.hasNormals){const e=function(e){const t=e.json;let n;if((0,A.A)(t.NORMAL))return n=e.getPropertyArray("NORMAL",s.A.FLOAT,3),{name:h.A.NORMAL,semantic:h.A.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:s.A.FLOAT,type:u.A.VEC3};if((0,A.A)(t.NORMAL_OCT16P)){n=e.getPropertyArray("NORMAL_OCT16P",s.A.UNSIGNED_BYTE,2);const t=8;return{name:h.A.NORMAL,semantic:h.A.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<t)-1,quantizedType:u.A.VEC2,quantizedComponentDatatype:s.A.UNSIGNED_BYTE,componentDatatype:s.A.FLOAT,type:u.A.VEC3}}}(v);S.normals=e,S.hasNormals=S.hasNormals||(0,A.A)(e)}if(!S.hasColors){const e=function(e){const t=e.json;let n;if((0,A.A)(t.RGBA))return n=e.getPropertyArray("RGBA",s.A.UNSIGNED_BYTE,4),{name:h.A.COLOR,semantic:h.A.COLOR,setIndex:0,typedArray:n,componentDatatype:s.A.UNSIGNED_BYTE,type:u.A.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if((0,A.A)(t.RGB))return n=e.getPropertyArray("RGB",s.A.UNSIGNED_BYTE,3),{name:"COLOR",semantic:h.A.COLOR,setIndex:0,typedArray:n,componentDatatype:s.A.UNSIGNED_BYTE,type:u.A.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if((0,A.A)(t.RGB565))return n=e.getPropertyArray("RGB565",s.A.UNSIGNED_SHORT,1),{name:"COLOR",semantic:h.A.COLOR,setIndex:0,typedArray:n,componentDatatype:s.A.FLOAT,type:u.A.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if((0,A.A)(t.CONSTANT_RGBA)){const t=e.getGlobalProperty("CONSTANT_RGBA",s.A.UNSIGNED_BYTE,4),n=t[3],i=r.A.fromBytes(t[0],t[1],t[2],n),o=n<255;return{name:h.A.COLOR,semantic:h.A.COLOR,setIndex:0,constantColor:i,componentDatatype:s.A.FLOAT,type:u.A.VEC4,isQuantized:!1,isTranslucent:o}}}(v);S.colors=e,S.hasColors=S.hasColors||(0,A.A)(e),S.hasConstantColor=(0,A.A)(S.constantColor),S.isTranslucent=(0,A.A)(e)&&e.isTranslucent}if(!S.hasBatchIds){const e=function(e){const t=e.json;if((0,A.A)(t.BATCH_ID)){const t=e.getPropertyArray("BATCH_ID",s.A.UNSIGNED_SHORT,1);return{name:h.A.FEATURE_ID,semantic:h.A.FEATURE_ID,setIndex:0,typedArray:t,componentDatatype:s.A.fromTypedArray(t),type:u.A.SCALAR}}}(v);S.batchIds=e,S.hasBatchIds=S.hasBatchIds||(0,A.A)(e)}if(S.hasBatchIds){const e=v.getGlobalProperty("BATCH_LENGTH");if(!(0,A.A)(e))throw new l.A("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");S.batchLength=e}return((0,A.A)(b)||(0,A.A)(B))&&(S.batchTableJson=b,S.batchTableBinary=B),S};const p=g},259069:(e,t,n)=>{"use strict";n.d(t,{A:()=>oe});var i=n(660662),o=n(267980),r=n(626809),a=n(369031),s=n(376758),A=n(41476),c=n(430346),l=n(571804),u=n(491446),d=n(677354),h=n(367817),g=n(584164),f=n(983884),p=n(811203),m=n(402330),_=n(123245),I=n(543622),E=n(641613),y=n(442790),C=n(377496),b=n(760866),B=n(40118),v=n(302836),w=n(508380),T=n(393682),S=n(200646),x=n(184483),D=n(445848),Q=n(245329),N=n(796170),R=n(679854),M=n(62467),L=n(988609),P=n(913419),O=n(992881),F=n(938987);function U(e){a.A.typeOf.object("options",e),a.A.typeOf.object("options.arrayBuffer",e.arrayBuffer),this._parsedContent=void 0,this._drawCommand=void 0,this._isTranslucent=!1,this._styleTranslucent=!1,this._constantColor=A.A.clone(A.A.DARKGRAY),this._highlightColor=A.A.clone(A.A.WHITE),this._pointSize=1,this._rtcCenter=void 0,this._quantizedVolumeScale=void 0,this._quantizedVolumeOffset=void 0,this._styleableShaderAttributes=void 0,this._isQuantized=!1,this._isOctEncoded16P=!1,this._isRGB565=!1,this._hasColors=!1,this._hasNormals=!1,this._hasBatchIds=!1,this._decodingState=2,this._dequantizeInShader=!0,this._isQuantizedDraco=!1,this._isOctEncodedDraco=!1,this._quantizedRange=0,this._octEncodedRange=0,this.backFaceCulling=!1,this._backFaceCulling=!1,this.normalShading=!0,this._normalShading=!0,this._opaqueRenderState=void 0,this._translucentRenderState=void 0,this._mode=void 0,this._ready=!1,this._pointsLength=0,this._geometryByteLength=0,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._batchTableLoaded=e.batchTableLoaded,this._pickIdLoaded=e.pickIdLoaded,this._opaquePass=e.opaquePass??b.A.OPAQUE,this._cull=e.cull??!0,this.style=void 0,this._style=void 0,this.styleDirty=!1,this.modelMatrix=g.A.clone(g.A.IDENTITY),this._modelMatrix=g.A.clone(g.A.IDENTITY),this.time=0,this.shadows=L.A.ENABLED,this._boundingSphere=void 0,this.clippingPlanes=void 0,this.isClipped=!1,this.clippingPlanesDirty=!1,this.clippingPlanesOriginMatrix=void 0,this.attenuation=!1,this._attenuation=!1,this.geometricError=0,this.geometricErrorScale=1,this.maximumAttenuation=this._pointSize,this.splitDirection=e.splitDirection??P.A.NONE,this._splittingEnabled=!1,this._error=void 0,function(e,t){const n=R.A.parse(t.arrayBuffer,t.byteOffset);if(e._parsedContent=n,e._rtcCenter=n.rtcCenter,e._hasNormals=n.hasNormals,e._hasColors=n.hasColors,e._hasBatchIds=n.hasBatchIds,e._isTranslucent=n.isTranslucent,!n.hasBatchIds&&(0,u.A)(n.batchTableBinary)&&(n.styleableProperties=x.A.getBinaryProperties(n.pointsLength,n.batchTableJson,n.batchTableBinary)),(0,u.A)(n.draco)){const t=n.draco;e._decodingState=0,t.dequantizeInShader=e._dequantizeInShader}const i=n.positions;(0,u.A)(i)&&(e._isQuantized=i.isQuantized,e._quantizedVolumeScale=i.quantizedVolumeScale,e._quantizedVolumeOffset=i.quantizedVolumeOffset,e._quantizedRange=i.quantizedRange);const o=n.normals;(0,u.A)(o)&&(e._isOctEncoded16P=o.octEncoded);const r=n.colors;(0,u.A)(r)&&((0,u.A)(r.constantColor)&&(e._constantColor=A.A.clone(r.constantColor,e._constantColor),e._hasColors=!1),e._isRGB565=r.isRGB565);const a=n.batchIds;(0,u.A)(n.batchIds)&&(a.name="BATCH_ID",a.semantic="BATCH_ID",a.setIndex=void 0),n.hasBatchIds&&e._batchTableLoaded(n.batchLength,n.batchTableJson,n.batchTableBinary),e._pointsLength=n.pointsLength}(this,e)}Object.defineProperties(U.prototype,{pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}},color:{get:function(){return A.A.clone(this._highlightColor)},set:function(e){this._highlightColor=A.A.clone(e,this._highlightColor)}},boundingSphere:{get:function(){if((0,u.A)(this._drawCommand))return this._drawCommand.boundingVolume},set:function(e){this._boundingSphere=i.A.clone(e,this._boundingSphere)}}});const k=new o.A,G=new o.A,H=new o.A;let V,z;function j(e){if(!(0,u.A)(z)){V=new T(0),z=new Array(e);for(let t=0;t<e;++t)z[t]=V.random()}return z}function Y(e,t){const n=l.A.fromTypedArray(e);return n===l.A.INT||n===l.A.UNSIGNED_INT||n===l.A.DOUBLE?((0,f.A)("Cast pnts property to floats",`Point cloud property "${t}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),new Float32Array(e)):e}const q=new r.A,W=new r.A,J=new A.A,K=new g.A,X=new g.A;function Z(e,t){const n=/czm_3dtiles_property_(\d+)/g;let i=n.exec(e);for(;null!==i;){const o=parseInt(i[1]);-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function $(e,t){e=e.slice(e.indexOf("\n"));const n=/czm_3dtiles_builtin_property_(\w+)/g;let i=n.exec(e);for(;null!==i;){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function ee(e,t){const n=e.numberOfAttributes;for(let i=0;i<n;++i){const n=e.getAttribute(i);if(n.index===t)return n}}const te={POSITION:"czm_3dtiles_builtin_property_POSITION",POSITION_ABSOLUTE:"czm_3dtiles_builtin_property_POSITION_ABSOLUTE",COLOR:"czm_3dtiles_builtin_property_COLOR",NORMAL:"czm_3dtiles_builtin_property_NORMAL"};const ne=new r.A,ie=new o.A;U.prototype.update=function(e){const t=e.context;if((0,u.A)(this._error)){const e=this._error;throw this._error=void 0,e}const n=function(e,t){if(2===e._decodingState)return!1;if(0===e._decodingState){const n=e._parsedContent,i=n.draco,r=D.A.decodePointCloud(i,t);(0,u.A)(r)&&(e._decodingState=1,r.then(function(t){e._decodingState=2;const r=(0,u.A)(t.POSITION)?t.POSITION.array:void 0,a=(0,u.A)(t.RGB)?t.RGB.array:void 0,s=(0,u.A)(t.RGBA)?t.RGBA.array:void 0,A=(0,u.A)(t.NORMAL)?t.NORMAL.array:void 0,c=(0,u.A)(t.BATCH_ID)?t.BATCH_ID.array:void 0,l=(0,u.A)(r)&&(0,u.A)(t.POSITION.data.quantization),d=(0,u.A)(A)&&(0,u.A)(t.NORMAL.data.quantization);if(l){const n=t.POSITION.data.quantization,i=n.range;e._quantizedVolumeScale=o.A.fromElements(i,i,i),e._quantizedVolumeOffset=o.A.unpack(n.minValues),e._quantizedRange=(1<<n.quantizationBits)-1,e._isQuantizedDraco=!0}d&&(e._octEncodedRange=(1<<t.NORMAL.data.quantization.quantizationBits)-1,e._isOctEncodedDraco=!0);let h=n.styleableProperties;const g=i.batchTableProperties;for(const e in g)if(g.hasOwnProperty(e)){const n=t[e];(0,u.A)(h)||(h={}),h[e]={typedArray:n.array,componentCount:n.data.componentsPerAttribute}}(0,u.A)(r)&&(n.positions={typedArray:r});const f=s??a;(0,u.A)(f)&&(n.colors={typedArray:f}),(0,u.A)(A)&&(n.normals={typedArray:A}),(0,u.A)(c)&&(n.batchIds={typedArray:c}),n.styleableProperties=h}).catch(function(t){e._decodingState=3,e._error=t}))}return!0}(this,t);if(n)return;let a=!1,d=!g.A.equals(this._modelMatrix,this.modelMatrix);if(this._mode!==e.mode&&(this._mode=e.mode,d=!0),(0,u.A)(this._drawCommand)||(function(e,t){const n=t.context,r=e._parsedContent,a=e._pointsLength,s=r.positions,A=r.colors,c=r.normals,d=r.batchIds,f=r.styleableProperties,p=(0,u.A)(f),_=e._isQuantized,I=e._isQuantizedDraco,v=e._isOctEncoded16P,T=e._isOctEncodedDraco,x=e._quantizedRange,D=e._octEncodedRange,Q=e._isRGB565,N=e._isTranslucent,R=e._hasColors,M=e._hasNormals,L=e._hasBatchIds;let P,O;const U=[],V={};if(e._styleableShaderAttributes=V,p){let t=4;for(const i in f)if(f.hasOwnProperty(i)){const o=f[i],r=Y(o.typedArray,i);P=o.componentCount,O=l.A.fromTypedArray(r);const a=E.A.createVertexBuffer({context:n,typedArray:r,usage:y.A.STATIC_DRAW});e._geometryByteLength+=a.sizeInBytes;const s={index:t,vertexBuffer:a,componentsPerAttribute:P,componentDatatype:O,normalize:!1,offsetInBytes:0,strideInBytes:0};U.push(s),V[i]={location:t,componentCount:P},++t}}const z=E.A.createVertexBuffer({context:n,typedArray:s.typedArray,usage:y.A.STATIC_DRAW});let q,W,J;e._geometryByteLength+=z.sizeInBytes,R&&(q=E.A.createVertexBuffer({context:n,typedArray:A.typedArray,usage:y.A.STATIC_DRAW}),e._geometryByteLength+=q.sizeInBytes),M&&(W=E.A.createVertexBuffer({context:n,typedArray:c.typedArray,usage:y.A.STATIC_DRAW}),e._geometryByteLength+=W.sizeInBytes),L&&(d.typedArray=Y(d.typedArray,"batchIds"),J=E.A.createVertexBuffer({context:n,typedArray:d.typedArray,usage:y.A.STATIC_DRAW}),e._geometryByteLength+=J.sizeInBytes);let K=[];if(O=_?l.A.UNSIGNED_SHORT:I?x<=255?l.A.UNSIGNED_BYTE:l.A.UNSIGNED_SHORT:l.A.FLOAT,K.push({index:0,vertexBuffer:z,componentsPerAttribute:3,componentDatatype:O,normalize:!1,offsetInBytes:0,strideInBytes:0}),e._cull&&(e._boundingSphere=_||I?i.A.fromCornerPoints(o.A.ZERO,e._quantizedVolumeScale):function(e){const t=e.length/3,n=Math.min(t,20),r=j(20),a=Number.MAX_VALUE,s=-Number.MAX_VALUE,A=o.A.fromElements(a,a,a,k),c=o.A.fromElements(s,s,s,G);for(let i=0;i<n;++i){const n=Math.floor(r[i]*t),a=o.A.unpack(e,3*n,H);o.A.minimumByComponent(A,a,A),o.A.maximumByComponent(c,a,c)}const l=i.A.fromCornerPoints(A,c);return l.radius+=h.A.EPSILON2,l}(s.typedArray)),R)if(Q)K.push({index:1,vertexBuffer:q,componentsPerAttribute:1,componentDatatype:l.A.UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0});else{const e=N?4:3;K.push({index:1,vertexBuffer:q,componentsPerAttribute:e,componentDatatype:l.A.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0})}M&&(v?(P=2,O=l.A.UNSIGNED_BYTE):T?(P=2,O=D<=255?l.A.UNSIGNED_BYTE:l.A.UNSIGNED_SHORT):(P=3,O=l.A.FLOAT),K.push({index:2,vertexBuffer:W,componentsPerAttribute:P,componentDatatype:O,normalize:!1,offsetInBytes:0,strideInBytes:0})),L&&K.push({index:3,vertexBuffer:J,componentsPerAttribute:1,componentDatatype:l.A.fromTypedArray(d.typedArray),normalize:!1,offsetInBytes:0,strideInBytes:0}),p&&(K=K.concat(U));const X=new w.A({context:n,attributes:K}),Z={depthTest:{enabled:!0}},$={depthTest:{enabled:!0},depthMask:!1,blending:S.A.ALPHA_BLEND};e._opaquePass===b.A.CESIUM_3D_TILE&&(Z.stencilTest=F.A.setCesium3DTileBit(),Z.stencilMask=F.A.CESIUM_3D_TILE_MASK,$.stencilTest=F.A.setCesium3DTileBit(),$.stencilMask=F.A.CESIUM_3D_TILE_MASK),e._opaqueRenderState=B.A.fromCache(Z),e._translucentRenderState=B.A.fromCache($),e._drawCommand=new C.A({boundingVolume:new i.A,cull:e._cull,modelMatrix:new g.A,primitiveType:m.A.POINTS,vertexArray:X,count:a,shaderProgram:void 0,uniformMap:void 0,renderState:N?e._translucentRenderState:e._opaqueRenderState,pass:N?b.A.TRANSLUCENT:e._opaquePass,owner:e,castShadows:!1,receiveShadows:!1,pickId:e._pickIdLoaded()})}(this,e),d=!0,a=!0,this._ready=!0,this._parsedContent=void 0),d){g.A.clone(this.modelMatrix,this._modelMatrix);const t=this._drawCommand.modelMatrix;if(g.A.clone(this._modelMatrix,t),(0,u.A)(this._rtcCenter)&&g.A.multiplyByTranslation(t,this._rtcCenter,t),(0,u.A)(this._quantizedVolumeOffset)&&g.A.multiplyByTranslation(t,this._quantizedVolumeOffset,t),e.mode!==M.A.SCENE3D){const n=e.mapProjection,i=g.A.getColumn(t,3,ne);r.A.equals(i,r.A.UNIT_W)||I.A.basisTo2D(n,t,t)}const n=this._drawCommand.boundingVolume;if(i.A.clone(this._boundingSphere,n),this._cull){const e=n.center;g.A.multiplyByPoint(t,e,e);const i=g.A.getScale(t,ie);n.radius*=o.A.maximumComponent(i)}}this.clippingPlanesDirty&&(this.clippingPlanesDirty=!1,a=!0),this._attenuation!==this.attenuation&&(this._attenuation=this.attenuation,a=!0),this.backFaceCulling!==this._backFaceCulling&&(this._backFaceCulling=this.backFaceCulling,a=!0),this.normalShading!==this._normalShading&&(this._normalShading=this.normalShading,a=!0),(this._style!==this.style||this.styleDirty)&&(this._style=this.style,this.styleDirty=!1,a=!0);const f=this.splitDirection!==P.A.NONE;this._splittingEnabled!==f&&(this._splittingEnabled=f,a=!0),a&&function(e,t,n){let i,r,a;const l=t.context,d=(0,u.A)(n),h=e._isQuantized,f=e._isQuantizedDraco,m=e._isOctEncoded16P,I=e._isOctEncodedDraco,E=e._isRGB565,y=e._isTranslucent,C=e._hasColors,b=e._hasNormals,B=e._hasBatchIds,w=e._backFaceCulling,T=e._normalShading,S=e._drawCommand.vertexArray,x=e.clippingPlanes,D=e._attenuation;let R,L,F,U=y;const k=(0,s.A)(te),G={},H=e._styleableShaderAttributes;for(r in H)H.hasOwnProperty(r)&&(a=H[r],k[r]=`czm_3dtiles_property_${a.location}`,G[a.location]=a);if(d){const e={translucent:!1},t="(vec3 czm_3dtiles_builtin_property_POSITION, vec3 czm_3dtiles_builtin_property_POSITION_ABSOLUTE, vec4 czm_3dtiles_builtin_property_COLOR, vec3 czm_3dtiles_builtin_property_NORMAL)";R=n.getColorShaderFunction(`getColorFromStyle${t}`,k,e),L=n.getShowShaderFunction(`getShowFromStyle${t}`,k,e),F=n.getPointSizeShaderFunction(`getPointSizeFromStyle${t}`,k,e),(0,u.A)(R)&&e.translucent&&(U=!0)}e._styleTranslucent=U;const V=(0,u.A)(R),z=(0,u.A)(L),j=(0,u.A)(F),Y=e.isClipped,ne=[],ie=[];V&&(Z(R,ne),$(R,ie)),z&&(Z(L,ne),$(L,ie)),j&&(Z(F,ne),$(F,ie));const oe=ie.indexOf("COLOR")>=0,re=ie.indexOf("NORMAL")>=0;if(re&&!b)throw new _.A("Style references the NORMAL semantic but the point cloud does not have normals");for(r in H)if(H.hasOwnProperty(r)){a=H[r];const e=ne.indexOf(a.location)>=0;ee(S,a.location).enabled=e}const ae=C&&(!V||oe);C&&(ee(S,1).enabled=ae);const se=b&&(T||w||re);b&&(ee(S,2).enabled=se);const Ae={a_position:0};ae&&(Ae.a_color=1),se&&(Ae.a_normal=2),B&&(Ae.a_batchId=3);let ce="";const le=ne.length;for(i=0;i<le;++i){const e=ne[i];a=G[e];const t=a.componentCount,n=`czm_3dtiles_property_${e}`;let o;o=1===t?"float":`vec${t}`,ce+=`in ${o} ${n}; \n`,Ae[n]=a.location}!function(e,t){const n=t.context,i=e._isQuantized,r=e._isQuantizedDraco,a=e._isOctEncodedDraco;let s={u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier:function(){const i=q;if(i.x=e._attenuation?e.maximumAttenuation:e._pointSize,i.x*=t.pixelRatio,i.y=e.time,e._attenuation){const o=t.camera.frustum;let r;r=t.mode===M.A.SCENE2D||o instanceof p.A?Number.POSITIVE_INFINITY:n.drawingBufferHeight/t.camera.frustum.sseDenominator,i.z=e.geometricError*e.geometricErrorScale,i.w=r}return i},u_highlightColor:function(){return e._highlightColor},u_constantColor:function(){return e._constantColor},u_clippingPlanes:function(){const t=e.clippingPlanes;return e.isClipped?t.texture:n.defaultTexture},u_clippingPlanesEdgeStyle:function(){const t=e.clippingPlanes;if(!(0,u.A)(t))return A.A.TRANSPARENT;const n=A.A.clone(t.edgeColor,J);return n.alpha=t.edgeWidth,n},u_clippingPlanesMatrix:function(){const t=e.clippingPlanes;if(!(0,u.A)(t))return g.A.IDENTITY;const i=e.clippingPlanesOriginMatrix??e._modelMatrix;g.A.multiply(n.uniformState.view3D,i,K);const o=g.A.multiply(K,t.modelMatrix,K);return g.A.inverseTranspose(o,X)}};O.A.addUniforms(e,s),(i||r||a)&&(s=(0,c.A)(s,{u_quantizedVolumeScaleAndOctEncodedRange:function(){const t=W;if((0,u.A)(e._quantizedVolumeScale)){const n=o.A.clone(e._quantizedVolumeScale,t);o.A.divideByScalar(n,e._quantizedRange,t)}return t.w=e._octEncodedRange,t}})),(0,u.A)(e._uniformMapLoaded)&&(s=e._uniformMapLoaded(s)),e._drawCommand.uniformMap=s}(e,t);let ue="in vec3 a_position; \nout vec4 v_color; \nuniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \nuniform vec4 u_constantColor; \nuniform vec4 u_highlightColor; \n";ue+="float u_pointSize; \nfloat tiles3d_tileset_time; \n",D&&(ue+="float u_geometricError; \nfloat u_depthMultiplier; \n"),ue+=ce,ae&&(ue+=y?"in vec4 a_color; \n":E?"in float a_color; \nconst float SHIFT_RIGHT_11 = 1.0 / 2048.0; \nconst float SHIFT_RIGHT_5 = 1.0 / 32.0; \nconst float SHIFT_LEFT_11 = 2048.0; \nconst float SHIFT_LEFT_5 = 32.0; \nconst float NORMALIZE_6 = 1.0 / 64.0; \nconst float NORMALIZE_5 = 1.0 / 32.0; \n":"in vec3 a_color; \n"),se&&(ue+=m||I?"in vec2 a_normal; \n":"in vec3 a_normal; \n"),B&&(ue+="in float a_batchId; \n"),(h||f||I)&&(ue+="uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \n"),V&&(ue+=R),z&&(ue+=L),j&&(ue+=F),ue+="void main() \n{ \n    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \n    tiles3d_tileset_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \n",D&&(ue+="    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \n    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \n"),ue+=ae?y?"    vec4 color = a_color; \n":E?"    float compressed = a_color; \n    float r = floor(compressed * SHIFT_RIGHT_11); \n    compressed -= r * SHIFT_LEFT_11; \n    float g = floor(compressed * SHIFT_RIGHT_5); \n    compressed -= g * SHIFT_LEFT_5; \n    float b = compressed; \n    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \n    vec4 color = vec4(rgb, 1.0); \n":"    vec4 color = vec4(a_color, 1.0); \n":"    vec4 color = u_constantColor; \n",ue+=h||f?"    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \n":"    vec3 position = a_position; \n",ue+="    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \n",se?(ue+=m?"    vec3 normal = czm_octDecode(a_normal); \n":I?"    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \n":"    vec3 normal = a_normal; \n",ue+="    vec3 normalEC = czm_normal * normal; \n"):ue+="    vec3 normal = vec3(1.0); \n",V&&(ue+="    color = getColorFromStyle(position, position_absolute, color, normal); \n"),z&&(ue+="    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \n"),ue+=j?"    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \n":D?"    vec4 positionEC = czm_modelView * vec4(position, 1.0); \n    float depth = -positionEC.z; \n    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \n":"    gl_PointSize = u_pointSize; \n",ue+="    color = color * u_highlightColor; \n",se&&T&&(ue+="    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \n    diffuseStrength = max(diffuseStrength, 0.4); \n    color.xyz *= diffuseStrength * czm_lightColor; \n"),ue+="    v_color = color; \n    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \n",se&&w&&(ue+="    float visible = step(-normalEC.z, 0.0); \n    gl_Position *= visible; \n    gl_PointSize *= visible; \n"),z&&(ue+="    gl_Position.w *= float(show); \n    gl_PointSize *= float(show); \n"),ue+="} \n";let de="in vec4 v_color; \n";Y&&(de+="uniform highp sampler2D u_clippingPlanes; \nuniform mat4 u_clippingPlanesMatrix; \nuniform vec4 u_clippingPlanesEdgeStyle; \n",de+="\n",de+=(0,N.A)(x,l),de+="\n"),de+="void main() \n{ \n    out_FragColor = czm_gammaCorrect(v_color); \n",Y&&(de+=(0,Q.A)("u_clippingPlanes","u_clippingPlanesMatrix","u_clippingPlanesEdgeStyle")),de+="} \n",e.splitDirection!==P.A.NONE&&(de=O.A.modifyFragmentShader(de)),(0,u.A)(e._vertexShaderLoaded)&&(ue=e._vertexShaderLoaded(ue)),(0,u.A)(e._fragmentShaderLoaded)&&(de=e._fragmentShaderLoaded(de));const he=e._drawCommand;(0,u.A)(he.shaderProgram)&&he.shaderProgram.destroy(),he.shaderProgram=v.A.fromCache({context:l,vertexShaderSource:ue,fragmentShaderSource:de,attributeLocations:Ae});try{he.shaderProgram._bind()}catch(e){throw new _.A("Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error.")}}(this,e,this._style),this._drawCommand.castShadows=L.A.castShadows(this.shadows),this._drawCommand.receiveShadows=L.A.receiveShadows(this.shadows);const T=this._highlightColor.alpha<1||this._constantColor.alpha<1||this._styleTranslucent;this._drawCommand.renderState=T?this._translucentRenderState:this._opaqueRenderState,this._drawCommand.pass=T?b.A.TRANSLUCENT:this._opaquePass;const x=e.commandList,R=e.passes;(R.render||R.pick)&&x.push(this._drawCommand)},U.prototype.isDestroyed=function(){return!1},U.prototype.destroy=function(){const e=this._drawCommand;return(0,u.A)(e)&&(e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),(0,d.A)(this)};const oe=U},534135:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(434067),o=n(41476),r=n(491446),a=n(677354),s=n(402330),A=n(769493),c=n(377496),l=n(804701),u=n(760866),d=n(40118),h=n(342875),g=n(200646),f=n(938987),p=n(812178);function m(){this._framebuffer=new l.A({colorAttachmentsLength:2,depth:!0,supportsDepthTexture:!0}),this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}Object.defineProperties(m.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}},colorGBuffer:{get:function(){return this._framebuffer.getColorTexture(0)}},depthGBuffer:{get:function(){return this._framebuffer.getColorTexture(1)}}});const _=new i.A;function I(e){return e.drawBuffers&&e.fragmentDepth}function E(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"EC");if(!(0,r.A)(n)){const i=t._attributeLocations,o=t.fragmentShaderSource.clone();o.sources.splice(0,0,"layout (location = 0) out vec4 out_FragData_0;\nlayout (location = 1) out vec4 out_FragData_1;"),o.sources=o.sources.map(function(e){return(e=h.A.replaceMain(e,"czm_point_cloud_post_process_main")).replaceAll(/out_FragColor/g,"out_FragData_0")}),o.sources.push("void main() \n{ \n    czm_point_cloud_post_process_main(); \n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n    out_FragData_1 = czm_packDepth(gl_FragDepth); \n#else\n    out_FragData_1 = czm_packDepth(gl_FragCoord.z);\n#endif\n}"),n=e.shaderCache.createDerivedShaderProgram(t,"EC",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}m.isSupported=I,m.prototype.update=function(e,t,n,i){if(!I(e.context))return;let a;this._strength=n.eyeDomeLightingStrength,this._radius=n.eyeDomeLightingRadius*e.pixelRatio,function(e,t){const n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i),function(e,t){const n=new h.A({defines:["LOG_DEPTH_WRITE"],sources:[p.A]}),i={u_pointCloud_colorGBuffer:function(){return e.colorGBuffer},u_pointCloud_depthGBuffer:function(){return e.depthGBuffer},u_distanceAndEdlStrength:function(){return _.x=e._radius,_.y=e._strength,_}},r=d.A.fromCache({blending:g.A.ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:f.A.setCesium3DTileBit(),stencilMask:f.A.CESIUM_3D_TILE_MASK});e._drawCommand=t.createViewportQuadCommand(n,{uniformMap:i,renderState:r,pass:u.A.CESIUM_3D_TILE,owner:e}),e._clearCommand=new A.A({framebuffer:e.framebuffer,color:new o.A(0,0,0,0),depth:1,renderState:d.A.fromCache(),pass:u.A.CESIUM_3D_TILE,owner:e})}(e,t)}(this,e.context);const l=e.commandList,m=l.length;for(a=t;a<m;++a){const t=l[a];if(t.primitiveType!==s.A.POINTS||t.pass===u.A.TRANSLUCENT)continue;let n,i,o=t.derivedCommands.pointCloudProcessor;(0,r.A)(o)&&(n=o.command,i=o.originalShaderProgram),(0,r.A)(n)&&!t.dirty&&i===t.shaderProgram&&n.framebuffer===this.framebuffer||(n=c.A.shallowClone(t,n),n.framebuffer=this.framebuffer,n.shaderProgram=E(e.context,t.shaderProgram),n.castShadows=!1,n.receiveShadows=!1,(0,r.A)(o)||(o={command:n,originalShaderProgram:t.shaderProgram},t.derivedCommands.pointCloudProcessor=o),o.originalShaderProgram=t.shaderProgram),l[a]=n}const y=this._clearCommand,C=this._drawCommand;C.boundingVolume=i,l.push(C),l.push(y)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._drawCommand=void 0,e._clearCommand=void 0,(0,a.A)(this)};const y=m},929771:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(534135);function o(e){const t=e??{};this.attenuation=t.attenuation??!1,this.geometricErrorScale=t.geometricErrorScale??1,this.maximumAttenuation=t.maximumAttenuation,this.baseResolution=t.baseResolution,this.eyeDomeLighting=t.eyeDomeLighting??!0,this.eyeDomeLightingStrength=t.eyeDomeLightingStrength??1,this.eyeDomeLightingRadius=t.eyeDomeLightingRadius??1,this.backFaceCulling=t.backFaceCulling??!1,this.normalShading=t.normalShading??!0}o.isSupported=function(e){return i.A.isSupported(e.context)};const r=o},154622:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(263604),o=n(660662),r=n(267980),a=n(41476),s=n(915325),A=n(491446),c=n(605971),l=n(853331),u=n(584164),d=n(870349),h=n(608191);function g(e,t){e=e??s.A.EMPTY_OBJECT,this._show=e.show??!0,this._width=e.width??1,this._loop=e.loop??!1,this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,(0,A.A)(this._material)||(this._material=h.A.fromType(h.A.ColorType,{color:new a.A(1,1,1,1)}));let n,c=e.positions;(0,A.A)(c)||(c=[]),this._positions=c,this._actualPositions=(0,i.A)(c,r.A.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=c.slice()),this._actualPositions.push(r.A.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id,(0,A.A)(t)&&(n=u.A.clone(t.modelMatrix)),this._modelMatrix=n,this._segments=d.A.wrapLongitude(this._actualPositions,n),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(y),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=o.A.fromPoints(this._actualPositions),this._boundingVolumeWC=o.A.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new o.A}const f=g.POSITION_INDEX=0,p=g.SHOW_INDEX=1,m=g.WIDTH_INDEX=2,_=g.MATERIAL_INDEX=3,I=g.POSITION_SIZE_INDEX=4,E=g.DISTANCE_DISPLAY_CONDITION=5,y=g.NUMBER_OF_PROPERTIES=6;function C(e,t){++e._propertiesChanged[t];const n=e._polylineCollection;(0,A.A)(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(g.prototype,{show:{get:function(){return this._show},set:function(e){if(!(0,A.A)(e))throw new c.A("value is required.");e!==this._show&&(this._show=e,C(this,p))}},positions:{get:function(){return this._positions},set:function(e){if(!(0,A.A)(e))throw new c.A("value is required.");let t=(0,i.A)(e,r.A.equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(r.A.clone(t[0]))),this._actualPositions.length===t.length&&this._actualPositions.length===this._length||C(this,I),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=o.A.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=o.A.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),C(this,f),this.update()}},material:{get:function(){return this._material},set:function(e){if(!(0,A.A)(e))throw new c.A("material is required.");this._material!==e&&(this._material=e,C(this,_))}},width:{get:function(){return this._width},set:function(e){if(!(0,A.A)(e))throw new c.A("value is required.");e!==this._width&&(this._width=e,C(this,m))}},loop:{get:function(){return this._loop},set:function(e){if(!(0,A.A)(e))throw new c.A("value is required.");if(e!==this._loop){let t=this._actualPositions;e?t.length>2&&!r.A.equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(r.A.clone(t[0]))):t.length>2&&r.A.equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,C(this,I)}}},id:{get:function(){return this._id},set:function(e){this._id=e,(0,A.A)(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!(0,A.A)(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,A.A)(e)&&e.far<=e.near)throw new c.A("far distance must be greater than near distance.");l.A.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=l.A.clone(e,this._distanceDisplayCondition),C(this,E))}}}),g.prototype.update=function(){let e=u.A.IDENTITY;(0,A.A)(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);const t=this._segments.positions.length,n=this._segments.lengths,i=this._propertiesChanged[f]>0||this._propertiesChanged[I]>0;if(u.A.equals(e,this._modelMatrix)&&!i||(this._segments=d.A.wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=o.A.transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=u.A.clone(e,this._modelMatrix),this._segments.positions.length!==t)C(this,I);else{const e=n.length;for(let t=0;t<e;++t)if(n[t]!==this._segments.lengths[t]){C(this,I);break}}},g.prototype.getPickId=function(e){return(0,A.A)(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},g.prototype._clean=function(){this._dirty=!1;const e=this._propertiesChanged;for(let t=0;t<y-1;++t)e[t]=0},g.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0};const b=g},891674:(e,t,n)=>{"use strict";n.d(t,{A:()=>xe});var i=n(660662),o=n(434067),r=n(267980),a=n(626809),s=n(336946),A=n(41476),c=n(430346),l=n(571804),u=n(915325),d=n(491446),h=n(677354),g=n(605971),f=n(816422),p=n(520098),m=n(874915),_=n(647326),I=n(367817),E=n(584164),y=n(257941),C=n(123245),b=n(641613),B=n(442790),v=n(430332),w=n(377496),T=n(760866),S=n(40118),x=n(302836),D=n(342875),Q=n(616e3),N=n(508380),R=n(78149),M=n(682091),L=n(57723),P=n(425438),O=n(200646),F=n(608191),U=n(154622),k=n(62467);const G=U.A.SHOW_INDEX,H=U.A.WIDTH_INDEX,V=U.A.POSITION_INDEX,z=U.A.MATERIAL_INDEX,j=U.A.POSITION_SIZE_INDEX,Y=U.A.DISTANCE_DISPLAY_CONDITION,q=U.A.NUMBER_OF_PROPERTIES,W={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function J(e){e=e??u.A.EMPTY_OBJECT,this.show=e.show??!0,this.modelMatrix=E.A.clone(e.modelMatrix??E.A.IDENTITY),this._modelMatrix=E.A.clone(E.A.IDENTITY),this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(q),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:B.A.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=A.A.clone(A.A.WHITE);const t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}Object.defineProperties(J.prototype,{length:{get:function(){return ae(this),this._polylines.length}}}),J.prototype.add=function(e){const t=new U.A(e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t},J.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,(0,d.A)(e._bucket)){const t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1},J.prototype.removeAll=function(){se(this),ce(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},J.prototype.contains=function(e){return(0,d.A)(e)&&e._polylineCollection===this},J.prototype.get=function(e){if(!(0,d.A)(e))throw new g.A("index is required.");return ae(this),this._polylines[e]};const K=new f.A,X=new a.A,Z=new o.A;J.prototype.update=function(e){if(ae(this),0===this._polylines.length||!this.show)return;!function(e,t){const n=t.mode;e._mode===n&&E.A.equals(e._modelMatrix,e.modelMatrix)||(e._mode=n,e._modelMatrix=E.A.clone(e.modelMatrix),e._createVertexArray=!0)}(this,e);const t=e.context,n=e.mapProjection;let r,s=this._propertiesChanged;if(this._createBatchTable){if(0===v.A.maximumVertexTextureImageUnits)throw new C.A("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");!function(e,t){(0,d.A)(e._batchTable)&&e._batchTable.destroy();const n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:l.A.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:l.A.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:l.A.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:l.A.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:l.A.FLOAT,componentsPerAttribute:2}];e._batchTable=new P.A(t,n,e._polylines.length)}(this,t),this._createBatchTable=!1}if(this._createVertexArray||function(e){let t=!1;const n=e._propertiesChanged,i=e._positionBufferUsage;return n[V]?i.bufferUsage!==B.A.STREAM_DRAW?(t=!0,i.bufferUsage=B.A.STREAM_DRAW,i.frameCount=100):i.frameCount=100:i.bufferUsage!==B.A.STATIC_DRAW&&(0===i.frameCount?(t=!0,i.bufferUsage=B.A.STATIC_DRAW):i.frameCount--),t}(this))ne(this,t,n);else if(this._polylinesUpdated){const i=this._polylinesToUpdate;if(this._mode!==k.A.SCENE3D){const e=i.length;for(let t=0;t<e;++t)r=i[t],r.update()}if(s[j]||s[z])ne(this,t,n);else{const t=i.length,A=this._polylineBuckets;for(let c=0;c<t;++c){r=i[c],s=r._propertiesChanged;const t=r._bucket;let l=0;for(const e in A)if(A.hasOwnProperty(e)){if(A[e]===t){s[V]&&t.writeUpdate(l,r,this._positionBuffer,n);break}l+=A[e].lengthOfPositions}if((s[G]||s[H])&&this._batchTable.setBatchedAttribute(r._index,0,new o.A(r._width,r._show)),this._batchTable.attributes.length>2){if(s[V]||s[j]){const t=e.mode===k.A.SCENE2D?r._boundingVolume2D:r._boundingVolumeWC,n=f.A.fromCartesian(t.center,K),i=a.A.fromElements(n.low.x,n.low.y,n.low.z,t.radius,X);this._batchTable.setBatchedAttribute(r._index,2,n.high),this._batchTable.setBatchedAttribute(r._index,3,i)}if(s[Y]){const e=Z;e.x=0,e.y=Number.MAX_VALUE;const t=r.distanceDisplayCondition;(0,d.A)(t)&&(e.x=t.near,e.y=t.far),this._batchTable.setBatchedAttribute(r._index,4,e)}}r._clean()}}i.length=0,this._polylinesUpdated=!1}s=this._propertiesChanged;for(let e=0;e<q;++e)s[e]=0;let A=E.A.IDENTITY;e.mode===k.A.SCENE3D&&(A=this.modelMatrix);const u=e.passes,h=0!==e.morphTime;(0,d.A)(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===h||(this._opaqueRS=S.A.fromCache({depthMask:h,depthTest:{enabled:h}})),(0,d.A)(this._translucentRS)&&this._translucentRS.depthTest.enabled===h||(this._translucentRS=S.A.fromCache({blending:O.A.ALPHA_BLEND,depthMask:!h,depthTest:{enabled:h}})),this._batchTable.update(e),(u.render||u.pick)&&function(e,t,n,o){const r=t.context,a=t.commandList,s=n.length;let A=0,l=!0;const u=e._vertexArrays,h=e.debugShowBoundingVolume,g=e._batchTable.getUniformMapCallback(),f=u.length;for(let p=0;p<f;++p){const f=u[p],m=f.buckets,_=m.length;for(let u=0;u<_;++u){const p=m[u];let _=p.offset;const I=p.bucket.shaderProgram,E=p.bucket.polylines,y=E.length;let C,b,B,v,S=0;for(let u=0;u<y;++u){const m=E[u],y=re(m._material);if(y!==C){if((0,d.A)(C)&&S>0){const t=b.isTranslucent();A>=s?(B=new w.A({owner:e}),n.push(B)):B=n[A],++A,v=(0,c.A)(g(b._uniforms),e._uniformMap),B.boundingVolume=i.A.clone($,B.boundingVolume),B.modelMatrix=o,B.shaderProgram=I,B.vertexArray=f.va,B.renderState=t?e._translucentRS:e._opaqueRS,B.pass=t?T.A.TRANSLUCENT:T.A.OPAQUE,B.debugShowBoundingVolume=h,B.pickId="v_pickColor",B.uniformMap=v,B.count=S,B.offset=_,_+=S,S=0,l=!0,a.push(B)}b=m._material,b.update(r),C=y}const x=m._locatorBuckets,D=x.length;for(let e=0;e<D;++e){const t=x[e];t.locator===p&&(S+=t.count)}let Q;t.mode===k.A.SCENE3D?Q=m._boundingVolumeWC:t.mode===k.A.COLUMBUS_VIEW?Q=m._boundingVolume2D:t.mode===k.A.SCENE2D?(0,d.A)(m._boundingVolume2D)&&(Q=i.A.clone(m._boundingVolume2D,ee),Q.center.x=0):(0,d.A)(m._boundingVolumeWC)&&(0,d.A)(m._boundingVolume2D)&&(Q=i.A.union(m._boundingVolumeWC,m._boundingVolume2D,ee)),l?(l=!1,i.A.clone(Q,$)):i.A.union(Q,$,$)}(0,d.A)(C)&&S>0&&(A>=s?(B=new w.A({owner:e}),n.push(B)):B=n[A],++A,v=(0,c.A)(g(b._uniforms),e._uniformMap),B.boundingVolume=i.A.clone($,B.boundingVolume),B.modelMatrix=o,B.shaderProgram=I,B.vertexArray=f.va,B.renderState=b.isTranslucent()?e._translucentRS:e._opaqueRS,B.pass=b.isTranslucent()?T.A.TRANSLUCENT:T.A.OPAQUE,B.debugShowBoundingVolume=h,B.pickId="v_pickColor",B.uniformMap=v,B.count=S,B.offset=_,l=!0,a.push(B)),C=void 0}}n.length=A}(this,e,this._colorCommands,A)};const $=new i.A,ee=new i.A;J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){return Ae(this),se(this),ce(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,h.A)(this)};const te=[0,0,0];function ne(e,t,n){e._createVertexArray=!1,se(e),Ae(e),function(e){const t=e._mode,n=e._modelMatrix,i=e._polylineBuckets={},o=e._polylines,r=o.length;for(let e=0;e<r;++e){const r=o[e];if(r._actualPositions.length>1){r.update();const e=r.material;let o=i[e.type];(0,d.A)(o)||(o=i[e.type]=new ue(e,t,n)),o.addPolyline(r)}}}(e);const i=[[]];let o=i[0];const r=e._batchTable,a=e._useHighlightColor,s=[0];let A=0;const c=[[]];let u=0;const h=e._polylineBuckets;let g,f;for(g in h)h.hasOwnProperty(g)&&(f=h[g],f.updateShader(t,r,a),u+=f.lengthOfPositions);if(u>0){const a=e._mode,p=new Float32Array(6*u*3),_=new Float32Array(4*u);let E,y=0,C=0,v=0;for(g in h)if(h.hasOwnProperty(g)){f=h[g],f.write(p,_,y,C,v,r,t,n),a===k.A.MORPHING&&((0,d.A)(E)||(E=new Float32Array(6*u*3)),f.writeForMorph(E,y));const e=f.lengthOfPositions;y+=6*e*3,C+=4*e,v+=4*e,A=f.updateIndices(i,s,c,A)}const w=e._positionBufferUsage.bufferUsage,T=B.A.STATIC_DRAW;let S;e._positionBuffer=b.A.createVertexBuffer({context:t,typedArray:p,usage:w}),(0,d.A)(E)&&(S=b.A.createVertexBuffer({context:t,typedArray:E,usage:w})),e._texCoordExpandAndBatchIndexBuffer=b.A.createVertexBuffer({context:t,typedArray:_,usage:T});const x=3*Float32Array.BYTES_PER_ELEMENT,D=4*Float32Array.BYTES_PER_ELEMENT;let Q=0;const R=i.length;for(let n=0;n<R;++n)if(o=i[n],o.length>0){const i=new Uint16Array(o),r=b.A.createIndexBuffer({context:t,typedArray:i,usage:B.A.STATIC_DRAW,indexDatatype:m.A.UNSIGNED_SHORT});Q+=s[n];const A=6*(n*(x*I.A.SIXTY_FOUR_KILOBYTES)-Q*x),u=x+A,d=x+u,h=x+d,g=x+h,f=x+g,p=n*(D*I.A.SIXTY_FOUR_KILOBYTES)-Q*D,_=[{index:W.position3DHigh,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:A,strideInBytes:6*x},{index:W.position3DLow,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:u,strideInBytes:6*x},{index:W.position2DHigh,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:A,strideInBytes:6*x},{index:W.position2DLow,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:u,strideInBytes:6*x},{index:W.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:d,strideInBytes:6*x},{index:W.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:h,strideInBytes:6*x},{index:W.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:d,strideInBytes:6*x},{index:W.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:h,strideInBytes:6*x},{index:W.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:g,strideInBytes:6*x},{index:W.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:f,strideInBytes:6*x},{index:W.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:g,strideInBytes:6*x},{index:W.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:l.A.FLOAT,offsetInBytes:f,strideInBytes:6*x},{index:W.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:l.A.FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:p}];let E,y,C,v;a===k.A.SCENE3D?(y=e._positionBuffer,E="vertexBuffer",C=te,v="value"):a===k.A.SCENE2D||a===k.A.COLUMBUS_VIEW?(y=te,E="value",C=e._positionBuffer,v="vertexBuffer"):(y=S,E="vertexBuffer",C=e._positionBuffer,v="vertexBuffer"),_[0][E]=y,_[1][E]=y,_[2][v]=C,_[3][v]=C,_[4][E]=y,_[5][E]=y,_[6][v]=C,_[7][v]=C,_[8][E]=y,_[9][E]=y,_[10][v]=C,_[11][v]=C;const w=new N.A({context:t,attributes:_,indexBuffer:r});e._vertexArrays.push({va:w,buckets:c[n]})}}}function ie(e,t){return t instanceof Q.A?t.id:t}const oe=[];function re(e){const t=F.A._uniformList[e.type],n=t.length;oe.length=2*n;let i=0;for(let o=0;o<n;++o){const n=t[o];oe[i]=n,oe[i+1]=e._uniforms[n](),i+=2}return`${e.type}:${JSON.stringify(oe,ie)}`}function ae(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;const t=[],n=[];let i,o=0;const r=e._polylines.length;for(let a=0;a<r;++a)i=e._polylines[a],i.isDestroyed||(i._index=o++,n.push(i),t.push(i));e._polylines=t,e._polylinesToUpdate=n}}function se(e){const t=e._polylines,n=t.length;for(let e=0;e<n;++e)if(!t[e].isDestroyed){const n=t[e]._bucket;(0,d.A)(n)&&(n.shaderProgram=n.shaderProgram&&n.shaderProgram.destroy())}}function Ae(e){const t=e._vertexArrays.length;for(let n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}function ce(e){const t=e._polylines,n=t.length;for(let e=0;e<n;++e)t[e].isDestroyed||t[e]._destroy()}function le(e,t,n){this.count=e,this.offset=t,this.bucket=n}function ue(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}function de(e){return r.A.dot(r.A.UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(y.A.ORIGIN_ZX_PLANE)===_.A.INTERSECTING}J.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]},ue.prototype.addPolyline=function(e){this.polylines.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this},ue.prototype.updateShader=function(e,t,n){if((0,d.A)(this.shaderProgram))return;const i=["DISTANCE_DISPLAY_CONDITION"];n&&i.push("VECTOR_TILE"),-1!==this.material.shaderSource.search(/in\s+float\s+v_polylineAngle;/g)&&i.push("POLYLINE_DASH"),p.A.isInternetExplorer()||i.push("CLIP_POLYLINE");const o=new D.A({defines:i,sources:["in vec4 v_pickColor;\n",this.material.shaderSource,M.A]}),r=t.getVertexShaderCallback()(L.A),a=new D.A({defines:i,sources:[R.A,r]});this.shaderProgram=x.A.fromCache({context:e,vertexShaderSource:a,fragmentShaderSource:o,attributeLocations:W})},ue.prototype.getPolylinePositionsLength=function(e){let t;if(this.mode===k.A.SCENE3D||!de(e))return t=e._actualPositions.length,4*t-4;let n=0;const i=e._segments.lengths;t=i.length;for(let e=0;e<t;++e)n+=4*i[e]-4;return n};const he=new r.A,ge=new r.A,fe=new r.A,pe=new r.A,me=new a.A,_e=new o.A;ue.prototype.write=function(e,t,n,i,o,s,c,l){const u=this.mode,h=l.ellipsoid.maximumRadius*I.A.PI,g=this.polylines,p=g.length;for(let i=0;i<p;++i){const p=g[i],m=p.width,_=p.show&&m>0,I=p._index,E=this.getSegments(p,l),y=E.positions,C=E.lengths,b=y.length,B=p.getPickId(c).color;let v,w=0,T=0;for(let i=0;i<b;++i){0===i?p._loop?v=y[b-2]:(v=pe,r.A.subtract(y[0],y[1],v),r.A.add(y[0],v,v)):v=y[i-1],r.A.clone(v,ge),r.A.clone(y[i],he),i===b-1?p._loop?v=y[1]:(v=pe,r.A.subtract(y[b-1],y[b-2],v),r.A.add(y[b-1],v,v)):v=y[i+1],r.A.clone(v,fe);const a=C[w];i===T+a&&(T+=a,++w);const s=i-T===0,A=i===T+C[w]-1;u===k.A.SCENE2D&&(ge.z=0,he.z=0,fe.z=0),u!==k.A.SCENE2D&&u!==k.A.MORPHING||(s||A)&&h-Math.abs(he.x)<1&&((he.x<0&&ge.x>0||he.x>0&&ge.x<0)&&r.A.clone(he,ge),(he.x<0&&fe.x>0||he.x>0&&fe.x<0)&&r.A.clone(he,fe));const c=A?2:4;for(let r=s?2:0;r<c;++r){f.A.writeElements(he,e,n),f.A.writeElements(ge,e,n+6),f.A.writeElements(fe,e,n+12);const a=r-2<0?-1:1;t[o]=i/(b-1),t[o+1]=r%2*2-1,t[o+2]=a,t[o+3]=I,n+=18,o+=4}}const S=me;S.x=A.A.floatToByte(B.red),S.y=A.A.floatToByte(B.green),S.z=A.A.floatToByte(B.blue),S.w=A.A.floatToByte(B.alpha);const x=_e;x.x=m,x.y=_?1:0;const D=u===k.A.SCENE2D?p._boundingVolume2D:p._boundingVolumeWC,Q=f.A.fromCartesian(D.center,K),N=Q.high,R=a.A.fromElements(Q.low.x,Q.low.y,Q.low.z,D.radius,X),M=Z;M.x=0,M.y=Number.MAX_VALUE;const L=p.distanceDisplayCondition;(0,d.A)(L)&&(M.x=L.near,M.y=L.far),s.setBatchedAttribute(I,0,x),s.setBatchedAttribute(I,1,S),s.attributes.length>2&&(s.setBatchedAttribute(I,2,N),s.setBatchedAttribute(I,3,R),s.setBatchedAttribute(I,4,M))}};const Ie=new r.A,Ee=new r.A,ye=new r.A,Ce=new r.A;ue.prototype.writeForMorph=function(e,t){const n=this.modelMatrix,i=this.polylines,o=i.length;for(let a=0;a<o;++a){const o=i[a],s=o._segments.positions,A=o._segments.lengths,c=s.length;let l=0,u=0;for(let i=0;i<c;++i){let a;0===i?o._loop?a=s[c-2]:(a=Ce,r.A.subtract(s[0],s[1],a),r.A.add(s[0],a,a)):a=s[i-1],a=E.A.multiplyByPoint(n,a,Ee);const d=E.A.multiplyByPoint(n,s[i],Ie);let h;i===c-1?o._loop?h=s[1]:(h=Ce,r.A.subtract(s[c-1],s[c-2],h),r.A.add(s[c-1],h,h)):h=s[i+1],h=E.A.multiplyByPoint(n,h,ye);const g=A[l];i===u+g&&(u+=g,++l);const p=i-u===0,m=i===u+A[l]-1?2:4;for(let n=p?2:0;n<m;++n)f.A.writeElements(d,e,t),f.A.writeElements(a,e,t+6),f.A.writeElements(h,e,t+12),t+=18}}};const be=new Array(1);ue.prototype.updateIndices=function(e,t,n,i){let o=n.length-1,r=new le(0,i,this);n[o].push(r);let a=0,s=e[e.length-1],A=0;s.length>0&&(A=s[s.length-1]+1);const c=this.polylines,l=c.length;for(let u=0;u<l;++u){const l=c[u];let d;if(l._locatorBuckets=[],this.mode===k.A.SCENE3D){d=be;const e=l._actualPositions.length;if(!(e>0))continue;d[0]=e}else d=l._segments.lengths;const h=d.length;if(h>0){let c=0;for(let u=0;u<h;++u){const h=d[u]-1;for(let u=0;u<h;++u)A+4>I.A.SIXTY_FOUR_KILOBYTES&&(l._locatorBuckets.push({locator:r,count:c}),c=0,t.push(4),s=[],e.push(s),A=0,r.count=a,a=0,i=0,r=new le(0,0,this),n[++o]=[r]),s.push(A,A+2,A+1),s.push(A+1,A+2,A+3),c+=6,a+=6,i+=6,A+=4}l._locatorBuckets.push({locator:r,count:c}),A+4>I.A.SIXTY_FOUR_KILOBYTES&&(t.push(0),s=[],e.push(s),A=0,r.count=a,i=0,a=0,r=new le(0,0,this),n[++o]=[r])}l._clean()}return r.count=a,i},ue.prototype.getPolylineStartIndex=function(e){const t=this.polylines;let n=0;const i=t.length;for(let o=0;o<i;++o){const i=t[o];if(i===e)break;n+=i._actualLength}return n};const Be={positions:void 0,lengths:void 0},ve=new Array(1),we=new r.A,Te=new s.A;let Se;ue.prototype.getSegments=function(e,t){let n=e._actualPositions;if(this.mode===k.A.SCENE3D)return ve[0]=n.length,Be.positions=n,Be.lengths=ve,Be;de(e)&&(n=e._segments.positions);const o=t.ellipsoid,a=[],s=this.modelMatrix,A=n.length;let c,l=we;for(let e=0;e<A;++e)c=n[e],l=E.A.multiplyByPoint(s,c,l),a.push(t.project(o.cartesianToCartographic(l,Te)));if(a.length>0){e._boundingVolume2D=i.A.fromPoints(a,e._boundingVolume2D);const t=e._boundingVolume2D.center;e._boundingVolume2D.center=new r.A(t.z,t.x,t.y)}return Be.positions=a,Be.lengths=e._segments.lengths,Be},ue.prototype.writeUpdate=function(e,t,n,i){const o=this.mode,a=i.ellipsoid.maximumRadius*I.A.PI;let s=t._actualLength;if(s){e+=this.getPolylineStartIndex(t);let A=Se;const c=6*s*3;!(0,d.A)(A)||A.length<c?A=Se=new Float32Array(c):A.length>c&&(A=new Float32Array(A.buffer,0,c));const l=this.getSegments(t,i),u=l.positions,h=l.lengths;let g,p=0,m=0,_=0;s=u.length;for(let e=0;e<s;++e){0===e?t._loop?g=u[s-2]:(g=pe,r.A.subtract(u[0],u[1],g),r.A.add(u[0],g,g)):g=u[e-1],r.A.clone(g,ge),r.A.clone(u[e],he),e===s-1?t._loop?g=u[1]:(g=pe,r.A.subtract(u[s-1],u[s-2],g),r.A.add(u[s-1],g,g)):g=u[e+1],r.A.clone(g,fe);const n=h[m];e===_+n&&(_+=n,++m);const i=e-_===0,c=e===_+h[m]-1;o===k.A.SCENE2D&&(ge.z=0,he.z=0,fe.z=0),o!==k.A.SCENE2D&&o!==k.A.MORPHING||(i||c)&&a-Math.abs(he.x)<1&&((he.x<0&&ge.x>0||he.x>0&&ge.x<0)&&r.A.clone(he,ge),(he.x<0&&fe.x>0||he.x>0&&fe.x<0)&&r.A.clone(he,fe));const l=c?2:4;for(let e=i?2:0;e<l;++e)f.A.writeElements(he,A,p),f.A.writeElements(ge,A,p+6),f.A.writeElements(fe,A,p+12),p+=18}n.copyFromArrayView(A,18*Float32Array.BYTES_PER_ELEMENT*e)}};const xe=J},421549:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(647934),o=n(369031),r=n(41476),a=n(430346),s=n(673874),A=n(915325),c=n(491446),l=n(677354),u=n(605971),d=n(276904),h=n(744603),g=n(326429),f=n(57775),p=n(40118),m=n(654799),_=n(342875),I=n(616e3),E=n(957233),y=n(78078),C=n(557448),b=n(339600);function B(e){e=e??A.A.EMPTY_OBJECT;const{name:t=(0,s.A)(),fragmentShader:n,uniforms:a,textureScale:l=1,forcePowerOfTwo:h=!1,sampleMode:p=b.A.NEAREST,pixelFormat:m=d.A.RGBA,pixelDatatype:_=f.A.UNSIGNED_BYTE,clearColor:I=r.A.BLACK,scissorRectangle:E}=e;if(o.A.typeOf.string("options.fragmentShader",n),o.A.typeOf.number.greaterThan("options.textureScale",l,0),o.A.typeOf.number.lessThanOrEquals("options.textureScale",l,1),!d.A.isColorFormat(m))throw new u.A("options.pixelFormat must be a color format.");this._fragmentShader=n,this._uniforms=a,this._textureScale=l,this._forcePowerOfTwo=h,this._sampleMode=p,this._pixelFormat=m,this._pixelDatatype=_,this._clearColor=I,this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._idTexture=void 0,this._actualUniforms={},this._dirtyUniforms=[],this._texturesToRelease=[],this._texturesToCreate=[],this._texturePromise=void 0;const y=new g.A;y.scissorTest={enabled:!0,rectangle:(0,c.A)(E)?i.A.clone(E):new i.A},this._passState=y,this._ready=!1,this._name=t,this._logDepthChanged=void 0,this._useLogDepth=void 0,this._selectedIdTexture=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0,this._textureCache=void 0,this._index=void 0,this.enabled=!0,this._enabled=!0}Object.defineProperties(B.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},fragmentShader:{get:function(){return this._fragmentShader}},uniforms:{get:function(){return this._uniforms}},textureScale:{get:function(){return this._textureScale}},forcePowerOfTwo:{get:function(){return this._forcePowerOfTwo}},sampleMode:{get:function(){return this._sampleMode}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},clearColor:{get:function(){return this._clearColor}},scissorRectangle:{get:function(){return this._passState.scissorTest.rectangle}},outputTexture:{get:function(){if((0,c.A)(this._textureCache)){const e=this._textureCache.getFramebuffer(this._name);if((0,c.A)(e))return e.getColorTexture(0)}}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}});const v=/uniform\s+sampler2D\s+depthTexture/g;function w(e,t,n){const i=t[n];return("string"==typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData)&&e._dirtyUniforms.push(n),{get:function(){return t[n]},set:function(i){const o=t[n];t[n]=i;const r=e._actualUniforms,a=r[n];(0,c.A)(a)&&a!==o&&a instanceof I.A&&!(0,c.A)(e._textureCache.getStageByName(n))&&(e._texturesToRelease.push(a),delete r[n],delete r[`${n}Dimensions`]),o instanceof I.A&&e._texturesToRelease.push(o),"string"==typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData?e._dirtyUniforms.push(n):r[n]=i}}}function T(e,t){return function(){const n=e._actualUniforms[t];return"function"==typeof n?n():n}}function S(e,t){return function(){const n=e[t]();if((0,c.A)(n))return n.dimensions}}function x(e,t){return function(n){e._texturesToCreate.push({name:t,source:n})}}function D(e,t){return function(){return e._textureCache.getOutputTexture(t)}}function Q(e){(0,c.A)(e._command)&&(e._command.shaderProgram=e._command.shaderProgram&&e._command.shaderProgram.destroy(),e._command=void 0),e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy();const t=e._textureCache;if(!(0,c.A)(t))return;const n=e._uniforms,i=e._actualUniforms;for(const o in i){if(!i.hasOwnProperty(o))continue;const r=i[o];r instanceof I.A&&((0,c.A)(t.getStageByName(n[o]))||r.destroy(),e._dirtyUniforms.push(o))}}B.prototype._isSupported=function(e){return!v.test(this._fragmentShader)||e.depthTexture},B.prototype.update=function(e,t){if(this.enabled===this._enabled||this.enabled||Q(this),this._enabled=this.enabled,!this._enabled)return;if(this._logDepthChanged=t!==this._useLogDepth,this._useLogDepth=t,this._selectedDirty=function(e){const t=(0,c.A)(e._selected)?e._selected.length:0,n=(0,c.A)(e._parentSelected)?e._parentSelected:0,i=e._selected!==e._selectedShadow||t!==e._selectedLength||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength;if((0,c.A)(e._selected)&&(0,c.A)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,c.A)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&(0,c.A)(e._combinedSelected)){if(!(0,c.A)(e._combinedSelectedShadow))return!0;for(let t=0;t<e._combinedSelected.length;++t)if(e._combinedSelected[t]!==e._combinedSelectedShadow[t])return!0}return i}(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,c.A)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,c.A)(this._parentSelected)?this._parentSelected.length:0,function(e,t){if(!e._selectedDirty)return;e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy(),e._selectedIdTexture=void 0;const n=e._combinedSelected;if(!(0,c.A)(n))return;let i=0;for(let e=0;e<n.length;++e){const t=n[e];(0,c.A)(t.pickIds)?i+=t.pickIds.length:(0,c.A)(t.pickId)&&++i}if(0===n.length||0===i){const n=new Uint8Array([255,255,255,255]);return void(e._selectedIdTexture=new I.A({context:t,pixelFormat:d.A.RGBA,pixelDatatype:f.A.UNSIGNED_BYTE,source:{arrayBufferView:n,width:1,height:1},sampler:m.A.NEAREST}))}let o=0;const a=new Uint8Array(4*i);for(let e=0;e<n.length;++e){const t=n[e];if((0,c.A)(t.pickIds)){const e=t.pickIds,n=e.length;for(let t=0;t<n;++t){const n=e[t].color;a[o]=r.A.floatToByte(n.red),a[o+1]=r.A.floatToByte(n.green),a[o+2]=r.A.floatToByte(n.blue),a[o+3]=r.A.floatToByte(n.alpha),o+=4}}else if((0,c.A)(t.pickId)){const e=t.pickId.color;a[o]=r.A.floatToByte(e.red),a[o+1]=r.A.floatToByte(e.green),a[o+2]=r.A.floatToByte(e.blue),a[o+3]=r.A.floatToByte(e.alpha),o+=4}}e._selectedIdTexture=new I.A({context:t,pixelFormat:d.A.RGBA,pixelDatatype:f.A.UNSIGNED_BYTE,source:{arrayBufferView:a,width:i,height:1},sampler:m.A.NEAREST})}(this,e),function(e){if((0,c.A)(e._uniformMap))return;const t={},n={},i=e._uniforms,o=e._actualUniforms;for(const r in i){if(!i.hasOwnProperty(r))continue;"function"!=typeof i[r]?(t[r]=T(e,r),n[r]=w(e,i,r)):(t[r]=i[r],n[r]=i[r]),o[r]=i[r];const a=t[r]();("string"==typeof a||a instanceof I.A||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement)&&(t[`${r}Dimensions`]=S(t,r))}e._uniforms={},Object.defineProperties(e._uniforms,n),e._uniformMap=(0,a.A)(t,{colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions},depthTexture:function(){return e._depthTexture},depthTextureDimensions:function(){return e._depthTexture.dimensions},czm_idTexture:function(){return e._idTexture},czm_selectedIdTexture:function(){return e._selectedIdTexture},czm_selectedIdTextureStep:function(){return 1/e._selectedIdTexture.width}})}(this),function(e,t){const n=e._texturesToRelease;for(let e=0;e<n.length;++e){let t=n[e];t=t&&t.destroy()}n.length=0;const i=e._texturesToCreate;for(let n=0;n<i.length;++n){const{name:o,source:r}=i[n];e._actualUniforms[o]=new I.A({context:t,source:r})}i.length=0;const o=e._dirtyUniforms;if(0===o.length&&!(0,c.A)(e._texturePromise))return void(e._ready=!0);if(0===o.length||(0,c.A)(e._texturePromise))return;const r=e._uniforms,a=[];for(let t=0;t<o.length;++t){const n=o[t],i=r[n],s=e._textureCache.getStageByName(i);if((0,c.A)(s))e._actualUniforms[n]=D(e,i);else if("string"==typeof i){const t=new h.A({url:i});a.push(t.fetchImage().then(x(e,n)))}else e._texturesToCreate.push({name:n,source:i})}o.length=0,a.length>0?(e._ready=!1,e._texturePromise=Promise.all(a).then(function(){e._ready=!0,e._texturePromise=void 0})):e._ready=!0}(this,e),function(e,t){if((0,c.A)(e._command)&&!e._logDepthChanged&&!e._selectedDirty)return;let n=e._fragmentShader;(0,c.A)(e._selectedIdTexture)&&(n=`#define CZM_SELECTED_FEATURE\nuniform sampler2D czm_idTexture;\nuniform sampler2D czm_selectedIdTexture;\nuniform float czm_selectedIdTextureStep;\nin vec2 v_textureCoordinates;\nbool czm_selected(vec2 offset)\n{\n    bool selected = false;\n    vec4 id = texture(czm_idTexture, v_textureCoordinates + offset);\n    for (int i = 0; i < ${e._selectedIdTexture.width}; ++i)\n    {\n        vec4 selectedId = texture(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5));\n        if (all(equal(id, selectedId)))\n        {\n            return true;\n        }\n    }\n    return false;\n}\nbool czm_selected()\n{\n    return czm_selected(vec2(0.0));\n}\n\n${n.replace(/in\s+vec2\s+v_textureCoordinates;/g,"")}`);const i=new _.A({defines:[e._useLogDepth?"LOG_DEPTH":""],sources:[n]});e._command=t.createViewportQuadCommand(i,{uniformMap:e._uniformMap,owner:e})}(this,e),function(e){let t,n;e._sampleMode===b.A.LINEAR?(t=y.A.LINEAR,n=E.A.LINEAR):(t=y.A.NEAREST,n=E.A.NEAREST);const i=e._sampler;(0,c.A)(i)&&i.minificationFilter===t&&i.magnificationFilter===n||(e._sampler=new m.A({wrapS:C.A.CLAMP_TO_EDGE,wrapT:C.A.CLAMP_TO_EDGE,minificationFilter:t,magnificationFilter:n}))}(this),this._selectedDirty=!1,!this._ready)return;const n=this._textureCache.getFramebuffer(this._name);if(this._command.framebuffer=n,!(0,c.A)(n))return;const o=n.getColorTexture(0);let s;o.width===e.drawingBufferWidth&&o.height===e.drawingBufferHeight||(s=this._renderState,(0,c.A)(s)&&o.width===s.viewport.width&&o.height===s.viewport.height||(this._renderState=p.A.fromCache({viewport:new i.A(0,0,o.width,o.height)}))),this._command.renderState=s},B.prototype.execute=function(e,t,n,i){if(!((0,c.A)(this._command)&&(0,c.A)(this._command.framebuffer)&&this._ready&&this._enabled))return;this._colorTexture=t,this._depthTexture=n,this._idTexture=i,m.A.equals(this._colorTexture.sampler,this._sampler)||(this._colorTexture.sampler=this._sampler);const o=this.scissorRectangle.width>0&&this.scissorRectangle.height>0?this._passState:void 0;(0,c.A)(o)&&(o.context=e),this._command.execute(e,o)},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){return Q(this),(0,l.A)(this)};const N=B},201733:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(491446),r=n(677354),a=n(605971),s=n(276904),A=n(57775),c=n(654799),l=n(616e3),u=n(957233),d=n(78078),h=n(557448),g=n(90979),f=n(380590),p=n(922990),m=n(639475);const _=[];function I(){const e=f.A.createFXAAStage(),t=f.A.createAmbientOcclusionStage(),n=f.A.createBloomStage();this._autoExposureEnabled=!1,this._autoExposure=f.A.createAutoExposureStage(),this._exposure=1,this._tonemapping=void 0,this._tonemapper=void 0,this.tonemapper=m.A.PBR_NEUTRAL;const i=this._tonemapping;e.enabled=!1,t.enabled=!1,n.enabled=!1,i.enabled=!1;const r=new p.A(this),a={},s=_;for(s.push(e,t,n,i);s.length>0;){const e=s.pop();a[e.name]=e,e._textureCache=r;const t=e.length;if((0,o.A)(t))for(let n=0;n<t;++n)s.push(e.get(n))}this._stages=[],this._activeStages=[],this._previousActiveStages=[],this._randomTexture=void 0;const A=this;t.uniforms.randomTexture=function(){return A._randomTexture},this._ao=t,this._bloom=n,this._fxaa=e,this._aoEnabled=void 0,this._bloomEnabled=void 0,this._tonemappingEnabled=void 0,this._fxaaEnabled=void 0,this._activeStagesChanged=!1,this._stagesRemoved=!1,this._textureCacheDirty=!1,this._stageNames=a,this._textureCache=r}function E(e){if(!e._stagesRemoved)return;e._stagesRemoved=!1;const t=[],n=e._stages;for(let e=0,i=0;e<n.length;++e){const o=n[e];o&&(o._index=i++,t.push(o))}e._stages=t}function y(e){for(;(0,o.A)(e.length);)e=e.get(e.length-1);return e.outputTexture}function C(e,t,n,i,r){if((0,o.A)(e.execute))e.execute(t,n,i,r);else if(e.inputPreviousStageTexture){C(e.get(0),t,n,i,r);for(let n=1;n<e.length;++n)C(e.get(n),t,y(e.get(n-1)),i,r)}else for(let o=0;o<e.length;++o)C(e.get(o),t,n,i,r)}Object.defineProperties(I.prototype,{ready:{get:function(){let e=!1;const t=this._stages;for(let n=t.length-1;n>=0;--n){const i=t[n];e=e||i.ready&&i.enabled}const n=this._fxaa,i=this._ao,o=this._bloom,r=this._tonemapping;return e=e||n.ready&&n.enabled,e=e||i.ready&&i.enabled,e=e||o.ready&&o.enabled,e=e||r.ready&&r.enabled,e}},fxaa:{get:function(){return this._fxaa}},ambientOcclusion:{get:function(){return this._ao}},bloom:{get:function(){return this._bloom}},length:{get:function(){return E(this),this._stages.length}},outputTexture:{get:function(){const e=this._fxaa;if(e.enabled&&e.ready)return this.getOutputTexture(e.name);const t=this._stages;for(let e=t.length-1;e>=0;--e){const n=t[e];if((0,o.A)(n)&&n.ready&&n.enabled)return this.getOutputTexture(n.name)}const n=this._tonemapping;if(n.enabled&&n.ready)return this.getOutputTexture(n.name);const i=this._bloom;if(i.enabled&&i.ready)return this.getOutputTexture(i.name);const r=this._ao;return r.enabled&&r.ready?this.getOutputTexture(r.name):void 0}},hasSelected:{get:function(){const e=this._stages.slice();for(;e.length>0;){const t=e.pop();if(!(0,o.A)(t))continue;if((0,o.A)(t.selected))return!0;const n=t.length;if((0,o.A)(n))for(let i=0;i<n;++i)e.push(t.get(i))}return!1}},tonemapper:{get:function(){return this._tonemapper},set:function(e){if(this._tonemapper===e)return;if(!(0,m.E)(e))throw new a.A("tonemapper was set to an invalid value.");(0,o.A)(this._tonemapping)&&(delete this._stageNames[this._tonemapping.name],this._tonemapping.destroy());const t=this._autoExposureEnabled;let n;switch(e){case m.A.REINHARD:n=f.A.createReinhardTonemappingStage(t);break;case m.A.MODIFIED_REINHARD:n=f.A.createModifiedReinhardTonemappingStage(t);break;case m.A.FILMIC:n=f.A.createFilmicTonemappingStage(t);break;case m.A.PBR_NEUTRAL:n=f.A.createPbrNeutralTonemappingStage(t);break;default:n=f.A.createAcesTonemappingStage(t)}if(t){const e=this._autoExposure;n.uniforms.autoExposure=function(){return e.outputTexture}}else n.uniforms.exposure=this._exposure;this._tonemapper=e,this._tonemapping=n,(0,o.A)(this._stageNames)&&(this._stageNames[n.name]=n,n._textureCache=this._textureCache),this._textureCacheDirty=!0}},exposure:{get:function(){return this._exposure},set:function(e){this._tonemapping.uniforms.exposure=e,this._exposure=e}}}),I.prototype.add=function(e){i.A.typeOf.object("stage",e);const t=this._stageNames,n=_;for(n.push(e);n.length>0;){const e=n.pop();if((0,o.A)(t[e.name]))throw new a.A(`${e.name} has already been added to the collection or does not have a unique name.`);t[e.name]=e,e._textureCache=this._textureCache;const i=e.length;if((0,o.A)(i))for(let t=0;t<i;++t)n.push(e.get(t))}const r=this._stages;return e._index=r.length,r.push(e),this._textureCacheDirty=!0,e},I.prototype.remove=function(e){if(!this.contains(e))return!1;const t=this._stageNames,n=_;for(n.push(e);n.length>0;){const e=n.pop();delete t[e.name];const i=e.length;if((0,o.A)(i))for(let t=0;t<i;++t)n.push(e.get(t))}return this._stages[e._index]=void 0,this._stagesRemoved=!0,this._textureCacheDirty=!0,e._index=void 0,e._textureCache=void 0,e.destroy(),!0},I.prototype.contains=function(e){return(0,o.A)(e)&&(0,o.A)(e._index)&&e._textureCache===this._textureCache},I.prototype.get=function(e){E(this);const t=this._stages,n=t.length;return i.A.typeOf.number.greaterThanOrEquals("stages length",n,0),i.A.typeOf.number.greaterThanOrEquals("index",e,0),i.A.typeOf.number.lessThan("index",e,n),t[e]},I.prototype.removeAll=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)this.remove(e[n]);e.length=0},I.prototype.getStageByName=function(e){return this._stageNames[e]},I.prototype.update=function(e,t,n){E(this);const i=this._activeStages,r=this._activeStages=this._previousActiveStages;this._previousActiveStages=i;const a=this._stages;r.length=a.length;let g=0;for(let t=0;t<a.length;++t){const n=a[t];n.ready&&n.enabled&&n._isSupported(e)&&(r[g++]=n)}r.length=g;let f=g!==i.length;if(!f)for(let e=0;e<g;++e)if(r[e]!==i[e]){f=!0;break}const p=this._ao,m=this._bloom,_=this._autoExposure,I=this._tonemapping,y=this._fxaa;I.enabled=n;const C=p.enabled&&p._isSupported(e),b=m.enabled&&m._isSupported(e),B=I.enabled&&I._isSupported(e),v=y.enabled&&y._isSupported(e);if((f||this._textureCacheDirty||C!==this._aoEnabled||b!==this._bloomEnabled||B!==this._tonemappingEnabled||v!==this._fxaaEnabled)&&(this._textureCache.updateDependencies(),this._aoEnabled=C,this._bloomEnabled=b,this._tonemappingEnabled=B,this._fxaaEnabled=v,this._textureCacheDirty=!1),(0,o.A)(this._randomTexture)&&!C&&(this._randomTexture.destroy(),this._randomTexture=void 0),!(0,o.A)(this._randomTexture)&&C){const t=196608,n=new Uint8Array(t);for(let e=0;e<t;e+=3)n[e]=Math.floor(255*Math.random());this._randomTexture=new l.A({context:e,pixelFormat:s.A.RGB,pixelDatatype:A.A.UNSIGNED_BYTE,source:{arrayBufferView:n,width:256,height:256},sampler:new c.A({wrapS:h.A.REPEAT,wrapT:h.A.REPEAT,minificationFilter:d.A.NEAREST,magnificationFilter:u.A.NEAREST})})}this._textureCache.update(e),y.update(e,t),p.update(e,t),m.update(e,t),I.update(e,t),this._autoExposureEnabled&&_.update(e,t);for(let n=0;n<a.length;++n)a[n].update(e,t);g=0;for(let t=0;t<a.length;++t){const n=a[t];n.ready&&n.enabled&&n._isSupported(e)&&g++}f=g!==r.length,f&&this.update(e,t,n)},I.prototype.clear=function(e){this._textureCache.clear(e),this._autoExposureEnabled&&this._autoExposure.clear(e)},I.prototype.getOutputTexture=function(e){const t=this.getStageByName(e);if((0,o.A)(t))return y(t)},I.prototype.execute=function(e,t,n,i){const o=this._activeStages,r=o.length,a=this._fxaa,s=this._ao,A=this._bloom,c=this._autoExposure,l=this._tonemapping,u=s.enabled&&s._isSupported(e),d=A.enabled&&A._isSupported(e),h=this._autoExposureEnabled,g=l.enabled&&l._isSupported(e),f=a.enabled&&a._isSupported(e);if(!(f||u||d||g||0!==r))return;let p=t;u&&s.ready&&(C(s,e,p,n,i),p=y(s)),d&&A.ready&&(C(A,e,p,n,i),p=y(A)),h&&c.ready&&C(c,e,p,n,i),g&&l.ready&&(C(l,e,p,n,i),p=y(l));let m=p;if(r>0){C(o[0],e,p,n,i);for(let t=1;t<r;++t)C(o[t],e,y(o[t-1]),n,i);m=y(o[r-1])}f&&a.ready&&C(a,e,m,n,i)},I.prototype.copy=function(e,t){if(!(0,o.A)(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(g.A,{uniformMap:{colorTexture:function(){return t.outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._fxaa.destroy(),this._ao.destroy(),this._bloom.destroy(),this._autoExposure.destroy(),this._tonemapping.destroy(),this.removeAll(),this._textureCache=this._textureCache&&this._textureCache.destroy(),(0,r.A)(this)};const b=I},517290:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(673874),r=n(915325),a=n(491446),s=n(677354);function A(e){e=e??r.A.EMPTY_OBJECT,i.A.defined("options.stages",e.stages),i.A.typeOf.number.greaterThan("options.stages.length",e.stages.length,0),this._stages=e.stages,this._inputPreviousStageTexture=e.inputPreviousStageTexture??!0;let t=e.name;(0,a.A)(t)||(t=(0,o.A)()),this._name=t,this._uniforms=e.uniforms,this._textureCache=void 0,this._index=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0}Object.defineProperties(A.prototype,{ready:{get:function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)if(!e[n].ready)return!1;return!0}},name:{get:function(){return this._name}},enabled:{get:function(){return this._stages[0].enabled},set:function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)t[i].enabled=e}},uniforms:{get:function(){return this._uniforms}},inputPreviousStageTexture:{get:function(){return this._inputPreviousStageTexture}},length:{get:function(){return this._stages.length}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}}),A.prototype._isSupported=function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)if(!t[i]._isSupported(e))return!1;return!0},A.prototype.get=function(e){return i.A.typeOf.number.greaterThanOrEquals("index",e,0),i.A.typeOf.number.lessThan("index",e,this.length),this._stages[e]},A.prototype.update=function(e,t){this._selectedDirty=function(e){let t=(0,a.A)(e._selected)?e._selected.length:0;const n=(0,a.A)(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,(0,a.A)(e._selected)&&(0,a.A)(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):(0,a.A)(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&(0,a.A)(e._combinedSelected)){if(!(0,a.A)(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=(0,a.A)(this._selected)?this._selected.length:0,this._parentSelectedLength=(0,a.A)(this._parentSelected)?this._parentSelected.length:0;const n=this._stages,i=n.length;for(let o=0;o<i;++o){const i=n[o];this._selectedDirty&&(i.parentSelected=this._combinedSelected),i.update(e,t)}},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,s.A)(this)};const c=A},380590:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(303578),o=n(41476),r=n(673874),a=n(491446),s=n(610750),A=n(752925),c=n(365559),l=n(427139),u=n(844644),d=n(638943),h=n(377126),g=n(547146),f=n(934993),p=n(712957),m=n(388241),_=n(347961),I=n(537070),E=n(780953),y=n(602142),C=n(947709),b=n(724355),B=n(573311),v=n(951834),w=n(382743),T=n(689520),S=n(355540),x=n(421549),D=n(517290),Q=n(339600);const N={};function R(e){const t=`#define USE_STEP_SIZE\n${y.A}`,n=new x.A({name:`${e}_x_direction`,fragmentShader:t,uniforms:{delta:1,sigma:2,stepSize:1,direction:0},sampleMode:Q.A.LINEAR}),i=new x.A({name:`${e}_y_direction`,fragmentShader:t,uniforms:{delta:1,sigma:2,stepSize:1,direction:1},sampleMode:Q.A.LINEAR}),o={};return Object.defineProperties(o,{delta:{get:function(){return n.uniforms.delta},set:function(e){const t=n.uniforms,o=i.uniforms;t.delta=o.delta=e}},sigma:{get:function(){return n.uniforms.sigma},set:function(e){const t=n.uniforms,o=i.uniforms;t.sigma=o.sigma=e}},stepSize:{get:function(){return n.uniforms.stepSize},set:function(e){const t=n.uniforms,o=i.uniforms;t.stepSize=o.stepSize=e}}}),new D.A({name:e,stages:[n,i],uniforms:o})}N.createBlurStage=function(){return R("czm_blur")},N.createDepthOfFieldStage=function(){const e=R("czm_depth_of_field_blur"),t=new x.A({name:"czm_depth_of_field_composite",fragmentShader:f.A,uniforms:{focalDistance:5,blurTexture:e.name}}),n={};return Object.defineProperties(n,{focalDistance:{get:function(){return t.uniforms.focalDistance},set:function(e){t.uniforms.focalDistance=e}},delta:{get:function(){return e.uniforms.delta},set:function(t){e.uniforms.delta=t}},sigma:{get:function(){return e.uniforms.sigma},set:function(t){e.uniforms.sigma=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}}}),new D.A({name:"czm_depth_of_field",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},N.isDepthOfFieldSupported=function(e){return e.context.depthTexture},N.createEdgeDetectionStage=function(){const e=(0,r.A)();return new x.A({name:`czm_edge_detection_${e}`,fragmentShader:m.A,uniforms:{length:.25,color:o.A.clone(o.A.BLACK)}})},N.isEdgeDetectionSupported=function(e){return e.context.depthTexture},N.createSilhouetteStage=function(e){const t=function(e){if(!(0,a.A)(e))return N.createEdgeDetectionStage();const t=new D.A({name:"czm_edge_detection_multiple",stages:e,inputPreviousStageTexture:!1}),n={};let i="",o="";for(let t=0;t<e.length;++t)i+=`uniform sampler2D edgeTexture${t}; \n`,o+=`        vec4 edge${t} = texture(edgeTexture${t}, v_textureCoordinates); \n        if (edge${t}.a > 0.0) \n        { \n            color = edge${t}; \n            break; \n        } \n`,n[`edgeTexture${t}`]=e[t].name;const r=`${i}in vec2 v_textureCoordinates; \nvoid main() { \n    vec4 color = vec4(0.0); \n    for (int i = 0; i < ${e.length}; i++) \n    { \n${o}    } \n    out_FragColor = color; \n} \n`,s=new x.A({name:"czm_edge_detection_combine",fragmentShader:r,uniforms:n});return new D.A({name:"czm_edge_detection_composite",stages:[t,s]})}(e),n=new x.A({name:"czm_silhouette_color_edges",fragmentShader:w.A,uniforms:{silhouetteTexture:t.name}});return new D.A({name:"czm_silhouette",stages:[t,n],inputPreviousStageTexture:!1,uniforms:t.uniforms})},N.isSilhouetteSupported=function(e){return e.context.depthTexture},N.createBloomStage=function(){const e=new x.A({name:"czm_bloom_contrast_bias",fragmentShader:g.A,uniforms:{contrast:128,brightness:-.3}}),t=R("czm_bloom_blur"),n=new D.A({name:"czm_bloom_contrast_bias_blur",stages:[e,t]}),i=new x.A({name:"czm_bloom_generate_composite",fragmentShader:d.A,uniforms:{glowOnly:!1,bloomTexture:n.name}}),o={};return Object.defineProperties(o,{glowOnly:{get:function(){return i.uniforms.glowOnly},set:function(e){i.uniforms.glowOnly=e}},contrast:{get:function(){return e.uniforms.contrast},set:function(t){e.uniforms.contrast=t}},brightness:{get:function(){return e.uniforms.brightness},set:function(t){e.uniforms.brightness=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},stepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}}}),new D.A({name:"czm_bloom",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},N.createAmbientOcclusionStage=function(){const e=new x.A({name:"czm_ambient_occlusion_generate",fragmentShader:c.A,uniforms:{intensity:3,bias:.1,lengthCap:.26,directionCount:8,stepCount:32,randomTexture:void 0}}),t=new x.A({name:"czm_ambient_occlusion_composite",fragmentShader:l.A,uniforms:{ambientOcclusionOnly:!1,ambientOcclusionTexture:e.name}}),n={};return Object.defineProperties(n,{intensity:{get:function(){return e.uniforms.intensity},set:function(t){e.uniforms.intensity=t}},bias:{get:function(){return e.uniforms.bias},set:function(t){e.uniforms.bias=t}},lengthCap:{get:function(){return e.uniforms.lengthCap},set:function(t){e.uniforms.lengthCap=t}},directionCount:{get:function(){return e.uniforms.directionCount},set:function(t){e.uniforms.directionCount=t}},stepCount:{get:function(){return e.uniforms.stepCount},set:function(t){e.uniforms.stepCount=t}},randomTexture:{get:function(){return e.uniforms.randomTexture},set:function(t){e.uniforms.randomTexture=t}},ambientOcclusionOnly:{get:function(){return t.uniforms.ambientOcclusionOnly},set:function(e){t.uniforms.ambientOcclusionOnly=e}}}),new D.A({name:"czm_ambient_occlusion",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},N.isAmbientOcclusionSupported=function(e){return e.context.depthTexture};const M=`#define FXAA_QUALITY_PRESET 39 \n${T.A}\n${E.A}`;N.createFXAAStage=function(){return new x.A({name:"czm_FXAA",fragmentShader:M,sampleMode:Q.A.LINEAR})},N.createAcesTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=A.A,new x.A({name:"czm_aces",fragmentShader:t,uniforms:{autoExposure:void 0,exposure:1}})},N.createFilmicTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=_.A,new x.A({name:"czm_filmic",fragmentShader:t,uniforms:{autoExposure:void 0,exposure:1}})},N.createPbrNeutralTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=I.A,new x.A({name:"czm_pbr_neutral",fragmentShader:t,uniforms:{autoExposure:void 0,exposure:1}})},N.createReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=v.A,new x.A({name:"czm_reinhard",fragmentShader:t,uniforms:{autoExposure:void 0,exposure:1}})},N.createModifiedReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=b.A,new x.A({name:"czm_modified_reinhard",fragmentShader:t,uniforms:{white:o.A.WHITE,autoExposure:void 0,exposure:1}})},N.createAutoExposureStage=function(){return new S.A},N.createBlackAndWhiteStage=function(){return new x.A({name:"czm_black_and_white",fragmentShader:u.A,uniforms:{gradations:5}})},N.createBrightnessStage=function(){return new x.A({name:"czm_brightness",fragmentShader:h.A,uniforms:{brightness:.5}})},N.createNightVisionStage=function(){return new x.A({name:"czm_night_vision",fragmentShader:B.A})},N.createDepthViewStage=function(){return new x.A({name:"czm_depth_view",fragmentShader:p.A})},N.createLensFlareStage=function(){return new x.A({name:"czm_lens_flare",fragmentShader:C.A,uniforms:{dirtTexture:(0,i.A)("Assets/Textures/LensFlare/DirtMask.jpg"),starTexture:(0,i.A)("Assets/Textures/LensFlare/StarBurst.jpg"),intensity:2,distortion:10,ghostDispersal:.4,haloWidth:.4,dirtAmount:.4,earthRadius:s.A.WGS84.maximumRadius}})};const L=N},339600:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i={NEAREST:0,LINEAR:1}},922990:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(41476),o=n(491446),r=n(677354),a=n(367817),s=n(769493),A=n(804701);function c(e){this._collection=e,this._framebuffers=[],this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0,this._updateDependencies=!1}function l(e){for(;(0,o.A)(e.length);)e=e.get(e.length-1);return e.name}function u(e,t,n,i,r){if(!i.enabled||!i._isSupported(t))return r;const a=n[i.name]={};(0,o.A)(r)&&(a[l(e.getStageByName(r))]=!0);const s=i.uniforms;if((0,o.A)(s)){const t=Object.getOwnPropertyNames(s),n=t.length;for(let i=0;i<n;++i){const n=s[t[i]];if("string"==typeof n){const t=e.getStageByName(n);(0,o.A)(t)&&(a[l(t)]=!0)}}}return i.name}function d(e,t,n,i,r){if((0,o.A)(i.enabled)&&!i.enabled||(0,o.A)(i._isSupported)&&!i._isSupported(t))return r;const a=r,s=!(0,o.A)(i.inputPreviousStageTexture)||i.inputPreviousStageTexture;let A=r;const c=i.length;for(let a=0;a<c;++a){const c=i.get(a);A=(0,o.A)(c.length)?d(e,t,n,c,r):u(e,t,n,c,r),s&&(r=A)}let h,g;if(s)for(h=1;h<c;++h)g=l(i.get(h)),(0,o.A)(n[g])||(n[g]={}),n[g][a]=!0;else for(h=1;h<c;++h){g=l(i.get(h));const e=n[g];for(let t=0;t<h;++t)e[l(i.get(t))]=!0}return A}function h(e,t,n){const r=e._collection.getStageByName(t),a=r._textureScale,s=r._forcePowerOfTwo,c=r._pixelFormat,l=r._pixelDatatype,u=r._clearColor;let d,h;const g=e._framebuffers,f=g.length;for(d=0;d<f;++d){if(h=g[d],a!==h.textureScale||s!==h.forcePowerOfTwo||c!==h.pixelFormat||l!==h.pixelDatatype||!i.A.equals(u,h.clearColor))continue;const e=h.stages,t=e.length;let o=!1;for(let i=0;i<t;++i)if(n[e[i]]){o=!0;break}if(!o)break}return(0,o.A)(h)&&d<f?(h.stages.push(t),h):(h={textureScale:a,forcePowerOfTwo:s,pixelFormat:c,pixelDatatype:l,clearColor:u,stages:[t],buffer:new A.A({pixelFormat:c,pixelDatatype:l}),clear:void 0},g.push(h),h)}function g(e){const t=e._framebuffers,n=t.length;for(let e=0;e<n;++e)t[e].buffer.destroy()}c.prototype.updateDependencies=function(){this._updateDependencies=!0},c.prototype.update=function(e){const t=this._collection,n=this._updateDependencies,i=(0,o.A)(t.ambientOcclusion)&&t.ambientOcclusion.enabled&&t.ambientOcclusion._isSupported(e),r=(0,o.A)(t.bloom)&&t.bloom.enabled&&t.bloom._isSupported(e),A=(0,o.A)(t._tonemapping)&&t._tonemapping.enabled&&t._tonemapping._isSupported(e),c=(0,o.A)(t.fxaa)&&t.fxaa.enabled&&t.fxaa._isSupported(e),l=!(0,o.A)(t._activeStages)||t._activeStages.length>0||i||r||A||c;if((n||!l&&this._framebuffers.length>0)&&(g(this),this._framebuffers.length=0,this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0),!n&&!l)return;0===this._framebuffers.length&&function(e,t){const n=function(e,t){const n={};if((0,o.A)(e.ambientOcclusion)){const i=e.ambientOcclusion,o=e.bloom,r=e._tonemapping,a=e.fxaa;let s=d(e,t,n,i,void 0);s=d(e,t,n,o,s),s=u(e,t,n,r,s),s=d(e,t,n,e,s),u(e,t,n,a,s)}else d(e,t,n,e,void 0);return n}(e._collection,t);for(const t in n)n.hasOwnProperty(t)&&(e._stageNameToFramebuffer[t]=h(e,t,n[t]))}(this,e);const f=e.drawingBufferWidth,p=e.drawingBufferHeight,m=this._width!==f||this._height!==p;(n||m)&&(this._width=f,this._height=p,this._updateDependencies=!1,g(this),function(e,t){const n=e._width,i=e._height,o=e._framebuffers,r=o.length;for(let e=0;e<r;++e){const r=o[e],A=r.textureScale;let c=Math.ceil(n*A),l=Math.ceil(i*A),u=Math.min(c,l);r.forcePowerOfTwo&&(a.A.isPowerOfTwo(u)||(u=a.A.nextPowerOfTwo(u)),c=u,l=u),r.buffer.update(t,c,l),r.clear=new s.A({color:r.clearColor,framebuffer:r.buffer.framebuffer})}}(this,e))},c.prototype.clear=function(e){const t=this._framebuffers;for(let n=0;n<t.length;++n)t[n].clear.execute(e)},c.prototype.getStageByName=function(e){return this._collection.getStageByName(e)},c.prototype.getOutputTexture=function(e){return this._collection.getOutputTexture(e)},c.prototype.getFramebuffer=function(e){const t=this._stageNameToFramebuffer[e];if((0,o.A)(t))return t.buffer.framebuffer},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return g(this),(0,r.A)(this)};const f=c},493721:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(673874),o=n(915325),r=n(491446),a=n(677354),s=n(605971),A=n(955943);function c(e){e=e??o.A.EMPTY_OBJECT,this._primitives=[],this._guid=(0,i.A)(),this._primitiveAdded=new A.A,this._primitiveRemoved=new A.A,this._zIndex=void 0,this.show=e.show??!0,this.destroyPrimitives=e.destroyPrimitives??!0,this._countReferences=e.countReferences??!1}function l(e,t){if(!e.contains(t))throw new s.A("primitive is not in this collection.");return e._primitives.indexOf(t)}Object.defineProperties(c.prototype,{length:{get:function(){return this._primitives.length}},primitiveAdded:{get:function(){return this._primitiveAdded}},primitiveRemoved:{get:function(){return this._primitiveRemoved}}}),c.prototype.add=function(e,t){const n=(0,r.A)(t);if(!(0,r.A)(e))throw new s.A("primitive is required.");if(n){if(t<0)throw new s.A("index must be greater than or equal to zero.");if(t>this._primitives.length)throw new s.A("index must be less than or equal to the number of primitives.")}const i=e._external=e._external||{};return(i._composites=i._composites||{})[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),this._countReferences&&((0,r.A)(i._referenceCount)?++i._referenceCount:i._referenceCount=1),this._primitiveAdded.raiseEvent(e),e},c.prototype.remove=function(e){if(this.contains(e)){const t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this._countReferences&&e._external._referenceCount--,this.destroyPrimitives&&(!this._countReferences||e._external._referenceCount<=0)&&e.destroy(),this._primitiveRemoved.raiseEvent(e),!0}return!1},c.prototype.removeAndDestroy=function(e){const t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},c.prototype.removeAll=function(){const e=this._primitives,t=e.length;for(let n=0;n<t;++n){const t=e[n];delete t._external._composites[this._guid],this._countReferences&&t._external._referenceCount--,this.destroyPrimitives&&(!this._countReferences||t._external._referenceCount<=0)&&t.destroy(),this._primitiveRemoved.raiseEvent(t)}this._primitives=[]},c.prototype.contains=function(e){return!!((0,r.A)(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},c.prototype.raise=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;if(t!==n.length-1){const e=n[t];n[t]=n[t+1],n[t+1]=e}}},c.prototype.raiseToTop=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}},c.prototype.lower=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;if(0!==t){const e=n[t];n[t]=n[t-1],n[t-1]=e}}},c.prototype.lowerToBottom=function(e){if((0,r.A)(e)){const t=l(this,e),n=this._primitives;0!==t&&(n.splice(t,1),n.unshift(e))}},c.prototype.get=function(e){if(!(0,r.A)(e))throw new s.A("index is required.");return this._primitives[e]},c.prototype.update=function(e){if(!this.show)return;const t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)},c.prototype.prePassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];(0,r.A)(i.prePassesUpdate)&&i.prePassesUpdate(e)}},c.prototype.updateForPass=function(e,t){const n=this._primitives;for(let i=0;i<n.length;++i){const o=n[i];(0,r.A)(o.updateForPass)&&o.updateForPass(e,t)}},c.prototype.postPassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];(0,r.A)(i.postPassesUpdate)&&i.postPassesUpdate(e)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,a.A)(this)};const u=c},289758:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(571804),r=n(491446),a=n(874915),s=n(641613),A=n(442790),c=n(730839),l=n(995537),u=n(623524);function d(e){i.A.typeOf.object("attribute",e),this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function h(e){i.A.typeOf.object("primitive",e),this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0,this.needsGaussianSplats=!1}h.prototype.postProcess=function(e){this.needsOutlines&&(function(e){const t=e.primitive,n=t.indices,i=t.attributes[0].count,r=new u.A({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=r.updatedTriangleIndices,n.indexDatatype=a.A.fromTypedArray(n.typedArray);const s=new d(function(e){const t=new l.A.Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=o.A.FLOAT,t.type=c.A.VEC3,t.normalized=!1,t.count=e.length/3,t}(r.outlineCoordinates));s.loadBuffer=!0,s.loadTypedArray=!1,e.attributePlans.push(s),t.outlineCoordinates=s.attribute;const A=e.attributePlans,h=e.attributePlans.length;for(let e=0;e<h;e++){const t=A[e].attribute;t.typedArray=r.updateAttribute(t.typedArray)}}(this),function(e,t){(function(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i],o=n.attribute,r=o.typedArray;if(n.loadBuffer){const e=s.A.createVertexBuffer({typedArray:r,context:t,usage:A.A.STATIC_DRAW});e.vertexArrayDestroyable=!1,o.buffer=e}n.loadTypedArray||(o.typedArray=void 0)}})(e.attributePlans,t),(0,r.A)(e.indicesPlan)&&function(e,t){const n=e.indices;if(e.loadBuffer){const e=s.A.createIndexBuffer({typedArray:n.typedArray,context:t,usage:A.A.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=e,e.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}(e.indicesPlan,t)}(this,e)),this.needsGaussianSplats&&function(e){const t=e.attributePlans,n=t.length;for(let e=0;e<n;e++){const n=t[e];n.loadBuffer=!1,n.loadTypedArray=!0}}(this)},h.AttributeLoadPlan=d,h.IndicesLoadPlan=function(e){i.A.typeOf.object("indices",e),this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1};const g=h},828847:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(915325),r=n(491446),a=n(663386);function s(e){const t=(e=e??o.A.EMPTY_OBJECT).propertyAttribute,n=e.class;i.A.typeOf.object("options.propertyAttribute",t),i.A.typeOf.object("options.class",n);const s={};if((0,r.A)(t.properties))for(const e in t.properties)t.properties.hasOwnProperty(e)&&(s[e]=new a.A({property:t.properties[e],classProperty:n.properties[e]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(s.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.getProperty=function(e){return i.A.typeOf.string("propertyId",e),this._properties[e]};const A=s},663386:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(915325),r=n(491446);function a(e){const t=(e=e??o.A.EMPTY_OBJECT).property,n=e.classProperty;i.A.typeOf.object("options.property",t),i.A.typeOf.object("options.classProperty",n),this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let a=t.offset,s=t.scale;const A=n.hasValueTransform||(0,r.A)(a)||(0,r.A)(s);a=a??n.offset,s=s??n.scale,a=n.unpackVectorAndMatrixTypes(a),s=n.unpackVectorAndMatrixTypes(s),this._offset=a,this._scale=s,this._hasValueTransform=A,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const s=a},287659:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(369031),o=n(915325),r=n(605971),a=n(491446),s=n(784749),A=n(702247);function c(e){e=e??o.A.EMPTY_OBJECT,i.A.typeOf.number("options.count",e.count),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(c.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if((0,a.A)(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return(0,a.A)(this._metadataTable)&&(e+=this._metadataTable.byteLength),(0,a.A)(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}}),c.prototype.hasProperty=function(e,t){return i.A.typeOf.number("index",e),i.A.typeOf.string("propertyId",t),!(!(0,a.A)(this._metadataTable)||!this._metadataTable.hasProperty(t))||!(!(0,a.A)(this._batchTableHierarchy)||!this._batchTableHierarchy.hasProperty(e,t))||!(!(0,a.A)(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(t))},c.prototype.hasPropertyBySemantic=function(e,t){return i.A.typeOf.number("index",e),i.A.typeOf.string("semantic",t),!!(0,a.A)(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(t)},c.prototype.propertyExists=function(e){return i.A.typeOf.string("propertyId",e),!(!(0,a.A)(this._metadataTable)||!this._metadataTable.hasProperty(e))||!(!(0,a.A)(this._batchTableHierarchy)||!this._batchTableHierarchy.propertyExists(e))||!(!(0,a.A)(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(e))},c.prototype.propertyExistsBySemantic=function(e){return i.A.typeOf.string("semantic",e),!!(0,a.A)(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(e)};const l=[];function u(e,t){if(!(0,a.A)(e)||e<0||e>=t)throw new r.A(`featureId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}c.prototype.getPropertyIds=function(e,t){if((t=(0,a.A)(t)?t:[]).length=0,(0,a.A)(this._metadataTable)){const e=this._metadataTable.getPropertyIds(l);(0,A.A)(t,e)}if((0,a.A)(this._batchTableHierarchy)){const n=this._batchTableHierarchy.getPropertyIds(e,l);(0,A.A)(t,n)}if((0,a.A)(this._jsonMetadataTable)){const e=this._jsonMetadataTable.getPropertyIds(l);(0,A.A)(t,e)}return t},c.prototype.getProperty=function(e,t){let n;return(0,a.A)(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),(0,a.A)(n))||(0,a.A)(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),(0,a.A)(n))||(0,a.A)(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),(0,a.A)(n))?n:void 0},c.prototype.setProperty=function(e,t,n){(0,a.A)(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||(0,a.A)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||((0,a.A)(this._jsonMetadataTable)||(this._jsonMetadataTable=new s.A({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))},c.prototype.getPropertyBySemantic=function(e,t){if((0,a.A)(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)},c.prototype.setPropertyBySemantic=function(e,t,n){return!!(0,a.A)(this._metadataTable)&&this._metadataTable.setPropertyBySemantic(e,t,n)},c.prototype.getPropertyTypedArray=function(e){if(i.A.typeOf.string("propertyId",e),(0,a.A)(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)},c.prototype.getPropertyTypedArrayBySemantic=function(e){if(i.A.typeOf.string("semantic",e),(0,a.A)(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)},c.prototype.isClass=function(e,t){u(e,this.count),i.A.typeOf.string("className",t);const n=this._batchTableHierarchy;return!!(0,a.A)(n)&&n.isClass(e,t)},c.prototype.isExactClass=function(e,t){return u(e,this.count),i.A.typeOf.string("className",t),this.getExactClassName(e)===t},c.prototype.getExactClassName=function(e){u(e,this.count);const t=this._batchTableHierarchy;if((0,a.A)(t))return t.getClassName(e)};const d=c},105792:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(915325),r=n(491446),a=n(875037);function s(e){const t=(e=e??o.A.EMPTY_OBJECT).propertyTexture,n=e.class,s=e.textures;i.A.typeOf.object("options.propertyTexture",t),i.A.typeOf.object("options.class",n),i.A.typeOf.object("options.textures",s);const A=t.extensions,c=t.extras,l={};if((0,r.A)(t.properties))for(const e in t.properties)t.properties.hasOwnProperty(e)&&(l[e]=new a.A({property:t.properties[e],classProperty:n.properties[e],textures:s}));this._name=e.name,this._id=e.id,this._class=n,this._properties=l,this._extras=c,this._extensions=A}Object.defineProperties(s.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.getProperty=function(e){return i.A.typeOf.string("propertyId",e),this._properties[e]};const A=s},875037:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(915325),r=n(491446),a=n(782556),s=n(374607),A=n(568748),c=n(983884);function l(e){const t=(e=e??o.A.EMPTY_OBJECT).property,n=e.classProperty,s=e.textures;i.A.typeOf.object("options.property",t),i.A.typeOf.object("options.classProperty",n),i.A.typeOf.object("options.textures",s);const A=(0,r.A)(t.channels)?t.channels:[0],c=t,l=a.A.createModelTextureReader({textureInfo:c,channels:h(A),texture:s[c.index]});this._min=t.min,this._max=t.max;let u=t.offset,d=t.scale;const g=n.hasValueTransform||(0,r.A)(u)||(0,r.A)(d);u=u??n.offset,d=d??n.scale,u=n.unpackVectorAndMatrixTypes(u),d=n.unpackVectorAndMatrixTypes(d),this._offset=u,this._scale=d,this._hasValueTransform=g,this._textureReader=l,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(l.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),l.prototype.isGpuCompatible=function(){const e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?e.isVariableLengthArray?((0,c.A)(`Property texture property ${e.id} is a variable-length array, which is not supported`),!1):e.arrayLength>4?((0,c.A)(`Property texture property ${e.id} is an array of length ${e.arrayLength}, but may have at most a length of 4`),!1):t!==s.A.SCALAR?((0,c.A)(`Property texture property ${e.id} is an array of type ${t}, but only SCALAR is supported`),!1):n===A.A.UINT8||((0,c.A)(`Property texture property ${e.id} is an array with component type ${n}, but only UINT8 is supported`),!1):s.A.isVectorType(t)||t===s.A.SCALAR?n===A.A.UINT8||((0,c.A)(`Property texture property ${e.id} has component type ${n}, but only UINT8 is supported`),!1):((0,c.A)(`Property texture property ${e.id} has an unsupported type`),!1)};const u=[void 0,"float","vec2","vec3","vec4"],d=[void 0,"int","ivec2","ivec3","ivec4"];function h(e){return e.map(function(e){return"rgba".charAt(e)}).join("")}l.prototype.getGlslType=function(){const e=this._classProperty;let t=s.A.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?u[t]:d[t]},l.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};const g=l},1229:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(267980),o=n(199528);function r(e){this._ellipsoid=new o.A(e.ellipsoid,i.A.ZERO)}Object.defineProperties(r.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const a=r},798732:(e,t,n)=>{"use strict";n.d(t,{A:()=>G});var i=n(267980),o=n(336946),r=n(491446),a=n(605971),s=n(955943),A=n(230259),c=n(367817),l=n(584164),u=n(811203),d=n(65891),h=n(766067),g=n(697422),f=n(566123),p=n(1229),m=n(67521),_=n(980840),I=n(62467),E=n(271101),y=n(960847);function C(e){if(!(0,r.A)(e)||!(0,r.A)(e.tileProvider))throw new a.A("options.tileProvider is required.");if((0,r.A)(e.tileProvider.quadtree))throw new a.A("A QuadtreeTileProvider can only be used with a single QuadtreePrimitive");this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};const t=this._tileProvider.tilingScheme.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new E.A,this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=e.maximumScreenSpaceError??2,this.tileCacheSize=e.tileCacheSize??100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new p.A({ellipsoid:t}),this._tileLoadProgressEvent=new s.A,this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function b(e){const t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}let B;Object.defineProperties(C.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),C.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},C.prototype.forEachLoadedTile=function(e){let t=this._tileReplacementQueue.head;for(;(0,r.A)(t);)t.state!==_.A.START&&e(t),t=t.replacementNext},C.prototype.forEachRenderedTile=function(e){const t=this._tilesToRender;for(let n=0,i=t.length;n<i;++n)e(t[n])},C.prototype.updateHeight=function(e,t){const n=this,i={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){const e=n._addHeightCallbacks,t=e.length;for(let n=0;n<t;++n)if(e[n]===i){e.splice(n,1);break}n._removeHeightCallbacks.push(i),i.callback&&(i.callback=void 0)}};return n._addHeightCallbacks.push(i),i.removeFunc},C.prototype.update=function(e){(0,r.A)(this._tileProvider.update)&&this._tileProvider.update(e)},C.prototype.beginFrame=function(e){e.passes.render&&(this._tilesInvalidated&&(function(e){const t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,b(e);const n=e._levelZeroTiles;if((0,r.A)(n))for(let t=0;t<n.length;++t){const i=n[t].customData,o=i.length;for(let t=0;t<o;++t){const n=i[t];n.level=0,e._addHeightCallbacks.push(n)}n[t].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),b(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},C.prototype.render=function(e){const t=e.passes,n=this._tileProvider;t.render&&(n.beginUpdate(e),function(e,t){const n=e._debug;if(n.suspendLodUpdate)return;let i;e._tilesToRender.length=0;const o=e._tileProvider;if(!(0,r.A)(e._levelZeroTiles)){const t=o.tilingScheme;if(!(0,r.A)(t))return;{const t=o.tilingScheme;e._levelZeroTiles=m.A.createLevelZeroTiles(t);const n=e._levelZeroTiles.length;if(S.length<n)for(S=new Array(n),i=0;i<n;++i)void 0===S[i]&&(S[i]=new D)}}let a;e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;const s=e._levelZeroTiles,A=s.length>1?e._occluders:void 0;B=t.camera.positionCartographic,s.sort(w);const c=e._addHeightCallbacks,u=e._removeHeightCallbacks,d=t.frameNumber;let h;if(c.length>0||u.length>0){for(i=0,h=s.length;i<h;++i)a=s[i],a._updateCustomData(d,c,u);c.length=0,u.length=0}const g=t.camera;e._cameraPositionCartographic=g.positionCartographic;const f=l.A.getTranslation(g.transform,T);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(f,e._cameraReferenceFrameOriginCartographic),i=0,h=s.length;i<h;++i)a=s[i],e._tileReplacementQueue.markTileRendered(a),a.renderable?R(e,a,o,t,A,!1,S[i]):(x(e,e._tileLoadQueueHigh,a,t),++n.tilesWaitingForChildren);e._lastSelectionFrameNumber=d}(this,e),function(e,t){const n=e._tileProvider,i=e._tilesToRender;for(let e=0,o=i.length;e<o;++e){const o=i[e];n.showTileThisFrame(o,t)}}(this,e),n.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&n.updateForPick(e)},C.prototype.endFrame=function(e){e.passes.render&&e.mode!==I.A.MORPHING&&(function(e,t){const n=e._tileLoadQueueHigh,i=e._tileLoadQueueMedium,o=e._tileLoadQueueLow;if(0===n.length&&0===i.length&&0===o.length)return;e._tileReplacementQueue.trimTiles(e.tileCacheSize);const r=(0,A.A)()+e._loadQueueTimeSlice,a=e._tileProvider;let s=P(e,t,a,r,n,!1);s=P(e,t,a,r,i,s),P(e,t,a,r,o,s)}(this,e),function(e,t){if(!(0,r.A)(e.tileProvider.tilingScheme))return;const n=k;n.length=0;const a=e._tileToUpdateHeights,s=(0,A.A)()+e._updateHeightsTimeSlice,c=t.mode,l=t.mapProjection,u=e.tileProvider.tilingScheme.ellipsoid;let d;for(;a.length>0;){const t=a[0];if(!(0,r.A)(t.data)||!(0,r.A)(t.data.mesh)){const i=t._lastSelectionResultFrame===e._lastSelectionFrameNumber?t._lastSelectionResult:y.A.NONE;i!==y.A.RENDERED&&i!==y.A.CULLED_BUT_NEEDED||n.push(t),t.clearPositionCache(),a.shift(),e._lastTileIndex=0;continue}const h=t.customData,g=h.length;let f=!1;for(d=e._lastTileIndex;d<g;++d){const n=h[d],a=t.data.terrainData,g=(0,r.A)(a)&&a.wasCreatedByUpsampling();if(t.level>n.level&&!g){let a;const s=t.getPositionCacheEntry(n.positionCartographic,e.maximumScreenSpaceError);if((0,r.A)(s))a=s;else{if((0,r.A)(n.positionOnEllipsoidSurface)||(n.positionOnEllipsoidSurface=i.A.fromRadians(n.positionCartographic.longitude,n.positionCartographic.latitude,0,u)),c===I.A.SCENE3D){const e=u.geodeticSurfaceNormal(n.positionOnEllipsoidSurface,O.direction),o=u.getSurfaceNormalIntersectionWithZAxis(n.positionOnEllipsoidSurface,11500,O.origin);if(!(0,r.A)(o)){let o=0;(0,r.A)(t.data.tileBoundingRegion)&&(o=t.data.tileBoundingRegion.minimumHeight);const a=Math.min(o,-11500),s=i.A.multiplyByScalar(e,Math.abs(a)+1,U);i.A.subtract(n.positionOnEllipsoidSurface,s,O.origin)}}else o.A.clone(n.positionCartographic,F),F.height=-11500,l.project(F,U),i.A.fromElements(U.z,U.x,U.y,U),i.A.clone(U,O.origin),i.A.clone(i.A.UNIT_X,O.direction);a=t.data.pick(O,c,l,!1,U),(0,r.A)(a)&&t.setPositionCacheEntry(n.positionCartographic,e.maximumScreenSpaceError,a)}if((0,r.A)(a)){if((0,r.A)(n.callback)){const e=u.cartesianToCartographic(a,F);n.callback(e)}n.level=t.level}}if((0,A.A)()>=s){f=!0;break}}if(f){e._lastTileIndex=d;break}e._lastTileIndex=0,a.shift()}for(d=0;d<n.length;d++)a.push(n[d])}(this,e),function(e,t){const n=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;if(n!==e._lastTileLoadQueueLength||e._tilesInvalidated){const i=s.A.prototype.raiseEvent.bind(e._tileLoadProgressEvent,n);t.afterRender.push(()=>(i(),!0)),e._lastTileLoadQueueLength=n}const i=e._debug;i.enableDebugOutput&&!i.suspendLodUpdate&&(i.maxDepth=e._tilesToRender.reduce(function(e,t){return Math.max(e,t.level)},-1),i.tilesRendered=e._tilesToRender.length,i.tilesVisited===i.lastTilesVisited&&i.tilesRendered===i.lastTilesRendered&&i.tilesCulled===i.lastTilesCulled&&i.maxDepth===i.lastMaxDepth&&i.tilesWaitingForChildren===i.lastTilesWaitingForChildren&&i.maxDepthVisited===i.lastMaxDepthVisited||(console.log(`Visited ${i.tilesVisited}, Rendered: ${i.tilesRendered}, Culled: ${i.tilesCulled}, Max Depth Rendered: ${i.maxDepth}, Max Depth Visited: ${i.maxDepthVisited}, Waiting for children: ${i.tilesWaitingForChildren}`),i.lastTilesVisited=i.tilesVisited,i.lastTilesRendered=i.tilesRendered,i.lastTilesCulled=i.tilesCulled,i.lastMaxDepth=i.maxDepth,i.lastTilesWaitingForChildren=i.tilesWaitingForChildren,i.lastMaxDepthVisited=i.maxDepthVisited))}(this,e))},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};const v=new o.A;function w(e,t){let n=g.A.center(e.rectangle,v);const i=n.longitude-B.longitude,o=n.latitude-B.latitude;n=g.A.center(t.rectangle,v);const r=n.longitude-B.longitude,a=n.latitude-B.latitude;return i*i+o*o-(r*r+a*a)}const T=new i.A;let S=[];function x(e,t,n,i){n.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(n._loadPriority=e.tileProvider.computeTileLoadPriority(n,i)),t.push(n))}function D(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function Q(){this.southwest=new D,this.southeast=new D,this.northwest=new D,this.northeast=new D}Q.prototype.combine=function(e){const t=this.southwest,n=this.southeast,i=this.northwest,o=this.northeast;e.allAreRenderable=t.allAreRenderable&&n.allAreRenderable&&i.allAreRenderable&&o.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||n.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||o.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+n.notYetRenderableCount+i.notYetRenderableCount+o.notYetRenderableCount};const N=new Array(31);for(let e=0;e<N.length;++e)N[e]=new Q;function R(e,t,n,i,o,a,s){if(n.computeTileVisibility(t,i,o)!==f.A.NONE)return function(e,t,n,i,o){const a=e._debug;++a.tilesVisited,e._tileReplacementQueue.markTileRendered(n),n._updateCustomData(t.frameNumber),n.level>a.maxDepthVisited&&(a.maxDepthVisited=n.level);const s=function(e,t,n){if(t.mode===I.A.SCENE2D||t.camera.frustum instanceof u.A||t.camera.frustum instanceof d.A)return function(e,t,n){let i=t.camera.frustum;const o=i.offCenterFrustum;(0,r.A)(o)&&(i=o);const a=t.context,s=a.drawingBufferWidth,A=a.drawingBufferHeight;let l=e._tileProvider.getLevelMaximumGeometricError(n.level)/(Math.max(i.top-i.bottom,i.right-i.left)/Math.max(s,A));return t.fog.enabled&&t.mode!==I.A.SCENE2D&&(l-=c.A.fog(n._distance,t.fog.density)*t.fog.sse),l/=t.pixelRatio,l}(e,t,n);const i=e._tileProvider.getLevelMaximumGeometricError(n.level),o=n._distance;let a=i*t.context.drawingBufferHeight/(o*t.camera.frustum.sseDenominator);return t.fog.enabled&&(a-=c.A.fog(o,t.fog.density)*t.fog.sse),a/=t.pixelRatio,a}(e,t,n)<e.maximumScreenSpaceError,A=n.southwestChild,l=n.southeastChild,h=n.northwestChild,g=n.northeastChild,f=e._lastSelectionFrameNumber,p=n._lastSelectionResultFrame===f?n._lastSelectionResult:y.A.NONE,m=e.tileProvider;if(s||i){const a=y.A.originalResult(p)===y.A.RENDERED,A=y.A.originalResult(p)===y.A.CULLED||p===y.A.NONE,c=n.state===_.A.DONE;let l=a||A||c;if(l||(0,r.A)(m.canRenderWithoutLosingDetail)&&(l=m.canRenderWithoutLosingDetail(n)),l)return s&&x(e,e._tileLoadQueueMedium,n,t),M(e,n),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=p===y.A.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=y.A.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));i=!0,s&&x(e,e._tileLoadQueueHigh,n,t)}if(m.canRefine(n)){if(A.upsampledFromParent&&l.upsampledFromParent&&h.upsampledFromParent&&g.upsampledFromParent)return M(e,n),x(e,e._tileLoadQueueMedium,n,t),e._tileReplacementQueue.markTileRendered(A),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(h),e._tileReplacementQueue.markTileRendered(g),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=p===y.A.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=y.A.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=y.A.REFINED;const r=e._tilesToRender.length,s=e._tileLoadQueueLow.length,c=e._tileLoadQueueMedium.length,u=e._tileLoadQueueHigh.length,d=e._tileToUpdateHeights.length;if(function(e,t,n,i,o,r,a,s){const A=r.camera.positionCartographic,c=e._tileProvider,l=e._occluders,u=N[t.level],d=u.southwest,h=u.southeast,g=u.northwest,f=u.northeast;A.longitude<t.rectangle.east?A.latitude<t.rectangle.north?(R(e,t,c,r,l,a,d),R(e,n,c,r,l,a,h),R(e,i,c,r,l,a,g),R(e,o,c,r,l,a,f)):(R(e,i,c,r,l,a,g),R(e,t,c,r,l,a,d),R(e,o,c,r,l,a,f),R(e,n,c,r,l,a,h)):A.latitude<t.rectangle.north?(R(e,n,c,r,l,a,h),R(e,t,c,r,l,a,d),R(e,o,c,r,l,a,f),R(e,i,c,r,l,a,g)):(R(e,o,c,r,l,a,f),R(e,i,c,r,l,a,g),R(e,n,c,r,l,a,h),R(e,t,c,r,l,a,d)),u.combine(s)}(e,A,l,h,g,t,i,o),r!==e._tilesToRender.length){const i=o.allAreRenderable,A=o.anyWereRenderedLastFrame,l=o.notYetRenderableCount;let h=!1;if(!i&&!A){const i=e._tilesToRender;for(let e=r;e<i.length;++e){let t=i[e];for(;void 0!==t&&t._lastSelectionResult!==y.A.KICKED&&t!==n;)t._lastSelectionResult=y.A.kick(t._lastSelectionResult),t=t.parent}e._tilesToRender.length=r,e._tileToUpdateHeights.length=d,M(e,n),n._lastSelectionResult=y.A.RENDERED;const A=p===y.A.RENDERED;!A&&l>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=s,e._tileLoadQueueMedium.length=c,e._tileLoadQueueHigh.length=u,x(e,e._tileLoadQueueMedium,n,t),o.notYetRenderableCount=n.renderable?0:1,h=!0),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=A,A||e._tileToUpdateHeights.push(n),++a.tilesWaitingForChildren}e.preloadAncestors&&!h&&x(e,e._tileLoadQueueLow,n,t)}return}n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=y.A.RENDERED,M(e,n),x(e,e._tileLoadQueueHigh,n,t),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=p===y.A.RENDERED,o.notYetRenderableCount=n.renderable?0:1}(e,i,t,a,s);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),s.allAreRenderable=!0,s.anyWereRenderedLastFrame=!1,s.notYetRenderableCount=0,function(e,t){const n=t.rectangle;return(0,r.A)(e._cameraPositionCartographic)&&g.A.contains(n,e._cameraPositionCartographic)||(0,r.A)(e._cameraReferenceFrameOriginCartographic)&&g.A.contains(n,e._cameraReferenceFrameOriginCartographic)}(e,t)){(0,r.A)(t.data)&&(0,r.A)(t.data.vertexArray)||x(e,e._tileLoadQueueMedium,t,i);const n=e._lastSelectionFrameNumber,o=t._lastSelectionResultFrame===n?t._lastSelectionResult:y.A.NONE;o!==y.A.CULLED_BUT_NEEDED&&o!==y.A.RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=y.A.CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(x(e,e._tileLoadQueueLow,t,i),t._lastSelectionResult=y.A.CULLED):t._lastSelectionResult=y.A.CULLED;t._lastSelectionResultFrame=i.frameNumber}function M(e,t){e._tilesToRender.push(t)}function L(e,t){return e._loadPriority-t._loadPriority}function P(e,t,n,i,o,r){void 0!==n.computeTileLoadPriority&&o.sort(L);for(let a=0,s=o.length;a<s&&((0,A.A)()<i||!r);++a){const i=o[a];e._tileReplacementQueue.markTileRendered(i),n.loadTile(t,i),r=!0}return r}const O=new h.A,F=new o.A,U=new i.A,k=[],G=C},67521:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(697422),a=n(980840),s=n(960847);class A{constructor(e){this.maxSize=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}clear(){this.cache.clear()}}function c(e){if(!(0,i.A)(e))throw new o.A("options is required.");if(!(0,i.A)(e.x))throw new o.A("options.x is required.");if(!(0,i.A)(e.y))throw new o.A("options.y is required.");if(e.x<0||e.y<0)throw new o.A("options.x and options.y must be greater than or equal to zero.");if(!(0,i.A)(e.level))throw new o.A("options.level is required and must be greater than or equal to zero.");if(!(0,i.A)(e.tilingScheme))throw new o.A("options.tilingScheme is required.");this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=s.A.NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this._positionCache=new A(1e3),this.state=a.A.START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function l(e){(0,i.A)(e)&&e.freeResources()}c.createLevelZeroTiles=function(e){if(!(0,i.A)(e))throw new o.A("tilingScheme is required.");const t=e.getNumberOfXTilesAtLevel(0),n=e.getNumberOfYTilesAtLevel(0),r=new Array(t*n);let a=0;for(let i=0;i<n;++i)for(let n=0;n<t;++n)r[a++]=new c({tilingScheme:e,x:n,y:i,level:0});return r},c.prototype._getCacheKey=function(e,t){return function(e,t,n,i){const o=n.width/256*i,r=Math.floor(e/o)*o,a=Math.floor(t/o)*o;return`${r.toFixed(10)},${a.toFixed(10)}`}(e.longitude,e.latitude,this._rectangle,t)},c.prototype.getPositionCacheEntry=function(e,t){return this._positionCache.get(this._getCacheKey(e,t))},c.prototype.setPositionCacheEntry=function(e,t,n){this._positionCache.set(this._getCacheKey(e,t),n)},c.prototype.clearPositionCache=function(){this._positionCache.size>0&&this._positionCache.clear()},c.prototype._updateCustomData=function(e,t,n){let o,a,s,A=this.customData;if((0,i.A)(t)&&(0,i.A)(n)){for(A=A.filter(function(e){return-1===n.indexOf(e)}),this._customData=A,s=this._rectangle,o=0;o<t.length;++o)a=t[o],r.A.contains(s,a.positionCartographic)&&A.push(a);this._frameUpdated=e}else{const e=this._parent;if((0,i.A)(e)&&this._frameUpdated!==e._frameUpdated){A.length=0,s=this._rectangle;const t=e.customData;for(o=0;o<t.length;++o)a=t[o],r.A.contains(s,a.positionCartographic)&&A.push(a);this._frameUpdated=e._frameUpdated}}},Object.defineProperties(c.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return(0,i.A)(this._southwestChild)||(this._southwestChild=new c({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return(0,i.A)(this._southeastChild)||(this._southeastChild=new c({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return(0,i.A)(this._northwestChild)||(this._northwestChild=new c({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return(0,i.A)(this._northeastChild)||(this._northeastChild=new c({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<a.A.DONE}},eligibleForUnloading:{get:function(){let e=!0;return(0,i.A)(this.data)&&(e=this.data.eligibleForUnloading,(0,i.A)(e)||(e=!0)),e}}}),c.prototype.findLevelZeroTile=function(e,t,n){const i=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=i:t>=i&&(t-=i),!(n<0||n>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter(function(e){return e.x===t&&e.y===n})[0]},c.prototype.findTileToWest=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;const n=t.findTileToWest(e);return void 0!==n?t.southwestChild===this?n.southeastChild:n.northeastChild:void 0},c.prototype.findTileToEast=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;const n=t.findTileToEast(e);return void 0!==n?t.southeastChild===this?n.southwestChild:n.northwestChild:void 0},c.prototype.findTileToSouth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;const n=t.findTileToSouth(e);return void 0!==n?t.southwestChild===this?n.northwestChild:n.northeastChild:void 0},c.prototype.findTileToNorth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;const n=t.findTileToNorth(e);return void 0!==n?t.northwestChild===this?n.southwestChild:n.southeastChild:void 0},c.prototype.freeResources=function(){this.clearPositionCache(),this.state=a.A.START,this.renderable=!1,this.upsampledFromParent=!1,(0,i.A)(this.data)&&(0,i.A)(this.data.freeResources)&&this.data.freeResources(),l(this._southwestChild),this._southwestChild=void 0,l(this._southeastChild),this._southeastChild=void 0,l(this._northwestChild),this._northwestChild=void 0,l(this._northeastChild),this._northeastChild=void 0};const u=c},980840:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({START:0,LOADING:1,DONE:2,FAILED:3})},872182:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(369031),o=n(915325),r=n(491446),a=n(605971),s=n(452663),A=n(494820),c=n(201783),l=n(395989),u=n(385618),d=n(560710),h=n(952575),g=n(946240),f=n(179006),p=n(729295),m=n(147795),_=n(366165);function I(){}function E(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}I.cacheEntries={},I.statistics=new _.A,I.get=function(e){i.A.typeOf.string("cacheKey",e);const t=I.cacheEntries[e];if((0,r.A)(t))return++t.referenceCount,t.resourceLoader},I.add=function(e){i.A.typeOf.object("resourceLoader",e);const t=e.cacheKey;if(i.A.typeOf.string("options.resourceLoader.cacheKey",t),(0,r.A)(I.cacheEntries[t]))throw new a.A(`Resource with this cacheKey is already in the cache: ${t}`);return I.cacheEntries[t]=new E(e),e},I.unload=function(e){i.A.typeOf.object("resourceLoader",e);const t=e.cacheKey,n=I.cacheEntries[t];if(!(0,r.A)(n))throw new a.A(`Resource is not in the cache: ${t}`);--n.referenceCount,0===n.referenceCount&&(I.statistics.removeLoader(e),e.destroy(),delete I.cacheEntries[t])},I.getSchemaLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{schema:t,resource:n}=e;if((0,r.A)(t)===(0,r.A)(n))throw new a.A("One of options.schema and options.resource must be defined.");const i=m.A.getSchemaCacheKey({schema:t,resource:n});let s=I.get(i);return(0,r.A)(s)?s:(s=new p.A({schema:t,resource:n,cacheKey:i}),I.add(s))},I.getEmbeddedBufferLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{parentResource:t,bufferId:n,typedArray:a}=e;i.A.typeOf.object("options.parentResource",t),i.A.typeOf.number("options.bufferId",n);const A=m.A.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n});let c=I.get(A);return(0,r.A)(c)?c:(i.A.typeOf.object("options.typedArray",a),c=new s.A({typedArray:a,cacheKey:A}),I.add(c))},I.getExternalBufferLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{resource:t}=e;i.A.typeOf.object("options.resource",t);const n=m.A.getExternalBufferCacheKey({resource:t});let a=I.get(n);return(0,r.A)(a)?a:(a=new s.A({resource:t,cacheKey:n}),I.add(a))},I.getGltfJsonLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltfResource:t,baseResource:n,typedArray:a,gltfJson:s}=e;i.A.typeOf.object("options.gltfResource",t),i.A.typeOf.object("options.baseResource",n);const A=m.A.getGltfCacheKey({gltfResource:t});let c=I.get(A);return(0,r.A)(c)?c:(c=new d.A({resourceCache:I,gltfResource:t,baseResource:n,typedArray:a,gltfJson:s,cacheKey:A}),I.add(c))},I.getBufferViewLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,bufferViewId:n,gltfResource:a,baseResource:s}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.bufferViewId",n),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",s);const c=m.A.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:a,baseResource:s});let l=I.get(c);return(0,r.A)(l)?l:(l=new A.A({resourceCache:I,gltf:t,bufferViewId:n,gltfResource:a,baseResource:s,cacheKey:c}),I.add(l))},I.getDracoLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,primitive:n,draco:a,gltfResource:s,baseResource:A}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.primitive",n),i.A.typeOf.object("options.draco",a),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A);const l=m.A.getDracoCacheKey({gltf:t,draco:a,gltfResource:s,baseResource:A});let u=I.get(l);return(0,r.A)(u)?u:(u=new c.A({resourceCache:I,gltf:t,primitive:n,draco:a,gltfResource:s,baseResource:A,cacheKey:l}),I.add(u))},I.getSpzLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,primitive:n,spz:a,gltfResource:s,baseResource:A}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.primitive",n),i.A.typeOf.object("options.spz",a),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A);const c=m.A.getSpzCacheKey({gltf:t,primitive:n,gltfResource:s,baseResource:A});let l=I.get(c);return(0,r.A)(l)?l:(l=new f.A({resourceCache:I,gltf:t,primitive:n,spz:a,gltfResource:s,baseResource:A,cacheKey:c}),I.add(l))},I.getVertexBufferLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,gltfResource:n,baseResource:s,frameState:A,bufferViewId:c,primitive:l,draco:u,spz:d,attributeSemantic:h,accessorId:f,asynchronous:p=!0,dequantize:_=!1,loadBuffer:E=!1,loadTypedArray:y=!1}=e;if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.gltfResource",n),i.A.typeOf.object("options.baseResource",s),i.A.typeOf.object("options.frameState",A),!E&&!y)throw new a.A("At least one of loadBuffer and loadTypedArray must be true.");const C=(0,r.A)(c),b=(0,r.A)(l),B=function(e,t){return(0,r.A)(e)&&(0,r.A)(e.attributes)&&(0,r.A)(e.attributes[t])}(u,h),v=(0,r.A)(h),w=(0,r.A)(f);if(C===(B!==(0,r.A)(d)))throw new a.A("One of options.bufferViewId, options.draco, or options.spz must be defined.");if(B&&!v)throw new a.A("When options.draco is defined options.attributeSemantic must also be defined.");if(B&&!w)throw new a.A("When options.draco is defined options.hasAccessorId must also be defined.");if(B&&!b)throw new a.A("When options.draco is defined options.primitive must also be defined.");B&&(i.A.typeOf.object("options.draco",u),i.A.typeOf.string("options.attributeSemantic",h),i.A.typeOf.number("options.accessorId",f));const T=m.A.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:s,frameState:A,bufferViewId:c,draco:u,spz:d,attributeSemantic:h,dequantize:_,loadBuffer:E,loadTypedArray:y});let S=I.get(T);return(0,r.A)(S)?S:(S=new g.A({resourceCache:I,gltf:t,gltfResource:n,baseResource:s,bufferViewId:c,primitive:l,draco:u,spz:d,attributeSemantic:h,accessorId:f,cacheKey:T,asynchronous:p,dequantize:_,loadBuffer:E,loadTypedArray:y}),I.add(S))},I.getIndexBufferLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,accessorId:n,gltfResource:s,baseResource:A,frameState:c,primitive:l,draco:d,asynchronous:h=!0,loadBuffer:g=!1,loadTypedArray:f=!1}=e;if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.accessorId",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A),i.A.typeOf.object("options.frameState",c),!g&&!f)throw new a.A("At least one of loadBuffer and loadTypedArray must be true.");const p=m.A.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:s,baseResource:A,frameState:c,draco:d,loadBuffer:g,loadTypedArray:f});let _=I.get(p);return(0,r.A)(_)?_:(_=new u.A({resourceCache:I,gltf:t,accessorId:n,gltfResource:s,baseResource:A,primitive:l,draco:d,cacheKey:p,asynchronous:h,loadBuffer:g,loadTypedArray:f}),I.add(_))},I.getImageLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,imageId:n,gltfResource:a,baseResource:s}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.imageId",n),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",s);const A=m.A.getImageCacheKey({gltf:t,imageId:n,gltfResource:a,baseResource:s});let c=I.get(A);return(0,r.A)(c)?c:(c=new l.A({resourceCache:I,gltf:t,imageId:n,gltfResource:a,baseResource:s,cacheKey:A}),I.add(c))},I.getTextureLoader=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,textureInfo:n,gltfResource:a,baseResource:s,supportedImageFormats:A,frameState:c,asynchronous:l=!0}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.textureInfo",n),i.A.typeOf.object("options.gltfResource",a),i.A.typeOf.object("options.baseResource",s),i.A.typeOf.object("options.supportedImageFormats",A),i.A.typeOf.object("options.frameState",c);const u=m.A.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:a,baseResource:s,supportedImageFormats:A,frameState:c});let d=I.get(u);return(0,r.A)(d)?d:(d=new h.A({resourceCache:I,gltf:t,textureInfo:n,gltfResource:a,baseResource:s,supportedImageFormats:A,cacheKey:u,asynchronous:l}),I.add(d))},I.clearForSpecs=function(){const e=[g.A,u.A,c.A,h.A,l.A,A.A,s.A,p.A,d.A];let t;const n=I.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort(function(t,n){return e.indexOf(t.resourceLoader.constructor)-e.indexOf(n.resourceLoader.constructor)});const o=i.length;for(let e=0;e<o;++e){const o=i[e];t=o.resourceLoader.cacheKey,(0,r.A)(n[t])&&(o.resourceLoader.destroy(),delete n[t])}I.statistics.clear()};const y=I},147795:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(369031),o=n(915325),r=n(491446),a=n(605971),s=n(712066),A=n(782556),c=n(800859);const l={};function u(e){return(0,s.A)(e.url)}function d(e){let{byteOffset:t,byteLength:n}=e;if((0,c.A)(e,"EXT_meshopt_compression")){const i=e.extensions.EXT_meshopt_compression;t=i.byteOffset??0,n=i.byteLength}return`${t}-${t+n}`}function h(e,t){return`${u(e)}-buffer-id-${t}`}function g(e,t,n,i){return(0,r.A)(e.uri)?u(i.getDerivedResource({url:e.uri})):h(n,t)}function f(e,t,n,i){const o=t.bufferView,r=e.bufferViews[o],a=r.buffer;return`${g(e.buffers[a],a,n,i)}-range-${d(r)}`}function p(e,t,n,i){const o=e.bufferViews[0],r=o.buffer;return`${g(e.buffers[r],r,n,i)}-range-${d(o)}`}function m(e,t,n,i){const o=e.images[t],a=o.bufferView,s=o.uri;if((0,r.A)(s))return u(i.getDerivedResource({url:s}));const A=e.bufferViews[a],c=A.buffer;return`${g(e.buffers[c],c,n,i)}-range-${d(A)}`}l.getSchemaCacheKey=function(e){const{schema:t,resource:n}=e;if((0,r.A)(t)===(0,r.A)(n))throw new a.A("One of options.schema and options.resource must be defined.");return(0,r.A)(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${u(n)}`},l.getExternalBufferCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{resource:t}=e;return i.A.typeOf.object("options.resource",t),`external-buffer:${u(t)}`},l.getEmbeddedBufferCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{parentResource:t,bufferId:n}=e;return i.A.typeOf.object("options.parentResource",t),i.A.typeOf.number("options.bufferId",n),`embedded-buffer:${h(t,n)}`},l.getGltfCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltfResource:t}=e;return i.A.typeOf.object("options.gltfResource",t),`gltf:${u(t)}`},l.getBufferViewCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,bufferViewId:n,gltfResource:r,baseResource:a}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.bufferViewId",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",a);const s=t.bufferViews[n];let A=s.buffer;const l=t.buffers[A];return(0,c.A)(s,"EXT_meshopt_compression")&&(A=s.extensions.EXT_meshopt_compression.buffer),`buffer-view:${g(l,A,r,a)}-range-${d(s)}`},l.getDracoCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,draco:n,gltfResource:r,baseResource:a}=e;return i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.draco",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",a),`draco:${f(t,n,r,a)}`},l.getSpzCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,primitive:n,gltfResource:r,baseResource:a}=e;return i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.primitive",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",a),`spz:${p(t,0,r,a)}`},l.getVertexBufferCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,gltfResource:n,baseResource:s,frameState:A,bufferViewId:c,draco:l,spz:u,attributeSemantic:h,dequantize:m=!1,loadBuffer:_=!1,loadTypedArray:I=!1}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.gltfResource",n),i.A.typeOf.object("options.baseResource",s),i.A.typeOf.object("options.frameState",A);const E=(0,r.A)(c),y=function(e,t){return(0,r.A)(e)&&(0,r.A)(e.attributes)&&(0,r.A)(e.attributes[t])}(l,h),C=(0,r.A)(h);if(E===(y!==(0,r.A)(u)))throw new a.A("One of options.bufferViewId and options.draco must be defined.");if(y&&!C)throw new a.A("When options.draco is defined options.attributeSemantic must also be defined.");if(y&&(i.A.typeOf.object("options.draco",l),i.A.typeOf.string("options.attributeSemantic",h)),!_&&!I)throw new a.A("At least one of loadBuffer and loadTypedArray must be true.");let b="";if(m&&(b+="-dequantize"),_&&(b+="-buffer",b+=`-context-${A.context.id}`),I&&(b+="-typed-array"),(0,r.A)(l))return`vertex-buffer:${f(t,l,n,s)}-draco-${h}${b}`;if(u)return`vertex-buffer:${p(t,0,n,s)}-spz-${h}${b}`;const B=t.bufferViews[c],v=B.buffer;return`vertex-buffer:${g(t.buffers[v],v,n,s)}-range-${d(B)}${b}`},l.getIndexBufferCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,accessorId:n,gltfResource:s,baseResource:A,frameState:c,draco:l,loadBuffer:u=!1,loadTypedArray:d=!1}=e;if(i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.accessorId",n),i.A.typeOf.object("options.gltfResource",s),i.A.typeOf.object("options.baseResource",A),i.A.typeOf.object("options.frameState",c),!u&&!d)throw new a.A("At least one of loadBuffer and loadTypedArray must be true.");let h="";if(u&&(h+="-buffer",h+=`-context-${c.context.id}`),d&&(h+="-typed-array"),(0,r.A)(l))return`index-buffer:${f(t,l,s,A)}-draco${h}`;const p=t.accessors[n],m=p.bufferView,_=t.bufferViews[m],I=_.buffer,E=g(t.buffers[I],I,s,A),y=function(e,t){const n=t.byteOffset+e.byteOffset,{componentType:i,type:o,count:r}=e;return`${n}-${i}-${o}-${r}`}(p,_);return`index-buffer:${E}-accessor-${y}${h}`},l.getImageCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,imageId:n,gltfResource:r,baseResource:a}=e;return i.A.typeOf.object("options.gltf",t),i.A.typeOf.number("options.imageId",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",a),`image:${m(t,n,r,a)}`},l.getTextureCacheKey=function(e){e=e??o.A.EMPTY_OBJECT;const{gltf:t,textureInfo:n,gltfResource:r,baseResource:a,supportedImageFormats:s,frameState:c}=e;i.A.typeOf.object("options.gltf",t),i.A.typeOf.object("options.textureInfo",n),i.A.typeOf.object("options.gltfResource",r),i.A.typeOf.object("options.baseResource",a),i.A.typeOf.object("options.supportedImageFormats",s),i.A.typeOf.object("options.frameState",c);const l=n.index,u=m(t,A.A.getImageIdFromTexture({gltf:t,textureId:l,supportedImageFormats:s}),r,a),d=function(e,t){const n=A.A.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}(t,n);return`texture:${u}-sampler-${d}-context-${c.context.id}`};const _=l},366165:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(369031),o=n(491446);function r(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}r.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}},r.prototype.addGeometryLoader=function(e){i.A.typeOf.object("loader",e);const t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;const n=e.buffer,r=e.typedArray;let a=0;(0,o.A)(n)&&(a+=n.sizeInBytes),(0,o.A)(r)&&(a+=r.byteLength),this.geometryByteLength+=a,this._geometrySizes[t]=a},r.prototype.addTextureLoader=function(e){i.A.typeOf.object("loader",e);const t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;const n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n},r.prototype.removeLoader=function(e){i.A.typeOf.object("loader",e);const t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],(0,o.A)(n)&&(this.geometryByteLength-=n);const r=this._textureSizes[t];delete this._textureSizes[t],(0,o.A)(r)&&(this.texturesByteLength-=r)};const a=r},569445:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(369031),o=n(491446),r=n(677354),a=n(605971),s=n(123245);function A(){}Object.defineProperties(A.prototype,{cacheKey:{get:function(){a.A.throwInstantiationError()}}}),A.prototype.load=function(){a.A.throwInstantiationError()},A.prototype.unload=function(){},A.prototype.process=function(e){return!1},A.prototype.getError=function(e,t){i.A.typeOf.string("errorMessage",e),(0,o.A)(t)&&(0,o.A)(t.message)&&(e+=`\n${t.message}`);const n=new s.A(e);return(0,o.A)(t)&&(n.stack=`Original stack:\n${t.stack}\nHandler stack:\n${n.stack}`),n},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this.unload(),(0,r.A)(this)};const c=A},48660:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({UNLOADED:0,LOADING:1,LOADED:2,PROCESSING:3,READY:4,FAILED:5})},464088:(e,t,n)=>{"use strict";n.d(t,{A:()=>Rt});var i=n(647934),o=n(660662),r=n(554630),a=n(267980),s=n(336946),A=n(369031),c=n(376758),l=n(41476),u=n(433235),d=n(673874),h=n(400793),g=n(915325),f=n(491446),p=n(677354),m=n(605971),_=n(610750),I=n(87762),E=n(955943),y=n(653577),C=n(75200),b=n(34233),B=n(63316),v=n(647326),w=n(591978),T=n(367817),S=n(584164),x=n(108303),D=n(19128),Q=n(811203),N=n(65891),R=n(666775),M=n(65783),L=n(697422),P=n(866569),O=n(971724),F=n(543622),U=n(769493),k=n(494156),G=n(681480),H=n(430332),V=n(760866),z=n(40118),j=n(153662),Y=n(691302),q=n(635577),W=n(581010),J=n(953677),K=n(937069),X=n(199744),Z=n(626355),$=n(384292),ee=n(77191),te=n(226381),ne=n(5244),ie=n(346400),oe=n(738375),re=n(819598),ae=n(647474),se=n(77879),Ae=n(467302),ce=n(612123),le=n(878471),ue=n(201733),de=n(842153),he=n(493721),ge=n(62467),fe=n(78173),pe=n(619872),me=n(373749),_e=n(681750),Ie=n(160619),Ee=n(126797),ye=n(938987),Ce=n(205672),be=n(380983),Be=n(584247),ve=n(342767),we=n(809418),Te=n(879152),Se=n(450339),xe=n(772796),De=n(842623),Qe=n(201052);const Ne=function(e){return function(){e.frameState.afterRender.push(function(){e.requestRender()})}};function Re(e){const t=(e=e??g.A.EMPTY_OBJECT).canvas;let n=e.creditContainer,o=e.creditViewport;if(!(0,f.A)(t))throw new m.A("options and options.canvas are required.");const r=e.contextOptions instanceof Ie.A;if(r)this._context=e.contextOptions.createSceneContext(t);else{const n=(0,c.A)(e.contextOptions);this._context=new G.A(t,n)}const a=this._context,s=(0,f.A)(n);s||(n=document.createElement("div"),n.style.position="absolute",n.style.bottom="0",n.style["text-shadow"]="0 0 2px #000000",n.style.color="#ffffff",n.style["font-size"]="10px",n.style["padding-right"]="5px",t.parentNode.appendChild(n)),(0,f.A)(o)||(o=t.parentNode),this._id=(0,d.A)(),this._jobScheduler=new ae.A,this._frameState=new ie.A(a,new K.A(n,"",o),this._jobScheduler),this._frameState.scene3DOnly=e.scene3DOnly??!1,this._removeCreditContainer=!s,this._creditContainer=n,this._canvas=t,this._computeEngine=new k.A(a),this._ellipsoid=e.ellipsoid??_.A.default,this._globe=void 0,this._globeTranslucencyState=new oe.A,this._primitives=new he.A({countReferences:r}),this._groundPrimitives=new he.A({countReferences:r}),this._globeHeight=void 0,this._globeHeightDirty=!0,this._cameraUnderground=!1,this._removeUpdateHeightCallback=void 0,this._logDepthBuffer=Re.defaultLogDepthBuffer&&a.fragmentDepth,this._logDepthBufferDirty=!0,this._tweens=new Be.A,this._shaderFrameCount=0,this._sunPostProcess=void 0,this._computeCommandList=[],this._overlayCommandList=[],this._useOIT=e.orderIndependentTranslucency??!0,this._executeOITFunction=void 0,this._depthPlane=new Z.A(e.depthPlaneEllipsoidOffset),this._clearColorCommand=new U.A({color:new l.A,stencil:0,owner:this}),this._depthClearCommand=new U.A({depth:1,owner:this}),this._stencilClearCommand=new U.A({stencil:0}),this._classificationStencilClearCommand=new U.A({stencil:0,renderState:z.A.fromCache({stencilMask:ye.A.CLASSIFICATION_MASK})}),this._depthOnlyRenderStateCache={},this._transitioner=new pe.A(this),this._preUpdate=new E.A,this._postUpdate=new E.A,this._renderError=new E.A,this._preRender=new E.A,this._postRender=new E.A,this._minimumDisableDepthTestDistance=0,this._debugInspector=new we.A,this._msaaSamples=e.msaaSamples??4,this.rethrowRenderErrors=!1,this.completeMorphOnUserInput=!0,this.morphStart=new E.A,this.morphComplete=new E.A,this.skyBox=void 0,this.skyAtmosphere=void 0,this.sun=void 0,this.sunBloom=!0,this._sunBloom=void 0,this.moon=void 0,this.backgroundColor=l.A.clone(l.A.BLACK),this._mode=ge.A.SCENE3D,this._mapProjection=(0,f.A)(e.mapProjection)?e.mapProjection:new y.A(this._ellipsoid),this.morphTime=1,this.farToNearRatio=1e3,this.logarithmicDepthFarToNearRatio=1e9,this.nearToFarDistance2D=175e4,this.verticalExaggeration=1,this.verticalExaggerationRelativeHeight=0,this.debugCommandFilter=void 0,this.debugShowCommands=!1,this.debugShowFrustums=!1,this.debugShowFramesPerSecond=!1,this.debugShowDepthFrustum=1,this.debugShowFrustumPlanes=!1,this._debugShowFrustumPlanes=!1,this._debugFrustumPlanes=void 0,this.useDepthPicking=!0,this.pickTranslucentDepth=!1,this.cameraEventWaitTime=500,this.atmosphere=new j.A,this.fog=new ne.A,this.fog.enabled=_.A.WGS84.equals(this._ellipsoid),_.A.WGS84.equals(this._ellipsoid)||(q.A.DEFAULT_VIEW_RECTANGLE=L.A.fromDegrees(-45,-45,45,45)),this._shadowMapCamera=new q.A(this),this.shadowMap=new _e.A({context:a,lightCamera:this._shadowMapCamera,enabled:e.shadows??!1}),this.invertClassification=!1,this.invertClassificationColor=l.A.clone(l.A.WHITE),this._actualInvertClassificationColor=l.A.clone(this._invertClassificationColor),this._invertClassification=new re.A,this.focalLength=void 0,this.eyeSeparation=void 0,this.postProcessStages=new ue.A,this._brdfLutGenerator=new Y.A,this._performanceDisplay=void 0,this._debugVolume=void 0,this._screenSpaceCameraController=new me.A(this),this._cameraUnderground=!1,this._mapMode2D=e.mapMode2D??se.A.INFINITE_SCROLL,this._environmentState={skyBoxCommand:void 0,skyAtmosphereCommand:void 0,sunDrawCommand:void 0,sunComputeCommand:void 0,moonCommand:void 0,isSunVisible:!1,isMoonVisible:!1,isReadyForAtmosphere:!1,isSkyAtmosphereVisible:!1,clearGlobeDepth:!1,useDepthPlane:!1,renderTranslucentDepthForPick:!1,originalFramebuffer:void 0,useGlobeDepthFramebuffer:!1,useOIT:!1,useInvertClassification:!1,usePostProcess:!1,usePostProcessSelected:!1,useWebVR:!1},this._useWebVR=!1,this._cameraVR=void 0,this._aspectRatioVR=void 0,this.requestRenderMode=e.requestRenderMode??!1,this._renderRequested=!0,this.maximumRenderTimeChange=e.maximumRenderTimeChange??0,this._lastRenderTime=void 0,this._frameRateMonitor=void 0,this._removeRequestListenerCallback=P.A.requestCompletedEvent.addEventListener(Ne(this)),this._removeTaskProcessorListenerCallback=O.A.taskCompletedEvent.addEventListener(Ne(this)),this._removeGlobeCallbacks=[],this._removeTerrainProviderReadyListener=void 0;const A=new i.A(0,0,a.drawingBufferWidth,a.drawingBufferHeight),u=new q.A(this);this._logDepthBuffer&&(u.frustum.near=.1,u.frustum.far=1e10),this.preloadFlightCamera=new q.A(this),this.preloadFlightCullingVolume=void 0,this._picking=new le.A(this),this._defaultView=new ve.A(this,u,A),this._view=this._defaultView,this._hdr=void 0,this._hdrDirty=void 0,this.highDynamicRange=!1,this.gamma=2.2,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this._specularEnvironmentCubeMap=void 0,this.light=new Ce.A,Ge(this,0,w.A.now()),this.updateFrameState(),this.initializeFrame()}function Me(e,t,n){const i=e._frameState,o=e._context,r=e._view.oit,{lightShadowMaps:a,lightShadowsEnabled:s}=i.shadowState;let A=t.derivedCommands;(0,f.A)(t.pickId)&&(A.picking=$.A.createPickDerivedCommand(e,t,o,A.picking)),i.pickingMetadata&&t.pickMetadataAllowed&&(t.pickedMetadataInfo=i.pickedMetadataInfo,(0,f.A)(t.pickedMetadataInfo)&&(A.pickingMetadata=$.A.createPickMetadataDerivedCommand(e,t,o,A.pickingMetadata))),t.pickOnly||(A.depth=$.A.createDepthOnlyDerivedCommand(e,t,o,A.depth)),A.originalCommand=t,e._hdr&&(A.hdr=$.A.createHdrCommand(t,o,A.hdr),A=(t=A.hdr.command).derivedCommands),s&&t.receiveShadows&&(A.shadows=_e.A.createReceiveDerivedCommand(a,t,n,o,A.shadows)),t.pass===V.A.TRANSLUCENT&&(0,f.A)(r)&&r.isSupported()&&(s&&t.receiveShadows?(A.oit=(0,f.A)(A.oit)?A.oit:{},A.oit.shadows=r.createDerivedCommands(A.shadows.receiveCommand,o,A.oit.shadows)):A.oit=r.createDerivedCommands(t,o,A.oit))}Re.defaultLogDepthBuffer=!0,Object.defineProperties(Re.prototype,{canvas:{get:function(){return this._canvas}},drawingBufferHeight:{get:function(){return this._context.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._context.drawingBufferWidth}},maximumAliasedLineWidth:{get:function(){return H.A.maximumAliasedLineWidth}},maximumCubeMapSize:{get:function(){return H.A.maximumCubeMapSize}},pickPositionSupported:{get:function(){return this._context.depthTexture}},sampleHeightSupported:{get:function(){return this._context.depthTexture}},clampToHeightSupported:{get:function(){return this._context.depthTexture}},invertClassificationSupported:{get:function(){return this._context.depthTexture}},specularEnvironmentMapsSupported:{get:function(){return Ee.A.isSupported(this._context)}},ellipsoid:{get:function(){return this._ellipsoid}},globe:{get:function(){return this._globe},set:function(e){this._globe=this._globe&&this._globe.destroy(),this._globe=e,function(e,t){for(let t=0;t<e._removeGlobeCallbacks.length;++t)e._removeGlobeCallbacks[t]();e._removeGlobeCallbacks.length=0;const n=[];(0,f.A)(t)&&(n.push(t.imageryLayersUpdatedEvent.addEventListener(Ne(e))),n.push(t.terrainProviderChanged.addEventListener(Ne(e)))),e._removeGlobeCallbacks=n}(this,e)}},primitives:{get:function(){return this._primitives}},groundPrimitives:{get:function(){return this._groundPrimitives}},camera:{get:function(){return this._view.camera},set:function(e){this._view.camera=e}},view:{get:function(){return this._view},set:function(e){this._view=e}},defaultView:{get:function(){return this._defaultView}},picking:{get:function(){return this._picking}},screenSpaceCameraController:{get:function(){return this._screenSpaceCameraController}},mapProjection:{get:function(){return this._mapProjection}},jobScheduler:{get:function(){return this._jobScheduler}},frameState:{get:function(){return this._frameState}},environmentState:{get:function(){return this._environmentState}},tweens:{get:function(){return this._tweens}},imageryLayers:{get:function(){if((0,f.A)(this.globe))return this.globe.imageryLayers}},terrainProvider:{get:function(){if((0,f.A)(this.globe))return this.globe.terrainProvider},set:function(e){this._removeTerrainProviderReadyListener=this._removeTerrainProviderReadyListener&&this._removeTerrainProviderReadyListener(),(0,f.A)(this.globe)&&(this.globe.terrainProvider=e)}},terrainProviderChanged:{get:function(){if((0,f.A)(this.globe))return this.globe.terrainProviderChanged}},preUpdate:{get:function(){return this._preUpdate}},postUpdate:{get:function(){return this._postUpdate}},renderError:{get:function(){return this._renderError}},preRender:{get:function(){return this._preRender}},postRender:{get:function(){return this._postRender}},lastRenderTime:{get:function(){return this._lastRenderTime}},context:{get:function(){return this._context}},debugFrustumStatistics:{get:function(){return this._view.debugFrustumStatistics}},scene3DOnly:{get:function(){return this._frameState.scene3DOnly}},orderIndependentTranslucency:{get:function(){return this._useOIT}},id:{get:function(){return this._id}},mode:{get:function(){return this._mode},set:function(e){if(this.scene3DOnly&&e!==ge.A.SCENE3D)throw new m.A("Only SceneMode.SCENE3D is valid when scene3DOnly is true.");if(e===ge.A.SCENE2D)this.morphTo2D(0);else if(e===ge.A.SCENE3D)this.morphTo3D(0);else{if(e!==ge.A.COLUMBUS_VIEW)throw new m.A("value must be a valid SceneMode enumeration.");this.morphToColumbusView(0)}this._mode=e}},frustumCommandsList:{get:function(){return this._view.frustumCommandsList}},numberOfFrustums:{get:function(){return this._view.frustumCommandsList.length}},useWebVR:{get:function(){return this._useWebVR},set:function(e){if(this.camera.frustum instanceof Q.A)throw new m.A("VR is unsupported with an orthographic projection.");this._useWebVR=e,this._useWebVR?(this._frameState.creditDisplay.container.style.visibility="hidden",this._cameraVR=new q.A(this),(0,f.A)(this._deviceOrientationCameraController)||(this._deviceOrientationCameraController=new ee.A(this)),this._aspectRatioVR=this.camera.frustum.aspectRatio):(this._frameState.creditDisplay.container.style.visibility="visible",this._cameraVR=void 0,this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this.camera.frustum.aspectRatio=this._aspectRatioVR,this.camera.frustum.xOffset=0)}},mapMode2D:{get:function(){return this._mapMode2D}},splitPosition:{get:function(){return this._frameState.splitPosition},set:function(e){this._frameState.splitPosition=e}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance},set:function(e){if(!(0,f.A)(e)||e<0)throw new m.A("minimumDisableDepthTestDistance must be greater than or equal to 0.0.");this._minimumDisableDepthTestDistance=e}},logarithmicDepthBuffer:{get:function(){return this._logDepthBuffer},set:function(e){e=this._context.fragmentDepth&&e,this._logDepthBuffer!==e&&(this._logDepthBuffer=e,this._logDepthBufferDirty=!0)}},gamma:{get:function(){return this._context.uniformState.gamma},set:function(e){this._context.uniformState.gamma=e}},highDynamicRange:{get:function(){return this._hdr},set:function(e){const t=this._context,n=e&&t.depthTexture&&(t.colorBufferFloat||t.colorBufferHalfFloat);this._hdrDirty=n!==this._hdr,this._hdr=n}},highDynamicRangeSupported:{get:function(){const e=this._context;return e.depthTexture&&(e.colorBufferFloat||e.colorBufferHalfFloat)}},cameraUnderground:{get:function(){return this._cameraUnderground}},msaaSamples:{get:function(){return this._msaaSamples},set:function(e){e=Math.min(e,H.A.maximumSamples),this._msaaSamples=e}},msaaSupported:{get:function(){return this._context.msaa}},pixelRatio:{get:function(){return this._frameState.pixelRatio},set:function(e){this._frameState.pixelRatio=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},globeHeight:{get:function(){return this._globeHeight}}}),Re.prototype.getCompressedTextureFormatSupported=function(e){const t=this.context;return("WEBGL_compressed_texture_s3tc"===e||"s3tc"===e)&&t.s3tc||("WEBGL_compressed_texture_pvrtc"===e||"pvrtc"===e)&&t.pvrtc||("WEBGL_compressed_texture_etc"===e||"etc"===e)&&t.etc||("WEBGL_compressed_texture_etc1"===e||"etc1"===e)&&t.etc1||("WEBGL_compressed_texture_astc"===e||"astc"===e)&&t.astc||("EXT_texture_compression_bptc"===e||"bc7"===e)&&t.bc7},Re.prototype.updateDerivedCommands=function(e){const{derivedCommands:t}=e;if(!(0,f.A)(t))return;const n=this._frameState,{shadowState:i,useLogDepth:o}=this._frameState,r=this._context;let a=!1;const s=i.lastDirtyTime;e.lastDirtyTime!==s&&(e.lastDirtyTime=s,e.dirty=!0,a=!0);const A=this._hdr,c=(0,f.A)(t.logDepth),l=(0,f.A)(t.hdr),u=(0,f.A)(t.originalCommand),d=o&&!c,h=A&&!l,g=!(o&&A||u),p=n.pickingMetadata&&function(e,t){const n=e.pickedMetadataInfo,i=t.pickedMetadataInfo;return n?.schemaId!==i?.schemaId||n?.className!==i?.className||n?.propertyName!==i?.propertyName}(e,n);if(e.dirty=e.dirty||d||h||g||p,!e.dirty)return;e.dirty=!1;const{shadowsEnabled:m,shadowMaps:_}=i;m&&e.castShadows&&(t.shadows=_e.A.createCastDerivedCommand(_,e,a,r,t.shadows)),(c||d)&&(t.logDepth=$.A.createLogDepthCommand(e,r,t.logDepth),Me(this,t.logDepth.command,a)),(u||g)&&Me(this,e,a)};const Le=new J.A({pass:W.A.RENDER}),Pe=new J.A({pass:W.A.PRELOAD}),Oe=new J.A({pass:W.A.PRELOAD_FLIGHT}),Fe=new J.A({pass:W.A.REQUEST_RENDER_MODE_DEFER_CHECK}),Ue=new o.A;let ke;function Ge(e,t,n){const i=e._frameState;i.frameNumber=t,i.time=w.A.clone(n,i.time)}Re.prototype.clearPasses=function(e){e.render=!1,e.pick=!1,e.pickVoxel=!1,e.depth=!1,e.postProcess=!1,e.offscreen=!1},Re.prototype.updateFrameState=function(){const e=this.camera,t=this._frameState;t.commandList.length=0,t.shadowMaps.length=0,t.brdfLutGenerator=this._brdfLutGenerator,t.environmentMap=this.skyBox&&this.skyBox._cubeMap,t.mode=this._mode,t.morphTime=this.morphTime,t.mapProjection=this.mapProjection,t.camera=e,t.cullingVolume=e.frustum.computeCullingVolume(e.positionWC,e.directionWC,e.upWC),t.occluder=function(e){if(e._mode===ge.A.SCENE3D&&e.globe?.show&&!e._cameraUnderground&&!e._globeTranslucencyState.translucent)return Ue.radius=e.ellipsoid.minimumRadius+e.frameState.minimumTerrainHeight,ke=D.A.fromBoundingSphere(Ue,e.camera.positionWC,ke),ke}(this),t.minimumTerrainHeight=0,t.minimumDisableDepthTestDistance=this._minimumDisableDepthTestDistance,t.invertClassification=this.invertClassification,t.useLogDepth=this._logDepthBuffer&&!(this.camera.frustum instanceof Q.A||this.camera.frustum instanceof N.A),t.light=this.light,t.cameraUnderground=this._cameraUnderground,t.globeTranslucencyState=this._globeTranslucencyState;const{globe:n}=this;(0,f.A)(n)&&n._terrainExaggerationChanged&&(this.verticalExaggeration=n._terrainExaggeration,this.verticalExaggerationRelativeHeight=n._terrainExaggerationRelativeHeight,n._terrainExaggerationChanged=!1),t.verticalExaggeration=this.verticalExaggeration,t.verticalExaggerationRelativeHeight=this.verticalExaggerationRelativeHeight,(0,f.A)(this._specularEnvironmentCubeMap)&&this._specularEnvironmentCubeMap.ready?(t.specularEnvironmentMaps=this._specularEnvironmentCubeMap.texture,t.specularEnvironmentMapsMaximumLOD=this._specularEnvironmentCubeMap.maximumMipmapLevel):(t.specularEnvironmentMaps=void 0,t.specularEnvironmentMapsMaximumLOD=void 0),t.sphericalHarmonicCoefficients=this.sphericalHarmonicCoefficients,this._actualInvertClassificationColor=l.A.clone(this.invertClassificationColor,this._actualInvertClassificationColor),re.A.isTranslucencySupported(this._context)||(this._actualInvertClassificationColor.alpha=1),t.invertClassificationColor=this._actualInvertClassificationColor,(0,f.A)(this.globe)?t.maximumScreenSpaceError=this.globe.maximumScreenSpaceError:t.maximumScreenSpaceError=2,this.clearPasses(t.passes),t.tilesetPassState=void 0},Re.prototype.isVisible=function(e,t,n){if(!(0,f.A)(t))return!1;const{boundingVolume:i}=t;return!((0,f.A)(i)&&t.cull&&(e.computeVisibility(i)===v.A.OUTSIDE||(0,f.A)(n)&&t.occlude&&i.isOccluded(n)))};let He=new S.A(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1);function Ve(e,t,n,i){const o=t._frameState,s=t._context;if((0,f.A)(t.debugCommandFilter)&&!t.debugCommandFilter(e))return;if(e instanceof U.A)return void e.execute(s,n);e.debugShowBoundingVolume&&(0,f.A)(e.boundingVolume)&&function(e,t,n,i){const o=t._frameState,s=o.context,A=e.boundingVolume;(0,f.A)(t._debugVolume)&&t._debugVolume.destroy();let c,l,d=a.A.clone(A.center);if(o.mode!==ge.A.SCENE3D){d=S.A.multiplyByPoint(He,d,d);const e=o.mapProjection,t=e.unproject(d);d=e.ellipsoid.cartographicToCartesian(t)}const{radius:h}=A;(0,f.A)(h)?(c=I.A.createGeometry(new I.A({radii:new a.A(h,h,h),vertexFormat:ce.A.FLAT_VERTEX_FORMAT})),l=S.A.fromTranslation(d)):(c=r.A.createGeometry(r.A.fromDimensions({dimensions:new a.A(2,2,2),vertexFormat:ce.A.FLAT_VERTEX_FORMAT})),l=S.A.fromRotationTranslation(A.halfAxes,d,new S.A)),t._debugVolume=new de.A({geometryInstances:new C.A({geometry:b.A.toWireframe(c),modelMatrix:l,attributes:{color:new u.A(1,0,0,1)}}),appearance:new ce.A({flat:!0,translucent:!1}),asynchronous:!1});const g=o.commandList,p=o.commandList=[];let m;t._debugVolume.update(o),e=p[0],o.useLogDepth&&(e=$.A.createLogDepthCommand(e,s).command),(0,f.A)(i)&&(m=n.framebuffer,n.framebuffer=i),e.execute(s,n),(0,f.A)(m)&&(n.framebuffer=m),o.commandList=g}(e,t,n,i),o.useLogDepth&&(0,f.A)(e.derivedCommands.logDepth)&&(e=e.derivedCommands.logDepth.command);const A=o.passes;if(!A.pick&&!A.pickVoxel&&!A.depth&&t._hdr&&(0,f.A)(e.derivedCommands)&&(0,f.A)(e.derivedCommands.hdr)&&(e=e.derivedCommands.hdr.command),A.pick||A.depth)if(A.pick&&!A.depth){if(o.pickingMetadata&&(0,f.A)(e.derivedCommands.pickingMetadata))return void(e=e.derivedCommands.pickingMetadata.pickMetadataCommand).execute(s,n);if(!o.pickingMetadata&&(0,f.A)(e.derivedCommands.picking))return void(e=e.derivedCommands.picking.pickCommand).execute(s,n)}else if((0,f.A)(e.derivedCommands.depth))return void(e=e.derivedCommands.depth.depthOnlyCommand).execute(s,n);t.debugShowCommands||t.debugShowFrustums?t._debugInspector.executeDebugShowFrustumsCommand(t,e,n):o.shadowState.lightShadowsEnabled&&e.receiveShadows&&(0,f.A)(e.derivedCommands.shadows)?e.derivedCommands.shadows.receiveCommand.execute(s,n):e.execute(s,n)}function ze(e,t,n){const{derivedCommands:i}=e;if(!(0,f.A)(i))return;const o=t._frameState,r=t._context;o.useLogDepth&&(0,f.A)(i.logDepth)&&(e=i.logDepth.command);const{picking:a,pickingMetadata:s,depth:A}=e.derivedCommands;(0,f.A)(s)&&(e=i.pickingMetadata.pickMetadataCommand).execute(r,n),(0,f.A)(a)?(e=a.pickCommand).execute(r,n):(0,f.A)(A)&&(e=A.depthOnlyCommand).execute(r,n)}function je(e,t,n){return t.boundingVolume.distanceSquaredTo(n)-e.boundingVolume.distanceSquaredTo(n)}He=S.A.inverseTransformation(He,He);const Ye=new a.A;function qe(e,t){const n=a.A.subtract(e,t,Ye),i=Math.max(0,a.A.magnitude(n));return i*i}function We(e,t,n){const i=e.boundingVolume;return qe(t.boundingVolume.center,n)-qe(i.center,n)}function Je(e,t,n){return e.boundingVolume.distanceSquaredTo(n)-t.boundingVolume.distanceSquaredTo(n)+T.A.EPSILON12}function Ke(e,t,n,i,o){(0,x.A)(i,je,e.camera.positionWC),(0,f.A)(o)&&t(o.unclassifiedCommand,e,n);for(let o=0;o<i.length;++o)t(i[o],e,n)}function Xe(e,t,n,i,o){(0,x.A)(i,Je,e.camera.positionWC),(0,f.A)(o)&&t(o.unclassifiedCommand,e,n);for(let o=0;o<i.length;++o)t(i[o],e,n)}function Ze(e,t,n){e.context.uniformState.updatePass(V.A.VOXELS);const i=n.commands[V.A.VOXELS];i.length=n.indices[V.A.VOXELS],(0,x.A)(i,je,e.camera.positionWC);for(let n=0;n<i.length;++n)Ve(i[n],e,t)}function $e(e,t,n){e.context.uniformState.updatePass(V.A.GAUSSIAN_SPLATS);const i=n.commands[V.A.GAUSSIAN_SPLATS];i.length=n.indices[V.A.GAUSSIAN_SPLATS],(0,x.A)(i,We,e.camera.positionWC);for(let n=0;n<i.length;++n)Ve(i[n],e,t)}const et=new R.A,tt=new M.A,nt=new Q.A,it=new N.A;function ot(e,t,n){const{frameState:i,context:o}=e,{pick:r,pickVoxel:a}=i.passes;let s;!r&&!a&&e._environmentState.useInvertClassification&&i.invertClassificationColor.alpha<1&&(s=e._invertClassification);const A=function(e){if(e._environmentState.useOIT){if(!(0,f.A)(e._executeOITFunction)){const{view:t,context:n}=e;e._executeOITFunction=function(e,i,o,r,a){t.globeDepth.prepareColorTextures(n),t.oit.executeCommands(e,i,o,r,a)}}return e._executeOITFunction}return e.frameState.passes.render?Ke:Xe}(e);o.uniformState.updatePass(V.A.TRANSLUCENT);const c=n.commands[V.A.TRANSLUCENT];c.length=n.indices[V.A.TRANSLUCENT],A(e,Ve,t,c,s)}function rt(e,t,n){const{translucentTileClassification:i,globeDepth:o}=e._view;if(!(n.indices[V.A.CESIUM_3D_TILE_CLASSIFICATION]>0&&i.isSupported()))return;const r=n.commands[V.A.TRANSLUCENT];i.executeTranslucentCommands(e,Ve,t,r,o.depthStencilTexture),i.executeClassificationCommands(e,Ve,t,n)}function at(e,t){const{camera:n,context:i,frameState:o}=e,{uniformState:r}=i;r.updateCamera(n);const a=function(e){const{frustum:t}=e;return(0,f.A)(t.fov)?t.clone(et):(0,f.A)(t.infiniteProjectionMatrix)?t.clone(tt):(0,f.A)(t.width)?t.clone(nt):t.clone(it)}(n);a.near=n.frustum.near,a.far=n.frustum.far;const s=o.passes,A=s.pick||s.pickVoxel;A||function(e,t){const{context:n,environmentState:i,view:o}=e;if(n.uniformState.updatePass(V.A.ENVIRONMENT),(0,f.A)(i.skyBoxCommand)&&Ve(i.skyBoxCommand,e,t),i.isSkyAtmosphereVisible&&Ve(i.skyAtmosphereCommand,e,t),i.isSunVisible&&(i.sunDrawCommand.execute(n,t),e.sunBloom&&!i.useWebVR)){let r;r=i.useGlobeDepthFramebuffer?o.globeDepth.framebuffer:i.usePostProcess?o.sceneFramebuffer.framebuffer:i.originalFramebuffer,e._sunPostProcess.execute(n),e._sunPostProcess.copy(n,r),t.framebuffer=r}i.isMoonVisible&&i.moonCommand.execute(n,t)}(e,t);const{clearGlobeDepth:c,renderTranslucentDepthForPick:l,useDepthPlane:u,useGlobeDepthFramebuffer:d,useInvertClassification:h,usePostProcessSelected:g}=e._environmentState,{globeDepth:p,globeTranslucencyFramebuffer:m,sceneFramebuffer:_,frustumCommandsList:I}=e._view,E=I.length,y=e._globeTranslucencyState,C=e._depthClearCommand,b=e._stencilClearCommand,B=e._classificationStencilClearCommand,v=e._depthPlane,w=n.position.z;function T(n,i){r.updatePass(i);const o=n.commands[i],a=n.indices[i];for(let n=0;n<a;++n)Ve(o[n],e,t);return a}function S(n,i){r.updatePass(i);const o=n.commands[i],a=n.indices[i];for(let n=0;n<a;++n)ze(o[n],e,t)}for(let s=0;s<E;++s){const f=E-s-1,x=I[f];let D;if(e.mode===ge.A.SCENE2D?(n.position.z=w-x.near+1,a.far=Math.max(1,x.far-x.near),a.near=1,r.update(o),r.updateFrustum(a)):(a.near=0!==f?x.near*e.opaqueFrustumNearOffset:x.near,a.far=x.far,r.updateFrustum(a)),C.execute(i,t),i.stencilBuffer&&b.execute(i,t),y.translucent?(r.updatePass(V.A.GLOBE),y.executeGlobeCommands(x,Ve,m,e,t)):T(x,V.A.GLOBE),d&&p.executeCopyDepth(i,t),l||(y.translucent?(r.updatePass(V.A.TERRAIN_CLASSIFICATION),y.executeGlobeClassificationCommands(x,Ve,m,e,t)):T(x,V.A.TERRAIN_CLASSIFICATION)),c&&(C.execute(i,t),u&&v.execute(i,t)),!h||A||l)D=T(x,V.A.CESIUM_3D_TILE),D>0&&(d&&(p.prepareColorTextures(i,c),p.executeUpdateDepth(i,t,p.depthStencilTexture)),l||(D=T(x,V.A.CESIUM_3D_TILE_CLASSIFICATION)));else{e._invertClassification.clear(i,t);const n=t.framebuffer;t.framebuffer=e._invertClassification._fbo.framebuffer,D=T(x,V.A.CESIUM_3D_TILE),d&&(e._invertClassification.prepareTextures(i),p.executeUpdateDepth(i,t,e._invertClassification._fbo.getDepthStencilTexture())),D=T(x,V.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW),t.framebuffer=n,e._invertClassification.executeClassified(i,t),1===o.invertClassificationColor.alpha&&e._invertClassification.executeUnclassified(i,t),D>0&&i.stencilBuffer&&B.execute(i,t),D=T(x,V.A.CESIUM_3D_TILE_CLASSIFICATION)}if(D>0&&i.stencilBuffer&&b.execute(i,t),Ze(e,t,x),T(x,V.A.OPAQUE),$e(e,t,x),0!==f&&e.mode!==ge.A.SCENE2D&&(a.near=x.near,r.updateFrustum(a)),ot(e,t,x),rt(e,t,x),i.depthTexture&&e.useDepthPicking&&(d||l)){const n=e._picking.getPickDepth(e,f);n.update(i,p.depthStencilTexture),n.executeCopyDepth(i,t)}if(A||!g)continue;const Q=t.framebuffer;t.framebuffer=_.getIdFramebuffer(),a.near=0!==f?x.near*e.opaqueFrustumNearOffset:x.near,a.far=x.far,r.updateFrustum(a),y.translucent?(r.updatePass(V.A.GLOBE),y.executeGlobeCommands(x,ze,m,e,t)):S(x,V.A.GLOBE),c&&(C.framebuffer=t.framebuffer,C.execute(i,t),C.framebuffer=void 0),c&&u&&v.execute(i,t),S(x,V.A.CESIUM_3D_TILE),S(x,V.A.OPAQUE),S(x,V.A.TRANSLUCENT),t.framebuffer=Q}}function st(e){e.context.uniformState.updatePass(V.A.COMPUTE);const t=e._environmentState.sunComputeCommand;(0,f.A)(t)&&t.execute(e._computeEngine);const n=e._computeCommandList;for(let t=0;t<n.length;++t)n[t].execute(e._computeEngine)}function At(e,t,n){const{shadowMapCullingVolume:i,isPointLight:o,passes:r}=n,a=r.length,s=[V.A.GLOBE,V.A.CESIUM_3D_TILE,V.A.OPAQUE,V.A.TRANSLUCENT];for(let n=0;n<t.length;++n){const A=t[n];if(e.updateDerivedCommands(A),A.castShadows&&!(s.indexOf(A.pass)<0)&&e.isVisible(i,A))if(o)for(let e=0;e<a;++e)r[e].commandList.push(A);else if(1===a)r[0].commandList.push(A);else{let t=!1;for(let n=a-1;n>=0;--n){const i=r[n].cullingVolume;if(e.isVisible(i,A))r[n].commandList.push(A),t=!0;else if(t)break}}}}function ct(e){const{shadowState:t,commandList:n}=e.frameState,{shadowsEnabled:i,shadowMaps:o}=t;if(!i)return;const{context:r}=e,{uniformState:a}=r;for(let t=0;t<o.length;++t){const i=o[t];if(i.outOfView)continue;const{passes:s}=i;for(let e=0;e<s.length;++e)s[e].commandList.length=0;At(e,n,i);for(let n=0;n<s.length;++n){const o=i.passes[n],{camera:s,commandList:A}=o;a.updateCamera(s),i.updatePass(r,n);for(let n=0;n<A.length;++n){const i=A[n];a.updatePass(i.pass),Ve(i.derivedCommands.shadows.castCommands[t],e,o.passState)}}}}const lt=new a.A;Re.prototype.updateAndExecuteCommands=function(e,t){!function(e,t,n){const i=e._context,o=e._frameState,r=e._environmentState,a=e._view,s=o.passes,A=s.pick||s.pickVoxel;(0,f.A)(a.globeDepth)&&(a.globeDepth.picking=A);const c=r.useWebVR;r.originalFramebuffer=t.framebuffer,(0,f.A)(e.sun)&&e.sunBloom!==e._sunBloom?(e.sunBloom&&!c?e._sunPostProcess=new be.A:(0,f.A)(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy()),e._sunBloom=e.sunBloom):!(0,f.A)(e.sun)&&(0,f.A)(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy(),e._sunBloom=!1);const u=e._clearColorCommand;l.A.clone(n,u.color),u.execute(i,t);const d=r.useGlobeDepthFramebuffer=(0,f.A)(a.globeDepth);d&&(a.globeDepth.update(i,t,a.viewport,e.msaaSamples,e._hdr,r.clearGlobeDepth),a.globeDepth.clear(i,t,n));const h=a.oit,g=r.useOIT=!A&&(0,f.A)(h)&&h.isSupported();g&&(h.update(i,t,a.globeDepth.colorFramebufferManager,e._hdr,e.msaaSamples),h.clear(i,t,n),r.useOIT=h.isSupported());const p=e.postProcessStages;let m=r.usePostProcess=!A&&(e._hdr||p.length>0||p.ambientOcclusion.enabled||p.fxaa.enabled||p.bloom.enabled);r.usePostProcessSelected=!1,m&&(a.sceneFramebuffer.update(i,a.viewport,e._hdr,e.msaaSamples),a.sceneFramebuffer.clear(i,t,n),p.update(i,o.useLogDepth,e._hdr),p.clear(i),m=r.usePostProcess=p.ready,r.usePostProcessSelected=m&&p.hasSelected),r.isSunVisible&&e.sunBloom&&!c?(t.framebuffer=e._sunPostProcess.update(t),e._sunPostProcess.clear(i,t,n)):d?t.framebuffer=a.globeDepth.framebuffer:m&&(t.framebuffer=a.sceneFramebuffer.framebuffer),(0,f.A)(t.framebuffer)&&u.execute(i,t);if(r.useInvertClassification=!A&&(0,f.A)(t.framebuffer)&&e.invertClassification){let n;if(1===o.invertClassificationColor.alpha&&d&&(n=a.globeDepth.framebuffer),(0,f.A)(n)||i.depthTexture){if(e._invertClassification.previousFramebuffer=n,e._invertClassification.update(i,e.msaaSamples,a.globeDepth.colorFramebufferManager),e._invertClassification.clear(i,t),o.invertClassificationColor.alpha<1&&g){const t=e._invertClassification.unclassifiedCommand,n=t.derivedCommands;n.oit=h.createDerivedCommands(t,i,n.oit)}}else r.useInvertClassification=!1}e._globeTranslucencyState.translucent&&a.globeTranslucencyFramebuffer.updateAndClear(e._hdr,a.viewport,i,t)}(this,e,t),this._environmentState.useWebVR?function(e,t){const n=e._view,i=n.camera,o=e._environmentState.renderTranslucentDepthForPick;yt(e),n.createPotentiallyVisibleSet(e),st(e),o||ct(e);const r=t.viewport;r.x=0,r.y=0,r.width=.5*r.width;const s=q.A.clone(i,e._cameraVR);s.frustum=i.frustum;const A=i.frustum.near,c=A*(e.focalLength??5),l=e.eyeSeparation??c/30,u=a.A.multiplyByScalar(s.right,.5*l,lt);i.frustum.aspectRatio=r.width/r.height;const d=.5*l*A/c;a.A.add(s.position,u,i.position),i.frustum.xOffset=d,at(e,t),r.x=r.width,a.A.subtract(s.position,u,i.position),i.frustum.xOffset=-d,at(e,t),q.A.clone(s,i)}(this,e):this._frameState.mode!==ge.A.SCENE2D||this._mapMode2D===se.A.ROTATE?It(!0,this,e):function(e,t){const{frameState:n,camera:o}=e,{uniformState:r}=e.context,s=t.viewport,A=i.A.clone(s,_t);t.viewport=A;const c=ut,l=dt;e.mapProjection.project(c,l);const u=a.A.clone(o.position,ht),d=S.A.clone(o.transform,ft),h=o.frustum.clone();o._setTransform(S.A.IDENTITY);const g=S.A.computeViewportTransformation(A,0,1,gt),f=o.frustum.projectionMatrix,p=o.positionWC.y,m=a.A.fromElements(T.A.sign(p)*l.x-p,0,-o.positionWC.x,pt),_=F.A.pointToGLWindowCoordinates(f,g,m,mt);_.x=Math.floor(_.x);const I=A.x,E=A.width;if(0===p||_.x<=I||_.x>=I+E)It(!0,e,t);else if(Math.abs(I+.5*E-_.x)<1)A.width=_.x-A.x,o.position.x*=T.A.sign(o.position.x),o.frustum.right=0,n.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),r.update(n),It(!0,e,t),A.x=_.x,o.position.x=-o.position.x,o.frustum.right=-o.frustum.left,o.frustum.left=0,n.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),r.update(n),It(!1,e,t);else if(_.x>I+.5*E){A.width=_.x-I;const i=o.frustum.right;o.frustum.right=l.x-p,n.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),r.update(n),It(!0,e,t),A.x=_.x,A.width=I+E-_.x,o.position.x=-o.position.x,o.frustum.left=-o.frustum.right,o.frustum.right=i-2*o.frustum.right,n.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),r.update(n),It(!1,e,t)}else{A.x=_.x,A.width=I+E-_.x;const i=o.frustum.left;o.frustum.left=-l.x-p,n.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),r.update(n),It(!0,e,t),A.x=I,A.width=_.x-I,o.position.x=-o.position.x,o.frustum.right=-o.frustum.left,o.frustum.left=i-2*o.frustum.left,n.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),r.update(n),It(!1,e,t)}o._setTransform(d),a.A.clone(u,o.position),o.frustum=h.clone(),t.viewport=s}(this,e)};const ut=new s.A(Math.PI,T.A.PI_OVER_TWO),dt=new a.A,ht=new a.A,gt=new S.A,ft=new S.A,pt=new a.A,mt=new a.A,_t=new i.A;function It(e,t,n){const i=t._view,{renderTranslucentDepthForPick:o}=t._environmentState;e||(t.frameState.commandList.length=0),yt(t),i.createPotentiallyVisibleSet(t),e&&(st(t),o||ct(t)),at(t,n)}const Et=new h.A;function yt(e){const t=e._frameState;e._groundPrimitives.update(t),e._primitives.update(t),function(e){const t=e._frameState;e.debugShowFrustumPlanes!==e._debugShowFrustumPlanes&&(e.debugShowFrustumPlanes?e._debugFrustumPlanes=new X.A({camera:e.camera,updateOnChange:!1,frustumSplits:t.frustumSplits}):e._debugFrustumPlanes=e._debugFrustumPlanes&&e._debugFrustumPlanes.destroy(),e._debugShowFrustumPlanes=e.debugShowFrustumPlanes),(0,f.A)(e._debugFrustumPlanes)&&e._debugFrustumPlanes.update(t)}(e),function(e){const t=e._frameState,{passes:n,shadowState:i,shadowMaps:o}=t,r=o.length,a=r>0&&!n.pick&&!n.pickVoxel&&e.mode===ge.A.SCENE3D;if(a!==i.shadowsEnabled&&(++i.lastDirtyTime,i.shadowsEnabled=a),i.lightShadowsEnabled=!1,a){for(let e=0;e<r;++e)if(o[e]!==i.shadowMaps[e]){++i.lastDirtyTime;break}i.shadowMaps.length=0,i.lightShadowMaps.length=0;for(let e=0;e<r;++e){const n=o[e];n.update(t),i.shadowMaps.push(n),n.fromLightSource&&(i.lightShadowMaps.push(n),i.lightShadowsEnabled=!0),n.dirty&&(++i.lastDirtyTime,n.dirty=!1)}}}(e),e._globe&&e._globe.render(t)}function Ct(e,t,n){let i=Number.NEGATIVE_INFINITY;if(e instanceof he.A){const o=e.length;for(let r=0;r<o;++r){const o=Ct(e.get(r),t,n);(0,f.A)(o)&&o>i&&(i=o)}}else if(e.isCesium3DTileset&&e.show&&e.enableCollision){const o=e.getHeight(t,n);if((0,f.A)(o)&&o>i)return o}return i}Re.prototype.updateEnvironment=function(){const e=this._frameState,t=this._view,n=this._environmentState,i=e.passes.render,o=e.passes.offscreen,r=this.atmosphere,a=this.skyAtmosphere,s=this.globe,A=this._globeTranslucencyState;if(!i||this._mode!==ge.A.SCENE2D&&t.camera.frustum instanceof Q.A||!A.environmentVisible)n.skyAtmosphereCommand=void 0,n.skyBoxCommand=void 0,n.sunDrawCommand=void 0,n.sunComputeCommand=void 0,n.moonCommand=void 0;else{if((0,f.A)(a)){if((0,f.A)(s))a.setDynamicLighting(te.A.fromGlobeFlags(s)),n.isReadyForAtmosphere=n.isReadyForAtmosphere||!s.show||s._surface._tilesToRender.length>0;else{const e=r.dynamicLighting;a.setDynamicLighting(e),n.isReadyForAtmosphere=!0}n.skyAtmosphereCommand=a.update(e,s),(0,f.A)(n.skyAtmosphereCommand)&&this.updateDerivedCommands(n.skyAtmosphereCommand)}else n.skyAtmosphereCommand=void 0;n.skyBoxCommand=(0,f.A)(this.skyBox)?this.skyBox.update(e,this._hdr):void 0;const i=(0,f.A)(this.sun)?this.sun.update(e,t.passState,this._hdr):void 0;n.sunDrawCommand=(0,f.A)(i)?i.drawCommand:void 0,n.sunComputeCommand=(0,f.A)(i)?i.computeCommand:void 0,n.moonCommand=(0,f.A)(this.moon)?this.moon.update(e):void 0}const c=n.clearGlobeDepth=(0,f.A)(s)&&s.show&&(!s.depthTestAgainstTerrain||this.mode===ge.A.SCENE2D);(n.useDepthPlane=c&&this.mode===ge.A.SCENE3D&&A.useDepthPlane)&&this._depthPlane.update(e),n.renderTranslucentDepthForPick=!1,n.useWebVR=this._useWebVR&&this.mode!==ge.A.SCENE2D&&!o;const l=e.mode!==ge.A.SCENE3D||A.sunVisibleThroughGlobe?void 0:e.occluder;let u=e.cullingVolume;const d=Et.planes;for(let e=0;e<5;++e)d[e]=u.planes[e];u=Et,n.isSkyAtmosphereVisible=(0,f.A)(n.skyAtmosphereCommand)&&n.isReadyForAtmosphere,n.isSunVisible=this.isVisible(u,n.sunDrawCommand,l),n.isMoonVisible=this.isVisible(u,n.moonCommand,l);const h=this.specularEnvironmentMaps;let g=this._specularEnvironmentCubeMap;(0,f.A)(h)&&g?.url!==h?(g=g&&g.destroy(),this._specularEnvironmentCubeMap=new Ee.A(h)):!(0,f.A)(h)&&(0,f.A)(g)&&(g.destroy(),this._specularEnvironmentCubeMap=void 0),(0,f.A)(this._specularEnvironmentCubeMap)&&this._specularEnvironmentCubeMap.update(e)},Re.prototype.resolveFramebuffers=function(e){const t=this._context,n=this._environmentState,i=this._view,{globeDepth:o,translucentTileClassification:r}=i;(0,f.A)(o)&&o.prepareColorTextures(t);const{useOIT:a,useGlobeDepthFramebuffer:s,usePostProcess:A,originalFramebuffer:c}=n,l=s?o.colorFramebufferManager:void 0,u=i.sceneFramebuffer._colorFramebuffer,d=i.sceneFramebuffer.idFramebuffer;if(a&&(e.framebuffer=A?u.framebuffer:c,i.oit.execute(t,e)),r.hasTranslucentDepth&&r.isSupported()&&r.execute(this,e),A){i.sceneFramebuffer.prepareColorTextures(t);let e=u;s&&!a&&(e=l);const n=this.postProcessStages,o=e.getColorTexture(0),r=d.getColorTexture(0),A=(l??u).getDepthStencilTexture();n.execute(t,o,A,r),n.copy(t,c)}a||A||!s||(e.framebuffer=c,o.executeCopyColor(t,e))},Re.prototype.getHeight=function(e,t){if(!(0,f.A)(e))return;const n=t===B.Ay.CLAMP_TO_TERRAIN||t===B.Ay.RELATIVE_TO_TERRAIN,i=t===B.Ay.CLAMP_TO_3D_TILE||t===B.Ay.RELATIVE_TO_3D_TILE;if(!(0,f.A)(e))return;let o=Number.NEGATIVE_INFINITY;if(!n){const t=Ct(this.primitives,e,this);(0,f.A)(t)&&t>o&&(o=t)}const r=this._globe;if(!i&&(0,f.A)(r)&&r.show){const t=r.getHeight(e);t>o&&(o=t)}return o>Number.NEGATIVE_INFINITY?o:void 0};const bt=new s.A;function Bt(e){e._jobScheduler.resetBudgets();const t=e._frameState;e.primitives.prePassesUpdate(t),(0,f.A)(e.globe)&&e.globe.update(t),e._picking.update(),t.creditDisplay.update()}function vt(e){e.primitives.postPassesUpdate(e._frameState),P.A.update()}Re.prototype.updateHeight=function(e,t,n){A.A.typeOf.func("callback",t);const i=this._ellipsoid,o=i=>{let o;s.A.clone(e,bt),(0,f.A)(i)&&(o=i.height),(0,f.A)(o)||(o=this.getHeight(e,n)),(0,f.A)(o)&&(bt.height=o,t(bt))},r=n===B.Ay.CLAMP_TO_TERRAIN||n===B.Ay.RELATIVE_TO_TERRAIN;let a;n!==B.Ay.CLAMP_TO_3D_TILE&&n!==B.Ay.RELATIVE_TO_3D_TILE&&(0,f.A)(this.globe)&&(a=this.globe._surface.updateHeight(e,o));let c={};const l=t=>{if(r||t.isDestroyed()||!t.isCesium3DTileset)return;const n=t.updateHeight(e,o,i);c[t.id]=n};if(!r){const e=this.primitives.length;for(let t=0;t<e;++t)l(this.primitives.get(t))}const u=this.primitives.primitiveAdded.addEventListener(l),d=this.primitives.primitiveRemoved.addEventListener(e=>{!e.isDestroyed()&&e.isCesium3DTileset&&((0,f.A)(c[e.id])&&c[e.id](),delete c[e.id])});return()=>{a=a&&a(),Object.values(c).forEach(e=>e()),c={},u(),d()}},Re.prototype.initializeFrame=function(){if(120===this._shaderFrameCount++&&(this._shaderFrameCount=0,this._context.shaderCache.destroyReleasedShaderPrograms(),this._context.textureCache.destroyReleasedTextures()),this._tweens.update(),this._globeHeightDirty){(0,f.A)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),this._globeHeight=function(e){if(e.mode===ge.A.MORPHING)return;const t=e.camera.positionCartographic;return e.getHeight(t)}(this),this._globeHeightDirty=!1;const e=this.camera.positionCartographic;this._removeUpdateHeightCallback=this.updateHeight(e,e=>{this.isDestroyed()||(this._globeHeight=e.height)})}this._cameraUnderground=function(e){const t=e.camera,n=e._mode,i=e._screenSpaceCameraController,o=t.positionCartographic;if(!(0,f.A)(o))return!1;if(!i.onMap()&&o.height<0)return!0;if(n===ge.A.SCENE2D||n===ge.A.MORPHING)return!1;const r=e._globeHeight;return(0,f.A)(r)&&o.height<r}(this),this._globeTranslucencyState.update(this),this._screenSpaceCameraController.update(),(0,f.A)(this._deviceOrientationCameraController)&&this._deviceOrientationCameraController.update(),this.camera.update(this._mode),this.camera._updateCameraChanged()};const wt=new l.A;function Tt(e){const t=e._frameState,n=e.context,{uniformState:o}=n,r=e._defaultView;e._view=r,e.updateFrameState(),t.passes.render=!0,t.passes.postProcess=e.postProcessStages.hasSelected,t.tilesetPassState=Le;let s=e.backgroundColor??l.A.BLACK;e._hdr&&(s=l.A.clone(s,wt),s.red=Math.pow(s.red,e.gamma),s.green=Math.pow(s.green,e.gamma),s.blue=Math.pow(s.blue,e.gamma)),t.backgroundColor=s,t.atmosphere=e.atmosphere,e.fog.update(t),o.update(t);const A=e.shadowMap;(0,f.A)(A)&&A.enabled&&(!(0,f.A)(e.light)||e.light instanceof Ce.A?a.A.negate(o.sunDirectionWC,e._shadowMapCamera.direction):a.A.clone(e.light.direction,e._shadowMapCamera.direction),t.shadowMaps.push(A)),e._computeCommandList.length=0,e._overlayCommandList.length=0;const c=r.viewport;c.x=0,c.y=0,c.width=n.drawingBufferWidth,c.height=n.drawingBufferHeight;const u=r.passState;u.framebuffer=void 0,u.blendingEnabled=void 0,u.scissorTest=void 0,u.viewport=i.A.clone(c,u.viewport),n.beginFrame(),(0,f.A)(e.globe)&&e.globe.beginFrame(t),e.updateEnvironment(),e.updateAndExecuteCommands(u,s),e.resolveFramebuffers(u),u.framebuffer=void 0,function(e,t){e.context.uniformState.updatePass(V.A.OVERLAY);const n=e.context,i=e._overlayCommandList;for(let e=0;e<i.length;++e)i[e].execute(n,t)}(e,u),(0,f.A)(e.globe)&&(e.globe.endFrame(t),e.globe.tilesLoaded||(e._renderRequested=!0)),n.endFrame()}function St(e,t){try{t(e)}catch(t){if(e._renderError.raiseEvent(e,t),e.rethrowRenderErrors)throw t}}function xt(e){return e._picking.updateMostDetailedRayPicks(e)}function Dt(e){const t=e._frameState;Pe.camera=t.camera,Pe.cullingVolume=t.cullingVolume,e.primitives.updateForPass(t,Pe)}function Qt(e){const t=e._frameState;t.camera.canPreloadFlight()&&(Oe.camera=e.preloadFlightCamera,Oe.cullingVolume=e.preloadFlightCullingVolume,e.primitives.updateForPass(t,Oe))}function Nt(e){e.primitives.updateForPass(e._frameState,Fe)}Re.prototype.render=function(e){this._preUpdate.raiseEvent(this,e);const t=this._frameState;t.newFrame=!1,(0,f.A)(e)||(e=w.A.now());const n=this._view.checkForCameraUpdates(this);n&&(this._globeHeightDirty=!0);let i=!this.requestRenderMode||this._renderRequested||n||this._logDepthBufferDirty||this._hdrDirty||this.mode===ge.A.MORPHING;if(!i&&(0,f.A)(this.maximumRenderTimeChange)&&(0,f.A)(this._lastRenderTime)){const t=Math.abs(w.A.secondsDifference(this._lastRenderTime,e));i=i||t>this.maximumRenderTimeChange}i&&(this._lastRenderTime=w.A.clone(e,this._lastRenderTime),this._renderRequested=!1,this._logDepthBufferDirty=!1,this._hdrDirty=!1,Ge(this,T.A.incrementWrap(t.frameNumber,15e6,1),e),t.newFrame=!0),St(this,Bt),this.primitives.show&&(St(this,xt),St(this,Dt),St(this,Qt),i||St(this,Nt)),this._postUpdate.raiseEvent(this,e),i&&(this._preRender.raiseEvent(this,e),t.creditDisplay.beginFrame(),St(this,Tt)),function(e,t){if(e.debugShowFramesPerSecond){if(!(0,f.A)(e._performanceDisplay)){const t=document.createElement("div");t.className="cesium-performanceDisplay-defaultContainer",e._canvas.parentNode.appendChild(t);const n=new Ae.A({container:t});e._performanceDisplay=n,e._performanceContainer=t}e._performanceDisplay.throttled=e.requestRenderMode,e._performanceDisplay.update(t)}else(0,f.A)(e._performanceDisplay)&&(e._performanceDisplay=e._performanceDisplay&&e._performanceDisplay.destroy(),e._performanceContainer.parentNode.removeChild(e._performanceContainer))}(this,i),St(this,vt),function(e){const t=e._frameState.afterRender;for(let n=0;n<t.length;++n)t[n]()&&e.requestRender();t.length=0}(this),i&&(this._postRender.raiseEvent(this,e),t.creditDisplay.endFrame())},Re.prototype.forceRender=function(e){this._renderRequested=!0,this.render(e)},Re.prototype.requestRender=function(){this._renderRequested=!0},Re.prototype.clampLineWidth=function(e){return Math.max(H.A.minimumAliasedLineWidth,Math.min(e,H.A.maximumAliasedLineWidth))},Re.prototype.pick=function(e,t,n){return this._picking.pick(this,e,t,n)},Re.prototype.pickVoxel=function(e,t,n){const i=this.pick(e,t,n);if(!(0,f.A)(i))return;const o=i.primitive;if(!(o instanceof Se.A))return;const r=this._picking.pickVoxelCoordinate(this,e,t,n),a=255*r[0]+r[1],s=o._traversal.findKeyframeNode(a);if(!(0,f.A)(s))return;const A=255*r[2]+r[3];return Te.A.fromKeyframeNode(o,a,A,s)},Re.prototype.pickMetadata=function(e,t,n,i){A.A.typeOf.object("windowPosition",e),A.A.typeOf.string("className",n),A.A.typeOf.string("propertyName",i);const o=this.pick(e);if(!(0,f.A)(o))return;const r=o.detail?.model?.structuralMetadata;if(!(0,f.A)(r))return;const a=r.schema,s=(0,xe.A)(a,t,n,i);if(!(0,f.A)(s))return;const c=(0,Qe.A)(r,n,i);if(!(0,f.A)(c))return;const l=new De.A(t,n,i,s,c);return this._picking.pickMetadata(this,e,l)},Re.prototype.pickMetadataSchema=function(e){A.A.typeOf.object("windowPosition",e);const t=this.pick(e);if(!(0,f.A)(t))return;const n=t.detail?.model?.structuralMetadata?.schema;return n},Re.prototype.pickPositionWorldCoordinates=function(e,t){return this._picking.pickPositionWorldCoordinates(this,e,t)},Re.prototype.pickPosition=function(e,t){return this._picking.pickPosition(this,e,t)},Re.prototype.drillPick=function(e,t,n,i){return this._picking.drillPick(this,e,t,n,i)},Re.prototype.pickFromRay=function(e,t,n){return this._picking.pickFromRay(this,e,t,n)},Re.prototype.drillPickFromRay=function(e,t,n,i){return this._picking.drillPickFromRay(this,e,t,n,i)},Re.prototype.pickFromRayMostDetailed=function(e,t,n){return this._picking.pickFromRayMostDetailed(this,e,t,n)},Re.prototype.drillPickFromRayMostDetailed=function(e,t,n,i){return this._picking.drillPickFromRayMostDetailed(this,e,t,n,i)},Re.prototype.sampleHeight=function(e,t,n){return this._picking.sampleHeight(this,e,t,n)},Re.prototype.clampToHeight=function(e,t,n,i){return this._picking.clampToHeight(this,e,t,n,i)},Re.prototype.sampleHeightMostDetailed=function(e,t,n){return this._picking.sampleHeightMostDetailed(this,e,t,n)},Re.prototype.clampToHeightMostDetailed=function(e,t,n){return this._picking.clampToHeightMostDetailed(this,e,t,n)},Re.prototype.cartesianToCanvasCoordinates=function(e,t){return fe.A.worldToWindowCoordinates(this,e,t)},Re.prototype.completeMorph=function(){this._transitioner.completeMorph()},Re.prototype.morphTo2D=function(e){e=e??2,this._transitioner.morphTo2D(e,this._ellipsoid)},Re.prototype.morphToColumbusView=function(e){e=e??2,this._transitioner.morphToColumbusView(e,this._ellipsoid)},Re.prototype.morphTo3D=function(e){e=e??2,this._transitioner.morphTo3D(e,this._ellipsoid)},Re.prototype.setTerrain=function(e){return A.A.typeOf.object("terrain",e),function(e,t){e._removeTerrainProviderReadyListener=e._removeTerrainProviderReadyListener&&e._removeTerrainProviderReadyListener(),t.ready?(0,f.A)(e.globe)&&(e.globe.terrainProvider=t.provider):(e.globe.terrainProvider=void 0,e._removeTerrainProviderReadyListener=t.readyEvent.addEventListener(t=>{(0,f.A)(e)&&(0,f.A)(e.globe)&&(e.globe.terrainProvider=t),e._removeTerrainProviderReadyListener()}))}(this,e),e},Re.prototype.isDestroyed=function(){return!1},Re.prototype.destroy=function(){this._tweens.removeAll(),this._computeEngine=this._computeEngine&&this._computeEngine.destroy(),this._screenSpaceCameraController=this._screenSpaceCameraController&&this._screenSpaceCameraController.destroy(),this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this._primitives=this._primitives&&this._primitives.destroy(),this._groundPrimitives=this._groundPrimitives&&this._groundPrimitives.destroy(),this._globe=this._globe&&this._globe.destroy(),this._removeTerrainProviderReadyListener=this._removeTerrainProviderReadyListener&&this._removeTerrainProviderReadyListener(),this.skyBox=this.skyBox&&this.skyBox.destroy(),this.skyAtmosphere=this.skyAtmosphere&&this.skyAtmosphere.destroy(),this._debugSphere=this._debugSphere&&this._debugSphere.destroy(),this.sun=this.sun&&this.sun.destroy(),this._sunPostProcess=this._sunPostProcess&&this._sunPostProcess.destroy(),this._depthPlane=this._depthPlane&&this._depthPlane.destroy(),this._transitioner=this._transitioner&&this._transitioner.destroy(),this._debugFrustumPlanes=this._debugFrustumPlanes&&this._debugFrustumPlanes.destroy(),this._brdfLutGenerator=this._brdfLutGenerator&&this._brdfLutGenerator.destroy(),this._picking=this._picking&&this._picking.destroy(),this._defaultView=this._defaultView&&this._defaultView.destroy(),this._view=void 0,this._removeCreditContainer&&this._canvas.parentNode.removeChild(this._creditContainer),this.postProcessStages=this.postProcessStages&&this.postProcessStages.destroy(),this._context=this._context&&this._context.destroy(),this._frameState.creditDisplay=this._frameState.creditDisplay&&this._frameState.creditDisplay.destroy(),(0,f.A)(this._performanceDisplay)&&(this._performanceDisplay=this._performanceDisplay&&this._performanceDisplay.destroy(),this._performanceContainer.parentNode.removeChild(this._performanceContainer)),this._removeRequestListenerCallback(),this._removeTaskProcessorListenerCallback();for(let e=0;e<this._removeGlobeCallbacks.length;++e)this._removeGlobeCallbacks[e]();return this._removeGlobeCallbacks.length=0,(0,f.A)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),(0,p.A)(this)};const Rt=Re},413285:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(41476),o=n(677354),r=n(769493),a=n(804701),s=n(57775);function A(){this._numSamples=1,this._colorFramebuffer=new a.A({depthStencil:!0,supportsDepthTexture:!0}),this._idFramebuffer=new a.A({depthStencil:!0,supportsDepthTexture:!0}),this._idClearColor=new i.A(0,0,0,0),this._clearCommand=new r.A({color:new i.A(0,0,0,0),depth:1,owner:this})}Object.defineProperties(A.prototype,{framebuffer:{get:function(){return this._colorFramebuffer.framebuffer}},idFramebuffer:{get:function(){return this._idFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._colorFramebuffer.getDepthStencilTexture()}}}),A.prototype.update=function(e,t,n,i){const o=t.width,r=t.height,a=n?e.halfFloatingPointTexture?s.A.HALF_FLOAT:s.A.FLOAT:s.A.UNSIGNED_BYTE;this._numSamples=i,this._colorFramebuffer.update(e,o,r,i,a),this._idFramebuffer.update(e,o,r)},A.prototype.clear=function(e,t,n){i.A.clone(n,this._clearCommand.color),i.A.clone(this._idClearColor,this._clearCommand.color),this._colorFramebuffer.clear(e,this._clearCommand,t),this._idFramebuffer.clear(e,this._clearCommand,t)},A.prototype.getFramebuffer=function(){return this._colorFramebuffer.framebuffer},A.prototype.getIdFramebuffer=function(){return this._idFramebuffer.framebuffer},A.prototype.prepareColorTextures=function(e){this._numSamples>1&&this._colorFramebuffer.prepareTextures(e)},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){var e;return(e=this)._colorFramebuffer.destroy(),e._idFramebuffer.destroy(),(0,o.A)(this)};const c=A},619872:(e,t,n)=>{"use strict";n.d(t,{A:()=>ve});var i=n(267980),o=n(336946),r=n(369031),a=n(491446),s=n(677354),A=n(924290),c=n(367817),l=n(584164),u=n(811203),d=n(65891),h=n(666775),g=n(766067),f=n(86881),p=n(149785),m=n(543622),_=n(635577),I=n(62467);function E(e){r.A.typeOf.object("scene",e),this._scene=e,this._currentTweens=[],this._morphHandler=void 0,this._morphCancelled=!1,this._completeMorph=void 0,this._morphToOrthographic=!1}E.prototype.completeMorph=function(){(0,a.A)(this._completeMorph)&&this._completeMorph()},E.prototype.morphTo2D=function(e,t){(0,a.A)(this._completeMorph)&&this._completeMorph();const n=this._scene;this._previousMode=n.mode,this._morphToOrthographic=n.camera.frustum instanceof u.A,this._previousMode!==I.A.SCENE2D&&this._previousMode!==I.A.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,I.A.SCENE2D,!0),n._mode=I.A.MORPHING,n.camera._setTransform(l.A.IDENTITY),this._previousMode===I.A.COLUMBUS_VIEW?function(e,t){t*=.5;const n=e._scene,o=n.camera,r=i.A.clone(o.position,ie),s=i.A.clone(o.direction,oe),c=i.A.clone(o.up,re),u=i.A.negate(i.A.UNIT_Z,se),d=i.A.clone(i.A.UNIT_Y,Ae),h=ae;if(t>0)i.A.clone(i.A.ZERO,ae),h.z=5*n.ellipsoid.maximumRadius;else{i.A.clone(r,ae);const e=le;l.A.multiplyByPoint(_.A.TRANSFORM_2D,r,e.origin),l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D,s,e.direction);const t=n.globe;if((0,a.A)(t)){const o=t.pickWorldCoordinates(e,n,!0,ue);(0,a.A)(o)&&(l.A.multiplyByPoint(_.A.TRANSFORM_2D_INVERSE,o,h),h.z+=i.A.distance(r,h))}}const g=ce;g.right=.5*h.z,g.left=-g.right,g.top=g.right*(n.drawingBufferHeight/n.drawingBufferWidth),g.bottom=-g.top;const f=de;f.position=h,f.direction=u,f.up=d,f.frustum=g;const p=Be(f);function m(e,t){e.position.z=t}L(e,p);const I=n.tweens.add({duration:t,easingFunction:A.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(r,h,e.time,o.position),te(s,u,e.time,o.direction),te(c,d,e.time,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right),o._adjustOrthographicFrustum(!0)},complete:function(){ne(e,t,f,m,p)}});e._currentTweens.push(I)}(this,e):function(e,t,n){t*=.5;const o=e._scene,r=o.camera,s=ge;if(t>0)i.A.clone(i.A.ZERO,s.position),s.position.z=5*n.maximumRadius,i.A.negate(i.A.UNIT_Z,s.direction),i.A.clone(i.A.UNIT_Y,s.up);else{n.cartesianToCartographic(r.positionWC,he),o.mapProjection.project(he,s.position),i.A.negate(i.A.UNIT_Z,s.direction),i.A.clone(i.A.UNIT_Y,s.up);const e=me;i.A.clone(s.position2D,e.origin);const t=i.A.clone(r.directionWC,e.direction),A=n.scaleToGeodeticSurface(r.positionWC,Ie),c=m.A.eastNorthUpToFixedFrame(A,n,_e);l.A.inverseTransformation(c,c),l.A.multiplyByPointAsVector(c,t,t),l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D,t,t);const u=o.globe;if((0,a.A)(u)){const t=u.pickWorldCoordinates(e,o,!0,pe);if((0,a.A)(t)){const e=i.A.distance(s.position2D,t);t.x+=e,i.A.clone(t,s.position2D)}}}function A(e,t){e.position.x=t}l.A.multiplyByPoint(_.A.TRANSFORM_2D,s.position,s.position2D),l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D,s.direction,s.direction2D),l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D,s.up,s.up2D);const c=s.frustum;c.right=.5*s.position.z,c.left=-c.right,c.top=c.right*(o.drawingBufferHeight/o.drawingBufferWidth),c.bottom=-c.top;const u=fe;l.A.multiplyByPoint(_.A.TRANSFORM_2D_INVERSE,s.position2D,u.position),i.A.clone(s.direction,u.direction),i.A.clone(s.up,u.up),u.frustum=c;const d=Be(u);L(e,d),ye(e,t,s,function(){ne(e,t,s,A,d)})}(this,e,t),0===e&&(0,a.A)(this._completeMorph)&&this._completeMorph())};const y=new i.A,C=new i.A,b=new i.A,B=new i.A,v=new i.A,w=new i.A,T=new i.A,S=new o.A,x=new l.A,D=new h.A,Q=new u.A,N={position:void 0,direction:void 0,up:void 0,position2D:void 0,direction2D:void 0,up2D:void 0,frustum:void 0};E.prototype.morphToColumbusView=function(e,t){(0,a.A)(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode===I.A.COLUMBUS_VIEW||this._previousMode===I.A.MORPHING)return;this._scene.morphStart.raiseEvent(this,this._previousMode,I.A.COLUMBUS_VIEW,!0),n.camera._setTransform(l.A.IDENTITY);let o=y;const r=C,s=b;if(e>0)o.x=0,o.y=-1,o.z=1,o=i.A.multiplyByScalar(i.A.normalize(o,o),5*t.maximumRadius,o),i.A.negate(i.A.normalize(o,r),r),i.A.cross(i.A.UNIT_X,r,s);else{const e=n.camera;if(this._previousMode===I.A.SCENE2D)i.A.clone(e.position,o),o.z=e.frustum.right-e.frustum.left,i.A.negate(i.A.UNIT_Z,r),i.A.clone(i.A.UNIT_Y,s);else{i.A.clone(e.positionWC,o),i.A.clone(e.directionWC,r),i.A.clone(e.upWC,s);const a=t.scaleToGeodeticSurface(o,T),A=m.A.eastNorthUpToFixedFrame(a,t,x);l.A.inverseTransformation(A,A),n.mapProjection.project(t.cartesianToCartographic(o,S),o),l.A.multiplyByPointAsVector(A,r,r),l.A.multiplyByPointAsVector(A,s,s)}}let u;this._morphToOrthographic?(u=Q,u.width=n.camera.frustum.right-n.camera.frustum.left,u.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight):(u=D,u.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,u.fov=c.A.toRadians(60));const d=N;d.position=o,d.direction=r,d.up=s,d.frustum=u;const h=function(e){return function(t){const n=t._scene;n._mode=I.A.COLUMBUS_VIEW,n.morphTime=I.A.getMorphTime(I.A.COLUMBUS_VIEW),P(t);const o=n.camera;(t._previousModeMode!==I.A.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,i.A.clone(e.position,o.position),i.A.clone(e.direction,o.direction),i.A.clone(e.up,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right));const r=o.frustum;n.frameState.useLogDepth&&(r.near=.1,r.far=1e10);const s=(0,a.A)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,I.A.COLUMBUS_VIEW,s)}}(d);L(this,h),this._previousMode===I.A.SCENE2D?function(e,t,n,o){t*=.5;const r=e._scene,a=r.camera,s=i.A.clone(n.position,Z),c=i.A.clone(n.direction,$),l=i.A.clone(n.up,ee);function u(){a.frustum=n.frustum.clone();const u=i.A.clone(a.position,J),d=i.A.clone(a.direction,K),h=i.A.clone(a.up,X);u.z=s.z;const g=r.tweens.add({duration:t,easingFunction:A.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(u,s,e.time,a.position),te(d,c,e.time,a.direction),te(h,l,e.time,a.up),i.A.cross(a.direction,a.up,a.right),i.A.normalize(a.right,a.right)},complete:function(){o(e)}});e._currentTweens.push(g)}r._mode=I.A.MORPHING,e._morphToOrthographic?u():Ee(e,0,n,u)}(this,e,d,h):(d.position2D=l.A.multiplyByPoint(_.A.TRANSFORM_2D,o,B),d.direction2D=l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D,r,v),d.up2D=l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D,s,w),n._mode=I.A.MORPHING,ye(this,e,d,h)),0===e&&(0,a.A)(this._completeMorph)&&this._completeMorph()};const R={position:new i.A,direction:new i.A,up:new i.A,frustum:void 0},M=new h.A;function L(e,t){if(e._scene.completeMorphOnUserInput){e._morphHandler=new f.A(e._scene.canvas);const n=function(){e._morphCancelled=!0,e._scene.camera.cancelFlight(),t(e)};e._completeMorph=n,e._morphHandler.setInputAction(n,p.A.LEFT_DOWN),e._morphHandler.setInputAction(n,p.A.MIDDLE_DOWN),e._morphHandler.setInputAction(n,p.A.RIGHT_DOWN),e._morphHandler.setInputAction(n,p.A.WHEEL)}}function P(e){const t=e._currentTweens;for(let e=0;e<t.length;++e)t[e].cancelTween();e._currentTweens.length=0,e._morphHandler=e._morphHandler&&e._morphHandler.destroy()}E.prototype.morphTo3D=function(e,t){(0,a.A)(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode!==I.A.SCENE3D&&this._previousMode!==I.A.MORPHING){if(this._scene.morphStart.raiseEvent(this,this._previousMode,I.A.SCENE3D,!0),n._mode=I.A.MORPHING,n.camera._setTransform(l.A.IDENTITY),this._previousMode===I.A.SCENE2D)!function(e,t,n){t/=3;const o=e._scene,r=o.camera;let a,s;t>0?(a=R,i.A.fromDegrees(0,0,5*n.maximumRadius,n,a.position),i.A.negate(a.position,a.direction),i.A.normalize(a.direction,a.direction),i.A.clone(i.A.UNIT_Z,a.up)):(r.position.z=r.frustum.right-r.frustum.left,a=k(e,n)),e._morphToOrthographic?(s=W,s.aspectRatio=o.drawingBufferWidth/o.drawingBufferHeight,s.width=r.frustum.right-r.frustum.left):(s=M,s.aspectRatio=o.drawingBufferWidth/o.drawingBufferHeight,s.fov=c.A.toRadians(60)),a.frustum=s;const A=be(a);let l;L(e,A),l=e._morphToOrthographic?function(){q(e,t,a,A)}:function(){Ee(e,t,a,function(){q(e,t,a,A)})},t>0?(o._mode=I.A.SCENE2D,r.flyTo({duration:t,destination:i.A.fromDegrees(0,0,5*n.maximumRadius,n,Z),complete:function(){o._mode=I.A.MORPHING,l()}})):l()}(this,e,t);else{let o,r;e>0?(o=R,i.A.fromDegrees(0,0,5*t.maximumRadius,t,o.position),i.A.negate(o.position,o.direction),i.A.normalize(o.direction,o.direction),i.A.clone(i.A.UNIT_Z,o.up)):o=k(this,t);const a=n.camera;a.frustum instanceof u.A?r=a.frustum.clone():(r=M,r.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,r.fov=c.A.toRadians(60)),o.frustum=r;const s=be(o);L(this,s),q(this,e,o,s)}0===e&&(0,a.A)(this._completeMorph)&&this._completeMorph()}},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return P(this),(0,s.A)(this)};const O=new o.A,F=new i.A,U=new l.A;function k(e,t){const n=e._scene,i=n.camera,o=R,r=o.position,a=o.direction,s=o.up,A=n.mapProjection.unproject(i.position,O);t.cartographicToCartesian(A,r);const c=t.scaleToGeodeticSurface(r,F),u=m.A.eastNorthUpToFixedFrame(c,t,U);return l.A.multiplyByPointAsVector(u,i.direction,a),l.A.multiplyByPointAsVector(u,i.up,s),o}const G=new i.A,H=new i.A,V=new i.A,z=new i.A,j=new i.A,Y=new i.A;function q(e,t,n,o){t*=.5;const r=e._scene,a=r.camera,s=i.A.clone(a.position,G),c=i.A.clone(a.direction,H),u=i.A.clone(a.up,V),d=l.A.multiplyByPoint(_.A.TRANSFORM_2D_INVERSE,n.position,z),h=l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D_INVERSE,n.direction,j),g=l.A.multiplyByPointAsVector(_.A.TRANSFORM_2D_INVERSE,n.up,Y),f=r.tweens.add({duration:t,easingFunction:A.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(s,d,e.time,a.position),te(c,h,e.time,a.direction),te(u,g,e.time,a.up),i.A.cross(a.direction,a.up,a.right),i.A.normalize(a.right,a.right)},complete:function(){Ce(e,r,0,1,t,o)}});e._currentTweens.push(f)}const W=new u.A,J=new i.A,K=new i.A,X=new i.A,Z=new i.A,$=new i.A,ee=new i.A;function te(e,t,n,o){return i.A.lerp(e,t,n,o)}function ne(e,t,n,i,o){const r=e._scene,a=r.camera;if(a.frustum instanceof u.A)return;const s=a.frustum.fov,l=.5*c.A.RADIANS_PER_DEGREE,d=n.position.z*Math.tan(.5*s);a.frustum.far=d/Math.tan(.5*l)+1e7;const h=r.tweens.add({duration:t,easingFunction:A.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){a.frustum.fov=c.A.lerp(s,l,e.time);const t=d/Math.tan(.5*a.frustum.fov);i(a,t)},complete:function(){a.frustum=n.frustum.clone(),o(e)}});e._currentTweens.push(h)}const ie=new i.A,oe=new i.A,re=new i.A,ae=new i.A,se=new i.A,Ae=new i.A,ce=new d.A,le=new g.A,ue=new i.A,de={position:void 0,direction:void 0,up:void 0,frustum:void 0},he=new o.A,ge={position:new i.A,direction:new i.A,up:new i.A,position2D:new i.A,direction2D:new i.A,up2D:new i.A,frustum:new d.A},fe={position:new i.A,direction:new i.A,up:new i.A,frustum:void 0},pe=new i.A,me=new g.A,_e=new l.A,Ie=new i.A;function Ee(e,t,n,i){const o=e._scene,r=o.camera,a=r.frustum.right-r.frustum.left;r.frustum=n.frustum.clone();const s=r.frustum.fov,l=.5*c.A.RADIANS_PER_DEGREE,u=a*Math.tan(.5*s);r.frustum.far=u/Math.tan(.5*l)+1e7,r.frustum.fov=l;const d=o.tweens.add({duration:t,easingFunction:A.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){r.frustum.fov=c.A.lerp(l,s,e.time),r.position.z=u/Math.tan(.5*r.frustum.fov)},complete:function(){i(e)}});e._currentTweens.push(d)}function ye(e,t,n,o){const r=e._scene,a=r.camera,s=i.A.clone(a.position,J),c=i.A.clone(a.direction,K),l=i.A.clone(a.up,X),u=i.A.clone(n.position2D,Z),d=i.A.clone(n.direction2D,$),h=i.A.clone(n.up2D,ee),g=r.tweens.add({duration:t,easingFunction:A.A.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:function(e){te(s,u,e.time,a.position),te(c,d,e.time,a.direction),te(l,h,e.time,a.up),i.A.cross(a.direction,a.up,a.right),i.A.normalize(a.right,a.right),a._adjustOrthographicFrustum(!0)},complete:function(){Ce(e,r,1,0,t,o)}});e._currentTweens.push(g)}function Ce(e,t,n,i,o,r){const s={object:t,property:"morphTime",startValue:n,stopValue:i,duration:o,easingFunction:A.A.QUARTIC_OUT};(0,a.A)(r)&&(s.complete=function(){r(e)});const c=t.tweens.addProperty(s);e._currentTweens.push(c)}function be(e){return function(t){const n=t._scene;n._mode=I.A.SCENE3D,n.morphTime=I.A.getMorphTime(I.A.SCENE3D),P(t);const o=n.camera;(t._previousMode!==I.A.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,i.A.clone(e.position,o.position),i.A.clone(e.direction,o.direction),i.A.clone(e.up,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right),o.frustum=e.frustum.clone());const r=o.frustum;n.frameState.useLogDepth&&(r.near=.1,r.far=1e10);const s=(0,a.A)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,I.A.SCENE3D,s)}}function Be(e){return function(t){const n=t._scene;n._mode=I.A.SCENE2D,n.morphTime=I.A.getMorphTime(I.A.SCENE2D),P(t);const o=n.camera;i.A.clone(e.position,o.position),o.position.z=2*n.ellipsoid.maximumRadius,i.A.clone(e.direction,o.direction),i.A.clone(e.up,o.up),i.A.cross(o.direction,o.up,o.right),i.A.normalize(o.right,o.right),o.frustum=e.frustum.clone();const r=(0,a.A)(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,I.A.SCENE2D,r)}}const ve=E},373749:(e,t,n)=>{"use strict";n.d(t,{A:()=>tn});var i=n(434067),o=n(267980),r=n(626809),a=n(336946),s=n(491446),A=n(677354),c=n(605971),l=n(610750),u=n(953612),d=n(150429),h=n(267465),g=n(367817),f=n(331185),p=n(584164),m=n(811203),_=n(257941),I=n(99479),E=n(766067),y=n(717339),C=n(543622),b=n(985888),B=n(927181),v=n(77879),w=n(62467),T=n(78173),S=n(584247);function x(e){if(!(0,s.A)(e))throw new c.A("scene is required.");this.enableInputs=!0,this.enableTranslate=!0,this.enableZoom=!0,this.enableRotate=!0,this.enableTilt=!0,this.enableLook=!0,this.inertiaSpin=.9,this.inertiaTranslate=.9,this.inertiaZoom=.8,this.maximumMovementRatio=.1,this.bounceAnimationTime=3,this.minimumZoomDistance=1,this.maximumZoomDistance=Number.POSITIVE_INFINITY,this.zoomFactor=5,this.translateEventTypes=B.A.LEFT_DRAG,this.zoomEventTypes=[B.A.RIGHT_DRAG,B.A.WHEEL,B.A.PINCH],this.rotateEventTypes=B.A.LEFT_DRAG,this.tiltEventTypes=[B.A.MIDDLE_DRAG,B.A.PINCH,{eventType:B.A.LEFT_DRAG,modifier:h.A.CTRL},{eventType:B.A.RIGHT_DRAG,modifier:h.A.CTRL}],this.lookEventTypes={eventType:B.A.LEFT_DRAG,modifier:h.A.SHIFT};const t=e.ellipsoid??l.A.default;this.minimumPickingTerrainHeight=l.A.WGS84.equals(t)?15e4:.025*t.minimumRadius,this._minimumPickingTerrainHeight=this.minimumPickingTerrainHeight,this.minimumPickingTerrainDistanceWithInertia=l.A.WGS84.equals(t)?4e3:63e-5*t.minimumRadius,this.minimumCollisionTerrainHeight=l.A.WGS84.equals(t)?15e3:.0025*t.minimumRadius,this._minimumCollisionTerrainHeight=this.minimumCollisionTerrainHeight,this.minimumTrackBallHeight=l.A.WGS84.equals(t)?75e5:1.175*t.minimumRadius,this._minimumTrackBallHeight=this.minimumTrackBallHeight,this.enableCollisionDetection=!0,this.maximumTiltAngle=void 0,this._scene=e,this._globe=void 0,this._ellipsoid=t,this._lastGlobeHeight=0,this._aggregator=new b.A(e.canvas),this._lastInertiaSpinMovement=void 0,this._lastInertiaZoomMovement=void 0,this._lastInertiaTranslateMovement=void 0,this._lastInertiaTiltMovement=void 0,this._inertiaDisablers={_lastInertiaZoomMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement","_lastInertiaTiltMovement"],_lastInertiaTiltMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement"]},this._tweens=new S.A,this._tween=void 0,this._horizontalRotationAxis=void 0,this._tiltCenterMousePosition=new i.A(-1,-1),this._tiltCenter=new o.A,this._rotateMousePosition=new i.A(-1,-1),this._rotateStartPosition=new o.A,this._strafeStartPosition=new o.A,this._strafeMousePosition=new i.A,this._strafeEndMousePosition=new i.A,this._zoomMouseStart=new i.A(-1,-1),this._zoomWorldPosition=new o.A,this._useZoomWorldPosition=!1,this._panLastMousePosition=new i.A,this._panLastWorldPosition=new o.A,this._tiltCVOffMap=!1,this._looking=!1,this._rotating=!1,this._strafing=!1,this._zoomingOnVector=!1,this._zoomingUnderground=!1,this._rotatingZoom=!1,this._adjustedHeightForTerrain=!1,this._cameraUnderground=!1;const n=e.mapProjection;this._maxCoord=n.project(new a.A(Math.PI,g.A.PI_OVER_TWO)),this._rotateFactor=void 0,this._rotateRateRangeAdjustment=void 0,this._maximumRotateRate=1.77,this._minimumRotateRate=2e-4,this._minimumZoomRate=20,this._maximumZoomRate=5906376272e3,this._minimumUndergroundPickDistance=2e3,this._maximumUndergroundPickDistance=1e4}function D(e,t,n,o,r,a,A){let c=a[A];(0,s.A)(c)||(c=a[A]={startPosition:new i.A,endPosition:new i.A,motion:new i.A,inertiaEnabled:!0});const l=e.getButtonPressTime(t,n),u=e.getButtonReleaseTime(t,n),d=l&&u&&(u.getTime()-l.getTime())/1e3,h=new Date,f=u&&(h.getTime()-u.getTime())/1e3;if(l&&u&&d<.4){const A=function(e,t){if(e<0)return 0;const n=25*(1-t);return Math.exp(-n*e)}(f,o),l=e.getLastMovement(t,n);if(!(0,s.A)(l)||(p=l,i.A.equalsEpsilon(p.startPosition,p.endPosition,g.A.EPSILON14))||!c.inertiaEnabled)return;if(c.motion.x=.5*(l.endPosition.x-l.startPosition.x),c.motion.y=.5*(l.endPosition.y-l.startPosition.y),c.startPosition=i.A.clone(l.startPosition,c.startPosition),c.endPosition=i.A.multiplyByScalar(c.motion,A,c.endPosition),c.endPosition=i.A.add(c.startPosition,c.endPosition,c.endPosition),isNaN(c.endPosition.x)||isNaN(c.endPosition.y)||i.A.distance(c.startPosition,c.endPosition)<.5)return;e.isButtonDown(t,n)||r(a,e.getStartMousePosition(t,n),c)}var p}function Q(e,t){if((0,s.A)(t)){let n=e[t];(0,s.A)(n)&&(n.inertiaEnabled=!0);const i=e._inertiaDisablers[t];if((0,s.A)(i)){const t=i.length;for(let o=0;o<t;++o)n=e[i[o]],(0,s.A)(n)&&(n.inertiaEnabled=!1)}}}const N=[];function R(e,t,n,i,o,r){if(!(0,s.A)(n))return;const a=e._aggregator;Array.isArray(n)||(N[0]=n,n=N);const A=n.length;for(let c=0;c<A;++c){const A=n[c],l=(0,s.A)(A.eventType)?A.eventType:A,u=A.modifier,d=a.isMoving(l,u)&&a.getMovement(l,u),h=a.getStartMousePosition(l,u);e.enableInputs&&t&&(d?(i(e,h,d),Q(e,r)):o<1&&D(a,l,u,o,i,e,r))}}const M=new E.A,L=new o.A,P=new i.A,O=new o.A,F=new i.A,U=new o.A,k=new o.A,G=new o.A,H=new o.A,V=new o.A,z=new o.A,j=new o.A,Y=new o.A,q=new o.A,W=new o.A,J=new o.A,K=new o.A,X=new o.A,Z=new o.A,$=new o.A,ee=new o.A,te=new o.A,ne=new o.A,ie={orientation:new u.A};function oe(e,t,n,r,a,A){let c=1;(0,s.A)(A)&&(c=g.A.clamp(Math.abs(A),.25,1));const l=n.endPosition.y-n.startPosition.y,u=l>0?e.minimumZoomDistance*c:0,d=e.maximumZoomDistance;let h=r*(a-u);h=g.A.clamp(h,e._minimumZoomRate,e._maximumZoomRate);let f=l/e._scene.canvas.clientHeight;f=Math.min(f,e.maximumMovementRatio);let p=h*f;if(e.enableCollisionDetection||0===e.minimumZoomDistance||!(0,s.A)(e._globe)){if(p>0&&Math.abs(a-u)<1)return;if(p<0&&Math.abs(a-d)<1)return;a-p<u?p=a-u-1:a-p>d&&(p=a-d)}const m=e._scene,_=m.camera,I=m.mode,E=ie.orientation;E.heading=_.heading,E.pitch=_.pitch,E.roll=_.roll;const y=n.inertiaEnabled??i.A.equals(t,e._zoomMouseStart);let C,b=e._zoomingOnVector,B=e._rotatingZoom;if(y||(e._zoomMouseStart=i.A.clone(t,e._zoomMouseStart),(0,s.A)(e._globe)&&I===w.A.SCENE2D?(C=_.getPickRay(t,M).origin,C=o.A.fromElements(C.y,C.z,C.x)):(0,s.A)(e._globe)&&(C=pe(e,t,L)),(0,s.A)(C)?(e._useZoomWorldPosition=!0,e._zoomWorldPosition=o.A.clone(C,e._zoomWorldPosition)):e._useZoomWorldPosition=!1,b=e._zoomingOnVector=!1,B=e._rotatingZoom=!1,e._zoomingUnderground=e._cameraUnderground),!e._useZoomWorldPosition)return void _.zoomIn(p);let v=I===w.A.COLUMBUS_VIEW;if(_.positionCartographic.height<2e6&&(B=!0),!y||B){if(I===w.A.SCENE2D){const n=e._zoomWorldPosition,i=_.position;if(!o.A.equals(n,i)&&_.positionCartographic.height<2*e._maxCoord.x){const r=_.position.x,a=o.A.subtract(n,i,O);o.A.normalize(a,a);const s=o.A.distance(n,i)*p/(.5*_.getMagnitude());_.move(a,.5*s),(_.position.x<0&&r>0||_.position.x>0&&r<0)&&(C=_.getPickRay(t,M).origin,C=o.A.fromElements(C.y,C.z,C.x),e._zoomWorldPosition=o.A.clone(C,e._zoomWorldPosition))}}else if(I===w.A.SCENE3D){const t=o.A.normalize(_.position,V);if(e._cameraUnderground||e._zoomingUnderground||_.positionCartographic.height<3e3&&Math.abs(o.A.dot(_.direction,t))<.6)v=!0;else{const n=m.canvas,i=F;i.x=n.clientWidth/2,i.y=n.clientHeight/2;const r=pe(e,i,U);if((0,s.A)(r))if(_.positionCartographic.height<1e6){if(!(o.A.dot(_.direction,t)>=-.5)){const n=j;o.A.clone(_.position,n);const i=e._zoomWorldPosition;let r=z;if(r=o.A.normalize(i,r),o.A.dot(r,t)<0)return;const a=$,s=W;o.A.clone(_.direction,s),o.A.add(n,o.A.multiplyByScalar(s,1e3,ee),a);const A=J,c=K;o.A.subtract(i,n,A),o.A.normalize(A,c);const l=o.A.dot(t,c);if(l>=0)return void(e._zoomMouseStart.x=-1);const u=Math.acos(-l),d=o.A.magnitude(n),h=o.A.magnitude(i),f=d-p,m=o.A.magnitude(A),I=Math.asin(g.A.clamp(m/h*Math.sin(u),-1,1))-Math.asin(g.A.clamp(f/h*Math.sin(u),-1,1))+u,E=Y;o.A.normalize(n,E);let y=q;y=o.A.cross(c,E,y),y=o.A.normalize(y,y),o.A.normalize(o.A.cross(E,y,ee),s),o.A.multiplyByScalar(o.A.normalize(a,ee),o.A.magnitude(a)-p,a),o.A.normalize(n,n),o.A.multiplyByScalar(n,f,n);const C=X;o.A.multiplyByScalar(o.A.add(o.A.multiplyByScalar(E,Math.cos(I)-1,te),o.A.multiplyByScalar(s,Math.sin(I),ne),ee),f,C),o.A.add(n,C,n),o.A.normalize(a,E),o.A.normalize(o.A.cross(E,y,ee),s);const b=Z;return o.A.multiplyByScalar(o.A.add(o.A.multiplyByScalar(E,Math.cos(I)-1,te),o.A.multiplyByScalar(s,Math.sin(I),ne),ee),o.A.magnitude(a),b),o.A.add(a,b,a),o.A.clone(n,_.position),o.A.normalize(o.A.subtract(a,n,ee),_.direction),o.A.clone(_.direction,_.direction),o.A.cross(_.direction,_.up,_.right),o.A.cross(_.right,_.direction,_.up),void _.setView(ie)}v=!0}else{const t=o.A.normalize(r,k),n=o.A.normalize(e._zoomWorldPosition,G),i=o.A.dot(n,t);if(i>0&&i<1){const e=g.A.acosClamped(i),r=o.A.cross(n,t,H),a=p/(Math.abs(e)>g.A.toRadians(20)?.75*_.positionCartographic.height:_.positionCartographic.height-p);_.rotate(r,e*a)}}else v=!0}}e._rotatingZoom=!v}if(!y&&v||b){let n;const r=T.A.worldToWindowCoordinates(m,e._zoomWorldPosition,P);n=I!==w.A.COLUMBUS_VIEW&&i.A.equals(t,e._zoomMouseStart)&&(0,s.A)(r)?_.getPickRay(r,M):_.getPickRay(t,M);const a=n.direction;I!==w.A.COLUMBUS_VIEW&&I!==w.A.SCENE2D||o.A.fromElements(a.y,a.z,a.x,a),_.move(a,p),e._zoomingOnVector=!0}else _.zoomIn(p);e._cameraUnderground||_.setView(ie)}const re=new E.A,ae=new E.A,se=new o.A;function Ae(e,t,n){const i=e._scene.camera;let r=i.getPickRay(n.startPosition,re).origin,a=i.getPickRay(n.endPosition,ae).origin;r=o.A.fromElements(r.y,r.z,r.x,r),a=o.A.fromElements(a.y,a.z,a.x,a);const s=o.A.subtract(r,a,se),A=o.A.magnitude(s);A>0&&(o.A.normalize(s,s),i.move(s,A))}function ce(e,t,n){(0,s.A)(n.distance)&&(n=n.distance);const i=e._scene.camera;oe(e,t,n,e.zoomFactor,i.getMagnitude())}const le=new i.A,ue=new i.A;function de(e,t,n){if((0,s.A)(n.angleAndHeight))return void function(e,t,n){let i=e._rotateFactor*e._rotateRateRangeAdjustment;i>e._maximumRotateRate&&(i=e._maximumRotateRate),i<e._minimumRotateRate&&(i=e._minimumRotateRate);const o=e._scene,r=o.camera,a=o.canvas;let s=(n.endPosition.x-n.startPosition.x)/a.clientWidth;s=Math.min(s,e.maximumMovementRatio);const A=i*s*Math.PI*4;r.twistRight(A)}(e,0,n.angleAndHeight);const o=e._scene,r=o.camera,a=o.canvas,A=a.clientWidth,c=a.clientHeight;let l=le;l.x=2/A*n.startPosition.x-1,l.y=2/c*(c-n.startPosition.y)-1,l=i.A.normalize(l,l);let u=ue;u.x=2/A*n.endPosition.x-1,u.y=2/c*(c-n.endPosition.y)-1,u=i.A.normalize(u,u);let d=g.A.acosClamped(l.x);l.y<0&&(d=g.A.TWO_PI-d);let h=g.A.acosClamped(u.x);u.y<0&&(h=g.A.TWO_PI-h);const f=h-d;r.twistRight(f)}const he=new E.A,ge=new o.A,fe=new o.A;function pe(e,t,n){const i=e._scene,r=e._globe,a=i.camera;let A;if(i.pickPositionSupported&&(A=i.pickPositionWorldCoordinates(t,ge)),!(0,s.A)(r))return o.A.clone(A,n);const c=!e._cameraUnderground,l=a.getPickRay(t,he),u=r.pickWorldCoordinates(l,i,c,fe);return((0,s.A)(A)?o.A.distance(A,a.positionWC):Number.POSITIVE_INFINITY)<((0,s.A)(u)?o.A.distance(u,a.positionWC):Number.POSITIVE_INFINITY)?o.A.clone(A,n):o.A.clone(u,n)}const me=new a.A;function _e(e){const t=e._ellipsoid,n=e._scene,i=n.camera;let o=0;if(n.mode===w.A.SCENE3D){const e=t.cartesianToCartographic(i.position,me);(0,s.A)(e)&&(o=e.height)}else o=i.position.z;const r=e._scene.globeHeight??0;return Math.abs(r-o)}const Ie=new o.A;function Ee(e,t){const n=t.origin,i=t.direction,r=_e(e),a=o.A.normalize(n,Ie);let s=Math.abs(o.A.dot(a,i));return s=2*Math.max(s,.5),r*s}function ye(e,t,n,i){let r=o.A.distance(t.origin,n);const a=_e(e);return r>g.A.clamp(5*a,e._minimumUndergroundPickDistance,e._maximumUndergroundPickDistance)&&(r=Math.min(r,a/5),r=Math.max(r,100)),E.A.getPoint(t,r,i)}function Ce(e,t,n,i){let r;return(0,s.A)(n)?(r=o.A.distance(t.origin,n),r>e._maximumUndergroundPickDistance&&(r=_e(e))):r=_e(e),E.A.getPoint(t,r,i)}const be=new i.A;function Be(e,t){const n=t.endPosition,o=i.A.subtract(t.endPosition,t.startPosition,be),r=e._strafeEndMousePosition;i.A.add(r,o,r),t.endPosition=r,ot(e,t,e._strafeStartPosition),t.endPosition=n}const ve=new E.A,we=new E.A,Te=new o.A,Se=new o.A,xe=new o.A,De=new o.A,Qe=new _.A(o.A.UNIT_X,0),Ne=new i.A,Re=new i.A;function Me(e,t,n){if(o.A.equals(t,e._translateMousePosition)||(e._looking=!1),o.A.equals(t,e._strafeMousePosition)||(e._strafing=!1),e._looking)return void Jt(e,0,n);if(e._strafing)return void Be(e,n);const r=e._scene.camera,a=e._cameraUnderground,A=i.A.clone(n.startPosition,Ne),c=i.A.clone(n.endPosition,Re);let l=r.getPickRay(A,ve);const u=o.A.clone(o.A.ZERO,De),h=o.A.UNIT_X;let f;if(r.position.z<e._minimumPickingTerrainHeight&&(f=pe(e,A,Te),(0,s.A)(f)&&(u.x=f.x)),a||u.x>r.position.z&&(0,s.A)(f)){let r=f;return a&&(r=Ce(e,l,f,Te)),i.A.clone(t,e._strafeMousePosition),i.A.clone(t,e._strafeEndMousePosition),o.A.clone(r,e._strafeStartPosition),e._strafing=!0,void ot(e,n,e._strafeStartPosition)}const p=_.A.fromPointNormal(u,h,Qe);l=r.getPickRay(A,ve);const m=d.A.rayPlane(l,p,Te),I=r.getPickRay(c,we),E=d.A.rayPlane(I,p,Se);if(!(0,s.A)(m)||!(0,s.A)(E))return e._looking=!0,Jt(e,0,n),void i.A.clone(t,e._translateMousePosition);const y=o.A.subtract(m,E,xe),C=y.x;y.x=y.y,y.y=y.z,y.z=C;const b=o.A.magnitude(y);b>g.A.EPSILON6&&(o.A.normalize(y,y),r.move(y,b))}const Le=new i.A,Pe=new E.A,Oe=new o.A,Fe=new o.A,Ue=new p.A,ke=new p.A,Ge=new o.A,He=new _.A(o.A.UNIT_X,0),Ve=new o.A,ze=new a.A,je=new p.A,Ye=new I.A,qe=new f.A,We=new o.A;function Je(e,t,n){if((0,s.A)(n.angleAndHeight)&&(n=n.angleAndHeight),i.A.equals(t,e._tiltCenterMousePosition)||(e._tiltCVOffMap=!1,e._looking=!1),e._looking)return void Jt(e,0,n);const r=e._scene.camera;e._tiltCVOffMap||!e.onMap()||Math.abs(r.position.z)>e._minimumPickingTerrainHeight?(e._tiltCVOffMap=!0,function(e,t,n){const r=e._scene,a=r.camera,A=r.canvas,c=Le;c.x=A.clientWidth/2,c.y=A.clientHeight/2;const u=a.getPickRay(c,Pe),d=o.A.UNIT_X,h=u.origin,f=u.direction;let m;const _=o.A.dot(d,f);if(Math.abs(_)>g.A.EPSILON6&&(m=-o.A.dot(d,h)/_),!(0,s.A)(m)||m<=0)return e._looking=!0,Jt(e,0,n),void i.A.clone(t,e._tiltCenterMousePosition);const I=o.A.multiplyByScalar(f,m,Oe);o.A.add(h,I,I);const E=r.mapProjection,y=E.ellipsoid;o.A.fromElements(I.y,I.z,I.x,I);const b=E.unproject(I,ze);y.cartographicToCartesian(b,I);const B=C.A.eastNorthUpToFixedFrame(I,y,Ue),v=e._globe,w=e._ellipsoid;e._globe=void 0,e._ellipsoid=l.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const T=p.A.clone(a.transform,je);a._setTransform(B),ht(e,0,n,o.A.UNIT_Z),a._setTransform(T),e._globe=v,e._ellipsoid=w;const S=w.maximumRadius;e._rotateFactor=1/S,e._rotateRateRangeAdjustment=S}(e,t,n)):function(e,t,n){const r=e._scene,a=r.camera,A=e._cameraUnderground;let c,u;const h=o.A.UNIT_X;if(i.A.equals(t,e._tiltCenterMousePosition))c=o.A.clone(e._tiltCenter,Oe);else{if(a.position.z<e._minimumPickingTerrainHeight&&(c=pe(e,t,Oe)),!(0,s.A)(c)){u=a.getPickRay(t,Pe);const r=u.origin,A=u.direction;let l;const d=o.A.dot(h,A);if(Math.abs(d)>g.A.EPSILON6&&(l=-o.A.dot(h,r)/d),!(0,s.A)(l)||l<=0)return e._looking=!0,Jt(e,0,n),void i.A.clone(t,e._tiltCenterMousePosition);c=o.A.multiplyByScalar(A,l,Oe),o.A.add(r,c,c)}A&&((0,s.A)(u)||(u=a.getPickRay(t,Pe)),ye(e,u,c,c)),i.A.clone(t,e._tiltCenterMousePosition),o.A.clone(c,e._tiltCenter)}const m=r.canvas,E=Le;E.x=m.clientWidth/2,E.y=e._tiltCenterMousePosition.y,u=a.getPickRay(E,Pe);const y=o.A.clone(o.A.ZERO,Ge);y.x=c.x;const b=_.A.fromPointNormal(y,h,He),B=d.A.rayPlane(u,b,Fe),v=a._projection,w=v.ellipsoid;o.A.fromElements(c.y,c.z,c.x,c);let T=v.unproject(c,ze);w.cartographicToCartesian(T,c);const S=C.A.eastNorthUpToFixedFrame(c,w,Ue);let x;(0,s.A)(B)?(o.A.fromElements(B.y,B.z,B.x,B),T=v.unproject(B,ze),w.cartographicToCartesian(T,B),x=C.A.eastNorthUpToFixedFrame(B,w,ke)):x=S;const D=e._globe,Q=e._ellipsoid;e._globe=void 0,e._ellipsoid=l.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let N=o.A.UNIT_Z;const R=p.A.clone(a.transform,je);a._setTransform(S);const M=o.A.cross(o.A.UNIT_Z,o.A.normalize(a.position,Ve),Ve),L=o.A.dot(a.right,M);if(ht(e,0,n,N,!1,!0),a._setTransform(x),L<0){const t=n.startPosition.y-n.endPosition.y;(A&&t<0||!A&&t>0)&&(N=void 0);const i=a.constrainedAxis;a.constrainedAxis=void 0,ht(e,0,n,N,!0,!1),a.constrainedAxis=i}else ht(e,0,n,N,!0,!1);if((0,s.A)(a.constrainedAxis)){const e=o.A.cross(a.direction,a.constrainedAxis,We);o.A.equalsEpsilon(e,o.A.ZERO,g.A.EPSILON6)||(o.A.dot(e,a.right)<0&&o.A.negate(e,e),o.A.cross(e,a.direction,a.up),o.A.cross(a.direction,a.up,a.right),o.A.normalize(a.up,a.up),o.A.normalize(a.right,a.right))}a._setTransform(R),e._globe=D,e._ellipsoid=Q;const P=Q.maximumRadius;e._rotateFactor=1/P,e._rotateRateRangeAdjustment=P;const O=o.A.clone(a.positionWC,Ve);if(e.enableCollisionDetection&&Zt(e,!0),!o.A.equals(a.positionWC,O)){a._setTransform(x),a.worldToCameraCoordinatesPoint(O,O);const e=o.A.magnitudeSquared(O);o.A.magnitudeSquared(a.position)>e&&(o.A.normalize(a.position,a.position),o.A.multiplyByScalar(a.position,Math.sqrt(e),a.position));const t=o.A.angleBetween(O,a.position),n=o.A.cross(O,a.position,O);o.A.normalize(n,n);const i=I.A.fromAxisAngle(n,t,Ye),r=f.A.fromQuaternion(i,qe);f.A.multiplyByVector(r,a.direction,a.direction),f.A.multiplyByVector(r,a.up,a.up),o.A.cross(a.direction,a.up,a.right),o.A.cross(a.right,a.direction,a.up),a._setTransform(R)}}(e,t,n)}const Ke=new i.A,Xe=new E.A,Ze=new o.A;function $e(e,t,n){(0,s.A)(n.distance)&&(n=n.distance);const i=e._scene,r=i.camera,a=i.canvas,A=e._cameraUnderground;let c;A?c=t:(c=Ke,c.x=a.clientWidth/2,c.y=a.clientHeight/2);const l=r.getPickRay(c,Xe),u=l.origin,d=l.direction;let h,g;if(r.position.z<e._minimumPickingTerrainHeight&&(h=pe(e,c,Ze)),(0,s.A)(h)&&(g=o.A.distance(u,h)),A){const t=Ee(e,l);g=(0,s.A)(g)?Math.min(g,t):t}if(!(0,s.A)(g)){const e=o.A.UNIT_X;g=-o.A.dot(e,u)/o.A.dot(e,d)}oe(e,t,n,e.zoomFactor,g)}const et=new E.A,tt=new _.A(o.A.UNIT_X,0),nt=new o.A,it=new o.A;function ot(e,t,n){const i=e._scene,r=i.camera,a=r.getPickRay(t.endPosition,et);let A=o.A.clone(r.direction,it);i.mode===w.A.COLUMBUS_VIEW&&o.A.fromElements(A.z,A.x,A.y,A);const c=_.A.fromPointNormal(n,A,tt),l=d.A.rayPlane(a,c,nt);(0,s.A)(l)&&(A=o.A.subtract(n,l,A),i.mode===w.A.COLUMBUS_VIEW&&o.A.fromElements(A.y,A.z,A.x,A),o.A.add(r.position,A,r.position))}const rt=new o.A,at=new a.A,st=new o.A,At=new l.A,ct=new o.A,lt=new o.A,ut=new o.A;function dt(e,t,n){const r=e._scene.camera,a=e._cameraUnderground;let A,c,u=e._ellipsoid;if(!p.A.equals(r.transform,p.A.IDENTITY))return void ht(e,0,n);const d=u.geodeticSurfaceNormal(r.position,ct);if(i.A.equals(t,e._rotateMousePosition)){if(e._looking)Jt(e,0,n,d);else if(e._rotating)ht(e,0,n);else if(e._strafing)Be(e,n);else{if(o.A.magnitude(r.position)<o.A.magnitude(e._rotateStartPosition))return;A=o.A.magnitude(e._rotateStartPosition),c=st,c.x=c.y=c.z=A,u=l.A.fromCartesian3(c,At),vt(e,0,n,u)}return}e._looking=!1,e._rotating=!1,e._strafing=!1;const h=u.cartesianToCartographic(r.positionWC,at).height,g=e._globe;if((0,s.A)(g)&&h<e._minimumPickingTerrainHeight){const h=pe(e,n.startPosition,ut);if((0,s.A)(h)){let s=!1;const d=r.getPickRay(n.startPosition,he);if(a)s=!0,Ce(e,d,h,h);else{const e=u.geodeticSurfaceNormal(h,lt);s=!!(Math.abs(o.A.dot(d.direction,e))<.05)||o.A.magnitude(r.position)<o.A.magnitude(h)}s?(i.A.clone(t,e._strafeEndMousePosition),o.A.clone(h,e._strafeStartPosition),e._strafing=!0,ot(e,n,e._strafeStartPosition)):(A=o.A.magnitude(h),c=st,c.x=c.y=c.z=A,u=l.A.fromCartesian3(c,At),vt(e,0,n,u),o.A.clone(h,e._rotateStartPosition))}else e._looking=!0,Jt(e,0,n,d)}else(0,s.A)(r.pickEllipsoid(n.startPosition,e._ellipsoid,rt))?(vt(e,0,n,e._ellipsoid),o.A.clone(rt,e._rotateStartPosition)):h>e._minimumTrackBallHeight?(e._rotating=!0,ht(e,0,n)):(e._looking=!0,Jt(e,0,n,d));i.A.clone(t,e._rotateMousePosition)}function ht(e,t,n,i,r,a){r=r??!1,a=a??!1;const A=e._scene,c=A.camera,l=A.canvas,u=c.constrainedAxis;(0,s.A)(i)&&(c.constrainedAxis=i);const d=o.A.magnitude(c.position);let h=e._rotateFactor*(d-e._rotateRateRangeAdjustment);h>e._maximumRotateRate&&(h=e._maximumRotateRate),h<e._minimumRotateRate&&(h=e._minimumRotateRate);let g=(n.startPosition.x-n.endPosition.x)/l.clientWidth,f=(n.startPosition.y-n.endPosition.y)/l.clientHeight;g=Math.min(g,e.maximumMovementRatio),f=Math.min(f,e.maximumMovementRatio);const p=h*g*Math.PI*2;let m=h*f*Math.PI;if((0,s.A)(i)&&(0,s.A)(e.maximumTiltAngle)){const t=e.maximumTiltAngle,n=o.A.dot(c.direction,i),r=Math.PI-Math.acos(n)+m;r>t&&(m-=r-t)}r||c.rotateRight(p),a||c.rotateUp(m),c.constrainedAxis=u}const gt=r.A.clone(r.A.UNIT_W),ft=r.A.clone(r.A.UNIT_W),pt=new o.A,mt=new o.A,_t=new o.A,It=new o.A,Et=new i.A,yt=new i.A,Ct=new i.A,bt=new i.A,Bt=new E.A;function vt(e,t,n,r){const a=e._scene,A=a.camera,c=i.A.clone(n.startPosition,Et),l=i.A.clone(n.endPosition,yt),u=r.cartesianToCartographic(A.positionWC,at).height;let d,h;if(!n.inertiaEnabled&&u<e._minimumPickingTerrainHeight&&(d=o.A.clone(e._panLastWorldPosition,gt),(0,s.A)(e._globe)||i.A.equalsEpsilon(c,e._panLastMousePosition)||(d=pe(e,c,gt)),!(0,s.A)(e._globe)&&(0,s.A)(d))){const t=o.A.subtract(d,A.positionWC,mt),n=o.A.multiplyByScalar(A.directionWC,o.A.dot(A.directionWC,t),mt),r=o.A.magnitude(n),u=A.frustum.getPixelDimensions(a.drawingBufferWidth,a.drawingBufferHeight,r,a.pixelRatio,bt),g=i.A.subtract(l,c,Ct),f=o.A.multiplyByScalar(A.rightWC,g.x*u.x,mt),p=o.A.normalize(A.positionWC,V),m=A.getPickRay(l,Bt).direction,_=o.A.subtract(m,o.A.projectVector(m,A.rightWC,_t),_t),I=o.A.angleBetween(_,A.directionWC);let E=1;(0,s.A)(A.frustum.fov)&&(E=Math.max(Math.tan(I),.1));let y=Math.abs(o.A.dot(A.directionWC,p));const C=-g.y*u.y*2/Math.sqrt(E)*(1-y),b=o.A.multiplyByScalar(m,C,_t);y=Math.abs(o.A.dot(A.upWC,p));const B=o.A.multiplyByScalar(A.upWC,-g.y*(1-y)*u.y,It);h=o.A.add(d,f,ft),h=o.A.add(h,b,h),h=o.A.add(h,B,h),o.A.clone(h,e._panLastWorldPosition),i.A.clone(l,e._panLastMousePosition)}if((0,s.A)(d)&&(0,s.A)(h)||(d=A.pickEllipsoid(c,r,gt),h=A.pickEllipsoid(l,r,ft)),!(0,s.A)(d)||!(0,s.A)(h))return e._rotating=!0,void ht(e,0,n);if(d=A.worldToCameraCoordinates(d,d),h=A.worldToCameraCoordinates(h,h),(0,s.A)(A.constrainedAxis)){const e=A.constrainedAxis,t=o.A.mostOrthogonalAxis(e,pt);o.A.cross(t,e,t),o.A.normalize(t,t);const n=o.A.cross(e,t,mt),i=o.A.magnitude(d),r=o.A.dot(e,d),a=Math.acos(r/i),s=o.A.multiplyByScalar(e,r,_t);o.A.subtract(d,s,s),o.A.normalize(s,s);const c=o.A.magnitude(h),l=o.A.dot(e,h),u=Math.acos(l/c),f=o.A.multiplyByScalar(e,l,It);o.A.subtract(h,f,f),o.A.normalize(f,f);let p=Math.acos(o.A.dot(s,t));o.A.dot(s,n)<0&&(p=g.A.TWO_PI-p);let m=Math.acos(o.A.dot(f,t));o.A.dot(f,n)<0&&(m=g.A.TWO_PI-m);const _=p-m;let I;I=o.A.equalsEpsilon(e,A.position,g.A.EPSILON2)?A.right:o.A.cross(e,A.position,pt);const E=o.A.cross(e,I,pt),y=o.A.dot(E,o.A.subtract(d,e,mt)),C=o.A.dot(E,o.A.subtract(h,e,mt));let b;b=y>0&&C>0?u-a:y>0&&C<=0?o.A.dot(A.position,e)>0?-a-u:a+u:a-u,A.rotateRight(_),A.rotateUp(b)}else{o.A.normalize(d,d),o.A.normalize(h,h);const e=o.A.dot(d,h),t=o.A.cross(d,h,pt);if(e<1&&!o.A.equalsEpsilon(t,o.A.ZERO,g.A.EPSILON14)){const n=Math.acos(e);A.rotate(t,n)}}}const wt=new o.A,Tt=new a.A;let St=0;function xt(e,t,n){(0,s.A)(n.distance)&&(n=n.distance);const i=n.inertiaEnabled,r=e._ellipsoid,a=e._scene,A=a.camera,c=a.canvas,l=e._cameraUnderground;let u;l?u=t:(u=Ke,u.x=c.clientWidth/2,u.y=c.clientHeight/2);const d=A.getPickRay(u,Xe);let h;const g=r.cartesianToCartographic(A.position,Tt).height,f=Math.abs(St)<e.minimumPickingTerrainDistanceWithInertia;let p;if((i?f:g<e._minimumPickingTerrainHeight)&&(h=pe(e,u,Ze)),(0,s.A)(h)&&(p=o.A.distance(d.origin,h),St=p),l){const t=Ee(e,d);p=(0,s.A)(p)?Math.min(p,t):t}(0,s.A)(p)||(p=g);const m=o.A.normalize(A.position,wt);oe(e,t,n,e.zoomFactor,p,o.A.dot(m,A.direction))}const Dt=new i.A,Qt=new E.A,Nt=new o.A,Rt=new o.A,Mt=new p.A,Lt=new p.A,Pt=new p.A,Ot=new I.A,Ft=new f.A,Ut=new a.A,kt=new o.A;function Gt(e,t,n){const r=e._scene.camera;if(!p.A.equals(r.transform,p.A.IDENTITY))return;if((0,s.A)(n.angleAndHeight)&&(n=n.angleAndHeight),i.A.equals(t,e._tiltCenterMousePosition)||(e._tiltOnEllipsoid=!1,e._looking=!1),e._looking){const t=e._ellipsoid.geodeticSurfaceNormal(r.position,kt);return void Jt(e,0,n,t)}const a=e._ellipsoid.cartesianToCartographic(r.position,Ut);e._tiltOnEllipsoid||a.height>e._minimumCollisionTerrainHeight?(e._tiltOnEllipsoid=!0,function(e,t,n){const r=e._ellipsoid,a=e._scene,A=a.camera,c=.25*e.minimumZoomDistance,u=r.cartesianToCartographic(A.positionWC,Ht).height;if(u-c-1<g.A.EPSILON3&&n.endPosition.y-n.startPosition.y<0)return;const h=a.canvas,f=Dt;f.x=h.clientWidth/2,f.y=h.clientHeight/2;const m=A.getPickRay(f,Qt);let _;const I=d.A.rayEllipsoid(m,r);if((0,s.A)(I))_=E.A.getPoint(m,I.start,Nt);else{if(!(u>e._minimumTrackBallHeight)){e._looking=!0;const o=e._ellipsoid.geodeticSurfaceNormal(A.position,kt);return Jt(e,0,n,o),void i.A.clone(t,e._tiltCenterMousePosition)}{const e=d.A.grazingAltitudeLocation(m,r);if(!(0,s.A)(e))return;const t=r.cartesianToCartographic(e,Ut);t.height=0,_=r.cartographicToCartesian(t,Nt)}}const y=C.A.eastNorthUpToFixedFrame(_,r,Mt),b=e._globe,B=e._ellipsoid;e._globe=void 0,e._ellipsoid=l.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const v=p.A.clone(A.transform,Pt);A._setTransform(y),ht(e,0,n,o.A.UNIT_Z),A._setTransform(v),e._globe=b,e._ellipsoid=B;const w=B.maximumRadius;e._rotateFactor=1/w,e._rotateRateRangeAdjustment=w}(e,t,n)):function(e,t,n){const r=e._ellipsoid,a=e._scene,A=a.camera,c=e._cameraUnderground;let u,h,m;if(i.A.equals(t,e._tiltCenterMousePosition))u=o.A.clone(e._tiltCenter,Nt);else{if(u=pe(e,t,Nt),!(0,s.A)(u)){if(h=A.getPickRay(t,Qt),m=d.A.rayEllipsoid(h,r),!(0,s.A)(m)){if(r.cartesianToCartographic(A.position,Ut).height<=e._minimumTrackBallHeight){e._looking=!0;const o=e._ellipsoid.geodeticSurfaceNormal(A.position,kt);Jt(e,0,n,o),i.A.clone(t,e._tiltCenterMousePosition)}return}u=E.A.getPoint(h,m.start,Nt)}c&&((0,s.A)(h)||(h=A.getPickRay(t,Qt)),ye(e,h,u,u)),i.A.clone(t,e._tiltCenterMousePosition),o.A.clone(u,e._tiltCenter)}const _=a.canvas,y=Dt;y.x=_.clientWidth/2,y.y=e._tiltCenterMousePosition.y,h=A.getPickRay(y,Qt);const b=o.A.magnitude(u),B=o.A.fromElements(b,b,b,st),v=l.A.fromCartesian3(B,At);if(m=d.A.rayEllipsoid(h,v),!(0,s.A)(m))return;const w=o.A.magnitude(h.origin)>b?m.start:m.stop,T=E.A.getPoint(h,w,Rt),S=C.A.eastNorthUpToFixedFrame(u,r,Mt),x=C.A.eastNorthUpToFixedFrame(T,v,Lt),D=e._globe,Q=e._ellipsoid;e._globe=void 0,e._ellipsoid=l.A.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let N=o.A.UNIT_Z;const R=p.A.clone(A.transform,Pt);A._setTransform(x);const M=o.A.cross(T,A.positionWC,We);if(o.A.dot(A.rightWC,M)<0){const t=n.startPosition.y-n.endPosition.y;(c&&t<0||!c&&t>0)&&(N=void 0);const i=A.constrainedAxis;A.constrainedAxis=void 0,ht(e,0,n,N,!0,!1),A.constrainedAxis=i}else ht(e,0,n,N,!0,!1);if(A._setTransform(S),ht(e,0,n,N,!1,!0),(0,s.A)(A.constrainedAxis)){const e=o.A.cross(A.direction,A.constrainedAxis,We);o.A.equalsEpsilon(e,o.A.ZERO,g.A.EPSILON6)||(o.A.dot(e,A.right)<0&&o.A.negate(e,e),o.A.cross(e,A.direction,A.up),o.A.cross(A.direction,A.up,A.right),o.A.normalize(A.up,A.up),o.A.normalize(A.right,A.right))}A._setTransform(R),e._globe=D,e._ellipsoid=Q;const L=Q.maximumRadius;e._rotateFactor=1/L,e._rotateRateRangeAdjustment=L;const P=o.A.clone(A.positionWC,We);if(e.enableCollisionDetection&&Zt(e,!0),!o.A.equals(A.positionWC,P)){A._setTransform(x),A.worldToCameraCoordinatesPoint(P,P);const e=o.A.magnitudeSquared(P);o.A.magnitudeSquared(A.position)>e&&(o.A.normalize(A.position,A.position),o.A.multiplyByScalar(A.position,Math.sqrt(e),A.position));const t=o.A.angleBetween(P,A.position),n=o.A.cross(P,A.position,P);o.A.normalize(n,n);const i=I.A.fromAxisAngle(n,t,Ot),r=f.A.fromQuaternion(i,Ft);f.A.multiplyByVector(r,A.direction,A.direction),f.A.multiplyByVector(r,A.up,A.up),o.A.cross(A.direction,A.up,A.right),o.A.cross(A.right,A.direction,A.up),A._setTransform(R)}}(e,t,n)}const Ht=new a.A,Vt=new i.A,zt=new i.A,jt=new E.A,Yt=new E.A,qt=new o.A,Wt=new o.A;function Jt(e,t,n,i){const r=e._scene.camera,a=Vt;a.x=n.startPosition.x,a.y=0;const A=zt;A.x=n.endPosition.x,A.y=0;let c,l,u=r.getPickRay(a,jt),d=r.getPickRay(A,Yt),h=0;r.frustum instanceof m.A?(c=u.origin,l=d.origin,o.A.add(r.direction,c,c),o.A.add(r.direction,l,l),o.A.subtract(c,r.position,c),o.A.subtract(l,r.position,l),o.A.normalize(c,c),o.A.normalize(l,l)):(c=u.direction,l=d.direction);let f=o.A.dot(c,l);f<1&&(h=Math.acos(f)),h=n.startPosition.x>n.endPosition.x?-h:h;const p=e._horizontalRotationAxis;if((0,s.A)(i)?r.look(i,-h):(0,s.A)(p)?r.look(p,-h):r.lookLeft(h),a.x=0,a.y=n.startPosition.y,A.x=0,A.y=n.endPosition.y,u=r.getPickRay(a,jt),d=r.getPickRay(A,Yt),h=0,r.frustum instanceof m.A?(c=u.origin,l=d.origin,o.A.add(r.direction,c,c),o.A.add(r.direction,l,l),o.A.subtract(c,r.position,c),o.A.subtract(l,r.position,l),o.A.normalize(c,c),o.A.normalize(l,l)):(c=u.direction,l=d.direction),f=o.A.dot(c,l),f<1&&(h=Math.acos(f)),h=n.startPosition.y>n.endPosition.y?-h:h,i=i??p,(0,s.A)(i)){const e=r.direction,t=o.A.negate(i,qt),n=o.A.equalsEpsilon(e,i,g.A.EPSILON2),a=o.A.equalsEpsilon(e,t,g.A.EPSILON2);if(n||a)(n&&h<0||a&&h>0)&&r.look(r.right,-h);else{f=o.A.dot(e,i);let n=g.A.acosClamped(f);h>0&&h>n&&(h=n-g.A.EPSILON4),f=o.A.dot(e,t),n=g.A.acosClamped(f),h<0&&-h>n&&(h=-n+g.A.EPSILON4);const a=o.A.cross(i,e,Wt);r.look(a,h)}}else r.lookUp(h)}const Kt=new p.A,Xt=new a.A;function Zt(e,t){e._adjustedHeightForTerrain=!0;const n=e._scene,i=n.mode;if(i===w.A.SCENE2D||i===w.A.MORPHING)return;const r=n.camera,a=n.ellipsoid??l.A.WGS84,A=n.mapProjection;let c,u;p.A.equals(r.transform,p.A.IDENTITY)||(c=p.A.clone(r.transform,Kt),u=o.A.magnitude(r.position),r._setTransform(p.A.IDENTITY));const d=Xt;i===w.A.SCENE3D?a.cartesianToCartographic(r.position,d):A.unproject(r.position,d);let h=!1;if(d.height<e._minimumCollisionTerrainHeight){const n=e._scene.globeHeight;if((0,s.A)(n)){const o=n+e.minimumZoomDistance,s=n-e._lastGlobeHeight,c=s/e._lastGlobeHeight;d.height<o&&(t||Math.abs(c)<=.1)&&(d.height=o,i===w.A.SCENE3D?a.cartographicToCartesian(d,r.position):A.project(d,r.position),h=!0),t||Math.abs(c)<=.1?e._lastGlobeHeight=n:e._lastGlobeHeight+=.1*s}}(0,s.A)(c)&&(r._setTransform(c),h&&(o.A.normalize(r.position,r.position),o.A.negate(r.position,r.direction),o.A.multiplyByScalar(r.position,Math.max(u,e.minimumZoomDistance),r.position),o.A.normalize(r.direction,r.direction),o.A.cross(r.direction,r.up,r.right),o.A.cross(r.right,r.direction,r.up)))}x.prototype.onMap=function(){const e=this._scene,t=e.mode,n=e.camera;return t!==w.A.COLUMBUS_VIEW||Math.abs(n.position.x)-this._maxCoord.x<0&&Math.abs(n.position.y)-this._maxCoord.y<0};const $t=new o.A,en=new o.A;x.prototype.update=function(){const e=this._scene,{camera:t,globe:n,mode:i}=e;p.A.equals(t.transform,p.A.IDENTITY)?(this._globe=n,this._ellipsoid=e.ellipsoid??l.A.default):(this._globe=void 0,this._ellipsoid=l.A.UNIT_SPHERE);const{verticalExaggeration:r,verticalExaggerationRelativeHeight:a}=e;this._minimumCollisionTerrainHeight=y.A.getHeight(this.minimumCollisionTerrainHeight,r,a),this._minimumPickingTerrainHeight=y.A.getHeight(this.minimumPickingTerrainHeight,r,a),this._minimumTrackBallHeight=y.A.getHeight(this.minimumTrackBallHeight,r,a),this._cameraUnderground=e.cameraUnderground&&(0,s.A)(this._globe);const A=this._ellipsoid.maximumRadius;this._rotateFactor=1/A,this._rotateRateRangeAdjustment=A,this._adjustedHeightForTerrain=!1;const c=o.A.clone(t.positionWC,$t),u=o.A.clone(t.directionWC,en);var d;i===w.A.SCENE2D?function(e){const t=e._scene.mapMode2D===v.A.ROTATE;p.A.equals(p.A.IDENTITY,e._scene.camera.transform)?(R(e,e.enableTranslate,e.translateEventTypes,Ae,e.inertiaTranslate,"_lastInertiaTranslateMovement"),R(e,e.enableZoom,e.zoomEventTypes,ce,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&R(e,e.enableRotate,e.tiltEventTypes,de,e.inertiaSpin,"_lastInertiaTiltMovement")):(R(e,e.enableZoom,e.zoomEventTypes,ce,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&R(e,e.enableRotate,e.translateEventTypes,de,e.inertiaSpin,"_lastInertiaSpinMovement"))}(this):i===w.A.COLUMBUS_VIEW?(this._horizontalRotationAxis=o.A.UNIT_Z,function(e){const t=e._scene.camera;if(p.A.equals(p.A.IDENTITY,t.transform)){const n=e._tweens;if(e._aggregator.anyButtonDown&&n.removeAll(),R(e,e.enableTilt,e.tiltEventTypes,Je,e.inertiaSpin,"_lastInertiaTiltMovement"),R(e,e.enableTranslate,e.translateEventTypes,Me,e.inertiaTranslate,"_lastInertiaTranslateMovement"),R(e,e.enableZoom,e.zoomEventTypes,$e,e.inertiaZoom,"_lastInertiaZoomMovement"),R(e,e.enableLook,e.lookEventTypes,Jt),!e._aggregator.anyButtonDown&&!n.contains(e._tween)){const i=t.createCorrectPositionTween(e.bounceAnimationTime);(0,s.A)(i)&&(e._tween=n.add(i))}n.update()}else R(e,e.enableRotate,e.rotateEventTypes,ht,e.inertiaSpin,"_lastInertiaSpinMovement"),R(e,e.enableZoom,e.zoomEventTypes,xt,e.inertiaZoom,"_lastInertiaZoomMovement")}(this)):i===w.A.SCENE3D&&(this._horizontalRotationAxis=void 0,R(d=this,d.enableRotate,d.rotateEventTypes,dt,d.inertiaSpin,"_lastInertiaSpinMovement"),R(d,d.enableZoom,d.zoomEventTypes,xt,d.inertiaZoom,"_lastInertiaZoomMovement"),R(d,d.enableTilt,d.tiltEventTypes,Gt,d.inertiaSpin,"_lastInertiaTiltMovement"),R(d,d.enableLook,d.lookEventTypes,Jt)),this.enableCollisionDetection&&!this._adjustedHeightForTerrain&&Zt(this,!o.A.equals(c,t.positionWC)||!o.A.equals(u,t.directionWC)),this._aggregator.reset()},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._tweens.removeAll(),this._aggregator=this._aggregator&&this._aggregator.destroy(),(0,A.A)(this)};const tn=x},681750:(e,t,n)=>{"use strict";n.d(t,{A:()=>De});var i=n(647934),o=n(660662),r=n(854894),a=n(434067),s=n(267980),A=n(626809),c=n(336946),l=n(376758),u=n(41476),d=n(433235),h=n(430346),g=n(400793),f=n(915325),p=n(491446),m=n(677354),_=n(605971),I=n(520098),E=n(75200),y=n(647326),C=n(367817),b=n(584164),B=n(65891),v=n(666775),w=n(276904),T=n(99479),S=n(6874),x=n(352581),D=n(769493),Q=n(430332),N=n(346154),R=n(377496),M=n(483128),L=n(760866),P=n(326429),O=n(57775),F=n(557053),U=n(100482),k=n(40118),G=n(654799),H=n(616e3),V=n(635577),z=n(527083),j=n(199744),Y=n(612123),q=n(842153),W=n(33559);function J(e){const t=(e=e??f.A.EMPTY_OBJECT).context;if(!(0,p.A)(t))throw new _.A("context is required.");if(!(0,p.A)(e.lightCamera))throw new _.A("lightCamera is required.");if((0,p.A)(e.numberOfCascades)&&1!==e.numberOfCascades&&4!==e.numberOfCascades)throw new _.A("Only one or four cascades are supported.");this._enabled=e.enabled??!0,this._softShadows=e.softShadows??!1,this._normalOffset=e.normalOffset??!0,this.dirty=!0,this.fromLightSource=e.fromLightSource??!0,this.darkness=e.darkness??.3,this._darkness=this.darkness,this.fadingEnabled=e.fadingEnabled??!0,this.maximumDistance=e.maximumDistance??5e3,this._outOfView=!1,this._outOfViewPrevious=!1,this._needsUpdate=!0;let n,i=!0;(I.A.isInternetExplorer()||I.A.isEdge()||(I.A.isChrome()||I.A.isFirefox())&&I.A.isWindows()&&!t.depthTexture)&&(i=!1),this._polygonOffsetSupported=i,this._terrainBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.5,normalShading:!0,normalShadingSmooth:.3,depthBias:1e-4},this._primitiveBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.1,normalShading:!0,normalShadingSmooth:.05,depthBias:2e-5},this._pointBias={polygonOffset:!1,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:0,normalShading:!0,normalShadingSmooth:.1,depthBias:5e-4},this._depthAttachment=void 0,this._colorAttachment=void 0,this._shadowMapMatrix=new b.A,this._shadowMapTexture=void 0,this._lightDirectionEC=new s.A,this._lightPositionEC=new A.A,this._distance=0,this._lightCamera=e.lightCamera,this._shadowMapCamera=new ce,this._shadowMapCullingVolume=void 0,this._sceneCamera=void 0,this._boundingSphere=new o.A,this._isPointLight=e.isPointLight??!1,this._pointLightRadius=e.pointLightRadius??100,this._cascadesEnabled=!this._isPointLight&&(e.cascadesEnabled??!0),this._numberOfCascades=this._cascadesEnabled?e.numberOfCascades??4:0,this._fitNearFar=!0,this._maximumCascadeDistances=[25,150,700,Number.MAX_VALUE],this._textureSize=new a.A,this._isSpotLight=!1,this._cascadesEnabled?this._shadowMapCamera.frustum=new B.A:(0,p.A)(this._lightCamera.frustum.fov)&&(this._isSpotLight=!0),this._cascadeSplits=[new A.A,new A.A],this._cascadeMatrices=[new b.A,new b.A,new b.A,new b.A],this._cascadeDistances=new A.A,n=this._isPointLight?6:this._cascadesEnabled?this._numberOfCascades:1,this._passes=new Array(n);for(let e=0;e<n;++e)this._passes[e]=new K(t);this.debugShow=!1,this.debugFreezeFrame=!1,this._debugFreezeFrame=!1,this._debugCascadeColors=!1,this._debugLightFrustum=void 0,this._debugCameraFrustum=void 0,this._debugCascadeFrustums=new Array(this._numberOfCascades),this._debugShadowViewCommand=void 0,this._usesDepthTexture=t.depthTexture,this._isPointLight&&(this._usesDepthTexture=!1),this._primitiveRenderState=void 0,this._terrainRenderState=void 0,this._pointRenderState=void 0,Z(this),this._clearCommand=new D.A({depth:1,color:new u.A}),this._clearPassState=new P.A(t),this._size=e.size??2048,this.size=this._size}function K(e){this.camera=new ce,this.passState=new P.A(e),this.framebuffer=void 0,this.textureOffsets=void 0,this.commandList=[],this.cullingVolume=void 0}function X(e,t){return k.A.fromCache({cull:{enabled:!0,face:z.A.BACK},depthTest:{enabled:!0},colorMask:{red:e,green:e,blue:e,alpha:e},depthMask:!0,polygonOffset:{enabled:t.polygonOffset,factor:t.polygonOffsetFactor,units:t.polygonOffsetUnits}})}function Z(e){const t=!e._usesDepthTexture;e._primitiveRenderState=X(t,e._primitiveBias),e._terrainRenderState=X(t,e._terrainBias),e._pointRenderState=X(t,e._pointBias)}function $(e){const t=e._passes.length;for(let n=0;n<t;++n){const t=e._passes[n],i=t.framebuffer;(0,p.A)(i)&&!i.isDestroyed()&&i.destroy(),t.framebuffer=void 0}e._depthAttachment=e._depthAttachment&&e._depthAttachment.destroy(),e._colorAttachment=e._colorAttachment&&e._colorAttachment.destroy()}function ee(e,t){e._isPointLight?function(e,t){const n=new F.A({context:t,width:e._textureSize.x,height:e._textureSize.y,format:U.A.DEPTH_COMPONENT16}),i=new N.A({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:w.A.RGBA,pixelDatatype:O.A.UNSIGNED_BYTE,sampler:G.A.NEAREST}),o=[i.negativeX,i.negativeY,i.negativeZ,i.positiveX,i.positiveY,i.positiveZ];for(let i=0;i<6;++i){const r=new M.A({context:t,depthRenderbuffer:n,colorTextures:[o[i]],destroyAttachments:!1}),a=e._passes[i];a.framebuffer=r,a.passState.framebuffer=r}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}(e,t):e._usesDepthTexture?function(e,t){const n=new H.A({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:w.A.DEPTH_STENCIL,pixelDatatype:O.A.UNSIGNED_INT_24_8,sampler:G.A.NEAREST}),i=new M.A({context:t,depthStencilTexture:n,destroyAttachments:!1}),o=e._passes.length;for(let t=0;t<o;++t){const n=e._passes[t];n.framebuffer=i,n.passState.framebuffer=i}e._shadowMapTexture=n,e._depthAttachment=n}(e,t):function(e,t){const n=new F.A({context:t,width:e._textureSize.x,height:e._textureSize.y,format:U.A.DEPTH_COMPONENT16}),i=new H.A({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:w.A.RGBA,pixelDatatype:O.A.UNSIGNED_BYTE,sampler:G.A.NEAREST}),o=new M.A({context:t,depthRenderbuffer:n,colorTextures:[i],destroyAttachments:!1}),r=e._passes.length;for(let t=0;t<r;++t){const n=e._passes[t];n.framebuffer=o,n.passState.framebuffer=o}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}(e,t)}function te(e,t,n){n=n??0,(e._isPointLight||0===n)&&(e._clearCommand.framebuffer=e._passes[n].framebuffer,e._clearCommand.execute(t,e._clearPassState))}J.MAXIMUM_DISTANCE=2e4,J.prototype.debugCreateRenderStates=function(){Z(this)},Object.defineProperties(J.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this.dirty=this._enabled!==e,this._enabled=e}},normalOffset:{get:function(){return this._normalOffset},set:function(e){this.dirty=this._normalOffset!==e,this._normalOffset=e,this._terrainBias.normalOffset=e,this._primitiveBias.normalOffset=e,this._pointBias.normalOffset=e}},softShadows:{get:function(){return this._softShadows},set:function(e){this.dirty=this._softShadows!==e,this._softShadows=e}},size:{get:function(){return this._size},set:function(e){!function(e,t){e._size=t;const n=e._passes,o=n.length,r=e._textureSize;if(e._isPointLight){t=Q.A.maximumCubeMapSize>=t?t:Q.A.maximumCubeMapSize,r.x=t,r.y=t;const e=new i.A(0,0,t,t);n[0].passState.viewport=e,n[1].passState.viewport=e,n[2].passState.viewport=e,n[3].passState.viewport=e,n[4].passState.viewport=e,n[5].passState.viewport=e}else 1===o?(t=Q.A.maximumTextureSize>=t?t:Q.A.maximumTextureSize,r.x=t,r.y=t,n[0].passState.viewport=new i.A(0,0,t,t)):4===o&&(t=Q.A.maximumTextureSize>=2*t?t:Q.A.maximumTextureSize/2,r.x=2*t,r.y=2*t,n[0].passState.viewport=new i.A(0,0,t,t),n[1].passState.viewport=new i.A(t,0,t,t),n[2].passState.viewport=new i.A(0,t,t,t),n[3].passState.viewport=new i.A(t,t,t,t));e._clearPassState.viewport=new i.A(0,0,r.x,r.y);for(let e=0;e<o;++e){const t=n[e],i=t.passState.viewport,o=i.x/r.x,a=i.y/r.y,s=i.width/r.x,A=i.height/r.y;t.textureOffsets=new b.A(s,0,0,o,0,A,0,a,0,0,1,0,0,0,0,1)}}(this,e)}},outOfView:{get:function(){return this._outOfView}},shadowMapCullingVolume:{get:function(){return this._shadowMapCullingVolume}},passes:{get:function(){return this._passes}},isPointLight:{get:function(){return this._isPointLight}},debugCascadeColors:{get:function(){return this._debugCascadeColors},set:function(e){this.dirty=this._debugCascadeColors!==e,this._debugCascadeColors=e}}});const ne=new i.A;const ie=new Array(8);ie[0]=new A.A(-1,-1,-1,1),ie[1]=new A.A(1,-1,-1,1),ie[2]=new A.A(1,1,-1,1),ie[3]=new A.A(-1,1,-1,1),ie[4]=new A.A(-1,-1,1,1),ie[5]=new A.A(1,-1,1,1),ie[6]=new A.A(1,1,1,1),ie[7]=new A.A(-1,1,1,1);const oe=new b.A,re=new Array(8);for(let e=0;e<8;++e)re[e]=new A.A;const ae=[u.A.RED,u.A.GREEN,u.A.BLUE,u.A.MAGENTA],se=new s.A;function Ae(e,t){!function(e,t){const n=t.context,o=t.context.drawingBufferWidth,r=t.context.drawingBufferHeight,a=.3*Math.min(o,r),s=ne;s.x=o-a,s.y=0,s.width=a,s.height=a;let A=e._debugShadowViewCommand;(0,p.A)(A)||(A=function(e,t){let n;n=e._isPointLight?"uniform samplerCube shadowMap_textureCube; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n    vec2 uv = v_textureCoordinates; \n    vec3 dir; \n \n    if (uv.y < 0.5) \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = -1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = -1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else \n        { \n            dir.z = -1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 1.0; \n        } \n    } \n    else \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = 1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = 1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else \n        { \n            dir.z = 1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 3.0; \n        } \n    } \n \n    float shadow = czm_unpackDepth(czm_textureCube(shadowMap_textureCube, dir)); \n    out_FragColor = vec4(vec3(shadow), 1.0); \n} \n":`uniform sampler2D shadowMap_texture; \nin vec2 v_textureCoordinates; \nvoid main() \n{ \n${e._usesDepthTexture?"    float shadow = texture(shadowMap_texture, v_textureCoordinates).r; \n":"    float shadow = czm_unpackDepth(texture(shadowMap_texture, v_textureCoordinates)); \n"}    out_FragColor = vec4(vec3(shadow), 1.0); \n} \n`;const i=t.createViewportQuadCommand(n,{uniformMap:{shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture}}});return i.pass=L.A.OVERLAY,i}(e,n),e._debugShadowViewCommand=A),(0,p.A)(A.renderState)&&i.A.equals(A.renderState.viewport,s)||(A.renderState=k.A.fromCache({viewport:i.A.clone(s)})),t.commandList.push(e._debugShadowViewCommand)}(e,t);const n=e.debugFreezeFrame&&!e._debugFreezeFrame;if(e._debugFreezeFrame=e.debugFreezeFrame,e.debugFreezeFrame&&(n&&(e._debugCameraFrustum=e._debugCameraFrustum&&e._debugCameraFrustum.destroy(),e._debugCameraFrustum=new j.A({camera:e._sceneCamera,color:u.A.CYAN,updateOnChange:!1})),e._debugCameraFrustum.update(t)),e._cascadesEnabled){if(e.debugFreezeFrame){n&&(e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=new j.A({camera:e._shadowMapCamera,color:u.A.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t);for(let i=0;i<e._numberOfCascades;++i)n&&(e._debugCascadeFrustums[i]=e._debugCascadeFrustums[i]&&e._debugCascadeFrustums[i].destroy(),e._debugCascadeFrustums[i]=new j.A({camera:e._passes[i].camera,color:ae[i],updateOnChange:!1})),e._debugCascadeFrustums[i].update(t)}}else if(e._isPointLight){if(!(0,p.A)(e._debugLightFrustum)||e._needsUpdate){const t=e._shadowMapCamera.positionWC,n=T.A.IDENTITY,i=2*e._pointLightRadius,o=s.A.fromElements(i,i,i,se),a=b.A.fromTranslationQuaternionRotationScale(t,n,o,oe);e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=function(e,t){const n=new E.A({geometry:new r.A({minimum:new s.A(-.5,-.5,-.5),maximum:new s.A(.5,.5,.5)}),attributes:{color:d.A.fromColor(t)}}),i=new E.A({geometry:new S.A({radius:.5}),attributes:{color:d.A.fromColor(t)}});return new q.A({geometryInstances:[n,i],appearance:new Y.A({translucent:!1,flat:!0}),asynchronous:!1,modelMatrix:e})}(a,u.A.YELLOW)}e._debugLightFrustum.update(t)}else(0,p.A)(e._debugLightFrustum)&&!e._needsUpdate||(e._debugLightFrustum=new j.A({camera:e._shadowMapCamera,color:u.A.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t)}function ce(){this.viewMatrix=new b.A,this.inverseViewMatrix=new b.A,this.frustum=void 0,this.positionCartographic=new c.A,this.positionWC=new s.A,this.directionWC=s.A.clone(s.A.UNIT_Z),this.upWC=s.A.clone(s.A.UNIT_Y),this.rightWC=s.A.clone(s.A.UNIT_X),this.viewProjectionMatrix=new b.A}ce.prototype.clone=function(e){b.A.clone(e.viewMatrix,this.viewMatrix),b.A.clone(e.inverseViewMatrix,this.inverseViewMatrix),this.frustum=e.frustum.clone(this.frustum),c.A.clone(e.positionCartographic,this.positionCartographic),s.A.clone(e.positionWC,this.positionWC),s.A.clone(e.directionWC,this.directionWC),s.A.clone(e.upWC,this.upWC),s.A.clone(e.rightWC,this.rightWC)};const le=new b.A(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);ce.prototype.getViewProjection=function(){const e=this.viewMatrix,t=this.frustum.projectionMatrix;return b.A.multiply(t,e,this.viewProjectionMatrix),b.A.multiply(le,this.viewProjectionMatrix,this.viewProjectionMatrix),this.viewProjectionMatrix};const ue=new Array(5),de=new v.A,he=new Array(4),ge=new s.A,fe=new s.A,pe=new b.A,me=new s.A,_e=new s.A,Ie=new s.A,Ee=[new s.A(-1,0,0),new s.A(0,-1,0),new s.A(0,0,-1),new s.A(1,0,0),new s.A(0,1,0),new s.A(0,0,1)],ye=[new s.A(0,-1,0),new s.A(0,0,-1),new s.A(0,-1,0),new s.A(0,-1,0),new s.A(0,0,1),new s.A(0,-1,0)],Ce=[new s.A(0,0,1),new s.A(1,0,0),new s.A(-1,0,0),new s.A(0,0,-1),new s.A(1,0,0),new s.A(1,0,0)],be=new s.A,Be=new s.A,ve=new o.A,we=ve.center;J.prototype.update=function(e){if(function(e,t){const n=t.camera,i=e._lightCamera,r=e._sceneCamera,a=e._shadowMapCamera;e._cascadesEnabled?s.A.clone(i.directionWC,a.directionWC):e._isPointLight?s.A.clone(i.positionWC,a.positionWC):a.clone(i);const A=e._lightDirectionEC;let c,l;b.A.multiplyByPointAsVector(n.viewMatrix,a.directionWC,A),s.A.normalize(A,A),s.A.negate(A,A),b.A.multiplyByPoint(n.viewMatrix,a.positionWC,e._lightPositionEC),e._lightPositionEC.w=e._pointLightRadius,e._fitNearFar?(c=Math.min(t.shadowState.nearPlane,e.maximumDistance),l=Math.min(t.shadowState.farPlane,e.maximumDistance),l=Math.max(l,c+1)):(c=n.frustum.near,l=e.maximumDistance),e._sceneCamera=V.A.clone(n,r),n.frustum.clone(e._sceneCamera.frustum),e._sceneCamera.frustum.near=c,e._sceneCamera.frustum.far=l,e._distance=l-c,function(e,t){const n=e._sceneCamera,i=e._shadowMapCamera,r=ve;if(e._cascadesEnabled){if(n.frustum.near>=e.maximumDistance)return e._outOfView=!0,void(e._needsUpdate=!1);const o=t.mapProjection.ellipsoid.geodeticSurfaceNormal(n.positionWC,be),r=s.A.negate(i.directionWC,Be),a=s.A.dot(o,r);if(e.fadingEnabled){const t=C.A.clamp(a/.1,0,1);e._darkness=C.A.lerp(1,e.darkness,t)}else e._darkness=e.darkness;if(a<0)return e._outOfView=!0,void(e._needsUpdate=!1);e._needsUpdate=!0,e._outOfView=!1}else if(e._isPointLight)r.center=i.positionWC,r.radius=e._pointLightRadius,e._outOfView=t.cullingVolume.computeVisibility(r)===y.A.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(r),o.A.clone(r,e._boundingSphere);else{const n=i.frustum.far/2,a=s.A.add(i.positionWC,s.A.multiplyByScalar(i.directionWC,n,we),we);r.center=a,r.radius=n,e._outOfView=t.cullingVolume.computeVisibility(r)===y.A.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(r),o.A.clone(r,e._boundingSphere)}}(e,t),!e._outOfViewPrevious&&e._outOfView&&(e._needsUpdate=!0),e._outOfViewPrevious=e._outOfView}(this,e),this._needsUpdate)if(t=this,n=e.context,(0,p.A)(t._passes[0].framebuffer)&&t._shadowMapTexture.width===t._textureSize.x||($(t),ee(t,n),function(e,t){e._usesDepthTexture&&e._passes[0].framebuffer.status!==x.A.FRAMEBUFFER_COMPLETE&&(e._usesDepthTexture=!1,Z(e),$(e),ee(e,t))}(t,n),te(t,n)),this._isPointLight&&function(e,t){const n=new v.A;n.fov=C.A.PI_OVER_TWO,n.near=1,n.far=e._pointLightRadius,n.aspectRatio=1;for(let i=0;i<6;++i){const o=e._passes[i].camera;o.positionWC=e._shadowMapCamera.positionWC,o.positionCartographic=t.mapProjection.ellipsoid.cartesianToCartographic(o.positionWC,o.positionCartographic),o.directionWC=Ee[i],o.upWC=ye[i],o.rightWC=Ce[i],b.A.computeView(o.positionWC,o.directionWC,o.upWC,o.rightWC,o.viewMatrix),b.A.inverse(o.viewMatrix,o.inverseViewMatrix),o.frustum=n}}(this,e),this._cascadesEnabled&&(function(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=b.A.multiply(i.frustum.projectionMatrix,i.viewMatrix,oe),r=b.A.inverse(o,oe),a=n.directionWC;let c=i.directionWC;s.A.equalsEpsilon(a,c,C.A.EPSILON10)&&(c=i.upWC);const l=s.A.cross(a,c,me);c=s.A.cross(l,a,_e),s.A.normalize(c,c),s.A.normalize(l,l);const u=s.A.fromElements(0,0,0,Ie);let d=b.A.computeView(u,a,c,l,pe);const h=b.A.multiply(d,r,oe),g=s.A.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,ge),f=s.A.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,fe);for(let e=0;e<8;++e){const t=A.A.clone(ie[e],re[e]);b.A.multiplyByVector(h,t,t),s.A.divideByScalar(t,t.w,t),s.A.minimumByComponent(t,g,g),s.A.maximumByComponent(t,f,f)}f.z+=1e3,g.z-=10;const p=Ie;p.x=-.5*(g.x+f.x),p.y=-.5*(g.y+f.y),p.z=-f.z;const m=b.A.fromTranslation(p,oe);d=b.A.multiply(m,d,d);const _=.5*(f.x-g.x),I=.5*(f.y-g.y),E=f.z-g.z,y=n.frustum;y.left=-_,y.right=_,y.bottom=-I,y.top=I,y.near=.01,y.far=E,b.A.clone(d,n.viewMatrix),b.A.inverse(d,n.inverseViewMatrix),b.A.getTranslation(n.inverseViewMatrix,n.positionWC),t.mapProjection.ellipsoid.cartesianToCartographic(n.positionWC,n.positionCartographic),s.A.clone(a,n.directionWC),s.A.clone(c,n.upWC),s.A.clone(l,n.rightWC)}(this,e),this._numberOfCascades>1&&function(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=i.frustum.near,r=i.frustum.far,a=e._numberOfCascades;let c;const l=r-o,u=r/o;let d=.9,h=!1;t.shadowState.closestObjectSize<200&&(h=!0,d=.9);const g=he,f=ue;for(f[0]=o,f[a]=r,c=0;c<a;++c){const e=(c+1)/a,t=o*Math.pow(u,e),n=o+l*e,i=C.A.lerp(n,t,d);f[c+1]=i,g[c]=i-f[c]}if(h){for(c=0;c<a;++c)g[c]=Math.min(g[c],e._maximumCascadeDistances[c]);let t=f[0];for(c=0;c<a-1;++c)t+=g[c],f[c+1]=t}A.A.unpack(f,0,e._cascadeSplits[0]),A.A.unpack(f,1,e._cascadeSplits[1]),A.A.unpack(g,0,e._cascadeDistances);const p=n.frustum,m=p.left,_=p.right,I=p.bottom,E=p.top,y=p.near,B=p.far,v=n.positionWC,w=n.directionWC,T=n.upWC,S=i.frustum.clone(de),x=n.getViewProjection();for(c=0;c<a;++c){S.near=f[c],S.far=f[c+1];const t=b.A.multiply(S.projectionMatrix,i.viewMatrix,oe),o=b.A.inverse(t,oe),r=b.A.multiply(x,o,oe),a=s.A.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,ge),l=s.A.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,fe);for(let e=0;e<8;++e){const t=A.A.clone(ie[e],re[e]);b.A.multiplyByVector(r,t,t),s.A.divideByScalar(t,t.w,t),s.A.minimumByComponent(t,a,a),s.A.maximumByComponent(t,l,l)}a.x=Math.max(a.x,0),a.y=Math.max(a.y,0),a.z=0,l.x=Math.min(l.x,1),l.y=Math.min(l.y,1),l.z=Math.min(l.z,1);const u=e._passes[c],d=u.camera;d.clone(n);const h=d.frustum;h.left=m+a.x*(_-m),h.right=m+l.x*(_-m),h.bottom=I+a.y*(E-I),h.top=I+l.y*(E-I),h.near=y+a.z*(B-y),h.far=y+l.z*(B-y),u.cullingVolume=d.frustum.computeCullingVolume(v,w,T);const g=e._cascadeMatrices[c];b.A.multiply(d.getViewProjection(),i.inverseViewMatrix,g),b.A.multiply(u.textureOffsets,g,g)}}(this,e)),this._isPointLight)this._shadowMapCullingVolume=g.A.fromBoundingSphere(this._boundingSphere);else{const e=this._shadowMapCamera,t=e.positionWC,n=e.directionWC,i=e.upWC;this._shadowMapCullingVolume=e.frustum.computeCullingVolume(t,n,i),1===this._passes.length&&this._passes[0].camera.clone(e)}var t,n;if(1===this._passes.length){const e=this._sceneCamera.inverseViewMatrix;b.A.multiply(this._shadowMapCamera.getViewProjection(),e,this._shadowMapMatrix)}this.debugShow&&Ae(this,e)},J.prototype.updatePass=function(e,t){te(this,e,t)};const Te=new a.A;function Se(e,t,n){const i=e._isPointLight?e._pointBias:n?e._terrainBias:e._primitiveBias,o={shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture},shadowMap_matrix:function(){return e._shadowMapMatrix},shadowMap_cascadeSplits:function(){return e._cascadeSplits},shadowMap_cascadeMatrices:function(){return e._cascadeMatrices},shadowMap_lightDirectionEC:function(){return e._lightDirectionEC},shadowMap_lightPositionEC:function(){return e._lightPositionEC},shadowMap_cascadeDistances:function(){return e._cascadeDistances},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const t=Te;return t.x=1/e._textureSize.x,t.y=1/e._textureSize.y,A.A.fromElements(t.x,t.y,i.depthBias,i.normalShadingSmooth,this.combinedUniforms1)},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){return A.A.fromElements(i.normalOffsetScale,e._distance,e.maximumDistance,e._darkness,this.combinedUniforms2)},combinedUniforms1:new A.A,combinedUniforms2:new A.A};return(0,h.A)(t,o,!1)}function xe(e,t,n,i,o,r){let a,s,A;if((0,p.A)(r)&&(a=r.shaderProgram,s=r.renderState,A=r.uniformMap),(r=R.A.shallowClone(n,r)).castShadows=!0,r.receiveShadows=!1,!(0,p.A)(a)||o!==n.shaderProgram.id||t){const t=n.shaderProgram,o=n.pass===L.A.GLOBE,r=n.pass!==L.A.TRANSLUCENT,c=e._isPointLight,u=e._usesDepthTexture,d=W.A.getShadowCastShaderKeyword(c,o,u,r);if(a=i.shaderCache.getDerivedShaderProgram(t,d),!(0,p.A)(a)){const e=t.vertexShaderSource,n=t.fragmentShaderSource,s=W.A.createShadowCastVertexShader(e,c,o),A=W.A.createShadowCastFragmentShader(n,c,u,r);a=i.shaderCache.createDerivedShaderProgram(t,d,{vertexShaderSource:s,fragmentShaderSource:A,attributeLocations:t._attributeLocations})}s=e._primitiveRenderState,c?s=e._pointRenderState:o&&(s=e._terrainRenderState),n.renderState.cull.enabled||(s=(0,l.A)(s,!1),s.cull=(0,l.A)(s.cull,!1),s.cull.enabled=!1,s=k.A.fromCache(s)),A=Se(e,n.uniformMap,o)}return r.shaderProgram=a,r.renderState=s,r.uniformMap=A,r}J.createReceiveDerivedCommand=function(e,t,n,i,o){(0,p.A)(o)||(o={});const r=e.length>0,a=t.shaderProgram,s=a.vertexShaderSource,A=a.fragmentShaderSource,c=t.pass===L.A.GLOBE;let l=!1;if(c&&(l=t.owner.data.renderedMesh.encoding.hasVertexNormals),t.receiveShadows&&r){let r,u;(0,p.A)(o.receiveCommand)&&(r=o.receiveCommand.shaderProgram,u=o.receiveCommand.uniformMap),o.receiveCommand=R.A.shallowClone(t,o.receiveCommand),o.castShadows=!1,o.receiveShadows=!0;const d=o.receiveShaderCastShadows!==t.castShadows,h=o.receiveShaderProgramId!==t.shaderProgram.id;if(!(0,p.A)(r)||h||n||d){const n=W.A.getShadowReceiveShaderKeyword(e[0],t.castShadows,c,l);if(r=i.shaderCache.getDerivedShaderProgram(a,n),!(0,p.A)(r)){const o=W.A.createShadowReceiveVertexShader(s,c,l),u=W.A.createShadowReceiveFragmentShader(A,e[0],t.castShadows,c,l);r=i.shaderCache.createDerivedShaderProgram(a,n,{vertexShaderSource:o,fragmentShaderSource:u,attributeLocations:a._attributeLocations})}u=Se(e[0],t.uniformMap,c)}o.receiveCommand.shaderProgram=r,o.receiveCommand.uniformMap=u,o.receiveShaderProgramId=t.shaderProgram.id,o.receiveShaderCastShadows=t.castShadows}return o},J.createCastDerivedCommand=function(e,t,n,i,o){if((0,p.A)(o)||(o={}),t.castShadows){let r=o.castCommands;(0,p.A)(r)||(r=o.castCommands=[]);const a=o.castShaderProgramId,s=e.length;r.length=s;for(let o=0;o<s;++o)r[o]=xe(e[o],n,t,i,a,r[o]);o.castShaderProgramId=t.shaderProgram.id}return o},J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){$(this),this._debugLightFrustum=this._debugLightFrustum&&this._debugLightFrustum.destroy(),this._debugCameraFrustum=this._debugCameraFrustum&&this._debugCameraFrustum.destroy(),this._debugShadowViewCommand=this._debugShadowViewCommand&&this._debugShadowViewCommand.shaderProgram&&this._debugShadowViewCommand.shaderProgram.destroy();for(let e=0;e<this._numberOfCascades;++e)this._debugCascadeFrustums[e]=this._debugCascadeFrustums[e]&&this._debugCascadeFrustums[e].destroy();return(0,m.A)(this)};const De=J},33559:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(342875);function r(){}r.getShadowCastShaderKeyword=function(e,t,n,i){return`castShadow ${e} ${t} ${n} ${i}`},r.createShadowCastVertexShader=function(e,t,n){const r=e.defines.slice(0),a=e.sources.slice(0);r.push("SHADOW_MAP"),n&&r.push("GENERATE_POSITION");const s=o.A.findPositionVarying(e),A=(0,i.A)(s);if(t&&!A){const e=a.length;for(let t=0;t<e;++t)a[t]=o.A.replaceMain(a[t],"czm_shadow_cast_main");const t="out vec3 v_positionEC; \nvoid main() \n{ \n    czm_shadow_cast_main(); \n    v_positionEC = (czm_inverseProjection * gl_Position).xyz; \n}";a.push(t)}return new o.A({defines:r,sources:a})},r.createShadowCastFragmentShader=function(e,t,n,r){const a=e.defines.slice(0),s=e.sources.slice(0);a.push("SHADOW_MAP");let A=o.A.findPositionVarying(e);const c=(0,i.A)(A);c||(A="v_positionEC");const l=s.length;for(let e=0;e<l;++e)s[e]=o.A.replaceMain(s[e],"czm_shadow_cast_main");let u="";return t&&(c||(u+="in vec3 v_positionEC; \n"),u+="uniform vec4 shadowMap_lightPositionEC; \n"),u+=r?"void main() \n{ \n":"void main() \n{ \n    czm_shadow_cast_main(); \n    if (out_FragColor.a == 0.0) \n    { \n       discard; \n    } \n",u+=t?`    float distance = length(${A}); \n    if (distance >= shadowMap_lightPositionEC.w) \n    { \n        discard; \n    } \n    distance /= shadowMap_lightPositionEC.w; // radius \n    out_FragColor = czm_packDepth(distance); \n`:n?"    out_FragColor = vec4(1.0); \n":"    out_FragColor = czm_packDepth(gl_FragCoord.z); \n",u+="} \n",s.push(u),new o.A({defines:a,sources:s})},r.getShadowReceiveShaderKeyword=function(e,t,n,i){return`receiveShadow ${e._usesDepthTexture}${e._polygonOffsetSupported}${e._isPointLight}${e._isSpotLight}${e._numberOfCascades>1}${e.debugCascadeColors}${e.softShadows}${t}${n}${i}`},r.createShadowReceiveVertexShader=function(e,t,n){const i=e.defines.slice(0),r=e.sources.slice(0);return i.push("SHADOW_MAP"),t&&(n?i.push("GENERATE_POSITION_AND_NORMAL"):i.push("GENERATE_POSITION")),new o.A({defines:i,sources:r})},r.createShadowReceiveFragmentShader=function(e,t,n,r,a){const s=o.A.findNormalVarying(e),A=!r&&(0,i.A)(s)||r&&a,c=o.A.findPositionVarying(e),l=(0,i.A)(c),u=t._usesDepthTexture,d=t._polygonOffsetSupported,h=t._isPointLight,g=t._isSpotLight,f=t._numberOfCascades>1,p=t.debugCascadeColors,m=t.softShadows,_=h?t._pointBias:r?t._terrainBias:t._primitiveBias,I=e.defines.slice(0),E=e.sources.slice(0),y=E.length;for(let e=0;e<y;++e)E[e]=o.A.replaceMain(E[e],"czm_shadow_receive_main");h?I.push("USE_CUBE_MAP_SHADOW"):u&&I.push("USE_SHADOW_DEPTH_TEXTURE"),m&&!h&&I.push("USE_SOFT_SHADOWS"),f&&n&&r&&(A?I.push("ENABLE_VERTEX_LIGHTING"):I.push("ENABLE_DAYNIGHT_SHADING")),n&&_.normalShading&&A&&(I.push("USE_NORMAL_SHADING"),_.normalShadingSmooth>0&&I.push("USE_NORMAL_SHADING_SMOOTH"));let C,b="";return b+=h?"uniform samplerCube shadowMap_textureCube; \n":"uniform sampler2D shadowMap_texture; \n",C=l?`    return vec4(${c}, 1.0); \n`:"#ifndef LOG_DEPTH \n    return czm_windowToEyeCoordinates(gl_FragCoord); \n#else \n    return vec4(v_logPositionEC, 1.0); \n#endif \n",b+=`uniform mat4 shadowMap_matrix; \nuniform vec3 shadowMap_lightDirectionEC; \nuniform vec4 shadowMap_lightPositionEC; \nuniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness; \nuniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth; \n#ifdef LOG_DEPTH \nin vec3 v_logPositionEC; \n#endif \nvec4 getPositionEC() \n{ \n${C}} \nvec3 getNormalEC() \n{ \n${A?`    return normalize(${s}); \n`:"    return vec3(1.0); \n"}} \nvoid applyNormalOffset(inout vec4 positionEC, vec3 normalEC, float nDotL) \n{ \n${_.normalOffset&&A?"    float normalOffset = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.x; \n    float normalOffsetScale = 1.0 - nDotL; \n    vec3 offset = normalOffset * normalOffsetScale * normalEC; \n    positionEC.xyz += offset; \n":""}} \n`,b+="void main() \n{ \n    czm_shadow_receive_main(); \n    vec4 positionEC = getPositionEC(); \n    vec3 normalEC = getNormalEC(); \n    float depth = -positionEC.z; \n",b+="    czm_shadowParameters shadowParameters; \n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy; \n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z; \n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w; \n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w; \n",r?b+="    shadowParameters.depthBias *= max(depth * 0.01, 1.0); \n":d||(b+="    shadowParameters.depthBias *= mix(1.0, 100.0, depth * 0.0015); \n"),b+=h?"    vec3 directionEC = positionEC.xyz - shadowMap_lightPositionEC.xyz; \n    float distance = length(directionEC); \n    directionEC = normalize(directionEC); \n    float radius = shadowMap_lightPositionEC.w; \n    // Stop early if the fragment is beyond the point light radius \n    if (distance > radius) \n    { \n        return; \n    } \n    vec3 directionWC  = czm_inverseViewRotation * directionEC; \n    shadowParameters.depth = distance / radius; \n    shadowParameters.nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    shadowParameters.texCoords = directionWC; \n    float visibility = czm_shadowVisibility(shadowMap_textureCube, shadowParameters); \n":g?"    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz); \n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Spot light uses a perspective projection, so perform the perspective divide \n    shadowPosition /= shadowPosition.w; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n":f?"    float maxDepth = shadowMap_cascadeSplits[1].w; \n    // Stop early if the eye depth exceeds the last cascade \n    if (depth > maxDepth) \n    { \n        return; \n    } \n    // Get the cascade based on the eye-space depth \n    vec4 weights = czm_cascadeWeights(depth); \n    // Apply normal offset \n    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    // Transform position into the cascade \n    vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC; \n    // Get visibility \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n    // Fade out shadows that are far away \n    float shadowMapMaximumDistance = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.z; \n    float fade = max((depth - shadowMapMaximumDistance * 0.8) / (shadowMapMaximumDistance * 0.2), 0.0); \n    visibility = mix(visibility, 1.0, fade); \n"+(p?"    // Draw cascade colors for debugging \n    out_FragColor *= czm_cascadeColor(weights); \n":""):"    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n",b+="    out_FragColor.rgb *= visibility; \n} \n",E.push(b),new o.A({defines:I,sources:E})};const a=r},556541:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(369031),o=n(672743),r=n(915325),a=n(491446),s=n(955943),A=n(182348),c=n(697422),l=n(744603),u=n(123245),d=n(705302),h=n(553909);function g(e){e=e??r.A.EMPTY_OBJECT,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const t=e.rectangle??c.A.MAX_VALUE,n=new A.A({rectangle:t,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});this._tilingScheme=n,this._image=void 0,this._texture=void 0,this._hasError=!1,this._errorEvent=new s.A;let a=e.credit;"string"==typeof a&&(a=new o.A(a)),this._credit=a,i.A.defined("options.url",e.url);const u=l.A.createIfNeeded(e.url);this._resource=u,i.A.typeOf.number("options.tileWidth",e.tileWidth),i.A.typeOf.number("options.tileHeight",e.tileHeight),this._tileWidth=e.tileWidth,this._tileHeight=e.tileHeight}async function f(e,t,n){try{return await h.A.loadImage(null,e)}catch(i){return function(e,t,n,i){let o=`Failed to load image ${e.url}`;(0,a.A)(t)&&(0,a.A)(t.message)&&(o+=`: ${t.message}`);const r=d.A.reportError(i,n,(0,a.A)(n)?n._errorEvent:void 0,o,0,0,0,t);if(r.retry)return f(e,n,r);throw(0,a.A)(n)&&(n._hasError=!0),new u.A(o)}(e,i,t,n)}}Object.defineProperties(g.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 0}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),g.fromUrl=async function(e,t){i.A.defined("url",e);const n=l.A.createIfNeeded(e),o=await f(n);t=t??r.A.EMPTY_OBJECT;const a=new g({...t,url:e,tileWidth:o.width,tileHeight:o.height});return a._image=o,a},g.prototype.getTileCredits=function(e,t,n){},g.prototype.requestImage=async function(e,t,n,i){if(!this._hasError&&!(0,a.A)(this._image)){const e=await f(this._resource,this);return this._image=e,d.A.reportSuccess(this._errorEvent),e}return this._image},g.prototype.pickFeatures=function(e,t,n,i,o){};const p=g},920685:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(267980),o=n(491446),r=n(677354),a=n(610750),s=n(87762),A=n(34233),c=n(367817),l=n(584164),u=n(769534),d=n(442790),h=n(377496),g=n(40118),f=n(302836),p=n(342875),m=n(508380),_=n(468649),I=n(370298),E=n(692352),y=n(143344),C=n(320475),b=n(200646),B=n(527083),v=n(62467);function w(e){e=e??a.A.WGS84,this.show=!0,this.perFragmentAtmosphere=!1,this._ellipsoid=e;const t=i.A.multiplyByScalar(e.radii,1.025,new i.A);this._scaleMatrix=l.A.fromScale(t),this._modelMatrix=new l.A,this._command=new h.A({owner:this,modelMatrix:this._modelMatrix}),this._spSkyFromSpace=void 0,this._spSkyFromAtmosphere=void 0,this._flags=void 0,this.atmosphereLightIntensity=50,this.atmosphereRayleighCoefficient=new i.A(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new i.A(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this._hueSaturationBrightness=new i.A;const n=new i.A;n.x=1.025*e.maximumRadius,n.y=e.maximumRadius,n.z=0,this._radiiAndDynamicAtmosphereColor=n;const o=this;this._command.uniformMap={u_radiiAndDynamicAtmosphereColor:function(){return o._radiiAndDynamicAtmosphereColor},u_hsbShift:function(){return o._hueSaturationBrightness.x=o.hueShift,o._hueSaturationBrightness.y=o.saturationShift,o._hueSaturationBrightness.z=o.brightnessShift,o._hueSaturationBrightness},u_atmosphereLightIntensity:function(){return o.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return o.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return o.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return o.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return o.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return o.atmosphereMieAnisotropy}}}Object.defineProperties(w.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),w.prototype.setDynamicLighting=function(e){this._radiiAndDynamicAtmosphereColor.z=e};const T=new l.A;w.prototype.update=function(e,t){if(!this.show)return;const n=e.mode;if(n!==v.A.SCENE3D&&n!==v.A.MORPHING)return;if(!e.passes.render)return;const r=l.A.fromRotationTranslation(e.context.uniformState.inverseViewRotation,i.A.ZERO,T),a=l.A.multiplyTransformation(r,C.A.Y_UP_TO_Z_UP,T),h=l.A.multiply(this._scaleMatrix,a,T);l.A.clone(h,this._modelMatrix);const w=e.context,S=(x=this,!(c.A.equalsEpsilon(x.hueShift,0,c.A.EPSILON7)&&c.A.equalsEpsilon(x.saturationShift,0,c.A.EPSILON7)&&c.A.equalsEpsilon(x.brightnessShift,0,c.A.EPSILON7)));var x;const D=e.globeTranslucencyState.translucent,Q=this.perFragmentAtmosphere||D||!(0,o.A)(t)||!t.show,N=this._command;if(!(0,o.A)(N.vertexArray)){const e=s.A.createGeometry(new s.A({radii:new i.A(1,1,1),slicePartitions:256,stackPartitions:256,vertexFormat:u.A.POSITION_ONLY}));N.vertexArray=m.A.fromGeometry({context:w,geometry:e,attributeLocations:A.A.createAttributeLocations(e),bufferUsage:d.A.STATIC_DRAW}),N.renderState=g.A.fromCache({cull:{enabled:!0,face:B.A.FRONT},blending:b.A.ALPHA_BLEND,depthMask:!1})}const R=S|Q<<2|D<<3;if(R!==this._flags){this._flags=R;const e=[];S&&e.push("COLOR_CORRECT"),Q&&e.push("PER_FRAGMENT_ATMOSPHERE"),D&&e.push("GLOBE_TRANSLUCENT");const t=new p.A({defines:e,sources:[_.A,I.A,y.A]}),n=new p.A({defines:e,sources:[_.A,I.A,E.A]});this._spSkyAtmosphere=f.A.fromCache({context:w,vertexShaderSource:t,fragmentShaderSource:n}),N.shaderProgram=this._spSkyAtmosphere}return N},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),this._spSkyAtmosphere=this._spSkyAtmosphere&&this._spSkyAtmosphere.destroy(),(0,r.A)(this)};const S=w},148784:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(303578),o=n(554630),r=n(267980),a=n(369031),s=n(491446),A=n(677354),c=n(605971),l=n(34233),u=n(584164),d=n(769534),h=n(442790),g=n(346154),f=n(377496),p=n(454214),m=n(40118),_=n(302836),I=n(342875),E=n(508380),y=n(326453),C=n(789221),b=n(200646),B=n(62467);function v(e){this.sources=e.sources,this._sources=void 0,this.show=e.show??!0,this._command=new f.A({modelMatrix:u.A.clone(u.A.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0,this._hasError=!1,this._error=void 0}function w(e){return(0,i.A)(`Assets/Textures/SkyBox/tycho2t3_80_${e}.jpg`)}v.prototype.update=function(e,t){const n=this,{mode:i,passes:A,context:u}=e;if(!this.show)return;if(i!==B.A.SCENE3D&&i!==B.A.MORPHING)return;if(!A.render)return;if(this._hasError){const e=this._error;throw this._hasError=!1,this._error=void 0,e}if(this._sources!==this.sources){this._sources=this.sources;const e=this.sources;if(a.A.defined("this.sources",e),Object.values(g.A.FaceName).some(t=>!(0,s.A)(e[t])))throw new c.A("this.sources must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");const t=typeof e.positiveX;if(Object.values(g.A.FaceName).some(n=>typeof e[n]!==t))throw new c.A("this.sources properties must all be the same type.");"string"==typeof e.positiveX?(0,p.A)(u,this._sources).then(function(e){n._cubeMap=n._cubeMap&&n._cubeMap.destroy(),n._cubeMap=e}).catch(e=>{this._hasError=!0,this._error=e}):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new g.A({context:u,source:e}))}const f=this._command;if(!(0,s.A)(f.vertexArray)){f.uniformMap={u_cubeMap:function(){return n._cubeMap}};const e=o.A.createGeometry(o.A.fromDimensions({dimensions:new r.A(2,2,2),vertexFormat:d.A.POSITION_ONLY})),t=this._attributeLocations=l.A.createAttributeLocations(e);f.vertexArray=E.A.fromGeometry({context:u,geometry:e,attributeLocations:t,bufferUsage:h.A.STATIC_DRAW}),f.renderState=m.A.fromCache({blending:b.A.ALPHA_BLEND})}if(!(0,s.A)(f.shaderProgram)||this._useHdr!==t){const e=new I.A({defines:[t?"HDR":""],sources:[y.A]});f.shaderProgram=_.A.fromCache({context:u,vertexShaderSource:C.A,fragmentShaderSource:e,attributeLocations:this._attributeLocations}),this._useHdr=t}return(0,s.A)(this._cubeMap)?f:void 0},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),(0,A.A)(this)},v.createEarthSkyBox=function(){return new v({sources:{positiveX:w("px"),negativeX:w("mx"),positiveY:w("py"),negativeY:w("my"),positiveZ:w("pz"),negativeZ:w("mz")}})};const T=v},533872:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(525490),o=n(267980),r=n(367817),a=n(491446),s=n(605971),A=n(301866),c=n(331185),l=n(832698);function u(e,t,n,i,r,a,s){this.children=void 0,this.parent=r,this.level=e,this.x=t,this.y=n,this.z=i,this.dimensions=o.A.clone(s),this.keyframeNodes=[],this.renderableKeyframeNodes=[],this.renderableKeyframeNodeLerp=0,this.renderableKeyframeNodePrevious=void 0,this.renderableKeyframeNodeNext=void 0,this.orientedBoundingBox=new l.A,this.approximateVoxelSize=0,this.screenSpaceError=0,this.visitedFrameNumber=-1,this.computeBoundingVolumes(a)}const d=new o.A;u.prototype.computeBoundingVolumes=function(e){this.orientedBoundingBox=e.computeOrientedBoundingBoxForTile(this.level,this.x,this.y,this.z,this.orientedBoundingBox);const t=c.A.getScale(this.orientedBoundingBox.halfAxes,d),n=2*o.A.maximumComponent(t);this.approximateVoxelSize=n/o.A.minimumComponent(this.dimensions)},u.prototype.constructChildNodes=function(e){const{level:t,x:n,y:i,z:o}=this,r=2*n,a=2*i,s=2*o,A=a+1,c=r+1,l=s+1,d=t+1,h=[[d,r,a,s],[d,c,a,s],[d,r,A,s],[d,c,A,s],[d,r,a,l],[d,c,a,l],[d,r,A,l],[d,c,A,l]];this.children=h.map(([t,n,i,o])=>new u(t,n,i,o,this,e,this.dimensions))},u.prototype.visibility=function(e,t){const n=this.orientedBoundingBox;return e.cullingVolume.computeVisibilityWithPlaneMask(n,t)},u.prototype.computeScreenSpaceError=function(e,t){const n=this.orientedBoundingBox;let i=Math.sqrt(n.distanceSquaredTo(e));i=Math.max(i,r.A.EPSILON7);const o=t*(this.approximateVoxelSize/i);this.screenSpaceError=o};const h={keyframe:0};function g(e,t){return h.keyframe=e,(0,i.A)(t,h,A.A.searchComparator)}function f(e,t){const n=g(e,t);return n<0?r.A.clamp(~n-1,0,t.length-1):n}function p(e,t){return e*Math.exp(4*e)+t*(t>=0?1:-200)}u.prototype.computeSurroundingRenderableKeyframeNodes=function(e){let t=this;const n=t.level,i=Math.floor(e),o=Math.ceil(e);let s,A,c=+Number.MAX_VALUE,l=+Number.MAX_VALUE;for(;(0,a.A)(t);){const{renderableKeyframeNodes:e}=t;if(e.length>=1){const r=f(i,e),a=e[r],u=e[o===i||i<a.keyframe?r:Math.min(r+1,e.length-1)],d=i-a.keyframe,h=p(n-t.level,d);h<c&&(c=h,s=a);const g=u.keyframe-o,m=p(n-t.level,g);if(m<l&&(l=m,A=u),0===d&&0===g)break}t=t.parent}if(this.renderableKeyframeNodePrevious=s,this.renderableKeyframeNodeNext=A,!(0,a.A)(s)||!(0,a.A)(A))return;const u=s.keyframe,d=A.keyframe;this.renderableKeyframeNodeLerp=u===d?0:r.A.clamp((e-u)/(d-u),0,1)},u.prototype.isVisited=function(e){return this.visitedFrameNumber===e},u.prototype.createKeyframeNode=function(e){let t=g(e,this.keyframeNodes);if(t<0){t=~t;const n=new A.A(this,e);this.keyframeNodes.splice(t,0,n)}},u.prototype.destroyKeyframeNode=function(e,t){const n=e.keyframe,i=g(n,this.keyframeNodes);if(i<0)throw new s.A("Keyframe node does not exist.");if(this.keyframeNodes.splice(i,1),-1!==e.megatextureIndex){for(let n=0;n<t.length;n++)t[n].remove(e.megatextureIndex);const i=g(n,this.renderableKeyframeNodes);if(i<0)throw new s.A("Renderable keyframe node does not exist.");this.renderableKeyframeNodes.splice(i,1)}e.unload()},u.prototype.addKeyframeNodeToMegatextures=function(e,t){if(-1!==e.megatextureIndex||e.content.metadata.length!==t.length)throw new s.A("Keyframe node cannot be added to megatexture");const{metadata:n}=e.content;for(let i=0;i<t.length;i++){const o=t[i];e.megatextureIndex=o.add(n[i])}const i=this.renderableKeyframeNodes;let o=g(e.keyframe,i);if(o>=0)throw new s.A("Keyframe already renderable");o=~o,i.splice(o,0,e)},u.prototype.isRenderable=function(e){const t=this.renderableKeyframeNodePrevious,n=this.renderableKeyframeNodeNext,i=this.level;return(0,a.A)(t)&&(0,a.A)(n)&&(t.spatialNode.level===i||n.spatialNode.level===i)&&this.visitedFrameNumber===e};const m=u},126797:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(491446),o=n(677354),r=n(955943),a=n(471874),s=n(276904),A=n(346154),c=n(57775),l=n(654799),u=n(78078);function d(e){this._url=e,this._cubeMapBuffers=void 0,this._texture=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1,this._errorEvent=new r.A}function h(e){e._cubeMapBuffers=void 0}Object.defineProperties(d.prototype,{url:{get:function(){return this._url}},errorEvent:{get:function(){return this._errorEvent}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}}}),d.isSupported=function(e){return(e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat)&&e.supportsTextureLod},d.prototype.update=function(e){const{context:t}=e;if(!d.isSupported(t))return;if((0,i.A)(this._texture))return void h(this);if(!(0,i.A)(this._texture)&&!this._loading){const e=t.textureCache.getTexture(this._url);(0,i.A)(e)&&(h(this),this._texture=e,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0)}const n=this._cubeMapBuffers;if(!(0,i.A)(n)&&!this._loading){const e=this;(0,a.A)(this._url).then(function(t){e._cubeMapBuffers=t,e._loading=!1}).catch(function(t){e.isDestroyed()||e._errorEvent.raiseEvent(t)}),this._loading=!0}if(!(0,i.A)(this._cubeMapBuffers))return;let{pixelDatatype:o}=n[0].positiveX;(0,i.A)(o)||(o=t.halfFloatingPointTexture?c.A.HALF_FLOAT:c.A.FLOAT);const r=s.A.RGBA,g=n.length;this._maximumMipmapLevel=g-1;const f=n[0].positiveX.width,p=Math.log2(f)+1;if(g!==p){const e={};Object.values(A.A.FaceName).forEach(t=>{e[t]=void 0});for(let t=g;t<p;t++)n.push(e)}const m=new l.A({minificationFilter:u.A.LINEAR_MIPMAP_LINEAR}),_=new A.A({context:t,source:n[0],flipY:!1,pixelDatatype:o,pixelFormat:r,sampler:m});_.loadMipmaps(n.slice(1)),this._texture=_,this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture),this._ready=!0},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return h(this),this._texture=this._texture&&this._texture.destroy(),(0,o.A)(this)};const g=d},992881:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(342875);const o={modifyFragmentShader:function(e){return(e=i.A.replaceMain(e,"czm_splitter_main"))+"uniform float czm_splitDirection; \nvoid main() \n{ \n#ifndef SHADOW_MAP\n    if (czm_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard; \n    if (czm_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard; \n#endif\n    czm_splitter_main(); \n} \n"},addUniforms:function(e,t){t.czm_splitDirection=function(){return e.splitDirection}}}},590732:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(915325),r=n(491446);function a(e){e=e??o.A.EMPTY_OBJECT,i.A.typeOf.object("options.schema",e.schema),this._schema=e.schema;const t=e.propertyTables;this._propertyTableCount=(0,r.A)(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(a.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!(0,r.A)(this._propertyTables))return 0;let e=0;const t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}}),a.prototype.getPropertyTable=function(e){return i.A.typeOf.number("propertyTableId",e),this._propertyTables[e]},a.prototype.getPropertyTexture=function(e){return i.A.typeOf.number("propertyTextureId",e),this._propertyTextures[e]},a.prototype.getPropertyAttribute=function(e){return i.A.typeOf.number("propertyAttributeId",e),this._propertyAttributes[e]};const s=a},874818:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var i=n(660662),o=n(434067),r=n(267980),a=n(626809),s=n(571804),A=n(491446),c=n(677354),l=n(874915),u=n(367817),d=n(584164),h=n(276904),g=n(402330),f=n(641613),p=n(442790),m=n(718289),_=n(377496),I=n(57775),E=n(40118),y=n(302836),C=n(616e3),b=n(508380),B=n(860139),v=n(40510),w=n(752123),T=n(200646),S=n(62467),x=n(78173);function D(){this.show=!0,this._drawCommand=new _.A({primitiveType:g.A.TRIANGLES,boundingVolume:new i.A,owner:this}),this._commands={drawCommand:this._drawCommand,computeCommand:void 0},this._boundingVolume=new i.A,this._boundingVolume2D=new i.A,this._texture=void 0,this._drawingBufferWidth=void 0,this._drawingBufferHeight=void 0,this._radiusTS=void 0,this._size=void 0,this.glowFactor=1,this._glowFactorDirty=!1,this._useHdr=void 0;const e=this;this._uniformMap={u_texture:function(){return e._texture},u_size:function(){return e._size}}}Object.defineProperties(D.prototype,{glowFactor:{get:function(){return this._glowFactor},set:function(e){e=Math.max(e,0),this._glowFactor=e,this._glowFactorDirty=!0}}});const Q=new o.A,N=new o.A,R=new a.A,M=new a.A;D.prototype.update=function(e,t,n){if(!this.show)return;const a=e.mode;if(a===S.A.SCENE2D||a===S.A.MORPHING)return;if(!e.passes.render)return;const c=e.context,g=t.viewport.width,_=t.viewport.height;if(!(0,A.A)(this._texture)||g!==this._drawingBufferWidth||_!==this._drawingBufferHeight||this._glowFactorDirty||n!==this._useHdr){this._texture=this._texture&&this._texture.destroy(),this._drawingBufferWidth=g,this._drawingBufferHeight=_,this._glowFactorDirty=!1,this._useHdr=n;let e=Math.max(g,_);e=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))-2),e=Math.max(1,e);const t=n?c.halfFloatingPointTexture?I.A.HALF_FLOAT:I.A.FLOAT:I.A.UNSIGNED_BYTE;this._texture=new C.A({context:c,width:e,height:e,pixelFormat:h.A.RGBA,pixelDatatype:t}),this._glowLengthTS=5*this._glowFactor,this._radiusTS=1/(1+2*this._glowLengthTS)*.5;const i=this,o={u_radiusTS:function(){return i._radiusTS}};this._commands.computeCommand=new m.A({fragmentShaderSource:v.A,outputTexture:this._texture,uniformMap:o,persists:!1,owner:this,postExecute:function(){i._commands.computeCommand=void 0}})}const D=this._drawCommand;if(!(0,A.A)(D.vertexArray)){const e={direction:0},t=new Uint8Array(8);t[0]=0,t[1]=0,t[2]=255,t[3]=0,t[4]=255,t[5]=255,t[6]=0,t[7]=255;const n=f.A.createVertexBuffer({context:c,typedArray:t,usage:p.A.STATIC_DRAW}),i=[{index:e.direction,vertexBuffer:n,componentsPerAttribute:2,normalize:!0,componentDatatype:s.A.UNSIGNED_BYTE}],o=f.A.createIndexBuffer({context:c,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:p.A.STATIC_DRAW,indexDatatype:l.A.UNSIGNED_SHORT});D.vertexArray=new b.A({context:c,attributes:i,indexBuffer:o}),D.shaderProgram=y.A.fromCache({context:c,vertexShaderSource:w.A,fragmentShaderSource:B.A,attributeLocations:e}),D.renderState=E.A.fromCache({blending:T.A.ALPHA_BLEND}),D.uniformMap=this._uniformMap}const L=c.uniformState.sunPositionWC,P=c.uniformState.sunPositionColumbusView,O=this._boundingVolume,F=this._boundingVolume2D;r.A.clone(L,O.center),F.center.x=P.z,F.center.y=P.x,F.center.z=P.y,O.radius=u.A.SOLAR_RADIUS+u.A.SOLAR_RADIUS*this._glowLengthTS,F.radius=O.radius,a===S.A.SCENE3D?i.A.clone(O,D.boundingVolume):a===S.A.COLUMBUS_VIEW&&i.A.clone(F,D.boundingVolume);const U=x.A.computeActualEllipsoidPosition(e,L,M),k=r.A.magnitude(r.A.subtract(U,e.camera.position,M)),G=c.uniformState.projection,H=R;H.x=0,H.y=0,H.z=-k,H.w=1;const V=d.A.multiplyByVector(G,H,M),z=x.A.clipToGLWindowCoordinates(t.viewport,V,Q);H.x=u.A.SOLAR_RADIUS;const j=d.A.multiplyByVector(G,H,M),Y=x.A.clipToGLWindowCoordinates(t.viewport,j,N);return this._size=o.A.magnitude(o.A.subtract(Y,z,M)),this._size=2*this._size*(1+2*this._glowLengthTS),this._size=Math.ceil(this._size),this._commands},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){const e=this._drawCommand;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._texture=this._texture&&this._texture.destroy(),(0,c.A)(this)};const L=D},205672:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(41476),o=n(915325);const r=function(e){e=e??o.A.EMPTY_OBJECT,this.color=i.A.clone(e.color??i.A.WHITE),this.intensity=e.intensity??2}},380983:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(647934),o=n(434067),r=n(626809),a=n(491446),s=n(677354),A=n(367817),c=n(584164),l=n(543622),u=n(249550),d=n(732156),h=n(602142),g=n(90979),f=n(421549),p=n(517290),m=n(339600),_=n(922990),I=n(413285);function E(){this._sceneFramebuffer=new I.A;const e=.125,t=new Array(6);t[0]=new f.A({fragmentShader:g.A,textureScale:e,forcePowerOfTwo:!0,sampleMode:m.A.LINEAR});const n=t[1]=new f.A({fragmentShader:d.A,uniforms:{avgLuminance:.5,threshold:.25,offset:.1},textureScale:e,forcePowerOfTwo:!0}),i=this;this._delta=1,this._sigma=2,this._blurStep=new o.A,t[2]=new f.A({fragmentShader:h.A,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:0},textureScale:e,forcePowerOfTwo:!0}),t[3]=new f.A({fragmentShader:h.A,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:1},textureScale:e,forcePowerOfTwo:!0}),t[4]=new f.A({fragmentShader:g.A,sampleMode:m.A.LINEAR}),this._uCenter=new o.A,this._uRadius=void 0,t[5]=new f.A({fragmentShader:u.A,uniforms:{center:function(){return i._uCenter},radius:function(){return i._uRadius},colorTexture2:function(){return i._sceneFramebuffer.framebuffer.getColorTexture(0)}}}),this._stages=new p.A({stages:t});const r=new _.A(this),a=t.length;for(let e=0;e<a;++e)t[e]._textureCache=r;this._textureCache=r,this.length=t.length}E.prototype.get=function(e){return this._stages.get(e)},E.prototype.getStageByName=function(e){const t=this._stages.length;for(let n=0;n<t;++n){const t=this._stages.get(n);if(t.name===e)return t}};const y=new r.A,C=new o.A,b=new o.A,B=new c.A;E.prototype.clear=function(e,t,n){this._sceneFramebuffer.clear(e,t,n),this._textureCache.clear(e)},E.prototype.update=function(e){const t=e.context,n=e.viewport,r=this._sceneFramebuffer;r.update(t,n);const a=r.framebuffer;return this._textureCache.update(t),this._stages.update(t,!1),function(e,t,n){const r=t.uniformState,a=r.sunPositionWC,s=r.view,u=r.viewProjection,d=r.projection;let h=c.A.computeViewportTransformation(n,0,1,B);const g=c.A.multiplyByPoint(s,a,y);let f=l.A.pointToGLWindowCoordinates(u,h,a,C);g.x+=A.A.SOLAR_RADIUS;const p=l.A.pointToGLWindowCoordinates(d,h,g,g),m=30*o.A.magnitude(o.A.subtract(p,f,p))*2,_=b;_.x=m,_.y=m,e._uCenter=o.A.clone(f,e._uCenter),e._uRadius=.15*Math.max(_.x,_.y);const I=t.drawingBufferWidth,E=t.drawingBufferHeight,v=e._stages,w=v.get(0),T=w.outputTexture.width,S=w.outputTexture.height,x=new i.A;x.width=T,x.height=S,h=c.A.computeViewportTransformation(x,0,1,B),f=l.A.pointToGLWindowCoordinates(u,h,a,C),_.x*=T/I,_.y*=S/E;const D=w.scissorRectangle;D.x=Math.max(f.x-.5*_.x,0),D.y=Math.max(f.y-.5*_.y,0),D.width=Math.min(_.x,I),D.height=Math.min(_.y,E);for(let e=1;e<4;++e)i.A.clone(D,v.get(e).scissorRectangle)}(this,t,n),a},E.prototype.execute=function(e){const t=this._sceneFramebuffer.framebuffer.getColorTexture(0),n=this._stages,i=n.length;n.get(0).execute(e,t);for(let t=1;t<i;++t)n.get(t).execute(e,n.get(t-1).outputTexture)},E.prototype.copy=function(e,t){if(!(0,a.A)(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(g.A,{uniformMap:{colorTexture:function(){return t._stages.get(t._stages.length-1).outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return this._textureCache.destroy(),this._stages.destroy(),(0,s.A)(this)};const v=E},768213:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(915325);const o=function(e){e=e??i.A.EMPTY_OBJECT,this.webp=e.webp??!1,this.basis=e.basis??!1}},557417:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(955943),r=n(394290),a=n(75584);function s(e){i.A.typeOf.object("terrainProviderPromise",e),this._ready=!1,this._provider=void 0,this._errorEvent=new o.A,this._readyEvent=new o.A,async function(e,t){let n;try{n=await Promise.resolve(t),e._provider=n,e._ready=!0,e._readyEvent.raiseEvent(n)}catch(t){!function(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}(e._errorEvent,t)}}(this,e)}Object.defineProperties(s.prototype,{errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},ready:{get:function(){return this._ready}},provider:{get:function(){return this._provider}}}),s.fromWorldTerrain=function(e){return new s((0,a.A)(e))},s.fromWorldBathymetry=function(e){return new s((0,r.A)(e))};const A=s},640809:(e,t,n)=>{"use strict";n.d(t,{A:()=>ae});var i=n(961645),o=n(525490),r=n(660662),a=n(434067),s=n(267980),A=n(626809),c=n(336946),l=n(491446),u=n(605971),d=n(165755),h=n(367817),g=n(832698),f=n(67988),p=n(697422),m=n(371267),_=n(255335),I=n(36138),E=n(414305),y=n(295550),C=n(960847);function b(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new A.A}b.prototype.update=function(e,t,n){this.changedThisFrame&&(V(e,t,this.tile,n),this.changedThisFrame=!1)},b.prototype.destroy=function(e){this._destroyVertexArray(e),(0,l.A)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)},b.prototype._destroyVertexArray=function(e){(0,l.A)(this.vertexArray)&&((0,l.A)(e)?e.push(this.vertexArray):y.A._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};const B=new f.A;function v(e,t,n,i,o,r,a,s,A){if(void 0===i)return;let c=i;for(;c&&(c._lastSelectionResultFrame!==o||C.A.wasKicked(c._lastSelectionResult)||C.A.originalResult(c._lastSelectionResult)===C.A.CULLED);){if(a)return;const e=c.parent;if(r>=I.A.NORTHWEST&&void 0!==e)switch(r){case I.A.NORTHWEST:c=c===e.northwestChild?e:void 0;break;case I.A.NORTHEAST:c=c===e.northeastChild?e:void 0;break;case I.A.SOUTHWEST:c=c===e.southwestChild?e:void 0;break;case I.A.SOUTHEAST:c=c===e.southeastChild?e:void 0}else c=e}if(void 0!==c)if(c._lastSelectionResult!==C.A.RENDERED){if(C.A.originalResult(i._lastSelectionResult)!==C.A.CULLED)switch(r){case I.A.WEST:v(e,t,n,i.northwestChild,o,r,!0,s,A),v(e,t,n,i.southwestChild,o,r,!0,s,A);break;case I.A.EAST:v(e,t,n,i.southeastChild,o,r,!0,s,A),v(e,t,n,i.northeastChild,o,r,!0,s,A);break;case I.A.SOUTH:v(e,t,n,i.southwestChild,o,r,!0,s,A),v(e,t,n,i.southeastChild,o,r,!0,s,A);break;case I.A.NORTH:v(e,t,n,i.northeastChild,o,r,!0,s,A),v(e,t,n,i.northwestChild,o,r,!0,s,A);break;case I.A.NORTHWEST:v(e,t,n,i.northwestChild,o,r,!0,s,A);break;case I.A.NORTHEAST:v(e,t,n,i.northeastChild,o,r,!0,s,A);break;case I.A.SOUTHWEST:v(e,t,n,i.southwestChild,o,r,!0,s,A);break;case I.A.SOUTHEAST:v(e,t,n,i.southeastChild,o,r,!0,s,A);break;default:throw new u.A("Invalid edge")}}else{if((0,l.A)(c.data.vertexArray))return;!function(e,t,n,i,o,r,a,s){const A=i.data;if(void 0===A.fill)A.fill=new b(i);else if(A.fill.visitedFrame===r)return;A.fill.enqueuedFrame!==r&&(A.fill.enqueuedFrame=r,A.fill.changedThisFrame=!1,a.enqueue(i)),function(e,t,n,i,o,r){const a=i.data.fill;let s;const A=n.data.fill;let c,u,d,g,f,p;switch((0,l.A)(A)?(A.visitedFrame=t.frameNumber,A.changedThisFrame&&(V(e,t,n,r),A.changedThisFrame=!1),s=n.data.fill.mesh):s=n.data.mesh,o){case I.A.WEST:c=a.westMeshes,u=a.westTiles;break;case I.A.SOUTH:c=a.southMeshes,u=a.southTiles;break;case I.A.EAST:c=a.eastMeshes,u=a.eastTiles;break;case I.A.NORTH:c=a.northMeshes,u=a.northTiles;break;case I.A.NORTHWEST:return a.changedThisFrame=a.changedThisFrame||a.northwestMesh!==s,a.northwestMesh=s,void(a.northwestTile=n);case I.A.NORTHEAST:return a.changedThisFrame=a.changedThisFrame||a.northeastMesh!==s,a.northeastMesh=s,void(a.northeastTile=n);case I.A.SOUTHWEST:return a.changedThisFrame=a.changedThisFrame||a.southwestMesh!==s,a.southwestMesh=s,void(a.southwestTile=n);case I.A.SOUTHEAST:return a.changedThisFrame=a.changedThisFrame||a.southeastMesh!==s,a.southeastMesh=s,void(a.southeastTile=n)}if(n.level<=i.level)return a.changedThisFrame=a.changedThisFrame||c[0]!==s||1!==c.length,c[0]=s,u[0]=n,c.length=1,void(u.length=1);const m=n.rectangle;let _;const E=i.rectangle;switch(o){case I.A.WEST:for(_=(E.north-E.south)*h.A.EPSILON5,d=0;d<u.length&&(f=u[d],p=f.rectangle,!h.A.greaterThan(m.north,p.south,_));++d);for(g=d;g<u.length&&(f=u[g],p=f.rectangle,!h.A.greaterThanOrEquals(m.south,p.north,_));++g);break;case I.A.SOUTH:for(_=(E.east-E.west)*h.A.EPSILON5,d=0;d<u.length&&(f=u[d],p=f.rectangle,!h.A.lessThan(m.west,p.east,_));++d);for(g=d;g<u.length&&(f=u[g],p=f.rectangle,!h.A.lessThanOrEquals(m.east,p.west,_));++g);break;case I.A.EAST:for(_=(E.north-E.south)*h.A.EPSILON5,d=0;d<u.length&&(f=u[d],p=f.rectangle,!h.A.lessThan(m.south,p.north,_));++d);for(g=d;g<u.length&&(f=u[g],p=f.rectangle,!h.A.lessThanOrEquals(m.north,p.south,_));++g);break;case I.A.NORTH:for(_=(E.east-E.west)*h.A.EPSILON5,d=0;d<u.length&&(f=u[d],p=f.rectangle,!h.A.greaterThan(m.east,p.west,_));++d);for(g=d;g<u.length&&(f=u[g],p=f.rectangle,!h.A.greaterThanOrEquals(m.west,p.east,_));++g);}g-d===1?(a.changedThisFrame=a.changedThisFrame||c[d]!==s,c[d]=s,u[d]=n):(a.changedThisFrame=!0,c.splice(d,g-d,s),u.splice(d,g-d,n))}(e,t,n,i,o,s)}(e,t,n,c,r,o,s,A)}}b.updateFillTiles=function(e,t,n,i){const o=e._quadtree,r=o._levelZeroTiles,a=o._lastSelectionFrameNumber,s=B;s.clear();for(let e=0;e<t.length;++e){const n=t[e];(0,l.A)(n.data.vertexArray)&&s.enqueue(t[e])}let A=s.dequeue();for(;void 0!==A;){const t=A.findTileToWest(r),o=A.findTileToSouth(r),c=A.findTileToEast(r),l=A.findTileToNorth(r);v(e,n,A,t,a,I.A.EAST,!1,s,i),v(e,n,A,o,a,I.A.NORTH,!1,s,i),v(e,n,A,c,a,I.A.WEST,!1,s,i),v(e,n,A,l,a,I.A.SOUTH,!1,s,i);const u=t.findTileToNorth(r),d=t.findTileToSouth(r),h=c.findTileToNorth(r),g=c.findTileToSouth(r);v(e,n,A,u,a,I.A.SOUTHEAST,!1,s,i),v(e,n,A,h,a,I.A.SOUTHWEST,!1,s,i),v(e,n,A,d,a,I.A.NORTHEAST,!1,s,i),v(e,n,A,g,a,I.A.NORTHWEST,!1,s,i),A=s.dequeue()}};const w=new c.A,T=new c.A,S=new s.A,x=new s.A,D=new a.A,Q=new a.A,N=new a.A;function R(){this.height=0,this.encodedNormal=new a.A}function M(e,t,n,i,o,r,a,s,A){if((0,l.A)(o))return o;let c;if((0,l.A)(r)&&(0,l.A)(a))c=.5*(r.height+a.height);else if((0,l.A)(r))c=r.height;else if((0,l.A)(a))c=a.height;else if((0,l.A)(s))c=s.height;else{const t=e.tile.data.tileBoundingRegion;let n=0,i=0;(0,l.A)(t)&&(n=t.minimumHeight,i=t.maximumHeight),c=.5*(n+i)}return X(0,t,0,0,c,A),A}const L={minimumHeight:0,maximumHeight:0},P=new s.A,O=new R,F=new R,U=new R,k=new R,G="undefined"!=typeof Uint8Array?new Uint8Array(81):void 0,H={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0};function V(e,t,n,o){y.A.initialize(n,e.terrainProvider,e._imageryLayers);const A=n.data,c=A.fill,u=n.rectangle,h=t.verticalExaggeration,f=t.verticalExaggerationRelativeHeight,C=1!==h,b=n.tilingScheme.ellipsoid;let B=Z(c,b,0,1,c.northwestTile,c.northwestMesh,c.northTiles,c.northMeshes,c.westTiles,c.westMeshes,U),v=Z(c,b,0,0,c.southwestTile,c.southwestMesh,c.westTiles,c.westMeshes,c.southTiles,c.southMeshes,O),S=Z(c,b,1,0,c.southeastTile,c.southeastMesh,c.southTiles,c.southMeshes,c.eastTiles,c.eastMeshes,F),Q=Z(c,b,1,1,c.northeastTile,c.northeastMesh,c.eastTiles,c.eastMeshes,c.northTiles,c.northMeshes,k);B=M(c,b,0,0,B,v,Q,S,U),v=M(c,b,0,0,v,B,S,Q,O),S=M(c,b,0,0,S,v,Q,B,F),Q=M(c,b,0,0,Q,S,B,v,k);const R=v.height,V=S.height,j=B.height,Y=Q.height;let q=Math.min(R,V,j,Y),W=Math.max(R,V,j,Y);const J=.5*(q+W);let K,X;const $=e.getLevelMaximumGeometricError(n.level),te=b.maximumRadius-$;let ne=4*Math.acos(te/b.maximumRadius);if(ne*=1.5,u.width>ne&&W-q<=$){const e=new d.A({width:9,height:9,buffer:G,structure:{heightOffset:W}}),t=H;t.tilingScheme=n.tilingScheme,t.x=n.x,t.y=n.y,t.level=n.level,t.exaggeration=h,t.exaggerationRelativeHeight=f,c.mesh=e._createMeshSync(t)}else{const t=C,o=p.A.center(u,T);o.height=J;const A=b.cartographicToCartesian(o,P),l=new m.A(A,void 0,void 0,void 0,void 0,!0,!0,t,h,f);let d,y=5;for(d=c.westMeshes,K=0,X=d.length;K<X;++K)y+=d[K].eastIndicesNorthToSouth.length;for(d=c.southMeshes,K=0,X=d.length;K<X;++K)y+=d[K].northIndicesWestToEast.length;for(d=c.eastMeshes,K=0,X=d.length;K<X;++K)y+=d[K].westIndicesSouthToNorth.length;for(d=c.northMeshes,K=0,X=d.length;K<X;++K)y+=d[K].southIndicesEastToWest.length;const R=L;R.minimumHeight=q,R.maximumHeight=W;const M=l.stride;let O=new Float32Array(y*M),F=0;const U=F;F=z(b,u,l,O,F,0,1,B.height,B.encodedNormal,1,R),F=ee(c,b,l,O,F,c.westTiles,c.westMeshes,I.A.EAST,R);const k=F;F=z(b,u,l,O,F,0,0,v.height,v.encodedNormal,0,R),F=ee(c,b,l,O,F,c.southTiles,c.southMeshes,I.A.NORTH,R);const G=F;F=z(b,u,l,O,F,1,0,S.height,S.encodedNormal,0,R),F=ee(c,b,l,O,F,c.eastTiles,c.eastMeshes,I.A.WEST,R);const H=F;F=z(b,u,l,O,F,1,1,Q.height,Q.encodedNormal,1,R),F=ee(c,b,l,O,F,c.northTiles,c.northMeshes,I.A.SOUTH,R),q=R.minimumHeight,W=R.maximumHeight;const V=g.A.fromRectangle(u,q,W,n.tilingScheme.ellipsoid),j=E.A.geodeticLatitudeToMercatorAngle(u.south),Y=1/(E.A.geodeticLatitudeToMercatorAngle(u.north)-j),Z=(E.A.geodeticLatitudeToMercatorAngle(o.latitude)-j)*Y,$=b.geodeticSurfaceNormalCartographic(w,x),te=i.A.octEncode($,D),ne=F;l.encode(O,F*M,V.center,a.A.fromElements(.5,.5,N),J,te,Z,$),++F;const ie=F,oe=3*(ie-1),ae=oe*(ie<256?1:2);let se;if((O.length-ie*M)*Float32Array.BYTES_PER_ELEMENT>=ae){const e=ie*M*Float32Array.BYTES_PER_ELEMENT;se=ie<256?new Uint8Array(O.buffer,e,oe):new Uint16Array(O.buffer,e,oe)}else se=ie<256?new Uint8Array(oe):new Uint16Array(oe);O=new Float32Array(O.buffer,0,ie*M);let Ae=0;for(K=0;K<ie-2;++K)se[Ae++]=ne,se[Ae++]=K,se[Ae++]=K+1;se[Ae++]=ne,se[Ae++]=K,se[Ae++]=0;const ce=[];for(K=k;K>=U;--K)ce.push(K);const le=[];for(K=G;K>=k;--K)le.push(K);const ue=[];for(K=H;K>=G;--K)ue.push(K);const de=[];for(de.push(0),K=ne-1;K>=H;--K)de.push(K);c.mesh=new _.A(l.center,O,se,oe,ie,q,W,r.A.fromOrientedBoundingBox(V),function(e,t,n,i,o){const r=e.quadtree._occluders.ellipsoid,a=r.ellipsoid,A=re;return s.A.fromRadians(n.west,n.south,o,a,A[0]),s.A.fromRadians(n.east,n.south,o,a,A[1]),s.A.fromRadians(n.west,n.north,o,a,A[2]),s.A.fromRadians(n.east,n.north,o,a,A[3]),r.computeHorizonCullingPointPossiblyUnderEllipsoid(t,A,i,void 0)}(e,V.center,u,q,W),l.stride,V,l,ce,le,ue,de)}const ie=t.context;c._destroyVertexArray(o),c.vertexArray=y.A._createVertexArrayForMesh(ie,c.mesh),A.processImagery(n,e.terrainProvider,t,!0);const oe=c.waterMaskTexture;if(c.waterMaskTexture=void 0,e.terrainProvider.hasWaterMask){const e=A._findAncestorTileWithTerrainData(n);(0,l.A)(e)&&(0,l.A)(e.data.waterMaskTexture)&&(c.waterMaskTexture=e.data.waterMaskTexture,++c.waterMaskTexture.referenceCount,A._computeWaterMaskTranslationAndScale(n,e,c.waterMaskTranslationAndScale))}(0,l.A)(oe)&&(--oe.referenceCount,0===oe.referenceCount&&oe.destroy())}function z(e,t,n,i,o,r,a,s,A,c,l){const u=w;u.longitude=h.A.lerp(t.west,t.east,r),u.latitude=h.A.lerp(t.south,t.north,a),u.height=s;const d=e.cartographicToCartesian(u,S);let g;n.hasGeodeticSurfaceNormals&&(g=e.geodeticSurfaceNormal(d,x));const f=Q;return f.x=r,f.y=a,n.encode(i,o*n.stride,d,f,s,A,c,g),l.minimumHeight=Math.min(l.minimumHeight,s),l.maximumHeight=Math.max(l.maximumHeight,s),o+1}const j=new p.A;function Y(e,t,n,i){let o=e.rectangle;const r=t.rectangle;0===t.x&&1===n.x&&e.x===e.tilingScheme.getNumberOfXTilesAtLevel(e.level)-1?(o=p.A.clone(e.rectangle,j),o.west-=h.A.TWO_PI,o.east-=h.A.TWO_PI):0===e.x&&0===n.x&&t.x===t.tilingScheme.getNumberOfXTilesAtLevel(t.level)-1&&(o=p.A.clone(e.rectangle,j),o.west+=h.A.TWO_PI,o.east+=h.A.TWO_PI);const a=o.east-o.west,s=(r.west-o.west)/a,A=(r.east-o.west)/a,c=o.north-o.south,l=(r.south-o.south)/c,u=(r.north-o.south)/c;let d=(n.x-s)/(A-s),g=(n.y-l)/(u-l);return Math.abs(d)<Math.EPSILON5?d=0:Math.abs(d-1)<Math.EPSILON5&&(d=1),Math.abs(g)<Math.EPSILON5?g=0:Math.abs(g-1)<Math.EPSILON5&&(g=1),i.x=d,i.y=g,i}const q=new a.A;function W(e,t,n,i,o){const r=e.encoding,a=e.vertices;if(o.height=r.decodeHeight(a,t),r.hasVertexNormals)r.getOctEncodedNormal(a,t,o.encodedNormal);else{const e=o.encodedNormal;e.x=0,e.y=0}}const J=new a.A,K=new s.A;function X(e,t,n,o,r,a){a.height=r;const s=t.geodeticSurfaceNormalCartographic(w,S);i.A.octEncode(s,a.encodedNormal)}function Z(e,t,n,i,o,r,a,s,A,c,u){if(oe(e,t,s,a,!1,n,i,u)||oe(e,t,c,A,!0,n,i,u))return u;let d,h;return ie(o,r)?(d=0===n?0===i?r.eastIndicesNorthToSouth[0]:r.southIndicesEastToWest[0]:0===i?r.northIndicesWestToEast[0]:r.westIndicesSouthToNorth[0],W(r,d,0,0,u),u):(h=0===n?0===i?$(e.westMeshes,e.westTiles,I.A.EAST,e.southMeshes,e.southTiles,I.A.NORTH,n,i):$(e.northMeshes,e.northTiles,I.A.SOUTH,e.westMeshes,e.westTiles,I.A.EAST,n,i):0===i?$(e.southMeshes,e.southTiles,I.A.NORTH,e.eastMeshes,e.eastTiles,I.A.WEST,n,i):$(e.eastMeshes,e.eastTiles,I.A.WEST,e.northMeshes,e.northTiles,I.A.SOUTH,n,i),(0,l.A)(h)?(X(0,t,0,0,h,u),u):void 0)}function $(e,t,n,i,o,r,a,s){const A=ne(e,t,!1,n),c=ne(i,o,!0,r);return(0,l.A)(A)&&(0,l.A)(c)?.5*(A+c):(0,l.A)(A)?A:c}function ee(e,t,n,i,o,r,a,s,A){for(let c=0;c<r.length;++c)o=te(e,t,n,i,o,r[c],a[c],s,A);return o}function te(e,t,n,i,o,r,a,s,A){let c=r.rectangle;s===I.A.EAST&&0===e.tile.x?(c=p.A.clone(r.rectangle,j),c.west-=h.A.TWO_PI,c.east-=h.A.TWO_PI):s===I.A.WEST&&0===r.x&&(c=p.A.clone(r.rectangle,j),c.west+=h.A.TWO_PI,c.east+=h.A.TWO_PI);const l=e.tile.rectangle;let u,d,g,f;switch(o>0&&(n.decodeTextureCoordinates(i,o-1,N),u=N.x,d=N.y),s){case I.A.WEST:g=a.westIndicesSouthToNorth,f=!1;break;case I.A.NORTH:g=a.northIndicesWestToEast,f=!0;break;case I.A.EAST:g=a.eastIndicesNorthToSouth,f=!1;break;case I.A.SOUTH:g=a.southIndicesEastToWest,f=!0}const m=r,_=e.tile,y=a.encoding,C=a.vertices,b=n.stride;let B,v;y.hasWebMercatorT&&(B=E.A.geodeticLatitudeToMercatorAngle(l.south),v=1/(E.A.geodeticLatitudeToMercatorAngle(l.north)-B));for(let e=0;e<g.length;++e){const r=g[e],a=y.decodeTextureCoordinates(C,r,N);Y(m,_,a,a);const s=a.x,c=a.y,p=f?s:c;if(p<0||p>1)continue;if(Math.abs(s-u)<h.A.EPSILON5&&Math.abs(c-d)<h.A.EPSILON5)continue;const I=Math.abs(s)<h.A.EPSILON5||Math.abs(s-1)<h.A.EPSILON5,w=Math.abs(c)<h.A.EPSILON5||Math.abs(c-1)<h.A.EPSILON5;if(I&&w)continue;const T=y.decodePosition(C,r,S),Q=y.decodeHeight(C,r);let R;y.hasVertexNormals?R=y.getOctEncodedNormal(C,r,D):(R=D,R.x=0,R.y=0);let M,L=c;if(y.hasWebMercatorT){const e=h.A.lerp(l.south,l.north,c);L=(E.A.geodeticLatitudeToMercatorAngle(e)-B)*v}n.hasGeodeticSurfaceNormals&&(M=t.geodeticSurfaceNormal(T,x)),n.encode(i,o*b,T,a,Q,R,L,M),A.minimumHeight=Math.min(A.minimumHeight,Q),A.maximumHeight=Math.max(A.maximumHeight,Q),++o}return o}function ne(e,t,n,i,o,r){let a,s,A;n?(a=0,s=e.length,A=1):(a=e.length-1,s=-1,A=-1);for(let o=a;o!==s;o+=A){const r=e[o];if(!ie(t[o],r))continue;let a;switch(i){case I.A.WEST:a=r.westIndicesSouthToNorth;break;case I.A.SOUTH:a=r.southIndicesEastToWest;break;case I.A.EAST:a=r.eastIndicesNorthToSouth;break;case I.A.NORTH:a=r.northIndicesWestToEast}const s=a[n?0:a.length-1];if((0,l.A)(s))return r.encoding.decodeHeight(r.vertices,s)}}function ie(e,t){return(0,l.A)(t)&&(!(0,l.A)(e.data.fill)||!e.data.fill.changedThisFrame)}function oe(e,t,n,r,a,A,c,l){let u,d,g,f,p;const m=r[a?0:n.length-1],_=n[a?0:n.length-1];if(ie(m,_)&&(0===A?0===c?(u=a?_.northIndicesWestToEast:_.eastIndicesNorthToSouth,d=a,g=a):(u=a?_.eastIndicesNorthToSouth:_.southIndicesEastToWest,d=!a,g=!1):0===c?(u=a?_.westIndicesSouthToNorth:_.northIndicesWestToEast,d=!a,g=!0):(u=a?_.southIndicesEastToWest:_.westIndicesSouthToNorth,d=a,g=!a),u.length>0)){f=a?0:u.length-1,p=u[f],_.encoding.decodeTextureCoordinates(_.vertices,p,N);const n=Y(m,e.tile,N,N);if(n.x===A&&n.y===c)return W(_,p,0,0,l),!0;if(f=(0,o.A)(u,d?A:c,function(t,n){_.encoding.decodeTextureCoordinates(_.vertices,t,N);const i=Y(m,e.tile,N,N);return g?d?i.x-A:i.y-c:d?A-i.x:c-i.y}),!(f<0))return W(_,u[f],0,0,l),!0;if(f=~f,f>0&&f<u.length)return function(e,t,n,o,r,a,A,c,l,u){const d=o.encoding,g=o.vertices,f=Y(t,n,d.decodeTextureCoordinates(g,r,N),N),p=Y(t,n,d.decodeTextureCoordinates(g,a,Q),Q);let m;m=l?(A-f.x)/(p.x-f.x):(c-f.y)/(p.y-f.y);const _=d.decodeHeight(g,r),I=d.decodeHeight(g,a),E=n.rectangle;let y;if(w.longitude=h.A.lerp(E.west,E.east,A),w.latitude=h.A.lerp(E.south,E.north,c),u.height=w.height=h.A.lerp(_,I,m),d.hasVertexNormals){const e=d.getOctEncodedNormal(g,r,q),t=d.getOctEncodedNormal(g,a,J),n=i.A.octDecode(e.x,e.y,S),o=i.A.octDecode(t.x,t.y,K);y=s.A.lerp(n,o,m,S),s.A.normalize(y,y),i.A.octEncode(y,u.encodedNormal)}else y=e.geodeticSurfaceNormalCartographic(w,S),i.A.octEncode(y,u.encodedNormal)}(t,m,e.tile,_,u[f-1],u[f],A,c,d,l),!0}return!1}const re=[new s.A,new s.A,new s.A,new s.A],ae=b},71160:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6})},413690:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(660662),o=n(267980),r=n(336946),a=n(369031),s=n(433235),A=n(491446),c=n(610750),l=n(75200),u=n(150429),d=n(584164),h=n(832698),g=n(257941),f=n(766067),p=n(697422),m=n(406882),_=n(612123),I=n(842153),E=n(62467);function y(e){a.A.typeOf.object("options",e),a.A.typeOf.object("options.rectangle",e.rectangle),this.rectangle=p.A.clone(e.rectangle),this.minimumHeight=e.minimumHeight??0,this.maximumHeight=e.maximumHeight??0,this.southwestCornerCartesian=new o.A,this.northeastCornerCartesian=new o.A,this.westNormal=new o.A,this.southNormal=new o.A,this.eastNormal=new o.A,this.northNormal=new o.A;const t=e.ellipsoid??c.A.WGS84;!function(e,t,n){n.cartographicToCartesian(p.A.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(p.A.northeast(t),e.northeastCornerCartesian),x.longitude=t.west,x.latitude=.5*(t.south+t.north),x.height=0;const i=n.cartographicToCartesian(x,T),r=o.A.cross(i,o.A.UNIT_Z,v);o.A.normalize(r,e.westNormal),x.longitude=t.east;const a=n.cartographicToCartesian(x,S),s=o.A.cross(o.A.UNIT_Z,a,C);o.A.normalize(s,e.eastNormal);let A=o.A.subtract(i,a,C);0===o.A.magnitude(A)&&(A=o.A.clone(r,A));const c=o.A.normalize(A,w),l=t.south;let d;if(l>0){x.longitude=.5*(t.west+t.east),x.latitude=l;const i=n.cartographicToCartesian(x,Q.origin);o.A.clone(c,Q.direction);const r=g.A.fromPointNormal(e.southwestCornerCartesian,e.westNormal,D);u.A.rayPlane(Q,r,e.southwestCornerCartesian),d=n.geodeticSurfaceNormal(i,b)}else d=n.geodeticSurfaceNormalCartographic(p.A.southeast(t),b);const h=o.A.cross(d,A,B);o.A.normalize(h,e.southNormal);const f=t.north;let m;if(f<0){x.longitude=.5*(t.west+t.east),x.latitude=f;const i=n.cartographicToCartesian(x,Q.origin);o.A.negate(c,Q.direction);const r=g.A.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,D);u.A.rayPlane(Q,r,e.northeastCornerCartesian),m=n.geodeticSurfaceNormal(i,b)}else m=n.geodeticSurfaceNormalCartographic(p.A.northwest(t),b);const _=o.A.cross(A,m,B);o.A.normalize(_,e.northNormal)}(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,(e.computeBoundingVolumes??1)&&this.computeBoundingVolumes(t)}Object.defineProperties(y.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),y.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=h.A.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=i.A.fromOrientedBoundingBox(this._orientedBoundingBox)};const C=new o.A,b=new o.A,B=new o.A,v=new o.A,w=new o.A,T=new o.A,S=new o.A,x=new r.A,D=new g.A(o.A.UNIT_X,0),Q=new f.A,N=new o.A,R=new o.A,M=new o.A(0,-1,0),L=new o.A(0,0,-1),P=new o.A;y.prototype.distanceToCamera=function(e){a.A.defined("frameState",e);const t=function(e,t){const n=t.camera,i=n.positionWC,r=n.positionCartographic;let a,s,A,c=0;if(!p.A.contains(e.rectangle,r)){let n=e.southwestCornerCartesian,r=e.northeastCornerCartesian,a=e.westNormal,s=e.southNormal,A=e.eastNormal,l=e.northNormal;t.mode!==E.A.SCENE3D&&(n=t.mapProjection.project(p.A.southwest(e.rectangle),N),n.z=n.y,n.y=n.x,n.x=0,r=t.mapProjection.project(p.A.northeast(e.rectangle),R),r.z=r.y,r.y=r.x,r.x=0,a=M,A=o.A.UNIT_Y,s=L,l=o.A.UNIT_Z);const u=o.A.subtract(i,n,P),d=o.A.dot(u,a),h=o.A.dot(u,s),g=o.A.subtract(i,r,P),f=o.A.dot(g,A),m=o.A.dot(g,l);d>0?c+=d*d:f>0&&(c+=f*f),h>0?c+=h*h:m>0&&(c+=m*m)}if(t.mode===E.A.SCENE3D?(a=r.height,s=e.minimumHeight,A=e.maximumHeight):(a=i.x,s=0,A=0),a>A){const e=a-A;c+=e*e}else if(a<s){const e=s-a;c+=e*e}return Math.sqrt(c)}(this,e);if(e.mode===E.A.SCENE3D&&(0,A.A)(this._orientedBoundingBox)){const n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t},y.prototype.intersectPlane=function(e){return a.A.defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},y.prototype.createDebugVolume=function(e){a.A.defined("color",e);const t=new d.A.clone(d.A.IDENTITY),n=new m.A({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new l.A({geometry:n,id:"outline",modelMatrix:t,attributes:{color:s.A.fromColor(e)}});return new I.A({geometryInstances:i,appearance:new _.A({translucent:!1,flat:!0}),asynchronous:!1})};const O=y},224159:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});var i=n(267980),o=n(491446),r=n(336946),a=n(610750),s=n(647326),A=n(331185),c=n(257941),l=n(173885),u=n(660662),d=n(369031),h=n(433235),g=n(75200),f=n(584164),p=n(612123),m=n(842153),_=n(252538);let I=new r.A;function E(e){d.A.typeOf.object("options",e),d.A.typeOf.string("options.token",e.token);const t=_.A.fromToken(e.token),n=e.minimumHeight??0,o=e.maximumHeight??0,r=e.ellipsoid??a.A.WGS84;this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=o,this.ellipsoid=r;const s=function(e,t,n,o){const r=new Array(6),a=e.getCenter(),s=o.geodeticSurfaceNormal(a,y),A=o.cartesianToCartographic(a,C);A.height=n;const l=o.cartographicToCartesian(A,b),u=c.A.fromPointNormal(l,s);r[0]=u;let d,h=0;const g=[];let f,p;for(d=0;d<4;d++){f=e.getVertex(d),g[d]=f,p=o.cartesianToCartographic(f,B),p.height=t;const n=c.A.getPointDistance(u,o.cartographicToCartesian(p,v));n<h&&(h=n)}const m=c.A.clone(u);for(m.normal=i.A.negate(m.normal,m.normal),m.distance=-1*m.distance+h,r[1]=m,d=0;d<4;d++){f=g[d];const e=g[(d+1)%4],t=o.geodeticSurfaceNormal(f,w),n=i.A.subtract(e,f,S);let a=i.A.cross(n,t,T);a=i.A.normalize(a,a),r[2+d]=c.A.fromPointNormal(f,a)}return r}(t,n,o,r);this._boundingPlanes=s;const A=function(e){const t=new Array(8);for(let n=0;n<4;n++)t[n]=V(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=V(e[1],e[2+(n+3)%4],e[2+n%4]);return t}(s);let l;for(this._vertices=A,this._edgeNormals=new Array(6),this._edgeNormals[0]=Y(s[0],A.slice(0,4)),l=0;l<4;l++)this._edgeNormals[0][l]=i.A.negate(this._edgeNormals[0][l],this._edgeNormals[0][l]);for(this._edgeNormals[1]=Y(s[1],A.slice(4,8)),l=0;l<4;l++)this._edgeNormals[2+l]=Y(s[2+l],[A[l%4],A[(l+1)%4],A[4+(l+1)%4],A[4+l]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],l=0;l<4;l++)this._planeVertices.push([this._vertices[l%4],this._vertices[(l+1)%4],this._vertices[4+(l+1)%4],this._vertices[4+l]]);const h=t.getCenter();I=r.cartesianToCartographic(h,I),I.height=(o+n)/2,this.center=r.cartographicToCartesian(I,h),this._boundingSphere=u.A.fromPoints(A)}const y=new i.A,C=new r.A,b=new i.A,B=new r.A,v=new i.A,w=new i.A,T=new i.A,S=new i.A;let x=new i.A,D=new i.A,Q=new i.A,N=new i.A,R=new i.A,M=new i.A;const L=new i.A,P=new i.A,O=new i.A;let F=new i.A,U=new i.A,k=new i.A,G=new i.A;const H=new A.A;function V(e,t,n){x=e.normal,D=t.normal,Q=n.normal,N=i.A.multiplyByScalar(e.normal,-e.distance,N),R=i.A.multiplyByScalar(t.normal,-t.distance,R),M=i.A.multiplyByScalar(n.normal,-n.distance,M),F=i.A.multiplyByScalar(i.A.cross(D,Q,L),i.A.dot(N,x),F),U=i.A.multiplyByScalar(i.A.cross(Q,x,P),i.A.dot(R,D),U),k=i.A.multiplyByScalar(i.A.cross(x,D,O),i.A.dot(M,Q),k),H[0]=x.x,H[1]=D.x,H[2]=Q.x,H[3]=x.y,H[4]=D.y,H[5]=Q.y,H[6]=x.z,H[7]=D.z,H[8]=Q.z;const o=A.A.determinant(H);return G=i.A.add(F,U,G),G=i.A.add(G,k,G),new i.A(G.x/o,G.y/o,G.z/o)}let z=new i.A,j=new i.A;function Y(e,t){const n=[];for(let o=0;o<4;o++)z=i.A.subtract(t[(o+1)%4],t[o],z),j=i.A.cross(e.normal,z,j),j=i.A.normalize(j,j),n[o]=i.A.clone(j);return n}Object.defineProperties(E.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});const q=new i.A;E.prototype.distanceToCamera=function(e){d.A.defined("frameState",e);const t=e.camera.positionWC,n=[],o=[];let r,a,s,A,l;for(c.A.getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),o.push(this._planeVertices[0]),r=this._edgeNormals[0]):c.A.getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),o.push(this._planeVertices[1]),r=this._edgeNormals[1]),a=0;a<4;a++)s=2+a,c.A.getPointDistance(this._boundingPlanes[s],t)>0&&(n.push(s),o.push(this._planeVertices[s]),r=this._edgeNormals[s]);if(0===n.length)return 0;if(1===n.length)return l=this._boundingPlanes[n[0]],A=Z(c.A.projectPointOntoPlane(l,t,q),o[0],0,r),i.A.distance(A,t);if(2===n.length){if(0===n[0]){const e=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return A=K(t,e[0],e[1]),i.A.distance(A,t)}let e,r=Number.MAX_VALUE;for(a=0;a<2;a++)l=this._boundingPlanes[n[a]],A=Z(c.A.projectPointOntoPlane(l,t,q),o[a],0,this._edgeNormals[n[a]]),e=i.A.distanceSquared(A,t),e<r&&(r=e);return Math.sqrt(r)}if(n.length>3)return A=Z(c.A.projectPointOntoPlane(this._boundingPlanes[1],t,q),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),i.A.distance(A,t);const u=2===n[1]&&5===n[2]?0:1;return 0===n[0]?i.A.distance(t,this._vertices[(n[1]-2+u)%4]):i.A.distance(t,this._vertices[4+(n[1]-2+u)%4])};const W=new i.A,J=new i.A;function K(e,t,n){const o=i.A.subtract(n,t,W),r=i.A.subtract(e,t,J);let a=i.A.dot(o,r);if(a<=0)return t;const s=i.A.dot(o,o);return a>=s?n:(a/=s,new i.A((1-a)*t.x+a*n.x,(1-a)*t.y+a*n.y,(1-a)*t.z+a*n.z))}const X=new c.A(i.A.UNIT_X,0);function Z(e,t,n,r){let a,s,A,l=Number.MAX_VALUE;for(let n=0;n<t.length;n++){const o=c.A.fromPointNormal(t[n],r[n],X);c.A.getPointDistance(o,e)<0||(A=K(e,t[n],t[(n+1)%4]),a=i.A.distance(e,A),a<l&&(l=a,s=A))}return(0,o.A)(s)?s:e}E.prototype.intersectPlane=function(e){d.A.defined("plane",e);let t=0,n=0;for(let o=0;o<this._vertices.length;o++)i.A.dot(e.normal,this._vertices[o])+e.distance<0?n++:t++;return t===this._vertices.length?s.A.INSIDE:n===this._vertices.length?s.A.OUTSIDE:s.A.INTERSECTING},E.prototype.createDebugVolume=function(e){d.A.defined("color",e);const t=new f.A.clone(f.A.IDENTITY),n=new l.A({polygonHierarchy:{positions:this._planeVertices[0]}}),i=l.A.createGeometry(n),o=new g.A({geometry:i,id:"outline",modelMatrix:t,attributes:{color:h.A.fromColor(e)}}),r=new l.A({polygonHierarchy:{positions:this._planeVertices[1]}}),a=l.A.createGeometry(r),s=new g.A({geometry:a,id:"outline",modelMatrix:t,attributes:{color:h.A.fromColor(e)}}),A=[];for(let n=0;n<4;n++){const i=new l.A({polygonHierarchy:{positions:this._planeVertices[2+n]}}),o=l.A.createGeometry(i);A[n]=new g.A({geometry:o,id:"outline",modelMatrix:t,attributes:{color:h.A.fromColor(e)}})}return new m.A({geometryInstances:[A[0],A[1],A[2],A[3],s,o],appearance:new p.A({translucent:!1,flat:!0}),asynchronous:!1})};const $=E},315747:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(660662),o=n(267980),r=n(369031),a=n(433235),s=n(75200),A=n(367817),c=n(584164),l=n(6874),u=n(612123),d=n(842153);function h(e,t){0===t&&(t=A.A.EPSILON7),this._boundingSphere=new i.A(e,t)}Object.defineProperties(h.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),h.prototype.distanceToCamera=function(e){r.A.defined("frameState",e);const t=this._boundingSphere;return Math.max(0,o.A.distance(t.center,e.camera.positionWC)-t.radius)},h.prototype.intersectPlane=function(e){return r.A.defined("plane",e),i.A.intersectPlane(this._boundingSphere,e)},h.prototype.update=function(e,t){o.A.clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},h.prototype.createDebugVolume=function(e){r.A.defined("color",e);const t=new l.A({radius:this.radius}),n=c.A.fromTranslation(this.center,new c.A.clone(c.A.IDENTITY)),i=new s.A({geometry:t,id:"outline",modelMatrix:n,attributes:{color:a.A.fromColor(e)}});return new d.A({geometryInstances:i,appearance:new u.A({translucent:!1,flat:!0}),asynchronous:!1})};const g=h},976092:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446),o=n(921243);function r(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}r.prototype.freeResources=function(){(0,i.A)(this.readyImagery)&&this.readyImagery.releaseReference(),(0,i.A)(this.loadingImagery)&&this.loadingImagery.releaseReference()},r.prototype.processStateMachine=function(e,t,n){const r=this.loadingImagery,a=r.imageryLayer;if(r.processStateMachine(t,!this.useWebMercatorT,n),r.state===o.A.READY)return(0,i.A)(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=a._calculateTextureTranslationAndScale(e,this),!0;let s,A=r.parent;for(;(0,i.A)(A)&&(A.state!==o.A.READY||!this.useWebMercatorT&&!(0,i.A)(A.texture));)A.state!==o.A.FAILED&&A.state!==o.A.INVALID&&(s=s||A),A=A.parent;return this.readyImagery!==A&&((0,i.A)(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=A,(0,i.A)(A)&&(A.addReference(),this.textureTranslationAndScale=a._calculateTextureTranslationAndScale(e,this))),!(r.state!==o.A.FAILED&&r.state!==o.A.INVALID||(0,i.A)(s)&&(s.processStateMachine(t,!this.useWebMercatorT,n),1))};const a=r},829670:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var i=n(434067),o=n(336946),r=n(369031),a=n(915325),s=n(491446),A=n(653577),c=n(182348),l=n(697422),u=n(373388),d=n(744603),h=n(123245),g=n(705302),f=n(41076),p=n(66458);function m(e){p.A.call(this,e)}function _(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function I(e,t,n){const i=e.positionToTileXY(l.A.southwest(t),n),o=e.positionToTileXY(l.A.northeast(t),n);return(Math.abs(o.x-i.x)+1)*(Math.abs(o.y-i.y)+1)>4?0:n}m._requestMetadata=async function(e,t,n,i){try{const o=await n.fetchXML();return m._metadataSuccess(o,e,t,n,i)}catch(n){if(n instanceof u.A)return m._metadataFailure(e,t);throw n}},m.fromUrl=async function(e,t){r.A.defined("url",e);const n=d.A.createIfNeeded(e);n.appendForwardSlash();const i=n,o=n.getDerivedResource({url:"tilemapresource.xml"});t=t??a.A.EMPTY_OBJECT;const s=await m._requestMetadata(t,i,o);return new m(s)},(0,s.A)(Object.create)&&(m.prototype=Object.create(p.A.prototype),m.prototype.constructor=m),m._metadataSuccess=function(e,t,n,r,a){const u=/tileformat/i,d=/tileset/i,p=/tilesets/i,m=/boundingbox/i;let E,y,C;const b=[],B=e.childNodes[0].childNodes;for(let e=0;e<B.length;e++)if(u.test(B.item(e).nodeName))E=B.item(e);else if(p.test(B.item(e).nodeName)){C=B.item(e);const t=B.item(e).childNodes;for(let e=0;e<t.length;e++)d.test(t.item(e).nodeName)&&b.push(t.item(e))}else m.test(B.item(e).nodeName)&&(y=B.item(e));let v;if(!(0,s.A)(C)||!(0,s.A)(y))throw v=`Unable to find expected tilesets or bbox attributes in ${r.url}.`,(0,s.A)(a)&&g.A.reportError(void 0,a,a.errorEvent,v),new h.A(v);const w=t.fileExtension??E.getAttribute("extension"),T=t.tileWidth??parseInt(E.getAttribute("width"),10),S=t.tileHeight??parseInt(E.getAttribute("height"),10);let x=t.minimumLevel??parseInt(b[0].getAttribute("order"),10);const D=t.maximumLevel??parseInt(b[b.length-1].getAttribute("order"),10),Q=C.getAttribute("profile");let N=t.tilingScheme;if(!(0,s.A)(N))if("geodetic"===Q||"global-geodetic"===Q)N=new c.A({ellipsoid:t.ellipsoid});else{if("mercator"!==Q&&"global-mercator"!==Q)throw v=`${r.url} specifies an unsupported profile attribute, ${Q}.`,(0,s.A)(a)&&g.A.reportError(void 0,a,a.errorEvent,v),new h.A(v);N=new f.A({ellipsoid:t.ellipsoid})}let R=l.A.clone(t.rectangle);if(!(0,s.A)(R)){let e,n,r,a;t.flipXY?(r=new i.A(parseFloat(y.getAttribute("miny")),parseFloat(y.getAttribute("minx"))),a=new i.A(parseFloat(y.getAttribute("maxy")),parseFloat(y.getAttribute("maxx")))):(r=new i.A(parseFloat(y.getAttribute("minx")),parseFloat(y.getAttribute("miny"))),a=new i.A(parseFloat(y.getAttribute("maxx")),parseFloat(y.getAttribute("maxy"))));const s="geodetic"===Q||"mercator"===Q;if(N.projection instanceof A.A||s)e=o.A.fromDegrees(r.x,r.y),n=o.A.fromDegrees(a.x,a.y);else{const t=N.projection;e=t.unproject(r),n=t.unproject(a)}R=new l.A(e.longitude,e.latitude,n.longitude,n.latitude)}return R=_(R,N),x=I(N,R,x),{url:n.getDerivedResource({url:`{z}/{x}/{reverseY}.${w}`}),tilingScheme:N,rectangle:R,tileWidth:T,tileHeight:S,minimumLevel:x,maximumLevel:D,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit}},m._metadataFailure=function(e,t){const n=e.fileExtension??"png",i=e.tileWidth??256,o=e.tileHeight??256,r=e.maximumLevel,a=(0,s.A)(e.tilingScheme)?e.tilingScheme:new f.A({ellipsoid:e.ellipsoid});let A=e.rectangle??a.rectangle;A=_(A,a);const c=I(a,A,e.minimumLevel);return{url:t.getDerivedResource({url:`{z}/{x}/{reverseY}.${n}`}),tilingScheme:a,rectangle:A,tileWidth:i,tileHeight:o,minimumLevel:c,maximumLevel:r,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit}};const E=m},335859:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(915325),r=n(965976);function a(e){const t=(e=e??o.A.EMPTY_OBJECT).tile,n=e.class;i.A.typeOf.object("options.tile",t),i.A.typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return r.A.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return r.A.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return r.A.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return r.A.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return r.A.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return r.A.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return r.A.setPropertyBySemantic(e,t,this._properties,this._class)};const s=a},11745:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(660662),o=n(854894),r=n(267980),a=n(369031),s=n(433235),A=n(75200),c=n(331185),l=n(584164),u=n(367817),d=n(832698),h=n(612123),g=n(842153);const f=new r.A,p=new r.A,m=new r.A,_=new r.A;function I(e,t,n){n=r.A.cross(e,t,n);const i=r.A.magnitude(n);return r.A.multiplyByScalar(n,u.A.EPSILON7/i,n)}function E(e,t){const n=r.A.normalize(e,_);return I(e,r.A.equalsEpsilon(n,r.A.UNIT_X,u.A.EPSILON6)?r.A.UNIT_Y:r.A.UNIT_X,t)}function y(e){let t=c.A.getColumn(e,0,f),n=c.A.getColumn(e,1,p),i=c.A.getColumn(e,2,m);const o=r.A.equals(t,r.A.ZERO),a=r.A.equals(n,r.A.ZERO),s=r.A.equals(i,r.A.ZERO);return o||a||s?o&&a&&s?(e[0]=u.A.EPSILON7,e[4]=u.A.EPSILON7,e[8]=u.A.EPSILON7,e):(!o||a||s?o||!a||s?o||a||!s?o?a?s||(t=E(i,t),n=I(i,t,n)):(t=E(n,t),i=I(n,t,i)):(n=E(t,n),i=I(n,t,i)):i=I(n,t,i):n=I(t,i,n):t=I(n,i,t),c.A.setColumn(e,0,t,e),c.A.setColumn(e,1,n,e),c.A.setColumn(e,2,i,e),e):e}function C(e,t){t=y(t),this._orientedBoundingBox=new d.A(e,t),this._boundingSphere=i.A.fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(C.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),C.prototype.distanceToCamera=function(e){return a.A.defined("frameState",e),Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},C.prototype.intersectPlane=function(e){return a.A.defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},C.prototype.update=function(e,t){r.A.clone(e,this._orientedBoundingBox.center),t=y(t),c.A.clone(t,this._orientedBoundingBox.halfAxes),i.A.fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},C.prototype.createDebugVolume=function(e){a.A.defined("color",e);const t=new o.A({minimum:new r.A(-1,-1,-1),maximum:new r.A(1,1,1)}),n=l.A.fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),i=new A.A({geometry:t,id:"outline",modelMatrix:n,attributes:{color:s.A.fromColor(e)}});return new g.A({geometryInstances:i,appearance:new h.A({translucent:!1,flat:!0}),asynchronous:!1})};const b=C},271101:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(491446);function o(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function r(e,t){const n=t.replacementPrevious,i=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=i),t===e.head?e.head=i:n.replacementNext=i,t===e.tail?e.tail=n:i.replacementPrevious=n,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}o.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},o.prototype.trimTiles=function(e){let t=this.tail,n=!0;for(;n&&(0,i.A)(this._lastBeforeStartOfFrame)&&this.count>e&&(0,i.A)(t);){n=t!==this._lastBeforeStartOfFrame;const e=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),r(this,t)),t=e}},o.prototype.markTileRendered=function(e){const t=this.head;if(t!==e){if(++this.count,!(0,i.A)(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);((0,i.A)(e.replacementPrevious)||(0,i.A)(e.replacementNext))&&r(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)};const a=o},960847:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=i.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}},o=i},323314:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(677354);function o(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._ready=!1}Object.defineProperties(o.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),o.fromJson=function(e,t,n,i){const r=new o(e,t,n);return r._tileset.loadTileset(r._resource,i,r._tile),r._ready=!0,r},o.prototype.hasProperty=function(e,t){return!1},o.prototype.getFeature=function(e){},o.prototype.applyDebugSettings=function(e,t){},o.prototype.applyStyle=function(e){},o.prototype.update=function(e,t){},o.prototype.pick=function(e,t,n){},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){return(0,i.A)(this)};const r=o},751069:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(369031),o=n(915325),r=n(491446),a=n(965976);function s(e){const t=(e=e??o.A.EMPTY_OBJECT).tileset,n=e.class;i.A.typeOf.object("options.tileset",t),i.A.typeOf.object("options.class",n);const a=(0,r.A)(t.properties)?t.properties:{};this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return a.A.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return a.A.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return a.A.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return a.A.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return a.A.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return a.A.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return a.A.setPropertyBySemantic(e,t,this._properties,this._class)};const A=s},99520:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(369031),o=n(915325),r=n(491446),a=n(605971),s=n(591978),A=n(209202),c=n(307898);function l(e){e=e??o.A.EMPTY_OBJECT,i.A.typeOf.object("options.clock",e.clock),i.A.typeOf.object("options.times",e.times),i.A.typeOf.func("options.requestImageFunction",e.requestImageFunction),i.A.typeOf.func("options.reloadFunction",e.reloadFunction),this._tileCache={},this._tilesRequestedForInterval=[];const t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function u(e,t,n){return`${e}-${t}-${n}`}function d(e){const t=e._times;if(!(0,r.A)(t))return;const n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,a=n.multiplier;if(!o&&0!==a)return;let A,c=t.indexOf(i);if(c<0)return;const l=t.get(c);return a>0?(A=s.A.secondsDifference(l.stop,i),++c):(A=s.A.secondsDifference(l.start,i),--c),A/=a,c>=0&&A<=5?t.get(c):void 0}function h(e,t,n){const i=e._times.indexOf(n.start),o=e._tileCache;let a=o[i];(0,r.A)(a)||(a=o[i]={});const s=t.key;if((0,r.A)(a[s]))return!0;const l=function(e){const t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}(s),u=new A.A({throttle:!1,throttleByServer:!0,type:c.A.IMAGERY,priorityFunction:t.priorityFunction}),d=e._requestImageFunction(l.x,l.y,l.level,u,n);return!!(0,r.A)(d)&&(a[s]={promise:d,request:u},!0)}Object.defineProperties(l.prototype,{clock:{get:function(){return this._clock},set:function(e){if(!(0,r.A)(e))throw new a.A("value is required.");this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){if(!(0,r.A)(e))throw new a.A("value is required.");this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),l.prototype.getFromCache=function(e,t,n,i){const o=u(e,t,n);let a;const s=this._tileCache[this._currentIntervalIndex];if((0,r.A)(s)&&(0,r.A)(s[o])){const e=s[o];a=e.promise.catch(function(t){throw i.state=e.request.state,t}),delete s[o]}return a},l.prototype.checkApproachingInterval=function(e,t,n,i){const o=u(e,t,n),a=this._tilesRequestedForInterval,s=d(this),A={key:o,priorityFunction:i.priorityFunction};(0,r.A)(s)&&h(this,A,s)||a.push(A),a.length>=512&&a.splice(0,256)},l.prototype._clockOnTick=function(e){const t=e.currentTime,n=this._times.indexOf(t),i=this._currentIntervalIndex;if(n!==i){const e=this._tileCache[i];for(const t in e)e.hasOwnProperty(t)&&e[t].request.cancel();return delete this._tileCache[i],this._tilesRequestedForInterval=[],this._currentIntervalIndex=n,void this._reloadFunction()}const o=d(this);if((0,r.A)(o)){const e=this._tilesRequestedForInterval;let t=!0;for(;t&&0!==e.length;){const n=e.pop();t=h(this,n,o),t||e.push(n)}}};const g=l},972757:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(369031),o=n(430346),r=n(915325),a=n(491446),s=n(677354),A=n(955943),c=n(230259),l=n(591978),u=n(367817),d=n(584164),h=n(744603),g=n(711284),f=n(259069),p=n(534135),m=n(929771),_=n(62467),I=n(988609);function E(e){e=e??r.A.EMPTY_OBJECT,i.A.typeOf.object("options.clock",e.clock),i.A.typeOf.object("options.intervals",e.intervals),this.show=e.show??!0,this.modelMatrix=d.A.clone(e.modelMatrix??d.A.IDENTITY),this.shadows=e.shadows??I.A.ENABLED,this.maximumMemoryUsage=e.maximumMemoryUsage??256,this.shading=new m.A(e.shading),this.style=e.style,this.frameFailed=new A.A,this.frameChanged=new A.A,this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new p.A,this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=new Array(5).fill(0),this._runningAverage=0}function y(e){return`uniform vec4 czm_pickColor;\n${e}`}function C(){return"czm_pickColor"}Object.defineProperties(E.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){g.A.setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if((0,a.A)(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}}}),E.prototype.makeStyleDirty=function(){this._styleDirty=!0},E.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};const b=new l.A;function B(e){const t=e._clock,n=t.canAnimate&&t.shouldAnimate,i=t.multiplier;return n?i:0}function v(e,t){return e._intervals.indexOf(t.start)}function w(e,t){return function(n){const i=(0,a.A)(n.message)?n.message:n.toString();e.frameFailed.numberOfListeners>0?e.frameFailed.raiseEvent({uri:t,message:i}):(console.log(`A frame failed to load: ${t}`),console.log(`Error: ${i}`))}}const T=new d.A,S=new m.A;function x(e,t,n,i){const o=e.shading??S,r=t.pointCloud,s=t.transform??d.A.IDENTITY;r.modelMatrix=d.A.multiplyTransformation(e.modelMatrix,s,T),r.style=e.style,r.time=n.timeSinceLoad,r.shadows=e.shadows,r.clippingPlanes=e._clippingPlanes,r.isClipped=n.isClipped,r.attenuation=o.attenuation,r.backFaceCulling=o.backFaceCulling,r.normalShading=o.normalShading,r.geometricError=function(e,t){const n=e.shading;return(0,a.A)(n)&&(0,a.A)(n.baseResolution)?n.baseResolution:(0,a.A)(t.boundingSphere)?u.A.cbrt(t.boundingSphere.volume()/t.pointsLength):0}(e,r),r.geometricErrorScale=o.geometricErrorScale,r.maximumAttenuation=function(e){const t=e.shading;return(0,a.A)(t)&&(0,a.A)(t.maximumAttenuation)?t.maximumAttenuation:10}(e);try{r.update(i)}catch(n){w(e,t.uri)(n)}t.touchedFrameNumber=i.frameNumber}function D(e,t,n,i){const r=function(e,t,n){const i=v(e,t),r=e._frames;let s=r[i];if(!(0,a.A)(s)){const A=t.data.transform,l=(0,a.A)(A)?d.A.fromArray(A):void 0,u=t.data.uri;s={pointCloud:void 0,transform:l,timestamp:(0,c.A)(),sequential:!0,ready:!1,touchedFrameNumber:n.frameNumber,uri:u},r[i]=s,h.A.fetchArrayBuffer({url:u}).then(function(t){var n;s.pointCloud=new f.A({arrayBuffer:t,cull:!0,fragmentShaderLoaded:y,uniformMapLoaded:(n=e,function(e){return(0,o.A)(e,{czm_pickColor:function(){return n._pickId.color}})}),pickIdLoaded:C})}).catch(w(e,u))}return s}(e,t,i);!function(e,t,n,i){t.touchedFrameNumber<i.frameNumber-1&&(t.sequential=!1);const o=t.pointCloud;if((0,a.A)(o)&&!t.ready){const r=i.commandList,a=r.length;x(e,t,n,i),o.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=o.geometryByteLength,r.length=a,t.sequential)&&function(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}(e,((0,c.A)()-t.timestamp)/1e3)}t.touchedFrameNumber=i.frameNumber}(e,r,n,i)}function Q(e,t){const n=e._frames,i=n.length;for(let o=0;o<i;++o){const i=n[o];if((0,a.A)(i)&&(!(0,a.A)(t)||t(i))){const t=i.pointCloud;i.ready&&(e._totalMemoryUsageInBytes-=t.geometryByteLength),(0,a.A)(t)&&t.destroy(),i===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),n[o]=void 0}}}function N(e,t,n,i,o){return!!(0,a.A)(n)&&(!!n.ready||(D(e,t,i,o),n.ready))}const R={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};E.prototype.update=function(e){if(e.mode===_.A.MORPHING)return;if(!this.show)return;(0,a.A)(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),(0,a.A)(this._loadTimestamp)||(this._loadTimestamp=l.A.clone(e.time));const t=Math.max(1e3*l.A.secondsDifference(e.time,this._loadTimestamp),0),n=this._clippingPlanes;let i=0,o=!1;const r=(0,a.A)(n)&&n.enabled;r&&(n.update(e),i=n.clippingPlanesState),this._clippingPlanesState!==i&&(this._clippingPlanesState=i,o=!0);const s=this._styleDirty;this._styleDirty=!1,(o||s)&&function(e,t,n){const i=e._frames,o=i.length;for(let e=0;e<o;++e){const o=i[e];(0,a.A)(o)&&(0,a.A)(o.pointCloud)&&(o.pointCloud.clippingPlanesDirty=t,o.pointCloud.styleDirty=n)}}(this,o,s),R.timeSinceLoad=t,R.isClipped=r;const A=this.shading,c=this._pointCloudEyeDomeLighting,u=e.commandList,d=u.length;let h=this._previousInterval,g=this._nextInterval;const f=function(e){const t=e._intervals,n=e._clock.currentTime,i=t.indexOf(n);return t.get(i)}(this);if(!(0,a.A)(f))return;let p=!1;const m=B(this),I=0===m;m!==this._clockMultiplier&&(p=!0,this._clockMultiplier=m),(0,a.A)(h)&&!I||(h=f),(!(0,a.A)(g)||p||function(e,t,n){const i=B(e),o=v(e,t),r=v(e,n);return i>=0?o>=r:o<=r}(this,f,g))&&(g=function(e,t){const n=e._intervals,i=e._clock,o=B(e);if(0===o)return;const r=e._getAverageLoadTime(),a=l.A.addSeconds(i.currentTime,r*o,b);let s=n.indexOf(a);return s===v(e,t)&&(o>=0?++s:--s),n.get(s)}(this,f)),h=function(e,t,n,i,o){let r,a,s;const A=e._intervals,c=e._frames,l=v(e,n),u=v(e,t);if(l>=u){for(r=l;r>=u;--r)if(a=A.get(r),s=c[r],N(e,a,s,i,o))return a}else for(r=l;r<=u;++r)if(a=A.get(r),s=c[r],N(e,a,s,i,o))return a;return t}(this,h,f,R,e);let E=function(e,t){const n=v(e,t),i=e._frames[n];if((0,a.A)(i)&&i.ready)return i}(this,h);(0,a.A)(E)||(D(this,h,R,e),E=this._lastRenderedFrame),(0,a.A)(E)&&x(this,E,R,e),(0,a.A)(g)&&D(this,g,R,e);const y=this;(0,a.A)(E)&&!(0,a.A)(this._lastRenderedFrame)&&e.afterRender.push(function(){return!0}),(0,a.A)(E)&&E!==this._lastRenderedFrame&&y.frameChanged.numberOfListeners>0&&e.afterRender.push(function(){return y.frameChanged.raiseEvent(y),!0}),this._previousInterval=h,this._nextInterval=g,this._lastRenderedFrame=E,this._totalMemoryUsageInBytes>1024*this.maximumMemoryUsage*1024&&Q(this,function(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}(e));const C=u.length-d;(0,a.A)(A)&&A.attenuation&&A.eyeDomeLighting&&C>0&&c.update(e,d,A,this.boundingSphere)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){return Q(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,s.A)(this)};const M=E},639475:(e,t,n)=>{"use strict";n.d(t,{A:()=>r,E:()=>o});const i={REINHARD:"REINHARD",MODIFIED_REINHARD:"MODIFIED_REINHARD",FILMIC:"FILMIC",ACES:"ACES",PBR_NEUTRAL:"PBR_NEUTRAL"};function o(e){return e===i.REINHARD||e===i.MODIFIED_REINHARD||e===i.FILMIC||e===i.ACES||e===i.PBR_NEUTRAL}const r=Object.freeze(i)},440463:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(647934),o=n(41476),r=n(491446),a=n(677354),s=n(276904),A=n(769493),c=n(377496),l=n(804701),u=n(760866),d=n(57775),h=n(40118),g=n(654799),f=n(342875),p=n(616e3),m=n(212597),_=n(279291),I=n(200646),E=n(938987),y=n(896464);function C(e){this._drawClassificationFBO=new l.A({createDepthAttachments:!1}),this._accumulationFBO=new l.A({createDepthAttachments:!1}),this._packFBO=new l.A,this._opaqueDepthStencilTexture=void 0,this._textureToComposite=void 0,this._translucentDepthStencilTexture=void 0,this._packDepthCommand=void 0,this._accumulateCommand=void 0,this._compositeCommand=void 0,this._copyCommand=void 0,this._clearColorCommand=new A.A({color:new o.A(0,0,0,0),owner:this}),this._clearDepthStencilCommand=new A.A({depth:1,stencil:0,owner:this}),this._supported=e.depthTexture,this._viewport=new i.A,this._rsDepth=void 0,this._rsAccumulate=void 0,this._rsComp=void 0,this._useScissorTest=void 0,this._scissorRectangle=void 0,this._hasTranslucentDepth=!1,this._frustumsDrawn=0}function b(e){e._textureToComposite=void 0,e._translucentDepthStencilTexture=e._translucentDepthStencilTexture&&!e._translucentDepthStencilTexture.isDestroyed()&&e._translucentDepthStencilTexture.destroy()}function B(e){e._drawClassificationFBO.destroy(),e._accumulationFBO.destroy(),e._packFBO.destroy()}Object.defineProperties(C.prototype,{hasTranslucentDepth:{get:function(){return this._hasTranslucentDepth}}}),C.prototype.executeTranslucentCommands=function(e,t,n,o,a){const A=e.frameState.useLogDepth,l=e.context,u=n.framebuffer;for(let e=0;e<o.length;++e){let t=o[e];if(t=A?t.derivedCommands.logDepth.command:t,t.depthForTranslucentClassification){this._hasTranslucentDepth=!0;break}}if(this._hasTranslucentDepth){(function(e,t,n,o){if(!e.isSupported())return;e._opaqueDepthStencilTexture=o;const a=e._opaqueDepthStencilTexture.width,A=e._opaqueDepthStencilTexture.height;let l,u;if(e._drawClassificationFBO.isDirty(a,A)&&(function(e,t,n,i){b(e),e._translucentDepthStencilTexture=new p.A({context:t,width:n,height:i,pixelFormat:s.A.DEPTH_STENCIL,pixelDatatype:d.A.UNSIGNED_INT_24_8,sampler:g.A.NEAREST})}(e,t,a,A),function(e,t,n,i){B(e),e._drawClassificationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._drawClassificationFBO.update(t,n,i),e._accumulationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._accumulationFBO.update(t,n,i),e._packFBO.update(t,n,i)}(e,t,a,A)),(0,r.A)(e._packDepthCommand)||(l=new f.A({sources:[m.A]}),u={u_opaqueDepthTexture:function(){return e._opaqueDepthStencilTexture},u_translucentDepthTexture:function(){return e._translucentDepthStencilTexture}},e._packDepthCommand=t.createViewportQuadCommand(l,{uniformMap:u,owner:e})),!(0,r.A)(e._compositeCommand)){l=new f.A({sources:[_.A]}),u={colorTexture:function(){return e._textureToComposite}},e._compositeCommand=t.createViewportQuadCommand(l,{uniformMap:u,owner:e});const n=e._compositeCommand,i=n.shaderProgram,o=t.shaderCache.createDerivedShaderProgram(i,"pick",{vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:new f.A({sources:l.sources,defines:["PICK"]}),attributeLocations:i._attributeLocations}),r=c.A.shallowClone(n);r.shaderProgram=o,n.derivedCommands.pick=r}(0,r.A)(e._copyCommand)||(l=new f.A({sources:[_.A]}),u={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._copyCommand=t.createViewportQuadCommand(l,{uniformMap:u,owner:e})),(0,r.A)(e._accumulateCommand)||(l=new f.A({sources:[_.A]}),u={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._accumulateCommand=t.createViewportQuadCommand(l,{uniformMap:u,owner:e})),e._viewport.width=a,e._viewport.height=A;const C=!i.A.equals(e._viewport,n.viewport);let v=C!==e._useScissorTest;e._useScissorTest=C,i.A.equals(e._scissorRectangle,n.viewport)||(e._scissorRectangle=i.A.clone(n.viewport,e._scissorRectangle),v=!0),(0,r.A)(e._rsDepth)&&i.A.equals(e._viewport,e._rsDepth.viewport)&&!v||(e._rsDepth=h.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,r.A)(e._packDepthCommand)&&(e._packDepthCommand.renderState=e._rsDepth),(0,r.A)(e._rsAccumulate)&&i.A.equals(e._viewport,e._rsAccumulate.viewport)&&!v||(e._rsAccumulate=h.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:y.A.EQUAL,reference:E.A.CESIUM_3D_TILE_MASK}})),(0,r.A)(e._accumulateCommand)&&(e._accumulateCommand.renderState=e._rsAccumulate),(0,r.A)(e._rsComp)&&i.A.equals(e._viewport,e._rsComp.viewport)&&!v||(e._rsComp=h.A.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:I.A.ALPHA_BLEND})),(0,r.A)(e._compositeCommand)&&(e._compositeCommand.renderState=e._rsComp,e._compositeCommand.derivedCommands.pick.renderState=e._rsComp)})(this,l,n,a),n.framebuffer=this._drawClassificationFBO.framebuffer,this._clearDepthStencilCommand.execute(l,n);for(let i=0;i<o.length;++i){let r=o[i];(r=A?r.derivedCommands.logDepth.command:r,r.depthForTranslucentClassification)&&t(r.derivedCommands.depth.depthOnlyCommand,e,n)}this._frustumsDrawn+=this._hasTranslucentDepth?1:0,this._hasTranslucentDepth&&(n.framebuffer=this._packFBO.framebuffer,this._packDepthCommand.execute(l,n)),n.framebuffer=u}},C.prototype.executeClassificationCommands=function(e,t,n,i){if(!this._hasTranslucentDepth)return;const o=e.context,r=o.uniformState,a=n.framebuffer;n.framebuffer=this._accumulationFBO.framebuffer,this._accumulateCommand.execute(o,n),n.framebuffer=this._drawClassificationFBO.framebuffer,this._frustumsDrawn>1&&this._clearColorCommand.execute(o,n),r.updatePass(u.A.CESIUM_3D_TILE_CLASSIFICATION);const s=r.globeDepthTexture;r.globeDepthTexture=this._packFBO.getColorTexture();const A=i.commands[u.A.CESIUM_3D_TILE_CLASSIFICATION],c=i.indices[u.A.CESIUM_3D_TILE_CLASSIFICATION];for(let i=0;i<c;++i)t(A[i],e,n);r.globeDepthTexture=s,n.framebuffer=a,1!==this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._accumulateCommand.execute(o,n),n.framebuffer=a)},C.prototype.execute=function(e,t){this._hasTranslucentDepth&&(1===this._frustumsDrawn?this._textureToComposite=this._drawClassificationFBO.getColorTexture():this._textureToComposite=this._accumulationFBO.getColorTexture(),(e.frameState.passes.pick?this._compositeCommand.derivedCommands.pick:this._compositeCommand).execute(e.context,t),function(e,t,n){if(!e._hasTranslucentDepth)return;const i=n.framebuffer;n.framebuffer=e._drawClassificationFBO.framebuffer,e._clearColorCommand.execute(t._context,n),n.framebuffer=i,e._frustumsDrawn>1&&(n.framebuffer=e._accumulationFBO.framebuffer,e._clearColorCommand.execute(t._context,n)),e._hasTranslucentDepth=!1,e._frustumsDrawn=0}(this,e,t))},C.prototype.isSupported=function(){return this._supported},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return b(this),B(this),(0,r.A)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,r.A)(this._packDepthCommand)&&(this._packDepthCommand.shaderProgram=this._packDepthCommand.shaderProgram&&this._packDepthCommand.shaderProgram.destroy()),(0,a.A)(this)};const v=C},584247:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(376758),o=n(915325),r=n(491446),a=n(605971),s=n(924290),A=n(230259),c=n(711337),l=n(50040);function u(e,t,n,o,r,a,s,A,c,l){this._tweens=e,this._tweenjs=t,this._startObject=(0,i.A)(n),this._stopObject=(0,i.A)(o),this._duration=r,this._delay=a,this._easingFunction=s,this._update=A,this._complete=c,this.cancel=l,this.needsStart=!0}function d(){this._tweens=[]}Object.defineProperties(u.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),u.prototype.cancelTween=function(){this._tweens.remove(this)},Object.defineProperties(d.prototype,{length:{get:function(){return this._tweens.length}}}),d.prototype.add=function(e){if(e=e??o.A.EMPTY_OBJECT,!(0,r.A)(e.startObject)||!(0,r.A)(e.stopObject))throw new a.A("options.startObject and options.stopObject are required.");if(!(0,r.A)(e.duration)||e.duration<0)throw new a.A("options.duration is required and must be positive.");if(0===e.duration)return(0,r.A)(e.complete)&&e.complete(),new u(this);const t=e.duration/c.A.SECONDS_PER_MILLISECOND,n=e.delay??0,A=n/c.A.SECONDS_PER_MILLISECOND,d=e.easingFunction??s.A.LINEAR_NONE,h=e.startObject,g=new l.K(h);g.to((0,i.A)(e.stopObject),t),g.delay(A),g.easing(d),(0,r.A)(e.update)&&g.onUpdate(function(){e.update(h)}),g.onComplete(e.complete??null),g.repeat(e._repeat??0);const f=new u(this,g,e.startObject,e.stopObject,e.duration,n,d,e.update,e.complete,e.cancel);return this._tweens.push(f),f},d.prototype.addProperty=function(e){const t=(e=e??o.A.EMPTY_OBJECT).object,n=e.property,i=e.startValue,s=e.stopValue;if(!(0,r.A)(t)||!(0,r.A)(e.property))throw new a.A("options.object and options.property are required.");if(!(0,r.A)(t[n]))throw new a.A("options.object must have the specified property.");if(!(0,r.A)(i)||!(0,r.A)(s))throw new a.A("options.startValue and options.stopValue are required.");return this.add({startObject:{value:i},stopObject:{value:s},duration:e.duration??3,delay:e.delay,easingFunction:e.easingFunction,update:function(e){t[n]=e.value},complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},d.prototype.addAlpha=function(e){const t=(e=e??o.A.EMPTY_OBJECT).material;if(!(0,r.A)(t))throw new a.A("options.material is required.");const n=[];for(const e in t.uniforms)t.uniforms.hasOwnProperty(e)&&(0,r.A)(t.uniforms[e])&&(0,r.A)(t.uniforms[e].alpha)&&n.push(e);if(0===n.length)throw new a.A("material has no properties with alpha components.");return this.add({startObject:{alpha:e.startValue??0},stopObject:{alpha:e.stopValue??1},duration:e.duration??3,delay:e.delay,easingFunction:e.easingFunction,update:function(e){const i=n.length;for(let o=0;o<i;++o)t.uniforms[n[o]].alpha=e.alpha},complete:e.complete,cancel:e.cancel})},d.prototype.addOffsetIncrement=function(e){const t=(e=e??o.A.EMPTY_OBJECT).material;if(!(0,r.A)(t))throw new a.A("material is required.");if(!(0,r.A)(t.uniforms.offset))throw new a.A("material.uniforms must have an offset property.");const n=t.uniforms;return this.addProperty({object:n,property:"offset",startValue:n.offset,stopValue:n.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},d.prototype.remove=function(e){if(!(0,r.A)(e))return!1;const t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),(0,r.A)(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},d.prototype.removeAll=function(){const e=this._tweens;for(let t=0;t<e.length;++t){const n=e[t];n.tweenjs.stop(),(0,r.A)(n.cancel)&&n.cancel()}e.length=0},d.prototype.contains=function(e){return(0,r.A)(e)&&-1!==this._tweens.indexOf(e)},d.prototype.get=function(e){if(!(0,r.A)(e))throw new a.A("index is required.");return this._tweens[e]},d.prototype.update=function(e){const t=this._tweens;let n=0;for(e=(0,r.A)(e)?e/c.A.SECONDS_PER_MILLISECOND:(0,A.A)();n<t.length;){const i=t[n],o=i.tweenjs;i.needsStart?(i.needsStart=!1,o.start(e)):o.update(e)?n++:(o.stop(),t.splice(n,1))}};const h=d},66458:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var i=n(434067),o=n(267980),r=n(336946),a=n(369031),s=n(430346),A=n(672743),c=n(915325),l=n(491446),u=n(955943),d=n(653577),h=n(367817),g=n(697422),f=n(744603),p=n(41076),m=n(553909);const _=/{[^}]+}/g,I={x:function(e,t,n,i){return x(e,"{x}",t)},y:function(e,t,n,i){return x(e,"{y}",n)},z:function(e,t,n,i){return x(e,"{z}",i)},s:function(e,t,n,i){const o=(t+n+i)%e._subdomains.length;return e._subdomains[o]},reverseX:function(e,t,n,i){const o=e.tilingScheme.getNumberOfXTilesAtLevel(i)-t-1;return x(e,"{reverseX}",o)},reverseY:function(e,t,n,i){const o=e.tilingScheme.getNumberOfYTilesAtLevel(i)-n-1;return x(e,"{reverseY}",o)},reverseZ:function(e,t,n,i){const o=e.maximumLevel;return x(e,"{reverseZ}",(0,l.A)(o)&&i<o?o-i-1:i)},westDegrees:function(e,t,n,i){return D(e,t,n,i),b.west},southDegrees:function(e,t,n,i){return D(e,t,n,i),b.south},eastDegrees:function(e,t,n,i){return D(e,t,n,i),b.east},northDegrees:function(e,t,n,i){return D(e,t,n,i),b.north},westProjected:function(e,t,n,i){return Q(e,t,n,i),v.west},southProjected:function(e,t,n,i){return Q(e,t,n,i),v.south},eastProjected:function(e,t,n,i){return Q(e,t,n,i),v.east},northProjected:function(e,t,n,i){return Q(e,t,n,i),v.north},width:function(e,t,n,i){return e.tileWidth},height:function(e,t,n,i){return e.tileHeight}},E=(0,s.A)(I,{i:function(e,t,n,i,o,r,a){return M(e,t,n,i,o,r),T.x},j:function(e,t,n,i,o,r,a){return M(e,t,n,i,o,r),T.y},reverseI:function(e,t,n,i,o,r,a){return M(e,t,n,i,o,r),e.tileWidth-T.x-1},reverseJ:function(e,t,n,i,o,r,a){return M(e,t,n,i,o,r),e.tileHeight-T.y-1},longitudeDegrees:function(e,t,n,i,o,r,a){return h.A.toDegrees(o)},latitudeDegrees:function(e,t,n,i,o,r,a){return h.A.toDegrees(r)},longitudeProjected:function(e,t,n,i,o,r,a){return P(e,0,0,0,o,r),R.x},latitudeProjected:function(e,t,n,i,o,r,a){return P(e,0,0,0,o,r),R.y},format:function(e,t,n,i,o,r,a){return a}});function y(e){e=e??c.A.EMPTY_OBJECT,this._errorEvent=new u.A,a.A.defined("options.url",e.url);const t=f.A.createIfNeeded(e.url),n=f.A.createIfNeeded(e.pickFeaturesUrl);this._resource=t,this._urlSchemeZeroPadding=e.urlSchemeZeroPadding,this._getFeatureInfoFormats=e.getFeatureInfoFormats,this._pickFeaturesResource=n;let i=e.subdomains;i=Array.isArray(i)?i.slice():(0,l.A)(i)&&i.length>0?i.split(""):["a","b","c"],this._subdomains=i,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new p.A({ellipsoid:e.ellipsoid}),this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._rectangle=g.A.intersection(this._rectangle,this._tilingScheme.rectangle),this._tileDiscardPolicy=e.tileDiscardPolicy;let o=e.credit;"string"==typeof o&&(o=new A.A(o)),this._credit=o,this._hasAlphaChannel=e.hasAlphaChannel??!0;const r=e.customTags,d=(0,s.A)(I,r),h=(0,s.A)(E,r);this._tags=d,this._pickFeaturesTags=h,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this.enablePickFeatures=e.enablePickFeatures??!0}Object.defineProperties(y.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}}),y.prototype.getTileCredits=function(e,t,n){},y.prototype.requestImage=function(e,t,n,i){return m.A.loadImage(this,function(e,t,n,i,o){C=!1,B=!1;const r=e._resource,a=r.getUrlComponent(!0),s=e._tags,A={},c=a.match(_);return(0,l.A)(c)&&c.forEach(function(o){const r=o.substring(1,o.length-1);(0,l.A)(s[r])&&(A[r]=s[r](e,t,n,i))}),r.getDerivedResource({request:o,templateValues:A})}(this,e,t,n,i))},y.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures||!(0,l.A)(this._pickFeaturesResource)||0===this._getFeatureInfoFormats.length)return;let r=0;const a=this;function s(e,t){return e.callback(t)}return function A(){if(r>=a._getFeatureInfoFormats.length)return Promise.resolve([]);const c=a._getFeatureInfoFormats[r],u=function(e,t,n,i,o,r,a){C=!1,B=!1,w=!1,S=!1;const s=e._pickFeaturesResource,A=s.getUrlComponent(!0),c=e._pickFeaturesTags,u={},d=A.match(_);return(0,l.A)(d)&&d.forEach(function(s){const A=s.substring(1,s.length-1);(0,l.A)(c[A])&&(u[A]=c[A](e,t,n,i,o,r,a))}),s.getDerivedResource({templateValues:u})}(a,e,t,n,i,o,c.format);return++r,"json"===c.type?u.fetchJson().then(c.callback).catch(A):"xml"===c.type?u.fetchXML().then(c.callback).catch(A):"text"===c.type||"html"===c.type?u.fetchText().then(c.callback).catch(A):u.fetch({responseType:c.format}).then(s.bind(void 0,c)).catch(A)}()};let C=!1;const b=new g.A;let B=!1;const v=new g.A;let w=!1;const T=new i.A;let S=!1;function x(e,t,n){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){const i=e.urlSchemeZeroPadding[t];if("string"==typeof i){const e=i.length;e>1&&(n=n.length>=e?n:new Array(e-n.toString().length+1).join("0")+n)}}return n}function D(e,t,n,i){C||(e.tilingScheme.tileXYToRectangle(t,n,i,b),b.west=h.A.toDegrees(b.west),b.south=h.A.toDegrees(b.south),b.east=h.A.toDegrees(b.east),b.north=h.A.toDegrees(b.north),C=!0)}function Q(e,t,n,i){B||(e.tilingScheme.tileXYToNativeRectangle(t,n,i,v),B=!0)}const N=new g.A,R=new o.A;function M(e,t,n,i,o,r,a){if(w)return;P(e,0,0,0,o,r);const s=R,A=e.tilingScheme.tileXYToNativeRectangle(t,n,i,N);T.x=e.tileWidth*(s.x-A.west)/A.width|0,T.y=e.tileHeight*(A.north-s.y)/A.height|0,w=!0}const L=new r.A;function P(e,t,n,i,o,r,a){if(!S){if(e.tilingScheme.projection instanceof d.A)R.x=h.A.toDegrees(o),R.y=h.A.toDegrees(r);else{const t=L;t.longitude=o,t.latitude=r,e.tilingScheme.projection.project(t,R)}S=!0}}const O=y},28940:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}},308521:(e,t,n)=>{"use strict";n.d(t,{A:()=>z});var i=n(564886),o=n(434067),r=n(267980),a=n(41476),s=n(571804),A=n(491446),c=n(677354),l=n(610750),u=n(520098),d=n(874915),h=n(832698),g=n(584164),f=n(697422),p=n(971724),m=n(641613),_=n(442790),I=n(377496),E=n(760866),y=n(40118),C=n(302836),b=n(342875),B=n(508380),v=n(78149),w=n(296312),T=n(154920),S=n(200646),x=n(622569),D=n(71578),Q=n(527083),N=n(938987),R=n(896464),M=n(138151),L=n(953681);function P(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=e.ellipsoid??l.A.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new o.A(i.A._defaultMinTerrainHeight,i.A._defaultMaxTerrainHeight),this._boundingVolume=h.A.fromRectangle(e.rectangle,i.A._defaultMinTerrainHeight,i.A._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=a.A.clone(a.A.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(P.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});const O=new p.A("createVectorTileClampedPolylines"),F={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};const U=new g.A,k=new r.A;function G(e){return y.A.fromCache({cull:{enabled:!0,face:Q.A.FRONT},blending:S.A.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:R.A.EQUAL,frontOperation:{fail:M.A.KEEP,zFail:M.A.KEEP,zPass:M.A.KEEP},backFunction:R.A.EQUAL,backOperation:{fail:M.A.KEEP,zFail:M.A.KEEP,zPass:M.A.KEEP},reference:N.A.CESIUM_3D_TILE_MASK,mask:N.A.CESIUM_3D_TILE_MASK}})}P.prototype.getPositions=function(e){return L.A.getPolylinePositions(this,e)},P.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new x.A(e,i)}},P.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const H=new a.A,V=a.A.WHITE;P.prototype.applyStyle=function(e,t){if(!(0,A.A)(e))return void function(e,t){const n=e._batchIds,i=n.length;for(let e=0;e<i;++e){const i=t[n[e]];i.show=!0,i.color=a.A.WHITE}}(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=t[n[o]];i.color=(0,A.A)(e.color)?e.color.evaluateColor(i,H):V,i.show=!(0,A.A)(e.show)||e.show.evaluate(i)}},P.prototype.update=function(e){const t=e.context;if(!this._ready){if((0,A.A)(this._promise)||(this._promise=(n=this,i.A.initialize().then(function(){!function(e,t,n){const o=i.A.getMinimumMaximumHeights(t,n),r=o.minimumTerrainHeight,a=o.maximumTerrainHeight,s=e._minimumMaximumVectorHeights;s.x=r,s.y=a;const A=e._boundingVolume,c=e._rectangle;h.A.fromRectangle(c,r,a,n,A)}(n,n._rectangle,n._ellipsoid)}).catch(e=>{n.isDestroyed()||(n._error=e)})).then(function(e,t){if((0,A.A)(e._va))return;let n=e._positions,i=e._widths,o=e._counts,a=e._transferrableBatchIds,c=e._packedBuffer;(0,A.A)(c)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),a=e._transferrableBatchIds=e._batchIds.slice(),c=e._packedBuffer=function(e){const t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,a=e._center,s=2+f.A.packedLength+l.A.packedLength+r.A.packedLength,A=new Float64Array(s);let c=0;return A[c++]=n,A[c++]=i,f.A.pack(t,A,c),c+=f.A.packedLength,l.A.pack(o,A,c),c+=l.A.packedLength,r.A.pack(a,A,c),A}(e));const u=[n.buffer,i.buffer,o.buffer,a.buffer,c.buffer],h={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:a.buffer,packedBuffer:c.buffer,keepDecodedPositions:e._keepDecodedPositions},g=O.scheduleTask(h,u);return(0,A.A)(g)?g.then(function(n){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(n.decodedPositions),e._decodedPositionOffsets=new Uint32Array(n.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(n.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(n.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(n.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(n.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(n.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(n.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(n.vertexBatchIds);const i=n.indexDatatype;e._indices=i===d.A.UNSIGNED_SHORT?new Uint16Array(n.indices):new Uint32Array(n.indices),function(e,t){if(!(0,A.A)(e._va)){const n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,a=e._startFaceNormalAndVertexCornerIds,A=e._endFaceNormalAndHalfWidths,c=e._vertexBatchIds,l=e._indices;let u=n.byteLength+i.byteLength;u+=o.byteLength+r.byteLength,u+=a.byteLength+A.byteLength,u+=c.byteLength+l.byteLength,e._trianglesLength=l.length/3,e._geometryByteLength=u;const h=m.A.createVertexBuffer({context:t,typedArray:n,usage:_.A.STATIC_DRAW}),g=m.A.createVertexBuffer({context:t,typedArray:i,usage:_.A.STATIC_DRAW}),f=m.A.createVertexBuffer({context:t,typedArray:o,usage:_.A.STATIC_DRAW}),p=m.A.createVertexBuffer({context:t,typedArray:r,usage:_.A.STATIC_DRAW}),I=m.A.createVertexBuffer({context:t,typedArray:a,usage:_.A.STATIC_DRAW}),E=m.A.createVertexBuffer({context:t,typedArray:A,usage:_.A.STATIC_DRAW}),y=m.A.createVertexBuffer({context:t,typedArray:c,usage:_.A.STATIC_DRAW}),C=m.A.createIndexBuffer({context:t,typedArray:l,usage:_.A.STATIC_DRAW,indexDatatype:2===l.BYTES_PER_ELEMENT?d.A.UNSIGNED_SHORT:d.A.UNSIGNED_INT}),b=[{index:F.startEllipsoidNormal,vertexBuffer:h,componentDatatype:s.A.FLOAT,componentsPerAttribute:3},{index:F.endEllipsoidNormal,vertexBuffer:g,componentDatatype:s.A.FLOAT,componentsPerAttribute:3},{index:F.startPositionAndHeight,vertexBuffer:f,componentDatatype:s.A.FLOAT,componentsPerAttribute:4},{index:F.endPositionAndHeight,vertexBuffer:p,componentDatatype:s.A.FLOAT,componentsPerAttribute:4},{index:F.startFaceNormalAndVertexCorner,vertexBuffer:I,componentDatatype:s.A.FLOAT,componentsPerAttribute:4},{index:F.endFaceNormalAndHalfWidth,vertexBuffer:E,componentDatatype:s.A.FLOAT,componentsPerAttribute:4},{index:F.a_batchId,vertexBuffer:y,componentDatatype:s.A.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new B.A({context:t,attributes:b,indexBuffer:C}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}(e,t),e._ready=!0}).catch(t=>{e.isDestroyed()||(e._error=t)}):void 0}(this,t))),(0,A.A)(this._error)){const e=this._error;throw this._error=void 0,e}return}var n,o;!function(e,t){(0,A.A)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return g.A.clone(n,U),g.A.multiplyByPoint(U,e._center,k),g.A.setTranslation(U,k,U),U},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}(this,t),function(e,t){if((0,A.A)(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(w.A),o=n.getFragmentShaderCallback(!1,void 0,!0)(T.A),r=new b.A({defines:["VECTOR_TILE",u.A.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[v.A,i]}),a=new b.A({defines:["VECTOR_TILE"],sources:[o]});e._sp=C.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:F})}(this,t),o=this,(0,A.A)(o._rs)||(o._rs=G(!1),o._rs3DTiles=G(!0));const a=e.passes;(a.render||a.pick)&&function(e,t){let n=e._command;if(!(0,A.A)(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new I.A({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:E.A.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});const i=I.A.shallowClone(n,n.derivedCommands.tileset);i.renderState=e._rs3DTiles,i.pass=E.A.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=i}const i=e._classificationType;i!==D.A.TERRAIN&&i!==D.A.BOTH||t.commandList.push(n),i!==D.A.CESIUM_3D_TILE&&i!==D.A.BOTH||t.commandList.push(n.derivedCommands.tileset)}(this,e)},P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,c.A)(this)};const z=P},868897:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(267980),o=n(491446),r=n(677354),a=n(605971),s=n(610750),A=n(604752),c=n(571804),l=n(367817),u=n(584164),d=n(697422),h=n(123245),g=n(184483),f=n(468741),p=n(601165),m=n(566453),_=n(953681),I=n(308521),E=n(223460);function y(e,t,n,r,a){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,function(e,t,n){n=n??0;const r=new Uint8Array(t),a=new DataView(t);n+=C;const _=a.getUint32(n,!0);if(1!==_)throw new h.A(`Only Vector tile version 1 is supported.  Version ${_} is not.`);n+=C;const I=a.getUint32(n,!0);if(n+=C,0===I)return void(e._ready=!0);const y=a.getUint32(n,!0);if(n+=C,0===y)throw new h.A("Feature table must have a byte length greater than zero");const v=a.getUint32(n,!0);n+=C;const w=a.getUint32(n,!0);n+=C;const T=a.getUint32(n,!0);n+=C;const S=a.getUint32(n,!0);n+=C;const x=a.getUint32(n,!0);n+=C;const D=a.getUint32(n,!0);n+=C;const Q=a.getUint32(n,!0);n+=C;const N=(0,A.A)(r,n,y);n+=y;const R=new Uint8Array(t,n,v);let M,L;n+=v,w>0&&(M=(0,A.A)(r,n,w),n+=w,T>0&&(L=new Uint8Array(t,n,T),L=new Uint8Array(L),n+=T));const P=N.POLYGONS_LENGTH??0,O=N.POLYLINES_LENGTH??0,F=N.POINTS_LENGTH??0,U=P+O+F,k=new g.A(e,U,M,L,function(e){return function(t,n){(0,o.A)(e._polygons)&&e._polygons.updateCommands(t,n)}}(e));if(e._batchTable=k,0===U)return;const G=new f.A(N,R),H=G.getGlobalProperty("REGION");if(!(0,o.A)(H))throw new h.A("Feature table global property: REGION must be defined");const V=d.A.unpack(H),z=H[4],j=H[5],Y=e._tile.computedTransform;let q=G.getGlobalProperty("RTC_CENTER",c.A.FLOAT,3);(0,o.A)(q)?(q=i.A.unpack(q),u.A.multiplyByPoint(Y,q,q)):(q=d.A.center(V),q.height=l.A.lerp(z,j,.5),q=s.A.WGS84.cartographicToCartesian(q));const W=function(e,t){let n,i,r,a;const s=e.POLYGONS_LENGTH??0,A=e.POLYLINES_LENGTH??0,c=e.POINTS_LENGTH??0;if(s>0&&(0,o.A)(e.POLYGON_BATCH_IDS)){const i=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,s)}if(A>0&&(0,o.A)(e.POLYLINE_BATCH_IDS)){const n=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,A)}if(c>0&&(0,o.A)(e.POINT_BATCH_IDS)){const n=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;r=new Uint16Array(t.buffer,n,c)}const l=(0,o.A)(n)||(0,o.A)(i)||(0,o.A)(r),u=s>0&&!(0,o.A)(n)||A>0&&!(0,o.A)(i)||c>0&&!(0,o.A)(r);if(l&&u)throw new h.A("If one group of batch ids is defined, then all batch ids must be defined");if(!(0,o.A)(n)&&!(0,o.A)(i)&&!(0,o.A)(r)){let e=0;if(!(0,o.A)(n)&&s>0)for(n=new Uint16Array(s),a=0;a<s;++a)n[a]=e++;if(!(0,o.A)(i)&&A>0)for(i=new Uint16Array(A),a=0;a<A;++a)i[a]=e++;if(!(0,o.A)(r)&&c>0)for(r=new Uint16Array(c),a=0;a<c;++a)r[a]=e++}return{polygons:n,polylines:i,points:r}}(N,R);if(n+=(4-n%4)%4,P>0){G.featuresLength=P;const i=G.getPropertyArray("POLYGON_COUNTS",c.A.UNSIGNED_INT,1)??G.getPropertyArray("POLYGON_COUNT",c.A.UNSIGNED_INT,1);if(!(0,o.A)(i))throw new h.A("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const r=G.getPropertyArray("POLYGON_INDEX_COUNTS",c.A.UNSIGNED_INT,1)??G.getPropertyArray("POLYGON_INDEX_COUNT",c.A.UNSIGNED_INT,1);if(!(0,o.A)(r))throw new h.A("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const a=i.reduce(function(e,t){return e+2*t},0),s=r.reduce(function(e,t){return e+t},0),A=new Uint32Array(t,n,s);n+=S;const l=new Uint16Array(t,n,a);let u,d;n+=x,(0,o.A)(N.POLYGON_MINIMUM_HEIGHTS)&&(0,o.A)(N.POLYGON_MAXIMUM_HEIGHTS)&&(u=G.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",c.A.FLOAT,1),d=G.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",c.A.FLOAT,1)),e._polygons=new m.A({positions:l,counts:i,indexCounts:r,indices:A,minimumHeight:z,maximumHeight:j,polygonMinimumHeights:u,polygonMaximumHeights:d,center:q,rectangle:V,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:k,batchIds:W.polygons,modelMatrix:Y})}const J=e._tileset;if(O>0){G.featuresLength=O;const i=G.getPropertyArray("POLYLINE_COUNTS",c.A.UNSIGNED_INT,1)??G.getPropertyArray("POLYLINE_COUNT",c.A.UNSIGNED_INT,1);if(!(0,o.A)(i))throw new h.A("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let r=G.getPropertyArray("POLYLINE_WIDTHS",c.A.UNSIGNED_SHORT,1);if(!(0,o.A)(r)){r=new Uint16Array(O);for(let e=0;e<O;++e)r[e]=2}const a=i.reduce(function(e,t){return e+3*t},0),A=new Uint16Array(t,n,a);n+=D;const l=J.examineVectorLinesFunction;(0,o.A)(l)&&function(e,t,n,i,o,r){const a=t.length;let s=0;for(let A=0;A<a;A++){const a=3*t[A],c=e.slice(s,s+a);s+=a,r(c,n[A],o,i)}}((0,E.A)(new Uint16Array(A),V,z,j,s.A.WGS84),i,W.polylines,k,e.url,l);let u=b;(0,o.A)(J.classificationType)&&(u=B),e._polylines=u({positions:A,widths:r,counts:i,batchIds:W.polylines,minimumHeight:z,maximumHeight:j,center:q,rectangle:V,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:k,classificationType:J.classificationType,keepDecodedPositions:J.vectorKeepDecodedPositions})}if(F>0){const i=new Uint16Array(t,n,3*F);n+=Q,e._points=new p.A({positions:i,batchIds:W.points,minimumHeight:z,maximumHeight:j,rectangle:V,batchTable:k,heightReference:J.heightReference,scene:J.scene})}}(this,r,a)}Object.defineProperties(y.prototype,{featuresLength:{get:function(){return(0,o.A)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return(0,o.A)(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return(0,o.A)(this._polygons)&&(e+=this._polygons.trianglesLength),(0,o.A)(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return(0,o.A)(this._polygons)&&(e+=this._polygons.geometryByteLength),(0,o.A)(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return(0,o.A)(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return(0,o.A)(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const C=Uint32Array.BYTES_PER_ELEMENT;function b(e){return new _.A(e)}function B(e){return new I.A(e)}function v(e){const t=e.featuresLength;if(!(0,o.A)(e._features)&&t>0){const n=new Array(t);(0,o.A)(e._polygons)&&e._polygons.createFeatures(e,n),(0,o.A)(e._polylines)&&e._polylines.createFeatures(e,n),(0,o.A)(e._points)&&e._points.createFeatures(e,n),e._features=n}}y.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},y.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,o.A)(e)||e<0||e>=t)throw new a.A(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return(0,o.A)(this._features)||v(this),this._features[e]},y.prototype.applyDebugSettings=function(e,t){(0,o.A)(this._polygons)&&this._polygons.applyDebugSettings(e,t),(0,o.A)(this._polylines)&&this._polylines.applyDebugSettings(e,t),(0,o.A)(this._points)&&this._points.applyDebugSettings(e,t)},y.prototype.applyStyle=function(e){(0,o.A)(this._features)||v(this),(0,o.A)(this._polygons)&&this._polygons.applyStyle(e,this._features),(0,o.A)(this._polylines)&&this._polylines.applyStyle(e,this._features),(0,o.A)(this._points)&&this._points.applyStyle(e,this._features)},y.prototype.update=function(e,t){let n=!0;(0,o.A)(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),(0,o.A)(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),(0,o.A)(this._points)&&(this._points.update(t),n=n&&this._points.ready),(0,o.A)(this._batchTable)&&n&&((0,o.A)(this._features)||v(this),this._batchTable.update(e,t),this._ready=!0)},y.prototype.pick=function(e,t,n){},y.prototype.getPolylinePositions=function(e){const t=this._polylines;if((0,o.A)(t))return t.getPositions(e)},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,r.A)(this)};const w=y},301350:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(660662),o=n(267980),r=n(41476),a=n(491446),s=n(677354),A=n(584164),c=n(971724),l=n(71578),u=n(28940),d=n(471293);function h(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,(0,a.A)(this._center)||((0,a.A)(this._boundingVolume)?this._center=o.A.clone(this._boundingVolume.center):this._center=o.A.clone(o.A.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=l.A.BOTH}Object.defineProperties(h.prototype,{trianglesLength:{get:function(){return(0,a.A)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,a.A)(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}}),h.packedBoxLength=A.A.packedLength+o.A.packedLength,h.packedCylinderLength=A.A.packedLength+2,h.packedEllipsoidLength=A.A.packedLength+o.A.packedLength,h.packedSphereLength=o.A.packedLength+1;const g=new c.A("createVectorTileGeometries",5),f=new r.A;h.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},h.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},h.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},h.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},h.prototype.update=function(e){if(this._ready)this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e);else if((0,a.A)(this._promise)||(this._promise=function(e){if(!(0,a.A)(e._primitive)&&!(0,a.A)(e._verticesPromise)){let t=e._boxes,n=e._boxBatchIds,s=e._cylinders,c=e._cylinderBatchIds,l=e._ellipsoids,h=e._ellipsoidBatchIds,p=e._spheres,m=e._sphereBatchIds,_=e._batchTableColors,I=e._packedBuffer;if(!(0,a.A)(_)){let i=0;(0,a.A)(e._boxes)&&(t=e._boxes=t.slice(),n=e._boxBatchIds=n.slice(),i+=n.length),(0,a.A)(e._cylinders)&&(s=e._cylinders=s.slice(),c=e._cylinderBatchIds=c.slice(),i+=c.length),(0,a.A)(e._ellipsoids)&&(l=e._ellipsoids=l.slice(),h=e._ellipsoidBatchIds=h.slice(),i+=h.length),(0,a.A)(e._spheres)&&(p=e._sphere=p.slice(),m=e._sphereBatchIds=m.slice(),i+=m.length),_=e._batchTableColors=new Uint32Array(i);const r=e._batchTable;for(let e=0;e<i;++e){const t=r.getColor(e,f);_[e]=t.toRgba()}I=e._packedBuffer=function(e){const t=new Float64Array(A.A.packedLength+o.A.packedLength);let n=0;return o.A.pack(e._center,t,n),n+=o.A.packedLength,A.A.pack(e._modelMatrix,t,n),t}(e)}const E=[];(0,a.A)(t)&&E.push(t.buffer,n.buffer),(0,a.A)(s)&&E.push(s.buffer,c.buffer),(0,a.A)(l)&&E.push(l.buffer,h.buffer),(0,a.A)(p)&&E.push(p.buffer,m.buffer),E.push(_.buffer,I.buffer);const y={boxes:(0,a.A)(t)?t.buffer:void 0,boxBatchIds:(0,a.A)(t)?n.buffer:void 0,cylinders:(0,a.A)(s)?s.buffer:void 0,cylinderBatchIds:(0,a.A)(s)?c.buffer:void 0,ellipsoids:(0,a.A)(l)?l.buffer:void 0,ellipsoidBatchIds:(0,a.A)(l)?h.buffer:void 0,spheres:(0,a.A)(p)?p.buffer:void 0,sphereBatchIds:(0,a.A)(p)?m.buffer:void 0,batchTableColors:_.buffer,packedBuffer:I.buffer},C=e._verticesPromise=g.scheduleTask(y,E);if(!(0,a.A)(C))return;return C.then(function(t){if(e.isDestroyed())return;const n=new Float64Array(t.packedBuffer),o=function(e,t){let n=0;const o=t[n++],a=t[n++],s=e._boundingVolumes=new Array(a);for(let e=0;e<a;++e)s[e]=i.A.unpack(t,n),n+=i.A.packedLength;const A=t[n++],c=e._batchedIndices=new Array(A);for(let e=0;e<A;++e){const i=r.A.unpack(t,n);n+=r.A.packedLength;const o=t[n++],a=t[n++],s=t[n++],A=new Array(s);for(let e=0;e<s;++e)A[e]=t[n++];c[e]=new u.A({color:i,offset:o,count:a,batchIds:A})}return o}(e,n);e._indices=2===o?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),function(e){(0,a.A)(e._primitive)||(e._primitive=new d.A({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:e._pickObject??e}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}(e),e._ready=!0}).catch(t=>{e.isDestroyed()||(e._error=t)})}}(this)),(0,a.A)(this._error)){const e=this._error;throw this._error=void 0,e}},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,s.A)(this)};const p=h},601165:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(434067),o=n(267980),r=n(41476),a=n(491446),s=n(677354),A=n(853331),c=n(610750),l=n(290176),u=n(697422),d=n(971724),h=n(770103),g=n(294023),f=n(337632),p=n(465674),m=n(15817),_=n(891674),I=n(742558),E=n(63316);function y(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._heightReference=e.heightReference,this._billboardCollection=new h.A({batchTable:e.batchTable,scene:e.scene}),this._labelCollection=new p.A({batchTable:e.batchTable,scene:e.scene}),this._polylineCollection=new _.A,this._polylineCollection._useHighlightColor=!0,this._packedBuffer=void 0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(y.prototype,{ready:{get:function(){return this._ready}},pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){return this._billboardCollection.sizeInBytes+this._labelCollection.sizeInBytes}}});const C=new d.A("createVectorTilePoints",5),b=new o.A;y.prototype.createFeatures=function(e,t){const n=this._billboardCollection,i=this._labelCollection,o=this._polylineCollection,r=this._batchIds,a=r.length;for(let s=0;s<a;++s){const a=r[s],A=n.get(s),c=i.get(s),l=o.get(s);t[a]=new g.A(e,a,A,c,l)}},y.prototype.applyDebugSettings=function(e,t){e?(r.A.clone(t,this._billboardCollection._highlightColor),r.A.clone(t,this._labelCollection._highlightColor),r.A.clone(t,this._polylineCollection._highlightColor)):(r.A.clone(r.A.WHITE,this._billboardCollection._highlightColor),r.A.clone(r.A.WHITE,this._labelCollection._highlightColor),r.A.clone(r.A.WHITE,this._polylineCollection._highlightColor))};const B=new r.A,v=new r.A,w=new r.A,T=new r.A,S=new r.A,x=new r.A,D=new l.A,Q=new l.A,N=new A.A;y.prototype.applyStyle=function(e,t){if(!(0,a.A)(e))return void function(e,t){const n=e._batchIds,o=n.length;for(let e=0;e<o;++e){const o=t[n[e]];o.show=!0,o.pointSize=g.A.defaultPointSize,o.color=g.A.defaultColor,o.pointOutlineColor=g.A.defaultPointOutlineColor,o.pointOutlineWidth=g.A.defaultPointOutlineWidth,o.labelColor=r.A.WHITE,o.labelOutlineColor=r.A.WHITE,o.labelOutlineWidth=1,o.font="30px sans-serif",o.labelStyle=m.A.FILL,o.labelText=void 0,o.backgroundColor=new r.A(.165,.165,.165,.8),o.backgroundPadding=new i.A(7,5),o.backgroundEnabled=!1,o.scaleByDistance=void 0,o.translucencyByDistance=void 0,o.distanceDisplayCondition=void 0,o.heightOffset=0,o.anchorLineEnabled=!1,o.anchorLineColor=r.A.WHITE,o.image=void 0,o.disableDepthTestDistance=0,o.horizontalOrigin=f.A.CENTER,o.verticalOrigin=I.A.CENTER,o.labelHorizontalOrigin=f.A.RIGHT,o.labelVerticalOrigin=I.A.BASELINE}}(this,t);const n=this._batchIds,o=n.length;for(let i=0;i<o;++i){const o=t[n[i]];if((0,a.A)(e.show)&&(o.show=e.show.evaluate(o)),(0,a.A)(e.pointSize)&&(o.pointSize=e.pointSize.evaluate(o)),(0,a.A)(e.color)&&(o.color=e.color.evaluateColor(o,B)),(0,a.A)(e.pointOutlineColor)&&(o.pointOutlineColor=e.pointOutlineColor.evaluateColor(o,v)),(0,a.A)(e.pointOutlineWidth)&&(o.pointOutlineWidth=e.pointOutlineWidth.evaluate(o)),(0,a.A)(e.labelColor)&&(o.labelColor=e.labelColor.evaluateColor(o,w)),(0,a.A)(e.labelOutlineColor)&&(o.labelOutlineColor=e.labelOutlineColor.evaluateColor(o,T)),(0,a.A)(e.labelOutlineWidth)&&(o.labelOutlineWidth=e.labelOutlineWidth.evaluate(o)),(0,a.A)(e.font)&&(o.font=e.font.evaluate(o)),(0,a.A)(e.labelStyle)&&(o.labelStyle=e.labelStyle.evaluate(o)),(0,a.A)(e.labelText)?o.labelText=e.labelText.evaluate(o):o.labelText=void 0,(0,a.A)(e.backgroundColor)&&(o.backgroundColor=e.backgroundColor.evaluateColor(o,S)),(0,a.A)(e.backgroundPadding)&&(o.backgroundPadding=e.backgroundPadding.evaluate(o)),(0,a.A)(e.backgroundEnabled)&&(o.backgroundEnabled=e.backgroundEnabled.evaluate(o)),(0,a.A)(e.scaleByDistance)){const t=e.scaleByDistance.evaluate(o);(0,a.A)(t)?(D.near=t.x,D.nearValue=t.y,D.far=t.z,D.farValue=t.w,o.scaleByDistance=D):o.scaleByDistance=void 0}else o.scaleByDistance=void 0;if((0,a.A)(e.translucencyByDistance)){const t=e.translucencyByDistance.evaluate(o);(0,a.A)(t)?(Q.near=t.x,Q.nearValue=t.y,Q.far=t.z,Q.farValue=t.w,o.translucencyByDistance=Q):o.translucencyByDistance=void 0}else o.translucencyByDistance=void 0;if((0,a.A)(e.distanceDisplayCondition)){const t=e.distanceDisplayCondition.evaluate(o);(0,a.A)(t)?(N.near=t.x,N.far=t.y,o.distanceDisplayCondition=N):o.distanceDisplayCondition=void 0}else o.distanceDisplayCondition=void 0;(0,a.A)(e.heightOffset)&&(o.heightOffset=e.heightOffset.evaluate(o)),(0,a.A)(e.anchorLineEnabled)&&(o.anchorLineEnabled=e.anchorLineEnabled.evaluate(o)),(0,a.A)(e.anchorLineColor)&&(o.anchorLineColor=e.anchorLineColor.evaluateColor(o,x)),(0,a.A)(e.image)?o.image=e.image.evaluate(o):o.image=void 0,(0,a.A)(e.disableDepthTestDistance)&&(o.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(o)),(0,a.A)(e.horizontalOrigin)&&(o.horizontalOrigin=e.horizontalOrigin.evaluate(o)),(0,a.A)(e.verticalOrigin)&&(o.verticalOrigin=e.verticalOrigin.evaluate(o)),(0,a.A)(e.labelHorizontalOrigin)&&(o.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(o)),(0,a.A)(e.labelVerticalOrigin)&&(o.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(o))}},y.prototype.update=function(e){if(!this._ready&&((0,a.A)(this._promise)||(this._promise=function(e,t){let n=e._positions,i=e._packedBuffer;(0,a.A)(i)||(n=e._positions=n.slice(),e._batchIds=e._batchIds.slice(),i=e._packedBuffer=function(e,t){const n=e._rectangle,i=e._minHeight,o=e._maxHeight,r=2+u.A.packedLength+c.A.packedLength,a=new Float64Array(r);let s=0;return a[s++]=i,a[s++]=o,u.A.pack(n,a,s),s+=u.A.packedLength,c.A.pack(t,a,s),a}(e,t));const r=[n.buffer,i.buffer],s={positions:n.buffer,packedBuffer:i.buffer},A=C.scheduleTask(s,r);if((0,a.A)(A))return A.then(t=>{if(e.isDestroyed())return;e._positions=new Float64Array(t.positions);const i=e._billboardCollection,r=e._labelCollection,a=e._polylineCollection;n=e._positions;const s=e._batchIds,A=n.length/3,c=e._heightReference??E.Ay.NONE;for(let e=0;e<A;++e){const t=s[e],A=o.A.unpack(n,3*e,b),l=i.add();l.position=A,l._batchIndex=t,l.heightReference=c;const u=r.add();u.text=" ",u.position=A,u._batchIndex=t,u.heightReference=c,a.add().positions=[o.A.clone(A),o.A.clone(A)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0}).catch(t=>{e.isDestroyed()||(e._error=t)})}(this,e.mapProjection.ellipsoid)),(0,a.A)(this._error))){const e=this._error;throw this._error=void 0,e}this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e)},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),(0,s.A)(this)};const R=y},566453:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(267980),o=n(41476),r=n(491446),a=n(677354),s=n(610750),A=n(874915),c=n(832698),l=n(697422),u=n(971724),d=n(71578),h=n(28940),g=n(471293);function f(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=e.ellipsoid??s.A.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=e.center??i.A.ZERO,this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._promise=void 0,this._error=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=d.A.BOTH}Object.defineProperties(f.prototype,{trianglesLength:{get:function(){return(0,r.A)(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return(0,r.A)(this._primitive)?this._primitive.geometryByteLength:0}},ready:{get:function(){return this._ready}}});const p=new u.A("createVectorTilePolygons",5),m=new o.A;f.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},f.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},f.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},f.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},f.prototype.update=function(e){if(this._ready)this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e);else if((0,r.A)(this._promise)||(this._promise=function(e){if((0,r.A)(e._primitive))return;let t=e._positions,n=e._counts,a=e._indexCounts,u=e._indices,d=e._transferrableBatchIds,f=e._batchTableColors,_=e._packedBuffer;if(!(0,r.A)(f)){t=e._positions=e._positions.slice(),n=e._counts=e._counts.slice(),a=e._indexCounts=e._indexCounts.slice(),u=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(l.A.center(e._rectangle)),d=e._transferrableBatchIds=new Uint32Array(e._batchIds),f=e._batchTableColors=new Uint32Array(d.length);const o=e._batchTable,r=f.length;for(let e=0;e<r;++e){const t=o.getColor(e,m);f[e]=t.toRgba()}_=e._packedBuffer=function(e){const t=new Float64Array(3+i.A.packedLength+s.A.packedLength+l.A.packedLength);let n=0;return t[n++]=e._indices.BYTES_PER_ELEMENT,t[n++]=e._minimumHeight,t[n++]=e._maximumHeight,i.A.pack(e._center,t,n),n+=i.A.packedLength,s.A.pack(e._ellipsoid,t,n),n+=s.A.packedLength,l.A.pack(e._rectangle,t,n),t}(e)}const I=[t.buffer,n.buffer,a.buffer,u.buffer,d.buffer,f.buffer,_.buffer],E={packedBuffer:_.buffer,positions:t.buffer,counts:n.buffer,indexCounts:a.buffer,indices:u.buffer,batchIds:d.buffer,batchTableColors:f.buffer};let y=e._polygonMinimumHeights,C=e._polygonMaximumHeights;(0,r.A)(y)&&(0,r.A)(C)&&(y=y.slice(),C=C.slice(),I.push(y.buffer,C.buffer),E.minimumHeights=y,E.maximumHeights=C);const b=p.scheduleTask(E,I);return(0,r.A)(b)?b.then(t=>{if(e.isDestroyed())return;e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;const n=new Float64Array(t.packedBuffer),i=n[0];!function(e,t){let n=1;const i=t[n++],r=e._boundingVolumes=new Array(i);for(let e=0;e<i;++e)r[e]=c.A.unpack(t,n),n+=c.A.packedLength;const a=t[n++],s=e._batchedIndices=new Array(a);for(let e=0;e<a;++e){const i=o.A.unpack(t,n);n+=o.A.packedLength;const r=t[n++],a=t[n++],A=t[n++],c=new Array(A);for(let e=0;e<A;++e)c[e]=t[n++];s[e]=new h.A({color:i,offset:r,count:a,batchIds:c})}}(e,n),e._indices=2===A.A.getSizeInBytes(i)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),function(e){(0,r.A)(e._primitive)||(e._primitive=new g.A({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0)}(e),e._ready=!0}).catch(t=>{e.isDestroyed()||(e._error=t)}):void 0}(this)),(0,r.A)(this._error)){const e=this._error;throw this._error=void 0,e}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,a.A)(this)};const _=f},953681:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var i=n(267980),o=n(41476),r=n(571804),a=n(491446),s=n(677354),A=n(610750),c=n(520098),l=n(874915),u=n(584164),d=n(697422),h=n(971724),g=n(641613),f=n(442790),p=n(377496),m=n(760866),_=n(40118),I=n(302836),E=n(342875),y=n(508380),C=n(78149),b=n(747776),B=n(200646),v=n(622569);function w(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=e.ellipsoid??A.A.WGS84,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=o.A.clone(o.A.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(w.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});const T=new h.A("createVectorTilePolylines",5),S={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};const x=new u.A,D=new i.A;w.getPolylinePositions=function(e,t){const n=e._batchIds,i=e._decodedPositions,o=e._decodedPositionOffsets;if(!(0,a.A)(n)||!(0,a.A)(i))return;let r,s;const A=n.length;let c=0,l=0;for(r=0;r<A;++r)n[r]===t&&(c+=o[r+1]-o[r]);if(0===c)return;const u=new Float64Array(3*c);for(r=0;r<A;++r)if(n[r]===t){const e=o[r],t=o[r+1]-e;for(s=0;s<t;++s){const t=3*(e+s);u[l++]=i[t],u[l++]=i[t+1],u[l++]=i[t+2]}}return u},w.prototype.getPositions=function(e){return w.getPolylinePositions(this,e)},w.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new v.A(e,i)}},w.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const Q=new o.A,N=o.A.WHITE;w.prototype.applyStyle=function(e,t){if(!(0,a.A)(e))return void function(e,t){const n=e._batchIds,i=n.length;for(let e=0;e<i;++e){const i=t[n[e]];i.show=!0,i.color=o.A.WHITE}}(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=t[n[o]];i.color=(0,a.A)(e.color)?e.color.evaluateColor(i,Q):N,i.show=!(0,a.A)(e.show)||e.show.evaluate(i)}},w.prototype.update=function(e){const t=e.context;if(!this._ready){if((0,a.A)(this._promise)||(this._promise=function(e,t){if((0,a.A)(e._va))return;let n=e._positions,o=e._widths,s=e._counts,c=e._transferrableBatchIds,u=e._packedBuffer;(0,a.A)(u)||(n=e._positions=n.slice(),o=e._widths=o.slice(),s=e._counts=s.slice(),c=e._transferrableBatchIds=e._batchIds.slice(),u=e._packedBuffer=function(e){const t=e._rectangle,n=e._minimumHeight,o=e._maximumHeight,r=e._ellipsoid,a=e._center,s=2+d.A.packedLength+A.A.packedLength+i.A.packedLength,c=new Float64Array(s);let l=0;return c[l++]=n,c[l++]=o,d.A.pack(t,c,l),l+=d.A.packedLength,A.A.pack(r,c,l),l+=A.A.packedLength,i.A.pack(a,c,l),c}(e));const h=[n.buffer,o.buffer,s.buffer,c.buffer,u.buffer],p={positions:n.buffer,widths:o.buffer,counts:s.buffer,batchIds:c.buffer,packedBuffer:u.buffer,keepDecodedPositions:e._keepDecodedPositions},m=T.scheduleTask(p,h);return(0,a.A)(m)?m.then(function(n){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(n.decodedPositions),e._decodedPositionOffsets=new Uint32Array(n.decodedPositionOffsets)),e._currentPositions=new Float32Array(n.currentPositions),e._previousPositions=new Float32Array(n.previousPositions),e._nextPositions=new Float32Array(n.nextPositions),e._expandAndWidth=new Float32Array(n.expandAndWidth),e._vertexBatchIds=new Uint16Array(n.batchIds);const i=n.indexDatatype;e._indices=i===l.A.UNSIGNED_SHORT?new Uint16Array(n.indices):new Uint32Array(n.indices),function(e,t){if(!(0,a.A)(e._va)){const n=e._currentPositions,i=e._previousPositions,o=e._nextPositions,a=e._expandAndWidth,s=e._vertexBatchIds,A=e._indices;let c=i.byteLength+n.byteLength+o.byteLength;c+=a.byteLength+s.byteLength+A.byteLength,e._trianglesLength=A.length/3,e._geometryByteLength=c;const u=g.A.createVertexBuffer({context:t,typedArray:i,usage:f.A.STATIC_DRAW}),d=g.A.createVertexBuffer({context:t,typedArray:n,usage:f.A.STATIC_DRAW}),h=g.A.createVertexBuffer({context:t,typedArray:o,usage:f.A.STATIC_DRAW}),p=g.A.createVertexBuffer({context:t,typedArray:a,usage:f.A.STATIC_DRAW}),m=g.A.createVertexBuffer({context:t,typedArray:s,usage:f.A.STATIC_DRAW}),_=g.A.createIndexBuffer({context:t,typedArray:A,usage:f.A.STATIC_DRAW,indexDatatype:2===A.BYTES_PER_ELEMENT?l.A.UNSIGNED_SHORT:l.A.UNSIGNED_INT}),I=[{index:S.previousPosition,vertexBuffer:u,componentDatatype:r.A.FLOAT,componentsPerAttribute:3},{index:S.currentPosition,vertexBuffer:d,componentDatatype:r.A.FLOAT,componentsPerAttribute:3},{index:S.nextPosition,vertexBuffer:h,componentDatatype:r.A.FLOAT,componentsPerAttribute:3},{index:S.expandAndWidth,vertexBuffer:p,componentDatatype:r.A.FLOAT,componentsPerAttribute:2},{index:S.a_batchId,vertexBuffer:m,componentDatatype:r.A.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new y.A({context:t,attributes:I,indexBuffer:_}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}(e,t),e._ready=!0}).catch(t=>{e.isDestroyed()||(e._error=t)}):void 0}(this,t)),(0,a.A)(this._error)){const e=this._error;throw this._error=void 0,e}return}var n;!function(e,t){(0,a.A)(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return u.A.clone(n,x),u.A.multiplyByPoint(x,e._center,D),u.A.setTranslation(x,D,x),x},u_highlightColor:function(){return e._highlightColor}})}(this,t),function(e,t){if((0,a.A)(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(b.A),o=n.getFragmentShaderCallback(!1,void 0,!1)("uniform vec4 u_highlightColor; \nvoid main()\n{\n    out_FragColor = u_highlightColor;\n}\n"),r=new E.A({defines:["VECTOR_TILE",c.A.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[C.A,i]}),s=new E.A({defines:["VECTOR_TILE"],sources:[o]});e._sp=I.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:S})}(this,t),n=this,(0,a.A)(n._rs)||(n._rs=_.A.fromCache({blending:B.A.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:{enabled:!0,factor:-5,units:-5}}));const o=e.passes;(o.render||o.pick)&&function(e,t){if(!(0,a.A)(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new p.A({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:m.A.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}(this,e)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),(0,s.A)(this)};const R=w},471293:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var i=n(267980),o=n(41476),r=n(571804),a=n(915325),s=n(491446),A=n(677354),c=n(874915),l=n(584164),u=n(402330),d=n(641613),h=n(442790),g=n(377496),f=n(760866),p=n(40118),m=n(302836),_=n(342875),I=n(508380),E=n(488961),y=n(971532),C=n(200646),b=n(622569),B=n(71578),v=n(523721),w=n(470622),T=n(938987),S=n(896464),x=n(138151),D=n(28940);function Q(e){e=e??a.A.EMPTY_OBJECT,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=e.center??i.A.ZERO,this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=o.A.clone(o.A.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=e.classificationType??B.A.BOTH,this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};const t=this._batchIds.length;for(let e=0;e<t;++e){const t=this._batchIds[e];this._batchIdLookUp[t]=e}}Object.defineProperties(Q.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});const N={position:0,a_batchId:1};function R(e){const t=e?S.A.EQUAL:S.A.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:x.A.KEEP,zFail:x.A.DECREMENT_WRAP,zPass:x.A.KEEP},backFunction:t,backOperation:{fail:x.A.KEEP,zFail:x.A.INCREMENT_WRAP,zPass:x.A.KEEP},reference:T.A.CESIUM_3D_TILE_MASK,mask:T.A.CESIUM_3D_TILE_MASK},stencilMask:T.A.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:v.A.LESS_OR_EQUAL},depthMask:!1}}const M={stencilTest:{enabled:!0,frontFunction:S.A.NOT_EQUAL,frontOperation:{fail:x.A.ZERO,zFail:x.A.ZERO,zPass:x.A.ZERO},backFunction:S.A.NOT_EQUAL,backOperation:{fail:x.A.ZERO,zFail:x.A.ZERO,zPass:x.A.ZERO},reference:0,mask:T.A.CLASSIFICATION_MASK},stencilMask:T.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:C.A.PRE_MULTIPLIED_ALPHA_BLEND},L={stencilTest:{enabled:!0,frontFunction:S.A.NOT_EQUAL,frontOperation:{fail:x.A.ZERO,zFail:x.A.ZERO,zPass:x.A.ZERO},backFunction:S.A.NOT_EQUAL,backOperation:{fail:x.A.ZERO,zFail:x.A.ZERO,zPass:x.A.ZERO},reference:0,mask:T.A.CLASSIFICATION_MASK},stencilMask:T.A.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},P=new l.A,O=new i.A;function F(e,t,n,i,o,r,a){const s=e.constructor.BYTES_PER_ELEMENT,A=r.length;for(let c=0;c<A;++c){const A=a[r[c]],l=i[A],u=o[A],d=new e.constructor(e.buffer,s*l,u);t.set(d,n),i[A]=n,n+=u}return n}function U(e,t,n,i,o,r,a){const s=e.bytesPerIndex,A=r.length;for(let c=0;c<A;++c){const A=a[r[c]],l=i[A],u=o[A];t.copyFromBuffer(e,l*s,n*s,u*s),i[A]=n,n+=u}return n}function k(e,t){return t.color.toRgba()-e.color.toRgba()}Q.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new b.A(e,i)}},Q.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const G=new o.A,H=o.A.WHITE,V=/\$/;function z(e,t,n,i){const o=e.classificationType,r=o!==B.A.CESIUM_3D_TILE,a=o!==B.A.TERRAIN,A=t.commandList;let c,l,u=n.length;for(l=0;l<u;++l)r&&(c=n[l],c.pass=f.A.TERRAIN_CLASSIFICATION,A.push(c)),a&&(c=n[l].derivedCommands.tileset,c.pass=f.A.CESIUM_3D_TILE_CLASSIFICATION,A.push(c));if(t.invertClassification&&(0,s.A)(i))for(u=i.length,l=0;l<u;++l)A.push(i[l])}Q.prototype.applyStyle=function(e,t){if(!(0,s.A)(e))return void function(e,t){e._updatingAllCommands=!0;const n=e._batchIds;let i,r=n.length;for(i=0;i<r;++i){const e=t[n[i]];e.show=!0,e.color=o.A.WHITE}const a=e._batchedIndices;for(r=a.length,i=0;i<r;++i)a[i].color=o.A.clone(o.A.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}(this,t);const n=e.color,i=n instanceof w.A&&!V.test(n.expression);this._updatingAllCommands=i;const r=this._batchIds;let a,A=r.length;for(a=0;a<A;++a){const n=t[r[a]];n.color=(0,s.A)(e.color)?e.color.evaluateColor(n,G):H,n.show=!(0,s.A)(e.show)||e.show.evaluate(n)}if(i){const e=this._batchedIndices;for(A=e.length,a=0;a<A;++a)e[a].color=o.A.clone(o.A.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}},Q.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;const n=this._batchIdLookUp,i=n[e];if(!(0,s.A)(i))return;const r=this._indexOffsets,a=this._indexCounts,A=r[i],c=a[i],l=this._batchedIndices,u=l.length;let d;for(d=0;d<u;++d){const e=l[d].offset,t=l[d].count;if(A>=e&&A<e+t)break}l.push(new D.A({color:o.A.clone(t),offset:A,count:c,batchIds:[e]}));const h=[],g=[],f=l[d].batchIds,p=f.length;for(let t=0;t<p;++t){const i=f[t];i!==e&&(r[n[i]]<A?h.push(i):g.push(i))}0!==g.length&&l.push(new D.A({color:o.A.clone(l[d].color),offset:A+c,count:l[d].offset+l[d].count-(A+c),batchIds:g})),0!==h.length?(l[d].count=A-l[d].offset,l[d].batchIds=h):l.splice(d,1),this._batchDirty=!0},Q.prototype.update=function(e){const t=e.context;var n;!function(e,t){if((0,s.A)(e._va))return;const n=d.A.createVertexBuffer({context:t,typedArray:e._positions,usage:h.A.STATIC_DRAW}),i=d.A.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:h.A.STATIC_DRAW}),o=d.A.createIndexBuffer({context:t,typedArray:e._indices,usage:h.A.DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?c.A.UNSIGNED_SHORT:c.A.UNSIGNED_INT}),a=[{index:0,vertexBuffer:n,componentDatatype:r.A.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:i,componentDatatype:r.A.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new I.A({context:t,attributes:a,indexBuffer:o}),t.webgl2&&(e._vaSwap=new I.A({context:t,attributes:a,indexBuffer:d.A.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:h.A.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0}(this,t),function(e,t){if((0,s.A)(e._sp))return;const n=e._batchTable,i=e._attributeLocations??N;let o=e._pickId;const r=e._vertexShaderSource;let a=e._fragmentShaderSource;if((0,s.A)(r))return e._sp=m.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i}),e._spStencil=e._sp,a=_.A.replaceMain(a,"czm_non_pick_main"),a=`${a}void main() \n{ \n    czm_non_pick_main(); \n    out_FragColor = ${o}; \n} \n`,void(e._spPick=m.A.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:a,attributeLocations:i}));const A=n.getVertexShaderCallback(!1,"a_batchId",void 0)(y.A);let c=n.getFragmentShaderCallback(!1,void 0,!0)(E.A);o=n.getPickId();let l=new _.A({sources:[A]}),u=new _.A({defines:["VECTOR_TILE"],sources:[c]});e._sp=m.A.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:i}),l=new _.A({sources:[y.A]}),u=new _.A({defines:["VECTOR_TILE"],sources:[E.A]}),e._spStencil=m.A.fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:i}),c=_.A.replaceMain(c,"czm_non_pick_main"),c=`${c}\nvoid main() \n{ \n    czm_non_pick_main(); \n    out_FragColor = ${o}; \n} \n`;const d=new _.A({sources:[A]}),h=new _.A({defines:["VECTOR_TILE"],sources:[c]});e._spPick=m.A.fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:i})}(this,t),n=this,(0,s.A)(n._rsStencilDepthPass)||(n._rsStencilDepthPass=p.A.fromCache(R(!1)),n._rsStencilDepthPass3DTiles=p.A.fromCache(R(!0)),n._rsColorPass=p.A.fromCache(M),n._rsPickPass=p.A.fromCache(L)),function(e,t){if((0,s.A)(e._uniformMap))return;const n={u_modifiedModelViewProjection:function(){const n=t.uniformState.view,i=t.uniformState.projection;return l.A.clone(n,P),l.A.multiplyByPoint(P,e._center,O),l.A.setTranslation(P,O,P),l.A.multiply(i,P,P),P},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(n)}(this,t);const i=e.passes;i.render&&(function(e,t){const n=function(e,t){if(!e._batchDirty)return!1;const n=e._batchedIndices,i=n.length;let r=!1;const a={};for(let e=0;e<i;++e){const t=n[e].color.toRgba();if((0,s.A)(a[t])){r=!0;break}a[t]=!0}return r?r&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(n.sort(k),t.webgl2?function(e,t){const n=e._indexOffsets,i=e._indexCounts,r=e._batchIdLookUp;let a=t.pop();const s=[a],A=e._va.indexBuffer,c=e._vaSwap.indexBuffer;let l=U(A,c,0,n,i,a.batchIds,r);for(a.offset=0,a.count=l;t.length>0;){const e=t.pop();if(o.A.equals(e.color,a.color))l=U(A,c,l,n,i,e.batchIds,r),a.batchIds=a.batchIds.concat(e.batchIds),a.count=l-a.offset;else{const t=l;l=U(A,c,l,n,i,e.batchIds,r),e.offset=t,e.count=l-t,s.push(e),a=e}}const u=e._va;e._va=e._vaSwap,e._vaSwap=u,e._batchedIndices=s}(e,n):function(e,t){const n=e._indices,i=e._indexOffsets,r=e._indexCounts,a=e._batchIdLookUp,s=new n.constructor(n.length);let A=t.pop();const c=[A];let l=F(n,s,0,i,r,A.batchIds,a);for(A.offset=0,A.count=l;t.length>0;){const e=t.pop();if(o.A.equals(e.color,A.color))l=F(n,s,l,i,r,e.batchIds,a),A.batchIds=A.batchIds.concat(e.batchIds),A.count=l-A.offset;else{const t=l;l=F(n,s,l,i,r,e.batchIds,a),e.offset=t,e.count=l-t,c.push(e),A=e}}e._va.indexBuffer.copyFromArrayView(s),e._indices=s,e._batchedIndices=c}(e,n),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}(e,t),i=e._commands,r=e._batchedIndices,a=r.length,A=2*a;if((0,s.A)(i)&&!n&&i.length===A)return;i.length=A;const c=e._va,u=e._sp,d=e._modelMatrix??l.A.IDENTITY,h=e._uniformMap,p=e._boundingVolume;for(let t=0;t<a;++t){const n=r[t].offset,o=r[t].count;let a=i[2*t];(0,s.A)(a)||(a=i[2*t]=new g.A({owner:e})),a.vertexArray=c,a.modelMatrix=d,a.offset=n,a.count=o,a.renderState=e._rsStencilDepthPass,a.shaderProgram=u,a.uniformMap=h,a.boundingVolume=p,a.cull=!1,a.pass=f.A.TERRAIN_CLASSIFICATION;const A=g.A.shallowClone(a,a.derivedCommands.tileset);A.renderState=e._rsStencilDepthPass3DTiles,A.pass=f.A.CESIUM_3D_TILE_CLASSIFICATION,a.derivedCommands.tileset=A;let l=i[2*t+1];(0,s.A)(l)||(l=i[2*t+1]=new g.A({owner:e})),l.vertexArray=c,l.modelMatrix=d,l.offset=n,l.count=o,l.renderState=e._rsColorPass,l.shaderProgram=u,l.uniformMap=h,l.boundingVolume=p,l.cull=!1,l.pass=f.A.TERRAIN_CLASSIFICATION;const m=g.A.shallowClone(l,l.derivedCommands.tileset);m.pass=f.A.CESIUM_3D_TILE_CLASSIFICATION,l.derivedCommands.tileset=m}e._commandsDirty=!0}(this,t),function(e,t){if(e.classificationType===B.A.TERRAIN||!t.invertClassification||(0,s.A)(e._commandsIgnoreShow)&&!e._commandsDirty)return;const n=e._commands,i=e._commandsIgnoreShow,o=e._spStencil,r=n.length,a=i.length=r/2;let A=0;for(let e=0;e<a;++e){const t=i[e]=g.A.shallowClone(n[A],i[e]);t.shaderProgram=o,t.pass=f.A.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,A+=2}e._commandsDirty=!1}(this,e),function(e){let t,n,i=e.debugWireframe===e._debugWireframe;if(i=i&&!(e.debugWireframe&&e._wireframeDirty),i)return;(0,s.A)(e._rsWireframe)||(e._rsWireframe=p.A.fromCache({})),e.debugWireframe?(t=e._rsWireframe,n=u.A.LINES):(t=e._rsColorPass,n=u.A.TRIANGLES);const o=e._commands,r=o.length;for(let e=0;e<r;e+=2){const i=o[e+1];i.renderState=t,i.primitiveType=n}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}(this),this._debugWireframe?function(e,t){const n=e.commandList,i=t.length;for(let e=0;e<i;e+=2){const i=t[e+1];i.pass=f.A.OPAQUE,n.push(i)}}(e,this._commands):z(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(function(e){if(!e._pickCommandsDirty)return;const t=e._indexOffsets.length,n=e._pickCommands;n.length=2*t;const i=e._va,o=e._spStencil,r=e._spPick,a=e._modelMatrix??l.A.IDENTITY,A=e._uniformMap;for(let c=0;c<t;++c){const t=e._indexOffsets[c],l=e._indexCounts[c],u=(0,s.A)(e._boundingVolumes)?e._boundingVolumes[c]:e.boundingVolume;let d=n[2*c];(0,s.A)(d)||(d=n[2*c]=new g.A({owner:e,pickOnly:!0})),d.vertexArray=i,d.modelMatrix=a,d.offset=t,d.count=l,d.renderState=e._rsStencilDepthPass,d.shaderProgram=o,d.uniformMap=A,d.boundingVolume=u,d.pass=f.A.TERRAIN_CLASSIFICATION;const h=g.A.shallowClone(d,d.derivedCommands.tileset);h.renderState=e._rsStencilDepthPass3DTiles,h.pass=f.A.CESIUM_3D_TILE_CLASSIFICATION,d.derivedCommands.tileset=h;let p=n[2*c+1];(0,s.A)(p)||(p=n[2*c+1]=new g.A({owner:e,pickOnly:!0})),p.vertexArray=i,p.modelMatrix=a,p.offset=t,p.count=l,p.renderState=e._rsPickPass,p.shaderProgram=r,p.uniformMap=A,p.boundingVolume=u,p.pass=f.A.TERRAIN_CLASSIFICATION;const m=g.A.shallowClone(p,p.derivedCommands.tileset);m.pass=f.A.CESIUM_3D_TILE_CLASSIFICATION,p.derivedCommands.tileset=m}e._pickCommandsDirty=!1}(this),z(this,e,this._pickCommands))},Q.prototype.isDestroyed=function(){return!1},Q.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),(0,A.A)(this)};const j=Q},595826:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(369031),o=n(491446),r=n(605971);const a={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID",SCALE:"KHR_gaussian_splatting:SCALE",ROTATION:"KHR_gaussian_splatting:ROTATION",hasSetIndex:function(e){switch(i.A.typeOf.string("semantic",e),e){case a.POSITION:case a.NORMAL:case a.TANGENT:return!1;case a.TEXCOORD:case a.COLOR:case a.JOINTS:case a.WEIGHTS:case a.FEATURE_ID:case a.SCALE:case a.ROTATION:return!0;default:throw new r.A("semantic is not a valid value.")}},fromGltfSemantic:function(e){i.A.typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/.exec(e);switch(null!==n&&(t=n[1]),t){case"POSITION":return a.POSITION;case"NORMAL":return a.NORMAL;case"TANGENT":return a.TANGENT;case"TEXCOORD":return a.TEXCOORD;case"COLOR":return a.COLOR;case"JOINTS":return a.JOINTS;case"WEIGHTS":return a.WEIGHTS;case"_FEATURE_ID":return a.FEATURE_ID;case"KHR_gaussian_splatting:SCALE":case"_SCALE":return a.SCALE;case"KHR_gaussian_splatting:ROTATION":case"_ROTATION":return a.ROTATION}},fromPntsSemantic:function(e){switch(i.A.typeOf.string("pntsSemantic",e),e){case"POSITION":case"POSITION_QUANTIZED":return a.POSITION;case"RGBA":case"RGB":case"RGB565":return a.COLOR;case"NORMAL":case"NORMAL_OCT16P":return a.NORMAL;case"BATCH_ID":return a.FEATURE_ID;default:throw new r.A("pntsSemantic is not a valid value.")}},getGlslType:function(e){switch(i.A.typeOf.string("semantic",e),e){case a.POSITION:case a.NORMAL:case a.TANGENT:return"vec3";case a.TEXCOORD:return"vec2";case a.COLOR:return"vec4";case a.JOINTS:return"ivec4";case a.WEIGHTS:return"vec4";case a.FEATURE_ID:return"int";case a.SCALE:return"vec3";case a.ROTATION:return"vec4";case a.OPACITY:return"float";default:throw new r.A("semantic is not a valid value.")}},getVariableName:function(e,t){i.A.typeOf.string("semantic",e);let n=function(e){switch(e){case a.POSITION:return"positionMC";case a.NORMAL:return"normalMC";case a.TANGENT:return"tangentMC";case a.TEXCOORD:return"texCoord";case a.COLOR:return"color";case a.JOINTS:return"joints";case a.WEIGHTS:return"weights";case a.FEATURE_ID:return"featureId";case a.SCALE:return"scale";case a.ROTATION:return"rotation";default:throw new r.A("semantic is not a valid value.")}}(e);return(0,o.A)(t)&&(n+=`_${t}`),n}},s=Object.freeze(a)},342767:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var i=n(647934),o=n(267980),r=n(400793),a=n(491446),s=n(230259),A=n(33914),c=n(367817),l=n(584164),u=n(769493),d=n(760866),h=n(326429),g=n(635577),f=n(311664),p=n(545880),m=n(5105),_=n(433184),I=n(425415),E=n(981152),y=n(413285),C=n(62467),b=n(681750),B=n(440463);function v(){this.command=void 0,this.near=void 0,this.far=void 0}function w(e,t,n){const o=e.context;let r,a;o.depthTexture&&(r=new p.A),e._useOIT&&o.depthTexture&&(a=new _.A(o));const s=new h.A(o);s.viewport=i.A.clone(n),this.camera=t,this._cameraClone=g.A.clone(t),this._cameraStartFired=!1,this._cameraMovedTime=void 0,this.viewport=n,this.passState=s,this.pickFramebuffer=new E.A(o),this.pickDepthFramebuffer=new I.A,this.sceneFramebuffer=new y.A,this.globeDepth=r,this.globeTranslucencyFramebuffer=new m.A,this.oit=a,this.translucentTileClassification=new B.A(o),this.pickDepths=[],this.frustumCommandsList=[],this.debugFrustumStatistics=void 0,this._commandExtents=[]}const T=new o.A,S=new o.A;function x(e,t,n){const{command:i,near:o,far:r}=n;t.debugShowFrustums&&(i.debugOverlappingFrustums=0);const{frustumCommandsList:s}=e;for(let e=0;e<s.length;++e){const n=s[e];if(o>n.far)continue;if(r<n.near)break;const a=i.pass,A=n.indices[a]++;if(n.commands[a][A]=i,t.debugShowFrustums&&(i.debugOverlappingFrustums|=1<<e),i.executeInClosestFrustum)break}if(t.debugShowFrustums){const{debugFrustumStatistics:t}=e,{debugOverlappingFrustums:n}=i,o=t.commandsInFrustums;o[n]=(0,a.A)(o[n])?o[n]+1:1,++t.totalCommands}t.updateDerivedCommands(i)}w.prototype.checkForCameraUpdates=function(e){const t=this.camera,n=this._cameraClone;return function(e,t,n){const i=Math.max(o.A.maximumComponent(o.A.abs(e.position,T)),o.A.maximumComponent(o.A.abs(t.position,S))),r=1/Math.max(1,i);return o.A.multiplyByScalar(e.position,r,T),o.A.multiplyByScalar(t.position,r,S),o.A.equalsEpsilon(T,S,n)&&o.A.equalsEpsilon(e.direction,t.direction,n)&&o.A.equalsEpsilon(e.up,t.up,n)&&o.A.equalsEpsilon(e.right,t.right,n)&&l.A.equalsEpsilon(e.transform,t.transform,n)&&e.frustum.equalsEpsilon(t.frustum,n)}(t,n,c.A.EPSILON15)?(this._cameraStartFired&&(0,s.A)()-this._cameraMovedTime>e.cameraEventWaitTime&&(t.moveEnd.raiseEvent(),this._cameraStartFired=!1),!1):(this._cameraStartFired||(t.moveStart.raiseEvent(),this._cameraStartFired=!0),this._cameraMovedTime=(0,s.A)(),g.A.clone(t,n),!0)};const D=new r.A,Q=new A.A;w.prototype.createPotentiallyVisibleSet=function(e){const{frameState:t}=e,{camera:n,commandList:i,shadowState:o}=t,{positionWC:r,directionWC:s,frustum:A}=n,l=e._computeCommandList,h=e._overlayCommandList;e.debugShowFrustums&&(this.debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});const g=this.frustumCommandsList;for(let e=0;e<g.length;++e)for(let t=0;t<d.A.NUMBER_OF_PASSES;++t)g[e].indices[t]=0;l.length=0,h.length=0;const p=this._commandExtents,m=p.length;let _=0,I=+Number.MAX_VALUE,E=-Number.MAX_VALUE;const{shadowsEnabled:y}=o;let B=+Number.MAX_VALUE,w=-Number.MAX_VALUE,T=Number.MAX_VALUE;const S=t.mode===C.A.SCENE3D?t.occluder:void 0;let{cullingVolume:N}=t;const R=D.planes;for(let e=0;e<5;++e)R[e]=N.planes[e];N=D;for(let t=0;t<i.length;++t){const n=i[t],{pass:o,boundingVolume:c}=n;if(o===d.A.COMPUTE)l.push(n);else if(o===d.A.OVERLAY)h.push(n);else{let t,i;if((0,a.A)(c)){if(!e.isVisible(N,n,S))continue;const a=c.computePlaneDistances(r,s,Q);if(t=a.start,i=a.stop,I=Math.min(I,t),E=Math.max(E,i),y&&n.receiveShadows&&t<b.A.MAXIMUM_DISTANCE&&!(o===d.A.GLOBE&&t<-100&&i>100)){const e=i-t;o!==d.A.GLOBE&&t<100&&(T=Math.min(T,e)),B=Math.min(B,t),w=Math.max(w,i)}}else n instanceof u.A?(t=A.near,i=A.far):(t=A.near,i=A.far,I=Math.min(I,t),E=Math.max(E,i));let l=p[_];(0,a.A)(l)||(l=p[_]=new v),l.command=n,l.near=t,l.far=i,_++}}y&&(B=Math.min(Math.max(B,A.near),A.far),w=Math.max(Math.min(w,A.far),B),o.nearPlane=B,o.farPlane=w,o.closestObjectSize=T),function(e,t,n,i){const{frameState:o}=t,{camera:r,useLogDepth:s}=o,A=s?t.logarithmicDepthFarToNearRatio:t.farToNearRatio,l=t.mode===C.A.SCENE2D,u=t.nearToFarDistance2D;let d;i*=1+c.A.EPSILON2,n=Math.min(Math.max(n,r.frustum.near),r.frustum.far),i=Math.max(Math.min(i,r.frustum.far),n),l?(i=Math.min(i,r.position.z+t.nearToFarDistance2D),n=Math.min(n,i),d=Math.ceil(Math.max(1,i-n)/t.nearToFarDistance2D)):d=Math.ceil(Math.log(i/n)/Math.log(A));const{frustumCommandsList:h}=e;h.length=d;for(let e=0;e<d;++e){let t,o;l?(t=Math.min(i-u,n+e*u),o=Math.min(i,t+u)):(t=Math.max(n,Math.pow(A,e)*n),o=Math.min(i,A*t));let r=h[e];(0,a.A)(r)?(r.near=t,r.far=o):r=h[e]=new f.A(t,o)}}(this,e,I,E);for(let t=0;t<_;t++)x(this,e,p[t]);if(_<m)for(let e=_;e<m;e++){const t=p[e];if(!(0,a.A)(t.command))break;t.command=void 0}const M=g.length,{frustumSplits:L}=t;L.length=M+1;for(let e=0;e<M;++e)L[e]=g[e].near,e===M-1&&(L[e+1]=g[e].far)},w.prototype.destroy=function(){this.pickFramebuffer=this.pickFramebuffer&&this.pickFramebuffer.destroy(),this.pickDepthFramebuffer=this.pickDepthFramebuffer&&this.pickDepthFramebuffer.destroy(),this.sceneFramebuffer=this.sceneFramebuffer&&this.sceneFramebuffer.destroy(),this.globeDepth=this.globeDepth&&this.globeDepth.destroy(),this.oit=this.oit&&this.oit.destroy(),this.translucentTileClassification=this.translucentTileClassification&&this.translucentTileClassification.destroy(),this.globeTranslucencyFramebuffer=this.globeTranslucencyFramebuffer&&this.globeTranslucencyFramebuffer.destroy();const e=this.pickDepths;for(let t=0;t<e.length;++t)e[t].destroy()};const N=w},204758:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(660662),o=n(267980),r=n(367817),a=n(369031),s=n(331185),A=n(584164),c=n(832698);function l(){this.orientedBoundingBox=new c.A,this.boundingSphere=new i.A,this.boundTransform=new A.A,this.shapeTransform=new A.A,this._minBounds=l.DefaultMinBounds.clone(),this._maxBounds=l.DefaultMaxBounds.clone(),this.shaderUniforms={renderMinBounds:new o.A,renderMaxBounds:new o.A,boxUvToShapeUvScale:new o.A,boxUvToShapeUvTranslate:new o.A},this.shaderDefines={BOX_INTERSECTION_INDEX:void 0,BOX_HAS_SHAPE_BOUNDS:void 0},this.shaderMaximumIntersectionsLength=0}const u=new o.A,d=new o.A,h=new s.A,g=new o.A,f=new o.A,p=new o.A,m=new o.A,_=A.A.fromRotationTranslation(s.A.fromUniformScale(.5,new s.A),new o.A(.5,.5,.5),new A.A);l.prototype.update=function(e,t,n,r,s){a.A.typeOf.object("modelMatrix",e),a.A.typeOf.object("minBounds",t),a.A.typeOf.object("maxBounds",n),r=r??t.clone(g),s=s??n.clone(f),t=o.A.clone(t,this._minBounds),n=o.A.clone(n,this._maxBounds);const c=o.A.clamp(t,r,s,p),l=o.A.clamp(n,r,s,m),u=A.A.getScale(e,d);if(c.x>l.x||c.y>l.y||c.z>l.z||(c.x===l.x)+(c.y===l.y)+(c.z===l.z)>=2||0===u.x||0===u.y||0===u.z)return!1;this.shapeTransform=A.A.clone(e,this.shapeTransform),this.orientedBoundingBox=C(c,l,this.shapeTransform,this.orientedBoundingBox),this.boundTransform=A.A.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.A.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const{shaderUniforms:h,shaderDefines:I}=this;for(const e in I)I.hasOwnProperty(e)&&(I[e]=void 0);let E=0;I.BOX_INTERSECTION_INDEX=E,E+=1,h.renderMinBounds=A.A.multiplyByPoint(_,c,h.renderMinBounds),h.renderMaxBounds=A.A.multiplyByPoint(_,l,h.renderMaxBounds),I.BOX_HAS_SHAPE_BOUNDS=!0;const y=t,b=n;return h.boxUvToShapeUvScale=o.A.fromElements(2/(y.x===b.x?1:b.x-y.x),2/(y.y===b.y?1:b.y-y.y),2/(y.z===b.z?1:b.z-y.z),h.boxUvToShapeUvScale),h.boxUvToShapeUvTranslate=o.A.fromElements(-h.boxUvToShapeUvScale.x*(.5*y.x+.5),-h.boxUvToShapeUvScale.y*(.5*y.y+.5),-h.boxUvToShapeUvScale.z*(.5*y.z+.5),h.boxUvToShapeUvTranslate),this.shaderMaximumIntersectionsLength=E,!0};const I=new o.A,E=new o.A;l.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,s){a.A.typeOf.number("tileLevel",e),a.A.typeOf.number("tileX",t),a.A.typeOf.number("tileY",n),a.A.typeOf.number("tileZ",i),a.A.typeOf.object("result",s);const A=this._minBounds,c=this._maxBounds,l=1/Math.pow(2,e);return C(o.A.fromElements(r.A.lerp(A.x,c.x,l*t),r.A.lerp(A.y,c.y,l*n),r.A.lerp(A.z,c.z,l*i),I),o.A.fromElements(r.A.lerp(A.x,c.x,l*(t+1)),r.A.lerp(A.y,c.y,l*(n+1)),r.A.lerp(A.z,c.z,l*(i+1)),E),this.shapeTransform,s)};const y=new o.A;function C(e,t,n,i){const r=l.DefaultMinBounds,a=l.DefaultMaxBounds;if(o.A.equals(e,r)&&o.A.equals(t,a))i.center=A.A.getTranslation(n,i.center),i.halfAxes=A.A.getMatrix3(n,i.halfAxes);else{let r=A.A.getScale(n,d);const a=o.A.midpoint(e,t,u);i.center=A.A.multiplyByPoint(n,a,i.center),r=o.A.fromElements(.5*r.x*(t.x-e.x),.5*r.y*(t.y-e.y),.5*r.z*(t.z-e.z),d);const c=A.A.getRotation(n,h);i.halfAxes=s.A.setScale(c,r,i.halfAxes)}return i}l.prototype.computeOrientedBoundingBoxForSample=function(e,t,n,i){a.A.typeOf.object("spatialNode",e),a.A.typeOf.object("tileDimensions",t),a.A.typeOf.object("tileUv",n),a.A.typeOf.object("result",i);const s=1/Math.pow(2,e.level),A=o.A.divideComponents(o.A.ONE,t,y),c=o.A.multiplyByScalar(A,s,y),l=o.A.multiplyByScalar(o.A.fromElements(e.x+n.x,e.y+n.y,e.z+n.z,I),s,I),u=o.A.add(l,c,E),d=this._minBounds,h=this._maxBounds;return C(o.A.fromElements(r.A.lerp(d.x,h.x,l.x),r.A.lerp(d.y,h.y,l.y),r.A.lerp(d.z,h.z,l.z),I),o.A.fromElements(r.A.lerp(d.x,h.x,u.x),r.A.lerp(d.y,h.y,u.y),r.A.lerp(d.z,h.z,u.z),E),this.shapeTransform,i)},l.DefaultMinBounds=Object.freeze(new o.A(-1,-1,-1)),l.DefaultMaxBounds=Object.freeze(new o.A(1,1,1));const b=l},879152:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(267980),o=n(369031),r=n(491446),a=n(374607),s=n(832698);function A(e,t,n){this._primitive=e,this._tileIndex=t,this._sampleIndex=n,this._metadata={},this._orientedBoundingBox=new s.A}A.fromKeyframeNode=function(e,t,n,s){o.A.typeOf.object("primitive",e),o.A.typeOf.number("tileIndex",t),o.A.typeOf.number("sampleIndex",n),o.A.typeOf.object("keyframeNode",s);const u=new A(e,t,n),{spatialNode:d,content:h}=s;return u._metadata=function(e,t,n){if(!(0,r.A)(t)||!(0,r.A)(t.metadata))return;const{names:i,types:o}=e.provider,{metadata:s}=t,A={};for(let e=0;e<i.length;e++){const t=i[e],r=a.A.getComponentCount(o[e]),c=s[e].slice(n*r,(n+1)*r);A[t]=c}return A}(e,h,n),u._orientedBoundingBox=function(e,t,n,o){const r=t.dimensions,a=r.x*r.y,s=Math.floor(n/a),A=n-s*a,u=Math.floor(A/r.x),d=A-u*r.x,h=i.A.fromElements(d,u,s,c),g=i.A.divideComponents(i.A.subtract(h,e._paddingBefore,c),e.dimensions,l);return e._shape.computeOrientedBoundingBoxForSample(t,e.dimensions,g,o)}(e,d,n,u._orientedBoundingBox),u};const c=new i.A,l=new i.A;Object.defineProperties(A.prototype,{metadata:{get:function(){return this._metadata}},primitive:{get:function(){return this._primitive}},sampleIndex:{get:function(){return this._sampleIndex}},tileIndex:{get:function(){return this._tileIndex}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox.clone()}}}),A.prototype.hasProperty=function(e){return(0,r.A)(this._metadata[e])},A.prototype.getNames=function(){return Object.keys(this._metadata)},A.prototype.getProperty=function(e){return this._metadata[e]};const u=A},491807:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(677354),o=n(369031),r=n(571804),a=n(605971),s=n(491446),A=n(982504),c=n(568748),l=n(374607);function u(e){if(o.A.typeOf.object("options",e),!(0,s.A)(e.loader)){if(!(0,s.A)(e.metadata))throw new a.A("One of loader and metadata must be defined.");if(!Array.isArray(e.metadata))throw new a.A("metadata must be an array of TypedArrays.")}const{loader:t,metadata:n}=e;this._loader=t,this._metadata=n,this._resourcesLoaded=!1,this._ready=!1}Object.defineProperties(u.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}}}),u.fromMetadataArray=function(e){if(o.A.typeOf.object("metadata",e),!Array.isArray(e))throw new a.A("metadata must be an array of TypedArrays.");return new u({metadata:e})},u.fromGltf=async function(e){o.A.typeOf.object("resource",e);const t=new A.A({gltfResource:e,releaseGltfJson:!1,loadAttributesAsTypedArray:!0});try{await t.load()}catch(e){throw t.destroy(),e}return new u({loader:t})},u.prototype.update=function(e,t){const n=this._loader;if(!this._ready)if(t.afterRender.push(()=>!0),(0,s.A)(n)){if(this._resourcesLoaded){const{structuralMetadata:t,scene:i}=n.components,{attributes:o}=i.nodes[0].primitives[0];return this._metadata=function(e,t,n){const{className:i,names:o,types:a,componentTypes:A}=n.provider,u=t.propertyAttributes.find(e=>e.class.id===i),{properties:d}=u,h=new Array(o.length);for(let t=0;t<e.length;t++){const n=d[o[t]].attribute,i=e.find(e=>e.name===n);if(!(0,s.A)(i))continue;const u=c.A.toComponentDatatype(A[t]),g=l.A.getComponentCount(a[t]),f=i.count*g;h[t]=r.A.createArrayBufferView(u,i.typedArray.buffer,i.typedArray.byteOffset+i.byteOffset,f)}return h}(o,t,e),void(this._ready=!0)}this._resourcesLoaded=n.process(t)}else this._ready=!0},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._loader=this._loader&&this._loader.destroy(),(0,i.A)(this)};const d=u},823345:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(660662),o=n(434067),r=n(267980),a=n(626809),s=n(367817),A=n(369031),c=n(331185),l=n(584164),u=n(832698);function d(){this.orientedBoundingBox=new u.A,this.boundingSphere=new i.A,this.boundTransform=new l.A,this.shapeTransform=new l.A,this._minBounds=d.DefaultMinBounds.clone(),this._maxBounds=d.DefaultMaxBounds.clone(),this.shaderUniforms={cylinderRenderRadiusMinMax:new o.A,cylinderRenderAngleMinMax:new o.A,cylinderRenderHeightMinMax:new o.A,cylinderUvToShapeUvRadius:new o.A,cylinderUvToShapeUvAngle:new o.A,cylinderUvToShapeUvHeight:new o.A,cylinderShapeUvAngleMinMax:new o.A,cylinderShapeUvAngleRangeZeroMid:0},this.shaderDefines={CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN:void 0,CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF:void 0,CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF:void 0,CYLINDER_HAS_SHAPE_BOUNDS_RADIUS:void 0,CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY:void 0,CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED:void 0,CYLINDER_INTERSECTION_INDEX_RADIUS_MAX:void 0,CYLINDER_INTERSECTION_INDEX_RADIUS_MIN:void 0,CYLINDER_INTERSECTION_INDEX_ANGLE:void 0},this.shaderMaximumIntersectionsLength=0}const h=new r.A,g=new r.A,f=new r.A,p=new r.A,m=new r.A;d.prototype.update=function(e,t,n,a,c){A.A.typeOf.object("modelMatrix",e),A.A.typeOf.object("minBounds",t),A.A.typeOf.object("maxBounds",n),a=a??t.clone(g),c=c??n.clone(f),t=r.A.clone(t,this._minBounds),n=r.A.clone(n,this._maxBounds);const{DefaultMinBounds:u,DefaultMaxBounds:_}=d,I=_.y-u.y,E=.5*I,y=s.A.EPSILON10,C=s.A.EPSILON3,b=s.A.EPSILON10;t.x=Math.max(0,t.x),n.x=Math.max(0,n.x),t.y=s.A.negativePiToPi(t.y),n.y=s.A.negativePiToPi(n.y),a.y=s.A.negativePiToPi(a.y),c.y=s.A.negativePiToPi(c.y);const B=r.A.maximumByComponent(t,a,p),v=r.A.minimumByComponent(n,c,m),w=l.A.getScale(e,h);if(0===v.x||B.x>v.x||B.z>v.z||s.A.equalsEpsilon(w.x,0,void 0,y)||s.A.equalsEpsilon(w.y,0,void 0,y)||s.A.equalsEpsilon(w.z,0,void 0,y))return!1;this.shapeTransform=l.A.clone(e,this.shapeTransform),this.orientedBoundingBox=R(B,v,this.shapeTransform,this.orientedBoundingBox),this.boundTransform=l.A.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.A.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const T=t.x===u.x&&n.x===_.x,S=n.y<t.y,x=n.y-t.y+S*I,D=x>E+b&&x<I-b||x<E-b||x>=E-b&&x<=E+b,Q=s.A.equalsEpsilon(t.y,u.y,void 0,C),N=s.A.equalsEpsilon(n.y,_.y,void 0,C),M=t.z===u.z&&n.z===_.z,L=B.x===u.x,P=v.y<B.y,O=v.y-B.y+P*I,F=O>=E-b&&O<I-b,U=O>b&&O<E-b,k=O<=b,G=F||U||k,{shaderUniforms:H,shaderDefines:V}=this;for(const e in V)V.hasOwnProperty(e)&&(V[e]=void 0);let z=0;if(V.CYLINDER_INTERSECTION_INDEX_RADIUS_MAX=z,z+=1,L||(V.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN=!0,V.CYLINDER_INTERSECTION_INDEX_RADIUS_MIN=z,z+=1),H.cylinderRenderRadiusMinMax=o.A.fromElements(B.x,v.x,H.cylinderRenderRadiusMinMax),B.x===v.x&&(V.CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT=!0),!T){V.CYLINDER_HAS_SHAPE_BOUNDS_RADIUS=!0;const e=n.x-t.x;let i=0,r=1;0!==e&&(i=1/e,r=-t.x/e),H.cylinderUvToShapeUvRadius=o.A.fromElements(i,r,H.cylinderUvToShapeUvRadius)}if(!M){V.CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT=!0;const e=n.z-t.z;let i=0,r=1;0!==e&&(i=2/e,r=-(t.z+1)/e),H.cylinderUvToShapeUvHeight=o.A.fromElements(i,r,H.cylinderUvToShapeUvHeight)}if(H.cylinderRenderHeightMinMax=o.A.fromElements(B.z,v.z,H.cylinderRenderHeightMinMax),S&&(V.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED=!0),G&&(V.CYLINDER_HAS_RENDER_BOUNDS_ANGLE=!0,V.CYLINDER_INTERSECTION_INDEX_ANGLE=z,F?(V.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF=!0,z+=1):U?(V.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF=!0,z+=2):k&&(V.CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO=!0,z+=2),H.cylinderRenderAngleMinMax=o.A.fromElements(B.y,v.y,H.cylinderRenderAngleMinMax)),D){V.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE=!0,Q&&(V.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY=!0),N&&(V.CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY=!0);const e=(t.y-u.y)/I,i=(n.y-u.y)/I,r=1-x/I;if(H.cylinderShapeUvAngleMinMax=o.A.fromElements(e,i,H.cylinderShapeUvAngleMinMax),H.cylinderShapeUvAngleRangeZeroMid=(i+.5*r)%1,x<=b)H.cylinderUvToShapeUvAngle=o.A.fromElements(0,1,H.cylinderUvToShapeUvAngle);else{const e=I/x,n=-(t.y-u.y)/x;H.cylinderUvToShapeUvAngle=o.A.fromElements(e,n,H.cylinderUvToShapeUvAngle)}}return this.shaderMaximumIntersectionsLength=z,!0};const _=new r.A,I=new r.A;d.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,o){A.A.typeOf.number("tileLevel",e),A.A.typeOf.number("tileX",t),A.A.typeOf.number("tileY",n),A.A.typeOf.number("tileZ",i),A.A.typeOf.object("result",o);const a=this._minBounds,c=this._maxBounds,l=1/Math.pow(2,e);return R(r.A.fromElements(s.A.lerp(a.x,c.x,t*l),s.A.lerp(a.y,c.y,n*l),s.A.lerp(a.z,c.z,i*l),_),r.A.fromElements(s.A.lerp(a.x,c.x,(t+1)*l),s.A.lerp(a.y,c.y,(n+1)*l),s.A.lerp(a.z,c.z,(i+1)*l),I),this.shapeTransform,o)};const E=new r.A;d.prototype.computeOrientedBoundingBoxForSample=function(e,t,n,i){A.A.typeOf.object("spatialNode",e),A.A.typeOf.object("tileDimensions",t),A.A.typeOf.object("tileUv",n),A.A.typeOf.object("result",i);const o=1/Math.pow(2,e.level),a=r.A.divideComponents(r.A.ONE,t,E),c=r.A.multiplyByScalar(a,o,E),l=r.A.multiplyByScalar(r.A.fromElements(e.x+n.x,e.y+n.y,e.z+n.z,_),o,_),u=r.A.add(l,c,I),d=this._minBounds,h=this._maxBounds;return R(r.A.fromElements(s.A.lerp(d.x,h.x,l.x),s.A.lerp(d.y,h.y,l.y),s.A.lerp(d.z,h.z,l.z),_),r.A.fromElements(s.A.lerp(d.x,h.x,u.x),s.A.lerp(d.y,h.y,u.y),s.A.lerp(d.z,h.z,u.z),I),this.shapeTransform,i)},d.DefaultMinBounds=Object.freeze(new r.A(0,-s.A.PI,-1)),d.DefaultMaxBounds=Object.freeze(new r.A(1,+s.A.PI,1));const y=new Array(5),C=new r.A,b=new c.A,B=new l.A,v=new l.A,w=new l.A,T=new l.A,S=new r.A,x=new r.A,D=new r.A,Q=new Array(8);for(let e=0;e<8;e++)Q[e]=new r.A;function N(e,t,n){return Math.abs(a.A.dot(e,t))<n}function R(e,t,n,i){const o=e.x,a=t.x,A=e.y,d=t.y<A?t.y+s.A.TWO_PI:t.y,g=e.z,f=t.z,p=d-A,m=A+.5*p,_=y;let I=0;_[I++]=A,_[I++]=d,_[I++]=m,p>s.A.PI&&(_[I++]=m-s.A.PI_OVER_TWO,_[I++]=m+s.A.PI_OVER_TWO);let E=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;for(let e=0;e<I;++e){const t=_[e]-m,n=Math.cos(t),i=Math.sin(t),r=n*o,s=i*o,A=n*a,c=i*a;E=Math.min(E,r,A),R=Math.min(R,s,c),M=Math.max(M,r,A),L=Math.max(L,s,c)}const P=M-E,O=L-R,F=f-g,U=.5*(E+M),k=.5*(R+L),G=.5*(g+f),H=r.A.fromElements(U,k,G,C),V=c.A.fromRotationZ(m,b),z=r.A.fromElements(P,O,F,h),j=l.A.fromScale(z,w),Y=l.A.fromRotation(V,v),q=l.A.fromTranslation(H,B),W=l.A.multiplyTransformation(Y,l.A.multiplyTransformation(q,j,T),T),J=l.A.multiplyTransformation(n,W,T);return function(e){const t=l.A.getColumn(e,0,S),n=l.A.getColumn(e,1,x),i=l.A.getColumn(e,2,D),o=s.A.EPSILON4;return N(t,n,o)&&N(n,i,o)}(J)?u.A.fromTransformation(J,i):function(e,t){const n=Q;r.A.fromElements(-.5,-.5,-.5,n[0]),r.A.fromElements(-.5,-.5,.5,n[1]),r.A.fromElements(-.5,.5,-.5,n[2]),r.A.fromElements(-.5,.5,.5,n[3]),r.A.fromElements(.5,-.5,-.5,n[4]),r.A.fromElements(.5,-.5,.5,n[5]),r.A.fromElements(.5,.5,-.5,n[6]),r.A.fromElements(.5,.5,.5,n[7]);for(let t=0;t<8;++t)l.A.multiplyByPoint(e,n[t],n[t]);return u.A.fromPoints(n,t)}(J,i)}const M=d},2930:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var i=n(660662),o=n(434067),r=n(267980),a=n(369031),s=n(610750),A=n(367817),c=n(331185),l=n(584164),u=n(832698),d=n(697422);function h(){this.orientedBoundingBox=new u.A,this.boundingSphere=new i.A,this.boundTransform=new l.A,this.shapeTransform=new l.A,this._rectangle=new d.A,this._minimumHeight=h.DefaultMinBounds.z,this._maximumHeight=h.DefaultMaxBounds.z,this._ellipsoid=new s.A,this._translation=new r.A,this._rotation=new c.A,this.shaderUniforms={ellipsoidRadiiUv:new r.A,eccentricitySquared:0,evoluteScale:new o.A,ellipsoidInverseRadiiSquaredUv:new r.A,ellipsoidRenderLongitudeMinMax:new o.A,ellipsoidShapeUvLongitudeMinMaxMid:new r.A,ellipsoidUvToShapeUvLongitude:new o.A,ellipsoidUvToShapeUvLatitude:new o.A,ellipsoidRenderLatitudeSinMinMax:new o.A,ellipsoidInverseHeightDifferenceUv:0,clipMinMaxHeight:new o.A},this.shaderDefines={ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF:void 0,ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF:void 0,ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE:void 0,ELLIPSOID_INTERSECTION_INDEX_LONGITUDE:void 0,ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX:void 0,ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN:void 0,ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX:void 0,ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN:void 0},this.shaderMaximumIntersectionsLength=0}const g=new r.A,f=new r.A,p=new r.A,m=new r.A,_=new r.A,I=new r.A,E=new r.A,y=new r.A,C=new c.A,b=new r.A,B=new r.A,v=new d.A;h.prototype.update=function(e,t,n,u,w){const{DefaultMinBounds:T,DefaultMaxBounds:S}=h;u=u??T,w=w??S,a.A.typeOf.object("modelMatrix",e),a.A.typeOf.object("minBounds",t),a.A.typeOf.object("maxBounds",n);const x=A.A.EPSILON10,Q=A.A.EPSILON3,N=A.A.EPSILON10,R=A.A.EPSILON10,M=A.A.EPSILON3,L=l.A.getScale(e,y),P=r.A.clone(T,g);P.z=-r.A.minimumComponent(L);const O=r.A.clamp(t,P,S,f),F=r.A.clamp(n,P,S,p),U=r.A.clamp(u,P,S,m),k=r.A.clamp(w,P,S,_),G=r.A.maximumByComponent(O,U,I),H=r.A.minimumByComponent(F,k,E),V=r.A.add(L,r.A.fromElements(F.z,F.z,F.z,b),b),z=r.A.maximumComponent(V),j=r.A.add(L,r.A.fromElements(H.z,H.z,H.z,B),B);if(G.y>H.y||G.y===S.y||H.y===T.y||G.z>H.z||A.A.equalsEpsilon(j,r.A.ZERO,void 0,x))return!1;this._rectangle=d.A.fromRadians(O.x,O.y,F.x,F.y),this._translation=l.A.getTranslation(e,this._translation),this._rotation=l.A.getRotation(e,this._rotation),this._ellipsoid=s.A.fromCartesian3(L,this._ellipsoid),this._minimumHeight=O.z,this._maximumHeight=F.z;const Y=d.A.fromRadians(G.x,G.y,H.x,H.y,v);this.orientedBoundingBox=D(Y,G.z,H.z,this._ellipsoid,this._translation,this._rotation,this.orientedBoundingBox),this.shapeTransform=l.A.fromRotationTranslation(c.A.setScale(this._rotation,V,C),this._translation,this.shapeTransform),this.boundTransform=l.A.fromRotationTranslation(this.orientedBoundingBox.halfAxes,this.orientedBoundingBox.center,this.boundTransform),this.boundingSphere=i.A.fromOrientedBoundingBox(this.orientedBoundingBox,this.boundingSphere);const q=S.x-T.x,W=.5*q,J=H.x<G.x,K=H.x-G.x+J*q,X=K<=N,Z=K>=W-N&&K<q-N,$=K>N&&K<W-N,ee=X||Z||$,te=F.x<O.x,ne=F.x-O.x+te*q,ie=ne>W+N&&ne<q-N||ne>=W-N&&ne<=W+N||ne<W-N,oe=H.y<-M,re=H.y>=-M&&H.y<=+M,ae=H.y>+M&&H.y<S.y-R,se=oe||re||ae,Ae=G.y>T.y+R&&G.y<-M,ce=G.y>=-M&&G.y<=+M,le=G.y>+M,ue=Ae||ce||le,de=se||ue,he=F.y-O.y,ge=F.y<-M,fe=F.y>=-M&&F.y<=+M,pe=F.y>+M&&F.y<S.y-R,me=ge||fe||pe,_e=O.y>T.y+R&&O.y<-M,Ie=O.y>=-M&&O.y<=+M,Ee=O.y>+M,ye=me||_e||Ie||Ee,{shaderUniforms:Ce,shaderDefines:be}=this;for(const e in be)be.hasOwnProperty(e)&&(be[e]=void 0);Ce.ellipsoidRadiiUv=r.A.divideByScalar(V,z,Ce.ellipsoidRadiiUv);const{x:Be,z:ve}=Ce.ellipsoidRadiiUv,we=ve/Be;Ce.eccentricitySquared=1-we*we,Ce.evoluteScale=o.A.fromElements((Be*Be-ve*ve)/Be,(ve*ve-Be*Be)/ve,Ce.evoluteScale),Ce.ellipsoidInverseRadiiSquaredUv=r.A.divideComponents(r.A.ONE,r.A.multiplyComponents(Ce.ellipsoidRadiiUv,Ce.ellipsoidRadiiUv,Ce.ellipsoidInverseRadiiSquaredUv),Ce.ellipsoidInverseRadiiSquaredUv);let Te=0;be.ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX=Te,Te+=1,be.ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN=Te,Te+=1,Ce.clipMinMaxHeight=o.A.fromElements((G.z-F.z)/z,(H.z-F.z)/z,Ce.clipMinMaxHeight);const Se=(F.z-O.z)/z;if(Ce.ellipsoidInverseHeightDifferenceUv=1/Se,O.z===F.z&&(Ce.ellipsoidInverseHeightDifferenceUv=0),ee&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE=!0,be.ELLIPSOID_INTERSECTION_INDEX_LONGITUDE=Te,Z?(be.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF=!0,Te+=1):$?(be.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF=!0,Te+=2):X&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO=!0,Te+=2),Ce.ellipsoidRenderLongitudeMinMax=o.A.fromElements(G.x,H.x,Ce.ellipsoidRenderLongitudeMinMax)),ie)if(be.ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE=!0,F.x<O.x&&(be.ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED=!0),ne<=N)Ce.ellipsoidUvToShapeUvLongitude=o.A.fromElements(0,1,Ce.ellipsoidUvToShapeUvLongitude);else{const e=q/ne,t=-(O.x-T.x)/ne;Ce.ellipsoidUvToShapeUvLongitude=o.A.fromElements(e,t,Ce.ellipsoidUvToShapeUvLongitude)}if(ee){const e=A.A.equalsEpsilon(G.x,T.x,void 0,Q),t=A.A.equalsEpsilon(H.x,S.x,void 0,Q);e&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY=!0),t&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY=!0);const n=(O.x-T.x)/q,i=(F.x-T.x)/q,o=((H.x-T.x)/q+.5*(1-K/q))%1;Ce.ellipsoidShapeUvLongitudeMinMaxMid=r.A.fromElements(n,i,o,Ce.ellipsoidShapeUvLongitudeMinMaxMid)}if(de&&(ue&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN=!0,be.ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN=Te,Ae?(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF=!0,Te+=1):ce?(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF=!0,Te+=1):le&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF=!0,Te+=2)),se&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX=!0,be.ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX=Te,oe?(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF=!0,Te+=2):re?(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF=!0,Te+=1):ae&&(be.ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF=!0,Te+=1)),Ce.ellipsoidRenderLatitudeSinMinMax=o.A.fromElements(Math.sin(G.y),Math.sin(H.y),Ce.ellipsoidRenderLatitudeSinMinMax)),ye)if(be.ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE=!0,he<R)Ce.ellipsoidUvToShapeUvLatitude=o.A.fromElements(0,1,Ce.ellipsoidUvToShapeUvLatitude);else{const e=(S.y-T.y)/he,t=(T.y-O.y)/he;Ce.ellipsoidUvToShapeUvLatitude=o.A.fromElements(e,t,Ce.ellipsoidUvToShapeUvLatitude)}return this.shaderMaximumIntersectionsLength=Te,!0};const w=new d.A;h.prototype.computeOrientedBoundingBoxForTile=function(e,t,n,i,o){a.A.typeOf.number("tileLevel",e),a.A.typeOf.number("tileX",t),a.A.typeOf.number("tileY",n),a.A.typeOf.number("tileZ",i),a.A.typeOf.object("result",o);const r=1/Math.pow(2,e),s=t*r,c=(t+1)*r,l=n*r,u=(n+1)*r,h=i*r,g=(i+1)*r;return D(d.A.subsection(this._rectangle,s,l,c,u,w),A.A.lerp(this._minimumHeight,this._maximumHeight,h),A.A.lerp(this._minimumHeight,this._maximumHeight,g),this._ellipsoid,this._translation,this._rotation,o)};const T=new r.A,S=new r.A,x=new r.A;function D(e,t,n,i,o,a,s){return(s=u.A.fromRectangle(e,t,n,i,s)).center=r.A.add(s.center,o,s.center),s.halfAxes=c.A.multiply(s.halfAxes,a,s.halfAxes),s}h.prototype.computeOrientedBoundingBoxForSample=function(e,t,n,i){a.A.typeOf.object("spatialNode",e),a.A.typeOf.object("tileDimensions",t),a.A.typeOf.object("tileUv",n),a.A.typeOf.object("result",i);const o=1/Math.pow(2,e.level),s=r.A.divideComponents(r.A.ONE,t,T),c=r.A.multiplyByScalar(s,o,T),l=r.A.multiplyByScalar(r.A.fromElements(e.x+n.x,e.y+n.y,e.z+n.z,S),o,S),u=r.A.add(l,c,x);return D(d.A.subsection(this._rectangle,l.x,l.y,u.x,u.y,w),A.A.lerp(this._minimumHeight,this._maximumHeight,l.z),A.A.lerp(this._minimumHeight,this._maximumHeight,u.z),this._ellipsoid,this._translation,this._rotation,i)},h.DefaultMinBounds=Object.freeze(new r.A(-A.A.PI,-A.A.PI_OVER_TWO,-s.A.WGS84.minimumRadius)),h.DefaultMaxBounds=Object.freeze(new r.A(A.A.PI,A.A.PI_OVER_TWO,10*s.A.WGS84.maximumRadius));const Q=h},574917:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=Object.freeze({Z_UP:0,Y_UP:1})},450339:(e,t,n)=>{"use strict";n.d(t,{A:()=>ne});var i=n(593054),o=n(434067),r=n(267980),a=n(626809),s=n(336946),A=n(485760),c=n(367817),l=n(369031),u=n(41476),d=n(711284),h=n(376758),g=n(106430),f=n(915325),p=n(491446),m=n(677354),_=n(610750),I=n(955943),E=n(591978),y=n(608191),C=n(331185),b=n(584164),B=n(568748),v=n(374607),w=n(983884),T=n(891674),S=n(717339),x=n(491807),D=n(304431),Q=n(307452),N=n(574917);function R(e){e=e??f.A.EMPTY_OBJECT,this._ready=!1,this._provider=e.provider??R.DefaultProvider,this._traversal=void 0,this._statistics=new A.A,this._calculateStatistics=e.calculateStatistics??!1,this._shape=void 0,this._shapeVisible=!1,this._dimensions=new r.A,this._inputDimensions=new r.A,this._paddingBefore=new r.A,this._paddingAfter=new r.A,this._minBounds=new r.A,this._minBoundsOld=new r.A,this._maxBounds=new r.A,this._maxBoundsOld=new r.A,this._exaggeratedMinBounds=new r.A,this._exaggeratedMinBoundsOld=new r.A,this._exaggeratedMaxBounds=new r.A,this._exaggeratedMaxBoundsOld=new r.A,this._minClippingBounds=new r.A,this._minClippingBoundsOld=new r.A,this._maxClippingBounds=new r.A,this._maxClippingBoundsOld=new r.A,this._clippingPlanes=void 0,this._clippingPlanesState=0,this._clippingPlanesEnabled=!1,this._modelMatrix=b.A.clone(e.modelMatrix??b.A.IDENTITY),this._exaggeratedModelMatrix=b.A.clone(this._modelMatrix),this._compoundModelMatrix=new b.A,this._compoundModelMatrixOld=new b.A,this._customShader=e.customShader??R.DefaultCustomShader,this._customShaderCompilationEvent=new I.A,this._shaderDirty=!0,this._drawCommand=void 0,this._drawCommandPick=void 0,this._pickId=void 0,this._clock=e.clock,this._transformPositionWorldToUv=new b.A,this._transformDirectionWorldToUv=new C.A,this._transformPositionUvToWorld=new b.A,this._transformDirectionWorldToLocal=new C.A,this._nearestSampling=!1,this._levelBlendFactor=0,this._stepSizeMultiplier=1,this._depthTest=!0,this._useLogDepth=void 0,this._screenSpaceError=4,this._debugPolylines=new T.A,this._debugDraw=!1,this._disableRender=!1,this._disableUpdate=!1,this._uniforms={octreeInternalNodeTexture:void 0,octreeInternalNodeTilesPerRow:0,octreeInternalNodeTexelSizeUv:new o.A,octreeLeafNodeTexture:void 0,octreeLeafNodeTilesPerRow:0,octreeLeafNodeTexelSizeUv:new o.A,megatextureTextures:[],megatextureSliceDimensions:new o.A,megatextureTileDimensions:new o.A,megatextureVoxelSizeUv:new o.A,megatextureSliceSizeUv:new o.A,megatextureTileSizeUv:new o.A,dimensions:new r.A,inputDimensions:new r.A,paddingBefore:new r.A,paddingAfter:new r.A,transformPositionViewToUv:new b.A,transformPositionUvToView:new b.A,transformDirectionViewToLocal:new C.A,cameraPositionUv:new r.A,cameraDirectionUv:new r.A,ndcSpaceAxisAlignedBoundingBox:new a.A,clippingPlanesTexture:void 0,clippingPlanesMatrix:new b.A,stepSize:0,pickColor:new u.A},this._shapeDefinesOld={},this._uniformMap={};const t=this._uniforms,n=this._uniformMap;for(const e in t)t.hasOwnProperty(e)&&(n[`u_${e}`]=function(){return t[e]});this.tileLoad=new I.A,this.tileVisible=new I.A,this.tileFailed=new I.A,this.tileUnload=new I.A,this.loadProgress=new I.A,this.allTilesLoaded=new I.A,this.initialTilesLoaded=new I.A,function(e,t){const{shape:n,minBounds:i=D.A.getMinBounds(n),maxBounds:o=D.A.getMaxBounds(n)}=t;e.minBounds=i,e.maxBounds=o,e.minClippingBounds=i.clone(),e.maxClippingBounds=o.clone(),e._exaggeratedMinBounds=r.A.clone(e._minBounds,e._exaggeratedMinBounds),e._exaggeratedMaxBounds=r.A.clone(e._maxBounds,e._exaggeratedMaxBounds),e._exaggeratedModelMatrix=b.A.clone(e._modelMatrix,e._exaggeratedModelMatrix),j(e,t);const a=D.A.getShapeConstructor(n);e._shape=new a,e._shapeVisible=q(e,e._shape)}(this,this._provider)}Object.defineProperties(R.prototype,{ready:{get:function(){return this._ready}},provider:{get:function(){return this._provider}},boundingSphere:{get:function(){return this._shape.boundingSphere}},orientedBoundingBox:{get:function(){return this._shape.orientedBoundingBox}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){l.A.typeOf.object("modelMatrix",e),this._modelMatrix=b.A.clone(e,this._modelMatrix)}},shape:{get:function(){return this._provider.shape}},dimensions:{get:function(){return this._dimensions}},inputDimensions:{get:function(){return this._inputDimensions}},paddingBefore:{get:function(){return this._paddingBefore}},paddingAfter:{get:function(){return this._paddingAfter}},minimumValues:{get:function(){return this._provider.minimumValues}},maximumValues:{get:function(){return this._provider.maximumValues}},show:{get:function(){return!this._disableRender},set:function(e){l.A.typeOf.bool("show",e),this._disableRender=!e}},disableUpdate:{get:function(){return this._disableUpdate},set:function(e){l.A.typeOf.bool("disableUpdate",e),this._disableUpdate=e}},debugDraw:{get:function(){return this._debugDraw},set:function(e){l.A.typeOf.bool("debugDraw",e),this._debugDraw=e}},depthTest:{get:function(){return this._depthTest},set:function(e){l.A.typeOf.bool("depthTest",e),this._depthTest!==e&&(this._depthTest=e,this._shaderDirty=!0)}},nearestSampling:{get:function(){return this._nearestSampling},set:function(e){l.A.typeOf.bool("nearestSampling",e),this._nearestSampling!==e&&(this._nearestSampling=e,this._shaderDirty=!0)}},levelBlendFactor:{get:function(){return this._levelBlendFactor},set:function(e){l.A.typeOf.number("levelBlendFactor",e),this._levelBlendFactor=c.A.clamp(e,0,1)}},screenSpaceError:{get:function(){return this._screenSpaceError},set:function(e){l.A.typeOf.number("screenSpaceError",e),this._screenSpaceError=e}},stepSize:{get:function(){return this._stepSizeMultiplier},set:function(e){l.A.typeOf.number("stepSize",e),this._stepSizeMultiplier=e}},minBounds:{get:function(){return this._minBounds},set:function(e){l.A.defined("minBounds",e),this._minBounds=r.A.clone(e,this._minBounds)}},maxBounds:{get:function(){return this._maxBounds},set:function(e){l.A.defined("maxBounds",e),this._maxBounds=r.A.clone(e,this._maxBounds)}},minClippingBounds:{get:function(){return this._minClippingBounds},set:function(e){l.A.defined("minClippingBounds",e),this._minClippingBounds=r.A.clone(e,this._minClippingBounds)}},maxClippingBounds:{get:function(){return this._maxClippingBounds},set:function(e){l.A.defined("maxClippingBounds",e),this._maxClippingBounds=r.A.clone(e,this._maxClippingBounds)}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){d.A.setOwner(e,this,"_clippingPlanes")}},customShader:{get:function(){return this._customShader},set:function(e){if(this._customShader!==e){const t=this._uniformMap,n=this._customShader.uniformMap;for(const e in n)n.hasOwnProperty(e)&&delete t[e];(0,p.A)(e)?this._customShader=e:this._customShader=R.DefaultCustomShader,this._shaderDirty=!0}}},customShaderCompilationEvent:{get:function(){return this._customShaderCompilationEvent}},statistics:{get:function(){return this._statistics}}});const M=new a.A,L=new a.A,P=new b.A,O=new b.A,F=new b.A,U=b.A.fromRotationTranslation(C.A.fromUniformScale(.5,new C.A),new r.A(.5,.5,.5),new b.A),k=b.A.fromRotationTranslation(C.A.fromUniformScale(2,new C.A),new r.A(-1,-1,-1),new b.A);R.prototype.update=function(e){const t=this._provider;this._customShader.update(e);const n=e.context;if(!this._ready)return function(e,t,n){const i=e._uniforms;e._pickId=n.createPickId({primitive:e}),i.pickColor=u.A.clone(e._pickId.color,i.pickColor);const{shaderDefines:a,shaderUniforms:s}=e._shape;e._shapeDefinesOld=(0,h.A)(a,!0);const A=e._uniformMap;for(const e in s)if(s.hasOwnProperty(e)){const t=`u_${e}`;(0,p.A)(A[t])&&(0,w.A)(`VoxelPrimitive: Uniform name "${t}" is already defined`),A[t]=function(){return s[e]}}if(e._dimensions=r.A.clone(t.dimensions,e._dimensions),i.dimensions=r.A.clone(e._dimensions,i.dimensions),e._paddingBefore=r.A.clone(t.paddingBefore??r.A.ZERO,e._paddingBefore),i.paddingBefore=r.A.clone(e._paddingBefore,i.paddingBefore),e._paddingAfter=r.A.clone(t.paddingAfter??r.A.ZERO,e._paddingAfter),i.paddingAfter=r.A.clone(e._paddingAfter,i.paddingAfter),e._inputDimensions=r.A.add(e._dimensions,e._paddingBefore,e._inputDimensions),e._inputDimensions=r.A.add(e._inputDimensions,e._paddingAfter,e._inputDimensions),t.metadataOrder===N.A.Y_UP){const t=e._inputDimensions.y;e._inputDimensions.y=e._inputDimensions.z,e._inputDimensions.z=t}i.inputDimensions=r.A.clone(e._inputDimensions,i.inputDimensions);const c=t.keyframeCount??1;e._traversal=new Q.A(e,n,c),e.statistics.texturesByteLength=e._traversal.textureMemoryByteLength,function(e,t){t.octreeInternalNodeTexture=e.internalNodeTexture,t.octreeInternalNodeTexelSizeUv=o.A.clone(e.internalNodeTexelSizeUv,t.octreeInternalNodeTexelSizeUv),t.octreeInternalNodeTilesPerRow=e.internalNodeTilesPerRow;const n=e.megatextures,i=n[0],r=n.length;t.megatextureTextures=new Array(r);for(let e=0;e<r;e++)t.megatextureTextures[e]=n[e].texture;t.megatextureSliceDimensions=o.A.clone(i.sliceCountPerRegion,t.megatextureSliceDimensions),t.megatextureTileDimensions=o.A.clone(i.regionCountPerMegatexture,t.megatextureTileDimensions),t.megatextureVoxelSizeUv=o.A.clone(i.voxelSizeUv,t.megatextureVoxelSizeUv),t.megatextureSliceSizeUv=o.A.clone(i.sliceSizeUv,t.megatextureSliceSizeUv),t.megatextureTileSizeUv=o.A.clone(i.regionSizeUv,t.megatextureTileSizeUv)}(e._traversal,i)}(this,t,n),void e.afterRender.push(()=>(this._ready=!0,!0));!function(e,t){if(e._exaggeratedMinBounds=r.A.clone(e._minBounds,e._exaggeratedMinBounds),e._exaggeratedMaxBounds=r.A.clone(e._maxBounds,e._exaggeratedMaxBounds),e.shape===D.A.ELLIPSOID){const n=t.verticalExaggerationRelativeHeight,i=t.verticalExaggeration;e._exaggeratedMinBounds.z=(e._minBounds.z-n)*i+n,e._exaggeratedMaxBounds.z=(e._maxBounds.z-n)*i+n}else{const n=r.A.fromElements(1,1,t.verticalExaggeration,G);e._exaggeratedModelMatrix=b.A.multiplyByScale(e._modelMatrix,n,e._exaggeratedModelMatrix),e._exaggeratedModelMatrix=b.A.multiplyByTranslation(e._exaggeratedModelMatrix,function(e,t){const{shapeTransform:n=b.A.IDENTITY,globalTransform:i=b.A.IDENTITY}=e._provider,o=b.A.getTranslation(n,H),a=b.A.multiplyByPoint(e._modelMatrix,o,H),s=b.A.multiplyByPoint(i,a,H),A=_.A.WGS84.cartesianToCartographic(s,V);let c=0;(0,p.A)(A)&&(c=A.height);const l=S.A.getHeight(c,t.verticalExaggeration,t.verticalExaggerationRelativeHeight);return r.A.fromElements(0,0,(l-c)/t.verticalExaggeration,z)}(e,t),e._exaggeratedModelMatrix)}}(this,e);const s=j(this,t),A=this._shape;if(s&&(this._shapeVisible=q(this,A),function(e,t){const n=t.shaderDefines,i=Object.keys(n).some(t=>n[t]!==e._shapeDefinesOld[t]);return i&&(e._shapeDefinesOld=(0,h.A)(n,!0)),i}(this,A)&&(this._shaderDirty=!0)),!this._shapeVisible)return;const l=function(e,t){if(!(0,p.A)(e)||!(0,p.A)(t))return 0;let n,i=t.currentTime,o=e.indexOf(i);o>=0?n=e.get(o):(o=~o,o===e.length?(o=e.length-1,n=e.get(o),i=n.stop):(n=e.get(o),i=n.start));const r=E.A.secondsDifference(n.stop,n.start);return o+E.A.secondsDifference(i,n.start)/r}(t.timeIntervalCollection,this._clock),d=this._traversal,g=d._sampleCount;if(d.update(e,l,s,this._disableUpdate),g!==d._sampleCount&&(this._shaderDirty=!0),!d.isRenderable(d.rootNode))return;if(this._debugDraw&&function(e,t){const n=e._traversal,i=e._debugPolylines;function o(e,t,n,o){i.add({positions:[e,t],width:o,material:y.A.fromType("Color",{color:n})})}function a(e,t,n){const i=e.computeCorners();o(i[0],i[1],t,n),o(i[2],i[3],t,n),o(i[4],i[5],t,n),o(i[6],i[7],t,n),o(i[0],i[2],t,n),o(i[4],i[6],t,n),o(i[1],i[3],t,n),o(i[5],i[7],t,n),o(i[0],i[4],t,n),o(i[2],i[6],t,n),o(i[1],i[5],t,n),o(i[3],i[7],t,n)}i.removeAll(),a(e._shape.orientedBoundingBox,u.A.WHITE,5),function e(t){if(!n.isRenderable(t))return;const i=t.level,o=Math.max(1,5/Math.pow(2,i)),r=[u.A.RED,u.A.LIME,u.A.BLUE][i%3];if(a(t.orientedBoundingBox,r,o),(0,p.A)(t.children))for(let n=0;n<8;n++)e(t.children[n])}(n.rootNode);o(r.A.ZERO,Z,u.A.RED,10),o(r.A.ZERO,$,u.A.LIME,10),o(r.A.ZERO,ee,u.A.BLUE,10),i.update(t)}(this,e),this._disableRender)return;this._useLogDepth!==e.useLogDepth&&(this._useLogDepth=e.useLogDepth,this._shaderDirty=!0);const f=function(e,t){const n=e.clippingPlanes;if(!(0,p.A)(n))return!1;n.update(t);const{clippingPlanesState:i,enabled:o}=n;if(o){const t=e._uniforms;t.clippingPlanesTexture=n.texture,t.clippingPlanesMatrix=b.A.transpose(b.A.multiplyTransformation(b.A.inverse(n.modelMatrix,t.clippingPlanesMatrix),e._transformPositionUvToWorld,t.clippingPlanesMatrix),t.clippingPlanesMatrix)}return(e._clippingPlanesState!==i||e._clippingPlanesEnabled!==o)&&(e._clippingPlanesState=i,e._clippingPlanesEnabled=o,!0)}(this,e);f&&(this._shaderDirty=!0);const m=d.leafNodeTexture,I=this._uniforms;(0,p.A)(m)&&(I.octreeLeafNodeTexture=d.leafNodeTexture,I.octreeLeafNodeTexelSizeUv=o.A.clone(d.leafNodeTexelSizeUv,I.octreeLeafNodeTexelSizeUv),I.octreeLeafNodeTilesPerRow=d.leafNodeTilesPerRow),this._shaderDirty&&((0,i.A)(this,n),this._shaderDirty=!1);const B=n.uniformState.viewProjection,v=function(e,t,n){const i=b.A.fromRotationTranslation(e.halfAxes,e.center,O),o=b.A.multiply(t,i,F);let r,s=+Number.MAX_VALUE,A=-Number.MAX_VALUE,l=+Number.MAX_VALUE,u=-Number.MAX_VALUE;const d=K,h=W.length;for(r=0;r<h;r++)b.A.multiplyByVector(o,W[r],d[r]);for(r=0;r<h;r++){const e=d[r];if(e.z>=-e.w){const t=e.x/e.w,n=e.y/e.w;s=Math.min(s,t),A=Math.max(A,t),l=Math.min(l,n),u=Math.max(u,n)}else for(let t=0;t<3;t++){const n=d[J[3*r+t]];if(n.z>=-n.w){const t=e.z+e.w,i=t/(t-(n.z+n.w)),o=a.A.lerp(e,n,i,M),r=o.x/o.w,c=o.y/o.w;s=Math.min(s,r),A=Math.max(A,r),l=Math.min(l,c),u=Math.max(u,c)}}}return s=c.A.clamp(s,-1,1),l=c.A.clamp(l,-1,1),A=c.A.clamp(A,-1,1),u=c.A.clamp(u,-1,1),a.A.fromElements(s,l,A,u,n)}(A.orientedBoundingBox,B,L);if(1===v.x||1===v.y||-1===v.z||-1===v.w)return;I.ndcSpaceAxisAlignedBoundingBox=a.A.clone(v,I.ndcSpaceAxisAlignedBoundingBox);const T=n.uniformState.inverseView;I.transformPositionViewToUv=b.A.multiplyTransformation(this._transformPositionWorldToUv,T,I.transformPositionViewToUv);const x=n.uniformState.view;I.transformPositionUvToView=b.A.multiplyTransformation(x,this._transformPositionUvToWorld,I.transformPositionUvToView);const R=n.uniformState.inverseViewRotation;I.transformDirectionViewToLocal=C.A.multiply(this._transformDirectionWorldToLocal,R,I.transformDirectionViewToLocal),I.cameraPositionUv=b.A.multiplyByPoint(this._transformPositionWorldToUv,e.camera.positionWC,I.cameraPositionUv),I.cameraDirectionUv=C.A.multiplyByVector(this._transformDirectionWorldToUv,e.camera.directionWC,I.cameraDirectionUv),I.cameraDirectionUv=r.A.normalize(I.cameraDirectionUv,I.cameraDirectionUv),I.stepSize=this._stepSizeMultiplier;const P=e.passes.pick?this._drawCommandPick:e.passes.pickVoxel?this._drawCommandPickVoxel:this._drawCommand;P.boundingVolume=A.boundingSphere,e.commandList.push(P)};const G=new r.A,H=new r.A,V=new s.A,z=new r.A;function j(e,t){const n=t.shapeTransform??b.A.IDENTITY,i=t.globalTransform??b.A.IDENTITY;return b.A.multiplyTransformation(i,e._exaggeratedModelMatrix,e._compoundModelMatrix),b.A.multiplyTransformation(e._compoundModelMatrix,n,e._compoundModelMatrix),Y(e,"_compoundModelMatrix","_compoundModelMatrixOld")+Y(e,"_minBounds","_minBoundsOld")+Y(e,"_maxBounds","_maxBoundsOld")+Y(e,"_exaggeratedMinBounds","_exaggeratedMinBoundsOld")+Y(e,"_exaggeratedMaxBounds","_exaggeratedMaxBoundsOld")+Y(e,"_minClippingBounds","_minClippingBoundsOld")+Y(e,"_maxClippingBounds","_maxClippingBoundsOld")>0}function Y(e,t,n){const i=e[t],o=e[n],r=!i.equals(o);return r&&i.clone(o),r?1:0}function q(e,t,n){if(!t.update(e._compoundModelMatrix,e._exaggeratedMinBounds,e._exaggeratedMaxBounds,e.minClippingBounds,e.maxClippingBounds))return!1;const i=t.shapeTransform,o=b.A.inverse(i,P);return e._transformPositionWorldToUv=b.A.multiplyTransformation(U,o,e._transformPositionWorldToUv),e._transformDirectionWorldToUv=b.A.getMatrix3(e._transformPositionWorldToUv,e._transformDirectionWorldToUv),e._transformPositionUvToWorld=b.A.multiplyTransformation(i,k,e._transformPositionUvToWorld),e._transformDirectionWorldToLocal=b.A.getMatrix3(o,e._transformDirectionWorldToLocal),!0}R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){const e=this._drawCommand;(0,p.A)(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy());const t=this._drawCommandPick;return(0,p.A)(t)&&(t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()),this._pickId=this._pickId&&this._pickId.destroy(),this._traversal=this._traversal&&this._traversal.destroy(),this.statistics.texturesByteLength=0,this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,m.A)(this)};const W=new Array(new a.A(-1,-1,-1,1),new a.A(1,-1,-1,1),new a.A(-1,1,-1,1),new a.A(1,1,-1,1),new a.A(-1,-1,1,1),new a.A(1,-1,1,1),new a.A(-1,1,1,1),new a.A(1,1,1,1)),J=new Array(1,2,4,0,3,5,0,3,6,1,2,7,0,5,6,1,4,7,2,4,7,3,5,6),K=new Array(new a.A,new a.A,new a.A,new a.A,new a.A,new a.A,new a.A,new a.A),X=3e7,Z=new r.A(X,0,0),$=new r.A(0,X,0),ee=new r.A(0,0,X);function te(){this.ready=!0,this.shape=D.A.BOX,this.dimensions=new r.A(1,1,1),this.names=["data"],this.types=[v.A.SCALAR],this.componentTypes=[B.A.FLOAT32],this.maximumTileCount=1}R.DefaultCustomShader=new g.A({fragmentShaderText:"void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)\n{\n    material.diffuse = vec3(1.0);\n    material.alpha = 1.0;\n}"}),te.prototype.requestData=function(e){if(((0,p.A)(e)?e.tileLevel??0:0)>=1)return;const t=new x.A({metadata:[new Float32Array(1)]});return Promise.resolve(t)},R.DefaultProvider=new te;const ne=R},618291:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(267980),o=n(430346),r=n(491446),a=n(469635),s=n(624512),A=n(677101),c=n(791533),l=n(305725),u=n(418816),d=n(189670),h=n(138338),g=n(755774),f=n(186930),p=n(864393),m=n(485326),_=n(741641),I=n(774390),E=n(248877),y=n(945042),C=n(940702),b=n(195987),B=n(574917);const v=function(e){const t=new a.A;this.shaderBuilder=t;const n=e._customShader,v=(0,o.A)(e._uniformMap,n.uniformMap);e._uniformMap=v;const w=n.uniforms;for(const e in w)if(w.hasOwnProperty(e)){const n=w[e];t.addUniform(n.type,e,s.A.FRAGMENT)}t.addUniform("sampler2D","u_megatextureTextures[METADATA_COUNT]",s.A.FRAGMENT),this.uniformMap=v;const T=e._clippingPlanes,S=(0,r.A)(T)&&T.enabled?T.length:0;this.clippingPlanes=T,this.clippingPlanesLength=S,t.addVertexLines([l.A]),e.provider.metadataOrder===B.A.Y_UP&&t.addDefine("Y_UP_METADATA_ORDER",void 0,s.A.FRAGMENT);const x=e._provider.shape;"BOX"===x?t.addDefine("SHAPE_BOX",void 0,s.A.FRAGMENT):"CYLINDER"===x?t.addDefine("SHAPE_CYLINDER",void 0,s.A.FRAGMENT):"ELLIPSOID"===x&&t.addDefine("SHAPE_ELLIPSOID",void 0,s.A.FRAGMENT),t.addFragmentLines([n.fragmentShaderText,"#line 0",C.A,A.A,u.A,b.A]),S>0&&(t.addDefine("CLIPPING_PLANES",void 0,s.A.FRAGMENT),t.addDefine("CLIPPING_PLANES_COUNT",S,s.A.FRAGMENT),T.unionClippingRegions&&t.addDefine("CLIPPING_PLANES_UNION",void 0,s.A.FRAGMENT),t.addFragmentLines([h.A])),t.addFragmentLines([d.A]),e._depthTest&&t.addDefine("DEPTH_TEST",void 0,s.A.FRAGMENT),"BOX"===x?t.addFragmentLines([I.A,f.A,_.A]):"CYLINDER"===x?t.addFragmentLines([E.A,g.A,p.A,_.A]):"ELLIPSOID"===x&&t.addFragmentLines([y.A,g.A,m.A,_.A]),t.addFragmentLines([c.A]);const D=e._shape,Q=D.shaderDefines;for(const e in Q)if(Q.hasOwnProperty(e)){let n=Q[e];(0,r.A)(n)&&(n=!0===n?void 0:n,t.addDefine(e,n,s.A.FRAGMENT))}let N=D.shaderMaximumIntersectionsLength;S>0&&(t.addDefine("CLIPPING_PLANES_INTERSECTION_INDEX",N,s.A.FRAGMENT),1===S?N+=1:T.unionClippingRegions?N+=2:N+=1),e._depthTest&&(t.addDefine("DEPTH_INTERSECTION_INDEX",N,s.A.FRAGMENT),N+=1),t.addDefine("INTERSECTION_COUNT",N,s.A.FRAGMENT),i.A.equals(e.paddingBefore,i.A.ZERO)&&i.A.equals(e.paddingAfter,i.A.ZERO)||t.addDefine("PADDING",void 0,s.A.FRAGMENT),e._useLogDepth&&t.addDefine("LOG_DEPTH_READ_ONLY",void 0,s.A.FRAGMENT),e._nearestSampling&&t.addDefine("NEAREST_SAMPLING",void 0,s.A.FRAGMENT);const R=e._traversal;t.addDefine("SAMPLE_COUNT",`${R._sampleCount}`,s.A.FRAGMENT)}},304431:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(605971),o=n(204758),r=n(823345),a=n(2930);const s={BOX:"BOX",ELLIPSOID:"ELLIPSOID",CYLINDER:"CYLINDER",getMinBounds:function(e){switch(e){case s.BOX:return o.A.DefaultMinBounds;case s.ELLIPSOID:return a.A.DefaultMinBounds;case s.CYLINDER:return r.A.DefaultMinBounds;default:throw new i.A(`Invalid shape type ${e}`)}},getMaxBounds:function(e){switch(e){case s.BOX:return o.A.DefaultMaxBounds;case s.ELLIPSOID:return a.A.DefaultMaxBounds;case s.CYLINDER:return r.A.DefaultMaxBounds;default:throw new i.A(`Invalid shape type ${e}`)}},getShapeConstructor:function(e){switch(e){case s.BOX:return o.A;case s.ELLIPSOID:return a.A;case s.CYLINDER:return r.A;default:throw new i.A(`Invalid shape type ${e}`)}}},A=Object.freeze(s)},307452:(e,t,n)=>{"use strict";n.d(t,{A:()=>Q});var i=n(434067),o=n(267980),r=n(367817),a=n(400793),s=n(491446),A=n(677354),c=n(634061),l=n(230259),u=n(301866),d=n(374607),h=n(866109),g=n(276904),f=n(57775),p=n(654799),m=n(533872),_=n(616e3),I=n(957233),E=n(78078),y=n(574917);function C(e,t,n,r){const{provider:a,dimensions:A,paddingBefore:l,paddingAfter:C}=e,{types:B,componentTypes:v,metadataOrder:w}=a,T=o.A.add(A,l,new o.A);if(o.A.add(T,C,T),w===y.A.Y_UP){const e=T.y;T.y=T.z,T.z=e}!(0,s.A)(r)&&(0,s.A)(a.maximumTileCount)&&(r=function(e,t,n,i){let o=0;const r=n.length;for(let a=0;a<r;a++){const r=n[a],s=i[a],A=d.A.getComponentCount(r);o+=h.A.getApproximateTextureMemoryByteLength(e,t,A,s)}return o}(a.maximumTileCount,T,B,v)),this._primitive=e,this.textureMemoryByteLength=0,this.megatextures=new Array(B.length);for(let e=0;e<B.length;e++){const n=B[e],i=d.A.getComponentCount(n),o=v[e];this.megatextures[e]=new h.A(t,T,i,o,r),this.textureMemoryByteLength+=this.megatextures[e].textureMemoryByteLength}const S=this.megatextures[0].maximumTileCount;this._simultaneousRequestCount=0,this._debugPrint=!1,this._calculateStatistics=this._primitive._calculateStatistics??!1,this._frameNumber=0;const x=e._shape;this.rootNode=new m.A(0,0,0,0,void 0,x,A),this._priorityQueue=new c.A({maximumLength:S,comparator:u.A.priorityComparator}),this._highPriorityKeyframeNodes=new Array(S),this._highPriorityKeyframeNodeCount=0,this._keyframeNodesInMegatexture=new Array(S),this._keyframeCount=n,this._sampleCount=void 0,this._keyframeLocation=0,this._binaryTreeKeyframeWeighting=new Array(n),this._initialTilesLoaded=!1;const D=this._binaryTreeKeyframeWeighting;D[0]=0,D[n-1]=0,b(D,1,n-2,0);const Q=Math.floor(227.55555555555554),N=Math.ceil(S/Q);this.internalNodeTexture=new _.A({context:t,pixelFormat:g.A.RGBA,pixelDatatype:f.A.UNSIGNED_BYTE,flipY:!1,width:2048,height:N,sampler:new p.A({minificationFilter:E.A.NEAREST,magnificationFilter:I.A.NEAREST})}),this.internalNodeTilesPerRow=Q,this.internalNodeTexelSizeUv=new i.A(.00048828125,1/N),this.leafNodeTexture=void 0,this.leafNodeTilesPerRow=void 0,this.leafNodeTexelSizeUv=new i.A}function b(e,t,n,i){if(t>n)return;const o=Math.floor((t+n)/2);e[o]=i,b(e,t,o-1,i+1),b(e,o+1,n,i+1)}function B(e,t){if(t.computeBoundingVolumes(e._primitive._shape),(0,s.A)(t.children))for(let n=0;n<8;n++)B(e,t.children[n])}function v(e,t){if(e._simultaneousRequestCount>=C.simultaneousRequestCountMaximum)return;const n=e._primitive.provider,{keyframe:i,spatialNode:o}=t;if((0,s.A)(n.availableLevels)&&o.level>=n.availableLevels)return;const r={tileLevel:o.level,tileX:o.x,tileY:o.y,tileZ:o.z,keyframe:i},a=n.requestData(r);(0,s.A)(a)&&(e._simultaneousRequestCount++,t.state=u.A.LoadState.RECEIVING,a.then(function(n){e._simultaneousRequestCount--,t.content=n,t.state=(0,s.A)(n)?u.A.LoadState.PROCESSING:u.A.LoadState.UNAVAILABLE}).catch(function(n){e._simultaneousRequestCount--,t.state=u.A.LoadState.FAILED,e._primitive.tileFailed.raiseEvent()}))}function w(e,t){return e.highPriorityFrameNumber===t.highPriorityFrameNumber?t.priority-e.priority:t.highPriorityFrameNumber-e.highPriorityFrameNumber}function T(e,t){const n=t._primitive.provider.types.length;if(!Array.isArray(e)||e.length!==n)return!1;const{megatextures:i}=t;for(let t=0;t<n;t++){const{voxelCountPerTile:n,channelCount:o}=i[t],{x:r,y:a,z:s}=n,A=r*a*s*o;if(e[t].length!==A)return!1}return!0}function S(e,t,n,i){const{camera:o,context:A,pixelRatio:c,frameNumber:l}=i,{positionWC:d,frustum:h}=o,g=A.drawingBufferHeight/c/h.sseDenominator;if(e.computeScreenSpaceError(d,g),(t=e.visibility(i,t))===a.A.MASK_OUTSIDE)return;e.visitedFrameNumber=l;const f=n._primitive,p=f._shape,m=f.screenSpaceError,_=n._priorityQueue,I=n._keyframeCount,E=r.A.clamp(Math.floor(n._keyframeLocation),0,I-2),y=E+1;if(1===I)e.createKeyframeNode(0);else if(e.keyframeNodes.length!==I)for(let t=0;t<I;t++)e.createKeyframeNode(t);const{screenSpaceError:C,keyframeNodes:b}=e,B=(v=C)/(1+v);var v;let w=!1;for(let e=0;e<b.length;e++){const t=b[e];t.priority=10*B+x(E,t.keyframe,y,n),t.state!==u.A.LoadState.UNAVAILABLE&&t.state!==u.A.LoadState.FAILED&&t.priority!==-Number.MAX_VALUE&&_.insert(t),t.state===u.A.LoadState.LOADED&&(w=!0)}if(C<m||!w)e.children=void 0;else{(0,s.A)(e.children)||e.constructChildNodes(p);for(let o=0;o<8;o++)S(e.children[o],t,n,i)}}function x(e,t,n,i){const o=Math.min(Math.abs(t-e),Math.abs(t-n)),a=Math.max(e,i._keyframeCount-n-1,1),s=Math.pow(1-o/a,4),A=Math.exp(-i._binaryTreeKeyframeWeighting[t]);return r.A.lerp(A,s,.15+.85*s)}C.prototype.findKeyframeNode=function(e){return this._keyframeNodesInMegatexture.find(function(t){return t.megatextureIndex===e})},C.simultaneousRequestCountMaximum=50,C.prototype.update=function(e,t,n,o){const A=this._primitive,c=e.context,d=this.megatextures[0].maximumTileCount,h=this._keyframeCount,m=A._levelBlendFactor,y=(m>0?2:1)*(h>1?2:1);this._sampleCount=y;const C=y>=2;if(C&&!(0,s.A)(this.leafNodeTexture)){const e=2,t=1024,n=Math.floor(t/e),o=Math.ceil(d/n);this.leafNodeTexture=new _.A({context:c,pixelFormat:g.A.RGBA,pixelDatatype:f.A.UNSIGNED_BYTE,flipY:!1,width:t,height:o,sampler:new p.A({minificationFilter:E.A.NEAREST,magnificationFilter:I.A.NEAREST})}),this.leafNodeTexelSizeUv=i.A.fromElements(1/t,1/o,this.leafNodeTexelSizeUv),this.leafNodeTilesPerRow=n}else!C&&(0,s.A)(this.leafNodeTexture)&&(this.leafNodeTexture=this.leafNodeTexture.destroy());if(this._keyframeLocation=r.A.clamp(t,0,h-1),n&&B(this,this.rootNode),o)return;this._frameNumber=e.frameNumber;const b=(0,l.A)();!function(e,t){const n=e._frameNumber,i=e._priorityQueue;i.reset(),S(e.rootNode,a.A.MASK_INDETERMINATE,e,t);const o=e._highPriorityKeyframeNodes;let r,s=0;for(;i.length>0;)r=i.removeMaximum(),r.highPriorityFrameNumber=n,o[s]=r,s++;e._highPriorityKeyframeNodeCount=s}(this,e),function(e,t){const n=e.megatextures[0],i=n.occupiedCount,o=e._keyframeNodesInMegatexture;o.length=i,o.sort(w);const r=e._highPriorityKeyframeNodes,a=e._highPriorityKeyframeNodeCount;let s=0,A=0;for(let c=0;c<a;c++){const a=r[c];if(a.state!==u.A.LoadState.LOADED&&void 0!==a.spatialNode&&(a.state===u.A.LoadState.UNLOADED&&v(e,a),a.state===u.A.LoadState.PROCESSING)){const{content:r}=a;if(r.update(e._primitive,t),!r.ready)continue;if(!T(r.metadata,e)){a.content=void 0,a.state=u.A.LoadState.FAILED,e._primitive.tileFailed.raiseEvent();continue}let c=0;if(n.isFull()){c=i-1-s,s++;const t=o[c];e._primitive.tileUnload.raiseEvent(),t.spatialNode.destroyKeyframeNode(t,e.megatextures)}else c=i+A,A++;a.spatialNode.addKeyframeNodeToMegatextures(a,e.megatextures),a.state=u.A.LoadState.LOADED,o[c]=a,e._primitive.tileLoad.raiseEvent()}}}(this,e);const x=(0,l.A)();!function(e,t,n){const i=e._primitive._screenSpaceError,o=e._keyframeLocation,a=e._frameNumber,A=t>=2;let c=0,l=0;const u=[],d=[];const h=e.rootNode;h.computeSurroundingRenderableKeyframeNodes(o),h.isRenderable(a)&&function t(h,g,f,p,m){let _=!1;if((0,s.A)(h.children))for(let e=0;e<8;e++){const t=h.children[e];t.computeSurroundingRenderableKeyframeNodes(o),t.isRenderable(a)&&(_=!0)}if(_){u[m]=D.INTERNAL<<16|g,u[f]=p,c++,m=9*(p=g)+1;for(let e=0;e<8;e++)t(h.children[e],g=c,f=9*g+0,p,m+e)}else{if(e._primitive.tileVisible.raiseEvent(),A){const e=5*l,t=h.renderableKeyframeNodePrevious,o=h.level-t.spatialNode.level,a=t.spatialNode.parent,A=(0,s.A)(a)?a.renderableKeyframeNodePrevious:t,c=function(e,t,n){if(void 0===e.parent)return 0;const i=e.screenSpaceError,o=((t-i)/(e.parent.screenSpaceError-i)+n-1)/n;return r.A.clamp(o,0,1)}(h,i,n),g=o,f=1,p=t.megatextureIndex,_=A.megatextureIndex;d[e+0]=c,d[e+1]=g,d[e+2]=f,d[e+3]=p,d[e+4]=_,u[m]=D.LEAF<<16|l}else{const e=h.renderableKeyframeNodePrevious,t=0===h.level-e.spatialNode.level?D.LEAF:D.PACKED_LEAF_FROM_PARENT;u[m]=t<<16|e.megatextureIndex}l++}}(h,0,0,0,0),function(e,t,n,i){const o=g.A.componentsLength(i.pixelFormat),r=Math.ceil(e.length/9),a=Math.max(1,9*Math.min(r,n)),s=Math.max(1,Math.ceil(r/n)),A=new Uint8Array(a*s*o);for(let t=0;t<e.length;t++){const n=e[t],i=t*o;for(let e=0;e<o;e++)A[i+e]=n>>>8*e&255}const c={source:{arrayBufferView:A,width:a,height:s},xOffset:0,yOffset:0};i.copyFrom(c)}(u,0,e.internalNodeTilesPerRow,e.internalNodeTexture),A&&function(e,t,n,i){const o=g.A.componentsLength(i.pixelFormat),a=Math.ceil(e.length/5),s=Math.max(1,2*Math.min(a,n)),A=Math.max(1,Math.ceil(a/n)),c=new Uint8Array(s*A*o);for(let t=0;t<a;t++){const n=e[5*t+0],i=e[5*t+1],o=e[5*t+2],a=e[5*t+3],s=e[5*t+4],A=r.A.clamp(Math.floor(65536*n),0,65535);c[8*t+0]=A>>>0&255,c[8*t+1]=A>>>8&255,c[8*t+2]=255&i,c[8*t+3]=255&o,c[8*t+4]=a>>>0&255,c[8*t+5]=a>>>8&255,c[8*t+6]=s>>>0&255,c[8*t+7]=s>>>8&255}const l={source:{arrayBufferView:c,width:s,height:A},xOffset:0,yOffset:0};i.copyFrom(l)}(d,0,e.leafNodeTilesPerRow,e.leafNodeTexture)}(this,y,m);const Q=(0,l.A)(),N=A.loadProgress.numberOfListeners>0||A.allTilesLoaded.numberOfListeners>0||A.initialTilesLoaded.numberOfListeners>0;(this._debugPrint||this._calculateStatistics||N)&&function(e,t,n,i,o){const r=e._keyframeCount,a=e.rootNode,A=Object.keys(u.A.LoadState).length,c=new Array(A),l=new Array(A);let d=0;for(let e=0;e<A;e++){const t=new Array(r).fill(0);c[e]=t,l[e]=0}(function e(t){const n=t.keyframeNodes;for(let e=0;e<n.length;e++){const t=n[e],i=t.keyframe,o=t.state;c[o][i]+=1,l[o]+=1,d++}if((0,s.A)(t.children))for(let n=0;n<8;n++)e(t.children[n])})(a),e._primitive.statistics.numberOfTilesWithContentReady=l[u.A.LoadState.LOADED],e._primitive.statistics.visited=d;const h=l[u.A.LoadState.RECEIVING],g=l[u.A.LoadState.PROCESSING],f=h!==e._primitive.statistics.numberOfPendingRequests||g!==e._primitive.statistics.numberOfTilesProcessing;f&&t.afterRender.push(function(){return e._primitive.loadProgress.raiseEvent(h,g),!0}),e._primitive.statistics.numberOfPendingRequests=h,e._primitive.statistics.numberOfTilesProcessing=g;if(f&&(0===h&&0===g)&&(t.afterRender.push(function(){return e._primitive.allTilesLoaded.raiseEvent(),!0}),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push(function(){return e._primitive.initialTilesLoaded.raiseEvent(),!0}))),!e._debugPrint)return;const p=`KEYFRAMES: ${c[u.A.LoadState.LOADED]}`,m=`UNLOADED: ${l[u.A.LoadState.UNLOADED]} | RECEIVING: ${l[u.A.LoadState.RECEIVING]} | PROCESSING: ${l[u.A.LoadState.PROCESSING]} | LOADED: ${l[u.A.LoadState.LOADED]} | FAILED: ${l[u.A.LoadState.FAILED]} | UNAVAILABLE: ${l[u.A.LoadState.UNAVAILABLE]} | TOTAL: ${d}`,_=`LOAD: ${Math.round(100*n)/100} | OCT: ${Math.round(100*i)/100} | ALL: ${Math.round(100*o)/100}`;console.log(`${p} || ${m} || ${_}`)}(this,e,x-b,Q-x,Q-b)},C.prototype.isRenderable=function(e){return e.isRenderable(this._frameNumber)},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){const e=this.megatextures,t=e.length;for(let n=0;n<t;n++)e[n]=e[n]&&e[n].destroy();return this.textureMemoryByteLength=0,this.internalNodeTexture=this.internalNodeTexture&&this.internalNodeTexture.destroy(),this.leafNodeTexture=this.leafNodeTexture&&this.leafNodeTexture.destroy(),(0,A.A)(this)};const D={INTERNAL:0,LEAF:1,PACKED_LEAF_FROM_PARENT:2},Q=C},762270:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(915325),o=n(491446),r=n(605971),a=n(182348),s=n(744603),A=n(414305),c=n(463823),l=n(99520),u=n(66458);const d=[3034,3035,3042,3043,3044],h=[4471,4559];function g(e){if(e=e??i.A.EMPTY_OBJECT,!(0,o.A)(e.url))throw new r.A("options.url is required.");if(!(0,o.A)(e.layers))throw new r.A("options.layers is required.");if((0,o.A)(e.times)&&!(0,o.A)(e.clock))throw new r.A("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=e.getFeatureInfoUrl??e.url;const t=s.A.createIfNeeded(e.url),n=s.A.createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(g.DefaultParameters,!0),n.setQueryParameters(g.GetFeatureInfoDefaultParameters,!0),(0,o.A)(e.parameters)&&t.setQueryParameters(p(e.parameters)),(0,o.A)(e.getFeatureInfoParameters)&&n.setQueryParameters(p(e.getFeatureInfoParameters));const c=this;this._reload=void 0,(0,o.A)(e.times)&&(this._timeDynamicImagery=new l.A({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return f(c,e,t,n,i,o)},reloadFunction:function(){(0,o.A)(c._reload)&&c._reload()}}));const m={};if(m.layers=e.layers,m.bbox="{westProjected},{southProjected},{eastProjected},{northProjected}",m.width="{width}",m.height="{height}",parseFloat(t.queryParameters.version)>=1.3){m.crs=e.crs??(e.tilingScheme&&e.tilingScheme.projection instanceof A.A?"EPSG:3857":"CRS:84");const t=m.crs.split(":");if("EPSG"===t[0]&&2===t.length){const e=Number(t[1]);(e>=4e3&&e<5e3&&!h.includes(e)||d.includes(e))&&(m.bbox="{southProjected},{westProjected},{northProjected},{eastProjected}")}}else m.srs=e.srs??(e.tilingScheme&&e.tilingScheme.projection instanceof A.A?"EPSG:3857":"EPSG:4326");t.setQueryParameters(m,!0),n.setQueryParameters(m,!0);const _={query_layers:e.layers,info_format:"{format}"};parseFloat(n.queryParameters.version)>=1.3?(_.i="{i}",_.j="{j}"):(_.x="{i}",_.y="{j}"),n.setQueryParameters(_,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new u.A({url:t,pickFeaturesUrl:n,tilingScheme:e.tilingScheme??new a.A({ellipsoid:e.ellipsoid}),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:e.getFeatureInfoFormats??g.DefaultGetFeatureInfoFormats,enablePickFeatures:e.enablePickFeatures})}function f(e,t,n,i,r,a){const s=(0,o.A)(a)?a.data:void 0,A=e._tileProvider;return(0,o.A)(s)&&A._resource.setQueryParameters(s),A.requestImage(t,n,i,r)}function p(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}Object.defineProperties(g.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}}}),g.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)},g.prototype.requestImage=function(e,t,n,i){let r;const a=this._timeDynamicImagery;let s;return(0,o.A)(a)&&(s=a.currentInterval,r=a.getFromCache(e,t,n,i)),(0,o.A)(r)||(r=f(this,e,t,n,i,s)),(0,o.A)(r)&&(0,o.A)(a)&&a.checkApproachingInterval(e,t,n,i),r},g.prototype.pickFeatures=function(e,t,n,i,r){const a=this._timeDynamicImagery;return function(e,t,n,i,r,a,s){const A=(0,o.A)(s)?s.data:void 0,c=e._tileProvider;return(0,o.A)(A)&&c._pickFeaturesResource.setQueryParameters(A),c.pickFeatures(t,n,i,r,a)}(this,e,t,n,i,r,(0,o.A)(a)?a.currentInterval:void 0)},g.DefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"}),g.GetFeatureInfoDefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"}),g.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new c.A("json","application/json")),Object.freeze(new c.A("xml","text/xml")),Object.freeze(new c.A("text","text/html"))]);const m=g},32706:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(430346),o=n(672743),r=n(915325),a=n(491446),s=n(605971),A=n(955943),c=n(744603),l=n(41076),u=n(553909),d=n(99520);const h=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});function g(e){if(e=e??r.A.EMPTY_OBJECT,!(0,a.A)(e.url))throw new s.A("options.url is required.");if(!(0,a.A)(e.layer))throw new s.A("options.layer is required.");if(!(0,a.A)(e.style))throw new s.A("options.style is required.");if(!(0,a.A)(e.tileMatrixSetID))throw new s.A("options.tileMatrixSetID is required.");if((0,a.A)(e.times)&&!(0,a.A)(e.clock))throw new s.A("options.times was specified, so options.clock is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const t=c.A.createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,u=t.url,g=u.match(/{/g);if(!(0,a.A)(g)||1===g.length&&/{s}/.test(u))t.setQueryParameters(h),this._useKvp=!0;else{const e={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(e),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=e.format??"image/jpeg",this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=(0,a.A)(e.tilingScheme)?e.tilingScheme:new l.A({ellipsoid:e.ellipsoid}),this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._rectangle=e.rectangle??this._tilingScheme.rectangle,this._dimensions=e.dimensions;const p=this;this._reload=void 0,(0,a.A)(e.times)&&(this._timeDynamicImagery=new d.A({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return f(p,e,t,n,i,o)},reloadFunction:function(){(0,a.A)(p._reload)&&p._reload()}})),this._errorEvent=new A.A;const m=e.credit;this._credit="string"==typeof m?new o.A(m):m,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():(0,a.A)(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(""):this._subdomains=["a","b","c"]}function f(e,t,n,o,r,s){const A=e._tileMatrixLabels,c=(0,a.A)(A)?A[o]:o.toString(),l=e._subdomains,d=e._dimensions,h=(0,a.A)(s)?s.data:void 0;let g,f;if(e._useKvp){let s={};s.tilematrix=c,s.layer=e._layer,s.style=e._style,s.tilerow=n,s.tilecol=t,s.tilematrixset=e._tileMatrixSetID,s.format=e._format,(0,a.A)(d)&&(s=(0,i.A)(s,d)),(0,a.A)(h)&&(s=(0,i.A)(s,h)),f={s:l[(t+n+o)%l.length]},g=e._resource.getDerivedResource({queryParameters:s,request:r}),g.setTemplateValues(f)}else f={TileMatrix:c,TileRow:n.toString(),TileCol:t.toString(),s:l[(t+n+o)%l.length]},g=e._resource.getDerivedResource({request:r}),g.setTemplateValues(f),(0,a.A)(d)&&g.setTemplateValues(d),(0,a.A)(h)&&g.setTemplateValues(h);return u.A.loadImage(e,g)}Object.defineProperties(g.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,(0,a.A)(this._reload)&&this._reload())}}}),g.prototype.getTileCredits=function(e,t,n){},g.prototype.requestImage=function(e,t,n,i){let o;const r=this._timeDynamicImagery;let s;return(0,a.A)(r)&&(s=r.currentInterval,o=r.getFromCache(e,t,n,i)),(0,a.A)(o)||(o=f(this,e,t,n,i,s)),(0,a.A)(o)&&(0,a.A)(r)&&r.checkApproachingInterval(e,t,n,i),o},g.prototype.pickFeatures=function(e,t,n,i,o){};const p=g},593054:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(491446),o=n(402330),r=n(200646),a=n(527083),s=n(796170),A=n(377496),c=n(760866),l=n(40118),u=n(624512),d=n(618291),h=n(16620);const g=function(e,t){const n=new d.A(e);(0,h.A)(n,e);const{shaderBuilder:g,clippingPlanes:f,clippingPlanesLength:p}=n;if(p>0){const e="getClippingPlane",n=(0,s.A)(f,t),i=0,o=n.indexOf(")")+1,r=n.indexOf("{",o)+1,a=n.indexOf("}",r),A=n.slice(i,o),c=n.slice(r,a);g.addFunction(e,A,u.A.FRAGMENT),g.addFunctionLines(e,[c])}const m=g.clone();m.addDefine("PICKING",void 0,u.A.FRAGMENT);const _=g.clone();_.addDefine("PICKING_VOXEL",void 0,u.A.FRAGMENT);const I=g.buildShaderProgram(t),E=m.buildShaderProgram(t),y=_.buildShaderProgram(t),C=l.A.fromCache({cull:{enabled:!0,face:a.A.BACK},depthTest:{enabled:!1},depthMask:!1,blending:r.A.PRE_MULTIPLIED_ALPHA_BLEND}),b=t.getViewportQuadVertexArray(),B=e._depthTest,v=new A.A({vertexArray:b,primitiveType:o.A.TRIANGLES,renderState:C,shaderProgram:I,uniformMap:n.uniformMap,modelMatrix:e._compoundModelMatrix,pass:c.A.VOXELS,executeInClosestFrustum:!0,owner:this,cull:B,occlude:B}),w=A.A.shallowClone(v,new A.A);w.shaderProgram=E,w.pickOnly=!0;const T=A.A.shallowClone(v,new A.A);if(T.shaderProgram=y,T.pickOnly=!0,(0,i.A)(e._drawCommand)){const t=e._drawCommand;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}if((0,i.A)(e._drawCommandPick)){const t=e._drawCommandPick;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}if((0,i.A)(e._drawCommandPickVoxel)){const t=e._drawCommandPickVoxel;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}e._drawCommand=v,e._drawCommandPick=w,e._drawCommandPickVoxel=T}},849750:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(697422),r=n(448871),a=n(62467);async function s(e,t){const n=t.terrainProvider,r=t.mapProjection,A=r.ellipsoid;let c;const l=t.camera.getRectangleCameraCoordinates(e);if(c=t.mode===a.A.SCENE3D?A.cartesianToCartographic(l):r.unproject(l),!(0,i.A)(n))return c;const u=n.availability;if(!(0,i.A)(u)||t.mode===a.A.SCENE2D)return c;const d=[o.A.center(e),o.A.southeast(e),o.A.southwest(e),o.A.northeast(e),o.A.northwest(e)],h=await s._sampleTerrainMostDetailed(n,d);let g=!1;const f=h.reduce(function(e,t){return(0,i.A)(t.height)?(g=!0,Math.max(t.height,e)):e},-Number.MAX_VALUE),p=c;return g&&(p.height+=f),p}s._sampleTerrainMostDetailed=r.A;const A=s},883734:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=function(e,t,n,i,o){return function(){const r=document.createElement("canvas"),a=o+2*i;r.height=r.width=a;const s=r.getContext("2d");return s.clearRect(0,0,a,a),0!==i&&(s.beginPath(),s.arc(a/2,a/2,a/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=n,s.fill(),e<1&&(s.save(),s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle="black",s.fill(),s.restore())),s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=t,s.fill(),r}}},655028:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(915325),o=n(670549),r=n(231097);const a=function(e){const t=(e=e??i.A.EMPTY_OBJECT).style??r.A.AERIAL;return o.A.fromAssetId(t)}},635649:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(35204),o=n(915325),r=n(491446),a=n(800859),s=n(983884);function A(e,t){const n=(0,a.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!(0,r.A)(n))return;if(!(0,r.A)(e.schema))return void A._oneTimeWarning("findContentMetadata-missing-root-schema","Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const s=e.schema.classes??o.A.EMPTY_OBJECT;if((0,r.A)(n.class)){const e=s[n.class];return new i.A({content:n,class:e})}}A._oneTimeWarning=s.A;const c=A},217543:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(491446),o=n(800859);const r=function(e,t){const n=e.metadataExtension;if(!(0,i.A)(n))return;const r=n.groups,a=(0,o.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"].group:t.group;if("number"==typeof a)return r[a];const s=n.groupIds.findIndex(function(e){return e===a});return s>=0?r[s]:void 0}},961624:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(915325),o=n(491446),r=n(800859),a=n(335859),s=n(983884);function A(e,t){const n=(0,r.A)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!(0,o.A)(n))return;if(!(0,o.A)(e.schema))return void A._oneTimeWarning("findTileMetadata-missing-root-schema","Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const s=e.schema.classes??i.A.EMPTY_OBJECT;if((0,o.A)(n.class)){const e=s[n.class];return new a.A({tile:n,class:e})}}A._oneTimeWarning=s.A;const c=A},351554:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(434067),o=n(267980),r=n(626809),a=n(571804),s=n(463298),A=n(331185),c=n(584164);const l={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},u={SCALAR:void 0,VEC2:i.A,VEC3:o.A,VEC4:r.A,MAT2:s.A,MAT3:A.A,MAT4:c.A},d=function(e){const t=e.componentType;let n;n="string"==typeof t?a.A.fromName(t):t;const i=l[e.type],o=u[e.type];return{componentsPerAttribute:i,classType:o,createArrayBufferView:function(e,t,o){return a.A.createArrayBufferView(n,e,t,i*o)}}}},245329:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(369031);const o=function(e,t,n){return i.A.typeOf.string("samplerUniformName",e),i.A.typeOf.string("matrixUniformName",t),i.A.typeOf.string("styleUniformName",n),`    float clipDistance = clip(gl_FragCoord, ${e}, ${t}); \n    vec4 clippingPlanesEdgeColor = vec4(1.0); \n    clippingPlanesEdgeColor.rgb = ${n}.rgb; \n    float clippingPlanesEdgeWidth = ${n}.a; \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) \n    { \n        out_FragColor = clippingPlanesEdgeColor;\n    } \n`}},796170:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(434067),o=n(369031),r=n(711284);const a=new i.A,s=function(e,t){o.A.typeOf.object("clippingPlaneCollection",e),o.A.typeOf.object("context",t);const n=e.unionClippingRegions,i=e.length,s=r.A.useFloatTexture(t),A=r.A.getTextureResolution(e,t,a),c=A.x,l=A.y;let u=s?function(e,t){const n=1/t;let i=`${1/e}`;-1===i.indexOf(".")&&(i+=".0");let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");return`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int pixY = clippingPlaneNumber / ${e};\n    int pixX = clippingPlaneNumber - (pixY * ${e});\n    float u = (float(pixX) + 0.5) * ${i};\n    float v = (float(pixY) + 0.5) * ${o};\n    vec4 plane = texture(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n`}(c,l):function(e,t){const n=1/t;let i=`${1/e}`;-1===i.indexOf(".")&&(i+=".0");let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");return`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2;\n    int pixY = clippingPlaneStartIndex / ${e};\n    int pixX = clippingPlaneStartIndex - (pixY * ${e});\n    float u = (float(pixX) + 0.5) * ${i};\n    float v = (float(pixY) + 0.5) * ${o};\n    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + ${i}, v)));\n    return czm_transformPlane(plane, transform);\n}\n`}(c,l);return u+="\n",u+=n?function(e){return`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount;\n    float pixelWidth = czm_metersPerPixel(position);\n    bool breakAndDiscard = false;\n    for (int i = 0; i < ${e}; ++i)\n    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0)\n        {\n           breakAndDiscard = true;\n           break;\n        }\n    }\n    if (breakAndDiscard) {\n        discard;\n    }\n    return clipAmount;\n}\n`}(i):function(e){return`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    bool clipped = true;\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount = 0.0;\n    float pixelWidth = czm_metersPerPixel(position);\n    for (int i = 0; i < ${e}; ++i)\n    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n    }\n    if (clipped)\n    {\n        discard;\n    }\n    return clipAmount;\n}\n`}(i),u}},63267:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(702247),o=n(491446),r=n(915325),a=n(352581);const s=function(e){const t=(e.extensions??r.A.EMPTY_OBJECT).EXT_mesh_primitive_restart,n=e.primitives;if(!(0,o.A)(t))return n;const s=[];(0,i.A)(s,n);for(const e of t.primitiveGroups){const t=e.primitives[0];if(!(0,o.A)(t)||!n[t])return n;const i={...n[t],indices:e.indices};switch(i.mode){case a.A.TRIANGLE_FAN:case a.A.TRIANGLE_STRIP:case a.A.LINE_STRIP:case a.A.LINE_LOOP:break;default:return n}for(const t of e.primitives){const e=s[t];if(!(0,o.A)(e?.indices)||e.mode!==i.mode)return n;s[t]=void 0}s[t]=i}return s.filter(o.A)}},772796:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t,n,o){if(!(0,i.A)(e))return;if((0,i.A)(t)&&e.id!==t)return;const r=(e.classes||{})[n];if(!(0,i.A)(r))return;const a=(r.properties||{})[o];return(0,i.A)(a)?a:void 0}},201052:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t,n){if(!(0,i.A)(e))return;const o=e.propertyTextures;for(const e of o)if(e.class.id===t){const t=e.properties[n];if((0,i.A)(t))return t}}},800859:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(491446);const o=function(e,t){return(0,i.A)(e)&&(0,i.A)(e.extensions)&&(0,i.A)(e.extensions[t])}},115959:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var i=n(369031),o=n(571804),r=n(491446),a=n(786101),s=n(605971),A=n(123245),c=n(744671),l=n(590732),u=n(828847),d=n(287659),h=n(351554),g=n(784749),f=n(32335),p=n(4024),m=n(874403),_=n(995537),I=n(471147),E=n(983884);function y(e){i.A.typeOf.number("options.count",e.count),i.A.typeOf.object("options.batchTable",e.batchTable);const t=e.count,n=e.batchTable,a=e.binaryBody,E=e.parseAsPropertyAttributes??!1,b=e.customAttributeOutput;if(E&&!(0,r.A)(b))throw new s.A("customAttributeOutput is required when parsing batch table as property attributes");const B=function(e){const t=e.HIERARCHY,n=e.extras,i=e.extensions;let o,a;(0,r.A)(t)?(y._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),o=t):(0,r.A)(i)&&(o=i["3DTILES_batch_table_hierarchy"]);const s={};for(const t in e){if(!e.hasOwnProperty(t)||"HIERARCHY"===t||"extensions"===t||"extras"===t)continue;const n=e[t];Array.isArray(n)?(a=(0,r.A)(a)?a:{},a[t]=n):s[t]=n}return{binaryProperties:s,jsonProperties:a,hierarchy:o,extras:n,extensions:i}}(n);let v,w;(0,r.A)(B.jsonProperties)&&(v=new g.A({count:t,properties:B.jsonProperties})),(0,r.A)(B.hierarchy)&&(w=new c.A({extension:B.hierarchy,binaryBody:a}));const T=f.A.BATCH_TABLE_CLASS_NAME,S=B.binaryProperties;let x,D,Q;if(E){const e=function(e,t,n,i,a){const s={},c={};let l=0;for(const t in n){if(!n.hasOwnProperty(t))continue;const u=n[t];if(!(0,r.A)(i)&&!(0,r.A)(u.typedArray))throw new A.A(`Property ${t} requires a batch table binary.`);let d=I.A.sanitizeGlslIdentifier(t);(""===d||s.hasOwnProperty(d))&&(d=`property_${l}`,l++);const g=C(u);g.name=t,s[d]=g;let f=d.toUpperCase();f.startsWith("_")||(f=`_${f}`);let p=u.typedArray;(0,r.A)(p)||(p=(0,h.A)(u).createArrayBufferView(i.buffer,i.byteOffset+u.byteOffset,e));const m=new _.A.Attribute;m.name=f,m.count=e,m.type=u.type;const E=o.A.fromTypedArray(p);E!==o.A.INT&&E!==o.A.UNSIGNED_INT&&E!==o.A.DOUBLE||(y._oneTimeWarning("Cast pnts property to floats",`Point cloud property "${f}" will be cast to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),p=new Float32Array(p)),m.componentDatatype=o.A.fromTypedArray(p),m.typedArray=p,a.push(m),c[d]={attribute:f}}const u={classes:{}};u.classes[t]={properties:s};const d=p.A.fromJson(u);return{class:t,propertyAttributeJson:{properties:c},transcodedSchema:d,transcodedClass:d.classes[t]}}(t,T,S,a,b);Q=e.transcodedSchema,D=[new u.A({propertyAttribute:e.propertyAttributeJson,class:e.transcodedClass})]}else{const e=function(e,t,n,i){const o={},a={},s={};let c=0;for(const t in n){if(!n.hasOwnProperty(t))continue;if(!(0,r.A)(i))throw new A.A(`Property ${t} requires a batch table binary.`);const l=n[t],u=(0,h.A)(l);a[t]={bufferView:c},o[t]=C(l),s[c]=u.createArrayBufferView(i.buffer,i.byteOffset+l.byteOffset,e),c++}const l={classes:{}};l.classes[t]={properties:o};const u=p.A.fromJson(l);return{featureTableJson:{class:t,count:e,properties:a},bufferViewsTypedArrays:s,transcodedSchema:u,transcodedClass:u.classes[t]}}(t,T,S,a);Q=e.transcodedSchema;const n=e.featureTableJson;x=new m.A({count:n.count,properties:n.properties,class:e.transcodedClass,bufferViews:e.bufferViewsTypedArrays}),D=[]}const N=[];if((0,r.A)(x)||(0,r.A)(v)||(0,r.A)(w)){const e=new d.A({id:0,name:"Batch Table",count:t,metadataTable:x,jsonMetadataTable:v,batchTableHierarchy:w});N.push(e)}const R={schema:Q,propertyTables:N,propertyAttributes:D,extensions:B.extensions,extras:B.extras};return new l.A(R)}function C(e){const t=function(e){switch(e){case"BYTE":return"INT8";case"UNSIGNED_BYTE":return"UINT8";case"SHORT":return"INT16";case"UNSIGNED_SHORT":return"UINT16";case"INT":return"INT32";case"UNSIGNED_INT":return"UINT32";case"FLOAT":return"FLOAT32";case"DOUBLE":return"FLOAT64"}}(e.componentType);return{type:e.type,componentType:t}}y._deprecationWarning=a.A,y._oneTimeWarning=E.A;const b=y},4471:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(369031),o=n(430346),r=n(915325),a=n(491446),s=n(287659),A=n(105792),c=n(590732),l=n(874403);function u(e){const t={class:e.class,properties:{}},n=e.properties;for(const e in n)if(n.hasOwnProperty(e)){const i=n[e],r={channels:d(i.channels),extras:i.extras,extensions:i.extensions};t.properties[e]=(0,o.A)(i.texture,r,!0)}return t}function d(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]="rgba".indexOf(e[i]);return n}const h=function(e){const t=(e=e??r.A.EMPTY_OBJECT).extension,n=e.schema;let o;i.A.typeOf.object("options.extension",t),i.A.typeOf.object("options.schema",n);const d=[];let h;if((0,a.A)(t.featureTables))for(h=Object.keys(t.featureTables).sort(),o=0;o<h.length;o++){const i=h[o],r=t.featureTables[i],a=n.classes[r.class],A=new l.A({count:r.count,properties:r.properties,class:a,bufferViews:e.bufferViews});d.push(new s.A({id:i,count:r.count,metadataTable:A,extras:r.extras,extensions:r.extensions}))}const g=[];if((0,a.A)(t.featureTextures))for(h=Object.keys(t.featureTextures).sort(),o=0;o<h.length;o++){const i=h[o],r=t.featureTextures[i];g.push(new A.A({id:i,propertyTexture:u(r),class:n.classes[r.class],textures:e.textures}))}return new c.A({schema:n,propertyTables:d,propertyTextures:g,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}},613161:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(369031),o=n(915325),r=n(491446),a=n(287659),s=n(105792),A=n(828847),c=n(590732),l=n(874403);const u=function(e){const t=(e=e??o.A.EMPTY_OBJECT).extension,n=e.schema;i.A.typeOf.object("options.extension",t),i.A.typeOf.object("options.schema",n);const u=[];if((0,r.A)(t.propertyTables))for(let i=0;i<t.propertyTables.length;i++){const o=t.propertyTables[i],r=n.classes[o.class],s=new l.A({count:o.count,properties:o.properties,class:r,bufferViews:e.bufferViews});u.push(new a.A({id:i,name:o.name,count:o.count,metadataTable:s,extras:o.extras,extensions:o.extensions}))}const d=[];if((0,r.A)(t.propertyTextures))for(let i=0;i<t.propertyTextures.length;i++){const o=t.propertyTextures[i];d.push(new s.A({id:i,name:o.name,propertyTexture:o,class:n.classes[o.class],textures:e.textures}))}const h=[];if((0,r.A)(t.propertyAttributes))for(let e=0;e<t.propertyAttributes.length;e++){const i=t.propertyAttributes[e];h.push(new A.A({id:e,name:i.name,class:n.classes[i.class],propertyAttribute:i}))}return new c.A({schema:n,propertyTables:u,propertyTextures:d,propertyAttributes:h,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}},192518:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(604752),r=n(452684),a=n(123245),s=n(223702);const A=function(e){const t=new Uint8Array(e);let n=(0,r.A)(t);if("glTF"===n&&(n="glb"),s.A.isBinaryFormat(n))return{contentType:n,binaryPayload:t};const A=function(e){let t;try{t=(0,o.A)(e)}catch(e){throw new a.A("Invalid tile content.")}return t}(t);if((0,i.A)(A.root))return{contentType:s.A.EXTERNAL_TILESET,jsonPayload:A};if((0,i.A)(A.asset))return{contentType:s.A.GLTF,jsonPayload:A};if((0,i.A)(A.tileAvailability))return{contentType:s.A.IMPLICIT_SUBTREE_JSON,jsonPayload:A};if((0,i.A)(A.type))return{contentType:s.A.GEOJSON,jsonPayload:A};if((0,i.A)(A.voxelTable))return{contentType:s.A.VOXEL_JSON,jsonPayload:A};throw new a.A("Invalid tile content.")}},16620:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(374607),r=n(624512);function a(e){return e===o.A.SCALAR?"float":e===o.A.VEC2?"vec2":e===o.A.VEC3?"vec3":e===o.A.VEC4?"vec4":void 0}function s(e){return e===o.A.SCALAR?".r":e===o.A.VEC2?".ra":e===o.A.VEC3?".rgb":e===o.A.VEC4?"":void 0}function A(e){let t=e.toString();return-1===t.indexOf(".")&&(t=`${e}.0`),t}function c(e,t){return e===o.A.SCALAR?"":`[${t}]`}const l=function(e,t){const{shaderBuilder:n}=e,{names:l,types:u,componentTypes:d,minimumValues:h,maximumValues:g}=t._provider,f=u.length,p=(0,i.A)(h)&&(0,i.A)(g);n.addDefine("METADATA_COUNT",f,r.A.FRAGMENT),p&&n.addDefine("STATISTICS",void 0,r.A.FRAGMENT);for(let e=0;e<f;e++){const t=l[e],i=a(u[e]),o=`PropertyStatistics_${t}`,s=`PropertyStatistics_${t}`;n.addStruct(o,s,r.A.FRAGMENT),n.addStructField(o,i,"min"),n.addStructField(o,i,"max")}const m="MetadataStatistics",_="MetadataStatistics",I="metadataStatistics";n.addStruct(m,_,r.A.FRAGMENT);for(let e=0;e<f;e++){const t=l[e],i=`PropertyStatistics_${t}`,o=t;n.addStructField(m,i,o)}const E="Metadata",y="Metadata",C="metadata";n.addStruct(E,y,r.A.FRAGMENT);for(let e=0;e<f;e++){const t=a(u[e]);n.addStructField(E,t,l[e])}const b="Attributes",B="Attributes";n.addStruct(b,B,r.A.FRAGMENT),n.addStructField(b,"vec3","positionEC"),n.addStructField(b,"vec3","normalEC");const v="Voxel",w="Voxel";n.addStruct(v,w,r.A.FRAGMENT),n.addStructField(v,"vec3","viewDirUv"),n.addStructField(v,"float","travelDistance"),n.addStructField(v,"int","stepCount"),n.addStructField(v,"int","tileIndex"),n.addStructField(v,"int","sampleIndex"),n.addStructField(v,"float","distanceToDepthBuffer");const T="FragmentInput";n.addStruct(T,"FragmentInput",r.A.FRAGMENT),n.addStructField(T,_,I),n.addStructField(T,y,C),n.addStructField(T,B,"attributes"),n.addStructField(T,w,"voxel");const S="Properties",x="Properties",D="properties";n.addStruct(S,x,r.A.FRAGMENT);for(let e=0;e<f;e++){const t=a(u[e]);n.addStructField(S,t,l[e])}{const e="clearProperties";n.addFunction(e,`${x} clearProperties()`,r.A.FRAGMENT),n.addFunctionLines(e,[`${x} ${D};`]);for(let t=0;t<f;t++){const i=a(u[t],d[t]);n.addFunctionLines(e,[`${D}.${l[t]} = ${i}(0.0);`])}n.addFunctionLines(e,[`return ${D};`])}{const e="sumProperties";n.addFunction(e,`${x} sumProperties(${x} propertiesA, ${x} propertiesB)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${x} ${D};`]);for(let t=0;t<f;t++){const i=l[t];n.addFunctionLines(e,[`${D}.${i} = propertiesA.${i} + propertiesB.${i};`])}n.addFunctionLines(e,[`return ${D};`])}{const e="scaleProperties";n.addFunction(e,`${x} scaleProperties(${x} ${D}, float scale)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${x} scaledProperties = ${D};`]);for(let t=0;t<f;t++)n.addFunctionLines(e,[`scaledProperties.${l[t]} *= scale;`]);n.addFunctionLines(e,["return scaledProperties;"])}{const e="mixProperties";n.addFunction(e,`${x} mixProperties(${x} propertiesA, ${x} propertiesB, float mixFactor)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${x} ${D};`]);for(let t=0;t<f;t++){const i=l[t];n.addFunctionLines(e,[`${D}.${i} = mix(propertiesA.${i}, propertiesB.${i}, mixFactor);`])}n.addFunctionLines(e,[`return ${D};`])}{const e="copyPropertiesToMetadata";n.addFunction(e,`void copyPropertiesToMetadata(in ${x} ${D}, inout ${y} ${C})`,r.A.FRAGMENT);for(let t=0;t<f;t++){const i=l[t];n.addFunctionLines(e,[`${C}.${i} = ${D}.${i};`])}}if(p){const e="setStatistics";n.addFunction(e,`void setStatistics(inout ${_} ${I})`,r.A.FRAGMENT);for(let t=0;t<f;t++){const r=l[t],a=u[t],s=o.A.getComponentCount(a);for(let o=0;o<s;o++){const s=c(a,o),l=h[t][o],u=g[t][o];(0,i.A)(l)&&(0,i.A)(u)&&n.addFunctionLines(e,[`${I}.${r}.min${s} = ${A(l)};`,`${I}.${r}.max${s} = ${A(u)};`])}}}{const e="getPropertiesFromMegatextureAtUv";n.addFunction(e,`${x} getPropertiesFromMegatextureAtUv(vec2 texcoord)`,r.A.FRAGMENT),n.addFunctionLines(e,[`${x} ${D};`]);for(let t=0;t<f;t++){const i=u[t],o=(d[t],s(i));n.addFunctionLines(e,[`properties.${l[t]} = texture(u_megatextureTextures[${t}], texcoord)${o};`])}n.addFunctionLines(e,[`return ${D};`])}}},756995:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef MRT\nlayout (location = 0) out vec4 out_FragData_0;\nlayout (location = 1) out vec4 out_FragData_1;\n#else\nlayout (location = 0) out vec4 out_FragColor;\n#endif\n\nuniform vec4 u_bgColor;\nuniform sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    if (texture(u_depthTexture, v_textureCoordinates).r < 1.0)\n    {\n#ifdef MRT\n        out_FragData_0 = u_bgColor;\n        out_FragData_1 = vec4(u_bgColor.a);\n#else\n        out_FragColor = u_bgColor;\n#endif\n        return;\n    }\n    \n    discard;\n}\n"},301005:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\nin vec3 v_tangentEC;\nin vec3 v_bitangentEC;\nin vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},980509:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin vec3 tangent;\nin vec3 bitangent;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\nout vec3 v_tangentEC;\nout vec3 v_bitangentEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates\n    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},291192:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},149800:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},64137:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_positionEC;\nin vec3 v_normalEC;\nin vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n"},373785:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 normal;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionEC;\nout vec3 v_normalEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"},468649:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform vec3 u_radiiAndDynamicAtmosphereColor;\n\nuniform float u_atmosphereLightIntensity;\nuniform float u_atmosphereRayleighScaleHeight;\nuniform float u_atmosphereMieScaleHeight;\nuniform float u_atmosphereMieAnisotropy;\nuniform vec3 u_atmosphereRayleighCoefficient;\nuniform vec3 u_atmosphereMieCoefficient;\n\nconst float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.\nconst int PRIMARY_STEPS_MAX = 16; // Maximum number of times the ray from the camera to the world position (primary ray) is sampled.\nconst int LIGHT_STEPS_MAX = 4; // Maximum number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n/**\n * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as\n * the transmittance value for the ray.\n *\n * @param {czm_ray} primaryRay The ray from the camera to the position.\n * @param {float} primaryRayLength The length of the primary ray.\n * @param {vec3} lightDirection The direction of the light to calculate the scattering from.\n * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.\n * @param {vec3} mieColor The variable the Mie scattering will be written to.\n * @param {float} opacity The variable the transmittance will be written to.\n * @glslFunction\n */\nvoid computeScattering(\n    czm_ray primaryRay,\n    float primaryRayLength,\n    vec3 lightDirection,\n    float atmosphereInnerRadius,\n    out vec3 rayleighColor,\n    out vec3 mieColor,\n    out float opacity\n) {\n\n    // Initialize the default scattering amounts to 0.\n    rayleighColor = vec3(0.0);\n    mieColor = vec3(0.0);\n    opacity = 0.0;\n\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n\n    vec3 origin = vec3(0.0);\n\n    // Calculate intersection from the camera to the outer ring of the atmosphere.\n    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);\n\n    // Return empty colors if no intersection with the atmosphere geometry.\n    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {\n        return;\n    }\n\n    // To deal with smaller values of PRIMARY_STEPS (e.g. 4)\n    // we implement a split strategy: sky or horizon.\n    // For performance reasons, instead of a if/else branch\n    // a soft choice is implemented through a weight 0.0 <= w_stop_gt_lprl <= 1.0\n    float x = 1e-7 * primaryRayAtmosphereIntersect.stop / length(primaryRayLength);\n    // Value close to 0.0: close to the horizon\n    // Value close to 1.0: above in the sky\n    float w_stop_gt_lprl = 0.5 * (1.0 + czm_approximateTanh(x));\n\n    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.\n    float start_0 = primaryRayAtmosphereIntersect.start;\n    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);\n    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.\n    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));\n\n    // For the number of ray steps, distinguish inside or outside atmosphere (outer space)\n    // (1) from outer space we have to use more ray steps to get a realistic rendering\n    // (2) within atmosphere we need fewer steps for faster rendering\n    float x_o_a = start_0 - ATMOSPHERE_THICKNESS; // ATMOSPHERE_THICKNESS used as an ad-hoc constant, no precise meaning here, only the order of magnitude matters\n    float w_inside_atmosphere = 1.0 - 0.5 * (1.0 + czm_approximateTanh(x_o_a));\n    int PRIMARY_STEPS = PRIMARY_STEPS_MAX - int(w_inside_atmosphere * 12.0); // Number of times the ray from the camera to the world position (primary ray) is sampled.\n    int LIGHT_STEPS = LIGHT_STEPS_MAX - int(w_inside_atmosphere * 2.0); // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.\n    float rayPositionLength = primaryRayAtmosphereIntersect.start;\n    // (1) Outside the atmosphere: constant rayStepLength\n    // (2) Inside atmosphere: variable rayStepLength to compensate the rough rendering of the smaller number of ray steps\n    float totalRayLength = primaryRayAtmosphereIntersect.stop - rayPositionLength;\n    float rayStepLengthIncrease = w_inside_atmosphere * ((1.0 - w_stop_gt_lprl) * totalRayLength / (float(PRIMARY_STEPS * (PRIMARY_STEPS + 1)) / 2.0));\n    float rayStepLength = max(1.0 - w_inside_atmosphere, w_stop_gt_lprl) * totalRayLength / max(7.0 * w_inside_atmosphere, float(PRIMARY_STEPS));\n\n    vec3 rayleighAccumulation = vec3(0.0);\n    vec3 mieAccumulation = vec3(0.0);\n    vec2 opticalDepth = vec2(0.0);\n    vec2 heightScale = vec2(u_atmosphereRayleighScaleHeight, u_atmosphereMieScaleHeight);\n\n    // Sample positions on the primary ray.\n    for (int i = 0; i < PRIMARY_STEPS_MAX; ++i) {\n\n        // The loop should be: for (int i = 0; i < PRIMARY_STEPS; ++i) {...} but WebGL1 cannot\n        // loop with non-constant condition, so it has to break early instead\n        if (i >= PRIMARY_STEPS) {\n            break;\n        }\n\n        // Calculate sample position along viewpoint ray.\n        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);\n\n        // Calculate height of sample position above ellipsoid.\n        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;\n\n        // Calculate and accumulate density of particles at the sample position.\n        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;\n        opticalDepth += sampleDensity;\n\n        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.\n        czm_ray lightRay = czm_ray(samplePosition, lightDirection);\n        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);\n\n        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);\n        float lightPositionLength = 0.0;\n\n        vec2 lightOpticalDepth = vec2(0.0);\n\n        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.\n        for (int j = 0; j < LIGHT_STEPS_MAX; ++j) {\n\n            // The loop should be: for (int j = 0; i < LIGHT_STEPS; ++j) {...} but WebGL1 cannot\n            // loop with non-constant condition, so it has to break early instead\n            if (j >= LIGHT_STEPS) {\n                break;\n            }\n\n            // Calculate sample position along light ray.\n            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);\n\n            // Calculate height of the light sample position above ellipsoid.\n            float lightHeight = length(lightPosition) - atmosphereInnerRadius;\n\n            // Calculate density of photons at the light sample position.\n            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;\n\n            // Increment distance on light ray.\n            lightPositionLength += lightStepLength;\n        }\n\n        // Compute attenuation via the primary ray and the light ray.\n        vec3 attenuation = exp(-((u_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (u_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));\n\n        // Accumulate the scattering.\n        rayleighAccumulation += sampleDensity.x * attenuation;\n        mieAccumulation += sampleDensity.y * attenuation;\n\n        // Increment distance on primary ray.\n        rayPositionLength += (rayStepLength += rayStepLengthIncrease);\n    }\n\n    // Compute the scattering amount.\n    rayleighColor = u_atmosphereRayleighCoefficient * rayleighAccumulation;\n    mieColor = u_atmosphereMieCoefficient * mieAccumulation;\n\n    // Compute the transmittance i.e. how much light is passing through the atmosphere.\n    opacity = length(exp(-((u_atmosphereMieCoefficient * opticalDepth.y) + (u_atmosphereRayleighCoefficient * opticalDepth.x))));\n}\n\nvec4 computeAtmosphereColor(\n    vec3 positionWC,\n    vec3 lightDirection,\n    vec3 rayleighColor,\n    vec3 mieColor,\n    float opacity\n) {\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n\n    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);\n    float cosAngleSq = cosAngle * cosAngle;\n\n    float G = u_atmosphereMieAnisotropy;\n    float GSq = G * G;\n\n    // The Rayleigh phase function.\n    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);\n    // The Mie phase function.\n    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));\n\n    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.\n    vec3 rayleigh = rayleighPhase * rayleighColor;\n    vec3 mie = miePhase * mieColor;\n\n    vec3 color = (rayleigh + mie) * u_atmosphereLightIntensity;\n\n    return vec4(color, opacity);\n}\n"},562523:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 v_textureCoordinates;\nconst float M_PI = 3.141592653589793;\n\nfloat vdcRadicalInverse(int i)\n{\n    float r;\n    float base = 2.0;\n    float value = 0.0;\n    float invBase = 1.0 / base;\n    float invBi = invBase;\n    for (int x = 0; x < 100; x++)\n    {\n        if (i <= 0)\n        {\n            break;\n        }\n        r = mod(float(i), base);\n        value += r * invBi;\n        invBi *= invBase;\n        i = int(float(i) * invBase);\n    }\n    return value;\n}\n\nvec2 hammersley2D(int i, int N)\n{\n    return vec2(float(i) / float(N), vdcRadicalInverse(i));\n}\n\nvec3 importanceSampleGGX(vec2 xi, float alphaRoughness, vec3 N)\n{\n    float alphaRoughnessSquared = alphaRoughness * alphaRoughness;\n    float phi = 2.0 * M_PI * xi.x;\n    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (alphaRoughnessSquared - 1.0) * xi.y));\n    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n    vec3 tangentX = normalize(cross(upVector, N));\n    vec3 tangentY = cross(N, tangentX);\n    return tangentX * H.x + tangentY * H.y + N * H.z;\n}\n\n/**\n * Estimate the geometric self-shadowing of the microfacets in a surface,\n * using the Smith Joint GGX visibility function.\n * Note: Vis = G / (4 * NdotL * NdotV)\n * see Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs. Journal of Computer Graphics Techniques, 3\n * see Real-Time Rendering. Page 331 to 336.\n * see https://google.github.io/filament/Filament.md.html#materialsystem/specularbrdf/geometricshadowing(specularg)\n *\n * @param {float} alphaRoughness The roughness of the material, expressed as the square of perceptual roughness.\n * @param {float} NdotL The cosine of the angle between the surface normal and the direction to the light source.\n * @param {float} NdotV The cosine of the angle between the surface normal and the direction to the camera.\n */\nfloat smithVisibilityGGX(float alphaRoughness, float NdotL, float NdotV)\n{\n    float alphaRoughnessSq = alphaRoughness * alphaRoughness;\n\n    float GGXV = NdotL * sqrt(NdotV * NdotV * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);\n    float GGXL = NdotV * sqrt(NdotL * NdotL * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);\n\n    float GGX = GGXV + GGXL; // 2.0 if NdotL = NdotV = 1.0\n    if (GGX > 0.0)\n    {\n        return 0.5 / GGX; // 1/4 if NdotL = NdotV = 1.0\n    }\n    return 0.0;\n}\n\nvec2 integrateBrdf(float roughness, float NdotV)\n{\n    vec3 V = vec3(sqrt(1.0 - NdotV * NdotV), 0.0, NdotV);\n    float A = 0.0;\n    float B = 0.0;\n    const int NumSamples = 1024;\n    float alphaRoughness = roughness * roughness;\n    for (int i = 0; i < NumSamples; i++)\n    {\n        vec2 xi = hammersley2D(i, NumSamples);\n        vec3 H = importanceSampleGGX(xi, alphaRoughness, vec3(0.0, 0.0, 1.0));\n        vec3 L = 2.0 * dot(V, H) * H - V;\n        float NdotL = clamp(L.z, 0.0, 1.0);\n        float NdotH = clamp(H.z, 0.0, 1.0);\n        float VdotH = clamp(dot(V, H), 0.0, 1.0);\n        if (NdotL > 0.0)\n        {\n            float G = smithVisibilityGGX(alphaRoughness, NdotL, NdotV);\n            float G_Vis = 4.0 * G * VdotH * NdotL / NdotH;\n            float Fc = pow(1.0 - VdotH, 5.0);\n            A += (1.0 - Fc) * G_Vis;\n            B += Fc * G_Vis;\n        }\n    }\n    return vec2(A, B) / float(NumSamples);\n}\n\nvoid main()\n{\n    out_FragColor = vec4(integrateBrdf(v_textureCoordinates.y, v_textureCoordinates.x), 0.0, 1.0);\n}\n"},212597:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_opaqueDepthTexture;\nuniform sampler2D u_translucentDepthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float opaqueDepth = texture(u_opaqueDepthTexture, v_textureCoordinates).r;\n    float translucentDepth = texture(u_translucentDepthTexture, v_textureCoordinates).r;\n    translucentDepth = czm_branchFreeTernary(translucentDepth > opaqueDepth, 1.0, translucentDepth);\n    out_FragColor = czm_packDepth(translucentDepth);\n}\n"},615954:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/**\n * Compositing for Weighted Blended Order-Independent Transparency. See:\n * - http://jcgt.org/published/0002/02/09/\n * - http://casual-effects.blogspot.com/2014/03/weighted-blended-order-independent.html\n */\n\nuniform sampler2D u_opaque;\nuniform sampler2D u_accumulation;\nuniform sampler2D u_revealage;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 opaque = texture(u_opaque, v_textureCoordinates);\n    vec4 accum = texture(u_accumulation, v_textureCoordinates);\n    float r = texture(u_revealage, v_textureCoordinates).r;\n\n#ifdef MRT\n    vec4 transparent = vec4(accum.rgb / clamp(r, 1e-4, 5e4), accum.a);\n#else\n    vec4 transparent = vec4(accum.rgb / clamp(accum.a, 1e-4, 5e4), r);\n#endif\n\n    out_FragColor = (1.0 - transparent.a) * transparent + transparent.a * opaque;\n\n    if (opaque != czm_backgroundColor)\n    {\n        out_FragColor.a = 1.0;\n    }\n}\n"},635582:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform samplerCube u_radianceMap;\n\nin vec2 v_textureCoordinates;\n\n\nconst float twoSqrtPi = 2.0 * sqrt(czm_pi);\n\n// Coutesy of https://www.ppsloan.org/publications/StupidSH36.pdf\nfloat computeShBasis(int index, vec3 s) {\n    if (index == 0) { // l = 0, m = 0\n        return 1.0 / twoSqrtPi;\n    }\n    \n    if (index == 1) { // l = 1, m = -1\n        return -sqrt(3.0) * s.y / twoSqrtPi;\n    }\n\n    if (index == 2) { // l = 1, m = 0\n        return sqrt(3.0) * s.z / twoSqrtPi;\n    }\n\n    if (index == 3) { // l = 1, m = 1\n        return -sqrt(3.0) * s.x / twoSqrtPi;\n    }\n\n    if (index == 4) { // l = 2, m = -2\n        return sqrt(15.0) * s.y * s.x / twoSqrtPi;\n    }\n\n    if (index == 5) { // l = 2, m = -1\n        return -sqrt(15.0) * s.y * s.z / twoSqrtPi;\n    }\n\n    if (index == 6) { // l = 2, m = 0\n        return sqrt(5.0) * (3.0 * s.z * s.z - 1.0) / 2.0 / twoSqrtPi;\n    }\n\n    if (index == 7) { // l = 2, m = 1\n        return -sqrt(15.0) * s.x * s.z / twoSqrtPi;\n    }\n\n    if (index == 8) { // l = 2, m = 2\n        return sqrt(15.0) * (s.x * s.x - s.y * s.y) / 2.0 / twoSqrtPi;\n    }\n\n    return 0.0;\n}\n\nfloat vdcRadicalInverse(int i)\n{\n    float r;\n    float base = 2.0;\n    float value = 0.0;\n    float invBase = 1.0 / base;\n    float invBi = invBase;\n    for (int x = 0; x < 100; x++)\n    {\n        if (i <= 0)\n        {\n            break;\n        }\n        r = mod(float(i), base);\n        value += r * invBi;\n        invBi *= invBase;\n        i = int(float(i) * invBase);\n    }\n    return value;\n}\n\nvec2 hammersley2D(int i, int N)\n{\n    return vec2(float(i) / float(N), vdcRadicalInverse(i));\n}\n\n// Sample count is relatively low for the sake of performance, but should still be enough to capture directionality needed for third-order harmonics\nconst int samples = 256; \nconst float solidAngle = 1.0 / float(samples);\n\nvoid main() {\n    // Get the current coefficient based on the uv\n   vec2 uv = v_textureCoordinates.xy * 3.0;\n   int coefficientIndex = int(floor(uv.y) * 3.0 + floor(uv.x));\n\n    for (int i = 0; i < samples; ++i) {\n        vec2 xi = hammersley2D(i, samples);\n        float phi = czm_twoPi * xi.x;\n        float cosTheta = 1.0 - 2.0 * sqrt(1.0 - xi.y * xi.y);\n        float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n        vec3 direction = normalize(vec3(sinTheta * cos(phi), cosTheta, sinTheta * sin(phi)));\n\n        // Generate the spherical harmonics basis from the direction\n        float Ylm = computeShBasis(coefficientIndex, direction);\n\n        vec3 lookupDirection = -direction.xyz;\n        lookupDirection.z = -lookupDirection.z;\n\n        vec4 color = czm_textureCube(u_radianceMap, lookupDirection, 0.0);\n\n        // Use the relevant function for this coefficient\n        out_FragColor += Ylm * color * solidAngle * sinTheta;\n    }\n    \n}\n"},198709:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="precision highp float;\n\nin vec2 v_textureCoordinates;\n\nuniform vec3 u_faceDirection; // Current cubemap face\nuniform vec3 u_positionWC;\nuniform mat4 u_enuToFixedFrame;\nuniform vec4 u_brightnessSaturationGammaIntensity;\nuniform vec4 u_groundColor; // alpha component represent albedo\n\nvec4 getCubeMapDirection(vec2 uv, vec3 faceDir) {\n    vec2 scaledUV = uv * 2.0 - 1.0;\n\n    if (faceDir.x != 0.0) {\n        return vec4(faceDir.x,  scaledUV.x * faceDir.x, -scaledUV.y, 0.0);\n    } else if (faceDir.y != 0.0) {\n        return vec4(scaledUV.x, -scaledUV.y * faceDir.y, faceDir.y, 0.0);\n    } else {\n        return vec4(scaledUV.x * faceDir.z, -faceDir.z, -scaledUV.y, 0.0); \n    }\n}\n\nvoid main() {    \n    float height = length(u_positionWC);\n    float atmosphereInnerRadius = u_radiiAndDynamicAtmosphereColor.y;\n    float ellipsoidHeight = max(height - atmosphereInnerRadius, 0.0);\n\n    // Scale the position to ensure the sky color is present, even when underground.\n    vec3 positionWC = u_positionWC / height * (ellipsoidHeight + atmosphereInnerRadius);\n\n    float atmosphereOuterRadius = u_radiiAndDynamicAtmosphereColor.x;\n    float atmosphereHeight = atmosphereOuterRadius - atmosphereInnerRadius;\n\n    vec3 direction = (u_enuToFixedFrame * getCubeMapDirection(v_textureCoordinates, u_faceDirection)).xyz;\n    vec3 normalizedDirection = normalize(direction);\n\n    czm_ray ray = czm_ray(positionWC, normalizedDirection);\n    czm_raySegment intersection = czm_raySphereIntersectionInterval(ray, vec3(0.0), atmosphereInnerRadius);\n    if (!czm_isEmpty(intersection)) {\n        intersection = czm_rayEllipsoidIntersectionInterval(ray, vec3(0.0), czm_ellipsoidInverseRadii);\n    }\n\n    bool onEllipsoid = intersection.start >= 0.0;\n    float rayLength = czm_branchFreeTernary(onEllipsoid, intersection.start, atmosphereOuterRadius);\n\n    // Compute sky color for each position on a sphere at radius centered around the provided position's origin\n    vec3 skyPositionWC = positionWC + normalizedDirection * rayLength;\n\n    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;\n    vec3 lightDirectionWC = normalize(czm_getDynamicAtmosphereLightDirection(skyPositionWC, lightEnum));\n    vec3 mieColor;\n    vec3 rayleighColor;\n    float opacity;\n    czm_computeScattering(\n        ray,\n        rayLength,\n        lightDirectionWC,\n        atmosphereInnerRadius, \n        rayleighColor,\n        mieColor,\n        opacity\n    );\n\n    vec4 atmopshereColor = czm_computeAtmosphereColor(ray, lightDirectionWC, rayleighColor, mieColor, opacity);\n\n#ifdef ATMOSPHERE_COLOR_CORRECT\n    const bool ignoreBlackPixels = true;\n    atmopshereColor.rgb = czm_applyHSBShift(atmopshereColor.rgb, czm_atmosphereHsbShift, ignoreBlackPixels);\n#endif\n\n    vec3 lookupDirection = -normalizedDirection;\n     // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that's a rotation about Z.\n    lookupDirection.x = -lookupDirection.x;\n    lookupDirection = -normalize(czm_temeToPseudoFixed * lookupDirection);\n    lookupDirection.x = -lookupDirection.x;\n\n    // Values outside the atmopshere are rendered as black, when they should be treated as transparent\n    float skyAlpha = clamp((1.0 - ellipsoidHeight / atmosphereHeight) * atmopshereColor.a, 0.0, 1.0);\n    skyAlpha = czm_branchFreeTernary(length(atmopshereColor.rgb) <= czm_epsilon7, 0.0, skyAlpha); // Treat black as transparent\n\n    // Blend starmap with atmopshere scattering\n    float intensity = u_brightnessSaturationGammaIntensity.w;\n    vec4 sceneSkyBoxColor = czm_textureCube(czm_environmentMap, lookupDirection);\n    vec3 skyBackgroundColor = mix(czm_backgroundColor.rgb, sceneSkyBoxColor.rgb, sceneSkyBoxColor.a);\n    vec4 combinedSkyColor = vec4(mix(skyBackgroundColor, atmopshereColor.rgb * intensity, skyAlpha), 1.0);\n\n    // Compute ground color based on amount of reflected light, then blend it with ground atmosphere based on height\n    vec3 up = normalize(positionWC);\n    float occlusion = max(dot(lightDirectionWC, up), 0.05);\n    vec4 groundColor = vec4(u_groundColor.rgb * u_groundColor.a * (vec3(intensity * occlusion) + atmopshereColor.rgb), 1.0);\n    vec4 blendedGroundColor = mix(groundColor, atmopshereColor, clamp(ellipsoidHeight / atmosphereHeight, 0.0, 1.0));\n\n    vec4 color = czm_branchFreeTernary(onEllipsoid, blendedGroundColor, combinedSkyColor);\n\n    float brightness = u_brightnessSaturationGammaIntensity.x;\n    float saturation = u_brightnessSaturationGammaIntensity.y;\n    float gamma = u_brightnessSaturationGammaIntensity.z;\n\n#ifdef ENVIRONMENT_COLOR_CORRECT\n    color.rgb = mix(vec3(0.0), color.rgb, brightness);\n    color.rgb = czm_saturation(color.rgb, saturation);\n#endif\n    color.rgb = pow(color.rgb, vec3(gamma)); // Normally this would be in the ifdef above, but there is a precision issue with the atmopshere scattering transmittance (alpha). Having this line is a workaround for that issue, even when gamma is 1.0.\n    color.rgb = czm_gammaCorrect(color.rgb);\n\n    out_FragColor = color;\n}\n"},722856:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="precision highp float;\n\nin vec3 v_textureCoordinates;\n\nuniform float u_roughness;\nuniform samplerCube u_radianceTexture;\nuniform vec3 u_faceDirection;\n\nfloat vdcRadicalInverse(int i)\n{\n    float r;\n    float base = 2.0;\n    float value = 0.0;\n    float invBase = 1.0 / base;\n    float invBi = invBase;\n    for (int x = 0; x < 100; x++)\n    {\n        if (i <= 0)\n        {\n            break;\n        }\n        r = mod(float(i), base);\n        value += r * invBi;\n        invBi *= invBase;\n        i = int(float(i) * invBase);\n    }\n    return value;\n}\n\nvec2 hammersley2D(int i, int N)\n{\n    return vec2(float(i) / float(N), vdcRadicalInverse(i));\n}\n\nvec3 importanceSampleGGX(vec2 xi, float alphaRoughness, vec3 N)\n{\n    float alphaRoughnessSquared = alphaRoughness * alphaRoughness;\n    float phi = czm_twoPi * xi.x;\n    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (alphaRoughnessSquared - 1.0) * xi.y));\n    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n    vec3 tangentX = normalize(cross(upVector, N));\n    vec3 tangentY = cross(N, tangentX);\n    return tangentX * H.x + tangentY * H.y + N * H.z;\n}\n\n// Sample count is relatively low for the sake of performance, but should still be enough to prevent artifacting in lower roughnesses\nconst int samples = 128;\n\nvoid main() {\n    vec3 normal = u_faceDirection;\n    vec3 V = normalize(v_textureCoordinates);\n    float roughness = u_roughness;\n\n    vec4 color = vec4(0.0);\n    float weight = 0.0;\n    for (int i = 0; i < samples; ++i) {\n            vec2 xi = hammersley2D(i, samples);\n            vec3 H = importanceSampleGGX(xi, roughness, V);\n            vec3 L = 2.0 * dot(V, H) * H - V; // reflected vector\n\n            float NdotL = max(dot(V, L), 0.0);\n            if (NdotL > 0.0) {\n                color += vec4(czm_textureCube(u_radianceTexture, L).rgb, 1.0) * NdotL;\n                weight += NdotL;\n            }\n        }\n    out_FragColor = color / weight;\n}\n"},864248:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\nout vec3 v_textureCoordinates;\n\nuniform vec3 u_faceDirection;\n\nvec3 getCubeMapDirection(vec2 uv, vec3 faceDir) {\n    vec2 scaledUV = uv;\n\n    if (faceDir.x != 0.0) {\n        return vec3(faceDir.x, scaledUV.y, scaledUV.x * faceDir.x);\n    } else if (faceDir.y != 0.0) {\n        return vec3(scaledUV.x, -faceDir.y, -scaledUV.y * faceDir.y);\n    } else {\n        return vec3(scaledUV.x * faceDir.z, scaledUV.y, -faceDir.z); \n    }\n}\n\nvoid main() \n{\n    v_textureCoordinates = getCubeMapDirection(position.xy, u_faceDirection);\n    v_textureCoordinates.y = -v_textureCoordinates.y;\n    v_textureCoordinates.z = -v_textureCoordinates.z;\n    gl_Position = vec4(position, 1.0);\n}\n"},710434:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 positionEC;\n\nvoid main()\n{\n    vec3 position;\n    vec3 direction;\n    if (czm_orthographicIn3D == 1.0)\n    {\n        vec2 uv = (gl_FragCoord.xy -  czm_viewport.xy) / czm_viewport.zw;\n        vec2 minPlane = vec2(czm_frustumPlanes.z, czm_frustumPlanes.y); // left, bottom\n        vec2 maxPlane = vec2(czm_frustumPlanes.w, czm_frustumPlanes.x); // right, top\n        position = vec3(mix(minPlane, maxPlane, uv), 0.0);\n        direction = vec3(0.0, 0.0, -1.0);\n    } \n    else \n    {\n        position = vec3(0.0);\n        direction = normalize(positionEC.xyz);\n    }\n\n    czm_ray ray = czm_ray(position, direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n    if (!czm_isEmpty(intersection))\n    {\n        out_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n    }\n    else\n    {\n        discard;\n    }\n\n    czm_writeLogDepth();\n}\n"},77202:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\n\nout vec4 positionEC;\n\nvoid main()\n{\n    positionEC = czm_modelView * position;\n    gl_Position = czm_projection * positionEC;\n\n    czm_vertexLogDepth();\n}\n"},559352:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform vec3 u_radii;\nuniform vec3 u_oneOverEllipsoidRadiiSquared;\n\nin vec3 v_positionEC;\n\nvec4 computeEllipsoidColor(czm_ray ray, float intersection, float side)\n{\n    vec3 positionEC = czm_pointAlongRay(ray, intersection);\n    vec3 positionMC = (czm_inverseModelView * vec4(positionEC, 1.0)).xyz;\n    vec3 geodeticNormal = normalize(czm_geodeticSurfaceNormal(positionMC, vec3(0.0), u_oneOverEllipsoidRadiiSquared));\n    vec3 sphericalNormal = normalize(positionMC / u_radii);\n    vec3 normalMC = geodeticNormal * side;              // normalized surface normal (always facing the viewer) in model coordinates\n    vec3 normalEC = normalize(czm_normal * normalMC);   // normalized surface normal in eye coordinates\n\n    vec2 st = czm_ellipsoidTextureCoordinates(sphericalNormal);\n    vec3 positionToEyeEC = -positionEC;\n\n    czm_materialInput materialInput;\n    materialInput.s = st.s;\n    materialInput.st = st;\n    materialInput.str = (positionMC + u_radii) / u_radii;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef ONLY_SUN_LIGHTING\n    return czm_private_phong(normalize(positionToEyeEC), material, czm_sunDirectionEC);\n#else\n    return czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n\nvoid main()\n{\n    // PERFORMANCE_TODO: When dynamic branching is available, compute ratio of maximum and minimum radii\n    // in the vertex shader. Only when it is larger than some constant, march along the ray.\n    // Otherwise perform one intersection test which will be the common case.\n\n    // Test if the ray intersects a sphere with the ellipsoid's maximum radius.\n    // For very oblate ellipsoids, using the ellipsoid's radii for an intersection test\n    // may cause false negatives. This will discard fragments before marching the ray forward.\n    float maxRadius = max(u_radii.x, max(u_radii.y, u_radii.z)) * 1.5;\n    vec3 direction = normalize(v_positionEC);\n    vec3 ellipsoidCenter = czm_modelView[3].xyz;\n\n    float t1 = -1.0;\n    float t2 = -1.0;\n\n    float b = -2.0 * dot(direction, ellipsoidCenter);\n    float c = dot(ellipsoidCenter, ellipsoidCenter) - maxRadius * maxRadius;\n\n    float discriminant = b * b - 4.0 * c;\n    if (discriminant >= 0.0) {\n        t1 = (-b - sqrt(discriminant)) * 0.5;\n        t2 = (-b + sqrt(discriminant)) * 0.5;\n    }\n\n    if (t1 < 0.0 && t2 < 0.0) {\n        discard;\n    }\n\n    float t = min(t1, t2);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n\n    // March ray forward to intersection with larger sphere and find\n    czm_ray ray = czm_ray(t * direction, direction);\n\n    vec3 ellipsoid_inverseRadii = vec3(1.0 / u_radii.x, 1.0 / u_radii.y, 1.0 / u_radii.z);\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoidCenter, ellipsoid_inverseRadii);\n\n    if (czm_isEmpty(intersection))\n    {\n        discard;\n    }\n\n    // If the viewer is outside, compute outsideFaceColor, with normals facing outward.\n    vec4 outsideFaceColor = (intersection.start != 0.0) ? computeEllipsoidColor(ray, intersection.start, 1.0) : vec4(0.0);\n\n    // If the viewer either is inside or can see inside, compute insideFaceColor, with normals facing inward.\n    vec4 insideFaceColor = (outsideFaceColor.a < 1.0) ? computeEllipsoidColor(ray, intersection.stop, -1.0) : vec4(0.0);\n\n    out_FragColor = mix(insideFaceColor, outsideFaceColor, outsideFaceColor.a);\n    out_FragColor.a = 1.0 - (1.0 - insideFaceColor.a) * (1.0 - outsideFaceColor.a);\n\n#if (defined(WRITE_DEPTH) && (__VERSION__ == 300 || defined(GL_EXT_frag_depth)))\n    t = (intersection.start != 0.0) ? intersection.start : intersection.stop;\n    vec3 positionEC = czm_pointAlongRay(ray, t);\n    vec4 positionCC = czm_projection * vec4(positionEC, 1.0);\n#ifdef LOG_DEPTH\n    czm_writeLogDepth(1.0 + positionCC.w);\n#else\n    float z = positionCC.z / positionCC.w;\n\n    float n = czm_depthRange.near;\n    float f = czm_depthRange.far;\n\n    gl_FragDepth = (z * (f - n) + f + n) * 0.5;\n#endif\n#endif\n}\n"},437736:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\n\nuniform vec3 u_radii;\n\nout vec3 v_positionEC;\n\nvoid main()\n{\n    // In the vertex data, the cube goes from (-1.0, -1.0, -1.0) to (1.0, 1.0, 1.0) in model coordinates.\n    // Scale to consider the radii.  We could also do this once on the CPU when using the BoxGeometry,\n    // but doing it here allows us to change the radii without rewriting the vertex data, and\n    // allows all ellipsoids to reuse the same vertex data.\n    vec4 p = vec4(u_radii * position, 1.0);\n    \n    vec4 pEC = czm_modelView * p;\n    v_positionEC = pEC.xyz;     // position in eye coordinates\n    gl_Position = czm_projection * pEC;\n    // With multi-frustum, when the ellipsoid primitive is positioned on the intersection of two frustums\n    // and close to terrain, the terrain (writes depth) in the closest frustum can overwrite part of the\n    // ellipsoid (does not write depth) that was rendered in the farther frustum.\n    //\n    // Here, we clamp the depth in the vertex shader to avoid being overwritten; however, this creates\n    // artifacts since some fragments can be alpha blended twice.  This is solved by only rendering\n    // the ellipsoid in the closest frustum to the viewer.\n    gl_Position.z = clamp(gl_Position.z, czm_depthRange.near, czm_depthRange.far);\n\n    czm_vertexLogDepth();\n}\n"},689520:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/**\n * @license\n * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *  * Neither the name of NVIDIA CORPORATION nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// NVIDIA GameWorks Graphics Samples GitHub link: https://github.com/NVIDIAGameWorks/GraphicsSamples\n// Original source (archived): https://archive.org/details/nvidiagame-works-graphics-samples-master\n// Original FXAA 3.11 shader link: https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/master/samples/es3-kepler/FXAA/FXAA3_11.h\n// Shader link in fork: https://github.com/lyntel/GraphicsSamples/blob/3d30817ebeeade64fe6a4fc3aa1fe4265c29b6fd/samples/es3-kepler/FXAA/FXAA3_11.h\n\n// Steps used to integrate into Cesium:\n// * The following defines are set:\n//       #define FXAA_PC 1\n//       #define FXAA_WEBGL_1 1\n//       #define FXAA_GREEN_AS_LUMA 1\n//       #define FXAA_EARLY_EXIT 1\n//       #define FXAA_GLSL_120 1\n// * All other preprocessor directives besides the FXAA_QUALITY__P* directives were removed.\n// * Double underscores are invalid for preprocessor directives so replace them with a single underscore. Replace\n//   /FXAA_QUALITY__P(.*)/g with /FXAA_QUALITY__P$1/.\n// * There are no implicit conversions from ivec* to vec* so replace:\n//       #define FxaaInt2 ivec2\n//           with\n//       #define FxaaInt2 vec2\n// * The texture2DLod function is only available in vertex shaders so replace:\n//       #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n//       #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n//           with\n//       #define FxaaTexTop(t, p) texture(t, p)\n//       #define FxaaTexOff(t, p, o, r) texture(t, p + (o * r))\n// * FXAA_QUALITY_PRESET is prepended in the javascript code. We may want to expose that setting in the future.\n// * The following parameters to FxaaPixelShader are unused and can be removed:\n//       fxaaConsolePosPos\n//       fxaaConsoleRcpFrameOpt\n//       fxaaConsoleRcpFrameOpt2\n//       fxaaConsole360RcpFrameOpt2\n//       fxaaConsoleEdgeSharpness\n//       fxaaConsoleEdgeThreshold\n//       fxaaConsoleEdgeThresholdMi\n//       fxaaConsole360ConstDir\n\n//\n// Choose the quality preset.\n// This needs to be compiled into the shader as it effects code.\n// Best option to include multiple presets is to\n// in each shader define the preset, then include this file.\n//\n// OPTIONS\n// -----------------------------------------------------------------------\n// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n// 39       - no dither, very expensive\n//\n// NOTES\n// -----------------------------------------------------------------------\n// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n// 13 = about same speed as FXAA 3.9 and better than 12\n// 23 = closest to FXAA 3.9 visually and performance wise\n//  _ = the lowest digit is directly related to performance\n// _  = the highest digit is directly related to style\n//\n//#define FXAA_QUALITY_PRESET 12\n\n\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n#define FxaaBool bool\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 vec2\n#define FxaaTex sampler2D\n\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTexTop(t, p) texture(t, p)\n#define FxaaTexOff(t, p, o, r) texture(t, p + (o * r))\n\nFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {___a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n    #define lumaM rgbyM.y\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        return rgbyM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n}\n"},805696:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='uniform vec4 u_initialColor;\n\n#if TEXTURE_UNITS > 0\nuniform sampler2D u_dayTextures[TEXTURE_UNITS];\nuniform vec4 u_dayTextureTranslationAndScale[TEXTURE_UNITS];\nuniform bool u_dayTextureUseWebMercatorT[TEXTURE_UNITS];\n\n#ifdef APPLY_ALPHA\nuniform float u_dayTextureAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_DAY_NIGHT_ALPHA\nuniform float u_dayTextureNightAlpha[TEXTURE_UNITS];\nuniform float u_dayTextureDayAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SPLIT\nuniform float u_dayTextureSplit[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_BRIGHTNESS\nuniform float u_dayTextureBrightness[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_CONTRAST\nuniform float u_dayTextureContrast[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_HUE\nuniform float u_dayTextureHue[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SATURATION\nuniform float u_dayTextureSaturation[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_GAMMA\nuniform float u_dayTextureOneOverGamma[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_IMAGERY_CUTOUT\nuniform vec4 u_dayTextureCutoutRectangles[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_COLOR_TO_ALPHA\nuniform vec4 u_colorsToAlpha[TEXTURE_UNITS];\n#endif\n\nuniform vec4 u_dayTextureTexCoordsRectangle[TEXTURE_UNITS];\n#endif\n\n#if defined(HAS_WATER_MASK) && (defined(SHOW_REFLECTIVE_OCEAN) || defined(APPLY_MATERIAL))\nuniform sampler2D u_waterMask;\nuniform vec4 u_waterMaskTranslationAndScale;\nuniform float u_zoomedOutOceanSpecularIntensity;\n#endif\n\n#ifdef SHOW_OCEAN_WAVES\nuniform sampler2D u_oceanNormalMap;\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\nuniform vec2 u_lightingFadeDistance;\n#endif\n\n#ifdef TILE_LIMIT_RECTANGLE\nuniform vec4 u_cartographicLimitRectangle;\n#endif\n\n#ifdef GROUND_ATMOSPHERE\nuniform vec2 u_nightFadeDistance;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\nuniform highp sampler2D u_clippingPlanes;\nuniform mat4 u_clippingPlanesMatrix;\nuniform vec4 u_clippingPlanesEdgeStyle;\n#endif\n\n#ifdef ENABLE_CLIPPING_POLYGONS\nuniform highp sampler2D u_clippingDistance;\nin vec2 v_clippingPosition;\nflat in int v_regionIndex;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG) && defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\nuniform float u_minimumBrightness;\n#endif\n\n// Based on colorCorrect\n// The colorCorrect flag can only be true when tileProvider.hue/saturation/brightnessShift \n// are nonzero AND when (applyFog || showGroundAtmosphere) in the tile provider\n// - The tileProvider.hue/saturation/brightnessShift are just passed through\n//   from the Globe hue/saturation/brightness, like atmosphereBrightnessShift\n// - The applyFog depends on enableFog, and some tile distance from the viewer\n// - The showGroundAtmosphere is a flag that is passed through from the Globe,\n//   and is true by default when the ellipsoid is WGS84\n#ifdef COLOR_CORRECT\nuniform vec3 u_hsbShift; // Hue, saturation, brightness\n#endif\n\n// Based on highlightFillTile\n// This is set for terrain tiles when they are "fill" tiles, and\n// the terrainProvider.fillHighlightColor was set to a value with\n// nonzero alpha\n#ifdef HIGHLIGHT_FILL_TILE\nuniform vec4 u_fillHighlightColor;\n#endif\n\n// Based on translucent\n// This is set depending on the GlobeTranslucencyState\n#ifdef TRANSLUCENT\nuniform vec4 u_frontFaceAlphaByDistance;\nuniform vec4 u_backFaceAlphaByDistance;\nuniform vec4 u_translucencyRectangle;\n#endif\n\n// Based on showUndergroundColor\n// This is set when GlobeSurfaceTileProvider.isUndergroundVisible \n// returns true, AND the tileProvider.undergroundColor had a value with \n// nonzero alpha, and the tileProvider.undergroundColorAlphaByDistance\n// was in the right range\n#ifdef UNDERGROUND_COLOR\nuniform vec4 u_undergroundColor;\nuniform vec4 u_undergroundColorAlphaByDistance;\n#endif\n\n// Based on enableLighting && hasVertexNormals\n// The enableLighting flag is passed in directly from the Globe.\n// The hasVertexNormals flag is from the tileProvider\n#ifdef ENABLE_VERTEX_LIGHTING\nuniform float u_lambertDiffuseMultiplier;\nuniform float u_vertexShadowDarkness;\n#endif\n\nin vec3 v_positionMC;\nin vec3 v_positionEC;\nin vec3 v_textureCoordinates;\nin vec3 v_normalMC;\nin vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nin float v_height;\nin float v_slope;\nin float v_aspect;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nin float v_distance;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\nin vec3 v_atmosphereRayleighColor;\nin vec3 v_atmosphereMieColor;\nin float v_atmosphereOpacity;\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nfloat interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT) || defined(APPLY_MATERIAL)\nvec4 alphaBlend(vec4 sourceColor, vec4 destinationColor)\n{\n    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);\n}\n#endif\n\n#ifdef TRANSLUCENT\nbool inTranslucencyRectangle()\n{\n    return\n        v_textureCoordinates.x > u_translucencyRectangle.x &&\n        v_textureCoordinates.x < u_translucencyRectangle.z &&\n        v_textureCoordinates.y > u_translucencyRectangle.y &&\n        v_textureCoordinates.y < u_translucencyRectangle.w;\n}\n#endif\n\nvec4 sampleAndBlend(\n    vec4 previousColor,\n    sampler2D textureToSample,\n    vec2 tileTextureCoordinates,\n    vec4 textureCoordinateRectangle,\n    vec4 textureCoordinateTranslationAndScale,\n    float textureAlpha,\n    float textureNightAlpha,\n    float textureDayAlpha,\n    float textureBrightness,\n    float textureContrast,\n    float textureHue,\n    float textureSaturation,\n    float textureOneOverGamma,\n    float split,\n    vec4 colorToAlpha,\n    float nightBlend)\n{\n    // This crazy step stuff sets the alpha to 0.0 if this following condition is true:\n    //    tileTextureCoordinates.s < textureCoordinateRectangle.s ||\n    //    tileTextureCoordinates.s > textureCoordinateRectangle.p ||\n    //    tileTextureCoordinates.t < textureCoordinateRectangle.t ||\n    //    tileTextureCoordinates.t > textureCoordinateRectangle.q\n    // In other words, the alpha is zero if the fragment is outside the rectangle\n    // covered by this texture.  Would an actual \'if\' yield better performance?\n    vec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n    alphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    textureAlpha *= mix(textureDayAlpha, textureNightAlpha, nightBlend);\n#endif\n\n    vec2 translation = textureCoordinateTranslationAndScale.xy;\n    vec2 scale = textureCoordinateTranslationAndScale.zw;\n    vec2 textureCoordinates = tileTextureCoordinates * scale + translation;\n    vec4 value = texture(textureToSample, textureCoordinates);\n    vec3 color = value.rgb;\n    float alpha = value.a;\n\n#ifdef APPLY_COLOR_TO_ALPHA\n    vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);\n    colorDiff.r = czm_maximumComponent(colorDiff);\n    alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);\n#endif\n\n#if !defined(APPLY_GAMMA)\n    vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));\n    color = tempColor.rgb;\n    alpha = tempColor.a;\n#else\n    color = pow(color, vec3(textureOneOverGamma));\n#endif\n\n#ifdef APPLY_SPLIT\n    float splitPosition = czm_splitPosition;\n    // Split to the left\n    if (split < 0.0 && gl_FragCoord.x > splitPosition) {\n       alpha = 0.0;\n    }\n    // Split to the right\n    else if (split > 0.0 && gl_FragCoord.x < splitPosition) {\n       alpha = 0.0;\n    }\n#endif\n\n#ifdef APPLY_BRIGHTNESS\n    color = mix(vec3(0.0), color, textureBrightness);\n#endif\n\n#ifdef APPLY_CONTRAST\n    color = mix(vec3(0.5), color, textureContrast);\n#endif\n\n#ifdef APPLY_HUE\n    color = czm_hue(color, textureHue);\n#endif\n\n#ifdef APPLY_SATURATION\n    color = czm_saturation(color, textureSaturation);\n#endif\n\n    float sourceAlpha = alpha * textureAlpha;\n    float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);\n    outAlpha += sign(outAlpha) - 1.0;\n\n    vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;\n\n    // When rendering imagery for a tile in multiple passes,\n    // some GPU/WebGL implementation combinations will not blend fragments in\n    // additional passes correctly if their computation includes an unmasked\n    // divide-by-zero operation,\n    // even if it\'s not in the output or if the output has alpha zero.\n    //\n    // For example, without sanitization for outAlpha,\n    // this renders without artifacts:\n    //   if (outAlpha == 0.0) { outColor = vec3(0.0); }\n    //\n    // but using czm_branchFreeTernary will cause portions of the tile that are\n    // alpha-zero in the additional pass to render as black instead of blending\n    // with the previous pass:\n    //   outColor = czm_branchFreeTernary(outAlpha == 0.0, vec3(0.0), outColor);\n    //\n    // So instead, sanitize against divide-by-zero,\n    // store this state on the sign of outAlpha, and correct on return.\n\n    return vec4(outColor, max(outAlpha, 0.0));\n}\n\nvec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend);\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue, float fade);\n\nconst float fExposure = 2.0;\n\nvec3 computeEllipsoidPosition()\n{\n    float mpp = czm_metersPerPixel(vec4(0.0, 0.0, -czm_currentFrustum.x, 1.0), 1.0);\n    vec2 xy = gl_FragCoord.xy / czm_viewport.zw * 2.0 - vec2(1.0);\n    xy *= czm_viewport.zw * mpp * 0.5;\n\n    vec3 direction;\n    if (czm_orthographicIn3D == 1.0)\n    {\n        direction = vec3(0.0, 0.0, -1.0);\n    }\n    else\n    {\n        direction = normalize(vec3(xy, -czm_currentFrustum.x));\n    }\n\n    czm_ray ray = czm_ray(vec3(0.0), direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n\n    vec3 ellipsoidPosition = czm_pointAlongRay(ray, intersection.start);\n    return (czm_inverseView * vec4(ellipsoidPosition, 1.0)).xyz;\n}\n\nvoid main()\n{\n#ifdef TILE_LIMIT_RECTANGLE\n    if (v_textureCoordinates.x < u_cartographicLimitRectangle.x || u_cartographicLimitRectangle.z < v_textureCoordinates.x ||\n        v_textureCoordinates.y < u_cartographicLimitRectangle.y || u_cartographicLimitRectangle.w < v_textureCoordinates.y)\n        {\n            discard;\n        }\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    float clipDistance = clip(gl_FragCoord, u_clippingPlanes, u_clippingPlanesMatrix);\n#endif\n\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING) || defined(HDR)\n    vec3 normalMC = czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0));   // normalized surface normal in model coordinates\n    vec3 normalEC = czm_normal3D * normalMC;                                         // normalized surface normal in eye coordinates\n#endif\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    float nightBlend = 1.0 - clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0, 0.0, 1.0);\n#else\n    float nightBlend = 0.0;\n#endif\n\n    // The clamp below works around an apparent bug in Chrome Canary v23.0.1241.0\n    // where the fragment shader sees textures coordinates < 0.0 and > 1.0 for the\n    // fragments on the edges of tiles even though the vertex shader is outputting\n    // coordinates strictly in the 0-1 range.\n    vec4 color = computeDayColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0), nightBlend);\n\n#ifdef SHOW_TILE_BOUNDARIES\n    if (v_textureCoordinates.x < (1.0/256.0) || v_textureCoordinates.x > (255.0/256.0) ||\n        v_textureCoordinates.y < (1.0/256.0) || v_textureCoordinates.y > (255.0/256.0))\n    {\n        color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\n    float cameraDist;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        cameraDist = max(czm_frustumPlanes.x - czm_frustumPlanes.y, czm_frustumPlanes.w - czm_frustumPlanes.z) * 0.5;\n    }\n    else if (czm_sceneMode == czm_sceneModeColumbusView)\n    {\n        cameraDist = -czm_view[3].z;\n    }\n    else\n    {\n        cameraDist = length(czm_view[3]);\n    }\n    float fadeOutDist = u_lightingFadeDistance.x;\n    float fadeInDist = u_lightingFadeDistance.y;\n    if (czm_sceneMode != czm_sceneMode3D) {\n        vec3 radii = czm_ellipsoidRadii;\n        float maxRadii = max(radii.x, max(radii.y, radii.z));\n        fadeOutDist -= maxRadii;\n        fadeInDist -= maxRadii;\n    }\n    float fade = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\n#else\n    float fade = 0.0;\n#endif\n\n#if defined(HAS_WATER_MASK) && (defined(SHOW_REFLECTIVE_OCEAN) || defined(APPLY_MATERIAL))\n    vec2 waterMaskTranslation = u_waterMaskTranslationAndScale.xy;\n    vec2 waterMaskScale = u_waterMaskTranslationAndScale.zw;\n    vec2 waterMaskTextureCoordinates = v_textureCoordinates.xy * waterMaskScale + waterMaskTranslation;\n    waterMaskTextureCoordinates.y = 1.0 - waterMaskTextureCoordinates.y;\n\n    float mask = texture(u_waterMask, waterMaskTextureCoordinates).r;\n\n    #ifdef SHOW_REFLECTIVE_OCEAN\n    if (mask > 0.0)\n    {\n        mat3 enuToEye = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalEC);\n\n        vec2 ellipsoidTextureCoordinates = czm_ellipsoidTextureCoordinates(normalMC);\n        vec2 ellipsoidFlippedTextureCoordinates = czm_ellipsoidTextureCoordinates(normalMC.zyx);\n\n        vec2 textureCoordinates = mix(ellipsoidTextureCoordinates, ellipsoidFlippedTextureCoordinates, czm_morphTime * smoothstep(0.9, 0.95, normalMC.z));\n\n        color = computeWaterColor(v_positionEC, textureCoordinates, enuToEye, color, mask, fade);\n    }\n    #endif\n#endif\n\n#ifdef APPLY_MATERIAL\n    czm_materialInput materialInput;\n    materialInput.st = v_textureCoordinates.st;\n    materialInput.normalEC = normalize(v_normalEC);\n    materialInput.positionToEyeEC = -v_positionEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalize(v_normalEC));\n    materialInput.slope = v_slope;\n    materialInput.height = v_height;\n    materialInput.aspect = v_aspect;\n    #ifdef HAS_WATER_MASK\n        materialInput.waterMask = mask;\n    #endif\n\n    czm_material material = czm_getMaterial(materialInput);\n    vec4 materialColor = vec4(material.diffuse, material.alpha);\n    color = alphaBlend(materialColor, color);\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalize(v_normalEC)) * u_lambertDiffuseMultiplier + u_vertexShadowDarkness, 0.0, 1.0);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#elif defined(ENABLE_DAYNIGHT_SHADING)\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0 + 0.3, 0.0, 1.0);\n    diffuseIntensity = mix(1.0, diffuseIntensity, fade);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#else\n    vec4 finalColor = color;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = u_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = u_clippingPlanesEdgeStyle.a;\n\n    if (clipDistance < clippingPlanesEdgeWidth)\n    {\n        finalColor = clippingPlanesEdgeColor;\n    }\n#endif\n\n#ifdef ENABLE_CLIPPING_POLYGONS\n    vec2 clippingPosition = v_clippingPosition;\n    int regionIndex = v_regionIndex;\n    clipPolygons(u_clippingDistance, CLIPPING_POLYGON_REGIONS_LENGTH, clippingPosition, regionIndex);\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\n    finalColor = vec4(mix(finalColor.rgb, u_fillHighlightColor.rgb, u_fillHighlightColor.a), finalColor.a);\n#endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\n    if (!czm_backFacing())\n    {\n        bool dynamicLighting = false;\n        #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n            dynamicLighting = true;\n        #endif\n\n        vec3 rayleighColor;\n        vec3 mieColor;\n        float opacity;\n\n        vec3 positionWC;\n        vec3 lightDirection;\n\n        // When the camera is far away (camera distance > nightFadeOutDistance), the scattering is computed in the fragment shader.\n        // Otherwise, the scattering is computed in the vertex shader.\n        #ifdef PER_FRAGMENT_GROUND_ATMOSPHERE\n            positionWC = computeEllipsoidPosition();\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            computeAtmosphereScattering(\n                positionWC,\n                lightDirection,\n                rayleighColor,\n                mieColor,\n                opacity\n            );\n        #else\n            positionWC = v_positionMC;\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            rayleighColor = v_atmosphereRayleighColor;\n            mieColor = v_atmosphereMieColor;\n            opacity = v_atmosphereOpacity;\n        #endif\n\n        #ifdef COLOR_CORRECT\n            const bool ignoreBlackPixels = true;\n            rayleighColor = czm_applyHSBShift(rayleighColor, u_hsbShift, ignoreBlackPixels);\n            mieColor = czm_applyHSBShift(mieColor, u_hsbShift, ignoreBlackPixels);\n        #endif\n\n        vec4 groundAtmosphereColor = computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n        // Fog is applied to tiles selected for fog, close to the Earth.\n        #ifdef FOG\n            vec3 fogColor = groundAtmosphereColor.rgb;\n\n            // If there is lighting, apply that to the fog.\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float darken = clamp(dot(normalize(czm_viewerPositionWC), atmosphereLightDirection), u_minimumBrightness, 1.0);\n                fogColor *= darken;\n            #endif\n\n            #ifndef HDR\n                fogColor.rgb = czm_pbrNeutralTonemapping(fogColor.rgb);\n                fogColor.rgb = czm_inverseGamma(fogColor.rgb);\n            #endif\n\n            finalColor = vec4(czm_fog(v_distance, finalColor.rgb, fogColor.rgb, czm_fogVisualDensityScalar), finalColor.a);\n\n        #else\n            // Apply ground atmosphere. This happens when the camera is far away from the earth.\n\n            // The transmittance is based on optical depth i.e. the length of segment of the ray inside the atmosphere.\n            // This value is larger near the "circumference", as it is further away from the camera. We use it to\n            // brighten up that area of the ground atmosphere.\n            const float transmittanceModifier = 0.5;\n            float transmittance = transmittanceModifier + clamp(1.0 - groundAtmosphereColor.a, 0.0, 1.0);\n\n            vec3 finalAtmosphereColor = finalColor.rgb + groundAtmosphereColor.rgb * transmittance;\n\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float fadeInDist = u_nightFadeDistance.x;\n                float fadeOutDist = u_nightFadeDistance.y;\n\n                float sunlitAtmosphereIntensity = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.05, 1.0);\n                float darken = clamp(dot(normalize(positionWC), atmosphereLightDirection), 0.0, 1.0);\n                vec3 darkenendGroundAtmosphereColor = mix(groundAtmosphereColor.rgb, finalAtmosphereColor.rgb, darken);\n\n                finalAtmosphereColor = mix(darkenendGroundAtmosphereColor, finalAtmosphereColor, sunlitAtmosphereIntensity);\n            #endif\n\n            #ifndef HDR\n                finalAtmosphereColor.rgb = vec3(1.0) - exp(-fExposure * finalAtmosphereColor.rgb);\n            #else\n                finalAtmosphereColor.rgb = czm_saturation(finalAtmosphereColor.rgb, 1.6);\n            #endif\n\n            finalColor.rgb = mix(finalColor.rgb, finalAtmosphereColor.rgb, fade);\n        #endif\n    }\n#endif\n\n#ifdef UNDERGROUND_COLOR\n    if (czm_backFacing())\n    {\n        float distanceFromEllipsoid = max(czm_eyeHeight, 0.0);\n        float distance = max(v_distance - distanceFromEllipsoid, 0.0);\n        float blendAmount = interpolateByDistance(u_undergroundColorAlphaByDistance, distance);\n        vec4 undergroundColor = vec4(u_undergroundColor.rgb, u_undergroundColor.a * blendAmount);\n        finalColor = alphaBlend(undergroundColor, finalColor);\n    }\n#endif\n\n#ifdef TRANSLUCENT\n    if (inTranslucencyRectangle())\n    {\n      vec4 alphaByDistance = gl_FrontFacing ? u_frontFaceAlphaByDistance : u_backFaceAlphaByDistance;\n      finalColor.a *= interpolateByDistance(alphaByDistance, v_distance);\n    }\n#endif\n\n    out_FragColor =  finalColor;\n}\n\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n\nfloat waveFade(float edge0, float edge1, float x)\n{\n    float y = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return pow(1.0 - y, 5.0);\n}\n\nfloat linearFade(float edge0, float edge1, float x)\n{\n    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\n\n// Based on water rendering by Jonas Wagner:\n// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog\n\n// low altitude wave settings\nconst float oceanFrequencyLowAltitude = 825000.0;\nconst float oceanAnimationSpeedLowAltitude = 0.004;\nconst float oceanOneOverAmplitudeLowAltitude = 1.0 / 2.0;\nconst float oceanSpecularIntensity = 0.5;\n\n// high altitude wave settings\nconst float oceanFrequencyHighAltitude = 125000.0;\nconst float oceanAnimationSpeedHighAltitude = 0.008;\nconst float oceanOneOverAmplitudeHighAltitude = 1.0 / 2.0;\n\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float maskValue, float fade)\n{\n    vec3 positionToEyeEC = -positionEyeCoordinates;\n    float positionToEyeECLength = length(positionToEyeEC);\n\n    // The double normalize below works around a bug in Firefox on Android devices.\n    vec3 normalizedPositionToEyeEC = normalize(normalize(positionToEyeEC));\n\n    // Fade out the waves as the camera moves far from the surface.\n    float waveIntensity = waveFade(70000.0, 1000000.0, positionToEyeECLength);\n\n#ifdef SHOW_OCEAN_WAVES\n    // high altitude waves\n    float time = czm_frameNumber * oceanAnimationSpeedHighAltitude;\n    vec4 noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyHighAltitude, time, 0.0);\n    vec3 normalTangentSpaceHighAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeHighAltitude);\n\n    // low altitude waves\n    time = czm_frameNumber * oceanAnimationSpeedLowAltitude;\n    noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyLowAltitude, time, 0.0);\n    vec3 normalTangentSpaceLowAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeLowAltitude);\n\n    // blend the 2 wave layers based on distance to surface\n    float highAltitudeFade = linearFade(0.0, 60000.0, positionToEyeECLength);\n    float lowAltitudeFade = 1.0 - linearFade(20000.0, 60000.0, positionToEyeECLength);\n    vec3 normalTangentSpace =\n        (highAltitudeFade * normalTangentSpaceHighAltitude) +\n        (lowAltitudeFade * normalTangentSpaceLowAltitude);\n    normalTangentSpace = normalize(normalTangentSpace);\n\n    // fade out the normal perturbation as we move farther from the water surface\n    normalTangentSpace.xy *= waveIntensity;\n    normalTangentSpace = normalize(normalTangentSpace);\n#else\n    vec3 normalTangentSpace = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 normalEC = enuToEye * normalTangentSpace;\n\n    const vec3 waveHighlightColor = vec3(0.3, 0.45, 0.6);\n\n    // Use diffuse light to highlight the waves\n    float diffuseIntensity = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * maskValue;\n    vec3 diffuseHighlight = waveHighlightColor * diffuseIntensity * (1.0 - fade);\n\n#ifdef SHOW_OCEAN_WAVES\n    // Where diffuse light is low or non-existent, use wave highlights based solely on\n    // the wave bumpiness and no particular light direction.\n    float tsPerturbationRatio = normalTangentSpace.z;\n    vec3 nonDiffuseHighlight = mix(waveHighlightColor * 5.0 * (1.0 - tsPerturbationRatio), vec3(0.0), diffuseIntensity);\n#else\n    vec3 nonDiffuseHighlight = vec3(0.0);\n#endif\n\n    // Add specular highlights in 3D, and in all modes when zoomed in.\n    float specularIntensity = czm_getSpecular(czm_lightDirectionEC, normalizedPositionToEyeEC, normalEC, 10.0);\n    float surfaceReflectance = mix(0.0, mix(u_zoomedOutOceanSpecularIntensity, oceanSpecularIntensity, waveIntensity), maskValue);\n    float specular = specularIntensity * surfaceReflectance;\n\n#ifdef HDR\n    specular *= 1.4;\n\n    float e = 0.2;\n    float d = 3.3;\n    float c = 1.7;\n\n    vec3 color = imageryColor.rgb + (c * (vec3(e) + imageryColor.rgb * d) * (diffuseHighlight + nonDiffuseHighlight + specular));\n#else\n    vec3 color = imageryColor.rgb + diffuseHighlight + nonDiffuseHighlight + specular;\n#endif\n\n    return vec4(color, imageryColor.a);\n}\n\n#endif // #ifdef SHOW_REFLECTIVE_OCEAN\n'},691760:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef QUANTIZATION_BITS12\nin vec4 compressed0;\nin float compressed1;\n#else\nin vec4 position3DAndHeight;\nin vec4 textureCoordAndEncodedNormals;\n#endif\n\n#ifdef GEODETIC_SURFACE_NORMALS\nin vec3 geodeticSurfaceNormal;\n#endif\n\n#ifdef EXAGGERATION\nuniform vec2 u_verticalExaggerationAndRelativeHeight;\n#endif\n\nuniform vec3 u_center3D;\nuniform mat4 u_modifiedModelView;\nuniform mat4 u_modifiedModelViewProjection;\nuniform vec4 u_tileRectangle;\n\n// Uniforms for 2D Mercator projection\nuniform vec2 u_southAndNorthLatitude;\nuniform vec2 u_southMercatorYAndOneOverHeight;\n\nout vec3 v_positionMC;\nout vec3 v_positionEC;\n\nout vec3 v_textureCoordinates;\nout vec3 v_normalMC;\nout vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nout float v_slope;\nout float v_aspect;\nout float v_height;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nout float v_distance;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE)\nout vec3 v_atmosphereRayleighColor;\nout vec3 v_atmosphereMieColor;\nout float v_atmosphereOpacity;\n#endif\n\n#ifdef ENABLE_CLIPPING_POLYGONS\nuniform highp sampler2D u_clippingExtents;\nout vec2 v_clippingPosition;\nflat out int v_regionIndex;\n#endif\n\n// These functions are generated at runtime.\nvec4 getPosition(vec3 position, float height, vec2 textureCoordinates);\nfloat get2DYPositionFraction(vec2 textureCoordinates);\n\nvec4 getPosition3DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return u_modifiedModelViewProjection * vec4(position, 1.0);\n}\n\nfloat get2DMercatorYPositionFraction(vec2 textureCoordinates)\n{\n    // The width of a tile at level 11, in radians and assuming a single root tile, is\n    //   2.0 * czm_pi / pow(2.0, 11.0)\n    // We want to just linearly interpolate the 2D position from the texture coordinates\n    // when we're at this level or higher.  The constant below is the expression\n    // above evaluated and then rounded up at the 4th significant digit.\n    const float maxTileWidth = 0.003068;\n    float positionFraction = textureCoordinates.y;\n    float southLatitude = u_southAndNorthLatitude.x;\n    float northLatitude = u_southAndNorthLatitude.y;\n    if (northLatitude - southLatitude > maxTileWidth)\n    {\n        float southMercatorY = u_southMercatorYAndOneOverHeight.x;\n        float oneOverMercatorHeight = u_southMercatorYAndOneOverHeight.y;\n\n        float currentLatitude = mix(southLatitude, northLatitude, textureCoordinates.y);\n        currentLatitude = clamp(currentLatitude, -czm_webMercatorMaxLatitude, czm_webMercatorMaxLatitude);\n        positionFraction = czm_latitudeToWebMercatorFraction(currentLatitude, southMercatorY, oneOverMercatorHeight);\n    }\n    return positionFraction;\n}\n\nfloat get2DGeographicYPositionFraction(vec2 textureCoordinates)\n{\n    return textureCoordinates.y;\n}\n\nvec4 getPositionPlanarEarth(vec3 position, float height, vec2 textureCoordinates)\n{\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 rtcPosition2D = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    return u_modifiedModelViewProjection * rtcPosition2D;\n}\n\nvec4 getPosition2DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, 0.0, textureCoordinates);\n}\n\nvec4 getPositionColumbusViewMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, height, textureCoordinates);\n}\n\nvec4 getPositionMorphingMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    // We do not do RTC while morphing, so there is potential for jitter.\n    // This is unlikely to be noticeable, though.\n    vec3 position3DWC = position + u_center3D;\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 position2DWC = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    vec4 morphPosition = czm_columbusViewMorph(position2DWC, vec4(position3DWC, 1.0), czm_morphTime);\n    vec4 morphPositionEC = czm_modelView * morphPosition;\n    return czm_projection * morphPositionEC;\n}\n\n#ifdef QUANTIZATION_BITS12\nuniform vec2 u_minMaxHeight;\nuniform mat4 u_scaleAndBias;\n#endif\n\nvoid main()\n{\n#ifdef QUANTIZATION_BITS12\n    vec2 xy = czm_decompressTextureCoordinates(compressed0.x);\n    vec2 zh = czm_decompressTextureCoordinates(compressed0.y);\n    vec3 position = vec3(xy, zh.x);\n    float height = zh.y;\n    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressed0.z);\n\n    height = height * (u_minMaxHeight.y - u_minMaxHeight.x) + u_minMaxHeight.x;\n    position = (u_scaleAndBias * vec4(position, 1.0)).xyz;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)) && defined(INCLUDE_WEB_MERCATOR_Y) || defined(APPLY_MATERIAL)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = compressed1;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = 0.0;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = compressed0.w;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#else\n    // A single float per element\n    vec3 position = position3DAndHeight.xyz;\n    float height = position3DAndHeight.w;\n    vec2 textureCoordinates = textureCoordAndEncodedNormals.xy;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = textureCoordAndEncodedNormals.w;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = textureCoordAndEncodedNormals.z;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = 0.0;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#endif\n\n    vec3 position3DWC = position + u_center3D;\n\n#ifdef GEODETIC_SURFACE_NORMALS\n    vec3 ellipsoidNormal = geodeticSurfaceNormal;\n#else\n    vec3 ellipsoidNormal = normalize(position3DWC);\n#endif\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    float exaggeration = u_verticalExaggerationAndRelativeHeight.x;\n    float relativeHeight = u_verticalExaggerationAndRelativeHeight.y;\n    float newHeight = (height - relativeHeight) * exaggeration + relativeHeight;\n\n    // stop from going through center of earth\n    float minRadius = min(min(czm_ellipsoidRadii.x, czm_ellipsoidRadii.y), czm_ellipsoidRadii.z);\n    newHeight = max(newHeight, -minRadius);\n\n    vec3 offset = ellipsoidNormal * (newHeight - height);\n    position += offset;\n    position3DWC += offset;\n    height = newHeight;\n#endif\n\n    gl_Position = getPosition(position, height, textureCoordinates);\n\n    v_positionEC = (u_modifiedModelView * vec4(position, 1.0)).xyz;\n    v_positionMC = position3DWC;  // position in model coordinates\n\n    v_textureCoordinates = vec3(textureCoordinates, webMercatorT);\n\n#if defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    vec3 normalMC = czm_octDecode(encodedNormal);\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    vec3 projection = dot(normalMC, ellipsoidNormal) * ellipsoidNormal;\n    vec3 rejection = normalMC - projection;\n    normalMC = normalize(projection + rejection * exaggeration);\n#endif\n\n    v_normalMC = normalMC;\n    v_normalEC = czm_normal3D * v_normalMC;\n#endif\n\n#ifdef ENABLE_CLIPPING_POLYGONS\n    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(position3DWC);\n    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);\n    \n    vec2 minDistance = vec2(czm_infinity);\n    v_clippingPosition = vec2(czm_infinity);\n    v_regionIndex = -1;\n\n    for (int regionIndex = 0; regionIndex < CLIPPING_POLYGON_REGIONS_LENGTH; regionIndex++) {\n        vec4 extents = unpackClippingExtents(u_clippingExtents, regionIndex);\n        vec2 rectUv = (sphericalLatLong.yx - extents.yx) * extents.wz;\n\n        vec2 clamped = clamp(rectUv, vec2(0.0), vec2(1.0));\n        vec2 distance = abs(rectUv - clamped) * extents.wz;\n\n        float threshold = 0.01;\n        if (minDistance.x > distance.x || minDistance.y > distance.y) {\n            minDistance = distance;\n            v_clippingPosition = rectUv;\n            if (rectUv.x > threshold && rectUv.y > threshold && rectUv.x < 1.0 - threshold && rectUv.y < 1.0 - threshold) {\n                v_regionIndex = regionIndex;\n            }\n        }\n    }\n#endif\n\n#if defined(FOG) || (defined(GROUND_ATMOSPHERE) && !defined(PER_FRAGMENT_GROUND_ATMOSPHERE))\n\n    bool dynamicLighting = false;\n\n    #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n        dynamicLighting = true;\n    #endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n    vec3 lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(position3DWC));\n\n    computeAtmosphereScattering(\n        position3DWC,\n        lightDirection,\n        v_atmosphereRayleighColor,\n        v_atmosphereMieColor,\n        v_atmosphereOpacity\n    );\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\n    v_distance = length((czm_modelView3D * vec4(position3DWC, 1.0)).xyz);\n#endif\n\n#ifdef APPLY_MATERIAL\n    float northPoleZ = czm_ellipsoidRadii.z;\n    vec3 northPolePositionMC = vec3(0.0, 0.0, northPoleZ);\n    vec3 vectorEastMC = normalize(cross(northPolePositionMC - v_positionMC, ellipsoidNormal));\n    float dotProd = abs(dot(ellipsoidNormal, v_normalMC));\n    v_slope = acos(dotProd);\n    vec3 normalRejected = ellipsoidNormal * dotProd;\n    vec3 normalProjected = v_normalMC - normalRejected;\n    vec3 aspectVector = normalize(normalProjected);\n    v_aspect = acos(dot(aspectVector, vectorEastMC));\n    float determ = dot(cross(vectorEastMC, aspectVector), ellipsoidNormal);\n    v_aspect = czm_branchFreeTernary(determ < 0.0, 2.0 * czm_pi - v_aspect, v_aspect);\n    v_height = height;\n#endif\n}\n"},423603:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity) {\n\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n    \n    float atmosphereInnerRadius = length(positionWC);\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n}\n"},50937:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// robust iterative solution without trig functions\n// https://github.com/0xfaded/ellipse_demo/issues/1\n// https://stackoverflow.com/questions/22959698/distance-from-given-point-to-given-ellipse\n//\n// This version uses only a single iteration for best performance. For fog\n// rendering, the difference is negligible.\nvec2 nearestPointOnEllipseFast(vec2 pos, vec2 radii) {\n    vec2 p = abs(pos);\n    vec2 inverseRadii = 1.0 / radii;\n    vec2 evoluteScale = (radii.x * radii.x - radii.y * radii.y) * vec2(1.0, -1.0) * inverseRadii;\n\n    // We describe the ellipse parametrically: v = radii * vec2(cos(t), sin(t))\n    // but store the cos and sin of t in a vec2 for efficiency.\n    // Initial guess: t = cos(pi/4)\n    vec2 tTrigs = vec2(0.70710678118);\n    vec2 v = radii * tTrigs;\n\n    // Find the evolute of the ellipse (center of curvature) at v.\n    vec2 evolute = evoluteScale * tTrigs * tTrigs * tTrigs;\n    // Find the (approximate) intersection of p - evolute with the ellipsoid.\n    vec2 q = normalize(p - evolute) * length(v - evolute);\n    // Update the estimate of t.\n    tTrigs = (q + evolute) * inverseRadii;\n    tTrigs = normalize(clamp(tTrigs, 0.0, 1.0));\n    v = radii * tTrigs;\n\n    return v * sign(pos);\n}\n\nvec3 computeEllipsoidPositionWC(vec3 positionMC) {\n    // Get the world-space position and project onto a meridian plane of\n    // the ellipsoid\n    vec3 positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;\n\n    vec2 positionEllipse = vec2(length(positionWC.xy), positionWC.z);\n    vec2 nearestPoint = nearestPointOnEllipseFast(positionEllipse, czm_ellipsoidRadii.xz);\n\n    // Reconstruct a 3D point in world space\n    return vec3(nearestPoint.x * normalize(positionWC.xy), nearestPoint.y);\n}\n\nvoid applyFog(inout vec4 color, vec4 groundAtmosphereColor, vec3 lightDirection, float distanceToCamera) {\n\n    vec3 fogColor = groundAtmosphereColor.rgb;\n\n    // If there is dynamic lighting, apply that to the fog.\n    const float NONE = 0.0;\n    if (czm_atmosphereDynamicLighting != NONE) {\n        float darken = clamp(dot(normalize(czm_viewerPositionWC), lightDirection), czm_fogMinimumBrightness, 1.0);\n        fogColor *= darken;\n    }\n\n    // Tonemap if HDR rendering is disabled\n    #ifndef HDR\n        fogColor.rgb = czm_pbrNeutralTonemapping(fogColor.rgb);\n        fogColor.rgb = czm_inverseGamma(fogColor.rgb);\n    #endif\n\n    vec3 withFog = czm_fog(distanceToCamera, color.rgb, fogColor, czm_fogVisualDensityScalar);\n    color = vec4(withFog, color.a);\n}\n\nvoid atmosphereStage(inout vec4 color, in ProcessedAttributes attributes) {\n    vec3 rayleighColor;\n    vec3 mieColor;\n    float opacity;\n\n    vec3 positionWC;\n    vec3 lightDirection;\n\n    // When the camera is in space, compute the position per-fragment for\n    // more accurate ground atmosphere. All other cases will use\n    //\n    // The if condition will be added in https://github.com/CesiumGS/cesium/issues/11717\n    if (false) {\n        positionWC = computeEllipsoidPositionWC(attributes.positionMC);\n        lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC, czm_atmosphereDynamicLighting);\n\n        // The fog color is derived from the ground atmosphere color\n        czm_computeGroundAtmosphereScattering(\n            positionWC,\n            lightDirection,\n            rayleighColor,\n            mieColor,\n            opacity\n        );\n    } else {\n        positionWC = attributes.positionWC;\n        lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC, czm_atmosphereDynamicLighting);\n        rayleighColor = v_atmosphereRayleighColor;\n        mieColor = v_atmosphereMieColor;\n        opacity = v_atmosphereOpacity;\n    }\n\n    //color correct rayleigh and mie colors\n    const bool ignoreBlackPixels = true;\n    rayleighColor = czm_applyHSBShift(rayleighColor, czm_atmosphereHsbShift, ignoreBlackPixels);\n    mieColor = czm_applyHSBShift(mieColor, czm_atmosphereHsbShift, ignoreBlackPixels);\n\n    vec4 groundAtmosphereColor = czm_computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n    if (u_isInFog) {\n        float distanceToCamera = length(attributes.positionEC);\n        applyFog(color, groundAtmosphereColor, lightDirection, distanceToCamera);\n    } else {\n        // Ground atmosphere\n    }\n}\n"},390249:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void atmosphereStage(ProcessedAttributes attributes) {\n    vec3 lightDirection = czm_getDynamicAtmosphereLightDirection(v_positionWC, czm_atmosphereDynamicLighting);\n\n    czm_computeGroundAtmosphereScattering(\n        // This assumes the geometry stage came before this.\n        v_positionWC,\n        lightDirection,\n        v_atmosphereRayleighColor,\n        v_atmosphereMieColor,\n        v_atmosphereOpacity\n    );\n}\n"},759889:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void filterByPassType(vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {   \n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        if(!model_silhouettePass) {\n            discard;\n        }\n        #else\n        discard;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        discard;\n    }\n}\n\nvoid cpuStylingStage(inout czm_modelMaterial material, SelectedFeature feature)\n{\n    vec4 featureColor = feature.color;\n    if (featureColor.a == 0.0)\n    {\n        discard;\n    }\n\n    // If a feature ID vertex attribute is used, the pass type filter is applied in the vertex shader.\n    // So, we only apply in in the fragment shader if the feature ID texture is used.\n    #if defined(HAS_SELECTED_FEATURE_ID_TEXTURE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(featureColor);\n    #endif\n\n    featureColor = czm_gammaCorrect(featureColor);\n\n    // Classification models compute the diffuse differently.\n    #ifdef HAS_CLASSIFICATION\n    material.diffuse = featureColor.rgb * featureColor.a;\n    #else\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(featureColor.rgb, vec3(1.0), highlight);\n    #endif\n    \n    material.alpha *= featureColor.a;\n}\n"},726401:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void filterByPassType(inout vec3 positionMC, vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {\n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        positionMC *= float(model_silhouettePass);\n        #else\n        positionMC *= 0.0;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        positionMC *= 0.0;\n    }\n}\n\nvoid cpuStylingStage(inout vec3 positionMC, inout SelectedFeature feature)\n{\n    float show = ceil(feature.color.a);\n    positionMC *= show;\n\n    #if defined(HAS_SELECTED_FEATURE_ID_ATTRIBUTE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(positionMC, feature.color);\n    #endif\n}\n"},58747:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void customShaderStage(\n    inout czm_modelMaterial material,\n    ProcessedAttributes attributes,\n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass,\n    MetadataStatistics metadataStatistics\n) {\n    // FragmentInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    FragmentInput fsInput;\n    initializeInputStruct(fsInput, attributes);\n    fsInput.featureIds = featureIds;\n    fsInput.metadata = metadata;\n    fsInput.metadataClass = metadataClass;\n    fsInput.metadataStatistics = metadataStatistics;\n    fragmentMain(fsInput, material);\n}\n"},181163:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void customShaderStage(\n    inout czm_modelVertexOutput vsOutput, \n    inout ProcessedAttributes attributes, \n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass,\n    MetadataStatistics metadataStatistics\n) {\n    // VertexInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    VertexInput vsInput;\n    initializeInputStruct(vsInput, attributes);\n    vsInput.featureIds = featureIds;\n    vsInput.metadata = metadata;\n    vsInput.metadataClass = metadataClass;\n    vsInput.metadataStatistics = metadataStatistics;\n    vertexMain(vsInput, vsOutput);\n    attributes.positionMC = vsOutput.positionMC;\n}\n"},625322:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) {\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n}\n"},204410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) \n{\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n  setFeatureIdVaryings();\n}\n"},896077:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void geometryStage(out ProcessedAttributes attributes)\n{\n  attributes.positionMC = v_positionMC;\n  attributes.positionEC = v_positionEC;\n\n  #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE) || defined(COMPUTE_POSITION_WC_ATMOSPHERE)\n  attributes.positionWC = v_positionWC;\n  #endif\n\n  #ifdef HAS_NORMALS\n  // renormalize after interpolation\n  attributes.normalEC = normalize(v_normalEC);\n  #endif\n\n  #ifdef HAS_TANGENTS\n  attributes.tangentEC = normalize(v_tangentEC);\n  #endif\n\n  #ifdef HAS_BITANGENTS\n  attributes.bitangentEC = normalize(v_bitangentEC);\n  #endif\n\n  // Everything else is dynamically generated in GeometryPipelineStage\n  setDynamicVaryings(attributes);\n}\n"},575581:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="vec4 geometryStage(inout ProcessedAttributes attributes, mat4 modelView, mat3 normal)\n{\n    vec4 computedPosition;\n\n    // Compute positions in different coordinate systems\n    vec3 positionMC = attributes.positionMC;\n    v_positionMC = positionMC;\n    v_positionEC = (modelView * vec4(positionMC, 1.0)).xyz;\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    vec3 position2D = attributes.position2D;\n    vec3 positionEC = (u_modelView2D * vec4(position2D, 1.0)).xyz;\n    computedPosition = czm_projection * vec4(positionEC, 1.0);\n    #else\n    computedPosition = czm_projection * vec4(v_positionEC, 1.0);\n    #endif\n\n    // Sometimes the custom shader and/or style needs this\n    #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE) || defined(COMPUTE_POSITION_WC_ATMOSPHERE) || defined(ENABLE_CLIPPING_POLYGONS)\n    // Note that this is a 32-bit position which may result in jitter on small\n    // scales.\n    v_positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;\n    #endif\n\n    #ifdef HAS_NORMALS\n    v_normalEC = normalize(normal * attributes.normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    v_tangentEC = normalize(normal * attributes.tangentMC);\n    #endif\n\n    #ifdef HAS_BITANGENTS\n    v_bitangentEC = normalize(normal * attributes.bitangentMC);\n    #endif\n\n    // All other varyings need to be dynamically generated in\n    // GeometryPipelineStage\n    setDynamicVaryings(attributes);\n\n    return computedPosition;\n}\n"},490129:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef DIFFUSE_IBL\nvec3 sampleDiffuseEnvironment(vec3 cubeDir)\n{\n    #ifdef CUSTOM_SPHERICAL_HARMONICS\n        return czm_sphericalHarmonics(cubeDir, model_sphericalHarmonicCoefficients); \n    #else\n        return czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); \n    #endif\n}\n#endif\n\n#ifdef SPECULAR_IBL\nvec3 sampleSpecularEnvironment(vec3 cubeDir, float roughness)\n{\n    #ifdef CUSTOM_SPECULAR_IBL\n        float lod = roughness * model_specularEnvironmentMapsMaximumLOD;\n        return czm_textureCube(model_specularEnvironmentMaps, cubeDir, lod).rgb;\n    #else\n        float lod = roughness * czm_specularEnvironmentMapsMaximumLOD;\n        return czm_textureCube(czm_specularEnvironmentMaps, cubeDir, lod).rgb;\n    #endif\n}\nvec3 computeSpecularIBL(vec3 cubeDir, float NdotV, vec3 f0, float roughness)\n{\n    // see https://bruop.github.io/ibl/ at Single Scattering Results\n    // Roughness dependent fresnel, from Fdez-Aguera\n    vec3 f90 = max(vec3(1.0 - roughness), f0);\n    vec3 F = fresnelSchlick2(f0, f90, NdotV);\n\n    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;\n    vec3 specularSample = sampleSpecularEnvironment(cubeDir, roughness);\n\n    return specularSample * (F * brdfLut.x + brdfLut.y);\n}\n#endif\n\n#if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\n/**\n * Compute the light contributions from environment maps and spherical harmonic coefficients.\n * See Fdez-Aguera, https://www.jcgt.org/published/0008/01/03/paper.pdf, for explanation\n * of the single- and multi-scattering terms.\n *\n * @param {vec3} viewDirectionEC Unit vector pointing from the fragment to the eye position.\n * @param {vec3} normalEC The surface normal in eye coordinates.\n * @param {czm_modelMaterial} The material properties.\n * @return {vec3} The computed HDR color.\n */\nvec3 textureIBL(vec3 viewDirectionEC, vec3 normalEC, czm_modelMaterial material) {\n    vec3 f0 = material.specular;\n    float roughness = material.roughness;\n    float specularWeight = 1.0;\n    #ifdef USE_SPECULAR\n        specularWeight = material.specularWeight;\n    #endif\n    float NdotV = clamp(dot(normalEC, viewDirectionEC), 0.0, 1.0);\n\n    // see https://bruop.github.io/ibl/ at Single Scattering Results\n    // Roughness dependent fresnel, from Fdez-Aguera\n    vec3 f90 = max(vec3(1.0 - roughness), f0);\n    vec3 singleScatterFresnel = fresnelSchlick2(f0, f90, NdotV);\n\n    vec2 brdfLut = texture(czm_brdfLut, vec2(NdotV, roughness)).rg;\n    vec3 FssEss = specularWeight * (singleScatterFresnel * brdfLut.x + brdfLut.y);\n\n    #ifdef DIFFUSE_IBL\n        vec3 normalMC = normalize(model_iblReferenceFrameMatrix * normalEC);\n        vec3 irradiance = sampleDiffuseEnvironment(normalMC);\n\n        vec3 averageFresnel = f0 + (1.0 - f0) / 21.0;\n        float Ems = specularWeight * (1.0 - brdfLut.x - brdfLut.y);\n        vec3 FmsEms = FssEss * averageFresnel * Ems / (1.0 - averageFresnel * Ems);\n        vec3 dielectricScattering = (1.0 - FssEss - FmsEms) * material.diffuse;\n        vec3 diffuseContribution = irradiance * (FmsEms + dielectricScattering) * model_iblFactor.x;\n    #else\n        vec3 diffuseContribution = vec3(0.0);\n    #endif\n\n    #ifdef USE_ANISOTROPY\n        // Bend normal to account for anisotropic distortion of specular reflection\n        vec3 anisotropyDirection = material.anisotropicB;\n        vec3 anisotropicTangent = cross(anisotropyDirection, viewDirectionEC);\n        vec3 anisotropicNormal = cross(anisotropicTangent, anisotropyDirection);\n        float bendFactor = 1.0 - material.anisotropyStrength * (1.0 - roughness);\n        float bendFactorPow4 = bendFactor * bendFactor * bendFactor * bendFactor;\n        vec3 bentNormal = normalize(mix(anisotropicNormal, normalEC, bendFactorPow4));\n        vec3 reflectEC = reflect(-viewDirectionEC, bentNormal);\n    #else\n        vec3 reflectEC = reflect(-viewDirectionEC, normalEC);\n    #endif\n\n    #ifdef SPECULAR_IBL\n        vec3 reflectMC = normalize(model_iblReferenceFrameMatrix * reflectEC);\n        vec3 radiance = sampleSpecularEnvironment(reflectMC, roughness);\n        vec3 specularContribution = radiance * FssEss * model_iblFactor.y;\n    #else\n        vec3 specularContribution = vec3(0.0);\n    #endif\n\n    return diffuseContribution + specularContribution;\n}\n#endif\n"},75899:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="mat4 getInstancingTransform()\n{\n    mat4 instancingTransform;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform = mat4(\n        a_instancingTransformRow0.x, a_instancingTransformRow1.x, a_instancingTransformRow2.x, 0.0, // Column 1\n        a_instancingTransformRow0.y, a_instancingTransformRow1.y, a_instancingTransformRow2.y, 0.0, // Column 2\n        a_instancingTransformRow0.z, a_instancingTransformRow1.z, a_instancingTransformRow2.z, 0.0, // Column 3\n        a_instancingTransformRow0.w, a_instancingTransformRow1.w, a_instancingTransformRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation = a_instanceTranslation;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation.x, translation.y, translation.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform;\n}\n\n#ifdef USE_2D_INSTANCING\nmat4 getInstancingTransform2D()\n{\n    mat4 instancingTransform2D;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform2D = mat4(\n        a_instancingTransform2DRow0.x, a_instancingTransform2DRow1.x, a_instancingTransform2DRow2.x, 0.0, // Column 1\n        a_instancingTransform2DRow0.y, a_instancingTransform2DRow1.y, a_instancingTransform2DRow2.y, 0.0, // Column 2\n        a_instancingTransform2DRow0.z, a_instancingTransform2DRow1.z, a_instancingTransform2DRow2.z, 0.0, // Column 3\n        a_instancingTransform2DRow0.w, a_instancingTransform2DRow1.w, a_instancingTransform2DRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation2D = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation2D = a_instanceTranslation2D;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform2D = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation2D.x, translation2D.y, translation2D.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform2D;\n}\n#endif\n"},295673:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void instancingStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    \n    mat4 instancingTransform = getInstancingTransform();\n    \n    attributes.positionMC = (instancingTransform * vec4(positionMC, 1.0)).xyz;\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = (instancingTransform * vec4(normalMC, 0.0)).xyz;\n    #endif\n\n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n"},370988:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void legacyInstancingStage(\n    inout ProcessedAttributes attributes,\n    out mat4 instanceModelView,\n    out mat3 instanceModelViewInverseTranspose)\n{\n    vec3 positionMC = attributes.positionMC;\n\n    mat4 instancingTransform = getInstancingTransform();\n \n    mat4 instanceModel = instancingTransform * u_instance_nodeTransform;\n    instanceModelView = u_instance_modifiedModelView;\n    instanceModelViewInverseTranspose = mat3(u_instance_modifiedModelView * instanceModel);\n\n    attributes.positionMC = (instanceModel * vec4(positionMC, 1.0)).xyz;\n    \n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n"},419421:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef USE_IBL_LIGHTING\nvec3 computeIBL(vec3 position, vec3 normal, vec3 lightDirection, vec3 lightColorHdr, czm_modelMaterial material)\n{\n    #if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\n        // Environment maps were provided, use them for IBL\n        vec3 viewDirection = -normalize(position);\n        vec3 iblColor = textureIBL(viewDirection, normal, material);\n        return iblColor;\n    #endif\n    \n    return vec3(0.0);\n}\n#endif\n\n#ifdef USE_CLEARCOAT\nvec3 addClearcoatReflection(vec3 baseLayerColor, vec3 position, vec3 lightDirection, vec3 lightColorHdr, czm_modelMaterial material)\n{\n    vec3 viewDirection = -normalize(position);\n    vec3 halfwayDirection = normalize(viewDirection + lightDirection);\n    vec3 normal = material.clearcoatNormal;\n    float NdotL = clamp(dot(normal, lightDirection), 0.001, 1.0);\n\n    // clearcoatF0 = vec3(pow((ior - 1.0) / (ior + 1.0), 2.0)), but without KHR_materials_ior, ior is a constant 1.5.\n    vec3 f0 = vec3(0.04);\n    vec3 f90 = vec3(1.0);\n    // Note: clearcoat Fresnel computed with dot(n, v) instead of dot(v, h).\n    // This is to make it energy conserving with a simple layering function.\n    float NdotV = clamp(dot(normal, viewDirection), 0.0, 1.0);\n    vec3 F = fresnelSchlick2(f0, f90, NdotV);\n\n    // compute specular reflection from direct lighting\n    float roughness = material.clearcoatRoughness;\n    float alphaRoughness = roughness * roughness;\n    float directStrength = computeDirectSpecularStrength(normal, lightDirection, viewDirection, halfwayDirection, alphaRoughness);\n    vec3 directReflection = F * directStrength * NdotL;\n    vec3 color = lightColorHdr * directReflection;\n\n    #ifdef SPECULAR_IBL\n        // Find the direction in which to sample the environment map\n        vec3 reflectMC = normalize(model_iblReferenceFrameMatrix * reflect(-viewDirection, normal));\n        vec3 iblColor = computeSpecularIBL(reflectMC, NdotV, f0, roughness);\n        color += iblColor * material.occlusion;\n    #endif\n\n    float clearcoatFactor = material.clearcoatFactor;\n    vec3 clearcoatColor = color * clearcoatFactor;\n\n    // Dim base layer based on transmission loss through clearcoat\n    return baseLayerColor * (1.0 - clearcoatFactor * F) + clearcoatColor;\n}\n#endif\n\n#if defined(LIGHTING_PBR) && defined(HAS_NORMALS)\nvec3 computePbrLighting(in czm_modelMaterial material, in vec3 position)\n{\n    #ifdef USE_CUSTOM_LIGHT_COLOR\n        vec3 lightColorHdr = model_lightColorHdr;\n    #else\n        vec3 lightColorHdr = czm_lightColorHdr;\n    #endif\n\n    vec3 viewDirection = -normalize(position);\n    vec3 normal = material.normalEC;\n    vec3 lightDirection = normalize(czm_lightDirectionEC);\n\n    vec3 directLighting = czm_pbrLighting(viewDirection, normal, lightDirection, material);\n    vec3 directColor = lightColorHdr * directLighting;\n\n    // Accumulate colors from base layer\n    vec3 color = directColor + material.emissive;\n    #ifdef USE_IBL_LIGHTING\n        color += computeIBL(position, normal, lightDirection, lightColorHdr, material);\n    #endif\n\n    #ifdef USE_CLEARCOAT\n        color = addClearcoatReflection(color, position, lightDirection, lightColorHdr, material);\n    #endif\n\n    return color;\n}\n#endif\n\n/**\n * Compute the material color under the current lighting conditions.\n * All other material properties are passed through so further stages\n * have access to them.\n *\n * @param {czm_modelMaterial} material The material properties from {@MaterialStageFS}\n * @param {ProcessedAttributes} attributes\n */\nvoid lightingStage(inout czm_modelMaterial material, ProcessedAttributes attributes)\n{\n    #ifdef LIGHTING_PBR\n        #ifdef HAS_NORMALS\n            vec3 color = computePbrLighting(material, attributes.positionEC);\n        #else\n            vec3 color = material.diffuse * material.occlusion + material.emissive;\n        #endif\n        // In HDR mode, the frame buffer is in linear color space. The\n        // post-processing stages (see PostProcessStageCollection) will handle\n        // tonemapping. However, if HDR is not enabled, we must tonemap else large\n        // values may be clamped to 1.0\n        #ifndef HDR\n            color = czm_pbrNeutralTonemapping(color);\n        #endif\n    #else // unlit\n        vec3 color = material.diffuse;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n        // The colors resulting from point cloud styles are adjusted differently.\n        color = czm_gammaCorrect(color);\n    #elif !defined(HDR)\n        // If HDR is not enabled, the frame buffer stores sRGB colors rather than\n        // linear colors so the linear value must be converted.\n        color = czm_linearToSrgb(color);\n    #endif\n\n    material.diffuse = color;\n}\n"},563402:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// If the style color is white, it implies the feature has not been styled.\nbool isDefaultStyleColor(vec3 color)\n{\n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3)));\n}\n\nvec3 blend(vec3 sourceColor, vec3 styleColor, float styleColorBlend)\n{\n    vec3 blendColor = mix(sourceColor, styleColor, styleColorBlend);\n    vec3 color = isDefaultStyleColor(styleColor.rgb) ? sourceColor : blendColor;\n    return color;\n}\n\nvec2 computeTextureTransform(vec2 texCoord, mat3 textureTransform)\n{\n    return vec2(textureTransform * vec3(texCoord, 1.0));\n}\n\n#ifdef HAS_NORMAL_TEXTURE\nvec2 getNormalTexCoords()\n{\n    vec2 texCoord = TEXCOORD_NORMAL;\n    #ifdef HAS_NORMAL_TEXTURE_TRANSFORM\n        texCoord = vec2(u_normalTextureTransform * vec3(texCoord, 1.0));\n    #endif\n    return texCoord;\n}\n#endif\n\n#if defined(HAS_NORMAL_TEXTURE) || defined(HAS_CLEARCOAT_NORMAL_TEXTURE)\nvec3 computeTangent(in vec3 position, in vec2 normalTexCoords)\n{\n    vec2 tex_dx = dFdx(normalTexCoords);\n    vec2 tex_dy = dFdy(normalTexCoords);\n    float determinant = tex_dx.x * tex_dy.y - tex_dy.x * tex_dx.y;\n    vec3 tangent = tex_dy.t * dFdx(position) - tex_dx.t * dFdy(position);\n    return tangent / determinant;\n}\n#endif\n\n#ifdef USE_ANISOTROPY\nstruct NormalInfo {\n    vec3 tangent;\n    vec3 bitangent;\n    vec3 normal;\n    vec3 geometryNormal;\n};\n\nNormalInfo getNormalInfo(ProcessedAttributes attributes)\n{\n    vec3 geometryNormal = attributes.normalEC;\n    #ifdef HAS_NORMAL_TEXTURE\n        vec2 normalTexCoords = getNormalTexCoords();\n    #endif\n\n    #ifdef HAS_BITANGENTS\n        vec3 tangent = attributes.tangentEC;\n        vec3 bitangent = attributes.bitangentEC;\n    #else // Assume HAS_NORMAL_TEXTURE\n        vec3 tangent = computeTangent(attributes.positionEC, normalTexCoords);\n        tangent = normalize(tangent - geometryNormal * dot(geometryNormal, tangent));\n        vec3 bitangent = normalize(cross(geometryNormal, tangent));\n    #endif\n\n    #ifdef HAS_NORMAL_TEXTURE\n        mat3 tbn = mat3(tangent, bitangent, geometryNormal);\n        vec3 normalSample = texture(u_normalTexture, normalTexCoords).rgb;\n        normalSample = 2.0 * normalSample - 1.0;\n        #ifdef HAS_NORMAL_TEXTURE_SCALE\n            normalSample.xy *= u_normalTextureScale;\n        #endif\n        vec3 normal = normalize(tbn * normalSample);\n    #else\n        vec3 normal = geometryNormal;\n    #endif\n\n    #ifdef HAS_DOUBLE_SIDED_MATERIAL\n        if (czm_backFacing()) {\n            tangent *= -1.0;\n            bitangent *= -1.0;\n            normal *= -1.0;\n            geometryNormal *= -1.0;\n        }\n    #endif\n\n    NormalInfo normalInfo;\n    normalInfo.tangent = tangent;\n    normalInfo.bitangent = bitangent;\n    normalInfo.normal = normal;\n    normalInfo.geometryNormal = geometryNormal;\n\n    return normalInfo;\n}\n#endif\n\n#if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)\nvec3 getNormalFromTexture(ProcessedAttributes attributes, vec3 geometryNormal)\n{\n    vec2 normalTexCoords = getNormalTexCoords();\n\n    // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set\n    #ifdef HAS_BITANGENTS\n        vec3 t = attributes.tangentEC;\n        vec3 b = attributes.bitangentEC;\n    #else\n        vec3 t = computeTangent(attributes.positionEC, normalTexCoords);\n        t = normalize(t - geometryNormal * dot(geometryNormal, t));\n        vec3 b = normalize(cross(geometryNormal, t));\n    #endif\n\n    mat3 tbn = mat3(t, b, geometryNormal);\n    vec3 normalSample = texture(u_normalTexture, normalTexCoords).rgb;\n    normalSample = 2.0 * normalSample - 1.0;\n    #ifdef HAS_NORMAL_TEXTURE_SCALE\n        normalSample.xy *= u_normalTextureScale;\n    #endif\n    return normalize(tbn * normalSample);\n}\n#endif\n\n#ifdef HAS_CLEARCOAT_NORMAL_TEXTURE\nvec3 getClearcoatNormalFromTexture(ProcessedAttributes attributes, vec3 geometryNormal)\n{\n    vec2 normalTexCoords = TEXCOORD_CLEARCOAT_NORMAL;\n    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE_TRANSFORM\n        normalTexCoords = vec2(u_clearcoatNormalTextureTransform * vec3(normalTexCoords, 1.0));\n    #endif\n\n    // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set\n    #ifdef HAS_BITANGENTS\n        vec3 t = attributes.tangentEC;\n        vec3 b = attributes.bitangentEC;\n    #else\n        vec3 t = computeTangent(attributes.positionEC, normalTexCoords);\n        t = normalize(t - geometryNormal * dot(geometryNormal, t));\n        vec3 b = normalize(cross(geometryNormal, t));\n    #endif\n\n    mat3 tbn = mat3(t, b, geometryNormal);\n    vec3 normalSample = texture(u_clearcoatNormalTexture, normalTexCoords).rgb;\n    normalSample = 2.0 * normalSample - 1.0;\n    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE_SCALE\n        normalSample.xy *= u_clearcoatNormalTextureScale;\n    #endif\n    return normalize(tbn * normalSample);\n}\n#endif\n\n#ifdef HAS_NORMALS\nvec3 computeNormal(ProcessedAttributes attributes)\n{\n    // Geometry normal. This is already normalized \n    vec3 normal = attributes.normalEC;\n\n    #if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)\n        normal = getNormalFromTexture(attributes, normal);\n    #endif\n\n    #ifdef HAS_DOUBLE_SIDED_MATERIAL\n        if (czm_backFacing()) {\n            normal = -normal;\n        }\n    #endif\n\n    return normal;\n}\n#endif\n\n#ifdef HAS_BASE_COLOR_TEXTURE\nvec4 getBaseColorFromTexture()\n{\n    vec2 baseColorTexCoords = TEXCOORD_BASE_COLOR;\n    #ifdef HAS_BASE_COLOR_TEXTURE_TRANSFORM\n        baseColorTexCoords = computeTextureTransform(baseColorTexCoords, u_baseColorTextureTransform);\n    #endif\n\n    vec4 baseColorWithAlpha = czm_srgbToLinear(texture(u_baseColorTexture, baseColorTexCoords));\n\n    #ifdef HAS_BASE_COLOR_FACTOR\n        baseColorWithAlpha *= u_baseColorFactor;\n    #endif\n\n    return baseColorWithAlpha;\n}\n#endif\n\n#ifdef HAS_EMISSIVE_TEXTURE\nvec3 getEmissiveFromTexture()\n{\n    vec2 emissiveTexCoords = TEXCOORD_EMISSIVE;\n    #ifdef HAS_EMISSIVE_TEXTURE_TRANSFORM\n        emissiveTexCoords = computeTextureTransform(emissiveTexCoords, u_emissiveTextureTransform);\n    #endif\n\n    vec3 emissive = czm_srgbToLinear(texture(u_emissiveTexture, emissiveTexCoords).rgb);\n    #ifdef HAS_EMISSIVE_FACTOR\n        emissive *= u_emissiveFactor;\n    #endif\n\n    return emissive;\n}\n#endif\n\n#if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)\nvoid setSpecularGlossiness(inout czm_modelMaterial material)\n{\n    #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE\n        vec2 specularGlossinessTexCoords = TEXCOORD_SPECULAR_GLOSSINESS;\n        #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE_TRANSFORM\n            specularGlossinessTexCoords = computeTextureTransform(specularGlossinessTexCoords, u_specularGlossinessTextureTransform);\n        #endif\n\n        vec4 specularGlossiness = czm_srgbToLinear(texture(u_specularGlossinessTexture, specularGlossinessTexCoords));\n        vec3 specular = specularGlossiness.rgb;\n        float glossiness = specularGlossiness.a;\n        #ifdef HAS_LEGACY_SPECULAR_FACTOR\n            specular *= u_legacySpecularFactor;\n        #endif\n\n        #ifdef HAS_GLOSSINESS_FACTOR\n            glossiness *= u_glossinessFactor;\n        #endif\n    #else\n        #ifdef HAS_LEGACY_SPECULAR_FACTOR\n            vec3 specular = clamp(u_legacySpecularFactor, vec3(0.0), vec3(1.0));\n        #else\n            vec3 specular = vec3(1.0);\n        #endif\n\n        #ifdef HAS_GLOSSINESS_FACTOR\n            float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);\n        #else\n            float glossiness = 1.0;\n        #endif\n    #endif\n\n    #ifdef HAS_DIFFUSE_TEXTURE\n        vec2 diffuseTexCoords = TEXCOORD_DIFFUSE;\n        #ifdef HAS_DIFFUSE_TEXTURE_TRANSFORM\n            diffuseTexCoords = computeTextureTransform(diffuseTexCoords, u_diffuseTextureTransform);\n        #endif\n\n        vec4 diffuse = czm_srgbToLinear(texture(u_diffuseTexture, diffuseTexCoords));\n        #ifdef HAS_DIFFUSE_FACTOR\n            diffuse *= u_diffuseFactor;\n        #endif\n    #elif defined(HAS_DIFFUSE_FACTOR)\n        vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));\n    #else\n        vec4 diffuse = vec4(1.0);\n    #endif\n\n    material.diffuse = diffuse.rgb * (1.0 - czm_maximumComponent(specular));\n    // the specular glossiness extension's alpha overrides anything set\n    // by the base material.\n    material.alpha = diffuse.a;\n\n    material.specular = specular;\n\n    // glossiness is the opposite of roughness, but easier for artists to use.\n    material.roughness = 1.0 - glossiness;\n}\n#elif defined(LIGHTING_PBR)\nfloat setMetallicRoughness(inout czm_modelMaterial material)\n{\n    #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE\n        vec2 metallicRoughnessTexCoords = TEXCOORD_METALLIC_ROUGHNESS;\n        #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE_TRANSFORM\n            metallicRoughnessTexCoords = computeTextureTransform(metallicRoughnessTexCoords, u_metallicRoughnessTextureTransform);\n        #endif\n\n        vec3 metallicRoughness = texture(u_metallicRoughnessTexture, metallicRoughnessTexCoords).rgb;\n        float metalness = clamp(metallicRoughness.b, 0.0, 1.0);\n        float roughness = clamp(metallicRoughness.g, 0.0, 1.0);\n        #ifdef HAS_METALLIC_FACTOR\n            metalness = clamp(metalness * u_metallicFactor, 0.0, 1.0);\n        #endif\n\n        #ifdef HAS_ROUGHNESS_FACTOR\n            roughness = clamp(roughness * u_roughnessFactor, 0.0, 1.0);\n        #endif\n    #else\n        #ifdef HAS_METALLIC_FACTOR\n            float metalness = clamp(u_metallicFactor, 0.0, 1.0);\n        #else\n            float metalness = 1.0;\n        #endif\n\n        #ifdef HAS_ROUGHNESS_FACTOR\n            float roughness = clamp(u_roughnessFactor, 0.0, 1.0);\n        #else\n            float roughness = 1.0;\n        #endif\n    #endif\n\n    // dielectrics use f0 = 0.04, metals use albedo as f0\n    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);\n    vec3 f0 = mix(REFLECTANCE_DIELECTRIC, material.baseColor.rgb, metalness);\n\n    material.specular = f0;\n\n    // diffuse only applies to dielectrics.\n    material.diffuse = mix(material.baseColor.rgb, vec3(0.0), metalness);\n\n    // This is perceptual roughness. The square of this value is used for direct lighting\n    material.roughness = roughness;\n\n    return metalness;\n}\n#ifdef USE_SPECULAR\nvoid setSpecular(inout czm_modelMaterial material, in float metalness)\n{\n    #ifdef HAS_SPECULAR_TEXTURE\n        vec2 specularTexCoords = TEXCOORD_SPECULAR;\n        #ifdef HAS_SPECULAR_TEXTURE_TRANSFORM\n            specularTexCoords = computeTextureTransform(specularTexCoords, u_specularTextureTransform);\n        #endif\n        float specularWeight = texture(u_specularTexture, specularTexCoords).a;\n        #ifdef HAS_SPECULAR_FACTOR\n            specularWeight *= u_specularFactor;\n        #endif\n    #else\n        #ifdef HAS_SPECULAR_FACTOR\n            float specularWeight = u_specularFactor;\n        #else\n            float specularWeight = 1.0;\n        #endif\n    #endif\n\n    #ifdef HAS_SPECULAR_COLOR_TEXTURE\n        vec2 specularColorTexCoords = TEXCOORD_SPECULAR_COLOR;\n        #ifdef HAS_SPECULAR_COLOR_TEXTURE_TRANSFORM\n            specularColorTexCoords = computeTextureTransform(specularColorTexCoords, u_specularColorTextureTransform);\n        #endif\n        vec3 specularColorSample = texture(u_specularColorTexture, specularColorTexCoords).rgb;\n        vec3 specularColorFactor = czm_srgbToLinear(specularColorSample);\n        #ifdef HAS_SPECULAR_COLOR_FACTOR\n            specularColorFactor *= u_specularColorFactor;\n        #endif\n    #else\n        #ifdef HAS_SPECULAR_COLOR_FACTOR\n            vec3 specularColorFactor = u_specularColorFactor;\n        #else\n            vec3 specularColorFactor = vec3(1.0);\n        #endif\n    #endif\n    material.specularWeight = specularWeight;\n    vec3 f0 = material.specular;\n    vec3 dielectricSpecularF0 = min(f0 * specularColorFactor, vec3(1.0));\n    material.specular = mix(dielectricSpecularF0, material.baseColor.rgb, metalness);\n}\n#endif\n#ifdef USE_ANISOTROPY\nvoid setAnisotropy(inout czm_modelMaterial material, in NormalInfo normalInfo)\n{\n    mat2 rotation = mat2(u_anisotropy.xy, -u_anisotropy.y, u_anisotropy.x);\n    float anisotropyStrength = u_anisotropy.z;\n\n    vec2 direction = vec2(1.0, 0.0);\n    #ifdef HAS_ANISOTROPY_TEXTURE\n        vec2 anisotropyTexCoords = TEXCOORD_ANISOTROPY;\n        #ifdef HAS_ANISOTROPY_TEXTURE_TRANSFORM\n            anisotropyTexCoords = computeTextureTransform(anisotropyTexCoords, u_anisotropyTextureTransform);\n        #endif\n        vec3 anisotropySample = texture(u_anisotropyTexture, anisotropyTexCoords).rgb;\n        direction = anisotropySample.rg * 2.0 - vec2(1.0);\n        anisotropyStrength *= anisotropySample.b;\n    #endif\n\n    direction = rotation * direction;\n    mat3 tbn = mat3(normalInfo.tangent, normalInfo.bitangent, normalInfo.normal);\n    vec3 anisotropicT = tbn * normalize(vec3(direction, 0.0));\n    vec3 anisotropicB = cross(normalInfo.geometryNormal, anisotropicT);\n\n    material.anisotropicT = anisotropicT;\n    material.anisotropicB = anisotropicB;\n    material.anisotropyStrength = anisotropyStrength;\n}\n#endif\n#ifdef USE_CLEARCOAT\nvoid setClearcoat(inout czm_modelMaterial material, in ProcessedAttributes attributes)\n{\n    #ifdef HAS_CLEARCOAT_TEXTURE\n        vec2 clearcoatTexCoords = TEXCOORD_CLEARCOAT;\n        #ifdef HAS_CLEARCOAT_TEXTURE_TRANSFORM\n            clearcoatTexCoords = computeTextureTransform(clearcoatTexCoords, u_clearcoatTextureTransform);\n        #endif\n        float clearcoatFactor = texture(u_clearcoatTexture, clearcoatTexCoords).r;\n        #ifdef HAS_CLEARCOAT_FACTOR\n            clearcoatFactor *= u_clearcoatFactor;\n        #endif\n    #else\n        #ifdef HAS_CLEARCOAT_FACTOR\n            float clearcoatFactor = u_clearcoatFactor;\n        #else\n            // PERFORMANCE_IDEA: this case should turn the whole extension off\n            float clearcoatFactor = 0.0;\n        #endif\n    #endif\n\n    #ifdef HAS_CLEARCOAT_ROUGHNESS_TEXTURE\n        vec2 clearcoatRoughnessTexCoords = TEXCOORD_CLEARCOAT_ROUGHNESS;\n        #ifdef HAS_CLEARCOAT_ROUGHNESS_TEXTURE_TRANSFORM\n            clearcoatRoughnessTexCoords = computeTextureTransform(clearcoatRoughnessTexCoords, u_clearcoatRoughnessTextureTransform);\n        #endif\n        float clearcoatRoughness = texture(u_clearcoatRoughnessTexture, clearcoatRoughnessTexCoords).g;\n        #ifdef HAS_CLEARCOAT_ROUGHNESS_FACTOR\n            clearcoatRoughness *= u_clearcoatRoughnessFactor;\n        #endif\n    #else\n        #ifdef HAS_CLEARCOAT_ROUGHNESS_FACTOR\n            float clearcoatRoughness = u_clearcoatRoughnessFactor;\n        #else\n            float clearcoatRoughness = 0.0;\n        #endif\n    #endif\n\n    material.clearcoatFactor = clearcoatFactor;\n    // This is perceptual roughness. The square of this value is used for direct lighting\n    material.clearcoatRoughness = clearcoatRoughness;\n    #ifdef HAS_CLEARCOAT_NORMAL_TEXTURE\n        material.clearcoatNormal = getClearcoatNormalFromTexture(attributes, attributes.normalEC);\n    #else\n        material.clearcoatNormal = attributes.normalEC;\n    #endif\n}\n#endif\n#endif\n\nvoid materialStage(inout czm_modelMaterial material, ProcessedAttributes attributes, SelectedFeature feature)\n{\n    #ifdef USE_ANISOTROPY\n        NormalInfo normalInfo = getNormalInfo(attributes);\n        material.normalEC = normalInfo.normal;\n    #elif defined(HAS_NORMALS)\n        material.normalEC = computeNormal(attributes);\n    #endif\n\n    vec4 baseColorWithAlpha = vec4(1.0);\n    // Regardless of whether we use PBR, set a base color\n    #ifdef HAS_BASE_COLOR_TEXTURE\n        baseColorWithAlpha = getBaseColorFromTexture();\n    #elif defined(HAS_BASE_COLOR_FACTOR)\n        baseColorWithAlpha = u_baseColorFactor;\n    #endif\n\n    #ifdef HAS_IMAGERY\n    baseColorWithAlpha = blendBaseColorWithImagery(baseColorWithAlpha);\n    #endif // HAS_IMAGERY\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n        baseColorWithAlpha = v_pointCloudColor;\n    #elif defined(HAS_COLOR_0)\n        vec4 color = attributes.color_0;\n        // .pnts files store colors in the sRGB color space\n        #ifdef HAS_SRGB_COLOR\n            color = czm_srgbToLinear(color);\n        #endif\n        baseColorWithAlpha *= color;\n    #endif\n\n    #ifdef USE_CPU_STYLING\n        baseColorWithAlpha.rgb = blend(baseColorWithAlpha.rgb, feature.color.rgb, model_colorBlend);\n    #endif\n    material.baseColor = baseColorWithAlpha;\n    material.diffuse = baseColorWithAlpha.rgb;\n    material.alpha = baseColorWithAlpha.a;\n\n    #ifdef HAS_OCCLUSION_TEXTURE\n        vec2 occlusionTexCoords = TEXCOORD_OCCLUSION;\n        #ifdef HAS_OCCLUSION_TEXTURE_TRANSFORM\n            occlusionTexCoords = computeTextureTransform(occlusionTexCoords, u_occlusionTextureTransform);\n        #endif\n        material.occlusion = texture(u_occlusionTexture, occlusionTexCoords).r;\n    #endif\n\n    #ifdef HAS_EMISSIVE_TEXTURE\n        material.emissive = getEmissiveFromTexture();\n    #elif defined(HAS_EMISSIVE_FACTOR)\n        material.emissive = u_emissiveFactor;\n    #endif\n\n    #if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)\n        setSpecularGlossiness(material);\n    #elif defined(LIGHTING_PBR)\n        float metalness = setMetallicRoughness(material);\n        #ifdef USE_SPECULAR\n            setSpecular(material, metalness);\n        #endif\n        #ifdef USE_ANISOTROPY\n            setAnisotropy(material, normalInfo);\n        #endif\n        #ifdef USE_CLEARCOAT\n            setClearcoat(material, attributes);\n        #endif\n    #endif\n}\n"},143938:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void metadataStage(\n  out Metadata metadata,\n  out MetadataClass metadataClass,\n  out MetadataStatistics metadataStatistics,\n  ProcessedAttributes attributes\n  )\n{\n  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);\n}\n"},801202:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void metadataStage(\n  out Metadata metadata,\n  out MetadataClass metadataClass,\n  out MetadataStatistics metadataStatistics,\n  ProcessedAttributes attributes\n  )\n{\n  initializeMetadata(metadata, metadataClass, metadataStatistics, attributes);\n  setMetadataVaryings();\n}\n"},403139:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#ifdef USE_CLIPPING_PLANES_FLOAT_TEXTURE\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int pixY = clippingPlaneNumber / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneNumber - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 plane = texture(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n#else\n// Handle uint8 clipping texture instead\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2; // clipping planes are two pixels each\n    int pixY = clippingPlaneStartIndex / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneStartIndex - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 oct32 = texture(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture(packedClippingPlanes, vec2(u + pixelWidth, v)));\n    return czm_transformPlane(plane, transform);\n}\n#endif\n\nfloat clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix) {\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float pixelWidth = czm_metersPerPixel(position);\n    \n    #ifdef UNION_CLIPPING_REGIONS\n    float clipAmount; // For union planes, we want to get the min distance. So we set the initial value to the first plane distance in the loop below.\n    #else\n    float clipAmount = 0.0;\n    bool clipped = true;\n    #endif\n\n    for (int i = 0; i < CLIPPING_PLANES_LENGTH; ++i) {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        \n        #ifdef UNION_CLIPPING_REGIONS\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0) {\n            discard;\n        }\n        #else\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n        #endif\n    }\n\n    #ifndef UNION_CLIPPING_REGIONS\n    if (clipped) {\n        discard;\n    }\n    #endif\n    \n    return clipAmount;\n}\n\nvoid modelClippingPlanesStage(inout vec4 color)\n{\n    float clipDistance = clip(gl_FragCoord, model_clippingPlanes, model_clippingPlanesMatrix);\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = model_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = model_clippingPlanesEdgeStyle.a;\n    \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) {\n        color = clippingPlanesEdgeColor;\n    }\n}\n"},521791:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void modelClippingPolygonsStage()\n{\n    vec2 clippingPosition = v_clippingPosition;\n    int regionIndex = v_regionIndex;\n    czm_clipPolygons(model_clippingDistance, CLIPPING_POLYGON_REGIONS_LENGTH, clippingPosition, regionIndex);\n}\n"},212143:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void modelClippingPolygonsStage(ProcessedAttributes attributes)\n{\n    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(v_positionWC);\n    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);\n\n    vec2 minDistance = vec2(czm_infinity);\n    v_regionIndex = -1;\n    v_clippingPosition = vec2(czm_infinity);\n\n    for (int regionIndex = 0; regionIndex < CLIPPING_POLYGON_REGIONS_LENGTH; regionIndex++) {\n        vec4 extents = czm_unpackClippingExtents(model_clippingExtents, regionIndex);\n        vec2 rectUv = (sphericalLatLong.yx - extents.yx) * extents.wz;\n\n        vec2 clamped = clamp(rectUv, vec2(0.0), vec2(1.0));\n        vec2 distance = abs(rectUv - clamped) * extents.wz;\n        \n        if (minDistance.x > distance.x || minDistance.y > distance.y) {\n            minDistance = distance;\n            v_clippingPosition = rectUv;\n        }\n\n        float threshold = 0.01;\n        if (rectUv.x > threshold && rectUv.y > threshold && rectUv.x < 1.0 - threshold && rectUv.y < 1.0 - threshold) {\n            v_regionIndex = regionIndex;\n        }\n    }\n}\n"},325161:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void modelColorStage(inout czm_modelMaterial material)\n{\n    material.diffuse = mix(material.diffuse, model_color.rgb, model_colorBlend);\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(model_color.rgb, vec3(1.0), highlight);\n    material.alpha *= model_color.a;\n}\n"},261126:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="\nprecision highp float;\n\nczm_modelMaterial defaultModelMaterial()\n{\n    czm_modelMaterial material;\n    material.diffuse = vec3(0.0);\n    material.specular = vec3(1.0);\n    material.roughness = 1.0;\n    material.occlusion = 1.0;\n    material.normalEC = vec3(0.0, 0.0, 1.0);\n    material.emissive = vec3(0.0);\n    material.alpha = 1.0;\n    return material;\n}\n\nvec4 handleAlpha(vec3 color, float alpha)\n{\n    #ifdef ALPHA_MODE_MASK\n    if (alpha < u_alphaCutoff) {\n        discard;\n    }\n    #endif\n\n    return vec4(color, alpha);\n}\n\nSelectedFeature selectedFeature;\n\nvoid main()\n{\n    #ifdef HAS_POINT_CLOUD_SHOW_STYLE\n        if (v_pointCloudShow == 0.0)\n        {\n            discard;\n        }\n    #endif\n\n    #ifdef HAS_MODEL_SPLITTER\n    modelSplitterStage();\n    #endif\n\n    czm_modelMaterial material = defaultModelMaterial();\n\n    ProcessedAttributes attributes;\n    geometryStage(attributes);\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    MetadataStatistics metadataStatistics;\n    metadataStage(metadata, metadataClass, metadataStatistics, attributes);\n\n    //========================================================================\n    // When not picking metadata START\n    #ifndef METADATA_PICKING_ENABLED\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    selectedFeatureIdStage(selectedFeature, featureIds);\n    #endif\n\n    #ifndef CUSTOM_SHADER_REPLACE_MATERIAL\n    materialStage(material, attributes, selectedFeature);\n    #endif\n\n    #ifdef HAS_CUSTOM_FRAGMENT_SHADER\n    customShaderStage(material, attributes, featureIds, metadata, metadataClass, metadataStatistics);\n    #endif\n\n    lightingStage(material, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    cpuStylingStage(material, selectedFeature);\n    #endif\n\n    #ifdef HAS_MODEL_COLOR\n    modelColorStage(material);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage(material);\n    #endif\n\n    vec4 color = handleAlpha(material.diffuse, material.alpha);\n\n    // When not picking metadata END\n    //========================================================================\n    #else\n    //========================================================================\n    // When picking metadata START\n\n    vec4 metadataValues = vec4(0.0, 0.0, 0.0, 0.0);\n    metadataPickingStage(metadata, metadataClass, metadataValues);\n    vec4 color = metadataValues;\n\n    #endif\n    // When picking metadata END\n    //========================================================================\n\n    #ifdef HAS_CLIPPING_PLANES\n    modelClippingPlanesStage(color);\n    #endif\n\n    #ifdef ENABLE_CLIPPING_POLYGONS\n    modelClippingPolygonsStage();\n    #endif\n\n    //========================================================================\n    // When not picking metadata START\n    #ifndef METADATA_PICKING_ENABLED\n\n    #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS)\n    silhouetteStage(color);\n    #endif\n\n    #ifdef HAS_ATMOSPHERE\n    atmosphereStage(color, attributes);\n    #endif\n\n    #endif\n    // When not picking metadata END\n    //========================================================================\n\n    out_FragColor = color;\n}\n\n"},221334:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void silhouetteStage(inout vec4 color) {\n    if(model_silhouettePass) {\n        color = czm_gammaCorrect(model_silhouetteColor);\n    }\n}"},980678:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) {\n     #ifdef HAS_NORMALS\n     if(model_silhouettePass) {\n          vec3 normal = normalize(czm_normal3D * attributes.normalMC);\n          normal.x *= czm_projection[0][0];\n          normal.y *= czm_projection[1][1];\n          positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z;\n    }\n    #endif\n}\n"},768601:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void modelSplitterStage()\n{\n    // Don't split when rendering the shadow map, because it is rendered from\n    // the perspective of a totally different camera.\n#ifndef SHADOW_MAP\n    if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n#endif\n}\n"},501782:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="precision highp float;\n\nczm_modelVertexOutput defaultVertexOutput(vec3 positionMC) {\n    czm_modelVertexOutput vsOutput;\n    vsOutput.positionMC = positionMC;\n    vsOutput.pointSize = 1.0;\n    return vsOutput;\n}\n\nvoid main()\n{\n    // Initialize the attributes struct with all\n    // attributes except quantized ones.\n    ProcessedAttributes attributes;\n    initializeAttributes(attributes);\n\n    #ifdef HAS_IMAGERY\n    initializeImageryAttributes();\n    #endif\n\n    // Dequantize the quantized ones and add them to the\n    // attributes struct.\n    #ifdef USE_DEQUANTIZATION\n    dequantizationStage(attributes);\n    #endif\n\n    #ifdef HAS_MORPH_TARGETS\n    morphTargetsStage(attributes);\n    #endif\n\n    #ifdef HAS_SKINNING\n    skinningStage(attributes);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage();\n    #endif\n\n    // Compute the bitangent according to the formula in the glTF spec.\n    // Normal and tangents can be affected by morphing and skinning, so\n    // the bitangent should not be computed until their values are finalized.\n    #ifdef HAS_BITANGENTS\n    attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC);\n    #endif\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    SelectedFeature feature;\n    selectedFeatureIdStage(feature, featureIds);\n    // Handle any show properties that come from the style.\n    cpuStylingStage(attributes.positionMC, feature);\n    #endif\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    // The scene mode 2D pipeline stage and instancing stage add a different\n    // model view matrix to accurately project the model to 2D. However, the\n    // output positions and normals should be transformed by the 3D matrices\n    // to keep the data the same for the fragment shader.\n    mat4 modelView = czm_modelView3D;\n    mat3 normal = czm_normal3D;\n    #else\n    // These are used for individual model projection because they will\n    // automatically change based on the scene mode.\n    mat4 modelView = czm_modelView;\n    mat3 normal = czm_normal;\n    #endif\n\n    // Update the position for this instance in place\n    #ifdef HAS_INSTANCING\n\n        // The legacy instance stage is used when rendering i3dm models that\n        // encode instances transforms in world space, as opposed to glTF models\n        // that use EXT_mesh_gpu_instancing, where instance transforms are encoded\n        // in object space.\n        #ifdef USE_LEGACY_INSTANCING\n        mat4 instanceModelView;\n        mat3 instanceModelViewInverseTranspose;\n\n        legacyInstancingStage(attributes, instanceModelView, instanceModelViewInverseTranspose);\n\n        modelView = instanceModelView;\n        normal = instanceModelViewInverseTranspose;\n        #else\n        instancingStage(attributes);\n        #endif\n\n        #ifdef USE_PICKING\n        v_pickColor = a_pickColor;\n        #endif\n\n    #endif\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    MetadataStatistics metadataStatistics;\n    metadataStage(metadata, metadataClass, metadataStatistics, attributes);\n\n    #ifdef HAS_VERTICAL_EXAGGERATION\n    verticalExaggerationStage(attributes);\n    #endif\n\n    #ifdef HAS_CUSTOM_VERTEX_SHADER\n    czm_modelVertexOutput vsOutput = defaultVertexOutput(attributes.positionMC);\n    customShaderStage(vsOutput, attributes, featureIds, metadata, metadataClass, metadataStatistics);\n    #endif\n\n    // Compute the final position in each coordinate system needed.\n    // This returns the value that will be assigned to gl_Position.\n    vec4 positionClip = geometryStage(attributes, modelView, normal);\n\n    // This must go after the geometry stage as it needs v_positionWC\n    #ifdef HAS_ATMOSPHERE\n    atmosphereStage(attributes);\n    #endif\n\n    #ifdef ENABLE_CLIPPING_POLYGONS\n    modelClippingPolygonsStage(attributes);\n    #endif\n\n    #ifdef HAS_SILHOUETTE\n    silhouetteStage(attributes, positionClip);\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_SHOW_STYLE\n    float show = pointCloudShowStylingStage(attributes, metadata);\n    #else\n    float show = 1.0;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\n    show *= pointCloudBackFaceCullingStage();\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    v_pointCloudColor = pointCloudColorStylingStage(attributes, metadata);\n    #endif\n\n    #ifdef PRIMITIVE_TYPE_POINTS\n        #ifdef HAS_CUSTOM_VERTEX_SHADER\n        gl_PointSize = vsOutput.pointSize;\n        #elif defined(HAS_POINT_CLOUD_POINT_SIZE_STYLE) || defined(HAS_POINT_CLOUD_ATTENUATION)\n        gl_PointSize = pointCloudPointSizeStylingStage(attributes, metadata);\n        #else\n        gl_PointSize = 1.0;\n        #endif\n        \n        gl_PointSize *= show;\n    #endif\n\n    // Important NOT to compute gl_Position = show * positionClip or we hit:\n    // https://github.com/CesiumGS/cesium/issues/11270\n    //\n    // We will discard points with v_pointCloudShow == 0 in the fragment shader.\n    gl_Position = positionClip;\n\n    #ifdef HAS_POINT_CLOUD_SHOW_STYLE\n    v_pointCloudShow = show;\n    #endif\n}\n"},828077:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void morphTargetsStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    attributes.positionMC = getMorphedPosition(positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = getMorphedNormal(normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = getMorphedTangent(tangentMC);\n    #endif\n}"},7562:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="float getPointSizeFromAttenuation(vec3 positionEC) {\n  // Variables are packed into a single vector to minimize gl.uniformXXX() calls\n  float pointSize = model_pointCloudParameters.x;\n  float geometricError = model_pointCloudParameters.y;\n  float depthMultiplier = model_pointCloudParameters.z;\n\n  float depth = -positionEC.z;\n  return min((geometricError / depth) * depthMultiplier, pointSize);\n}\n\n#ifdef HAS_POINT_CLOUD_SHOW_STYLE\nfloat pointCloudShowStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getShowFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_COLOR_STYLE\nvec4 pointCloudColorStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return getColorFromStyle(attributes, metadata, tiles3d_tileset_time);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_POINT_SIZE_STYLE\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getPointSizeFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#elif defined(HAS_POINT_CLOUD_ATTENUATION)\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  return getPointSizeFromAttenuation(v_positionEC);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\nfloat pointCloudBackFaceCullingStage() {\n  #if defined(HAS_NORMALS) && !defined(HAS_DOUBLE_SIDED_MATERIAL)\n  // This needs to be computed in eye coordinates so we can't use attributes.normalMC\n  return step(-v_normalEC.z, 0.0);\n  #else\n  return 1.0;\n  #endif\n}\n#endif\n"},34274:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void primitiveOutlineStage(inout czm_modelMaterial material) {\n    if (!model_showOutline) {\n        return;\n    }\n\n    float outlineX = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r;\n    float outlineY = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r;\n    float outlineZ = \n        texture(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r;\n    float outlineness = max(outlineX, max(outlineY, outlineZ));\n\n    material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness);\n}\n\n"},494098:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void primitiveOutlineStage() {\n    v_outlineCoordinates = a_outlineCoordinates;\n}\n"},443045:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="vec2 computeSt(float featureId)\n{\n    float stepX = model_textureStep.x;\n    float centerX = model_textureStep.y;\n\n    #ifdef MULTILINE_BATCH_TEXTURE\n    float stepY = model_textureStep.z;\n    float centerY = model_textureStep.w;\n\n    float xId = mod(featureId, model_textureDimensions.x); \n    float yId = floor(featureId / model_textureDimensions.x);\n    \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY));\n    #else\n    return vec2(centerX + (featureId * stepX), 0.5);\n    #endif\n}\n\nvoid selectedFeatureIdStage(out SelectedFeature feature, FeatureIds featureIds)\n{   \n    int featureId = featureIds.SELECTED_FEATURE_ID;\n\n\n    if (featureId < model_featuresLength)\n    {\n        vec2 featureSt = computeSt(float(featureId));\n\n        feature.id = featureId;\n        feature.st = featureSt;\n        feature.color = texture(model_batchTexture, featureSt);\n    }\n    // Floating point comparisons can be unreliable in GLSL, so we\n    // increment the feature ID to make sure it's always greater\n    // then the model_featuresLength - a condition we check for in the\n    // pick ID, to avoid sampling the pick texture if the feature ID is\n    // greater than the number of features.\n    else\n    {\n        feature.id = model_featuresLength + 1;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n\n    #ifdef HAS_NULL_FEATURE_ID\n    if (featureId == model_nullFeatureId) {\n        feature.id = featureId;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n    #endif\n}\n"},40640:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void skinningStage(inout ProcessedAttributes attributes) \n{\n    mat4 skinningMatrix = getSkinningMatrix();\n    mat3 skinningMatrixMat3 = mat3(skinningMatrix);\n\n    vec4 positionMC = vec4(attributes.positionMC, 1.0);\n    attributes.positionMC = vec3(skinningMatrix * positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = skinningMatrixMat3 * normalMC;\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = skinningMatrixMat3 * tangentMC;\n    #endif\n}"},323745:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="void verticalExaggerationStage(\n  inout ProcessedAttributes attributes\n) {\n  // Compute the distance from the camera to the local center of curvature.\n  vec4 vertexPositionENU = czm_modelToEnu * vec4(attributes.positionMC, 1.0);\n  vec2 vertexAzimuth = normalize(vertexPositionENU.xy);\n  // Curvature = 1 / radius of curvature.\n  float azimuthalCurvature = dot(vertexAzimuth * vertexAzimuth, czm_eyeEllipsoidCurvature);\n  float eyeToCenter = 1.0 / azimuthalCurvature + czm_eyeHeight;\n\n  // Compute the approximate ellipsoid normal at the vertex position.\n  // Uses a circular approximation for the Earth curvature along the geodesic.\n  vec3 vertexPositionEC = (czm_modelView * vec4(attributes.positionMC, 1.0)).xyz;\n  vec3 centerToVertex = eyeToCenter * czm_eyeEllipsoidNormalEC + vertexPositionEC;\n  vec3 vertexNormal = normalize(centerToVertex);\n\n  // Estimate the (sine of the) angle between the camera direction and the vertex normal\n  float verticalDistance = dot(vertexPositionEC, czm_eyeEllipsoidNormalEC);\n  float horizontalDistance = length(vertexPositionEC - verticalDistance * czm_eyeEllipsoidNormalEC);\n  float sinTheta = horizontalDistance / (eyeToCenter + verticalDistance);\n  bool isSmallAngle = clamp(sinTheta, 0.0, 0.05) == sinTheta;\n\n  // Approximate the change in height above the ellipsoid, from camera to vertex position.\n  float exactVersine = 1.0 - dot(czm_eyeEllipsoidNormalEC, vertexNormal);\n  float smallAngleVersine = 0.5 * sinTheta * sinTheta;\n  float versine = isSmallAngle ? smallAngleVersine : exactVersine;\n  float dHeight = dot(vertexPositionEC, vertexNormal) - eyeToCenter * versine;\n  float vertexHeight = czm_eyeHeight + dHeight;\n\n  // Transform the approximate vertex normal to model coordinates.\n  vec3 vertexNormalMC = (czm_inverseModelView * vec4(vertexNormal, 0.0)).xyz;\n  vertexNormalMC = normalize(vertexNormalMC);\n\n  // Compute the exaggeration and apply it along the approximate vertex normal.\n  float stretch = u_verticalExaggerationAndRelativeHeight.x;\n  float shift = u_verticalExaggerationAndRelativeHeight.y;\n  float exaggeration = (vertexHeight - shift) * (stretch - 1.0);\n  attributes.positionMC += exaggeration * vertexNormalMC;\n}\n"},291848:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 v_textureCoordinates;\n\nuniform int u_polygonsLength;\nuniform int u_extentsLength;\nuniform highp sampler2D u_polygonTexture;\nuniform highp sampler2D u_extentsTexture;\n\nint getPolygonIndex(float dimension, vec2 coord) {\n   vec2 uv = coord.xy * dimension;\n   return int(floor(uv.y) * dimension + floor(uv.x));\n}\n\nvec2 getLookupUv(ivec2 dimensions, int i) {\n    int pixY = i / dimensions.x;\n    int pixX = i - (pixY * dimensions.x);\n    float pixelWidth = 1.0 / float(dimensions.x);\n    float pixelHeight = 1.0 / float(dimensions.y);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    return vec2(u, v);\n}\n\nvec4 getExtents(int i) {\n    return texture(u_extentsTexture, getLookupUv(textureSize(u_extentsTexture, 0), i));\n}\n\nivec2 getPositionsLengthAndExtentsIndex(int i) {\n    vec2 uv = getLookupUv(textureSize(u_polygonTexture, 0), i);\n    vec4 value = texture(u_polygonTexture, uv);\n    return ivec2(int(value.x), int(value.y));\n}\n\nvec2 getPolygonPosition(int i) {\n    vec2 uv = getLookupUv(textureSize(u_polygonTexture, 0), i);\n    return texture(u_polygonTexture, uv).xy;\n}\n\nvec2 getCoordinates(vec2 textureCoordinates, vec4 extents) {\n    float latitude = mix(extents.x, extents.x + 1.0 / extents.z, textureCoordinates.y);\n    float longitude = mix(extents.y, extents.y + 1.0 / extents.w, textureCoordinates.x);\n    return vec2(latitude, longitude);\n}\n\nvoid main() {\n    int lastPolygonIndex = 0;\n    out_FragColor = vec4(1.0);\n\n    // Get the relevant region of the texture\n    float dimension = float(u_extentsLength);\n    if (u_extentsLength > 2) {\n        dimension = ceil(log2(float(u_extentsLength)));\n    }\n    int regionIndex = getPolygonIndex(dimension, v_textureCoordinates);\n\n    for (int polygonIndex = 0; polygonIndex < u_polygonsLength; polygonIndex++) {\n        ivec2 positionsLengthAndExtents = getPositionsLengthAndExtentsIndex(lastPolygonIndex);\n        int positionsLength = positionsLengthAndExtents.x;\n        int polygonExtentsIndex = positionsLengthAndExtents.y;\n        lastPolygonIndex += 1;\n\n         // Only compute signed distance for the relevant part of the atlas\n         if (polygonExtentsIndex == regionIndex) {\n            float clipAmount = czm_infinity;\n            vec4 extents = getExtents(polygonExtentsIndex);\n            vec2 textureOffset = vec2(mod(float(polygonExtentsIndex), dimension), floor(float(polygonExtentsIndex) / dimension)) / dimension;\n            vec2 p = getCoordinates((v_textureCoordinates - textureOffset) * dimension, extents);\n            float s = 1.0;\n\n            // Check each edge for absolute distance\n            for (int i = 0, j = positionsLength - 1; i < positionsLength; j = i, i++) {\n                vec2 a = getPolygonPosition(lastPolygonIndex + i);\n                vec2 b = getPolygonPosition(lastPolygonIndex + j);\n \n                vec2 ab = b - a;\n                vec2 pa = p - a;\n                float t = dot(pa, ab) / dot(ab, ab);\n                t = clamp(t, 0.0, 1.0);\n\n                vec2 pq = pa - t * ab;\n                float d = length(pq);\n\n                // Inside / outside computation to determine sign\n                bvec3 cond = bvec3(p.y >= a.y, \n                            p.y < b.y, \n                            ab.x * pa.y > ab.y * pa.x);\n                if (all(cond) || all(not(cond))) s = -s;\n                if (abs(d) < abs(clipAmount)) {\n                    clipAmount = d;\n                }\n            }\n\n            // Normalize the range to [0,1]\n            vec4 result = (s * vec4(clipAmount * length(extents.zw))) / 2.0 + 0.5;\n            // In the case where we've iterated through multiple polygons, take the minimum\n            out_FragColor = min(out_FragColor, result);\n         }\n\n        lastPolygonIndex += positionsLength;\n    }\n}"},57723:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec3 position2DHigh;\nin vec3 position2DLow;\nin vec3 prevPosition3DHigh;\nin vec3 prevPosition3DLow;\nin vec3 prevPosition2DHigh;\nin vec3 prevPosition2DLow;\nin vec3 nextPosition3DHigh;\nin vec3 nextPosition3DLow;\nin vec3 nextPosition2DHigh;\nin vec3 nextPosition2DLow;\nin vec4 texCoordExpandAndBatchIndex;\n\nout vec2  v_st;\nout float v_width;\nout vec4 v_pickColor;\nout float v_polylineAngle;\n\nvoid main()\n{\n    float texCoord = texCoordExpandAndBatchIndex.x;\n    float expandDir = texCoordExpandAndBatchIndex.y;\n    bool usePrev = texCoordExpandAndBatchIndex.z < 0.0;\n    float batchTableIndex = texCoordExpandAndBatchIndex.w;\n\n    vec2 widthAndShow = batchTable_getWidthAndShow(batchTableIndex);\n    float width = widthAndShow.x + 0.5;\n    float show = widthAndShow.y;\n\n    if (width < 1.0)\n    {\n        show = 0.0;\n    }\n\n    vec4 pickColor = batchTable_getPickColor(batchTableIndex);\n\n    vec4 p, prev, next;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);\n        prev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);\n        next = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);\n        prev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);\n        next = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),\n                czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),\n                czm_morphTime);\n        prev = czm_columbusViewMorph(\n                czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),\n                czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),\n                czm_morphTime);\n        next = czm_columbusViewMorph(\n                czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),\n                czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),\n                czm_morphTime);\n    }\n\n    #ifdef DISTANCE_DISPLAY_CONDITION\n        vec3 centerHigh = batchTable_getCenterHigh(batchTableIndex);\n        vec4 centerLowAndRadius = batchTable_getCenterLowAndRadius(batchTableIndex);\n        vec3 centerLow = centerLowAndRadius.xyz;\n        float radius = centerLowAndRadius.w;\n        vec2 distanceDisplayCondition = batchTable_getDistanceDisplayCondition(batchTableIndex);\n\n        float lengthSq;\n        if (czm_sceneMode == czm_sceneMode2D)\n        {\n            lengthSq = czm_eyeHeight2D.y;\n        }\n        else\n        {\n            vec4 center = czm_translateRelativeToEye(centerHigh.xyz, centerLow.xyz);\n            lengthSq = max(0.0, dot(center.xyz, center.xyz) - radius * radius);\n        }\n\n        float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x;\n        float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y;\n        if (lengthSq < nearSq || lengthSq > farSq)\n        {\n            show = 0.0;\n        }\n    #endif\n\n    float polylineAngle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, polylineAngle);\n    gl_Position = czm_viewportOrthographic * positionWC * show;\n\n    v_st.s = texCoord;\n    v_st.t = czm_writeNonPerspective(clamp(expandDir, 0.0, 1.0), gl_Position.w);\n\n    v_width = width;\n    v_pickColor = pickColor;\n    v_polylineAngle = polylineAngle;\n}\n"},752925:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#else\nuniform float exposure;\n#endif\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    color /= texture(autoExposure, vec2(0.5)).r;\n#else\n    color *= vec3(exposure);\n#endif\n    color = czm_acesTonemapping(color);\n    color = czm_inverseGamma(color);\n\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},249550:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D colorTexture2;\n\nuniform vec2 center;\nuniform float radius;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color0 = texture(colorTexture, v_textureCoordinates);\n    vec4 color1 = texture(colorTexture2, v_textureCoordinates);\n\n    float x = length(gl_FragCoord.xy - center) / radius;\n    float t = smoothstep(0.5, 0.8, x);\n    out_FragColor = mix(color0 + color1, color1, t);\n}\n"},365559:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="precision highp float;\n\nuniform sampler2D randomTexture;\nuniform sampler2D depthTexture;\nuniform float intensity;\nuniform float bias;\nuniform float lengthCap;\nuniform int stepCount;\nuniform int directionCount;\n\nvec4 pixelToEye(vec2 screenCoordinate)\n{\n    vec2 uv = screenCoordinate / czm_viewport.zw;\n    float depth = czm_readDepth(depthTexture, uv);\n    vec2 xy = 2.0 * uv - vec2(1.0);\n    vec4 posEC = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posEC = posEC / posEC.w;\n    // Avoid numerical error at far plane\n    if (depth >= 1.0) {\n        posEC.z = czm_currentFrustum.y;\n    }\n    return posEC;\n}\n\n// Reconstruct surface normal in eye coordinates, avoiding edges\nvec3 getNormalXEdge(vec3 positionEC)\n{\n    // Find the 3D surface positions at adjacent screen pixels\n    vec2 centerCoord = gl_FragCoord.xy;\n    vec3 positionLeft = pixelToEye(centerCoord + vec2(-1.0, 0.0)).xyz;\n    vec3 positionRight = pixelToEye(centerCoord + vec2(1.0, 0.0)).xyz;\n    vec3 positionUp = pixelToEye(centerCoord + vec2(0.0, 1.0)).xyz;\n    vec3 positionDown = pixelToEye(centerCoord + vec2(0.0, -1.0)).xyz;\n\n    // Compute potential tangent vectors\n    vec3 dx0 = positionEC - positionLeft;\n    vec3 dx1 = positionRight - positionEC;\n    vec3 dy0 = positionEC - positionDown;\n    vec3 dy1 = positionUp - positionEC;\n\n    // The shorter tangent is more likely to be on the same surface\n    vec3 dx = length(dx0) < length(dx1) ? dx0 : dx1;\n    vec3 dy = length(dy0) < length(dy1) ? dy0 : dy1;\n\n    return normalize(cross(dx, dy));\n}\n\nconst float sqrtTwoPi = sqrt(czm_twoPi);\n\nfloat gaussian(float x, float standardDeviation) {\n    float argument = x / standardDeviation;\n    return exp(-0.5 * argument * argument) / (sqrtTwoPi * standardDeviation);\n}\n\nvoid main(void)\n{\n    vec4 positionEC = pixelToEye(gl_FragCoord.xy);\n\n    // Exit if we are too close to the back of the frustum, where the depth value is invalid.\n    float maxValidDepth = czm_currentFrustum.y - lengthCap;\n    if (-positionEC.z > maxValidDepth)\n    {\n        out_FragColor = vec4(1.0);\n        return;\n    }\n\n    vec3 normalEC = getNormalXEdge(positionEC.xyz);\n    float gaussianVariance = lengthCap * sqrt(-positionEC.z);\n    // Choose a step length such that the marching stops just before 3 * variance.\n    float stepLength = 3.0 * gaussianVariance / (float(stepCount) + 1.0);\n    float metersPerPixel = czm_metersPerPixel(positionEC, 1.0);\n    // Minimum step is 1 pixel to avoid double sampling\n    float pixelsPerStep = max(stepLength / metersPerPixel, 1.0);\n    stepLength = pixelsPerStep * metersPerPixel;\n\n    float angleStepScale = 1.0 / float(directionCount);\n    float angleStep = angleStepScale * czm_twoPi;\n    float cosStep = cos(angleStep);\n    float sinStep = sin(angleStep);\n    mat2 rotateStep = mat2(cosStep, sinStep, -sinStep, cosStep);\n\n    // Initial sampling direction (different for each pixel)\n    const float randomTextureSize = 255.0;\n    vec2 randomTexCoord = fract(gl_FragCoord.xy / randomTextureSize);\n    float randomVal = texture(randomTexture, randomTexCoord).x;\n    vec2 sampleDirection = vec2(cos(angleStep * randomVal), sin(angleStep * randomVal));\n\n    float ao = 0.0;\n    // Loop over sampling directions\n#if __VERSION__ == 300\n    for (int i = 0; i < directionCount; i++)\n    {\n#else\n    for (int i = 0; i < 16; i++)\n    {\n        if (i >= directionCount) {\n            break;\n        }\n#endif\n        sampleDirection = rotateStep * sampleDirection;\n\n        float localAO = 0.0;\n        vec2 radialStep = pixelsPerStep * sampleDirection;\n\n#if __VERSION__ == 300\n        for (int j = 0; j < stepCount; j++)\n        {\n#else\n        for (int j = 0; j < 64; j++)\n        {\n            if (j >= stepCount) {\n                break;\n            }\n#endif\n            // Step along sampling direction, away from output pixel\n            vec2 samplePixel = floor(gl_FragCoord.xy + float(j + 1) * radialStep) + vec2(0.5);\n\n            // Exit if we stepped off the screen\n            if (clamp(samplePixel, vec2(0.0), czm_viewport.zw) != samplePixel) {\n                break;\n            }\n\n            // Compute step vector from output point to sampled point\n            vec4 samplePositionEC = pixelToEye(samplePixel);\n            vec3 stepVector = samplePositionEC.xyz - positionEC.xyz;\n\n            // Estimate the angle from the surface normal.\n            float dotVal = clamp(dot(normalEC, normalize(stepVector)), 0.0, 1.0);\n            dotVal = czm_branchFreeTernary(dotVal > bias, dotVal, 0.0);\n            dotVal = czm_branchFreeTernary(-samplePositionEC.z <= maxValidDepth, dotVal, 0.0);\n\n            // Weight contribution based on the distance from the output point\n            float sampleDistance = length(stepVector);\n            float weight = gaussian(sampleDistance, gaussianVariance);\n            localAO += weight * dotVal;\n        }\n        ao += localAO;\n    }\n\n    ao *= angleStepScale * stepLength;\n    ao = 1.0 - clamp(ao, 0.0, 1.0);\n    ao = pow(ao, intensity);\n    out_FragColor = vec4(vec3(ao), 1.0);\n}\n"},427139:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D ambientOcclusionTexture;\nuniform bool ambientOcclusionOnly;\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    vec4 ao = texture(ambientOcclusionTexture, v_textureCoordinates);\n    out_FragColor = ambientOcclusionOnly ? ao : ao * color;\n}\n"},844644:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform float gradations;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        out_FragColor = vec4(rgb, 1.0);\n        return;\n    }\n#endif\n    float luminance = czm_luminance(rgb);\n    float darkness = luminance * gradations;\n    darkness = (darkness - fract(darkness)) / gradations;\n    out_FragColor = vec4(vec3(darkness), 1.0);\n}\n"},638943:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D bloomTexture;\nuniform bool glowOnly;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        out_FragColor = color;\n        return;\n    }\n#endif\n\n    vec4 bloom = texture(bloomTexture, v_textureCoordinates);\n    out_FragColor = glowOnly ? bloom : bloom + color;\n}\n"},732156:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='uniform sampler2D colorTexture;\n\nuniform float avgLuminance;\nuniform float threshold;\nuniform float offset;\n\nin vec2 v_textureCoordinates;\n\nfloat key(float avg)\n{\n    float guess = 1.5 - (1.5 / (avg * 0.1 + 1.0));\n    return max(0.0, guess) + 0.1;\n}\n\n// See section 9. "The bright-pass filter" of Realtime HDR Rendering\n// http://www.cg.tuwien.ac.at/research/publications/2007/Luksch_2007_RHR/Luksch_2007_RHR-RealtimeHDR%20.pdf\n\nvoid main()\n{\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    vec3 xyz = czm_RGBToXYZ(color.rgb);\n    float luminance = xyz.r;\n\n    float scaledLum = key(avgLuminance) * luminance / avgLuminance;\n    float brightLum = max(scaledLum - threshold, 0.0);\n    float brightness = brightLum / (offset + brightLum);\n\n    xyz.r = brightness;\n    out_FragColor = vec4(czm_XYZToRGB(xyz), 1.0);\n}\n'},377126:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform float brightness;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n    vec3 target = vec3(0.0);\n    out_FragColor = vec4(mix(target, rgb, brightness), 1.0);\n}\n"},279291:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\n#ifdef DEBUG_SHOW_DEPTH\nuniform sampler2D u_packedTranslucentDepth;\n#endif\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n#ifdef DEBUG_SHOW_DEPTH\n    if (v_textureCoordinates.x < 0.5)\n    {\n        out_FragColor.rgb = vec3(czm_unpackDepth(texture(u_packedTranslucentDepth, v_textureCoordinates)));\n        out_FragColor.a = 1.0;\n    }\n#else\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n\n#ifdef PICK\n    if (color == vec4(0.0))\n    {\n        discard;\n    }\n#else\n    // Reverse premultiplication process to get the correct composited result of the classification primitives\n    color.rgb /= color.a;\n#endif\n    out_FragColor = color;\n#endif\n}\n"},547146:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform float contrast;\nuniform float brightness;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 sceneColor = texture(colorTexture, v_textureCoordinates).xyz;\n    sceneColor = czm_RGBToHSB(sceneColor);\n    sceneColor.z += brightness;\n    sceneColor = czm_HSBToRGB(sceneColor);\n\n    float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));\n    sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);\n    out_FragColor = vec4(sceneColor, 1.0);\n}\n"},934993:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D blurTexture;\nuniform sampler2D depthTexture;\nuniform float focalDistance;\n\nin vec2 v_textureCoordinates;\n\nvec4 toEye(vec2 uv, float depth)\n{\n   vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\n\nfloat computeDepthBlur(float depth)\n{\n    float f;\n    if (depth < focalDistance)\n    {\n        f = (focalDistance - depth) / (focalDistance - czm_currentFrustum.x);\n    }\n    else\n    {\n        f = (depth - focalDistance) / (czm_currentFrustum.y - focalDistance);\n        f = pow(f, 0.1);\n    }\n    f *= f;\n    f = clamp(f, 0.0, 1.0);\n    return pow(f, 0.5);\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = toEye(v_textureCoordinates, depth);\n    float d = computeDepthBlur(-posInCamera.z);\n    out_FragColor = mix(texture(colorTexture, v_textureCoordinates), texture(blurTexture, v_textureCoordinates), d);\n}\n"},712957:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    out_FragColor = vec4(vec3(depth), 1.0);\n}\n"},388241:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D depthTexture;\nuniform float length;\nuniform vec4 color;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float directions[3];\n    directions[0] = -1.0;\n    directions[1] = 0.0;\n    directions[2] = 1.0;\n\n    float scalars[3];\n    scalars[0] = 3.0;\n    scalars[1] = 10.0;\n    scalars[2] = 3.0;\n\n    float padx = czm_pixelRatio / czm_viewport.z;\n    float pady = czm_pixelRatio / czm_viewport.w;\n\n#ifdef CZM_SELECTED_FEATURE\n    bool selected = false;\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        selected = selected || czm_selected(vec2(-padx, dir * pady));\n        selected = selected || czm_selected(vec2(padx, dir * pady));\n        selected = selected || czm_selected(vec2(dir * padx, -pady));\n        selected = selected || czm_selected(vec2(dir * padx, pady));\n        if (selected)\n        {\n            break;\n        }\n    }\n    if (!selected)\n    {\n        out_FragColor = vec4(color.rgb, 0.0);\n        return;\n    }\n#endif\n\n    float horizEdge = 0.0;\n    float vertEdge = 0.0;\n\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        float scale = scalars[i];\n\n        horizEdge -= texture(depthTexture, v_textureCoordinates + vec2(-padx, dir * pady)).x * scale;\n        horizEdge += texture(depthTexture, v_textureCoordinates + vec2(padx, dir * pady)).x * scale;\n\n        vertEdge -= texture(depthTexture, v_textureCoordinates + vec2(dir * padx, -pady)).x * scale;\n        vertEdge += texture(depthTexture, v_textureCoordinates + vec2(dir * padx, pady)).x * scale;\n    }\n\n    float len = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\n    out_FragColor = vec4(color.rgb, len > length ? color.a : 0.0);\n}\n"},780953:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 v_textureCoordinates;\n\nuniform sampler2D colorTexture;\n\nconst float fxaaQualitySubpix = 0.5;\nconst float fxaaQualityEdgeThreshold = 0.125;\nconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\nvoid main()\n{\n    vec2 fxaaQualityRcpFrame = vec2(1.0) / czm_viewport.zw;\n    vec4 color = FxaaPixelShader(\n        v_textureCoordinates,\n        colorTexture,\n        fxaaQualityRcpFrame,\n        fxaaQualitySubpix,\n        fxaaQualityEdgeThreshold,\n        fxaaQualityEdgeThresholdMin);\n    float alpha = texture(colorTexture, v_textureCoordinates).a;\n    out_FragColor = vec4(color.rgb, alpha);\n}\n"},347961:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#else\nuniform float exposure;\n#endif\n\n// See slides 142 and 143:\n//     http://www.gdcvault.com/play/1012459/Uncharted_2__HDR_Lighting\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#else\n    color *= vec3(exposure);\n#endif\n\n\tconst float A = 0.22; // shoulder strength\n\tconst float B = 0.30; // linear strength\n\tconst float C = 0.10; // linear angle\n\tconst float D = 0.20; // toe strength\n\tconst float E = 0.01; // toe numerator\n\tconst float F = 0.30; // toe denominator\n\n\tconst float white = 11.2; // linear white point value\n\n\tvec3 c = ((color * (A * color + C * B) + D * E) / (color * ( A * color + B) + D * F)) - E / F;\n\tfloat w = ((white * (A * white + C * B) + D * E) / (white * ( A * white + B) + D * F)) - E / F;\n\n\tc = czm_inverseGamma(c / w);\n\tout_FragColor = vec4(c, fragmentColor.a);\n}\n"},602142:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#define SAMPLES 8\n\nuniform float delta;\nuniform float sigma;\nuniform float direction; // 0.0 for x direction, 1.0 for y direction\n\nuniform sampler2D colorTexture;\n\n#ifdef USE_STEP_SIZE\nuniform float stepSize;\n#else\nuniform vec2 step;\n#endif\n\nin vec2 v_textureCoordinates;\n\n//  Incremental Computation of the Gaussian:\n//  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch40.html\n\nvoid main()\n{\n    vec2 st = v_textureCoordinates;\n    vec2 dir = vec2(1.0 - direction, direction);\n\n#ifdef USE_STEP_SIZE\n    vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));\n#else\n    vec2 step = step;\n#endif\n\n    vec3 g;\n    g.x = 1.0 / (sqrt(czm_twoPi) * sigma);\n    g.y = exp((-0.5 * delta * delta) / (sigma * sigma));\n    g.z = g.y * g.y;\n\n    vec4 result = texture(colorTexture, st) * g.x;\n    for (int i = 1; i < SAMPLES; ++i)\n    {\n        g.xy *= g.yz;\n\n        vec2 offset = float(i) * dir * step;\n        result += texture(colorTexture, st - offset) * g.x;\n        result += texture(colorTexture, st + offset) * g.x;\n    }\n\n    out_FragColor = result;\n}\n"},947709:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D dirtTexture;\nuniform sampler2D starTexture;\nuniform vec2 dirtTextureDimensions;\nuniform float distortion;\nuniform float ghostDispersal;\nuniform float haloWidth;\nuniform float dirtAmount;\nuniform float earthRadius;\nuniform float intensity;\n\nin vec2 v_textureCoordinates;\n\n// whether it is in space or not\n// 6500000.0 is empirical value\n#define DISTANCE_TO_SPACE 6500000.0\n\n// return ndc from world coordinate biased earthRadius\nvec4 getNDCFromWC(vec3 WC, float earthRadius)\n{\n    vec4 positionEC = czm_view * vec4(WC, 1.0);\n    positionEC = vec4(positionEC.x + earthRadius, positionEC.y, positionEC.z, 1.0);\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    return czm_viewportOrthographic * vec4(positionWC.xy, -positionWC.z, 1.0);\n}\n\n// Check if current pixel is included Earth\n// if then mask it gradually\nfloat isInEarth(vec2 texcoord, vec2 sceneSize)\n{\n    vec2 NDC = texcoord * 2.0 - 1.0;\n    vec4 earthPosSC = getNDCFromWC(vec3(0.0), 0.0);\n    vec4 earthPosSCEdge = getNDCFromWC(vec3(0.0), earthRadius * 1.5);\n    NDC.xy -= earthPosSC.xy;\n\n    float X = abs(NDC.x) * sceneSize.x;\n    float Y = abs(NDC.y) * sceneSize.y;\n\n    return clamp(0.0, 1.0, max(sqrt(X * X + Y * Y) / max(abs(earthPosSCEdge.x * sceneSize.x), 1.0) - 0.8 , 0.0));\n}\n\n// For Chromatic effect\nvec4 textureDistorted(sampler2D tex, vec2 texcoord, vec2 direction, vec3 distortion, bool isSpace)\n{\n    vec2 sceneSize = czm_viewport.zw;\n    vec3 color;\n    if(isSpace)\n    {\n        color.r = isInEarth(texcoord + direction * distortion.r, sceneSize) * texture(tex, texcoord + direction * distortion.r).r;\n        color.g = isInEarth(texcoord + direction * distortion.g, sceneSize) * texture(tex, texcoord + direction * distortion.g).g;\n        color.b = isInEarth(texcoord + direction * distortion.b, sceneSize) * texture(tex, texcoord + direction * distortion.b).b;\n    }\n    else\n    {\n        color.r = texture(tex, texcoord + direction * distortion.r).r;\n        color.g = texture(tex, texcoord + direction * distortion.g).g;\n        color.b = texture(tex, texcoord + direction * distortion.b).b;\n    }\n    return vec4(clamp(color, 0.0, 1.0), 0.0);\n}\n\nvoid main(void)\n{\n    vec4 originalColor = texture(colorTexture, v_textureCoordinates);\n    vec3 rgb = originalColor.rgb;\n    bool isSpace = length(czm_viewerPositionWC.xyz) > DISTANCE_TO_SPACE;\n\n    // Sun position\n    vec4 sunPos = czm_morphTime == 1.0 ? vec4(czm_sunPositionWC, 1.0) : vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    vec4 sunPositionEC = czm_view * sunPos;\n    vec4 sunPositionWC = czm_eyeToWindowCoordinates(sunPositionEC);\n    sunPos = czm_viewportOrthographic * vec4(sunPositionWC.xy, -sunPositionWC.z, 1.0);\n\n    // If sun is not in the screen space, use original color.\n    if(!isSpace || !((sunPos.x >= -1.1 && sunPos.x <= 1.1) && (sunPos.y >= -1.1 && sunPos.y <= 1.1)))\n    {\n        // Lens flare is disabled when not in space until #5932 is fixed.\n        //    https://github.com/CesiumGS/cesium/issues/5932\n        out_FragColor = originalColor;\n        return;\n    }\n\n    vec2 texcoord = vec2(1.0) - v_textureCoordinates;\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    vec2 invPixelSize = 1.0 / pixelSize;\n    vec3 distortionVec = pixelSize.x * vec3(-distortion, 0.0, distortion);\n\n    // ghost vector to image centre:\n    vec2 ghostVec = (vec2(0.5) - texcoord) * ghostDispersal;\n    vec3 direction = normalize(vec3(ghostVec, 0.0));\n\n    // sample ghosts:\n    vec4 result = vec4(0.0);\n    vec4 ghost = vec4(0.0);\n    for (int i = 0; i < 4; ++i)\n    {\n        vec2 offset = fract(texcoord + ghostVec * float(i));\n        // Only bright spots from the centre of the source image\n        ghost += textureDistorted(colorTexture, offset, direction.xy, distortionVec, isSpace);\n    }\n    result += ghost;\n\n    // sample halo\n    vec2 haloVec = normalize(ghostVec) * haloWidth;\n    float weightForHalo = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n    weightForHalo = pow(1.0 - weightForHalo, 5.0);\n\n    result += textureDistorted(colorTexture, texcoord + haloVec, direction.xy, distortionVec, isSpace) * weightForHalo * 1.5;\n\n    // dirt on lens\n    vec2 dirtTexCoords = (v_textureCoordinates * invPixelSize) / dirtTextureDimensions;\n    if (dirtTexCoords.x > 1.0)\n    {\n        dirtTexCoords.x = mod(floor(dirtTexCoords.x), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.x) :  fract(dirtTexCoords.x);\n    }\n    if (dirtTexCoords.y > 1.0)\n    {\n        dirtTexCoords.y = mod(floor(dirtTexCoords.y), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.y) :  fract(dirtTexCoords.y);\n    }\n    result += dirtAmount * texture(dirtTexture, dirtTexCoords);\n\n    // Rotating starburst texture's coordinate\n    // dot(czm_view[0].xyz, vec3(0.0, 0.0, 1.0)) + dot(czm_view[1].xyz, vec3(0.0, 1.0, 0.0))\n    float camrot = czm_view[0].z + czm_view[1].y;\n    float cosValue = cos(camrot);\n    float sinValue = sin(camrot);\n    mat3 rotation = mat3(\n        cosValue, -sinValue, 0.0,\n        sinValue, cosValue, 0.0,\n        0.0, 0.0, 1.0\n    );\n\n    vec3 st1 = vec3(v_textureCoordinates * 2.0 - vec2(1.0), 1.0);\n    vec3 st2 = vec3((rotation * st1).xy, 1.0);\n    vec3 st3 = st2 * 0.5 + vec3(0.5);\n    vec2 lensStarTexcoord = st3.xy;\n    float weightForLensFlare = length(vec3(sunPos.xy, 0.0));\n    float oneMinusWeightForLensFlare = max(1.0 - weightForLensFlare, 0.0);\n\n    if (!isSpace)\n    {\n        result *= oneMinusWeightForLensFlare * intensity * 0.2;\n    }\n    else\n    {\n        result *= oneMinusWeightForLensFlare * intensity;\n        result *= texture(starTexture, lensStarTexcoord) * pow(weightForLensFlare, 1.0) * max((1.0 - length(vec3(st1.xy, 0.0))), 0.0) * 2.0;\n    }\n\n    result += texture(colorTexture, v_textureCoordinates);\n\n    out_FragColor = result;\n}\n"},724355:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform vec3 white;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#else\nuniform float exposure;\n#endif\n\n// See equation 4:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#else\n    color *= vec3(exposure);\n#endif\n    color = (color * (1.0 + color / white)) / (1.0 + color);\n    color = czm_inverseGamma(color);\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},573311:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy ,vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    float noiseValue = rand(v_textureCoordinates + sin(czm_frameNumber)) * 0.1;\n    vec3 rgb = texture(colorTexture, v_textureCoordinates).rgb;\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    out_FragColor = vec4((noiseValue + rgb) * green, 1.0);\n}\n"},90979:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n}\n"},307386:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform highp sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = czm_packDepth(texture(u_depthTexture, v_textureCoordinates).r);\n}\n"},537070:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#else\nuniform float exposure;\n#endif\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    color /= texture(autoExposure, vec2(0.5)).r;\n#else\n    color *= vec3(exposure);\n#endif\n    color = czm_pbrNeutralTonemapping(color);\n    color = czm_inverseGamma(color);\n\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},812178:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_pointCloud_colorGBuffer;\nuniform sampler2D u_pointCloud_depthGBuffer;\nuniform vec2 u_distanceAndEdlStrength;\nin vec2 v_textureCoordinates;\n\nvec2 neighborContribution(float log2Depth, vec2 offset)\n{\n    float dist = u_distanceAndEdlStrength.x;\n    vec2 texCoordOrig = v_textureCoordinates + offset * dist;\n    vec2 texCoord0 = v_textureCoordinates + offset * floor(dist);\n    vec2 texCoord1 = v_textureCoordinates + offset * ceil(dist);\n\n    float depthOrLogDepth0 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord0));\n    float depthOrLogDepth1 = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, texCoord1));\n\n    // ignore depth values that are the clear depth\n    if (depthOrLogDepth0 == 0.0 || depthOrLogDepth1 == 0.0) {\n        return vec2(0.0);\n    }\n\n    // interpolate the two adjacent depth values\n    float depthMix = mix(depthOrLogDepth0, depthOrLogDepth1, fract(dist));\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(texCoordOrig, depthMix);\n    return vec2(max(0.0, log2Depth - log2(-eyeCoordinate.z / eyeCoordinate.w)), 1.0);\n}\n\nvoid main()\n{\n    float depthOrLogDepth = czm_unpackDepth(texture(u_pointCloud_depthGBuffer, v_textureCoordinates));\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depthOrLogDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float log2Depth = log2(-eyeCoordinate.z);\n\n    if (depthOrLogDepth == 0.0) // 0.0 is the clear value for the gbuffer\n    {\n        discard;\n    }\n\n    vec4 color = texture(u_pointCloud_colorGBuffer, v_textureCoordinates);\n\n    // sample from neighbors left, right, down, up\n    vec2 texelSize = 1.0 / czm_viewport.zw;\n\n    vec2 responseAndCount = vec2(0.0);\n\n    responseAndCount += neighborContribution(log2Depth, vec2(-texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(+texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, -texelSize.y));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, +texelSize.y));\n\n    float response = responseAndCount.x / responseAndCount.y;\n    float strength = u_distanceAndEdlStrength.y;\n    float shade = exp(-response * 300.0 * strength);\n    color.rgb *= shade;\n    out_FragColor = vec4(color);\n\n    // Input and output depth are the same.\n    gl_FragDepth = depthOrLogDepth;\n}\n"},951834:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\n\nin vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#else\nuniform float exposure;\n#endif\n\n// See equation 3:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#else\n    color *= vec3(exposure);\n#endif\n    color = color / (1.0 + color);\n    color = czm_inverseGamma(color);\n    out_FragColor = vec4(color, fragmentColor.a);\n}\n"},382743:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D colorTexture;\nuniform sampler2D silhouetteTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 silhouetteColor = texture(silhouetteTexture, v_textureCoordinates);\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    out_FragColor = mix(color, silhouetteColor, silhouetteColor.a);\n}\n"},814617:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="//\n// Fragment shader for Gaussian splats.\n// Renders a Gaussian splat within a quad, discarding fragments outside the unit circle.\n// Applies an approximate Gaussian falloff based on distance from the center and outputs\n// a color modulated by the alpha and Gaussian weight.\n//\nvoid main() {\n    if (v_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (v_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n\n    float A = -dot(v_vertPos, v_vertPos);\n    if (A < -4.) {\n        discard;\n    }\n\n    float B = exp(A * 4.) * v_splatColor.a ;\n    out_FragColor = vec4(v_splatColor.rgb * B , B);\n}\n"},988617:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="//\n// Vertex shader for Gaussian splats.\n\n// The splats are rendered as quads in view space. Splat attributes are loaded from a texture with precomputed 3D covariance.\n\n// Passes local quad coordinates and color to the fragment shader for Gaussian evaluation. \n//\n// Discards splats outside the view frustum or with negligible screen size.\n//\n#if defined(HAS_SPHERICAL_HARMONICS)\nconst uint coefficientCount[3] = uint[3](3u,8u,15u);\nconst float SH_C1 = 0.48860251;\nconst float SH_C2[5] = float[5](\n         1.092548430,\n        -1.09254843,\n        0.315391565,\n        -1.09254843,\n        0.546274215\n);\n\nconst float SH_C3[7] = float[7](\n         -0.59004358,\n        2.890611442,\n        -0.45704579,\n        0.373176332,\n        -0.45704579,\n        1.445305721,\n        -0.59004358\n);\n\n//Retrieve SH coefficient. Currently RG32UI format\nuvec2 loadSHCoeff(uint splatID, int index) {\n    ivec2 shTexSize = textureSize(u_sphericalHarmonicsTexture, 0);\n    uint dims = coefficientCount[uint(u_sphericalHarmonicsDegree)-1u];\n    uint splatsPerRow = uint(shTexSize.x) / dims;\n    uint shIndex = (splatID%splatsPerRow) * dims + uint(index);\n    ivec2 shPosCoord = ivec2(shIndex, splatID / splatsPerRow);\n    return texelFetch(u_sphericalHarmonicsTexture, shPosCoord, 0).rg;\n}\n\n//Unpack RG32UI half float coefficients to vec3\nvec3 halfToVec3(uvec2 packed) {\n    return vec3(unpackHalf2x16(packed.x), unpackHalf2x16(packed.y).x);\n}\n\nvec3 loadAndExpandSHCoeff(uint splatID, int index) {\n    uvec2 coeff = loadSHCoeff(splatID, index);\n    return halfToVec3(coeff);\n}\n\nvec3 evaluateSH(uint splatID, vec3 viewDir) {\n    vec3 result = vec3(0.0);\n    int coeffIndex = 0;\n    float x = viewDir.x, y = viewDir.y, z = viewDir.z;\n\n    if (u_sphericalHarmonicsDegree >= 1.) {\n        vec3 sh1 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n        vec3 sh2 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n        vec3 sh3 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n        result += -SH_C1 * y * sh1 + SH_C1 * z * sh2 - SH_C1 * x * sh3;\n\n        if (u_sphericalHarmonicsDegree >= 2.) {\n            float xx = x * x;\n            float yy = y * y;\n            float zz = z * z;\n            float xy = x * y;\n            float yz = y * z;\n            float xz = x * z;\n\n            vec3 sh4 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n            vec3 sh5 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n            vec3 sh6 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n            vec3 sh7 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n            vec3 sh8 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n            result += SH_C2[0] * xy * sh4 +\n                    SH_C2[1] * yz * sh5 +\n                    SH_C2[2] * (2.0f * zz - xx - yy) * sh6 +\n                    SH_C2[3] * xz * sh7 +\n                    SH_C2[4] * (xx - yy) * sh8;\n\n            if (u_sphericalHarmonicsDegree >= 3.) {\n                vec3 sh9 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                vec3 sh10 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                vec3 sh11 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                vec3 sh12 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                vec3 sh13 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                vec3 sh14 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                vec3 sh15 = loadAndExpandSHCoeff(splatID, coeffIndex++);\n                result += SH_C3[0] * y * (3.0f * xx - yy) * sh9 +\n                        SH_C3[1] * xy * z * sh10 +\n                        SH_C3[2] * y * (4.0f * zz - xx - yy) * sh11 +\n                        SH_C3[3] * z * (2.0f * zz - 3.0f * xx - 3.0f * yy) * sh12 +\n                        SH_C3[4] * x * (4.0f * zz - xx - yy) * sh13 +\n                        SH_C3[5] * z * (xx - yy) * sh14 +\n                        SH_C3[6] * x * (xx - 3.0f * yy) * sh15;\n            }\n        }\n    }\n    return result;\n}\n#endif\n\n// Transforms and projects splat covariance into screen space and extracts the major and minor axes of the Gaussian ellipsoid\n// which is used to calculate the vertex position in clip space.\nvec4 calcCovVectors(vec3 viewPos, mat3 Vrk) {\n    vec4 t = vec4(viewPos, 1.0);\n    vec2 focal = vec2(czm_projection[0][0] * czm_viewport.z, czm_projection[1][1] * czm_viewport.w);\n\n    vec2 J1 = focal / t.z;\n    vec2 J2 = -focal * vec2(t.x, t.y) / (t.z * t.z);\n    mat3 J = mat3(\n        J1.x, 0.0, J2.x,\n        0.0, J1.y, J2.y,\n        0.0, 0.0, 0.0\n    );\n\n    mat3 R = mat3(czm_modelView);\n\n    //transform our covariance into view space\n    //ensures orientation is correct\n    mat3 Vrk_view = R * Vrk * transpose(R);\n    mat3 cov = transpose(J) * Vrk_view * J;\n\n    float diagonal1 = cov[0][0] + .3;\n    float offDiagonal = cov[0][1];\n    float diagonal2 = cov[1][1] + .3;\n\n    float mid = 0.5 * (diagonal1 + diagonal2);\n    float radius = length(vec2((diagonal1 - diagonal2) * 0.5, offDiagonal));\n    float lambda1 = mid + radius;\n    float lambda2 = max(mid - radius, 0.1);\n\n    vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));\n\n    return vec4(\n        min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector,\n        min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x)\n    );\n}\n\nhighp vec4 discardVec = vec4(0.0, 0.0, 2.0, 1.0);\n\nvoid main() {\n    uint texIdx = uint(a_splatIndex);\n    ivec2 posCoord = ivec2((texIdx & 0x3ffu) << 1, texIdx >> 10);\n    vec4 splatPosition = vec4( uintBitsToFloat(uvec4(texelFetch(u_splatAttributeTexture, posCoord, 0))) );\n\n    vec4 splatViewPos = czm_modelView * vec4(splatPosition.xyz, 1.0);\n    vec4 clipPosition = czm_projection * splatViewPos;\n\n    float clip = 1.2 * clipPosition.w;\n    if (clipPosition.z < -clip || clipPosition.x < -clip || clipPosition.x > clip ||\n        clipPosition.y < -clip || clipPosition.y > clip) {\n        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);\n        return;\n    }\n\n    ivec2 covCoord = ivec2(((texIdx & 0x3ffu) << 1) | 1u, texIdx >> 10);\n    uvec4 covariance = uvec4(texelFetch(u_splatAttributeTexture, covCoord, 0));\n\n    gl_Position = clipPosition;\n\n    vec2 u1 = unpackHalf2x16(covariance.x) ;\n    vec2 u2 = unpackHalf2x16(covariance.y);\n    vec2 u3 = unpackHalf2x16(covariance.z);\n    mat3 Vrk = mat3(u1.x, u1.y, u2.x, u1.y, u2.y, u3.x, u2.x, u3.x, u3.y);\n\n    vec4 covVectors = calcCovVectors(splatViewPos.xyz, Vrk);\n\n    if (dot(covVectors.xy, covVectors.xy) < 4.0 && dot(covVectors.zw, covVectors.zw) < 4.0) {\n        gl_Position = discardVec;\n        return;\n    }\n\n    vec2 corner = vec2((gl_VertexID << 1) & 2, gl_VertexID & 2) - 1.;\n\n    gl_Position += vec4((corner.x * covVectors.xy + corner.y * covVectors.zw) / czm_viewport.zw * gl_Position.w, 0, 0);\n    gl_Position.z = clamp(gl_Position.z, -abs(gl_Position.w), abs(gl_Position.w));\n\n    v_vertPos = corner ;\n    v_splatColor = vec4(covariance.w & 0xffu, (covariance.w >> 8) & 0xffu, (covariance.w >> 16) & 0xffu, (covariance.w >> 24) & 0xffu) / 255.0;\n#if defined(HAS_SPHERICAL_HARMONICS)\n    vec4 splatWC = czm_inverseView * splatViewPos;\n    vec3 viewDirModel = normalize(u_inverseModelRotation * (splatWC.xyz - u_cameraPositionWC.xyz));\n\n    v_splatColor.rgb += evaluateSH(texIdx, viewDirModel).rgb;\n#endif\n    v_splitDirection = u_splitDirection;\n}"},275058:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_texture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    out_FragColor = texture(u_texture, v_textureCoordinates);\n}\n"},208898:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\nin float webMercatorT;\n\nuniform vec2 u_textureDimensions;\n\nout vec2 v_textureCoordinates;\n\nvoid main()\n{\n    v_textureCoordinates = vec2(position.x, webMercatorT);\n    gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));\n}\n"},370298:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="float interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n\nvoid computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity, out float underTranslucentGlobe)\n{\n    float ellipsoidRadiiDifference = czm_ellipsoidRadii.x - czm_ellipsoidRadii.z;\n\n    // Adjustment to the atmosphere radius applied based on the camera height.\n    float distanceAdjustMin = czm_ellipsoidRadii.x / 4.0;\n    float distanceAdjustMax = czm_ellipsoidRadii.x;\n    float distanceAdjustModifier = ellipsoidRadiiDifference / 2.0;\n    float distanceAdjust = distanceAdjustModifier * clamp((czm_eyeHeight - distanceAdjustMin) / (distanceAdjustMax - distanceAdjustMin), 0.0, 1.0);\n\n    // Since atmosphere scattering assumes the atmosphere is a spherical shell, we compute an inner radius of the atmosphere best fit\n    // for the position on the ellipsoid.\n    float radiusAdjust = (ellipsoidRadiiDifference / 4.0) + distanceAdjust;\n    float atmosphereInnerRadius = (length(czm_viewerPositionWC) - czm_eyeHeight) - radiusAdjust;\n\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n\n    underTranslucentGlobe = 0.0;\n\n    // Brighten the sky atmosphere under the Earth's atmosphere when translucency is enabled.\n    #if defined(GLOBE_TRANSLUCENT)\n\n        // Check for intersection with the inner radius of the atmopshere.\n        czm_raySegment primaryRayEarthIntersect = czm_raySphereIntersectionInterval(primaryRay, vec3(0.0), atmosphereInnerRadius + radiusAdjust);\n        if (primaryRayEarthIntersect.start > 0.0 && primaryRayEarthIntersect.stop > 0.0) {\n\n            // Compute position on globe.\n            vec3 direction = normalize(positionWC);\n            czm_ray ellipsoidRay = czm_ray(positionWC, -direction);\n            czm_raySegment ellipsoidIntersection = czm_rayEllipsoidIntersectionInterval(ellipsoidRay, vec3(0.0), czm_ellipsoidInverseRadii);\n            vec3 onEarth = positionWC - (direction * ellipsoidIntersection.start);\n\n            // Control the color using the camera angle.\n            float angle = dot(normalize(czm_viewerPositionWC), normalize(onEarth));\n\n            // Control the opacity using the distance from Earth.\n            opacity = interpolateByDistance(vec4(0.0, 1.0, czm_ellipsoidRadii.x, 0.0), length(czm_viewerPositionWC - onEarth));\n            vec3 horizonColor = vec3(0.1, 0.2, 0.3);\n            vec3 nearColor = vec3(0.0);\n\n            rayleighColor = mix(nearColor, horizonColor, exp(-angle) * opacity);\n\n            // Set the traslucent flag to avoid alpha adjustment in computeFinalColor funciton.\n            underTranslucentGlobe = 1.0;\n            return;\n        }\n    #endif\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n\n    // Alter the opacity based on how close the viewer is to the ground.\n    // (0.0 = At edge of atmosphere, 1.0 = On ground)\n    float cameraHeight = czm_eyeHeight + atmosphereInnerRadius;\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n    opacity = clamp((atmosphereOuterRadius - cameraHeight) / (atmosphereOuterRadius - atmosphereInnerRadius), 0.0, 1.0);\n\n    // Alter alpha based on time of day (0.0 = night , 1.0 = day)\n    float nightAlpha = (u_radiiAndDynamicAtmosphereColor.z != 0.0) ? clamp(dot(normalize(positionWC), lightDirection), 0.0, 1.0) : 1.0;\n    opacity *= pow(nightAlpha, 0.5);\n}\n"},692352:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 v_outerPositionWC;\n\nuniform vec3 u_hsbShift;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nin vec3 v_mieColor;\nin vec3 v_rayleighColor;\nin float v_opacity;\nin float v_translucent;\n#endif\n\nvoid main (void)\n{\n    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;\n    vec3 lightDirection = czm_getDynamicAtmosphereLightDirection(v_outerPositionWC, lightEnum);\n\n    vec3 mieColor;\n    vec3 rayleighColor;\n    float opacity;\n    float translucent;\n\n    #ifdef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            v_outerPositionWC,\n            lightDirection,\n            rayleighColor,\n            mieColor,\n            opacity,\n            translucent\n        );\n    #else\n        mieColor = v_mieColor;\n        rayleighColor = v_rayleighColor;\n        opacity = v_opacity;\n        translucent = v_translucent;\n    #endif\n\n    vec4 color = computeAtmosphereColor(v_outerPositionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n    #ifndef HDR\n        color.rgb = czm_pbrNeutralTonemapping(color.rgb);\n        color.rgb = czm_inverseGamma(color.rgb);\n    #endif\n\n    #ifdef COLOR_CORRECT\n        const bool ignoreBlackPixels = true;\n        color.rgb = czm_applyHSBShift(color.rgb, u_hsbShift, ignoreBlackPixels);\n    #endif\n\n    // For the parts of the sky atmosphere that are not behind a translucent globe,\n    // we mix in the default opacity so that the sky atmosphere still appears at distance.\n    // This is needed because the opacity in the sky atmosphere is initially adjusted based\n    // on the camera height.\n    if (translucent == 0.0) {\n        color.a = mix(color.b, 1.0, color.a) * smoothstep(0.0, 1.0, czm_morphTime);\n    }\n\n    out_FragColor = color;\n}\n"},143344:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\n\nout vec3 v_outerPositionWC;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nout vec3 v_mieColor;\nout vec3 v_rayleighColor;\nout float v_opacity;\nout float v_translucent;\n#endif\n\nvoid main(void)\n{\n    vec4 positionWC = czm_model * position;\n    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;\n    vec3 lightDirection = czm_getDynamicAtmosphereLightDirection(positionWC.xyz, lightEnum);\n\n    #ifndef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            positionWC.xyz,\n            lightDirection,\n            v_rayleighColor,\n            v_mieColor,\n            v_opacity,\n            v_translucent\n        );\n    #endif\n\n    v_outerPositionWC = positionWC.xyz;\n    vec4 positionEC = czm_modelView * position;\n    gl_Position = czm_projection * positionEC;\n}\n"},326453:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform samplerCube u_cubeMap;\n\nin vec3 v_texCoord;\n\nvoid main()\n{\n    vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));\n    out_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n}\n"},789221:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\nout vec3 v_texCoord;\n\nvoid main()\n{\n    vec3 p = czm_viewRotation * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n    gl_Position = czm_projection * vec4(p, 1.0);\n    v_texCoord = position.xyz;\n}\n"},860139:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform sampler2D u_texture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color = texture(u_texture, v_textureCoordinates);\n    out_FragColor = czm_gammaCorrect(color);\n}\n"},40510:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="uniform float u_radiusTS;\n\nin vec2 v_textureCoordinates;\n\nvec2 rotate(vec2 p, vec2 direction)\n{\n    return vec2(p.x * direction.x - p.y * direction.y, p.x * direction.y + p.y * direction.x);\n}\n\nvec4 addBurst(vec2 position, vec2 direction, float lengthScalar)\n{\n    vec2 rotatedPosition = rotate(position, direction) * vec2(25.0, 0.75);\n    float radius = length(rotatedPosition) * lengthScalar;\n    float burst = 1.0 - smoothstep(0.0, 0.55, radius);\n    return vec4(burst);\n}\n\nvoid main()\n{\n    float lengthScalar = 2.0 / sqrt(2.0);\n    vec2 position = v_textureCoordinates - vec2(0.5);\n    float radius = length(position) * lengthScalar;\n    float surface = step(radius, u_radiusTS);\n    vec4 color = vec4(vec2(1.0), surface + 0.2, surface);\n\n    float glow = 1.0 - smoothstep(0.0, 0.55, radius);\n    color.ba += mix(vec2(0.0), vec2(1.0), glow) * 0.75;\n\n    vec4 burst = vec4(0.0);\n\n    // The following loop has been manually unrolled for speed, to\n    // avoid sin() and cos().\n    //\n    //for (float i = 0.4; i < 3.2; i += 1.047) {\n    //    vec2 direction = vec2(sin(i), cos(i));\n    //    burst += 0.4 * addBurst(position, direction, lengthScalar);\n    //\n    //    direction = vec2(sin(i - 0.08), cos(i - 0.08));\n    //    burst += 0.3 * addBurst(position, direction, lengthScalar);\n    //}\n\n    burst += 0.4 * addBurst(position, vec2(0.38942,  0.92106), lengthScalar);  // angle == 0.4\n    burst += 0.4 * addBurst(position, vec2(0.99235,  0.12348), lengthScalar);  // angle == 0.4 + 1.047\n    burst += 0.4 * addBurst(position, vec2(0.60327, -0.79754), lengthScalar);  // angle == 0.4 + 1.047 * 2.0\n\n    burst += 0.3 * addBurst(position, vec2(0.31457,  0.94924), lengthScalar);  // angle == 0.4 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.97931,  0.20239), lengthScalar);  // angle == 0.4 + 1.047 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.66507, -0.74678), lengthScalar);  // angle == 0.4 + 1.047 * 2.0 - 0.08\n\n    // End of manual loop unrolling.\n\n    color += clamp(burst, vec4(0.0), vec4(1.0)) * 0.15;\n\n    out_FragColor = clamp(color, vec4(0.0), vec4(1.0));\n}\n"},752123:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 direction;\n\nuniform float u_size;\n\nout vec2 v_textureCoordinates;\n\nvoid main() \n{\n    vec4 position;\n    if (czm_morphTime == 1.0)\n    {\n        position = vec4(czm_sunPositionWC, 1.0);\n    }\n    else\n    {\n        position = vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    }\n    \n    vec4 positionEC = czm_view * position;\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    \n    vec2 halfSize = vec2(u_size * 0.5);\n    halfSize *= ((direction * 2.0) - 1.0);\n    \n    gl_Position = czm_viewportOrthographic * vec4(positionWC.xy + halfSize, -positionWC.z, 1.0);\n    \n    v_textureCoordinates = direction;\n}\n"},154920:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 v_startPlaneEC;\nin vec4 v_endPlaneEC;\nin vec4 v_rightPlaneEC;\nin float v_halfWidth;\nin vec3 v_volumeUpEC;\n\nuniform vec4 u_highlightColor;\nvoid main()\n{\n    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));\n\n    // Discard for sky\n    if (logDepthOrDepth == 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        out_FragColor = vec4(0.0, 0.0, 1.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate);\n\n    // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction\n    halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC));\n\n    // Check distance of the eye coordinate against the right-facing plane\n    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);\n\n    // Check eye coordinate against the mitering planes\n    float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz);\n    float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz);\n\n    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        out_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n    out_FragColor = u_highlightColor;\n\n    czm_writeDepthClamp();\n}\n"},296312:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='in vec3 startEllipsoidNormal;\nin vec3 endEllipsoidNormal;\nin vec4 startPositionAndHeight;\nin vec4 endPositionAndHeight;\nin vec4 startFaceNormalAndVertexCorner;\nin vec4 endFaceNormalAndHalfWidth;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelView;\nuniform vec2 u_minimumMaximumVectorHeights;\n\nout vec4 v_startPlaneEC;\nout vec4 v_endPlaneEC;\nout vec4 v_rightPlaneEC;\nout float v_halfWidth;\nout vec3 v_volumeUpEC;\n\nvoid main()\n{\n    // vertex corner IDs\n    //          3-----------7\n    //         /|   left   /|\n    //        / | 1       / |\n    //       2-----------6  5  end\n    //       | /         | /\n    // start |/  right   |/\n    //       0-----------4\n    //\n    float isEnd = floor(startFaceNormalAndVertexCorner.w * 0.251); // 0 for front, 1 for end\n    float isTop = floor(startFaceNormalAndVertexCorner.w * mix(0.51, 0.19, isEnd)); // 0 for bottom, 1 for top\n\n    vec3 forward = endPositionAndHeight.xyz - startPositionAndHeight.xyz;\n    vec3 right = normalize(cross(forward, startEllipsoidNormal));\n\n    vec4 position = vec4(startPositionAndHeight.xyz, 1.0);\n    position.xyz += forward * isEnd;\n\n    v_volumeUpEC = czm_normal * normalize(cross(right, forward));\n\n    // Push for volume height\n    float offset;\n    vec3 ellipsoidNormal = mix(startEllipsoidNormal, endEllipsoidNormal, isEnd);\n\n    // offset height to create volume\n    offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd);\n    offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset;\n    position.xyz += offset * ellipsoidNormal;\n\n    // move from RTC to EC\n    position = u_modifiedModelView * position;\n    right = czm_normal * right;\n\n    // Push for width in a direction that is in the start or end plane and in a plane with right\n    // N = normalEC ("right-facing" direction for push)\n    // R = right\n    // p = angle between N and R\n    // w = distance to push along R if R == N\n    // d = distance to push along N\n    //\n    //   N   R\n    //  {  p| }      * cos(p) = dot(N, R) = w / d\n    //  d  |  |w    * d = w / dot(N, R)\n    //    { | }\n    //       o---------- polyline segment ----\x3e\n    //\n    vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd);\n    scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd));\n    vec3 miterPushNormal = czm_normal * normalize(scratchNormal);\n\n    offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC\n    offset = offset / dot(miterPushNormal, right);\n    position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0)));\n\n    gl_Position = czm_depthClamp(czm_projection * position);\n\n    position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0);\n    vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz;\n    v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz));\n    v_rightPlaneEC = vec4(right, -dot(right, position.xyz));\n\n    position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0);\n    vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz;\n    v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz));\n    v_halfWidth = endFaceNormalAndHalfWidth.w;\n}\n'},747776:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 currentPosition;\nin vec4 previousPosition;\nin vec4 nextPosition;\nin vec2 expandAndWidth;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelView;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = u_modifiedModelView * currentPosition;\n    vec4 prev = u_modifiedModelView * previousPosition;\n    vec4 next = u_modifiedModelView * nextPosition;\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinatesEC(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n}\n"},971532:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec3 position;\nin float a_batchId;\n\nuniform mat4 u_modifiedModelViewProjection;\n\nvoid main()\n{\n    gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0));\n}\n"},351014:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec4 position;\nin vec2 textureCoordinates;\n\nout vec2 v_textureCoordinates;\n\nvoid main() \n{\n    gl_Position = position;\n    v_textureCoordinates = textureCoordinates;\n}\n"},186930:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, RayShapeIntersection,\n// NO_HIT, Intersections\n\n/* Box defines (set in Scene/VoxelBoxShape.js)\n#define BOX_INTERSECTION_INDEX ### // always 0\n*/\n\nuniform vec3 u_renderMinBounds;\nuniform vec3 u_renderMaxBounds;\n\nRayShapeIntersection intersectBox(in Ray ray, in vec3 minBound, in vec3 maxBound)\n{\n    // Consider the box as the intersection of the space between 3 pairs of parallel planes\n    // Compute the distance along the ray to each plane\n    vec3 t0 = (minBound - ray.pos) / ray.dir;\n    vec3 t1 = (maxBound - ray.pos) / ray.dir;\n\n    // Identify candidate entries/exits based on distance from ray.pos\n    vec3 entries = min(t0, t1);\n    vec3 exits = max(t0, t1);\n\n    vec3 directions = sign(ray.dir);\n\n    // The actual intersection points are the furthest entry and the closest exit\n    float lastEntry = maxComponent(entries);\n    bvec3 isLastEntry = equal(entries, vec3(lastEntry));\n    vec3 entryNormal = -1.0 * vec3(isLastEntry) * directions;\n    vec4 entry = vec4(entryNormal, lastEntry);\n\n    float firstExit = minComponent(exits);\n    bvec3 isFirstExit = equal(exits, vec3(firstExit));\n    vec3 exitNormal = vec3(isLastEntry) * directions;\n    vec4 exit = vec4(exitNormal, firstExit);\n\n    if (entry.w > exit.w) {\n        entry.w = NO_HIT;\n        exit.w = NO_HIT;\n    }\n\n    return RayShapeIntersection(entry, exit);\n}\n\nvoid intersectShape(in Ray ray, inout Intersections ix)\n{\n    RayShapeIntersection intersection = intersectBox(ray, u_renderMinBounds, u_renderMaxBounds);\n    setShapeIntersection(ix, BOX_INTERSECTION_INDEX, intersection);\n}\n"},138338:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections, INF_HIT,\n// NO_HIT, setShapeIntersection\n\n/* Clipping plane defines (set in Scene/VoxelRenderResources.js)\n#define CLIPPING_PLANES_UNION\n#define CLIPPING_PLANES_COUNT\n#define CLIPPING_PLANES_INTERSECTION_INDEX\n*/\n\nuniform sampler2D u_clippingPlanesTexture;\nuniform mat4 u_clippingPlanesMatrix;\n\n// Plane is in Hessian Normal Form\nvec4 intersectPlane(in Ray ray, in vec4 plane) {\n    vec3 n = plane.xyz; // normal\n    float w = plane.w; // -dot(pointOnPlane, normal)\n\n    float a = dot(ray.pos, n);\n    float b = dot(ray.dir, n);\n    float t = -(w + a) / b;\n\n    return vec4(n, t);\n}\n\nvoid intersectClippingPlanes(in Ray ray, inout Intersections ix) {\n    vec4 backSide = vec4(-ray.dir, -INF_HIT);\n    vec4 farSide = vec4(ray.dir, +INF_HIT);\n    RayShapeIntersection clippingVolume;\n\n    #if (CLIPPING_PLANES_COUNT == 1)\n        // Union and intersection are the same when there's one clipping plane, and the code\n        // is more simplified.\n        vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, 0, u_clippingPlanesMatrix);\n        vec4 intersection = intersectPlane(ray, planeUv);\n        bool reflects = dot(ray.dir, intersection.xyz) < 0.0;\n        clippingVolume.entry = reflects ? backSide : intersection;\n        clippingVolume.exit = reflects ? intersection : farSide;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX, clippingVolume);\n    #elif defined(CLIPPING_PLANES_UNION)\n        vec4 firstTransmission = vec4(ray.dir, +INF_HIT);\n        vec4 lastReflection = vec4(-ray.dir, -INF_HIT);\n        for (int i = 0; i < CLIPPING_PLANES_COUNT; i++) {\n            vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, i, u_clippingPlanesMatrix);\n            vec4 intersection = intersectPlane(ray, planeUv);\n            if (dot(ray.dir, planeUv.xyz) > 0.0) {\n                firstTransmission = intersection.w <= firstTransmission.w ? intersection : firstTransmission;\n            } else {\n                lastReflection = intersection.w >= lastReflection.w ? intersection : lastReflection;\n            }\n        }\n        clippingVolume.entry = backSide;\n        clippingVolume.exit = lastReflection;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX + 0, clippingVolume);\n        clippingVolume.entry = firstTransmission;\n        clippingVolume.exit = farSide;\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX + 1, clippingVolume);\n    #else // intersection\n        vec4 lastTransmission = vec4(ray.dir, -INF_HIT);\n        vec4 firstReflection = vec4(-ray.dir, +INF_HIT);\n        for (int i = 0; i < CLIPPING_PLANES_COUNT; i++) {\n            vec4 planeUv = getClippingPlane(u_clippingPlanesTexture, i, u_clippingPlanesMatrix);\n            vec4 intersection = intersectPlane(ray, planeUv);\n            if (dot(ray.dir, planeUv.xyz) > 0.0) {\n                lastTransmission = intersection.w > lastTransmission.w ? intersection : lastTransmission;\n            } else {\n                firstReflection = intersection.w < firstReflection.w ? intersection: firstReflection;\n            }\n        }\n        if (lastTransmission.w < firstReflection.w) {\n            clippingVolume.entry = lastTransmission;\n            clippingVolume.exit = firstReflection;\n        } else {\n            clippingVolume.entry = vec4(-ray.dir, NO_HIT);\n            clippingVolume.exit = vec4(ray.dir, NO_HIT);\n        }\n        setShapeIntersection(ix, CLIPPING_PLANES_INTERSECTION_INDEX, clippingVolume);\n    #endif\n}\n"},864393:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, NO_HIT, Intersections,\n// RayShapeIntersection, setSurfaceIntersection, setShapeIntersection,\n// intersectIntersections\n// See IntersectLongitude.glsl for the definitions of intersectHalfPlane,\n// intersectFlippedWedge, intersectRegularWedge\n\n/* Cylinder defines (set in Scene/VoxelCylinderShape.js)\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN\n#define CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF\n#define CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO\n\n#define CYLINDER_INTERSECTION_INDEX_RADIUS_MAX\n#define CYLINDER_INTERSECTION_INDEX_RADIUS_MIN\n#define CYLINDER_INTERSECTION_INDEX_ANGLE\n*/\n\n// Cylinder uniforms\nuniform vec2 u_cylinderRenderRadiusMinMax;\nuniform vec2 u_cylinderRenderHeightMinMax;\n#if defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE)\n    uniform vec2 u_cylinderRenderAngleMinMax;\n#endif\n\n/**\n * Find the intersection of a ray with the volume defined by two planes of constant z\n */\nRayShapeIntersection intersectHeightBounds(in Ray ray, in vec2 minMaxHeight, in bool convex)\n{\n    float zPosition = ray.pos.z;\n    float zDirection = ray.dir.z;\n\n    float tmin = (minMaxHeight.x - zPosition) / zDirection;\n    float tmax = (minMaxHeight.y - zPosition) / zDirection;\n\n    // Normals point outside the volume\n    float signFlip = convex ? 1.0 : -1.0;\n    vec4 intersectMin = vec4(0.0, 0.0, -1.0 * signFlip, tmin);\n    vec4 intersectMax = vec4(0.0, 0.0, 1.0 * signFlip, tmax);\n\n    bool topEntry = zDirection < 0.0;\n    vec4 entry = topEntry ? intersectMax : intersectMin;\n    vec4 exit = topEntry ? intersectMin : intersectMax;\n\n    return RayShapeIntersection(entry, exit);\n}\n\n/**\n * Find the intersection of a ray with a right cylindrical surface of a given radius\n * about the z-axis.\n */\nRayShapeIntersection intersectCylinder(in Ray ray, in float radius, in bool convex)\n{\n    vec2 position = ray.pos.xy;\n    vec2 direction = ray.dir.xy;\n\n    float a = dot(direction, direction);\n    float b = dot(position, direction);\n    float c = dot(position, position) - radius * radius;\n    float determinant = b * b - a * c;\n\n    if (determinant < 0.0) {\n        vec4 miss = vec4(normalize(ray.dir), NO_HIT);\n        return RayShapeIntersection(miss, miss);\n    }\n\n    determinant = sqrt(determinant);\n    float t1 = (-b - determinant) / a;\n    float t2 = (-b + determinant) / a;\n    float signFlip = convex ? 1.0 : -1.0;\n    vec4 intersect1 = vec4(normalize(position + t1 * direction) * signFlip, 0.0, t1);\n    vec4 intersect2 = vec4(normalize(position + t2 * direction) * signFlip, 0.0, t2);\n\n    return RayShapeIntersection(intersect1, intersect2);\n}\n\n/**\n * Find the intersection of a ray with a right cylindrical solid of given\n * radius and height bounds. NOTE: The shape is assumed to be convex.\n */\nRayShapeIntersection intersectBoundedCylinder(in Ray ray, in float radius, in vec2 minMaxHeight)\n{\n    RayShapeIntersection cylinderIntersection = intersectCylinder(ray, radius, true);\n    RayShapeIntersection heightBoundsIntersection = intersectHeightBounds(ray, minMaxHeight, true);\n    return intersectIntersections(ray, cylinderIntersection, heightBoundsIntersection);\n}\n\nvoid intersectShape(Ray ray, inout Intersections ix)\n{\n    // Position is converted from [0,1] to [-1,+1] because shape intersections assume unit space is [-1,+1].\n    // Direction is scaled as well to be in sync with position.\n    ray.pos = ray.pos * 2.0 - 1.0;\n    ray.dir *= 2.0;\n\n    RayShapeIntersection outerIntersect = intersectBoundedCylinder(ray, u_cylinderRenderRadiusMinMax.y, u_cylinderRenderHeightMinMax);\n\n    setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_RADIUS_MAX, outerIntersect);\n\n    if (outerIntersect.entry.w == NO_HIT) {\n        return;\n    }\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_FLAT)\n        // When the cylinder is perfectly thin it's necessary to sandwich the\n        // inner cylinder intersection inside the outer cylinder intersection.\n\n        // Without this special case,\n        // [outerMin, outerMax, innerMin, innerMax] will bubble sort to\n        // [outerMin, innerMin, outerMax, innerMax] which will cause the back\n        // side of the cylinder to be invisible because it will think the ray\n        // is still inside the inner (negative) cylinder after exiting the\n        // outer (positive) cylinder.\n\n        // With this special case,\n        // [outerMin, innerMin, innerMax, outerMax] will bubble sort to\n        // [outerMin, innerMin, innerMax, outerMax] which will work correctly.\n\n        // Note: If initializeIntersections() changes its sorting function\n        // from bubble sort to something else, this code may need to change.\n        RayShapeIntersection innerIntersect = intersectCylinder(ray, 1.0, false);\n        setSurfaceIntersection(ix, 0, outerIntersect.entry, true, true);  // positive, enter\n        setSurfaceIntersection(ix, 1, innerIntersect.entry, false, true); // negative, enter\n        setSurfaceIntersection(ix, 2, innerIntersect.exit, false, false); // negative, exit\n        setSurfaceIntersection(ix, 3, outerIntersect.exit, true, false);  // positive, exit\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_RADIUS_MIN)\n        RayShapeIntersection innerIntersect = intersectCylinder(ray, u_cylinderRenderRadiusMinMax.x, false);\n        setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_RADIUS_MIN, innerIntersect);\n    #endif\n\n    #if defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_UNDER_HALF)\n        RayShapeIntersection wedgeIntersect = intersectRegularWedge(ray, u_cylinderRenderAngleMinMax);\n        setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_ANGLE, wedgeIntersect);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_OVER_HALF)\n        RayShapeIntersection wedgeIntersects[2];\n        intersectFlippedWedge(ray, u_cylinderRenderAngleMinMax, wedgeIntersects);\n        setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 0, wedgeIntersects[0]);\n        setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 1, wedgeIntersects[1]);\n    #elif defined(CYLINDER_HAS_RENDER_BOUNDS_ANGLE_RANGE_EQUAL_ZERO)\n        RayShapeIntersection wedgeIntersects[2];\n        intersectHalfPlane(ray, u_cylinderRenderAngleMinMax.x, wedgeIntersects);\n        setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 0, wedgeIntersects[0]);\n        setShapeIntersection(ix, CYLINDER_INTERSECTION_INDEX_ANGLE + 1, wedgeIntersects[1]);\n    #endif\n}\n"},189670:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, Intersections,\n// setIntersectionPair, INF_HIT, NO_HIT\n\n/* intersectDepth defines (set in Scene/VoxelRenderResources.js)\n#define DEPTH_INTERSECTION_INDEX ###\n*/\n\nuniform mat4 u_transformPositionViewToUv;\n\nvoid intersectDepth(in vec2 screenCoord, in Ray ray, inout Intersections ix) {\n    float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, screenCoord));\n    float entry;\n    float exit;\n    if (logDepthOrDepth != 0.0) {\n        // Calculate how far the ray must travel before it hits the depth buffer.\n        vec4 eyeCoordinateDepth = czm_screenToEyeCoordinates(screenCoord, logDepthOrDepth);\n        eyeCoordinateDepth /= eyeCoordinateDepth.w;\n        vec3 depthPositionUv = vec3(u_transformPositionViewToUv * eyeCoordinateDepth);\n        entry = dot(depthPositionUv - ray.pos, ray.dir);\n        exit = +INF_HIT;\n    } else {\n        // There's no depth at this location.\n        entry = NO_HIT;\n        exit = NO_HIT;\n    }\n    ix.distanceToDepthBuffer = entry;\n#if defined(DEPTH_TEST)\n    setIntersectionPair(ix, DEPTH_INTERSECTION_INDEX, vec2(entry, exit));\n#endif\n}\n"},485326:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See IntersectionUtils.glsl for the definitions of Ray, NO_HIT, INF_HIT, Intersections,\n// RayShapeIntersection, setSurfaceIntersection, setShapeIntersection\n// See IntersectLongitude.glsl for the definitions of intersectHalfPlane,\n// intersectFlippedWedge, intersectRegularWedge\n\n/* Ellipsoid defines (set in Scene/VoxelEllipsoidShape.js)\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF\n#define ELLIPSOID_INTERSECTION_INDEX_LONGITUDE\n#define ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX\n#define ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN\n#define ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX\n#define ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN\n*/\n\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE)\n    uniform vec2 u_ellipsoidRenderLongitudeMinMax;\n#endif\nuniform float u_eccentricitySquared;\nuniform vec2 u_ellipsoidRenderLatitudeSinMinMax;\nuniform vec2 u_clipMinMaxHeight;\n\nRayShapeIntersection intersectZPlane(in Ray ray, in float z) {\n    float t = -ray.pos.z / ray.dir.z;\n\n    bool startsOutside = sign(ray.pos.z) == sign(z);\n    bool entry = (t >= 0.0) != startsOutside;\n\n    vec4 intersect = vec4(0.0, 0.0, z, t);\n    vec4 farSide = vec4(normalize(ray.dir), INF_HIT);\n\n    if (entry) {\n        return RayShapeIntersection(intersect, farSide);\n    } else {\n        return RayShapeIntersection(-1.0 * farSide, intersect);\n    }\n}\n\nRayShapeIntersection intersectHeight(in Ray ray, in float relativeHeight, in bool convex)\n{\n    // Scale the ray by the ellipsoid axes to make it a unit sphere\n    // Note: approximating ellipsoid + height as an ellipsoid\n    vec3 radiiCorrection = u_ellipsoidRadiiUv / (u_ellipsoidRadiiUv + relativeHeight);\n    vec3 position = ray.pos * radiiCorrection;\n    vec3 direction = ray.dir * radiiCorrection;\n\n    float a = dot(direction, direction); // ~ 1.0 (or maybe 4.0 if ray is scaled)\n    float b = dot(direction, position); // roughly inside [-1.0, 1.0] when zoomed in\n    float c = dot(position, position) - 1.0; // ~ 0.0 when zoomed in.\n    float determinant = b * b - a * c; // ~ b * b when zoomed in\n\n    if (determinant < 0.0) {\n        vec4 miss = vec4(normalize(direction), NO_HIT);\n        return RayShapeIntersection(miss, miss);\n    }\n\n    determinant = sqrt(determinant);\n\n    // Compute larger root using standard formula\n    float signB = b < 0.0 ? -1.0 : 1.0;\n    // The other root may suffer from subtractive cancellation in the standard formula.\n    // Compute it from the first root instead.\n    float t1 = (-b - signB * determinant) / a;\n    float t2 = c / (a * t1);\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n\n    float directionScale = convex ? 1.0 : -1.0;\n    vec3 d1 = directionScale * normalize(position + tmin * direction);\n    vec3 d2 = directionScale * normalize(position + tmax * direction);\n\n    return RayShapeIntersection(vec4(d1, tmin), vec4(d2, tmax));\n}\n\n/**\n * Given a circular cone around the z-axis, with apex at the origin,\n * find the parametric distance(s) along a ray where that ray intersects\n * the cone.\n * The cone opening angle is described by the squared cosine of\n * its half-angle (the angle between the Z-axis and the surface)\n */\nvec2 intersectDoubleEndedCone(in Ray ray, in float cosSqrHalfAngle)\n{\n    vec3 o = ray.pos;\n    vec3 d = ray.dir;\n    float sinSqrHalfAngle = 1.0 - cosSqrHalfAngle;\n\n    float aSin = d.z * d.z * sinSqrHalfAngle;\n    float aCos = -dot(d.xy, d.xy) * cosSqrHalfAngle;\n    float a = aSin + aCos;\n\n    float bSin = d.z * o.z * sinSqrHalfAngle;\n    float bCos = -dot(o.xy, d.xy) * cosSqrHalfAngle;\n    float b = bSin + bCos;\n\n    float cSin = o.z * o.z * sinSqrHalfAngle;\n    float cCos = -dot(o.xy, o.xy) * cosSqrHalfAngle;\n    float c = cSin + cCos;\n    // determinant = b * b - a * c. But bSin * bSin = aSin * cSin.\n    // Avoid subtractive cancellation by expanding to eliminate these terms\n    float determinant = 2.0 * bSin * bCos + bCos * bCos - aSin * cCos - aCos * cSin - aCos * cCos;\n\n    if (determinant < 0.0) {\n        return vec2(NO_HIT);\n    } else if (a == 0.0) {\n        // Ray is parallel to cone surface\n        return (b == 0.0)\n            ? vec2(NO_HIT) // Ray is on cone surface\n            : vec2(-0.5 * c / b, NO_HIT);\n    }\n\n    determinant = sqrt(determinant);\n\n    // Compute larger root using standard formula\n    float signB = b < 0.0 ? -1.0 : 1.0;\n    float t1 = (-b - signB * determinant) / a;\n    // The other root may suffer from subtractive cancellation in the standard formula.\n    // Compute it from the first root instead.\n    float t2 = c / (a * t1);\n    float tmin = min(t1, t2);\n    float tmax = max(t1, t2);\n    return vec2(tmin, tmax);\n}\n\n/**\n * Given a point on a conical surface, find the surface normal at that point.\n */\nvec3 getConeNormal(in vec3 p, in bool convex) {\n    // Start with radial component pointing toward z-axis\n    vec2 radial = -abs(p.z) * normalize(p.xy);\n    // Z component points toward opening of cone\n    float zSign = (p.z < 0.0) ? -1.0 : 1.0;\n    float z = length(p.xy) * zSign;\n    // Flip normal if shape is convex\n    float flip = (convex) ? -1.0 : 1.0;\n    return normalize(vec3(radial, z) * flip);\n}\n\n/**\n * Compute the shift between the ellipsoid origin and the apex of a cone of latitude\n */\nfloat getLatitudeConeShift(in float sinLatitude) {\n    // Find prime vertical radius of curvature: \n    // the distance along the ellipsoid normal to the intersection with the z-axis\n    float x2 = u_eccentricitySquared * sinLatitude * sinLatitude;\n    float primeVerticalRadius = inversesqrt(1.0 - x2);\n\n    // Compute a shift from the origin to the intersection of the cone with the z-axis\n    return primeVerticalRadius * u_eccentricitySquared * sinLatitude;\n}\n\nvoid intersectFlippedCone(in Ray ray, in float cosHalfAngle, out RayShapeIntersection intersections[2]) {\n    // Undo the scaling from ellipsoid to sphere\n    ray.pos = ray.pos * u_ellipsoidRadiiUv;\n    ray.dir = ray.dir * u_ellipsoidRadiiUv;\n    // Shift the ray to account for the latitude cone not being centered at the Earth center\n    ray.pos.z += getLatitudeConeShift(cosHalfAngle);\n\n    float cosSqrHalfAngle = cosHalfAngle * cosHalfAngle;\n    vec2 intersect = intersectDoubleEndedCone(ray, cosSqrHalfAngle);\n\n    vec4 miss = vec4(normalize(ray.dir), NO_HIT);\n    vec4 farSide = vec4(normalize(ray.dir), INF_HIT);\n\n    // Initialize output with no intersections\n    intersections[0].entry = -1.0 * farSide;\n    intersections[0].exit = farSide;\n    intersections[1].entry = miss;\n    intersections[1].exit = miss;\n\n    if (intersect.x == NO_HIT) {\n        return;\n    }\n\n    // Find the points of intersection\n    float tmin = intersect.x;\n    float tmax = intersect.y;\n    vec3 p0 = ray.pos + tmin * ray.dir;\n    vec3 p1 = ray.pos + tmax * ray.dir;\n\n    vec4 intersect0 = vec4(getConeNormal(p0, true), tmin);\n    vec4 intersect1 = vec4(getConeNormal(p1, true), tmax);\n\n    bool p0InShadowCone = sign(p0.z) != sign(cosHalfAngle);\n    bool p1InShadowCone = sign(p1.z) != sign(cosHalfAngle);\n\n    if (p0InShadowCone && p1InShadowCone) {\n        // no valid intersections\n    } else if (p0InShadowCone) {\n        intersections[0].exit = intersect1;\n    } else if (p1InShadowCone) {\n        intersections[0].entry = intersect0;\n    } else {\n        intersections[0].exit = intersect0;\n        intersections[1].entry = intersect1;\n        intersections[1].exit = farSide;\n    }\n}\n\nRayShapeIntersection intersectRegularCone(in Ray ray, in float cosHalfAngle, in bool convex) {\n    // Undo the scaling from ellipsoid to sphere\n    ray.pos = ray.pos * u_ellipsoidRadiiUv;\n    ray.dir = ray.dir * u_ellipsoidRadiiUv;\n    // Shift the ray to account for the latitude cone not being centered at the Earth center\n    ray.pos.z += getLatitudeConeShift(cosHalfAngle);\n\n    float cosSqrHalfAngle = cosHalfAngle * cosHalfAngle;\n    vec2 intersect = intersectDoubleEndedCone(ray, cosSqrHalfAngle);\n\n    vec4 miss = vec4(normalize(ray.dir), NO_HIT);\n    vec4 farSide = vec4(normalize(ray.dir), INF_HIT);\n\n    if (intersect.x == NO_HIT) {\n        return RayShapeIntersection(miss, miss);\n    }\n\n    // Find the points of intersection\n    float tmin = intersect.x;\n    float tmax = intersect.y;\n    vec3 p0 = ray.pos + tmin * ray.dir;\n    vec3 p1 = ray.pos + tmax * ray.dir;\n\n    vec4 intersect0 = vec4(getConeNormal(p0, convex), tmin);\n    vec4 intersect1 = vec4(getConeNormal(p1, convex), tmax);\n\n    bool p0InShadowCone = sign(p0.z) != sign(cosHalfAngle);\n    bool p1InShadowCone = sign(p1.z) != sign(cosHalfAngle);\n\n    if (p0InShadowCone && p1InShadowCone) {\n        return RayShapeIntersection(miss, miss);\n    } else if (p0InShadowCone) {\n        return RayShapeIntersection(intersect1, farSide);\n    } else if (p1InShadowCone) {\n        return RayShapeIntersection(-1.0 * farSide, intersect0);\n    } else {\n        return RayShapeIntersection(intersect0, intersect1);\n    }\n}\n\nvoid intersectShape(in Ray ray, inout Intersections ix) {\n    // Position is converted from [0,1] to [-1,+1] because shape intersections assume unit space is [-1,+1].\n    // Direction is scaled as well to be in sync with position.\n    ray.pos = ray.pos * 2.0 - 1.0;\n    ray.dir *= 2.0;\n\n    // Outer ellipsoid\n    RayShapeIntersection outerIntersect = intersectHeight(ray, u_clipMinMaxHeight.y, true);\n    setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MAX, outerIntersect);\n\n    // Exit early if the outer ellipsoid was missed.\n    if (outerIntersect.entry.w == NO_HIT) {\n        return;\n    }\n\n    // Inner ellipsoid\n    RayShapeIntersection innerIntersect = intersectHeight(ray, u_clipMinMaxHeight.x, false);\n\n    if (innerIntersect.entry.w == NO_HIT) {\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_HEIGHT_MIN, innerIntersect);\n    } else {\n        // When the ellipsoid is large and thin it's possible for floating point math\n        // to cause the ray to intersect the inner ellipsoid before the outer ellipsoid. \n        // To prevent this from happening, clamp innerIntersect to outerIntersect and\n        // sandwich the inner ellipsoid intersection inside the outer ellipsoid intersection.\n\n        // Without this special case,\n        // [outerMin, outerMax, innerMin, innerMax] will bubble sort to\n        // [outerMin, innerMin, outerMax, innerMax] which will cause the back\n        // side of the ellipsoid to be invisible because it will think the ray\n        // is still inside the inner (negative) ellipsoid after exiting the\n        // outer (positive) ellipsoid.\n\n        // With this special case,\n        // [outerMin, innerMin, innerMax, outerMax] will bubble sort to\n        // [outerMin, innerMin, innerMax, outerMax] which will work correctly.\n\n        // Note: If initializeIntersections() changes its sorting function\n        // from bubble sort to something else, this code may need to change.\n        innerIntersect.entry.w = max(innerIntersect.entry.w, outerIntersect.entry.w);\n        innerIntersect.exit.w = min(innerIntersect.exit.w, outerIntersect.exit.w);\n        setSurfaceIntersection(ix, 0, outerIntersect.entry, true, true);  // positive, enter\n        setSurfaceIntersection(ix, 1, innerIntersect.entry, false, true); // negative, enter\n        setSurfaceIntersection(ix, 2, innerIntersect.exit, false, false); // negative, exit\n        setSurfaceIntersection(ix, 3, outerIntersect.exit, true, false);  // positive, exit\n    }\n\n    // Bottom cone\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_UNDER_HALF)\n        RayShapeIntersection bottomConeIntersection = intersectRegularCone(ray, u_ellipsoidRenderLatitudeSinMinMax.x, false);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN, bottomConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_EQUAL_HALF)\n        RayShapeIntersection bottomConeIntersection = intersectZPlane(ray, -1.0);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN, bottomConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MIN_OVER_HALF)\n        RayShapeIntersection bottomConeIntersections[2];\n        intersectFlippedCone(ray, u_ellipsoidRenderLatitudeSinMinMax.x, bottomConeIntersections);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN + 0, bottomConeIntersections[0]);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MIN + 1, bottomConeIntersections[1]);\n    #endif\n\n    // Top cone\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_UNDER_HALF)\n        RayShapeIntersection topConeIntersections[2];\n        intersectFlippedCone(ray, u_ellipsoidRenderLatitudeSinMinMax.y, topConeIntersections);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX + 0, topConeIntersections[0]);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX + 1, topConeIntersections[1]);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_EQUAL_HALF)\n        RayShapeIntersection topConeIntersection = intersectZPlane(ray, 1.0);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX, topConeIntersection);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LATITUDE_MAX_OVER_HALF)\n        RayShapeIntersection topConeIntersection = intersectRegularCone(ray, u_ellipsoidRenderLatitudeSinMinMax.y, false);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LATITUDE_MAX, topConeIntersection);\n    #endif\n\n    // Wedge\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_EQUAL_ZERO)\n        RayShapeIntersection wedgeIntersects[2];\n        intersectHalfPlane(ray, u_ellipsoidRenderLongitudeMinMax.x, wedgeIntersects);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 0, wedgeIntersects[0]);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 1, wedgeIntersects[1]);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_UNDER_HALF)\n        RayShapeIntersection wedgeIntersect = intersectRegularWedge(ray, u_ellipsoidRenderLongitudeMinMax);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE, wedgeIntersect);\n    #elif defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_RANGE_OVER_HALF)\n        RayShapeIntersection wedgeIntersects[2];\n        intersectFlippedWedge(ray, u_ellipsoidRenderLongitudeMinMax, wedgeIntersects);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 0, wedgeIntersects[0]);\n        setShapeIntersection(ix, ELLIPSOID_INTERSECTION_INDEX_LONGITUDE + 1, wedgeIntersects[1]);\n    #endif\n}\n"},755774:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='// See IntersectionUtils.glsl for the definitions of Ray, NO_HIT, INF_HIT,\n// RayShapeIntersection\n\nvec4 intersectLongitude(in Ray ray, in float angle, in bool positiveNormal) {\n    float normalSign = positiveNormal ? 1.0 : -1.0;\n    vec2 planeNormal = vec2(-sin(angle), cos(angle)) * normalSign;\n\n    vec2 position = ray.pos.xy;\n    vec2 direction = ray.dir.xy;\n    float approachRate = dot(direction, planeNormal);\n    float distance = -dot(position, planeNormal);\n\n    float t = (approachRate == 0.0)\n        ? NO_HIT\n        : distance / approachRate;\n\n    return vec4(planeNormal, 0.0, t);\n}\n\nRayShapeIntersection intersectHalfSpace(in Ray ray, in float angle, in bool positiveNormal)\n{\n    vec4 intersection = intersectLongitude(ray, angle, positiveNormal);\n    vec4 farSide = vec4(normalize(ray.dir), INF_HIT);\n\n    bool hitFront = (intersection.w > 0.0) == (dot(ray.pos.xy, intersection.xy) > 0.0);\n    if (!hitFront) {\n        return RayShapeIntersection(intersection, farSide);\n    } else {\n        return RayShapeIntersection(-1.0 * farSide, intersection);\n    }\n}\n\nvoid intersectFlippedWedge(in Ray ray, in vec2 minMaxAngle, out RayShapeIntersection intersections[2])\n{\n    intersections[0] = intersectHalfSpace(ray, minMaxAngle.x, false);\n    intersections[1] = intersectHalfSpace(ray, minMaxAngle.y, true);\n}\n\nbool hitPositiveHalfPlane(in Ray ray, in vec4 intersection, in bool positiveNormal) {\n    float normalSign = positiveNormal ? 1.0 : -1.0;\n    vec2 planeDirection = vec2(intersection.y, -intersection.x) * normalSign;\n    vec2 hit = ray.pos.xy + intersection.w * ray.dir.xy;\n    return dot(hit, planeDirection) > 0.0;\n}\n\nvoid intersectHalfPlane(in Ray ray, in float angle, out RayShapeIntersection intersections[2]) {\n    vec4 intersection = intersectLongitude(ray, angle, true);\n    vec4 farSide = vec4(normalize(ray.dir), INF_HIT);\n\n    if (hitPositiveHalfPlane(ray, intersection, true)) {\n        intersections[0].entry = -1.0 * farSide;\n        intersections[0].exit = vec4(-1.0 * intersection.xy, 0.0, intersection.w);\n        intersections[1].entry = intersection;\n        intersections[1].exit = farSide;\n    } else {\n        vec4 miss = vec4(normalize(ray.dir), NO_HIT);\n        intersections[0].entry = -1.0 * farSide;\n        intersections[0].exit = farSide;\n        intersections[1].entry = miss;\n        intersections[1].exit = miss;\n    }\n}\n\nRayShapeIntersection intersectRegularWedge(in Ray ray, in vec2 minMaxAngle)\n{\n    // Note: works for maxAngle > minAngle + pi, where the "regular wedge"\n    // is actually a negative volume.\n    // Compute intersections with the two planes.\n    // Normals will point toward the "outside" (negative space)\n    vec4 intersect1 = intersectLongitude(ray, minMaxAngle.x, false);\n    vec4 intersect2 = intersectLongitude(ray, minMaxAngle.y, true);\n\n    // Choose intersection with smallest T as the "first", the other as "last"\n    // Note: first or last could be in the "shadow" wedge, beyond the tip\n    bool inOrder = intersect1.w <= intersect2.w;\n    vec4 first = inOrder ? intersect1 : intersect2;\n    vec4 last = inOrder ? intersect2 : intersect1;\n\n    bool firstIsAhead = first.w >= 0.0;\n    bool startedInsideFirst = dot(ray.pos.xy, first.xy) < 0.0;\n    bool exitFromInside = firstIsAhead == startedInsideFirst;\n    bool lastIsAhead = last.w > 0.0;\n    bool startedOutsideLast = dot(ray.pos.xy, last.xy) >= 0.0;\n    bool enterFromOutside = lastIsAhead == startedOutsideLast;\n\n    vec4 farSide = vec4(normalize(ray.dir), INF_HIT);\n    vec4 miss = vec4(normalize(ray.dir), NO_HIT);\n\n    if (exitFromInside && enterFromOutside) {\n        // Ray crosses both faces of negative wedge, exiting then entering the positive shape\n        return RayShapeIntersection(first, last);\n    } else if (!exitFromInside && enterFromOutside) {\n        // Ray starts inside wedge. last is in shadow wedge, and first is actually the entry\n        return RayShapeIntersection(-1.0 * farSide, first);\n    } else if (exitFromInside && !enterFromOutside) {\n        // First intersection was in the shadow wedge, so last is actually the exit\n        return RayShapeIntersection(last, farSide);\n    } else { // !exitFromInside && !enterFromOutside\n        // Both intersections were in the shadow wedge\n        return RayShapeIntersection(miss, miss);\n    }\n}\n'},741641:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// Main intersection function for Voxel scenes.\n// See IntersectBox.glsl, IntersectCylinder.glsl, or IntersectEllipsoid.glsl\n// for the definition of intersectShape. The appropriate function is selected\n// based on the VoxelPrimitive shape type, and added to the shader in\n// Scene/VoxelRenderResources.js.\n// See also IntersectClippingPlane.glsl and IntersectDepth.glsl.\n// See IntersectionUtils.glsl for the definitions of Ray, NO_HIT,\n// getFirstIntersection, initializeIntersections, nextIntersection.\n\n/* Intersection defines (set in Scene/VoxelRenderResources.js)\n#define INTERSECTION_COUNT ###\n*/\n\nRayShapeIntersection intersectScene(in vec2 screenCoord, in Ray ray, out Intersections ix) {\n    // Do a ray-shape intersection to find the exact starting and ending points.\n    intersectShape(ray, ix);\n\n    // Exit early if the positive shape was completely missed or behind the ray.\n    RayShapeIntersection intersection = getFirstIntersection(ix);\n    if (intersection.entry.w == NO_HIT) {\n        // Positive shape was completely missed - so exit early.\n        return intersection;\n    }\n\n    // Clipping planes\n    #if defined(CLIPPING_PLANES)\n        intersectClippingPlanes(ray, ix);\n    #endif\n\n    // Depth\n    intersectDepth(screenCoord, ray, ix);\n\n    // Find the first intersection that's in front of the ray\n    #if (INTERSECTION_COUNT > 1)\n        initializeIntersections(ix);\n        for (int i = 0; i < INTERSECTION_COUNT; ++i) {\n            intersection = nextIntersection(ix);\n            if (intersection.exit.w > 0.0) {\n                // Set start to 0.0 when ray is inside the shape.\n                intersection.entry.w = max(intersection.entry.w, 0.0);\n                break;\n            }\n        }\n    #else\n        // Set start to 0.0 when ray is inside the shape.\n        intersection.entry.w = max(intersection.entry.w, 0.0);\n    #endif\n\n    return intersection;\n}\n"},418816:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Intersection defines\n#define INTERSECTION_COUNT ###\n*/\n\n#define NO_HIT (-czm_infinity)\n#define INF_HIT (czm_infinity * 0.5)\n\nstruct RayShapeIntersection {\n    vec4 entry;\n    vec4 exit;\n};\n\nvec4 intersectionMin(in vec4 intersect0, in vec4 intersect1)\n{\n    if (intersect0.w == NO_HIT) {\n        return intersect1;\n    } else if (intersect1.w == NO_HIT) {\n        return intersect0;\n    }\n    return (intersect0.w <= intersect1.w) ? intersect0 : intersect1;\n}\n\nvec4 intersectionMax(in vec4 intersect0, in vec4 intersect1)\n{\n    return (intersect0.w >= intersect1.w) ? intersect0 : intersect1;\n}\n\nRayShapeIntersection intersectIntersections(in Ray ray, in RayShapeIntersection intersect0, in RayShapeIntersection intersect1)\n{\n    bool missed = (intersect0.entry.w == NO_HIT) ||\n        (intersect1.entry.w == NO_HIT) ||\n        (intersect0.exit.w < intersect1.entry.w) ||\n        (intersect0.entry.w > intersect1.exit.w);\n    if (missed) {\n        vec4 miss = vec4(normalize(ray.dir), NO_HIT);\n        return RayShapeIntersection(miss, miss);\n    }\n\n    vec4 entry = intersectionMax(intersect0.entry, intersect1.entry);\n    vec4 exit = intersectionMin(intersect0.exit, intersect1.exit);\n\n    return RayShapeIntersection(entry, exit);\n}\n\nstruct Intersections {\n    // Don't access these member variables directly - call the functions instead.\n\n    // Store an array of ray-surface intersections. Each intersection is composed of:\n    //  .xyz for the surface normal at the intersection point\n    //  .w for the T value\n    // The scale of the normal encodes the shape intersection type:\n    //  length(intersection.xyz) = 1: positive shape entry\n    //  length(intersection.xyz) = 2: positive shape exit\n    //  length(intersection.xyz) = 3: negative shape entry\n    //  length(intersection.xyz) = 4: negative shape exit\n    // INTERSECTION_COUNT is the number of ray-*shape* (volume) intersections,\n    // so we need twice as many to track ray-*surface* intersections\n    vec4 intersections[INTERSECTION_COUNT * 2];\n    float distanceToDepthBuffer;\n\n    #if (INTERSECTION_COUNT > 1)\n        // Maintain state for future nextIntersection calls\n        int index;\n        int surroundCount;\n        bool surroundIsPositive;\n    #endif\n};\n\nRayShapeIntersection getFirstIntersection(in Intersections ix) \n{\n    return RayShapeIntersection(ix.intersections[0], ix.intersections[1]);\n}\n\nvec4 encodeIntersectionType(vec4 intersection, int index, bool entry)\n{\n    float scale = float(index > 0) * 2.0 + float(!entry) + 1.0;\n    return vec4(intersection.xyz * scale, intersection.w);\n}\n\n// Use defines instead of real functions because WebGL1 cannot access array with non-constant index.\n#define setIntersection(/*inout Intersections*/ ix, /*int*/ index, /*float*/ t, /*bool*/ positive, /*bool*/ enter) (ix).intersections[(index)] = vec4(0.0, float(!positive) * 2.0 + float(!enter) + 1.0, 0.0, (t))\n#define setIntersectionPair(/*inout Intersections*/ ix, /*int*/ index, /*vec2*/ entryExit) (ix).intersections[(index) * 2 + 0] = vec4(0.0, float((index) > 0) * 2.0 + 1.0, 0.0, (entryExit).x); (ix).intersections[(index) * 2 + 1] = vec4(0.0, float((index) > 0) * 2.0 + 2.0, 0.0, (entryExit).y)\n#define setSurfaceIntersection(/*inout Intersections*/ ix, /*int*/ index, /*vec4*/ intersection, /*bool*/ positive, /*bool*/ enter) (ix).intersections[(index)] = encodeIntersectionType((intersection), int(!positive), (enter))\n#define setShapeIntersection(/*inout Intersections*/ ix, /*int*/ index, /*RayShapeIntersection*/ intersection) (ix).intersections[(index) * 2 + 0] = encodeIntersectionType((intersection).entry, (index), true); (ix).intersections[(index) * 2 + 1] = encodeIntersectionType((intersection).exit, (index), false)\n\n#if (INTERSECTION_COUNT > 1)\nvoid initializeIntersections(inout Intersections ix) {\n    // Sort the intersections from min T to max T with bubble sort.\n    // Note: If this sorting function changes, some of the intersection test may\n    // need to be updated. Search for \"bubble sort\" to find those areas.\n    const int sortPasses = INTERSECTION_COUNT * 2 - 1;\n    for (int n = sortPasses; n > 0; --n) {\n        for (int i = 0; i < sortPasses; ++i) {\n            // The loop should be: for (i = 0; i < n; ++i) {...} but WebGL1 cannot\n            // loop with non-constant condition, so it has to break early instead\n            if (i >= n) { break; }\n\n            vec4 intersect0 = ix.intersections[i + 0];\n            vec4 intersect1 = ix.intersections[i + 1];\n\n            bool inOrder = intersect0.w <= intersect1.w;\n\n            ix.intersections[i + 0] = inOrder ? intersect0 : intersect1;\n            ix.intersections[i + 1] = inOrder ? intersect1 : intersect0;\n        }\n    }\n\n    // Prepare initial state for nextIntersection\n    ix.index = 0;\n    ix.surroundCount = 0;\n    ix.surroundIsPositive = false;\n}\n#endif\n\n#if (INTERSECTION_COUNT > 1)\nRayShapeIntersection nextIntersection(inout Intersections ix) {\n    vec4 surfaceIntersection = vec4(0.0, 0.0, 0.0, NO_HIT);\n    RayShapeIntersection shapeIntersection = RayShapeIntersection(surfaceIntersection, surfaceIntersection);\n\n    const int passCount = INTERSECTION_COUNT * 2;\n\n    if (ix.index == passCount) {\n        return shapeIntersection;\n    }\n\n    for (int i = 0; i < passCount; ++i) {\n        // The loop should be: for (i = ix.index; i < passCount; ++i) {...} but WebGL1 cannot\n        // loop with non-constant condition, so it has to continue instead.\n        if (i < ix.index) {\n            continue;\n        }\n\n        ix.index = i + 1;\n\n        surfaceIntersection = ix.intersections[i];\n        int intersectionType = int(length(surfaceIntersection.xyz) - 0.5);\n        bool currShapeIsPositive = intersectionType < 2;\n        bool enter = intMod(intersectionType, 2) == 0;\n\n        ix.surroundCount += enter ? +1 : -1;\n        ix.surroundIsPositive = currShapeIsPositive ? enter : ix.surroundIsPositive;\n\n        // entering positive or exiting negative\n        if (ix.surroundCount == 1 && ix.surroundIsPositive && enter == currShapeIsPositive) {\n            shapeIntersection.entry = surfaceIntersection;\n        }\n\n        // exiting positive or entering negative after being inside positive\n        bool exitPositive = !enter && currShapeIsPositive && ix.surroundCount == 0;\n        bool enterNegativeFromPositive = enter && !currShapeIsPositive && ix.surroundCount == 2 && ix.surroundIsPositive;\n        if (exitPositive || enterNegativeFromPositive) {\n            shapeIntersection.exit = surfaceIntersection;\n\n            // entry and exit have been found, so the loop can stop\n            if (exitPositive) {\n                // After exiting positive shape there is nothing left to intersect, so jump to the end index.\n                ix.index = passCount;\n            }\n            break;\n        }\n    }\n\n    return shapeIntersection;\n}\n#endif\n\n// NOTE: initializeIntersections, nextIntersection aren't even declared unless INTERSECTION_COUNT > 1\n"},195987:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See Octree.glsl for the definitions of SampleData and intMod\n\n/* Megatexture defines (set in Scene/VoxelRenderResources.js)\n#define SAMPLE_COUNT ###\n#define NEAREST_SAMPLING\n#define PADDING\n*/\n\nuniform ivec2 u_megatextureSliceDimensions; // number of slices per tile, in two dimensions\nuniform ivec2 u_megatextureTileDimensions; // number of tiles per megatexture, in two dimensions\nuniform vec2 u_megatextureVoxelSizeUv;\nuniform vec2 u_megatextureSliceSizeUv;\nuniform vec2 u_megatextureTileSizeUv;\n\n// Integer min, max, clamp: For WebGL1 only\nint intMin(int a, int b) {\n    return a <= b ? a : b;\n}\nint intMax(int a, int b) {\n    return a >= b ? a : b;\n}\nint intClamp(int v, int minVal, int maxVal) {\n    return intMin(intMax(v, minVal), maxVal);\n}\n\nvec2 index1DTo2DTexcoord(int index, ivec2 dimensions, vec2 uvScale)\n{\n    int indexX = intMod(index, dimensions.x);\n    int indexY = index / dimensions.x;\n    return vec2(indexX, indexY) * uvScale;\n}\n\n/*\n    How is 3D data stored in a 2D megatexture?\n\n    In this example there is only one loaded tile and it has 2x2x2 voxels (8 voxels total).\n    The data is sliced by Z. The data at Z = 0 is placed in texels (0,0), (0,1), (1,0), (1,1) and\n    the data at Z = 1 is placed in texels (2,0), (2,1), (3,0), (3,1).\n    Note that there could be empty space in the megatexture because it's a power of two.\n\n      0   1   2   3\n    +---+---+---+---+\n    |   |   |   |   | 3\n    +---+---+---+---+\n    |   |   |   |   | 2\n    +-------+-------+\n    |010|110|011|111| 1\n    |--- ---|--- ---|\n    |000|100|001|101| 0\n    +-------+-------+\n\n    When doing linear interpolation the megatexture needs to be sampled twice: once for\n    the Z slice above the voxel coordinate and once for the slice below. The two slices\n    are interpolated with fract(coord.z - 0.5). For example, a Z coordinate of 1.0 is\n    halfway between two Z slices so the interpolation factor is 0.5. Below is a side view\n    of the 3D voxel grid with voxel coordinates on the left side.\n\n    2 +---+\n      |001|\n    1 +-z-+\n      |000|\n    0 +---+\n\n    When doing nearest neighbor the megatexture only needs to be sampled once at the closest Z slice.\n*/\n\nProperties getPropertiesFromMegatexture(in SampleData sampleData) {\n    int tileIndex = sampleData.megatextureIndex;\n\n    vec3 voxelCoord = sampleData.inputCoordinate;\n    #if defined(NEAREST_SAMPLING)\n        // Round to the center of the nearest voxel\n        voxelCoord = floor(voxelCoord) + vec3(0.5);\n    #endif\n\n    // Tile location\n    vec2 tileUvOffset = index1DTo2DTexcoord(tileIndex, u_megatextureTileDimensions, u_megatextureTileSizeUv);\n\n    // Slice location\n    float slice = voxelCoord.z - 0.5;\n    int sliceIndex = int(floor(slice));\n    int sliceIndex0 = intClamp(sliceIndex, 0, u_inputDimensions.z - 1);\n    vec2 sliceUvOffset0 = index1DTo2DTexcoord(sliceIndex0, u_megatextureSliceDimensions, u_megatextureSliceSizeUv);\n\n    // Voxel location\n    vec2 voxelUvOffset = clamp(voxelCoord.xy, vec2(0.5), vec2(u_inputDimensions.xy) - vec2(0.5)) * u_megatextureVoxelSizeUv;\n\n    // Final location in the megatexture\n    vec2 uv0 = tileUvOffset + sliceUvOffset0 + voxelUvOffset;\n\n    #if defined(NEAREST_SAMPLING)\n        return getPropertiesFromMegatextureAtUv(uv0);\n    #else\n        float sliceLerp = fract(slice);\n        int sliceIndex1 = intMin(sliceIndex + 1, u_inputDimensions.z - 1);\n        vec2 sliceUvOffset1 = index1DTo2DTexcoord(sliceIndex1, u_megatextureSliceDimensions, u_megatextureSliceSizeUv);\n        vec2 uv1 = tileUvOffset + sliceUvOffset1 + voxelUvOffset;\n        Properties properties0 = getPropertiesFromMegatextureAtUv(uv0);\n        Properties properties1 = getPropertiesFromMegatextureAtUv(uv1);\n        return mixProperties(properties0, properties1, sliceLerp);\n    #endif\n}\n\n// Convert an array of sample datas to a final weighted properties.\nProperties accumulatePropertiesFromMegatexture(in SampleData sampleDatas[SAMPLE_COUNT]) {\n    #if (SAMPLE_COUNT == 1)\n        return getPropertiesFromMegatexture(sampleDatas[0]);\n    #else\n        // When more than one sample is taken the accumulator needs to start at 0\n        Properties properties = clearProperties();\n        for (int i = 0; i < SAMPLE_COUNT; ++i) {\n            float weight = sampleDatas[i].weight;\n\n            // Avoid reading the megatexture when the weight is 0 as it can be costly.\n            if (weight > 0.0) {\n                Properties tempProperties = getPropertiesFromMegatexture(sampleDatas[i]);\n                tempProperties = scaleProperties(tempProperties, weight);\n                properties = sumProperties(properties, tempProperties);\n            }\n        }\n        return properties;\n    #endif\n}\n"},940702:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// These octree flags must be in sync with GpuOctreeFlag in VoxelTraversal.js\n#define OCTREE_FLAG_INTERNAL 0\n#define OCTREE_FLAG_LEAF 1\n#define OCTREE_FLAG_PACKED_LEAF_FROM_PARENT 2\n\n#define OCTREE_MAX_LEVELS 32 // Harcoded value because GLSL doesn't like variable length loops\n\nuniform sampler2D u_octreeInternalNodeTexture;\nuniform vec2 u_octreeInternalNodeTexelSizeUv;\nuniform int u_octreeInternalNodeTilesPerRow;\n#if (SAMPLE_COUNT > 1)\nuniform sampler2D u_octreeLeafNodeTexture;\nuniform vec2 u_octreeLeafNodeTexelSizeUv;\nuniform int u_octreeLeafNodeTilesPerRow;\n#endif\nuniform ivec3 u_dimensions; // does not include padding, and is in the z-up orientation\nuniform ivec3 u_inputDimensions; // includes padding, and is in the orientation of the input data\n#if defined(PADDING)\n    uniform ivec3 u_paddingBefore;\n#endif\n\nstruct OctreeNodeData {\n    int data;\n    int flag;\n};\n\nstruct TraversalData {\n    ivec4 octreeCoords;\n    int parentOctreeIndex;\n};\n\nstruct SampleData {\n    int megatextureIndex;\n    ivec4 tileCoords;\n    vec3 tileUv;\n    vec3 inputCoordinate;\n    #if (SAMPLE_COUNT > 1)\n        float weight;\n    #endif\n};\n\n// Integer mod: For WebGL1 only\nint intMod(in int a, in int b) {\n    return a - (b * (a / b));\n}\nint normU8_toInt(in float value) {\n    return int(value * 255.0);\n}\nint normU8x2_toInt(in vec2 value) {\n    return int(value.x * 255.0) + 256 * int(value.y * 255.0);\n}\nfloat normU8x2_toFloat(in vec2 value) {\n    return float(normU8x2_toInt(value)) / 65535.0;\n}\n\nOctreeNodeData getOctreeNodeData(in vec2 octreeUv) {\n    vec4 texData = texture(u_octreeInternalNodeTexture, octreeUv);\n\n    OctreeNodeData data;\n    data.data = normU8x2_toInt(texData.xy);\n    data.flag = normU8x2_toInt(texData.zw);\n    return data;\n}\n\nOctreeNodeData getOctreeChildData(in int parentOctreeIndex, in ivec3 childCoord) {\n    int childIndex = childCoord.z * 4 + childCoord.y * 2 + childCoord.x;\n    int octreeCoordX = intMod(parentOctreeIndex, u_octreeInternalNodeTilesPerRow) * 9 + 1 + childIndex;\n    int octreeCoordY = parentOctreeIndex / u_octreeInternalNodeTilesPerRow;\n    vec2 octreeUv = u_octreeInternalNodeTexelSizeUv * vec2(float(octreeCoordX) + 0.5, float(octreeCoordY) + 0.5);\n    return getOctreeNodeData(octreeUv);\n}\n\nint getOctreeParentIndex(in int octreeIndex) {\n    int octreeCoordX = intMod(octreeIndex, u_octreeInternalNodeTilesPerRow) * 9;\n    int octreeCoordY = octreeIndex / u_octreeInternalNodeTilesPerRow;\n    vec2 octreeUv = u_octreeInternalNodeTexelSizeUv * vec2(float(octreeCoordX) + 0.5, float(octreeCoordY) + 0.5);\n    vec4 parentData = texture(u_octreeInternalNodeTexture, octreeUv);\n    int parentOctreeIndex = normU8x2_toInt(parentData.xy);\n    return parentOctreeIndex;\n}\n\n/**\n* Convert a position in the uv-space of the tileset bounding shape\n* into the uv-space of a tile within the tileset\n*/\nvec3 getTileUv(in vec3 shapePosition, in ivec4 octreeCoords) {\n\t// PERFORMANCE_IDEA: use bit-shifting (only in WebGL2)\n    float dimAtLevel = exp2(float(octreeCoords.w));\n    return shapePosition * dimAtLevel - vec3(octreeCoords.xyz);\n}\n\nvec3 getClampedTileUv(in vec3 shapePosition, in ivec4 octreeCoords) {\n    vec3 tileUv = getTileUv(shapePosition, octreeCoords);\n    return clamp(tileUv, vec3(0.0), vec3(1.0));\n}\n\nvoid addSampleCoordinates(in vec3 shapePosition, inout SampleData sampleData) {\n    vec3 tileUv = getClampedTileUv(shapePosition, sampleData.tileCoords);\n\n    vec3 inputCoordinate = tileUv * vec3(u_dimensions);\n#if defined(PADDING)\n    inputCoordinate += vec3(u_paddingBefore);\n#endif\n#if defined(Y_UP_METADATA_ORDER)\n#if defined(SHAPE_BOX)\n    float inputY = inputCoordinate.y;\n    inputCoordinate.y = float(u_inputDimensions.y) - inputCoordinate.z;\n    inputCoordinate.z = inputY;\n#elif defined(SHAPE_CYLINDER)\n    float angle = inputCoordinate.y;\n    float height = inputCoordinate.z;\n    #if (!defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE))\n    // Account for the different 0-angle convention in glTF vs 3DTiles\n    if (sampleData.tileCoords.w == 0) {\n        float angleCount = float(u_inputDimensions.z);\n        angle = mod(angle + angleCount / 2.0, angleCount);\n    }\n    #endif\n    inputCoordinate.y = height;\n    inputCoordinate.z = angle;\n#endif\n#endif\n\n    sampleData.tileUv = tileUv;\n    sampleData.inputCoordinate = inputCoordinate;\n}\n\nvoid getOctreeLeafSampleData(in OctreeNodeData data, in ivec4 octreeCoords, out SampleData sampleData) {\n    sampleData.megatextureIndex = data.data;\n    sampleData.tileCoords = (data.flag == OCTREE_FLAG_PACKED_LEAF_FROM_PARENT)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n}\n\n#if (SAMPLE_COUNT > 1)\nvoid getOctreeLeafSampleDatas(in OctreeNodeData data, in ivec4 octreeCoords, out SampleData sampleDatas[SAMPLE_COUNT]) {\n    int leafIndex = data.data;\n    int leafNodeTexelCount = 2;\n    // Adding 0.5 moves to the center of the texel\n    float leafCoordXStart = float(intMod(leafIndex, u_octreeLeafNodeTilesPerRow) * leafNodeTexelCount) + 0.5;\n    float leafCoordY = float(leafIndex / u_octreeLeafNodeTilesPerRow) + 0.5;\n\n    // Get an interpolation weight and a flag to determine whether to read the parent texture\n    vec2 leafUv0 = u_octreeLeafNodeTexelSizeUv * vec2(leafCoordXStart + 0.0, leafCoordY);\n    vec4 leafData0 = texture(u_octreeLeafNodeTexture, leafUv0);\n    float lerp = normU8x2_toFloat(leafData0.xy);\n    sampleDatas[0].weight = 1.0 - lerp;\n    sampleDatas[1].weight = lerp;\n    // TODO: this looks wrong? Should be comparing to OCTREE_FLAG_PACKED_LEAF_FROM_PARENT\n    sampleDatas[0].tileCoords = (normU8_toInt(leafData0.z) == 1)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n    sampleDatas[1].tileCoords = (normU8_toInt(leafData0.w) == 1)\n        ? ivec4(octreeCoords.xyz / 2, octreeCoords.w - 1)\n        : octreeCoords;\n\n    // Get megatexture indices for both samples\n    vec2 leafUv1 = u_octreeLeafNodeTexelSizeUv * vec2(leafCoordXStart + 1.0, leafCoordY);\n    vec4 leafData1 = texture(u_octreeLeafNodeTexture, leafUv1);\n    sampleDatas[0].megatextureIndex = normU8x2_toInt(leafData1.xy);\n    sampleDatas[1].megatextureIndex = normU8x2_toInt(leafData1.zw);\n}\n#endif\n\nOctreeNodeData traverseOctreeDownwards(in vec3 shapePosition, inout TraversalData traversalData) {\n    float sizeAtLevel = exp2(-1.0 * float(traversalData.octreeCoords.w));\n    vec3 start = vec3(traversalData.octreeCoords.xyz) * sizeAtLevel;\n    vec3 end = start + vec3(sizeAtLevel);\n    OctreeNodeData childData;\n\n    for (int i = 0; i < OCTREE_MAX_LEVELS; ++i) {\n        // Find out which octree child contains the position\n        // 0 if before center, 1 if after\n        vec3 center = 0.5 * (start + end);\n        vec3 childCoord = step(center, shapePosition);\n\n        // Get octree coords for the next level down\n        ivec4 octreeCoords = traversalData.octreeCoords;\n        traversalData.octreeCoords = ivec4(octreeCoords.xyz * 2 + ivec3(childCoord), octreeCoords.w + 1);\n\n        childData = getOctreeChildData(traversalData.parentOctreeIndex, ivec3(childCoord));\n\n        if (childData.flag != OCTREE_FLAG_INTERNAL) {\n            // leaf tile - stop traversing\n            break;\n        }\n\n        // interior tile - keep going deeper\n        start = mix(start, center, childCoord);\n        end = mix(center, end, childCoord);\n        traversalData.parentOctreeIndex = childData.data;\n    }\n\n    return childData;\n}\n\n/**\n* Transform a given position to an octree tile coordinate and a position within that tile,\n* and find the corresponding megatexture index and texture coordinates\n*/\nvoid traverseOctreeFromBeginning(in vec3 shapePosition, out TraversalData traversalData, out SampleData sampleDatas[SAMPLE_COUNT]) {\n    traversalData.octreeCoords = ivec4(0);\n    traversalData.parentOctreeIndex = 0;\n\n    OctreeNodeData nodeData = getOctreeNodeData(vec2(0.0));\n    if (nodeData.flag != OCTREE_FLAG_LEAF) {\n        nodeData = traverseOctreeDownwards(shapePosition, traversalData);\n    }\n\n    #if (SAMPLE_COUNT == 1)\n        getOctreeLeafSampleData(nodeData, traversalData.octreeCoords, sampleDatas[0]);\n        addSampleCoordinates(shapePosition, sampleDatas[0]);\n    #else\n        getOctreeLeafSampleDatas(nodeData, traversalData.octreeCoords, sampleDatas);\n        addSampleCoordinates(shapePosition, sampleDatas[0]);\n        addSampleCoordinates(shapePosition, sampleDatas[1]);\n    #endif\n}\n\nbool inRange(in vec3 v, in vec3 minVal, in vec3 maxVal) {\n    return clamp(v, minVal, maxVal) == v;\n}\n\nbool insideTile(in vec3 shapePosition, in ivec4 octreeCoords) {\n    vec3 tileUv = getTileUv(shapePosition, octreeCoords);\n\tbool inside = inRange(tileUv, vec3(0.0), vec3(1.0));\n\t// Assume (!) the position is always inside the root tile.\n\treturn inside || octreeCoords.w == 0;\n}\n\nvoid traverseOctreeFromExisting(in vec3 shapePosition, inout TraversalData traversalData, inout SampleData sampleDatas[SAMPLE_COUNT]) {\n    if (insideTile(shapePosition, traversalData.octreeCoords)) {\n        for (int i = 0; i < SAMPLE_COUNT; i++) {\n            addSampleCoordinates(shapePosition, sampleDatas[i]);\n        }\n        return;\n    }\n\n    // Go up tree until we find a parent tile containing shapePosition\n    for (int i = 0; i < OCTREE_MAX_LEVELS; ++i) {\n        traversalData.octreeCoords.xyz /= 2;\n        traversalData.octreeCoords.w -= 1;\n\n        if (insideTile(shapePosition, traversalData.octreeCoords)) {\n            break;\n        }\n\n        traversalData.parentOctreeIndex = getOctreeParentIndex(traversalData.parentOctreeIndex);\n    }\n\n    // Go down tree\n    OctreeNodeData nodeData = traverseOctreeDownwards(shapePosition, traversalData);\n\n    #if (SAMPLE_COUNT == 1)\n        getOctreeLeafSampleData(nodeData, traversalData.octreeCoords, sampleDatas[0]);\n        addSampleCoordinates(shapePosition, sampleDatas[0]);\n    #else\n        getOctreeLeafSampleDatas(nodeData, traversalData.octreeCoords, sampleDatas);\n        addSampleCoordinates(shapePosition, sampleDatas[0]);\n        addSampleCoordinates(shapePosition, sampleDatas[1]);\n    #endif\n}\n"},791533:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="// See Intersection.glsl for the definition of intersectScene\n// See IntersectionUtils.glsl for the definition of nextIntersection\n// See convertUvToBox.glsl, convertUvToCylinder.glsl, or convertUvToEllipsoid.glsl\n// for the definition of convertUvToShapeUvSpace. The appropriate function is \n// selected based on the VoxelPrimitive shape type, and added to the shader in\n// Scene/VoxelRenderResources.js.\n// See Octree.glsl for the definitions of TraversalData, SampleData,\n// traverseOctreeFromBeginning, and traverseOctreeFromExisting\n// See Megatexture.glsl for the definition of accumulatePropertiesFromMegatexture\n\n#define STEP_COUNT_MAX 1000 // Harcoded value because GLSL doesn't like variable length loops\n#if defined(PICKING_VOXEL)\n    #define ALPHA_ACCUM_MAX 0.1\n#else\n    #define ALPHA_ACCUM_MAX 0.98 // Must be > 0.0 and <= 1.0\n#endif\n\nuniform mat4 u_transformPositionUvToView;\nuniform mat3 u_transformDirectionViewToLocal;\nuniform vec3 u_cameraPositionUv;\nuniform vec3 u_cameraDirectionUv;\nuniform float u_stepSize;\n\n#if defined(PICKING)\n    uniform vec4 u_pickColor;\n#endif\n\nvec3 getSampleSize(in int level) {\n    vec3 sampleCount = exp2(float(level)) * vec3(u_dimensions);\n    vec3 sampleSizeUv = 1.0 / sampleCount;\n    return scaleShapeUvToShapeSpace(sampleSizeUv);\n}\n\n#define MINIMUM_STEP_SCALAR (0.02)\n#define SHIFT_FRACTION (0.001)\n\n/**\n * Given a coordinate within a tile, and sample spacings along a ray through\n * the coordinate, find the distance to the points where the ray entered and\n * exited the voxel cell, along with the surface normals at those points.\n * The surface normals are returned in shape space coordinates.\n */\nRayShapeIntersection getVoxelIntersection(in vec3 tileUv, in vec3 sampleSizeAlongRay) {\n    vec3 voxelCoord = tileUv * vec3(u_dimensions);\n    vec3 directions = sign(sampleSizeAlongRay);\n    vec3 positiveDirections = max(directions, 0.0);\n    vec3 entryCoord = mix(ceil(voxelCoord), floor(voxelCoord), positiveDirections);\n    vec3 exitCoord = entryCoord + directions;\n\n    vec3 distanceFromEntry = -abs((entryCoord - voxelCoord) * sampleSizeAlongRay);\n    float lastEntry = maxComponent(distanceFromEntry);\n    bvec3 isLastEntry = equal(distanceFromEntry, vec3(lastEntry));\n    vec3 entryNormal = -1.0 * vec3(isLastEntry) * directions;\n    vec4 entry = vec4(entryNormal, lastEntry);\n\n    vec3 distanceToExit = abs((exitCoord - voxelCoord) * sampleSizeAlongRay);\n    float firstExit = minComponent(distanceToExit);\n    bvec3 isFirstExit = equal(distanceToExit, vec3(firstExit));\n    vec3 exitNormal = vec3(isFirstExit) * directions;\n    vec4 exit = vec4(exitNormal, firstExit);\n\n    return RayShapeIntersection(entry, exit);\n}\n\nvec4 getStepSize(in SampleData sampleData, in Ray viewRay, in RayShapeIntersection shapeIntersection, in mat3 jacobianT, in float currentT) {\n    // The Jacobian is computed in a space where the shape spans [-1, 1].\n    // But the ray is marched in a space where the shape fills [0, 1].\n    // So we need to scale the Jacobian by 2.\n    vec3 gradient = 2.0 * viewRay.rawDir * jacobianT;\n    vec3 sampleSizeAlongRay = getSampleSize(sampleData.tileCoords.w) / gradient;\n\n    RayShapeIntersection voxelIntersection = getVoxelIntersection(sampleData.tileUv, sampleSizeAlongRay);\n\n    // Transform normal from shape space to Cartesian space\n    vec3 voxelNormal = normalize(jacobianT * voxelIntersection.entry.xyz);\n    // Compare with the shape intersection, to choose the appropriate normal\n    vec4 voxelEntry = vec4(voxelNormal, currentT + voxelIntersection.entry.w);\n    vec4 entry = intersectionMax(shapeIntersection.entry, voxelEntry);\n\n    float fixedStep = minComponent(abs(sampleSizeAlongRay)) * u_stepSize;\n    float shift = fixedStep * SHIFT_FRACTION;\n    float dt = voxelIntersection.exit.w + shift;\n    if ((currentT + dt) > shapeIntersection.exit.w) {\n        // Stop at end of shape\n        dt = shapeIntersection.exit.w - currentT + shift;\n    }\n    float stepSize = clamp(dt, fixedStep * MINIMUM_STEP_SCALAR, fixedStep + shift);\n\n    return vec4(entry.xyz, stepSize);\n}\n\nvec2 packIntToVec2(int value) {\n    float shifted = float(value) / 255.0;\n    float lowBits = fract(shifted);\n    float highBits = floor(shifted) / 255.0;\n    return vec2(highBits, lowBits);\n}\n\nvec2 packFloatToVec2(float value) {\n    float lowBits = fract(value);\n    float highBits = floor(value) / 255.0;\n    return vec2(highBits, lowBits);\n}\n\nint getSampleIndex(in SampleData sampleData) {\n    // tileUv = 1.0 is a valid coordinate but sampleIndex = u_inputDimensions is not.\n    // (tileUv = 1.0 corresponds to the far edge of the last sample, at index = u_inputDimensions - 1).\n    // Clamp to [0, voxelDimensions - 0.5) to avoid numerical error before flooring\n    vec3 maxCoordinate = vec3(u_inputDimensions) - vec3(0.5);\n    vec3 inputCoordinate = clamp(sampleData.inputCoordinate, vec3(0.0), maxCoordinate);\n    ivec3 sampleIndex = ivec3(floor(inputCoordinate));\n    // Convert to a 1D index for lookup in a 1D data array\n    return sampleIndex.x + u_inputDimensions.x * (sampleIndex.y + u_inputDimensions.y * sampleIndex.z);\n}\n\n/**\n * Compute the view ray at the current fragment, in the local UV coordinates of the shape.\n */\nRay getViewRayUv() {\n    vec4 eyeCoordinates = czm_windowToEyeCoordinates(gl_FragCoord);\n    vec3 viewDirUv;\n    vec3 viewPosUv;\n    if (czm_orthographicIn3D == 1.0) {\n        eyeCoordinates.z = 0.0;\n        viewPosUv = (u_transformPositionViewToUv * eyeCoordinates).xyz;\n        viewDirUv = normalize(u_cameraDirectionUv);\n    } else {\n        viewPosUv = u_cameraPositionUv;\n        viewDirUv = normalize(u_transformDirectionViewToLocal * eyeCoordinates.xyz);\n    }\n    #if defined(SHAPE_ELLIPSOID)\n        // viewDirUv has been scaled to a space where the ellipsoid is a sphere.\n        // Undo this scaling to get the raw direction.\n        vec3 rawDir = viewDirUv * u_ellipsoidRadiiUv;\n        return Ray(viewPosUv, viewDirUv, rawDir);\n    #else\n        return Ray(viewPosUv, viewDirUv, viewDirUv);\n    #endif\n}\n\nvoid main()\n{\n    Ray viewRayUv = getViewRayUv();\n\n    Intersections ix;\n    vec2 screenCoord = (gl_FragCoord.xy - czm_viewport.xy) / czm_viewport.zw; // [0,1]\n    RayShapeIntersection shapeIntersection = intersectScene(screenCoord, viewRayUv, ix);\n    // Exit early if the scene was completely missed.\n    if (shapeIntersection.entry.w == NO_HIT) {\n        discard;\n    }\n\n    float currentT = shapeIntersection.entry.w;\n    float endT = shapeIntersection.exit.w;\n    vec3 positionUv = viewRayUv.pos + currentT * viewRayUv.dir;\n    PointJacobianT pointJacobian = convertUvToShapeUvSpaceDerivative(positionUv);\n\n    // Traverse the tree from the start position\n    TraversalData traversalData;\n    SampleData sampleDatas[SAMPLE_COUNT];\n    traverseOctreeFromBeginning(pointJacobian.point, traversalData, sampleDatas);\n    vec4 step = getStepSize(sampleDatas[0], viewRayUv, shapeIntersection, pointJacobian.jacobianT, currentT);\n\n    #if defined(JITTER)\n        float noise = hash(screenCoord); // [0,1]\n        currentT += noise * step.w;\n        positionUv += noise * step.w * viewRayUv.dir;\n    #endif\n\n    FragmentInput fragmentInput;\n    #if defined(STATISTICS)\n        setStatistics(fragmentInput.metadataStatistics);\n    #endif\n\n    czm_modelMaterial materialOutput;\n    vec4 colorAccum = vec4(0.0);\n\n    for (int stepCount = 0; stepCount < STEP_COUNT_MAX; ++stepCount) {\n        // Read properties from the megatexture based on the traversal state\n        Properties properties = accumulatePropertiesFromMegatexture(sampleDatas);\n\n        // Prepare the custom shader inputs\n        copyPropertiesToMetadata(properties, fragmentInput.metadata);\n\n        fragmentInput.attributes.positionEC = vec3(u_transformPositionUvToView * vec4(positionUv, 1.0));\n        fragmentInput.attributes.normalEC = normalize(czm_normal * step.xyz);\n\n        fragmentInput.voxel.viewDirUv = viewRayUv.dir;\n\n        fragmentInput.voxel.travelDistance = step.w;\n        fragmentInput.voxel.stepCount = stepCount;\n        fragmentInput.voxel.tileIndex = sampleDatas[0].megatextureIndex;\n        fragmentInput.voxel.sampleIndex = getSampleIndex(sampleDatas[0]);\n        fragmentInput.voxel.distanceToDepthBuffer = ix.distanceToDepthBuffer - currentT;\n\n        // Run the custom shader\n        fragmentMain(fragmentInput, materialOutput);\n\n        // Sanitize the custom shader output\n        vec4 color = vec4(materialOutput.diffuse, materialOutput.alpha);\n        color.rgb = max(color.rgb, vec3(0.0));\n        color.a = clamp(color.a, 0.0, 1.0);\n\n        // Pre-multiplied alpha blend\n        colorAccum += (1.0 - colorAccum.a) * vec4(color.rgb * color.a, color.a);\n\n        // Stop traversing if the alpha has been fully saturated\n        if (colorAccum.a > ALPHA_ACCUM_MAX) {\n            colorAccum.a = ALPHA_ACCUM_MAX;\n            break;\n        }\n\n        if (step.w == 0.0) {\n            // Shape is infinitely thin. The ray may have hit the edge of a\n            // foreground voxel. Step ahead slightly to check for more voxels\n            step.w == 0.00001;\n        }\n\n        // Keep raymarching\n        currentT += step.w;\n        // Check if there's more intersections.\n        if (currentT > endT) {\n            #if (INTERSECTION_COUNT == 1)\n                break;\n            #else\n                shapeIntersection = nextIntersection(ix);\n                if (shapeIntersection.entry.w == NO_HIT) {\n                    break;\n                } else {\n                    // Found another intersection. Resume raymarching there\n                    currentT = shapeIntersection.entry.w;\n                    endT = shapeIntersection.exit.w;\n                }\n            #endif\n        }\n        positionUv = viewRayUv.pos + currentT * viewRayUv.dir;\n\n        // Traverse the tree from the current ray position.\n        // This is similar to traverseOctreeFromBeginning but is faster when the ray is in the same tile as the previous step.\n        pointJacobian = convertUvToShapeUvSpaceDerivative(positionUv);\n        traverseOctreeFromExisting(pointJacobian.point, traversalData, sampleDatas);\n        step = getStepSize(sampleDatas[0], viewRayUv, shapeIntersection, pointJacobian.jacobianT, currentT);\n    }\n\n    // Convert the alpha from [0,ALPHA_ACCUM_MAX] to [0,1]\n    colorAccum.a /= ALPHA_ACCUM_MAX;\n\n    #if defined(PICKING)\n        // If alpha is 0.0 there is nothing to pick\n        if (colorAccum.a == 0.0) {\n            discard;\n        }\n        out_FragColor = u_pickColor;\n    #elif defined(PICKING_VOXEL)\n        // If alpha is 0.0 there is nothing to pick\n        if (colorAccum.a == 0.0) {\n            discard;\n        }\n        vec2 megatextureId = packIntToVec2(sampleDatas[0].megatextureIndex);\n        vec2 sampleIndex = packIntToVec2(getSampleIndex(sampleDatas[0]));\n        out_FragColor = vec4(megatextureId, sampleIndex);\n    #else\n        out_FragColor = colorAccum;\n    #endif\n}\n"},677101:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="struct Ray {\n    vec3 pos;\n    vec3 dir;\n    vec3 rawDir;\n};\n\n#if defined(JITTER)\n/**\n * Generate a pseudo-random value for a given 2D screen coordinate.\n * Similar to https://www.shadertoy.com/view/4djSRW with a modified hashscale.\n */\nfloat hash(vec2 p)\n{\n    vec3 p3 = fract(vec3(p.xyx) * 50.0);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n#endif\n\nfloat minComponent(in vec3 v) {\n    return min(min(v.x, v.y), v.z);\n}\n\nfloat maxComponent(in vec3 v) {\n    return max(max(v.x, v.y), v.z);\n}\n\nstruct PointJacobianT {\n    vec3 point;\n    mat3 jacobianT;\n};\n"},305725:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="in vec2 position;\n\nuniform vec4 u_ndcSpaceAxisAlignedBoundingBox;\n\nvoid main() {\n    vec2 aabbMin = u_ndcSpaceAxisAlignedBoundingBox.xy;\n    vec2 aabbMax = u_ndcSpaceAxisAlignedBoundingBox.zw;\n    vec2 translation = 0.5 * (aabbMax + aabbMin);\n    vec2 scale = 0.5 * (aabbMax - aabbMin);\n    gl_Position = vec4(position * scale + translation, 0.0, 1.0);\n}\n"},774390:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Box defines (set in Scene/VoxelBoxShape.js)\n#define BOX_HAS_SHAPE_BOUNDS\n*/\n\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    uniform vec3 u_boxUvToShapeUvScale;\n    uniform vec3 u_boxUvToShapeUvTranslate;\n#endif\n\nPointJacobianT convertUvToShapeSpaceDerivative(in vec3 positionUv) {\n    // For BOX, UV space = shape space, so we can use positionUv as-is,\n    // and the Jacobian is the identity matrix, except that a step of 1\n    // only spans half the shape space [-1, 1], so the identity is scaled.\n    return PointJacobianT(positionUv, mat3(0.5));\n}\n\nvec3 convertShapeToShapeUvSpace(in vec3 positionShape) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return positionShape * u_boxUvToShapeUvScale + u_boxUvToShapeUvTranslate;\n#else\n    return positionShape;\n#endif\n}\n\nPointJacobianT convertUvToShapeUvSpaceDerivative(in vec3 positionUv) {\n    PointJacobianT pointJacobian = convertUvToShapeSpaceDerivative(positionUv);\n    pointJacobian.point = convertShapeToShapeUvSpace(pointJacobian.point);\n    return pointJacobian;\n}\n\nvec3 convertShapeUvToUvSpace(in vec3 shapeUv) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return (shapeUv - u_boxUvToShapeUvTranslate) / u_boxUvToShapeUvScale;\n#else\n    return shapeUv;\n#endif\n}\n\nvec3 scaleShapeUvToShapeSpace(in vec3 shapeUv) {\n#if defined(BOX_HAS_SHAPE_BOUNDS)\n    return shapeUv / u_boxUvToShapeUvScale;\n#else\n    return shapeUv;\n#endif\n}"},248877:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Cylinder defines (set in Scene/VoxelCylinderShape.js)\n#define CYLINDER_HAS_SHAPE_BOUNDS_RADIUS\n#define CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY\n#define CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED\n*/\n\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n    uniform vec2 u_cylinderUvToShapeUvRadius; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n    uniform vec2 u_cylinderUvToShapeUvHeight; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n    uniform vec2 u_cylinderUvToShapeUvAngle; // x = scale, y = offset\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY)\n    uniform vec2 u_cylinderShapeUvAngleMinMax;\n#endif\n#if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY) || defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED)\n    uniform float u_cylinderShapeUvAngleRangeZeroMid;\n#endif\n\nPointJacobianT convertUvToShapeSpaceDerivative(in vec3 positionUv) {\n    // Convert from Cartesian UV space [0, 1] to Cartesian local space [-1, 1]\n    vec3 position = positionUv * 2.0 - 1.0;\n\n    float radius = length(position.xy); // [0, 1]\n    vec3 radial = normalize(vec3(position.xy, 0.0));\n\n    // Shape space height is defined within [0, 1]\n    float height = positionUv.z; // [0, 1]\n    vec3 z = vec3(0.0, 0.0, 1.0);\n\n    float angle = atan(position.y, position.x);\n    vec3 east = normalize(vec3(-position.y, position.x, 0.0));\n\n    vec3 point = vec3(radius, angle, height);\n    mat3 jacobianT = mat3(radial, east / length(position.xy), z);\n    return PointJacobianT(point, jacobianT);\n}\n\nvec3 convertShapeToShapeUvSpace(in vec3 positionShape) {\n    float radius = positionShape.x;\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n        radius = radius * u_cylinderUvToShapeUvRadius.x + u_cylinderUvToShapeUvRadius.y;\n    #endif\n\n    float angle = (positionShape.y + czm_pi) / czm_twoPi;\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_MAX_REVERSED)\n            // Comparing against u_cylinderShapeUvAngleMinMax has precision problems. u_cylinderShapeUvAngleRangeZeroMid is more conservative.\n            angle += float(angle < u_cylinderShapeUvAngleRangeZeroMid);\n        #endif\n\n        // Avoid flickering from reading voxels from both sides of the -pi/+pi discontinuity.\n        #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MIN_DISCONTINUITY)\n            angle = angle > u_cylinderShapeUvAngleRangeZeroMid ? u_cylinderShapeUvAngleMinMax.x : angle;\n        #elif defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE_MAX_DISCONTINUITY)\n            angle = angle < u_cylinderShapeUvAngleRangeZeroMid ? u_cylinderShapeUvAngleMinMax.y : angle;\n        #endif\n\n        angle = angle * u_cylinderUvToShapeUvAngle.x + u_cylinderUvToShapeUvAngle.y;\n    #endif\n\n    float height = positionShape.z;\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n        height = height * u_cylinderUvToShapeUvHeight.x + u_cylinderUvToShapeUvHeight.y;\n    #endif\n\n    return vec3(radius, angle, height);\n}\n\nPointJacobianT convertUvToShapeUvSpaceDerivative(in vec3 positionUv) {\n    PointJacobianT pointJacobian = convertUvToShapeSpaceDerivative(positionUv);\n    pointJacobian.point = convertShapeToShapeUvSpace(pointJacobian.point);\n    return pointJacobian;\n}\n\nvec3 scaleShapeUvToShapeSpace(in vec3 shapeUv) {\n    float radius = shapeUv.x;\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_RADIUS)\n        radius /= u_cylinderUvToShapeUvRadius.x;\n    #endif\n\n    float angle = shapeUv.y * czm_twoPi;\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_ANGLE)\n        angle /= u_cylinderUvToShapeUvAngle.x;\n    #endif\n\n    float height = shapeUv.z;\n    #if defined(CYLINDER_HAS_SHAPE_BOUNDS_HEIGHT)\n        height /= u_cylinderUvToShapeUvHeight.x;\n    #endif\n\n    return vec3(radius, angle, height);\n}\n"},945042:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="/* Ellipsoid defines (set in Scene/VoxelEllipsoidShape.js)\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY\n#define ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED\n#define ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE\n*/\n\nuniform vec3 u_ellipsoidRadiiUv; // [0,1]\nuniform vec2 u_evoluteScale; // (radiiUv.x ^ 2 - radiiUv.z ^ 2) * vec2(1.0, -1.0) / radiiUv;\nuniform vec3 u_ellipsoidInverseRadiiSquaredUv;\n#if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY) || defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY) || defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED)\n    uniform vec3 u_ellipsoidShapeUvLongitudeMinMaxMid;\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n    uniform vec2 u_ellipsoidUvToShapeUvLongitude; // x = scale, y = offset\n#endif\n#if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n    uniform vec2 u_ellipsoidUvToShapeUvLatitude; // x = scale, y = offset\n#endif\nuniform float u_ellipsoidInverseHeightDifferenceUv;\n\n// robust iterative solution without trig functions\n// https://github.com/0xfaded/ellipse_demo/issues/1\n// https://stackoverflow.com/questions/22959698/distance-from-given-point-to-given-ellipse\n// Extended to return radius of curvature along with the point\nvec3 nearestPointAndRadiusOnEllipse(vec2 pos, vec2 radii) {\n    vec2 p = abs(pos);\n    vec2 inverseRadii = 1.0 / radii;\n\n    // We describe the ellipse parametrically: v = radii * vec2(cos(t), sin(t))\n    // but store the cos and sin of t in a vec2 for efficiency.\n    // Initial guess: t = pi/4\n    vec2 tTrigs = vec2(0.7071067811865476);\n    // Initial guess of point on ellipsoid\n    vec2 v = radii * tTrigs;\n    // Center of curvature of the ellipse at v\n    vec2 evolute = u_evoluteScale * tTrigs * tTrigs * tTrigs;\n\n    const int iterations = 3;\n    for (int i = 0; i < iterations; ++i) {\n        // Find the (approximate) intersection of p - evolute with the ellipsoid.\n        vec2 q = normalize(p - evolute) * length(v - evolute);\n        // Update the estimate of t.\n        tTrigs = (q + evolute) * inverseRadii;\n        tTrigs = normalize(clamp(tTrigs, 0.0, 1.0));\n        v = radii * tTrigs;\n        evolute = u_evoluteScale * tTrigs * tTrigs * tTrigs;\n    }\n\n    return vec3(v * sign(pos), length(v - evolute));\n}\n\nPointJacobianT convertUvToShapeSpaceDerivative(in vec3 positionUv) {\n    // Convert from UV space [0, 1] to local space [-1, 1]\n    vec3 position = positionUv * 2.0 - 1.0;\n    // Undo the scaling from ellipsoid to sphere\n    position = position * u_ellipsoidRadiiUv;\n\n    float longitude = atan(position.y, position.x);\n    vec3 east = normalize(vec3(-position.y, position.x, 0.0));\n\n    // Convert the 3D position to a 2D position relative to the ellipse (radii.x, radii.z)\n    // (assume radii.y == radii.x) and find the nearest point on the ellipse and its normal\n    float distanceFromZAxis = length(position.xy);\n    vec2 posEllipse = vec2(distanceFromZAxis, position.z);\n    vec3 surfacePointAndRadius = nearestPointAndRadiusOnEllipse(posEllipse, u_ellipsoidRadiiUv.xz);\n    vec2 surfacePoint = surfacePointAndRadius.xy;\n\n    vec2 normal2d = normalize(surfacePoint * u_ellipsoidInverseRadiiSquaredUv.xz);\n    float latitude = atan(normal2d.y, normal2d.x);\n    vec3 north = vec3(-normal2d.y * normalize(position.xy), abs(normal2d.x));\n\n    float heightSign = length(posEllipse) < length(surfacePoint) ? -1.0 : 1.0;\n    float height = heightSign * length(posEllipse - surfacePoint);\n    vec3 up = normalize(cross(east, north));\n\n    vec3 point = vec3(longitude, latitude, height);\n    mat3 jacobianT = mat3(east / distanceFromZAxis, north / (surfacePointAndRadius.z + height), up);\n    return PointJacobianT(point, jacobianT);\n}\n\nvec3 convertShapeToShapeUvSpace(in vec3 positionShape) {\n    // Longitude: shift & scale to [0, 1]\n    float longitude = (positionShape.x + czm_pi) / czm_twoPi;\n\n    // Correct the angle when max < min\n    // Technically this should compare against min longitude - but it has precision problems so compare against the middle of empty space.\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE_MIN_MAX_REVERSED)\n        longitude += float(longitude < u_ellipsoidShapeUvLongitudeMinMaxMid.z);\n    #endif\n\n    // Avoid flickering from reading voxels from both sides of the -pi/+pi discontinuity.\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MIN_DISCONTINUITY)\n        longitude = longitude > u_ellipsoidShapeUvLongitudeMinMaxMid.z ? u_ellipsoidShapeUvLongitudeMinMaxMid.x : longitude;\n    #endif\n    #if defined(ELLIPSOID_HAS_RENDER_BOUNDS_LONGITUDE_MAX_DISCONTINUITY)\n        longitude = longitude < u_ellipsoidShapeUvLongitudeMinMaxMid.z ? u_ellipsoidShapeUvLongitudeMinMaxMid.y : longitude;\n    #endif\n\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n        longitude = longitude * u_ellipsoidUvToShapeUvLongitude.x + u_ellipsoidUvToShapeUvLongitude.y;\n    #endif\n\n    // Latitude: shift and scale to [0, 1]\n    float latitude = (positionShape.y + czm_piOverTwo) / czm_pi;\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n        latitude = latitude * u_ellipsoidUvToShapeUvLatitude.x + u_ellipsoidUvToShapeUvLatitude.y;\n    #endif\n\n    // Height: scale to the range [0, 1]\n    float height = 1.0 + positionShape.z * u_ellipsoidInverseHeightDifferenceUv;\n\n    return vec3(longitude, latitude, height);\n}\n\nPointJacobianT convertUvToShapeUvSpaceDerivative(in vec3 positionUv) {\n    PointJacobianT pointJacobian = convertUvToShapeSpaceDerivative(positionUv);\n    pointJacobian.point = convertShapeToShapeUvSpace(pointJacobian.point);\n    return pointJacobian;\n}\n\nvec3 scaleShapeUvToShapeSpace(in vec3 shapeUv) {\n    // Convert from [0, 1] to radians [-pi, pi]\n    float longitude = shapeUv.x * czm_twoPi;\n    #if defined (ELLIPSOID_HAS_SHAPE_BOUNDS_LONGITUDE)\n        longitude /= u_ellipsoidUvToShapeUvLongitude.x;\n    #endif\n\n    // Convert from [0, 1] to radians [-pi/2, pi/2]\n    float latitude = shapeUv.y * czm_pi;\n    #if defined(ELLIPSOID_HAS_SHAPE_BOUNDS_LATITUDE)\n        latitude /= u_ellipsoidUvToShapeUvLatitude.x;\n    #endif\n    \n    float height = shapeUv.z / u_ellipsoidInverseHeightDifferenceUv;\n\n    return vec3(longitude, latitude, height);\n}\n"},566732:(e,t,n)=>{"use strict";n.d(t,{A:()=>J});var i=n(660662),o=n(267980),r=n(336946),a=n(565801),s=n(915325),A=n(491446),c=n(677354),l=n(605971),u=n(610750),d=n(955943),h=n(354975),g=n(520098),f=n(522216),p=n(805746),m=n(584164),_=n(810600),I=n(335557),E=n(720567),y=n(226698),C=n(116112),b=n(46257),B=n(855927),v=n(849750),w=n(897741),T=n(451227),S=n(534095),x=n(464088),D=n(62467),Q=n(86881),N=n(988609),R=n(920685),M=n(148784),L=n(874818),P=n(972757),O=n(450339);function F(e,t){if((0,A.A)(t)){const n=t.clock;(0,A.A)(n)&&n.getValue(e)}}function U(e){let t=e._useBrowserRecommendedResolution?1:window.devicePixelRatio;return t*=e._resolutionScale,(0,A.A)(e._scene)&&(e._scene.pixelRatio=t),t}function k(e){const t=e._canvas;let n=t.clientWidth,i=t.clientHeight;const o=U(e);e._canvasClientWidth=n,e._canvasClientHeight=i,n*=o,i*=o,t.width=n,t.height=i,e._canRender=0!==n&&0!==i,e._lastDevicePixelRatio=window.devicePixelRatio}function G(e){const t=e._canvas,n=t.width,i=t.height;if(0!==n&&0!==i){const t=e._scene.camera.frustum;(0,A.A)(t.aspectRatio)?t.aspectRatio=n/i:(t.top=t.right*(i/n),t.bottom=-t.top)}}function H(e,t){if(!(0,A.A)(e))throw new l.A("container is required.");e=(0,C.A)(e),t=t??s.A.EMPTY_OBJECT;const n=document.createElement("div");n.className="cesium-widget",e.appendChild(n);const i=document.createElement("canvas"),r=g.A.supportsImageRenderingPixelated();function c(){i!==i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()}this._supportsImageRenderingPixelated=r,r&&(i.style.imageRendering=g.A.imageRenderingValue()),i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},(t.blurActiveElementOnCanvasFocus??!0)&&(i.addEventListener("mousedown",c),i.addEventListener("pointerdown",c)),n.appendChild(i);const f=document.createElement("div");f.className="cesium-widget-credits";const p=(0,A.A)(t.creditContainer)?(0,C.A)(t.creditContainer):n;p.appendChild(f);const m=(0,A.A)(t.creditViewport)?(0,C.A)(t.creditViewport):n,_=t.showRenderLoopErrors??!0,y=t.useBrowserRecommendedResolution??!0;this._element=n,this._container=e,this._canvas=i,this._canvasClientWidth=0,this._canvasClientHeight=0,this._lastDevicePixelRatio=0,this._creditViewport=m,this._creditContainer=p,this._innerCreditContainer=f,this._canRender=!1,this._renderLoopRunning=!1,this._showRenderLoopErrors=_,this._resolutionScale=1,this._useBrowserRecommendedResolution=y,this._forceResize=!1,this._entityView=void 0,this._clockTrackedDataSource=void 0,this._trackedEntity=void 0,this._needTrackedEntityUpdate=!1,this._zoomIsFlight=!1,this._zoomTarget=void 0,this._zoomPromise=void 0,this._zoomOptions=void 0,this._trackedEntityChanged=new d.A,this._allowDataSourcesToSuspendAnimation=!0,this._clock=(0,A.A)(t.clock)?t.clock:new a.A,(0,A.A)(t.shouldAnimate)&&(this._clock.shouldAnimate=t.shouldAnimate),k(this);try{const e=t.ellipsoid??u.A.default,n=new x.A({canvas:i,contextOptions:t.contextOptions,creditContainer:f,creditViewport:m,ellipsoid:e,mapProjection:t.mapProjection,orderIndependentTranslucency:t.orderIndependentTranslucency,scene3DOnly:t.scene3DOnly??!1,shadows:t.shadows,mapMode2D:t.mapMode2D,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});this._scene=n,n.camera.constrainedAxis=o.A.UNIT_Z,U(this),G(this);let r=t.globe;(0,A.A)(r)||(r=new w.A(e)),!1!==r&&(n.globe=r,n.globe.shadows=t.terrainShadows??N.A.RECEIVE_ONLY);let a=t.skyBox;!(0,A.A)(a)&&u.A.WGS84.equals(e)&&(a=M.A.createEarthSkyBox()),!1!==a&&(n.skyBox=a,n.sun=new L.A,u.A.WGS84.equals(e)&&(n.moon=new S.A));let s=t.skyAtmosphere;!(0,A.A)(s)&&u.A.WGS84.equals(e)&&(s=new R.A(e),s.show=!1!==t.globe&&r.show),!1!==s&&(n.skyAtmosphere=s);let c=t.baseLayer;if(!1!==t.globe&&!1!==c&&((0,A.A)(c)||(c=T.A.fromWorldImagery()),n.imageryLayers.add(c)),(0,A.A)(t.terrainProvider)&&!1!==t.globe&&(n.terrainProvider=t.terrainProvider),(0,A.A)(t.terrain)&&!1!==t.globe){if((0,A.A)(t.terrainProvider))throw new l.A("Specify either options.terrainProvider or options.terrain.");n.setTerrain(t.terrain)}this._screenSpaceEventHandler=new Q.A(i),(0,A.A)(t.sceneMode)&&(t.sceneMode===D.A.SCENE2D&&this._scene.morphTo2D(0),t.sceneMode===D.A.COLUMBUS_VIEW&&this._scene.morphToColumbusView(0)),this._useDefaultRenderLoop=void 0,this.useDefaultRenderLoop=t.useDefaultRenderLoop??!0,this._targetFrameRate=void 0,this.targetFrameRate=t.targetFrameRate;const d=this;this._onRenderError=function(e,t){if(d._useDefaultRenderLoop=!1,d._renderLoopRunning=!1,d._showRenderLoopErrors){const e="An error occurred while rendering.  Rendering has stopped.";d.showErrorPanel(e,void 0,t)}},n.renderError.addEventListener(this._onRenderError);let g=t.dataSources,p=!1;(0,A.A)(g)||(g=new I.A,p=!0);const _=new E.A({scene:n,dataSourceCollection:g}),y=new h.A;this._dataSourceChangedListeners={},this._automaticallyTrackDataSourceClocks=t.automaticallyTrackDataSourceClocks??!0,this._dataSourceCollection=g,this._destroyDataSourceCollection=p,this._dataSourceDisplay=_,this._eventHelper=y,this._canAnimateUpdateCallback=this._updateCanAnimate,y.add(this._clock.onTick,H.prototype._onTick,this),y.add(n.morphStart,H.prototype._clearTrackedObject,this),y.add(g.dataSourceAdded,H.prototype._onDataSourceAdded,this),y.add(g.dataSourceRemoved,H.prototype._onDataSourceRemoved,this),y.add(n.postRender,H.prototype._postRender,this);const C=g.length;for(let e=0;e<C;e++)this._dataSourceAdded(g,g.get(e));this._dataSourceAdded(void 0,_.defaultDataSource),y.add(g.dataSourceAdded,H.prototype._dataSourceAdded,this),y.add(g.dataSourceRemoved,H.prototype._dataSourceRemoved,this)}catch(e){if(_){const t="Error constructing CesiumWidget.",n='Visit <a href="http://get.webgl.org">http://get.webgl.org</a> to verify that your web browser and hardware support WebGL.  Consider trying a different web browser or updating your video drivers.  Detailed error information is below:';this.showErrorPanel(t,n,e)}throw e}}Object.defineProperties(H.prototype,{container:{get:function(){return this._container}},canvas:{get:function(){return this._canvas}},creditContainer:{get:function(){return this._creditContainer}},creditViewport:{get:function(){return this._creditViewport}},scene:{get:function(){return this._scene}},imageryLayers:{get:function(){return this._scene.imageryLayers}},terrainProvider:{get:function(){return this._scene.terrainProvider},set:function(e){this._scene.terrainProvider=e}},creditDisplay:{get:function(){return this._scene.frameState.creditDisplay}},dataSourceDisplay:{get:function(){return this._dataSourceDisplay}},entities:{get:function(){return this._dataSourceDisplay.defaultDataSource.entities}},dataSources:{get:function(){return this._dataSourceCollection}},camera:{get:function(){return this._scene.camera}},ellipsoid:{get:function(){return this._scene.ellipsoid}},clock:{get:function(){return this._clock}},screenSpaceEventHandler:{get:function(){return this._screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._targetFrameRate},set:function(e){if(e<=0)throw new l.A("targetFrameRate must be greater than 0, or undefined.");this._targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._useDefaultRenderLoop},set:function(e){this._useDefaultRenderLoop!==e&&(this._useDefaultRenderLoop=e,e&&!this._renderLoopRunning&&function(e){e._renderLoopRunning=!0;let t=0;requestAnimationFrame(function n(i){if(!e.isDestroyed())if(e._useDefaultRenderLoop)try{const o=e._targetFrameRate;if((0,A.A)(o)){const r=1e3/o,a=i-t;a>r&&(e.resize(),e.render(),t=i-a%r),requestAnimationFrame(n)}else e.resize(),e.render(),requestAnimationFrame(n)}catch(t){if(e._useDefaultRenderLoop=!1,e._renderLoopRunning=!1,e._showRenderLoopErrors){const n="An error occurred while rendering.  Rendering has stopped.";e.showErrorPanel(n,void 0,t)}}else e._renderLoopRunning=!1})}(this))}},resolutionScale:{get:function(){return this._resolutionScale},set:function(e){if(e<=0)throw new l.A("resolutionScale must be greater than 0.");this._resolutionScale!==e&&(this._resolutionScale=e,this._forceResize=!0)}},useBrowserRecommendedResolution:{get:function(){return this._useBrowserRecommendedResolution},set:function(e){this._useBrowserRecommendedResolution!==e&&(this._useBrowserRecommendedResolution=e,this._forceResize=!0)}},allowDataSourcesToSuspendAnimation:{get:function(){return this._allowDataSourcesToSuspendAnimation},set:function(e){this._allowDataSourcesToSuspendAnimation=e}},trackedEntity:{get:function(){return this._trackedEntity},set:function(e){if(this._trackedEntity!==e){this._trackedEntity=e,Y(this);const t=this.scene,n=t.mode;(0,A.A)(e)&&(0,A.A)(e.position)?this._needTrackedEntityUpdate=!0:(this._needTrackedEntityUpdate=!1,n!==D.A.COLUMBUS_VIEW&&n!==D.A.SCENE2D||(t.screenSpaceCameraController.enableTranslate=!0),n!==D.A.COLUMBUS_VIEW&&n!==D.A.SCENE3D||(t.screenSpaceCameraController.enableTilt=!0),this._entityView=void 0,this.camera.lookAtTransform(m.A.IDENTITY)),this._trackedEntityChanged.raiseEvent(e),this.scene.requestRender()}}},trackedEntityChanged:{get:function(){return this._trackedEntityChanged}},clockTrackedDataSource:{get:function(){return this._clockTrackedDataSource},set:function(e){this._clockTrackedDataSource!==e&&(this._clockTrackedDataSource=e,F(this.clock,e))}}}),H.prototype.showErrorPanel=function(e,t,n){const i=this._element,o=document.createElement("div");o.className="cesium-widget-errorPanel";const r=document.createElement("div");r.className="cesium-widget-errorPanel-content",o.appendChild(r);const a=document.createElement("div");a.className="cesium-widget-errorPanel-header",a.appendChild(document.createTextNode(e)),r.appendChild(a);const s=document.createElement("div");function c(){s.style.maxHeight=`${Math.max(Math.round(.9*i.clientHeight-100),30)}px`}s.className="cesium-widget-errorPanel-scroll",r.appendChild(s),c(),(0,A.A)(window.addEventListener)&&window.addEventListener("resize",c,!1);const l=(0,A.A)(t),u=(0,A.A)(n);if(l||u){const i=document.createElement("div");if(i.className="cesium-widget-errorPanel-message",s.appendChild(i),u){let i=(0,f.A)(n);l||("string"==typeof n&&(n=new Error(n)),t=(0,f.A)({name:n.name,message:n.message}),i=n.stack),"undefined"!=typeof console&&console.error(`${e}\n${t}\n${i}`);const o=document.createElement("div");o.className="cesium-widget-errorPanel-message-details collapsed";const a=document.createElement("span");a.className="cesium-widget-errorPanel-more-details",a.appendChild(document.createTextNode("See more...")),o.appendChild(a),o.onclick=function(e){o.removeChild(a),o.appendChild(document.createTextNode(i)),o.className="cesium-widget-errorPanel-message-details",r.className="cesium-widget-errorPanel-content expanded",o.onclick=void 0},s.appendChild(o)}i.innerHTML=`<p>${t}</p>`}const d=document.createElement("div");d.className="cesium-widget-errorPanel-buttonPanel",r.appendChild(d);const h=document.createElement("button");h.setAttribute("type","button"),h.className="cesium-button",h.appendChild(document.createTextNode("OK")),h.onclick=function(){(0,A.A)(c)&&(0,A.A)(window.removeEventListener)&&window.removeEventListener("resize",c,!1),i.removeChild(o)},d.appendChild(h),i.appendChild(o)},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){const e=this.dataSources,t=e.length;for(let n=0;n<t;n++)this._dataSourceRemoved(e,e.get(n));this._dataSourceRemoved(void 0,this._dataSourceDisplay.defaultDataSource),this._dataSourceDisplay=this._dataSourceDisplay.destroy(),(0,A.A)(this._scene)&&(this._scene.renderError.removeEventListener(this._onRenderError),this._scene=this._scene.destroy()),this._container.removeChild(this._element),this._creditContainer.removeChild(this._innerCreditContainer),this._eventHelper.removeAll(),this._destroyDataSourceCollection&&(this._dataSourceCollection=this._dataSourceCollection.destroy()),(0,c.A)(this)},H.prototype.resize=function(){const e=this._canvas;(this._forceResize||this._canvasClientWidth!==e.clientWidth||this._canvasClientHeight!==e.clientHeight||this._lastDevicePixelRatio!==window.devicePixelRatio)&&(this._forceResize=!1,k(this),G(this),this._scene.requestRender())},H.prototype.render=function(){if(this._canRender){this._scene.initializeFrame();const e=this._clock.tick();this._scene.render(e)}else this._clock.tick()},H.prototype._dataSourceAdded=function(e,t){t.entities.collectionChanged.addEventListener(H.prototype._onEntityCollectionChanged,this)},H.prototype._dataSourceRemoved=function(e,t){const n=t.entities;n.collectionChanged.removeEventListener(H.prototype._onEntityCollectionChanged,this),(0,A.A)(this.trackedEntity)&&n.getById(this.trackedEntity.id)===this.trackedEntity&&(this.trackedEntity=void 0)},H.prototype._updateCanAnimate=function(e){this._clock.canAnimate=e};const V=new i.A;function z(e,t,n,i){if(!(0,A.A)(t))throw new l.A("zoomTarget is required.");Y(e);const o=new Promise(t=>{e._completeZoom=function(e){t(e)}});return e._zoomPromise=o,e._zoomIsFlight=i,e._zoomOptions=n,Promise.resolve(t).then(function(t){if(e._zoomPromise===o){if(t instanceof T.A){let n;return n=(0,A.A)(t.imageryProvider)?Promise.resolve(t.getImageryRectangle()):new Promise(e=>{const n=t.readyEvent.addEventListener(()=>{n(),e(t.getImageryRectangle())})}),void n.then(function(t){return(0,v.A)(t,e.scene)}).then(function(t){e._zoomPromise===o&&(e._zoomTarget=t)})}if(t instanceof B.A||t instanceof P.A||t instanceof O.A)e._zoomTarget=t;else{if(t.isLoading&&(0,A.A)(t.loadingEvent)){const n=t.loadingEvent.addEventListener(function(){n(),e._zoomPromise===o&&(e._zoomTarget=t.entities.values.slice(0))});return}Array.isArray(t)?e._zoomTarget=t.slice(0):(t=t.values??t,(0,A.A)(t.entities)&&(t=t.entities.values),Array.isArray(t)?e._zoomTarget=t.slice(0):e._zoomTarget=[t])}}}),e.scene.requestRender(),o}function j(e){e._zoomPromise=void 0,e._zoomTarget=void 0,e._zoomOptions=void 0}function Y(e){const t=e._zoomPromise;(0,A.A)(t)&&(j(e),e._completeZoom(!1))}H.prototype._onTick=function(e){const t=e.currentTime,n=this._dataSourceDisplay.update(t);this._allowDataSourcesToSuspendAnimation&&this._canAnimateUpdateCallback(n);const i=this._entityView;if((0,A.A)(i)){const e=this._trackedEntity;this._dataSourceDisplay.getBoundingSphere(e,!1,i.boundingSphere??V)===_.A.DONE&&i.update(t)}},H.prototype._onEntityCollectionChanged=function(e,t,n){const i=n.length;for(let e=0;e<i;e++){const t=n[e];this.trackedEntity===t&&(this.trackedEntity=void 0)}},H.prototype._clearTrackedObject=function(){this.trackedEntity=void 0},H.prototype._onDataSourceChanged=function(e){this.clockTrackedDataSource===e&&F(this.clock,e)},H.prototype._onDataSourceAdded=function(e,t){this._automaticallyTrackDataSourceClocks&&(this.clockTrackedDataSource=t);const n=t.entities.id,i=this._eventHelper.add(t.changedEvent,H.prototype._onDataSourceChanged,this);this._dataSourceChangedListeners[n]=i},H.prototype._onDataSourceRemoved=function(e,t){const n=this.clockTrackedDataSource===t,i=t.entities.id;if(this._dataSourceChangedListeners[i](),this._dataSourceChangedListeners[i]=void 0,n){const t=e.length;this._automaticallyTrackDataSourceClocks&&t>0?this.clockTrackedDataSource=e.get(t-1):this.clockTrackedDataSource=void 0}},H.prototype.zoomTo=function(e,t){return z(this,e,{offset:t},!1)},H.prototype.flyTo=function(e,t){return z(this,e,t,!0)},H.prototype._postRender=function(){!function(e){const t=e._zoomTarget;if(!(0,A.A)(t)||e.scene.mode===D.A.MORPHING)return;const n=e.scene,o=n.camera,a=e._zoomOptions??{};let s;function c(n){(0,A.A)(a.offset)||(a.offset=new p.A(0,-.5,n.radius)),s={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?o.flyToBoundingSphere(t.boundingSphere,s):(o.viewBoundingSphere(n,a.offset),o.lookAtTransform(m.A.IDENTITY),e._completeZoom(!0)),j(e)}if(t instanceof P.A){if((0,A.A)(t.boundingSphere))return void c(t.boundingSphere);const e=t.frameChanged.addEventListener(function(t){c(t.boundingSphere),e()});return}if(t instanceof B.A||t instanceof O.A)return void c(t.boundingSphere);if(t instanceof r.A)return s={destination:n.ellipsoid.cartographicToCartesian(t),duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?o.flyTo(s):(o.setView(s),e._completeZoom(!0)),void j(e);const l=t,u=[];for(let t=0,n=l.length;t<n;t++){const n=e._dataSourceDisplay.getBoundingSphere(l[t],!1,q);if(n===_.A.PENDING)return;n!==_.A.FAILED&&u.push(i.A.clone(q))}if(0===u.length)return void Y(e);e.trackedEntity=void 0;const d=i.A.fromBoundingSpheres(u);e._zoomIsFlight?(j(e),o.flyToBoundingSphere(d,{duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)},offset:a.offset})):(o.viewBoundingSphere(d,a.offset),o.lookAtTransform(m.A.IDENTITY),j(e),e._completeZoom(!0))}(this),function(e){if(!e._needTrackedEntityUpdate)return;const t=e._trackedEntity,n=e.clock.currentTime,i=b.A.getValueOrUndefined(t.position,n);if(!(0,A.A)(i))return;const o=e.scene,r=e._dataSourceDisplay.getBoundingSphere(t,!1,W);if(r===_.A.PENDING)return;const a=o.mode;a!==D.A.COLUMBUS_VIEW&&a!==D.A.SCENE2D||(o.screenSpaceCameraController.enableTranslate=!1),a!==D.A.COLUMBUS_VIEW&&a!==D.A.SCENE3D||(o.screenSpaceCameraController.enableTilt=!1);const s=r!==_.A.FAILED?W:void 0;e._entityView=new y.A(t,o,o.ellipsoid),e._entityView.update(n,s),e._needTrackedEntityUpdate=!1}(this)};const q=new i.A,W=new i.A,J=H},338863:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var i=n(41476),o=n(677354),r=n(491446),a=n(605971),s=n(116112),A=n(618168);const c="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink";let u;const d=i.A.fromCssColorString("rgba(247,250,255,0.384)"),h=i.A.fromCssColorString("rgba(143,191,255,0.216)"),g=i.A.fromCssColorString("rgba(153,197,255,0.098)"),f=i.A.fromCssColorString("rgba(255,255,255,0.086)"),p=i.A.fromCssColorString("rgba(255,255,255,0.267)"),m=i.A.fromCssColorString("rgba(255,255,255,0)"),_=i.A.fromCssColorString("rgba(66,67,68,0.3)"),I=i.A.fromCssColorString("rgba(0,0,0,0.5)");function E(e){return i.A.fromCssColorString(window.getComputedStyle(e).getPropertyValue("color"))}const y={animation_pathReset:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z"},animation_pathPause:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M13,5.5,7.5,5.5,7.5,25.5,13,25.5zM24.5,5.5,19,5.5,19,25.5,24.5,25.5z"},animation_pathPlay:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathPlayReverse:{tagName:"path",transform:"translate(16,16) scale(-0.85,0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathLoop:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z"},animation_pathClock:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-15.5)",d:"M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z"},animation_pathWingButton:{tagName:"path",d:"m 4.5,0.5 c -2.216,0 -4,1.784 -4,4 l 0,24 c 0,2.216 1.784,4 4,4 l 13.71875,0 C 22.478584,27.272785 27.273681,22.511272 32.5,18.25 l 0,-13.75 c 0,-2.216 -1.784,-4 -4,-4 l -24,0 z"},animation_pathPointer:{tagName:"path",d:"M-15,-65,-15,-55,15,-55,15,-65,0,-95z"},animation_pathSwooshFX:{tagName:"path",d:"m 85,0 c 0,16.617 -4.813944,35.356 -13.131081,48.4508 h 6.099803 c 8.317138,-13.0948 13.13322,-28.5955 13.13322,-45.2124 0,-46.94483 -38.402714,-85.00262 -85.7743869,-85.00262 -1.0218522,0 -2.0373001,0.0241 -3.0506131,0.0589 45.958443,1.59437 82.723058,35.77285 82.723058,81.70532 z"}};function C(e){const t=document.createElementNS(c,e.tagName);for(const n in e)if(e.hasOwnProperty(n)&&"tagName"!==n)if("children"===n){const n=e.children.length;for(let i=0;i<n;++i)t.appendChild(C(e.children[i]))}else 0===n.indexOf("xlink:")?t.setAttributeNS(l,n.substring(6),e[n]):"textContent"===n?t.textContent=e[n]:t.setAttribute(n,e[n]);return t}function b(e,t,n){const i=document.createElementNS(c,"text");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("class","cesium-animation-svgText");const o=document.createElementNS(c,"tspan");return o.textContent=n,i.appendChild(o),i}const B=new i.A;function v(e,t){const n=t.alpha,i=1-n;return B.red=e.red*i+t.red*n,B.green=e.green*i+t.green*n,B.blue=e.blue*i+t.blue*n,B.toCssColorString()}function w(e,t,n){const i=y[n];return C({tagName:"g",class:"cesium-animation-rectButton",transform:`translate(${e},${t})`,children:[{tagName:"rect",class:"cesium-animation-buttonGlow",width:32,height:32,rx:2,ry:2},{tagName:"rect",class:"cesium-animation-buttonMain",width:32,height:32,rx:4,ry:4},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]})}function T(e,t){this._viewModel=t,this.svgElement=e,this._enabled=void 0,this._toggled=void 0;const n=this;this._clickFunction=function(){const e=n._viewModel.command;e.canExecute&&e()},e.addEventListener("click",this._clickFunction,!0),this._subscriptions=[(0,A.A)(t,"toggled",this.setToggled,this),(0,A.A)(t,"tooltip",this.setTooltip,this),(0,A.A)(t.command,"canExecute",this.setEnabled,this)]}function S(e,t){if(!(0,r.A)(e))throw new a.A("container is required.");if(!(0,r.A)(t))throw new a.A("viewModel is required.");e=(0,s.A)(e),this._viewModel=t,this._container=e,this._centerX=0,this._centerY=0,this._defsElement=void 0,this._svgNode=void 0,this._topG=void 0,this._lastHeight=void 0,this._lastWidth=void 0;const n=e.ownerDocument,i=document.createElement("style");i.textContent=".cesium-animation-rectButton .cesium-animation-buttonGlow { filter: url(#animation_blurred); }.cesium-animation-rectButton .cesium-animation-buttonMain { fill: url(#animation_buttonNormal); }.cesium-animation-buttonToggled .cesium-animation-buttonMain { fill: url(#animation_buttonToggled); }.cesium-animation-rectButton:hover .cesium-animation-buttonMain { fill: url(#animation_buttonHovered); }.cesium-animation-buttonDisabled .cesium-animation-buttonMain { fill: url(#animation_buttonDisabled); }.cesium-animation-shuttleRingG .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshGradient); }.cesium-animation-shuttleRingG:hover .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshHovered); }.cesium-animation-shuttleRingPointer { fill: url(#animation_shuttleRingPointerGradient); }.cesium-animation-shuttleRingPausePointer { fill: url(#animation_shuttleRingPointerPaused); }.cesium-animation-knobOuter { fill: url(#animation_knobOuter); }.cesium-animation-knobInner { fill: url(#animation_knobInner); }",n.head.insertBefore(i,n.head.childNodes[0]);const o=document.createElement("div");o.className="cesium-animation-theme",o.innerHTML='<div class="cesium-animation-themeNormal"></div><div class="cesium-animation-themeHover"></div><div class="cesium-animation-themeSelect"></div><div class="cesium-animation-themeDisabled"></div><div class="cesium-animation-themeKnob"></div><div class="cesium-animation-themePointer"></div><div class="cesium-animation-themeSwoosh"></div><div class="cesium-animation-themeSwooshHover"></div>',this._theme=o,this._themeNormal=o.childNodes[0],this._themeHover=o.childNodes[1],this._themeSelect=o.childNodes[2],this._themeDisabled=o.childNodes[3],this._themeKnob=o.childNodes[4],this._themePointer=o.childNodes[5],this._themeSwoosh=o.childNodes[6],this._themeSwooshHover=o.childNodes[7];const d=document.createElementNS(c,"svg:svg");this._svgNode=d,d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",l);const h=document.createElementNS(c,"g");this._topG=h,this._realtimeSVG=new T(function(e,t,n){const i=y[n],o=y.animation_pathWingButton;return C({tagName:"g",class:"cesium-animation-rectButton",transform:"translate(3,4)",children:[{class:"cesium-animation-buttonGlow",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonMain",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]})}(0,0,"animation_pathClock"),t.playRealtimeViewModel),this._playReverseSVG=new T(w(44,99,"animation_pathPlayReverse"),t.playReverseViewModel),this._playForwardSVG=new T(w(124,99,"animation_pathPlay"),t.playForwardViewModel),this._pauseSVG=new T(w(84,99,"animation_pathPause"),t.pauseViewModel);const g=document.createElementNS(c,"g");g.appendChild(this._realtimeSVG.svgElement),g.appendChild(this._playReverseSVG.svgElement),g.appendChild(this._playForwardSVG.svgElement),g.appendChild(this._pauseSVG.svgElement);const f=C({tagName:"circle",class:"cesium-animation-shuttleRingBack",cx:100,cy:100,r:99});this._shuttleRingBackPanel=f;const p=y.animation_pathSwooshFX,m=y.animation_pathPointer,_=C({tagName:"g",class:"cesium-animation-shuttleRingSwoosh",children:[{tagName:p.tagName,transform:"translate(100,97) scale(-1,1)",id:"animation_pathSwooshFX",d:p.d},{tagName:p.tagName,transform:"translate(100,97)",id:"animation_pathSwooshFX",d:p.d},{tagName:"line",x1:100,y1:8,x2:100,y2:22}]});this._shuttleRingSwooshG=_,this._shuttleRingPointer=C({class:"cesium-animation-shuttleRingPointer",id:"animation_pathPointer",tagName:m.tagName,d:m.d});const I=C({tagName:"g",transform:"translate(100,100)"});this._knobOuter=C({tagName:"circle",class:"cesium-animation-knobOuter",cx:0,cy:0,r:71});const E=C({tagName:"circle",class:"cesium-animation-knobInner",cx:0,cy:0,r:61});this._knobDate=b(0,-24,""),this._knobTime=b(0,-7,""),this._knobStatus=b(0,-41,"");const B=C({tagName:"circle",class:"cesium-animation-blank",cx:0,cy:0,r:61}),v=document.createElementNS(c,"g");v.setAttribute("class","cesium-animation-shuttleRingG"),e.appendChild(o),h.appendChild(v),h.appendChild(I),h.appendChild(g),v.appendChild(f),v.appendChild(_),v.appendChild(this._shuttleRingPointer),I.appendChild(this._knobOuter),I.appendChild(E),I.appendChild(this._knobDate),I.appendChild(this._knobTime),I.appendChild(this._knobStatus),I.appendChild(B),d.appendChild(h),e.appendChild(d);const S=this;function x(e){!function(e,t){const n=e._viewModel,i=n.shuttleRingDragging;if(!i||u===e)if("mousedown"===t.type||i&&"mousemove"===t.type||"touchstart"===t.type&&1===t.touches.length||i&&"touchmove"===t.type&&1===t.touches.length){const o=e._centerX,r=e._centerY,a=e._svgNode.getBoundingClientRect();let s,A;if("touchstart"===t.type||"touchmove"===t.type?(s=t.touches[0].clientX,A=t.touches[0].clientY):(s=t.clientX,A=t.clientY),!i&&(s>a.right||s<a.left||A<a.top||A>a.bottom))return;const c=e._shuttleRingPointer.getBoundingClientRect(),l=s-o-a.left,d=A-r-a.top;let h=180*Math.atan2(d,l)/Math.PI+90;h>180&&(h-=360);const g=n.shuttleRingAngle;i||s<c.right&&s>c.left&&A>c.top&&A<c.bottom?(u=e,n.shuttleRingDragging=!0,n.shuttleRingAngle=h):h<g?n.slower():h>g&&n.faster(),t.preventDefault()}else e===u&&(u=void 0),n.shuttleRingDragging=!1}(S,e)}this._mouseCallback=x,f.addEventListener("mousedown",x,!0),f.addEventListener("touchstart",x,!0),_.addEventListener("mousedown",x,!0),_.addEventListener("touchstart",x,!0),n.addEventListener("mousemove",x,!0),n.addEventListener("touchmove",x,!0),n.addEventListener("mouseup",x,!0),n.addEventListener("touchend",x,!0),n.addEventListener("touchcancel",x,!0),this._shuttleRingPointer.addEventListener("mousedown",x,!0),this._shuttleRingPointer.addEventListener("touchstart",x,!0),this._knobOuter.addEventListener("mousedown",x,!0),this._knobOuter.addEventListener("touchstart",x,!0);const D=this._knobTime.childNodes[0],Q=this._knobDate.childNodes[0],N=this._knobStatus.childNodes[0];let R;this._subscriptions=[(0,A.A)(t.pauseViewModel,"toggled",function(e){R!==e&&(R=e,R?S._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPausePointer"):S._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPointer"))}),(0,A.A)(t,"shuttleRingAngle",function(e){var t,n,i;t=S._shuttleRingPointer,n=S._knobOuter,i=e,t.setAttribute("transform",`translate(100,100) rotate(${i})`),n.setAttribute("transform",`rotate(${i})`)}),(0,A.A)(t,"dateLabel",function(e){Q.textContent!==e&&(Q.textContent=e)}),(0,A.A)(t,"timeLabel",function(e){D.textContent!==e&&(D.textContent=e)}),(0,A.A)(t,"multiplierLabel",function(e){N.textContent!==e&&(N.textContent=e)})],this.applyThemeChanges(),this.resize()}T.prototype.destroy=function(){this.svgElement.removeEventListener("click",this._clickFunction,!0);const e=this._subscriptions;for(let t=0,n=e.length;t<n;t++)e[t].dispose();(0,o.A)(this)},T.prototype.isDestroyed=function(){return!1},T.prototype.setEnabled=function(e){if(this._enabled!==e){if(this._enabled=e,!e)return void this.svgElement.setAttribute("class","cesium-animation-buttonDisabled");if(this._toggled)return void this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled");this.svgElement.setAttribute("class","cesium-animation-rectButton")}},T.prototype.setToggled=function(e){this._toggled!==e&&(this._toggled=e,this._enabled&&(e?this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled"):this.svgElement.setAttribute("class","cesium-animation-rectButton")))},T.prototype.setTooltip=function(e){this.svgElement.getElementsByTagName("title")[0].textContent=e},Object.defineProperties(S.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),S.prototype.isDestroyed=function(){return!1},S.prototype.destroy=function(){(0,r.A)(this._observer)&&(this._observer.disconnect(),this._observer=void 0);const e=this._container.ownerDocument,t=this._mouseCallback;this._shuttleRingBackPanel.removeEventListener("mousedown",t,!0),this._shuttleRingBackPanel.removeEventListener("touchstart",t,!0),this._shuttleRingSwooshG.removeEventListener("mousedown",t,!0),this._shuttleRingSwooshG.removeEventListener("touchstart",t,!0),e.removeEventListener("mousemove",t,!0),e.removeEventListener("touchmove",t,!0),e.removeEventListener("mouseup",t,!0),e.removeEventListener("touchend",t,!0),e.removeEventListener("touchcancel",t,!0),this._shuttleRingPointer.removeEventListener("mousedown",t,!0),this._shuttleRingPointer.removeEventListener("touchstart",t,!0),this._knobOuter.removeEventListener("mousedown",t,!0),this._knobOuter.removeEventListener("touchstart",t,!0),this._container.removeChild(this._svgNode),this._container.removeChild(this._theme),this._realtimeSVG.destroy(),this._playReverseSVG.destroy(),this._playForwardSVG.destroy(),this._pauseSVG.destroy();const n=this._subscriptions;for(let e=0,t=n.length;e<t;e++)n[e].dispose();return(0,o.A)(this)},S.prototype.resize=function(){const e=this._container.clientWidth,t=this._container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;const n=this._svgNode,i=200,o=132;let r=e,a=t;0===e&&0===t?(r=i,a=o):0===e?(a=t,r=i*(t/o)):0===t&&(r=e,a=o*(e/i));const s=r/i,A=a/o;n.style.cssText=`width: ${r}px; height: ${a}px; position: absolute; bottom: 0; left: 0; overflow: hidden;`,n.setAttribute("width",r),n.setAttribute("height",a),n.setAttribute("viewBox",`0 0 ${r} ${a}`),this._topG.setAttribute("transform",`scale(${s},${A})`),this._centerX=Math.max(1,100*s),this._centerY=Math.max(1,100*A),this._lastHeight=e,this._lastWidth=t},S.prototype.applyThemeChanges=function(){const e=this._container.ownerDocument;if(!e.body.contains(this._container)){if((0,r.A)(this._observer))return;const t=this;return t._observer=new MutationObserver(function(){e.body.contains(t._container)&&(t._observer.disconnect(),t._observer=void 0,t.applyThemeChanges())}),void t._observer.observe(e,{childList:!0,subtree:!0})}const t=E(this._themeNormal),n=E(this._themeHover),i=E(this._themeSelect),o=E(this._themeDisabled),a=E(this._themeKnob),s=E(this._themePointer),A=E(this._themeSwoosh),c=E(this._themeSwooshHover),l=C({tagName:"defs",children:[{id:"animation_buttonNormal",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":v(t,d)},{tagName:"stop",offset:"12%","stop-color":v(t,h)},{tagName:"stop",offset:"46%","stop-color":v(t,g)},{tagName:"stop",offset:"81%","stop-color":v(t,f)}]},{id:"animation_buttonHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":v(n,d)},{tagName:"stop",offset:"12%","stop-color":v(n,h)},{tagName:"stop",offset:"46%","stop-color":v(n,g)},{tagName:"stop",offset:"81%","stop-color":v(n,f)}]},{id:"animation_buttonToggled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":v(i,d)},{tagName:"stop",offset:"12%","stop-color":v(i,h)},{tagName:"stop",offset:"46%","stop-color":v(i,g)},{tagName:"stop",offset:"81%","stop-color":v(i,f)}]},{id:"animation_buttonDisabled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":v(o,p)},{tagName:"stop",offset:"75%","stop-color":v(o,m)}]},{id:"animation_blurred",tagName:"filter",width:"200%",height:"200%",x:"-50%",y:"-50%",children:[{tagName:"feGaussianBlur",stdDeviation:4,in:"SourceGraphic"}]},{id:"animation_shuttleRingSwooshGradient",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":A.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":A.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":A.toCssColorString()}]},{id:"animation_shuttleRingSwooshHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":c.toCssColorString()}]},{id:"animation_shuttleRingPointerGradient",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":s.toCssColorString()},{tagName:"stop",offset:"40%","stop-color":s.toCssColorString()},{tagName:"stop",offset:"60%","stop-color":v(s,I)},{tagName:"stop",offset:"100%","stop-color":v(s,I)}]},{id:"animation_shuttleRingPointerPaused",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":"#CCC"},{tagName:"stop",offset:"40%","stop-color":"#CCC"},{tagName:"stop",offset:"60%","stop-color":"#555"},{tagName:"stop",offset:"100%","stop-color":"#555"}]},{id:"animation_knobOuter",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":v(a,d)},{tagName:"stop",offset:"60%","stop-color":v(a,_)},{tagName:"stop",offset:"85%","stop-color":v(a,h)}]},{id:"animation_knobInner",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":v(a,_)},{tagName:"stop",offset:"60%","stop-color":v(a,d)},{tagName:"stop",offset:"85%","stop-color":v(a,f)}]}]});(0,r.A)(this._defsElement)?this._svgNode.replaceChild(l,this._defsElement):this._svgNode.appendChild(l),this._defsElement=l};const x=S},806441:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(525490),o=n(945395),r=n(491446),a=n(605971),s=n(687536),A=n(591978),c=n(702247),l=n(914684),u=n(277441),d=n(798518);const h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=15;function f(e,t){return e-t}function p(e,t){const n=(0,i.A)(t,e,f);return n<0?~n:n}function m(e){if(!(0,r.A)(e))throw new a.A("clockViewModel is required.");const t=this;this._clockViewModel=e,this._allShuttleRingTicks=[],this._dateFormatter=m.defaultDateFormatter,this._timeFormatter=m.defaultTimeFormatter,this.shuttleRingDragging=!1,this.snapToTicks=!1,l.A.track(this,["_allShuttleRingTicks","_dateFormatter","_timeFormatter","shuttleRingDragging","snapToTicks"]),this._sortedFilteredPositiveTicks=[],this.setShuttleRingTicks(m.defaultTicks),this.timeLabel=void 0,l.A.defineProperty(this,"timeLabel",function(){return t._timeFormatter(t._clockViewModel.currentTime,t)}),this.dateLabel=void 0,l.A.defineProperty(this,"dateLabel",function(){return t._dateFormatter(t._clockViewModel.currentTime,t)}),this.multiplierLabel=void 0,l.A.defineProperty(this,"multiplierLabel",function(){const e=t._clockViewModel;if(e.clockStep===o.A.SYSTEM_CLOCK)return"Today";const n=e.multiplier;return n%1==0?`${n.toFixed(0)}x`:`${n.toFixed(3).replace(/0{0,3}$/,"")}x`}),this.shuttleRingAngle=void 0,l.A.defineProperty(this,"shuttleRingAngle",{get:function(){return function(e,t,n){if(n.clockStep===o.A.SYSTEM_CLOCK)return g;if(Math.abs(e)<=1)return e*g;const i=t[t.length-1];let r,a;return e>i?e=i:e<-i&&(e=-i),e>0?(r=Math.log(i),a=(r-0)/90,(Math.log(e)-0)/a+15):(r=Math.log(-t[0]),a=(r-0)/90,-((Math.log(Math.abs(e))-0)/a+15))}(e.multiplier,t._allShuttleRingTicks,e)},set:function(e){e=Math.max(Math.min(e,105),-105);const n=t._allShuttleRingTicks,i=t._clockViewModel;if(i.clockStep=o.A.SYSTEM_CLOCK_MULTIPLIER,105===Math.abs(e))return void(i.multiplier=e>0?n[n.length-1]:n[0]);let r=function(e,t){if(Math.abs(e)<=g)return e/g;let n,i;return e>0?(n=Math.log(t[t.length-1]),i=(n-0)/90,Math.exp(0+i*(e-15))):(n=Math.log(-t[0]),i=(n-0)/90,-Math.exp(0+i*(Math.abs(e)-15)))}(e,n);if(t.snapToTicks)r=n[p(r,n)];else if(0!==r){const e=Math.abs(r);if(e>100){const t=e.toFixed(0).length-2,n=Math.pow(10,t);r=Math.round(r/n)*n|0}else e>g?r=Math.round(r):e>1?r=+r.toFixed(1):e>0&&(r=+r.toFixed(2))}i.multiplier=r}}),this._canAnimate=void 0,l.A.defineProperty(this,"_canAnimate",function(){const e=t._clockViewModel,n=e.clockRange;if(t.shuttleRingDragging||n===s.A.UNBOUNDED)return!0;const i=e.multiplier,o=e.currentTime,r=e.startTime;let a=!1;if(n===s.A.LOOP_STOP)a=A.A.greaterThan(o,r)||o.equals(r)&&i>0;else{const t=e.stopTime;a=A.A.greaterThan(o,r)&&A.A.lessThan(o,t)||o.equals(r)&&i>0||o.equals(t)&&i<0}return a||(e.shouldAnimate=!1),a}),this._isSystemTimeAvailable=void 0,l.A.defineProperty(this,"_isSystemTimeAvailable",function(){const e=t._clockViewModel;if(e.clockRange===s.A.UNBOUNDED)return!0;const n=e.systemTime;return A.A.greaterThanOrEquals(n,e.startTime)&&A.A.lessThanOrEquals(n,e.stopTime)}),this._isAnimating=void 0,l.A.defineProperty(this,"_isAnimating",function(){return t._clockViewModel.shouldAnimate&&(t._canAnimate||t.shuttleRingDragging)});const n=(0,u.A)(function(){const e=t._clockViewModel;e.shouldAnimate?e.shouldAnimate=!1:t._canAnimate&&(e.shouldAnimate=!0)});this._pauseViewModel=new d.A(n,{toggled:l.A.computed(function(){return!t._isAnimating}),tooltip:"Pause"});const i=(0,u.A)(function(){const e=t._clockViewModel,n=e.multiplier;n>0&&(e.multiplier=-n),e.shouldAnimate=!0});this._playReverseViewModel=new d.A(i,{toggled:l.A.computed(function(){return t._isAnimating&&e.multiplier<0}),tooltip:"Play Reverse"});const c=(0,u.A)(function(){const e=t._clockViewModel,n=e.multiplier;n<0&&(e.multiplier=-n),e.shouldAnimate=!0});this._playForwardViewModel=new d.A(c,{toggled:l.A.computed(function(){return t._isAnimating&&e.multiplier>0&&e.clockStep!==o.A.SYSTEM_CLOCK}),tooltip:"Play Forward"});const h=(0,u.A)(function(){t._clockViewModel.clockStep=o.A.SYSTEM_CLOCK},l.A.getObservable(this,"_isSystemTimeAvailable"));this._playRealtimeViewModel=new d.A(h,{toggled:l.A.computed(function(){return e.clockStep===o.A.SYSTEM_CLOCK}),tooltip:l.A.computed(function(){return t._isSystemTimeAvailable?"Today (real-time)":"Current time not in range"})}),this._slower=(0,u.A)(function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=p(e.multiplier,n)-1;i>=0&&(e.multiplier=n[i])}),this._faster=(0,u.A)(function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=p(e.multiplier,n)+1;i<n.length&&(e.multiplier=n[i])})}m.defaultDateFormatter=function(e,t){const n=A.A.toGregorianDate(e);return`${h[n.month-1]} ${n.day} ${n.year}`},m.defaultTicks=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800],m.defaultTimeFormatter=function(e,t){const n=A.A.toGregorianDate(e),i=Math.round(n.millisecond);return Math.abs(t._clockViewModel.multiplier)<1?`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")}.${i.toString().padStart(3,"0")}`:`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")} UTC`},m.prototype.getShuttleRingTicks=function(){return this._sortedFilteredPositiveTicks.slice(0)},m.prototype.setShuttleRingTicks=function(e){if(!(0,r.A)(e))throw new a.A("positiveTicks is required.");let t,n,i;const o={},s=this._sortedFilteredPositiveTicks;for(s.length=0,t=0,n=e.length;t<n;++t)i=e[t],o.hasOwnProperty(i)||(o[i]=!0,s.push(i));s.sort(f);const A=[];for(n=s.length,t=n-1;t>=0;--t)i=s[t],0!==i&&A.push(-i);(0,c.A)(A,s),this._allShuttleRingTicks=A},Object.defineProperties(m.prototype,{slower:{get:function(){return this._slower}},faster:{get:function(){return this._faster}},clockViewModel:{get:function(){return this._clockViewModel}},pauseViewModel:{get:function(){return this._pauseViewModel}},playReverseViewModel:{get:function(){return this._playReverseViewModel}},playForwardViewModel:{get:function(){return this._playForwardViewModel}},playRealtimeViewModel:{get:function(){return this._playRealtimeViewModel}},dateFormatter:{get:function(){return this._dateFormatter},set:function(e){if("function"!=typeof e)throw new a.A("dateFormatter must be a function");this._dateFormatter=e}},timeFormatter:{get:function(){return this._timeFormatter},set:function(e){if("function"!=typeof e)throw new a.A("timeFormatter must be a function");this._timeFormatter=e}}}),m._maxShuttleRingAngle=105,m._realtimeShuttleRingAngle=g;const _=m},622463:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),a=n(520098),s=n(677354),A=n(914684),c=n(93017);function l(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e);const n=new c.A(t),s=document.createElement("button");s.type="button",s.className="cesium-button cesium-toolbar-button",s.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),e.appendChild(s);const l=document.createElement("img");l.setAttribute("draggable","false"),l.className="cesium-baseLayerPicker-selected",l.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),s.appendChild(l);const u=document.createElement("div");u.className="cesium-baseLayerPicker-dropDown",u.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),e.appendChild(u);const d=document.createElement("div");d.className="cesium-baseLayerPicker-sectionTitle",d.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),d.innerHTML="Imagery",u.appendChild(d);const h=document.createElement("div");h.className="cesium-baseLayerPicker-section",h.setAttribute("data-bind","foreach: _imageryProviders"),u.appendChild(h);const g=document.createElement("div");g.className="cesium-baseLayerPicker-category",h.appendChild(g);const f=document.createElement("div");f.className="cesium-baseLayerPicker-categoryTitle",f.setAttribute("data-bind","text: name"),g.appendChild(f);const p=document.createElement("div");p.className="cesium-baseLayerPicker-choices",p.setAttribute("data-bind","foreach: providers"),g.appendChild(p);const m=document.createElement("div");m.className="cesium-baseLayerPicker-item",m.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),p.appendChild(m);const _=document.createElement("img");_.className="cesium-baseLayerPicker-itemIcon",_.setAttribute("data-bind","attr: { src: iconUrl }"),_.setAttribute("draggable","false"),m.appendChild(_);const I=document.createElement("div");I.className="cesium-baseLayerPicker-itemLabel",I.setAttribute("data-bind","text: name"),m.appendChild(I);const E=document.createElement("div");E.className="cesium-baseLayerPicker-sectionTitle",E.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),E.innerHTML="Terrain",u.appendChild(E);const y=document.createElement("div");y.className="cesium-baseLayerPicker-section",y.setAttribute("data-bind","foreach: _terrainProviders"),u.appendChild(y);const C=document.createElement("div");C.className="cesium-baseLayerPicker-category",y.appendChild(C);const b=document.createElement("div");b.className="cesium-baseLayerPicker-categoryTitle",b.setAttribute("data-bind","text: name"),C.appendChild(b);const B=document.createElement("div");B.className="cesium-baseLayerPicker-choices",B.setAttribute("data-bind","foreach: providers"),C.appendChild(B);const v=document.createElement("div");v.className="cesium-baseLayerPicker-item",v.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),B.appendChild(v);const w=document.createElement("img");w.className="cesium-baseLayerPicker-itemIcon",w.setAttribute("data-bind","attr: { src: iconUrl }"),w.setAttribute("draggable","false"),v.appendChild(w);const T=document.createElement("div");T.className="cesium-baseLayerPicker-itemLabel",T.setAttribute("data-bind","text: name"),v.appendChild(T),A.A.applyBindings(n,s),A.A.applyBindings(n,u),this._viewModel=n,this._container=e,this._element=s,this._dropPanel=u,this._closeDropDown=function(e){s.contains(e.target)||u.contains(e.target)||(n.dropDownVisible=!1)},a.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return a.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),A.A.cleanNode(this._element),A.A.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),(0,s.A)(this)};const u=l},93017:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(915325),o=n(491446),r=n(605971),a=n(451227),s=n(149192),A=n(557417),c=n(914684),l=n(277441);function u(e){const t=(e=e??i.A.EMPTY_OBJECT).globe,n=e.imageryProviderViewModels??i.A.EMPTY_ARRAY,u=e.terrainProviderViewModels??i.A.EMPTY_ARRAY;if(!(0,o.A)(t))throw new r.A("globe is required");this._globe=t,this.imageryProviderViewModels=n.slice(0),this.terrainProviderViewModels=u.slice(0),this.dropDownVisible=!1,c.A.track(this,["imageryProviderViewModels","terrainProviderViewModels","dropDownVisible"]);const d=c.A.getObservable(this,"imageryProviderViewModels"),h=c.A.pureComputed(function(){const e=d(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],r=i.category;(0,o.A)(t[r])?t[r].push(i):t[r]=[i]}const i=Object.keys(t),r=[];for(n=0;n<i.length;n++){const e=i[n];r.push({name:e,providers:t[e]})}return r});this._imageryProviders=h;const g=c.A.getObservable(this,"terrainProviderViewModels"),f=c.A.pureComputed(function(){const e=g(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],r=i.category;(0,o.A)(t[r])?t[r].push(i):t[r]=[i]}const i=Object.keys(t),r=[];for(n=0;n<i.length;n++){const e=i[n];r.push({name:e,providers:t[e]})}return r});this._terrainProviders=f,this.buttonTooltip=void 0,c.A.defineProperty(this,"buttonTooltip",function(){const e=this.selectedImagery,t=this.selectedTerrain,n=(0,o.A)(e)?e.name:void 0,i=(0,o.A)(t)?t.name:void 0;return(0,o.A)(n)&&(0,o.A)(i)?`${n}\n${i}`:(0,o.A)(n)?n:i}),this.buttonImageUrl=void 0,c.A.defineProperty(this,"buttonImageUrl",function(){const e=this.selectedImagery;if((0,o.A)(e))return e.iconUrl}),this.selectedImagery=void 0;const p=c.A.observable();this._currentImageryLayers=[],c.A.defineProperty(this,"selectedImagery",{get:function(){return p()},set:function(e){if(p()===e)return void(this.dropDownVisible=!1);let t;const n=this._currentImageryLayers,i=n.length,r=this._globe.imageryLayers;let s=!1;for(t=0;t<i;t++){const e=r.length;for(let i=0;i<e;i++){const e=r.get(i);if(e===n[t]){r.remove(e),s=!0;break}}}if((0,o.A)(e)){const n=e.creationCommand();if(Array.isArray(n)){const e=n.length;for(this._currentImageryLayers=[],t=e-1;t>=0;t--){const e=a.A.fromProviderAsync(n[t]);r.add(e,0),this._currentImageryLayers.push(e)}}else{this._currentImageryLayers=[];const t=a.A.fromProviderAsync(n);if(t.name=e.name,s)r.add(t,0);else{const e=r.get(0);(0,o.A)(e)&&r.remove(e),r.add(t,0)}this._currentImageryLayers.push(t)}}p(e),this.dropDownVisible=!1}}),this.selectedTerrain=void 0;const m=c.A.observable();c.A.defineProperty(this,"selectedTerrain",{get:function(){return m()},set:function(e){if(m()===e)return void(this.dropDownVisible=!1);let t;if((0,o.A)(e)&&(t=e.creationCommand()),(0,o.A)(t)&&!(0,o.A)(t.then))this._globe.depthTestAgainstTerrain=!(t instanceof s.A),this._globe.terrainProvider=t;else if((0,o.A)(t)){let e=!1;const n=this._globe.terrainProviderChanged.addEventListener(()=>{e=!0,n()}),i=new A.A(t).readyEvent.addEventListener(t=>{e||(this._globe.depthTestAgainstTerrain=!(t instanceof s.A),this._globe.terrainProvider=t,i())})}m(e),this.dropDownVisible=!1}});const _=this;this._toggleDropDown=(0,l.A)(function(){_.dropDownVisible=!_.dropDownVisible}),this.selectedImagery=e.selectedImageryProviderViewModel??n[0],this.selectedTerrain=e.selectedTerrainProviderViewModel}Object.defineProperties(u.prototype,{toggleDropDown:{get:function(){return this._toggleDropDown}},globe:{get:function(){return this._globe}}});const d=u},687194:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(605971),r=n(914684),a=n(277441);function s(e){if(!(0,i.A)(e.name))throw new o.A("options.name is required.");if(!(0,i.A)(e.tooltip))throw new o.A("options.tooltip is required.");if(!(0,i.A)(e.iconUrl))throw new o.A("options.iconUrl is required.");if("function"!=typeof e.creationFunction)throw new o.A("options.creationFunction is required.");let t=e.creationFunction;(0,i.A)(t.canExecute)||(t=(0,a.A)(t)),this._creationCommand=t,this.name=e.name,this.tooltip=e.tooltip,this.iconUrl=e.iconUrl,this._category=e.category??"",r.A.track(this,["name","tooltip","iconUrl"])}Object.defineProperties(s.prototype,{creationCommand:{get:function(){return this._creationCommand}},category:{get:function(){return this._category}}});const A=s},714018:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(303578),o=n(655028),r=n(231097),a=n(531573),s=n(418510),A=n(566334),c=n(670549),l=n(829670),u=n(687194);const d=function(){const e=[],t=devicePixelRatio>=2;return e.push(new u.A({name:"Bing Maps Aerial",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/bingAerial.png"),tooltip:"Bing Maps aerial imagery, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.A)({style:r.A.AERIAL})}})),e.push(new u.A({name:"Bing Maps Aerial with Labels",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/bingAerialLabels.png"),tooltip:"Bing Maps aerial imagery with labels, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.A)({style:r.A.AERIAL_WITH_LABELS})}})),e.push(new u.A({name:"Bing Maps Roads",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/bingRoads.png"),tooltip:"Bing Maps standard road maps, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,o.A)({style:r.A.ROAD})}})),e.push(new u.A({name:"ArcGIS World Imagery",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldImagery.png"),tooltip:"ArcGIS World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide. The map includes 15m TerraColor imagery at small and mid-scales (~1:591M down to ~1:288k) for the world. The map features Maxar imagery at 0.3m resolution for select metropolitan areas around the world, 0.5m resolution across the United States and parts of Western Europe, and 1m resolution imagery across the rest of the world. In addition to commercial sources, the World Imagery map features high-resolution aerial photography contributed by the GIS User Community. This imagery ranges from 0.3m to 0.03m resolution (down to ~1:280 nin select communities). For more information on this map, including the terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9",category:"Other",creationFunction:function(){return a.A.fromBasemapType(s.A.SATELLITE,{enablePickFeatures:!1})}})),e.push(new u.A({name:"ArcGIS World Hillshade",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldHillshade.png"),tooltip:"ArcGIS World Hillshade map portrays elevation as an artistic hillshade. This map is designed to be used as a backdrop for topographical, soil, hydro, landcover or other outdoor recreational maps. The map was compiled from a variety of sources from several data providers. The basemap has global coverage down to a scale of ~1:72k. In select areas of the United States and Europe, coverage is available down to ~1:9k. For more information on this map, including the terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=1b243539f4514b6ba35e7d995890db1d",category:"Other",creationFunction:function(){return a.A.fromBasemapType(s.A.HILLSHADE,{enablePickFeatures:!1})}})),e.push(new u.A({name:"Esri World Ocean",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/ArcGisMapServiceWorldOcean.png"),tooltip:"ArcGIS World Ocean map is designed to be used as a base map by marine GIS professionals and as a reference map by anyone interested in ocean data.  The base map features marine bathymetry. Land features include inland waters and roads overlaid on land cover and shaded relief imagery. The map was compiled from a variety of best available sources from several data providers, including General Bathymetric Chart of the Oceans GEBCO_08 Grid, National Oceanic and Atmospheric Administration (NOAA), and National Geographic, Garmin, HERE, Geonames.org, and Esri, and various other contributors. The base map currently provides coverage for the world down to a scale of ~1:577k, and coverage down to 1:72k in US coastal areas, and various other areas. Coverage down to ~ 1:9k is available limited areas based on regional hydrographic survey data. The base map was designed and developed by Esri. For more information on this map, including our terms of use, visit us online at \nhttps://www.arcgis.com/home/item.html?id=1e126e7520f9466c9ca28b8f28b5e500",category:"Other",creationFunction:function(){return a.A.fromBasemapType(s.A.OCEANS,{enablePickFeatures:!1})}})),e.push(new u.A({name:"OpenStreetMap",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/openStreetMap.png"),tooltip:"OpenStreetMap (OSM) is a collaborative project to create a free editable map of the world.\nhttp://www.openstreetmap.org",category:"Other",creationFunction:function(){return new A.A({url:"https://tile.openstreetmap.org/"})}})),e.push(new u.A({name:"Stadia x Stamen Watercolor",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/stamenWatercolor.png"),tooltip:"Based on the original basemaps created for the Knight Foundation and reminiscent of hand drawn maps, the watercolor maps from Stamen Design apply raster effect area washes and organic edges over a paper texture to add warm pop to any map.\nhttps://docs.stadiamaps.com/map-styles/stamen-watercolor/",category:"Other",creationFunction:function(){return new A.A({url:"https://tiles.stadiamaps.com/tiles/stamen_watercolor/",fileExtension:"jpg",credit:'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>\n           &copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>\n           &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>\n           &copy; <a href="https://www.openstreetmap.org/about/" target="_blank">OpenStreetMap contributors</a>'})}})),e.push(new u.A({name:"Stadia x Stamen Toner",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/stamenToner.png"),tooltip:"Based on the original basemaps created for the Knight Foundation and the most popular of the excellent styles from Stamen Design, these high-contrast B+W (black and white) maps are the perfect backdrop for your colorful and eye-catching overlays.\nhttps://docs.stadiamaps.com/map-styles/stamen-toner/",category:"Other",creationFunction:function(){return new A.A({url:"https://tiles.stadiamaps.com/tiles/stamen_toner/",retinaTiles:t,credit:'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>\n            &copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>\n            &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>\n            &copy; <a href="https://www.openstreetmap.org/about/" target="_blank">OpenStreetMap contributors</a>'})}})),e.push(new u.A({name:"Stadia Alidade Smooth",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/stadiaAlidadeSmooth.png"),tooltip:"Stadia's custom Alidade Smooth style is designed for maps that use a lot of markers or overlays. It features a muted color scheme and fewer points of interest to allow your added data to shine.\nhttps://docs.stadiamaps.com/map-styles/alidade-smooth/",category:"Other",creationFunction:function(){return new A.A({url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/",retinaTiles:t,credit:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>\n            &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>\n            &copy; <a href="https://www.openstreetmap.org/about/" target="_blank">OpenStreetMap contributors</a>'})}})),e.push(new u.A({name:"Stadia Alidade Smooth Dark",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/stadiaAlidadeSmoothDark.png"),tooltip:"Stadia Alidade Smooth Dark, like its lighter cousin, is also designed to stay out of the way. It just flips the dark mode switch on the color scheme. With the lights out, your data can now literally shine.\nhttps://docs.stadiamaps.com/map-styles/alidade-smooth-dark/",category:"Other",creationFunction:function(){return new A.A({url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/",retinaTiles:t,credit:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>\n            &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>\n            &copy; <a href="https://www.openstreetmap.org/about/" target="_blank">OpenStreetMap contributors</a>'})}})),e.push(new u.A({name:"Sentinel-2",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/sentinel-2.png"),tooltip:"Sentinel-2 cloudless by EOX IT Services GmbH (Contains modified Copernicus Sentinel data 2016 and 2017).",category:"Cesium ion",creationFunction:function(){return c.A.fromAssetId(3954)}})),e.push(new u.A({name:"Blue Marble",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/blueMarble.png"),tooltip:"Blue Marble Next Generation July, 2004 imagery from NASA.",category:"Cesium ion",creationFunction:function(){return c.A.fromAssetId(3845)}})),e.push(new u.A({name:"Earth at night",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/earthAtNight.png"),tooltip:"The Earth at night, also known as The Black Marble, is a 500 meter resolution global composite imagery layer released by NASA.",category:"Cesium ion",creationFunction:function(){return c.A.fromAssetId(3812)}})),e.push(new u.A({name:"Natural EarthII",iconUrl:(0,i.A)("Widgets/Images/ImageryProviders/naturalEarthII.png"),tooltip:"Natural Earth II, darkened for contrast.\nhttp://www.naturalearthdata.com/",category:"Cesium ion",creationFunction:function(){return l.A.fromUrl((0,i.A)("Assets/Textures/NaturalEarthII"))}})),e}},177647:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(303578),o=n(149192),r=n(610750),a=n(75584),s=n(687194);const A=function(){const e=[];return e.push(new s.A({name:"WGS84 Ellipsoid",iconUrl:(0,i.A)("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84 standard ellipsoid, also known as EPSG:4326",category:"Cesium ion",creationFunction:function(){return new o.A({ellipsoid:r.A.WGS84})}})),e.push(new s.A({name:"Cesium World Terrain",iconUrl:(0,i.A)("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion",category:"Cesium ion",creationFunction:function(){return(0,a.A)({requestWaterMask:!0,requestVertexNormals:!0})}})),e}},112306:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(565801),r=n(354975),a=n(591978),s=n(677354),A=n(914684);function c(e){(0,i.A)(e)||(e=new o.A),this._clock=e,this._eventHelper=new r.A,this._eventHelper.add(e.onTick,this.synchronize,this),this.systemTime=A.A.observable(a.A.now()),this.systemTime.equalityComparer=a.A.equals,this.startTime=A.A.observable(e.startTime),this.startTime.equalityComparer=a.A.equals,this.startTime.subscribe(function(t){e.startTime=t,this.synchronize()},this),this.stopTime=A.A.observable(e.stopTime),this.stopTime.equalityComparer=a.A.equals,this.stopTime.subscribe(function(t){e.stopTime=t,this.synchronize()},this),this.currentTime=A.A.observable(e.currentTime),this.currentTime.equalityComparer=a.A.equals,this.currentTime.subscribe(function(t){e.currentTime=t,this.synchronize()},this),this.multiplier=A.A.observable(e.multiplier),this.multiplier.subscribe(function(t){e.multiplier=t,this.synchronize()},this),this.clockStep=A.A.observable(e.clockStep),this.clockStep.subscribe(function(t){e.clockStep=t,this.synchronize()},this),this.clockRange=A.A.observable(e.clockRange),this.clockRange.subscribe(function(t){e.clockRange=t,this.synchronize()},this),this.canAnimate=A.A.observable(e.canAnimate),this.canAnimate.subscribe(function(t){e.canAnimate=t,this.synchronize()},this),this.shouldAnimate=A.A.observable(e.shouldAnimate),this.shouldAnimate.subscribe(function(t){e.shouldAnimate=t,this.synchronize()},this),A.A.track(this,["systemTime","startTime","stopTime","currentTime","multiplier","clockStep","clockRange","canAnimate","shouldAnimate"])}Object.defineProperties(c.prototype,{clock:{get:function(){return this._clock}}}),c.prototype.synchronize=function(){const e=this._clock;this.systemTime=a.A.now(),this.startTime=e.startTime,this.stopTime=e.stopTime,this.currentTime=e.currentTime,this.multiplier=e.multiplier,this.clockStep=e.clockStep,this.clockRange=e.clockRange,this.canAnimate=e.canAnimate,this.shouldAnimate=e.shouldAnimate},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){this._eventHelper.removeAll(),(0,s.A)(this)};const l=c},877987:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(116112),a=n(677354),s=n(914684),A=n(377909);function c(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e);const n=new A.A(t,e);n._exitFullScreenPath="M 104.34375 17.5625 L 83.5 38.4375 L 83.40625 18.21875 L 76.125 25.5 L 76.09375 51.78125 L 102.3125 51.8125 L 102.3125 51.78125 L 109.625 44.5 L 89.1875 44.40625 L 110.1875 23.40625 L 104.34375 17.5625 z M 23.75 17.59375 L 17.90625 23.4375 L 38.90625 44.4375 L 18.5 44.53125 L 25.78125 51.8125 L 52 51.78125 L 51.96875 25.53125 L 44.6875 18.25 L 44.625 38.46875 L 23.75 17.59375 z M 25.6875 76.03125 L 18.375 83.3125 L 38.78125 83.40625 L 17.8125 104.40625 L 23.625 110.25 L 44.5 89.375 L 44.59375 109.59375 L 51.875 102.3125 L 51.875 76.0625 L 25.6875 76.03125 z M 102.375 76.15625 L 76.15625 76.1875 L 76.1875 102.4375 L 83.46875 109.71875 L 83.5625 89.53125 L 104.40625 110.375 L 110.25 104.53125 L 89.25 83.53125 L 109.6875 83.46875 L 102.375 76.15625 z",n._enterFullScreenPath="M 83.96875 17.5625 L 83.96875 17.59375 L 76.65625 24.875 L 97.09375 24.96875 L 76.09375 45.96875 L 81.9375 51.8125 L 102.78125 30.9375 L 102.875 51.15625 L 110.15625 43.875 L 110.1875 17.59375 L 83.96875 17.5625 z M 44.125 17.59375 L 17.90625 17.625 L 17.9375 43.90625 L 25.21875 51.1875 L 25.3125 30.96875 L 46.15625 51.8125 L 52 45.96875 L 31 25 L 51.4375 24.90625 L 44.125 17.59375 z M 46.0625 76.03125 L 25.1875 96.875 L 25.09375 76.65625 L 17.8125 83.9375 L 17.8125 110.21875 L 44 110.25 L 51.3125 102.9375 L 30.90625 102.84375 L 51.875 81.875 L 46.0625 76.03125 z M 82 76.15625 L 76.15625 82 L 97.15625 103 L 76.71875 103.0625 L 84.03125 110.375 L 110.25 110.34375 L 110.21875 84.0625 L 102.9375 76.8125 L 102.84375 97 L 82 76.15625 z";const a=document.createElement("button");a.type="button",a.className="cesium-button cesium-fullscreenButton",a.setAttribute("data-bind","attr: { title: tooltip },click: command,enable: isFullscreenEnabled,cesiumSvgPath: { path: isFullscreen ? _exitFullScreenPath : _enterFullScreenPath, width: 128, height: 128 }"),e.appendChild(a),s.A.applyBindings(n,a),this._container=e,this._viewModel=n,this._element=a}Object.defineProperties(c.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._viewModel.destroy(),s.A.cleanNode(this._element),this._container.removeChild(this._element),(0,a.A)(this)};const l=c},377909:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(116112),r=n(263842),a=n(605971),s=n(677354),A=n(914684),c=n(277441);function l(e,t){(0,i.A)(t)||(t=document.body),t=(0,o.A)(t);const n=this,a=A.A.observable(r.A.fullscreen),s=A.A.observable(r.A.enabled),l=t.ownerDocument;this.isFullscreen=void 0,A.A.defineProperty(this,"isFullscreen",{get:function(){return a()}}),this.isFullscreenEnabled=void 0,A.A.defineProperty(this,"isFullscreenEnabled",{get:function(){return s()},set:function(e){s(e&&r.A.enabled)}}),this.tooltip=void 0,A.A.defineProperty(this,"tooltip",function(){return this.isFullscreenEnabled?a()?"Exit full screen":"Full screen":"Full screen unavailable"}),this._command=(0,c.A)(function(){r.A.fullscreen?r.A.exitFullscreen():r.A.requestFullscreen(n._fullscreenElement)},A.A.getObservable(this,"isFullscreenEnabled")),this._fullscreenElement=(0,o.A)(e)??l.body,this._callback=function(){a(r.A.fullscreen)},l.addEventListener(r.A.changeEventName,this._callback)}Object.defineProperties(l.prototype,{fullscreenElement:{get:function(){return this._fullscreenElement},set:function(e){if(!(e instanceof Element))throw new a.A("value must be a valid Element.");this._fullscreenElement=e}},command:{get:function(){return this._command}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){document.removeEventListener(r.A.changeEventName,this._callback),(0,s.A)(this)};const u=l},413369:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),a=n(520098),s=n(677354),A=n(914684),c=n(300347);function l(e){if(!(0,i.A)(e)||!(0,i.A)(e.container))throw new o.A("options.container is required.");if(!(0,i.A)(e.scene))throw new o.A("options.scene is required.");const t=(0,r.A)(e.container),n=new c.A(e);n._startSearchPath="M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",n._stopSearchPath="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z";const s=document.createElement("form");s.setAttribute("data-bind","submit: search");const l=document.createElement("input");l.type="search",l.className="cesium-geocoder-input",l.setAttribute("placeholder","Enter an address or landmark..."),l.setAttribute("data-bind",'textInput: searchText,disable: isSearchInProgress,event: { keyup: handleKeyUp, keydown: handleKeyDown, mouseover: deselectSuggestion },css: { "cesium-geocoder-input-wide" : keepExpanded || searchText.length > 0 },hasFocus: _focusTextbox'),this._onTextBoxFocus=function(){setTimeout(function(){l.select()},0)},l.addEventListener("focus",this._onTextBoxFocus,!1),s.appendChild(l),this._textBox=l;const u=document.createElement("span");u.className="cesium-geocoder-searchButton",u.setAttribute("data-bind","click: search,cesiumSvgPath: { path: isSearchInProgress ? _stopSearchPath : _startSearchPath, width: 32, height: 32 }"),s.appendChild(u),t.appendChild(s);const d=document.createElement("div");d.className="search-results",d.setAttribute("data-bind","visible: _suggestionsVisible");const h=document.createElement("ul");h.setAttribute("data-bind","foreach: _suggestions");const g=document.createElement("li");h.appendChild(g),g.setAttribute("data-bind","text: $data.displayName, click: $parent.activateSuggestion, event: { mouseover: $parent.handleMouseover}, css: { active: $data === $parent._selectedSuggestion }"),d.appendChild(h),t.appendChild(d),A.A.applyBindings(n,s),A.A.applyBindings(n,d),this._container=t,this._searchSuggestionsContainer=d,this._viewModel=n,this._form=s,this._onInputBegin=function(e){let i=e.target;"function"==typeof e.composedPath&&(i=e.composedPath()[0]),t.contains(i)||(n._focusTextbox=!1,n.hideSuggestions())},this._onInputEnd=function(e){n._focusTextbox=!0,n.showSuggestions()},a.A.supportsPointerEvents()?(document.addEventListener("pointerdown",this._onInputBegin,!0),t.addEventListener("pointerup",this._onInputEnd,!0),t.addEventListener("pointercancel",this._onInputEnd,!0)):(document.addEventListener("mousedown",this._onInputBegin,!0),t.addEventListener("mouseup",this._onInputEnd,!0),document.addEventListener("touchstart",this._onInputBegin,!0),t.addEventListener("touchend",this._onInputEnd,!0),t.addEventListener("touchcancel",this._onInputEnd,!0))}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},searchSuggestionsContainer:{get:function(){return this._searchSuggestionsContainer}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){const e=this._container;return a.A.supportsPointerEvents()?(document.removeEventListener("pointerdown",this._onInputBegin,!0),e.removeEventListener("pointerup",this._onInputEnd,!0)):(document.removeEventListener("mousedown",this._onInputBegin,!0),e.removeEventListener("mouseup",this._onInputEnd,!0),document.removeEventListener("touchstart",this._onInputBegin,!0),e.removeEventListener("touchend",this._onInputEnd,!0)),this._viewModel.destroy(),A.A.cleanNode(this._form),A.A.cleanNode(this._searchSuggestionsContainer),e.removeChild(this._form),e.removeChild(this._searchSuggestionsContainer),this._textBox.removeEventListener("focus",this._onTextBoxFocus,!1),(0,s.A)(this)};const u=l},300347:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var i=n(491446),o=n(605971),r=n(5188),a=n(955943),s=n(123475),A=n(448871),c=n(697422),l=n(367817),u=n(849750),d=n(584164),h=n(675178),g=n(116112),f=n(677354),p=n(914684),m=n(277441);function _(e){if(!(0,i.A)(e)||!(0,i.A)(e.scene))throw new o.A("options.scene is required.");(0,i.A)(e.geocoderServices)?this._geocoderServices=e.geocoderServices:this._geocoderServices=[new r.A({scene:e.scene})],this._viewContainer=e.container,this._scene=e.scene,this._flightDuration=e.flightDuration,this._searchText="",this._isSearchInProgress=!1,this._wasGeocodeCancelled=!1,this._previousCredits=[],this._complete=new a.A,this._suggestions=[],this._selectedSuggestion=void 0,this._showSuggestions=!0,this._handleArrowDown=E,this._handleArrowUp=I;const t=this;this._suggestionsVisible=p.A.pureComputed(function(){const e=p.A.getObservable(t,"_suggestions")().length>0,n=p.A.getObservable(t,"_showSuggestions")();return e&&n}),this._searchCommand=(0,m.A)(function(e){return e=e??s.A.SEARCH,t._focusTextbox=!1,(0,i.A)(t._selectedSuggestion)?(t.activateSuggestion(t._selectedSuggestion),!1):(t.hideSuggestions(),t.isSearchInProgress?void((n=t)._isSearchInProgress&&(n._isSearchInProgress=!1,n._wasGeocodeCancelled=!0)):async function(e,t,n){const o=e._searchText;if(v(o))return void e.showSuggestions();let r,a;for(e._isSearchInProgress=!0,e._wasGeocodeCancelled=!1,r=0;r<t.length;r++){if(e._wasGeocodeCancelled)return;if(a=await y(t[r],o,n),(0,i.A)(a)&&"fulfilled"===a.state&&a.value.length>0)break}if(e._wasGeocodeCancelled)return;e._isSearchInProgress=!1,B(e);const s=a.value;if("fulfilled"===a.state&&(0,i.A)(s)&&s.length>0){e._searchText=s[0].displayName,e.destinationFound(e,s[0].destination);const n=b(e,h.A.getCreditsFromResult(s[0]));return void((0,i.A)(n)||C(e,t[r].credit))}e._searchText=`${o} (not found)`}(t,t._geocoderServices,e));var n}),this.deselectSuggestion=function(){t._selectedSuggestion=void 0},this.handleKeyDown=function(e,t){const n="ArrowDown"===t.key||"Down"===t.key||40===t.keyCode,i="ArrowUp"===t.key||"Up"===t.key||38===t.keyCode;return(n||i)&&t.preventDefault(),!0},this.handleKeyUp=function(e,n){const i="ArrowDown"===n.key||"Down"===n.key||40===n.keyCode,o="ArrowUp"===n.key||"Up"===n.key||38===n.keyCode,r="Enter"===n.key||13===n.keyCode;return o?I(t):i?E(t):r&&t._searchCommand(),!0},this.activateSuggestion=function(e){t.hideSuggestions(),t._searchText=e.displayName;const n=e.destination;w(t),t.destinationFound(t,n)},this.hideSuggestions=function(){t._showSuggestions=!1,t._selectedSuggestion=void 0},this.showSuggestions=function(){t._showSuggestions=!0},this.handleMouseover=function(e,n){e!==t._selectedSuggestion&&(t._selectedSuggestion=e)},this.keepExpanded=!1,this.autoComplete=e.autocomplete??!0,this.destinationFound=e.destinationFound??_.flyToDestination,this._focusTextbox=!1,p.A.track(this,["_searchText","_isSearchInProgress","keepExpanded","_suggestions","_selectedSuggestion","_showSuggestions","_focusTextbox"]);const n=p.A.getObservable(this,"_searchText");n.extend({rateLimit:{timeout:500}}),this._suggestionSubscription=n.subscribe(function(){_._updateSearchSuggestions(t)}),this.isSearchInProgress=void 0,p.A.defineProperty(this,"isSearchInProgress",{get:function(){return this._isSearchInProgress}}),this.searchText=void 0,p.A.defineProperty(this,"searchText",{get:function(){return this.isSearchInProgress?"Searching...":this._searchText},set:function(e){if("string"!=typeof e)throw new o.A("value must be a valid string.");this._searchText=e}}),this.flightDuration=void 0,p.A.defineProperty(this,"flightDuration",{get:function(){return this._flightDuration},set:function(e){if((0,i.A)(e)&&e<0)throw new o.A("value must be positive.");this._flightDuration=e}})}function I(e){if(0===e._suggestions.length)return;const t=e._suggestions.indexOf(e._selectedSuggestion);if(-1===t||0===t)return void(e._selectedSuggestion=void 0);const n=t-1;e._selectedSuggestion=e._suggestions[n],_._adjustSuggestionsScroll(e,n)}function E(e){if(0===e._suggestions.length)return;const t=e._suggestions.length,n=(e._suggestions.indexOf(e._selectedSuggestion)+1)%t;e._selectedSuggestion=e._suggestions[n],_._adjustSuggestionsScroll(e,n)}async function y(e,t,n){try{return{state:"fulfilled",value:await e.geocode(t,n),credits:e.credit}}catch(e){return{state:"rejected",reason:e}}}function C(e,t){!(0,i.A)(t)||e._scene.isDestroyed()||e._scene.frameState.creditDisplay.isDestroyed()||(e._scene.frameState.creditDisplay.addStaticCredit(t),e._previousCredits.push(t))}function b(e,t){return(0,i.A)(t)&&t.forEach(t=>C(e,t)),t}function B(e){e._scene.isDestroyed()||e._scene.frameState.creditDisplay.isDestroyed()||e._previousCredits.forEach(t=>{e._scene.frameState.creditDisplay.removeStaticCredit(t)}),e._previousCredits.length=0}function v(e){return/^\s*$/.test(e)}function w(e){p.A.getObservable(e,"_suggestions").removeAll()}Object.defineProperties(_.prototype,{complete:{get:function(){return this._complete}},scene:{get:function(){return this._scene}},search:{get:function(){return this._searchCommand}},selectedSuggestion:{get:function(){return this._selectedSuggestion}},suggestions:{get:function(){return this._suggestions}}}),_.prototype.destroy=function(){this._suggestionSubscription.dispose()},_.flyToDestination=function(e,t){const n=e._scene,o=n.ellipsoid,r=n.camera,a=n.terrainProvider;let s,h=t;return t instanceof c.A?l.A.equalsEpsilon(t.south,t.north,l.A.EPSILON7)&&l.A.equalsEpsilon(t.east,t.west,l.A.EPSILON7)?t=c.A.center(t):s=(0,u.A)(t,n):t=o.cartesianToCartographic(t),(0,i.A)(s)||(s=function(e,t){const n=(0,i.A)(t)?t.availability:void 0;return(0,i.A)(n)?(0,A.A)(t,[e]).then(function(t){return(e=t[0]).height+=1e3,e}):(e.height+=1e3,Promise.resolve(e))}(t,a)),s.then(function(e){h=o.cartographicToCartesian(e)}).finally(function(){r.flyTo({destination:h,complete:function(){e._complete.raiseEvent()},duration:e._flightDuration,endTransform:d.A.IDENTITY})})},_._updateSearchSuggestions=async function(e){if(!e.autoComplete)return;const t=e._searchText;if(w(e),B(e),!v(t))for(const n of e._geocoderServices){const o=await n.geocode(t,s.A.AUTOCOMPLETE);if(e._suggestions=e._suggestions.concat(o),o.length>0){let t=!0;o.forEach(n=>{const o=h.A.getCreditsFromResult(n);t=t&&!(0,i.A)(o),b(e,o)}),t&&C(e,n.credit)}if(e._suggestions.length>=5)return}},_._adjustSuggestionsScroll=function(e,t){const n=(0,g.A)(e._viewContainer),i=n.getElementsByClassName("search-results")[0],o=n.getElementsByTagName("li")[t];if(0===t)return void(i.scrollTop=0);const r=o.offsetTop;r+o.clientHeight>i.clientHeight?i.scrollTop=r+o.clientHeight:r<i.scrollTop&&(i.scrollTop=r)},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return B(this),(0,f.A)(this)};const T=_},217263:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(116112),a=n(677354),s=n(914684),A=n(863529);function c(e,t,n){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e);const a=new A.A(t,n);a._svgPath="M14,4l-10,8.75h20l-4.25-3.7188v-4.6562h-2.812v2.1875l-2.938-2.5625zm-7.0938,9.906v10.094h14.094v-10.094h-14.094zm2.1876,2.313h3.3122v4.25h-3.3122v-4.25zm5.8442,1.281h3.406v6.438h-3.406v-6.438z";const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-toolbar-button cesium-home-button",c.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 28, height: 28 }"),e.appendChild(c),s.A.applyBindings(a,c),this._container=e,this._viewModel=a,this._element=c}Object.defineProperties(c.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return s.A.cleanNode(this._element),this._container.removeChild(this._element),(0,a.A)(this)};const l=c},863529:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(605971),r=n(914684),a=n(277441);function s(e,t){if(!(0,i.A)(e))throw new o.A("scene is required.");this._scene=e,this._duration=t;const n=this;this._command=(0,a.A)(function(){n._scene.camera.flyHome(n._duration)}),this.tooltip="View Home",r.A.track(this,["tooltip"])}Object.defineProperties(s.prototype,{scene:{get:function(){return this._scene}},command:{get:function(){return this._command}},duration:{get:function(){return this._duration},set:function(e){if((0,i.A)(e)&&e<0)throw new o.A("value must be positive.");this._duration=e}}});const A=s},506527:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(369031),o=n(116112),r=n(303578),a=n(41476),s=n(491446),A=n(677354),c=n(914684),l=n(618168),u=n(504377);function d(e){i.A.defined("container",e),e=(0,o.A)(e);const t=document.createElement("div");t.className="cesium-infoBox",t.setAttribute("data-bind",'css: { "cesium-infoBox-visible" : showInfo, "cesium-infoBox-bodyless" : _bodyless }'),e.appendChild(t);const n=document.createElement("div");n.className="cesium-infoBox-title",n.setAttribute("data-bind","text: titleText"),t.appendChild(n);const A=document.createElement("button");A.type="button",A.className="cesium-button cesium-infoBox-camera",A.setAttribute("data-bind",'attr: { title: "Focus camera on object" },click: function () { cameraClicked.raiseEvent(this); },enable: enableCamera,cesiumSvgPath: { path: cameraIconPath, width: 32, height: 32 }'),t.appendChild(A);const d=document.createElement("button");d.type="button",d.className="cesium-infoBox-close",d.setAttribute("data-bind","click: function () { closeClicked.raiseEvent(this); }"),d.innerHTML="&times;",t.appendChild(d);const h=document.createElement("iframe");h.className="cesium-infoBox-iframe",h.setAttribute("sandbox","allow-same-origin allow-popups allow-forms"),h.setAttribute("data-bind","style : { maxHeight : maxHeightOffset(40) }"),h.setAttribute("allowfullscreen",!0),t.appendChild(h);const g=new u.A;c.A.applyBindings(g,t),this._container=e,this._element=t,this._frame=h,this._viewModel=g,this._descriptionSubscription=void 0;const f=this;h.addEventListener("load",function(){const e=h.contentDocument,n=e.createElement("link");n.href=(0,r.A)("Widgets/InfoBox/InfoBoxDescription.css"),n.rel="stylesheet",n.type="text/css";const i=e.createElement("div");i.className="cesium-infoBox-description",e.head.appendChild(n),e.body.appendChild(i),f._descriptionSubscription=(0,l.A)(g,"description",function(e){h.style.height="5px",i.innerHTML=e;let n=null;const o=i.firstElementChild;if(null!==o&&1===i.childNodes.length){const e=window.getComputedStyle(o);if(null!==e){const t=e["background-color"],i=a.A.fromCssColorString(t);(0,s.A)(i)&&0!==i.alpha&&(n=e["background-color"])}}t.style["background-color"]=n;const r=i.getBoundingClientRect().height;h.style.height=`${r}px`})}),h.setAttribute("src","about:blank")}Object.defineProperties(d.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},frame:{get:function(){return this._frame}}}),d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){const e=this._container;return c.A.cleanNode(this._element),e.removeChild(this._element),(0,s.A)(this._descriptionSubscription)&&this._descriptionSubscription.dispose(),(0,A.A)(this)};const h=d},504377:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(955943),o=n(491446),r=n(914684);function a(){this._cameraClicked=new i.A,this._closeClicked=new i.A,this.maxHeight=500,this.enableCamera=!1,this.isCameraTracking=!1,this.showInfo=!1,this.titleText="",this.description="",r.A.track(this,["showInfo","titleText","description","maxHeight","enableCamera","isCameraTracking"]),this._loadingIndicatorHtml='<div class="cesium-infoBox-loadingContainer"><span class="cesium-infoBox-loading"></span></div>',this.cameraIconPath=void 0,r.A.defineProperty(this,"cameraIconPath",{get:function(){return!this.enableCamera||this.isCameraTracking?"M 27.34375 1.65625 L 5.28125 27.9375 L 8.09375 30.3125 L 30.15625 4.03125 L 27.34375 1.65625 z M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4724893 20.232036 9.5676108 20.7379 9.75 21.21875 L 21.65625 7.03125 L 13.84375 7.03125 z M 28.21875 7.71875 L 14.53125 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 9.8371439 29.456025 8.4902779 28.21875 7.71875 z":"M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4853444 22.104033 11.423165 24.0625 13.84375 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 8.975298 28.305952 7.03125 25.875 7.03125 L 13.84375 7.03125 z"}}),r.A.defineProperty(this,"_bodyless",{get:function(){return!(0,o.A)(this.description)||0===this.description.length}})}a.prototype.maxHeightOffset=function(e){return this.maxHeight-e+"px"},Object.defineProperties(a.prototype,{cameraClicked:{get:function(){return this._cameraClicked}},closeClicked:{get:function(){return this._closeClicked}}});const s=a},221899:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(116112),a=n(303578),s=n(520098),A=n(677354),c=n(914684),l=n(720749);function u(e){if(!(0,i.A)(e)||!(0,i.A)(e.container))throw new o.A("options.container is required.");const t=(0,r.A)(e.container),n=new l.A,A=e.instructionsInitiallyVisible??!1;n.showInstructions=A,n._svgPath="M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.328,24.371h-2.707v-2.596h2.707V24.371zM17.328,19.003v0.858h-2.707v-1.057c0-3.19,3.63-3.696,3.63-5.963c0-1.034-0.924-1.826-2.134-1.826c-1.254,0-2.354,0.924-2.354,0.924l-1.541-1.915c0,0,1.519-1.584,4.137-1.584c2.487,0,4.796,1.54,4.796,4.136C21.156,16.208,17.328,16.627,17.328,19.003z";const u=document.createElement("span");u.className="cesium-navigationHelpButton-wrapper",t.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button cesium-navigation-help-button",d.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 32, height: 32 }"),u.appendChild(d);const h=document.createElement("div");h.className="cesium-navigation-help",h.setAttribute("data-bind",'css: { "cesium-navigation-help-visible" : showInstructions}'),u.appendChild(h);const g=document.createElement("button");g.type="button",g.className="cesium-navigation-button cesium-navigation-button-left",g.setAttribute("data-bind",'click: showClick, css: {"cesium-navigation-button-selected": !_touch, "cesium-navigation-button-unselected": _touch}');const f=document.createElement("img");f.src=(0,a.A)("Widgets/Images/NavigationHelp/Mouse.svg"),f.className="cesium-navigation-button-icon",f.style.width="25px",f.style.height="25px",g.appendChild(f),g.appendChild(document.createTextNode("Mouse"));const p=document.createElement("button");p.type="button",p.className="cesium-navigation-button cesium-navigation-button-right",p.setAttribute("data-bind",'click: showTouch, css: {"cesium-navigation-button-selected": _touch, "cesium-navigation-button-unselected": !_touch}');const m=document.createElement("img");m.src=(0,a.A)("Widgets/Images/NavigationHelp/Touch.svg"),m.className="cesium-navigation-button-icon",m.style.width="25px",m.style.height="25px",p.appendChild(m),p.appendChild(document.createTextNode("Touch")),h.appendChild(g),h.appendChild(p);const _=document.createElement("div");_.className="cesium-click-navigation-help cesium-navigation-help-instructions",_.setAttribute("data-bind",'css: { "cesium-click-navigation-help-visible" : !_touch}'),_.innerHTML=`            <table>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/MouseLeft.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">Left click + drag</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/MouseRight.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Right click + drag, or</div>                        <div class="cesium-navigation-help-details">Mouse wheel scroll</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/MouseMiddle.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Rotate view</div>                        <div class="cesium-navigation-help-details">Middle click + drag, or</div>                        <div class="cesium-navigation-help-details">CTRL + Left/Right click + drag</div>                    </td>                </tr>            </table>`,h.appendChild(_);const I=document.createElement("div");I.className="cesium-touch-navigation-help cesium-navigation-help-instructions",I.setAttribute("data-bind",'css: { "cesium-touch-navigation-help-visible" : _touch}'),I.innerHTML=`            <table>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchDrag.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">One finger drag</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchZoom.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Two finger pinch</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchTilt.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Tilt view</div>                        <div class="cesium-navigation-help-details">Two finger drag, same direction</div>                    </td>                </tr>                <tr>                    <td><img src="${(0,a.A)("Widgets/Images/NavigationHelp/TouchRotate.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-tilt">Rotate view</div>                        <div class="cesium-navigation-help-details">Two finger drag, opposite direction</div>                    </td>                </tr>            </table>`,h.appendChild(I),c.A.applyBindings(n,u),this._container=t,this._viewModel=n,this._wrapper=u,this._closeInstructions=function(e){u.contains(e.target)||(n.showInstructions=!1)},s.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeInstructions,!0):(document.addEventListener("mousedown",this._closeInstructions,!0),document.addEventListener("touchstart",this._closeInstructions,!0))}Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return s.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeInstructions,!0):(document.removeEventListener("mousedown",this._closeInstructions,!0),document.removeEventListener("touchstart",this._closeInstructions,!0)),c.A.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,A.A)(this)};const d=u},720749:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(914684),o=n(277441);function r(){this.showInstructions=!1;const e=this;this._command=(0,o.A)(function(){e.showInstructions=!e.showInstructions}),this._showClick=(0,o.A)(function(){e._touch=!1}),this._showTouch=(0,o.A)(function(){e._touch=!0}),this._touch=!1,this.tooltip="Navigation Instructions",i.A.track(this,["tooltip","showInstructions","_touch"])}Object.defineProperties(r.prototype,{command:{get:function(){return this._command}},showClick:{get:function(){return this._showClick}},showTouch:{get:function(){return this._showTouch}}});const a=r},72211:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),a=n(520098),s=n(677354),A=n(914684),c=n(522437);function l(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("scene is required.");e=(0,r.A)(e);const n=new c.A(t);n._perspectivePath="M 28.15625,10.4375 9.125,13.21875 13.75,43.25 41.75,55.09375 50.8125,37 54.5,11.9375 z m 0.125,3 19.976451,0.394265 L 43.03125,16.875 22.6875,14.28125 z M 50.971746,15.705477 47.90625,36.03125 42.53125,46 44.84375,19.3125 z M 12.625,16.03125 l 29.15625,3.6875 -2.65625,31 L 16.4375,41.125 z",n._orthographicPath="m 31.560594,6.5254438 -20.75,12.4687502 0.1875,24.5625 22.28125,11.8125 19.5,-12 0.65625,-0.375 0,-0.75 0.0312,-23.21875 z m 0.0625,3.125 16.65625,9.5000002 -16.125,10.28125 -17.34375,-9.71875 z m 18.96875,11.1875002 0.15625,20.65625 -17.46875,10.59375 0.15625,-20.28125 z m -37.0625,1.25 17.21875,9.625 -0.15625,19.21875 -16.9375,-9 z";const s=document.createElement("span");s.className="cesium-projectionPicker-wrapper cesium-toolbar-button",e.appendChild(s);const l=document.createElement("button");l.type="button",l.className="cesium-button cesium-toolbar-button",l.setAttribute("data-bind",'css: { "cesium-projectionPicker-buttonPerspective": !_orthographic,       "cesium-projectionPicker-buttonOrthographic": _orthographic,       "cesium-button-disabled" : sceneMode === _sceneMode.SCENE2D || _flightInProgress,        "cesium-projectionPicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),l.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64, css: "cesium-projectionPicker-iconPerspective" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64, css: "cesium-projectionPicker-iconOrthographic" } --\x3e\x3c!-- /ko --\x3e',s.appendChild(l);const u=document.createElement("button");u.type="button",u.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",u.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && _orthographic),       "cesium-projectionPicker-none" : !_orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible },attr: { title: tooltipPerspective },click: switchToPerspective,cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64 }'),s.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",d.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && !_orthographic),       "cesium-projectionPicker-none" : _orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible},attr: { title: tooltipOrthographic },click: switchToOrthographic,cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64 }'),s.appendChild(d),A.A.applyBindings(n,s),this._viewModel=n,this._container=e,this._wrapper=s,this._closeDropDown=function(e){s.contains(e.target)||(n.dropDownVisible=!1)},a.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._viewModel.destroy(),a.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),A.A.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,s.A)(this)};const u=l},522437:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(491446),o=n(605971),r=n(811203),a=n(62467),s=n(354975),A=n(677354),c=n(914684),l=n(277441);function u(e){if(!(0,i.A)(e))throw new o.A("scene is required.");this._scene=e,this._orthographic=e.camera.frustum instanceof r.A,this._flightInProgress=!1,this.dropDownVisible=!1,this.tooltipPerspective="Perspective Projection",this.tooltipOrthographic="Orthographic Projection",this.selectedTooltip=void 0,this.sceneMode=e.mode,c.A.track(this,["_orthographic","_flightInProgress","sceneMode","dropDownVisible","tooltipPerspective","tooltipOrthographic"]);const t=this;c.A.defineProperty(this,"selectedTooltip",function(){return t._orthographic?t.tooltipOrthographic:t.tooltipPerspective}),this._toggleDropDown=(0,l.A)(function(){t.sceneMode===a.A.SCENE2D||t._flightInProgress||(t.dropDownVisible=!t.dropDownVisible)}),this._eventHelper=new s.A,this._eventHelper.add(e.morphComplete,function(e,n,i,o){t.sceneMode=i,t._orthographic=i===a.A.SCENE2D||t._scene.camera.frustum instanceof r.A}),this._eventHelper.add(e.preRender,function(){t._flightInProgress=(0,i.A)(e.camera._currentFlight)}),this._switchToPerspective=(0,l.A)(function(){t.sceneMode!==a.A.SCENE2D&&(t._scene.camera.switchToPerspectiveFrustum(),t._orthographic=!1,t.dropDownVisible=!1)}),this._switchToOrthographic=(0,l.A)(function(){t.sceneMode!==a.A.SCENE2D&&(t._scene.camera.switchToOrthographicFrustum(),t._orthographic=!0,t.dropDownVisible=!1)}),this._sceneMode=a.A}Object.defineProperties(u.prototype,{scene:{get:function(){return this._scene}},toggleDropDown:{get:function(){return this._toggleDropDown}},switchToPerspective:{get:function(){return this._switchToPerspective}},switchToOrthographic:{get:function(){return this._switchToOrthographic}},isOrthographicProjection:{get:function(){return this._orthographic}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){this._eventHelper.removeAll(),(0,A.A)(this)};const d=u},288823:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(116112),a=n(520098),s=n(677354),A=n(914684),c=n(828033);function l(e,t,n){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("scene is required.");e=(0,r.A)(e);const s=new c.A(t,n);s._globePath="m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z",s._flatMapPath="m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z",s._columbusViewPath="m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z";const l=document.createElement("span");l.className="cesium-sceneModePicker-wrapper cesium-toolbar-button",e.appendChild(l);const u=document.createElement("button");u.type="button",u.className="cesium-button cesium-toolbar-button",u.setAttribute("data-bind",'css: { "cesium-sceneModePicker-button2D": sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-button3D": sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-buttonColumbusView": sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),u.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _globePath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon3D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon2D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-iconColumbusView" } --\x3e\x3c!-- /ko --\x3e',l.appendChild(u);const d=document.createElement("button");d.type="button",d.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",d.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE3D)) || (!dropDownVisible && (sceneMode === _sceneMode.SCENE3D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip3D },click: morphTo3D,cesiumSvgPath: { path: _globePath, width: 64, height: 64 }'),l.appendChild(d);const h=document.createElement("button");h.type="button",h.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",h.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE2D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip2D },click: morphTo2D,cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64 }'),l.appendChild(h);const g=document.createElement("button");g.type="button",g.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",g.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.COLUMBUS_VIEW)) || (!dropDownVisible && (sceneMode === _sceneMode.COLUMBUS_VIEW)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-hidden" : !dropDownVisible},attr: { title: tooltipColumbusView },click: morphToColumbusView,cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64 }'),l.appendChild(g),A.A.applyBindings(s,l),this._viewModel=s,this._container=e,this._wrapper=l,this._closeDropDown=function(e){l.contains(e.target)||(s.dropDownVisible=!1)},a.A.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._viewModel.destroy(),a.A.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),A.A.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),(0,s.A)(this)};const u=l},828033:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(491446),o=n(605971),r=n(354975),a=n(62467),s=n(677354),A=n(914684),c=n(277441);function l(e,t){if(!(0,i.A)(e))throw new o.A("scene is required.");this._scene=e;const n=this;this._eventHelper=new r.A,this._eventHelper.add(e.morphStart,function(e,t,i,o){n.sceneMode=i,n.dropDownVisible=!1}),this._duration=t??2,this.sceneMode=e.mode,this.dropDownVisible=!1,this.tooltip2D="2D",this.tooltip3D="3D",this.tooltipColumbusView="Columbus View",A.A.track(this,["sceneMode","dropDownVisible","tooltip2D","tooltip3D","tooltipColumbusView"]),this.selectedTooltip=void 0,A.A.defineProperty(this,"selectedTooltip",function(){const e=n.sceneMode;return e===a.A.SCENE2D?n.tooltip2D:e===a.A.SCENE3D?n.tooltip3D:n.tooltipColumbusView}),this._toggleDropDown=(0,c.A)(function(){n.dropDownVisible=!n.dropDownVisible}),this._morphTo2D=(0,c.A)(function(){e.morphTo2D(n._duration)}),this._morphTo3D=(0,c.A)(function(){e.morphTo3D(n._duration)}),this._morphToColumbusView=(0,c.A)(function(){e.morphToColumbusView(n._duration)}),this._sceneMode=a.A}Object.defineProperties(l.prototype,{scene:{get:function(){return this._scene}},duration:{get:function(){return this._duration},set:function(e){if(e<0)throw new o.A("duration value must be positive.");this._duration=e}},toggleDropDown:{get:function(){return this._toggleDropDown}},morphTo2D:{get:function(){return this._morphTo2D}},morphTo3D:{get:function(){return this._morphTo3D}},morphToColumbusView:{get:function(){return this._morphToColumbusView}}}),l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){this._eventHelper.removeAll(),(0,s.A)(this)};const u=l},585820:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(116112),a=n(677354),s=n(914684),A=n(956009);function c(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");e=(0,r.A)(e),this._container=e;const n=document.createElement("div");n.className="cesium-selection-wrapper",n.setAttribute("data-bind",'style: { "top" : _screenPositionY, "left" : _screenPositionX },css: { "cesium-selection-wrapper-visible" : isVisible }'),e.appendChild(n),this._element=n;const a="http://www.w3.org/2000/svg",c=document.createElementNS(a,"svg:svg");c.setAttribute("width",160),c.setAttribute("height",160),c.setAttribute("viewBox","0 0 160 160");const l=document.createElementNS(a,"g");l.setAttribute("transform","translate(80,80)"),c.appendChild(l);const u=document.createElementNS(a,"path");u.setAttribute("data-bind","attr: { transform: _transform }"),u.setAttribute("d","M -34 -34 L -34 -11.25 L -30 -15.25 L -30 -30 L -15.25 -30 L -11.25 -34 L -34 -34 z M 11.25 -34 L 15.25 -30 L 30 -30 L 30 -15.25 L 34 -11.25 L 34 -34 L 11.25 -34 z M -34 11.25 L -34 34 L -11.25 34 L -15.25 30 L -30 30 L -30 15.25 L -34 11.25 z M 34 11.25 L 30 15.25 L 30 30 L 15.25 30 L 11.25 34 L 34 34 L 34 11.25 z"),l.appendChild(u),n.appendChild(c);const d=new A.A(t,this._element,this._container);this._viewModel=d,s.A.applyBindings(this._viewModel,this._element)}Object.defineProperties(c.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){const e=this._container;return s.A.cleanNode(this._element),e.removeChild(this._element),(0,a.A)(this)};const l=c},956009:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(434067),o=n(491446),r=n(605971),a=n(78173),s=n(924290),A=n(914684);const c=new i.A,l="-1000px";function u(e,t,n){if(!(0,o.A)(e))throw new r.A("scene is required.");if(!(0,o.A)(t))throw new r.A("selectionIndicatorElement is required.");if(!(0,o.A)(n))throw new r.A("container is required.");this._scene=e,this._screenPositionX=l,this._screenPositionY=l,this._tweens=e.tweens,this._container=n??document.body,this._selectionIndicatorElement=t,this._scale=1,this.position=void 0,this.showSelection=!1,A.A.track(this,["position","_screenPositionX","_screenPositionY","_scale","showSelection"]),this.isVisible=void 0,A.A.defineProperty(this,"isVisible",{get:function(){return this.showSelection&&(0,o.A)(this.position)}}),A.A.defineProperty(this,"_transform",{get:function(){return`scale(${this._scale})`}}),this.computeScreenSpacePosition=function(t,n){return a.A.worldToWindowCoordinates(e,t,n)}}u.prototype.update=function(){if(this.showSelection&&(0,o.A)(this.position)){const e=this.computeScreenSpacePosition(this.position,c);if((0,o.A)(e)){const t=this._container,n=t.parentNode.clientWidth,i=t.parentNode.clientHeight,o=this._selectionIndicatorElement.clientWidth,r=.5*o;e.x=Math.min(Math.max(e.x,-o),n+o)-r,e.y=Math.min(Math.max(e.y,-o),i+o)-r,this._screenPositionX=`${Math.floor(e.x+.25)}px`,this._screenPositionY=`${Math.floor(e.y+.25)}px`}else this._screenPositionX=l,this._screenPositionY=l}},u.prototype.animateAppear=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:2,stopValue:1,duration:.8,easingFunction:s.A.EXPONENTIAL_OUT})},u.prototype.animateDepart=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:this._scale,stopValue:1.5,duration:.8,easingFunction:s.A.EXPONENTIAL_OUT})},Object.defineProperties(u.prototype,{container:{get:function(){return this._container}},selectionIndicatorElement:{get:function(){return this._selectionIndicatorElement}},scene:{get:function(){return this._scene}}});const d=u},677854:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i="http://www.w3.org/2000/svg",o="cesium-svgPath-svg",r={register:function(e){e.bindingHandlers.cesiumSvgPath={init:function(t,n){const r=document.createElementNS(i,"svg:svg");r.setAttribute("class",o);const a=document.createElementNS(i,"path");return r.appendChild(a),e.virtualElements.setDomNodeChildren(t,[r]),e.computed({read:function(){const t=e.unwrap(n());a.setAttribute("d",e.unwrap(t.path));const i=e.unwrap(t.width),s=e.unwrap(t.height);r.setAttribute("width",i),r.setAttribute("height",s),r.setAttribute("viewBox",`0 0 ${i} ${s}`),t.css&&r.setAttribute("class",`${o} ${e.unwrap(t.css)}`)},disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.cesiumSvgPath=!0}}},973292:(e,t,n)=>{"use strict";var i;n.d(t,{A:()=>r}),"undefined"!=typeof ko&&(i=ko),function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,o=t.jQuery,r=t.JSON;o||"undefined"==typeof jQuery||(o=jQuery),function(e){e(t.ko={})}(function(a,s){function A(e,t){return(null===e||typeof e in y)&&e===t}function c(t,n){var i;return function(){i||(i=E.a.setTimeout(function(){i=e,t()},n))}}function l(e,t){var n;return function(){clearTimeout(n),n=E.a.setTimeout(e,t)}}function u(e,t){t&&"change"!==t?"beforeChange"===t?this.pc(e):this.gb(e,t):this.qc(e)}function d(e,t){null!==t&&t.s&&t.s()}function h(e,t){var n=this.qd,i=n[w];i.ra||(this.Qb&&this.mb[t]?(n.uc(t,e,this.mb[t]),this.mb[t]=null,--this.Qb):i.I[t]||n.uc(t,e,i.J?{da:e}:n.$c(e)),e.Ja&&e.gd())}var g,f,p,m,_,I,E=void 0!==a?a:{};E.b=function(e,t){for(var n=e.split("."),i=E,o=0;o<n.length-1;o++)i=i[n[o]];i[n[n.length-1]]=t},E.L=function(e,t,n){e[t]=n},E.version="3.5.1",E.b("version",E.version),E.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},E.a=function(){function a(e,t){for(var n in e)l.call(e,n)&&t(n,e[n])}function s(e,t){if(t)for(var n in t)l.call(t,n)&&(e[n]=t[n]);return e}function A(e,t){return e.__proto__=t,e}function c(e,t,n,i){var o=e[t].match(_)||[];E.a.D(n.match(_),function(e){E.a.Na(o,e,i)}),e[t]=o.join(" ")}var l=Object.prototype.hasOwnProperty,u={__proto__:[]}instanceof Array,d="function"==typeof Symbol,h={},g={};h[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),a(h,function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)g[t[n]]=e});var f,p={propertychange:!0},m=n&&function(){for(var t=3,i=n.createElement("div"),o=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",o[0];);return 4<t?t:e}(),_=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(e,t,n){for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i,e)},A:"function"==typeof Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Lb:function(t,n,i){for(var o=0,r=t.length;o<r;o++)if(n.call(i,t[o],o,t))return t[o];return e},Pa:function(e,t){var n=E.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},wc:function(e){var t=[];return e&&E.a.D(e,function(e){0>E.a.A(t,e)&&t.push(e)}),t},Mb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)i.push(t.call(n,e[o],o));return i},jb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)t.call(n,e[o],o)&&i.push(e[o]);return i},Nb:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Na:function(e,t,n){var i=E.a.A(E.a.bc(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},Ba:u,extend:s,setPrototypeOf:A,Ab:u?A:s,P:a,Ga:function(e,t,n){if(!e)return e;var i,o={};for(i in e)l.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o},Tb:function(e){for(;e.firstChild;)E.removeNode(e.firstChild)},Yb:function(e){for(var t=((e=E.a.la(e))[0]&&e[0].ownerDocument||n).createElement("div"),i=0,o=e.length;i<o;i++)t.appendChild(E.oa(e[i]));return t},Ca:function(e,t){for(var n=0,i=e.length,o=[];n<i;n++){var r=e[n].cloneNode(!0);o.push(t?E.oa(r):r)}return o},va:function(e,t){if(E.a.Tb(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},Xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],o=i.parentNode,r=0,a=t.length;r<a;r++)o.insertBefore(t[r],i);for(r=0,a=n.length;r<a;r++)E.removeNode(n[r])}},Ua:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},Zc:function(e,t){7>m?e.setAttribute("selected",t):e.selected=t},Db:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},vd:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(1!==e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return!(16&~t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Sb:function(e){return E.a.vd(e,e.ownerDocument.documentElement)},kd:function(e){return!!E.a.Lb(e,E.a.Sb)},R:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Ac:function(e){return E.onError?function(){try{return e.apply(this,arguments)}catch(e){throw E.onError&&E.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(E.a.Ac(e),t)},Gc:function(e){setTimeout(function(){throw E.onError&&E.onError(e),e},0)},B:function(e,t,n){var i=E.a.Ac(n);if(n=p[t],E.options.useOnlyNativeEvents||n||!o)if(n||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){i.call(e,t)},a="on"+t;e.attachEvent(a,r),E.a.K.za(e,function(){e.detachEvent(a,r)})}else e.addEventListener(t,i,!1);else f||(f="function"==typeof o(e).on?"on":"bind"),o(e)[f](t,i)},Fb:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;if(r=!("input"!==E.a.R(e)||!e.type||"click"!=i.toLowerCase()||"checkbox"!=(r=e.type)&&"radio"!=r),E.options.useOnlyNativeEvents||!o||r)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(r=n.createEvent(g[i]||"HTMLEvents")).initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if(void 0===e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}else o(e).trigger(i)},f:function(e){return E.O(e)?e():e},bc:function(e){return E.O(e)?e.v():e},Eb:function(e,t,n){var i;t&&("object"==typeof e.classList?(i=e.classList[n?"add":"remove"],E.a.D(t.match(_),function(t){i.call(e.classList,t)})):"string"==typeof e.className.baseVal?c(e.className,"baseVal",t,n):c(e,"className",t,n))},Bb:function(t,n){var i=E.a.f(n);null!==i&&i!==e||(i="");var o=E.h.firstChild(t);!o||3!=o.nodeType||E.h.nextSibling(o)?E.h.va(t,[t.ownerDocument.createTextNode(i)]):o.data=i,E.a.Ad(t)},Yc:function(e,t){if(e.name=t,7>=m)try{var i=e.name.replace(/[&<>'"]/g,function(e){return"&#"+e.charCodeAt(0)+";"});e.mergeAttributes(n.createElement("<input name='"+i+"'/>"),!1)}catch(e){}},Ad:function(e){9<=m&&(e=1==e.nodeType?e:e.parentNode).style&&(e.style.zoom=e.style.zoom)},wd:function(e){if(m){var t=e.style.width;e.style.width=0,e.style.width=t}},Pd:function(e,t){e=E.a.f(e),t=E.a.f(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},la:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Da:function(e){return d?Symbol(e):e},Zd:6===m,$d:7===m,W:m,Lc:function(e,t){for(var n=E.a.la(e.getElementsByTagName("input")).concat(E.a.la(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=n.length-1;0<=r;r--)i(n[r])&&o.push(n[r]);return o},Nd:function(e){return"string"==typeof e&&(e=E.a.Db(e))?r&&r.parse?r.parse(e):new Function("return "+e)():null},hc:function(e,t,n){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(E.a.f(e),t,n)},Od:function(e,t,i){var o=(i=i||{}).params||{},r=i.includeFields||this.Jc,s=e;if("object"==typeof e&&"form"===E.a.R(e)){s=e.action;for(var A=r.length-1;0<=A;A--)for(var c=E.a.Lc(e,r[A]),l=c.length-1;0<=l;l--)o[c[l].name]=c[l].value}t=E.a.f(t);var u=n.createElement("form");for(var d in u.style.display="none",u.action=s,u.method="post",t)(e=n.createElement("input")).type="hidden",e.name=d,e.value=E.a.hc(E.a.f(t[d])),u.appendChild(e);a(o,function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,u.appendChild(i)}),n.body.appendChild(u),i.submitter?i.submitter(u):u.submit(),setTimeout(function(){u.parentNode.removeChild(u)},0)}}}(),E.b("utils",E.a),E.b("utils.arrayForEach",E.a.D),E.b("utils.arrayFirst",E.a.Lb),E.b("utils.arrayFilter",E.a.jb),E.b("utils.arrayGetDistinctValues",E.a.wc),E.b("utils.arrayIndexOf",E.a.A),E.b("utils.arrayMap",E.a.Mb),E.b("utils.arrayPushAll",E.a.Nb),E.b("utils.arrayRemoveItem",E.a.Pa),E.b("utils.cloneNodes",E.a.Ca),E.b("utils.createSymbolOrString",E.a.Da),E.b("utils.extend",E.a.extend),E.b("utils.fieldsIncludedWithJsonPost",E.a.Jc),E.b("utils.getFormFields",E.a.Lc),E.b("utils.objectMap",E.a.Ga),E.b("utils.peekObservable",E.a.bc),E.b("utils.postJson",E.a.Od),E.b("utils.parseJson",E.a.Nd),E.b("utils.registerEventHandler",E.a.B),E.b("utils.stringifyJson",E.a.hc),E.b("utils.range",E.a.Pd),E.b("utils.toggleDomNodeCssClass",E.a.Eb),E.b("utils.triggerEvent",E.a.Fb),E.b("utils.unwrapObservable",E.a.f),E.b("utils.objectForEach",E.a.P),E.b("utils.addOrRemoveItem",E.a.Na),E.b("utils.setTextContent",E.a.Bb),E.b("unwrap",E.a.f),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),E.a.g=new function(){var t,n,i=0,o="__ko__"+(new Date).getTime(),r={};return E.a.W?(t=function(t,n){var a=t[o];if(!a||"null"===a||!r[a]){if(!n)return e;a=t[o]="ko"+i++,r[a]={}}return r[a]},n=function(e){var t=e[o];return!!t&&(delete r[t],e[o]=null,!0)}):(t=function(e,t){var n=e[o];return!n&&t&&(n=e[o]={}),n},n=function(e){return!!e[o]&&(delete e[o],!0)}),{get:function(e,n){var i=t(e,!1);return i&&i[n]},set:function(n,i,o){(n=t(n,o!==e))&&(n[i]=o)},Ub:function(e,n,i){return(e=t(e,!0))[n]||(e[n]=i)},clear:n,Z:function(){return i+++o}}},E.b("utils.domData",E.a.g),E.b("utils.domData.clear",E.a.g.clear),E.a.K=new function(){function t(t,n){var i=E.a.g.get(t,r);return i===e&&n&&(i=[],E.a.g.set(t,r,i)),i}function n(e){if(n=t(e,!1))for(var n=n.slice(0),o=0;o<n.length;o++)n[o](e);E.a.g.clear(e),E.a.K.cleanExternalData(e),s[e.nodeType]&&i(e.childNodes,!0)}function i(e,t){for(var i,o=[],r=0;r<e.length;r++)if((!t||8===e[r].nodeType)&&(n(o[o.length]=i=e[r]),e[r]!==i))for(;r--&&-1==E.a.A(o,e[r]););}var r=E.a.g.Z(),a={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{za:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},yb:function(n,i){var o=t(n,!1);o&&(E.a.Pa(o,i),0==o.length&&E.a.g.set(n,r,e))},oa:function(e){return E.u.G(function(){a[e.nodeType]&&(n(e),s[e.nodeType]&&i(e.getElementsByTagName("*")))}),e},removeNode:function(e){E.oa(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){o&&"function"==typeof o.cleanData&&o.cleanData([e])}}},E.oa=E.a.K.oa,E.removeNode=E.a.K.removeNode,E.b("cleanNode",E.oa),E.b("removeNode",E.removeNode),E.b("utils.domNodeDisposal",E.a.K),E.b("utils.domNodeDisposal.addDisposeCallback",E.a.K.za),E.b("utils.domNodeDisposal.removeDisposeCallback",E.a.K.yb),g=[0,"",""],_={thead:f=[1,"<table>","</table>"],tbody:f,tfoot:f,tr:[2,"<table><tbody>","</tbody></table>"],td:p=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:p,option:m=[1,"<select multiple='multiple'>","</select>"],optgroup:m},I=8>=E.a.W,E.a.ua=function(e,i){var r;if(o){if(o.parseHTML)r=o.parseHTML(e,i)||[];else if((r=o.clean([e],i))&&r[0]){for(var a=r[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{(r=i)||(r=n),a=r.parentWindow||r.defaultView||t;var s,A=E.a.Db(e).toLowerCase(),c=r.createElement("div");for(s=(A=A.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&_[A[1]]||g,A=s[0],s="ignored<div>"+s[1]+e+s[2]+"</div>","function"==typeof a.innerShiv?c.appendChild(a.innerShiv(s)):(I&&r.body.appendChild(c),c.innerHTML=s,I&&c.parentNode.removeChild(c));A--;)c=c.lastChild;r=E.a.la(c.lastChild.childNodes)}return r},E.a.Md=function(e,t){var n=E.a.ua(e,t);return n.length&&n[0].parentElement||E.a.Yb(n)},E.a.fc=function(t,n){if(E.a.Tb(t),null!==(n=E.a.f(n))&&n!==e)if("string"!=typeof n&&(n=n.toString()),o)o(t).html(n);else for(var i=E.a.ua(n,t.ownerDocument),r=0;r<i.length;r++)t.appendChild(i[r])},E.b("utils.parseHtmlFragment",E.a.ua),E.b("utils.setHtml",E.a.fc),E.aa=function(){function t(e,n){if(e)if(8==e.nodeType)null!=(i=E.aa.Uc(e.nodeValue))&&n.push({ud:e,Kd:i});else if(1==e.nodeType)for(var i=0,o=e.childNodes,r=o.length;i<r;i++)t(o[i],n)}var n={};return{Xb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},bd:function(t,i){var o=n[t];if(o===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return o.apply(null,i||[]),!0}finally{delete n[t]}},cd:function(e,n){var i=[];t(e,i);for(var o=0,r=i.length;o<r;o++){var a=i[o].ud,s=[a];n&&E.a.Nb(s,n),E.aa.bd(i[o].Kd,s),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},Uc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),E.b("memoization",E.aa),E.b("memoization.memoize",E.aa.Xb),E.b("memoization.unmemoize",E.aa.bd),E.b("memoization.parseMemoText",E.aa.Uc),E.b("memoization.unmemoizeDomNodeAndDescendants",E.aa.cd),E.na=function(){function e(){if(a)for(var e,t=a,n=0;A<a;)if(e=r[A++]){if(A>t){if(5e3<=++n){A=a,E.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}t=a}try{e()}catch(e){E.a.Gc(e)}}}function i(){e(),A=a=r.length=0}var o,r=[],a=0,s=1,A=0;return o=t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:o,zb:function(e){return a||E.na.scheduler(i),r[a++]=e,s++},cancel:function(e){(e-=s-a)>=A&&e<a&&(r[e]=null)},resetForTesting:function(){var e=a-A;return A=a=r.length=0,e},Sd:e}}(),E.b("tasks",E.na),E.b("tasks.schedule",E.na.zb),E.b("tasks.runEarly",E.na.Sd),E.Ta={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return E.$({read:e,write:function(i){clearTimeout(n),n=E.a.setTimeout(function(){e(i)},t)}})},rateLimit:function(e,t){var n,i,o;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e.Hb=!1,o="function"==typeof i?i:"notifyWhenChangesStop"==i?l:c,e.ub(function(e){return o(e,n,t)})},deferred:function(t,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.Hb||(t.Hb=!0,t.ub(function(n){var i,o=!1;return function(){if(!o){E.na.cancel(i),i=E.na.zb(n);try{o=!0,t.notifySubscribers(e,"dirty")}finally{o=!1}}}}))},notify:function(e,t){e.equalityComparer="always"==t?null:A}};var y={undefined:1,boolean:1,number:1,string:1};E.b("extenders",E.Ta),E.ic=function(e,t,n){this.da=e,this.lc=t,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,E.L(this,"dispose",this.s),E.L(this,"disposeWhenNodeIsRemoved",this.l)},E.ic.prototype.s=function(){this.Ib||(this.fb&&E.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},E.ic.prototype.l=function(e){this.Jb=e,E.a.K.za(e,this.fb=this.s.bind(this))},E.T=function(){E.a.Ab(this,C),C.qb(this)};var C={qb:function(e){e.U={change:[]},e.sc=1},subscribe:function(e,t,n){var i=this;n=n||"change";var o=new E.ic(i,t?e.bind(t):e,function(){E.a.Pa(i.U[n],o),i.hb&&i.hb(n)});return i.Qa&&i.Qa(n),i.U[n]||(i.U[n]=[]),i.U[n].push(o),o},notifySubscribers:function(e,t){if("change"===(t=t||"change")&&this.Gb(),this.Wa(t)){var n="change"===t&&this.ed||this.U[t].slice(0);try{E.u.xc();for(var i,o=0;i=n[o];++o)i.Ib||i.lc(e)}finally{E.u.end()}}},ob:function(){return this.sc},Dd:function(e){return this.ob()!==e},Gb:function(){++this.sc},ub:function(e){var t,n,i,o,r,a=this,s=E.O(a);a.gb||(a.gb=a.notifySubscribers,a.notifySubscribers=u);var A=e(function(){a.Ja=!1,s&&o===a&&(o=a.nc?a.nc():a());var e=n||r&&a.sb(i,o);r=n=t=!1,e&&a.gb(i=o)});a.qc=function(e,n){n&&a.Ja||(r=!n),a.ed=a.U.change.slice(0),a.Ja=t=!0,o=e,A()},a.pc=function(e){t||(i=e,a.gb(e,"beforeChange"))},a.rc=function(){r=!0},a.gd=function(){a.sb(i,a.v(!0))&&(n=!0)}},Wa:function(e){return this.U[e]&&this.U[e].length},Bd:function(e){if(e)return this.U[e]&&this.U[e].length||0;var t=0;return E.a.P(this.U,function(e,n){"dirty"!==e&&(t+=n.length)}),t},sb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},toString:function(){return"[object Object]"},extend:function(e){var t=this;return e&&E.a.P(e,function(e,n){var i=E.Ta[e];"function"==typeof i&&(t=i(t,n)||t)}),t}};E.L(C,"init",C.qb),E.L(C,"subscribe",C.subscribe),E.L(C,"extend",C.extend),E.L(C,"getSubscriptionsCount",C.Bd),E.a.Ba&&E.a.setPrototypeOf(C,Function.prototype),E.T.fn=C,E.Qc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},E.b("subscribable",E.T),E.b("isSubscribable",E.Qc),E.S=E.u=function(){function e(e){i.push(n),n=e}function t(){n=i.pop()}var n,i=[],o=0;return{xc:e,end:t,cc:function(e){if(n){if(!E.Qc(e))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,e,e.fd||(e.fd=++o))}},G:function(n,i,o){try{return e(),n.apply(i,o||[])}finally{t()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),E.b("computedContext",E.S),E.b("computedContext.getDependenciesCount",E.S.qa),E.b("computedContext.getDependencies",E.S.Va),E.b("computedContext.isInitial",E.S.Ya),E.b("computedContext.registerDependency",E.S.cc),E.b("ignoreDependencies",E.Yd=E.u.G);var b=E.a.Da("_latestValue");E.ta=function(e){function t(){return 0<arguments.length?(t.sb(t[b],arguments[0])&&(t.ya(),t[b]=arguments[0],t.xa()),this):(E.u.cc(t),t[b])}return t[b]=e,E.a.Ba||E.a.extend(t,E.T.fn),E.T.fn.qb(t),E.a.Ab(t,B),E.options.deferUpdates&&E.Ta.deferred(t,!0),t};var B={equalityComparer:A,v:function(){return this[b]},xa:function(){this.notifySubscribers(this[b],"spectate"),this.notifySubscribers(this[b])},ya:function(){this.notifySubscribers(this[b],"beforeChange")}};E.a.Ba&&E.a.setPrototypeOf(B,E.T.fn);var v=E.ta.Ma="__ko_proto__";B[v]=E.ta,E.O=function(e){if((e="function"==typeof e&&e[v])&&e!==B[v]&&e!==E.o.fn[v])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!e},E.Za=function(e){return"function"==typeof e&&(e[v]===B[v]||e[v]===E.o.fn[v]&&e.Nc)},E.b("observable",E.ta),E.b("isObservable",E.O),E.b("isWriteableObservable",E.Za),E.b("isWritableObservable",E.Za),E.b("observable.fn",B),E.L(B,"peek",B.v),E.L(B,"valueHasMutated",B.xa),E.L(B,"valueWillMutate",B.ya),E.Ha=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=E.ta(e),E.a.Ab(e,E.Ha.fn),e.extend({trackArrayChanges:!0})},E.Ha.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||E.O(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];if(i(r)){if(0===n.length&&this.ya(),t[o]!==r)throw Error("Array modified during remove; cannot remove item");n.push(r),t.splice(o,1),o--}}return n.length&&this.xa(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),i}return t?this.remove(function(e){return 0<=E.a.A(t,e)}):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||E.O(e)?function(t){return t===e}:e;this.ya();for(var i=t.length-1;0<=i;i--){var o=t[i];n(o)&&(o._destroy=!0)}this.xa()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=E.a.A(t,e)}):[]},indexOf:function(e){var t=this();return E.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.ya(),this.v()[n]=t,this.xa())},sorted:function(e){var t=this().slice(0);return e?t.sort(e):t.sort()},reversed:function(){return this().slice(0).reverse()}},E.a.Ba&&E.a.setPrototypeOf(E.Ha.fn,E.ta.fn),E.a.D("pop push reverse shift sort splice unshift".split(" "),function(e){E.Ha.fn[e]=function(){var t=this.v();this.ya(),this.zc(t,e,arguments);var n=t[e].apply(t,arguments);return this.xa(),n===t?this:n}}),E.a.D(["slice"],function(e){E.Ha.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),E.Pc=function(e){return E.O(e)&&"function"==typeof e.remove&&"function"==typeof e.push},E.b("observableArray",E.Ha),E.b("isObservableArray",E.Pc),E.Ta.trackArrayChanges=function(t,n){function i(){function e(){if(c){var e,n=[].concat(t.v()||[]);t.Wa("arrayChange")&&((!A||1<c)&&(A=E.a.Pb(a,n,t.Ob)),e=A),a=n,A=null,c=0,e&&e.length&&t.notifySubscribers(e,"arrayChange")}}s?e():(s=!0,r=t.subscribe(function(){++c},null,"spectate"),a=[].concat(t.v()||[]),A=null,o=t.subscribe(e))}if(t.Ob={},n&&"object"==typeof n&&E.a.extend(t.Ob,n),t.Ob.sparse=!0,!t.zc){var o,r,a,s=!1,A=null,c=0,l=t.Qa,u=t.hb;t.Qa=function(e){l&&l.call(t,e),"arrayChange"===e&&i()},t.hb=function(n){u&&u.call(t,n),"arrayChange"!==n||t.Wa("arrayChange")||(o&&o.s(),r&&r.s(),r=o=null,s=!1,a=e)},t.zc=function(e,t,n){function i(e,t,n){return o[o.length]={status:e,value:t,index:n}}if(s&&!c){var o=[],r=e.length,a=n.length,l=0;switch(t){case"push":l=r;case"unshift":for(t=0;t<a;t++)i("added",n[t],l+t);break;case"pop":l=r-1;case"shift":r&&i("deleted",e[l],l);break;case"splice":t=Math.min(Math.max(0,0>n[0]?r+n[0]:n[0]),r),r=1===a?r:Math.min(t+(n[1]||0),r),a=t+a-2,l=Math.max(r,a);for(var u=[],d=[],h=2;t<l;++t,++h)t<r&&d.push(i("deleted",e[t],t)),t<a&&u.push(i("added",n[h],t));E.a.Kc(d,u);break;default:return}A=o}}}};var w=E.a.Da("_state");E.o=E.$=function(t,n,i){function o(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(a.nb,arguments),this}return a.ra||E.u.cc(o),(a.ka||a.J&&o.Xa())&&o.ha(),a.X}if("object"==typeof t?i=t:(i=i||{},t&&(i.read=t)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var r=i.write,a={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:i.read,nb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Rb:null,I:{},V:0,Ic:null};return o[w]=a,o.Nc="function"==typeof r,E.a.Ba||E.a.extend(o,E.T.fn),E.T.fn.qb(o),E.a.Ab(o,T),i.pure?(a.wb=!0,a.J=!0,E.a.extend(o,S)):i.deferEvaluation&&E.a.extend(o,x),E.options.deferUpdates&&E.Ta.deferred(o,!0),a.l&&(a.jc=!0,a.l.nodeType||(a.l=null)),a.J||i.deferEvaluation||o.ha(),a.l&&o.ja()&&E.a.K.za(a.l,a.Rb=function(){o.s()}),o};var T={equalityComparer:A,qa:function(){return this[w].V},Va:function(){var e=[];return E.a.P(this[w].I,function(t,n){e[n.Ka]=n.da}),e},Vb:function(e){if(!this[w].V)return!1;var t=this.Va();return-1!==E.a.A(t,e)||!!E.a.Lb(t,function(t){return t.Vb&&t.Vb(e)})},uc:function(e,t,n){if(this[w].wb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[w].I[e]=n,n.Ka=this[w].V++,n.La=t.ob()},Xa:function(){var e,t,n=this[w].I;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e],this.Ia&&t.da.Ja||t.da.Dd(t.La)))return!0},Jd:function(){this.Ia&&!this[w].rb&&this.Ia(!1)},ja:function(){var e=this[w];return e.ka||0<e.V},Rd:function(){this.Ja?this[w].ka&&(this[w].sa=!0):this.Hc()},$c:function(e){if(e.Hb){var t=e.subscribe(this.Jd,this,"dirty"),n=e.subscribe(this.Rd,this);return{da:e,s:function(){t.s(),n.s()}}}return e.subscribe(this.Hc,this)},Hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[w].Ic),this[w].Ic=E.a.setTimeout(function(){e.ha(!0)},t)):e.Ia?e.Ia(!0):e.ha(!0)},ha:function(e){var t=this[w],n=t.Sa,i=!1;if(!t.rb&&!t.ra){if(t.l&&!E.a.Sb(t.l)||n&&n()){if(!t.jc)return void this.s()}else t.jc=!1;t.rb=!0;try{i=this.zd(e)}finally{t.rb=!1}return i}},zd:function(t){var n=this[w],i=!1,o=n.wb?e:!n.V;i={qd:this,mb:n.I,Qb:n.V},E.u.xc({pd:i,od:h,o:this,Ya:o}),n.I={},n.V=0;var r=this.yd(n,i);return n.V?i=this.sb(n.X,r):(this.s(),i=!0),i&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=r,this.notifySubscribers(n.X,"spectate"),!n.J&&t&&this.notifySubscribers(n.X),this.rc&&this.rc()),o&&this.notifySubscribers(n.X,"awake"),i},yd:function(e,t){try{var n=e.Wc;return e.nb?n.call(e.nb):n()}finally{E.u.end(),t.Qb&&!e.J&&E.a.P(t.mb,d),e.sa=e.ka=!1}},v:function(e){var t=this[w];return(t.ka&&(e||!t.V)||t.J&&this.Xa())&&this.ha(),t.X},ub:function(e){E.T.fn.ub.call(this,e),this.nc=function(){return this[w].J||(this[w].sa?this.ha():this[w].ka=!1),this[w].X},this.Ia=function(e){this.pc(this[w].X),this[w].ka=!0,e&&(this[w].sa=!0),this.qc(this,!e)}},s:function(){var t=this[w];!t.J&&t.I&&E.a.P(t.I,function(e,t){t.s&&t.s()}),t.l&&t.Rb&&E.a.K.yb(t.l,t.Rb),t.I=e,t.V=0,t.ra=!0,t.sa=!1,t.ka=!1,t.J=!1,t.l=e,t.Sa=e,t.Wc=e,this.Nc||(t.nb=e)}},S={Qa:function(e){var t=this,n=t[w];if(!n.ra&&n.J&&"change"==e){if(n.J=!1,n.sa||t.Xa())n.I=null,n.V=0,t.ha()&&t.Gb();else{var i=[];E.a.P(n.I,function(e,t){i[t.Ka]=e}),E.a.D(i,function(e,i){var o=n.I[e],r=t.$c(o.da);r.Ka=i,r.La=o.La,n.I[e]=r}),t.Xa()&&t.ha()&&t.Gb()}n.ra||t.notifySubscribers(n.X,"awake")}},hb:function(t){var n=this[w];n.ra||"change"!=t||this.Wa("change")||(E.a.P(n.I,function(e,t){t.s&&(n.I[e]={da:t.da,Ka:t.Ka,La:t.La},t.s())}),n.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var e=this[w];return e.J&&(e.sa||this.Xa())&&this.ha(),E.T.fn.ob.call(this)}},x={Qa:function(e){"change"!=e&&"beforeChange"!=e||this.v()}};E.a.Ba&&E.a.setPrototypeOf(T,E.T.fn);var D=E.ta.Ma;T[D]=E.o,E.Oc=function(e){return"function"==typeof e&&e[D]===T[D]},E.Fd=function(e){return E.Oc(e)&&e[w]&&e[w].wb},E.b("computed",E.o),E.b("dependentObservable",E.o),E.b("isComputed",E.Oc),E.b("isPureComputed",E.Fd),E.b("computed.fn",T),E.L(T,"peek",T.v),E.L(T,"dispose",T.s),E.L(T,"isActive",T.ja),E.L(T,"getDependenciesCount",T.qa),E.L(T,"getDependencies",T.Va),E.xb=function(e,t){return"function"==typeof e?E.o(e,t,{pure:!0}):((e=E.a.extend({},e)).pure=!0,E.o(e,t))},E.b("pureComputed",E.xb),function(){function t(i,o,r){if(r=r||new n,"object"!=typeof(i=o(i))||null===i||i===e||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var a=i instanceof Array?[]:{};return r.save(i,a),function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}(i,function(n){var s=o(i[n]);switch(typeof s){case"boolean":case"number":case"string":case"function":a[n]=s;break;case"object":case"undefined":var A=r.get(s);a[n]=A!==e?A:t(s,o,r)}}),a}function n(){this.keys=[],this.values=[]}E.ad=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;E.O(e)&&10>t;t++)e=e();return e})},E.toJSON=function(e,t,n){return e=E.ad(e),E.a.hc(e,t,n)},n.prototype={constructor:n,save:function(e,t){var n=E.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(t){return 0<=(t=E.a.A(this.keys,t))?this.values[t]:e}}}(),E.b("toJS",E.ad),E.b("toJSON",E.toJSON),E.Wd=function(e,t,n){function i(t){var i=E.xb(e,n).extend({ma:"always"}),o=i.subscribe(function(e){e&&(o.s(),t(e))});return i.notifySubscribers(i.v()),o}return"function"!=typeof Promise||t?i(t.bind(n)):new Promise(i)},E.b("when",E.Wd),E.w={M:function(t){switch(E.a.R(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?E.a.g.get(t,E.c.options.$b):7>=E.a.W?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?E.w.M(t.options[t.selectedIndex]):e;default:return t.value}},cb:function(t,n,i){switch(E.a.R(t)){case"option":"string"==typeof n?(E.a.g.set(t,E.c.options.$b,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n):(E.a.g.set(t,E.c.options.$b,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=e);for(var o,r=-1,a=0,s=t.options.length;a<s;++a)if((o=E.w.M(t.options[a]))==n||""===o&&n===e){r=a;break}(i||0<=r||n===e&&1<t.size)&&(t.selectedIndex=r,6===E.a.W&&E.a.setTimeout(function(){t.selectedIndex=r},0));break;default:null!==n&&n!==e||(n=""),t.value=n}}},E.b("selectExtensions",E.w),E.b("selectExtensions.readValue",E.w.M),E.b("selectExtensions.writeValue",E.w.cb),E.m=function(){function e(e){123===(e=E.a.Db(e)).charCodeAt(0)&&(e=e.slice(1,-1));var t,n=[],a=(e+="\n,").match(i),s=[],A=0;if(1<a.length){for(var c,l=0;c=a[l];++l){var u=c.charCodeAt(0);if(44===u){if(0>=A){n.push(t&&s.length?{key:t,value:s.join("")}:{unknown:t||s.join("")}),t=A=0,s=[];continue}}else if(58===u){if(!A&&!t&&1===s.length){t=s.pop();continue}}else{if(47===u&&1<c.length&&(47===c.charCodeAt(1)||42===c.charCodeAt(1)))continue;47===u&&l&&1<c.length?(u=a[l-1].match(o))&&!r[u[0]]&&(a=(e=e.substr(e.indexOf(c)+1)).match(i),l=-1,c="/"):40===u||123===u||91===u?++A:41===u||125===u||93===u?--A:t||s.length||34!==u&&39!==u||(c=c.slice(1,-1))}s.push(c)}if(0<A)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),o=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},a={};return{Ra:[],wa:a,ac:e,vb:function(i,o){function r(e,i){var o;if(!l){var u=E.getBindingHandler(e);if(u&&u.preprocess&&!(i=u.preprocess(i,e,r)))return;(u=a[e])&&(o=i,0<=E.a.A(t,o)?o=!1:(u=o.match(n),o=null!==u&&(u[1]?"Object("+u[1]+")"+u[2]:o)),u=o),u&&A.push("'"+("string"==typeof a[e]?a[e]:e)+"':function(_z){"+o+"=_z}")}c&&(i="function(){return "+i+" }"),s.push("'"+e+"':"+i)}var s=[],A=[],c=(o=o||{}).valueAccessors,l=o.bindingParams,u="string"==typeof i?e(i):i;return E.a.D(u,function(e){r(e.key||e.unknown,e.value)}),A.length&&r("_ko_property_writers","{"+A.join(",")+" }"),s.join(",")},Id:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},eb:function(e,t,n,i,o){e&&E.O(e)?!E.Za(e)||o&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),E.b("expressionRewriting",E.m),E.b("expressionRewriting.bindingRewriteValidators",E.m.Ra),E.b("expressionRewriting.parseObjectLiteral",E.m.ac),E.b("expressionRewriting.preProcessBindings",E.m.vb),E.b("expressionRewriting._twoWayBindings",E.m.wa),E.b("jsonExpressionRewriting",E.m),E.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",E.m.vb),function(){function e(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function i(n,i){for(var o=n,r=1,a=[];o=o.nextSibling;){if(t(o)&&(E.a.g.set(o,c,!0),0===--r))return a;a.push(o),e(o)&&r++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function o(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var r=n&&"\x3c!--test--\x3e"===n.createComment("test").text,a=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,A={ul:!0,ol:!0},c="__ko_matchedEndComment__";E.h={ea:{},childNodes:function(t){return e(t)?i(t):t.childNodes},Ea:function(t){if(e(t))for(var n=0,i=(t=E.h.childNodes(t)).length;n<i;n++)E.removeNode(t[n]);else E.a.Tb(t)},va:function(t,n){if(e(t)){E.h.Ea(t);for(var i=t.nextSibling,o=0,r=n.length;o<r;o++)i.parentNode.insertBefore(n[o],i)}else E.a.va(t,n)},Vc:function(t,n){var i;e(t)?(i=t.nextSibling,t=t.parentNode):i=t.firstChild,i?n!==i&&t.insertBefore(n,i):t.appendChild(n)},Wb:function(t,n,i){i?(i=i.nextSibling,e(t)&&(t=t.parentNode),i?n!==i&&t.insertBefore(n,i):t.appendChild(n)):E.h.Vc(t,n)},firstChild:function(n){if(e(n))return!n.nextSibling||t(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&t(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(e(n)&&(n=o(n)),n.nextSibling&&t(n.nextSibling)){var i=n.nextSibling;if(t(i)&&!E.a.g.get(i,c))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:e,Vd:function(e){return(e=(r?e.text:e.nodeValue).match(a))?e[1]:null},Sc:function(n){if(A[E.a.R(n)]){var i=n.firstChild;if(i)do{if(1===i.nodeType){var r,a=null;if(r=i.firstChild)do{if(a)a.push(r);else if(e(r)){var s=o(r,!0);s?r=s:a=[r]}else t(r)&&(a=[r])}while(r=r.nextSibling);if(r=a)for(a=i.nextSibling,s=0;s<r.length;s++)a?n.insertBefore(r[s],a):n.appendChild(r[s])}}while(i=i.nextSibling)}}}}(),E.b("virtualElements",E.h),E.b("virtualElements.allowedBindings",E.h.ea),E.b("virtualElements.emptyNode",E.h.Ea),E.b("virtualElements.insertAfter",E.h.Wb),E.b("virtualElements.prepend",E.h.Vc),E.b("virtualElements.setDomNodeChildren",E.h.va),E.ga=function(){this.nd={}},E.a.extend(E.ga.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||E.j.getComponentNameForNode(e);case 8:return E.h.Cd(e);default:return!1}},getBindings:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e):null;return E.j.tc(n,e,t,!1)},getBindingAccessors:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return E.j.tc(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return E.h.Vd(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var o,r=this.nd,a=e+(i&&i.valueAccessors||"");if(!(o=r[a])){var s,A="with($context){with($data||{}){return{"+E.m.vb(e,i)+"}}}";s=new Function("$context","$element",A),o=r[a]=s}return o(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),E.ga.instance=new E.ga,E.b("bindingProvider",E.ga),function(){function i(e){var t=(e=E.a.g.get(e,y))&&e.N;t&&(e.N=null,t.Tc())}function r(e,t,n){this.node=e,this.yc=t,this.kb=[],this.H=!1,t.N||E.a.K.za(e,i),n&&n.N&&(n.N.kb.push(e),this.Kb=n)}function a(e){return function(){return e}}function s(e){return e()}function A(e){return E.a.Ga(E.u.G(e),function(t,n){return function(){return e()[n]}})}function c(e,t,n){return"function"==typeof e?A(e.bind(null,t,n)):E.a.Ga(e,a)}function l(e,t){return A(this.getBindings.bind(this,e,t))}function u(e,t){var n=E.h.firstChild(t);if(n){var i,o=E.ga.instance,r=o.preprocessNode;if(r){for(;i=n;)n=E.h.nextSibling(i),r.call(o,i);n=E.h.firstChild(t)}for(;i=n;)n=E.h.nextSibling(i),d(e,i)}E.i.ma(t,E.i.H)}function d(e,t){var n=e,i=1===t.nodeType;i&&E.h.Sc(t),(i||E.ga.instance.nodeHasBindings(t))&&(n=h(t,null,e).bindingContextForDescendants),n&&!_[E.a.R(t)]&&u(n,t)}function h(t,n,i){var o,r=E.a.g.Ub(t,y,{}),a=r.hd;if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");r.hd=!0}if(a||(r.context=i),r.Zb||(r.Zb={}),n&&"function"!=typeof n)o=n;else{var A=E.ga.instance,c=A.getBindingAccessors||l,u=E.$(function(){return(o=n?n(i,t):c.call(A,t,i))&&(i[f]&&i[f](),i[m]&&i[m]()),o},null,{l:t});o&&u.ja()||(u=null)}var d,h=i;if(o){var g=function(){return E.a.Ga(u?u():o,s)},p=u?function(e){return function(){return s(u()[e])}}:function(e){return o[e]};g.get=function(e){return o[e]&&s(p(e))},g.has=function(e){return e in o},E.i.H in o&&E.i.subscribe(t,E.i.H,function(){var e=(0,o[E.i.H])();if(e){var n=E.h.childNodes(t);n.length&&e(n,E.Ec(n[0]))}}),E.i.pa in o&&(h=E.i.Cb(t,i),E.i.subscribe(t,E.i.pa,function(){var e=(0,o[E.i.pa])();e&&E.h.firstChild(t)&&e(t)})),r=function(e){var t=[],n={},i=[];return E.a.P(e,function o(r){if(!n[r]){var a=E.getBindingHandler(r);a&&(a.after&&(i.push(r),E.a.D(a.after,function(t){if(e[t]){if(-1!==E.a.A(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));o(t)}}),i.length--),t.push({key:r,Mc:a})),n[r]=!0}}),t}(o),E.a.D(r,function(n){var i=n.Mc.init,r=n.Mc.update,a=n.key;if(8===t.nodeType&&!E.h.ea[a])throw Error("The binding '"+a+"' cannot be used with virtual elements");try{"function"==typeof i&&E.u.G(function(){var n=i(t,p(a),g,h.$data,h);if(n&&n.controlsDescendantBindings){if(d!==e)throw Error("Multiple bindings ("+d+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");d=a}}),"function"==typeof r&&E.$(function(){r(t,p(a),g,h.$data,h)},null,{l:t})}catch(e){throw e.message='Unable to process binding "'+a+": "+o[a]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:r=d===e,bindingContextForDescendants:r&&h}}function g(t,n){return t&&t instanceof E.fa?t:new E.fa(t,e,e,n)}var f=E.a.Da("_subscribable"),p=E.a.Da("_ancestorBindingInfo"),m=E.a.Da("_dataDependency");E.c={};var _={script:!0,textarea:!0,template:!0};E.getBindingHandler=function(e){return E.c[e]};var I={};E.fa=function(t,n,i,o,r){function a(){var e=u?l():l,t=E.a.f(e);return n?(E.a.extend(A,n),p in n&&(A[p]=n[p])):(A.$parents=[],A.$root=t,A.ko=E),A[f]=s,c?t=A.$data:(A.$rawData=e,A.$data=t),i&&(A[i]=t),o&&o(A,n,t),n&&n[f]&&!E.S.o().Vb(n[f])&&n[f](),d&&(A[m]=d),A.$data}var s,A=this,c=t===I,l=c?e:t,u="function"==typeof l&&!E.O(l),d=r&&r.dataDependency;r&&r.exportDependencies?a():((s=E.xb(a)).v(),s.ja()?s.equalityComparer=null:A[f]=e)},E.fa.prototype.createChildContext=function(e,t,n,i){if(!i&&t&&"object"==typeof t&&(t=(i=t).as,n=i.extend),t&&i&&i.noChildContext){var o="function"==typeof e&&!E.O(e);return new E.fa(I,this,null,function(i){n&&n(i),i[t]=o?e():e},i)}return new E.fa(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)},i)},E.fa.prototype.extend=function(e,t){return new E.fa(I,this,null,function(t){E.a.extend(t,"function"==typeof e?e(t):e)},t)};var y=E.a.g.Z();r.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},r.prototype.sd=function(e){E.a.Pa(this.kb,e),!this.kb.length&&this.H&&this.Cc()},r.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,E.a.K.yb(this.node,i),E.i.ma(this.node,E.i.pa),this.Tc())},E.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(e,t,n,i,o){var r=E.a.g.Ub(e,y,{});return r.Fa||(r.Fa=new E.T),o&&o.notifyImmediately&&r.Zb[t]&&E.u.G(n,i,[e]),r.Fa.subscribe(n,i,t)},ma:function(t,n){var i=E.a.g.get(t,y);if(i&&(i.Zb[n]=!0,i.Fa&&i.Fa.notifySubscribers(t,n),n==E.i.H))if(i.N)i.N.Cc();else if(i.N===e&&i.Fa&&i.Fa.Wa(E.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(e,t){var n=E.a.g.Ub(e,y,{});return n.N||(n.N=new r(e,n,t[p])),t[p]==n?t:t.extend(function(e){e[p]=n})}},E.Td=function(e){return(e=E.a.g.get(e,y))&&e.context},E.ib=function(e,t,n){return 1===e.nodeType&&E.h.Sc(e),h(e,t,g(n))},E.ld=function(e,t,n){return n=g(n),E.ib(e,c(t,n,e),n)},E.Oa=function(e,t){1!==t.nodeType&&8!==t.nodeType||u(g(e),t)},E.vc=function(e,i,r){if(!o&&t.jQuery&&(o=t.jQuery),2>arguments.length){if(!(i=n.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!i||1!==i.nodeType&&8!==i.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");d(g(e,r),i)},E.Dc=function(t){return!t||1!==t.nodeType&&8!==t.nodeType?e:E.Td(t)},E.Ec=function(t){return(t=E.Dc(t))?t.$data:e},E.b("bindingHandlers",E.c),E.b("bindingEvent",E.i),E.b("bindingEvent.subscribe",E.i.subscribe),E.b("bindingEvent.startPossiblyAsyncContentBinding",E.i.Cb),E.b("applyBindings",E.vc),E.b("applyBindingsToDescendants",E.Oa),E.b("applyBindingAccessorsToNode",E.ib),E.b("applyBindingsToNode",E.ld),E.b("contextFor",E.Dc),E.b("dataFor",E.Ec)}(),function(e){function t(t,i){var a,s=Object.prototype.hasOwnProperty.call(o,t)?o[t]:e;s?s.subscribe(i):((s=o[t]=new E.T).subscribe(i),n(t,function(e,n){var i=!(!n||!n.synchronous);r[t]={definition:e,Gd:i},delete o[t],a||i?s.notifySubscribers(e):E.na.zb(function(){s.notifySubscribers(e)})}),a=!0)}function n(e,t){i("getConfig",[e],function(n){n?i("loadComponent",[e,n],function(e){t(e,n)}):t(null,null)})}function i(t,n,o,r){r||(r=E.j.loaders.slice(0));var a=r.shift();if(a){var s=a[t];if(s){var A=!1;if(s.apply(a,n.concat(function(e){A?o(null):null!==e?o(e):i(t,n,o,r)}))!==e&&(A=!0,!a.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,o,r)}else o(null)}var o={},r={};E.j={get:function(n,i){var o=Object.prototype.hasOwnProperty.call(r,n)?r[n]:e;o?o.Gd?E.u.G(function(){i(o.definition)}):E.na.zb(function(){i(o.definition)}):t(n,i)},Bc:function(e){delete r[e]},oc:i},E.j.loaders=[],E.b("components",E.j),E.b("components.get",E.j.get),E.b("components.clearCachedDefinition",E.j.Bc)}(),function(){function e(e,t,n,i){function o(){0===--s&&i(r)}var r={},s=2,A=n.template;n=n.viewModel,A?a(t,A,function(t){E.j.oc("loadTemplate",[e,t],function(e){r.template=e,o()})}):o(),n?a(t,n,function(t){E.j.oc("loadViewModel",[e,t],function(e){r[l]=e,o()})}):o()}function i(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[l])n(t[l]);else if("instance"in t){var o=t.instance;n(function(){return o})}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function o(e){switch(E.a.R(e)){case"script":return E.a.ua(e.text);case"textarea":return E.a.ua(e.value);case"template":if(r(e.content))return E.a.Ca(e.content.childNodes)}return E.a.Ca(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function a(e,n,i){"string"==typeof n.require?s||t.require?(s||t.require)([n.require],function(e){e&&"object"==typeof e&&e.Xd&&e.default&&(e=e.default),i(e)}):e("Uses require, but no AMD loader is present"):i(n)}function A(e){return function(t){throw Error("Component '"+e+"': "+t)}}var c={};E.j.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(E.j.tb(e))throw Error("Component "+e+" is already registered");c[e]=t},E.j.tb=function(e){return Object.prototype.hasOwnProperty.call(c,e)},E.j.unregister=function(e){delete c[e],E.j.Bc(e)},E.j.Fc={getConfig:function(e,t){t(E.j.tb(e)?c[e]:null)},loadComponent:function(t,n,i){var o=A(t);a(o,n,function(n){e(t,o,n,i)})},loadTemplate:function(e,i,a){if(e=A(e),"string"==typeof i)a(E.a.ua(i));else if(i instanceof Array)a(i);else if(r(i))a(E.a.la(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)a(o(i));else if("string"==typeof i){var s=n.getElementById(i);s?a(o(s)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(A(e),t,n)}};var l="createViewModel";E.b("components.register",E.j.register),E.b("components.isRegistered",E.j.tb),E.b("components.unregister",E.j.unregister),E.b("components.defaultLoader",E.j.Fc),E.j.loaders.push(E.j.Fc),E.j.dd=c}(),function(){function e(e,n){if(i=e.getAttribute("params")){var i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),o=(i=E.a.Ga(i,function(t){return E.o(t,null,{l:e})}),E.a.Ga(i,function(t){var n=t.v();return t.ja()?E.o({read:function(){return E.a.f(t())},write:E.Za(n)&&function(e){t()(e)},l:e}):n}));return Object.prototype.hasOwnProperty.call(o,"$raw")||(o.$raw=i),o}return{$raw:{}}}E.j.getComponentNameForNode=function(e){var t=E.a.R(e);if(E.j.tb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=E.a.W&&e.tagName===t))return t},E.j.tc=function(t,n,i,o){if(1===n.nodeType){var r=E.j.getComponentNameForNode(n);if(r){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var a={name:r,params:e(n,i)};t.component=o?function(){return a}:a}}return t};var t=new E.ga;9>E.a.W&&(E.j.register=function(e){return function(t){return e.apply(this,arguments)}}(E.j.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),i=E.j.dd;for(t in i);return n}}(n.createDocumentFragment))}(),function(){var e=0;E.c.component={init:function(t,n,i,o,r){function a(){var e=s&&s.dispose;"function"==typeof e&&e.call(s),c&&c.s(),A=s=c=null}var s,A,c,l=E.a.la(E.h.childNodes(t));return E.h.Ea(t),E.a.K.za(t,a),E.o(function(){var i,o,u=E.a.f(n());if("string"==typeof u?i=u:(i=E.a.f(u.name),o=E.a.f(u.params)),!i)throw Error("No component name specified");var d=E.i.Cb(t,r),h=A=++e;E.j.get(i,function(e){if(A===h){if(a(),!e)throw Error("Unknown component '"+i+"'");!function(e,t,n){if(!(t=t.template))throw Error("Component '"+e+"' has no template");e=E.a.Ca(t),E.h.va(n,e)}(i,e,t);var n=function(e,t,n){var i=e.createViewModel;return i?i.call(e,t,n):t}(e,o,{element:t,templateNodes:l});e=d.createChildContext(n,{extend:function(e){e.$component=n,e.$componentTemplateNodes=l}}),n&&n.koDescendantsComplete&&(c=E.i.subscribe(t,E.i.pa,n.koDescendantsComplete,n)),s=n,E.Oa(e,t)}})},null,{l:t}),{controlsDescendantBindings:!0}}},E.h.ea.component=!0}();var Q={class:"className",for:"htmlFor"};E.c.attr={update:function(t,n){var i=E.a.f(n())||{};E.a.P(i,function(n,i){i=E.a.f(i);var o=n.indexOf(":"),r=(o="lookupNamespaceURI"in t&&0<o&&t.lookupNamespaceURI(n.substr(0,o)),!1===i||null===i||i===e);r?o?t.removeAttributeNS(o,n):t.removeAttribute(n):i=i.toString(),8>=E.a.W&&n in Q?(n=Q[n],r?t.removeAttribute(n):t[n]=i):r||(o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)),"name"===n&&E.a.Yc(t,r?"":i)})}},E.c.checked={after:["value","attr"],init:function(t,n,i){function o(){var o=t.checked,A=r();if(!E.S.Ya()&&(o||!s&&!E.S.qa())){var u=E.u.G(n);if(c){var h=l?u.v():u,g=d;d=A,g!==A?o&&(E.a.Na(h,A,!0),E.a.Na(h,g,!1)):E.a.Na(h,A,o),l&&E.Za(u)&&u(h)}else a&&(A===e?A=o:o||(A=e)),E.m.eb(u,i,"checked",A,!0)}}var r=E.xb(function(){return i.has("checkedValue")?E.a.f(i.get("checkedValue")):u?i.has("value")?E.a.f(i.get("value")):t.value:void 0}),a="checkbox"==t.type,s="radio"==t.type;if(a||s){var A=n(),c=a&&E.a.f(A)instanceof Array,l=!(c&&A.push&&A.splice),u=s||c,d=c?r():e;s&&!t.name&&E.c.uniqueName.init(t,function(){return!0}),E.o(o,null,{l:t}),E.a.B(t,"click",o),E.o(function(){var i=E.a.f(n()),o=r();c?(t.checked=0<=E.a.A(i,o),d=o):t.checked=a&&o===e?!!i:r()===i},null,{l:t}),A=e}}},E.m.wa.checked=!0,E.c.checkedValue={update:function(e,t){e.value=E.a.f(t())}},E.c.class={update:function(e,t){var n=E.a.Db(E.a.f(t()));E.a.Eb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,E.a.Eb(e,n,!0)}},E.c.css={update:function(e,t){var n=E.a.f(t());null!==n&&"object"==typeof n?E.a.P(n,function(t,n){n=E.a.f(n),E.a.Eb(e,t,n)}):E.c.class.update(e,t)}},E.c.enable={update:function(e,t){var n=E.a.f(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},E.c.disable={update:function(e,t){E.c.enable.update(e,function(){return!E.a.f(t())})}},E.c.event={init:function(e,t,n,i,o){var r=t()||{};E.a.P(r,function(r){"string"==typeof r&&E.a.B(e,r,function(e){var a,s=t()[r];if(s){try{var A=E.a.la(arguments);i=o.$data,A.unshift(i),a=s.apply(i,A)}finally{!0!==a&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},E.c.foreach={Rc:function(e){return function(){var t=e(),n=E.a.bc(t);return n&&"number"!=typeof n.length?(E.a.f(t),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:E.ba.Ma}):{foreach:t,templateEngine:E.ba.Ma}}},init:function(e,t){return E.c.template.init(e,E.c.foreach.Rc(t))},update:function(e,t,n,i,o){return E.c.template.update(e,E.c.foreach.Rc(t),n,i,o)}},E.m.Ra.foreach=!1,E.h.ea.foreach=!0,E.c.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(e){r=o.body}i=r===e}o=t(),E.m.eb(o,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var o=i.bind(null,!0),r=i.bind(null,!1);E.a.B(e,"focus",o),E.a.B(e,"focusin",o),E.a.B(e,"blur",r),E.a.B(e,"focusout",r),e.__ko_hasfocusLastValue=!1},update:function(e,t){var n=!!E.a.f(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),E.u.G(E.a.Fb,null,[e,n?"focusin":"focusout"]))}},E.m.wa.hasfocus=!0,E.c.hasFocus=E.c.hasfocus,E.m.wa.hasFocus="hasfocus",E.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){E.a.fc(e,t())}},function(){function e(e,t,n){E.c[e]={init:function(e,i,o,r,a){var s,A,c,l,u,d={};if(t){r=o.get("as");var h=o.get("noChildContext");d={as:r,noChildContext:h,exportDependencies:u=!(r&&h)}}return l=(c="render"==o.get("completeOn"))||o.has(E.i.pa),E.o(function(){var o,r=E.a.f(i()),h=!n!=!r,g=!A;(u||h!==s)&&(l&&(a=E.i.Cb(e,a)),h&&(t&&!u||(d.dataDependency=E.S.o()),o=t?a.createChildContext("function"==typeof r?r:i,d):E.S.qa()?a.extend(null,d):a),g&&E.S.qa()&&(A=E.a.Ca(E.h.childNodes(e),!0)),h?(g||E.h.va(e,E.a.Ca(A)),E.Oa(o,e)):(E.h.Ea(e),c||E.i.ma(e,E.i.H)),s=h)},null,{l:e}),{controlsDescendantBindings:!0}}},E.m.Ra[e]=!1,E.h.ea[e]=!0}e("if"),e("ifnot",!1,!0),e("with",!0)}(),E.c.let={init:function(e,t,n,i,o){return t=o.extend(t),E.Oa(t,e),{controlsDescendantBindings:!0}}},E.h.ea.let=!0;var N={};E.c.options={init:function(e){if("select"!==E.a.R(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function o(){return E.a.jb(t.options,function(e){return e.selected})}function r(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function a(e,n){if(g&&l)E.i.ma(t,E.i.H);else if(h.length){var i=0<=E.a.A(h,E.w.M(n[0]));E.a.Zc(n[0],i),g&&!i&&E.u.G(E.a.Fb,null,[t,"change"])}}var s=t.multiple,A=0!=t.length&&s?t.scrollTop:null,c=E.a.f(n()),l=i.get("valueAllowUnset")&&i.has("value"),u=i.get("optionsIncludeDestroyed");n={};var d,h=[];l||(s?h=E.a.Mb(o(),E.w.M):0<=t.selectedIndex&&h.push(E.w.M(t.options[t.selectedIndex]))),c&&(void 0===c.length&&(c=[c]),d=E.a.jb(c,function(t){return u||t===e||null===t||!E.a.f(t._destroy)}),i.has("optionsCaption")&&null!==(c=E.a.f(i.get("optionsCaption")))&&c!==e&&d.unshift(N));var g=!1;n.beforeRemove=function(e){t.removeChild(e)},c=a,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(c=function(t,n){a(0,n),E.u.G(i.get("optionsAfterRender"),null,[n[0],t!==N?t:e])}),E.a.ec(t,d,function(n,o,a){return a.length&&(h=!l&&a[0].selected?[E.w.M(a[0])]:[],g=!0),o=t.ownerDocument.createElement("option"),n===N?(E.a.Bb(o,i.get("optionsCaption")),E.w.cb(o,e)):(a=r(n,i.get("optionsValue"),n),E.w.cb(o,E.a.f(a)),n=r(n,i.get("optionsText"),a),E.a.Bb(o,n)),[o]},n,c),l||(s?h.length&&o().length<h.length:h.length&&0<=t.selectedIndex?E.w.M(t.options[t.selectedIndex])!==h[0]:h.length||0<=t.selectedIndex)&&E.u.G(E.a.Fb,null,[t,"change"]),(l||E.S.Ya())&&E.i.ma(t,E.i.H),E.a.wd(t),A&&20<Math.abs(A-t.scrollTop)&&(t.scrollTop=A)}},E.c.options.$b=E.a.g.Z(),E.c.selectedOptions={init:function(e,t,n){function i(){var i=t(),o=[];E.a.D(e.getElementsByTagName("option"),function(e){e.selected&&o.push(E.w.M(e))}),E.m.eb(i,n,"selectedOptions",o)}function o(){var n=E.a.f(t()),i=e.scrollTop;n&&"number"==typeof n.length&&E.a.D(e.getElementsByTagName("option"),function(e){var t=0<=E.a.A(n,E.w.M(e));e.selected!=t&&E.a.Zc(e,t)}),e.scrollTop=i}if("select"!=E.a.R(e))throw Error("selectedOptions binding applies only to SELECT elements");var r;E.i.subscribe(e,E.i.H,function(){r?i():(E.a.B(e,"change",i),r=E.o(o,null,{l:e}))},null,{notifyImmediately:!0})},update:function(){}},E.m.wa.selectedOptions=!0,E.c.style={update:function(t,n){var i=E.a.f(n()||{});E.a.P(i,function(n,i){if(null!==(i=E.a.f(i))&&i!==e&&!1!==i||(i=""),o)o(t).css(n,i);else if(/^--/.test(n))t.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,function(e,t){return t.toUpperCase()});var r=t.style[n];t.style[n]=i,i===r||t.style[n]!=r||isNaN(i)||(t.style[n]=i+"px")}})}},E.c.submit={init:function(e,t,n,i,o){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");E.a.B(e,"submit",function(n){var i,r=t();try{i=r.call(o.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},E.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){E.a.Bb(e,t())}},E.h.ea.text=!0,function(){if(t&&t.navigator){var n,i,o,r,a,s=function(e){if(e)return parseFloat(e[1])},A=t.navigator.userAgent;(n=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(a=s(A.match(/Edge\/([^ ]+)$/)))||s(A.match(/Chrome\/([^ ]+)/))||(i=s(A.match(/Version\/([^ ]+) Safari/)))||(o=s(A.match(/Firefox\/([^ ]+)/)))||(r=E.a.W||s(A.match(/MSIE ([^ ]+)/)))||(r=s(A.match(/rv:([^ )]+)/)))}if(8<=r&&10>r)var c=E.a.g.Z(),l=E.a.g.Z(),u=function(e){var t=this.activeElement;(t=t&&E.a.g.get(t,l))&&t(e)},d=function(e,t){var n=e.ownerDocument;E.a.g.get(n,c)||(E.a.g.set(n,c,!0),E.a.B(n,"selectionchange",u)),E.a.g.set(e,l,t)};E.c.textInput={init:function(t,s,A){function c(e,n){E.a.B(t,e,n)}function l(){h||(g=t.value,h=E.a.setTimeout(u,4))}function u(){clearTimeout(h),g=h=e;var n=t.value;f!==n&&(f=n,E.m.eb(s(),A,"textInput",n))}var h,g,f=t.value,p=9==E.a.W?l:u,m=!1;r&&c("keypress",u),11>r&&c("propertychange",function(e){m||"value"!==e.propertyName||p(e)}),8==r&&(c("keyup",u),c("keydown",u)),d&&(d(t,p),c("dragend",l)),(!r||9<=r)&&c("input",p),5>i&&"textarea"===E.a.R(t)?(c("keydown",l),c("paste",l),c("cut",l)):11>n?c("keydown",l):4>o?(c("DOMAutoComplete",u),c("dragdrop",u),c("drop",u)):a&&"number"===t.type&&c("keydown",l),c("change",u),c("blur",u),E.o(function n(){var i=E.a.f(s());null!==i&&i!==e||(i=""),g!==e&&i===g?E.a.setTimeout(n,4):t.value!==i&&(m=!0,t.value=i,m=!1,f=t.value)},null,{l:t})}},E.m.wa.textInput=!0,E.c.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),E.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++E.c.uniqueName.rd;E.a.Yc(e,n)}}},E.c.uniqueName.rd=0,E.c.using={init:function(e,t,n,i,o){var r;return n.has("as")&&(r={as:n.get("as"),noChildContext:n.get("noChildContext")}),t=o.createChildContext(t,r),E.Oa(t,e),{controlsDescendantBindings:!0}}},E.h.ea.using=!0,E.c.value={init:function(t,n,i){var o=E.a.R(t),r="input"==o;if(!r||"checkbox"!=t.type&&"radio"!=t.type){var a=[],s=i.get("valueUpdate"),A=!1,c=null;s&&(a="string"==typeof s?[s]:E.a.wc(s),E.a.Pa(a,"change"));var l,u,d=function(){c=null,A=!1;var e=n(),o=E.w.M(t);E.m.eb(e,i,"value",o)};!E.a.W||!r||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=E.a.A(a,"propertychange")||(E.a.B(t,"propertychange",function(){A=!0}),E.a.B(t,"focus",function(){A=!1}),E.a.B(t,"blur",function(){A&&d()})),E.a.D(a,function(e){var n=d;E.a.Ud(e,"after")&&(n=function(){c=E.w.M(t),E.a.setTimeout(d,0)},e=e.substring(5)),E.a.B(t,e,n)}),l=r&&"file"==t.type?function(){var i=E.a.f(n());null===i||i===e||""===i?t.value="":E.u.G(d)}:function(){var r=E.a.f(n()),a=E.w.M(t);null!==c&&r===c?E.a.setTimeout(l,0):r===a&&a!==e||("select"===o?(a=i.get("valueAllowUnset"),E.w.cb(t,r,a),a||r===E.w.M(t)||E.u.G(d)):E.w.cb(t,r))},"select"===o?E.i.subscribe(t,E.i.H,function(){u?i.get("valueAllowUnset")?l():d():(E.a.B(t,"change",d),u=E.o(l,null,{l:t}))},null,{notifyImmediately:!0}):(E.a.B(t,"change",d),E.o(l,null,{l:t}))}else E.ib(t,{checkedValue:n})},update:function(){}},E.m.wa.value=!0,E.c.visible={update:function(e,t){var n=E.a.f(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},E.c.hidden={update:function(e,t){E.c.visible.update(e,function(){return!E.a.f(t())})}},function(e){E.c[e]={init:function(t,n,i,o,r){return E.c.event.init.call(this,t,function(){var t={};return t[e]=n(),t},i,o,r)}}}("click"),E.ca=function(){},E.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},E.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},E.ca.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var i=(t=t||n).getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new E.C.F(i)}if(1==e.nodeType||8==e.nodeType)return new E.C.ia(e);throw Error("Unknown template type: "+e)},E.ca.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n,i)},E.ca.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},E.ca.prototype.rewriteTemplate=function(e,t,n){t=t((e=this.makeTemplateSource(e,n)).text()),e.text(t),e.data("isRewritten",!0)},E.b("templateEngine",E.ca),E.kc=function(){function e(e,t,n,i){e=E.m.ac(e);for(var o=E.m.Ra,r=0;r<e.length;r++){var a=e[r].key;if(Object.prototype.hasOwnProperty.call(o,a)){var s=o[a];if("function"==typeof s){if(a=s(e[r].value))throw Error(a)}else if(!s)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+E.m.vb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return E.kc.Ld(e,t)},n)},Ld:function(i,o){return i.replace(t,function(t,n,i,r,a){return e(a,n,i,o)}).replace(n,function(t,n){return e(n,"\x3c!-- ko --\x3e","#comment",o)})},md:function(e,t){return E.aa.Xb(function(n,i){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&E.ib(o,e,i)})}}}(),E.b("__tr_ambtns",E.kc.md),function(){E.C={},E.C.F=function(e){if(this.F=e){var t=E.a.R(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},E.C.F.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[e];var t=arguments[0];"innerHTML"===e?E.a.fc(this.F,t):this.F[e]=t};var t=E.a.g.Z()+"_";E.C.F.prototype.data=function(e){if(1===arguments.length)return E.a.g.get(this.F,t+e);E.a.g.set(this.F,t+e,arguments[1])};var n=E.a.g.Z();E.C.F.prototype.nodes=function(){var t=this.F;if(0==arguments.length){var i=E.a.g.get(t,n)||{},o=i.lb||(3===this.ab?t.content:4===this.ab?t:e);if(!o||i.jd){var r=this.text();r&&r!==i.bb&&(o=E.a.Md(r,t.ownerDocument),E.a.g.set(t,n,{lb:o,bb:r,jd:!0}))}return o}i=arguments[0],this.ab!==e&&this.text(""),E.a.g.set(t,n,{lb:i})},E.C.ia=function(e){this.F=e},E.C.ia.prototype=new E.C.F,E.C.ia.prototype.constructor=E.C.ia,E.C.ia.prototype.text=function(){if(0==arguments.length){var t=E.a.g.get(this.F,n)||{};return t.bb===e&&t.lb&&(t.bb=t.lb.innerHTML),t.bb}E.a.g.set(this.F,n,{bb:arguments[0]})},E.b("templateSources",E.C),E.b("templateSources.domElement",E.C.F),E.b("templateSources.anonymousTemplate",E.C.ia)}(),function(){function t(e,t,n){var i;for(t=E.h.nextSibling(t);e&&(i=e)!==t;)n(i,e=E.h.nextSibling(i))}function n(e,n){if(e.length){var i=e[0],o=e[e.length-1],r=i.parentNode,a=E.ga.instance,s=a.preprocessNode;if(s){if(t(i,o,function(e,t){var n=e.previousSibling,r=s.call(a,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))}),e.length=0,!i)return;i===o?e.push(i):(e.push(i,o),E.a.Ua(e,r))}t(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||E.vc(n,e)}),t(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||E.aa.cd(e,[n])}),E.a.Ua(e,r)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function o(e,t,o,r,s){s=s||{};var A=(e&&i(e)||o||{}).ownerDocument,c=s.templateEngine||a;if(E.kc.xd(o,c,A),"number"!=typeof(o=c.renderTemplate(o,r,s,A)).length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(A=!1,t){case"replaceChildren":E.h.va(e,o),A=!0;break;case"replaceNode":E.a.Xc(e,o),A=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return A&&(n(o,r),s.afterRender&&E.u.G(s.afterRender,null,[o,r[s.as||"$data"]]),"replaceChildren"==t&&E.i.ma(e,E.i.H)),o}function r(e,t,n){return E.O(e)?e():"function"==typeof e?e(t,n):e}var a;E.gc=function(t){if(t!=e&&!(t instanceof E.ca))throw Error("templateEngine must inherit from ko.templateEngine");a=t},E.dc=function(t,n,s,A,c){if(((s=s||{}).templateEngine||a)==e)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",A){var l=i(A);return E.$(function(){var e=n&&n instanceof E.fa?n:new E.fa(n,null,null,null,{exportDependencies:!0}),a=r(t,e.$data,e);e=o(A,c,a,e,s),"replaceNode"==c&&(l=i(A=e))},null,{Sa:function(){return!l||!E.a.Sb(l)},l:l&&"replaceNode"==c?l.parentNode:l})}return E.aa.Xb(function(e){E.dc(t,n,s,e,"replaceNode")})},E.Qd=function(t,i,a,s,A){function c(e,t){E.u.G(E.a.ec,null,[s,e,u,a,l,t]),E.i.ma(s,E.i.H)}function l(e,t){n(t,d),a.afterRender&&a.afterRender(t,e),d=null}function u(e,n){d=A.createChildContext(e,{as:h,noChildContext:a.noChildContext,extend:function(e){e.$index=n,h&&(e[h+"Index"]=n)}});var i=r(t,e,d);return o(s,"ignoreTargetNode",i,d,a)}var d,h=a.as,g=!1===a.includeDestroyed||E.options.foreachHidesDestroyed&&!a.includeDestroyed;if(g||a.beforeRemove||!E.Pc(i))return E.$(function(){var t=E.a.f(i)||[];void 0===t.length&&(t=[t]),g&&(t=E.a.jb(t,function(t){return t===e||null===t||!E.a.f(t._destroy)})),c(t)},null,{l:s});c(i.v());var f=i.subscribe(function(e){c(i(),e)},null,"arrayChange");return f.l(s),f};var s=E.a.g.Z(),A=E.a.g.Z();E.c.template={init:function(e,t){var n=E.a.f(t());if("string"==typeof n||"name"in n)E.h.Ea(e);else if("nodes"in n){if(n=n.nodes||[],E.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&E.a.g.get(i,A)||(i=E.a.Yb(n),E.a.g.set(i,A,!0)),new E.C.ia(e).nodes(i)}else{if(!(0<(n=E.h.childNodes(e)).length))throw Error("Anonymous template defined, but no template content was provided");i=E.a.Yb(n),new E.C.ia(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,n,i,o,r){var a=n();i=!0,o=null,"string"==typeof(n=E.a.f(a))?n={}:(a="name"in n?n.name:t,"if"in n&&(i=E.a.f(n.if)),i&&"ifnot"in n&&(i=!E.a.f(n.ifnot)),i&&!a&&(i=!1)),"foreach"in n?o=E.Qd(a,i&&n.foreach||[],n,t,r):i?(i=r,"data"in n&&(i=r.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),o=E.dc(a,i,n,t)):E.h.Ea(t),r=o,(n=E.a.g.get(t,s))&&"function"==typeof n.s&&n.s(),E.a.g.set(t,s,!r||r.ja&&!r.ja()?e:r)}},E.m.Ra.template=function(e){return 1==(e=E.m.ac(e)).length&&e[0].unknown||E.m.Id(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},E.h.ea.template=!0}(),E.b("setTemplateEngine",E.gc),E.b("renderTemplate",E.dc),E.a.Kc=function(e,t,n){var i,o,r,a,s;if(e.length&&t.length)for(i=o=0;(!n||i<n)&&(a=e[o]);++o){for(r=0;s=t[r];++r)if(a.value===s.value){a.moved=s.index,s.moved=a.index,t.splice(r,1),i=r=0;break}i+=r}},E.a.Pb=function(){function e(e,t,n,i,o){var r,a,s,A,c,l=Math.min,u=Math.max,d=[],h=e.length,g=t.length,f=g-h||1,p=h+g+1;for(r=0;r<=h;r++)for(A=s,d.push(s=[]),c=l(g,r+f),a=u(0,r-1);a<=c;a++)s[a]=a?r?e[r-1]===t[a-1]?A[a-1]:l(A[a]||p,s[a-1]||p)+1:a+1:r+1;for(l=[],u=[],f=[],r=h,a=g;r||a;)g=d[r][a]-1,a&&g===d[r][a-1]?u.push(l[l.length]={status:n,value:t[--a],index:a}):r&&g===d[r-1][a]?f.push(l[l.length]={status:i,value:e[--r],index:r}):(--a,--r,o.sparse||l.push({status:"retained",value:t[a]}));return E.a.Kc(f,u,!o.dontLimitMoves&&10*h),l.reverse()}return function(t,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(t=t||[]).length<n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),E.b("utils.compareArrays",E.a.Pb),function(){function t(t,n,i,o,r){var a=[],s=E.$(function(){var e=n(i,r,E.a.Ua(a,t))||[];0<a.length&&(E.a.Xc(a,e),o&&E.u.G(o,null,[i,e,r])),a.length=0,E.a.Nb(a,e)},null,{l:t,Sa:function(){return!E.a.kd(a)}});return{Y:a,$:s.ja()?s:e}}var n=E.a.g.Z(),i=E.a.g.Z();E.a.ec=function(o,r,a,s,A,c){function l(e){h={Aa:e,pb:E.ta(C++)},I.push(h),_||T.push(h)}function u(e){h=m[e],C!==h.pb.v()&&w.push(h),h.pb(C++),E.a.Ua(h.Y,o),I.push(h)}function d(e,t){if(e)for(var n=0,i=t.length;n<i;n++)E.a.D(t[n].Y,function(i){e(i,n,t[n].Aa)})}void 0===(r=r||[]).length&&(r=[r]),s=s||{};var h,g,f,p,m=E.a.g.get(o,n),_=!m,I=[],y=0,C=0,b=[],B=[],v=[],w=[],T=[],S=0;if(_)E.a.D(r,l);else{if(!c||m&&m._countWaitingForRemove){var x=E.a.Mb(m,function(e){return e.Aa});c=E.a.Pb(x,r,{dontLimitMoves:s.dontLimitMoves,sparse:!0})}var D,Q,N;for(x=0;D=c[x];x++)switch(Q=D.moved,N=D.index,D.status){case"deleted":for(;y<N;)u(y++);Q===e&&((h=m[y]).$&&(h.$.s(),h.$=e),E.a.Ua(h.Y,o).length&&(s.beforeRemove&&(I.push(h),S++,h.Aa===i?h=null:v.push(h)),h&&b.push.apply(b,h.Y))),y++;break;case"added":for(;C<N;)u(y++);Q!==e?(B.push(I.length),u(Q)):l(D.value)}for(;C<r.length;)u(y++);I._countWaitingForRemove=S}E.a.g.set(o,n,I),d(s.beforeMove,w),E.a.D(b,s.beforeRemove?E.oa:E.removeNode);try{p=o.ownerDocument.activeElement}catch(e){}if(B.length)for(;(x=B.shift())!=e;){for(h=I[x],g=e;x;)if((f=I[--x].Y)&&f.length){g=f[f.length-1];break}for(r=0;y=h.Y[r];g=y,r++)E.h.Wb(o,y,g)}for(x=0;h=I[x];x++){for(h.Y||E.a.extend(h,t(o,a,h.Aa,A,h.pb)),r=0;y=h.Y[r];g=y,r++)E.h.Wb(o,y,g);!h.Ed&&A&&(A(h.Aa,h.Y,h.pb),h.Ed=!0,g=h.Y[h.Y.length-1])}for(p&&o.ownerDocument.activeElement!=p&&p.focus(),d(s.beforeRemove,v),x=0;x<v.length;++x)v[x].Aa=i;d(s.afterMove,w),d(s.afterAdd,T)}}(),E.b("utils.setDomNodeChildrenFromArrayMapping",E.a.ec),E.ba=function(){this.allowTemplateRewriting=!1},E.ba.prototype=new E.ca,E.ba.prototype.constructor=E.ba,E.ba.prototype.renderTemplateSource=function(e,t,n,i){return(t=9>E.a.W||!e.nodes?null:e.nodes())?E.a.la(t.cloneNode(!0).childNodes):(e=e.text(),E.a.ua(e,i))},E.ba.Ma=new E.ba,E.gc(E.ba.Ma),E.b("nativeTemplateEngine",E.ba),function(){E.$a=function(){var e=this.Hd=function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,r,a){if(a=a||n,r=r||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=t.data("precompiled");return s||(s=t.text()||"",s=o.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[i.$data],i=o.extend({koBindingContext:i},r.templateOptions),(i=o.tmpl(s,t,i)).appendTo(a.createElement("div")),o.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},E.$a.prototype=new E.ca,E.$a.prototype.constructor=E.$a;var e=new E.$a;0<e.Hd&&E.gc(e),E.b("jqueryTmplTemplateEngine",E.$a)}()})}();var o=ko;"undefined"!=typeof window?(ko=window.ko,void 0!==i?window.ko=i:delete window.ko):(ko=global.ko,void 0!==i?global.ko=i:delete global.ko);const r=o},595394:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i="__knockoutObservables",o="__knockoutSubscribable";function r(e,t){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var n=this,r=a(e,!0);return(t=t||Object.getOwnPropertyNames(e)).forEach(function(t){if(t!==i&&t!==o&&!(t in r)){var a=e[t],s=a instanceof Array,A=n.isObservable(a)?a:s?n.observableArray(a):n.observable(a);Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:A,set:n.isWriteableObservable(A)?A:void 0}),r[t]=A,s&&function(e,t){var n=null;e.computed(function(){n&&(n.dispose(),n=null);var i=t();i instanceof Array&&(n=function(e,t,n){var i=function(e,t){var n=t[o];if(!n){n=new e.subscribable,Object.defineProperty(t,o,{value:n});var i={};!function(e,t,n){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(i){var o=e[i];e[i]=function(){var e=o.apply(this,arguments);return!0!==n.pause&&t.notifySubscribers(this),e}})}(t,n,i),function(e,t,n,i){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(o){Object.defineProperty(t,o,{enumerable:!1,value:function(){var r;i.pause=!0;try{r=e.observableArray.fn[o].apply(e.observableArray(t),arguments)}finally{i.pause=!1}return n.notifySubscribers(t),r}})})}(e,t,n,i)}return n}(e,n);return i.subscribe(t)}(e,t,i))})}(n,A)}}),e}function a(e,t){var n=e[i];return!n&&t&&(n={},Object.defineProperty(e,i,{value:n})),n}function s(e,t,n){var i={owner:e,deferEvaluation:!0};if("function"==typeof n)i.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');i.read=n.get,i.write=n.set}return e[t]=this.computed(i),r.call(this,e,[t]),e}function A(e,t){if(!e)return null;var n=a(e,!1);return n&&n[t]||null}function c(e,t){var n=A(e,t);n&&n.valueHasMutated()}const l={attachToKo:function(e){e.track=r,e.getObservable=A,e.valueHasMutated=c,e.defineProperty=s}}},914684:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(973292),o=n(595394),r=n(677854);o.A.attachToKo(i.A),r.A.register(i.A);const a=i.A},544835:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(491446),o=n(605971),r=n(116112),a=n(677354),s=n(591978),A=n(687536),c=n(273578),l=n(249944);let u=1e12;const d=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function g(e,t){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("clock is required.");const n=(e=(0,r.A)(e)).ownerDocument;this.container=e;const a=n.createElement("div");var A;a.className="cesium-timeline-main",e.appendChild(a),this._topDiv=a,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=t,this._scrubJulian=t.currentTime,this._mainTicSpan=-1,this._mouseMode=0,this._touchMode=0,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(t.startTime,t.stopTime),this._onMouseDown=(A=this,function(e){4!==A._mouseMode&&(0===e.button?(A._mouseMode=1,A._scrubElement&&(A._scrubElement.style.backgroundPosition="-16px 0"),A._onMouseMove(e)):(A._mouseX=e.clientX,2===e.button?A._mouseMode=3:A._mouseMode=2)),e.preventDefault()}),this._onMouseUp=function(e){return function(t){e._mouseMode=0,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}(this),this._onMouseMove=function(e){return function(t){let n;if(1===e._mouseMode){t.preventDefault();const n=t.clientX-e._topDiv.getBoundingClientRect().left;n<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):n>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(2===e._mouseMode){if(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n){const t=n*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(s.A.addSeconds(e._startJulian,t,new s.A),s.A.addSeconds(e._endJulian,t,new s.A))}}else 3===e._mouseMode&&(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n&&e.zoomFrom(Math.pow(1.01,n)))}}(this),this._onMouseWheel=function(e){return function(t){let n=t.wheelDeltaY||t.wheelDelta||-t.detail;u=Math.max(Math.min(Math.abs(n),u),1),n/=u,e.zoomFrom(Math.pow(1.05,-n))}}(this),this._onTouchStart=function(e){return function(t){const n=t.touches.length;let i,o;const r=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=4,1===n?(i=s.A.secondsDifference(e._scrubJulian,e._startJulian),o=Math.round(i*e._topDiv.clientWidth/e._timeBarSecondsSpan+r),Math.abs(t.touches[0].clientX-o)<50?(e._touchMode=1,e._scrubElement&&(e._scrubElement.style.backgroundPosition=1===n?"-16px 0":"0 0")):(e._touchMode=3,e._touchState.centerX=t.touches[0].clientX-r)):2===n?(e._touchMode=2,e._touchState.centerX=.5*(t.touches[0].clientX+t.touches[1].clientX)-r,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=4}}(this),this._onTouchMove=function(e){return function(t){let n,o,r,a,A,c,l=1;const u=e._topDiv.getBoundingClientRect().left;3===e._touchMode&&(e._touchMode=2),e._mouseMode=4,1===e._touchMode?(t.preventDefault(),1===t.changedTouches.length&&(o=t.changedTouches[0].clientX-u,o>=0&&o<=e._topDiv.clientWidth&&e._setTimeBarTime(o,o*e._timeBarSecondsSpan/e._topDiv.clientWidth))):2===e._touchMode&&(r=t.touches.length,2===r?(a=.5*(t.touches[0].clientX+t.touches[1].clientX)-u,A=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):1===r&&(a=t.touches[0].clientX-u,A=0),(0,i.A)(a)&&(A>0&&e._touchState.spanX>0?(l=e._touchState.spanX/A,c=s.A.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-a*e._timeBarSecondsSpan*l)/e._topDiv.clientWidth,new s.A)):(n=e._touchState.centerX-a,c=s.A.addSeconds(e._startJulian,n*e._timeBarSecondsSpan/e._topDiv.clientWidth,new s.A)),e.zoomTo(c,s.A.addSeconds(c,e._timeBarSecondsSpan*l,new s.A)),e._touchState.centerX=a,e._touchState.spanX=A))}}(this),this._onTouchEnd=function(e){return function(t){const n=t.touches.length,i=e._topDiv.getBoundingClientRect().left;3===e._touchMode?(e._touchMode=1,e._onTouchMove(t)):1===e._touchMode&&e._onTouchMove(t),e._mouseMode=4,1!==n?e._touchMode=n>0?4:0:2===e._touchMode&&(e._touchState.centerX=t.touches[0].clientX-i),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}(this);const c=this._timeBarEle;n.addEventListener("mouseup",this._onMouseUp,!1),n.addEventListener("mousemove",this._onMouseMove,!1),c.addEventListener("mousedown",this._onMouseDown,!1),c.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),c.addEventListener("mousewheel",this._onMouseWheel,!1),c.addEventListener("touchstart",this._onTouchStart,!1),c.addEventListener("touchmove",this._onTouchMove,!1),c.addEventListener("touchend",this._onTouchEnd,!1),c.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},t.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}function f(e){return e<10?`0${e.toString()}`:e.toString()}g.prototype.addEventListener=function(e,t,n){this._topDiv.addEventListener(e,t,n)},g.prototype.removeEventListener=function(e,t,n){this._topDiv.removeEventListener(e,t,n)},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const e=this.container.ownerDocument;e.removeEventListener("mouseup",this._onMouseUp,!1),e.removeEventListener("mousemove",this._onMouseMove,!1);const t=this._timeBarEle;t.removeEventListener("mousedown",this._onMouseDown,!1),t.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),t.removeEventListener("mousewheel",this._onMouseWheel,!1),t.removeEventListener("touchstart",this._onTouchStart,!1),t.removeEventListener("touchmove",this._onTouchMove,!1),t.removeEventListener("touchend",this._onTouchEnd,!1),t.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),(0,a.A)(this)},g.prototype.addHighlightRange=function(e,t,n){const i=new c.A(e,t,n);return this._highlightRanges.push(i),this.resize(),i},g.prototype.addTrack=function(e,t,n,i){const o=new l.A(e,t,n,i);return this._trackList.push(o),this._lastHeight=void 0,this.resize(),o},g.prototype.zoomTo=function(e,t){if(!(0,i.A)(e))throw new o.A("startTime is required.");if(!(0,i.A)(t))throw new o.A("stopTime is required");if(s.A.lessThanOrEquals(t,e))throw new o.A("Start time must come before end time.");if(this._startJulian=e,this._endJulian=t,this._timeBarSecondsSpan=s.A.secondsDifference(t,e),this._clock&&this._clock.clockRange!==A.A.UNBOUNDED){const e=this._clock.startTime,t=this._clock.stopTime,n=s.A.secondsDifference(t,e),i=s.A.secondsDifference(e,this._startJulian),o=s.A.secondsDifference(t,this._endJulian);this._timeBarSecondsSpan>=n?(this._timeBarSecondsSpan=n,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):i>0?(this._endJulian=s.A.addSeconds(this._endJulian,i,new s.A),this._startJulian=e,this._timeBarSecondsSpan=s.A.secondsDifference(this._endJulian,this._startJulian)):o<0&&(this._startJulian=s.A.addSeconds(this._startJulian,o,new s.A),this._endJulian=t,this._timeBarSecondsSpan=s.A.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const n=document.createEvent("Event");n.initEvent("setzoom",!0,!0),n.startJulian=this._startJulian,n.endJulian=this._endJulian,n.epochJulian=this._epochJulian,n.totalSpan=this._timeBarSecondsSpan,n.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(n)},g.prototype.zoomFrom=function(e){let t=s.A.secondsDifference(this._scrubJulian,this._startJulian);e>1||t<0||t>this._timeBarSecondsSpan?t=.5*this._timeBarSecondsSpan:t+=t-.5*this._timeBarSecondsSpan;const n=this._timeBarSecondsSpan-t;this.zoomTo(s.A.addSeconds(this._startJulian,t-t*e,new s.A),s.A.addSeconds(this._endJulian,n*e-n,new s.A))},g.prototype.makeLabel=function(e){const t=s.A.toGregorianDate(e),n=t.millisecond;let i=" UTC";if(n>0&&this._timeBarSecondsSpan<3600){for(i=Math.floor(n).toString();i.length<3;)i=`0${i}`;i=`.${i}`}return`${h[t.month-1]} ${t.day} ${t.year} ${f(t.hour)}:${f(t.minute)}:${f(t.second)}${i}`},g.prototype.smallestTicInPixels=7,g.prototype._makeTics=function(){const e=this._timeBarEle,t=s.A.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan),i=n-8;let o;const r=this;this._needleEle.style.left=`${n.toString()}px`;let a="";const A=.01,c=31536e6,l=1e-10;let u=0,h=this._timeBarSecondsSpan;h<A?(h=A,this._timeBarSecondsSpan=A,this._endJulian=s.A.addSeconds(this._startJulian,A,new s.A)):h>c&&(h=c,this._timeBarSecondsSpan=c,this._endJulian=s.A.addSeconds(this._startJulian,c,new s.A));let g=this._timeBarEle.clientWidth;g<10&&(g=10);const f=this._startJulian,p=Math.min(h/g*1e-5,.4);let m;const _=s.A.toGregorianDate(f);m=h>31536e4?s.A.fromDate(new Date(Date.UTC(100*Math.floor(_.year/100),0))):h>31536e3?s.A.fromDate(new Date(Date.UTC(10*Math.floor(_.year/10),0))):h>86400?s.A.fromDate(new Date(Date.UTC(_.year,0))):s.A.fromDate(new Date(Date.UTC(_.year,_.month,_.day)));const I=s.A.secondsDifference(this._startJulian,s.A.addSeconds(m,p,new s.A));let E=I+h;function y(e){return Math.floor(I/e)*e}function C(e,t){return Math.ceil(e/t+.5)*t}function b(e){return(e-I)/h}function B(e,t){return e-t*Math.round(e/t)}this._epochJulian=m,this._rulerEle.innerHTML=this.makeLabel(s.A.addSeconds(this._endJulian,-.01,new s.A));let v=this._rulerEle.offsetWidth+20;v<30&&(v=180);const w=u;u-=l;const T={startTime:I,startJulian:f,epochJulian:m,duration:h,timeBarWidth:g,getAlpha:b};this._highlightRanges.forEach(function(e){a+=e.render(T)});let S=0,x=0,D=0,Q=v/g;Q>1&&(Q=1),Q*=this._timeBarSecondsSpan;let N=-1,R=-1;const M=d.length;let L;for(L=0;L<M;++L){const e=d[L];if(++N,S=e,e>Q&&e>u)break;R<0&&g*(e/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(R=N)}if(N>0){for(;N>0;)if(--N,Math.abs(B(S,d[N]))<1e-5){d[N]>=u&&(x=d[N]);break}if(R>=0)for(;R<N;){if(Math.abs(B(x,d[R]))<1e-5&&d[R]>=u){D=d[R];break}++R}}u=w,u>l&&D<1e-5&&Math.abs(u-S)>l&&(D=u,u<=S+l&&(x=0));let P,O=-999999;if(g*(D/this._timeBarSecondsSpan)>=3)for(o=y(D);o<=E;o=C(o,D))a+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(g*b(o)).toString()}px;"></span>`;if(g*(x/this._timeBarSecondsSpan)>=3)for(o=y(x);o<=E;o=C(o,x))a+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(g*b(o)).toString()}px;"></span>`;if(g*(S/this._timeBarSecondsSpan)>=2){this._mainTicSpan=S,E+=S,o=y(S);const e=s.A.computeTaiMinusUtc(m);for(;o<=E;){let t=s.A.addSeconds(f,o-I,new s.A);if(S>2.1){const n=s.A.computeTaiMinusUtc(t);Math.abs(n-e)>.1&&(o+=n-e,t=s.A.addSeconds(f,o-I,new s.A))}const n=Math.round(g*b(o)),i=this.makeLabel(t);this._rulerEle.innerHTML=i,P=this._rulerEle.offsetWidth,P<10&&(P=v);const r=n-(P/2-1);r>O?(O=r+P+5,a+=`<span class="cesium-timeline-ticMain" style="left: ${n.toString()}px;"></span><span class="cesium-timeline-ticLabel" style="left: ${r.toString()}px;">${i}</span>`):a+=`<span class="cesium-timeline-ticSub" style="left: ${n.toString()}px;"></span>`,o=C(o,S)}}else this._mainTicSpan=-1;a+=`<span class="cesium-timeline-icon16" style="left:${i}px;bottom:0;background-position: 0 0;"></span>`,e.innerHTML=a,this._scrubElement=e.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),T.y=0,this._trackList.forEach(function(e){e.render(r._context,T),T.y+=e.height})},g.prototype.updateFromClock=function(){this._scrubJulian=this._clock.currentTime;const e=this._scrubElement;if((0,i.A)(this._scrubElement)){const t=s.A.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==n&&(this._lastXPos=n,e.style.left=n-8+"px",this._needleEle.style.left=`${n}px`)}(0,i.A)(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(s.A.addSeconds(this._startJulian,this._timelineDrag,new s.A),s.A.addSeconds(this._endJulian,this._timelineDrag,new s.A)))},g.prototype._setTimeBarTime=function(e,t){if(e=Math.round(e),this._scrubJulian=s.A.addSeconds(this._startJulian,t,new s.A),this._scrubElement){const t=e-8;this._scrubElement.style.left=`${t.toString()}px`,this._needleEle.style.left=`${e.toString()}px`}const n=document.createEvent("Event");n.initEvent("settime",!0,!0),n.clientX=e,n.timeSeconds=t,n.timeJulian=this._scrubJulian,n.clock=this._clock,this._topDiv.dispatchEvent(n)},g.prototype.resize=function(){const e=this.container.clientWidth,t=this.container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;this._trackContainer.style.height=`${t}px`;let n=1;this._trackList.forEach(function(e){n+=e.height}),this._trackListEle.style.height=`${n.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=n,this._makeTics(),this._lastXPos=void 0,this._lastWidth=e,this._lastHeight=t};const p=g},273578:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(591978);function o(e,t,n){this._color=e,this._height=t,this._base=n??0}o.prototype.getHeight=function(){return this._height},o.prototype.getBase=function(){return this._base},o.prototype.getStartTime=function(){return this._start},o.prototype.getStopTime=function(){return this._stop},o.prototype.setRange=function(e,t){this._start=e,this._stop=t},o.prototype.render=function(e){let t="";if(this._start&&this._stop&&this._color){const n=i.A.secondsDifference(this._start,e.epochJulian);let o=Math.round(e.timeBarWidth*e.getAlpha(n));const r=i.A.secondsDifference(this._stop,e.epochJulian);let a=Math.round(e.timeBarWidth*e.getAlpha(r))-o;o<0&&(a+=o,o=0),o+a>e.timeBarWidth&&(a=e.timeBarWidth-o),a>0&&(t=`<span class="cesium-timeline-highlight" style="left: ${o.toString()}px; width: ${a.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return t};const r=o},249944:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(41476),o=n(591978),r=n(491446);function a(e,t,n,o){this.interval=e,this.height=t,this.color=n||new i.A(.5,.5,.5,1),this.backgroundColor=o||new i.A(0,0,0,0)}a.prototype.render=function(e,t){const n=this.interval.start,i=this.interval.stop,a=t.startJulian,s=o.A.addSeconds(t.startJulian,t.duration,new o.A);if(o.A.lessThan(n,a)&&o.A.greaterThan(i,s))e.fillStyle=this.color.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height);else if(o.A.lessThanOrEquals(n,s)&&o.A.greaterThanOrEquals(i,a)){let a,s,A;for(a=0;a<t.timeBarWidth;++a){const e=o.A.addSeconds(t.startJulian,a/t.timeBarWidth*t.duration,new o.A);!(0,r.A)(s)&&o.A.greaterThanOrEquals(e,n)?s=a:!(0,r.A)(A)&&o.A.greaterThanOrEquals(e,i)&&(A=a)}e.fillStyle=this.backgroundColor.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height),(0,r.A)(s)&&((0,r.A)(A)||(A=t.timeBarWidth),e.fillStyle=this.color.toCssColorString(),e.fillRect(s,t.y,Math.max(A-s,1),this.height))}};const s=a},798518:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var i=n(491446),o=n(605971),r=n(915325),a=n(914684);function s(e,t){if(!(0,i.A)(e))throw new o.A("command is required.");this._command=e,t=t??r.A.EMPTY_OBJECT,this.toggled=t.toggled??!1,this.tooltip=t.tooltip??"",a.A.track(this,["toggled","tooltip"])}Object.defineProperties(s.prototype,{command:{get:function(){return this._command}}});const A=s},674221:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(491446),o=n(605971),r=n(116112),a=n(677354),s=n(914684),A=n(316375);function c(e,t,n){if(!(0,i.A)(e))throw new o.A("container is required.");if(!(0,i.A)(t))throw new o.A("scene is required.");e=(0,r.A)(e);const a=new A.A(t,n);a._exitVRPath="M 25.770585,2.4552065 C 15.72282,13.962707 10.699956,19.704407 8.1768352,22.580207 c -1.261561,1.4379 -1.902282,2.1427 -2.21875,2.5 -0.141624,0.1599 -0.208984,0.2355 -0.25,0.2813 l 0.6875,0.75 c 10e-5,-10e-5 0.679191,0.727 0.6875,0.7187 0.01662,-0.016 0.02451,-0.024 0.03125,-0.031 0.01348,-0.014 0.04013,-0.038 0.0625,-0.062 0.04474,-0.05 0.120921,-0.1315 0.28125,-0.3126 0.320657,-0.3619 0.956139,-1.0921 2.2187499,-2.5312 2.5252219,-2.8781 7.5454589,-8.6169 17.5937499,-20.1250005 l -1.5,-1.3125 z m -20.5624998,3.9063 c -1.304375,0 -2.34375,1.0391 -2.34375,2.3437 l 0,10.8125005 c 0,1.3043 1.039375,2.375 2.34375,2.375 l 2.25,0 c 1.9518039,-2.2246 7.4710958,-8.5584 13.5624998,-15.5312005 l -15.8124998,0 z m 21.1249998,0 c -1.855467,2.1245 -2.114296,2.4005 -3.59375,4.0936995 1.767282,0.1815 3.15625,1.685301 3.15625,3.500001 0,1.9349 -1.56511,3.5 -3.5,3.5 -1.658043,0 -3.043426,-1.1411 -3.40625,-2.6875 -1.089617,1.2461 -2.647139,2.9988 -3.46875,3.9375 0.191501,-0.062 0.388502,-0.094 0.59375,-0.094 1.373338,0 2.50006,1.4614 2.5625,3.2812 l 8.3125,0 c 1.304375,0 2.34375,-1.0707 2.34375,-2.375 l 0,-10.8125005 c 0,-1.3046 -1.039375,-2.3437 -2.34375,-2.3437 l -0.65625,0 z M 9.5518351,10.423906 c 1.9348899,0 3.4999999,1.596401 3.4999999,3.531301 0,1.9349 -1.56511,3.5 -3.4999999,3.5 -1.9348899,0 -3.4999999,-1.5651 -3.4999999,-3.5 0,-1.9349 1.56511,-3.531301 3.4999999,-3.531301 z m 4.2187499,10.312601 c -0.206517,0.2356 -0.844218,0.9428 -1.03125,1.1562 l 0.8125,0 c 0.01392,-0.4081 0.107026,-0.7968 0.21875,-1.1562 z",a._enterVRPath="M 5.3125 6.375 C 4.008126 6.375 2.96875 7.4141499 2.96875 8.71875 L 2.96875 19.5 C 2.96875 20.8043 4.008126 21.875 5.3125 21.875 L 13.65625 21.875 C 13.71832 20.0547 14.845166 18.59375 16.21875 18.59375 C 17.592088 18.59375 18.71881 20.0552 18.78125 21.875 L 27.09375 21.875 C 28.398125 21.875 29.4375 20.8043 29.4375 19.5 L 29.4375 8.71875 C 29.4375 7.4141499 28.398125 6.375 27.09375 6.375 L 5.3125 6.375 z M 9.625 10.4375 C 11.55989 10.4375 13.125 12.03385 13.125 13.96875 C 13.125 15.90365 11.55989 17.46875 9.625 17.46875 C 7.69011 17.46875 6.125 15.90365 6.125 13.96875 C 6.125 12.03385 7.69011 10.4375 9.625 10.4375 z M 22.46875 10.4375 C 24.40364 10.4375 25.96875 12.03385 25.96875 13.96875 C 25.96875 15.90365 24.40364 17.46875 22.46875 17.46875 C 20.53386 17.46875 18.96875 15.90365 18.96875 13.96875 C 18.96875 12.03385 20.53386 10.4375 22.46875 10.4375 z";const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-vrButton",c.setAttribute("data-bind",'css: { "cesium-button-disabled" : _isOrthographic }, attr: { title: tooltip },click: command,enable: isVREnabled,cesiumSvgPath: { path: isVRMode ? _exitVRPath : _enterVRPath, width: 32, height: 32 }'),e.appendChild(c),s.A.applyBindings(a,c),this._container=e,this._viewModel=a,this._element=c}Object.defineProperties(c.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._viewModel.destroy(),s.A.cleanNode(this._element),this._container.removeChild(this._element),(0,a.A)(this)};const l=c},316375:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(491446),o=n(263842),r=n(605971),a=n(354975),s=n(811203),A=n(116112),c=n(677354),l=n(914684),u=n(391651),d=n(277441);function h(){const e=window.screen;(0,i.A)(e)&&((0,i.A)(e.unlockOrientation)?e.unlockOrientation():(0,i.A)(e.mozUnlockOrientation)?e.mozUnlockOrientation():(0,i.A)(e.msUnlockOrientation)?e.msUnlockOrientation():(0,i.A)(e.orientation&&e.orientation.unlock)&&e.orientation.unlock())}function g(e,t){if(!(0,i.A)(e))throw new r.A("scene is required.");const n=this,c=l.A.observable(o.A.enabled),g=l.A.observable(!1);this.isVRMode=void 0,l.A.defineProperty(this,"isVRMode",{get:function(){return g()}}),this.isVREnabled=void 0,l.A.defineProperty(this,"isVREnabled",{get:function(){return c()},set:function(e){c(e&&o.A.enabled)}}),this.tooltip=void 0,l.A.defineProperty(this,"tooltip",function(){return c()?g()?"Exit VR mode":"Enter VR mode":"VR mode is unavailable"});const f=l.A.observable(!1);this._isOrthographic=void 0,l.A.defineProperty(this,"_isOrthographic",{get:function(){return f()}}),this._eventHelper=new a.A,this._eventHelper.add(e.preRender,function(){f(e.camera.frustum instanceof s.A)}),this._locked=!1,this._noSleep=new u,this._command=(0,d.A)(function(){!function(e,t,n,r){r()||(n()?(t.useWebVR=!1,e._locked&&(h(),e._locked=!1),e._noSleep.disable(),o.A.exitFullscreen(),n(!1)):(o.A.fullscreen||o.A.requestFullscreen(e._vrElement),e._noSleep.enable(),e._locked||(e._locked=function(e){let t=!1;const n=window.screen;return(0,i.A)(n)&&((0,i.A)(n.lockOrientation)?t=n.lockOrientation(e):(0,i.A)(n.mozLockOrientation)?t=n.mozLockOrientation(e):(0,i.A)(n.msLockOrientation)?t=n.msLockOrientation(e):(0,i.A)(n.orientation&&n.orientation.lock)&&(t=n.orientation.lock(e))),t}("landscape")),t.useWebVR=!0,n(!0)))}(n,e,g,f)},l.A.getObservable(this,"isVREnabled")),this._vrElement=(0,A.A)(t)??document.body,this._callback=function(){!o.A.fullscreen&&g()&&(e.useWebVR=!1,n._locked&&(h(),n._locked=!1),n._noSleep.disable(),g(!1))},document.addEventListener(o.A.changeEventName,this._callback)}Object.defineProperties(g.prototype,{vrElement:{get:function(){return this._vrElement},set:function(e){if(!(e instanceof Element))throw new r.A("value must be a valid Element.");this._vrElement=e}},command:{get:function(){return this._command}}}),g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){this._eventHelper.removeAll(),document.removeEventListener(o.A.changeEventName,this._callback),(0,c.A)(this)};const f=g},123905:(e,t,n)=>{"use strict";n.d(t,{A:()=>K});var i=n(660662),o=n(491446),r=n(426807),a=n(622569),s=n(591978),A=n(367817),c=n(267980),l=n(808938),u=n(605971),d=n(116112),h=n(915325),g=n(565801),f=n(566732),p=n(354975),m=n(5188),_=n(955943),I=n(46257),E=n(149785),y=n(677354),C=n(810600),b=n(338863),B=n(806441),v=n(622463),w=n(714018),T=n(177647),S=n(112306),x=n(877987),D=n(413369),Q=n(217263),N=n(506527),R=n(221899),M=n(72211),L=n(288823),P=n(585820),O=n(618168),F=n(544835),U=n(674221);const k=new i.A;function G(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1}function H(e){const t=e.getPropertyIds();let n="";return t.forEach(function(t){const i=e.getProperty(t);(0,o.A)(i)&&(n+=`<tr><th>${t}</th><td>${i}</td></tr>`)}),n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function V(e){let t;const n=[],i=e.getPropertyIds();for(t=0;t<i.length;t++){const o=i[t];/^name$/i.test(o)?n[0]=e.getProperty(o):/name/i.test(o)?n[1]=e.getProperty(o):/^title$/i.test(o)?n[2]=e.getProperty(o):/^(id|identifier)$/i.test(o)?n[3]=e.getProperty(o):/element/i.test(o)?n[4]=e.getProperty(o):/(id|identifier)$/i.test(o)&&(n[5]=e.getProperty(o))}const r=n.length;for(t=0;t<r;t++){const e=n[t];if((0,o.A)(e)&&""!==e)return e}return"Unnamed Feature"}function z(e,t){const n=e.scene.pick(t.position);if((0,o.A)(n)){const e=n.id??n.primitive.id;if(e instanceof r.A)return e;if(n instanceof a.A)return new r.A({name:V(n),description:H(n),feature:n})}if((0,o.A)(e.scene.globe))return function(e,t){const n=e.scene,i=n.camera.getPickRay(t),a=n.imageryLayers.pickImageryLayerFeatures(i,n);if(!(0,o.A)(a))return;const s=new r.A({id:"Loading...",description:"Loading feature information..."});return a.then(function(t){if(e.selectedEntity!==s)return;if(!(0,o.A)(t)||0===t.length)return void(e.selectedEntity=W());const n=t[0],i=new r.A({id:n.name,description:n.description});if((0,o.A)(n.position)){const t=e.scene.ellipsoid.cartographicToCartesian(n.position,q);i.position=new l.A(t)}e.selectedEntity=i},function(){e.selectedEntity===s&&(e.selectedEntity=W())}),s}(e,t.position)}const j=new s.A;function Y(e,t){if((0,o.A)(t)){const n=t.clock;if((0,o.A)(n)&&(0,o.A)(e)){const t=n.startTime;let i=n.stopTime;s.A.equals(t,i)&&(i=s.A.addSeconds(t,A.A.EPSILON2,j)),e.updateFromClock(),e.zoomTo(t,i)}}}const q=new c.A;function W(){return new r.A({id:"None",description:"No features found."})}function J(e,t){if(!(0,o.A)(e))throw new u.A("container is required.");if(e=(0,d.A)(e),!1===(t=t??h.A.EMPTY_OBJECT).globe&&(0,o.A)(t.baseLayer)&&!1!==t.baseLayer)throw new u.A("Cannot use baseLayer when globe is disabled.");const n=!((0,o.A)(t.globe)&&!1===t.globe||(0,o.A)(t.baseLayerPicker)&&!1===t.baseLayerPicker);if(!n&&(0,o.A)(t.selectedImageryProviderViewModel))throw new u.A("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.baseLayer instead or set options.baseLayerPicker to true.");if(!n&&(0,o.A)(t.selectedTerrainProviderViewModel))throw new u.A("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");const i=this,r=document.createElement("div");r.className="cesium-viewer",e.appendChild(r);const a=document.createElement("div");a.className="cesium-viewer-cesiumWidgetContainer",r.appendChild(a);const s=document.createElement("div");s.className="cesium-viewer-bottom",r.appendChild(s);const A=t.scene3DOnly??!1;let c,l,y=!1;(0,o.A)(t.clockViewModel)?(l=t.clockViewModel,c=l.clock):(c=new g.A,l=new S.A(c),y=!0);const C=new f.A(a,{baseLayer:!(n&&(0,o.A)(t.selectedImageryProviderViewModel)||(0,o.A)(t.baseLayer)||(0,o.A)(t.imageryProvider))&&void 0,clock:c,shouldAnimate:t.shouldAnimate,skyBox:t.skyBox,skyAtmosphere:t.skyAtmosphere,sceneMode:t.sceneMode,ellipsoid:t.ellipsoid,mapProjection:t.mapProjection,globe:t.globe,orderIndependentTranslucency:t.orderIndependentTranslucency,automaticallyTrackDataSourceClocks:t.automaticallyTrackDataSourceClocks,contextOptions:t.contextOptions,useDefaultRenderLoop:t.useDefaultRenderLoop,targetFrameRate:t.targetFrameRate,showRenderLoopErrors:t.showRenderLoopErrors,useBrowserRecommendedResolution:t.useBrowserRecommendedResolution,creditContainer:(0,o.A)(t.creditContainer)?t.creditContainer:s,creditViewport:t.creditViewport,dataSources:t.dataSources,scene3DOnly:A,shadows:t.shadows,terrainShadows:t.terrainShadows,mapMode2D:t.mapMode2D,blurActiveElementOnCanvasFocus:t.blurActiveElementOnCanvasFocus,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples}),k=C.scene,H=new p.A;let V,j;if(H.add(c.onTick,J.prototype._onTick,this),!(0,o.A)(t.selectionIndicator)||!1!==t.selectionIndicator){const e=document.createElement("div");e.className="cesium-viewer-selectionIndicatorContainer",r.appendChild(e),V=new P.A(e,k)}if(!(0,o.A)(t.infoBox)||!1!==t.infoBox){const e=document.createElement("div");e.className="cesium-viewer-infoBoxContainer",r.appendChild(e),j=new N.A(e);const t=j.viewModel;H.add(t.cameraClicked,J.prototype._onInfoBoxCameraClicked,this),H.add(t.closeClicked,J.prototype._onInfoBoxClockClicked,this)}const Y=document.createElement("div");let q,W,K,X,Z,$,ee,te,ne,ie,oe,re,ae,se,Ae;if(Y.className="cesium-viewer-toolbar",r.appendChild(Y),!(0,o.A)(t.geocoder)||!1!==t.geocoder){const e=document.createElement("div");let n;e.className="cesium-viewer-geocoderContainer",Y.appendChild(e),"string"==typeof t.geocoder?n=[new m.A({scene:k,geocodeProviderType:t.geocoder})]:(0,o.A)(t.geocoder)&&"boolean"!=typeof t.geocoder&&(n=Array.isArray(t.geocoder)?t.geocoder:[t.geocoder]),q=new D.A({container:e,geocoderServices:n,scene:k}),H.add(q.viewModel.search.beforeExecute,J.prototype._clearObjects,this)}if((0,o.A)(t.homeButton)&&!1===t.homeButton||(W=new Q.A(Y,k),(0,o.A)(q)&&H.add(W.viewModel.command.afterExecute,function(){const e=q.viewModel;e.searchText="",e.isSearchInProgress&&e.search()}),H.add(W.viewModel.command.beforeExecute,J.prototype._clearTrackedObject,this)),!0===t.sceneModePicker&&A)throw new u.A("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(A||(0,o.A)(t.sceneModePicker)&&!1===t.sceneModePicker||(K=new L.A(Y,k)),t.projectionPicker&&(X=new M.A(Y,k)),n){const e=t.imageryProviderViewModels??(0,w.A)(),n=t.terrainProviderViewModels??(0,T.A)();Z=new v.A(Y,{globe:k.globe,imageryProviderViewModels:e,selectedImageryProviderViewModel:t.selectedImageryProviderViewModel,terrainProviderViewModels:n,selectedTerrainProviderViewModel:t.selectedTerrainProviderViewModel}),$=Y.getElementsByClassName("cesium-baseLayerPicker-dropDown")[0]}if((0,o.A)(t.baseLayer)&&!1!==t.baseLayer&&(n&&(Z.viewModel.selectedImagery=void 0),k.imageryLayers.removeAll(),k.imageryLayers.add(t.baseLayer)),(0,o.A)(t.terrainProvider)&&(n&&(Z.viewModel.selectedTerrain=void 0),k.terrainProvider=t.terrainProvider),(0,o.A)(t.terrain)){if((0,o.A)(t.terrainProvider))throw new u.A("Specify either options.terrainProvider or options.terrain.");n&&(k.globe.depthTestAgainstTerrain=!0),k.setTerrain(t.terrain)}if(!(0,o.A)(t.navigationHelpButton)||!1!==t.navigationHelpButton){let e=!0;try{if((0,o.A)(window.localStorage)){const t=window.localStorage.getItem("cesium-hasSeenNavHelp");(0,o.A)(t)&&Boolean(t)?e=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(e){}ee=new R.A({container:Y,instructionsInitiallyVisible:t.navigationInstructionsInitiallyVisible??e})}if(!(0,o.A)(t.animation)||!1!==t.animation){const e=document.createElement("div");e.className="cesium-viewer-animationContainer",r.appendChild(e),te=new b.A(e,new B.A(l))}if(!(0,o.A)(t.timeline)||!1!==t.timeline){const e=document.createElement("div");e.className="cesium-viewer-timelineContainer",r.appendChild(e),ne=new F.A(e,c),ne.addEventListener("settime",G,!1),ne.zoomTo(c.startTime,c.stopTime)}if((0,o.A)(t.fullscreenButton)&&!1===t.fullscreenButton||(re=document.createElement("div"),re.className="cesium-viewer-fullscreenContainer",r.appendChild(re),ie=new x.A(re,t.fullscreenElement),oe=(0,O.A)(ie.viewModel,"isFullscreenEnabled",function(e){re.style.display=e?"block":"none",(0,o.A)(ne)&&(ne.container.style.right=`${re.clientWidth}px`,ne.resize())})),t.vrButton){const e=document.createElement("div");e.className="cesium-viewer-vrContainer",r.appendChild(e),ae=new U.A(e,k,t.fullScreenElement),se=(0,O.A)(ae.viewModel,"isVREnabled",function(t){e.style.display=t?"block":"none",(0,o.A)(ie)&&(e.style.right=`${re.clientWidth}px`),(0,o.A)(ne)&&(ne.container.style.right=`${e.clientWidth}px`,ne.resize())}),Ae=(0,O.A)(ae.viewModel,"isVRMode",function(e){!function(e,t){const n=e._geocoder,i=e._homeButton,r=e._sceneModePicker,a=e._projectionPicker,s=e._baseLayerPicker,A=e._animation,c=e._timeline,l=e._fullscreenButton,u=e._infoBox,d=e._selectionIndicator,h=t?"hidden":"visible";if((0,o.A)(n)&&(n.container.style.visibility=h),(0,o.A)(i)&&(i.container.style.visibility=h),(0,o.A)(r)&&(r.container.style.visibility=h),(0,o.A)(a)&&(a.container.style.visibility=h),(0,o.A)(s)&&(s.container.style.visibility=h),(0,o.A)(A)&&(A.container.style.visibility=h),(0,o.A)(c)&&(c.container.style.visibility=h),(0,o.A)(l)&&l.viewModel.isFullscreenEnabled&&(l.container.style.visibility=h),(0,o.A)(u)&&(u.container.style.visibility=h),(0,o.A)(d)&&(d.container.style.visibility=h),e._container){const n=t||!(0,o.A)(l)?0:l.container.clientWidth;e._vrButton.container.style.right=`${n}px`,e.forceResize()}}(i,e)})}this._baseLayerPickerDropDown=$,this._fullscreenSubscription=oe,this._vrSubscription=se,this._vrModeSubscription=Ae,this._dataSourceChangedListeners={},this._container=e,this._bottomContainer=s,this._element=r,this._cesiumWidget=C,this._selectionIndicator=V,this._infoBox=j,this._clockViewModel=l,this._destroyClockViewModel=y,this._toolbar=Y,this._homeButton=W,this._sceneModePicker=K,this._projectionPicker=X,this._baseLayerPicker=Z,this._navigationHelpButton=ee,this._animation=te,this._timeline=ne,this._fullscreenButton=ie,this._vrButton=ae,this._geocoder=q,this._eventHelper=H,this._lastWidth=0,this._lastHeight=0,this._enableInfoOrSelection=(0,o.A)(j)||(0,o.A)(V),this._selectedEntity=void 0,this._selectedEntityChanged=new _.A;const ce=this._cesiumWidget.dataSources,le=this._cesiumWidget.dataSourceDisplay;H.add(ce.dataSourceAdded,J.prototype._onDataSourceAdded,this),H.add(ce.dataSourceRemoved,J.prototype._onDataSourceRemoved,this),H.add(k.postUpdate,J.prototype.resize,this);const ue=ce.length;for(let e=0;e<ue;e++)this._dataSourceAdded(ce,ce.get(e));this._dataSourceAdded(void 0,le.defaultDataSource),H.add(ce.dataSourceAdded,J.prototype._dataSourceAdded,this),H.add(ce.dataSourceRemoved,J.prototype._dataSourceRemoved,this),C.screenSpaceEventHandler.setInputAction(function(e){i.selectedEntity=z(i,e)},E.A.LEFT_CLICK),C.screenSpaceEventHandler.setInputAction(function(e){const t=z(i,e);(0,o.A)(t)?I.A.getValueOrUndefined(t.position,i.clock.currentTime)?i.trackedEntity=t:i.zoomTo(t):(0,o.A)(i.trackedEntity)&&(i.trackedEntity=void 0)},E.A.LEFT_DOUBLE_CLICK),C._canAnimateUpdateCallback=this._updateCanAnimate(this)}Object.defineProperties(J.prototype,{container:{get:function(){return this._container}},creditDisplay:{get:function(){return this._cesiumWidget.creditDisplay}},bottomContainer:{get:function(){return this._bottomContainer}},cesiumWidget:{get:function(){return this._cesiumWidget}},selectionIndicator:{get:function(){return this._selectionIndicator}},infoBox:{get:function(){return this._infoBox}},geocoder:{get:function(){return this._geocoder}},homeButton:{get:function(){return this._homeButton}},sceneModePicker:{get:function(){return this._sceneModePicker}},projectionPicker:{get:function(){return this._projectionPicker}},baseLayerPicker:{get:function(){return this._baseLayerPicker}},navigationHelpButton:{get:function(){return this._navigationHelpButton}},animation:{get:function(){return this._animation}},timeline:{get:function(){return this._timeline}},fullscreenButton:{get:function(){return this._fullscreenButton}},vrButton:{get:function(){return this._vrButton}},dataSourceDisplay:{get:function(){return this._cesiumWidget.dataSourceDisplay}},entities:{get:function(){return this._cesiumWidget.entities}},dataSources:{get:function(){return this._cesiumWidget.dataSources}},canvas:{get:function(){return this._cesiumWidget.canvas}},scene:{get:function(){return this._cesiumWidget.scene}},shadows:{get:function(){return this.scene.shadowMap.enabled},set:function(e){this.scene.shadowMap.enabled=e}},terrainShadows:{get:function(){return this.scene.globe.shadows},set:function(e){this.scene.globe.shadows=e}},shadowMap:{get:function(){return this.scene.shadowMap}},imageryLayers:{get:function(){return this.scene.imageryLayers}},terrainProvider:{get:function(){return this.scene.terrainProvider},set:function(e){this.scene.terrainProvider=e}},camera:{get:function(){return this.scene.camera}},ellipsoid:{get:function(){return this._scene.ellipsoid}},postProcessStages:{get:function(){return this.scene.postProcessStages}},clock:{get:function(){return this._clockViewModel.clock}},clockViewModel:{get:function(){return this._clockViewModel}},screenSpaceEventHandler:{get:function(){return this._cesiumWidget.screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._cesiumWidget.targetFrameRate},set:function(e){this._cesiumWidget.targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._cesiumWidget.useDefaultRenderLoop},set:function(e){this._cesiumWidget.useDefaultRenderLoop=e}},resolutionScale:{get:function(){return this._cesiumWidget.resolutionScale},set:function(e){this._cesiumWidget.resolutionScale=e}},useBrowserRecommendedResolution:{get:function(){return this._cesiumWidget.useBrowserRecommendedResolution},set:function(e){this._cesiumWidget.useBrowserRecommendedResolution=e}},allowDataSourcesToSuspendAnimation:{get:function(){return this._cesiumWidget.allowDataSourcesToSuspendAnimation},set:function(e){this._cesiumWidget.allowDataSourcesToSuspendAnimation=e}},trackedEntity:{get:function(){return this._cesiumWidget.trackedEntity},set:function(e){this._cesiumWidget.trackedEntity=e}},selectedEntity:{get:function(){return this._selectedEntity},set:function(e){if(this._selectedEntity!==e){this._selectedEntity=e;const t=(0,o.A)(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;(0,o.A)(e)?(0,o.A)(t)&&t.animateAppear():(0,o.A)(t)&&t.animateDepart(),this._selectedEntityChanged.raiseEvent(e)}}},selectedEntityChanged:{get:function(){return this._selectedEntityChanged}},trackedEntityChanged:{get:function(){return this._cesiumWidget.trackedEntityChanged}},clockTrackedDataSource:{get:function(){return this._cesiumWidget.clockTrackedDataSource},set:function(e){this._cesiumWidget.clockTrackedDataSource!==e&&(this._cesiumWidget.clockTrackedDataSource=e,Y(this._timeline,e))}}}),J.prototype.extend=function(e,t){if(!(0,o.A)(e))throw new u.A("mixin is required.");e(this,t)},J.prototype.resize=function(){const e=this._cesiumWidget,t=this._container,n=t.clientWidth,i=t.clientHeight,r=(0,o.A)(this._animation),a=(0,o.A)(this._timeline);if(e.resize(),n===this._lastWidth&&i===this._lastHeight)return;const s=i-125,A=this._baseLayerPickerDropDown;(0,o.A)(A)&&(A.style.maxHeight=`${s}px`),(0,o.A)(this._geocoder)&&(this._geocoder.searchSuggestionsContainer.style.maxHeight=`${s}px`),(0,o.A)(this._infoBox)&&(this._infoBox.viewModel.maxHeight=s);const c=this._timeline;let l,u=0,d=5,h=3,g=0;if(r&&"hidden"!==window.getComputedStyle(this._animation.container).visibility){const e=this._lastWidth;l=this._animation.container,n>900?(u=169,e<=900&&(l.style.width="169px",l.style.height="112px",this._animation.resize())):n>=600?(u=136,(e<600||e>900)&&(l.style.width="136px",l.style.height="90px",this._animation.resize())):(u=106,(e>600||0===e)&&(l.style.width="106px",l.style.height="70px",this._animation.resize())),d=u+5}if(a&&"hidden"!==window.getComputedStyle(this._timeline.container).visibility){const e=this._fullscreenButton,t=this._vrButton,n=c.container,i=n.style;h=n.clientHeight+3,i.left=`${u}px`;let r=0;(0,o.A)(e)&&(r+=e.container.clientWidth),(0,o.A)(t)&&(r+=t.container.clientWidth),i.right=`${r}px`,c.resize()}!a&&(0,o.A)(this._fullscreenButton)&&(g=this._fullscreenButton.container.clientWidth),this._bottomContainer.style.left=`${d}px`,this._bottomContainer.style.bottom=`${h}px`,this._bottomContainer.style.right=`${g}px`,this._lastWidth=n,this._lastHeight=i},J.prototype.forceResize=function(){this._lastWidth=0,this.resize()},J.prototype.render=function(){this._cesiumWidget.render()},J.prototype.isDestroyed=function(){return!1},J.prototype.destroy=function(){return(0,o.A)(this.screenSpaceEventHandler)&&!this.screenSpaceEventHandler.isDestroyed()&&(this.screenSpaceEventHandler.removeInputAction(E.A.LEFT_CLICK),this.screenSpaceEventHandler.removeInputAction(E.A.LEFT_DOUBLE_CLICK)),this._container.removeChild(this._element),this._element.removeChild(this._toolbar),this._eventHelper.removeAll(),(0,o.A)(this._geocoder)&&(this._geocoder=this._geocoder.destroy()),(0,o.A)(this._homeButton)&&(this._homeButton=this._homeButton.destroy()),(0,o.A)(this._sceneModePicker)&&(this._sceneModePicker=this._sceneModePicker.destroy()),(0,o.A)(this._projectionPicker)&&(this._projectionPicker=this._projectionPicker.destroy()),(0,o.A)(this._baseLayerPicker)&&(this._baseLayerPicker=this._baseLayerPicker.destroy()),(0,o.A)(this._animation)&&(this._element.removeChild(this._animation.container),this._animation=this._animation.destroy()),(0,o.A)(this._timeline)&&(this._timeline.removeEventListener("settime",G,!1),this._element.removeChild(this._timeline.container),this._timeline=this._timeline.destroy()),(0,o.A)(this._fullscreenButton)&&(this._fullscreenSubscription.dispose(),this._element.removeChild(this._fullscreenButton.container),this._fullscreenButton=this._fullscreenButton.destroy()),(0,o.A)(this._vrButton)&&(this._vrSubscription.dispose(),this._vrModeSubscription.dispose(),this._element.removeChild(this._vrButton.container),this._vrButton=this._vrButton.destroy()),(0,o.A)(this._infoBox)&&(this._element.removeChild(this._infoBox.container),this._infoBox=this._infoBox.destroy()),(0,o.A)(this._selectionIndicator)&&(this._element.removeChild(this._selectionIndicator.container),this._selectionIndicator=this._selectionIndicator.destroy()),this._destroyClockViewModel&&(this._clockViewModel=this._clockViewModel.destroy()),this._cesiumWidget=this._cesiumWidget.destroy(),(0,y.A)(this)},J.prototype._dataSourceAdded=function(e,t){t.entities.collectionChanged.addEventListener(J.prototype._onEntityCollectionChanged,this)},J.prototype._dataSourceRemoved=function(e,t){const n=t.entities;n.collectionChanged.removeEventListener(J.prototype._onEntityCollectionChanged,this),(0,o.A)(this.selectedEntity)&&n.getById(this.selectedEntity.id)===this.selectedEntity&&(this.selectedEntity=void 0)},J.prototype._updateCanAnimate=function(e){return function(t){e._clockViewModel.canAnimate=t}},J.prototype._onTick=function(e){const t=e.currentTime;let n,i=!1;const r=this.selectedEntity,a=(0,o.A)(r)&&this._enableInfoOrSelection;a&&r.isShowing&&r.isAvailable(t)&&(this._cesiumWidget.dataSourceDisplay.getBoundingSphere(r,!0,k)!==C.A.FAILED?n=k.center:(0,o.A)(r.position)&&(n=r.position.getValue(t,n)),i=(0,o.A)(n));const s=(0,o.A)(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;(0,o.A)(s)&&(s.position=c.A.clone(n,s.position),s.showSelection=a&&i,s.update());const A=(0,o.A)(this._infoBox)?this._infoBox.viewModel:void 0;(0,o.A)(A)&&(A.showInfo=a,A.enableCamera=i,A.isCameraTracking=this.trackedEntity===this.selectedEntity,a?(A.titleText=r.name??r.id,A.description=I.A.getValueOrDefault(r.description,t,"")):(A.titleText="",A.description=""))},J.prototype._onEntityCollectionChanged=function(e,t,n){const i=n.length;for(let e=0;e<i;e++){const t=n[e];this.selectedEntity===t&&(this.selectedEntity=void 0)}},J.prototype._onInfoBoxCameraClicked=function(e){if(e.isCameraTracking&&this.trackedEntity===this.selectedEntity)this.trackedEntity=void 0;else{const e=this.selectedEntity.position;(0,o.A)(e)?this.trackedEntity=this.selectedEntity:this.zoomTo(this.selectedEntity)}},J.prototype._clearTrackedObject=function(){this.trackedEntity=void 0},J.prototype._onInfoBoxClockClicked=function(e){this.selectedEntity=void 0},J.prototype._clearObjects=function(){this.trackedEntity=void 0,this.selectedEntity=void 0},J.prototype._onDataSourceChanged=function(e){this.clockTrackedDataSource===e&&Y(this.timeline,e)},J.prototype._onDataSourceAdded=function(e,t){this._cesiumWidget._automaticallyTrackDataSourceClocks&&t===this.clockTrackedDataSource&&Y(this._timeline,t);const n=t.entities.id,i=this._eventHelper.add(t.changedEvent,J.prototype._onDataSourceChanged,this);this._dataSourceChangedListeners[n]=i},J.prototype._onDataSourceRemoved=function(e,t){const n=t.entities.id;this._dataSourceChangedListeners[n](),this._dataSourceChangedListeners[n]=void 0},J.prototype.zoomTo=function(e,t){return this._cesiumWidget.zoomTo(e,t)},J.prototype.flyTo=function(e,t){return this._cesiumWidget.flyTo(e,t)};const K=J},277441:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(491446),o=n(605971),r=n(955943),a=n(914684);const s=function(e,t){if(!(0,i.A)(e))throw new o.A("func is required.");t=t??!0;const n=new r.A,s=new r.A;function A(){if(!A.canExecute)throw new o.A("Cannot execute command, canExecute is false.");const t={args:arguments,cancel:!1};let i;return n.raiseEvent(t),t.cancel||(i=e.apply(null,arguments),s.raiseEvent(i)),i}return A.canExecute=t,a.A.track(A,["canExecute"]),Object.defineProperties(A,{beforeExecute:{value:n},afterExecute:{value:s}}),A}},618168:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(914684);const o=function(e,t,n,o,r){return n.call(o,e[t]),i.A.getObservable(e,t).subscribe(n,o,r)}},50040:(e,t,n)=>{"use strict";n.d(t,{GS:()=>o,K:()=>l});var i,o=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-o.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Bounce.In(2*e):.5*o.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),r=function(){return performance.now()},a=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=0,o=t;i<o.length;i++){var r=o[i];null===(e=r._group)||void 0===e||e.remove(r),r._group=this,this._tweens[r.getId()]=r,this._tweensAddedDuringUpdate[r.getId()]=r}},e.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=e;n<i.length;n++){var o=i[n];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},e.prototype.update=function(e,t){void 0===e&&(e=r()),void 0===t&&(t=!0);var n=Object.keys(this._tweens);if(0!==n.length)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]],a=!t;o&&!1===o.update(e,a)&&!t&&this.remove(o)}n=Object.keys(this._tweensAddedDuringUpdate)}},e}(),s={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=s.Utils.Linear;return t<0?r(e[0],e[1],i):t>1?r(e[n],e[n-1],n-i):r(e[o],e[o+1>n?n:o+1],i-o)},Bezier:function(e,t){for(var n=0,i=e.length-1,o=Math.pow,r=s.Utils.Bernstein,a=0;a<=i;a++)n+=o(1-t,i-a)*o(t,a)*e[a]*r(i,a);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=s.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(o=Math.floor(i=n*(1+t))),r(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],i-o)):t<0?e[0]-(r(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(r(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):r(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],i-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=s.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(i=[1],function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}),CatmullRom:function(e,t,n,i,o){var r=.5*(n-e),a=.5*(i-t),s=o*o;return(2*t-2*n+r+a)*(o*s)+(-3*t+3*n-2*r-a)*s+r*o+t}}},A=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),c=new a,l=function(){function e(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=o.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=A.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,"object"==typeof t?(this._group=t,t.add(this)):!0===t&&(this._group=c,c.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=r()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,n,i,o){for(var r in n){var a=e[r],s=Array.isArray(a),A=s?"array":typeof a,c=!s&&Array.isArray(n[r]);if("undefined"!==A&&"function"!==A){if(c){if(0===(p=n[r]).length)continue;for(var l=[a],u=0,d=p.length;u<d;u+=1){var h=this._handleRelativeValue(a,p[u]);if(isNaN(h)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}l.push(h)}c&&(n[r]=l)}if("object"!==A&&!s||!a||c)(void 0===t[r]||o)&&(t[r]=a),s||(t[r]*=1),i[r]=c?n[r].slice().reverse():t[r]||0;else{t[r]=s?[]:{};var g=a;for(var f in g)t[r][f]=g[f];i[r]=s?[]:{};var p=n[r];if(!this._isDynamic){var m={};for(var f in p)m[f]=p[f];n[r]=p=m}this._setupProperties(g,t[r],p,i[r],o)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(e){return void 0===e&&(e=r()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e),this},e.prototype.resume=function(e){return void 0===e&&(e=r()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var e;return null===(e=this._group)||void 0===e||e.remove(this),this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=o.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=s.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(t,n){var i,o,a=this;if(void 0===t&&(t=r()),void 0===n&&(n=e.autoStartOnUpdate),this._isPaused)return!0;if(!this._goToEnd&&!this._isPlaying){if(!n)return!1;this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=t-this._startTime,A=this._duration+(null!==(i=this._repeatDelayTime)&&void 0!==i?i:this._delayTime),c=this._duration+this._repeat*A,l=function(){if(0===a._duration)return 1;if(s>c)return 1;var e=Math.trunc(s/A),t=s-e*A,n=Math.min(t/a._duration,1);return 0===n&&s===a._duration?1:n}(),u=this._easingFunction(l);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),this._onUpdateCallback&&this._onUpdateCallback(this._object,l),0===this._duration||s>=this._duration){if(this._repeat>0){var d=Math.min(Math.trunc((s-this._duration)/A)+1,this._repeat);for(o in isFinite(this._repeat)&&(this._repeat-=d),this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[o]||(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=A*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,g=this._chainedTweens.length;h<g;h++)this._chainedTweens[h].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,i){for(var o in n)if(void 0!==t[o]){var r=t[o]||0,a=n[o],s=Array.isArray(e[o]),A=Array.isArray(a);!s&&A?e[o]=this._interpolationFunction(a,i):"object"==typeof a&&a?this._updateProperties(e[o],r,a,i):"number"==typeof(a=this._handleRelativeValue(r,a))&&(e[o]=r+(a-r)*i)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e.autoStartOnUpdate=!1,e}(),u=(A.nextId,c);u.getAll.bind(u),u.removeAll.bind(u),u.add.bind(u),u.remove.bind(u),u.update.bind(u)}}]);